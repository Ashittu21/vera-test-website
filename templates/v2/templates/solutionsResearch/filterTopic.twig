
{# set relencode =  craft.request.getParam('topics')|json_encode #}

{% if streamOptions.filterTopics is defined %}
  {% for topic_item in streamOptions.filterTopics %}
    <div class="dropMenu dropdown-areas">
     <div class="slabel searchLabel">Topic</div>
      
      <button class="dropdown-toggle" type="button" id="menuTopics" aria-haspopup="true">
        <span class="dropdown-text-topics">Select Topic</span>
        <span class="caret"></span>
      </button>

      <ul class="dropdown-menu dropdown-menu-topics" id="listTopics" aria-labelledby="menuTopics">
        {% for relation in topic_item.relations %}
          
          {% if topic_item.type == 'type' %}
            {% set relation_id = relation.handle %}
            {% set relation_type = 'type' %}
          {% else %}
            {% set relation_id = relation.id %}
            {% set relation_type = 'relation' %}
          {% endif %}

          <li class="checkFilter">
            <input type="checkbox" name='optionTopics[]' id="{{ relation_id }}" class="{{ relation_type }}_checkbox option justone" value="{{ relation_id }}"  data-type="{{ topic_item.type }}" {% if relacionesArray is defined  %} {% if relation_id in relacionesArray %}checked{% endif %}{% endif %}/>
            <label class="labelTopic" for="{{ relation_id }}">
              {% if topic_item.title == 'Action Areas' %}
                  {{ relation }}
              {% elseif topic_item.type == 'type' %}
                {{ relation.name }}
              {% else %}
                {{ relation }}
              {% endif %}
            </label>
          </li>
        {% endfor %}
        <li class="applybtn"><button type="Button" class="apply ctaSearch">APPLY</button></li> 
      </ul>
    </div>
  {% endfor %}
{% endif %}
