(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function r(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerpolicy&&(c.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?c.credentials="include":l.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(l){if(l.ep)return;l.ep=!0;const c=r(l);fetch(l.href,c)}})();function bn(){}function U_(e,t){for(const r in t)e[r]=t[r];return e}function Ky(e){return e()}function i0(){return Object.create(null)}function tA(e){e.forEach(Ky)}function id(e){return typeof e=="function"}function ti(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function L_(e){return Object.keys(e).length===0}function Gy(e,...t){if(e==null)return bn;const r=e.subscribe(...t);return r.unsubscribe?()=>r.unsubscribe():r}function $r(e,t,r){e.$$.on_destroy.push(Gy(t,r))}function wA(e,t,r,s){if(e){const l=qy(e,t,r,s);return e[0](l)}}function qy(e,t,r,s){return e[1]&&s?U_(r.ctx.slice(),e[1](s(t))):r.ctx}function bA(e,t,r,s){if(e[2]&&s){const l=e[2](s(r));if(t.dirty===void 0)return l;if(typeof l=="object"){const c=[],h=Math.max(t.dirty.length,l.length);for(let a=0;a<h;a+=1)c[a]=t.dirty[a]|l[a];return c}return t.dirty|l}return t.dirty}function xA(e,t,r,s,l,c){if(l){const h=qy(t,r,s,c);e.p(h,l)}}function BA(e){if(e.ctx.length>32){const t=[],r=e.ctx.length/32;for(let s=0;s<r;s++)t[s]=-1;return t}return-1}function s0(e){return e??""}function vi(e,t,r){return e.set(r),t}function it(e,t){e.appendChild(t)}function st(e,t,r){e.insertBefore(t,r||null)}function nt(e){e.parentNode&&e.parentNode.removeChild(e)}function Vl(e,t){for(let r=0;r<e.length;r+=1)e[r]&&e[r].d(t)}function Lt(e){return document.createElement(e)}function Gn(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function Fr(e){return document.createTextNode(e)}function $t(){return Fr(" ")}function yo(){return Fr("")}function es(e,t,r,s){return e.addEventListener(t,r,s),()=>e.removeEventListener(t,r,s)}function ue(e,t,r){r==null?e.removeAttribute(t):e.getAttribute(t)!==r&&e.setAttribute(t,r)}function Gd(e,t,r){t in e?e[t]=typeof e[t]=="boolean"&&r===""?!0:r:ue(e,t,r)}function k_(e,t,r){e.setAttributeNS("http://www.w3.org/1999/xlink",t,r)}function Q_(e){return Array.from(e.childNodes)}function $n(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function kn(e,t,r,s){r===null?e.style.removeProperty(t):e.style.setProperty(t,r,s?"important":"")}function Vh(e,t){for(let r=0;r<e.options.length;r+=1){const s=e.options[r];if(s.__value===t){s.selected=!0;return}}e.selectedIndex=-1}function Vm(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}let qd;function P_(){if(qd===void 0){qd=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{qd=!0}}return qd}function M_(e,t){getComputedStyle(e).position==="static"&&(e.style.position="relative");const s=Lt("iframe");s.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),s.setAttribute("aria-hidden","true"),s.tabIndex=-1;const l=P_();let c;return l?(s.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",c=es(window,"message",h=>{h.source===s.contentWindow&&t()})):(s.src="about:blank",s.onload=()=>{c=es(s.contentWindow,"resize",t)}),it(e,s),()=>{(l||c&&s.contentWindow)&&c(),nt(s)}}function pp(e,t,r){e.classList[r?"add":"remove"](t)}function D_(e,t,{bubbles:r=!1,cancelable:s=!1}={}){const l=document.createEvent("CustomEvent");return l.initCustomEvent(e,r,s,t),l}function Kh(e,t){return new e(t)}let Wf;function Hf(e){Wf=e}function sd(){if(!Wf)throw new Error("Function called outside component initialization");return Wf}function Wa(e){sd().$$.on_mount.push(e)}function kp(e){sd().$$.on_destroy.push(e)}function $h(){const e=sd();return(t,r,{cancelable:s=!1}={})=>{const l=e.$$.callbacks[t];if(l){const c=D_(t,r,{cancelable:s});return l.slice().forEach(h=>{h.call(e,c)}),!c.defaultPrevented}return!0}}function Gh(e,t){return sd().$$.context.set(e,t),t}function $o(e){return sd().$$.context.get(e)}const Nh=[],qa=[],Ap=[],Km=[],N_=Promise.resolve();let Gm=!1;function j_(){Gm||(Gm=!0,N_.then(Wy))}function xu(e){Ap.push(e)}function Fg(e){Km.push(e)}const _m=new Set;let kh=0;function Wy(){if(kh!==0)return;const e=Wf;do{try{for(;kh<Nh.length;){const t=Nh[kh];kh++,Hf(t),R_(t.$$)}}catch(t){throw Nh.length=0,kh=0,t}for(Hf(null),Nh.length=0,kh=0;qa.length;)qa.pop()();for(let t=0;t<Ap.length;t+=1){const r=Ap[t];_m.has(r)||(_m.add(r),r())}Ap.length=0}while(Nh.length);for(;Km.length;)Km.pop()();Gm=!1,_m.clear(),Hf(e)}function R_(e){if(e.fragment!==null){e.update(),tA(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(xu)}}const lp=new Set;let Vu;function Xa(){Vu={r:0,c:[],p:Vu}}function Za(){Vu.r||tA(Vu.c),Vu=Vu.p}function Tt(e,t){e&&e.i&&(lp.delete(e),e.i(t))}function Kt(e,t,r,s){if(e&&e.o){if(lp.has(e))return;lp.add(e),Vu.c.push(()=>{lp.delete(e),s&&(r&&e.d(1),s())}),e.o(t)}else s&&s()}const Xy=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function Zy(e,t){e.d(1),t.delete(e.key)}function Jy(e,t,r,s,l,c,h,a,d,_,p,E){let w=e.length,x=c.length,Q=w;const k={};for(;Q--;)k[e[Q].key]=Q;const R=[],P=new Map,O=new Map;for(Q=x;Q--;){const te=E(l,c,Q),ce=r(te);let he=h.get(ce);he?s&&he.p(te,t):(he=_(ce,te),he.c()),P.set(ce,R[Q]=he),ce in k&&O.set(ce,Math.abs(Q-k[ce]))}const G=new Set,V=new Set;function Z(te){Tt(te,1),te.m(a,p),h.set(te.key,te),p=te.first,x--}for(;w&&x;){const te=R[x-1],ce=e[w-1],he=te.key,Ce=ce.key;te===ce?(p=te.first,w--,x--):P.has(Ce)?!h.has(he)||G.has(he)?Z(te):V.has(Ce)?w--:O.get(he)>O.get(Ce)?(V.add(he),Z(te)):(G.add(Ce),w--):(d(ce,h),w--)}for(;w--;){const te=e[w];P.has(te.key)||d(te,h)}for(;x;)Z(R[x-1]);return R}function Sg(e,t,r){const s=e.$$.props[t];s!==void 0&&(e.$$.bound[s]=r,r(e.$$.ctx[s]))}function mr(e){e&&e.c()}function fr(e,t,r,s){const{fragment:l,after_update:c}=e.$$;l&&l.m(t,r),s||xu(()=>{const h=e.$$.on_mount.map(Ky).filter(id);e.$$.on_destroy?e.$$.on_destroy.push(...h):tA(h),e.$$.on_mount=[]}),c.forEach(xu)}function dr(e,t){const r=e.$$;r.fragment!==null&&(tA(r.on_destroy),r.fragment&&r.fragment.d(t),r.on_destroy=r.fragment=null,r.ctx=[])}function O_(e,t){e.$$.dirty[0]===-1&&(Nh.push(e),j_(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ni(e,t,r,s,l,c,h,a=[-1]){const d=Wf;Hf(e);const _=e.$$={fragment:null,ctx:[],props:c,update:bn,not_equal:l,bound:i0(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(d?d.$$.context:[])),callbacks:i0(),dirty:a,skip_bound:!1,root:t.target||d.$$.root};h&&h(_.root);let p=!1;if(_.ctx=r?r(e,t.props||{},(E,w,...x)=>{const Q=x.length?x[0]:w;return _.ctx&&l(_.ctx[E],_.ctx[E]=Q)&&(!_.skip_bound&&_.bound[E]&&_.bound[E](Q),p&&O_(e,E)),w}):[],_.update(),p=!0,tA(_.before_update),_.fragment=s?s(_.ctx):!1,t.target){if(t.hydrate){const E=Q_(t.target);_.fragment&&_.fragment.l(E),E.forEach(nt)}else _.fragment&&_.fragment.c();t.intro&&Tt(e.$$.fragment),fr(e,t.target,t.anchor,t.customElement),Wy()}Hf(d)}class ii{$destroy(){dr(this,1),this.$destroy=bn}$on(t,r){if(!id(r))return bn;const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(r),()=>{const l=s.indexOf(r);l!==-1&&s.splice(l,1)}}$set(t){this.$$set&&!L_(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}var qm=Array.isArray||function(e){return Object.prototype.toString.call(e)=="[object Array]"},ad=tv,H_=Ig,z_=q_,V_=Yy,K_=ev,G_=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^()])+)\\))?|\\(((?:\\\\.|[^()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function Ig(e){for(var t=[],r=0,s=0,l="",c;(c=G_.exec(e))!=null;){var h=c[0],a=c[1],d=c.index;if(l+=e.slice(s,d),s=d+h.length,a){l+=a[1];continue}l&&(t.push(l),l="");var _=c[2],p=c[3],E=c[4],w=c[5],x=c[6],Q=c[7],k=x==="+"||x==="*",R=x==="?"||x==="*",P=_||"/",O=E||w||(Q?".*":"[^"+P+"]+?");t.push({name:p||r++,prefix:_||"",delimiter:P,optional:R,repeat:k,pattern:W_(O)})}return s<e.length&&(l+=e.substr(s)),l&&t.push(l),t}function q_(e){return Yy(Ig(e))}function Yy(e){for(var t=new Array(e.length),r=0;r<e.length;r++)typeof e[r]=="object"&&(t[r]=new RegExp("^"+e[r].pattern+"$"));return function(s){for(var l="",c=s||{},h=0;h<e.length;h++){var a=e[h];if(typeof a=="string"){l+=a;continue}var d=c[a.name],_;if(d==null){if(a.optional)continue;throw new TypeError('Expected "'+a.name+'" to be defined')}if(qm(d)){if(!a.repeat)throw new TypeError('Expected "'+a.name+'" to not repeat, but received "'+d+'"');if(d.length===0){if(a.optional)continue;throw new TypeError('Expected "'+a.name+'" to not be empty')}for(var p=0;p<d.length;p++){if(_=encodeURIComponent(d[p]),!t[h].test(_))throw new TypeError('Expected all "'+a.name+'" to match "'+a.pattern+'", but received "'+_+'"');l+=(p===0?a.prefix:a.delimiter)+_}continue}if(_=encodeURIComponent(d),!t[h].test(_))throw new TypeError('Expected "'+a.name+'" to match "'+a.pattern+'", but received "'+_+'"');l+=a.prefix+_}return l}}function a0(e){return e.replace(/([.+*?=^!:${}()[\]|\/])/g,"\\$1")}function W_(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function Tg(e,t){return e.keys=t,e}function $y(e){return e.sensitive?"":"i"}function X_(e,t){var r=e.source.match(/\((?!\?)/g);if(r)for(var s=0;s<r.length;s++)t.push({name:s,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return Tg(e,t)}function Z_(e,t,r){for(var s=[],l=0;l<e.length;l++)s.push(tv(e[l],t,r).source);var c=new RegExp("(?:"+s.join("|")+")",$y(r));return Tg(c,t)}function J_(e,t,r){for(var s=Ig(e),l=ev(s,r),c=0;c<s.length;c++)typeof s[c]!="string"&&t.push(s[c]);return Tg(l,t)}function ev(e,t){t=t||{};for(var r=t.strict,s=t.end!==!1,l="",c=e[e.length-1],h=typeof c=="string"&&/\/$/.test(c),a=0;a<e.length;a++){var d=e[a];if(typeof d=="string")l+=a0(d);else{var _=a0(d.prefix),p=d.pattern;d.repeat&&(p+="(?:"+_+p+")*"),d.optional?_?p="(?:"+_+"("+p+"))?":p="("+p+")?":p=_+"("+p+")",l+=p}}return r||(l=(h?l.slice(0,-2):l)+"(?:\\/(?=$))?"),s?l+="$":l+=r&&h?"":"(?=\\/|$)",new RegExp("^"+l,$y(t))}function tv(e,t,r){return t=t||[],qm(t)?r||(r={}):(r=t,t=[]),e instanceof RegExp?X_(e,t):qm(e)?Z_(e,t,r):J_(e,t,r)}ad.parse=H_;ad.compile=z_;ad.tokensToFunction=V_;ad.tokensToRegExp=K_;var qh=typeof document<"u",fl=typeof window<"u",Qp=typeof history<"u",Y_=typeof process<"u",Wm=qh&&document.ontouchstart?"touchstart":"click",jc=fl&&!!(window.history.location||window.location);function ga(){this.callbacks=[],this.exits=[],this.current="",this.len=0,this._decodeURLComponents=!0,this._base="",this._strict=!1,this._running=!1,this._hashbang=!1,this.clickHandler=this.clickHandler.bind(this),this._onpopstate=this._onpopstate.bind(this)}ga.prototype.configure=function(e){var t=e||{};this._window=t.window||fl&&window,this._decodeURLComponents=t.decodeURLComponents!==!1,this._popstate=t.popstate!==!1&&fl,this._click=t.click!==!1&&qh,this._hashbang=!!t.hashbang;var r=this._window;this._popstate?r.addEventListener("popstate",this._onpopstate,!1):fl&&r.removeEventListener("popstate",this._onpopstate,!1),this._click?r.document.addEventListener(Wm,this.clickHandler,!1):qh&&r.document.removeEventListener(Wm,this.clickHandler,!1),this._hashbang&&fl&&!Qp?r.addEventListener("hashchange",this._onpopstate,!1):fl&&r.removeEventListener("hashchange",this._onpopstate,!1)};ga.prototype.base=function(e){if(arguments.length===0)return this._base;this._base=e};ga.prototype._getBase=function(){var e=this._base;if(e)return e;var t=fl&&this._window&&this._window.location;return fl&&this._hashbang&&t&&t.protocol==="file:"&&(e=t.pathname),e};ga.prototype.strict=function(e){if(arguments.length===0)return this._strict;this._strict=e};ga.prototype.start=function(e){var t=e||{};if(this.configure(t),t.dispatch!==!1){this._running=!0;var r;if(jc){var s=this._window,l=s.location;this._hashbang&&~l.hash.indexOf("#!")?r=l.hash.substr(2)+l.search:this._hashbang?r=l.search+l.hash:r=l.pathname+l.search+l.hash}this.replace(r,null,!0,t.dispatch)}};ga.prototype.stop=function(){if(this._running){this.current="",this.len=0,this._running=!1;var e=this._window;this._click&&e.document.removeEventListener(Wm,this.clickHandler,!1),fl&&e.removeEventListener("popstate",this._onpopstate,!1),fl&&e.removeEventListener("hashchange",this._onpopstate,!1)}};ga.prototype.show=function(e,t,r,s){var l=new od(e,t,this),c=this.prevContext;return this.prevContext=l,this.current=l.path,r!==!1&&this.dispatch(l,c),l.handled!==!1&&s!==!1&&l.pushState(),l};ga.prototype.back=function(e,t){var r=this;if(this.len>0){var s=this._window;Qp&&s.history.back(),this.len--}else setTimeout(e?function(){r.show(e,t)}:function(){r.show(r._getBase(),t)})};ga.prototype.redirect=function(e,t){var r=this;typeof e=="string"&&typeof t=="string"&&Pp.call(this,e,function(s){setTimeout(function(){r.replace(t)},0)}),typeof e=="string"&&typeof t>"u"&&setTimeout(function(){r.replace(e)},0)};ga.prototype.replace=function(e,t,r,s){var l=new od(e,t,this),c=this.prevContext;return this.prevContext=l,this.current=l.path,l.init=r,l.save(),s!==!1&&this.dispatch(l,c),l};ga.prototype.dispatch=function(e,t){var r=0,s=0,l=this;function c(){var a=l.exits[s++];if(!a)return h();a(t,c)}function h(){var a=l.callbacks[r++];if(e.path!==l.current){e.handled=!1;return}if(!a)return $_.call(l,e);a(e,h)}t?c():h()};ga.prototype.exit=function(e,t){if(typeof e=="function")return this.exit("*",e);for(var r=new Ad(e,null,this),s=1;s<arguments.length;++s)this.exits.push(r.middleware(arguments[s]))};ga.prototype.clickHandler=function(e){if(this._which(e)===1&&!(e.metaKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented){var t=e.target,r=e.path||(e.composedPath?e.composedPath():null);if(r){for(var s=0;s<r.length;s++)if(r[s].nodeName&&r[s].nodeName.toUpperCase()==="A"&&r[s].href){t=r[s];break}}for(;t&&t.nodeName.toUpperCase()!=="A";)t=t.parentNode;if(!(!t||t.nodeName.toUpperCase()!=="A")){var l=typeof t.href=="object"&&t.href.constructor.name==="SVGAnimatedString";if(!(t.hasAttribute("download")||t.getAttribute("rel")==="external")){var c=t.getAttribute("href");if(!(!this._hashbang&&this._samePath(t)&&(t.hash||c==="#"))&&!(c&&c.indexOf("mailto:")>-1)&&!(l?t.target.baseVal:t.target)&&!(!l&&!this.sameOrigin(t.href))){var h=l?t.href.baseVal:t.pathname+t.search+(t.hash||"");h=h[0]!=="/"?"/"+h:h,Y_&&h.match(/^\/[a-zA-Z]:\//)&&(h=h.replace(/^\/[a-zA-Z]:\//,"/"));var a=h,d=this._getBase();h.indexOf(d)===0&&(h=h.substr(d.length)),this._hashbang&&(h=h.replace("#!","")),!(d&&a===h&&(!jc||this._window.location.protocol!=="file:"))&&(e.preventDefault(),this.show(a))}}}}};ga.prototype._onpopstate=function(){var e=!1;return fl?(qh&&document.readyState==="complete"?e=!0:window.addEventListener("load",function(){setTimeout(function(){e=!0},0)}),function(r){if(e){var s=this;if(r.state){var l=r.state.path;s.replace(l,r.state)}else if(jc){var c=s._window.location;s.show(c.pathname+c.search+c.hash,void 0,void 0,!1)}}}):function(){}}();ga.prototype._which=function(e){return e=e||fl&&this._window.event,e.which==null?e.button:e.which};ga.prototype._toURL=function(e){var t=this._window;if(typeof URL=="function"&&jc)return new URL(e,t.location.toString());if(qh){var r=t.document.createElement("a");return r.href=e,r}};ga.prototype.sameOrigin=function(e){if(!e||!jc)return!1;var t=this._toURL(e),r=this._window,s=r.location;return s.protocol===t.protocol&&s.hostname===t.hostname&&(s.port===t.port||s.port===""&&(t.port==80||t.port==443))};ga.prototype._samePath=function(e){if(!jc)return!1;var t=this._window,r=t.location;return e.pathname===r.pathname&&e.search===r.search};ga.prototype._decodeURLEncodedURIComponent=function(e){return typeof e!="string"?e:this._decodeURLComponents?decodeURIComponent(e.replace(/\+/g," ")):e};function rv(){var e=new ga;function t(){return Pp.apply(e,arguments)}return t.callbacks=e.callbacks,t.exits=e.exits,t.base=e.base.bind(e),t.strict=e.strict.bind(e),t.start=e.start.bind(e),t.stop=e.stop.bind(e),t.show=e.show.bind(e),t.back=e.back.bind(e),t.redirect=e.redirect.bind(e),t.replace=e.replace.bind(e),t.dispatch=e.dispatch.bind(e),t.exit=e.exit.bind(e),t.configure=e.configure.bind(e),t.sameOrigin=e.sameOrigin.bind(e),t.clickHandler=e.clickHandler.bind(e),t.create=rv,Object.defineProperty(t,"len",{get:function(){return e.len},set:function(r){e.len=r}}),Object.defineProperty(t,"current",{get:function(){return e.current},set:function(r){e.current=r}}),t.Context=od,t.Route=Ad,t}function Pp(e,t){if(typeof e=="function")return Pp.call(this,"*",e);if(typeof t=="function")for(var r=new Ad(e,null,this),s=1;s<arguments.length;++s)this.callbacks.push(r.middleware(arguments[s]));else typeof e=="string"?this[typeof t=="string"?"redirect":"show"](e,t):this.start(e)}function $_(e){if(!e.handled){var t,r=this,s=r._window;r._hashbang?t=jc&&this._getBase()+s.location.hash.replace("#!",""):t=jc&&s.location.pathname+s.location.search,t!==e.canonicalPath&&(r.stop(),e.handled=!1,jc&&(s.location.href=e.canonicalPath))}}function ew(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function od(e,t,r){var s=this.page=r||Pp,l=s._window,c=s._hashbang,h=s._getBase();e[0]==="/"&&e.indexOf(h)!==0&&(e=h+(c?"#!":"")+e);var a=e.indexOf("?");this.canonicalPath=e;var d=new RegExp("^"+ew(h));if(this.path=e.replace(d,"")||"/",c&&(this.path=this.path.replace("#!","")||"/"),this.title=qh&&l.document.title,this.state=t||{},this.state.path=e,this.querystring=~a?s._decodeURLEncodedURIComponent(e.slice(a+1)):"",this.pathname=s._decodeURLEncodedURIComponent(~a?e.slice(0,a):e),this.params={},this.hash="",!c){if(!~this.path.indexOf("#"))return;var _=this.path.split("#");this.path=this.pathname=_[0],this.hash=s._decodeURLEncodedURIComponent(_[1])||"",this.querystring=this.querystring.split("#")[0]}}od.prototype.pushState=function(){var e=this.page,t=e._window,r=e._hashbang;e.len++,Qp&&t.history.pushState(this.state,this.title,r&&this.path!=="/"?"#!"+this.path:this.canonicalPath)};od.prototype.save=function(){var e=this.page;Qp&&e._window.history.replaceState(this.state,this.title,e._hashbang&&this.path!=="/"?"#!"+this.path:this.canonicalPath)};function Ad(e,t,r){var s=this.page=r||Ug,l=t||{};l.strict=l.strict||s._strict,this.path=e==="*"?"(.*)":e,this.method="GET",this.regexp=ad(this.path,this.keys=[],l)}Ad.prototype.middleware=function(e){var t=this;return function(r,s){if(t.match(r.path,r.params))return r.routePath=t.path,e(r,s);s()}};Ad.prototype.match=function(e,t){var r=this.keys,s=e.indexOf("?"),l=~s?e.slice(0,s):e,c=this.regexp.exec(decodeURIComponent(l));if(!c)return!1;delete t[0];for(var h=1,a=c.length;h<a;++h){var d=r[h-1],_=this.page._decodeURLEncodedURIComponent(c[h]);(_!==void 0||!hasOwnProperty.call(t,d.name))&&(t[d.name]=_)}return!0};var Ug=rv(),dl=Ug,tw=Ug;dl.default=tw;var o0={},wm={},bm=34,Sf=10,xm=13;function nv(e){return new Function("d","return {"+e.map(function(t,r){return JSON.stringify(t)+": d["+r+'] || ""'}).join(",")+"}")}function rw(e,t){var r=nv(e);return function(s,l){return t(r(s),l,e)}}function A0(e){var t=Object.create(null),r=[];return e.forEach(function(s){for(var l in s)l in t||r.push(t[l]=l)}),r}function vA(e,t){var r=e+"",s=r.length;return s<t?new Array(t-s+1).join(0)+r:r}function nw(e){return e<0?"-"+vA(-e,6):e>9999?"+"+vA(e,6):vA(e,4)}function iw(e){var t=e.getUTCHours(),r=e.getUTCMinutes(),s=e.getUTCSeconds(),l=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":nw(e.getUTCFullYear())+"-"+vA(e.getUTCMonth()+1,2)+"-"+vA(e.getUTCDate(),2)+(l?"T"+vA(t,2)+":"+vA(r,2)+":"+vA(s,2)+"."+vA(l,3)+"Z":s?"T"+vA(t,2)+":"+vA(r,2)+":"+vA(s,2)+"Z":r||t?"T"+vA(t,2)+":"+vA(r,2)+"Z":"")}function sw(e){var t=new RegExp('["'+e+`
\r]`),r=e.charCodeAt(0);function s(E,w){var x,Q,k=l(E,function(R,P){if(x)return x(R,P-1);Q=R,x=w?rw(R,w):nv(R)});return k.columns=Q||[],k}function l(E,w){var x=[],Q=E.length,k=0,R=0,P,O=Q<=0,G=!1;E.charCodeAt(Q-1)===Sf&&--Q,E.charCodeAt(Q-1)===xm&&--Q;function V(){if(O)return wm;if(G)return G=!1,o0;var te,ce=k,he;if(E.charCodeAt(ce)===bm){for(;k++<Q&&E.charCodeAt(k)!==bm||E.charCodeAt(++k)===bm;);return(te=k)>=Q?O=!0:(he=E.charCodeAt(k++))===Sf?G=!0:he===xm&&(G=!0,E.charCodeAt(k)===Sf&&++k),E.slice(ce+1,te-1).replace(/""/g,'"')}for(;k<Q;){if((he=E.charCodeAt(te=k++))===Sf)G=!0;else if(he===xm)G=!0,E.charCodeAt(k)===Sf&&++k;else if(he!==r)continue;return E.slice(ce,te)}return O=!0,E.slice(ce,Q)}for(;(P=V())!==wm;){for(var Z=[];P!==o0&&P!==wm;)Z.push(P),P=V();w&&(Z=w(Z,R++))==null||x.push(Z)}return x}function c(E,w){return E.map(function(x){return w.map(function(Q){return p(x[Q])}).join(e)})}function h(E,w){return w==null&&(w=A0(E)),[w.map(p).join(e)].concat(c(E,w)).join(`
`)}function a(E,w){return w==null&&(w=A0(E)),c(E,w).join(`
`)}function d(E){return E.map(_).join(`
`)}function _(E){return E.map(p).join(e)}function p(E){return E==null?"":E instanceof Date?iw(E):t.test(E+="")?'"'+E.replace(/"/g,'""')+'"':E}return{parse:s,parseRows:l,format:h,formatBody:a,formatRows:d,formatRow:_,formatValue:p}}var aw=sw(","),iv=aw.parse;function ow(e){for(var t in e){var r=e[t].trim(),s,l;if(!r)r=null;else if(r==="true")r=!0;else if(r==="false")r=!1;else if(r==="NaN")r=NaN;else if(!isNaN(s=+r))r=s;else if(l=r.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))Aw&&l[4]&&!l[7]&&(r=r.replace(/-/g,"/").replace(/T/," ")),r=new Date(r);else continue;e[t]=r}return e}const Aw=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function lw(e){return e}function cw(e){if(e==null)return lw;var t,r,s=e.scale[0],l=e.scale[1],c=e.translate[0],h=e.translate[1];return function(a,d){d||(t=r=0);var _=2,p=a.length,E=new Array(p);for(E[0]=(t+=a[0])*s+c,E[1]=(r+=a[1])*l+h;_<p;)E[_]=a[_],++_;return E}}function uw(e,t){for(var r,s=e.length,l=s-t;l<--s;)r=e[l],e[l++]=e[s],e[s]=r}function sv(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(r){return l0(e,r)})}:l0(e,t)}function l0(e,t){var r=t.id,s=t.bbox,l=t.properties==null?{}:t.properties,c=hw(e,t);return r==null&&s==null?{type:"Feature",properties:l,geometry:c}:s==null?{type:"Feature",id:r,properties:l,geometry:c}:{type:"Feature",id:r,bbox:s,properties:l,geometry:c}}function hw(e,t){var r=cw(e.transform),s=e.arcs;function l(p,E){E.length&&E.pop();for(var w=s[p<0?~p:p],x=0,Q=w.length;x<Q;++x)E.push(r(w[x],x));p<0&&uw(E,Q)}function c(p){return r(p)}function h(p){for(var E=[],w=0,x=p.length;w<x;++w)l(p[w],E);return E.length<2&&E.push(E[0]),E}function a(p){for(var E=h(p);E.length<4;)E.push(E[0]);return E}function d(p){return p.map(a)}function _(p){var E=p.type,w;switch(E){case"GeometryCollection":return{type:E,geometries:p.geometries.map(_)};case"Point":w=c(p.coordinates);break;case"MultiPoint":w=p.coordinates.map(c);break;case"LineString":w=h(p.arcs);break;case"MultiLineString":w=p.arcs.map(h);break;case"Polygon":w=d(p.arcs);break;case"MultiPolygon":w=p.arcs.map(d);break;default:return null}return{type:E,coordinates:w}}return _(t)}function fw(e,t){for(let r in e[t])document.documentElement.style.setProperty("--"+r,e[t][r])}function av(){let e=window.matchMedia("(prefers-reduced-motion: reduce)");return!(!e||e.matches)}async function c0(e){let r=await(await fetch(e)).text();return await iv(r,ow)}async function Mc(e,t){let s=await(await fetch(e)).json();return await sv(s,t)}async function If(e,t){let s=await(await fetch(e)).json();return await sv(s,t)}function u0(e,t,r){let s,l=!1,c=1;for(;l==!1;)e<=t[c]?(s=r[c-1],l=!0):c++;return s||"lightgrey"}function h0(e,t){let r,s=t.length;return e=="pretrial"?r=[0,12.4,24.8,t[s-1]]:e=="admission"?r=[0,13.6,27.2,t[s-1]]:e=="over_1000_19"?r=[0,1,2]:e=="over_1000_99"?r=[0,1,2]:e=="GT_1000_beds_99"?r=[-1,0,1]:e=="GT_1000_beds_19"?r=[-1,0,1]:e=="est_doc_rev"?r=[-1,0,1]:e=="ice"?r=[-1,0,1]:e=="map_twp"?r=[-1,0,1]:e=="map_private"?r=[-1,0,1]:e=="map_prison"?r=[-1,0,1]:e=="map_all"?r=[-1,0,1]:r=[t[0],t[Math.floor(s*.33333)],t[Math.floor(s*.66666)],t[s-1]],r}const Nf={light:{text:"#222",muted:"#777",pale:"#f0f0f0",background:"#fff7f0"},dark:{text:"#fff",muted:"#bbb",pale:"#333",background:"#222"},lightblue:{text:"#206095",muted:"#707070",pale:"#f0f0f0",background:"rgb(188, 207, 222)"}},f0={pretrial:["#ef4136","#b81c1f","#790f09"],admission:["#ef4136","#b81c1f","#790f09"],over_1000_19:["rgba(255,255,255,0)","rgba(255,240,0,.5)"],over_1000_99:["rgba(255,255,255,0)","rgba(255,240,0,.5)"],map_jails:["rgba(255,255,255,0)","rgba(46,29,151,.9)"],GT_1000_beds_99:["rgba(255,255,255,0)","rgba(46,29,151,.9)"],GT_1000_beds_19:["rgba(255,255,255,0)","rgba(46,29,151,.9)"],est_doc_rev:["rgba(255,255,255,0)","rgba(23,134,31,.9)"],ice:["rgba(255,255,255,0)","rgba(138,158,30,.9)"],map_prison:["rgba(255,255,255,0)","rgba(0,92,229, 0.9)"],map_private:["rgba(255,255,255,0)","rgba(143,50,161,.9)"],map_twp:["rgba(255,255,255,0)","rgba(255,158,68,0.9)"],map_all:["rgba(255,255,255,0)","rgba(0,0,0,.9)"]};function dw(e){let t;return{c(){t=Lt("div"),t.innerHTML=`<p>Louisiana’s 64 parishes range from bustling cities to vast rural stretches,
    from the parks and preserves of the north to the swamps and marshes of the
    gulf. Yet, they all share one defining characteristic: a stake in the
    state’s vast network of jails, prisons, and juvenile detention facilities.</p> 

  <p>The prevalence of incarceration in Louisiana is hard to see in many places
    due to an alarming lack of transparency and data, as well as a convoluted
    carceral landscape where local jails also function as prisons. But parish-
    and state-level research by the Vera Institute of Justice brings much-needed
    clarity to this picture. Vera’s datahub provides illuminating access to
    parish-level data on arrests, pretrial detention, incarceration, and local
    spending on the criminal legal system. Together, these data points create a
    detailed—and highly damning—picture of mass incarceration in Louisiana.</p> 

  <p>It is a system of clear winners and losers, financially benefiting those
    with a stake in the system, including the state, local sheriffs, and private
    corporations. The Louisiana Department of Public Safety &amp; Corrections pays
    local jails <a href="https://house.louisiana.gov/housefiscal/DOCS_APP_BDGT_MEETINGS/DOCS_APPBudgetMeetings2022/FY%2023%20Corrections.pdf" target="_blank">$177 million</a> annually to hold more than half the people who have been sentenced to
    prison.</p> 

  <p>But the people of Louisiana are losing. If incarceration created safety,
    Louisiana would be among the safest places in the world. Instead, making
    Louisiana a safer place requires scaling back its vast incarceration system
    and reallocating funds to the <a href="https://www.brookings.edu/essay/a-new-community-safety-blueprint-how-the-federal-government-can-address-violence-and-harm-through-a-public-health-approach/" target="_blank">things that actually make communities safe</a>: jobs, housing, healthcare, good schools, and infrastructure.</p> 
  <p>Conversations around Louisiana’s high incarceration rates tend to center on
    dense population centers. But a closer look at the data collected by Vera
    tells a different story: incarceration has expanded across the state,
    especially in rural parishes.</p>`,ue(t,"id","top"),ue(t,"class","col-wide svelte-b3douq")},m(r,s){st(r,t,s)},p:bn,i:bn,o:bn,d(r){r&&nt(t)}}}class pw extends ii{constructor(t){super(),ni(this,t,null,dw,ti,{})}}function mw(e){let t;return{c(){t=Lt("div"),t.innerHTML=`<p class="point svelte-krasw1">The parish and state-level data collected by Vera for this project reveals
    how both the state and local governments can scale back the destructive
    influence of mass incarceration. Local and state-level government bodies in
    Louisiana should do the following:</p> 
  <ul class="svelte-krasw1"><li class="svelte-krasw1">End Louisiana’s practice of housing distinct groups of people with vastly
      different needs in the same multi-use facilities; for example, housing
      juveniles at Louisiana State Penitentiary (Angola) and housing people with
      prison sentences in pretrial detention facilities, like parish jails. The
      state should use sentencing reform, applied retroactively, to reduce the
      number of incarcerated people to fit current Department of Public Safety &amp;
      Corrections capacity.</li> 

    <li class="svelte-krasw1">Pass a data transparency bill that standardizes the data a carceral
      facility must collect and report.</li> 

    <li class="svelte-krasw1">Reduce the prison population by providing parole eligibility after 20
      years to people serving long sentences and after 25 years to those serving
      life sentences; making parole-eligibility and sentencing reforms available
      retroactively; and implementing a felony classification system to
      eliminate inconsistencies in sentencing and release.</li> 

    <li class="svelte-krasw1">Pass legislation that allows people charged with non-violent felonies and
      misdemeanors to be issued a summons in lieu of arrest, and enact
      comprehensive bail reform so that money does not determine freedom.</li> 

    <li class="svelte-krasw1">Advance civilian responses to <a href="https://www.vera.org/behavioral-health-crisis-alternatives" target="_blank">911 calls that don’t require law enforcement</a>. Removing the police from encounters that don’t require them—like
      mental health crises,
      <a href="https://www.vera.org/ending-mass-incarceration/criminalization-racial-disparities/public-safety/redefining-public-safety-initiative/stop-the-stops" target="_blank">low-level traffic violations</a>, and noise complaints—is
      <a href="https://www.brookings.edu/essay/a-new-community-safety-blueprint-how-the-federal-government-can-address-violence-and-harm-through-a-public-health-approach/" target="_blank">proven to improve safety</a>, while also reducing arrests (and thus jail admissions).</li> 

    <li class="svelte-krasw1">Enact meaningful reforms that will allow for jail decarceration, and then
      close jails and repurpose carceral facilities for non-jail, non-detention
      purposes. Reducing corrections spending and ending mass incarceration in
      Louisiana will require lowering jail capacity. This means working towards
      permanently closing jails.</li></ul>`,ue(t,"id","bottom"),ue(t,"class","col-wide svelte-krasw1")},m(r,s){st(r,t,s)},p:bn,i:bn,o:bn,d(r){r&&nt(t)}}}class gw extends ii{constructor(t){super(),ni(this,t,null,mw,ti,{})}}function yw(e){let t;return{c(){t=Lt("div"),t.innerHTML=`<h2>About the Data</h2> 
  <p>Vera collected data for Louisiana’s prisons, jails, and juvenile justice
    facilities using information published on state and local government
    websites and the U.S. Bureau of Justice Statistics 2019 Census of Jails.
    Vera collected pretrial population data from reports prepared by the
    Louisiana Department of Public Safety &amp; Corrections (DPS&amp;C). Vera collected
    prison admission data from the DPS&amp;C Briefing Book. Vera collected arrest
    data from the FBI Uniform Crime Report accessed via Vera’s Arrest Trends
    tool. Vera collected budget data from the U.S. Census Annual Survey of
    Public Employment &amp; Payroll.</p> 

  <span class="more"><a href="/louisiana-locked-up/about-data">More</a></span>`,ue(t,"id","about-data"),ue(t,"class","svelte-n7jwkt")},m(r,s){st(r,t,s)},p:bn,i:bn,o:bn,d(r){r&&nt(t)}}}class ov extends ii{constructor(t){super(),ni(this,t,null,yw,ti,{})}}function vw(e){let t,r,s;const l=e[2].default,c=wA(l,e,e[1],null);return{c(){t=Lt("section"),r=Lt("div"),c&&c.c(),ue(r,"class","col-wide"),kn(t,"color",Nf[e[0]].text),kn(t,"background-color",Nf[e[0]].background)},m(h,a){st(h,t,a),it(t,r),c&&c.m(r,null),s=!0},p(h,[a]){c&&c.p&&(!s||a&2)&&xA(c,l,h,h[1],s?bA(l,h[1],a,null):BA(h[1]),null),(!s||a&1)&&kn(t,"color",Nf[h[0]].text),(!s||a&1)&&kn(t,"background-color",Nf[h[0]].background)},i(h){s||(Tt(c,h),s=!0)},o(h){Kt(c,h),s=!1},d(h){h&&nt(t),c&&c.d(h)}}}function _w(e,t,r){let{$$slots:s={},$$scope:l}=t,{theme:c=$o("theme")}=t;return e.$$set=h=>{"theme"in h&&r(0,c=h.theme),"$$scope"in h&&r(1,l=h.$$scope)},[c,l,s]}class ww extends ii{constructor(t){super(),ni(this,t,_w,vw,ti,{theme:0})}}const{window:Av}=Xy,bw=e=>({}),d0=e=>({}),xw=e=>({}),p0=e=>({});function Bw(e){let t,r,s,l,c,h,a,d;xu(e[19]);const _=e[18].background,p=wA(_,e,e[17],p0),E=e[18].foreground,w=wA(E,e,e[17],d0);return{c(){t=Lt("svelte-scroller-outer"),r=Lt("svelte-scroller-background-container"),s=Lt("svelte-scroller-background"),p&&p.c(),l=$t(),c=Lt("svelte-scroller-foreground"),w&&w.c(),Gd(s,"class","svelte-3stote"),Gd(r,"class","background-container svelte-3stote"),Gd(c,"class","svelte-3stote"),Gd(t,"class","svelte-3stote"),pp(t,"splitscreen",e[0])},m(x,Q){st(x,t,Q),it(t,r),it(r,s),p&&p.m(s,null),e[20](s),e[21](r),it(t,l),it(t,c),w&&w.m(c,null),e[22](c),e[23](t),h=!0,a||(d=es(Av,"resize",e[19]),a=!0)},p(x,Q){p&&p.p&&(!h||Q[0]&131072)&&xA(p,_,x,x[17],h?bA(_,x[17],Q,xw):BA(x[17]),p0),w&&w.p&&(!h||Q[0]&131072)&&xA(w,E,x,x[17],h?bA(E,x[17],Q,bw):BA(x[17]),d0),(!h||Q[0]&1)&&pp(t,"splitscreen",x[0])},i(x){h||(Tt(p,x),Tt(w,x),h=!0)},o(x){Kt(p,x),Kt(w,x),h=!1},d(x){x&&nt(t),p&&p.d(x),e[20](null),e[21](null),w&&w.d(x),e[22](null),e[23](null),a=!1,d()}}}const uc=[];let mp;if(typeof window<"u"){const e=()=>uc.forEach(t=>t());window.addEventListener("scroll",e),window.addEventListener("resize",e)}if(typeof IntersectionObserver<"u"){const e=new Map,t=new IntersectionObserver((r,s)=>{r.forEach(l=>{const c=e.get(l.target),h=uc.indexOf(c);l.isIntersecting?h===-1&&uc.push(c):(c(),h!==-1&&uc.splice(h,1))})},{rootMargin:"400px 0px"});mp={add:({outer:r,update:s})=>{const{top:l,bottom:c}=r.getBoundingClientRect();l<window.innerHeight&&c>0&&uc.push(s),e.set(r,s),t.observe(r)},remove:({outer:r,update:s})=>{const l=uc.indexOf(s);l!==-1&&uc.splice(l,1),e.delete(r),t.unobserve(r)}}}else mp={add:({update:e})=>{uc.push(e)},remove:({update:e})=>{const t=uc.indexOf(e);t!==-1&&uc.splice(t,1)}};function Cw(e,t,r){let s,l,c,{$$slots:h={},$$scope:a}=t,{top:d=0}=t,{bottom:_=1}=t,{threshold:p=.5}=t,{query:E="section"}=t,{parallax:w=!1}=t,{index:x=0}=t,{count:Q=0}=t,{offset:k=0}=t,{progress:R=0}=t,{visible:P=!1}=t,{splitscreen:O=!1}=t,{id:G=null}=t,V,Z,te,ce,he,Ce=0,fe,ee,re=1;Wa(()=>{he=te.querySelectorAll(E),r(7,Q=he.length),me();const ke={outer:V,update:me};return mp.add(ke),()=>mp.remove(ke)});function be(){if(Z){let ke=`position: ${fe?"fixed":"absolute"}; top: 0; transform: translate(0, ${ee}px); width: ${re}px; z-index: ${1};`;r(3,Z.style.cssText=ke,Z)}}function me(){if(!te)return;const ke=V.getBoundingClientRect();ke.left,re=ke.right-ke.left;const kt=te.getBoundingClientRect(),ie=ce.getBoundingClientRect();r(10,P=kt.top<Ce&&kt.bottom>0);const Se=kt.bottom-kt.top,Qe=ie.bottom-ie.top,Ke=l-s;for(r(9,R=(s-kt.top)/(Se-Ke)),R<=0?(ee=0,fe&&(fe=!1,be())):R>=1?(ee=w?Se-Qe:Se-Ke,fe&&(fe=!1,be())):(ee=w?Math.round(s-R*(Qe-Ke)):s,fe||(fe=!0,be())),r(6,x=0);x<he.length;r(6,x+=1)){const ot=he[x],{top:dt}=ot.getBoundingClientRect(),Bt=he[x+1],Ge=Bt?Bt.getBoundingClientRect().top:kt.bottom;if(r(8,k=(c-dt)/(Ge-dt)),r(11,G=ot.dataset.id?ot.dataset.id:null),Ge>=c)break}}function Re(){r(1,Ce=Av.innerHeight)}function _e(ke){qa[ke?"unshift":"push"](()=>{ce=ke,r(5,ce)})}function He(ke){qa[ke?"unshift":"push"](()=>{Z=ke,r(3,Z)})}function Le(ke){qa[ke?"unshift":"push"](()=>{te=ke,r(4,te)})}function Je(ke){qa[ke?"unshift":"push"](()=>{V=ke,r(2,V)})}return e.$$set=ke=>{"top"in ke&&r(12,d=ke.top),"bottom"in ke&&r(13,_=ke.bottom),"threshold"in ke&&r(14,p=ke.threshold),"query"in ke&&r(15,E=ke.query),"parallax"in ke&&r(16,w=ke.parallax),"index"in ke&&r(6,x=ke.index),"count"in ke&&r(7,Q=ke.count),"offset"in ke&&r(8,k=ke.offset),"progress"in ke&&r(9,R=ke.progress),"visible"in ke&&r(10,P=ke.visible),"splitscreen"in ke&&r(0,O=ke.splitscreen),"id"in ke&&r(11,G=ke.id),"$$scope"in ke&&r(17,a=ke.$$scope)},e.$$.update=()=>{e.$$.dirty[0]&4098&&(s=Math.round(d*Ce)),e.$$.dirty[0]&8194&&(l=Math.round(_*Ce)),e.$$.dirty[0]&16386&&(c=Math.round(p*Ce)),e.$$.dirty[0]&94208&&me()},[O,Ce,V,Z,te,ce,x,Q,k,R,P,G,d,_,p,E,w,a,h,Re,_e,He,Le,Je]}class Ew extends ii{constructor(t){super(),ni(this,t,Cw,Bw,ti,{top:12,bottom:13,threshold:14,query:15,parallax:16,index:6,count:7,offset:8,progress:9,visible:10,splitscreen:0,id:11},null,[-1,-1])}}var Hl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function VS(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Fw(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function s(){if(this instanceof s){var l=[null];l.push.apply(l,arguments);var c=Function.bind.apply(t,l);return new c}return t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var l=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(r,s,l.get?l:{enumerable:!0,get:function(){return e[s]}})}),r}var Xm={},Sw={get exports(){return Xm},set exports(e){Xm=e}};(function(e,t){(function(r,s){e.exports=s()})(Hl,function(){var r,s,l;function c(a,d){if(!r)r=d;else if(!s)s=d;else{var _="var sharedChunk = {}; ("+r+")(sharedChunk); ("+s+")(sharedChunk);",p={};r(p),l=d(p),typeof window<"u"&&(l.workerUrl=window.URL.createObjectURL(new Blob([_],{type:"text/javascript"})))}}c(["exports"],function(a){var d=_;function _(o,n,A,f){this.cx=3*o,this.bx=3*(A-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(f-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=n,this.p2x=A,this.p2y=f}function p(o,n,A,f){const y=new d(o,n,A,f);return function(C){return y.solve(C)}}_.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,n){if(n===void 0&&(n=1e-6),o<0)return 0;if(o>1)return 1;for(var A=o,f=0;f<8;f++){var y=this.sampleCurveX(A)-o;if(Math.abs(y)<n)return A;var C=this.sampleCurveDerivativeX(A);if(Math.abs(C)<1e-6)break;A-=y/C}var I=0,D=1;for(A=o,f=0;f<20&&(y=this.sampleCurveX(A),!(Math.abs(y-o)<n));f++)o>y?I=A:D=A,A=.5*(D-I)+I;return A},solve:function(o,n){return this.sampleCurveY(this.solveCurveX(o,n))}};const E=p(.25,.1,.25,1);function w(o,n,A){return Math.min(A,Math.max(n,o))}function x(o,n,A){const f=A-n,y=((o-n)%f+f)%f+n;return y===n?A:y}function Q(o,...n){for(const A of n)for(const f in A)o[f]=A[f];return o}let k=1;function R(o,n){o.forEach(A=>{n[A]&&(n[A]=n[A].bind(n))})}function P(o,n,A){const f={};for(const y in o)f[y]=n.call(A||this,o[y],y,o);return f}function O(o,n,A){const f={};for(const y in o)n.call(A||this,o[y],y,o)&&(f[y]=o[y]);return f}function G(o){return Array.isArray(o)?o.map(G):typeof o=="object"&&o?P(o,G):o}const V={};function Z(o){V[o]||(typeof console<"u"&&console.warn(o),V[o]=!0)}function te(o,n,A){return(A.y-o.y)*(n.x-o.x)>(n.y-o.y)*(A.x-o.x)}function ce(o){let n=0;for(let A,f,y=0,C=o.length,I=C-1;y<C;I=y++)A=o[y],f=o[I],n+=(f.x-A.x)*(A.y+f.y);return n}function he(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Ce(o){const n={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(A,f,y,C)=>{const I=y||C;return n[f]=!I||I.toLowerCase(),""}),n["max-age"]){const A=parseInt(n["max-age"],10);isNaN(A)?delete n["max-age"]:n["max-age"]=A}return n}let fe,ee,re=null;function be(o){if(re==null){const n=o.navigator?o.navigator.userAgent:null;re=!!o.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return re}function me(o){return typeof ImageBitmap<"u"&&o instanceof ImageBitmap}const Re={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(o){const n=requestAnimationFrame(o);return{cancel:()=>cancelAnimationFrame(n)}},getImageData(o,n=0){const A=window.document.createElement("canvas"),f=A.getContext("2d");if(!f)throw new Error("failed to create canvas 2d context");return A.width=o.width,A.height=o.height,f.drawImage(o,0,0,o.width,o.height),f.getImageData(-n,-n,o.width+2*n,o.height+2*n)},resolveURL:o=>(fe||(fe=document.createElement("a")),fe.href=o,fe.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(ee==null&&(ee=matchMedia("(prefers-reduced-motion: reduce)")),ee.matches)}};var _e=He;function He(o,n){this.x=o,this.y=n}He.prototype={clone:function(){return new He(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,n){return this.clone()._rotateAround(o,n)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var n=o.x-this.x,A=o.y-this.y;return n*n+A*A},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,n){return Math.atan2(this.x*n-this.y*o,this.x*o+this.y*n)},_matMult:function(o){var n=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=n,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var n=Math.cos(o),A=Math.sin(o),f=A*this.x+n*this.y;return this.x=n*this.x-A*this.y,this.y=f,this},_rotateAround:function(o,n){var A=Math.cos(o),f=Math.sin(o),y=n.y+f*(this.x-n.x)+A*(this.y-n.y);return this.x=n.x+A*(this.x-n.x)-f*(this.y-n.y),this.y=y,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},He.convert=function(o){return o instanceof He?o:Array.isArray(o)?new He(o[0],o[1]):o};const Le={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},Je="mapbox-tiles";let ke,kt,ie=500,Se=50;function Qe(){typeof caches>"u"||ke||(ke=caches.open(Je))}let Ke=1/0;const ot={supported:!1,testSupport:function(o){!Ge&&Bt&&(rt?Qt(o):dt=o)}};let dt,Bt,Ge=!1,rt=!1;function Qt(o){const n=o.createTexture();o.bindTexture(o.TEXTURE_2D,n);try{if(o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,Bt),o.isContextLost())return;ot.supported=!0}catch{}o.deleteTexture(n),Ge=!0}typeof document<"u"&&(Bt=document.createElement("img"),Bt.onload=function(){dt&&Qt(dt),dt=null,rt=!0},Bt.onerror=function(){Ge=!0,dt=null},Bt.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const ht={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(ht);class Nt extends Error{constructor(n,A,f,y){super(`AJAXError: ${A} (${n}): ${f}`),this.status=n,this.statusText=A,this.url=f,this.body=y}}const gr=he()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href;function Pt(o,n){const A=new AbortController,f=new Request(o.url,{method:o.method||"GET",body:o.body,credentials:o.credentials,headers:o.headers,referrer:gr(),signal:A.signal});let y=!1,C=!1;return o.type==="json"&&f.headers.set("Accept","application/json"),((I,D,H)=>{if(C)return;const X=Date.now();fetch(f).then(ne=>ne.ok?((le,ye,Be)=>{(o.type==="arrayBuffer"?le.arrayBuffer():o.type==="json"?le.json():le.text()).then(Fe=>{C||(ye&&Be&&function(et,Ze,Et){if(Qe(),!ke)return;const Gt={status:Ze.status,statusText:Ze.statusText,headers:new Headers};Ze.headers.forEach((Dt,or)=>Gt.headers.set(or,Dt));const xt=Ce(Ze.headers.get("Cache-Control")||"");xt["no-store"]||(xt["max-age"]&&Gt.headers.set("Expires",new Date(Et+1e3*xt["max-age"]).toUTCString()),new Date(Gt.headers.get("Expires")).getTime()-Et<42e4||function(Dt,or){if(kt===void 0)try{new Response(new ReadableStream),kt=!0}catch{kt=!1}kt?or(Dt.body):Dt.blob().then(or)}(Ze,Dt=>{const or=new Response(Dt,Gt);Qe(),ke&&ke.then(ar=>ar.put(function(Yr){const on=Yr.indexOf("?");return on<0?Yr:Yr.slice(0,on)}(et.url),or)).catch(ar=>Z(ar.message))}))}(f,ye,Be),y=!0,n(null,Fe,le.headers.get("Cache-Control"),le.headers.get("Expires")))}).catch(Fe=>{C||n(new Error(Fe.message))})})(ne,null,X):ne.blob().then(le=>n(new Nt(ne.status,ne.statusText,o.url,le)))).catch(ne=>{ne.code!==20&&n(new Error(ne.message))})})(),{cancel:()=>{C=!0,y||A.abort()}}}const ze=function(o,n){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){if(he()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,n);if(!he()){const f=o.url.substring(0,o.url.indexOf("://"));return(Le.REGISTERED_PROTOCOLS[f]||Pt)(o,n)}}if(!(/^file:/.test(A=o.url)||/^file:/.test(gr())&&!/^\w+:/.test(A))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return Pt(o,n);if(he()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,n,void 0,!0)}var A;return function(f,y){const C=new XMLHttpRequest;C.open(f.method||"GET",f.url,!0),f.type==="arrayBuffer"&&(C.responseType="arraybuffer");for(const I in f.headers)C.setRequestHeader(I,f.headers[I]);return f.type==="json"&&(C.responseType="text",C.setRequestHeader("Accept","application/json")),C.withCredentials=f.credentials==="include",C.onerror=()=>{y(new Error(C.statusText))},C.onload=()=>{if((C.status>=200&&C.status<300||C.status===0)&&C.response!==null){let I=C.response;if(f.type==="json")try{I=JSON.parse(C.response)}catch(D){return y(D)}y(null,I,C.getResponseHeader("Cache-Control"),C.getResponseHeader("Expires"))}else{const I=new Blob([C.response],{type:C.getResponseHeader("Content-Type")});y(new Nt(C.status,C.statusText,f.url,I))}},C.send(f.body),{cancel:()=>C.abort()}}(o,n)},yr=function(o,n){return ze(Q(o,{type:"arrayBuffer"}),n)};function sr(o){const n=window.document.createElement("a");return n.href=o,n.protocol===window.document.location.protocol&&n.host===window.document.location.host}const Ht="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let pr,Br;pr=[],Br=0;const vr=function(o,n){if(ot.supported&&(o.headers||(o.headers={}),o.headers.accept="image/webp,*/*"),Br>=Le.MAX_PARALLEL_IMAGE_REQUESTS){const C={requestParameters:o,callback:n,cancelled:!1,cancel(){this.cancelled=!0}};return pr.push(C),C}Br++;let A=!1;const f=()=>{if(!A)for(A=!0,Br--;pr.length&&Br<Le.MAX_PARALLEL_IMAGE_REQUESTS;){const C=pr.shift(),{requestParameters:I,callback:D,cancelled:H}=C;H||(C.cancel=vr(I,D).cancel)}},y=yr(o,(C,I,D,H)=>{f(),C?n(C):I&&function(X,ne){typeof createImageBitmap=="function"?function(le,ye){const Be=new Blob([new Uint8Array(le)],{type:"image/png"});createImageBitmap(Be).then(Fe=>{ye(null,Fe)}).catch(Fe=>{ye(new Error(`Could not load image because of ${Fe.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(X,ne):function(le,ye){const Be=new Image;Be.onload=()=>{ye(null,Be),URL.revokeObjectURL(Be.src),Be.onload=null,window.requestAnimationFrame(()=>{Be.src=Ht})},Be.onerror=()=>ye(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const Fe=new Blob([new Uint8Array(le)],{type:"image/png"});Be.src=le.byteLength?URL.createObjectURL(Fe):Ht}(X,ne)}(I,(X,ne)=>{X!=null?n(X):ne!=null&&n(null,ne,{cacheControl:D,expires:H})})});return{cancel:()=>{y.cancel(),f()}}};function Gr(o,n,A){A[o]&&A[o].indexOf(n)!==-1||(A[o]=A[o]||[],A[o].push(n))}function rr(o,n,A){if(A&&A[o]){const f=A[o].indexOf(n);f!==-1&&A[o].splice(f,1)}}class xr{constructor(n,A={}){Q(this,A),this.type=n}}class Zr extends xr{constructor(n,A={}){super("error",Q({error:n},A))}}class pn{on(n,A){return this._listeners=this._listeners||{},Gr(n,A,this._listeners),this}off(n,A){return rr(n,A,this._listeners),rr(n,A,this._oneTimeListeners),this}once(n,A){return this._oneTimeListeners=this._oneTimeListeners||{},Gr(n,A,this._oneTimeListeners),this}fire(n,A){typeof n=="string"&&(n=new xr(n,A||{}));const f=n.type;if(this.listens(f)){n.target=this;const y=this._listeners&&this._listeners[f]?this._listeners[f].slice():[];for(const D of y)D.call(this,n);const C=this._oneTimeListeners&&this._oneTimeListeners[f]?this._oneTimeListeners[f].slice():[];for(const D of C)rr(f,D,this._oneTimeListeners),D.call(this,n);const I=this._eventedParent;I&&(Q(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),I.fire(n))}else n instanceof Zr&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,A){return this._eventedParent=n,this._eventedParentData=A,this}}var vt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1},elevationOffset:{type:"number",default:450}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class at{constructor(n,A,f,y){this.message=(n?`${n}: `:"")+f,y&&(this.identifier=y),A!=null&&A.__line__&&(this.line=A.__line__)}}function bt(o){const n=o.value;return n?[new at(o.key,n,"constants have been deprecated as of v8")]:[]}function Ct(o,...n){for(const A of n)for(const f in A)o[f]=A[f];return o}function jt(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function er(o){if(Array.isArray(o))return o.map(er);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const n={};for(const A in o)n[A]=er(o[A]);return n}return jt(o)}class Vr extends Error{constructor(n,A){super(A),this.message=A,this.key=n}}class Sr{constructor(n,A=[]){this.parent=n,this.bindings={};for(const[f,y]of A)this.bindings[f]=y}concat(n){return new Sr(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}const un={kind:"null"},lr={kind:"number"},Er={kind:"string"},An={kind:"boolean"},wn={kind:"color"},_i={kind:"object"},br={kind:"value"},Cr={kind:"collator"},cr={kind:"formatted"},Kr={kind:"padding"},hn={kind:"resolvedImage"};function xn(o,n){return{kind:"array",itemType:o,N:n}}function Sn(o){if(o.kind==="array"){const n=Sn(o.itemType);return typeof o.N=="number"?`array<${n}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${n}>`}return o.kind}const ji=[un,lr,Er,An,wn,cr,_i,xn(br),Kr,hn];function tn(o,n){if(n.kind==="error")return null;if(o.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!tn(o.itemType,n.itemType))&&(typeof o.N!="number"||o.N===n.N))return null}else{if(o.kind===n.kind)return null;if(o.kind==="value"){for(const A of ji)if(!tn(A,n))return null}}return`Expected ${Sn(o)} but found ${Sn(n)} instead.`}function Wi(o,n){return n.some(A=>A.kind===o.kind)}function hs(o,n){return n.some(A=>A==="null"?o===null:A==="array"?Array.isArray(o):A==="object"?o&&!Array.isArray(o)&&typeof o=="object":A===typeof o)}var Ln,nn={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Te(o){return(o=Math.round(o))<0?0:o>255?255:o}function Y(o){return Te(o[o.length-1]==="%"?parseFloat(o)/100*255:parseInt(o))}function Ae(o){return(n=o[o.length-1]==="%"?parseFloat(o)/100:parseFloat(o))<0?0:n>1?1:n;var n}function Ee(o,n,A){return A<0?A+=1:A>1&&(A-=1),6*A<1?o+(n-o)*A*6:2*A<1?n:3*A<2?o+(n-o)*(2/3-A)*6:o}try{Ln={}.parseCSSColor=function(o){var n,A=o.replace(/ /g,"").toLowerCase();if(A in nn)return nn[A].slice();if(A[0]==="#")return A.length===4?(n=parseInt(A.substr(1),16))>=0&&n<=4095?[(3840&n)>>4|(3840&n)>>8,240&n|(240&n)>>4,15&n|(15&n)<<4,1]:null:A.length===7&&(n=parseInt(A.substr(1),16))>=0&&n<=16777215?[(16711680&n)>>16,(65280&n)>>8,255&n,1]:null;var f=A.indexOf("("),y=A.indexOf(")");if(f!==-1&&y+1===A.length){var C=A.substr(0,f),I=A.substr(f+1,y-(f+1)).split(","),D=1;switch(C){case"rgba":if(I.length!==4)return null;D=Ae(I.pop());case"rgb":return I.length!==3?null:[Y(I[0]),Y(I[1]),Y(I[2]),D];case"hsla":if(I.length!==4)return null;D=Ae(I.pop());case"hsl":if(I.length!==3)return null;var H=(parseFloat(I[0])%360+360)%360/360,X=Ae(I[1]),ne=Ae(I[2]),le=ne<=.5?ne*(X+1):ne+X-ne*X,ye=2*ne-le;return[Te(255*Ee(ye,le,H+1/3)),Te(255*Ee(ye,le,H)),Te(255*Ee(ye,le,H-1/3)),D];default:return null}}return null}}catch{}class Ue{constructor(n,A,f,y=1){this.r=n,this.g=A,this.b=f,this.a=y}static parse(n){if(!n)return;if(n instanceof Ue)return n;if(typeof n!="string")return;const A=Ln(n);return A?new Ue(A[0]/255*A[3],A[1]/255*A[3],A[2]/255*A[3],A[3]):void 0}toString(){const[n,A,f,y]=this.toArray();return`rgba(${Math.round(n)},${Math.round(A)},${Math.round(f)},${y})`}toArray(){const{r:n,g:A,b:f,a:y}=this;return y===0?[0,0,0,0]:[255*n/y,255*A/y,255*f/y,y]}}Ue.black=new Ue(0,0,0,1),Ue.white=new Ue(1,1,1,1),Ue.transparent=new Ue(0,0,0,0),Ue.red=new Ue(1,0,0,1);class Xe{constructor(n,A,f){this.sensitivity=n?A?"variant":"case":A?"accent":"base",this.locale=f,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,A){return this.collator.compare(n,A)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class lt{constructor(n,A,f,y,C){this.text=n,this.image=A,this.scale=f,this.fontStack=y,this.textColor=C}}class $e{constructor(n){this.sections=n}static fromString(n){return new $e([new lt(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof $e?n:$e.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}}class qe{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof qe)return n;if(typeof n=="number")return new qe([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(const A of n)if(typeof A!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return new qe(n)}}toString(){return JSON.stringify(this.values)}}class ut{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new ut({name:n,available:!1}):null}}function Ot(o,n,A,f){return typeof o=="number"&&o>=0&&o<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof A=="number"&&A>=0&&A<=255?f===void 0||typeof f=="number"&&f>=0&&f<=1?null:`Invalid rgba value [${[o,n,A,f].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof f=="number"?[o,n,A,f]:[o,n,A]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function nr(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof Ue||o instanceof Xe||o instanceof $e||o instanceof qe||o instanceof ut)return!0;if(Array.isArray(o)){for(const n of o)if(!nr(n))return!1;return!0}if(typeof o=="object"){for(const n in o)if(!nr(o[n]))return!1;return!0}return!1}function zt(o){if(o===null)return un;if(typeof o=="string")return Er;if(typeof o=="boolean")return An;if(typeof o=="number")return lr;if(o instanceof Ue)return wn;if(o instanceof Xe)return Cr;if(o instanceof $e)return cr;if(o instanceof qe)return Kr;if(o instanceof ut)return hn;if(Array.isArray(o)){const n=o.length;let A;for(const f of o){const y=zt(f);if(A){if(A===y)continue;A=br;break}A=y}return xn(A||br,n)}return _i}function jr(o){const n=typeof o;return o===null?"":n==="string"||n==="number"||n==="boolean"?String(o):o instanceof Ue||o instanceof $e||o instanceof qe||o instanceof ut?o.toString():JSON.stringify(o)}class Hr{constructor(n,A){this.type=n,this.value=A}static parse(n,A){if(n.length!==2)return A.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!nr(n[1]))return A.error("invalid value");const f=n[1];let y=zt(f);const C=A.expectedType;return y.kind!=="array"||y.N!==0||!C||C.kind!=="array"||typeof C.N=="number"&&C.N!==0||(y=C),new Hr(y,f)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Tr{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}}const ln={string:Er,number:lr,boolean:An,object:_i};class dn{constructor(n,A){this.type=n,this.args=A}static parse(n,A){if(n.length<2)return A.error("Expected at least one argument.");let f,y=1;const C=n[0];if(C==="array"){let D,H;if(n.length>2){const X=n[1];if(typeof X!="string"||!(X in ln)||X==="object")return A.error('The item type argument of "array" must be one of string, number, boolean',1);D=ln[X],y++}else D=br;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return A.error('The length argument to "array" must be a positive integer literal',2);H=n[2],y++}f=xn(D,H)}else{if(!ln[C])throw new Error(`Types doesn't contain name = ${C}`);f=ln[C]}const I=[];for(;y<n.length;y++){const D=A.parse(n[y],y,br);if(!D)return null;I.push(D)}return new dn(f,I)}evaluate(n){for(let A=0;A<this.args.length;A++){const f=this.args[A].evaluate(n);if(!tn(this.type,zt(f)))return f;if(A===this.args.length-1)throw new Tr(`Expected value to be of type ${Sn(this.type)}, but found ${Sn(zt(f))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const In={"to-boolean":An,"to-color":wn,"to-number":lr,"to-string":Er};class mn{constructor(n,A){this.type=n,this.args=A}static parse(n,A){if(n.length<2)return A.error("Expected at least one argument.");const f=n[0];if(!In[f])throw new Error(`Can't parse ${f} as it is not part of the known types`);if((f==="to-boolean"||f==="to-string")&&n.length!==2)return A.error("Expected one argument.");const y=In[f],C=[];for(let I=1;I<n.length;I++){const D=A.parse(n[I],I,br);if(!D)return null;C.push(D)}return new mn(y,C)}evaluate(n){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(n));if(this.type.kind==="color"){let A,f;for(const y of this.args){if(A=y.evaluate(n),f=null,A instanceof Ue)return A;if(typeof A=="string"){const C=n.parseColor(A);if(C)return C}else if(Array.isArray(A)&&(f=A.length<3||A.length>4?`Invalid rbga value ${JSON.stringify(A)}: expected an array containing either three or four numeric values.`:Ot(A[0],A[1],A[2],A[3]),!f))return new Ue(A[0]/255,A[1]/255,A[2]/255,A[3])}throw new Tr(f||`Could not parse color from value '${typeof A=="string"?A:JSON.stringify(A)}'`)}if(this.type.kind==="padding"){let A;for(const f of this.args){A=f.evaluate(n);const y=qe.parse(A);if(y)return y}throw new Tr(`Could not parse padding from value '${typeof A=="string"?A:JSON.stringify(A)}'`)}if(this.type.kind==="number"){let A=null;for(const f of this.args){if(A=f.evaluate(n),A===null)return 0;const y=Number(A);if(!isNaN(y))return y}throw new Tr(`Could not convert ${JSON.stringify(A)} to number.`)}return this.type.kind==="formatted"?$e.fromString(jr(this.args[0].evaluate(n))):this.type.kind==="resolvedImage"?ut.fromString(jr(this.args[0].evaluate(n))):jr(this.args[0].evaluate(n))}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const Bn=["Unknown","Point","LineString","Polygon"];class Qn{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Bn[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let A=this._parseColorCache[n];return A||(A=this._parseColorCache[n]=Ue.parse(n)),A}}class Vn{constructor(n,A,f,y){this.name=n,this.type=A,this._evaluate=f,this.args=y}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,A){const f=n[0],y=Vn.definitions[f];if(!y)return A.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0);const C=Array.isArray(y)?y[0]:y.type,I=Array.isArray(y)?[[y[1],y[2]]]:y.overloads,D=I.filter(([X])=>!Array.isArray(X)||X.length===n.length-1);let H=null;for(const[X,ne]of D){H=new Qa(A.registry,A.path,null,A.scope);const le=[];let ye=!1;for(let Be=1;Be<n.length;Be++){const Fe=n[Be],et=Array.isArray(X)?X[Be-1]:X.type,Ze=H.parse(Fe,1+le.length,et);if(!Ze){ye=!0;break}le.push(Ze)}if(!ye)if(Array.isArray(X)&&X.length!==le.length)H.error(`Expected ${X.length} arguments, but found ${le.length} instead.`);else{for(let Be=0;Be<le.length;Be++){const Fe=Array.isArray(X)?X[Be]:X.type,et=le[Be];H.concat(Be+1).checkSubtype(Fe,et.type)}if(H.errors.length===0)return new Vn(f,C,ne,le)}}if(D.length===1)A.errors.push(...H.errors);else{const X=(D.length?D:I).map(([le])=>{return ye=le,Array.isArray(ye)?`(${ye.map(Sn).join(", ")})`:`(${Sn(ye.type)}...)`;var ye}).join(" | "),ne=[];for(let le=1;le<n.length;le++){const ye=A.parse(n[le],1+ne.length);if(!ye)return null;ne.push(Sn(ye.type))}A.error(`Expected arguments of type ${X}, but found (${ne.join(", ")}) instead.`)}return null}static register(n,A){Vn.definitions=A;for(const f in A)n[f]=Vn}}class Ti{constructor(n,A,f){this.type=Cr,this.locale=f,this.caseSensitive=n,this.diacriticSensitive=A}static parse(n,A){if(n.length!==2)return A.error("Expected one argument.");const f=n[1];if(typeof f!="object"||Array.isArray(f))return A.error("Collator options argument must be an object.");const y=A.parse(f["case-sensitive"]!==void 0&&f["case-sensitive"],1,An);if(!y)return null;const C=A.parse(f["diacritic-sensitive"]!==void 0&&f["diacritic-sensitive"],1,An);if(!C)return null;let I=null;return f.locale&&(I=A.parse(f.locale,1,Er),!I)?null:new Ti(y,C,I)}evaluate(n){return new Xe(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}const oi=8192;function wi(o,n){o[0]=Math.min(o[0],n[0]),o[1]=Math.min(o[1],n[1]),o[2]=Math.max(o[2],n[0]),o[3]=Math.max(o[3],n[1])}function ks(o,n){return!(o[0]<=n[0]||o[2]>=n[2]||o[1]<=n[1]||o[3]>=n[3])}function bi(o,n){const A=(180+o[0])/360,f=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,y=Math.pow(2,n.z);return[Math.round(A*y*oi),Math.round(f*y*oi)]}function Yn(o,n,A){const f=o[0]-n[0],y=o[1]-n[1],C=o[0]-A[0],I=o[1]-A[1];return f*I-C*y==0&&f*C<=0&&y*I<=0}function Ya(o,n){let A=!1;for(let I=0,D=n.length;I<D;I++){const H=n[I];for(let X=0,ne=H.length;X<ne-1;X++){if(Yn(o,H[X],H[X+1]))return!1;(y=H[X])[1]>(f=o)[1]!=(C=H[X+1])[1]>f[1]&&f[0]<(C[0]-y[0])*(f[1]-y[1])/(C[1]-y[1])+y[0]&&(A=!A)}}var f,y,C;return A}function Ks(o,n){for(let A=0;A<n.length;A++)if(Ya(o,n[A]))return!0;return!1}function Gs(o,n,A,f){const y=f[0]-A[0],C=f[1]-A[1],I=(o[0]-A[0])*C-y*(o[1]-A[1]),D=(n[0]-A[0])*C-y*(n[1]-A[1]);return I>0&&D<0||I<0&&D>0}function ia(o,n,A){for(const X of A)for(let ne=0;ne<X.length-1;++ne)if((D=[(I=X[ne+1])[0]-(C=X[ne])[0],I[1]-C[1]])[0]*(H=[(y=n)[0]-(f=o)[0],y[1]-f[1]])[1]-D[1]*H[0]!=0&&Gs(f,y,C,I)&&Gs(C,I,f,y))return!0;var f,y,C,I,D,H;return!1}function gs(o,n){for(let A=0;A<o.length;++A)if(!Ya(o[A],n))return!1;for(let A=0;A<o.length-1;++A)if(ia(o[A],o[A+1],n))return!1;return!0}function Ri(o,n){for(let A=0;A<n.length;A++)if(gs(o,n[A]))return!0;return!1}function Xi(o,n,A){const f=[];for(let y=0;y<o.length;y++){const C=[];for(let I=0;I<o[y].length;I++){const D=bi(o[y][I],A);wi(n,D),C.push(D)}f.push(C)}return f}function vo(o,n,A){const f=[];for(let y=0;y<o.length;y++){const C=Xi(o[y],n,A);f.push(C)}return f}function nA(o,n,A,f){if(o[0]<A[0]||o[0]>A[2]){const y=.5*f;let C=o[0]-A[0]>y?-f:A[0]-o[0]>y?f:0;C===0&&(C=o[0]-A[2]>y?-f:A[2]-o[0]>y?f:0),o[0]+=C}wi(n,o)}function EA(o,n,A,f){const y=Math.pow(2,f.z)*oi,C=[f.x*oi,f.y*oi],I=[];for(const D of o)for(const H of D){const X=[H.x+C[0],H.y+C[1]];nA(X,n,A,y),I.push(X)}return I}function sa(o,n,A,f){const y=Math.pow(2,f.z)*oi,C=[f.x*oi,f.y*oi],I=[];for(const H of o){const X=[];for(const ne of H){const le=[ne.x+C[0],ne.y+C[1]];wi(n,le),X.push(le)}I.push(X)}if(n[2]-n[0]<=y/2){(D=n)[0]=D[1]=1/0,D[2]=D[3]=-1/0;for(const H of I)for(const X of H)nA(X,n,A,y)}var D;return I}class bs{constructor(n,A){this.type=An,this.geojson=n,this.geometries=A}static parse(n,A){if(n.length!==2)return A.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(nr(n[1])){const f=n[1];if(f.type==="FeatureCollection")for(let y=0;y<f.features.length;++y){const C=f.features[y].geometry.type;if(C==="Polygon"||C==="MultiPolygon")return new bs(f,f.features[y].geometry)}else if(f.type==="Feature"){const y=f.geometry.type;if(y==="Polygon"||y==="MultiPolygon")return new bs(f,f.geometry)}else if(f.type==="Polygon"||f.type==="MultiPolygon")return new bs(f,f)}return A.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(A,f){const y=[1/0,1/0,-1/0,-1/0],C=[1/0,1/0,-1/0,-1/0],I=A.canonicalID();if(f.type==="Polygon"){const D=Xi(f.coordinates,C,I),H=EA(A.geometry(),y,C,I);if(!ks(y,C))return!1;for(const X of H)if(!Ya(X,D))return!1}if(f.type==="MultiPolygon"){const D=vo(f.coordinates,C,I),H=EA(A.geometry(),y,C,I);if(!ks(y,C))return!1;for(const X of H)if(!Ks(X,D))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(A,f){const y=[1/0,1/0,-1/0,-1/0],C=[1/0,1/0,-1/0,-1/0],I=A.canonicalID();if(f.type==="Polygon"){const D=Xi(f.coordinates,C,I),H=sa(A.geometry(),y,C,I);if(!ks(y,C))return!1;for(const X of H)if(!gs(X,D))return!1}if(f.type==="MultiPolygon"){const D=vo(f.coordinates,C,I),H=sa(A.geometry(),y,C,I);if(!ks(y,C))return!1;for(const X of H)if(!Ri(X,D))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}function xs(o){if(o instanceof Vn&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof bs)return!1;let n=!0;return o.eachChild(A=>{n&&!xs(A)&&(n=!1)}),n}function $a(o){if(o instanceof Vn&&o.name==="feature-state")return!1;let n=!0;return o.eachChild(A=>{n&&!$a(A)&&(n=!1)}),n}function aa(o,n){if(o instanceof Vn&&n.indexOf(o.name)>=0)return!1;let A=!0;return o.eachChild(f=>{A&&!aa(f,n)&&(A=!1)}),A}class Mo{constructor(n,A){this.type=A.type,this.name=n,this.boundExpression=A}static parse(n,A){if(n.length!==2||typeof n[1]!="string")return A.error("'var' expression requires exactly one string literal argument.");const f=n[1];return A.scope.has(f)?new Mo(f,A.scope.get(f)):A.error(`Unknown variable "${f}". Make sure "${f}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class Qa{constructor(n,A=[],f,y=new Sr,C=[]){this.registry=n,this.path=A,this.key=A.map(I=>`[${I}]`).join(""),this.scope=y,this.errors=C,this.expectedType=f}parse(n,A,f,y,C={}){return A?this.concat(A,f,y)._parse(n,C):this._parse(n,C)}_parse(n,A){function f(y,C,I){return I==="assert"?new dn(C,[y]):I==="coerce"?new mn(C,[y]):y}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const y=n[0];if(typeof y!="string")return this.error(`Expression name must be a string, but found ${typeof y} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const C=this.registry[y];if(C){let I=C.parse(n,this);if(!I)return null;if(this.expectedType){const D=this.expectedType,H=I.type;if(D.kind!=="string"&&D.kind!=="number"&&D.kind!=="boolean"&&D.kind!=="object"&&D.kind!=="array"||H.kind!=="value")if(D.kind!=="color"&&D.kind!=="formatted"&&D.kind!=="resolvedImage"||H.kind!=="value"&&H.kind!=="string")if(D.kind!=="padding"||H.kind!=="value"&&H.kind!=="number"&&H.kind!=="array"){if(this.checkSubtype(D,H))return null}else I=f(I,D,A.typeAnnotation||"coerce");else I=f(I,D,A.typeAnnotation||"coerce");else I=f(I,D,A.typeAnnotation||"assert")}if(!(I instanceof Hr)&&I.type.kind!=="resolvedImage"&&Do(I)){const D=new Qn;try{I=new Hr(I.type,I.evaluate(D))}catch(H){return this.error(H.message),null}}return I}return this.error(`Unknown expression "${y}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,A,f){const y=typeof n=="number"?this.path.concat(n):this.path,C=f?this.scope.concat(f):this.scope;return new Qa(this.registry,y,A||null,C,this.errors)}error(n,...A){const f=`${this.key}${A.map(y=>`[${y}]`).join("")}`;this.errors.push(new Vr(f,n))}checkSubtype(n,A){const f=tn(n,A);return f&&this.error(f),f}}function Do(o){if(o instanceof Mo)return Do(o.boundExpression);if(o instanceof Vn&&o.name==="error"||o instanceof Ti||o instanceof bs)return!1;const n=o instanceof mn||o instanceof dn;let A=!0;return o.eachChild(f=>{A=n?A&&Do(f):A&&f instanceof Hr}),!!A&&xs(o)&&aa(o,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function oa(o,n){const A=o.length-1;let f,y,C=0,I=A,D=0;for(;C<=I;)if(D=Math.floor((C+I)/2),f=o[D],y=o[D+1],f<=n){if(D===A||n<y)return D;C=D+1}else{if(!(f>n))throw new Tr("Input is not a number.");I=D-1}return 0}class qs{constructor(n,A,f){this.type=n,this.input=A,this.labels=[],this.outputs=[];for(const[y,C]of f)this.labels.push(y),this.outputs.push(C)}static parse(n,A){if(n.length-1<4)return A.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return A.error("Expected an even number of arguments.");const f=A.parse(n[1],1,lr);if(!f)return null;const y=[];let C=null;A.expectedType&&A.expectedType.kind!=="value"&&(C=A.expectedType);for(let I=1;I<n.length;I+=2){const D=I===1?-1/0:n[I],H=n[I+1],X=I,ne=I+1;if(typeof D!="number")return A.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',X);if(y.length&&y[y.length-1][0]>=D)return A.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',X);const le=A.parse(H,ne,C);if(!le)return null;C=C||le.type,y.push([D,le])}return new qs(C,f,y)}evaluate(n){const A=this.labels,f=this.outputs;if(A.length===1)return f[0].evaluate(n);const y=this.input.evaluate(n);if(y<=A[0])return f[0].evaluate(n);const C=A.length;return y>=A[C-1]?f[C-1].evaluate(n):f[oa(A,y)].evaluate(n)}eachChild(n){n(this.input);for(const A of this.outputs)n(A)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function si(o,n,A){return o*(1-A)+n*A}var Bs=Object.freeze({__proto__:null,number:si,color:function(o,n,A){return new Ue(si(o.r,n.r,A),si(o.g,n.g,A),si(o.b,n.b,A),si(o.a,n.a,A))},array:function(o,n,A){return o.map((f,y)=>si(f,n[y],A))},padding:function(o,n,A){const f=o.values,y=n.values;return new qe([si(f[0],y[0],A),si(f[1],y[1],A),si(f[2],y[2],A),si(f[3],y[3],A)])}});const ys=.95047,iA=1.08883,sA=4/29,Cn=6/29,GA=3*Cn*Cn,ml=Math.PI/180,Pa=180/Math.PI;function _o(o){return o>.008856451679035631?Math.pow(o,1/3):o/GA+sA}function aA(o){return o>Cn?o*o*o:GA*(o-sA)}function wo(o){return 255*(o<=.0031308?12.92*o:1.055*Math.pow(o,1/2.4)-.055)}function gt(o){return(o/=255)<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function Mn(o){const n=gt(o.r),A=gt(o.g),f=gt(o.b),y=_o((.4124564*n+.3575761*A+.1804375*f)/ys),C=_o((.2126729*n+.7151522*A+.072175*f)/1);return{l:116*C-16,a:500*(y-C),b:200*(C-_o((.0193339*n+.119192*A+.9503041*f)/iA)),alpha:o.a}}function Ds(o){let n=(o.l+16)/116,A=isNaN(o.a)?n:n+o.a/500,f=isNaN(o.b)?n:n-o.b/200;return n=1*aA(n),A=ys*aA(A),f=iA*aA(f),new Ue(wo(3.2404542*A-1.5371385*n-.4985314*f),wo(-.969266*A+1.8760108*n+.041556*f),wo(.0556434*A-.2040259*n+1.0572252*f),o.alpha)}function Oi(o,n,A){const f=n-o;return o+A*(f>180||f<-180?f-360*Math.round(f/360):f)}const Qs={forward:Mn,reverse:Ds,interpolate:function(o,n,A){return{l:si(o.l,n.l,A),a:si(o.a,n.a,A),b:si(o.b,n.b,A),alpha:si(o.alpha,n.alpha,A)}}},ya={forward:function(o){const{l:n,a:A,b:f}=Mn(o),y=Math.atan2(f,A)*Pa;return{h:y<0?y+360:y,c:Math.sqrt(A*A+f*f),l:n,alpha:o.a}},reverse:function(o){const n=o.h*ml,A=o.c;return Ds({l:o.l,a:Math.cos(n)*A,b:Math.sin(n)*A,alpha:o.alpha})},interpolate:function(o,n,A){return{h:Oi(o.h,n.h,A),c:si(o.c,n.c,A),l:si(o.l,n.l,A),alpha:si(o.alpha,n.alpha,A)}}};var eo=Object.freeze({__proto__:null,lab:Qs,hcl:ya});class Cs{constructor(n,A,f,y,C){this.type=n,this.operator=A,this.interpolation=f,this.input=y,this.labels=[],this.outputs=[];for(const[I,D]of C)this.labels.push(I),this.outputs.push(D)}static interpolationFactor(n,A,f,y){let C=0;if(n.name==="exponential")C=Aa(A,n.base,f,y);else if(n.name==="linear")C=Aa(A,1,f,y);else if(n.name==="cubic-bezier"){const I=n.controlPoints;C=new d(I[0],I[1],I[2],I[3]).solve(Aa(A,1,f,y))}return C}static parse(n,A){let[f,y,C,...I]=n;if(!Array.isArray(y)||y.length===0)return A.error("Expected an interpolation type expression.",1);if(y[0]==="linear")y={name:"linear"};else if(y[0]==="exponential"){const X=y[1];if(typeof X!="number")return A.error("Exponential interpolation requires a numeric base.",1,1);y={name:"exponential",base:X}}else{if(y[0]!=="cubic-bezier")return A.error(`Unknown interpolation type ${String(y[0])}`,1,0);{const X=y.slice(1);if(X.length!==4||X.some(ne=>typeof ne!="number"||ne<0||ne>1))return A.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);y={name:"cubic-bezier",controlPoints:X}}}if(n.length-1<4)return A.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return A.error("Expected an even number of arguments.");if(C=A.parse(C,2,lr),!C)return null;const D=[];let H=null;f==="interpolate-hcl"||f==="interpolate-lab"?H=wn:A.expectedType&&A.expectedType.kind!=="value"&&(H=A.expectedType);for(let X=0;X<I.length;X+=2){const ne=I[X],le=I[X+1],ye=X+3,Be=X+4;if(typeof ne!="number")return A.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ye);if(D.length&&D[D.length-1][0]>=ne)return A.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ye);const Fe=A.parse(le,Be,H);if(!Fe)return null;H=H||Fe.type,D.push([ne,Fe])}return H.kind==="number"||H.kind==="color"||H.kind==="padding"||H.kind==="array"&&H.itemType.kind==="number"&&typeof H.N=="number"?new Cs(H,f,y,C,D):A.error(`Type ${Sn(H)} is not interpolatable.`)}evaluate(n){const A=this.labels,f=this.outputs;if(A.length===1)return f[0].evaluate(n);const y=this.input.evaluate(n);if(y<=A[0])return f[0].evaluate(n);const C=A.length;if(y>=A[C-1])return f[C-1].evaluate(n);const I=oa(A,y),D=Cs.interpolationFactor(this.interpolation,y,A[I],A[I+1]),H=f[I].evaluate(n),X=f[I+1].evaluate(n);return this.operator==="interpolate"?Bs[this.type.kind.toLowerCase()](H,X,D):this.operator==="interpolate-hcl"?ya.reverse(ya.interpolate(ya.forward(H),ya.forward(X),D)):Qs.reverse(Qs.interpolate(Qs.forward(H),Qs.forward(X),D))}eachChild(n){n(this.input);for(const A of this.outputs)n(A)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function Aa(o,n,A,f){const y=f-A,C=o-A;return y===0?0:n===1?C/y:(Math.pow(n,C)-1)/(Math.pow(n,y)-1)}class to{constructor(n,A){this.type=n,this.args=A}static parse(n,A){if(n.length<2)return A.error("Expectected at least one argument.");let f=null;const y=A.expectedType;y&&y.kind!=="value"&&(f=y);const C=[];for(const D of n.slice(1)){const H=A.parse(D,1+C.length,f,void 0,{typeAnnotation:"omit"});if(!H)return null;f=f||H.type,C.push(H)}if(!f)throw new Error("No output type");const I=y&&C.some(D=>tn(y,D.type));return new to(I?br:f,C)}evaluate(n){let A,f=null,y=0;for(const C of this.args)if(y++,f=C.evaluate(n),f&&f instanceof ut&&!f.available&&(A||(A=f.name),f=null,y===this.args.length&&(f=A)),f!==null)break;return f}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}class va{constructor(n,A){this.type=A.type,this.bindings=[].concat(n),this.result=A}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const A of this.bindings)n(A[1]);n(this.result)}static parse(n,A){if(n.length<4)return A.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const f=[];for(let C=1;C<n.length-1;C+=2){const I=n[C];if(typeof I!="string")return A.error(`Expected string, but found ${typeof I} instead.`,C);if(/[^a-zA-Z0-9_]/.test(I))return A.error("Variable names must contain only alphanumeric characters or '_'.",C);const D=A.parse(n[C+1],C+1);if(!D)return null;f.push([I,D])}const y=A.parse(n[n.length-1],n.length-1,A.expectedType,f);return y?new va(f,y):null}outputDefined(){return this.result.outputDefined()}}class qA{constructor(n,A,f){this.type=n,this.index=A,this.input=f}static parse(n,A){if(n.length!==3)return A.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const f=A.parse(n[1],1,lr),y=A.parse(n[2],2,xn(A.expectedType||br));return f&&y?new qA(y.type.itemType,f,y):null}evaluate(n){const A=this.index.evaluate(n),f=this.input.evaluate(n);if(A<0)throw new Tr(`Array index out of bounds: ${A} < 0.`);if(A>=f.length)throw new Tr(`Array index out of bounds: ${A} > ${f.length-1}.`);if(A!==Math.floor(A))throw new Tr(`Array index must be an integer, but found ${A} instead.`);return f[A]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class ts{constructor(n,A){this.type=An,this.needle=n,this.haystack=A}static parse(n,A){if(n.length!==3)return A.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const f=A.parse(n[1],1,br),y=A.parse(n[2],2,br);return f&&y?Wi(f.type,[An,Er,lr,un,br])?new ts(f,y):A.error(`Expected first argument to be of type boolean, string, number or null, but found ${Sn(f.type)} instead`):null}evaluate(n){const A=this.needle.evaluate(n),f=this.haystack.evaluate(n);if(!f)return!1;if(!hs(A,["boolean","string","number","null"]))throw new Tr(`Expected first argument to be of type boolean, string, number or null, but found ${Sn(zt(A))} instead.`);if(!hs(f,["string","array"]))throw new Tr(`Expected second argument to be of type array or string, but found ${Sn(zt(f))} instead.`);return f.indexOf(A)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class FA{constructor(n,A,f){this.type=lr,this.needle=n,this.haystack=A,this.fromIndex=f}static parse(n,A){if(n.length<=2||n.length>=5)return A.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const f=A.parse(n[1],1,br),y=A.parse(n[2],2,br);if(!f||!y)return null;if(!Wi(f.type,[An,Er,lr,un,br]))return A.error(`Expected first argument to be of type boolean, string, number or null, but found ${Sn(f.type)} instead`);if(n.length===4){const C=A.parse(n[3],3,lr);return C?new FA(f,y,C):null}return new FA(f,y)}evaluate(n){const A=this.needle.evaluate(n),f=this.haystack.evaluate(n);if(!hs(A,["boolean","string","number","null"]))throw new Tr(`Expected first argument to be of type boolean, string, number or null, but found ${Sn(zt(A))} instead.`);if(!hs(f,["string","array"]))throw new Tr(`Expected second argument to be of type array or string, but found ${Sn(zt(f))} instead.`);if(this.fromIndex){const y=this.fromIndex.evaluate(n);return f.indexOf(A,y)}return f.indexOf(A)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class ro{constructor(n,A,f,y,C,I){this.inputType=n,this.type=A,this.input=f,this.cases=y,this.outputs=C,this.otherwise=I}static parse(n,A){if(n.length<5)return A.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return A.error("Expected an even number of arguments.");let f,y;A.expectedType&&A.expectedType.kind!=="value"&&(y=A.expectedType);const C={},I=[];for(let X=2;X<n.length-1;X+=2){let ne=n[X];const le=n[X+1];Array.isArray(ne)||(ne=[ne]);const ye=A.concat(X);if(ne.length===0)return ye.error("Expected at least one branch label.");for(const Fe of ne){if(typeof Fe!="number"&&typeof Fe!="string")return ye.error("Branch labels must be numbers or strings.");if(typeof Fe=="number"&&Math.abs(Fe)>Number.MAX_SAFE_INTEGER)return ye.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Fe=="number"&&Math.floor(Fe)!==Fe)return ye.error("Numeric branch labels must be integer values.");if(f){if(ye.checkSubtype(f,zt(Fe)))return null}else f=zt(Fe);if(C[String(Fe)]!==void 0)return ye.error("Branch labels must be unique.");C[String(Fe)]=I.length}const Be=A.parse(le,X,y);if(!Be)return null;y=y||Be.type,I.push(Be)}const D=A.parse(n[1],1,br);if(!D)return null;const H=A.parse(n[n.length-1],n.length-1,y);return H?D.type.kind!=="value"&&A.concat(1).checkSubtype(f,D.type)?null:new ro(f,y,D,C,I,H):null}evaluate(n){const A=this.input.evaluate(n);return(zt(A)===this.inputType&&this.outputs[this.cases[A]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}}class no{constructor(n,A,f){this.type=n,this.branches=A,this.otherwise=f}static parse(n,A){if(n.length<4)return A.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return A.error("Expected an odd number of arguments.");let f;A.expectedType&&A.expectedType.kind!=="value"&&(f=A.expectedType);const y=[];for(let I=1;I<n.length-1;I+=2){const D=A.parse(n[I],I,An);if(!D)return null;const H=A.parse(n[I+1],I+1,f);if(!H)return null;y.push([D,H]),f=f||H.type}const C=A.parse(n[n.length-1],n.length-1,f);if(!C)return null;if(!f)throw new Error("Can't infer output type");return new no(f,y,C)}evaluate(n){for(const[A,f]of this.branches)if(A.evaluate(n))return f.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[A,f]of this.branches)n(A),n(f);n(this.otherwise)}outputDefined(){return this.branches.every(([n,A])=>A.outputDefined())&&this.otherwise.outputDefined()}}class io{constructor(n,A,f,y){this.type=n,this.input=A,this.beginIndex=f,this.endIndex=y}static parse(n,A){if(n.length<=2||n.length>=5)return A.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const f=A.parse(n[1],1,br),y=A.parse(n[2],2,lr);if(!f||!y)return null;if(!Wi(f.type,[xn(br),Er,br]))return A.error(`Expected first argument to be of type array or string, but found ${Sn(f.type)} instead`);if(n.length===4){const C=A.parse(n[3],3,lr);return C?new io(f.type,f,y,C):null}return new io(f.type,f,y)}evaluate(n){const A=this.input.evaluate(n),f=this.beginIndex.evaluate(n);if(!hs(A,["string","array"]))throw new Tr(`Expected first argument to be of type array or string, but found ${Sn(zt(A))} instead.`);if(this.endIndex){const y=this.endIndex.evaluate(n);return A.slice(f,y)}return A.slice(f)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function Wl(o,n){return o==="=="||o==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function No(o,n,A,f){return f.compare(n,A)===0}function vs(o,n,A){const f=o!=="=="&&o!=="!=";return class lv{constructor(C,I,D){this.type=An,this.lhs=C,this.rhs=I,this.collator=D,this.hasUntypedArgument=C.type.kind==="value"||I.type.kind==="value"}static parse(C,I){if(C.length!==3&&C.length!==4)return I.error("Expected two or three arguments.");const D=C[0];let H=I.parse(C[1],1,br);if(!H)return null;if(!Wl(D,H.type))return I.concat(1).error(`"${D}" comparisons are not supported for type '${Sn(H.type)}'.`);let X=I.parse(C[2],2,br);if(!X)return null;if(!Wl(D,X.type))return I.concat(2).error(`"${D}" comparisons are not supported for type '${Sn(X.type)}'.`);if(H.type.kind!==X.type.kind&&H.type.kind!=="value"&&X.type.kind!=="value")return I.error(`Cannot compare types '${Sn(H.type)}' and '${Sn(X.type)}'.`);f&&(H.type.kind==="value"&&X.type.kind!=="value"?H=new dn(X.type,[H]):H.type.kind!=="value"&&X.type.kind==="value"&&(X=new dn(H.type,[X])));let ne=null;if(C.length===4){if(H.type.kind!=="string"&&X.type.kind!=="string"&&H.type.kind!=="value"&&X.type.kind!=="value")return I.error("Cannot use collator to compare non-string types.");if(ne=I.parse(C[3],3,Cr),!ne)return null}return new lv(H,X,ne)}evaluate(C){const I=this.lhs.evaluate(C),D=this.rhs.evaluate(C);if(f&&this.hasUntypedArgument){const H=zt(I),X=zt(D);if(H.kind!==X.kind||H.kind!=="string"&&H.kind!=="number")throw new Tr(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${H.kind}, ${X.kind}) instead.`)}if(this.collator&&!f&&this.hasUntypedArgument){const H=zt(I),X=zt(D);if(H.kind!=="string"||X.kind!=="string")return n(C,I,D)}return this.collator?A(C,I,D,this.collator.evaluate(C)):n(C,I,D)}eachChild(C){C(this.lhs),C(this.rhs),this.collator&&C(this.collator)}outputDefined(){return!0}}}const oA=vs("==",function(o,n,A){return n===A},No),AA=vs("!=",function(o,n,A){return n!==A},function(o,n,A,f){return!No(0,n,A,f)}),_c=vs("<",function(o,n,A){return n<A},function(o,n,A,f){return f.compare(n,A)<0}),_a=vs(">",function(o,n,A){return n>A},function(o,n,A,f){return f.compare(n,A)>0}),WA=vs("<=",function(o,n,A){return n<=A},function(o,n,A,f){return f.compare(n,A)<=0}),SA=vs(">=",function(o,n,A){return n>=A},function(o,n,A,f){return f.compare(n,A)>=0});class IA{constructor(n,A,f,y,C){this.type=Er,this.number=n,this.locale=A,this.currency=f,this.minFractionDigits=y,this.maxFractionDigits=C}static parse(n,A){if(n.length!==3)return A.error("Expected two arguments.");const f=A.parse(n[1],1,lr);if(!f)return null;const y=n[2];if(typeof y!="object"||Array.isArray(y))return A.error("NumberFormat options argument must be an object.");let C=null;if(y.locale&&(C=A.parse(y.locale,1,Er),!C))return null;let I=null;if(y.currency&&(I=A.parse(y.currency,1,Er),!I))return null;let D=null;if(y["min-fraction-digits"]&&(D=A.parse(y["min-fraction-digits"],1,lr),!D))return null;let H=null;return y["max-fraction-digits"]&&(H=A.parse(y["max-fraction-digits"],1,lr),!H)?null:new IA(f,C,I,D,H)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class TA{constructor(n){this.type=cr,this.sections=n}static parse(n,A){if(n.length<2)return A.error("Expected at least one argument.");const f=n[1];if(!Array.isArray(f)&&typeof f=="object")return A.error("First argument must be an image or text section.");const y=[];let C=!1;for(let I=1;I<=n.length-1;++I){const D=n[I];if(C&&typeof D=="object"&&!Array.isArray(D)){C=!1;let H=null;if(D["font-scale"]&&(H=A.parse(D["font-scale"],1,lr),!H))return null;let X=null;if(D["text-font"]&&(X=A.parse(D["text-font"],1,xn(Er)),!X))return null;let ne=null;if(D["text-color"]&&(ne=A.parse(D["text-color"],1,wn),!ne))return null;const le=y[y.length-1];le.scale=H,le.font=X,le.textColor=ne}else{const H=A.parse(n[I],1,br);if(!H)return null;const X=H.type.kind;if(X!=="string"&&X!=="value"&&X!=="null"&&X!=="resolvedImage")return A.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");C=!0,y.push({content:H,scale:null,font:null,textColor:null})}}return new TA(y)}evaluate(n){return new $e(this.sections.map(A=>{const f=A.content.evaluate(n);return zt(f)===hn?new lt("",f,null,null,null):new lt(jr(f),null,A.scale?A.scale.evaluate(n):null,A.font?A.font.evaluate(n).join(","):null,A.textColor?A.textColor.evaluate(n):null)}))}eachChild(n){for(const A of this.sections)n(A.content),A.scale&&n(A.scale),A.font&&n(A.font),A.textColor&&n(A.textColor)}outputDefined(){return!1}}class lA{constructor(n){this.type=hn,this.input=n}static parse(n,A){if(n.length!==2)return A.error("Expected two arguments.");const f=A.parse(n[1],1,Er);return f?new lA(f):A.error("No image name provided.")}evaluate(n){const A=this.input.evaluate(n),f=ut.fromString(A);return f&&n.availableImages&&(f.available=n.availableImages.indexOf(A)>-1),f}eachChild(n){n(this.input)}outputDefined(){return!1}}class UA{constructor(n){this.type=lr,this.input=n}static parse(n,A){if(n.length!==2)return A.error(`Expected 1 argument, but found ${n.length-1} instead.`);const f=A.parse(n[1],1);return f?f.type.kind!=="array"&&f.type.kind!=="string"&&f.type.kind!=="value"?A.error(`Expected argument of type string or array, but found ${Sn(f.type)} instead.`):new UA(f):null}evaluate(n){const A=this.input.evaluate(n);if(typeof A=="string"||Array.isArray(A))return A.length;throw new Tr(`Expected value to be of type string or array, but found ${Sn(zt(A))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}const bo={"==":oA,"!=":AA,">":_a,"<":_c,">=":SA,"<=":WA,array:dn,at:qA,boolean:dn,case:no,coalesce:to,collator:Ti,format:TA,image:lA,in:ts,"index-of":FA,interpolate:Cs,"interpolate-hcl":Cs,"interpolate-lab":Cs,length:UA,let:va,literal:Hr,match:ro,number:dn,"number-format":IA,object:dn,slice:io,step:qs,string:dn,"to-boolean":mn,"to-color":mn,"to-number":mn,"to-string":mn,var:Mo,within:bs};function gl(o,[n,A,f,y]){n=n.evaluate(o),A=A.evaluate(o),f=f.evaluate(o);const C=y?y.evaluate(o):1,I=Ot(n,A,f,C);if(I)throw new Tr(I);return new Ue(n/255*C,A/255*C,f/255*C,C)}function Xl(o,n){return o in n}function jo(o,n){const A=n[o];return A===void 0?null:A}function wa(o){return{type:o}}function XA(o){return{result:"success",value:o}}function ba(o){return{result:"error",value:o}}function xi(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function N(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function oe(o){return!!o.expression&&o.expression.interpolated}function Me(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function tt(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function _t(o){return o}function Jt(o,n){const A=n.type==="color",f=o.stops&&typeof o.stops[0][0]=="object",y=f||!(f||o.property!==void 0),C=o.type||(oe(n)?"exponential":"interval");if(A||n.type==="padding"){const X=A?Ue.parse:qe.parse;(o=Ct({},o)).stops&&(o.stops=o.stops.map(ne=>[ne[0],X(ne[1])])),o.default=X(o.default?o.default:n.default)}if(o.colorSpace&&o.colorSpace!=="rgb"&&!eo[o.colorSpace])throw new Error(`Unknown color space: ${o.colorSpace}`);let I,D,H;if(C==="exponential")I=Dn;else if(C==="interval")I=En;else if(C==="categorical"){I=en,D=Object.create(null);for(const X of o.stops)D[X[0]]=X[1];H=typeof o.stops[0][0]}else{if(C!=="identity")throw new Error(`Unknown function type "${C}"`);I=Kn}if(f){const X={},ne=[];for(let Be=0;Be<o.stops.length;Be++){const Fe=o.stops[Be],et=Fe[0].zoom;X[et]===void 0&&(X[et]={zoom:et,type:o.type,property:o.property,default:o.default,stops:[]},ne.push(et)),X[et].stops.push([Fe[0].value,Fe[1]])}const le=[];for(const Be of ne)le.push([X[Be].zoom,Jt(X[Be],n)]);const ye={name:"linear"};return{kind:"composite",interpolationType:ye,interpolationFactor:Cs.interpolationFactor.bind(void 0,ye),zoomStops:le.map(Be=>Be[0]),evaluate:({zoom:Be},Fe)=>Dn({stops:le,base:o.base},n,Be).evaluate(Be,Fe)}}if(y){const X=C==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:X,interpolationFactor:Cs.interpolationFactor.bind(void 0,X),zoomStops:o.stops.map(ne=>ne[0]),evaluate:({zoom:ne})=>I(o,n,ne,D,H)}}return{kind:"source",evaluate(X,ne){const le=ne&&ne.properties?ne.properties[o.property]:void 0;return le===void 0?_r(o.default,n.default):I(o,n,le,D,H)}}}function _r(o,n,A){return o!==void 0?o:n!==void 0?n:A!==void 0?A:void 0}function en(o,n,A,f,y){return _r(typeof A===y?f[A]:void 0,o.default,n.default)}function En(o,n,A){if(Me(A)!=="number")return _r(o.default,n.default);const f=o.stops.length;if(f===1||A<=o.stops[0][0])return o.stops[0][1];if(A>=o.stops[f-1][0])return o.stops[f-1][1];const y=oa(o.stops.map(C=>C[0]),A);return o.stops[y][1]}function Dn(o,n,A){const f=o.base!==void 0?o.base:1;if(Me(A)!=="number")return _r(o.default,n.default);const y=o.stops.length;if(y===1||A<=o.stops[0][0])return o.stops[0][1];if(A>=o.stops[y-1][0])return o.stops[y-1][1];const C=oa(o.stops.map(ne=>ne[0]),A),I=function(ne,le,ye,Be){const Fe=Be-ye,et=ne-ye;return Fe===0?0:le===1?et/Fe:(Math.pow(le,et)-1)/(Math.pow(le,Fe)-1)}(A,f,o.stops[C][0],o.stops[C+1][0]),D=o.stops[C][1],H=o.stops[C+1][1];let X=Bs[n.type]||_t;if(o.colorSpace&&o.colorSpace!=="rgb"){const ne=eo[o.colorSpace];X=(le,ye)=>ne.reverse(ne.interpolate(ne.forward(le),ne.forward(ye),I))}return typeof D.evaluate=="function"?{evaluate(...ne){const le=D.evaluate.apply(void 0,ne),ye=H.evaluate.apply(void 0,ne);if(le!==void 0&&ye!==void 0)return X(le,ye,I)}}:X(D,H,I)}function Kn(o,n,A){switch(n.type){case"color":A=Ue.parse(A);break;case"formatted":A=$e.fromString(A.toString());break;case"resolvedImage":A=ut.fromString(A.toString());break;case"padding":A=qe.parse(A);break;default:Me(A)===n.type||n.type==="enum"&&n.values[A]||(A=void 0)}return _r(A,o.default,n.default)}Vn.register(bo,{error:[{kind:"error"},[Er],(o,[n])=>{throw new Tr(n.evaluate(o))}],typeof:[Er,[br],(o,[n])=>Sn(zt(n.evaluate(o)))],"to-rgba":[xn(lr,4),[wn],(o,[n])=>n.evaluate(o).toArray()],rgb:[wn,[lr,lr,lr],gl],rgba:[wn,[lr,lr,lr,lr],gl],has:{type:An,overloads:[[[Er],(o,[n])=>Xl(n.evaluate(o),o.properties())],[[Er,_i],(o,[n,A])=>Xl(n.evaluate(o),A.evaluate(o))]]},get:{type:br,overloads:[[[Er],(o,[n])=>jo(n.evaluate(o),o.properties())],[[Er,_i],(o,[n,A])=>jo(n.evaluate(o),A.evaluate(o))]]},"feature-state":[br,[Er],(o,[n])=>jo(n.evaluate(o),o.featureState||{})],properties:[_i,[],o=>o.properties()],"geometry-type":[Er,[],o=>o.geometryType()],id:[br,[],o=>o.id()],zoom:[lr,[],o=>o.globals.zoom],"heatmap-density":[lr,[],o=>o.globals.heatmapDensity||0],"line-progress":[lr,[],o=>o.globals.lineProgress||0],accumulated:[br,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[lr,wa(lr),(o,n)=>{let A=0;for(const f of n)A+=f.evaluate(o);return A}],"*":[lr,wa(lr),(o,n)=>{let A=1;for(const f of n)A*=f.evaluate(o);return A}],"-":{type:lr,overloads:[[[lr,lr],(o,[n,A])=>n.evaluate(o)-A.evaluate(o)],[[lr],(o,[n])=>-n.evaluate(o)]]},"/":[lr,[lr,lr],(o,[n,A])=>n.evaluate(o)/A.evaluate(o)],"%":[lr,[lr,lr],(o,[n,A])=>n.evaluate(o)%A.evaluate(o)],ln2:[lr,[],()=>Math.LN2],pi:[lr,[],()=>Math.PI],e:[lr,[],()=>Math.E],"^":[lr,[lr,lr],(o,[n,A])=>Math.pow(n.evaluate(o),A.evaluate(o))],sqrt:[lr,[lr],(o,[n])=>Math.sqrt(n.evaluate(o))],log10:[lr,[lr],(o,[n])=>Math.log(n.evaluate(o))/Math.LN10],ln:[lr,[lr],(o,[n])=>Math.log(n.evaluate(o))],log2:[lr,[lr],(o,[n])=>Math.log(n.evaluate(o))/Math.LN2],sin:[lr,[lr],(o,[n])=>Math.sin(n.evaluate(o))],cos:[lr,[lr],(o,[n])=>Math.cos(n.evaluate(o))],tan:[lr,[lr],(o,[n])=>Math.tan(n.evaluate(o))],asin:[lr,[lr],(o,[n])=>Math.asin(n.evaluate(o))],acos:[lr,[lr],(o,[n])=>Math.acos(n.evaluate(o))],atan:[lr,[lr],(o,[n])=>Math.atan(n.evaluate(o))],min:[lr,wa(lr),(o,n)=>Math.min(...n.map(A=>A.evaluate(o)))],max:[lr,wa(lr),(o,n)=>Math.max(...n.map(A=>A.evaluate(o)))],abs:[lr,[lr],(o,[n])=>Math.abs(n.evaluate(o))],round:[lr,[lr],(o,[n])=>{const A=n.evaluate(o);return A<0?-Math.round(-A):Math.round(A)}],floor:[lr,[lr],(o,[n])=>Math.floor(n.evaluate(o))],ceil:[lr,[lr],(o,[n])=>Math.ceil(n.evaluate(o))],"filter-==":[An,[Er,br],(o,[n,A])=>o.properties()[n.value]===A.value],"filter-id-==":[An,[br],(o,[n])=>o.id()===n.value],"filter-type-==":[An,[Er],(o,[n])=>o.geometryType()===n.value],"filter-<":[An,[Er,br],(o,[n,A])=>{const f=o.properties()[n.value],y=A.value;return typeof f==typeof y&&f<y}],"filter-id-<":[An,[br],(o,[n])=>{const A=o.id(),f=n.value;return typeof A==typeof f&&A<f}],"filter->":[An,[Er,br],(o,[n,A])=>{const f=o.properties()[n.value],y=A.value;return typeof f==typeof y&&f>y}],"filter-id->":[An,[br],(o,[n])=>{const A=o.id(),f=n.value;return typeof A==typeof f&&A>f}],"filter-<=":[An,[Er,br],(o,[n,A])=>{const f=o.properties()[n.value],y=A.value;return typeof f==typeof y&&f<=y}],"filter-id-<=":[An,[br],(o,[n])=>{const A=o.id(),f=n.value;return typeof A==typeof f&&A<=f}],"filter->=":[An,[Er,br],(o,[n,A])=>{const f=o.properties()[n.value],y=A.value;return typeof f==typeof y&&f>=y}],"filter-id->=":[An,[br],(o,[n])=>{const A=o.id(),f=n.value;return typeof A==typeof f&&A>=f}],"filter-has":[An,[br],(o,[n])=>n.value in o.properties()],"filter-has-id":[An,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[An,[xn(Er)],(o,[n])=>n.value.indexOf(o.geometryType())>=0],"filter-id-in":[An,[xn(br)],(o,[n])=>n.value.indexOf(o.id())>=0],"filter-in-small":[An,[Er,xn(br)],(o,[n,A])=>A.value.indexOf(o.properties()[n.value])>=0],"filter-in-large":[An,[Er,xn(br)],(o,[n,A])=>function(f,y,C,I){for(;C<=I;){const D=C+I>>1;if(y[D]===f)return!0;y[D]>f?I=D-1:C=D+1}return!1}(o.properties()[n.value],A.value,0,A.value.length-1)],all:{type:An,overloads:[[[An,An],(o,[n,A])=>n.evaluate(o)&&A.evaluate(o)],[wa(An),(o,n)=>{for(const A of n)if(!A.evaluate(o))return!1;return!0}]]},any:{type:An,overloads:[[[An,An],(o,[n,A])=>n.evaluate(o)||A.evaluate(o)],[wa(An),(o,n)=>{for(const A of n)if(A.evaluate(o))return!0;return!1}]]},"!":[An,[An],(o,[n])=>!n.evaluate(o)],"is-supported-script":[An,[Er],(o,[n])=>{const A=o.globals&&o.globals.isSupportedScript;return!A||A(n.evaluate(o))}],upcase:[Er,[Er],(o,[n])=>n.evaluate(o).toUpperCase()],downcase:[Er,[Er],(o,[n])=>n.evaluate(o).toLowerCase()],concat:[Er,wa(br),(o,n)=>n.map(A=>jr(A.evaluate(o))).join("")],"resolved-locale":[Er,[Cr],(o,[n])=>n.evaluate(o).resolvedLocale()]});class Wn{constructor(n,A){this.expression=n,this._warningHistory={},this._evaluator=new Qn,this._defaultValue=A?function(f){return f.type==="color"&&tt(f.default)?new Ue(0,0,0,0):f.type==="color"?Ue.parse(f.default)||null:f.type==="padding"?qe.parse(f.default)||null:f.default===void 0?null:f.default}(A):null,this._enumValues=A&&A.type==="enum"?A.values:null}evaluateWithoutErrorHandling(n,A,f,y,C,I){return this._evaluator.globals=n,this._evaluator.feature=A,this._evaluator.featureState=f,this._evaluator.canonical=y,this._evaluator.availableImages=C||null,this._evaluator.formattedSection=I,this.expression.evaluate(this._evaluator)}evaluate(n,A,f,y,C,I){this._evaluator.globals=n,this._evaluator.feature=A||null,this._evaluator.featureState=f||null,this._evaluator.canonical=y,this._evaluator.availableImages=C||null,this._evaluator.formattedSection=I||null;try{const D=this.expression.evaluate(this._evaluator);if(D==null||typeof D=="number"&&D!=D)return this._defaultValue;if(this._enumValues&&!(D in this._enumValues))throw new Tr(`Expected value to be one of ${Object.keys(this._enumValues).map(H=>JSON.stringify(H)).join(", ")}, but found ${JSON.stringify(D)} instead.`);return D}catch(D){return this._warningHistory[D.message]||(this._warningHistory[D.message]=!0,typeof console<"u"&&console.warn(D.message)),this._defaultValue}}}function pi(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in bo}function mi(o,n){const A=new Qa(bo,[],n?function(y){const C={color:wn,string:Er,number:lr,enum:Er,boolean:An,formatted:cr,padding:Kr,resolvedImage:hn};return y.type==="array"?xn(C[y.value]||br,y.length):C[y.type]}(n):void 0),f=A.parse(o,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return f?XA(new Wn(f,n)):ba(A.errors)}class Tn{constructor(n,A){this.kind=n,this._styleExpression=A,this.isStateDependent=n!=="constant"&&!$a(A.expression)}evaluateWithoutErrorHandling(n,A,f,y,C,I){return this._styleExpression.evaluateWithoutErrorHandling(n,A,f,y,C,I)}evaluate(n,A,f,y,C,I){return this._styleExpression.evaluate(n,A,f,y,C,I)}}class Es{constructor(n,A,f,y){this.kind=n,this.zoomStops=f,this._styleExpression=A,this.isStateDependent=n!=="camera"&&!$a(A.expression),this.interpolationType=y}evaluateWithoutErrorHandling(n,A,f,y,C,I){return this._styleExpression.evaluateWithoutErrorHandling(n,A,f,y,C,I)}evaluate(n,A,f,y,C,I){return this._styleExpression.evaluate(n,A,f,y,C,I)}interpolationFactor(n,A,f){return this.interpolationType?Cs.interpolationFactor(this.interpolationType,n,A,f):0}}function rs(o,n){const A=mi(o,n);if(A.result==="error")return A;const f=A.value.expression,y=xs(f);if(!y&&!xi(n))return ba([new Vr("","data expressions not supported")]);const C=aa(f,["zoom"]);if(!C&&!N(n))return ba([new Vr("","zoom expressions not supported")]);const I=ns(f);return I||C?I instanceof Vr?ba([I]):I instanceof Cs&&!oe(n)?ba([new Vr("",'"interpolate" expressions cannot be used with this property')]):XA(I?new Es(y?"camera":"composite",A.value,I.labels,I instanceof Cs?I.interpolation:void 0):new Tn(y?"constant":"source",A.value)):ba([new Vr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Ws{constructor(n,A){this._parameters=n,this._specification=A,Ct(this,Jt(this._parameters,this._specification))}static deserialize(n){return new Ws(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function ns(o){let n=null;if(o instanceof va)n=ns(o.result);else if(o instanceof to){for(const A of o.args)if(n=ns(A),n)break}else(o instanceof qs||o instanceof Cs)&&o.input instanceof Vn&&o.input.name==="zoom"&&(n=o);return n instanceof Vr||o.eachChild(A=>{const f=ns(A);f instanceof Vr?n=f:!n&&f?n=new Vr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&f&&n!==f&&(n=new Vr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}function Si(o){const n=o.key,A=o.value,f=o.valueSpec||{},y=o.objectElementValidators||{},C=o.style,I=o.styleSpec;let D=[];const H=Me(A);if(H!=="object")return[new at(n,A,`object expected, ${H} found`)];for(const X in A){const ne=X.split(".")[0],le=f[ne]||f["*"];let ye;if(y[ne])ye=y[ne];else if(f[ne])ye=gi;else if(y["*"])ye=y["*"];else{if(!f["*"]){D.push(new at(n,A[X],`unknown property "${X}"`));continue}ye=gi}D=D.concat(ye({key:(n&&`${n}.`)+X,value:A[X],valueSpec:le,style:C,styleSpec:I,object:A,objectKey:X},A))}for(const X in f)y[X]||f[X].required&&f[X].default===void 0&&A[X]===void 0&&D.push(new at(n,A,`missing required property "${X}"`));return D}function yl(o){const n=o.value,A=o.valueSpec,f=o.style,y=o.styleSpec,C=o.key,I=o.arrayElementValidator||gi;if(Me(n)!=="array")return[new at(C,n,`array expected, ${Me(n)} found`)];if(A.length&&n.length!==A.length)return[new at(C,n,`array length ${A.length} expected, length ${n.length} found`)];if(A["min-length"]&&n.length<A["min-length"])return[new at(C,n,`array length at least ${A["min-length"]} expected, length ${n.length} found`)];let D={type:A.value,values:A.values};y.$version<7&&(D.function=A.function),Me(A.value)==="object"&&(D=A.value);let H=[];for(let X=0;X<n.length;X++)H=H.concat(I({array:n,arrayIndex:X,value:n[X],valueSpec:D,style:f,styleSpec:y,key:`${C}[${X}]`}));return H}function la(o){const n=o.key,A=o.value,f=o.valueSpec;let y=Me(A);return y==="number"&&A!=A&&(y="NaN"),y!=="number"?[new at(n,A,`number expected, ${y} found`)]:"minimum"in f&&A<f.minimum?[new at(n,A,`${A} is less than the minimum value ${f.minimum}`)]:"maximum"in f&&A>f.maximum?[new at(n,A,`${A} is greater than the maximum value ${f.maximum}`)]:[]}function Pi(o){const n=o.valueSpec,A=jt(o.value.type);let f,y,C,I={};const D=A!=="categorical"&&o.value.property===void 0,H=!D,X=Me(o.value.stops)==="array"&&Me(o.value.stops[0])==="array"&&Me(o.value.stops[0][0])==="object",ne=Si({key:o.key,value:o.value,valueSpec:o.styleSpec.function,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(Be){if(A==="identity")return[new at(Be.key,Be.value,'identity function may not have a "stops" property')];let Fe=[];const et=Be.value;return Fe=Fe.concat(yl({key:Be.key,value:et,valueSpec:Be.valueSpec,style:Be.style,styleSpec:Be.styleSpec,arrayElementValidator:le})),Me(et)==="array"&&et.length===0&&Fe.push(new at(Be.key,et,"array must have at least one stop")),Fe},default:function(Be){return gi({key:Be.key,value:Be.value,valueSpec:n,style:Be.style,styleSpec:Be.styleSpec})}}});return A==="identity"&&D&&ne.push(new at(o.key,o.value,'missing required property "property"')),A==="identity"||o.value.stops||ne.push(new at(o.key,o.value,'missing required property "stops"')),A==="exponential"&&o.valueSpec.expression&&!oe(o.valueSpec)&&ne.push(new at(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(H&&!xi(o.valueSpec)?ne.push(new at(o.key,o.value,"property functions not supported")):D&&!N(o.valueSpec)&&ne.push(new at(o.key,o.value,"zoom functions not supported"))),A!=="categorical"&&!X||o.value.property!==void 0||ne.push(new at(o.key,o.value,'"property" property is required')),ne;function le(Be){let Fe=[];const et=Be.value,Ze=Be.key;if(Me(et)!=="array")return[new at(Ze,et,`array expected, ${Me(et)} found`)];if(et.length!==2)return[new at(Ze,et,`array length 2 expected, length ${et.length} found`)];if(X){if(Me(et[0])!=="object")return[new at(Ze,et,`object expected, ${Me(et[0])} found`)];if(et[0].zoom===void 0)return[new at(Ze,et,"object stop key must have zoom")];if(et[0].value===void 0)return[new at(Ze,et,"object stop key must have value")];if(C&&C>jt(et[0].zoom))return[new at(Ze,et[0].zoom,"stop zoom values must appear in ascending order")];jt(et[0].zoom)!==C&&(C=jt(et[0].zoom),y=void 0,I={}),Fe=Fe.concat(Si({key:`${Ze}[0]`,value:et[0],valueSpec:{zoom:{}},style:Be.style,styleSpec:Be.styleSpec,objectElementValidators:{zoom:la,value:ye}}))}else Fe=Fe.concat(ye({key:`${Ze}[0]`,value:et[0],valueSpec:{},style:Be.style,styleSpec:Be.styleSpec},et));return pi(er(et[1]))?Fe.concat([new at(`${Ze}[1]`,et[1],"expressions are not allowed in function stops.")]):Fe.concat(gi({key:`${Ze}[1]`,value:et[1],valueSpec:n,style:Be.style,styleSpec:Be.styleSpec}))}function ye(Be,Fe){const et=Me(Be.value),Ze=jt(Be.value),Et=Be.value!==null?Be.value:Fe;if(f){if(et!==f)return[new at(Be.key,Et,`${et} stop domain type must match previous stop domain type ${f}`)]}else f=et;if(et!=="number"&&et!=="string"&&et!=="boolean")return[new at(Be.key,Et,"stop domain value must be a number, string, or boolean")];if(et!=="number"&&A!=="categorical"){let Gt=`number expected, ${et} found`;return xi(n)&&A===void 0&&(Gt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new at(Be.key,Et,Gt)]}return A!=="categorical"||et!=="number"||isFinite(Ze)&&Math.floor(Ze)===Ze?A!=="categorical"&&et==="number"&&y!==void 0&&Ze<y?[new at(Be.key,Et,"stop domain values must appear in ascending order")]:(y=Ze,A==="categorical"&&Ze in I?[new at(Be.key,Et,"stop domain values must be unique")]:(I[Ze]=!0,[])):[new at(Be.key,Et,`integer expected, found ${Ze}`)]}}function xa(o){const n=(o.expressionContext==="property"?rs:mi)(er(o.value),o.valueSpec);if(n.result==="error")return n.value.map(f=>new at(`${o.key}${f.key}`,o.value,f.message));const A=n.value.expression||n.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!A.outputDefined())return[new at(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!$a(A))return[new at(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter"&&!$a(A))return[new at(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!aa(A,["zoom","feature-state"]))return[new at(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!xs(A))return[new at(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Mi(o){const n=o.key,A=o.value,f=o.valueSpec,y=[];return Array.isArray(f.values)?f.values.indexOf(jt(A))===-1&&y.push(new at(n,A,`expected one of [${f.values.join(", ")}], ${JSON.stringify(A)} found`)):Object.keys(f.values).indexOf(jt(A))===-1&&y.push(new at(n,A,`expected one of [${Object.keys(f.values).join(", ")}], ${JSON.stringify(A)} found`)),y}function Ma(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const n of o.slice(1))if(!Ma(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}const Ba={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function is(o){if(o==null)return{filter:()=>!0,needGeometry:!1};Ma(o)||(o=so(o));const n=mi(o,Ba);if(n.result==="error")throw new Error(n.value.map(A=>`${A.key}: ${A.message}`).join(", "));return{filter:(A,f,y)=>n.value.evaluate(A,f,{},y),needGeometry:cA(o)}}function hi(o,n){return o<n?-1:o>n?1:0}function cA(o){if(!Array.isArray(o))return!1;if(o[0]==="within")return!0;for(let n=1;n<o.length;n++)if(cA(o[n]))return!0;return!1}function so(o){if(!o)return!0;const n=o[0];return o.length<=1?n!=="any":n==="=="?uA(o[1],o[2],"=="):n==="!="?ao(uA(o[1],o[2],"==")):n==="<"||n===">"||n==="<="||n===">="?uA(o[1],o[2],n):n==="any"?(A=o.slice(1),["any"].concat(A.map(so))):n==="all"?["all"].concat(o.slice(1).map(so)):n==="none"?["all"].concat(o.slice(1).map(so).map(ao)):n==="in"?Fs(o[1],o.slice(2)):n==="!in"?ao(Fs(o[1],o.slice(2))):n==="has"?xo(o[1]):n==="!has"?ao(xo(o[1])):n!=="within"||o;var A}function uA(o,n,A){switch(o){case"$type":return[`filter-type-${A}`,n];case"$id":return[`filter-id-${A}`,n];default:return[`filter-${A}`,o,n]}}function Fs(o,n){if(n.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(A=>typeof A!=typeof n[0])?["filter-in-large",o,["literal",n.sort(hi)]]:["filter-in-small",o,["literal",n]]}}function xo(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function ao(o){return["!",o]}function Ro(o){return Ma(er(o.value))?xa(Ct({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Hi(o)}function Hi(o){const n=o.value,A=o.key;if(Me(n)!=="array")return[new at(A,n,`array expected, ${Me(n)} found`)];const f=o.styleSpec;let y,C=[];if(n.length<1)return[new at(A,n,"filter array must have at least 1 element")];switch(C=C.concat(Mi({key:`${A}[0]`,value:n[0],valueSpec:f.filter_operator,style:o.style,styleSpec:o.styleSpec})),jt(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&jt(n[1])==="$type"&&C.push(new at(A,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&C.push(new at(A,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(y=Me(n[1]),y!=="string"&&C.push(new at(`${A}[1]`,n[1],`string expected, ${y} found`)));for(let I=2;I<n.length;I++)y=Me(n[I]),jt(n[1])==="$type"?C=C.concat(Mi({key:`${A}[${I}]`,value:n[I],valueSpec:f.geometry_type,style:o.style,styleSpec:o.styleSpec})):y!=="string"&&y!=="number"&&y!=="boolean"&&C.push(new at(`${A}[${I}]`,n[I],`string, number, or boolean expected, ${y} found`));break;case"any":case"all":case"none":for(let I=1;I<n.length;I++)C=C.concat(Hi({key:`${A}[${I}]`,value:n[I],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":y=Me(n[1]),n.length!==2?C.push(new at(A,n,`filter array for "${n[0]}" operator must have 2 elements`)):y!=="string"&&C.push(new at(`${A}[1]`,n[1],`string expected, ${y} found`));break;case"within":y=Me(n[1]),n.length!==2?C.push(new at(A,n,`filter array for "${n[0]}" operator must have 2 elements`)):y!=="object"&&C.push(new at(`${A}[1]`,n[1],`object expected, ${y} found`))}return C}function Ns(o,n){const A=o.key,f=o.style,y=o.styleSpec,C=o.value,I=o.objectKey,D=y[`${n}_${o.layerType}`];if(!D)return[];const H=I.match(/^(.*)-transition$/);if(n==="paint"&&H&&D[H[1]]&&D[H[1]].transition)return gi({key:A,value:C,valueSpec:y.transition,style:f,styleSpec:y});const X=o.valueSpec||D[I];if(!X)return[new at(A,C,`unknown property "${I}"`)];let ne;if(Me(C)==="string"&&xi(X)&&!X.tokens&&(ne=/^{([^}]+)}$/.exec(C)))return[new at(A,C,`"${I}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(ne[1])} }\`.`)];const le=[];return o.layerType==="symbol"&&(I==="text-field"&&f&&!f.glyphs&&le.push(new at(A,C,'use of "text-field" requires a style "glyphs" property')),I==="text-font"&&tt(er(C))&&jt(C.type)==="identity"&&le.push(new at(A,C,'"text-font" does not support identity functions'))),le.concat(gi({key:o.key,value:C,valueSpec:X,style:f,styleSpec:y,expressionContext:"property",propertyType:n,propertyKey:I}))}function oo(o){return Ns(o,"paint")}function ss(o){return Ns(o,"layout")}function js(o){let n=[];const A=o.value,f=o.key,y=o.style,C=o.styleSpec;A.type||A.ref||n.push(new at(f,A,'either "type" or "ref" is required'));let I=jt(A.type);const D=jt(A.ref);if(A.id){const H=jt(A.id);for(let X=0;X<o.arrayIndex;X++){const ne=y.layers[X];jt(ne.id)===H&&n.push(new at(f,A.id,`duplicate layer id "${A.id}", previously used at line ${ne.id.__line__}`))}}if("ref"in A){let H;["type","source","source-layer","filter","layout"].forEach(X=>{X in A&&n.push(new at(f,A[X],`"${X}" is prohibited for ref layers`))}),y.layers.forEach(X=>{jt(X.id)===D&&(H=X)}),H?H.ref?n.push(new at(f,A.ref,"ref cannot reference another ref layer")):I=jt(H.type):n.push(new at(f,A.ref,`ref layer "${D}" not found`))}else if(I!=="background")if(A.source){const H=y.sources&&y.sources[A.source],X=H&&jt(H.type);H?X==="vector"&&I==="raster"?n.push(new at(f,A.source,`layer "${A.id}" requires a raster source`)):X==="raster"&&I!=="raster"?n.push(new at(f,A.source,`layer "${A.id}" requires a vector source`)):X!=="vector"||A["source-layer"]?X==="raster-dem"&&I!=="hillshade"?n.push(new at(f,A.source,"raster-dem source can only be used with layer type 'hillshade'.")):I!=="line"||!A.paint||!A.paint["line-gradient"]||X==="geojson"&&H.lineMetrics||n.push(new at(f,A,`layer "${A.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new at(f,A,`layer "${A.id}" must specify a "source-layer"`)):n.push(new at(f,A.source,`source "${A.source}" not found`))}else n.push(new at(f,A,'missing required property "source"'));return n=n.concat(Si({key:f,value:A,valueSpec:C.layer,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{"*":()=>[],type:()=>gi({key:`${f}.type`,value:A.type,valueSpec:C.layer.type,style:o.style,styleSpec:o.styleSpec,object:A,objectKey:"type"}),filter:Ro,layout:H=>Si({layer:A,key:H.key,value:H.value,style:H.style,styleSpec:H.styleSpec,objectElementValidators:{"*":X=>ss(Ct({layerType:I},X))}}),paint:H=>Si({layer:A,key:H.key,value:H.value,style:H.style,styleSpec:H.styleSpec,objectElementValidators:{"*":X=>oo(Ct({layerType:I},X))}})}})),n}function Ss(o){const n=o.value,A=o.key,f=Me(n);return f!=="string"?[new at(A,n,`string expected, ${f} found`)]:[]}const Ca={promoteId:function({key:o,value:n}){if(Me(n)==="string")return Ss({key:o,value:n});{const A=[];for(const f in n)A.push(...Ss({key:`${o}.${f}`,value:n[f]}));return A}}};function ca(o){const n=o.value,A=o.key,f=o.styleSpec,y=o.style;if(!n.type)return[new at(A,n,'"type" is required')];const C=jt(n.type);let I;switch(C){case"vector":case"raster":case"raster-dem":return I=Si({key:A,value:n,valueSpec:f[`source_${C.replace("-","_")}`],style:o.style,styleSpec:f,objectElementValidators:Ca}),I;case"geojson":if(I=Si({key:A,value:n,valueSpec:f.source_geojson,style:y,styleSpec:f,objectElementValidators:Ca}),n.cluster)for(const D in n.clusterProperties){const[H,X]=n.clusterProperties[D],ne=typeof H=="string"?[H,["accumulated"],["get",D]]:H;I.push(...xa({key:`${A}.${D}.map`,value:X,expressionContext:"cluster-map"})),I.push(...xa({key:`${A}.${D}.reduce`,value:ne,expressionContext:"cluster-reduce"}))}return I;case"video":return Si({key:A,value:n,valueSpec:f.source_video,style:y,styleSpec:f});case"image":return Si({key:A,value:n,valueSpec:f.source_image,style:y,styleSpec:f});case"canvas":return[new at(A,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Mi({key:`${A}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:y,styleSpec:f})}}function Xs(o){const n=o.value,A=o.styleSpec,f=A.light,y=o.style;let C=[];const I=Me(n);if(n===void 0)return C;if(I!=="object")return C=C.concat([new at("light",n,`object expected, ${I} found`)]),C;for(const D in n){const H=D.match(/^(.*)-transition$/);C=C.concat(H&&f[H[1]]&&f[H[1]].transition?gi({key:D,value:n[D],valueSpec:A.transition,style:y,styleSpec:A}):f[D]?gi({key:D,value:n[D],valueSpec:f[D],style:y,styleSpec:A}):[new at(D,n[D],`unknown property "${D}"`)])}return C}function as(o){const n=o.value,A=o.styleSpec,f=A.terrain,y=o.style;let C=[];const I=Me(n);if(n===void 0)return C;if(I!=="object")return C=C.concat([new at("terrain",n,`object expected, ${I} found`)]),C;for(const D in n)C=C.concat(f[D]?gi({key:D,value:n[D],valueSpec:f[D],style:y,styleSpec:A}):[new at(D,n[D],`unknown property "${D}"`)]);return C}const ua={"*":()=>[],array:yl,boolean:function(o){const n=o.value,A=o.key,f=Me(n);return f!=="boolean"?[new at(A,n,`boolean expected, ${f} found`)]:[]},number:la,color:function(o){const n=o.key,A=o.value,f=Me(A);return f!=="string"?[new at(n,A,`color expected, ${f} found`)]:Ln(A)===null?[new at(n,A,`color expected, "${A}" found`)]:[]},constants:bt,enum:Mi,filter:Ro,function:Pi,layer:js,object:Si,source:ca,light:Xs,terrain:as,string:Ss,formatted:function(o){return Ss(o).length===0?[]:xa(o)},resolvedImage:function(o){return Ss(o).length===0?[]:xa(o)},padding:function(o){const n=o.key,A=o.value;if(Me(A)==="array"){if(A.length<1||A.length>4)return[new at(n,A,`padding requires 1 to 4 values; ${A.length} values found`)];const f={type:"number"};let y=[];for(let C=0;C<A.length;C++)y=y.concat(gi({key:`${n}[${C}]`,value:A[C],valueSpec:f}));return y}return la({key:n,value:A,valueSpec:{}})}};function gi(o){const n=o.value,A=o.valueSpec,f=o.styleSpec;return A.expression&&tt(jt(n))?Pi(o):A.expression&&pi(er(n))?xa(o):A.type&&ua[A.type]?ua[A.type](o):Si(Ct({},o,{valueSpec:A.type?f[A.type]:A}))}function ZA(o){const n=o.value,A=o.key,f=Ss(o);return f.length||(n.indexOf("{fontstack}")===-1&&f.push(new at(A,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&f.push(new at(A,n,'"glyphs" url must include a "{range}" token'))),f}function Da(o,n=vt){let A=[];return A=A.concat(gi({key:"",value:o,valueSpec:n.$root,styleSpec:n,style:o,objectElementValidators:{glyphs:ZA,"*":()=>[]}})),o.constants&&(A=A.concat(bt({key:"constants",value:o.constants,style:o,styleSpec:n}))),Na(A)}function Na(o){return[].concat(o).sort((n,A)=>n.line-A.line)}function fs(o){return function(...n){return Na(o.apply(this,n))}}Da.source=fs(ca),Da.light=fs(Xs),Da.terrain=fs(as),Da.layer=fs(js),Da.filter=fs(Ro),Da.paintProperty=fs(oo),Da.layoutProperty=fs(ss);const Ea=Da,Oo=Ea.light,Rs=Ea.paintProperty,hA=Ea.layoutProperty;function Ao(o,n){let A=!1;if(n&&n.length)for(const f of n)o.fire(new Zr(new Error(f.message))),A=!0;return A}class Ho{constructor(n,A,f){const y=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;const I=new Int32Array(this.arrayBuffer);n=I[0],this.d=(A=I[1])+2*(f=I[2]);for(let H=0;H<this.d*this.d;H++){const X=I[3+H],ne=I[3+H+1];y.push(X===ne?null:I.subarray(X,ne))}const D=I[3+y.length+1];this.keys=I.subarray(I[3+y.length],D),this.bboxes=I.subarray(D),this.insert=this._insertReadonly}else{this.d=A+2*f;for(let I=0;I<this.d*this.d;I++)y.push([]);this.keys=[],this.bboxes=[]}this.n=A,this.extent=n,this.padding=f,this.scale=A/n,this.uid=0;const C=f/A*n;this.min=-C,this.max=n+C}insert(n,A,f,y,C){this._forEachCell(A,f,y,C,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(A),this.bboxes.push(f),this.bboxes.push(y),this.bboxes.push(C)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,A,f,y,C,I){this.cells[C].push(I)}query(n,A,f,y,C){const I=this.min,D=this.max;if(n<=I&&A<=I&&D<=f&&D<=y&&!C)return Array.prototype.slice.call(this.keys);{const H=[];return this._forEachCell(n,A,f,y,this._queryCell,H,{},C),H}}_queryCell(n,A,f,y,C,I,D,H){const X=this.cells[C];if(X!==null){const ne=this.keys,le=this.bboxes;for(let ye=0;ye<X.length;ye++){const Be=X[ye];if(D[Be]===void 0){const Fe=4*Be;(H?H(le[Fe+0],le[Fe+1],le[Fe+2],le[Fe+3]):n<=le[Fe+2]&&A<=le[Fe+3]&&f>=le[Fe+0]&&y>=le[Fe+1])?(D[Be]=!0,I.push(ne[Be])):D[Be]=!1}}}}_forEachCell(n,A,f,y,C,I,D,H){const X=this._convertToCellCoord(n),ne=this._convertToCellCoord(A),le=this._convertToCellCoord(f),ye=this._convertToCellCoord(y);for(let Be=X;Be<=le;Be++)for(let Fe=ne;Fe<=ye;Fe++){const et=this.d*Fe+Be;if((!H||H(this._convertFromCellCoord(Be),this._convertFromCellCoord(Fe),this._convertFromCellCoord(Be+1),this._convertFromCellCoord(Fe+1)))&&C.call(this,n,A,f,y,et,I,D,H))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const n=this.cells,A=3+this.cells.length+1+1;let f=0;for(let I=0;I<this.cells.length;I++)f+=this.cells[I].length;const y=new Int32Array(A+f+this.keys.length+this.bboxes.length);y[0]=this.extent,y[1]=this.n,y[2]=this.padding;let C=A;for(let I=0;I<n.length;I++){const D=n[I];y[3+I]=C,y.set(D,C),C+=D.length}return y[3+n.length]=C,y.set(this.keys,C),C+=this.keys.length,y[3+n.length+1]=C,y.set(this.bboxes,C),C+=this.bboxes.length,y.buffer}static serialize(n,A){const f=n.toArrayBuffer();return A&&A.push(f),{buffer:f}}static deserialize(n){return new Ho(n.buffer)}}const zi={};function Pr(o,n,A={}){if(zi[o])throw new Error(`${o} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:o,writeable:!1}),zi[o]={klass:n,omit:A.omit||[],shallow:A.shallow||[]}}Pr("Object",Object),Pr("TransferableGridIndex",Ho),Pr("Color",Ue),Pr("Error",Error),Pr("AJAXError",Nt),Pr("ResolvedImage",ut),Pr("StylePropertyFunction",Ws),Pr("StyleExpression",Wn,{omit:["_evaluator"]}),Pr("ZoomDependentExpression",Es),Pr("ZoomConstantExpression",Tn),Pr("CompoundExpression",Vn,{omit:["_evaluate"]});for(const o in bo)bo[o]._classRegistryKey||Pr(`Expression_${o}`,bo[o]);function Ii(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function Ai(o,n){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob)return o;if(Ii(o)||me(o))return n&&n.push(o),o;if(ArrayBuffer.isView(o)){const A=o;return n&&n.push(A.buffer),A}if(o instanceof ImageData)return n&&n.push(o.data.buffer),o;if(Array.isArray(o)){const A=[];for(const f of o)A.push(Ai(f,n));return A}if(typeof o=="object"){const A=o.constructor,f=A._classRegistryKey;if(!f)throw new Error("can't serialize object of unregistered class");if(!zi[f])throw new Error(`${f} is not registered.`);const y=A.serialize?A.serialize(o,n):{};if(A.serialize){if(n&&y===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const C in o){if(!o.hasOwnProperty(C)||zi[f].omit.indexOf(C)>=0)continue;const I=o[C];y[C]=zi[f].shallow.indexOf(C)>=0?I:Ai(I,n)}o instanceof Error&&(y.message=o.message)}if(y.$name)throw new Error("$name property is reserved for worker serialization logic.");return f!=="Object"&&(y.$name=f),y}throw new Error("can't serialize object of type "+typeof o)}function Bi(o){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||Ii(o)||me(o)||ArrayBuffer.isView(o)||o instanceof ImageData)return o;if(Array.isArray(o))return o.map(Bi);if(typeof o=="object"){const n=o.$name||"Object";if(!zi[n])throw new Error(`can't deserialize unregistered class ${n}`);const{klass:A}=zi[n];if(!A)throw new Error(`can't deserialize unregistered class ${n}`);if(A.deserialize)return A.deserialize(o);const f=Object.create(A.prototype);for(const y of Object.keys(o)){if(y==="$name")continue;const C=o[y];f[y]=zi[n].shallow.indexOf(y)>=0?C:Bi(C)}return f}throw new Error("can't deserialize object of type "+typeof o)}class Zi{constructor(){this.first=!0}update(n,A){const f=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=f,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=f,!0):(this.lastFloorZoom>f?(this.lastIntegerZoom=f+1,this.lastIntegerZoomTime=A):this.lastFloorZoom<f&&(this.lastIntegerZoom=f,this.lastIntegerZoomTime=A),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=f,!0))}}const Ir={"Latin-1 Supplement":o=>o>=128&&o<=255,Arabic:o=>o>=1536&&o<=1791,"Arabic Supplement":o=>o>=1872&&o<=1919,"Arabic Extended-A":o=>o>=2208&&o<=2303,"Hangul Jamo":o=>o>=4352&&o<=4607,"Unified Canadian Aboriginal Syllabics":o=>o>=5120&&o<=5759,Khmer:o=>o>=6016&&o<=6143,"Unified Canadian Aboriginal Syllabics Extended":o=>o>=6320&&o<=6399,"General Punctuation":o=>o>=8192&&o<=8303,"Letterlike Symbols":o=>o>=8448&&o<=8527,"Number Forms":o=>o>=8528&&o<=8591,"Miscellaneous Technical":o=>o>=8960&&o<=9215,"Control Pictures":o=>o>=9216&&o<=9279,"Optical Character Recognition":o=>o>=9280&&o<=9311,"Enclosed Alphanumerics":o=>o>=9312&&o<=9471,"Geometric Shapes":o=>o>=9632&&o<=9727,"Miscellaneous Symbols":o=>o>=9728&&o<=9983,"Miscellaneous Symbols and Arrows":o=>o>=11008&&o<=11263,"CJK Radicals Supplement":o=>o>=11904&&o<=12031,"Kangxi Radicals":o=>o>=12032&&o<=12255,"Ideographic Description Characters":o=>o>=12272&&o<=12287,"CJK Symbols and Punctuation":o=>o>=12288&&o<=12351,Hiragana:o=>o>=12352&&o<=12447,Katakana:o=>o>=12448&&o<=12543,Bopomofo:o=>o>=12544&&o<=12591,"Hangul Compatibility Jamo":o=>o>=12592&&o<=12687,Kanbun:o=>o>=12688&&o<=12703,"Bopomofo Extended":o=>o>=12704&&o<=12735,"CJK Strokes":o=>o>=12736&&o<=12783,"Katakana Phonetic Extensions":o=>o>=12784&&o<=12799,"Enclosed CJK Letters and Months":o=>o>=12800&&o<=13055,"CJK Compatibility":o=>o>=13056&&o<=13311,"CJK Unified Ideographs Extension A":o=>o>=13312&&o<=19903,"Yijing Hexagram Symbols":o=>o>=19904&&o<=19967,"CJK Unified Ideographs":o=>o>=19968&&o<=40959,"Yi Syllables":o=>o>=40960&&o<=42127,"Yi Radicals":o=>o>=42128&&o<=42191,"Hangul Jamo Extended-A":o=>o>=43360&&o<=43391,"Hangul Syllables":o=>o>=44032&&o<=55215,"Hangul Jamo Extended-B":o=>o>=55216&&o<=55295,"Private Use Area":o=>o>=57344&&o<=63743,"CJK Compatibility Ideographs":o=>o>=63744&&o<=64255,"Arabic Presentation Forms-A":o=>o>=64336&&o<=65023,"Vertical Forms":o=>o>=65040&&o<=65055,"CJK Compatibility Forms":o=>o>=65072&&o<=65103,"Small Form Variants":o=>o>=65104&&o<=65135,"Arabic Presentation Forms-B":o=>o>=65136&&o<=65279,"Halfwidth and Fullwidth Forms":o=>o>=65280&&o<=65519};function ja(o){for(const n of o)if(Zl(n.charCodeAt(0)))return!0;return!1}function LA(o){for(const n of o)if(!kA(n.charCodeAt(0)))return!1;return!0}function kA(o){return!(Ir.Arabic(o)||Ir["Arabic Supplement"](o)||Ir["Arabic Extended-A"](o)||Ir["Arabic Presentation Forms-A"](o)||Ir["Arabic Presentation Forms-B"](o))}function Zl(o){return!(o!==746&&o!==747&&(o<4352||!(Ir["Bopomofo Extended"](o)||Ir.Bopomofo(o)||Ir["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||Ir["CJK Compatibility Ideographs"](o)||Ir["CJK Compatibility"](o)||Ir["CJK Radicals Supplement"](o)||Ir["CJK Strokes"](o)||!(!Ir["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||Ir["CJK Unified Ideographs Extension A"](o)||Ir["CJK Unified Ideographs"](o)||Ir["Enclosed CJK Letters and Months"](o)||Ir["Hangul Compatibility Jamo"](o)||Ir["Hangul Jamo Extended-A"](o)||Ir["Hangul Jamo Extended-B"](o)||Ir["Hangul Jamo"](o)||Ir["Hangul Syllables"](o)||Ir.Hiragana(o)||Ir["Ideographic Description Characters"](o)||Ir.Kanbun(o)||Ir["Kangxi Radicals"](o)||Ir["Katakana Phonetic Extensions"](o)||Ir.Katakana(o)&&o!==12540||!(!Ir["Halfwidth and Fullwidth Forms"](o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!Ir["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||Ir["Unified Canadian Aboriginal Syllabics"](o)||Ir["Unified Canadian Aboriginal Syllabics Extended"](o)||Ir["Vertical Forms"](o)||Ir["Yijing Hexagram Symbols"](o)||Ir["Yi Syllables"](o)||Ir["Yi Radicals"](o))))}function JA(o){return!(Zl(o)||function(n){return!!(Ir["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||Ir["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||Ir["Letterlike Symbols"](n)||Ir["Number Forms"](n)||Ir["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||Ir["Control Pictures"](n)&&n!==9251||Ir["Optical Character Recognition"](n)||Ir["Enclosed Alphanumerics"](n)||Ir["Geometric Shapes"](n)||Ir["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||Ir["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||Ir["CJK Symbols and Punctuation"](n)||Ir.Katakana(n)||Ir["Private Use Area"](n)||Ir["CJK Compatibility Forms"](n)||Ir["Small Form Variants"](n)||Ir["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(o))}function wc(o){return o>=1424&&o<=2303||Ir["Arabic Presentation Forms-A"](o)||Ir["Arabic Presentation Forms-B"](o)}function zc(o,n){return!(!n&&wc(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||Ir.Khmer(o))}function vl(o){for(const n of o)if(wc(n.charCodeAt(0)))return!0;return!1}const Jl="deferred",YA="loading",$A="loaded";let Zs=null,Di="unavailable",lo=null;const _l=function(o){o&&typeof o=="string"&&o.indexOf("NetworkError")>-1&&(Di="error"),Zs&&Zs(o)};function Ra(){el.fire(new xr("pluginStateChange",{pluginStatus:Di,pluginURL:lo}))}const el=new pn,fA=function(){return Di},QA=function(){if(Di!==Jl||!lo)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Di=YA,Ra(),lo&&yr({url:lo},o=>{o?_l(o):(Di=$A,Ra())})},Fa={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Di===$A||Fa.applyArabicShaping!=null,isLoading:()=>Di===YA,setState(o){if(!he())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Di=o.pluginStatus,lo=o.pluginURL},isParsed(){if(!he())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return Fa.applyArabicShaping!=null&&Fa.processBidirectionalText!=null&&Fa.processStyledBidirectionalText!=null},getPluginURL(){if(!he())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return lo}};class Ui{constructor(n,A){this.zoom=n,A?(this.now=A.now,this.fadeDuration=A.fadeDuration,this.zoomHistory=A.zoomHistory,this.transition=A.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Zi,this.transition={})}isSupportedScript(n){return function(A,f){for(const y of A)if(!zc(y.charCodeAt(0),f))return!1;return!0}(n,Fa.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,A=n-Math.floor(n),f=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:A+(1-A)*f}:{fromScale:.5,toScale:1,t:1-(1-f)*A}}}class PA{constructor(n,A){this.property=n,this.value=A,this.expression=function(f,y){if(tt(f))return new Ws(f,y);if(pi(f)){const C=rs(f,y);if(C.result==="error")throw new Error(C.value.map(I=>`${I.key}: ${I.message}`).join(", "));return C.value}{let C=f;return y.type==="color"&&typeof f=="string"?C=Ue.parse(f):y.type!=="padding"||typeof f!="number"&&!Array.isArray(f)||(C=qe.parse(f)),{kind:"constant",evaluate:()=>C}}}(A===void 0?n.specification.default:A,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,A,f){return this.property.possiblyEvaluate(this,n,A,f)}}class MA{constructor(n){this.property=n,this.value=new PA(n,void 0)}transitioned(n,A){return new Vc(this.property,this.value,A,Q({},n.transition,this.transition),n.now)}untransitioned(){return new Vc(this.property,this.value,null,{},0)}}class DA{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return G(this._values[n].value.value)}setValue(n,A){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new MA(this._values[n].property)),this._values[n].value=new PA(this._values[n].property,A===null?void 0:G(A))}getTransition(n){return G(this._values[n].transition)}setTransition(n,A){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new MA(this._values[n].property)),this._values[n].transition=G(A)||void 0}serialize(){const n={};for(const A of Object.keys(this._values)){const f=this.getValue(A);f!==void 0&&(n[A]=f);const y=this.getTransition(A);y!==void 0&&(n[`${A}-transition`]=y)}return n}transitioned(n,A){const f=new Kc(this._properties);for(const y of Object.keys(this._values))f._values[y]=this._values[y].transitioned(n,A._values[y]);return f}untransitioned(){const n=new Kc(this._properties);for(const A of Object.keys(this._values))n._values[A]=this._values[A].untransitioned();return n}}class Vc{constructor(n,A,f,y,C){this.property=n,this.value=A,this.begin=C+y.delay||0,this.end=this.begin+y.duration||0,n.specification.transition&&(y.delay||y.duration)&&(this.prior=f)}possiblyEvaluate(n,A,f){const y=n.now||0,C=this.value.possiblyEvaluate(n,A,f),I=this.prior;if(I){if(y>this.end)return this.prior=null,C;if(this.value.isDataDriven())return this.prior=null,C;if(y<this.begin)return I.possiblyEvaluate(n,A,f);{const D=(y-this.begin)/(this.end-this.begin);return this.property.interpolate(I.possiblyEvaluate(n,A,f),C,function(H){if(H<=0)return 0;if(H>=1)return 1;const X=H*H,ne=X*H;return 4*(H<.5?ne:3*(H-X)+ne-.75)}(D))}}return C}}class Kc{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,A,f){const y=new dA(this._properties);for(const C of Object.keys(this._values))y._values[C]=this._values[C].possiblyEvaluate(n,A,f);return y}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class Gc{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}getValue(n){return G(this._values[n].value)}setValue(n,A){this._values[n]=new PA(this._values[n].property,A===null?void 0:G(A))}serialize(){const n={};for(const A of Object.keys(this._values)){const f=this.getValue(A);f!==void 0&&(n[A]=f)}return n}possiblyEvaluate(n,A,f){const y=new dA(this._properties);for(const C of Object.keys(this._values))y._values[C]=this._values[C].possiblyEvaluate(n,A,f);return y}}class Bo{constructor(n,A,f){this.property=n,this.value=A,this.parameters=f}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,A,f,y){return this.property.evaluate(this.value,this.parameters,n,A,f,y)}}class dA{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class sn{constructor(n){this.specification=n}possiblyEvaluate(n,A){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(A)}interpolate(n,A,f){const y=Bs[this.specification.type];return y?y(n,A,f):n}}class vn{constructor(n,A){this.specification=n,this.overrides=A}possiblyEvaluate(n,A,f,y){return new Bo(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(A,null,{},f,y)}:n.expression,A)}interpolate(n,A,f){if(n.value.kind!=="constant"||A.value.kind!=="constant")return n;if(n.value.value===void 0||A.value.value===void 0)return new Bo(this,{kind:"constant",value:void 0},n.parameters);const y=Bs[this.specification.type];return y?new Bo(this,{kind:"constant",value:y(n.value.value,A.value.value,f)},n.parameters):n}evaluate(n,A,f,y,C,I){return n.kind==="constant"?n.value:n.evaluate(A,f,y,C,I)}}class tl extends vn{possiblyEvaluate(n,A,f,y){if(n.value===void 0)return new Bo(this,{kind:"constant",value:void 0},A);if(n.expression.kind==="constant"){const C=n.expression.evaluate(A,null,{},f,y),I=n.property.specification.type==="resolvedImage"&&typeof C!="string"?C.name:C,D=this._calculate(I,I,I,A);return new Bo(this,{kind:"constant",value:D},A)}if(n.expression.kind==="camera"){const C=this._calculate(n.expression.evaluate({zoom:A.zoom-1}),n.expression.evaluate({zoom:A.zoom}),n.expression.evaluate({zoom:A.zoom+1}),A);return new Bo(this,{kind:"constant",value:C},A)}return new Bo(this,n.expression,A)}evaluate(n,A,f,y,C,I){if(n.kind==="source"){const D=n.evaluate(A,f,y,C,I);return this._calculate(D,D,D,A)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(A.zoom)-1},f,y),n.evaluate({zoom:Math.floor(A.zoom)},f,y),n.evaluate({zoom:Math.floor(A.zoom)+1},f,y),A):n.value}_calculate(n,A,f,y){return y.zoom>y.zoomHistory.lastIntegerZoom?{from:n,to:A}:{from:f,to:A}}interpolate(n){return n}}class wl{constructor(n){this.specification=n}possiblyEvaluate(n,A,f,y){if(n.value!==void 0){if(n.expression.kind==="constant"){const C=n.expression.evaluate(A,null,{},f,y);return this._calculate(C,C,C,A)}return this._calculate(n.expression.evaluate(new Ui(Math.floor(A.zoom-1),A)),n.expression.evaluate(new Ui(Math.floor(A.zoom),A)),n.expression.evaluate(new Ui(Math.floor(A.zoom+1),A)),A)}}_calculate(n,A,f,y){return y.zoom>y.zoomHistory.lastIntegerZoom?{from:n,to:A}:{from:f,to:A}}interpolate(n){return n}}class Sa{constructor(n){this.specification=n}possiblyEvaluate(n,A,f,y){return!!n.expression.evaluate(A,null,{},f,y)}interpolate(){return!1}}class os{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const A in n){const f=n[A];f.specification.overridable&&this.overridableProperties.push(A);const y=this.defaultPropertyValues[A]=new PA(f,void 0),C=this.defaultTransitionablePropertyValues[A]=new MA(f);this.defaultTransitioningPropertyValues[A]=C.untransitioned(),this.defaultPossiblyEvaluatedValues[A]=y.possiblyEvaluate({})}}}Pr("DataDrivenProperty",vn),Pr("DataConstantProperty",sn),Pr("CrossFadedDataDrivenProperty",tl),Pr("CrossFadedProperty",wl),Pr("ColorRampProperty",Sa);const pA="-transition";class Co extends pn{constructor(n,A){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1},n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),A.layout&&(this._unevaluatedLayout=new Gc(A.layout)),A.paint)){this._transitionablePaint=new DA(A.paint);for(const f in n.paint)this.setPaintProperty(f,n.paint[f],{validate:!1});for(const f in n.layout)this.setLayoutProperty(f,n.layout[f],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new dA(A.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,A,f={}){A!=null&&this._validate(hA,`layers.${this.id}.layout.${n}`,n,A,f)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,A):this.visibility=A)}getPaintProperty(n){return n.endsWith(pA)?this._transitionablePaint.getTransition(n.slice(0,-pA.length)):this._transitionablePaint.getValue(n)}setPaintProperty(n,A,f={}){if(A!=null&&this._validate(Rs,`layers.${this.id}.paint.${n}`,n,A,f))return!1;if(n.endsWith(pA))return this._transitionablePaint.setTransition(n.slice(0,-pA.length),A||void 0),!1;{const y=this._transitionablePaint._values[n],C=y.property.specification["property-type"]==="cross-faded-data-driven",I=y.value.isDataDriven(),D=y.value;this._transitionablePaint.setValue(n,A),this._handleSpecialPaintPropertyUpdate(n);const H=this._transitionablePaint._values[n].value;return H.isDataDriven()||I||C||this._handleOverridablePaintPropertyUpdate(n,D,H)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,A,f){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,A){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,A)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,A)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),O(n,(A,f)=>!(A===void 0||f==="layout"&&!Object.keys(A).length||f==="paint"&&!Object.keys(A).length))}_validate(n,A,f,y,C={}){return(!C||C.validate!==!1)&&Ao(this,n.call(Ea,{key:A,layerType:this.type,objectKey:f,value:y,styleSpec:vt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const A=this.paint.get(n);if(A instanceof Bo&&xi(A.property.specification)&&(A.value.kind==="source"||A.value.kind==="composite")&&A.value.isStateDependent)return!0}return!1}}const bc={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class mA{constructor(n,A){this._structArray=n,this._pos1=A*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Ji{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,A){return n._trim(),A&&(n.isTransferred=!0,A.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const A=Object.create(this.prototype);return A.arrayBuffer=n.arrayBuffer,A.length=n.length,A.capacity=n.arrayBuffer.byteLength/A.bytesPerElement,A._refreshViews(),A}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const A=this.uint8;this._refreshViews(),A&&this.uint8.set(A)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function ds(o,n=1){let A=0,f=0;return{members:o.map(y=>{const C=bc[y.type].BYTES_PER_ELEMENT,I=A=xc(A,Math.max(n,C)),D=y.components||1;return f=Math.max(f,C),A+=C*D,{name:y.name,type:y.type,components:D,offset:I}}),size:xc(A,Math.max(f,n)),alignment:n}}function xc(o,n){return Math.ceil(o/n)*n}class ha extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,A){const f=this.length;return this.resize(f+1),this.emplace(f,n,A)}emplace(n,A,f){const y=2*n;return this.int16[y+0]=A,this.int16[y+1]=f,n}}ha.prototype.bytesPerElement=4,Pr("StructArrayLayout2i4",ha);class g extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,A,f,y){const C=this.length;return this.resize(C+1),this.emplace(C,n,A,f,y)}emplace(n,A,f,y,C){const I=4*n;return this.int16[I+0]=A,this.int16[I+1]=f,this.int16[I+2]=y,this.int16[I+3]=C,n}}g.prototype.bytesPerElement=8,Pr("StructArrayLayout4i8",g);class i extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,A,f,y,C,I){const D=this.length;return this.resize(D+1),this.emplace(D,n,A,f,y,C,I)}emplace(n,A,f,y,C,I,D){const H=6*n;return this.int16[H+0]=A,this.int16[H+1]=f,this.int16[H+2]=y,this.int16[H+3]=C,this.int16[H+4]=I,this.int16[H+5]=D,n}}i.prototype.bytesPerElement=12,Pr("StructArrayLayout2i4i12",i);class u extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,A,f,y,C,I){const D=this.length;return this.resize(D+1),this.emplace(D,n,A,f,y,C,I)}emplace(n,A,f,y,C,I,D){const H=4*n,X=8*n;return this.int16[H+0]=A,this.int16[H+1]=f,this.uint8[X+4]=y,this.uint8[X+5]=C,this.uint8[X+6]=I,this.uint8[X+7]=D,n}}u.prototype.bytesPerElement=8,Pr("StructArrayLayout2i4ub8",u);class m extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,A){const f=this.length;return this.resize(f+1),this.emplace(f,n,A)}emplace(n,A,f){const y=2*n;return this.float32[y+0]=A,this.float32[y+1]=f,n}}m.prototype.bytesPerElement=8,Pr("StructArrayLayout2f8",m);class v extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,A,f,y,C,I,D,H,X,ne){const le=this.length;return this.resize(le+1),this.emplace(le,n,A,f,y,C,I,D,H,X,ne)}emplace(n,A,f,y,C,I,D,H,X,ne,le){const ye=10*n;return this.uint16[ye+0]=A,this.uint16[ye+1]=f,this.uint16[ye+2]=y,this.uint16[ye+3]=C,this.uint16[ye+4]=I,this.uint16[ye+5]=D,this.uint16[ye+6]=H,this.uint16[ye+7]=X,this.uint16[ye+8]=ne,this.uint16[ye+9]=le,n}}v.prototype.bytesPerElement=20,Pr("StructArrayLayout10ui20",v);class S extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,A,f,y,C,I,D,H,X,ne,le,ye){const Be=this.length;return this.resize(Be+1),this.emplace(Be,n,A,f,y,C,I,D,H,X,ne,le,ye)}emplace(n,A,f,y,C,I,D,H,X,ne,le,ye,Be){const Fe=12*n;return this.int16[Fe+0]=A,this.int16[Fe+1]=f,this.int16[Fe+2]=y,this.int16[Fe+3]=C,this.uint16[Fe+4]=I,this.uint16[Fe+5]=D,this.uint16[Fe+6]=H,this.uint16[Fe+7]=X,this.int16[Fe+8]=ne,this.int16[Fe+9]=le,this.int16[Fe+10]=ye,this.int16[Fe+11]=Be,n}}S.prototype.bytesPerElement=24,Pr("StructArrayLayout4i4ui4i24",S);class M extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,A,f){const y=this.length;return this.resize(y+1),this.emplace(y,n,A,f)}emplace(n,A,f,y){const C=3*n;return this.float32[C+0]=A,this.float32[C+1]=f,this.float32[C+2]=y,n}}M.prototype.bytesPerElement=12,Pr("StructArrayLayout3f12",M);class z extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const A=this.length;return this.resize(A+1),this.emplace(A,n)}emplace(n,A){return this.uint32[1*n+0]=A,n}}z.prototype.bytesPerElement=4,Pr("StructArrayLayout1ul4",z);class q extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,A,f,y,C,I,D,H,X){const ne=this.length;return this.resize(ne+1),this.emplace(ne,n,A,f,y,C,I,D,H,X)}emplace(n,A,f,y,C,I,D,H,X,ne){const le=10*n,ye=5*n;return this.int16[le+0]=A,this.int16[le+1]=f,this.int16[le+2]=y,this.int16[le+3]=C,this.int16[le+4]=I,this.int16[le+5]=D,this.uint32[ye+3]=H,this.uint16[le+8]=X,this.uint16[le+9]=ne,n}}q.prototype.bytesPerElement=20,Pr("StructArrayLayout6i1ul2ui20",q);class J extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,A,f,y,C,I){const D=this.length;return this.resize(D+1),this.emplace(D,n,A,f,y,C,I)}emplace(n,A,f,y,C,I,D){const H=6*n;return this.int16[H+0]=A,this.int16[H+1]=f,this.int16[H+2]=y,this.int16[H+3]=C,this.int16[H+4]=I,this.int16[H+5]=D,n}}J.prototype.bytesPerElement=12,Pr("StructArrayLayout2i2i2i12",J);class se extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,A,f,y,C){const I=this.length;return this.resize(I+1),this.emplace(I,n,A,f,y,C)}emplace(n,A,f,y,C,I){const D=4*n,H=8*n;return this.float32[D+0]=A,this.float32[D+1]=f,this.float32[D+2]=y,this.int16[H+6]=C,this.int16[H+7]=I,n}}se.prototype.bytesPerElement=16,Pr("StructArrayLayout2f1f2i16",se);class pe extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,A,f,y){const C=this.length;return this.resize(C+1),this.emplace(C,n,A,f,y)}emplace(n,A,f,y,C){const I=12*n,D=3*n;return this.uint8[I+0]=A,this.uint8[I+1]=f,this.float32[D+1]=y,this.float32[D+2]=C,n}}pe.prototype.bytesPerElement=12,Pr("StructArrayLayout2ub2f12",pe);class we extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,A,f){const y=this.length;return this.resize(y+1),this.emplace(y,n,A,f)}emplace(n,A,f,y){const C=3*n;return this.uint16[C+0]=A,this.uint16[C+1]=f,this.uint16[C+2]=y,n}}we.prototype.bytesPerElement=6,Pr("StructArrayLayout3ui6",we);class Ve extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,A,f,y,C,I,D,H,X,ne,le,ye,Be,Fe,et,Ze,Et){const Gt=this.length;return this.resize(Gt+1),this.emplace(Gt,n,A,f,y,C,I,D,H,X,ne,le,ye,Be,Fe,et,Ze,Et)}emplace(n,A,f,y,C,I,D,H,X,ne,le,ye,Be,Fe,et,Ze,Et,Gt){const xt=24*n,Dt=12*n,or=48*n;return this.int16[xt+0]=A,this.int16[xt+1]=f,this.uint16[xt+2]=y,this.uint16[xt+3]=C,this.uint32[Dt+2]=I,this.uint32[Dt+3]=D,this.uint32[Dt+4]=H,this.uint16[xt+10]=X,this.uint16[xt+11]=ne,this.uint16[xt+12]=le,this.float32[Dt+7]=ye,this.float32[Dt+8]=Be,this.uint8[or+36]=Fe,this.uint8[or+37]=et,this.uint8[or+38]=Ze,this.uint32[Dt+10]=Et,this.int16[xt+22]=Gt,n}}Ve.prototype.bytesPerElement=48,Pr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ve);class De extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,A,f,y,C,I,D,H,X,ne,le,ye,Be,Fe,et,Ze,Et,Gt,xt,Dt,or,ar,Yr,on,Wr,Mr,Lr,Xr){const Or=this.length;return this.resize(Or+1),this.emplace(Or,n,A,f,y,C,I,D,H,X,ne,le,ye,Be,Fe,et,Ze,Et,Gt,xt,Dt,or,ar,Yr,on,Wr,Mr,Lr,Xr)}emplace(n,A,f,y,C,I,D,H,X,ne,le,ye,Be,Fe,et,Ze,Et,Gt,xt,Dt,or,ar,Yr,on,Wr,Mr,Lr,Xr,Or){const wr=34*n,_n=17*n;return this.int16[wr+0]=A,this.int16[wr+1]=f,this.int16[wr+2]=y,this.int16[wr+3]=C,this.int16[wr+4]=I,this.int16[wr+5]=D,this.int16[wr+6]=H,this.int16[wr+7]=X,this.uint16[wr+8]=ne,this.uint16[wr+9]=le,this.uint16[wr+10]=ye,this.uint16[wr+11]=Be,this.uint16[wr+12]=Fe,this.uint16[wr+13]=et,this.uint16[wr+14]=Ze,this.uint16[wr+15]=Et,this.uint16[wr+16]=Gt,this.uint16[wr+17]=xt,this.uint16[wr+18]=Dt,this.uint16[wr+19]=or,this.uint16[wr+20]=ar,this.uint16[wr+21]=Yr,this.uint16[wr+22]=on,this.uint32[_n+12]=Wr,this.float32[_n+13]=Mr,this.float32[_n+14]=Lr,this.float32[_n+15]=Xr,this.float32[_n+16]=Or,n}}De.prototype.bytesPerElement=68,Pr("StructArrayLayout8i15ui1ul4f68",De);class Oe extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const A=this.length;return this.resize(A+1),this.emplace(A,n)}emplace(n,A){return this.float32[1*n+0]=A,n}}Oe.prototype.bytesPerElement=4,Pr("StructArrayLayout1f4",Oe);class ct extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,A,f){const y=this.length;return this.resize(y+1),this.emplace(y,n,A,f)}emplace(n,A,f,y){const C=3*n;return this.int16[C+0]=A,this.int16[C+1]=f,this.int16[C+2]=y,n}}ct.prototype.bytesPerElement=6,Pr("StructArrayLayout3i6",ct);class wt extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,A,f){const y=this.length;return this.resize(y+1),this.emplace(y,n,A,f)}emplace(n,A,f,y){const C=4*n;return this.uint32[2*n+0]=A,this.uint16[C+2]=f,this.uint16[C+3]=y,n}}wt.prototype.bytesPerElement=8,Pr("StructArrayLayout1ul2ui8",wt);class St extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,A){const f=this.length;return this.resize(f+1),this.emplace(f,n,A)}emplace(n,A,f){const y=2*n;return this.uint16[y+0]=A,this.uint16[y+1]=f,n}}St.prototype.bytesPerElement=4,Pr("StructArrayLayout2ui4",St);class We extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const A=this.length;return this.resize(A+1),this.emplace(A,n)}emplace(n,A){return this.uint16[1*n+0]=A,n}}We.prototype.bytesPerElement=2,Pr("StructArrayLayout1ui2",We);class Rt extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,A,f,y){const C=this.length;return this.resize(C+1),this.emplace(C,n,A,f,y)}emplace(n,A,f,y,C){const I=4*n;return this.float32[I+0]=A,this.float32[I+1]=f,this.float32[I+2]=y,this.float32[I+3]=C,n}}Rt.prototype.bytesPerElement=16,Pr("StructArrayLayout4f16",Rt);class Mt extends mA{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new _e(this.anchorPointX,this.anchorPointY)}}Mt.prototype.size=20;class Xt extends q{get(n){return new Mt(this,n)}}Pr("CollisionBoxArray",Xt);class Zt extends mA{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Zt.prototype.size=48;class ur extends Ve{get(n){return new Zt(this,n)}}Pr("PlacedSymbolArray",ur);class qt extends mA{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}qt.prototype.size=68;class Rr extends De{get(n){return new qt(this,n)}}Pr("SymbolInstanceArray",Rr);class Ur extends Oe{getoffsetX(n){return this.float32[1*n+0]}}Pr("GlyphOffsetArray",Ur);class qr extends ct{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}Pr("SymbolLineVertexArray",qr);class Pn extends mA{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Pn.prototype.size=8;class jn extends wt{get(n){return new Pn(this,n)}}Pr("FeatureIndexArray",jn);class b extends ha{}class L extends ha{}class j extends ha{}class W extends i{}class ae extends u{}class de extends m{}class ge extends v{}class xe extends S{}class Ie extends M{}class Ne extends z{}class ft extends J{}class It extends pe{}class Ft extends we{}class pt extends St{}const Ar=ds([{name:"a_pos",components:2,type:"Int16"}],4),{members:Vt}=Ar;class Ye{constructor(n=[]){this.segments=n}prepareSegment(n,A,f,y){let C=this.segments[this.segments.length-1];return n>Ye.MAX_VERTEX_ARRAY_LENGTH&&Z(`Max vertices per segment is ${Ye.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!C||C.vertexLength+n>Ye.MAX_VERTEX_ARRAY_LENGTH||C.sortKey!==y)&&(C={vertexOffset:A.length,primitiveOffset:f.length,vertexLength:0,primitiveLength:0},y!==void 0&&(C.sortKey=y),this.segments.push(C)),C}get(){return this.segments}destroy(){for(const n of this.segments)for(const A in n.vaos)n.vaos[A].destroy()}static simpleSegment(n,A,f,y){return new Ye([{vertexOffset:n,primitiveOffset:A,vertexLength:f,primitiveLength:y,vaos:{},sortKey:0}])}}function At(o,n){return 256*(o=w(Math.floor(o),0,255))+w(Math.floor(n),0,255)}Ye.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Pr("SegmentVector",Ye);const Yt=ds([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var ir={exports:{}},Wt={exports:{}};Wt.exports=function(o,n){var A,f,y,C,I,D,H,X;for(f=o.length-(A=3&o.length),y=n,I=3432918353,D=461845907,X=0;X<f;)H=255&o.charCodeAt(X)|(255&o.charCodeAt(++X))<<8|(255&o.charCodeAt(++X))<<16|(255&o.charCodeAt(++X))<<24,++X,y=27492+(65535&(C=5*(65535&(y=(y^=H=(65535&(H=(H=(65535&H)*I+(((H>>>16)*I&65535)<<16)&4294967295)<<15|H>>>17))*D+(((H>>>16)*D&65535)<<16)&4294967295)<<13|y>>>19))+((5*(y>>>16)&65535)<<16)&4294967295))+((58964+(C>>>16)&65535)<<16);switch(H=0,A){case 3:H^=(255&o.charCodeAt(X+2))<<16;case 2:H^=(255&o.charCodeAt(X+1))<<8;case 1:y^=H=(65535&(H=(H=(65535&(H^=255&o.charCodeAt(X)))*I+(((H>>>16)*I&65535)<<16)&4294967295)<<15|H>>>17))*D+(((H>>>16)*D&65535)<<16)&4294967295}return y^=o.length,y=2246822507*(65535&(y^=y>>>16))+((2246822507*(y>>>16)&65535)<<16)&4294967295,y=3266489909*(65535&(y^=y>>>13))+((3266489909*(y>>>16)&65535)<<16)&4294967295,(y^=y>>>16)>>>0};var Dr={exports:{}};Dr.exports=function(o,n){for(var A,f=o.length,y=n^f,C=0;f>=4;)A=1540483477*(65535&(A=255&o.charCodeAt(C)|(255&o.charCodeAt(++C))<<8|(255&o.charCodeAt(++C))<<16|(255&o.charCodeAt(++C))<<24))+((1540483477*(A>>>16)&65535)<<16),y=1540483477*(65535&y)+((1540483477*(y>>>16)&65535)<<16)^(A=1540483477*(65535&(A^=A>>>24))+((1540483477*(A>>>16)&65535)<<16)),f-=4,++C;switch(f){case 3:y^=(255&o.charCodeAt(C+2))<<16;case 2:y^=(255&o.charCodeAt(C+1))<<8;case 1:y=1540483477*(65535&(y^=255&o.charCodeAt(C)))+((1540483477*(y>>>16)&65535)<<16)}return y=1540483477*(65535&(y^=y>>>13))+((1540483477*(y>>>16)&65535)<<16),(y^=y>>>15)>>>0};var kr=Wt.exports,Fn=Dr.exports;ir.exports=kr,ir.exports.murmur3=kr,ir.exports.murmur2=Fn;class Nr{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,A,f,y){this.ids.push(fi(n)),this.positions.push(A,f,y)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const A=fi(n);let f=0,y=this.ids.length-1;for(;f<y;){const I=f+y>>1;this.ids[I]>=A?y=I:f=I+1}const C=[];for(;this.ids[f]===A;)C.push({index:this.positions[3*f],start:this.positions[3*f+1],end:this.positions[3*f+2]}),f++;return C}static serialize(n,A){const f=new Float64Array(n.ids),y=new Uint32Array(n.positions);return di(f,y,0,f.length-1),A&&A.push(f.buffer,y.buffer),{ids:f,positions:y}}static deserialize(n){const A=new Nr;return A.ids=n.ids,A.positions=n.positions,A.indexed=!0,A}}function fi(o){const n=+o;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:ir.exports(String(o))}function di(o,n,A,f){for(;A<f;){const y=o[A+f>>1];let C=A-1,I=f+1;for(;;){do C++;while(o[C]<y);do I--;while(o[I]>y);if(C>=I)break;hr(o,C,I),hr(n,3*C,3*I),hr(n,3*C+1,3*I+1),hr(n,3*C+2,3*I+2)}I-A<f-I?(di(o,n,A,I),A=I+1):(di(o,n,I+1,f),f=I)}}function hr(o,n,A){const f=o[n];o[n]=o[A],o[A]=f}Pr("FeaturePositionMap",Nr);class zn{constructor(n,A){this.gl=n.gl,this.location=A}}class li extends zn{constructor(n,A){super(n,A),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class ci extends zn{constructor(n,A){super(n,A),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class Un extends zn{constructor(n,A){super(n,A),this.current=Ue.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const Is=new Float32Array(16);function Js(o){return[At(255*o.r,255*o.g),At(255*o.b,255*o.a)]}class ki{constructor(n,A,f){this.value=n,this.uniformNames=A.map(y=>`u_${y}`),this.type=f}setUniform(n,A,f){n.set(f.constantOr(this.value))}getBinding(n,A,f){return this.type==="color"?new Un(n,A):new li(n,A)}}class ps{constructor(n,A){this.uniformNames=A.map(f=>`u_${f}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,A){this.pixelRatioFrom=A.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=A.tlbr,this.patternTo=n.tlbr}setUniform(n,A,f,y){const C=y==="u_pattern_to"?this.patternTo:y==="u_pattern_from"?this.patternFrom:y==="u_pixel_ratio_to"?this.pixelRatioTo:y==="u_pixel_ratio_from"?this.pixelRatioFrom:null;C&&n.set(C)}getBinding(n,A,f){return f.substr(0,9)==="u_pattern"?new ci(n,A):new li(n,A)}}class ri{constructor(n,A,f,y){this.expression=n,this.type=f,this.maxValue=0,this.paintVertexAttributes=A.map(C=>({name:`a_${C}`,type:"Float32",components:f==="color"?2:1,offset:0})),this.paintVertexArray=new y}populatePaintArray(n,A,f,y,C){const I=this.paintVertexArray.length,D=this.expression.evaluate(new Ui(0),A,{},y,[],C);this.paintVertexArray.resize(n),this._setPaintValue(I,n,D)}updatePaintArray(n,A,f,y){const C=this.expression.evaluate({zoom:0},f,y);this._setPaintValue(n,A,C)}_setPaintValue(n,A,f){if(this.type==="color"){const y=Js(f);for(let C=n;C<A;C++)this.paintVertexArray.emplace(C,y[0],y[1])}else{for(let y=n;y<A;y++)this.paintVertexArray.emplace(y,f);this.maxValue=Math.max(this.maxValue,Math.abs(f))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class As{constructor(n,A,f,y,C,I){this.expression=n,this.uniformNames=A.map(D=>`u_${D}_t`),this.type=f,this.useIntegerZoom=y,this.zoom=C,this.maxValue=0,this.paintVertexAttributes=A.map(D=>({name:`a_${D}`,type:"Float32",components:f==="color"?4:2,offset:0})),this.paintVertexArray=new I}populatePaintArray(n,A,f,y,C){const I=this.expression.evaluate(new Ui(this.zoom),A,{},y,[],C),D=this.expression.evaluate(new Ui(this.zoom+1),A,{},y,[],C),H=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(H,n,I,D)}updatePaintArray(n,A,f,y){const C=this.expression.evaluate({zoom:this.zoom},f,y),I=this.expression.evaluate({zoom:this.zoom+1},f,y);this._setPaintValue(n,A,C,I)}_setPaintValue(n,A,f,y){if(this.type==="color"){const C=Js(f),I=Js(y);for(let D=n;D<A;D++)this.paintVertexArray.emplace(D,C[0],C[1],I[0],I[1])}else{for(let C=n;C<A;C++)this.paintVertexArray.emplace(C,f,y);this.maxValue=Math.max(this.maxValue,Math.abs(f),Math.abs(y))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,A){const f=this.useIntegerZoom?Math.floor(A.zoom):A.zoom,y=w(this.expression.interpolationFactor(f,this.zoom,this.zoom+1),0,1);n.set(y)}getBinding(n,A,f){return new li(n,A)}}class Ts{constructor(n,A,f,y,C,I){this.expression=n,this.type=A,this.useIntegerZoom=f,this.zoom=y,this.layerId=I,this.zoomInPaintVertexArray=new C,this.zoomOutPaintVertexArray=new C}populatePaintArray(n,A,f){const y=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(y,n,A.patterns&&A.patterns[this.layerId],f)}updatePaintArray(n,A,f,y,C){this._setPaintValues(n,A,f.patterns&&f.patterns[this.layerId],C)}_setPaintValues(n,A,f,y){if(!y||!f)return;const{min:C,mid:I,max:D}=f,H=y[C],X=y[I],ne=y[D];if(H&&X&&ne)for(let le=n;le<A;le++)this.zoomInPaintVertexArray.emplace(le,X.tl[0],X.tl[1],X.br[0],X.br[1],H.tl[0],H.tl[1],H.br[0],H.br[1],X.pixelRatio,H.pixelRatio),this.zoomOutPaintVertexArray.emplace(le,X.tl[0],X.tl[1],X.br[0],X.br[1],ne.tl[0],ne.tl[1],ne.br[0],ne.br[1],X.pixelRatio,ne.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,Yt.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,Yt.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Vi{constructor(n,A,f){this.binders={},this._buffers=[];const y=[];for(const C in n.paint._values){if(!f(C))continue;const I=n.paint.get(C);if(!(I instanceof Bo&&xi(I.property.specification)))continue;const D=Ys(C,n.type),H=I.value,X=I.property.specification.type,ne=I.property.useIntegerZoom,le=I.property.specification["property-type"],ye=le==="cross-faded"||le==="cross-faded-data-driven";if(H.kind==="constant")this.binders[C]=ye?new ps(H.value,D):new ki(H.value,D,X),y.push(`/u_${C}`);else if(H.kind==="source"||ye){const Be=co(C,X,"source");this.binders[C]=ye?new Ts(H,X,ne,A,Be,n.id):new ri(H,D,X,Be),y.push(`/a_${C}`)}else{const Be=co(C,X,"composite");this.binders[C]=new As(H,D,X,ne,A,Be),y.push(`/z_${C}`)}}this.cacheKey=y.sort().join("")}getMaxValue(n){const A=this.binders[n];return A instanceof ri||A instanceof As?A.maxValue:0}populatePaintArrays(n,A,f,y,C){for(const I in this.binders){const D=this.binders[I];(D instanceof ri||D instanceof As||D instanceof Ts)&&D.populatePaintArray(n,A,f,y,C)}}setConstantPatternPositions(n,A){for(const f in this.binders){const y=this.binders[f];y instanceof ps&&y.setConstantPatternPositions(n,A)}}updatePaintArrays(n,A,f,y,C){let I=!1;for(const D in n){const H=A.getPositions(D);for(const X of H){const ne=f.feature(X.index);for(const le in this.binders){const ye=this.binders[le];if((ye instanceof ri||ye instanceof As||ye instanceof Ts)&&ye.expression.isStateDependent===!0){const Be=y.paint.get(le);ye.expression=Be.value,ye.updatePaintArray(X.start,X.end,ne,n[D],C),I=!0}}}}return I}defines(){const n=[];for(const A in this.binders){const f=this.binders[A];(f instanceof ki||f instanceof ps)&&n.push(...f.uniformNames.map(y=>`#define HAS_UNIFORM_${y}`))}return n}getBinderAttributes(){const n=[];for(const A in this.binders){const f=this.binders[A];if(f instanceof ri||f instanceof As)for(let y=0;y<f.paintVertexAttributes.length;y++)n.push(f.paintVertexAttributes[y].name);else if(f instanceof Ts)for(let y=0;y<Yt.members.length;y++)n.push(Yt.members[y].name)}return n}getBinderUniforms(){const n=[];for(const A in this.binders){const f=this.binders[A];if(f instanceof ki||f instanceof ps||f instanceof As)for(const y of f.uniformNames)n.push(y)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,A){const f=[];for(const y in this.binders){const C=this.binders[y];if(C instanceof ki||C instanceof ps||C instanceof As){for(const I of C.uniformNames)if(A[I]){const D=C.getBinding(n,A[I],I);f.push({name:I,property:y,binding:D})}}}return f}setUniforms(n,A,f,y){for(const{name:C,property:I,binding:D}of A)this.binders[I].setUniform(D,y,f.get(I),C)}updatePaintBuffers(n){this._buffers=[];for(const A in this.binders){const f=this.binders[A];if(n&&f instanceof Ts){const y=n.fromScale===2?f.zoomInPaintVertexBuffer:f.zoomOutPaintVertexBuffer;y&&this._buffers.push(y)}else(f instanceof ri||f instanceof As)&&f.paintVertexBuffer&&this._buffers.push(f.paintVertexBuffer)}}upload(n){for(const A in this.binders){const f=this.binders[A];(f instanceof ri||f instanceof As||f instanceof Ts)&&f.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const A=this.binders[n];(A instanceof ri||A instanceof As||A instanceof Ts)&&A.destroy()}}}class Ki{constructor(n,A,f=()=>!0){this.programConfigurations={};for(const y of n)this.programConfigurations[y.id]=new Vi(y,A,f);this.needsUpload=!1,this._featureMap=new Nr,this._bufferOffset=0}populatePaintArrays(n,A,f,y,C,I){for(const D in this.programConfigurations)this.programConfigurations[D].populatePaintArrays(n,A,y,C,I);A.id!==void 0&&this._featureMap.add(A.id,f,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,A,f,y){for(const C of f)this.needsUpload=this.programConfigurations[C.id].updatePaintArrays(n,this._featureMap,A,C,y)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const A in this.programConfigurations)this.programConfigurations[A].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}function Ys(o,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(`${n}-`,"").replace(/-/g,"_")]}function co(o,n,A){const f={color:{source:m,composite:Rt},number:{source:Oe,composite:m}},y=function(C){return{"line-pattern":{source:ge,composite:ge},"fill-pattern":{source:ge,composite:ge},"fill-extrusion-pattern":{source:ge,composite:ge}}[C]}(o);return y&&y[A]||f[n][A]}Pr("ConstantBinder",ki),Pr("CrossFadedConstantBinder",ps),Pr("SourceExpressionBinder",ri),Pr("CrossFadedCompositeBinder",Ts),Pr("CompositeExpressionBinder",As),Pr("ProgramConfiguration",Vi,{omit:["_buffers"]}),Pr("ProgramConfigurationSet",Ki);var Ci=8192;const Us=Math.pow(2,14)-1,Eo=-Us-1;function uo(o){const n=Ci/o.extent,A=o.loadGeometry();for(let f=0;f<A.length;f++){const y=A[f];for(let C=0;C<y.length;C++){const I=y[C],D=Math.round(I.x*n),H=Math.round(I.y*n);I.x=w(D,Eo,Us),I.y=w(H,Eo,Us),(D<I.x||D>I.x+1||H<I.y||H>I.y+1)&&Z("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return A}function Fo(o,n){return{type:o.type,id:o.id,properties:o.properties,geometry:n?uo(o):[]}}function zo(o,n,A,f,y){o.emplaceBack(2*n+(f+1)/2,2*A+(y+1)/2)}class Yi{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(A=>A.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new L,this.indexArray=new Ft,this.segments=new Ye,this.programConfigurations=new Ki(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(A=>A.isStateDependent()).map(A=>A.id)}populate(n,A,f){const y=this.layers[0],C=[];let I=null,D=!1;y.type==="circle"&&(I=y.layout.get("circle-sort-key"),D=!I.isConstant());for(const{feature:H,id:X,index:ne,sourceLayerIndex:le}of n){const ye=this.layers[0]._featureFilter.needGeometry,Be=Fo(H,ye);if(!this.layers[0]._featureFilter.filter(new Ui(this.zoom),Be,f))continue;const Fe=D?I.evaluate(Be,{},f):void 0,et={id:X,properties:H.properties,type:H.type,sourceLayerIndex:le,index:ne,geometry:ye?Be.geometry:uo(H),patterns:{},sortKey:Fe};C.push(et)}D&&C.sort((H,X)=>H.sortKey-X.sortKey);for(const H of C){const{geometry:X,index:ne,sourceLayerIndex:le}=H,ye=n[ne].feature;this.addFeature(H,X,ne,f),A.featureIndex.insert(ye,X,ne,le,this.index)}}update(n,A,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,A,this.stateDependentLayers,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Vt),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,A,f,y){for(const C of A)for(const I of C){const D=I.x,H=I.y;if(D<0||D>=Ci||H<0||H>=Ci)continue;const X=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),ne=X.vertexLength;zo(this.layoutVertexArray,D,H,-1,-1),zo(this.layoutVertexArray,D,H,1,-1),zo(this.layoutVertexArray,D,H,1,1),zo(this.layoutVertexArray,D,H,-1,1),this.indexArray.emplaceBack(ne,ne+1,ne+2),this.indexArray.emplaceBack(ne,ne+3,ne+2),X.vertexLength+=4,X.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,f,{},y)}}function qc(o,n){for(let A=0;A<o.length;A++)if(xl(n,o[A]))return!0;for(let A=0;A<n.length;A++)if(xl(o,n[A]))return!0;return!!rl(o,n)}function lh(o,n,A){return!!xl(o,n)||!!ho(n,o,A)}function Fu(o,n){if(o.length===1)return nl(n,o[0]);for(let A=0;A<n.length;A++){const f=n[A];for(let y=0;y<f.length;y++)if(xl(o,f[y]))return!0}for(let A=0;A<o.length;A++)if(nl(n,o[A]))return!0;for(let A=0;A<n.length;A++)if(rl(o,n[A]))return!0;return!1}function Wc(o,n,A){if(o.length>1){if(rl(o,n))return!0;for(let f=0;f<n.length;f++)if(ho(n[f],o,A))return!0}for(let f=0;f<o.length;f++)if(ho(o[f],n,A))return!0;return!1}function rl(o,n){if(o.length===0||n.length===0)return!1;for(let A=0;A<o.length-1;A++){const f=o[A],y=o[A+1];for(let C=0;C<n.length-1;C++)if(Xc(f,y,n[C],n[C+1]))return!0}return!1}function Xc(o,n,A,f){return te(o,A,f)!==te(n,A,f)&&te(o,n,A)!==te(o,n,f)}function ho(o,n,A){const f=A*A;if(n.length===1)return o.distSqr(n[0])<f;for(let y=1;y<n.length;y++)if(bl(o,n[y-1],n[y])<f)return!0;return!1}function bl(o,n,A){const f=n.distSqr(A);if(f===0)return o.distSqr(n);const y=((o.x-n.x)*(A.x-n.x)+(o.y-n.y)*(A.y-n.y))/f;return o.distSqr(y<0?n:y>1?A:A.sub(n)._mult(y)._add(n))}function nl(o,n){let A,f,y,C=!1;for(let I=0;I<o.length;I++){A=o[I];for(let D=0,H=A.length-1;D<A.length;H=D++)f=A[D],y=A[H],f.y>n.y!=y.y>n.y&&n.x<(y.x-f.x)*(n.y-f.y)/(y.y-f.y)+f.x&&(C=!C)}return C}function xl(o,n){let A=!1;for(let f=0,y=o.length-1;f<o.length;y=f++){const C=o[f],I=o[y];C.y>n.y!=I.y>n.y&&n.x<(I.x-C.x)*(n.y-C.y)/(I.y-C.y)+C.x&&(A=!A)}return A}function Bl(o,n,A){const f=A[0],y=A[2];if(o.x<f.x&&n.x<f.x||o.x>y.x&&n.x>y.x||o.y<f.y&&n.y<f.y||o.y>y.y&&n.y>y.y)return!1;const C=te(o,n,A[0]);return C!==te(o,n,A[1])||C!==te(o,n,A[2])||C!==te(o,n,A[3])}function Yl(o,n,A){const f=n.paint.get(o).value;return f.kind==="constant"?f.value:A.programConfigurations.get(n.id).getMaxValue(o)}function NA(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function il(o,n,A,f,y){if(!n[0]&&!n[1])return o;const C=_e.convert(n)._mult(y);A==="viewport"&&C._rotate(-f);const I=[];for(let D=0;D<o.length;D++)I.push(o[D].sub(C));return I}Pr("CircleBucket",Yi,{omit:["layers"]});const Bc=new os({"circle-sort-key":new vn(vt.layout_circle["circle-sort-key"])});var $l={paint:new os({"circle-radius":new vn(vt.paint_circle["circle-radius"]),"circle-color":new vn(vt.paint_circle["circle-color"]),"circle-blur":new vn(vt.paint_circle["circle-blur"]),"circle-opacity":new vn(vt.paint_circle["circle-opacity"]),"circle-translate":new sn(vt.paint_circle["circle-translate"]),"circle-translate-anchor":new sn(vt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new sn(vt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new sn(vt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new vn(vt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new vn(vt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new vn(vt.paint_circle["circle-stroke-opacity"])}),layout:Bc},fa=1e-6,$s=typeof Float32Array<"u"?Float32Array:Array;function ec(){var o=new $s(9);return $s!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[5]=0,o[6]=0,o[7]=0),o[0]=1,o[4]=1,o[8]=1,o}function So(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function Su(o,n,A){var f=n[0],y=n[1],C=n[2],I=n[3],D=n[4],H=n[5],X=n[6],ne=n[7],le=n[8],ye=n[9],Be=n[10],Fe=n[11],et=n[12],Ze=n[13],Et=n[14],Gt=n[15],xt=A[0],Dt=A[1],or=A[2],ar=A[3];return o[0]=xt*f+Dt*D+or*le+ar*et,o[1]=xt*y+Dt*H+or*ye+ar*Ze,o[2]=xt*C+Dt*X+or*Be+ar*Et,o[3]=xt*I+Dt*ne+or*Fe+ar*Gt,o[4]=(xt=A[4])*f+(Dt=A[5])*D+(or=A[6])*le+(ar=A[7])*et,o[5]=xt*y+Dt*H+or*ye+ar*Ze,o[6]=xt*C+Dt*X+or*Be+ar*Et,o[7]=xt*I+Dt*ne+or*Fe+ar*Gt,o[8]=(xt=A[8])*f+(Dt=A[9])*D+(or=A[10])*le+(ar=A[11])*et,o[9]=xt*y+Dt*H+or*ye+ar*Ze,o[10]=xt*C+Dt*X+or*Be+ar*Et,o[11]=xt*I+Dt*ne+or*Fe+ar*Gt,o[12]=(xt=A[12])*f+(Dt=A[13])*D+(or=A[14])*le+(ar=A[15])*et,o[13]=xt*y+Dt*H+or*ye+ar*Ze,o[14]=xt*C+Dt*X+or*Be+ar*Et,o[15]=xt*I+Dt*ne+or*Fe+ar*Gt,o}Math.hypot||(Math.hypot=function(){for(var o=0,n=arguments.length;n--;)o+=arguments[n]*arguments[n];return Math.sqrt(o)});var tc,ch=Su;function Zc(){var o=new $s(3);return $s!=Float32Array&&(o[0]=0,o[1]=0,o[2]=0),o}function Cl(o,n,A){var f=new $s(3);return f[0]=o,f[1]=n,f[2]=A,f}function Cc(o,n,A){var f=n[0],y=n[1],C=n[2],I=n[3];return o[0]=A[0]*f+A[4]*y+A[8]*C+A[12]*I,o[1]=A[1]*f+A[5]*y+A[9]*C+A[13]*I,o[2]=A[2]*f+A[6]*y+A[10]*C+A[14]*I,o[3]=A[3]*f+A[7]*y+A[11]*C+A[15]*I,o}function Iu(){var o=new $s(4);return $s!=Float32Array&&(o[0]=0,o[1]=0,o[2]=0),o[3]=1,o}function Ec(o,n){const A=Cc([],[o.x,o.y,0,1],n);return new _e(A[0]/A[3],A[1]/A[3])}Zc(),tc=new $s(4),$s!=Float32Array&&(tc[0]=0,tc[1]=0,tc[2]=0,tc[3]=0),Zc(),Cl(1,0,0),Cl(0,1,0),Iu(),Iu(),ec(),function(){var o;o=new $s(2),$s!=Float32Array&&(o[0]=0,o[1]=0)}();class Ia extends Yi{}Pr("HeatmapBucket",Ia,{omit:["layers"]});var El={paint:new os({"heatmap-radius":new vn(vt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new vn(vt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new sn(vt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Sa(vt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new sn(vt.paint_heatmap["heatmap-opacity"])})};function Jc(o,{width:n,height:A},f,y){if(y){if(y instanceof Uint8ClampedArray)y=new Uint8Array(y.buffer);else if(y.length!==n*A*f)throw new RangeError(`mismatched image size. expected: ${y.length} but got: ${n*A*f}`)}else y=new Uint8Array(n*A*f);return o.width=n,o.height=A,o.data=y,o}function uh(o,{width:n,height:A},f){if(n===o.width&&A===o.height)return;const y=Jc({},{width:n,height:A},f);rc(o,y,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,n),height:Math.min(o.height,A)},f),o.width=n,o.height=A,o.data=y.data}function rc(o,n,A,f,y,C){if(y.width===0||y.height===0)return n;if(y.width>o.width||y.height>o.height||A.x>o.width-y.width||A.y>o.height-y.height)throw new RangeError("out of range source coordinates for image copy");if(y.width>n.width||y.height>n.height||f.x>n.width-y.width||f.y>n.height-y.height)throw new RangeError("out of range destination coordinates for image copy");const I=o.data,D=n.data;if(I===D)throw new Error("srcData equals dstData, so image is already copied");for(let H=0;H<y.height;H++){const X=((A.y+H)*o.width+A.x)*C,ne=((f.y+H)*n.width+f.x)*C;for(let le=0;le<y.width*C;le++)D[ne+le]=I[X+le]}return n}class nc{constructor(n,A){Jc(this,n,1,A)}resize(n){uh(this,n,1)}clone(){return new nc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,A,f,y,C){rc(n,A,f,y,C,1)}}class Ta{constructor(n,A){Jc(this,n,4,A)}resize(n){uh(this,n,4)}replace(n,A){A?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new Ta({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,A,f,y,C){rc(n,A,f,y,C,4)}}function jA(o){const n={},A=o.resolution||256,f=o.clips?o.clips.length:1,y=o.image||new Ta({width:A,height:f});if(Math.log(A)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${A}`);const C=(I,D,H)=>{n[o.evaluationKey]=H;const X=o.expression.evaluate(n);y.data[I+D+0]=Math.floor(255*X.r/X.a),y.data[I+D+1]=Math.floor(255*X.g/X.a),y.data[I+D+2]=Math.floor(255*X.b/X.a),y.data[I+D+3]=Math.floor(255*X.a)};if(o.clips)for(let I=0,D=0;I<f;++I,D+=4*A)for(let H=0,X=0;H<A;H++,X+=4){const ne=H/(A-1),{start:le,end:ye}=o.clips[I];C(D,X,le*(1-ne)+ye*ne)}else for(let I=0,D=0;I<A;I++,D+=4)C(0,D,I/(A-1));return y}Pr("AlphaImage",nc),Pr("RGBAImage",Ta);var hh={paint:new os({"hillshade-illumination-direction":new sn(vt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new sn(vt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new sn(vt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new sn(vt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new sn(vt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new sn(vt.paint_hillshade["hillshade-accent-color"])})};const fh=ds([{name:"a_pos",components:2,type:"Int16"}],4),{members:ef}=fh;var ic={exports:{}};function RA(o,n,A){A=A||2;var f,y,C,I,D,H,X,ne=n&&n.length,le=ne?n[0]*A:o.length,ye=Yc(o,0,le,A,!0),Be=[];if(!ye||ye.next===ye.prev)return Be;if(ne&&(ye=function(et,Ze,Et,Gt){var xt,Dt,or,ar=[];for(xt=0,Dt=Ze.length;xt<Dt;xt++)(or=Yc(et,Ze[xt]*Gt,xt<Dt-1?Ze[xt+1]*Gt:et.length,Gt,!1))===or.next&&(or.steiner=!0),ar.push(eu(or));for(ar.sort(ac),xt=0;xt<ar.length;xt++)Et=HA(ar[xt],Et);return Et}(o,n,ye,A)),o.length>80*A){f=C=o[0],y=I=o[1];for(var Fe=A;Fe<le;Fe+=A)(D=o[Fe])<f&&(f=D),(H=o[Fe+1])<y&&(y=H),D>C&&(C=D),H>I&&(I=H);X=(X=Math.max(C-f,I-y))!==0?32767/X:0}return _s(ye,Be,A,f,y,X,0),Be}function Yc(o,n,A,f,y){var C,I;if(y===nf(o,n,A,f)>0)for(C=n;C<A;C+=f)I=hd(C,o[C],o[C+1],I);else for(C=A-f;C>=n;C-=f)I=hd(C,o[C],o[C+1],I);return I&&oc(I,I.next)&&(Lu(I),I=I.next),I}function OA(o,n){if(!o)return o;n||(n=o);var A,f=o;do if(A=!1,f.steiner||!oc(f,f.next)&&ls(f.prev,f,f.next)!==0)f=f.next;else{if(Lu(f),(f=n=f.prev)===f.next)break;A=!0}while(A||f!==n);return n}function _s(o,n,A,f,y,C,I){if(o){!I&&C&&function(ne,le,ye,Be){var Fe=ne;do Fe.z===0&&(Fe.z=gA(Fe.x,Fe.y,le,ye,Be)),Fe.prevZ=Fe.prev,Fe.nextZ=Fe.next,Fe=Fe.next;while(Fe!==ne);Fe.prevZ.nextZ=null,Fe.prevZ=null,function(et){var Ze,Et,Gt,xt,Dt,or,ar,Yr,on=1;do{for(Et=et,et=null,Dt=null,or=0;Et;){for(or++,Gt=Et,ar=0,Ze=0;Ze<on&&(ar++,Gt=Gt.nextZ);Ze++);for(Yr=on;ar>0||Yr>0&&Gt;)ar!==0&&(Yr===0||!Gt||Et.z<=Gt.z)?(xt=Et,Et=Et.nextZ,ar--):(xt=Gt,Gt=Gt.nextZ,Yr--),Dt?Dt.nextZ=xt:et=xt,xt.prevZ=Dt,Dt=xt;Et=Gt}Dt.nextZ=null,on*=2}while(or>1)}(Fe)}(o,f,y,C);for(var D,H,X=o;o.prev!==o.next;)if(D=o.prev,H=o.next,C?tf(o,f,y,C):sc(o))n.push(D.i/A|0),n.push(o.i/A|0),n.push(H.i/A|0),Lu(o),o=H.next,X=H.next;else if((o=H)===X){I?I===1?_s(o=Fc(OA(o),n,A),n,A,f,y,C,2):I===2&&$c(o,n,A,f,y,C):_s(OA(o),n,A,f,y,C,1);break}}}function sc(o){var n=o.prev,A=o,f=o.next;if(ls(n,A,f)>=0)return!1;for(var y=n.x,C=A.x,I=f.x,D=n.y,H=A.y,X=f.y,ne=y<C?y<I?y:I:C<I?C:I,le=D<H?D<X?D:X:H<X?H:X,ye=y>C?y>I?y:I:C>I?C:I,Be=D>H?D>X?D:X:H>X?H:X,Fe=f.next;Fe!==n;){if(Fe.x>=ne&&Fe.x<=ye&&Fe.y>=le&&Fe.y<=Be&&al(y,D,C,H,I,X,Fe.x,Fe.y)&&ls(Fe.prev,Fe,Fe.next)>=0)return!1;Fe=Fe.next}return!0}function tf(o,n,A,f){var y=o.prev,C=o,I=o.next;if(ls(y,C,I)>=0)return!1;for(var D=y.x,H=C.x,X=I.x,ne=y.y,le=C.y,ye=I.y,Be=D<H?D<X?D:X:H<X?H:X,Fe=ne<le?ne<ye?ne:ye:le<ye?le:ye,et=D>H?D>X?D:X:H>X?H:X,Ze=ne>le?ne>ye?ne:ye:le>ye?le:ye,Et=gA(Be,Fe,n,A,f),Gt=gA(et,Ze,n,A,f),xt=o.prevZ,Dt=o.nextZ;xt&&xt.z>=Et&&Dt&&Dt.z<=Gt;){if(xt.x>=Be&&xt.x<=et&&xt.y>=Fe&&xt.y<=Ze&&xt!==y&&xt!==I&&al(D,ne,H,le,X,ye,xt.x,xt.y)&&ls(xt.prev,xt,xt.next)>=0||(xt=xt.prevZ,Dt.x>=Be&&Dt.x<=et&&Dt.y>=Fe&&Dt.y<=Ze&&Dt!==y&&Dt!==I&&al(D,ne,H,le,X,ye,Dt.x,Dt.y)&&ls(Dt.prev,Dt,Dt.next)>=0))return!1;Dt=Dt.nextZ}for(;xt&&xt.z>=Et;){if(xt.x>=Be&&xt.x<=et&&xt.y>=Fe&&xt.y<=Ze&&xt!==y&&xt!==I&&al(D,ne,H,le,X,ye,xt.x,xt.y)&&ls(xt.prev,xt,xt.next)>=0)return!1;xt=xt.prevZ}for(;Dt&&Dt.z<=Gt;){if(Dt.x>=Be&&Dt.x<=et&&Dt.y>=Fe&&Dt.y<=Ze&&Dt!==y&&Dt!==I&&al(D,ne,H,le,X,ye,Dt.x,Dt.y)&&ls(Dt.prev,Dt,Dt.next)>=0)return!1;Dt=Dt.nextZ}return!0}function Fc(o,n,A){var f=o;do{var y=f.prev,C=f.next.next;!oc(y,C)&&Sc(y,f,f.next,C)&&tu(y,C)&&tu(C,y)&&(n.push(y.i/A|0),n.push(f.i/A|0),n.push(C.i/A|0),Lu(f),Lu(f.next),f=o=C),f=f.next}while(f!==o);return OA(f)}function $c(o,n,A,f,y,C){var I=o;do{for(var D=I.next.next;D!==I.prev;){if(I.i!==D.i&&dh(I,D)){var H=ph(I,D);return I=OA(I,I.next),H=OA(H,H.next),_s(I,n,A,f,y,C,0),void _s(H,n,A,f,y,C,0)}D=D.next}I=I.next}while(I!==o)}function ac(o,n){return o.x-n.x}function HA(o,n){var A=function(y,C){var I,D=C,H=y.x,X=y.y,ne=-1/0;do{if(X<=D.y&&X>=D.next.y&&D.next.y!==D.y){var le=D.x+(X-D.y)*(D.next.x-D.x)/(D.next.y-D.y);if(le<=H&&le>ne&&(ne=le,I=D.x<D.next.x?D:D.next,le===H))return I}D=D.next}while(D!==C);if(!I)return null;var ye,Be=I,Fe=I.x,et=I.y,Ze=1/0;D=I;do H>=D.x&&D.x>=Fe&&H!==D.x&&al(X<et?H:ne,X,Fe,et,X<et?ne:H,X,D.x,D.y)&&(ye=Math.abs(X-D.y)/(H-D.x),tu(D,y)&&(ye<Ze||ye===Ze&&(D.x>I.x||D.x===I.x&&sl(I,D)))&&(I=D,Ze=ye)),D=D.next;while(D!==Be);return I}(o,n);if(!A)return n;var f=ph(A,o);return OA(f,f.next),OA(A,A.next)}function sl(o,n){return ls(o.prev,o,n.prev)<0&&ls(n.next,o,o.next)<0}function gA(o,n,A,f,y){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-A)*y|0)|o<<8))|o<<4))|o<<2))|o<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-f)*y|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function eu(o){var n=o,A=o;do(n.x<A.x||n.x===A.x&&n.y<A.y)&&(A=n),n=n.next;while(n!==o);return A}function al(o,n,A,f,y,C,I,D){return(y-I)*(n-D)>=(o-I)*(C-D)&&(o-I)*(f-D)>=(A-I)*(n-D)&&(A-I)*(C-D)>=(y-I)*(f-D)}function dh(o,n){return o.next.i!==n.i&&o.prev.i!==n.i&&!function(A,f){var y=A;do{if(y.i!==A.i&&y.next.i!==A.i&&y.i!==f.i&&y.next.i!==f.i&&Sc(y,y.next,A,f))return!0;y=y.next}while(y!==A);return!1}(o,n)&&(tu(o,n)&&tu(n,o)&&function(A,f){var y=A,C=!1,I=(A.x+f.x)/2,D=(A.y+f.y)/2;do y.y>D!=y.next.y>D&&y.next.y!==y.y&&I<(y.next.x-y.x)*(D-y.y)/(y.next.y-y.y)+y.x&&(C=!C),y=y.next;while(y!==A);return C}(o,n)&&(ls(o.prev,o,n.prev)||ls(o,n.prev,n))||oc(o,n)&&ls(o.prev,o,o.next)>0&&ls(n.prev,n,n.next)>0)}function ls(o,n,A){return(n.y-o.y)*(A.x-n.x)-(n.x-o.x)*(A.y-n.y)}function oc(o,n){return o.x===n.x&&o.y===n.y}function Sc(o,n,A,f){var y=Uu(ls(o,n,A)),C=Uu(ls(o,n,f)),I=Uu(ls(A,f,o)),D=Uu(ls(A,f,n));return y!==C&&I!==D||!(y!==0||!Tu(o,A,n))||!(C!==0||!Tu(o,f,n))||!(I!==0||!Tu(A,o,f))||!(D!==0||!Tu(A,n,f))}function Tu(o,n,A){return n.x<=Math.max(o.x,A.x)&&n.x>=Math.min(o.x,A.x)&&n.y<=Math.max(o.y,A.y)&&n.y>=Math.min(o.y,A.y)}function Uu(o){return o>0?1:o<0?-1:0}function tu(o,n){return ls(o.prev,o,o.next)<0?ls(o,n,o.next)>=0&&ls(o,o.prev,n)>=0:ls(o,n,o.prev)<0||ls(o,o.next,n)<0}function ph(o,n){var A=new rf(o.i,o.x,o.y),f=new rf(n.i,n.x,n.y),y=o.next,C=n.prev;return o.next=n,n.prev=o,A.next=y,y.prev=A,f.next=A,A.prev=f,C.next=f,f.prev=C,f}function hd(o,n,A,f){var y=new rf(o,n,A);return f?(y.next=f.next,y.prev=f,f.next.prev=y,f.next=y):(y.prev=y,y.next=y),y}function Lu(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function rf(o,n,A){this.i=o,this.x=n,this.y=A,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function nf(o,n,A,f){for(var y=0,C=n,I=A-f;C<A;C+=f)y+=(o[I]-o[C])*(o[C+1]+o[I+1]),I=C;return y}function mh(o,n,A,f,y){ku(o,n,A||0,f||o.length-1,y||fd)}function ku(o,n,A,f,y){for(;f>A;){if(f-A>600){var C=f-A+1,I=n-A+1,D=Math.log(C),H=.5*Math.exp(2*D/3),X=.5*Math.sqrt(D*H*(C-H)/C)*(I-C/2<0?-1:1);ku(o,n,Math.max(A,Math.floor(n-I*H/C+X)),Math.min(f,Math.floor(n+(C-I)*H/C+X)),y)}var ne=o[n],le=A,ye=f;for(Qu(o,A,n),y(o[f],ne)>0&&Qu(o,A,f);le<ye;){for(Qu(o,le,ye),le++,ye--;y(o[le],ne)<0;)le++;for(;y(o[ye],ne)>0;)ye--}y(o[A],ne)===0?Qu(o,A,ye):Qu(o,++ye,f),ye<=n&&(A=ye+1),n<=ye&&(f=ye-1)}}function Qu(o,n,A){var f=o[n];o[n]=o[A],o[A]=f}function fd(o,n){return o<n?-1:o>n?1:0}function Pu(o,n){const A=o.length;if(A<=1)return[o];const f=[];let y,C;for(let I=0;I<A;I++){const D=ce(o[I]);D!==0&&(o[I].area=Math.abs(D),C===void 0&&(C=D<0),C===D<0?(y&&f.push(y),y=[o[I]]):y.push(o[I]))}if(y&&f.push(y),n>1)for(let I=0;I<f.length;I++)f[I].length<=n||(mh(f[I],n,1,f[I].length-1,dd),f[I]=f[I].slice(0,n));return f}function dd(o,n){return n.area-o.area}function gh(o,n,A){const f=A.patternDependencies;let y=!1;for(const C of n){const I=C.paint.get(`${o}-pattern`);I.isConstant()||(y=!0);const D=I.constantOr(null);D&&(y=!0,f[D.to]=!0,f[D.from]=!0)}return y}function yh(o,n,A,f,y){const C=y.patternDependencies;for(const I of n){const D=I.paint.get(`${o}-pattern`).value;if(D.kind!=="constant"){let H=D.evaluate({zoom:f-1},A,{},y.availableImages),X=D.evaluate({zoom:f},A,{},y.availableImages),ne=D.evaluate({zoom:f+1},A,{},y.availableImages);H=H&&H.name?H.name:H,X=X&&X.name?X.name:X,ne=ne&&ne.name?ne.name:ne,C[H]=!0,C[X]=!0,C[ne]=!0,A.patterns[I.id]={min:H,mid:X,max:ne}}}return A}ic.exports=RA,ic.exports.default=RA,RA.deviation=function(o,n,A,f){var y=n&&n.length,C=Math.abs(nf(o,0,y?n[0]*A:o.length,A));if(y)for(var I=0,D=n.length;I<D;I++)C-=Math.abs(nf(o,n[I]*A,I<D-1?n[I+1]*A:o.length,A));var H=0;for(I=0;I<f.length;I+=3){var X=f[I]*A,ne=f[I+1]*A,le=f[I+2]*A;H+=Math.abs((o[X]-o[le])*(o[ne+1]-o[X+1])-(o[X]-o[ne])*(o[le+1]-o[X+1]))}return C===0&&H===0?0:Math.abs((H-C)/C)},RA.flatten=function(o){for(var n=o[0][0].length,A={vertices:[],holes:[],dimensions:n},f=0,y=0;y<o.length;y++){for(var C=0;C<o[y].length;C++)for(var I=0;I<n;I++)A.vertices.push(o[y][C][I]);y>0&&A.holes.push(f+=o[y-1].length)}return A};class sf{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(A=>A.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new j,this.indexArray=new Ft,this.indexArray2=new pt,this.programConfigurations=new Ki(n.layers,n.zoom),this.segments=new Ye,this.segments2=new Ye,this.stateDependentLayerIds=this.layers.filter(A=>A.isStateDependent()).map(A=>A.id)}populate(n,A,f){this.hasPattern=gh("fill",this.layers,A);const y=this.layers[0].layout.get("fill-sort-key"),C=!y.isConstant(),I=[];for(const{feature:D,id:H,index:X,sourceLayerIndex:ne}of n){const le=this.layers[0]._featureFilter.needGeometry,ye=Fo(D,le);if(!this.layers[0]._featureFilter.filter(new Ui(this.zoom),ye,f))continue;const Be=C?y.evaluate(ye,{},f,A.availableImages):void 0,Fe={id:H,properties:D.properties,type:D.type,sourceLayerIndex:ne,index:X,geometry:le?ye.geometry:uo(D),patterns:{},sortKey:Be};I.push(Fe)}C&&I.sort((D,H)=>D.sortKey-H.sortKey);for(const D of I){const{geometry:H,index:X,sourceLayerIndex:ne}=D;if(this.hasPattern){const le=yh("fill",this.layers,D,this.zoom,A);this.patternFeatures.push(le)}else this.addFeature(D,H,X,f,{});A.featureIndex.insert(n[X].feature,H,X,ne,this.index)}}update(n,A,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,A,this.stateDependentLayers,f)}addFeatures(n,A,f){for(const y of this.patternFeatures)this.addFeature(y,y.geometry,y.index,A,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,ef),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,A,f,y,C){for(const I of Pu(A,500)){let D=0;for(const Be of I)D+=Be.length;const H=this.segments.prepareSegment(D,this.layoutVertexArray,this.indexArray),X=H.vertexLength,ne=[],le=[];for(const Be of I){if(Be.length===0)continue;Be!==I[0]&&le.push(ne.length/2);const Fe=this.segments2.prepareSegment(Be.length,this.layoutVertexArray,this.indexArray2),et=Fe.vertexLength;this.layoutVertexArray.emplaceBack(Be[0].x,Be[0].y),this.indexArray2.emplaceBack(et+Be.length-1,et),ne.push(Be[0].x),ne.push(Be[0].y);for(let Ze=1;Ze<Be.length;Ze++)this.layoutVertexArray.emplaceBack(Be[Ze].x,Be[Ze].y),this.indexArray2.emplaceBack(et+Ze-1,et+Ze),ne.push(Be[Ze].x),ne.push(Be[Ze].y);Fe.vertexLength+=Be.length,Fe.primitiveLength+=Be.length}const ye=ic.exports(ne,le);for(let Be=0;Be<ye.length;Be+=3)this.indexArray.emplaceBack(X+ye[Be],X+ye[Be+1],X+ye[Be+2]);H.vertexLength+=D,H.primitiveLength+=ye.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,f,C,y)}}Pr("FillBucket",sf,{omit:["layers","patternFeatures"]});const vh=new os({"fill-sort-key":new vn(vt.layout_fill["fill-sort-key"])});var pd={paint:new os({"fill-antialias":new sn(vt.paint_fill["fill-antialias"]),"fill-opacity":new vn(vt.paint_fill["fill-opacity"]),"fill-color":new vn(vt.paint_fill["fill-color"]),"fill-outline-color":new vn(vt.paint_fill["fill-outline-color"]),"fill-translate":new sn(vt.paint_fill["fill-translate"]),"fill-translate-anchor":new sn(vt.paint_fill["fill-translate-anchor"]),"fill-pattern":new tl(vt.paint_fill["fill-pattern"])}),layout:vh};const md=ds([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Kp=ds([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Gp}=md;var Fl={},ru=_e,_h=Sl;function Sl(o,n,A,f,y){this.properties={},this.extent=A,this.type=0,this._pbf=o,this._geometry=-1,this._keys=f,this._values=y,o.readFields(qp,this,n)}function qp(o,n,A){o==1?n.id=A.readVarint():o==2?function(f,y){for(var C=f.readVarint()+f.pos;f.pos<C;){var I=y._keys[f.readVarint()],D=y._values[f.readVarint()];y.properties[I]=D}}(A,n):o==3?n.type=A.readVarint():o==4&&(n._geometry=A.pos)}function Wp(o){for(var n,A,f=0,y=0,C=o.length,I=C-1;y<C;I=y++)f+=((A=o[I]).x-(n=o[y]).x)*(n.y+A.y);return f}Sl.types=["Unknown","Point","LineString","Polygon"],Sl.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var n,A=o.readVarint()+o.pos,f=1,y=0,C=0,I=0,D=[];o.pos<A;){if(y<=0){var H=o.readVarint();f=7&H,y=H>>3}if(y--,f===1||f===2)C+=o.readSVarint(),I+=o.readSVarint(),f===1&&(n&&D.push(n),n=[]),n.push(new ru(C,I));else{if(f!==7)throw new Error("unknown command "+f);n&&n.push(n[0].clone())}}return n&&D.push(n),D},Sl.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var n=o.readVarint()+o.pos,A=1,f=0,y=0,C=0,I=1/0,D=-1/0,H=1/0,X=-1/0;o.pos<n;){if(f<=0){var ne=o.readVarint();A=7&ne,f=ne>>3}if(f--,A===1||A===2)(y+=o.readSVarint())<I&&(I=y),y>D&&(D=y),(C+=o.readSVarint())<H&&(H=C),C>X&&(X=C);else if(A!==7)throw new Error("unknown command "+A)}return[I,H,D,X]},Sl.prototype.toGeoJSON=function(o,n,A){var f,y,C=this.extent*Math.pow(2,A),I=this.extent*o,D=this.extent*n,H=this.loadGeometry(),X=Sl.types[this.type];function ne(Be){for(var Fe=0;Fe<Be.length;Fe++){var et=Be[Fe];Be[Fe]=[360*(et.x+I)/C-180,360/Math.PI*Math.atan(Math.exp((180-360*(et.y+D)/C)*Math.PI/180))-90]}}switch(this.type){case 1:var le=[];for(f=0;f<H.length;f++)le[f]=H[f][0];ne(H=le);break;case 2:for(f=0;f<H.length;f++)ne(H[f]);break;case 3:for(H=function(Be){var Fe=Be.length;if(Fe<=1)return[Be];for(var et,Ze,Et=[],Gt=0;Gt<Fe;Gt++){var xt=Wp(Be[Gt]);xt!==0&&(Ze===void 0&&(Ze=xt<0),Ze===xt<0?(et&&Et.push(et),et=[Be[Gt]]):et.push(Be[Gt]))}return et&&Et.push(et),Et}(H),f=0;f<H.length;f++)for(y=0;y<H[f].length;y++)ne(H[f][y])}H.length===1?H=H[0]:X="Multi"+X;var ye={type:"Feature",geometry:{type:X,coordinates:H},properties:this.properties};return"id"in this&&(ye.id=this.id),ye};var Xp=_h,gd=af;function af(o,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(of,this,n),this.length=this._features.length}function of(o,n,A){o===15?n.version=A.readVarint():o===1?n.name=A.readString():o===5?n.extent=A.readVarint():o===2?n._features.push(A.pos):o===3?n._keys.push(A.readString()):o===4&&n._values.push(function(f){for(var y=null,C=f.readVarint()+f.pos;f.pos<C;){var I=f.readVarint()>>3;y=I===1?f.readString():I===2?f.readFloat():I===3?f.readDouble():I===4?f.readVarint64():I===5?f.readVarint():I===6?f.readSVarint():I===7?f.readBoolean():null}return y}(A))}af.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var n=this._pbf.readVarint()+this._pbf.pos;return new Xp(this._pbf,n,this.extent,this._keys,this._values)};var yd=gd;function vd(o,n,A){if(o===3){var f=new yd(A,A.readVarint()+A.pos);f.length&&(n[f.name]=f)}}Fl.VectorTile=function(o,n){this.layers=o.readFields(vd,{},n)},Fl.VectorTileFeature=_h,Fl.VectorTileLayer=gd;const Af=Fl.VectorTileFeature.types,wh=Math.pow(2,13);function nu(o,n,A,f,y,C,I,D){o.emplaceBack(n,A,2*Math.floor(f*wh)+I,y*wh*2,C*wh*2,Math.round(D))}class lf{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(A=>A.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new W,this.centroidVertexArray=new b,this.indexArray=new Ft,this.programConfigurations=new Ki(n.layers,n.zoom),this.segments=new Ye,this.stateDependentLayerIds=this.layers.filter(A=>A.isStateDependent()).map(A=>A.id)}populate(n,A,f){this.features=[],this.hasPattern=gh("fill-extrusion",this.layers,A);for(const{feature:y,id:C,index:I,sourceLayerIndex:D}of n){const H=this.layers[0]._featureFilter.needGeometry,X=Fo(y,H);if(!this.layers[0]._featureFilter.filter(new Ui(this.zoom),X,f))continue;const ne={id:C,sourceLayerIndex:D,index:I,geometry:H?X.geometry:uo(y),properties:y.properties,type:y.type,patterns:{}};this.hasPattern?this.features.push(yh("fill-extrusion",this.layers,ne,this.zoom,A)):this.addFeature(ne,ne.geometry,I,f,{}),A.featureIndex.insert(y,ne.geometry,I,D,this.index,!0)}}addFeatures(n,A,f){for(const y of this.features){const{geometry:C}=y;this.addFeature(y,C,y.index,A,f)}}update(n,A,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,A,this.stateDependentLayers,f)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Gp),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,Kp.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,A,f,y,C){const I={x:0,y:0,vertexCount:0};for(const D of Pu(A,500)){let H=0;for(const Fe of D)H+=Fe.length;let X=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const Fe of D){if(Fe.length===0||xh(Fe))continue;let et=0;for(let Ze=0;Ze<Fe.length;Ze++){const Et=Fe[Ze];if(Ze>=1){const Gt=Fe[Ze-1];if(!bh(Et,Gt)){X.vertexLength+4>Ye.MAX_VERTEX_ARRAY_LENGTH&&(X=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const xt=Et.sub(Gt)._perp()._unit(),Dt=Gt.dist(Et);et+Dt>32768&&(et=0),nu(this.layoutVertexArray,Et.x,Et.y,xt.x,xt.y,0,0,et),nu(this.layoutVertexArray,Et.x,Et.y,xt.x,xt.y,0,1,et),I.x+=2*Et.x,I.y+=2*Et.y,I.vertexCount+=2,et+=Dt,nu(this.layoutVertexArray,Gt.x,Gt.y,xt.x,xt.y,0,0,et),nu(this.layoutVertexArray,Gt.x,Gt.y,xt.x,xt.y,0,1,et),I.x+=2*Gt.x,I.y+=2*Gt.y,I.vertexCount+=2;const or=X.vertexLength;this.indexArray.emplaceBack(or,or+2,or+1),this.indexArray.emplaceBack(or+1,or+2,or+3),X.vertexLength+=4,X.primitiveLength+=2}}}}if(X.vertexLength+H>Ye.MAX_VERTEX_ARRAY_LENGTH&&(X=this.segments.prepareSegment(H,this.layoutVertexArray,this.indexArray)),Af[n.type]!=="Polygon")continue;const ne=[],le=[],ye=X.vertexLength;for(const Fe of D)if(Fe.length!==0){Fe!==D[0]&&le.push(ne.length/2);for(let et=0;et<Fe.length;et++){const Ze=Fe[et];nu(this.layoutVertexArray,Ze.x,Ze.y,0,0,1,1,0),I.x+=Ze.x,I.y+=Ze.y,I.vertexCount+=1,ne.push(Ze.x),ne.push(Ze.y)}}const Be=ic.exports(ne,le);for(let Fe=0;Fe<Be.length;Fe+=3)this.indexArray.emplaceBack(ye+Be[Fe],ye+Be[Fe+2],ye+Be[Fe+1]);X.primitiveLength+=Be.length/3,X.vertexLength+=H}for(let D=0;D<I.vertexCount;D++)this.centroidVertexArray.emplaceBack(Math.floor(I.x/I.vertexCount),Math.floor(I.y/I.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,f,C,y)}}function bh(o,n){return o.x===n.x&&(o.x<0||o.x>Ci)||o.y===n.y&&(o.y<0||o.y>Ci)}function xh(o){return o.every(n=>n.x<0)||o.every(n=>n.x>Ci)||o.every(n=>n.y<0)||o.every(n=>n.y>Ci)}Pr("FillExtrusionBucket",lf,{omit:["layers","features"]});var _d={paint:new os({"fill-extrusion-opacity":new sn(vt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new vn(vt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new sn(vt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new sn(vt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new tl(vt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new vn(vt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new vn(vt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new sn(vt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function iu(o,n){return o.x*n.x+o.y*n.y}function wd(o,n){if(o.length===1){let A=0;const f=n[A++];let y;for(;!y||f.equals(y);)if(y=n[A++],!y)return 1/0;for(;A<n.length;A++){const C=n[A],I=o[0],D=y.sub(f),H=C.sub(f),X=I.sub(f),ne=iu(D,D),le=iu(D,H),ye=iu(H,H),Be=iu(X,D),Fe=iu(X,H),et=ne*ye-le*le,Ze=(ye*Be-le*Fe)/et,Et=(ne*Fe-le*Be)/et,Gt=f.z*(1-Ze-Et)+y.z*Ze+C.z*Et;if(isFinite(Gt))return Gt}return 1/0}{let A=1/0;for(const f of n)A=Math.min(A,f.z);return A}}const bd=ds([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:xd}=bd,Zp=ds([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Jp}=Zp,su=Fl.VectorTileFeature.types,Bd=Math.cos(Math.PI/180*37.5),Ls=Math.pow(2,14)/.5;class Il{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(A=>A.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(A=>{this.gradients[A.id]={}}),this.layoutVertexArray=new ae,this.layoutVertexArray2=new de,this.indexArray=new Ft,this.programConfigurations=new Ki(n.layers,n.zoom),this.segments=new Ye,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(A=>A.isStateDependent()).map(A=>A.id)}populate(n,A,f){this.hasPattern=gh("line",this.layers,A);const y=this.layers[0].layout.get("line-sort-key"),C=!y.isConstant(),I=[];for(const{feature:D,id:H,index:X,sourceLayerIndex:ne}of n){const le=this.layers[0]._featureFilter.needGeometry,ye=Fo(D,le);if(!this.layers[0]._featureFilter.filter(new Ui(this.zoom),ye,f))continue;const Be=C?y.evaluate(ye,{},f):void 0,Fe={id:H,properties:D.properties,type:D.type,sourceLayerIndex:ne,index:X,geometry:le?ye.geometry:uo(D),patterns:{},sortKey:Be};I.push(Fe)}C&&I.sort((D,H)=>D.sortKey-H.sortKey);for(const D of I){const{geometry:H,index:X,sourceLayerIndex:ne}=D;if(this.hasPattern){const le=yh("line",this.layers,D,this.zoom,A);this.patternFeatures.push(le)}else this.addFeature(D,H,X,f,{});A.featureIndex.insert(n[X].feature,H,X,ne,this.index)}}update(n,A,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,A,this.stateDependentLayers,f)}addFeatures(n,A,f){for(const y of this.patternFeatures)this.addFeature(y,y.geometry,y.index,A,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,Jp)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,xd),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,A,f,y,C){const I=this.layers[0].layout,D=I.get("line-join").evaluate(n,{}),H=I.get("line-cap"),X=I.get("line-miter-limit"),ne=I.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const le of A)this.addLine(le,n,D,H,X,ne);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,f,C,y)}addLine(n,A,f,y,C,I){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Et=0;Et<n.length-1;Et++)this.totalDistance+=n[Et].dist(n[Et+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const D=su[A.type]==="Polygon";let H=n.length;for(;H>=2&&n[H-1].equals(n[H-2]);)H--;let X=0;for(;X<H-1&&n[X].equals(n[X+1]);)X++;if(H<(D?3:2))return;f==="bevel"&&(C=1.05);const ne=this.overscaling<=16?122880/(512*this.overscaling):0,le=this.segments.prepareSegment(10*H,this.layoutVertexArray,this.indexArray);let ye,Be,Fe,et,Ze;this.e1=this.e2=-1,D&&(ye=n[H-2],Ze=n[X].sub(ye)._unit()._perp());for(let Et=X;Et<H;Et++){if(Fe=Et===H-1?D?n[X+1]:void 0:n[Et+1],Fe&&n[Et].equals(Fe))continue;Ze&&(et=Ze),ye&&(Be=ye),ye=n[Et],Ze=Fe?Fe.sub(ye)._unit()._perp():et,et=et||Ze;let Gt=et.add(Ze);Gt.x===0&&Gt.y===0||Gt._unit();const xt=et.x*Ze.x+et.y*Ze.y,Dt=Gt.x*Ze.x+Gt.y*Ze.y,or=Dt!==0?1/Dt:1/0,ar=2*Math.sqrt(2-2*Dt),Yr=Dt<Bd&&Be&&Fe,on=et.x*Ze.y-et.y*Ze.x>0;if(Yr&&Et>X){const Lr=ye.dist(Be);if(Lr>2*ne){const Xr=ye.sub(ye.sub(Be)._mult(ne/Lr)._round());this.updateDistance(Be,Xr),this.addCurrentVertex(Xr,et,0,0,le),Be=Xr}}const Wr=Be&&Fe;let Mr=Wr?f:D?"butt":y;if(Wr&&Mr==="round"&&(or<I?Mr="miter":or<=2&&(Mr="fakeround")),Mr==="miter"&&or>C&&(Mr="bevel"),Mr==="bevel"&&(or>2&&(Mr="flipbevel"),or<C&&(Mr="miter")),Be&&this.updateDistance(Be,ye),Mr==="miter")Gt._mult(or),this.addCurrentVertex(ye,Gt,0,0,le);else if(Mr==="flipbevel"){if(or>100)Gt=Ze.mult(-1);else{const Lr=or*et.add(Ze).mag()/et.sub(Ze).mag();Gt._perp()._mult(Lr*(on?-1:1))}this.addCurrentVertex(ye,Gt,0,0,le),this.addCurrentVertex(ye,Gt.mult(-1),0,0,le)}else if(Mr==="bevel"||Mr==="fakeround"){const Lr=-Math.sqrt(or*or-1),Xr=on?Lr:0,Or=on?0:Lr;if(Be&&this.addCurrentVertex(ye,et,Xr,Or,le),Mr==="fakeround"){const wr=Math.round(180*ar/Math.PI/20);for(let _n=1;_n<wr;_n++){let fn=_n/wr;if(fn!==.5){const $i=fn-.5;fn+=fn*$i*(fn-1)*((1.0904+xt*(xt*(3.55645-1.43519*xt)-3.2452))*$i*$i+(.848013+xt*(.215638*xt-1.06021)))}const qn=Ze.sub(et)._mult(fn)._add(et)._unit()._mult(on?-1:1);this.addHalfVertex(ye,qn.x,qn.y,!1,on,0,le)}}Fe&&this.addCurrentVertex(ye,Ze,-Xr,-Or,le)}else if(Mr==="butt")this.addCurrentVertex(ye,Gt,0,0,le);else if(Mr==="square"){const Lr=Be?1:-1;this.addCurrentVertex(ye,Gt,Lr,Lr,le)}else Mr==="round"&&(Be&&(this.addCurrentVertex(ye,et,0,0,le),this.addCurrentVertex(ye,et,1,1,le,!0)),Fe&&(this.addCurrentVertex(ye,Ze,-1,-1,le,!0),this.addCurrentVertex(ye,Ze,0,0,le)));if(Yr&&Et<H-1){const Lr=ye.dist(Fe);if(Lr>2*ne){const Xr=ye.add(Fe.sub(ye)._mult(ne/Lr)._round());this.updateDistance(ye,Xr),this.addCurrentVertex(Xr,Ze,0,0,le),ye=Xr}}}}addCurrentVertex(n,A,f,y,C,I=!1){const D=A.y*y-A.x,H=-A.y-A.x*y;this.addHalfVertex(n,A.x+A.y*f,A.y-A.x*f,I,!1,f,C),this.addHalfVertex(n,D,H,I,!0,-y,C),this.distance>Ls/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(n,A,f,y,C,I))}addHalfVertex({x:n,y:A},f,y,C,I,D,H){const X=.5*(this.lineClips?this.scaledDistance*(Ls-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(C?1:0),(A<<1)+(I?1:0),Math.round(63*f)+128,Math.round(63*y)+128,1+(D===0?0:D<0?-1:1)|(63&X)<<2,X>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const ne=H.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,ne),H.primitiveLength++),I?this.e2=ne:this.e1=ne}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,A){this.distance+=n.dist(A),this.updateScaledDistance()}}Pr("LineBucket",Il,{omit:["layers","patternFeatures"]});const au=new os({"line-cap":new sn(vt.layout_line["line-cap"]),"line-join":new vn(vt.layout_line["line-join"]),"line-miter-limit":new sn(vt.layout_line["line-miter-limit"]),"line-round-limit":new sn(vt.layout_line["line-round-limit"]),"line-sort-key":new vn(vt.layout_line["line-sort-key"])});var Tl={paint:new os({"line-opacity":new vn(vt.paint_line["line-opacity"]),"line-color":new vn(vt.paint_line["line-color"]),"line-translate":new sn(vt.paint_line["line-translate"]),"line-translate-anchor":new sn(vt.paint_line["line-translate-anchor"]),"line-width":new vn(vt.paint_line["line-width"]),"line-gap-width":new vn(vt.paint_line["line-gap-width"]),"line-offset":new vn(vt.paint_line["line-offset"]),"line-blur":new vn(vt.paint_line["line-blur"]),"line-dasharray":new wl(vt.paint_line["line-dasharray"]),"line-pattern":new tl(vt.paint_line["line-pattern"]),"line-gradient":new Sa(vt.paint_line["line-gradient"])}),layout:au};const Ul=new class extends vn{possiblyEvaluate(o,n){return n=new Ui(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,zoomHistory:n.zoomHistory,transition:n.transition}),super.possiblyEvaluate(o,n)}evaluate(o,n,A,f){return n=Q({},n,{zoom:Math.floor(n.zoom)}),super.evaluate(o,n,A,f)}}(Tl.paint.properties["line-width"].specification);function ou(o,n){return n>0?n+2*o:o}Ul.useIntegerZoom=!0;const Ll=ds([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Cd=ds([{name:"a_projected_pos",components:3,type:"Float32"}],4);ds([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Ed=ds([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);ds([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const cf=ds([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),uf=ds([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Mu(o,n,A){return o.sections.forEach(f=>{f.text=function(y,C,I){const D=C.layout.get("text-transform").evaluate(I,{});return D==="uppercase"?y=y.toLocaleUpperCase():D==="lowercase"&&(y=y.toLocaleLowerCase()),Fa.applyArabicShaping&&(y=Fa.applyArabicShaping(y)),y}(f.text,n,A)}),o}ds([{name:"triangle",components:3,type:"Uint16"}]),ds([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),ds([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),ds([{type:"Float32",name:"offsetX"}]),ds([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const Au={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var Os=24,Ic=Li,Fd=function(o,n,A,f,y){var C,I,D=8*y-f-1,H=(1<<D)-1,X=H>>1,ne=-7,le=A?y-1:0,ye=A?-1:1,Be=o[n+le];for(le+=ye,C=Be&(1<<-ne)-1,Be>>=-ne,ne+=D;ne>0;C=256*C+o[n+le],le+=ye,ne-=8);for(I=C&(1<<-ne)-1,C>>=-ne,ne+=f;ne>0;I=256*I+o[n+le],le+=ye,ne-=8);if(C===0)C=1-X;else{if(C===H)return I?NaN:1/0*(Be?-1:1);I+=Math.pow(2,f),C-=X}return(Be?-1:1)*I*Math.pow(2,C-f)},Sd=function(o,n,A,f,y,C){var I,D,H,X=8*C-y-1,ne=(1<<X)-1,le=ne>>1,ye=y===23?Math.pow(2,-24)-Math.pow(2,-77):0,Be=f?0:C-1,Fe=f?1:-1,et=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(D=isNaN(n)?1:0,I=ne):(I=Math.floor(Math.log(n)/Math.LN2),n*(H=Math.pow(2,-I))<1&&(I--,H*=2),(n+=I+le>=1?ye/H:ye*Math.pow(2,1-le))*H>=2&&(I++,H/=2),I+le>=ne?(D=0,I=ne):I+le>=1?(D=(n*H-1)*Math.pow(2,y),I+=le):(D=n*Math.pow(2,le-1)*Math.pow(2,y),I=0));y>=8;o[A+Be]=255&D,Be+=Fe,D/=256,y-=8);for(I=I<<y|D,X+=y;X>0;o[A+Be]=255&I,Be+=Fe,I/=256,X-=8);o[A+Be-Fe]|=128*et};function Li(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}Li.Varint=0,Li.Fixed64=1,Li.Bytes=2,Li.Fixed32=5;var Ac,hf=4294967296,Bh=1/hf,Id=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function kl(o){return o.type===Li.Bytes?o.readVarint()+o.pos:o.pos+1}function lu(o,n,A){return A?4294967296*n+(o>>>0):4294967296*(n>>>0)+(o>>>0)}function Td(o,n,A){var f=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));A.realloc(f);for(var y=A.pos-1;y>=o;y--)A.buf[y+f]=A.buf[y]}function Yp(o,n){for(var A=0;A<o.length;A++)n.writeVarint(o[A])}function ff(o,n){for(var A=0;A<o.length;A++)n.writeSVarint(o[A])}function df(o,n){for(var A=0;A<o.length;A++)n.writeFloat(o[A])}function Ud(o,n){for(var A=0;A<o.length;A++)n.writeDouble(o[A])}function $p(o,n){for(var A=0;A<o.length;A++)n.writeBoolean(o[A])}function em(o,n){for(var A=0;A<o.length;A++)n.writeFixed32(o[A])}function Ld(o,n){for(var A=0;A<o.length;A++)n.writeSFixed32(o[A])}function tm(o,n){for(var A=0;A<o.length;A++)n.writeFixed64(o[A])}function rm(o,n){for(var A=0;A<o.length;A++)n.writeSFixed64(o[A])}function Ch(o,n){return(o[n]|o[n+1]<<8|o[n+2]<<16)+16777216*o[n+3]}function cu(o,n,A){o[A]=n,o[A+1]=n>>>8,o[A+2]=n>>>16,o[A+3]=n>>>24}function kd(o,n){return(o[n]|o[n+1]<<8|o[n+2]<<16)+(o[n+3]<<24)}function pf(o,n,A){o===1&&A.readMessage(nm,n)}function nm(o,n,A){if(o===3){const{id:f,bitmap:y,width:C,height:I,left:D,top:H,advance:X}=A.readMessage(mf,{});n.push({id:f,bitmap:new nc({width:C+6,height:I+6},y),metrics:{width:C,height:I,left:D,top:H,advance:X}})}}function mf(o,n,A){o===1?n.id=A.readVarint():o===2?n.bitmap=A.readBytes():o===3?n.width=A.readVarint():o===4?n.height=A.readVarint():o===5?n.left=A.readSVarint():o===6?n.top=A.readSVarint():o===7&&(n.advance=A.readVarint())}function Qd(o){let n=0,A=0;for(const I of o)n+=I.w*I.h,A=Math.max(A,I.w);o.sort((I,D)=>D.h-I.h);const f=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),A),h:1/0}];let y=0,C=0;for(const I of o)for(let D=f.length-1;D>=0;D--){const H=f[D];if(!(I.w>H.w||I.h>H.h)){if(I.x=H.x,I.y=H.y,C=Math.max(C,I.y+I.h),y=Math.max(y,I.x+I.w),I.w===H.w&&I.h===H.h){const X=f.pop();D<f.length&&(f[D]=X)}else I.h===H.h?(H.x+=I.w,H.w-=I.w):I.w===H.w?(H.y+=I.h,H.h-=I.h):(f.push({x:H.x+I.w,y:H.y,w:H.w-I.w,h:I.h}),H.y+=I.h,H.h-=I.h);break}}return{w:y,h:C,fill:n/(y*C)||0}}Li.prototype={destroy:function(){this.buf=null},readFields:function(o,n,A){for(A=A||this.length;this.pos<A;){var f=this.readVarint(),y=f>>3,C=this.pos;this.type=7&f,o(y,n,this),this.pos===C&&this.skip(f)}return n},readMessage:function(o,n){return this.readFields(o,n,this.readVarint()+this.pos)},readFixed32:function(){var o=Ch(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=kd(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=Ch(this.buf,this.pos)+Ch(this.buf,this.pos+4)*hf;return this.pos+=8,o},readSFixed64:function(){var o=Ch(this.buf,this.pos)+kd(this.buf,this.pos+4)*hf;return this.pos+=8,o},readFloat:function(){var o=Fd(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=Fd(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var n,A,f=this.buf;return n=127&(A=f[this.pos++]),A<128?n:(n|=(127&(A=f[this.pos++]))<<7,A<128?n:(n|=(127&(A=f[this.pos++]))<<14,A<128?n:(n|=(127&(A=f[this.pos++]))<<21,A<128?n:function(y,C,I){var D,H,X=I.buf;if(D=(112&(H=X[I.pos++]))>>4,H<128||(D|=(127&(H=X[I.pos++]))<<3,H<128)||(D|=(127&(H=X[I.pos++]))<<10,H<128)||(D|=(127&(H=X[I.pos++]))<<17,H<128)||(D|=(127&(H=X[I.pos++]))<<24,H<128)||(D|=(1&(H=X[I.pos++]))<<31,H<128))return lu(y,D,C);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(A=f[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var o=this.readVarint()+this.pos,n=this.pos;return this.pos=o,o-n>=12&&Id?function(A,f,y){return Id.decode(A.subarray(f,y))}(this.buf,n,o):function(A,f,y){for(var C="",I=f;I<y;){var D,H,X,ne=A[I],le=null,ye=ne>239?4:ne>223?3:ne>191?2:1;if(I+ye>y)break;ye===1?ne<128&&(le=ne):ye===2?(192&(D=A[I+1]))==128&&(le=(31&ne)<<6|63&D)<=127&&(le=null):ye===3?(H=A[I+2],(192&(D=A[I+1]))==128&&(192&H)==128&&((le=(15&ne)<<12|(63&D)<<6|63&H)<=2047||le>=55296&&le<=57343)&&(le=null)):ye===4&&(H=A[I+2],X=A[I+3],(192&(D=A[I+1]))==128&&(192&H)==128&&(192&X)==128&&((le=(15&ne)<<18|(63&D)<<12|(63&H)<<6|63&X)<=65535||le>=1114112)&&(le=null)),le===null?(le=65533,ye=1):le>65535&&(le-=65536,C+=String.fromCharCode(le>>>10&1023|55296),le=56320|1023&le),C+=String.fromCharCode(le),I+=ye}return C}(this.buf,n,o)},readBytes:function(){var o=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,o);return this.pos=o,n},readPackedVarint:function(o,n){if(this.type!==Li.Bytes)return o.push(this.readVarint(n));var A=kl(this);for(o=o||[];this.pos<A;)o.push(this.readVarint(n));return o},readPackedSVarint:function(o){if(this.type!==Li.Bytes)return o.push(this.readSVarint());var n=kl(this);for(o=o||[];this.pos<n;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==Li.Bytes)return o.push(this.readBoolean());var n=kl(this);for(o=o||[];this.pos<n;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==Li.Bytes)return o.push(this.readFloat());var n=kl(this);for(o=o||[];this.pos<n;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==Li.Bytes)return o.push(this.readDouble());var n=kl(this);for(o=o||[];this.pos<n;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==Li.Bytes)return o.push(this.readFixed32());var n=kl(this);for(o=o||[];this.pos<n;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==Li.Bytes)return o.push(this.readSFixed32());var n=kl(this);for(o=o||[];this.pos<n;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==Li.Bytes)return o.push(this.readFixed64());var n=kl(this);for(o=o||[];this.pos<n;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==Li.Bytes)return o.push(this.readSFixed64());var n=kl(this);for(o=o||[];this.pos<n;)o.push(this.readSFixed64());return o},skip:function(o){var n=7&o;if(n===Li.Varint)for(;this.buf[this.pos++]>127;);else if(n===Li.Bytes)this.pos=this.readVarint()+this.pos;else if(n===Li.Fixed32)this.pos+=4;else{if(n!==Li.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(o,n){this.writeVarint(o<<3|n)},realloc:function(o){for(var n=this.length||16;n<this.pos+o;)n*=2;if(n!==this.length){var A=new Uint8Array(n);A.set(this.buf),this.buf=A,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),cu(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),cu(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),cu(this.buf,-1&o,this.pos),cu(this.buf,Math.floor(o*Bh),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),cu(this.buf,-1&o,this.pos),cu(this.buf,Math.floor(o*Bh),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(n,A){var f,y;if(n>=0?(f=n%4294967296|0,y=n/4294967296|0):(y=~(-n/4294967296),4294967295^(f=~(-n%4294967296))?f=f+1|0:(f=0,y=y+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");A.realloc(10),function(C,I,D){D.buf[D.pos++]=127&C|128,C>>>=7,D.buf[D.pos++]=127&C|128,C>>>=7,D.buf[D.pos++]=127&C|128,C>>>=7,D.buf[D.pos++]=127&C|128,D.buf[D.pos]=127&(C>>>=7)}(f,0,A),function(C,I){var D=(7&C)<<4;I.buf[I.pos++]|=D|((C>>>=3)?128:0),C&&(I.buf[I.pos++]=127&C|((C>>>=7)?128:0),C&&(I.buf[I.pos++]=127&C|((C>>>=7)?128:0),C&&(I.buf[I.pos++]=127&C|((C>>>=7)?128:0),C&&(I.buf[I.pos++]=127&C|((C>>>=7)?128:0),C&&(I.buf[I.pos++]=127&C)))))}(y,A)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(Boolean(o))},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var n=this.pos;this.pos=function(f,y,C){for(var I,D,H=0;H<y.length;H++){if((I=y.charCodeAt(H))>55295&&I<57344){if(!D){I>56319||H+1===y.length?(f[C++]=239,f[C++]=191,f[C++]=189):D=I;continue}if(I<56320){f[C++]=239,f[C++]=191,f[C++]=189,D=I;continue}I=D-55296<<10|I-56320|65536,D=null}else D&&(f[C++]=239,f[C++]=191,f[C++]=189,D=null);I<128?f[C++]=I:(I<2048?f[C++]=I>>6|192:(I<65536?f[C++]=I>>12|224:(f[C++]=I>>18|240,f[C++]=I>>12&63|128),f[C++]=I>>6&63|128),f[C++]=63&I|128)}return C}(this.buf,o,this.pos);var A=this.pos-n;A>=128&&Td(n,A,this),this.pos=n-1,this.writeVarint(A),this.pos+=A},writeFloat:function(o){this.realloc(4),Sd(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),Sd(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var n=o.length;this.writeVarint(n),this.realloc(n);for(var A=0;A<n;A++)this.buf[this.pos++]=o[A]},writeRawMessage:function(o,n){this.pos++;var A=this.pos;o(n,this);var f=this.pos-A;f>=128&&Td(A,f,this),this.pos=A-1,this.writeVarint(f),this.pos+=f},writeMessage:function(o,n,A){this.writeTag(o,Li.Bytes),this.writeRawMessage(n,A)},writePackedVarint:function(o,n){n.length&&this.writeMessage(o,Yp,n)},writePackedSVarint:function(o,n){n.length&&this.writeMessage(o,ff,n)},writePackedBoolean:function(o,n){n.length&&this.writeMessage(o,$p,n)},writePackedFloat:function(o,n){n.length&&this.writeMessage(o,df,n)},writePackedDouble:function(o,n){n.length&&this.writeMessage(o,Ud,n)},writePackedFixed32:function(o,n){n.length&&this.writeMessage(o,em,n)},writePackedSFixed32:function(o,n){n.length&&this.writeMessage(o,Ld,n)},writePackedFixed64:function(o,n){n.length&&this.writeMessage(o,tm,n)},writePackedSFixed64:function(o,n){n.length&&this.writeMessage(o,rm,n)},writeBytesField:function(o,n){this.writeTag(o,Li.Bytes),this.writeBytes(n)},writeFixed32Field:function(o,n){this.writeTag(o,Li.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(o,n){this.writeTag(o,Li.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(o,n){this.writeTag(o,Li.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(o,n){this.writeTag(o,Li.Fixed64),this.writeSFixed64(n)},writeVarintField:function(o,n){this.writeTag(o,Li.Varint),this.writeVarint(n)},writeSVarintField:function(o,n){this.writeTag(o,Li.Varint),this.writeSVarint(n)},writeStringField:function(o,n){this.writeTag(o,Li.Bytes),this.writeString(n)},writeFloatField:function(o,n){this.writeTag(o,Li.Fixed32),this.writeFloat(n)},writeDoubleField:function(o,n){this.writeTag(o,Li.Fixed64),this.writeDouble(n)},writeBooleanField:function(o,n){this.writeVarintField(o,Boolean(n))}};class rn{constructor(n,{pixelRatio:A,version:f,stretchX:y,stretchY:C,content:I}){this.paddedRect=n,this.pixelRatio=A,this.stretchX=y,this.stretchY=C,this.content=I,this.version=f}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Tc{constructor(n,A){const f={},y={};this.haveRenderCallbacks=[];const C=[];this.addImages(n,f,C),this.addImages(A,y,C);const{w:I,h:D}=Qd(C),H=new Ta({width:I||1,height:D||1});for(const X in n){const ne=n[X],le=f[X].paddedRect;Ta.copy(ne.data,H,{x:0,y:0},{x:le.x+1,y:le.y+1},ne.data)}for(const X in A){const ne=A[X],le=y[X].paddedRect,ye=le.x+1,Be=le.y+1,Fe=ne.data.width,et=ne.data.height;Ta.copy(ne.data,H,{x:0,y:0},{x:ye,y:Be},ne.data),Ta.copy(ne.data,H,{x:0,y:et-1},{x:ye,y:Be-1},{width:Fe,height:1}),Ta.copy(ne.data,H,{x:0,y:0},{x:ye,y:Be+et},{width:Fe,height:1}),Ta.copy(ne.data,H,{x:Fe-1,y:0},{x:ye-1,y:Be},{width:1,height:et}),Ta.copy(ne.data,H,{x:0,y:0},{x:ye+Fe,y:Be},{width:1,height:et})}this.image=H,this.iconPositions=f,this.patternPositions=y}addImages(n,A,f){for(const y in n){const C=n[y],I={x:0,y:0,w:C.data.width+2,h:C.data.height+2};f.push(I),A[y]=new rn(I,C),C.hasRenderCallback&&this.haveRenderCallbacks.push(y)}}patchUpdatedImages(n,A){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const f in n.updatedImages)this.patchUpdatedImage(this.iconPositions[f],n.getImage(f),A),this.patchUpdatedImage(this.patternPositions[f],n.getImage(f),A)}patchUpdatedImage(n,A,f){if(!n||!A||n.version===A.version)return;n.version=A.version;const[y,C]=n.tl;f.update(A.data,void 0,{x:y,y:C})}}Pr("ImagePosition",rn),Pr("ImageAtlas",Tc),a.WritingMode=void 0,(Ac=a.WritingMode||(a.WritingMode={}))[Ac.none=0]="none",Ac[Ac.horizontal=1]="horizontal",Ac[Ac.vertical=2]="vertical",Ac[Ac.horizontalOnly=3]="horizontalOnly";const Uc=-17;class Oa{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,A){const f=new Oa;return f.scale=n||1,f.fontStack=A,f}static forImage(n){const A=new Oa;return A.imageName=n,A}}class uu{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,A){const f=new uu;for(let y=0;y<n.sections.length;y++){const C=n.sections[y];C.image?f.addImageSection(C):f.addTextSection(C,A)}return f}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=function(n){let A="";for(let f=0;f<n.length;f++){const y=n.charCodeAt(f+1)||null,C=n.charCodeAt(f-1)||null;A+=y&&JA(y)&&!Au[n[f+1]]||C&&JA(C)&&!Au[n[f-1]]||!Au[n[f]]?n[f]:Au[n[f]]}return A}(this.text)}trim(){let n=0;for(let f=0;f<this.text.length&&Gi[this.text.charCodeAt(f)];f++)n++;let A=this.text.length;for(let f=this.text.length-1;f>=0&&f>=n&&Gi[this.text.charCodeAt(f)];f--)A--;this.text=this.text.substring(n,A),this.sectionIndex=this.sectionIndex.slice(n,A)}substring(n,A){const f=new uu;return f.text=this.text.substring(n,A),f.sectionIndex=this.sectionIndex.slice(n,A),f.sections=this.sections,f}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,A)=>Math.max(n,this.sections[A].scale),0)}addTextSection(n,A){this.text+=n.text,this.sections.push(Oa.forText(n.scale,n.fontStack||A));const f=this.sections.length-1;for(let y=0;y<n.text.length;++y)this.sectionIndex.push(f)}addImageSection(n){const A=n.image?n.image.name:"";if(A.length===0)return void Z("Can't add FormattedSection with an empty image.");const f=this.getNextImageSectionCharCode();f?(this.text+=String.fromCharCode(f),this.sections.push(Oa.forImage(A)),this.sectionIndex.push(this.sections.length-1)):Z("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Ei(o,n,A,f,y,C,I,D,H,X,ne,le,ye,Be,Fe,et){const Ze=uu.fromFeature(o,y);let Et;le===a.WritingMode.vertical&&Ze.verticalizePunctuation();const{processBidirectionalText:Gt,processStyledBidirectionalText:xt}=Fa;if(Gt&&Ze.sections.length===1){Et=[];const ar=Gt(Ze.toString(),gf(Ze,X,C,n,f,Be,Fe));for(const Yr of ar){const on=new uu;on.text=Yr,on.sections=Ze.sections;for(let Wr=0;Wr<Yr.length;Wr++)on.sectionIndex.push(0);Et.push(on)}}else if(xt){Et=[];const ar=xt(Ze.text,Ze.sectionIndex,gf(Ze,X,C,n,f,Be,Fe));for(const Yr of ar){const on=new uu;on.text=Yr[0],on.sectionIndex=Yr[1],on.sections=Ze.sections,Et.push(on)}}else Et=function(ar,Yr){const on=[],Wr=ar.text;let Mr=0;for(const Lr of Yr)on.push(ar.substring(Mr,Lr)),Mr=Lr;return Mr<Wr.length&&on.push(ar.substring(Mr,Wr.length)),on}(Ze,gf(Ze,X,C,n,f,Be,Fe));const Dt=[],or={positionedLines:Dt,text:Ze.toString(),top:ne[1],bottom:ne[1],left:ne[0],right:ne[0],writingMode:le,iconsInText:!1,verticalizable:!1};return function(ar,Yr,on,Wr,Mr,Lr,Xr,Or,wr,_n,fn,qn){let $i=0,cs=Uc,ea=0,zA=0;const Ha=Or==="right"?1:Or==="left"?0:.5;let Hs=0;for(const zs of Mr){zs.trim();const Va=zs.getMaxScale(),mo=(Va-1)*Os,To={positionedGlyphs:[],lineOffset:0};ar.positionedLines[Hs]=To;const Go=To.positionedGlyphs;let qo=0;if(!zs.length()){cs+=Lr,++Hs;continue}for(let ma=0;ma<zs.length();ma++){const ei=zs.getSection(ma),yA=zs.getSectionIndex(ma),Ka=zs.getCharCode(ma);let go=0,ul=null,Ml=null,Dl=null,kc=Os;const hl=!(wr===a.WritingMode.horizontal||!fn&&!Zl(Ka)||fn&&(Gi[Ka]||(pa=Ka,Ir.Arabic(pa)||Ir["Arabic Supplement"](pa)||Ir["Arabic Extended-A"](pa)||Ir["Arabic Presentation Forms-A"](pa)||Ir["Arabic Presentation Forms-B"](pa))));if(ei.imageName){const VA=Wr[ei.imageName];if(!VA)continue;Dl=ei.imageName,ar.iconsInText=ar.iconsInText||!0,Ml=VA.paddedRect;const Wo=VA.displaySize;ei.scale=ei.scale*Os/qn,ul={width:Wo[0],height:Wo[1],left:1,top:-3,advance:hl?Wo[1]:Wo[0]},go=mo+(Os-Wo[1]*ei.scale),kc=ul.advance;const Qc=hl?Wo[0]*ei.scale-Os*Va:Wo[1]*ei.scale-Os*Va;Qc>0&&Qc>qo&&(qo=Qc)}else{const VA=on[ei.fontStack],Wo=VA&&VA[Ka];if(Wo&&Wo.rect)Ml=Wo.rect,ul=Wo.metrics;else{const Qc=Yr[ei.fontStack],Cf=Qc&&Qc[Ka];if(!Cf)continue;ul=Cf.metrics}go=(Va-ei.scale)*Os}hl?(ar.verticalizable=!0,Go.push({glyph:Ka,imageName:Dl,x:$i,y:cs+go,vertical:hl,scale:ei.scale,fontStack:ei.fontStack,sectionIndex:yA,metrics:ul,rect:Ml}),$i+=kc*ei.scale+_n):(Go.push({glyph:Ka,imageName:Dl,x:$i,y:cs+go,vertical:hl,scale:ei.scale,fontStack:ei.fontStack,sectionIndex:yA,metrics:ul,rect:Ml}),$i+=ul.advance*ei.scale+_n)}Go.length!==0&&(ea=Math.max($i-_n,ea),sm(Go,0,Go.length-1,Ha,qo)),$i=0;const ms=Lr*Va+qo;To.lineOffset=Math.max(qo,mo),cs+=ms,zA=Math.max(ms,zA),++Hs}var pa;const za=cs-Uc,{horizontalAlign:po,verticalAlign:Ko}=Fh(Xr);(function(zs,Va,mo,To,Go,qo,ms,ma,ei){const yA=(Va-mo)*Go;let Ka=0;Ka=qo!==ms?-ma*To-Uc:(-To*ei+.5)*ms;for(const go of zs)for(const ul of go.positionedGlyphs)ul.x+=yA,ul.y+=Ka})(ar.positionedLines,Ha,po,Ko,ea,zA,Lr,za,Mr.length),ar.top+=-Ko*za,ar.bottom=ar.top+za,ar.left+=-po*ea,ar.right=ar.left+ea}(or,n,A,f,Et,I,D,H,le,X,ye,et),!function(ar){for(const Yr of ar)if(Yr.positionedGlyphs.length!==0)return!1;return!0}(Dt)&&or}const Gi={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Eh={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Pd(o,n,A,f,y,C){if(n.imageName){const I=f[n.imageName];return I?I.displaySize[0]*n.scale*Os/C+y:0}{const I=A[n.fontStack],D=I&&I[o];return D?D.metrics.advance*n.scale+y:0}}function Du(o,n,A,f){const y=Math.pow(o-n,2);return f?o<n?y/2:2*y:y+Math.abs(A)*A}function im(o,n,A){let f=0;return o===10&&(f-=1e4),A&&(f+=150),o!==40&&o!==65288||(f+=50),n!==41&&n!==65289||(f+=50),f}function Nu(o,n,A,f,y,C){let I=null,D=Du(n,A,y,C);for(const H of f){const X=Du(n-H.x,A,y,C)+H.badness;X<=D&&(I=H,D=X)}return{index:o,x:n,priorBreak:I,badness:D}}function Md(o){return o?Md(o.priorBreak).concat(o.index):[]}function gf(o,n,A,f,y,C,I){if(C!=="point")return[];if(!o)return[];const D=[],H=function(ye,Be,Fe,et,Ze,Et){let Gt=0;for(let xt=0;xt<ye.length();xt++){const Dt=ye.getSection(xt);Gt+=Pd(ye.getCharCode(xt),Dt,et,Ze,Be,Et)}return Gt/Math.max(1,Math.ceil(Gt/Fe))}(o,n,A,f,y,I),X=o.text.indexOf("​")>=0;let ne=0;for(let ye=0;ye<o.length();ye++){const Be=o.getSection(ye),Fe=o.getCharCode(ye);if(Gi[Fe]||(ne+=Pd(Fe,Be,f,y,n,I)),ye<o.length()-1){const et=!((le=Fe)<11904||!(Ir["Bopomofo Extended"](le)||Ir.Bopomofo(le)||Ir["CJK Compatibility Forms"](le)||Ir["CJK Compatibility Ideographs"](le)||Ir["CJK Compatibility"](le)||Ir["CJK Radicals Supplement"](le)||Ir["CJK Strokes"](le)||Ir["CJK Symbols and Punctuation"](le)||Ir["CJK Unified Ideographs Extension A"](le)||Ir["CJK Unified Ideographs"](le)||Ir["Enclosed CJK Letters and Months"](le)||Ir["Halfwidth and Fullwidth Forms"](le)||Ir.Hiragana(le)||Ir["Ideographic Description Characters"](le)||Ir["Kangxi Radicals"](le)||Ir["Katakana Phonetic Extensions"](le)||Ir.Katakana(le)||Ir["Vertical Forms"](le)||Ir["Yi Radicals"](le)||Ir["Yi Syllables"](le)));(Eh[Fe]||et||Be.imageName)&&D.push(Nu(ye+1,ne,H,D,im(Fe,o.getCharCode(ye+1),et&&X),!1))}}var le;return Md(Nu(o.length(),ne,H,D,0,!0))}function Fh(o){let n=.5,A=.5;switch(o){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":A=1;break;case"top":case"top-right":case"top-left":A=0}return{horizontalAlign:n,verticalAlign:A}}function sm(o,n,A,f,y){if(!f&&!y)return;const C=o[A],I=(o[A].x+C.metrics.advance*C.scale)*f;for(let D=n;D<=A;D++)o[D].x-=I,o[D].y+=y}function Dd(o,n,A){const{horizontalAlign:f,verticalAlign:y}=Fh(A),C=n[0]-o.displaySize[0]*f,I=n[1]-o.displaySize[1]*y;return{image:o,top:I,bottom:I+o.displaySize[1],left:C,right:C+o.displaySize[0]}}function Nd(o,n,A,f,y,C){const I=o.image;let D;if(I.content){const Ze=I.content,Et=I.pixelRatio||1;D=[Ze[0]/Et,Ze[1]/Et,I.displaySize[0]-Ze[2]/Et,I.displaySize[1]-Ze[3]/Et]}const H=n.left*C,X=n.right*C;let ne,le,ye,Be;A==="width"||A==="both"?(Be=y[0]+H-f[3],le=y[0]+X+f[1]):(Be=y[0]+(H+X-I.displaySize[0])/2,le=Be+I.displaySize[0]);const Fe=n.top*C,et=n.bottom*C;return A==="height"||A==="both"?(ne=y[1]+Fe-f[0],ye=y[1]+et+f[2]):(ne=y[1]+(Fe+et-I.displaySize[1])/2,ye=ne+I.displaySize[1]),{image:I,top:ne,right:le,bottom:ye,left:Be,collisionPadding:D}}const ol=128;function yf(o,n){const{expression:A}=n;if(A.kind==="constant")return{kind:"constant",layoutSize:A.evaluate(new Ui(o+1))};if(A.kind==="source")return{kind:"source"};{const{zoomStops:f,interpolationType:y}=A;let C=0;for(;C<f.length&&f[C]<=o;)C++;C=Math.max(0,C-1);let I=C;for(;I<f.length&&f[I]<o+1;)I++;I=Math.min(f.length-1,I);const D=f[C],H=f[I];return A.kind==="composite"?{kind:"composite",minZoom:D,maxZoom:H,interpolationType:y}:{kind:"camera",minZoom:D,maxZoom:H,minSize:A.evaluate(new Ui(D)),maxSize:A.evaluate(new Ui(H)),interpolationType:y}}}class Al extends _e{constructor(n,A,f,y){super(n,A),this.angle=f,y!==void 0&&(this.segment=y)}clone(){return new Al(this.x,this.y,this.angle,this.segment)}}function vf(o,n,A,f,y){if(n.segment===void 0)return!0;let C=n,I=n.segment+1,D=0;for(;D>-A/2;){if(I--,I<0)return!1;D-=o[I].dist(C),C=o[I]}D+=o[I].dist(o[I+1]),I++;const H=[];let X=0;for(;D<A/2;){const ne=o[I],le=o[I+1];if(!le)return!1;let ye=o[I-1].angleTo(ne)-ne.angleTo(le);for(ye=Math.abs((ye+3*Math.PI)%(2*Math.PI)-Math.PI),H.push({distance:D,angleDelta:ye}),X+=ye;D-H[0].distance>f;)X-=H.shift().angleDelta;if(X>y)return!1;I++,D+=ne.dist(le)}return!0}function jd(o){let n=0;for(let A=0;A<o.length-1;A++)n+=o[A].dist(o[A+1]);return n}function _f(o,n,A){return o?.6*n*A:0}function Rd(o,n){return Math.max(o?o.right-o.left:0,n?n.right-n.left:0)}function am(o,n,A,f,y,C){const I=_f(A,y,C),D=Rd(A,f)*C;let H=0;const X=jd(o)/2;for(let ne=0;ne<o.length-1;ne++){const le=o[ne],ye=o[ne+1],Be=le.dist(ye);if(H+Be>X){const Fe=(X-H)/Be,et=si(le.x,ye.x,Fe),Ze=si(le.y,ye.y,Fe),Et=new Al(et,Ze,ye.angleTo(le),ne);return Et._round(),!I||vf(o,Et,D,I,n)?Et:void 0}H+=Be}}function om(o,n,A,f,y,C,I,D,H){const X=_f(f,C,I),ne=Rd(f,y),le=ne*I,ye=o[0].x===0||o[0].x===H||o[0].y===0||o[0].y===H;return n-le<n/4&&(n=le+n/4),ju(o,ye?n/2*D%n:(ne/2+2*C)*I*D%n,n,X,A,le,ye,!1,H)}function ju(o,n,A,f,y,C,I,D,H){const X=C/2,ne=jd(o);let le=0,ye=n-A,Be=[];for(let Fe=0;Fe<o.length-1;Fe++){const et=o[Fe],Ze=o[Fe+1],Et=et.dist(Ze),Gt=Ze.angleTo(et);for(;ye+A<le+Et;){ye+=A;const xt=(ye-le)/Et,Dt=si(et.x,Ze.x,xt),or=si(et.y,Ze.y,xt);if(Dt>=0&&Dt<H&&or>=0&&or<H&&ye-X>=0&&ye+X<=ne){const ar=new Al(Dt,or,Gt,Fe);ar._round(),f&&!vf(o,ar,C,f,y)||Be.push(ar)}}le+=Et}return D||Be.length||I||(Be=ju(o,le/2,A,f,y,C,I,!0,H)),Be}function Vo(o,n,A,f,y){const C=[];for(let I=0;I<o.length;I++){const D=o[I];let H;for(let X=0;X<D.length-1;X++){let ne=D[X],le=D[X+1];ne.x<n&&le.x<n||(ne.x<n?ne=new _e(n,ne.y+(n-ne.x)/(le.x-ne.x)*(le.y-ne.y))._round():le.x<n&&(le=new _e(n,ne.y+(n-ne.x)/(le.x-ne.x)*(le.y-ne.y))._round()),ne.y<A&&le.y<A||(ne.y<A?ne=new _e(ne.x+(A-ne.y)/(le.y-ne.y)*(le.x-ne.x),A)._round():le.y<A&&(le=new _e(ne.x+(A-ne.y)/(le.y-ne.y)*(le.x-ne.x),A)._round()),ne.x>=f&&le.x>=f||(ne.x>=f?ne=new _e(f,ne.y+(f-ne.x)/(le.x-ne.x)*(le.y-ne.y))._round():le.x>=f&&(le=new _e(f,ne.y+(f-ne.x)/(le.x-ne.x)*(le.y-ne.y))._round()),ne.y>=y&&le.y>=y||(ne.y>=y?ne=new _e(ne.x+(y-ne.y)/(le.y-ne.y)*(le.x-ne.x),y)._round():le.y>=y&&(le=new _e(ne.x+(y-ne.y)/(le.y-ne.y)*(le.x-ne.x),y)._round()),H&&ne.equals(H[H.length-1])||(H=[ne],C.push(H)),H.push(le)))))}}return C}function wf(o,n,A,f){const y=[],C=o.image,I=C.pixelRatio,D=C.paddedRect.w-2,H=C.paddedRect.h-2,X=o.right-o.left,ne=o.bottom-o.top,le=C.stretchX||[[0,D]],ye=C.stretchY||[[0,H]],Be=(Lr,Xr)=>Lr+Xr[1]-Xr[0],Fe=le.reduce(Be,0),et=ye.reduce(Be,0),Ze=D-Fe,Et=H-et;let Gt=0,xt=Fe,Dt=0,or=et,ar=0,Yr=Ze,on=0,Wr=Et;if(C.content&&f){const Lr=C.content;Gt=Lc(le,0,Lr[0]),Dt=Lc(ye,0,Lr[1]),xt=Lc(le,Lr[0],Lr[2]),or=Lc(ye,Lr[1],Lr[3]),ar=Lr[0]-Gt,on=Lr[1]-Dt,Yr=Lr[2]-Lr[0]-xt,Wr=Lr[3]-Lr[1]-or}const Mr=(Lr,Xr,Or,wr)=>{const _n=Sh(Lr.stretch-Gt,xt,X,o.left),fn=hu(Lr.fixed-ar,Yr,Lr.stretch,Fe),qn=Sh(Xr.stretch-Dt,or,ne,o.top),$i=hu(Xr.fixed-on,Wr,Xr.stretch,et),cs=Sh(Or.stretch-Gt,xt,X,o.left),ea=hu(Or.fixed-ar,Yr,Or.stretch,Fe),zA=Sh(wr.stretch-Dt,or,ne,o.top),Ha=hu(wr.fixed-on,Wr,wr.stretch,et),Hs=new _e(_n,qn),pa=new _e(cs,qn),za=new _e(cs,zA),po=new _e(_n,zA),Ko=new _e(fn/I,$i/I),zs=new _e(ea/I,Ha/I),Va=n*Math.PI/180;if(Va){const Go=Math.sin(Va),qo=Math.cos(Va),ms=[qo,-Go,Go,qo];Hs._matMult(ms),pa._matMult(ms),po._matMult(ms),za._matMult(ms)}const mo=Lr.stretch+Lr.fixed,To=Xr.stretch+Xr.fixed;return{tl:Hs,tr:pa,bl:po,br:za,tex:{x:C.paddedRect.x+1+mo,y:C.paddedRect.y+1+To,w:Or.stretch+Or.fixed-mo,h:wr.stretch+wr.fixed-To},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Ko,pixelOffsetBR:zs,minFontScaleX:Yr/I/X,minFontScaleY:Wr/I/ne,isSDF:A}};if(f&&(C.stretchX||C.stretchY)){const Lr=Od(le,Ze,Fe),Xr=Od(ye,Et,et);for(let Or=0;Or<Lr.length-1;Or++){const wr=Lr[Or],_n=Lr[Or+1];for(let fn=0;fn<Xr.length-1;fn++)y.push(Mr(wr,Xr[fn],_n,Xr[fn+1]))}}else y.push(Mr({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:D+1},{fixed:0,stretch:H+1}));return y}function Lc(o,n,A){let f=0;for(const y of o)f+=Math.max(n,Math.min(A,y[1]))-Math.max(n,Math.min(A,y[0]));return f}function Od(o,n,A){const f=[{fixed:-1,stretch:0}];for(const[y,C]of o){const I=f[f.length-1];f.push({fixed:y-I.stretch,stretch:I.stretch}),f.push({fixed:y-I.stretch,stretch:I.stretch+(C-y)})}return f.push({fixed:n+1,stretch:A}),f}function Sh(o,n,A,f){return o/n*A+f}function hu(o,n,A,f){return o-n*A/f}Pr("Anchor",Al);class Ql{constructor(n,A,f,y,C,I,D,H,X,ne){if(this.boxStartIndex=n.length,X){let le=I.top,ye=I.bottom;const Be=I.collisionPadding;Be&&(le-=Be[1],ye+=Be[3]);let Fe=ye-le;Fe>0&&(Fe=Math.max(10,Fe),this.circleDiameter=Fe)}else{let le=I.top*D-H[0],ye=I.bottom*D+H[2],Be=I.left*D-H[3],Fe=I.right*D+H[1];const et=I.collisionPadding;if(et&&(Be-=et[0]*D,le-=et[1]*D,Fe+=et[2]*D,ye+=et[3]*D),ne){const Ze=new _e(Be,le),Et=new _e(Fe,le),Gt=new _e(Be,ye),xt=new _e(Fe,ye),Dt=ne*Math.PI/180;Ze._rotate(Dt),Et._rotate(Dt),Gt._rotate(Dt),xt._rotate(Dt),Be=Math.min(Ze.x,Et.x,Gt.x,xt.x),Fe=Math.max(Ze.x,Et.x,Gt.x,xt.x),le=Math.min(Ze.y,Et.y,Gt.y,xt.y),ye=Math.max(Ze.y,Et.y,Gt.y,xt.y)}n.emplaceBack(A.x,A.y,Be,le,Fe,ye,f,y,C)}this.boxEndIndex=n.length}}class Ih{constructor(n=[],A=Am){if(this.data=n,this.length=this.data.length,this.compare=A,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(n){this.data.push(n),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const n=this.data[0],A=this.data.pop();return this.length--,this.length>0&&(this.data[0]=A,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:A,compare:f}=this,y=A[n];for(;n>0;){const C=n-1>>1,I=A[C];if(f(y,I)>=0)break;A[n]=I,n=C}A[n]=y}_down(n){const{data:A,compare:f}=this,y=this.length>>1,C=A[n];for(;n<y;){let I=1+(n<<1),D=A[I];const H=I+1;if(H<this.length&&f(A[H],D)<0&&(I=H,D=A[H]),f(D,C)>=0)break;A[n]=D,n=I}A[n]=C}}function Am(o,n){return o<n?-1:o>n?1:0}function fu(o,n=1,A=!1){let f=1/0,y=1/0,C=-1/0,I=-1/0;const D=o[0];for(let Be=0;Be<D.length;Be++){const Fe=D[Be];(!Be||Fe.x<f)&&(f=Fe.x),(!Be||Fe.y<y)&&(y=Fe.y),(!Be||Fe.x>C)&&(C=Fe.x),(!Be||Fe.y>I)&&(I=Fe.y)}const H=Math.min(C-f,I-y);let X=H/2;const ne=new Ih([],lm);if(H===0)return new _e(f,y);for(let Be=f;Be<C;Be+=H)for(let Fe=y;Fe<I;Fe+=H)ne.push(new du(Be+X,Fe+X,X,o));let le=function(Be){let Fe=0,et=0,Ze=0;const Et=Be[0];for(let Gt=0,xt=Et.length,Dt=xt-1;Gt<xt;Dt=Gt++){const or=Et[Gt],ar=Et[Dt],Yr=or.x*ar.y-ar.x*or.y;et+=(or.x+ar.x)*Yr,Ze+=(or.y+ar.y)*Yr,Fe+=3*Yr}return new du(et/Fe,Ze/Fe,0,Be)}(o),ye=ne.length;for(;ne.length;){const Be=ne.pop();(Be.d>le.d||!le.d)&&(le=Be,A&&console.log("found best %d after %d probes",Math.round(1e4*Be.d)/1e4,ye)),Be.max-le.d<=n||(X=Be.h/2,ne.push(new du(Be.p.x-X,Be.p.y-X,X,o)),ne.push(new du(Be.p.x+X,Be.p.y-X,X,o)),ne.push(new du(Be.p.x-X,Be.p.y+X,X,o)),ne.push(new du(Be.p.x+X,Be.p.y+X,X,o)),ye+=4)}return A&&(console.log(`num probes: ${ye}`),console.log(`best distance: ${le.d}`)),le.p}function lm(o,n){return n.max-o.max}function du(o,n,A,f){this.p=new _e(o,n),this.h=A,this.d=function(y,C){let I=!1,D=1/0;for(let H=0;H<C.length;H++){const X=C[H];for(let ne=0,le=X.length,ye=le-1;ne<le;ye=ne++){const Be=X[ne],Fe=X[ye];Be.y>y.y!=Fe.y>y.y&&y.x<(Fe.x-Be.x)*(y.y-Be.y)/(Fe.y-Be.y)+Be.x&&(I=!I),D=Math.min(D,bl(y,Be,Fe))}}return(I?1:-1)*Math.sqrt(D)}(this.p,f),this.max=this.d+this.h*Math.SQRT2}const Th=Number.POSITIVE_INFINITY;function Hd(o,n){return n[1]!==Th?function(A,f,y){let C=0,I=0;switch(f=Math.abs(f),y=Math.abs(y),A){case"top-right":case"top-left":case"top":I=y-7;break;case"bottom-right":case"bottom-left":case"bottom":I=7-y}switch(A){case"top-right":case"bottom-right":case"right":C=-f;break;case"top-left":case"bottom-left":case"left":C=f}return[C,I]}(o,n[0],n[1]):function(A,f){let y=0,C=0;f<0&&(f=0);const I=f/Math.sqrt(2);switch(A){case"top-right":case"top-left":C=I-7;break;case"bottom-right":case"bottom-left":C=7-I;break;case"bottom":C=7-f;break;case"top":C=f-7}switch(A){case"top-right":case"bottom-right":y=-I;break;case"top-left":case"bottom-left":y=I;break;case"left":y=f;break;case"right":y=-f}return[y,C]}(o,n[0])}function Uh(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function cm(o,n,A,f,y,C,I,D,H,X,ne){let le=C.textMaxSize.evaluate(n,{});le===void 0&&(le=I);const ye=o.layers[0].layout,Be=ye.get("icon-offset").evaluate(n,{},ne),Fe=Vd(A.horizontal),et=I/24,Ze=o.tilePixelRatio*et,Et=o.tilePixelRatio*le/24,Gt=o.tilePixelRatio*D,xt=o.tilePixelRatio*ye.get("symbol-spacing"),Dt=ye.get("text-padding")*o.tilePixelRatio,or=function(wr,_n,fn,qn=1){const $i=wr.get("icon-padding").evaluate(_n,{},fn),cs=$i&&$i.values;return[cs[0]*qn,cs[1]*qn,cs[2]*qn,cs[3]*qn]}(ye,n,ne,o.tilePixelRatio),ar=ye.get("text-max-angle")/180*Math.PI,Yr=ye.get("text-rotation-alignment")!=="viewport"&&ye.get("symbol-placement")!=="point",on=ye.get("icon-rotation-alignment")==="map"&&ye.get("symbol-placement")!=="point",Wr=ye.get("symbol-placement"),Mr=xt/2,Lr=ye.get("icon-text-fit");let Xr;f&&Lr!=="none"&&(o.allowVerticalPlacement&&A.vertical&&(Xr=Nd(f,A.vertical,Lr,ye.get("icon-text-fit-padding"),Be,et)),Fe&&(f=Nd(f,Fe,Lr,ye.get("icon-text-fit-padding"),Be,et)));const Or=(wr,_n)=>{_n.x<0||_n.x>=Ci||_n.y<0||_n.y>=Ci||function(fn,qn,$i,cs,ea,zA,Ha,Hs,pa,za,po,Ko,zs,Va,mo,To,Go,qo,ms,ma,ei,yA,Ka,go,ul){const Ml=fn.addToLineVertexArray(qn,$i);let Dl,kc,hl,VA,Wo=0,Qc=0,Cf=0,$g=0,mm=-1,gm=-1;const Pc={};let e0=ir.exports(""),ym=0,vm=0;if(Hs._unevaluatedLayout.getValue("text-radial-offset")===void 0?[ym,vm]=Hs.layout.get("text-offset").evaluate(ei,{},go).map(Xo=>Xo*Os):(ym=Hs.layout.get("text-radial-offset").evaluate(ei,{},go)*Os,vm=Th),fn.allowVerticalPlacement&&cs.vertical){const Xo=Hs.layout.get("text-rotate").evaluate(ei,{},go)+90;hl=new Ql(pa,qn,za,po,Ko,cs.vertical,zs,Va,mo,Xo),Ha&&(VA=new Ql(pa,qn,za,po,Ko,Ha,Go,qo,mo,Xo))}if(ea){const Xo=Hs.layout.get("icon-rotate").evaluate(ei,{}),cc=Hs.layout.get("icon-text-fit")!=="none",Ef=wf(ea,Xo,Ka,cc),Ff=Ha?wf(Ha,Xo,Ka,cc):void 0;kc=new Ql(pa,qn,za,po,Ko,ea,Go,qo,!1,Xo),Wo=4*Ef.length;const n0=fn.iconSizeData;let Ru=null;n0.kind==="source"?(Ru=[ol*Hs.layout.get("icon-size").evaluate(ei,{})],Ru[0]>lc&&Z(`${fn.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):n0.kind==="composite"&&(Ru=[ol*yA.compositeIconSizes[0].evaluate(ei,{},go),ol*yA.compositeIconSizes[1].evaluate(ei,{},go)],(Ru[0]>lc||Ru[1]>lc)&&Z(`${fn.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),fn.addSymbols(fn.icon,Ef,Ru,ma,ms,ei,a.WritingMode.none,qn,Ml.lineStartIndex,Ml.lineLength,-1,go),mm=fn.icon.placedSymbolArray.length-1,Ff&&(Qc=4*Ff.length,fn.addSymbols(fn.icon,Ff,Ru,ma,ms,ei,a.WritingMode.vertical,qn,Ml.lineStartIndex,Ml.lineLength,-1,go),gm=fn.icon.placedSymbolArray.length-1)}const t0=Object.keys(cs.horizontal);for(const Xo of t0){const cc=cs.horizontal[Xo];if(!Dl){e0=ir.exports(cc.text);const Ff=Hs.layout.get("text-rotate").evaluate(ei,{},go);Dl=new Ql(pa,qn,za,po,Ko,cc,zs,Va,mo,Ff)}const Ef=cc.positionedLines.length===1;if(Cf+=zd(fn,qn,cc,zA,Hs,mo,ei,To,Ml,cs.vertical?a.WritingMode.horizontal:a.WritingMode.horizontalOnly,Ef?t0:[Xo],Pc,mm,yA,go),Ef)break}cs.vertical&&($g+=zd(fn,qn,cs.vertical,zA,Hs,mo,ei,To,Ml,a.WritingMode.vertical,["vertical"],Pc,gm,yA,go));const x_=Dl?Dl.boxStartIndex:fn.collisionBoxArray.length,B_=Dl?Dl.boxEndIndex:fn.collisionBoxArray.length,C_=hl?hl.boxStartIndex:fn.collisionBoxArray.length,E_=hl?hl.boxEndIndex:fn.collisionBoxArray.length,F_=kc?kc.boxStartIndex:fn.collisionBoxArray.length,S_=kc?kc.boxEndIndex:fn.collisionBoxArray.length,I_=VA?VA.boxStartIndex:fn.collisionBoxArray.length,T_=VA?VA.boxEndIndex:fn.collisionBoxArray.length;let Nl=-1;const Kd=(Xo,cc)=>Xo&&Xo.circleDiameter?Math.max(Xo.circleDiameter,cc):cc;Nl=Kd(Dl,Nl),Nl=Kd(hl,Nl),Nl=Kd(kc,Nl),Nl=Kd(VA,Nl);const r0=Nl>-1?1:0;r0&&(Nl*=ul/Os),fn.glyphOffsetArray.length>=pu.MAX_GLYPHS&&Z("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),ei.sortKey!==void 0&&fn.addToSortKeyRanges(fn.symbolInstances.length,ei.sortKey),fn.symbolInstances.emplaceBack(qn.x,qn.y,Pc.right>=0?Pc.right:-1,Pc.center>=0?Pc.center:-1,Pc.left>=0?Pc.left:-1,Pc.vertical||-1,mm,gm,e0,x_,B_,C_,E_,F_,S_,I_,T_,za,Cf,$g,Wo,Qc,r0,0,zs,ym,vm,Nl)}(o,_n,wr,A,f,y,Xr,o.layers[0],o.collisionBoxArray,n.index,n.sourceLayerIndex,o.index,Ze,[Dt,Dt,Dt,Dt],Yr,H,Gt,or,on,Be,n,C,X,ne,I)};if(Wr==="line")for(const wr of Vo(n.geometry,0,0,Ci,Ci)){const _n=om(wr,xt,ar,A.vertical||Fe,f,24,Et,o.overscaling,Ci);for(const fn of _n){const qn=Fe;qn&&um(o,qn.text,Mr,fn)||Or(wr,fn)}}else if(Wr==="line-center"){for(const wr of n.geometry)if(wr.length>1){const _n=am(wr,ar,A.vertical||Fe,f,24,Et);_n&&Or(wr,_n)}}else if(n.type==="Polygon")for(const wr of Pu(n.geometry,0)){const _n=fu(wr,16);Or(wr[0],new Al(_n.x,_n.y,0))}else if(n.type==="LineString")for(const wr of n.geometry)Or(wr,new Al(wr[0].x,wr[0].y,0));else if(n.type==="Point")for(const wr of n.geometry)for(const _n of wr)Or([_n],new Al(_n.x,_n.y,0))}const lc=32640;function zd(o,n,A,f,y,C,I,D,H,X,ne,le,ye,Be,Fe){const et=function(Gt,xt,Dt,or,ar,Yr,on,Wr){const Mr=or.layout.get("text-rotate").evaluate(Yr,{})*Math.PI/180,Lr=[];for(const Xr of xt.positionedLines)for(const Or of Xr.positionedGlyphs){if(!Or.rect)continue;const wr=Or.rect||{};let _n=4,fn=!0,qn=1,$i=0;const cs=(ar||Wr)&&Or.vertical,ea=Or.metrics.advance*Or.scale/2;if(Wr&&xt.verticalizable){const ms=(Or.scale-1)*Os,ma=(Os-Or.metrics.width*Or.scale)/2;$i=Xr.lineOffset/2-(Or.imageName?-ma:ms)}if(Or.imageName){const ms=on[Or.imageName];fn=ms.sdf,qn=ms.pixelRatio,_n=1/qn}const zA=ar?[Or.x+ea,Or.y]:[0,0];let Ha=ar?[0,0]:[Or.x+ea+Dt[0],Or.y+Dt[1]-$i],Hs=[0,0];cs&&(Hs=Ha,Ha=[0,0]);const pa=(Or.metrics.left-_n)*Or.scale-ea+Ha[0],za=(-Or.metrics.top-_n)*Or.scale+Ha[1],po=pa+wr.w*Or.scale/qn,Ko=za+wr.h*Or.scale/qn,zs=new _e(pa,za),Va=new _e(po,za),mo=new _e(pa,Ko),To=new _e(po,Ko);if(cs){const ms=new _e(-ea,ea-Uc),ma=-Math.PI/2,ei=12-ea,yA=new _e(22-ei,-(Or.imageName?ei:0)),Ka=new _e(...Hs);zs._rotateAround(ma,ms)._add(yA)._add(Ka),Va._rotateAround(ma,ms)._add(yA)._add(Ka),mo._rotateAround(ma,ms)._add(yA)._add(Ka),To._rotateAround(ma,ms)._add(yA)._add(Ka)}if(Mr){const ms=Math.sin(Mr),ma=Math.cos(Mr),ei=[ma,-ms,ms,ma];zs._matMult(ei),Va._matMult(ei),mo._matMult(ei),To._matMult(ei)}const Go=new _e(0,0),qo=new _e(0,0);Lr.push({tl:zs,tr:Va,bl:mo,br:To,tex:wr,writingMode:xt.writingMode,glyphOffset:zA,sectionIndex:Or.sectionIndex,isSDF:fn,pixelOffsetTL:Go,pixelOffsetBR:qo,minFontScaleX:0,minFontScaleY:0})}return Lr}(0,A,D,y,C,I,f,o.allowVerticalPlacement),Ze=o.textSizeData;let Et=null;Ze.kind==="source"?(Et=[ol*y.layout.get("text-size").evaluate(I,{})],Et[0]>lc&&Z(`${o.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):Ze.kind==="composite"&&(Et=[ol*Be.compositeTextSizes[0].evaluate(I,{},Fe),ol*Be.compositeTextSizes[1].evaluate(I,{},Fe)],(Et[0]>lc||Et[1]>lc)&&Z(`${o.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),o.addSymbols(o.text,et,Et,D,C,I,X,n,H.lineStartIndex,H.lineLength,ye,Fe);for(const Gt of ne)le[Gt]=o.text.placedSymbolArray.length-1;return 4*et.length}function Vd(o){for(const n in o)return o[n];return null}function um(o,n,A,f){const y=o.compareText;if(n in y){const C=y[n];for(let I=C.length-1;I>=0;I--)if(f.dist(C[I])<A)return!0}else y[n]=[];return y[n].push(f),!1}const hm=Fl.VectorTileFeature.types,fm=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Lh(o,n,A,f,y,C,I,D,H,X,ne,le,ye){const Be=D?Math.min(lc,Math.round(D[0])):0,Fe=D?Math.min(lc,Math.round(D[1])):0;o.emplaceBack(n,A,Math.round(32*f),Math.round(32*y),C,I,(Be<<1)+(H?1:0),Fe,16*X,16*ne,256*le,256*ye)}function bf(o,n,A){o.emplaceBack(n.x,n.y,A),o.emplaceBack(n.x,n.y,A),o.emplaceBack(n.x,n.y,A),o.emplaceBack(n.x,n.y,A)}function dm(o){for(const n of o.sections)if(vl(n.text))return!0;return!1}class xf{constructor(n){this.layoutVertexArray=new xe,this.indexArray=new Ft,this.programConfigurations=n,this.segments=new Ye,this.dynamicLayoutVertexArray=new Ie,this.opacityVertexArray=new Ne,this.placedSymbolArray=new ur}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,A,f,y){this.isEmpty()||(f&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Ll.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,A),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,Cd.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,fm,!0),this.opacityVertexBuffer.itemSize=1),(f||y)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Pr("SymbolBuffers",xf);class Bf{constructor(n,A,f){this.layoutVertexArray=new n,this.layoutAttributes=A,this.indexArray=new f,this.segments=new Ye,this.collisionVertexArray=new It}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,Ed.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Pr("CollisionBuffers",Bf);class pu{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(I=>I.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=So([]),this.placementViewportMatrix=So([]);const A=this.layers[0]._unevaluatedLayout._values;this.textSizeData=yf(this.zoom,A["text-size"]),this.iconSizeData=yf(this.zoom,A["icon-size"]);const f=this.layers[0].layout,y=f.get("symbol-sort-key"),C=f.get("symbol-z-order");this.canOverlap=T(f,"text-overlap","text-allow-overlap")!=="never"||T(f,"icon-overlap","icon-allow-overlap")!=="never"||f.get("text-ignore-placement")||f.get("icon-ignore-placement"),this.sortFeaturesByKey=C!=="viewport-y"&&!y.isConstant(),this.sortFeaturesByY=(C==="viewport-y"||C==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,f.get("symbol-placement")==="point"&&(this.writingModes=f.get("text-writing-mode").map(I=>a.WritingMode[I])),this.stateDependentLayerIds=this.layers.filter(I=>I.isStateDependent()).map(I=>I.id),this.sourceID=n.sourceID}createArrays(){this.text=new xf(new Ki(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new xf(new Ki(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new Ur,this.lineVertexArray=new qr,this.symbolInstances=new Rr}calculateGlyphDependencies(n,A,f,y,C){for(let I=0;I<n.length;I++)if(A[n.charCodeAt(I)]=!0,(f||y)&&C){const D=Au[n.charAt(I)];D&&(A[D.charCodeAt(0)]=!0)}}populate(n,A,f){const y=this.layers[0],C=y.layout,I=C.get("text-font"),D=C.get("text-field"),H=C.get("icon-image"),X=(D.value.kind!=="constant"||D.value.value instanceof $e&&!D.value.value.isEmpty()||D.value.value.toString().length>0)&&(I.value.kind!=="constant"||I.value.value.length>0),ne=H.value.kind!=="constant"||!!H.value.value||Object.keys(H.parameters).length>0,le=C.get("symbol-sort-key");if(this.features=[],!X&&!ne)return;const ye=A.iconDependencies,Be=A.glyphDependencies,Fe=A.availableImages,et=new Ui(this.zoom);for(const{feature:Ze,id:Et,index:Gt,sourceLayerIndex:xt}of n){const Dt=y._featureFilter.needGeometry,or=Fo(Ze,Dt);if(!y._featureFilter.filter(et,or,f))continue;let ar,Yr;if(Dt||(or.geometry=uo(Ze)),X){const Wr=y.getValueAndResolveTokens("text-field",or,f,Fe),Mr=$e.factory(Wr);dm(Mr)&&(this.hasRTLText=!0),(!this.hasRTLText||fA()==="unavailable"||this.hasRTLText&&Fa.isParsed())&&(ar=Mu(Mr,y,or))}if(ne){const Wr=y.getValueAndResolveTokens("icon-image",or,f,Fe);Yr=Wr instanceof ut?Wr:ut.fromString(Wr)}if(!ar&&!Yr)continue;const on=this.sortFeaturesByKey?le.evaluate(or,{},f):void 0;if(this.features.push({id:Et,text:ar,icon:Yr,index:Gt,sourceLayerIndex:xt,geometry:or.geometry,properties:Ze.properties,type:hm[Ze.type],sortKey:on}),Yr&&(ye[Yr.name]=!0),ar){const Wr=I.evaluate(or,{},f).join(","),Mr=C.get("text-rotation-alignment")!=="viewport"&&C.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(a.WritingMode.vertical)>=0;for(const Lr of ar.sections)if(Lr.image)ye[Lr.image.name]=!0;else{const Xr=ja(ar.toString()),Or=Lr.fontStack||Wr,wr=Be[Or]=Be[Or]||{};this.calculateGlyphDependencies(Lr.text,wr,Mr,this.allowVerticalPlacement,Xr)}}}C.get("symbol-placement")==="line"&&(this.features=function(Ze){const Et={},Gt={},xt=[];let Dt=0;function or(Wr){xt.push(Ze[Wr]),Dt++}function ar(Wr,Mr,Lr){const Xr=Gt[Wr];return delete Gt[Wr],Gt[Mr]=Xr,xt[Xr].geometry[0].pop(),xt[Xr].geometry[0]=xt[Xr].geometry[0].concat(Lr[0]),Xr}function Yr(Wr,Mr,Lr){const Xr=Et[Mr];return delete Et[Mr],Et[Wr]=Xr,xt[Xr].geometry[0].shift(),xt[Xr].geometry[0]=Lr[0].concat(xt[Xr].geometry[0]),Xr}function on(Wr,Mr,Lr){const Xr=Lr?Mr[0][Mr[0].length-1]:Mr[0][0];return`${Wr}:${Xr.x}:${Xr.y}`}for(let Wr=0;Wr<Ze.length;Wr++){const Mr=Ze[Wr],Lr=Mr.geometry,Xr=Mr.text?Mr.text.toString():null;if(!Xr){or(Wr);continue}const Or=on(Xr,Lr),wr=on(Xr,Lr,!0);if(Or in Gt&&wr in Et&&Gt[Or]!==Et[wr]){const _n=Yr(Or,wr,Lr),fn=ar(Or,wr,xt[_n].geometry);delete Et[Or],delete Gt[wr],Gt[on(Xr,xt[fn].geometry,!0)]=fn,xt[_n].geometry=null}else Or in Gt?ar(Or,wr,Lr):wr in Et?Yr(Or,wr,Lr):(or(Wr),Et[Or]=Dt-1,Gt[wr]=Dt-1)}return xt.filter(Wr=>Wr.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Ze,Et)=>Ze.sortKey-Et.sortKey)}update(n,A,f){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,A,this.layers,f),this.icon.programConfigurations.updatePaintArrays(n,A,this.layers,f))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,A){const f=this.lineVertexArray.length;if(n.segment!==void 0){let y=n.dist(A[n.segment+1]),C=n.dist(A[n.segment]);const I={};for(let D=n.segment+1;D<A.length;D++)I[D]={x:A[D].x,y:A[D].y,tileUnitDistanceFromAnchor:y},D<A.length-1&&(y+=A[D+1].dist(A[D]));for(let D=n.segment||0;D>=0;D--)I[D]={x:A[D].x,y:A[D].y,tileUnitDistanceFromAnchor:C},D>0&&(C+=A[D-1].dist(A[D]));for(let D=0;D<A.length;D++){const H=I[D];this.lineVertexArray.emplaceBack(H.x,H.y,H.tileUnitDistanceFromAnchor)}}return{lineStartIndex:f,lineLength:this.lineVertexArray.length-f}}addSymbols(n,A,f,y,C,I,D,H,X,ne,le,ye){const Be=n.indexArray,Fe=n.layoutVertexArray,et=n.segments.prepareSegment(4*A.length,Fe,Be,this.canOverlap?I.sortKey:void 0),Ze=this.glyphOffsetArray.length,Et=et.vertexLength,Gt=this.allowVerticalPlacement&&D===a.WritingMode.vertical?Math.PI/2:0,xt=I.text&&I.text.sections;for(let Dt=0;Dt<A.length;Dt++){const{tl:or,tr:ar,bl:Yr,br:on,tex:Wr,pixelOffsetTL:Mr,pixelOffsetBR:Lr,minFontScaleX:Xr,minFontScaleY:Or,glyphOffset:wr,isSDF:_n,sectionIndex:fn}=A[Dt],qn=et.vertexLength,$i=wr[1];Lh(Fe,H.x,H.y,or.x,$i+or.y,Wr.x,Wr.y,f,_n,Mr.x,Mr.y,Xr,Or),Lh(Fe,H.x,H.y,ar.x,$i+ar.y,Wr.x+Wr.w,Wr.y,f,_n,Lr.x,Mr.y,Xr,Or),Lh(Fe,H.x,H.y,Yr.x,$i+Yr.y,Wr.x,Wr.y+Wr.h,f,_n,Mr.x,Lr.y,Xr,Or),Lh(Fe,H.x,H.y,on.x,$i+on.y,Wr.x+Wr.w,Wr.y+Wr.h,f,_n,Lr.x,Lr.y,Xr,Or),bf(n.dynamicLayoutVertexArray,H,Gt),Be.emplaceBack(qn,qn+1,qn+2),Be.emplaceBack(qn+1,qn+2,qn+3),et.vertexLength+=4,et.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(wr[0]),Dt!==A.length-1&&fn===A[Dt+1].sectionIndex||n.programConfigurations.populatePaintArrays(Fe.length,I,I.index,{},ye,xt&&xt[fn])}n.placedSymbolArray.emplaceBack(H.x,H.y,Ze,this.glyphOffsetArray.length-Ze,Et,X,ne,H.segment,f?f[0]:0,f?f[1]:0,y[0],y[1],D,0,!1,0,le)}_addCollisionDebugVertex(n,A,f,y,C,I){return A.emplaceBack(0,0),n.emplaceBack(f.x,f.y,y,C,Math.round(I.x),Math.round(I.y))}addCollisionDebugVertices(n,A,f,y,C,I,D){const H=C.segments.prepareSegment(4,C.layoutVertexArray,C.indexArray),X=H.vertexLength,ne=C.layoutVertexArray,le=C.collisionVertexArray,ye=D.anchorX,Be=D.anchorY;this._addCollisionDebugVertex(ne,le,I,ye,Be,new _e(n,A)),this._addCollisionDebugVertex(ne,le,I,ye,Be,new _e(f,A)),this._addCollisionDebugVertex(ne,le,I,ye,Be,new _e(f,y)),this._addCollisionDebugVertex(ne,le,I,ye,Be,new _e(n,y)),H.vertexLength+=4;const Fe=C.indexArray;Fe.emplaceBack(X,X+1),Fe.emplaceBack(X+1,X+2),Fe.emplaceBack(X+2,X+3),Fe.emplaceBack(X+3,X),H.primitiveLength+=4}addDebugCollisionBoxes(n,A,f,y){for(let C=n;C<A;C++){const I=this.collisionBoxArray.get(C);this.addCollisionDebugVertices(I.x1,I.y1,I.x2,I.y2,y?this.textCollisionBox:this.iconCollisionBox,I.anchorPoint,f)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Bf(ft,cf.members,pt),this.iconCollisionBox=new Bf(ft,cf.members,pt);for(let n=0;n<this.symbolInstances.length;n++){const A=this.symbolInstances.get(n);this.addDebugCollisionBoxes(A.textBoxStartIndex,A.textBoxEndIndex,A,!0),this.addDebugCollisionBoxes(A.verticalTextBoxStartIndex,A.verticalTextBoxEndIndex,A,!0),this.addDebugCollisionBoxes(A.iconBoxStartIndex,A.iconBoxEndIndex,A,!1),this.addDebugCollisionBoxes(A.verticalIconBoxStartIndex,A.verticalIconBoxEndIndex,A,!1)}}_deserializeCollisionBoxesForSymbol(n,A,f,y,C,I,D,H,X){const ne={};for(let le=A;le<f;le++){const ye=n.get(le);ne.textBox={x1:ye.x1,y1:ye.y1,x2:ye.x2,y2:ye.y2,anchorPointX:ye.anchorPointX,anchorPointY:ye.anchorPointY},ne.textFeatureIndex=ye.featureIndex;break}for(let le=y;le<C;le++){const ye=n.get(le);ne.verticalTextBox={x1:ye.x1,y1:ye.y1,x2:ye.x2,y2:ye.y2,anchorPointX:ye.anchorPointX,anchorPointY:ye.anchorPointY},ne.verticalTextFeatureIndex=ye.featureIndex;break}for(let le=I;le<D;le++){const ye=n.get(le);ne.iconBox={x1:ye.x1,y1:ye.y1,x2:ye.x2,y2:ye.y2,anchorPointX:ye.anchorPointX,anchorPointY:ye.anchorPointY},ne.iconFeatureIndex=ye.featureIndex;break}for(let le=H;le<X;le++){const ye=n.get(le);ne.verticalIconBox={x1:ye.x1,y1:ye.y1,x2:ye.x2,y2:ye.y2,anchorPointX:ye.anchorPointX,anchorPointY:ye.anchorPointY},ne.verticalIconFeatureIndex=ye.featureIndex;break}return ne}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let A=0;A<this.symbolInstances.length;A++){const f=this.symbolInstances.get(A);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,f.textBoxStartIndex,f.textBoxEndIndex,f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f.iconBoxStartIndex,f.iconBoxEndIndex,f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,A){const f=n.placedSymbolArray.get(A),y=f.vertexStartIndex+4*f.numGlyphs;for(let C=f.vertexStartIndex;C<y;C+=4)n.indexArray.emplaceBack(C,C+1,C+2),n.indexArray.emplaceBack(C+1,C+2,C+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const A=Math.sin(n),f=Math.cos(n),y=[],C=[],I=[];for(let D=0;D<this.symbolInstances.length;++D){I.push(D);const H=this.symbolInstances.get(D);y.push(0|Math.round(A*H.anchorX+f*H.anchorY)),C.push(H.featureIndex)}return I.sort((D,H)=>y[D]-y[H]||C[H]-C[D]),I}addToSortKeyRanges(n,A){const f=this.sortKeyRanges[this.sortKeyRanges.length-1];f&&f.sortKey===A?f.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:A,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const A of this.symbolInstanceIndexes){const f=this.symbolInstances.get(A);this.featureSortOrder.push(f.featureIndex),[f.rightJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.leftJustifiedTextSymbolIndex].forEach((y,C,I)=>{y>=0&&I.indexOf(y)===C&&this.addIndicesForPlacedSymbol(this.text,y)}),f.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,f.verticalPlacedTextSymbolIndex),f.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.placedIconSymbolIndex),f.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Pr("SymbolBucket",pu,{omit:["layers","collisionBoxArray","features","compareText"]}),pu.MAX_GLYPHS=65535,pu.addDynamicAttributes=bf;const pm=new os({"symbol-placement":new sn(vt.layout_symbol["symbol-placement"]),"symbol-spacing":new sn(vt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new sn(vt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new vn(vt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new sn(vt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new sn(vt.layout_symbol["icon-allow-overlap"]),"icon-overlap":new sn(vt.layout_symbol["icon-overlap"]),"icon-ignore-placement":new sn(vt.layout_symbol["icon-ignore-placement"]),"icon-optional":new sn(vt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new sn(vt.layout_symbol["icon-rotation-alignment"]),"icon-size":new vn(vt.layout_symbol["icon-size"]),"icon-text-fit":new sn(vt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new sn(vt.layout_symbol["icon-text-fit-padding"]),"icon-image":new vn(vt.layout_symbol["icon-image"]),"icon-rotate":new vn(vt.layout_symbol["icon-rotate"]),"icon-padding":new vn(vt.layout_symbol["icon-padding"]),"icon-keep-upright":new sn(vt.layout_symbol["icon-keep-upright"]),"icon-offset":new vn(vt.layout_symbol["icon-offset"]),"icon-anchor":new vn(vt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new sn(vt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new sn(vt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new sn(vt.layout_symbol["text-rotation-alignment"]),"text-field":new vn(vt.layout_symbol["text-field"]),"text-font":new vn(vt.layout_symbol["text-font"]),"text-size":new vn(vt.layout_symbol["text-size"]),"text-max-width":new vn(vt.layout_symbol["text-max-width"]),"text-line-height":new sn(vt.layout_symbol["text-line-height"]),"text-letter-spacing":new vn(vt.layout_symbol["text-letter-spacing"]),"text-justify":new vn(vt.layout_symbol["text-justify"]),"text-radial-offset":new vn(vt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new sn(vt.layout_symbol["text-variable-anchor"]),"text-anchor":new vn(vt.layout_symbol["text-anchor"]),"text-max-angle":new sn(vt.layout_symbol["text-max-angle"]),"text-writing-mode":new sn(vt.layout_symbol["text-writing-mode"]),"text-rotate":new vn(vt.layout_symbol["text-rotate"]),"text-padding":new sn(vt.layout_symbol["text-padding"]),"text-keep-upright":new sn(vt.layout_symbol["text-keep-upright"]),"text-transform":new vn(vt.layout_symbol["text-transform"]),"text-offset":new vn(vt.layout_symbol["text-offset"]),"text-allow-overlap":new sn(vt.layout_symbol["text-allow-overlap"]),"text-overlap":new sn(vt.layout_symbol["text-overlap"]),"text-ignore-placement":new sn(vt.layout_symbol["text-ignore-placement"]),"text-optional":new sn(vt.layout_symbol["text-optional"])});var F={paint:new os({"icon-opacity":new vn(vt.paint_symbol["icon-opacity"]),"icon-color":new vn(vt.paint_symbol["icon-color"]),"icon-halo-color":new vn(vt.paint_symbol["icon-halo-color"]),"icon-halo-width":new vn(vt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new vn(vt.paint_symbol["icon-halo-blur"]),"icon-translate":new sn(vt.paint_symbol["icon-translate"]),"icon-translate-anchor":new sn(vt.paint_symbol["icon-translate-anchor"]),"text-opacity":new vn(vt.paint_symbol["text-opacity"]),"text-color":new vn(vt.paint_symbol["text-color"],{runtimeType:wn,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new vn(vt.paint_symbol["text-halo-color"]),"text-halo-width":new vn(vt.paint_symbol["text-halo-width"]),"text-halo-blur":new vn(vt.paint_symbol["text-halo-blur"]),"text-translate":new sn(vt.paint_symbol["text-translate"]),"text-translate-anchor":new sn(vt.paint_symbol["text-translate-anchor"])}),layout:pm};class B{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:un,this.defaultValue=n}evaluate(n){if(n.formattedSection){const A=this.defaultValue.property.overrides;if(A&&A.hasOverride(n.formattedSection))return A.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Pr("FormatSectionOverride",B,{omit:["defaultValue"]});class U extends Co{constructor(n){super(n,F)}recalculate(n,A){if(super.recalculate(n,A),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const f=this.layout.get("text-writing-mode");if(f){const y=[];for(const C of f)y.indexOf(C)<0&&y.push(C);this.layout._values["text-writing-mode"]=y}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,A,f,y){const C=this.layout.get(n).evaluate(A,{},f,y),I=this._unevaluatedLayout._values[n];return I.isDataDriven()||pi(I.value)||!C?C:function(D,H){return H.replace(/{([^{}]+)}/g,(X,ne)=>ne in D?String(D[ne]):"")}(A.properties,C)}createBucket(n){return new pu(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const n of F.paint.overridableProperties){if(!U.hasPaintOverride(this.layout,n))continue;const A=this.paint.get(n),f=new B(A),y=new Wn(f,A.property.specification);let C=null;C=A.value.kind==="constant"||A.value.kind==="source"?new Tn("source",y):new Es("composite",y,A.value.zoomStops),this.paint._values[n]=new Bo(A.property,C,A.parameters)}}_handleOverridablePaintPropertyUpdate(n,A,f){return!(!this.layout||A.isDataDriven()||f.isDataDriven())&&U.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,A){const f=n.get("text-field"),y=F.paint.properties[A];let C=!1;const I=D=>{for(const H of D)if(y.overrides&&y.overrides.hasOverride(H))return void(C=!0)};if(f.value.kind==="constant"&&f.value.value instanceof $e)I(f.value.value.sections);else if(f.value.kind==="source"){const D=X=>{C||(X instanceof Hr&&zt(X.value)===cr?I(X.value.sections):X instanceof TA?I(X.sections):X.eachChild(D))},H=f.value;H._styleExpression&&D(H._styleExpression.expression)}return C}}function T(o,n,A){let f="never";const y=o.get(n);return y?f=y:o.get(A)&&(f="always"),f}var K={paint:new os({"background-color":new sn(vt.paint_background["background-color"]),"background-pattern":new wl(vt.paint_background["background-pattern"]),"background-opacity":new sn(vt.paint_background["background-opacity"])})},$={paint:new os({"raster-opacity":new sn(vt.paint_raster["raster-opacity"]),"raster-hue-rotate":new sn(vt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new sn(vt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new sn(vt.paint_raster["raster-brightness-max"]),"raster-saturation":new sn(vt.paint_raster["raster-saturation"]),"raster-contrast":new sn(vt.paint_raster["raster-contrast"]),"raster-resampling":new sn(vt.paint_raster["raster-resampling"]),"raster-fade-duration":new sn(vt.paint_raster["raster-fade-duration"])})};class ve extends Co{constructor(n){super(n,{}),this.onAdd=A=>{this.implementation.onAdd&&this.implementation.onAdd(A,A.painter.context.gl)},this.onRemove=A=>{this.implementation.onRemove&&this.implementation.onRemove(A,A.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}const je={circle:class extends Co{constructor(o){super(o,$l)}createBucket(o){return new Yi(o)}queryRadius(o){const n=o;return Yl("circle-radius",this,n)+Yl("circle-stroke-width",this,n)+NA(this.paint.get("circle-translate"))}queryIntersectsFeature(o,n,A,f,y,C,I,D){const H=il(o,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),C.angle,I),X=this.paint.get("circle-radius").evaluate(n,A)+this.paint.get("circle-stroke-width").evaluate(n,A),ne=this.paint.get("circle-pitch-alignment")==="map",le=ne?H:function(Be,Fe){return Be.map(et=>Ec(et,Fe))}(H,D),ye=ne?X*I:X;for(const Be of f)for(const Fe of Be){const et=ne?Fe:Ec(Fe,D);let Ze=ye;const Et=Cc([],[Fe.x,Fe.y,0,1],D);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Ze*=Et[3]/C.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Ze*=C.cameraToCenterDistance/Et[3]),lh(le,et,Ze))return!0}return!1}},heatmap:class extends Co{constructor(o){super(o,El),this._updateColorRamp()}createBucket(o){return new Ia(o)}_handleSpecialPaintPropertyUpdate(o){o==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=jA({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}},hillshade:class extends Co{constructor(o){super(o,hh)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}},fill:class extends Co{constructor(o){super(o,pd)}recalculate(o,n){super.recalculate(o,n);const A=this.paint._values["fill-outline-color"];A.value.kind==="constant"&&A.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(o){return new sf(o)}queryRadius(){return NA(this.paint.get("fill-translate"))}queryIntersectsFeature(o,n,A,f,y,C,I){return Fu(il(o,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),C.angle,I),f)}isTileClipped(){return!0}},"fill-extrusion":class extends Co{constructor(o){super(o,_d)}createBucket(o){return new lf(o)}queryRadius(){return NA(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(o,n,A,f,y,C,I,D){const H=il(o,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),C.angle,I),X=this.paint.get("fill-extrusion-height").evaluate(n,A),ne=this.paint.get("fill-extrusion-base").evaluate(n,A),le=function(Be,Fe,et,Ze){const Et=[];for(const Gt of Be){const xt=[Gt.x,Gt.y,0,1];Cc(xt,xt,Fe),Et.push(new _e(xt[0]/xt[3],xt[1]/xt[3]))}return Et}(H,D),ye=function(Be,Fe,et,Ze){const Et=[],Gt=[],xt=Ze[8]*Fe,Dt=Ze[9]*Fe,or=Ze[10]*Fe,ar=Ze[11]*Fe,Yr=Ze[8]*et,on=Ze[9]*et,Wr=Ze[10]*et,Mr=Ze[11]*et;for(const Lr of Be){const Xr=[],Or=[];for(const wr of Lr){const _n=wr.x,fn=wr.y,qn=Ze[0]*_n+Ze[4]*fn+Ze[12],$i=Ze[1]*_n+Ze[5]*fn+Ze[13],cs=Ze[2]*_n+Ze[6]*fn+Ze[14],ea=Ze[3]*_n+Ze[7]*fn+Ze[15],zA=cs+or,Ha=ea+ar,Hs=qn+Yr,pa=$i+on,za=cs+Wr,po=ea+Mr,Ko=new _e((qn+xt)/Ha,($i+Dt)/Ha);Ko.z=zA/Ha,Xr.push(Ko);const zs=new _e(Hs/po,pa/po);zs.z=za/po,Or.push(zs)}Et.push(Xr),Gt.push(Or)}return[Et,Gt]}(f,ne,X,D);return function(Be,Fe,et){let Ze=1/0;Fu(et,Fe)&&(Ze=wd(et,Fe[0]));for(let Et=0;Et<Fe.length;Et++){const Gt=Fe[Et],xt=Be[Et];for(let Dt=0;Dt<Gt.length-1;Dt++){const or=Gt[Dt],ar=[or,Gt[Dt+1],xt[Dt+1],xt[Dt],or];qc(et,ar)&&(Ze=Math.min(Ze,wd(et,ar)))}}return Ze!==1/0&&Ze}(ye[0],ye[1],le)}},line:class extends Co{constructor(o){super(o,Tl),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(o){o==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof qs,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(o,n){super.recalculate(o,n),this.paint._values["line-floorwidth"]=Ul.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,o)}createBucket(o){return new Il(o)}queryRadius(o){const n=o,A=ou(Yl("line-width",this,n),Yl("line-gap-width",this,n)),f=Yl("line-offset",this,n);return A/2+Math.abs(f)+NA(this.paint.get("line-translate"))}queryIntersectsFeature(o,n,A,f,y,C,I){const D=il(o,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),C.angle,I),H=I/2*ou(this.paint.get("line-width").evaluate(n,A),this.paint.get("line-gap-width").evaluate(n,A)),X=this.paint.get("line-offset").evaluate(n,A);return X&&(f=function(ne,le){const ye=[];for(let Be=0;Be<ne.length;Be++){const Fe=ne[Be],et=[];for(let Ze=0;Ze<Fe.length;Ze++){const Et=Fe[Ze-1],Gt=Fe[Ze],xt=Fe[Ze+1],Dt=Ze===0?new _e(0,0):Gt.sub(Et)._unit()._perp(),or=Ze===Fe.length-1?new _e(0,0):xt.sub(Gt)._unit()._perp(),ar=Dt._add(or)._unit(),Yr=ar.x*or.x+ar.y*or.y;Yr!==0&&ar._mult(1/Yr),et.push(ar._mult(le)._add(Gt))}ye.push(et)}return ye}(f,X*I)),function(ne,le,ye){for(let Be=0;Be<le.length;Be++){const Fe=le[Be];if(ne.length>=3){for(let et=0;et<Fe.length;et++)if(xl(ne,Fe[et]))return!0}if(Wc(ne,Fe,ye))return!0}return!1}(D,f,H)}isTileClipped(){return!0}},symbol:U,background:class extends Co{constructor(o){super(o,K)}},raster:class extends Co{constructor(o){super(o,$)}}};class Pe{constructor(n){this._callback=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const yt=63710088e-1;class mt{constructor(n,A){if(isNaN(n)||isNaN(A))throw new Error(`Invalid LngLat object: (${n}, ${A})`);if(this.lng=+n,this.lat=+A,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new mt(x(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const A=Math.PI/180,f=this.lat*A,y=n.lat*A,C=Math.sin(f)*Math.sin(y)+Math.cos(f)*Math.cos(y)*Math.cos((n.lng-this.lng)*A);return yt*Math.acos(Math.min(C,1))}toBounds(n=0){const A=360*n/40075017,f=A/Math.cos(Math.PI/180*this.lat);return new Ut(new mt(this.lng-f,this.lat-A),new mt(this.lng+f,this.lat+A))}static convert(n){if(n instanceof mt)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new mt(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new mt(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class Ut{constructor(n,A){n&&(A?this.setSouthWest(n).setNorthEast(A):n.length===4?this.setSouthWest([n[0],n[1]]).setNorthEast([n[2],n[3]]):this.setSouthWest(n[0]).setNorthEast(n[1]))}setNorthEast(n){return this._ne=n instanceof mt?new mt(n.lng,n.lat):mt.convert(n),this}setSouthWest(n){return this._sw=n instanceof mt?new mt(n.lng,n.lat):mt.convert(n),this}extend(n){const A=this._sw,f=this._ne;let y,C;if(n instanceof mt)y=n,C=n;else{if(!(n instanceof Ut))return Array.isArray(n)?n.length===4||n.every(Array.isArray)?this.extend(Ut.convert(n)):this.extend(mt.convert(n)):this;if(y=n._sw,C=n._ne,!y||!C)return this}return A||f?(A.lng=Math.min(y.lng,A.lng),A.lat=Math.min(y.lat,A.lat),f.lng=Math.max(C.lng,f.lng),f.lat=Math.max(C.lat,f.lat)):(this._sw=new mt(y.lng,y.lat),this._ne=new mt(C.lng,C.lat)),this}getCenter(){return new mt((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new mt(this.getWest(),this.getNorth())}getSouthEast(){return new mt(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(n){const{lng:A,lat:f}=mt.convert(n);let y=this._sw.lng<=A&&A<=this._ne.lng;return this._sw.lng>this._ne.lng&&(y=this._sw.lng>=A&&A>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&y}static convert(n){return n instanceof Ut?n:n&&new Ut(n)}}const tr=2*Math.PI*yt;function an(o){return tr*Math.cos(o*Math.PI/180)}function Qr(o){return(180+o)/360}function Jr(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function Xn(o,n){return o/an(n)}function gn(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}class cn{constructor(n,A,f=0){this.x=+n,this.y=+A,this.z=+f}static fromLngLat(n,A=0){const f=mt.convert(n);return new cn(Qr(f.lng),Jr(f.lat),Xn(A,f.lat))}toLngLat(){return new mt(360*this.x-180,gn(this.y))}toAltitude(){return this.z*an(gn(this.y))}meterInMercatorCoordinateUnits(){return 1/tr*(n=gn(this.y),1/Math.cos(n*Math.PI/180));var n}}function Fi(o,n,A){var f=2*Math.PI*6378137/256/Math.pow(2,A);return[o*f-2*Math.PI*6378137/2,n*f-2*Math.PI*6378137/2]}class Zn{constructor(n,A,f){if(n<0||n>25||f<0||f>=Math.pow(2,n)||A<0||A>=Math.pow(2,n))throw new Error(`x=${A}, y=${f}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=A,this.y=f,this.key=ai(0,n,n,A,f)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,A,f){const y=(I=this.y,D=this.z,H=Fi(256*(C=this.x),256*(I=Math.pow(2,D)-I-1),D),X=Fi(256*(C+1),256*(I+1),D),H[0]+","+H[1]+","+X[0]+","+X[1]);var C,I,D,H,X;const ne=function(le,ye,Be){let Fe,et="";for(let Ze=le;Ze>0;Ze--)Fe=1<<Ze-1,et+=(ye&Fe?1:0)+(Be&Fe?2:0);return et}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(f==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,A>1?"@2x":"").replace(/{quadkey}/g,ne).replace(/{bbox-epsg-3857}/g,y)}isChildOf(n){const A=this.z-n.z;return A>0&&n.x===this.x>>A&&n.y===this.y>>A}getTilePoint(n){const A=Math.pow(2,this.z);return new _e((n.x*A-this.x)*Ci,(n.y*A-this.y)*Ci)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Rn{constructor(n,A){this.wrap=n,this.canonical=A,this.key=ai(n,A.z,A.z,A.x,A.y)}}class zr{constructor(n,A,f,y,C){if(n<f)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${f}`);this.overscaledZ=n,this.wrap=A,this.canonical=new Zn(f,+y,+C),this.key=ai(A,n,f,y,C)}clone(){return new zr(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const A=this.canonical.z-n;return n>this.canonical.z?new zr(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new zr(n,this.wrap,n,this.canonical.x>>A,this.canonical.y>>A)}calculateScaledKey(n,A){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const f=this.canonical.z-n;return n>this.canonical.z?ai(this.wrap*+A,n,this.canonical.z,this.canonical.x,this.canonical.y):ai(this.wrap*+A,n,n,this.canonical.x>>f,this.canonical.y>>f)}isChildOf(n){if(n.wrap!==this.wrap)return!1;const A=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>A&&n.canonical.y===this.canonical.y>>A}children(n){if(this.overscaledZ>=n)return[new zr(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const A=this.canonical.z+1,f=2*this.canonical.x,y=2*this.canonical.y;return[new zr(A,this.wrap,A,f,y),new zr(A,this.wrap,A,f+1,y),new zr(A,this.wrap,A,f,y+1),new zr(A,this.wrap,A,f+1,y+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new zr(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new zr(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Rn(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new cn(n.x-this.wrap,n.y))}}function ai(o,n,A,f,y){(o*=2)<0&&(o=-1*o-1);const C=1<<A;return(C*C*o+C*y+f).toString(36)+A.toString(36)+n.toString(36)}Pr("CanonicalTileID",Zn),Pr("OverscaledTileID",zr,{omit:["posMatrix"]});class yi{constructor(n,A,f){if(this.uid=n,A.height!==A.width)throw new RangeError("DEM tiles must be square");if(f&&f!=="mapbox"&&f!=="terrarium")return void Z(`"${f}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=A.height;const y=this.dim=A.height-2;this.data=new Uint32Array(A.data.buffer),this.encoding=f||"mapbox";for(let C=0;C<y;C++)this.data[this._idx(-1,C)]=this.data[this._idx(0,C)],this.data[this._idx(y,C)]=this.data[this._idx(y-1,C)],this.data[this._idx(C,-1)]=this.data[this._idx(C,0)],this.data[this._idx(C,y)]=this.data[this._idx(C,y-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(y,-1)]=this.data[this._idx(y-1,0)],this.data[this._idx(-1,y)]=this.data[this._idx(0,y-1)],this.data[this._idx(y,y)]=this.data[this._idx(y-1,y-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let C=0;C<y;C++)for(let I=0;I<y;I++){const D=this.get(C,I);D>this.max&&(this.max=D),D<this.min&&(this.min=D)}}get(n,A){const f=new Uint8Array(this.data.buffer),y=4*this._idx(n,A);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(f[y],f[y+1],f[y+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(n,A){if(n<-1||n>=this.dim+1||A<-1||A>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(A+1)*this.stride+(n+1)}_unpackMapbox(n,A,f){return(256*n*256+256*A+f)/10-1e4}_unpackTerrarium(n,A,f){return 256*n+A+f/256-32768}getPixels(){return new Ta({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,A,f){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let y=A*this.dim,C=A*this.dim+this.dim,I=f*this.dim,D=f*this.dim+this.dim;switch(A){case-1:y=C-1;break;case 1:C=y+1}switch(f){case-1:I=D-1;break;case 1:D=I+1}const H=-A*this.dim,X=-f*this.dim;for(let ne=I;ne<D;ne++)for(let le=y;le<C;le++)this.data[this._idx(le,ne)]=n.data[this._idx(le+H,ne+X)]}}Pr("DEMData",yi);class On{constructor(n){this._stringToNumber={},this._numberToString=[];for(let A=0;A<n.length;A++){const f=n[A];this._stringToNumber[f]=A,this._numberToString[A]=f}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class Ps{constructor(n,A,f,y,C){this.type="Feature",this._vectorTileFeature=n,n._z=A,n._x=f,n._y=y,this.properties=n.properties,this.id=C}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={geometry:this.geometry};for(const A in this)A!=="_geometry"&&A!=="_vectorTileFeature"&&(n[A]=this[A]);return n}}class fo{constructor(n,A){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new Ho(Ci,16,0),this.grid3D=new Ho(Ci,16,0),this.featureIndexArray=new jn,this.promoteId=A}insert(n,A,f,y,C,I){const D=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(f,y,C);const H=I?this.grid3D:this.grid;for(let X=0;X<A.length;X++){const ne=A[X],le=[1/0,1/0,-1/0,-1/0];for(let ye=0;ye<ne.length;ye++){const Be=ne[ye];le[0]=Math.min(le[0],Be.x),le[1]=Math.min(le[1],Be.y),le[2]=Math.max(le[2],Be.x),le[3]=Math.max(le[3],Be.y)}le[0]<Ci&&le[1]<Ci&&le[2]>=0&&le[3]>=0&&H.insert(D,le[0],le[1],le[2],le[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Fl.VectorTile(new Ic(this.rawTileData)).layers,this.sourceLayerCoder=new On(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,A,f,y){this.loadVTLayers();const C=n.params||{},I=Ci/n.tileSize/n.scale,D=is(C.filter),H=n.queryGeometry,X=n.queryPadding*I,ne=Ni(H),le=this.grid.query(ne.minX-X,ne.minY-X,ne.maxX+X,ne.maxY+X),ye=Ni(n.cameraQueryGeometry),Be=this.grid3D.query(ye.minX-X,ye.minY-X,ye.maxX+X,ye.maxY+X,(Ze,Et,Gt,xt)=>function(Dt,or,ar,Yr,on){for(const Mr of Dt)if(or<=Mr.x&&ar<=Mr.y&&Yr>=Mr.x&&on>=Mr.y)return!0;const Wr=[new _e(or,ar),new _e(or,on),new _e(Yr,on),new _e(Yr,ar)];if(Dt.length>2){for(const Mr of Wr)if(xl(Dt,Mr))return!0}for(let Mr=0;Mr<Dt.length-1;Mr++)if(Bl(Dt[Mr],Dt[Mr+1],Wr))return!0;return!1}(n.cameraQueryGeometry,Ze-X,Et-X,Gt+X,xt+X));for(const Ze of Be)le.push(Ze);le.sort(Ua);const Fe={};let et;for(let Ze=0;Ze<le.length;Ze++){const Et=le[Ze];if(Et===et)continue;et=Et;const Gt=this.featureIndexArray.get(Et);let xt=null;this.loadMatchingFeature(Fe,Gt.bucketIndex,Gt.sourceLayerIndex,Gt.featureIndex,D,C.layers,C.availableImages,A,f,y,(Dt,or,ar)=>(xt||(xt=uo(Dt)),or.queryIntersectsFeature(H,Dt,ar,xt,this.z,n.transform,I,n.pixelPosMatrix)))}return Fe}loadMatchingFeature(n,A,f,y,C,I,D,H,X,ne,le){const ye=this.bucketLayerIDs[A];if(I&&!function(Ze,Et){for(let Gt=0;Gt<Ze.length;Gt++)if(Et.indexOf(Ze[Gt])>=0)return!0;return!1}(I,ye))return;const Be=this.sourceLayerCoder.decode(f),Fe=this.vtLayers[Be].feature(y);if(C.needGeometry){const Ze=Fo(Fe,!0);if(!C.filter(new Ui(this.tileID.overscaledZ),Ze,this.tileID.canonical))return}else if(!C.filter(new Ui(this.tileID.overscaledZ),Fe))return;const et=this.getId(Fe,Be);for(let Ze=0;Ze<ye.length;Ze++){const Et=ye[Ze];if(I&&I.indexOf(Et)<0)continue;const Gt=H[Et];if(!Gt)continue;let xt={};et&&ne&&(xt=ne.getState(Gt.sourceLayer||"_geojsonTileLayer",et));const Dt=Q({},X[Et]);Dt.paint=Io(Dt.paint,Gt.paint,Fe,xt,D),Dt.layout=Io(Dt.layout,Gt.layout,Fe,xt,D);const or=!le||le(Fe,Gt,xt);if(!or)continue;const ar=new Ps(Fe,this.z,this.x,this.y,et);ar.layer=Dt;let Yr=n[Et];Yr===void 0&&(Yr=n[Et]=[]),Yr.push({featureIndex:y,feature:ar,intersectionZ:or})}}lookupSymbolFeatures(n,A,f,y,C,I,D,H){const X={};this.loadVTLayers();const ne=is(C);for(const le of n)this.loadMatchingFeature(X,f,y,le,ne,I,D,H,A);return X}hasLayer(n){for(const A of this.bucketLayerIDs)for(const f of A)if(n===f)return!0;return!1}getId(n,A){let f=n.id;return this.promoteId&&(f=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[A]],typeof f=="boolean"&&(f=Number(f))),f}}function Io(o,n,A,f,y){return P(o,(C,I)=>{const D=n instanceof dA?n.get(I):null;return D&&D.evaluate?D.evaluate(A,f,y):D})}function Ni(o){let n=1/0,A=1/0,f=-1/0,y=-1/0;for(const C of o)n=Math.min(n,C.x),A=Math.min(A,C.y),f=Math.max(f,C.x),y=Math.max(y,C.y);return{minX:n,minY:A,maxX:f,maxY:y}}function Ua(o,n){return n-o}var ll;Pr("FeatureIndex",fo,{omit:["rawTileData","sourceLayerCoder"]}),a.PerformanceMarkers=void 0,(ll=a.PerformanceMarkers||(a.PerformanceMarkers={})).create="create",ll.load="load",ll.fullLoad="fullLoad";let La=null,da=[];const Pl=1e3/30,cl={mark(o){performance.mark(o)},frame(o){const n=o;La!=null&&da.push(n-La),La=n},clearMetrics(){La=null,da=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const o in a.PerformanceMarkers)performance.clearMarks(a.PerformanceMarkers[o])},getPerformanceMetrics(){performance.measure("loadTime",a.PerformanceMarkers.create,a.PerformanceMarkers.load),performance.measure("fullLoadTime",a.PerformanceMarkers.create,a.PerformanceMarkers.fullLoad);const o=performance.getEntriesByName("loadTime")[0].duration,n=performance.getEntriesByName("fullLoadTime")[0].duration,A=da.length,f=1/(da.reduce((C,I)=>C+I,0)/A/1e3),y=da.filter(C=>C>Pl).reduce((C,I)=>C+(I-Pl)/Pl,0);return{loadTime:o,fullLoadTime:n,fps:f,percentDroppedFrames:y/(A+y)*100}}};a.AJAXError=Nt,a.ARRAY_TYPE=$s,a.Actor=class{constructor(o,n,A){this.target=o,this.parent=n,this.mapId=A,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},R(["receive","process"],this),this.invoker=new Pe(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=he()?o:window}send(o,n,A,f,y=!1){const C=Math.round(1e18*Math.random()).toString(36).substring(0,10);A&&(this.callbacks[C]=A);const I=be(this.globalScope)?void 0:[];return this.target.postMessage({id:C,type:o,hasCallback:!!A,targetMapId:f,mustQueue:y,sourceMapId:this.mapId,data:Ai(n,I)},I),{cancel:()=>{A&&delete this.callbacks[C],this.target.postMessage({id:C,type:"<cancel>",targetMapId:f,sourceMapId:this.mapId})}}}receive(o){const n=o.data,A=n.id;if(A&&(!n.targetMapId||this.mapId===n.targetMapId))if(n.type==="<cancel>"){delete this.tasks[A];const f=this.cancelCallbacks[A];delete this.cancelCallbacks[A],f&&f()}else he()||n.mustQueue?(this.tasks[A]=n,this.taskQueue.push(A),this.invoker.trigger()):this.processTask(A,n)}process(){if(!this.taskQueue.length)return;const o=this.taskQueue.shift(),n=this.tasks[o];delete this.tasks[o],this.taskQueue.length&&this.invoker.trigger(),n&&this.processTask(o,n)}processTask(o,n){if(n.type==="<response>"){const A=this.callbacks[o];delete this.callbacks[o],A&&(n.error?A(Bi(n.error)):A(null,Bi(n.data)))}else{let A=!1;const f=be(this.globalScope)?void 0:[],y=n.hasCallback?(D,H)=>{A=!0,delete this.cancelCallbacks[o],this.target.postMessage({id:o,type:"<response>",sourceMapId:this.mapId,error:D?Ai(D):null,data:Ai(H,f)},f)}:D=>{A=!0};let C=null;const I=Bi(n.data);if(this.parent[n.type])C=this.parent[n.type](n.sourceMapId,I,y);else if(this.parent.getWorkerSource){const D=n.type.split(".");C=this.parent.getWorkerSource(n.sourceMapId,D[0],I.source)[D[1]](I,y)}else y(new Error(`Could not find function ${n.type}`));!A&&C&&C.cancel&&(this.cancelCallbacks[o]=C.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},a.AlphaImage=nc,a.CanonicalTileID=Zn,a.CollisionBoxArray=Xt,a.CollisionCircleLayoutArray=class extends se{},a.Color=Ue,a.DEMData=yi,a.DataConstantProperty=sn,a.DictionaryCoder=On,a.EXTENT=Ci,a.ErrorEvent=Zr,a.EvaluationParameters=Ui,a.Event=xr,a.Evented=pn,a.FeatureIndex=fo,a.FillBucket=sf,a.FillExtrusionBucket=lf,a.GeoJSONFeature=Ps,a.ImageAtlas=Tc,a.ImagePosition=rn,a.LineBucket=Il,a.LineStripIndexArray=class extends We{},a.LngLat=mt,a.LngLatBounds=Ut,a.MercatorCoordinate=cn,a.ONE_EM=Os,a.OverscaledTileID=zr,a.PerformanceUtils=cl,a.PosArray=b,a.Properties=os,a.QuadTriangleArray=class extends we{},a.RGBAImage=Ta,a.RasterBoundsArray=class extends g{},a.RequestPerformance=class{constructor(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let o=performance.getEntriesByName(this._marks.measure);return o.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),o=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),o}},a.ResourceType=ht,a.SegmentVector=Ye,a.SymbolBucket=pu,a.Transitionable=DA,a.TriangleIndexArray=Ft,a.Uniform1f=li,a.Uniform1i=class extends zn{constructor(o,n){super(o,n),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},a.Uniform2f=class extends zn{constructor(o,n){super(o,n),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},a.Uniform3f=class extends zn{constructor(o,n){super(o,n),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},a.Uniform4f=ci,a.UniformColor=Un,a.UniformMatrix4f=class extends zn{constructor(o,n){super(o,n),this.current=Is}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let n=1;n<16;n++)if(o[n]!==this.current[n]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},a.UnwrappedTileID=Rn,a.ValidationError=at,a.ZoomHistory=Zi,a.add=function(o,n,A){return o[0]=n[0]+A[0],o[1]=n[1]+A[1],o[2]=n[2]+A[2],o},a.addDynamicAttributes=bf,a.asyncAll=function(o,n,A){if(!o.length)return A(null,[]);let f=o.length;const y=new Array(o.length);let C=null;o.forEach((I,D)=>{n(I,(H,X)=>{H&&(C=H),y[D]=X,--f==0&&A(C,y)})})},a.bezier=p,a.bindAll=R,a.cacheEntryPossiblyAdded=function(o){Ke++,Ke>Se&&(o.getActor().send("enforceCacheSizeLimit",ie),Ke=0)},a.clamp=w,a.clearTileCache=function(o){const n=caches.delete(Je);o&&n.catch(o).then(()=>o())},a.clipLine=Vo,a.clone=function(o){var n=new $s(16);return n[0]=o[0],n[1]=o[1],n[2]=o[2],n[3]=o[3],n[4]=o[4],n[5]=o[5],n[6]=o[6],n[7]=o[7],n[8]=o[8],n[9]=o[9],n[10]=o[10],n[11]=o[11],n[12]=o[12],n[13]=o[13],n[14]=o[14],n[15]=o[15],n},a.clone$1=G,a.clone$2=function(o){var n=new $s(3);return n[0]=o[0],n[1]=o[1],n[2]=o[2],n},a.collisionCircleLayout=uf,a.config=Le,a.copy=function(o,n){return o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[4]=n[4],o[5]=n[5],o[6]=n[6],o[7]=n[7],o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15],o},a.create=function(){var o=new $s(16);return $s!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},a.create$1=ec,a.createExpression=mi,a.createFilter=is,a.createLayout=ds,a.createStyleLayer=function(o){return o.type==="custom"?new ve(o):new je[o.type](o)},a.cross=function(o,n,A){var f=n[0],y=n[1],C=n[2],I=A[0],D=A[1],H=A[2];return o[0]=y*H-C*D,o[1]=C*I-f*H,o[2]=f*D-y*I,o},a.dot=function(o,n){return o[0]*n[0]+o[1]*n[1]+o[2]*n[2]},a.dot$1=function(o,n){return o[0]*n[0]+o[1]*n[1]+o[2]*n[2]+o[3]*n[3]},a.ease=E,a.emitValidationErrors=Ao,a.enforceCacheSizeLimit=function(o){Qe(),ke&&ke.then(n=>{n.keys().then(A=>{for(let f=0;f<A.length-o;f++)n.delete(A[f])})})},a.equals=function(o,n){var A=o[0],f=o[1],y=o[2],C=o[3],I=o[4],D=o[5],H=o[6],X=o[7],ne=o[8],le=o[9],ye=o[10],Be=o[11],Fe=o[12],et=o[13],Ze=o[14],Et=o[15],Gt=n[0],xt=n[1],Dt=n[2],or=n[3],ar=n[4],Yr=n[5],on=n[6],Wr=n[7],Mr=n[8],Lr=n[9],Xr=n[10],Or=n[11],wr=n[12],_n=n[13],fn=n[14],qn=n[15];return Math.abs(A-Gt)<=fa*Math.max(1,Math.abs(A),Math.abs(Gt))&&Math.abs(f-xt)<=fa*Math.max(1,Math.abs(f),Math.abs(xt))&&Math.abs(y-Dt)<=fa*Math.max(1,Math.abs(y),Math.abs(Dt))&&Math.abs(C-or)<=fa*Math.max(1,Math.abs(C),Math.abs(or))&&Math.abs(I-ar)<=fa*Math.max(1,Math.abs(I),Math.abs(ar))&&Math.abs(D-Yr)<=fa*Math.max(1,Math.abs(D),Math.abs(Yr))&&Math.abs(H-on)<=fa*Math.max(1,Math.abs(H),Math.abs(on))&&Math.abs(X-Wr)<=fa*Math.max(1,Math.abs(X),Math.abs(Wr))&&Math.abs(ne-Mr)<=fa*Math.max(1,Math.abs(ne),Math.abs(Mr))&&Math.abs(le-Lr)<=fa*Math.max(1,Math.abs(le),Math.abs(Lr))&&Math.abs(ye-Xr)<=fa*Math.max(1,Math.abs(ye),Math.abs(Xr))&&Math.abs(Be-Or)<=fa*Math.max(1,Math.abs(Be),Math.abs(Or))&&Math.abs(Fe-wr)<=fa*Math.max(1,Math.abs(Fe),Math.abs(wr))&&Math.abs(et-_n)<=fa*Math.max(1,Math.abs(et),Math.abs(_n))&&Math.abs(Ze-fn)<=fa*Math.max(1,Math.abs(Ze),Math.abs(fn))&&Math.abs(Et-qn)<=fa*Math.max(1,Math.abs(Et),Math.abs(qn))},a.evaluateSizeForFeature=function(o,{uSize:n,uSizeT:A},{lowerSize:f,upperSize:y}){return o.kind==="source"?f/ol:o.kind==="composite"?si(f/ol,y/ol,A):n},a.evaluateSizeForZoom=function(o,n){let A=0,f=0;if(o.kind==="constant")f=o.layoutSize;else if(o.kind!=="source"){const{interpolationType:y,minZoom:C,maxZoom:I}=o,D=y?w(Cs.interpolationFactor(y,n,C,I),0,1):0;o.kind==="camera"?f=si(o.minSize,o.maxSize,D):A=D}return{uSizeT:A,uSize:f}},a.evaluateVariableOffset=Hd,a.evented=el,a.exported=Re,a.exported$1=ot,a.extend=Q,a.filterObject=O,a.fromRotation=function(o,n){var A=Math.sin(n),f=Math.cos(n);return o[0]=f,o[1]=A,o[2]=0,o[3]=-A,o[4]=f,o[5]=0,o[6]=0,o[7]=0,o[8]=1,o},a.fromScaling=function(o,n){return o[0]=n[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=n[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=n[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},a.getAnchorAlignment=Fh,a.getAnchorJustification=Uh,a.getArrayBuffer=yr,a.getImage=vr,a.getJSON=function(o,n){return ze(Q(o,{type:"json"}),n)},a.getOverlapMode=T,a.getRTLTextPluginStatus=fA,a.getReferrer=gr,a.getVideo=function(o,n){const A=window.document.createElement("video");A.muted=!0,A.onloadstart=function(){n(null,A)};for(let f=0;f<o.length;f++){const y=window.document.createElement("source");sr(o[f])||(A.crossOrigin="Anonymous"),y.src=o[f],A.appendChild(y)}return{cancel:()=>{}}},a.identity=So,a.invert=function(o,n){var A=n[0],f=n[1],y=n[2],C=n[3],I=n[4],D=n[5],H=n[6],X=n[7],ne=n[8],le=n[9],ye=n[10],Be=n[11],Fe=n[12],et=n[13],Ze=n[14],Et=n[15],Gt=A*D-f*I,xt=A*H-y*I,Dt=A*X-C*I,or=f*H-y*D,ar=f*X-C*D,Yr=y*X-C*H,on=ne*et-le*Fe,Wr=ne*Ze-ye*Fe,Mr=ne*Et-Be*Fe,Lr=le*Ze-ye*et,Xr=le*Et-Be*et,Or=ye*Et-Be*Ze,wr=Gt*Or-xt*Xr+Dt*Lr+or*Mr-ar*Wr+Yr*on;return wr?(o[0]=(D*Or-H*Xr+X*Lr)*(wr=1/wr),o[1]=(y*Xr-f*Or-C*Lr)*wr,o[2]=(et*Yr-Ze*ar+Et*or)*wr,o[3]=(ye*ar-le*Yr-Be*or)*wr,o[4]=(H*Mr-I*Or-X*Wr)*wr,o[5]=(A*Or-y*Mr+C*Wr)*wr,o[6]=(Ze*Dt-Fe*Yr-Et*xt)*wr,o[7]=(ne*Yr-ye*Dt+Be*xt)*wr,o[8]=(I*Xr-D*Mr+X*on)*wr,o[9]=(f*Mr-A*Xr-C*on)*wr,o[10]=(Fe*ar-et*Dt+Et*Gt)*wr,o[11]=(le*Dt-ne*ar-Be*Gt)*wr,o[12]=(D*Wr-I*Lr-H*on)*wr,o[13]=(A*Lr-f*Wr+y*on)*wr,o[14]=(et*xt-Fe*or-Ze*Gt)*wr,o[15]=(ne*or-le*xt+ye*Gt)*wr,o):null},a.isImageBitmap=me,a.isSafari=be,a.isWorker=he,a.keysDifference=function(o,n){const A=[];for(const f in o)f in n||A.push(f);return A},a.lazyLoadRTLTextPlugin=function(){Fa.isLoading()||Fa.isLoaded()||fA()!=="deferred"||QA()},a.makeRequest=ze,a.mapObject=P,a.mercatorXfromLng=Qr,a.mercatorYfromLat=Jr,a.mercatorZfromAltitude=Xn,a.mul=ch,a.mul$1=function(o,n,A){return o[0]=n[0]*A[0],o[1]=n[1]*A[1],o[2]=n[2]*A[2],o[3]=n[3]*A[3],o},a.multiply=Su,a.nextPowerOfTwo=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},a.normalize=function(o,n){var A=n[0],f=n[1],y=n[2],C=A*A+f*f+y*y;return C>0&&(C=1/Math.sqrt(C)),o[0]=n[0]*C,o[1]=n[1]*C,o[2]=n[2]*C,o},a.number=si,a.ortho=function(o,n,A,f,y,C,I){var D=1/(n-A),H=1/(f-y),X=1/(C-I);return o[0]=-2*D,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*H,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*X,o[11]=0,o[12]=(n+A)*D,o[13]=(y+f)*H,o[14]=(I+C)*X,o[15]=1,o},a.parseCacheControl=Ce,a.parseGlyphPbf=function(o){return new Ic(o).readFields(pf,[])},a.pbf=Ic,a.performSymbolLayout=function(o){o.bucket.createArrays(),o.bucket.tilePixelRatio=Ci/(512*o.bucket.overscaling),o.bucket.compareText={},o.bucket.iconsNeedLinear=!1;const n=o.bucket.layers[0].layout,A=o.bucket.layers[0]._unevaluatedLayout._values,f={layoutIconSize:A["icon-size"].possiblyEvaluate(new Ui(o.bucket.zoom+1),o.canonical),layoutTextSize:A["text-size"].possiblyEvaluate(new Ui(o.bucket.zoom+1),o.canonical),textMaxSize:A["text-size"].possiblyEvaluate(new Ui(18))};if(o.bucket.textSizeData.kind==="composite"){const{minZoom:H,maxZoom:X}=o.bucket.textSizeData;f.compositeTextSizes=[A["text-size"].possiblyEvaluate(new Ui(H),o.canonical),A["text-size"].possiblyEvaluate(new Ui(X),o.canonical)]}if(o.bucket.iconSizeData.kind==="composite"){const{minZoom:H,maxZoom:X}=o.bucket.iconSizeData;f.compositeIconSizes=[A["icon-size"].possiblyEvaluate(new Ui(H),o.canonical),A["icon-size"].possiblyEvaluate(new Ui(X),o.canonical)]}const y=n.get("text-line-height")*Os,C=n.get("text-rotation-alignment")!=="viewport"&&n.get("symbol-placement")!=="point",I=n.get("text-keep-upright"),D=n.get("text-size");for(const H of o.bucket.features){const X=n.get("text-font").evaluate(H,{},o.canonical).join(","),ne=D.evaluate(H,{},o.canonical),le=f.layoutTextSize.evaluate(H,{},o.canonical),ye=f.layoutIconSize.evaluate(H,{},o.canonical),Be={horizontal:{},vertical:void 0},Fe=H.text;let et,Ze=[0,0];if(Fe){const xt=Fe.toString(),Dt=n.get("text-letter-spacing").evaluate(H,{},o.canonical)*Os,or=LA(xt)?Dt:0,ar=n.get("text-anchor").evaluate(H,{},o.canonical),Yr=n.get("text-variable-anchor");if(!Yr){const Xr=n.get("text-radial-offset").evaluate(H,{},o.canonical);Ze=Xr?Hd(ar,[Xr*Os,Th]):n.get("text-offset").evaluate(H,{},o.canonical).map(Or=>Or*Os)}let on=C?"center":n.get("text-justify").evaluate(H,{},o.canonical);const Wr=n.get("symbol-placement"),Mr=Wr==="point"?n.get("text-max-width").evaluate(H,{},o.canonical)*Os:0,Lr=()=>{o.bucket.allowVerticalPlacement&&ja(xt)&&(Be.vertical=Ei(Fe,o.glyphMap,o.glyphPositions,o.imagePositions,X,Mr,y,ar,"left",or,Ze,a.WritingMode.vertical,!0,Wr,le,ne))};if(!C&&Yr){const Xr=on==="auto"?Yr.map(wr=>Uh(wr)):[on];let Or=!1;for(let wr=0;wr<Xr.length;wr++){const _n=Xr[wr];if(!Be.horizontal[_n])if(Or)Be.horizontal[_n]=Be.horizontal[0];else{const fn=Ei(Fe,o.glyphMap,o.glyphPositions,o.imagePositions,X,Mr,y,"center",_n,or,Ze,a.WritingMode.horizontal,!1,Wr,le,ne);fn&&(Be.horizontal[_n]=fn,Or=fn.positionedLines.length===1)}}Lr()}else{on==="auto"&&(on=Uh(ar));const Xr=Ei(Fe,o.glyphMap,o.glyphPositions,o.imagePositions,X,Mr,y,ar,on,or,Ze,a.WritingMode.horizontal,!1,Wr,le,ne);Xr&&(Be.horizontal[on]=Xr),Lr(),ja(xt)&&C&&I&&(Be.vertical=Ei(Fe,o.glyphMap,o.glyphPositions,o.imagePositions,X,Mr,y,ar,on,or,Ze,a.WritingMode.vertical,!1,Wr,le,ne))}}let Et=!1;if(H.icon&&H.icon.name){const xt=o.imageMap[H.icon.name];xt&&(et=Dd(o.imagePositions[H.icon.name],n.get("icon-offset").evaluate(H,{},o.canonical),n.get("icon-anchor").evaluate(H,{},o.canonical)),Et=!!xt.sdf,o.bucket.sdfIcons===void 0?o.bucket.sdfIcons=Et:o.bucket.sdfIcons!==Et&&Z("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(xt.pixelRatio!==o.bucket.pixelRatio||n.get("icon-rotate").constantOr(1)!==0)&&(o.bucket.iconsNeedLinear=!0))}const Gt=Vd(Be.horizontal)||Be.vertical;o.bucket.iconsInText=!!Gt&&Gt.iconsInText,(Gt||et)&&cm(o.bucket,H,Be,et,o.imageMap,f,le,ye,Ze,Et,o.canonical)}o.showCollisionBoxes&&o.bucket.generateCollisionDebugBuffers()},a.perspective=function(o,n,A,f,y){var C,I=1/Math.tan(n/2);return o[0]=I/A,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=I,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,y!=null&&y!==1/0?(o[10]=(y+f)*(C=1/(f-y)),o[14]=2*y*f*C):(o[10]=-1,o[14]=-2*f),o},a.pick=function(o,n){const A={};for(let f=0;f<n.length;f++){const y=n[f];y in o&&(A[y]=o[y])}return A},a.plugin=Fa,a.pointGeometry=_e,a.polygonIntersectsPolygon=qc,a.potpack=Qd,a.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],a.register=Pr,a.registerForPluginStateChange=function(o){return o({pluginStatus:Di,pluginURL:lo}),el.on("pluginStateChange",o),o},a.renderColorRamp=jA,a.rotateX=function(o,n,A){var f=Math.sin(A),y=Math.cos(A),C=n[4],I=n[5],D=n[6],H=n[7],X=n[8],ne=n[9],le=n[10],ye=n[11];return n!==o&&(o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o[4]=C*y+X*f,o[5]=I*y+ne*f,o[6]=D*y+le*f,o[7]=H*y+ye*f,o[8]=X*y-C*f,o[9]=ne*y-I*f,o[10]=le*y-D*f,o[11]=ye*y-H*f,o},a.rotateZ=function(o,n,A){var f=Math.sin(A),y=Math.cos(A),C=n[0],I=n[1],D=n[2],H=n[3],X=n[4],ne=n[5],le=n[6],ye=n[7];return n!==o&&(o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o[0]=C*y+X*f,o[1]=I*y+ne*f,o[2]=D*y+le*f,o[3]=H*y+ye*f,o[4]=X*y-C*f,o[5]=ne*y-I*f,o[6]=le*y-D*f,o[7]=ye*y-H*f,o},a.scale=function(o,n,A){var f=A[0],y=A[1],C=A[2];return o[0]=n[0]*f,o[1]=n[1]*f,o[2]=n[2]*f,o[3]=n[3]*f,o[4]=n[4]*y,o[5]=n[5]*y,o[6]=n[6]*y,o[7]=n[7]*y,o[8]=n[8]*C,o[9]=n[9]*C,o[10]=n[10]*C,o[11]=n[11]*C,o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15],o},a.scale$1=function(o,n,A){return o[0]=n[0]*A,o[1]=n[1]*A,o[2]=n[2]*A,o},a.setCacheLimits=function(o,n){ie=o,Se=n},a.setRTLTextPlugin=function(o,n,A=!1){if(Di===Jl||Di===YA||Di===$A)throw new Error("setRTLTextPlugin cannot be called multiple times.");lo=Re.resolveURL(o),Di=Jl,Zs=n,Ra(),A||QA()},a.spec=vt,a.sphericalToCartesian=function([o,n,A]){return n+=90,n*=Math.PI/180,A*=Math.PI/180,{x:o*Math.cos(n)*Math.sin(A),y:o*Math.sin(n)*Math.sin(A),z:o*Math.cos(A)}},a.sqrLen=function(o){var n=o[0],A=o[1];return n*n+A*A},a.sub=function(o,n,A){return o[0]=n[0]-A[0],o[1]=n[1]-A[1],o[2]=n[2]-A[2],o},a.toEvaluationFeature=Fo,a.transformMat3=function(o,n,A){var f=n[0],y=n[1],C=n[2];return o[0]=f*A[0]+y*A[3]+C*A[6],o[1]=f*A[1]+y*A[4]+C*A[7],o[2]=f*A[2]+y*A[5]+C*A[8],o},a.transformMat4=Cc,a.transformMat4$1=function(o,n,A){var f=n[0],y=n[1];return o[0]=A[0]*f+A[4]*y+A[12],o[1]=A[1]*f+A[5]*y+A[13],o},a.translate=function(o,n,A){var f,y,C,I,D,H,X,ne,le,ye,Be,Fe,et=A[0],Ze=A[1],Et=A[2];return n===o?(o[12]=n[0]*et+n[4]*Ze+n[8]*Et+n[12],o[13]=n[1]*et+n[5]*Ze+n[9]*Et+n[13],o[14]=n[2]*et+n[6]*Ze+n[10]*Et+n[14],o[15]=n[3]*et+n[7]*Ze+n[11]*Et+n[15]):(y=n[1],C=n[2],I=n[3],D=n[4],H=n[5],X=n[6],ne=n[7],le=n[8],ye=n[9],Be=n[10],Fe=n[11],o[0]=f=n[0],o[1]=y,o[2]=C,o[3]=I,o[4]=D,o[5]=H,o[6]=X,o[7]=ne,o[8]=le,o[9]=ye,o[10]=Be,o[11]=Fe,o[12]=f*et+D*Ze+le*Et+n[12],o[13]=y*et+H*Ze+ye*Et+n[13],o[14]=C*et+X*Ze+Be*Et+n[14],o[15]=I*et+ne*Ze+Fe*Et+n[15]),o},a.triggerPluginCompletionEvent=_l,a.unicodeBlockLookup=Ir,a.uniqueId=function(){return k++},a.validateCustomStyleLayer=function(o){const n=[],A=o.id;return A===void 0&&n.push({message:`layers.${A}: missing required property "id"`}),o.render===void 0&&n.push({message:`layers.${A}: missing required method "render"`}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&n.push({message:`layers.${A}: property "renderingMode" must be either "2d" or "3d"`}),n},a.validateLight=Oo,a.validateStyle=Ea,a.vectorTile=Fl,a.warnOnce=Z,a.wrap=x}),c(["./shared"],function(a){function d(Te){const Y=typeof Te;if(Y==="number"||Y==="boolean"||Y==="string"||Te==null)return JSON.stringify(Te);if(Array.isArray(Te)){let Ue="[";for(const Xe of Te)Ue+=`${d(Xe)},`;return`${Ue}]`}const Ae=Object.keys(Te).sort();let Ee="{";for(let Ue=0;Ue<Ae.length;Ue++)Ee+=`${JSON.stringify(Ae[Ue])}:${d(Te[Ae[Ue]])},`;return`${Ee}}`}function _(Te){let Y="";for(const Ae of a.refProperties)Y+=`/${d(Te[Ae])}`;return Y}class p{constructor(Y){this.keyCache={},Y&&this.replace(Y)}replace(Y){this._layerConfigs={},this._layers={},this.update(Y,[])}update(Y,Ae){for(const Ue of Y){this._layerConfigs[Ue.id]=Ue;const Xe=this._layers[Ue.id]=a.createStyleLayer(Ue);Xe._featureFilter=a.createFilter(Xe.filter),this.keyCache[Ue.id]&&delete this.keyCache[Ue.id]}for(const Ue of Ae)delete this.keyCache[Ue],delete this._layerConfigs[Ue],delete this._layers[Ue];this.familiesBySource={};const Ee=function(Ue,Xe){const lt={};for(let qe=0;qe<Ue.length;qe++){const ut=Xe&&Xe[Ue[qe].id]||_(Ue[qe]);Xe&&(Xe[Ue[qe].id]=ut);let Ot=lt[ut];Ot||(Ot=lt[ut]=[]),Ot.push(Ue[qe])}const $e=[];for(const qe in lt)$e.push(lt[qe]);return $e}(Object.values(this._layerConfigs),this.keyCache);for(const Ue of Ee){const Xe=Ue.map(nr=>this._layers[nr.id]),lt=Xe[0];if(lt.visibility==="none")continue;const $e=lt.source||"";let qe=this.familiesBySource[$e];qe||(qe=this.familiesBySource[$e]={});const ut=lt.sourceLayer||"_geojsonTileLayer";let Ot=qe[ut];Ot||(Ot=qe[ut]=[]),Ot.push(Xe)}}}class E{constructor(Y){const Ae={},Ee=[];for(const $e in Y){const qe=Y[$e],ut=Ae[$e]={};for(const Ot in qe){const nr=qe[+Ot];if(!nr||nr.bitmap.width===0||nr.bitmap.height===0)continue;const zt={x:0,y:0,w:nr.bitmap.width+2,h:nr.bitmap.height+2};Ee.push(zt),ut[Ot]={rect:zt,metrics:nr.metrics}}}const{w:Ue,h:Xe}=a.potpack(Ee),lt=new a.AlphaImage({width:Ue||1,height:Xe||1});for(const $e in Y){const qe=Y[$e];for(const ut in qe){const Ot=qe[+ut];if(!Ot||Ot.bitmap.width===0||Ot.bitmap.height===0)continue;const nr=Ae[$e][ut].rect;a.AlphaImage.copy(Ot.bitmap,lt,{x:0,y:0},{x:nr.x+1,y:nr.y+1},Ot.bitmap)}}this.image=lt,this.positions=Ae}}a.register("GlyphAtlas",E);class w{constructor(Y){this.tileID=new a.OverscaledTileID(Y.tileID.overscaledZ,Y.tileID.wrap,Y.tileID.canonical.z,Y.tileID.canonical.x,Y.tileID.canonical.y),this.uid=Y.uid,this.zoom=Y.zoom,this.pixelRatio=Y.pixelRatio,this.tileSize=Y.tileSize,this.source=Y.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Y.showCollisionBoxes,this.collectResourceTiming=!!Y.collectResourceTiming,this.returnDependencies=!!Y.returnDependencies,this.promoteId=Y.promoteId}parse(Y,Ae,Ee,Ue,Xe){this.status="parsing",this.data=Y,this.collisionBoxArray=new a.CollisionBoxArray;const lt=new a.DictionaryCoder(Object.keys(Y.layers).sort()),$e=new a.FeatureIndex(this.tileID,this.promoteId);$e.bucketLayerIDs=[];const qe={},ut={featureIndex:$e,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Ee},Ot=Ae.familiesBySource[this.source];for(const mn in Ot){const Bn=Y.layers[mn];if(!Bn)continue;Bn.version===1&&a.warnOnce(`Vector tile source "${this.source}" layer "${mn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Qn=lt.encode(mn),Vn=[];for(let Ti=0;Ti<Bn.length;Ti++){const oi=Bn.feature(Ti),wi=$e.getId(oi,mn);Vn.push({feature:oi,id:wi,index:Ti,sourceLayerIndex:Qn})}for(const Ti of Ot[mn]){const oi=Ti[0];oi.source!==this.source&&a.warnOnce(`layer.source = ${oi.source} does not equal this.source = ${this.source}`),oi.minzoom&&this.zoom<Math.floor(oi.minzoom)||oi.maxzoom&&this.zoom>=oi.maxzoom||oi.visibility!=="none"&&(x(Ti,this.zoom,Ee),(qe[oi.id]=oi.createBucket({index:$e.bucketLayerIDs.length,layers:Ti,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Qn,sourceID:this.source})).populate(Vn,ut,this.tileID.canonical),$e.bucketLayerIDs.push(Ti.map(wi=>wi.id)))}}let nr,zt,jr,Hr;const Tr=a.mapObject(ut.glyphDependencies,mn=>Object.keys(mn).map(Number));Object.keys(Tr).length?Ue.send("getGlyphs",{uid:this.uid,stacks:Tr},(mn,Bn)=>{nr||(nr=mn,zt=Bn,In.call(this))}):zt={};const ln=Object.keys(ut.iconDependencies);ln.length?Ue.send("getImages",{icons:ln,source:this.source,tileID:this.tileID,type:"icons"},(mn,Bn)=>{nr||(nr=mn,jr=Bn,In.call(this))}):jr={};const dn=Object.keys(ut.patternDependencies);function In(){if(nr)return Xe(nr);if(zt&&jr&&Hr){const mn=new E(zt),Bn=new a.ImageAtlas(jr,Hr);for(const Qn in qe){const Vn=qe[Qn];Vn instanceof a.SymbolBucket?(x(Vn.layers,this.zoom,Ee),a.performSymbolLayout({bucket:Vn,glyphMap:zt,glyphPositions:mn.positions,imageMap:jr,imagePositions:Bn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Vn.hasPattern&&(Vn instanceof a.LineBucket||Vn instanceof a.FillBucket||Vn instanceof a.FillExtrusionBucket)&&(x(Vn.layers,this.zoom,Ee),Vn.addFeatures(ut,this.tileID.canonical,Bn.patternPositions))}this.status="done",Xe(null,{buckets:Object.values(qe).filter(Qn=>!Qn.isEmpty()),featureIndex:$e,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:mn.image,imageAtlas:Bn,glyphMap:this.returnDependencies?zt:null,iconMap:this.returnDependencies?jr:null,glyphPositions:this.returnDependencies?mn.positions:null})}}dn.length?Ue.send("getImages",{icons:dn,source:this.source,tileID:this.tileID,type:"patterns"},(mn,Bn)=>{nr||(nr=mn,Hr=Bn,In.call(this))}):Hr={},In.call(this)}}function x(Te,Y,Ae){const Ee=new a.EvaluationParameters(Y);for(const Ue of Te)Ue.recalculate(Ee,Ae)}function Q(Te,Y){const Ae=a.getArrayBuffer(Te.request,(Ee,Ue,Xe,lt)=>{Ee?Y(Ee):Ue&&Y(null,{vectorTile:new a.vectorTile.VectorTile(new a.pbf(Ue)),rawData:Ue,cacheControl:Xe,expires:lt})});return()=>{Ae.cancel(),Y()}}class k{constructor(Y,Ae,Ee,Ue){this.actor=Y,this.layerIndex=Ae,this.availableImages=Ee,this.loadVectorData=Ue||Q,this.loading={},this.loaded={}}loadTile(Y,Ae){const Ee=Y.uid;this.loading||(this.loading={});const Ue=!!(Y&&Y.request&&Y.request.collectResourceTiming)&&new a.RequestPerformance(Y.request),Xe=this.loading[Ee]=new w(Y);Xe.abort=this.loadVectorData(Y,(lt,$e)=>{if(delete this.loading[Ee],lt||!$e)return Xe.status="done",this.loaded[Ee]=Xe,Ae(lt);const qe=$e.rawData,ut={};$e.expires&&(ut.expires=$e.expires),$e.cacheControl&&(ut.cacheControl=$e.cacheControl);const Ot={};if(Ue){const nr=Ue.finish();nr&&(Ot.resourceTiming=JSON.parse(JSON.stringify(nr)))}Xe.vectorTile=$e.vectorTile,Xe.parse($e.vectorTile,this.layerIndex,this.availableImages,this.actor,(nr,zt)=>{if(nr||!zt)return Ae(nr);Ae(null,a.extend({rawTileData:qe.slice(0)},zt,ut,Ot))}),this.loaded=this.loaded||{},this.loaded[Ee]=Xe})}reloadTile(Y,Ae){const Ee=this.loaded,Ue=Y.uid,Xe=this;if(Ee&&Ee[Ue]){const lt=Ee[Ue];lt.showCollisionBoxes=Y.showCollisionBoxes;const $e=(qe,ut)=>{const Ot=lt.reloadCallback;Ot&&(delete lt.reloadCallback,lt.parse(lt.vectorTile,Xe.layerIndex,this.availableImages,Xe.actor,Ot)),Ae(qe,ut)};lt.status==="parsing"?lt.reloadCallback=$e:lt.status==="done"&&(lt.vectorTile?lt.parse(lt.vectorTile,this.layerIndex,this.availableImages,this.actor,$e):$e())}}abortTile(Y,Ae){const Ee=this.loading,Ue=Y.uid;Ee&&Ee[Ue]&&Ee[Ue].abort&&(Ee[Ue].abort(),delete Ee[Ue]),Ae()}removeTile(Y,Ae){const Ee=this.loaded,Ue=Y.uid;Ee&&Ee[Ue]&&delete Ee[Ue],Ae()}}class R{constructor(){this.loaded={}}loadTile(Y,Ae){const{uid:Ee,encoding:Ue,rawImageData:Xe}=Y,lt=a.isImageBitmap(Xe)?this.getImageData(Xe):Xe,$e=new a.DEMData(Ee,lt,Ue);this.loaded=this.loaded||{},this.loaded[Ee]=$e,Ae(null,$e)}getImageData(Y){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Y.width,Y.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Y.width,this.offscreenCanvas.height=Y.height,this.offscreenCanvasContext.drawImage(Y,0,0,Y.width,Y.height);const Ae=this.offscreenCanvasContext.getImageData(-1,-1,Y.width+2,Y.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new a.RGBAImage({width:Ae.width,height:Ae.height},Ae.data)}removeTile(Y){const Ae=this.loaded,Ee=Y.uid;Ae&&Ae[Ee]&&delete Ae[Ee]}}var P=function Te(Y,Ae){var Ee,Ue=Y&&Y.type;if(Ue==="FeatureCollection")for(Ee=0;Ee<Y.features.length;Ee++)Te(Y.features[Ee],Ae);else if(Ue==="GeometryCollection")for(Ee=0;Ee<Y.geometries.length;Ee++)Te(Y.geometries[Ee],Ae);else if(Ue==="Feature")Te(Y.geometry,Ae);else if(Ue==="Polygon")O(Y.coordinates,Ae);else if(Ue==="MultiPolygon")for(Ee=0;Ee<Y.coordinates.length;Ee++)O(Y.coordinates[Ee],Ae);return Y};function O(Te,Y){if(Te.length!==0){G(Te[0],Y);for(var Ae=1;Ae<Te.length;Ae++)G(Te[Ae],!Y)}}function G(Te,Y){for(var Ae=0,Ee=0,Ue=0,Xe=Te.length,lt=Xe-1;Ue<Xe;lt=Ue++){var $e=(Te[Ue][0]-Te[lt][0])*(Te[lt][1]+Te[Ue][1]),qe=Ae+$e;Ee+=Math.abs(Ae)>=Math.abs($e)?Ae-qe+$e:$e-qe+Ae,Ae=qe}Ae+Ee>=0!=!!Y&&Te.reverse()}const V=a.vectorTile.VectorTileFeature.prototype.toGeoJSON;class Z{constructor(Y){this._feature=Y,this.extent=a.EXTENT,this.type=Y.type,this.properties=Y.tags,"id"in Y&&!isNaN(Y.id)&&(this.id=parseInt(Y.id,10))}loadGeometry(){if(this._feature.type===1){const Y=[];for(const Ae of this._feature.geometry)Y.push([new a.pointGeometry(Ae[0],Ae[1])]);return Y}{const Y=[];for(const Ae of this._feature.geometry){const Ee=[];for(const Ue of Ae)Ee.push(new a.pointGeometry(Ue[0],Ue[1]));Y.push(Ee)}return Y}}toGeoJSON(Y,Ae,Ee){return V.call(this,Y,Ae,Ee)}}class te{constructor(Y){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a.EXTENT,this.length=Y.length,this._features=Y}feature(Y){return new Z(this._features[Y])}}var ce={exports:{}},he=a.pointGeometry,Ce=a.vectorTile.VectorTileFeature,fe=ee;function ee(Te,Y){this.options=Y||{},this.features=Te,this.length=Te.length}function re(Te,Y){this.id=typeof Te.id=="number"?Te.id:void 0,this.type=Te.type,this.rawGeometry=Te.type===1?[Te.geometry]:Te.geometry,this.properties=Te.tags,this.extent=Y||4096}ee.prototype.feature=function(Te){return new re(this.features[Te],this.options.extent)},re.prototype.loadGeometry=function(){var Te=this.rawGeometry;this.geometry=[];for(var Y=0;Y<Te.length;Y++){for(var Ae=Te[Y],Ee=[],Ue=0;Ue<Ae.length;Ue++)Ee.push(new he(Ae[Ue][0],Ae[Ue][1]));this.geometry.push(Ee)}return this.geometry},re.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Te=this.geometry,Y=1/0,Ae=-1/0,Ee=1/0,Ue=-1/0,Xe=0;Xe<Te.length;Xe++)for(var lt=Te[Xe],$e=0;$e<lt.length;$e++){var qe=lt[$e];Y=Math.min(Y,qe.x),Ae=Math.max(Ae,qe.x),Ee=Math.min(Ee,qe.y),Ue=Math.max(Ue,qe.y)}return[Y,Ee,Ae,Ue]},re.prototype.toGeoJSON=Ce.prototype.toGeoJSON;var be=a.pbf,me=fe;function Re(Te){var Y=new be;return function(Ae,Ee){for(var Ue in Ae.layers)Ee.writeMessage(3,_e,Ae.layers[Ue])}(Te,Y),Y.finish()}function _e(Te,Y){var Ae;Y.writeVarintField(15,Te.version||1),Y.writeStringField(1,Te.name||""),Y.writeVarintField(5,Te.extent||4096);var Ee={keys:[],values:[],keycache:{},valuecache:{}};for(Ae=0;Ae<Te.length;Ae++)Ee.feature=Te.feature(Ae),Y.writeMessage(2,He,Ee);var Ue=Ee.keys;for(Ae=0;Ae<Ue.length;Ae++)Y.writeStringField(3,Ue[Ae]);var Xe=Ee.values;for(Ae=0;Ae<Xe.length;Ae++)Y.writeMessage(4,ie,Xe[Ae])}function He(Te,Y){var Ae=Te.feature;Ae.id!==void 0&&Y.writeVarintField(1,Ae.id),Y.writeMessage(2,Le,Te),Y.writeVarintField(3,Ae.type),Y.writeMessage(4,kt,Ae)}function Le(Te,Y){var Ae=Te.feature,Ee=Te.keys,Ue=Te.values,Xe=Te.keycache,lt=Te.valuecache;for(var $e in Ae.properties){var qe=Ae.properties[$e],ut=Xe[$e];if(qe!==null){ut===void 0&&(Ee.push($e),Xe[$e]=ut=Ee.length-1),Y.writeVarint(ut);var Ot=typeof qe;Ot!=="string"&&Ot!=="boolean"&&Ot!=="number"&&(qe=JSON.stringify(qe));var nr=Ot+":"+qe,zt=lt[nr];zt===void 0&&(Ue.push(qe),lt[nr]=zt=Ue.length-1),Y.writeVarint(zt)}}}function Je(Te,Y){return(Y<<3)+(7&Te)}function ke(Te){return Te<<1^Te>>31}function kt(Te,Y){for(var Ae=Te.loadGeometry(),Ee=Te.type,Ue=0,Xe=0,lt=Ae.length,$e=0;$e<lt;$e++){var qe=Ae[$e],ut=1;Ee===1&&(ut=qe.length),Y.writeVarint(Je(1,ut));for(var Ot=Ee===3?qe.length-1:qe.length,nr=0;nr<Ot;nr++){nr===1&&Ee!==1&&Y.writeVarint(Je(2,Ot-1));var zt=qe[nr].x-Ue,jr=qe[nr].y-Xe;Y.writeVarint(ke(zt)),Y.writeVarint(ke(jr)),Ue+=zt,Xe+=jr}Ee===3&&Y.writeVarint(Je(7,1))}}function ie(Te,Y){var Ae=typeof Te;Ae==="string"?Y.writeStringField(1,Te):Ae==="boolean"?Y.writeBooleanField(7,Te):Ae==="number"&&(Te%1!=0?Y.writeDoubleField(3,Te):Te<0?Y.writeSVarintField(6,Te):Y.writeVarintField(5,Te))}function Se(Te,Y,Ae,Ee,Ue,Xe){if(Ue-Ee<=Ae)return;const lt=Ee+Ue>>1;Qe(Te,Y,lt,Ee,Ue,Xe%2),Se(Te,Y,Ae,Ee,lt-1,Xe+1),Se(Te,Y,Ae,lt+1,Ue,Xe+1)}function Qe(Te,Y,Ae,Ee,Ue,Xe){for(;Ue>Ee;){if(Ue-Ee>600){const ut=Ue-Ee+1,Ot=Ae-Ee+1,nr=Math.log(ut),zt=.5*Math.exp(2*nr/3),jr=.5*Math.sqrt(nr*zt*(ut-zt)/ut)*(Ot-ut/2<0?-1:1);Qe(Te,Y,Ae,Math.max(Ee,Math.floor(Ae-Ot*zt/ut+jr)),Math.min(Ue,Math.floor(Ae+(ut-Ot)*zt/ut+jr)),Xe)}const lt=Y[2*Ae+Xe];let $e=Ee,qe=Ue;for(Ke(Te,Y,Ee,Ae),Y[2*Ue+Xe]>lt&&Ke(Te,Y,Ee,Ue);$e<qe;){for(Ke(Te,Y,$e,qe),$e++,qe--;Y[2*$e+Xe]<lt;)$e++;for(;Y[2*qe+Xe]>lt;)qe--}Y[2*Ee+Xe]===lt?Ke(Te,Y,Ee,qe):(qe++,Ke(Te,Y,qe,Ue)),qe<=Ae&&(Ee=qe+1),Ae<=qe&&(Ue=qe-1)}}function Ke(Te,Y,Ae,Ee){ot(Te,Ae,Ee),ot(Y,2*Ae,2*Ee),ot(Y,2*Ae+1,2*Ee+1)}function ot(Te,Y,Ae){const Ee=Te[Y];Te[Y]=Te[Ae],Te[Ae]=Ee}function dt(Te,Y,Ae,Ee){const Ue=Te-Ae,Xe=Y-Ee;return Ue*Ue+Xe*Xe}ce.exports=Re,ce.exports.fromVectorTileJs=Re,ce.exports.fromGeojsonVt=function(Te,Y){Y=Y||{};var Ae={};for(var Ee in Te)Ae[Ee]=new me(Te[Ee].features,Y),Ae[Ee].name=Ee,Ae[Ee].version=Y.version,Ae[Ee].extent=Y.extent;return Re({layers:Ae})},ce.exports.GeoJSONWrapper=me;const Bt=Te=>Te[0],Ge=Te=>Te[1];class rt{constructor(Y,Ae=Bt,Ee=Ge,Ue=64,Xe=Float64Array){this.nodeSize=Ue,this.points=Y;const lt=Y.length<65536?Uint16Array:Uint32Array,$e=this.ids=new lt(Y.length),qe=this.coords=new Xe(2*Y.length);for(let ut=0;ut<Y.length;ut++)$e[ut]=ut,qe[2*ut]=Ae(Y[ut]),qe[2*ut+1]=Ee(Y[ut]);Se($e,qe,Ue,0,$e.length-1,0)}range(Y,Ae,Ee,Ue){return function(Xe,lt,$e,qe,ut,Ot,nr){const zt=[0,Xe.length-1,0],jr=[];let Hr,Tr;for(;zt.length;){const ln=zt.pop(),dn=zt.pop(),In=zt.pop();if(dn-In<=nr){for(let Qn=In;Qn<=dn;Qn++)Hr=lt[2*Qn],Tr=lt[2*Qn+1],Hr>=$e&&Hr<=ut&&Tr>=qe&&Tr<=Ot&&jr.push(Xe[Qn]);continue}const mn=Math.floor((In+dn)/2);Hr=lt[2*mn],Tr=lt[2*mn+1],Hr>=$e&&Hr<=ut&&Tr>=qe&&Tr<=Ot&&jr.push(Xe[mn]);const Bn=(ln+1)%2;(ln===0?$e<=Hr:qe<=Tr)&&(zt.push(In),zt.push(mn-1),zt.push(Bn)),(ln===0?ut>=Hr:Ot>=Tr)&&(zt.push(mn+1),zt.push(dn),zt.push(Bn))}return jr}(this.ids,this.coords,Y,Ae,Ee,Ue,this.nodeSize)}within(Y,Ae,Ee){return function(Ue,Xe,lt,$e,qe,ut){const Ot=[0,Ue.length-1,0],nr=[],zt=qe*qe;for(;Ot.length;){const jr=Ot.pop(),Hr=Ot.pop(),Tr=Ot.pop();if(Hr-Tr<=ut){for(let Bn=Tr;Bn<=Hr;Bn++)dt(Xe[2*Bn],Xe[2*Bn+1],lt,$e)<=zt&&nr.push(Ue[Bn]);continue}const ln=Math.floor((Tr+Hr)/2),dn=Xe[2*ln],In=Xe[2*ln+1];dt(dn,In,lt,$e)<=zt&&nr.push(Ue[ln]);const mn=(jr+1)%2;(jr===0?lt-qe<=dn:$e-qe<=In)&&(Ot.push(Tr),Ot.push(ln-1),Ot.push(mn)),(jr===0?lt+qe>=dn:$e+qe>=In)&&(Ot.push(ln+1),Ot.push(Hr),Ot.push(mn))}return nr}(this.ids,this.coords,Y,Ae,Ee,this.nodeSize)}}const Qt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Te=>Te},ht=Math.fround||(Nt=new Float32Array(1),Te=>(Nt[0]=+Te,Nt[0]));var Nt;class gr{constructor(Y){this.options=vr(Object.create(Qt),Y),this.trees=new Array(this.options.maxZoom+1)}load(Y){const{log:Ae,minZoom:Ee,maxZoom:Ue,nodeSize:Xe}=this.options;Ae&&console.time("total time");const lt=`prepare ${Y.length} points`;Ae&&console.time(lt),this.points=Y;let $e=[];for(let qe=0;qe<Y.length;qe++)Y[qe].geometry&&$e.push(ze(Y[qe],qe));this.trees[Ue+1]=new rt($e,Gr,rr,Xe,Float32Array),Ae&&console.timeEnd(lt);for(let qe=Ue;qe>=Ee;qe--){const ut=+Date.now();$e=this._cluster($e,qe),this.trees[qe]=new rt($e,Gr,rr,Xe,Float32Array),Ae&&console.log("z%d: %d clusters in %dms",qe,$e.length,+Date.now()-ut)}return Ae&&console.timeEnd("total time"),this}getClusters(Y,Ae){let Ee=((Y[0]+180)%360+360)%360-180;const Ue=Math.max(-90,Math.min(90,Y[1]));let Xe=Y[2]===180?180:((Y[2]+180)%360+360)%360-180;const lt=Math.max(-90,Math.min(90,Y[3]));if(Y[2]-Y[0]>=360)Ee=-180,Xe=180;else if(Ee>Xe){const Ot=this.getClusters([Ee,Ue,180,lt],Ae),nr=this.getClusters([-180,Ue,Xe,lt],Ae);return Ot.concat(nr)}const $e=this.trees[this._limitZoom(Ae)],qe=$e.range(Ht(Ee),pr(lt),Ht(Xe),pr(Ue)),ut=[];for(const Ot of qe){const nr=$e.points[Ot];ut.push(nr.numPoints?yr(nr):this.points[nr.index])}return ut}getChildren(Y){const Ae=this._getOriginId(Y),Ee=this._getOriginZoom(Y),Ue="No cluster with the specified id.",Xe=this.trees[Ee];if(!Xe)throw new Error(Ue);const lt=Xe.points[Ae];if(!lt)throw new Error(Ue);const $e=this.options.radius/(this.options.extent*Math.pow(2,Ee-1)),qe=Xe.within(lt.x,lt.y,$e),ut=[];for(const Ot of qe){const nr=Xe.points[Ot];nr.parentId===Y&&ut.push(nr.numPoints?yr(nr):this.points[nr.index])}if(ut.length===0)throw new Error(Ue);return ut}getLeaves(Y,Ae,Ee){const Ue=[];return this._appendLeaves(Ue,Y,Ae=Ae||10,Ee=Ee||0,0),Ue}getTile(Y,Ae,Ee){const Ue=this.trees[this._limitZoom(Y)],Xe=Math.pow(2,Y),{extent:lt,radius:$e}=this.options,qe=$e/lt,ut=(Ee-qe)/Xe,Ot=(Ee+1+qe)/Xe,nr={features:[]};return this._addTileFeatures(Ue.range((Ae-qe)/Xe,ut,(Ae+1+qe)/Xe,Ot),Ue.points,Ae,Ee,Xe,nr),Ae===0&&this._addTileFeatures(Ue.range(1-qe/Xe,ut,1,Ot),Ue.points,Xe,Ee,Xe,nr),Ae===Xe-1&&this._addTileFeatures(Ue.range(0,ut,qe/Xe,Ot),Ue.points,-1,Ee,Xe,nr),nr.features.length?nr:null}getClusterExpansionZoom(Y){let Ae=this._getOriginZoom(Y)-1;for(;Ae<=this.options.maxZoom;){const Ee=this.getChildren(Y);if(Ae++,Ee.length!==1)break;Y=Ee[0].properties.cluster_id}return Ae}_appendLeaves(Y,Ae,Ee,Ue,Xe){const lt=this.getChildren(Ae);for(const $e of lt){const qe=$e.properties;if(qe&&qe.cluster?Xe+qe.point_count<=Ue?Xe+=qe.point_count:Xe=this._appendLeaves(Y,qe.cluster_id,Ee,Ue,Xe):Xe<Ue?Xe++:Y.push($e),Y.length===Ee)break}return Xe}_addTileFeatures(Y,Ae,Ee,Ue,Xe,lt){for(const $e of Y){const qe=Ae[$e],ut=qe.numPoints;let Ot,nr,zt;if(ut)Ot=sr(qe),nr=qe.x,zt=qe.y;else{const Tr=this.points[qe.index];Ot=Tr.properties,nr=Ht(Tr.geometry.coordinates[0]),zt=pr(Tr.geometry.coordinates[1])}const jr={type:1,geometry:[[Math.round(this.options.extent*(nr*Xe-Ee)),Math.round(this.options.extent*(zt*Xe-Ue))]],tags:Ot};let Hr;ut?Hr=qe.id:this.options.generateId?Hr=qe.index:this.points[qe.index].id&&(Hr=this.points[qe.index].id),Hr!==void 0&&(jr.id=Hr),lt.features.push(jr)}}_limitZoom(Y){return Math.max(this.options.minZoom,Math.min(Math.floor(+Y),this.options.maxZoom+1))}_cluster(Y,Ae){const Ee=[],{radius:Ue,extent:Xe,reduce:lt,minPoints:$e}=this.options,qe=Ue/(Xe*Math.pow(2,Ae));for(let ut=0;ut<Y.length;ut++){const Ot=Y[ut];if(Ot.zoom<=Ae)continue;Ot.zoom=Ae;const nr=this.trees[Ae+1],zt=nr.within(Ot.x,Ot.y,qe),jr=Ot.numPoints||1;let Hr=jr;for(const Tr of zt){const ln=nr.points[Tr];ln.zoom>Ae&&(Hr+=ln.numPoints||1)}if(Hr>jr&&Hr>=$e){let Tr=Ot.x*jr,ln=Ot.y*jr,dn=lt&&jr>1?this._map(Ot,!0):null;const In=(ut<<5)+(Ae+1)+this.points.length;for(const mn of zt){const Bn=nr.points[mn];if(Bn.zoom<=Ae)continue;Bn.zoom=Ae;const Qn=Bn.numPoints||1;Tr+=Bn.x*Qn,ln+=Bn.y*Qn,Bn.parentId=In,lt&&(dn||(dn=this._map(Ot,!0)),lt(dn,this._map(Bn)))}Ot.parentId=In,Ee.push(Pt(Tr/Hr,ln/Hr,In,Hr,dn))}else if(Ee.push(Ot),Hr>1)for(const Tr of zt){const ln=nr.points[Tr];ln.zoom<=Ae||(ln.zoom=Ae,Ee.push(ln))}}return Ee}_getOriginId(Y){return Y-this.points.length>>5}_getOriginZoom(Y){return(Y-this.points.length)%32}_map(Y,Ae){if(Y.numPoints)return Ae?vr({},Y.properties):Y.properties;const Ee=this.points[Y.index].properties,Ue=this.options.map(Ee);return Ae&&Ue===Ee?vr({},Ue):Ue}}function Pt(Te,Y,Ae,Ee,Ue){return{x:ht(Te),y:ht(Y),zoom:1/0,id:Ae,parentId:-1,numPoints:Ee,properties:Ue}}function ze(Te,Y){const[Ae,Ee]=Te.geometry.coordinates;return{x:ht(Ht(Ae)),y:ht(pr(Ee)),zoom:1/0,index:Y,parentId:-1}}function yr(Te){return{type:"Feature",id:Te.id,properties:sr(Te),geometry:{type:"Point",coordinates:[(Y=Te.x,360*(Y-.5)),Br(Te.y)]}};var Y}function sr(Te){const Y=Te.numPoints,Ae=Y>=1e4?`${Math.round(Y/1e3)}k`:Y>=1e3?Math.round(Y/100)/10+"k":Y;return vr(vr({},Te.properties),{cluster:!0,cluster_id:Te.id,point_count:Y,point_count_abbreviated:Ae})}function Ht(Te){return Te/360+.5}function pr(Te){const Y=Math.sin(Te*Math.PI/180),Ae=.5-.25*Math.log((1+Y)/(1-Y))/Math.PI;return Ae<0?0:Ae>1?1:Ae}function Br(Te){const Y=(180-360*Te)*Math.PI/180;return 360*Math.atan(Math.exp(Y))/Math.PI-90}function vr(Te,Y){for(const Ae in Y)Te[Ae]=Y[Ae];return Te}function Gr(Te){return Te.x}function rr(Te){return Te.y}function xr(Te,Y,Ae,Ee){for(var Ue,Xe=Ee,lt=Ae-Y>>1,$e=Ae-Y,qe=Te[Y],ut=Te[Y+1],Ot=Te[Ae],nr=Te[Ae+1],zt=Y+3;zt<Ae;zt+=3){var jr=Zr(Te[zt],Te[zt+1],qe,ut,Ot,nr);if(jr>Xe)Ue=zt,Xe=jr;else if(jr===Xe){var Hr=Math.abs(zt-lt);Hr<$e&&(Ue=zt,$e=Hr)}}Xe>Ee&&(Ue-Y>3&&xr(Te,Y,Ue,Ee),Te[Ue+2]=Xe,Ae-Ue>3&&xr(Te,Ue,Ae,Ee))}function Zr(Te,Y,Ae,Ee,Ue,Xe){var lt=Ue-Ae,$e=Xe-Ee;if(lt!==0||$e!==0){var qe=((Te-Ae)*lt+(Y-Ee)*$e)/(lt*lt+$e*$e);qe>1?(Ae=Ue,Ee=Xe):qe>0&&(Ae+=lt*qe,Ee+=$e*qe)}return(lt=Te-Ae)*lt+($e=Y-Ee)*$e}function pn(Te,Y,Ae,Ee){var Ue={id:Te===void 0?null:Te,type:Y,geometry:Ae,tags:Ee,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Xe){var lt=Xe.geometry,$e=Xe.type;if($e==="Point"||$e==="MultiPoint"||$e==="LineString")vt(Xe,lt);else if($e==="Polygon"||$e==="MultiLineString")for(var qe=0;qe<lt.length;qe++)vt(Xe,lt[qe]);else if($e==="MultiPolygon")for(qe=0;qe<lt.length;qe++)for(var ut=0;ut<lt[qe].length;ut++)vt(Xe,lt[qe][ut])}(Ue),Ue}function vt(Te,Y){for(var Ae=0;Ae<Y.length;Ae+=3)Te.minX=Math.min(Te.minX,Y[Ae]),Te.minY=Math.min(Te.minY,Y[Ae+1]),Te.maxX=Math.max(Te.maxX,Y[Ae]),Te.maxY=Math.max(Te.maxY,Y[Ae+1])}function at(Te,Y,Ae,Ee){if(Y.geometry){var Ue=Y.geometry.coordinates,Xe=Y.geometry.type,lt=Math.pow(Ae.tolerance/((1<<Ae.maxZoom)*Ae.extent),2),$e=[],qe=Y.id;if(Ae.promoteId?qe=Y.properties[Ae.promoteId]:Ae.generateId&&(qe=Ee||0),Xe==="Point")bt(Ue,$e);else if(Xe==="MultiPoint")for(var ut=0;ut<Ue.length;ut++)bt(Ue[ut],$e);else if(Xe==="LineString")Ct(Ue,$e,lt,!1);else if(Xe==="MultiLineString"){if(Ae.lineMetrics){for(ut=0;ut<Ue.length;ut++)Ct(Ue[ut],$e=[],lt,!1),Te.push(pn(qe,"LineString",$e,Y.properties));return}jt(Ue,$e,lt,!1)}else if(Xe==="Polygon")jt(Ue,$e,lt,!0);else{if(Xe!=="MultiPolygon"){if(Xe==="GeometryCollection"){for(ut=0;ut<Y.geometry.geometries.length;ut++)at(Te,{id:qe,geometry:Y.geometry.geometries[ut],properties:Y.properties},Ae,Ee);return}throw new Error("Input data is not a valid GeoJSON object.")}for(ut=0;ut<Ue.length;ut++){var Ot=[];jt(Ue[ut],Ot,lt,!0),$e.push(Ot)}}Te.push(pn(qe,Xe,$e,Y.properties))}}function bt(Te,Y){Y.push(er(Te[0])),Y.push(Vr(Te[1])),Y.push(0)}function Ct(Te,Y,Ae,Ee){for(var Ue,Xe,lt=0,$e=0;$e<Te.length;$e++){var qe=er(Te[$e][0]),ut=Vr(Te[$e][1]);Y.push(qe),Y.push(ut),Y.push(0),$e>0&&(lt+=Ee?(Ue*ut-qe*Xe)/2:Math.sqrt(Math.pow(qe-Ue,2)+Math.pow(ut-Xe,2))),Ue=qe,Xe=ut}var Ot=Y.length-3;Y[2]=1,xr(Y,0,Ot,Ae),Y[Ot+2]=1,Y.size=Math.abs(lt),Y.start=0,Y.end=Y.size}function jt(Te,Y,Ae,Ee){for(var Ue=0;Ue<Te.length;Ue++){var Xe=[];Ct(Te[Ue],Xe,Ae,Ee),Y.push(Xe)}}function er(Te){return Te/360+.5}function Vr(Te){var Y=Math.sin(Te*Math.PI/180),Ae=.5-.25*Math.log((1+Y)/(1-Y))/Math.PI;return Ae<0?0:Ae>1?1:Ae}function Sr(Te,Y,Ae,Ee,Ue,Xe,lt,$e){if(Ee/=Y,Xe>=(Ae/=Y)&&lt<Ee)return Te;if(lt<Ae||Xe>=Ee)return null;for(var qe=[],ut=0;ut<Te.length;ut++){var Ot=Te[ut],nr=Ot.geometry,zt=Ot.type,jr=Ue===0?Ot.minX:Ot.minY,Hr=Ue===0?Ot.maxX:Ot.maxY;if(jr>=Ae&&Hr<Ee)qe.push(Ot);else if(!(Hr<Ae||jr>=Ee)){var Tr=[];if(zt==="Point"||zt==="MultiPoint")un(nr,Tr,Ae,Ee,Ue);else if(zt==="LineString")lr(nr,Tr,Ae,Ee,Ue,!1,$e.lineMetrics);else if(zt==="MultiLineString")An(nr,Tr,Ae,Ee,Ue,!1);else if(zt==="Polygon")An(nr,Tr,Ae,Ee,Ue,!0);else if(zt==="MultiPolygon")for(var ln=0;ln<nr.length;ln++){var dn=[];An(nr[ln],dn,Ae,Ee,Ue,!0),dn.length&&Tr.push(dn)}if(Tr.length){if($e.lineMetrics&&zt==="LineString"){for(ln=0;ln<Tr.length;ln++)qe.push(pn(Ot.id,zt,Tr[ln],Ot.tags));continue}zt!=="LineString"&&zt!=="MultiLineString"||(Tr.length===1?(zt="LineString",Tr=Tr[0]):zt="MultiLineString"),zt!=="Point"&&zt!=="MultiPoint"||(zt=Tr.length===3?"Point":"MultiPoint"),qe.push(pn(Ot.id,zt,Tr,Ot.tags))}}}return qe.length?qe:null}function un(Te,Y,Ae,Ee,Ue){for(var Xe=0;Xe<Te.length;Xe+=3){var lt=Te[Xe+Ue];lt>=Ae&&lt<=Ee&&(Y.push(Te[Xe]),Y.push(Te[Xe+1]),Y.push(Te[Xe+2]))}}function lr(Te,Y,Ae,Ee,Ue,Xe,lt){for(var $e,qe,ut=Er(Te),Ot=Ue===0?_i:br,nr=Te.start,zt=0;zt<Te.length-3;zt+=3){var jr=Te[zt],Hr=Te[zt+1],Tr=Te[zt+2],ln=Te[zt+3],dn=Te[zt+4],In=Ue===0?jr:Hr,mn=Ue===0?ln:dn,Bn=!1;lt&&($e=Math.sqrt(Math.pow(jr-ln,2)+Math.pow(Hr-dn,2))),In<Ae?mn>Ae&&(qe=Ot(ut,jr,Hr,ln,dn,Ae),lt&&(ut.start=nr+$e*qe)):In>Ee?mn<Ee&&(qe=Ot(ut,jr,Hr,ln,dn,Ee),lt&&(ut.start=nr+$e*qe)):wn(ut,jr,Hr,Tr),mn<Ae&&In>=Ae&&(qe=Ot(ut,jr,Hr,ln,dn,Ae),Bn=!0),mn>Ee&&In<=Ee&&(qe=Ot(ut,jr,Hr,ln,dn,Ee),Bn=!0),!Xe&&Bn&&(lt&&(ut.end=nr+$e*qe),Y.push(ut),ut=Er(Te)),lt&&(nr+=$e)}var Qn=Te.length-3;jr=Te[Qn],Hr=Te[Qn+1],Tr=Te[Qn+2],(In=Ue===0?jr:Hr)>=Ae&&In<=Ee&&wn(ut,jr,Hr,Tr),Qn=ut.length-3,Xe&&Qn>=3&&(ut[Qn]!==ut[0]||ut[Qn+1]!==ut[1])&&wn(ut,ut[0],ut[1],ut[2]),ut.length&&Y.push(ut)}function Er(Te){var Y=[];return Y.size=Te.size,Y.start=Te.start,Y.end=Te.end,Y}function An(Te,Y,Ae,Ee,Ue,Xe){for(var lt=0;lt<Te.length;lt++)lr(Te[lt],Y,Ae,Ee,Ue,Xe,!1)}function wn(Te,Y,Ae,Ee){Te.push(Y),Te.push(Ae),Te.push(Ee)}function _i(Te,Y,Ae,Ee,Ue,Xe){var lt=(Xe-Y)/(Ee-Y);return Te.push(Xe),Te.push(Ae+(Ue-Ae)*lt),Te.push(1),lt}function br(Te,Y,Ae,Ee,Ue,Xe){var lt=(Xe-Ae)/(Ue-Ae);return Te.push(Y+(Ee-Y)*lt),Te.push(Xe),Te.push(1),lt}function Cr(Te,Y){for(var Ae=[],Ee=0;Ee<Te.length;Ee++){var Ue,Xe=Te[Ee],lt=Xe.type;if(lt==="Point"||lt==="MultiPoint"||lt==="LineString")Ue=cr(Xe.geometry,Y);else if(lt==="MultiLineString"||lt==="Polygon"){Ue=[];for(var $e=0;$e<Xe.geometry.length;$e++)Ue.push(cr(Xe.geometry[$e],Y))}else if(lt==="MultiPolygon")for(Ue=[],$e=0;$e<Xe.geometry.length;$e++){for(var qe=[],ut=0;ut<Xe.geometry[$e].length;ut++)qe.push(cr(Xe.geometry[$e][ut],Y));Ue.push(qe)}Ae.push(pn(Xe.id,lt,Ue,Xe.tags))}return Ae}function cr(Te,Y){var Ae=[];Ae.size=Te.size,Te.start!==void 0&&(Ae.start=Te.start,Ae.end=Te.end);for(var Ee=0;Ee<Te.length;Ee+=3)Ae.push(Te[Ee]+Y,Te[Ee+1],Te[Ee+2]);return Ae}function Kr(Te,Y){if(Te.transformed)return Te;var Ae,Ee,Ue,Xe=1<<Te.z,lt=Te.x,$e=Te.y;for(Ae=0;Ae<Te.features.length;Ae++){var qe=Te.features[Ae],ut=qe.geometry,Ot=qe.type;if(qe.geometry=[],Ot===1)for(Ee=0;Ee<ut.length;Ee+=2)qe.geometry.push(hn(ut[Ee],ut[Ee+1],Y,Xe,lt,$e));else for(Ee=0;Ee<ut.length;Ee++){var nr=[];for(Ue=0;Ue<ut[Ee].length;Ue+=2)nr.push(hn(ut[Ee][Ue],ut[Ee][Ue+1],Y,Xe,lt,$e));qe.geometry.push(nr)}}return Te.transformed=!0,Te}function hn(Te,Y,Ae,Ee,Ue,Xe){return[Math.round(Ae*(Te*Ee-Ue)),Math.round(Ae*(Y*Ee-Xe))]}function xn(Te,Y,Ae,Ee,Ue){for(var Xe=Y===Ue.maxZoom?0:Ue.tolerance/((1<<Y)*Ue.extent),lt={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Ae,y:Ee,z:Y,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},$e=0;$e<Te.length;$e++){lt.numFeatures++,Sn(lt,Te[$e],Xe,Ue);var qe=Te[$e].minX,ut=Te[$e].minY,Ot=Te[$e].maxX,nr=Te[$e].maxY;qe<lt.minX&&(lt.minX=qe),ut<lt.minY&&(lt.minY=ut),Ot>lt.maxX&&(lt.maxX=Ot),nr>lt.maxY&&(lt.maxY=nr)}return lt}function Sn(Te,Y,Ae,Ee){var Ue=Y.geometry,Xe=Y.type,lt=[];if(Xe==="Point"||Xe==="MultiPoint")for(var $e=0;$e<Ue.length;$e+=3)lt.push(Ue[$e]),lt.push(Ue[$e+1]),Te.numPoints++,Te.numSimplified++;else if(Xe==="LineString")ji(lt,Ue,Te,Ae,!1,!1);else if(Xe==="MultiLineString"||Xe==="Polygon")for($e=0;$e<Ue.length;$e++)ji(lt,Ue[$e],Te,Ae,Xe==="Polygon",$e===0);else if(Xe==="MultiPolygon")for(var qe=0;qe<Ue.length;qe++){var ut=Ue[qe];for($e=0;$e<ut.length;$e++)ji(lt,ut[$e],Te,Ae,!0,$e===0)}if(lt.length){var Ot=Y.tags||null;if(Xe==="LineString"&&Ee.lineMetrics){for(var nr in Ot={},Y.tags)Ot[nr]=Y.tags[nr];Ot.mapbox_clip_start=Ue.start/Ue.size,Ot.mapbox_clip_end=Ue.end/Ue.size}var zt={geometry:lt,type:Xe==="Polygon"||Xe==="MultiPolygon"?3:Xe==="LineString"||Xe==="MultiLineString"?2:1,tags:Ot};Y.id!==null&&(zt.id=Y.id),Te.features.push(zt)}}function ji(Te,Y,Ae,Ee,Ue,Xe){var lt=Ee*Ee;if(Ee>0&&Y.size<(Ue?lt:Ee))Ae.numPoints+=Y.length/3;else{for(var $e=[],qe=0;qe<Y.length;qe+=3)(Ee===0||Y[qe+2]>lt)&&(Ae.numSimplified++,$e.push(Y[qe]),$e.push(Y[qe+1])),Ae.numPoints++;Ue&&function(ut,Ot){for(var nr=0,zt=0,jr=ut.length,Hr=jr-2;zt<jr;Hr=zt,zt+=2)nr+=(ut[zt]-ut[Hr])*(ut[zt+1]+ut[Hr+1]);if(nr>0===Ot)for(zt=0,jr=ut.length;zt<jr/2;zt+=2){var Tr=ut[zt],ln=ut[zt+1];ut[zt]=ut[jr-2-zt],ut[zt+1]=ut[jr-1-zt],ut[jr-2-zt]=Tr,ut[jr-1-zt]=ln}}($e,Xe),Te.push($e)}}function tn(Te,Y){var Ae=(Y=this.options=function(Ue,Xe){for(var lt in Xe)Ue[lt]=Xe[lt];return Ue}(Object.create(this.options),Y)).debug;if(Ae&&console.time("preprocess data"),Y.maxZoom<0||Y.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Y.promoteId&&Y.generateId)throw new Error("promoteId and generateId cannot be used together.");var Ee=function(Ue,Xe){var lt=[];if(Ue.type==="FeatureCollection")for(var $e=0;$e<Ue.features.length;$e++)at(lt,Ue.features[$e],Xe,$e);else at(lt,Ue.type==="Feature"?Ue:{geometry:Ue},Xe);return lt}(Te,Y);this.tiles={},this.tileCoords=[],Ae&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Y.indexMaxZoom,Y.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Ee=function(Ue,Xe){var lt=Xe.buffer/Xe.extent,$e=Ue,qe=Sr(Ue,1,-1-lt,lt,0,-1,2,Xe),ut=Sr(Ue,1,1-lt,2+lt,0,-1,2,Xe);return(qe||ut)&&($e=Sr(Ue,1,-lt,1+lt,0,-1,2,Xe)||[],qe&&($e=Cr(qe,1).concat($e)),ut&&($e=$e.concat(Cr(ut,-1)))),$e}(Ee,Y),Ee.length&&this.splitTile(Ee,0,0,0),Ae&&(Ee.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Wi(Te,Y,Ae){return 32*((1<<Te)*Ae+Y)+Te}function hs(Te,Y){const Ae=Te.tileID.canonical;if(!this._geoJSONIndex)return Y(null,null);const Ee=this._geoJSONIndex.getTile(Ae.z,Ae.x,Ae.y);if(!Ee)return Y(null,null);const Ue=new te(Ee.features);let Xe=ce.exports(Ue);Xe.byteOffset===0&&Xe.byteLength===Xe.buffer.byteLength||(Xe=new Uint8Array(Xe)),Y(null,{vectorTile:Ue,rawData:Xe.buffer})}tn.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},tn.prototype.splitTile=function(Te,Y,Ae,Ee,Ue,Xe,lt){for(var $e=[Te,Y,Ae,Ee],qe=this.options,ut=qe.debug;$e.length;){Ee=$e.pop(),Ae=$e.pop(),Y=$e.pop(),Te=$e.pop();var Ot=1<<Y,nr=Wi(Y,Ae,Ee),zt=this.tiles[nr];if(!zt&&(ut>1&&console.time("creation"),zt=this.tiles[nr]=xn(Te,Y,Ae,Ee,qe),this.tileCoords.push({z:Y,x:Ae,y:Ee}),ut)){ut>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Y,Ae,Ee,zt.numFeatures,zt.numPoints,zt.numSimplified),console.timeEnd("creation"));var jr="z"+Y;this.stats[jr]=(this.stats[jr]||0)+1,this.total++}if(zt.source=Te,Ue){if(Y===qe.maxZoom||Y===Ue)continue;var Hr=1<<Ue-Y;if(Ae!==Math.floor(Xe/Hr)||Ee!==Math.floor(lt/Hr))continue}else if(Y===qe.indexMaxZoom||zt.numPoints<=qe.indexMaxPoints)continue;if(zt.source=null,Te.length!==0){ut>1&&console.time("clipping");var Tr,ln,dn,In,mn,Bn,Qn=.5*qe.buffer/qe.extent,Vn=.5-Qn,Ti=.5+Qn,oi=1+Qn;Tr=ln=dn=In=null,mn=Sr(Te,Ot,Ae-Qn,Ae+Ti,0,zt.minX,zt.maxX,qe),Bn=Sr(Te,Ot,Ae+Vn,Ae+oi,0,zt.minX,zt.maxX,qe),Te=null,mn&&(Tr=Sr(mn,Ot,Ee-Qn,Ee+Ti,1,zt.minY,zt.maxY,qe),ln=Sr(mn,Ot,Ee+Vn,Ee+oi,1,zt.minY,zt.maxY,qe),mn=null),Bn&&(dn=Sr(Bn,Ot,Ee-Qn,Ee+Ti,1,zt.minY,zt.maxY,qe),In=Sr(Bn,Ot,Ee+Vn,Ee+oi,1,zt.minY,zt.maxY,qe),Bn=null),ut>1&&console.timeEnd("clipping"),$e.push(Tr||[],Y+1,2*Ae,2*Ee),$e.push(ln||[],Y+1,2*Ae,2*Ee+1),$e.push(dn||[],Y+1,2*Ae+1,2*Ee),$e.push(In||[],Y+1,2*Ae+1,2*Ee+1)}}},tn.prototype.getTile=function(Te,Y,Ae){var Ee=this.options,Ue=Ee.extent,Xe=Ee.debug;if(Te<0||Te>24)return null;var lt=1<<Te,$e=Wi(Te,Y=(Y%lt+lt)%lt,Ae);if(this.tiles[$e])return Kr(this.tiles[$e],Ue);Xe>1&&console.log("drilling down to z%d-%d-%d",Te,Y,Ae);for(var qe,ut=Te,Ot=Y,nr=Ae;!qe&&ut>0;)ut--,Ot=Math.floor(Ot/2),nr=Math.floor(nr/2),qe=this.tiles[Wi(ut,Ot,nr)];return qe&&qe.source?(Xe>1&&console.log("found parent tile z%d-%d-%d",ut,Ot,nr),Xe>1&&console.time("drilling down"),this.splitTile(qe.source,ut,Ot,nr,Te,Y,Ae),Xe>1&&console.timeEnd("drilling down"),this.tiles[$e]?Kr(this.tiles[$e],Ue):null):null};class Ln extends k{constructor(Y,Ae,Ee,Ue){super(Y,Ae,Ee,hs),Ue&&(this.loadGeoJSON=Ue)}loadData(Y,Ae){var Ee;(Ee=this._pendingRequest)===null||Ee===void 0||Ee.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const Ue=!!(Y&&Y.request&&Y.request.collectResourceTiming)&&new a.RequestPerformance(Y.request);this._pendingCallback=Ae,this._pendingRequest=this.loadGeoJSON(Y,(Xe,lt)=>{if(delete this._pendingCallback,delete this._pendingRequest,Xe||!lt)return Ae(Xe);if(typeof lt!="object")return Ae(new Error(`Input data given to '${Y.source}' is not a valid GeoJSON object.`));{P(lt,!0);try{if(Y.filter){const qe=a.createExpression(Y.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(qe.result==="error")throw new Error(qe.value.map(Ot=>`${Ot.key}: ${Ot.message}`).join(", "));lt={type:"FeatureCollection",features:lt.features.filter(Ot=>qe.value.evaluate({zoom:0},Ot))}}this._geoJSONIndex=Y.cluster?new gr(function({superclusterOptions:qe,clusterProperties:ut}){if(!ut||!qe)return qe;const Ot={},nr={},zt={accumulated:null,zoom:0},jr={properties:null},Hr=Object.keys(ut);for(const Tr of Hr){const[ln,dn]=ut[Tr],In=a.createExpression(dn),mn=a.createExpression(typeof ln=="string"?[ln,["accumulated"],["get",Tr]]:ln);Ot[Tr]=In.value,nr[Tr]=mn.value}return qe.map=Tr=>{jr.properties=Tr;const ln={};for(const dn of Hr)ln[dn]=Ot[dn].evaluate(zt,jr);return ln},qe.reduce=(Tr,ln)=>{jr.properties=ln;for(const dn of Hr)zt.accumulated=Tr[dn],Tr[dn]=nr[dn].evaluate(zt,jr)},qe}(Y)).load(lt.features):function(qe,ut){return new tn(qe,ut)}(lt,Y.geojsonVtOptions)}catch(qe){return Ae(qe)}this.loaded={};const $e={};if(Ue){const qe=Ue.finish();qe&&($e.resourceTiming={},$e.resourceTiming[Y.source]=JSON.parse(JSON.stringify(qe)))}Ae(null,$e)}})}reloadTile(Y,Ae){const Ee=this.loaded;return Ee&&Ee[Y.uid]?super.reloadTile(Y,Ae):this.loadTile(Y,Ae)}loadGeoJSON(Y,Ae){if(Y.request)return a.getJSON(Y.request,Ae);if(typeof Y.data=="string")try{Ae(null,JSON.parse(Y.data))}catch{Ae(new Error(`Input data given to '${Y.source}' is not a valid GeoJSON object.`))}else Ae(new Error(`Input data given to '${Y.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}}removeSource(Y,Ae){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Ae()}getClusterExpansionZoom(Y,Ae){try{Ae(null,this._geoJSONIndex.getClusterExpansionZoom(Y.clusterId))}catch(Ee){Ae(Ee)}}getClusterChildren(Y,Ae){try{Ae(null,this._geoJSONIndex.getChildren(Y.clusterId))}catch(Ee){Ae(Ee)}}getClusterLeaves(Y,Ae){try{Ae(null,this._geoJSONIndex.getLeaves(Y.clusterId,Y.limit,Y.offset))}catch(Ee){Ae(Ee)}}}class nn{constructor(Y){this.self=Y,this.actor=new a.Actor(Y,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:k,geojson:Ln},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(Ae,Ee)=>{if(this.workerSourceTypes[Ae])throw new Error(`Worker source with name "${Ae}" already registered.`);this.workerSourceTypes[Ae]=Ee},this.self.registerRTLTextPlugin=Ae=>{if(a.plugin.isParsed())throw new Error("RTL text plugin already registered.");a.plugin.applyArabicShaping=Ae.applyArabicShaping,a.plugin.processBidirectionalText=Ae.processBidirectionalText,a.plugin.processStyledBidirectionalText=Ae.processStyledBidirectionalText}}setReferrer(Y,Ae){this.referrer=Ae}setImages(Y,Ae,Ee){this.availableImages[Y]=Ae;for(const Ue in this.workerSources[Y]){const Xe=this.workerSources[Y][Ue];for(const lt in Xe)Xe[lt].availableImages=Ae}Ee()}setLayers(Y,Ae,Ee){this.getLayerIndex(Y).replace(Ae),Ee()}updateLayers(Y,Ae,Ee){this.getLayerIndex(Y).update(Ae.layers,Ae.removedIds),Ee()}loadTile(Y,Ae,Ee){this.getWorkerSource(Y,Ae.type,Ae.source).loadTile(Ae,Ee)}loadDEMTile(Y,Ae,Ee){this.getDEMWorkerSource(Y,Ae.source).loadTile(Ae,Ee)}reloadTile(Y,Ae,Ee){this.getWorkerSource(Y,Ae.type,Ae.source).reloadTile(Ae,Ee)}abortTile(Y,Ae,Ee){this.getWorkerSource(Y,Ae.type,Ae.source).abortTile(Ae,Ee)}removeTile(Y,Ae,Ee){this.getWorkerSource(Y,Ae.type,Ae.source).removeTile(Ae,Ee)}removeDEMTile(Y,Ae){this.getDEMWorkerSource(Y,Ae.source).removeTile(Ae)}removeSource(Y,Ae,Ee){if(!this.workerSources[Y]||!this.workerSources[Y][Ae.type]||!this.workerSources[Y][Ae.type][Ae.source])return;const Ue=this.workerSources[Y][Ae.type][Ae.source];delete this.workerSources[Y][Ae.type][Ae.source],Ue.removeSource!==void 0?Ue.removeSource(Ae,Ee):Ee()}loadWorkerSource(Y,Ae,Ee){try{this.self.importScripts(Ae.url),Ee()}catch(Ue){Ee(Ue.toString())}}syncRTLPluginState(Y,Ae,Ee){try{a.plugin.setState(Ae);const Ue=a.plugin.getPluginURL();if(a.plugin.isLoaded()&&!a.plugin.isParsed()&&Ue!=null){this.self.importScripts(Ue);const Xe=a.plugin.isParsed();Ee(Xe?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Ue}`),Xe)}}catch(Ue){Ee(Ue.toString())}}getAvailableImages(Y){let Ae=this.availableImages[Y];return Ae||(Ae=[]),Ae}getLayerIndex(Y){let Ae=this.layerIndexes[Y];return Ae||(Ae=this.layerIndexes[Y]=new p),Ae}getWorkerSource(Y,Ae,Ee){if(this.workerSources[Y]||(this.workerSources[Y]={}),this.workerSources[Y][Ae]||(this.workerSources[Y][Ae]={}),!this.workerSources[Y][Ae][Ee]){const Ue={send:(Xe,lt,$e)=>{this.actor.send(Xe,lt,$e,Y)}};this.workerSources[Y][Ae][Ee]=new this.workerSourceTypes[Ae](Ue,this.getLayerIndex(Y),this.getAvailableImages(Y))}return this.workerSources[Y][Ae][Ee]}getDEMWorkerSource(Y,Ae){return this.demWorkerSources[Y]||(this.demWorkerSources[Y]={}),this.demWorkerSources[Y][Ae]||(this.demWorkerSources[Y][Ae]=new R),this.demWorkerSources[Y][Ae]}enforceCacheSizeLimit(Y,Ae){a.enforceCacheSizeLimit(Ae)}}return a.isWorker()&&(self.worker=new nn(self)),nn}),c(["./shared"],function(a){var d=_;function _(g){return!function(i){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var m,v,S=new Blob([""],{type:"text/javascript"}),M=URL.createObjectURL(S);try{v=new Worker(M),m=!0}catch{m=!1}return v&&v.terminate(),URL.revokeObjectURL(M),m}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var m=document.createElement("canvas");m.width=m.height=1;var v=m.getContext("2d");if(!v)return!1;var S=v.getImageData(0,0,1,1);return S&&S.width===m.width}()?(p[u=i&&i.failIfMajorPerformanceCaveat]===void 0&&(p[u]=function(m){var v,S=function(M){var z=document.createElement("canvas"),q=Object.create(_.webGLContextAttributes);return q.failIfMajorPerformanceCaveat=M,z.getContext("webgl",q)||z.getContext("experimental-webgl",q)}(m);if(!S)return!1;try{v=S.createShader(S.VERTEX_SHADER)}catch{return!1}return!(!v||S.isContextLost())&&(S.shaderSource(v,"void main() {}"),S.compileShader(v),S.getShaderParameter(v,S.COMPILE_STATUS)===!0)}(u)),p[u]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var u}(g)}var p={};function E(g,i){if(Array.isArray(g)){if(!Array.isArray(i)||g.length!==i.length)return!1;for(let u=0;u<g.length;u++)if(!E(g[u],i[u]))return!1;return!0}if(typeof g=="object"&&g!==null&&i!==null){if(typeof i!="object"||Object.keys(g).length!==Object.keys(i).length)return!1;for(const u in g)if(!E(g[u],i[u]))return!1;return!0}return g===i}_.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class w{static testProp(i){if(!w.docStyle)return i[0];for(let u=0;u<i.length;u++)if(i[u]in w.docStyle)return i[u];return i[0]}static create(i,u,m){const v=window.document.createElement(i);return u!==void 0&&(v.className=u),m&&m.appendChild(v),v}static createNS(i,u){return window.document.createElementNS(i,u)}static disableDrag(){w.docStyle&&w.selectProp&&(w.userSelect=w.docStyle[w.selectProp],w.docStyle[w.selectProp]="none")}static enableDrag(){w.docStyle&&w.selectProp&&(w.docStyle[w.selectProp]=w.userSelect)}static setTransform(i,u){i.style[w.transformProp]=u}static addEventListener(i,u,m,v={}){i.addEventListener(u,m,"passive"in v?v:v.capture)}static removeEventListener(i,u,m,v={}){i.removeEventListener(u,m,"passive"in v?v:v.capture)}static suppressClickInternal(i){i.preventDefault(),i.stopPropagation(),window.removeEventListener("click",w.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",w.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",w.suppressClickInternal,!0)},0)}static mousePos(i,u){const m=i.getBoundingClientRect();return new a.pointGeometry(u.clientX-m.left-i.clientLeft,u.clientY-m.top-i.clientTop)}static touchPos(i,u){const m=i.getBoundingClientRect(),v=[];for(let S=0;S<u.length;S++)v.push(new a.pointGeometry(u[S].clientX-m.left-i.clientLeft,u[S].clientY-m.top-i.clientTop));return v}static mouseButton(i){return i.button}static remove(i){i.parentNode&&i.parentNode.removeChild(i)}}w.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,w.selectProp=w.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),w.transformProp=w.testProp(["transform","WebkitTransform"]);class x{constructor(i){this._transformRequestFn=i}transformRequest(i,u){return this._transformRequestFn&&this._transformRequestFn(i,u)||{url:i}}normalizeSpriteURL(i,u,m){const v=function(S){const M=S.match(Q);if(!M)throw new Error(`Unable to parse URL "${S}"`);return{protocol:M[1],authority:M[2],path:M[3]||"/",params:M[4]?M[4].split("&"):[]}}(i);return v.path+=`${u}${m}`,function(S){const M=S.params.length?`?${S.params.join("&")}`:"";return`${S.protocol}://${S.authority}${S.path}${M}`}(v)}setTransformRequest(i){this._transformRequestFn=i}}const Q=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;class k{constructor(i,u,m,v){this.context=i,this.format=m,this.texture=i.gl.createTexture(),this.update(u,v)}update(i,u,m){const{width:v,height:S}=i,M=!(this.size&&this.size[0]===v&&this.size[1]===S||m),{context:z}=this,{gl:q}=z;if(this.useMipmap=Boolean(u&&u.useMipmap),q.bindTexture(q.TEXTURE_2D,this.texture),z.pixelStoreUnpackFlipY.set(!1),z.pixelStoreUnpack.set(1),z.pixelStoreUnpackPremultiplyAlpha.set(this.format===q.RGBA&&(!u||u.premultiply!==!1)),M)this.size=[v,S],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||a.isImageBitmap(i)?q.texImage2D(q.TEXTURE_2D,0,this.format,this.format,q.UNSIGNED_BYTE,i):q.texImage2D(q.TEXTURE_2D,0,this.format,v,S,0,this.format,q.UNSIGNED_BYTE,i.data);else{const{x:J,y:se}=m||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||a.isImageBitmap(i)?q.texSubImage2D(q.TEXTURE_2D,0,J,se,q.RGBA,q.UNSIGNED_BYTE,i):q.texSubImage2D(q.TEXTURE_2D,0,J,se,v,S,q.RGBA,q.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&q.generateMipmap(q.TEXTURE_2D)}bind(i,u,m){const{context:v}=this,{gl:S}=v;S.bindTexture(S.TEXTURE_2D,this.texture),m!==S.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(m=S.LINEAR),i!==this.filter&&(S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MAG_FILTER,i),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MIN_FILTER,m||i),this.filter=i),u!==this.wrap&&(S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,u),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,u),this.wrap=u)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}function R(g){const{userImage:i}=g;return!!(i&&i.render&&i.render())&&(g.data.replace(new Uint8Array(i.data.buffer)),!0)}class P extends a.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:u,callback:m}of this.requestors)this._notify(u,m);this.requestors=[]}}getImage(i){return this.images[i]}addImage(i,u){if(this.images[i])throw new Error(`Image id ${i} already exist, use updateImage instead`);this._validate(i,u)&&(this.images[i]=u)}_validate(i,u){let m=!0;return this._validateStretch(u.stretchX,u.data&&u.data.width)||(this.fire(new a.ErrorEvent(new Error(`Image "${i}" has invalid "stretchX" value`))),m=!1),this._validateStretch(u.stretchY,u.data&&u.data.height)||(this.fire(new a.ErrorEvent(new Error(`Image "${i}" has invalid "stretchY" value`))),m=!1),this._validateContent(u.content,u)||(this.fire(new a.ErrorEvent(new Error(`Image "${i}" has invalid "content" value`))),m=!1),m}_validateStretch(i,u){if(!i)return!0;let m=0;for(const v of i){if(v[0]<m||v[1]<v[0]||u<v[1])return!1;m=v[1]}return!0}_validateContent(i,u){return!(i&&(i.length!==4||i[0]<0||u.data.width<i[0]||i[1]<0||u.data.height<i[1]||i[2]<0||u.data.width<i[2]||i[3]<0||u.data.height<i[3]||i[2]<i[0]||i[3]<i[1]))}updateImage(i,u){const m=this.images[i];if(m.data.width!==u.data.width||m.data.height!==u.data.height)throw new Error(`size mismatch between old image (${m.data.width}x${m.data.height}) and new image (${u.data.width}x${u.data.height}).`);u.version=m.version+1,this.images[i]=u,this.updatedImages[i]=!0}removeImage(i){const u=this.images[i];delete this.images[i],delete this.patterns[i],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i,u){let m=!0;if(!this.isLoaded())for(const v of i)this.images[v]||(m=!1);this.isLoaded()||m?this._notify(i,u):this.requestors.push({ids:i,callback:u})}_notify(i,u){const m={};for(const v of i){this.images[v]||this.fire(new a.Event("styleimagemissing",{id:v}));const S=this.images[v];S?m[v]={data:S.data.clone(),pixelRatio:S.pixelRatio,sdf:S.sdf,version:S.version,stretchX:S.stretchX,stretchY:S.stretchY,content:S.content,hasRenderCallback:Boolean(S.userImage&&S.userImage.render)}:a.warnOnce(`Image "${v}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}u(null,m)}getPixelSize(){const{width:i,height:u}=this.atlasImage;return{width:i,height:u}}getPattern(i){const u=this.patterns[i],m=this.getImage(i);if(!m)return null;if(u&&u.position.version===m.version)return u.position;if(u)u.position.version=m.version;else{const v={w:m.data.width+2,h:m.data.height+2,x:0,y:0},S=new a.ImagePosition(v,m);this.patterns[i]={bin:v,position:S}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const u=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new k(i,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const S in this.patterns)i.push(this.patterns[S].bin);const{w:u,h:m}=a.potpack(i),v=this.atlasImage;v.resize({width:u||1,height:m||1});for(const S in this.patterns){const{bin:M}=this.patterns[S],z=M.x+1,q=M.y+1,J=this.images[S].data,se=J.width,pe=J.height;a.RGBAImage.copy(J,v,{x:0,y:0},{x:z,y:q},{width:se,height:pe}),a.RGBAImage.copy(J,v,{x:0,y:pe-1},{x:z,y:q-1},{width:se,height:1}),a.RGBAImage.copy(J,v,{x:0,y:0},{x:z,y:q+pe},{width:se,height:1}),a.RGBAImage.copy(J,v,{x:se-1,y:0},{x:z-1,y:q},{width:1,height:pe}),a.RGBAImage.copy(J,v,{x:0,y:0},{x:z+se,y:q},{width:1,height:pe})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const u of i){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;const m=this.images[u];m||a.warnOnce(`Image with ID: "${u}" was not found`),R(m)&&this.updateImage(u,m)}}}const O=1e20;function G(g,i,u,m,v,S,M,z,q){for(let J=i;J<i+m;J++)V(g,u*S+J,S,v,M,z,q);for(let J=u;J<u+v;J++)V(g,J*S+i,1,m,M,z,q)}function V(g,i,u,m,v,S,M){S[0]=0,M[0]=-O,M[1]=O,v[0]=g[i];for(let z=1,q=0,J=0;z<m;z++){v[z]=g[i+z*u];const se=z*z;do{const pe=S[q];J=(v[z]-v[pe]+se-pe*pe)/(z-pe)/2}while(J<=M[q]&&--q>-1);q++,S[q]=z,M[q]=J,M[q+1]=O}for(let z=0,q=0;z<m;z++){for(;M[q+1]<z;)q++;const J=S[q],se=z-J;g[i+z*u]=v[J]+se*se}}class Z{constructor(i,u){this.requestManager=i,this.localIdeographFontFamily=u,this.entries={}}setURL(i){this.url=i}getGlyphs(i,u){const m=[];for(const v in i)for(const S of i[v])m.push({stack:v,id:S});a.asyncAll(m,({stack:v,id:S},M)=>{let z=this.entries[v];z||(z=this.entries[v]={glyphs:{},requests:{},ranges:{}});let q=z.glyphs[S];if(q!==void 0)return void M(null,{stack:v,id:S,glyph:q});if(q=this._tinySDF(z,v,S),q)return z.glyphs[S]=q,void M(null,{stack:v,id:S,glyph:q});const J=Math.floor(S/256);if(256*J>65535)return void M(new Error("glyphs > 65535 not supported"));if(z.ranges[J])return void M(null,{stack:v,id:S,glyph:q});let se=z.requests[J];se||(se=z.requests[J]=[],Z.loadGlyphRange(v,J,this.url,this.requestManager,(pe,we)=>{if(we){for(const Ve in we)this._doesCharSupportLocalGlyph(+Ve)||(z.glyphs[+Ve]=we[+Ve]);z.ranges[J]=!0}for(const Ve of se)Ve(pe,we);delete z.requests[J]})),se.push((pe,we)=>{pe?M(pe):we&&M(null,{stack:v,id:S,glyph:we[S]||null})})},(v,S)=>{if(v)u(v);else if(S){const M={};for(const{stack:z,id:q,glyph:J}of S)(M[z]||(M[z]={}))[q]=J&&{id:J.id,bitmap:J.bitmap.clone(),metrics:J.metrics};u(null,M)}})}_doesCharSupportLocalGlyph(i){return!!this.localIdeographFontFamily&&(a.unicodeBlockLookup["CJK Unified Ideographs"](i)||a.unicodeBlockLookup["Hangul Syllables"](i)||a.unicodeBlockLookup.Hiragana(i)||a.unicodeBlockLookup.Katakana(i))}_tinySDF(i,u,m){const v=this.localIdeographFontFamily;if(!v||!this._doesCharSupportLocalGlyph(m))return;let S=i.tinySDF;if(!S){let z="400";/bold/i.test(u)?z="900":/medium/i.test(u)?z="500":/light/i.test(u)&&(z="200"),S=i.tinySDF=new Z.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:v,fontWeight:z})}const M=S.draw(String.fromCharCode(m));return{id:m,bitmap:new a.AlphaImage({width:M.width||30,height:M.height||30},M.data),metrics:{width:M.glyphWidth||24,height:M.glyphHeight||24,left:M.glyphLeft||0,top:M.glyphTop-27||-8,advance:M.glyphAdvance||24}}}}Z.loadGlyphRange=function(g,i,u,m,v){const S=256*i,M=S+255,z=m.transformRequest(u.replace("{fontstack}",g).replace("{range}",`${S}-${M}`),a.ResourceType.Glyphs);a.getArrayBuffer(z,(q,J)=>{if(q)v(q);else if(J){const se={};for(const pe of a.parseGlyphPbf(J))se[pe.id]=pe;v(null,se)}})},Z.TinySDF=class{constructor({fontSize:g=24,buffer:i=3,radius:u=8,cutoff:m=.25,fontFamily:v="sans-serif",fontWeight:S="normal",fontStyle:M="normal"}={}){this.buffer=i,this.cutoff=m,this.radius=u;const z=this.size=g+4*i,q=this._createCanvas(z),J=this.ctx=q.getContext("2d",{willReadFrequently:!0});J.font=`${M} ${S} ${g}px ${v}`,J.textBaseline="alphabetic",J.textAlign="left",J.fillStyle="black",this.gridOuter=new Float64Array(z*z),this.gridInner=new Float64Array(z*z),this.f=new Float64Array(z),this.z=new Float64Array(z+1),this.v=new Uint16Array(z)}_createCanvas(g){const i=document.createElement("canvas");return i.width=i.height=g,i}draw(g){const{width:i,actualBoundingBoxAscent:u,actualBoundingBoxDescent:m,actualBoundingBoxLeft:v,actualBoundingBoxRight:S}=this.ctx.measureText(g),M=Math.ceil(u),z=Math.min(this.size-this.buffer,Math.ceil(S-v)),q=Math.min(this.size-this.buffer,M+Math.ceil(m)),J=z+2*this.buffer,se=q+2*this.buffer,pe=Math.max(J*se,0),we=new Uint8ClampedArray(pe),Ve={data:we,width:J,height:se,glyphWidth:z,glyphHeight:q,glyphTop:M,glyphLeft:0,glyphAdvance:i};if(z===0||q===0)return Ve;const{ctx:De,buffer:Oe,gridInner:ct,gridOuter:wt}=this;De.clearRect(Oe,Oe,z,q),De.fillText(g,Oe,Oe+M);const St=De.getImageData(Oe,Oe,z,q);wt.fill(O,0,pe),ct.fill(0,0,pe);for(let We=0;We<q;We++)for(let Rt=0;Rt<z;Rt++){const Mt=St.data[4*(We*z+Rt)+3]/255;if(Mt===0)continue;const Xt=(We+Oe)*J+Rt+Oe;if(Mt===1)wt[Xt]=0,ct[Xt]=O;else{const Zt=.5-Mt;wt[Xt]=Zt>0?Zt*Zt:0,ct[Xt]=Zt<0?Zt*Zt:0}}G(wt,0,0,J,se,J,this.f,this.v,this.z),G(ct,Oe,Oe,z,q,J,this.f,this.v,this.z);for(let We=0;We<pe;We++){const Rt=Math.sqrt(wt[We])-Math.sqrt(ct[We]);we[We]=Math.round(255-255*(Rt/this.radius+this.cutoff))}return Ve}};const te=new a.Properties({anchor:new a.DataConstantProperty(a.spec.light.anchor),position:new class{constructor(){this.specification=a.spec.light.position}possiblyEvaluate(g,i){return a.sphericalToCartesian(g.expression.evaluate(i))}interpolate(g,i,u){return{x:a.number(g.x,i.x,u),y:a.number(g.y,i.y,u),z:a.number(g.z,i.z,u)}}},color:new a.DataConstantProperty(a.spec.light.color),intensity:new a.DataConstantProperty(a.spec.light.intensity)}),ce="-transition";class he extends a.Evented{constructor(i){super(),this._transitionable=new a.Transitionable(te),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,u={}){if(!this._validate(a.validateLight,i,u))for(const m in i){const v=i[m];m.endsWith(ce)?this._transitionable.setTransition(m.slice(0,-ce.length),v):this._transitionable.setValue(m,v)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,u,m){return(!m||m.validate!==!1)&&a.emitValidationErrors(this,i.call(a.validateStyle,a.extend({value:u,style:{glyphs:!0,sprite:!0},styleSpec:a.spec})))}}class Ce{constructor(i,u){this.width=i,this.height=u,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(i,u){const m=i.join(",")+String(u);return this.dashEntry[m]||(this.dashEntry[m]=this.addDash(i,u)),this.dashEntry[m]}getDashRanges(i,u,m){const v=[];let S=i.length%2==1?-i[i.length-1]*m:0,M=i[0]*m,z=!0;v.push({left:S,right:M,isDash:z,zeroLength:i[0]===0});let q=i[0];for(let J=1;J<i.length;J++){z=!z;const se=i[J];S=q*m,q+=se,M=q*m,v.push({left:S,right:M,isDash:z,zeroLength:se===0})}return v}addRoundDash(i,u,m){const v=u/2;for(let S=-m;S<=m;S++){const M=this.width*(this.nextRow+m+S);let z=0,q=i[z];for(let J=0;J<this.width;J++){J/q.right>1&&(q=i[++z]);const se=Math.abs(J-q.left),pe=Math.abs(J-q.right),we=Math.min(se,pe);let Ve;const De=S/m*(v+1);if(q.isDash){const Oe=v-Math.abs(De);Ve=Math.sqrt(we*we+Oe*Oe)}else Ve=v-Math.sqrt(we*we+De*De);this.data[M+J]=Math.max(0,Math.min(255,Ve+128))}}}addRegularDash(i){for(let z=i.length-1;z>=0;--z){const q=i[z],J=i[z+1];q.zeroLength?i.splice(z,1):J&&J.isDash===q.isDash&&(J.left=q.left,i.splice(z,1))}const u=i[0],m=i[i.length-1];u.isDash===m.isDash&&(u.left=m.left-this.width,m.right=u.right+this.width);const v=this.width*this.nextRow;let S=0,M=i[S];for(let z=0;z<this.width;z++){z/M.right>1&&(M=i[++S]);const q=Math.abs(z-M.left),J=Math.abs(z-M.right),se=Math.min(q,J);this.data[v+z]=Math.max(0,Math.min(255,(M.isDash?se:-se)+128))}}addDash(i,u){const m=u?7:0,v=2*m+1;if(this.nextRow+v>this.height)return a.warnOnce("LineAtlas out of space"),null;let S=0;for(let z=0;z<i.length;z++)S+=i[z];if(S!==0){const z=this.width/S,q=this.getDashRanges(i,this.width,z);u?this.addRoundDash(q,z,m):this.addRegularDash(q)}const M={y:(this.nextRow+m+.5)/this.height,height:2*m/this.height,width:S};return this.nextRow+=v,this.dirty=!0,M}bind(i){const u=i.gl;this.texture?(u.bindTexture(u.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,u.texSubImage2D(u.TEXTURE_2D,0,0,0,this.width,this.height,u.ALPHA,u.UNSIGNED_BYTE,this.data))):(this.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,this.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.ALPHA,this.width,this.height,0,u.ALPHA,u.UNSIGNED_BYTE,this.data))}}class fe{constructor(i,u){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=a.uniqueId();const m=this.workerPool.acquire(this.id);for(let v=0;v<m.length;v++){const S=new fe.Actor(m[v],u,this.id);S.name=`Worker ${v}`,this.actors.push(S)}if(!this.actors.length)throw new Error("No actors found")}broadcast(i,u,m){a.asyncAll(this.actors,(v,S)=>{v.send(i,u,S)},m=m||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(i=>{i.remove()}),this.actors=[],this.workerPool.release(this.id)}}function ee(g,i,u){const m=function(v,S){if(v)return u(v);if(S){const M=a.pick(a.extend(S,g),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);S.vector_layers&&(M.vectorLayers=S.vector_layers,M.vectorLayerIds=M.vectorLayers.map(z=>z.id)),u(null,M)}};return g.url?a.getJSON(i.transformRequest(g.url,a.ResourceType.Source),m):a.exported.frame(()=>m(null,g))}fe.Actor=a.Actor;class re{constructor(i,u,m){this.bounds=a.LngLatBounds.convert(this.validateBounds(i)),this.minzoom=u||0,this.maxzoom=m||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const u=Math.pow(2,i.z),m=Math.floor(a.mercatorXfromLng(this.bounds.getWest())*u),v=Math.floor(a.mercatorYfromLat(this.bounds.getNorth())*u),S=Math.ceil(a.mercatorXfromLng(this.bounds.getEast())*u),M=Math.ceil(a.mercatorYfromLat(this.bounds.getSouth())*u);return i.x>=m&&i.x<S&&i.y>=v&&i.y<M}}class be extends a.Evented{constructor(i,u,m,v){if(super(),this.id=i,this.dispatcher=m,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.extend(this,a.pick(u,["url","scheme","tileSize","promoteId"])),this._options=a.extend({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(v)}load(){this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=ee(this._options,this.map._requestManager,(i,u)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),i?this.fire(new a.ErrorEvent(i)):u&&(a.extend(this,u),u.bounds&&(this.tileBounds=new re(u.bounds,this.minzoom,this.maxzoom)),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.cancel(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return a.extend({},this._options)}loadTile(i,u){const m=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),v={request:this.map._requestManager.transformRequest(m,a.ResourceType.Tile),uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function S(M,z){return delete i.request,i.aborted?u(null):M&&M.status!==404?u(M):(z&&z.resourceTiming&&(i.resourceTiming=z.resourceTiming),this.map._refreshExpiredTiles&&z&&i.setExpiryData(z),i.loadVectorData(z,this.map.painter),a.cacheEntryPossiblyAdded(this.dispatcher),u(null),void(i.reloadCallback&&(this.loadTile(i,i.reloadCallback),i.reloadCallback=null)))}v.request.collectResourceTiming=this._collectResourceTiming,i.actor&&i.state!=="expired"?i.state==="loading"?i.reloadCallback=u:i.request=i.actor.send("reloadTile",v,S.bind(this)):(i.actor=this.dispatcher.getActor(),i.request=i.actor.send("loadTile",v,S.bind(this)))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.actor&&i.actor.send("abortTile",{uid:i.uid,type:this.type,source:this.id},void 0)}unloadTile(i){i.unloadVectorData(),i.actor&&i.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class me extends a.Evented{constructor(i,u,m,v){super(),this.id=i,this.dispatcher=m,this.setEventedParent(v),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.extend({type:"raster"},u),a.extend(this,a.pick(u,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=ee(this._options,this.map._requestManager,(i,u)=>{this._tileJSONRequest=null,this._loaded=!0,i?this.fire(new a.ErrorEvent(i)):u&&(a.extend(this,u),u.bounds&&(this.tileBounds=new re(u.bounds,this.minzoom,this.maxzoom)),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return a.extend({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i,u){const m=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);i.request=a.getImage(this.map._requestManager.transformRequest(m,a.ResourceType.Tile),(v,S,M)=>{if(delete i.request,i.aborted)i.state="unloaded",u(null);else if(v)i.state="errored",u(v);else if(S){this.map._refreshExpiredTiles&&i.setExpiryData(M);const z=this.map.painter.context,q=z.gl;i.texture=this.map.painter.getTileTexture(S.width),i.texture?i.texture.update(S,{useMipmap:!0}):(i.texture=new k(z,S,q.RGBA,{useMipmap:!0}),i.texture.bind(q.LINEAR,q.CLAMP_TO_EDGE,q.LINEAR_MIPMAP_NEAREST),z.extTextureFilterAnisotropic&&q.texParameterf(q.TEXTURE_2D,z.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,z.extTextureFilterAnisotropicMax)),i.state="loaded",a.cacheEntryPossiblyAdded(this.dispatcher),u(null)}})}abortTile(i,u){i.request&&(i.request.cancel(),delete i.request),u()}unloadTile(i,u){i.texture&&this.map.painter.saveTileTexture(i.texture),u()}hasTransition(){return!1}}let Re;class _e extends me{constructor(i,u,m,v){super(i,u,m,v),this.type="raster-dem",this.maxzoom=22,this._options=a.extend({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(i,u){const m=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function v(S,M){S&&(i.state="errored",u(S)),M&&(i.dem=M,i.needsHillshadePrepare=!0,i.needsTerrainPrepare=!0,i.state="loaded",u(null))}i.request=a.getImage(this.map._requestManager.transformRequest(m,a.ResourceType.Tile),function(S,M){if(delete i.request,i.aborted)i.state="unloaded",u(null);else if(S)i.state="errored",u(S);else if(M){this.map._refreshExpiredTiles&&i.setExpiryData(M),delete M.cacheControl,delete M.expires;const z=a.isImageBitmap(M)&&(Re==null&&(Re=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),Re)?M:a.exported.getImageData(M,1),q={uid:i.uid,coord:i.tileID,source:this.id,rawImageData:z,encoding:this.encoding};i.actor&&i.state!=="expired"||(i.actor=this.dispatcher.getActor(),i.actor.send("loadDEMTile",q,v.bind(this)))}}.bind(this)),i.neighboringTiles=this._getNeighboringTiles(i.tileID)}_getNeighboringTiles(i){const u=i.canonical,m=Math.pow(2,u.z),v=(u.x-1+m)%m,S=u.x===0?i.wrap-1:i.wrap,M=(u.x+1+m)%m,z=u.x+1===m?i.wrap+1:i.wrap,q={};return q[new a.OverscaledTileID(i.overscaledZ,S,u.z,v,u.y).key]={backfilled:!1},q[new a.OverscaledTileID(i.overscaledZ,z,u.z,M,u.y).key]={backfilled:!1},u.y>0&&(q[new a.OverscaledTileID(i.overscaledZ,S,u.z,v,u.y-1).key]={backfilled:!1},q[new a.OverscaledTileID(i.overscaledZ,i.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},q[new a.OverscaledTileID(i.overscaledZ,z,u.z,M,u.y-1).key]={backfilled:!1}),u.y+1<m&&(q[new a.OverscaledTileID(i.overscaledZ,S,u.z,v,u.y+1).key]={backfilled:!1},q[new a.OverscaledTileID(i.overscaledZ,i.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},q[new a.OverscaledTileID(i.overscaledZ,z,u.z,M,u.y+1).key]={backfilled:!1}),q}unloadTile(i){i.demTexture&&this.map.painter.saveTileTexture(i.demTexture),i.fbo&&(i.fbo.destroy(),delete i.fbo),i.dem&&delete i.dem,delete i.neighboringTiles,i.state="unloaded",i.actor&&i.actor.send("removeDEMTile",{uid:i.uid,source:this.id})}}class He extends a.Evented{constructor(i,u,m,v){super(),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=m.getActor(),this.setEventedParent(v),this._data=u.data,this._options=a.extend({},u),this._collectResourceTiming=u.collectResourceTiming,u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId;const S=a.EXTENT/this.tileSize;this.workerOptions=a.extend({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:(u.buffer!==void 0?u.buffer:128)*S,tolerance:(u.tolerance!==void 0?u.tolerance:.375)*S,extent:a.EXTENT,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:u.clusterMaxZoom!==void 0?u.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,u.clusterMinPoints||2),extent:a.EXTENT,radius:(u.clusterRadius||50)*S,log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(i){this.map=i,this.load()}setData(i){return this._data=i,this._updateWorkerData("content"),this}getClusterExpansionZoom(i,u){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:i,source:this.id},u),this}getClusterChildren(i,u){return this.actor.send("geojson.getClusterChildren",{clusterId:i,source:this.id},u),this}getClusterLeaves(i,u,m,v){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:i,limit:u,offset:m},v),this}_updateWorkerData(i){const u=a.extend({},this.workerOptions),m=this._data;typeof m=="string"?(u.request=this.map._requestManager.transformRequest(a.exported.resolveURL(m),a.ResourceType.Source),u.request.collectResourceTiming=this._collectResourceTiming):u.data=JSON.stringify(m),this._pendingLoads++,this.fire(new a.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,u,(v,S)=>{if(this._pendingLoads--,this._removed||S&&S.abandoned)return void this.fire(new a.Event("dataabort",{dataType:"source",sourceDataType:i}));let M=null;if(S&&S.resourceTiming&&S.resourceTiming[this.id]&&(M=S.resourceTiming[this.id].slice(0)),v)return void this.fire(new a.ErrorEvent(v));const z={dataType:"source",sourceDataType:i};this._collectResourceTiming&&M&&M.length>0&&a.extend(z,{resourceTiming:M}),this.fire(new a.Event("data",z))})}loaded(){return this._pendingLoads===0}loadTile(i,u){const m=i.actor?"reloadTile":"loadTile";i.actor=this.actor;const v={type:this.type,uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};i.request=this.actor.send(m,v,(S,M)=>(delete i.request,i.unloadVectorData(),i.aborted?u(null):S?u(S):(i.loadVectorData(M,this.map.painter,m==="reloadTile"),u(null))))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.aborted=!0}unloadTile(i){i.unloadVectorData(),this.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return a.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var Le=a.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Je extends a.Evented{constructor(i,u,m,v){super(),this.id=i,this.dispatcher=m,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(v),this.options=u}load(i,u){this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this.url=this.options.url,a.getImage(this.map._requestManager.transformRequest(this.url,a.ResourceType.Image),(m,v)=>{this._loaded=!0,m?this.fire(new a.ErrorEvent(m)):v&&(this.image=v,i&&(this.coordinates=i),u&&u(),this._finishLoading())})}loaded(){return this._loaded}updateImage(i){return this.image&&i.url?(this.options.url=i.url,this.load(i.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}setCoordinates(i){this.coordinates=i;const u=i.map(a.MercatorCoordinate.fromLngLat);this.tileID=function(v){let S=1/0,M=1/0,z=-1/0,q=-1/0;for(const we of v)S=Math.min(S,we.x),M=Math.min(M,we.y),z=Math.max(z,we.x),q=Math.max(q,we.y);const J=Math.max(z-S,q-M),se=Math.max(0,Math.floor(-Math.log(J)/Math.LN2)),pe=Math.pow(2,se);return new a.CanonicalTileID(se,Math.floor((S+z)/2*pe),Math.floor((M+q)/2*pe))}(u),this.minzoom=this.maxzoom=this.tileID.z;const m=u.map(v=>this.tileID.getTilePoint(v)._round());return this._boundsArray=new a.RasterBoundsArray,this._boundsArray.emplaceBack(m[0].x,m[0].y,0,0),this._boundsArray.emplaceBack(m[1].x,m[1].y,a.EXTENT,0),this._boundsArray.emplaceBack(m[3].x,m[3].y,0,a.EXTENT),this._boundsArray.emplaceBack(m[2].x,m[2].y,a.EXTENT,a.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const i=this.map.painter.context,u=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,Le.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new k(i,this.image,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));for(const m in this.tiles){const v=this.tiles[m];v.state!=="loaded"&&(v.state="loaded",v.texture=this.texture)}}loadTile(i,u){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={},u(null)):(i.state="errored",u(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class ke extends Je{constructor(i,u,m,v){super(i,u,m,v),this.roundZoom=!0,this.type="video",this.options=u}load(){this._loaded=!1;const i=this.options;this.urls=[];for(const u of i.urls)this.urls.push(this.map._requestManager.transformRequest(u,a.ResourceType.Source).url);a.getVideo(this.urls,(u,m)=>{this._loaded=!0,u?this.fire(new a.ErrorEvent(u)):m&&(this.video=m,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(i){if(this.video){const u=this.video.seekable;i<u.start(0)||i>u.end(0)?this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=i}}getVideo(){return this.video}onAdd(i){this.map||(this.map=i,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const i=this.map.painter.context,u=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,Le.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),u.texSubImage2D(u.TEXTURE_2D,0,0,0,u.RGBA,u.UNSIGNED_BYTE,this.video)):(this.texture=new k(i,this.video,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));for(const m in this.tiles){const v=this.tiles[m];v.state!=="loaded"&&(v.state="loaded",v.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class kt extends Je{constructor(i,u,m,v){super(i,u,m,v),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some(S=>!Array.isArray(S)||S.length!==2||S.some(M=>typeof M!="number"))||this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${i}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${i}`,null,'missing required property "coordinates"'))),u.animate&&typeof u.animate!="boolean"&&this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${i}`,null,'optional "animate" property must be a boolean value'))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof HTMLCanvasElement||this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${i}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${i}`,null,'missing required property "canvas"'))),this.options=u,this.animate=u.animate===void 0||u.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(i){this.map=i,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let i=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,i=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,i=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const u=this.map.painter.context,m=u.gl;this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,Le.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(i||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new k(u,this.canvas,m.RGBA,{premultiply:!0});for(const v in this.tiles){const S=this.tiles[v];S.state!=="loaded"&&(S.state="loaded",S.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const i of[this.canvas.width,this.canvas.height])if(isNaN(i)||i<=0)return!0;return!1}}const ie={vector:be,raster:me,"raster-dem":_e,geojson:He,video:ke,image:Je,canvas:kt};function Se(g,i){const u=a.create();return a.translate(u,u,[1,1,0]),a.scale(u,u,[.5*g.width,.5*g.height,1]),a.multiply(u,u,g.calculatePosMatrix(i.toUnwrapped()))}function Qe(g,i,u,m,v,S){const M=function(pe,we,Ve){if(pe)for(const De of pe){const Oe=we[De];if(Oe&&Oe.source===Ve&&Oe.type==="fill-extrusion")return!0}else for(const De in we){const Oe=we[De];if(Oe.source===Ve&&Oe.type==="fill-extrusion")return!0}return!1}(v&&v.layers,i,g.id),z=S.maxPitchScaleFactor(),q=g.tilesIn(m,z,M);q.sort(Ke);const J=[];for(const pe of q)J.push({wrappedTileID:pe.tileID.wrapped().key,queryResults:pe.tile.queryRenderedFeatures(i,u,g._state,pe.queryGeometry,pe.cameraQueryGeometry,pe.scale,v,S,z,Se(g.transform,pe.tileID))});const se=function(pe){const we={},Ve={};for(const De of pe){const Oe=De.queryResults,ct=De.wrappedTileID,wt=Ve[ct]=Ve[ct]||{};for(const St in Oe){const We=Oe[St],Rt=wt[St]=wt[St]||{},Mt=we[St]=we[St]||[];for(const Xt of We)Rt[Xt.featureIndex]||(Rt[Xt.featureIndex]=!0,Mt.push(Xt))}}return we}(J);for(const pe in se)se[pe].forEach(we=>{const Ve=we.feature,De=g.getFeatureState(Ve.layer["source-layer"],Ve.id);Ve.source=Ve.layer.source,Ve.layer["source-layer"]&&(Ve.sourceLayer=Ve.layer["source-layer"]),Ve.state=De});return se}function Ke(g,i){const u=g.tileID,m=i.tileID;return u.overscaledZ-m.overscaledZ||u.canonical.y-m.canonical.y||u.wrap-m.wrap||u.canonical.x-m.canonical.x}class ot{constructor(i,u){this.tileID=i,this.uid=a.uniqueId(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.textures=[],this.textureCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(i){const u=i+this.timeAdded;u<a.exported.now()||this.fadeEndTime&&u<this.fadeEndTime||(this.fadeEndTime=u)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(i){this.demTexture&&i.saveTileTexture(this.demTexture),this.textures.forEach(u=>i.saveTileTexture(u)),this.demTexture=null,this.textures=[],this.textureCoords={}}loadVectorData(i,u,m){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(v,S){const M={};if(!S)return M;for(const z of v){const q=z.layerIds.map(J=>S.getLayer(J)).filter(Boolean);if(q.length!==0){z.layers=q,z.stateDependentLayerIds&&(z.stateDependentLayers=z.stateDependentLayerIds.map(J=>q.filter(se=>se.id===J)[0]));for(const J of q)M[J.id]=z}}return M}(i.buckets,u.style),this.hasSymbolBuckets=!1;for(const v in this.buckets){const S=this.buckets[v];if(S instanceof a.SymbolBucket){if(this.hasSymbolBuckets=!0,!m)break;S.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const v in this.buckets){const S=this.buckets[v];if(S instanceof a.SymbolBucket&&S.hasRTLText){this.hasRTLText=!0,a.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const v in this.buckets){const S=this.buckets[v];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(v).queryRadius(S))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage)}else this.collisionBoxArray=new a.CollisionBoxArray}unloadVectorData(){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(i){return this.buckets[i.id]}upload(i){for(const m in this.buckets){const v=this.buckets[m];v.uploadPending()&&v.upload(i)}const u=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new k(i,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new k(i,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,u,m,v,S,M,z,q,J,se){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:v,cameraQueryGeometry:S,scale:M,tileSize:this.tileSize,pixelPosMatrix:se,transform:q,params:z,queryPadding:this.queryPadding*J},i,u,m):{}}querySourceFeatures(i,u){const m=this.latestFeatureIndex;if(!m||!m.rawTileData)return;const v=m.loadVTLayers(),S=u?u.sourceLayer:"",M=v._geojsonTileLayer||v[S];if(!M)return;const z=a.createFilter(u&&u.filter),{z:q,x:J,y:se}=this.tileID.canonical,pe={z:q,x:J,y:se};for(let we=0;we<M.length;we++){const Ve=M.feature(we);if(z.needGeometry){const ct=a.toEvaluationFeature(Ve,!0);if(!z.filter(new a.EvaluationParameters(this.tileID.overscaledZ),ct,this.tileID.canonical))continue}else if(!z.filter(new a.EvaluationParameters(this.tileID.overscaledZ),Ve))continue;const De=m.getId(Ve,S),Oe=new a.GeoJSONFeature(Ve,q,J,se,De);Oe.tile=pe,i.push(Oe)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const u=this.expirationTime;if(i.cacheControl){const m=a.parseCacheControl(i.cacheControl);m["max-age"]&&(this.expirationTime=Date.now()+1e3*m["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const m=Date.now();let v=!1;if(this.expirationTime>m)v=!1;else if(u)if(this.expirationTime<u)v=!0;else{const S=this.expirationTime-u;S?this.expirationTime=m+Math.max(S,3e4):v=!0}else v=!0;v?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0)return;const m=this.latestFeatureIndex.loadVTLayers();for(const v in this.buckets){if(!u.style.hasLayer(v))continue;const S=this.buckets[v],M=S.layers[0].sourceLayer||"_geojsonTileLayer",z=m[M],q=i[M];if(!z||!q||Object.keys(q).length===0)continue;S.update(q,z,this.imageAtlas&&this.imageAtlas.patternPositions||{});const J=u&&u.style&&u.style.getLayer(v);J&&(this.queryPadding=Math.max(this.queryPadding,J.queryRadius(S)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<a.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=a.exported.now()+i}setDependencies(i,u){const m={};for(const v of u)m[v]=!0;this.dependencies[i]=m}hasDependency(i,u){for(const m of i){const v=this.dependencies[m];if(v){for(const S of u)if(v[S])return!0}}return!1}}class dt{constructor(i,u){this.max=i,this.onRemove=u,this.reset()}reset(){for(const i in this.data)for(const u of this.data[i])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(i,u,m){const v=i.wrapped().key;this.data[v]===void 0&&(this.data[v]=[]);const S={value:u,timeout:void 0};if(m!==void 0&&(S.timeout=setTimeout(()=>{this.remove(i,S)},m)),this.data[v].push(S),this.order.push(v),this.order.length>this.max){const M=this._getAndRemoveByKey(this.order[0]);M&&this.onRemove(M)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const u=this.data[i].shift();return u.timeout&&clearTimeout(u.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),u.value}getByKey(i){const u=this.data[i];return u?u[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,u){if(!this.has(i))return this;const m=i.wrapped().key,v=u===void 0?0:this.data[m].indexOf(u),S=this.data[m][v];return this.data[m].splice(v,1),S.timeout&&clearTimeout(S.timeout),this.data[m].length===0&&delete this.data[m],this.onRemove(S.value),this.order.splice(this.order.indexOf(m),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(i){const u=[];for(const m in this.data)for(const v of this.data[m])i(v.value)||u.push(v);for(const m of u)this.remove(m.value.tileID,m)}}class Bt{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,u,m){const v=String(u);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][v]=this.stateChanges[i][v]||{},a.extend(this.stateChanges[i][v],m),this.deletedStates[i]===null){this.deletedStates[i]={};for(const S in this.state[i])S!==v&&(this.deletedStates[i][S]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][v]===null){this.deletedStates[i][v]={};for(const S in this.state[i][v])m[S]||(this.deletedStates[i][v][S]=null)}else for(const S in m)this.deletedStates[i]&&this.deletedStates[i][v]&&this.deletedStates[i][v][S]===null&&delete this.deletedStates[i][v][S]}removeFeatureState(i,u,m){if(this.deletedStates[i]===null)return;const v=String(u);if(this.deletedStates[i]=this.deletedStates[i]||{},m&&u!==void 0)this.deletedStates[i][v]!==null&&(this.deletedStates[i][v]=this.deletedStates[i][v]||{},this.deletedStates[i][v][m]=null);else if(u!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][v])for(m in this.deletedStates[i][v]={},this.stateChanges[i][v])this.deletedStates[i][v][m]=null;else this.deletedStates[i][v]=null;else this.deletedStates[i]=null}getState(i,u){const m=String(u),v=a.extend({},(this.state[i]||{})[m],(this.stateChanges[i]||{})[m]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const S=this.deletedStates[i][u];if(S===null)return{};for(const M in S)delete v[M]}return v}initializeTileState(i,u){i.setFeatureState(this.state,u)}coalesceChanges(i,u){const m={};for(const v in this.stateChanges){this.state[v]=this.state[v]||{};const S={};for(const M in this.stateChanges[v])this.state[v][M]||(this.state[v][M]={}),a.extend(this.state[v][M],this.stateChanges[v][M]),S[M]=this.state[v][M];m[v]=S}for(const v in this.deletedStates){this.state[v]=this.state[v]||{};const S={};if(this.deletedStates[v]===null)for(const M in this.state[v])S[M]={},this.state[v][M]={};else for(const M in this.deletedStates[v]){if(this.deletedStates[v][M]===null)this.state[v][M]={};else for(const z of Object.keys(this.deletedStates[v][M]))delete this.state[v][M][z];S[M]=this.state[v][M]}m[v]=m[v]||{},a.extend(m[v],S)}if(this.stateChanges={},this.deletedStates={},Object.keys(m).length!==0)for(const v in i)i[v].setFeatureState(m,u)}}class Ge extends a.Evented{constructor(i,u,m){super(),this.id=i,this.dispatcher=m,this.on("data",v=>{v.dataType==="source"&&v.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&v.dataType==="source"&&v.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain))}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=function(v,S,M,z){const q=new ie[S.type](v,S,M,z);if(q.id!==v)throw new Error(`Expected Source id to be ${v} instead of ${q.id}`);return a.bindAll(["load","abort","unload","serialize","prepare"],q),q}(i,u,m,this),this._tiles={},this._cache=new dt(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Bt}onAdd(i){this.map=i,this._maxTileCacheSize=i?i._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(i)}onRemove(i){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(i)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const i in this._tiles){const u=this._tiles[i];if(u.state!=="loaded"&&u.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(i,u){return this._source.loadTile(i,u)}_unloadTile(i){if(this._source.unloadTile)return this._source.unloadTile(i,()=>{})}_abortTile(i){this._source.abortTile&&this._source.abortTile(i,()=>{}),this._source.fire(new a.Event("dataabort",{tile:i,coord:i.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const u in this._tiles){const m=this._tiles[u];m.upload(i),m.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(i=>i.tileID).sort(rt).map(i=>i.key)}getRenderableIds(i){const u=[];for(const m in this._tiles)this._isIdRenderable(m,i)&&u.push(this._tiles[m]);return i?u.sort((m,v)=>{const S=m.tileID,M=v.tileID,z=new a.pointGeometry(S.canonical.x,S.canonical.y)._rotate(this.transform.angle),q=new a.pointGeometry(M.canonical.x,M.canonical.y)._rotate(this.transform.angle);return S.overscaledZ-M.overscaledZ||q.y-z.y||q.x-z.x}).map(m=>m.tileID.key):u.map(m=>m.tileID).sort(rt).map(m=>m.key)}hasRenderableParent(i){const u=this.findLoadedParent(i,0);return!!u&&this._isIdRenderable(u.tileID.key)}_isIdRenderable(i,u){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(u||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(i,"reloading")}}_reloadTile(i,u){const m=this._tiles[i];m&&(m.state!=="loading"&&(m.state=u),this._loadTile(m,this._tileLoaded.bind(this,m,i,u)))}_tileLoaded(i,u,m,v){if(v)return i.state="errored",void(v.status!==404?this._source.fire(new a.ErrorEvent(v,{tile:i})):this.update(this.transform,this.terrain));i.timeAdded=a.exported.now(),m==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(u,i),this.getSource().type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),i.aborted||this._source.fire(new a.Event("data",{dataType:"source",tile:i,coord:i.tileID}))}_backfillDEM(i){const u=this.getRenderableIds();for(let v=0;v<u.length;v++){const S=u[v];if(i.neighboringTiles&&i.neighboringTiles[S]){const M=this.getTileByID(S);m(i,M),m(M,i)}}function m(v,S){v.needsHillshadePrepare=!0,v.needsTerrainPrepare=!0;let M=S.tileID.canonical.x-v.tileID.canonical.x;const z=S.tileID.canonical.y-v.tileID.canonical.y,q=Math.pow(2,v.tileID.canonical.z),J=S.tileID.key;M===0&&z===0||Math.abs(z)>1||(Math.abs(M)>1&&(Math.abs(M+q)===1?M+=q:Math.abs(M-q)===1&&(M-=q)),S.dem&&v.dem&&(v.dem.backfillBorder(S.dem,M,z),v.neighboringTiles&&v.neighboringTiles[J]&&(v.neighboringTiles[J].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,u,m,v){for(const S in this._tiles){let M=this._tiles[S];if(v[S]||!M.hasData()||M.tileID.overscaledZ<=u||M.tileID.overscaledZ>m)continue;let z=M.tileID;for(;M&&M.tileID.overscaledZ>u+1;){const J=M.tileID.scaledTo(M.tileID.overscaledZ-1);M=this._tiles[J.key],M&&M.hasData()&&(z=J)}let q=z;for(;q.overscaledZ>u;)if(q=q.scaledTo(q.overscaledZ-1),i[q.key]){v[z.key]=z;break}}}findLoadedParent(i,u){if(i.key in this._loadedParentTiles){const m=this._loadedParentTiles[i.key];return m&&m.tileID.overscaledZ>=u?m:null}for(let m=i.overscaledZ-1;m>=u;m--){const v=i.scaledTo(m),S=this._getLoadedTile(v);if(S)return S}}_getLoadedTile(i){const u=this._tiles[i.key];return u&&u.hasData()?u:this._cache.getByKey(i.wrapped().key)}updateCacheSize(i){const u=Math.ceil(i.width/this._source.tileSize)+1,m=Math.ceil(i.height/this._source.tileSize)+1,v=Math.floor(u*m*5),S=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,v):v;this._cache.setMaxSize(S)}handleWrapJump(i){const u=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,u){const m={};for(const v in this._tiles){const S=this._tiles[v];S.tileID=S.tileID.unwrapTo(S.tileID.wrap+u),m[S.tileID.key]=S}this._tiles=m;for(const v in this._timers)clearTimeout(this._timers[v]),delete this._timers[v];for(const v in this._tiles)this._setTileReloadTimer(v,this._tiles[v])}}update(i,u){if(this.transform=i,this.terrain=u,!this._sourceLoaded||this._paused)return;let m;this.updateCacheSize(i),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?m=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(J=>new a.OverscaledTileID(J.canonical.z,J.wrap,J.canonical.z,J.canonical.x,J.canonical.y)):(m=i.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:u}),this._source.hasTile&&(m=m.filter(J=>this._source.hasTile(J)))):m=[];const v=i.coveringZoomLevel(this._source),S=Math.max(v-Ge.maxOverzooming,this._source.minzoom),M=Math.max(v+Ge.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const J={};for(const se of m)if(se.canonical.z>this._source.minzoom){const pe=se.scaledTo(se.canonical.z-1);J[pe.key]=pe;const we=se.scaledTo(Math.max(this._source.minzoom,Math.min(se.canonical.z,5)));J[we.key]=we}m=m.concat(Object.values(J))}const z=this._updateRetainedTiles(m,v);if(Qt(this._source.type)){const J={},se={},pe=Object.keys(z);for(const we of pe){const Ve=z[we],De=this._tiles[we];if(!De||De.fadeEndTime&&De.fadeEndTime<=a.exported.now())continue;const Oe=this.findLoadedParent(Ve,S);Oe&&(this._addTile(Oe.tileID),J[Oe.tileID.key]=Oe.tileID),se[we]=Ve}this._retainLoadedChildren(se,v,M,z);for(const we in J)z[we]||(this._coveredTiles[we]=!0,z[we]=J[we]);if(u){const we={},Ve={};for(const De of m)this._tiles[De.key].hasData()?we[De.key]=De:Ve[De.key]=De;for(const De in Ve){const Oe=Ve[De].children(this._source.maxzoom);this._tiles[Oe[0].key]&&this._tiles[Oe[1].key]&&this._tiles[Oe[2].key]&&this._tiles[Oe[3].key]&&(we[Oe[0].key]=z[Oe[0].key]=Oe[0],we[Oe[1].key]=z[Oe[1].key]=Oe[1],we[Oe[2].key]=z[Oe[2].key]=Oe[2],we[Oe[3].key]=z[Oe[3].key]=Oe[3],delete Ve[De])}for(const De in Ve){const Oe=this.findLoadedParent(Ve[De],this._source.minzoom);if(Oe){we[Oe.tileID.key]=z[Oe.tileID.key]=Oe.tileID;for(const ct in we)we[ct].isChildOf(Oe.tileID)&&delete we[ct]}}for(const De in this._tiles)we[De]||(this._coveredTiles[De]=!0)}}for(const J in z)this._tiles[J].clearFadeHold();const q=a.keysDifference(this._tiles,z);for(const J of q){const se=this._tiles[J];se.hasSymbolBuckets&&!se.holdingForFade()?se.setHoldDuration(this.map._fadeDuration):se.hasSymbolBuckets&&!se.symbolFadeFinished()||this._removeTile(J)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(i)}_updateRetainedTiles(i,u){const m={},v={},S=Math.max(u-Ge.maxOverzooming,this._source.minzoom),M=Math.max(u+Ge.maxUnderzooming,this._source.minzoom),z={};for(const q of i){const J=this._addTile(q);m[q.key]=q,J.hasData()||u<this._source.maxzoom&&(z[q.key]=q)}this._retainLoadedChildren(z,u,M,m);for(const q of i){let J=this._tiles[q.key];if(J.hasData())continue;if(u+1>this._source.maxzoom){const pe=q.children(this._source.maxzoom)[0],we=this.getTile(pe);if(we&&we.hasData()){m[pe.key]=pe;continue}}else{const pe=q.children(this._source.maxzoom);if(m[pe[0].key]&&m[pe[1].key]&&m[pe[2].key]&&m[pe[3].key])continue}let se=J.wasRequested();for(let pe=q.overscaledZ-1;pe>=S;--pe){const we=q.scaledTo(pe);if(v[we.key]||(v[we.key]=!0,J=this.getTile(we),!J&&se&&(J=this._addTile(we)),J&&(m[we.key]=we,se=J.wasRequested(),J.hasData())))break}}return m}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const u=[];let m,v=this._tiles[i].tileID;for(;v.overscaledZ>0;){if(v.key in this._loadedParentTiles){m=this._loadedParentTiles[v.key];break}u.push(v.key);const S=v.scaledTo(v.overscaledZ-1);if(m=this._getLoadedTile(S),m)break;v=S}for(const S of u)this._loadedParentTiles[S]=m}}_addTile(i){let u=this._tiles[i.key];if(u)return u;u=this._cache.getAndRemove(i),u&&(this._setTileReloadTimer(i.key,u),u.tileID=i,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,u)));const m=u;return u||(u=new ot(i,this._source.tileSize*i.overscaleFactor()),this._loadTile(u,this._tileLoaded.bind(this,u,i.key,u.state))),u.uses++,this._tiles[i.key]=u,m||this._source.fire(new a.Event("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u}_setTileReloadTimer(i,u){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const m=u.getExpiryTimeout();m&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},m))}_removeTile(i){const u=this._tiles[i];u&&(u.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),u.uses>0||(u.hasData()&&u.state!=="reloading"?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(i);this._cache.reset()}tilesIn(i,u,m){const v=[],S=this.transform;if(!S)return v;const M=m?S.getCameraQueryGeometry(i):i,z=i.map(De=>S.pointCoordinate(De,this.terrain)),q=M.map(De=>S.pointCoordinate(De,this.terrain)),J=this.getIds();let se=1/0,pe=1/0,we=-1/0,Ve=-1/0;for(const De of q)se=Math.min(se,De.x),pe=Math.min(pe,De.y),we=Math.max(we,De.x),Ve=Math.max(Ve,De.y);for(let De=0;De<J.length;De++){const Oe=this._tiles[J[De]];if(Oe.holdingForFade())continue;const ct=Oe.tileID,wt=Math.pow(2,S.zoom-Oe.tileID.overscaledZ),St=u*Oe.queryPadding*a.EXTENT/Oe.tileSize/wt,We=[ct.getTilePoint(new a.MercatorCoordinate(se,pe)),ct.getTilePoint(new a.MercatorCoordinate(we,Ve))];if(We[0].x-St<a.EXTENT&&We[0].y-St<a.EXTENT&&We[1].x+St>=0&&We[1].y+St>=0){const Rt=z.map(Xt=>ct.getTilePoint(Xt)),Mt=q.map(Xt=>ct.getTilePoint(Xt));v.push({tile:Oe,tileID:ct,queryGeometry:Rt,cameraQueryGeometry:Mt,scale:wt})}}return v}getVisibleCoordinates(i){const u=this.getRenderableIds(i).map(m=>this._tiles[m].tileID);for(const m of u)m.posMatrix=this.transform.calculatePosMatrix(m.toUnwrapped());return u}hasTransition(){if(this._source.hasTransition())return!0;if(Qt(this._source.type))for(const i in this._tiles){const u=this._tiles[i];if(u.fadeEndTime!==void 0&&u.fadeEndTime>=a.exported.now())return!0}return!1}setFeatureState(i,u,m){this._state.updateState(i=i||"_geojsonTileLayer",u,m)}removeFeatureState(i,u,m){this._state.removeFeatureState(i=i||"_geojsonTileLayer",u,m)}getFeatureState(i,u){return this._state.getState(i=i||"_geojsonTileLayer",u)}setDependencies(i,u,m){const v=this._tiles[i];v&&v.setDependencies(u,m)}reloadTilesForDependencies(i,u){for(const m in this._tiles)this._tiles[m].hasDependency(i,u)&&this._reloadTile(m,"reloading");this._cache.filter(m=>!m.hasDependency(i,u))}}function rt(g,i){const u=Math.abs(2*g.wrap)-+(g.wrap<0),m=Math.abs(2*i.wrap)-+(i.wrap<0);return g.overscaledZ-i.overscaledZ||m-u||i.canonical.y-g.canonical.y||i.canonical.x-g.canonical.x}function Qt(g){return g==="raster"||g==="image"||g==="video"}Ge.maxOverzooming=10,Ge.maxUnderzooming=3;const ht="mapboxgl_preloaded_worker_pool";class Nt{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<Nt.workerCount;)this.workers.push(new Worker(ha.workerUrl));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[ht]}numActive(){return Object.keys(this.active).length}}const gr=Math.floor(a.exported.hardwareConcurrency/2);let Pt;function ze(){return Pt||(Pt=new Nt),Pt}function yr(g,i){const u={};for(const m in g)m!=="ref"&&(u[m]=g[m]);return a.refProperties.forEach(m=>{m in i&&(u[m]=i[m])}),u}function sr(g){g=g.slice();const i=Object.create(null);for(let u=0;u<g.length;u++)i[g[u].id]=g[u];for(let u=0;u<g.length;u++)"ref"in g[u]&&(g[u]=yr(g[u],i[g[u].ref]));return g}Nt.workerCount=Math.max(Math.min(gr,6),1);const Ht={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function pr(g,i,u){u.push({command:Ht.addSource,args:[g,i[g]]})}function Br(g,i,u){i.push({command:Ht.removeSource,args:[g]}),u[g]=!0}function vr(g,i,u,m){Br(g,u,m),pr(g,i,u)}function Gr(g,i,u){let m;for(m in g[u])if(Object.prototype.hasOwnProperty.call(g[u],m)&&m!=="data"&&!E(g[u][m],i[u][m]))return!1;for(m in i[u])if(Object.prototype.hasOwnProperty.call(i[u],m)&&m!=="data"&&!E(g[u][m],i[u][m]))return!1;return!0}function rr(g,i,u,m,v,S){let M;for(M in i=i||{},g=g||{})Object.prototype.hasOwnProperty.call(g,M)&&(E(g[M],i[M])||u.push({command:S,args:[m,M,i[M],v]}));for(M in i)Object.prototype.hasOwnProperty.call(i,M)&&!Object.prototype.hasOwnProperty.call(g,M)&&(E(g[M],i[M])||u.push({command:S,args:[m,M,i[M],v]}))}function xr(g){return g.id}function Zr(g,i){return g[i.id]=i,g}class pn{constructor(i,u){this.reset(i,u)}reset(i,u){this.points=i||[],this._distances=[0];for(let m=1;m<this.points.length;m++)this._distances[m]=this._distances[m-1]+this.points[m].dist(this.points[m-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=a.clamp(i,0,1);let u=1,m=this._distances[u];const v=i*this.paddedLength+this.padding;for(;m<v&&u<this._distances.length;)m=this._distances[++u];const S=u-1,M=this._distances[S],z=m-M,q=z>0?(v-M)/z:0;return this.points[S].mult(1-q).add(this.points[u].mult(q))}}function vt(g,i){let u=!0;return g==="always"||g!=="never"&&i!=="never"||(u=!1),u}class at{constructor(i,u,m){const v=this.boxCells=[],S=this.circleCells=[];this.xCellCount=Math.ceil(i/m),this.yCellCount=Math.ceil(u/m);for(let M=0;M<this.xCellCount*this.yCellCount;M++)v.push([]),S.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=u,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,u,m,v,S){this._forEachCell(u,m,v,S,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(u),this.bboxes.push(m),this.bboxes.push(v),this.bboxes.push(S)}insertCircle(i,u,m,v){this._forEachCell(u-v,m-v,u+v,m+v,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(u),this.circles.push(m),this.circles.push(v)}_insertBoxCell(i,u,m,v,S,M){this.boxCells[S].push(M)}_insertCircleCell(i,u,m,v,S,M){this.circleCells[S].push(M)}_query(i,u,m,v,S,M,z){if(m<0||i>this.width||v<0||u>this.height)return[];const q=[];if(i<=0&&u<=0&&this.width<=m&&this.height<=v){if(S)return[{key:null,x1:i,y1:u,x2:m,y2:v}];for(let J=0;J<this.boxKeys.length;J++)q.push({key:this.boxKeys[J],x1:this.bboxes[4*J],y1:this.bboxes[4*J+1],x2:this.bboxes[4*J+2],y2:this.bboxes[4*J+3]});for(let J=0;J<this.circleKeys.length;J++){const se=this.circles[3*J],pe=this.circles[3*J+1],we=this.circles[3*J+2];q.push({key:this.circleKeys[J],x1:se-we,y1:pe-we,x2:se+we,y2:pe+we})}}else this._forEachCell(i,u,m,v,this._queryCell,q,{hitTest:S,overlapMode:M,seenUids:{box:{},circle:{}}},z);return q}query(i,u,m,v){return this._query(i,u,m,v,!1,null)}hitTest(i,u,m,v,S,M){return this._query(i,u,m,v,!0,S,M).length>0}hitTestCircle(i,u,m,v,S){const M=i-m,z=i+m,q=u-m,J=u+m;if(z<0||M>this.width||J<0||q>this.height)return!1;const se=[];return this._forEachCell(M,q,z,J,this._queryCellCircle,se,{hitTest:!0,overlapMode:v,circle:{x:i,y:u,radius:m},seenUids:{box:{},circle:{}}},S),se.length>0}_queryCell(i,u,m,v,S,M,z,q){const{seenUids:J,hitTest:se,overlapMode:pe}=z,we=this.boxCells[S];if(we!==null){const De=this.bboxes;for(const Oe of we)if(!J.box[Oe]){J.box[Oe]=!0;const ct=4*Oe,wt=this.boxKeys[Oe];if(i<=De[ct+2]&&u<=De[ct+3]&&m>=De[ct+0]&&v>=De[ct+1]&&(!q||q(wt))&&(!se||!vt(pe,wt.overlapMode))&&(M.push({key:wt,x1:De[ct],y1:De[ct+1],x2:De[ct+2],y2:De[ct+3]}),se))return!0}}const Ve=this.circleCells[S];if(Ve!==null){const De=this.circles;for(const Oe of Ve)if(!J.circle[Oe]){J.circle[Oe]=!0;const ct=3*Oe,wt=this.circleKeys[Oe];if(this._circleAndRectCollide(De[ct],De[ct+1],De[ct+2],i,u,m,v)&&(!q||q(wt))&&(!se||!vt(pe,wt.overlapMode))){const St=De[ct],We=De[ct+1],Rt=De[ct+2];if(M.push({key:wt,x1:St-Rt,y1:We-Rt,x2:St+Rt,y2:We+Rt}),se)return!0}}}return!1}_queryCellCircle(i,u,m,v,S,M,z,q){const{circle:J,seenUids:se,overlapMode:pe}=z,we=this.boxCells[S];if(we!==null){const De=this.bboxes;for(const Oe of we)if(!se.box[Oe]){se.box[Oe]=!0;const ct=4*Oe,wt=this.boxKeys[Oe];if(this._circleAndRectCollide(J.x,J.y,J.radius,De[ct+0],De[ct+1],De[ct+2],De[ct+3])&&(!q||q(wt))&&!vt(pe,wt.overlapMode))return M.push(!0),!0}}const Ve=this.circleCells[S];if(Ve!==null){const De=this.circles;for(const Oe of Ve)if(!se.circle[Oe]){se.circle[Oe]=!0;const ct=3*Oe,wt=this.circleKeys[Oe];if(this._circlesCollide(De[ct],De[ct+1],De[ct+2],J.x,J.y,J.radius)&&(!q||q(wt))&&!vt(pe,wt.overlapMode))return M.push(!0),!0}}}_forEachCell(i,u,m,v,S,M,z,q){const J=this._convertToXCellCoord(i),se=this._convertToYCellCoord(u),pe=this._convertToXCellCoord(m),we=this._convertToYCellCoord(v);for(let Ve=J;Ve<=pe;Ve++)for(let De=se;De<=we;De++)if(S.call(this,i,u,m,v,this.xCellCount*De+Ve,M,z,q))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,u,m,v,S,M){const z=v-i,q=S-u,J=m+M;return J*J>z*z+q*q}_circleAndRectCollide(i,u,m,v,S,M,z){const q=(M-v)/2,J=Math.abs(i-(v+q));if(J>q+m)return!1;const se=(z-S)/2,pe=Math.abs(u-(S+se));if(pe>se+m)return!1;if(J<=q||pe<=se)return!0;const we=J-q,Ve=pe-se;return we*we+Ve*Ve<=m*m}}function bt(g,i,u,m,v){const S=a.create();return i?(a.scale(S,S,[1/v,1/v,1]),u||a.rotateZ(S,S,m.angle)):a.multiply(S,m.labelPlaneMatrix,g),S}function Ct(g,i,u,m,v){if(i){const S=a.clone(g);return a.scale(S,S,[v,v,1]),u||a.rotateZ(S,S,-m.angle),S}return m.glCoordMatrix}function jt(g,i,u){let m;u?(m=[g.x,g.y,u(g.x,g.y),1],a.transformMat4(m,m,i)):(m=[g.x,g.y,0,1],Cr(m,m,i));const v=m[3];return{point:new a.pointGeometry(m[0]/v,m[1]/v),signedDistanceFromCamera:v}}function er(g,i){return .5+g/i*.5}function Vr(g,i){const u=g[0]/g[3],m=g[1]/g[3];return u>=-i[0]&&u<=i[0]&&m>=-i[1]&&m<=i[1]}function Sr(g,i,u,m,v,S,M,z,q,J){const se=m?g.textSizeData:g.iconSizeData,pe=a.evaluateSizeForZoom(se,u.transform.zoom),we=[256/u.width*2+1,256/u.height*2+1],Ve=m?g.text.dynamicLayoutVertexArray:g.icon.dynamicLayoutVertexArray;Ve.clear();const De=g.lineVertexArray,Oe=m?g.text.placedSymbolArray:g.icon.placedSymbolArray,ct=u.transform.width/u.transform.height;let wt=!1;for(let St=0;St<Oe.length;St++){const We=Oe.get(St);if(We.hidden||We.writingMode===a.WritingMode.vertical&&!wt){br(We.numGlyphs,Ve);continue}let Rt;if(wt=!1,J?(Rt=[We.anchorX,We.anchorY,J(We.anchorX,We.anchorY),1],a.transformMat4(Rt,Rt,i)):(Rt=[We.anchorX,We.anchorY,0,1],Cr(Rt,Rt,i)),!Vr(Rt,we)){br(We.numGlyphs,Ve);continue}const Mt=er(u.transform.cameraToCenterDistance,Rt[3]),Xt=a.evaluateSizeForFeature(se,pe,We),Zt=M?Xt/Mt:Xt*Mt,ur=new a.pointGeometry(We.anchorX,We.anchorY),qt=jt(ur,v,J).point,Rr={},Ur=Er(We,Zt,!1,z,i,v,S,g.glyphOffsetArray,De,Ve,qt,ur,Rr,ct,q,J);wt=Ur.useVertical,(Ur.notEnoughRoom||wt||Ur.needsFlipping&&Er(We,Zt,!0,z,i,v,S,g.glyphOffsetArray,De,Ve,qt,ur,Rr,ct,q,J).notEnoughRoom)&&br(We.numGlyphs,Ve)}m?g.text.dynamicLayoutVertexBuffer.updateData(Ve):g.icon.dynamicLayoutVertexBuffer.updateData(Ve)}function un(g,i,u,m,v,S,M,z,q,J,se,pe,we){const Ve=z.glyphStartIndex+z.numGlyphs,De=z.lineStartIndex,Oe=z.lineStartIndex+z.lineLength,ct=i.getoffsetX(z.glyphStartIndex),wt=i.getoffsetX(Ve-1),St=wn(g*ct,u,m,v,S,M,z.segment,De,Oe,q,J,se,pe,we);if(!St)return null;const We=wn(g*wt,u,m,v,S,M,z.segment,De,Oe,q,J,se,pe,we);return We?{first:St,last:We}:null}function lr(g,i,u,m){return g===a.WritingMode.horizontal&&Math.abs(u.y-i.y)>Math.abs(u.x-i.x)*m?{useVertical:!0}:(g===a.WritingMode.vertical?i.y<u.y:i.x>u.x)?{needsFlipping:!0}:null}function Er(g,i,u,m,v,S,M,z,q,J,se,pe,we,Ve,De,Oe){const ct=i/24,wt=g.lineOffsetX*ct,St=g.lineOffsetY*ct;let We;if(g.numGlyphs>1){const Rt=g.glyphStartIndex+g.numGlyphs,Mt=g.lineStartIndex,Xt=g.lineStartIndex+g.lineLength,Zt=un(ct,z,wt,St,u,se,pe,g,q,S,we,De,Oe);if(!Zt)return{notEnoughRoom:!0};const ur=jt(Zt.first.point,M,Oe).point,qt=jt(Zt.last.point,M,Oe).point;if(m&&!u){const Rr=lr(g.writingMode,ur,qt,Ve);if(Rr)return Rr}We=[Zt.first];for(let Rr=g.glyphStartIndex+1;Rr<Rt-1;Rr++)We.push(wn(ct*z.getoffsetX(Rr),wt,St,u,se,pe,g.segment,Mt,Xt,q,S,we,De,Oe));We.push(Zt.last)}else{if(m&&!u){const Mt=jt(pe,v,Oe).point,Xt=g.lineStartIndex+g.segment+1,Zt=new a.pointGeometry(q.getx(Xt),q.gety(Xt)),ur=jt(Zt,v,Oe),qt=ur.signedDistanceFromCamera>0?ur.point:An(pe,Zt,Mt,1,v,Oe),Rr=lr(g.writingMode,Mt,qt,Ve);if(Rr)return Rr}const Rt=wn(ct*z.getoffsetX(g.glyphStartIndex),wt,St,u,se,pe,g.segment,g.lineStartIndex,g.lineStartIndex+g.lineLength,q,S,we,De,Oe);if(!Rt)return{notEnoughRoom:!0};We=[Rt]}for(const Rt of We)a.addDynamicAttributes(J,Rt.point,Rt.angle);return{}}function An(g,i,u,m,v,S){const M=jt(g.add(g.sub(i)._unit()),v,S).point,z=u.sub(M);return u.add(z._mult(m/z.mag()))}function wn(g,i,u,m,v,S,M,z,q,J,se,pe,we,Ve){const De=m?g-i:g+i;let Oe=De>0?1:-1,ct=0;m&&(Oe*=-1,ct=Math.PI),Oe<0&&(ct+=Math.PI);let wt=Oe>0?z+M:z+M+1,St=v,We=v,Rt=0,Mt=0;const Xt=Math.abs(De),Zt=[];for(;Rt+Mt<=Xt;){if(wt+=Oe,wt<z||wt>=q)return null;if(We=St,Zt.push(St),St=pe[wt],St===void 0){const qr=new a.pointGeometry(J.getx(wt),J.gety(wt)),Pn=jt(qr,se,Ve);if(Pn.signedDistanceFromCamera>0)St=pe[wt]=Pn.point;else{const jn=wt-Oe;St=An(Rt===0?S:new a.pointGeometry(J.getx(jn),J.gety(jn)),qr,We,Xt-Rt+1,se,Ve)}}Rt+=Mt,Mt=We.dist(St)}const ur=(Xt-Rt)/Mt,qt=St.sub(We),Rr=qt.mult(ur)._add(We);Rr._add(qt._unit()._perp()._mult(u*Oe));const Ur=ct+Math.atan2(St.y-We.y,St.x-We.x);return Zt.push(Rr),{point:Rr,angle:we?Ur:0,path:Zt}}const _i=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function br(g,i){for(let u=0;u<g;u++){const m=i.length;i.resize(m+4),i.float32.set(_i,3*m)}}function Cr(g,i,u){const m=i[0],v=i[1];return g[0]=u[0]*m+u[4]*v+u[12],g[1]=u[1]*m+u[5]*v+u[13],g[3]=u[3]*m+u[7]*v+u[15],g}const cr=100;class Kr{constructor(i,u=new at(i.width+200,i.height+200,25),m=new at(i.width+200,i.height+200,25)){this.transform=i,this.grid=u,this.ignoredGrid=m,this.pitchfactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+cr,this.screenBottomBoundary=i.height+cr,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(i,u,m,v,S,M){const z=this.projectAndGetPerspectiveRatio(v,i.anchorPointX,i.anchorPointY,M),q=m*z.perspectiveRatio,J=i.x1*q+z.point.x,se=i.y1*q+z.point.y,pe=i.x2*q+z.point.x,we=i.y2*q+z.point.y;return!this.isInsideGrid(J,se,pe,we)||u!=="always"&&this.grid.hitTest(J,se,pe,we,u,S)||z.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[J,se,pe,we],offscreen:this.isOffscreen(J,se,pe,we)}}placeCollisionCircles(i,u,m,v,S,M,z,q,J,se,pe,we,Ve,De){const Oe=[],ct=new a.pointGeometry(u.anchorX,u.anchorY),wt=jt(ct,M,De),St=er(this.transform.cameraToCenterDistance,wt.signedDistanceFromCamera),We=(se?S/St:S*St)/a.ONE_EM,Rt=jt(ct,z,De).point,Mt=un(We,v,u.lineOffsetX*We,u.lineOffsetY*We,!1,Rt,ct,u,m,z,{},!1,De);let Xt=!1,Zt=!1,ur=!0;if(Mt){const qt=.5*we*St+Ve,Rr=new a.pointGeometry(-100,-100),Ur=new a.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),qr=new pn,Pn=Mt.first,jn=Mt.last;let b=[];for(let W=Pn.path.length-1;W>=1;W--)b.push(Pn.path[W]);for(let W=1;W<jn.path.length;W++)b.push(jn.path[W]);const L=2.5*qt;if(q){const W=b.map(ae=>jt(ae,q,De));b=W.some(ae=>ae.signedDistanceFromCamera<=0)?[]:W.map(ae=>ae.point)}let j=[];if(b.length>0){const W=b[0].clone(),ae=b[0].clone();for(let de=1;de<b.length;de++)W.x=Math.min(W.x,b[de].x),W.y=Math.min(W.y,b[de].y),ae.x=Math.max(ae.x,b[de].x),ae.y=Math.max(ae.y,b[de].y);j=W.x>=Rr.x&&ae.x<=Ur.x&&W.y>=Rr.y&&ae.y<=Ur.y?[b]:ae.x<Rr.x||W.x>Ur.x||ae.y<Rr.y||W.y>Ur.y?[]:a.clipLine([b],Rr.x,Rr.y,Ur.x,Ur.y)}for(const W of j){qr.reset(W,.25*qt);let ae=0;ae=qr.length<=.5*qt?1:Math.ceil(qr.paddedLength/L)+1;for(let de=0;de<ae;de++){const ge=de/Math.max(ae-1,1),xe=qr.lerp(ge),Ie=xe.x+cr,Ne=xe.y+cr;Oe.push(Ie,Ne,qt,0);const ft=Ie-qt,It=Ne-qt,Ft=Ie+qt,pt=Ne+qt;if(ur=ur&&this.isOffscreen(ft,It,Ft,pt),Zt=Zt||this.isInsideGrid(ft,It,Ft,pt),i!=="always"&&this.grid.hitTestCircle(Ie,Ne,qt,i,pe)&&(Xt=!0,!J))return{circles:[],offscreen:!1,collisionDetected:Xt}}}}return{circles:!J&&Xt||!Zt||St<this.perspectiveRatioCutoff?[]:Oe,offscreen:ur,collisionDetected:Xt}}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const u=[];let m=1/0,v=1/0,S=-1/0,M=-1/0;for(const se of i){const pe=new a.pointGeometry(se.x+cr,se.y+cr);m=Math.min(m,pe.x),v=Math.min(v,pe.y),S=Math.max(S,pe.x),M=Math.max(M,pe.y),u.push(pe)}const z=this.grid.query(m,v,S,M).concat(this.ignoredGrid.query(m,v,S,M)),q={},J={};for(const se of z){const pe=se.key;if(q[pe.bucketInstanceId]===void 0&&(q[pe.bucketInstanceId]={}),q[pe.bucketInstanceId][pe.featureIndex])continue;const we=[new a.pointGeometry(se.x1,se.y1),new a.pointGeometry(se.x2,se.y1),new a.pointGeometry(se.x2,se.y2),new a.pointGeometry(se.x1,se.y2)];a.polygonIntersectsPolygon(u,we)&&(q[pe.bucketInstanceId][pe.featureIndex]=!0,J[pe.bucketInstanceId]===void 0&&(J[pe.bucketInstanceId]=[]),J[pe.bucketInstanceId].push(pe.featureIndex))}return J}insertCollisionBox(i,u,m,v,S,M){(m?this.ignoredGrid:this.grid).insert({bucketInstanceId:v,featureIndex:S,collisionGroupID:M,overlapMode:u},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,u,m,v,S,M){const z=m?this.ignoredGrid:this.grid,q={bucketInstanceId:v,featureIndex:S,collisionGroupID:M,overlapMode:u};for(let J=0;J<i.length;J+=4)z.insertCircle(q,i[J],i[J+1],i[J+2])}projectAndGetPerspectiveRatio(i,u,m,v){let S;return v?(S=[u,m,v(u,m),1],a.transformMat4(S,S,i)):(S=[u,m,0,1],Cr(S,S,i)),{point:new a.pointGeometry((S[0]/S[3]+1)/2*this.transform.width+cr,(-S[1]/S[3]+1)/2*this.transform.height+cr),perspectiveRatio:.5+this.transform.cameraToCenterDistance/S[3]*.5}}isOffscreen(i,u,m,v){return m<cr||i>=this.screenRightBoundary||v<cr||u>this.screenBottomBoundary}isInsideGrid(i,u,m,v){return m>=0&&i<this.gridRightBoundary&&v>=0&&u<this.gridBottomBoundary}getViewportMatrix(){const i=a.identity([]);return a.translate(i,i,[-100,-100,0]),i}}function hn(g,i,u){return i*(a.EXTENT/(g.tileSize*Math.pow(2,u-g.tileID.overscaledZ)))}class xn{constructor(i,u,m,v){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?u:-u))):v&&m?1:0,this.placed=m}isHidden(){return this.opacity===0&&!this.placed}}class Sn{constructor(i,u,m,v,S){this.text=new xn(i?i.text:null,u,m,S),this.icon=new xn(i?i.icon:null,u,v,S)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class ji{constructor(i,u,m){this.text=i,this.icon=u,this.skipFade=m}}class tn{constructor(){this.invProjMatrix=a.create(),this.viewportMatrix=a.create(),this.circles=[]}}class Wi{constructor(i,u,m,v,S){this.bucketInstanceId=i,this.featureIndex=u,this.sourceLayerIndex=m,this.bucketIndex=v,this.tileID=S}}class hs{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const u=++this.maxGroupID;this.collisionGroups[i]={ID:u,predicate:m=>m.collisionGroupID===u}}return this.collisionGroups[i]}}function Ln(g,i,u,m,v){const{horizontalAlign:S,verticalAlign:M}=a.getAnchorAlignment(g),z=-(S-.5)*i,q=-(M-.5)*u,J=a.evaluateVariableOffset(g,m);return new a.pointGeometry(z+J[0]*v,q+J[1]*v)}function nn(g,i,u,m,v,S){const{x1:M,x2:z,y1:q,y2:J,anchorPointX:se,anchorPointY:pe}=g,we=new a.pointGeometry(i,u);return m&&we._rotate(v?S:-S),{x1:M+we.x,y1:q+we.y,x2:z+we.x,y2:J+we.y,anchorPointX:se,anchorPointY:pe}}class Te{constructor(i,u,m,v,S){this.transform=i.clone(),this.terrain=u,this.collisionIndex=new Kr(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=m,this.retainedQueryData={},this.collisionGroups=new hs(v),this.collisionCircleArrays={},this.prevPlacement=S,S&&(S.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(i,u,m,v){const S=m.getBucket(u),M=m.latestFeatureIndex;if(!S||!M||u.id!==S.layerIds[0])return;const z=m.collisionBoxArray,q=S.layers[0].layout,J=Math.pow(2,this.transform.zoom-m.tileID.overscaledZ),se=m.tileSize/a.EXTENT,pe=this.transform.calculatePosMatrix(m.tileID.toUnwrapped()),we=q.get("text-pitch-alignment")==="map",Ve=q.get("text-rotation-alignment")==="map",De=hn(m,1,this.transform.zoom),Oe=bt(pe,we,Ve,this.transform,De);let ct=null;if(we){const St=Ct(pe,we,Ve,this.transform,De);ct=a.multiply([],this.transform.labelPlaneMatrix,St)}this.retainedQueryData[S.bucketInstanceId]=new Wi(S.bucketInstanceId,M,S.sourceLayerIndex,S.index,m.tileID);const wt={bucket:S,layout:q,posMatrix:pe,textLabelPlaneMatrix:Oe,labelToScreenMatrix:ct,scale:J,textPixelRatio:se,holdingForFade:m.holdingForFade(),collisionBoxArray:z,partiallyEvaluatedTextSize:a.evaluateSizeForZoom(S.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(S.sourceID)};if(v)for(const St of S.sortKeyRanges){const{sortKey:We,symbolInstanceStart:Rt,symbolInstanceEnd:Mt}=St;i.push({sortKey:We,symbolInstanceStart:Rt,symbolInstanceEnd:Mt,parameters:wt})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:S.symbolInstances.length,parameters:wt})}attemptAnchorPlacement(i,u,m,v,S,M,z,q,J,se,pe,we,Ve,De,Oe,ct){const wt=[we.textOffset0,we.textOffset1],St=Ln(i,m,v,wt,S),We=this.collisionIndex.placeCollisionBox(nn(u,St.x,St.y,M,z,this.transform.angle),pe,q,J,se.predicate,ct);if((!Oe||this.collisionIndex.placeCollisionBox(nn(Oe,St.x,St.y,M,z,this.transform.angle),pe,q,J,se.predicate,ct).box.length!==0)&&We.box.length>0){let Rt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[we.crossTileID]&&this.prevPlacement.placements[we.crossTileID]&&this.prevPlacement.placements[we.crossTileID].text&&(Rt=this.prevPlacement.variableOffsets[we.crossTileID].anchor),we.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[we.crossTileID]={textOffset:wt,width:m,height:v,anchor:i,textBoxScale:S,prevAnchor:Rt},this.markUsedJustification(Ve,i,we,De),Ve.allowVerticalPlacement&&(this.markUsedOrientation(Ve,De,we),this.placedOrientations[we.crossTileID]=De),{shift:St,placedGlyphBoxes:We}}}placeLayerBucketPart(i,u,m){const{bucket:v,layout:S,posMatrix:M,textLabelPlaneMatrix:z,labelToScreenMatrix:q,textPixelRatio:J,holdingForFade:se,collisionBoxArray:pe,partiallyEvaluatedTextSize:we,collisionGroup:Ve}=i.parameters,De=S.get("text-optional"),Oe=S.get("icon-optional"),ct=a.getOverlapMode(S,"text-overlap","text-allow-overlap"),wt=ct==="always",St=a.getOverlapMode(S,"icon-overlap","icon-allow-overlap"),We=St==="always",Rt=S.get("text-rotation-alignment")==="map",Mt=S.get("text-pitch-alignment")==="map",Xt=S.get("icon-text-fit")!=="none",Zt=S.get("symbol-z-order")==="viewport-y",ur=wt&&(We||!v.hasIconData()||Oe),qt=We&&(wt||!v.hasTextData()||De);!v.collisionArrays&&pe&&v.deserializeCollisionBoxes(pe);const Rr=(Ur,qr)=>{if(u[Ur.crossTileID])return;if(se)return void(this.placements[Ur.crossTileID]=new ji(!1,!1,!1));let Pn=!1,jn=!1,b=!0,L=null,j={box:null,offscreen:null},W={box:null,offscreen:null},ae=null,de=null,ge=null,xe=0,Ie=0,Ne=0;qr.textFeatureIndex?xe=qr.textFeatureIndex:Ur.useRuntimeCollisionCircles&&(xe=Ur.featureIndex),qr.verticalTextFeatureIndex&&(Ie=qr.verticalTextFeatureIndex);const ft=this.retainedQueryData[v.bucketInstanceId].tileID,It=this.terrain?(Vt,Ye)=>this.terrain.getElevation(ft,Vt,Ye):null;for(const Vt of["textBox","verticalTextBox","iconBox","verticalIconBox"]){const Ye=qr[Vt];Ye&&(Ye.elevation=It?It(Ye.anchorPointX,Ye.anchorPointY):0)}const Ft=qr.textBox;if(Ft){const Vt=At=>{let Yt=a.WritingMode.horizontal;if(v.allowVerticalPlacement&&!At&&this.prevPlacement){const ir=this.prevPlacement.placedOrientations[Ur.crossTileID];ir&&(this.placedOrientations[Ur.crossTileID]=ir,Yt=ir,this.markUsedOrientation(v,Yt,Ur))}return Yt},Ye=(At,Yt)=>{if(v.allowVerticalPlacement&&Ur.numVerticalGlyphVertices>0&&qr.verticalTextBox){for(const ir of v.writingModes)if(ir===a.WritingMode.vertical?(j=Yt(),W=j):j=At(),j&&j.box&&j.box.length)break}else j=At()};if(S.get("text-variable-anchor")){let At=S.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Ur.crossTileID]){const Wt=this.prevPlacement.variableOffsets[Ur.crossTileID];At.indexOf(Wt.anchor)>0&&(At=At.filter(Dr=>Dr!==Wt.anchor),At.unshift(Wt.anchor))}const Yt=(Wt,Dr,kr)=>{const Fn=Wt.x2-Wt.x1,Nr=Wt.y2-Wt.y1,fi=Ur.textBoxScale,di=Xt&&St==="never"?Dr:null;let hr={box:[],offscreen:!1};const zn=ct!=="never"?2*At.length:At.length;for(let li=0;li<zn;++li){const ci=this.attemptAnchorPlacement(At[li%At.length],Wt,Fn,Nr,fi,Rt,Mt,J,M,Ve,li>=At.length?ct:"never",Ur,v,kr,di,It);if(ci&&(hr=ci.placedGlyphBoxes,hr&&hr.box&&hr.box.length)){Pn=!0,L=ci.shift;break}}return hr};Ye(()=>Yt(Ft,qr.iconBox,a.WritingMode.horizontal),()=>{const Wt=qr.verticalTextBox;return v.allowVerticalPlacement&&!(j&&j.box&&j.box.length)&&Ur.numVerticalGlyphVertices>0&&Wt?Yt(Wt,qr.verticalIconBox,a.WritingMode.vertical):{box:null,offscreen:null}}),j&&(Pn=j.box,b=j.offscreen);const ir=Vt(j&&j.box);if(!Pn&&this.prevPlacement){const Wt=this.prevPlacement.variableOffsets[Ur.crossTileID];Wt&&(this.variableOffsets[Ur.crossTileID]=Wt,this.markUsedJustification(v,Wt.anchor,Ur,ir))}}else{const At=(Yt,ir)=>{const Wt=this.collisionIndex.placeCollisionBox(Yt,ct,J,M,Ve.predicate,It);return Wt&&Wt.box&&Wt.box.length&&(this.markUsedOrientation(v,ir,Ur),this.placedOrientations[Ur.crossTileID]=ir),Wt};Ye(()=>At(Ft,a.WritingMode.horizontal),()=>{const Yt=qr.verticalTextBox;return v.allowVerticalPlacement&&Ur.numVerticalGlyphVertices>0&&Yt?At(Yt,a.WritingMode.vertical):{box:null,offscreen:null}}),Vt(j&&j.box&&j.box.length)}}if(ae=j,Pn=ae&&ae.box&&ae.box.length>0,b=ae&&ae.offscreen,Ur.useRuntimeCollisionCircles){const Vt=v.text.placedSymbolArray.get(Ur.centerJustifiedTextSymbolIndex),Ye=a.evaluateSizeForFeature(v.textSizeData,we,Vt),At=S.get("text-padding");de=this.collisionIndex.placeCollisionCircles(ct,Vt,v.lineVertexArray,v.glyphOffsetArray,Ye,M,z,q,m,Mt,Ve.predicate,Ur.collisionCircleDiameter,At,It),de.circles.length&&de.collisionDetected&&!m&&a.warnOnce("Collisions detected, but collision boxes are not shown"),Pn=wt||de.circles.length>0&&!de.collisionDetected,b=b&&de.offscreen}if(qr.iconFeatureIndex&&(Ne=qr.iconFeatureIndex),qr.iconBox){const Vt=Ye=>{const At=Xt&&L?nn(Ye,L.x,L.y,Rt,Mt,this.transform.angle):Ye;return this.collisionIndex.placeCollisionBox(At,St,J,M,Ve.predicate,It)};W&&W.box&&W.box.length&&qr.verticalIconBox?(ge=Vt(qr.verticalIconBox),jn=ge.box.length>0):(ge=Vt(qr.iconBox),jn=ge.box.length>0),b=b&&ge.offscreen}const pt=De||Ur.numHorizontalGlyphVertices===0&&Ur.numVerticalGlyphVertices===0,Ar=Oe||Ur.numIconVertices===0;if(pt||Ar?Ar?pt||(jn=jn&&Pn):Pn=jn&&Pn:jn=Pn=jn&&Pn,Pn&&ae&&ae.box&&this.collisionIndex.insertCollisionBox(ae.box,ct,S.get("text-ignore-placement"),v.bucketInstanceId,W&&W.box&&Ie?Ie:xe,Ve.ID),jn&&ge&&this.collisionIndex.insertCollisionBox(ge.box,St,S.get("icon-ignore-placement"),v.bucketInstanceId,Ne,Ve.ID),de&&(Pn&&this.collisionIndex.insertCollisionCircles(de.circles,ct,S.get("text-ignore-placement"),v.bucketInstanceId,xe,Ve.ID),m)){const Vt=v.bucketInstanceId;let Ye=this.collisionCircleArrays[Vt];Ye===void 0&&(Ye=this.collisionCircleArrays[Vt]=new tn);for(let At=0;At<de.circles.length;At+=4)Ye.circles.push(de.circles[At+0]),Ye.circles.push(de.circles[At+1]),Ye.circles.push(de.circles[At+2]),Ye.circles.push(de.collisionDetected?1:0)}if(Ur.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(v.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Ur.crossTileID]=new ji(Pn||ur,jn||qt,b||v.justReloaded),u[Ur.crossTileID]=!0};if(Zt){if(i.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Ur=v.getSortedSymbolIndexes(this.transform.angle);for(let qr=Ur.length-1;qr>=0;--qr){const Pn=Ur[qr];Rr(v.symbolInstances.get(Pn),v.collisionArrays[Pn])}}else for(let Ur=i.symbolInstanceStart;Ur<i.symbolInstanceEnd;Ur++)Rr(v.symbolInstances.get(Ur),v.collisionArrays[Ur]);if(m&&v.bucketInstanceId in this.collisionCircleArrays){const Ur=this.collisionCircleArrays[v.bucketInstanceId];a.invert(Ur.invProjMatrix,M),Ur.viewportMatrix=this.collisionIndex.getViewportMatrix()}v.justReloaded=!1}markUsedJustification(i,u,m,v){let S;S=v===a.WritingMode.vertical?m.verticalPlacedTextSymbolIndex:{left:m.leftJustifiedTextSymbolIndex,center:m.centerJustifiedTextSymbolIndex,right:m.rightJustifiedTextSymbolIndex}[a.getAnchorJustification(u)];const M=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex,m.verticalPlacedTextSymbolIndex];for(const z of M)z>=0&&(i.text.placedSymbolArray.get(z).crossTileID=S>=0&&z!==S?0:m.crossTileID)}markUsedOrientation(i,u,m){const v=u===a.WritingMode.horizontal||u===a.WritingMode.horizontalOnly?u:0,S=u===a.WritingMode.vertical?u:0,M=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex];for(const z of M)i.text.placedSymbolArray.get(z).placedOrientation=v;m.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(m.verticalPlacedTextSymbolIndex).placedOrientation=S)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const u=this.prevPlacement;let m=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;const v=u?u.symbolFadeChange(i):1,S=u?u.opacities:{},M=u?u.variableOffsets:{},z=u?u.placedOrientations:{};for(const q in this.placements){const J=this.placements[q],se=S[q];se?(this.opacities[q]=new Sn(se,v,J.text,J.icon),m=m||J.text!==se.text.placed||J.icon!==se.icon.placed):(this.opacities[q]=new Sn(null,v,J.text,J.icon,J.skipFade),m=m||J.text||J.icon)}for(const q in S){const J=S[q];if(!this.opacities[q]){const se=new Sn(J,v,!1,!1);se.isHidden()||(this.opacities[q]=se,m=m||J.text.placed||J.icon.placed)}}for(const q in M)this.variableOffsets[q]||!this.opacities[q]||this.opacities[q].isHidden()||(this.variableOffsets[q]=M[q]);for(const q in z)this.placedOrientations[q]||!this.opacities[q]||this.opacities[q].isHidden()||(this.placedOrientations[q]=z[q]);if(u&&u.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");m?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:i)}updateLayerOpacities(i,u){const m={};for(const v of u){const S=v.getBucket(i);S&&v.latestFeatureIndex&&i.id===S.layerIds[0]&&this.updateBucketOpacities(S,m,v.collisionBoxArray)}}updateBucketOpacities(i,u,m){i.hasTextData()&&i.text.opacityVertexArray.clear(),i.hasIconData()&&i.icon.opacityVertexArray.clear(),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const v=i.layers[0].layout,S=new Sn(null,0,!1,!1,!0),M=v.get("text-allow-overlap"),z=v.get("icon-allow-overlap"),q=v.get("text-variable-anchor"),J=v.get("text-rotation-alignment")==="map",se=v.get("text-pitch-alignment")==="map",pe=v.get("icon-text-fit")!=="none",we=new Sn(null,0,M&&(z||!i.hasIconData()||v.get("icon-optional")),z&&(M||!i.hasTextData()||v.get("text-optional")),!0);!i.collisionArrays&&m&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(m);const Ve=(De,Oe,ct)=>{for(let wt=0;wt<Oe/4;wt++)De.opacityVertexArray.emplaceBack(ct)};for(let De=0;De<i.symbolInstances.length;De++){const Oe=i.symbolInstances.get(De),{numHorizontalGlyphVertices:ct,numVerticalGlyphVertices:wt,crossTileID:St}=Oe;let We=this.opacities[St];u[St]?We=S:We||(We=we,this.opacities[St]=We),u[St]=!0;const Rt=Oe.numIconVertices>0,Mt=this.placedOrientations[Oe.crossTileID],Xt=Mt===a.WritingMode.vertical,Zt=Mt===a.WritingMode.horizontal||Mt===a.WritingMode.horizontalOnly;if(ct>0||wt>0){const ur=ut(We.text);Ve(i.text,ct,Xt?Ot:ur),Ve(i.text,wt,Zt?Ot:ur);const qt=We.text.isHidden();[Oe.rightJustifiedTextSymbolIndex,Oe.centerJustifiedTextSymbolIndex,Oe.leftJustifiedTextSymbolIndex].forEach(qr=>{qr>=0&&(i.text.placedSymbolArray.get(qr).hidden=qt||Xt?1:0)}),Oe.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(Oe.verticalPlacedTextSymbolIndex).hidden=qt||Zt?1:0);const Rr=this.variableOffsets[Oe.crossTileID];Rr&&this.markUsedJustification(i,Rr.anchor,Oe,Mt);const Ur=this.placedOrientations[Oe.crossTileID];Ur&&(this.markUsedJustification(i,"left",Oe,Ur),this.markUsedOrientation(i,Ur,Oe))}if(Rt){const ur=ut(We.icon),qt=!(pe&&Oe.verticalPlacedIconSymbolIndex&&Xt);Oe.placedIconSymbolIndex>=0&&(Ve(i.icon,Oe.numIconVertices,qt?ur:Ot),i.icon.placedSymbolArray.get(Oe.placedIconSymbolIndex).hidden=We.icon.isHidden()),Oe.verticalPlacedIconSymbolIndex>=0&&(Ve(i.icon,Oe.numVerticalIconVertices,qt?Ot:ur),i.icon.placedSymbolArray.get(Oe.verticalPlacedIconSymbolIndex).hidden=We.icon.isHidden())}if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const ur=i.collisionArrays[De];if(ur){let qt=new a.pointGeometry(0,0);if(ur.textBox||ur.verticalTextBox){let Ur=!0;if(q){const qr=this.variableOffsets[St];qr?(qt=Ln(qr.anchor,qr.width,qr.height,qr.textOffset,qr.textBoxScale),J&&qt._rotate(se?this.transform.angle:-this.transform.angle)):Ur=!1}ur.textBox&&Y(i.textCollisionBox.collisionVertexArray,We.text.placed,!Ur||Xt,qt.x,qt.y),ur.verticalTextBox&&Y(i.textCollisionBox.collisionVertexArray,We.text.placed,!Ur||Zt,qt.x,qt.y)}const Rr=Boolean(!Zt&&ur.verticalIconBox);ur.iconBox&&Y(i.iconCollisionBox.collisionVertexArray,We.icon.placed,Rr,pe?qt.x:0,pe?qt.y:0),ur.verticalIconBox&&Y(i.iconCollisionBox.collisionVertexArray,We.icon.placed,!Rr,pe?qt.x:0,pe?qt.y:0)}}}if(i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.text.opacityVertexArray.length!==i.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${i.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${i.text.layoutVertexArray.length}) / 4`);if(i.icon.opacityVertexArray.length!==i.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${i.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${i.icon.layoutVertexArray.length}) / 4`);if(i.bucketInstanceId in this.collisionCircleArrays){const De=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=De.invProjMatrix,i.placementViewportMatrix=De.viewportMatrix,i.collisionCircleArray=De.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,u){const m=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*m>i}setStale(){this.stale=!0}}function Y(g,i,u,m,v){g.emplaceBack(i?1:0,u?1:0,m||0,v||0),g.emplaceBack(i?1:0,u?1:0,m||0,v||0),g.emplaceBack(i?1:0,u?1:0,m||0,v||0),g.emplaceBack(i?1:0,u?1:0,m||0,v||0)}const Ae=Math.pow(2,25),Ee=Math.pow(2,24),Ue=Math.pow(2,17),Xe=Math.pow(2,16),lt=Math.pow(2,9),$e=Math.pow(2,8),qe=Math.pow(2,1);function ut(g){if(g.opacity===0&&!g.placed)return 0;if(g.opacity===1&&g.placed)return 4294967295;const i=g.placed?1:0,u=Math.floor(127*g.opacity);return u*Ae+i*Ee+u*Ue+i*Xe+u*lt+i*$e+u*qe+i}const Ot=0;class nr{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&!i.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,u,m,v,S){const M=this._bucketParts;for(;this._currentTileIndex<i.length;)if(u.getBucketParts(M,v,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,S())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,M.sort((z,q)=>z.sortKey-q.sortKey));this._currentPartIndex<M.length;)if(u.placeLayerBucketPart(M[this._currentPartIndex],this._seenCrossTileIDs,m),this._currentPartIndex++,S())return!0;return!1}}class zt{constructor(i,u,m,v,S,M,z,q){this.placement=new Te(i,u,M,z,q),this._currentPlacementIndex=m.length-1,this._forceFullPlacement=v,this._showCollisionBoxes=S,this._done=!1}isDone(){return this._done}continuePlacement(i,u,m){const v=a.exported.now(),S=()=>{const M=a.exported.now()-v;return!this._forceFullPlacement&&M>2};for(;this._currentPlacementIndex>=0;){const M=u[i[this._currentPlacementIndex]],z=this.placement.collisionIndex.transform.zoom;if(M.type==="symbol"&&(!M.minzoom||M.minzoom<=z)&&(!M.maxzoom||M.maxzoom>z)){if(this._inProgressLayer||(this._inProgressLayer=new nr(M)),this._inProgressLayer.continuePlacement(m[M.source],this.placement,this._showCollisionBoxes,M,S))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const jr=512/a.EXTENT/2;class Hr{constructor(i,u,m){this.tileID=i,this.indexedSymbolInstances={},this.bucketInstanceId=m;for(let v=0;v<u.length;v++){const S=u.get(v),M=S.key;this.indexedSymbolInstances[M]||(this.indexedSymbolInstances[M]=[]),this.indexedSymbolInstances[M].push({crossTileID:S.crossTileID,coord:this.getScaledCoordinates(S,i)})}}getScaledCoordinates(i,u){const m=jr/Math.pow(2,u.canonical.z-this.tileID.canonical.z);return{x:Math.floor((u.canonical.x*a.EXTENT+i.anchorX)*m),y:Math.floor((u.canonical.y*a.EXTENT+i.anchorY)*m)}}findMatches(i,u,m){const v=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z);for(let S=0;S<i.length;S++){const M=i.get(S);if(M.crossTileID)continue;const z=this.indexedSymbolInstances[M.key];if(!z)continue;const q=this.getScaledCoordinates(M,u);for(const J of z)if(Math.abs(J.coord.x-q.x)<=v&&Math.abs(J.coord.y-q.y)<=v&&!m[J.crossTileID]){m[J.crossTileID]=!0,M.crossTileID=J.crossTileID;break}}}}class Tr{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class ln{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const u=Math.round((i-this.lng)/360);if(u!==0)for(const m in this.indexes){const v=this.indexes[m],S={};for(const M in v){const z=v[M];z.tileID=z.tileID.unwrapTo(z.tileID.wrap+u),S[z.tileID.key]=z}this.indexes[m]=S}this.lng=i}addBucket(i,u,m){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let S=0;S<u.symbolInstances.length;S++)u.symbolInstances.get(S).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});const v=this.usedCrossTileIDs[i.overscaledZ];for(const S in this.indexes){const M=this.indexes[S];if(Number(S)>i.overscaledZ)for(const z in M){const q=M[z];q.tileID.isChildOf(i)&&q.findMatches(u.symbolInstances,i,v)}else{const z=M[i.scaledTo(Number(S)).key];z&&z.findMatches(u.symbolInstances,i,v)}}for(let S=0;S<u.symbolInstances.length;S++){const M=u.symbolInstances.get(S);M.crossTileID||(M.crossTileID=m.generate(),v[M.crossTileID]=!0)}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new Hr(i,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(i,u){for(const m in u.indexedSymbolInstances)for(const v of u.indexedSymbolInstances[m])delete this.usedCrossTileIDs[i][v.crossTileID]}removeStaleBuckets(i){let u=!1;for(const m in this.indexes){const v=this.indexes[m];for(const S in v)i[v[S].bucketInstanceId]||(this.removeBucketCrossTileIDs(m,v[S]),delete v[S],u=!0)}return u}}class dn{constructor(){this.layerIndexes={},this.crossTileIDs=new Tr,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,u,m){let v=this.layerIndexes[i.id];v===void 0&&(v=this.layerIndexes[i.id]=new ln);let S=!1;const M={};v.handleWrapJump(m);for(const z of u){const q=z.getBucket(i);q&&i.id===q.layerIds[0]&&(q.bucketInstanceId||(q.bucketInstanceId=++this.maxBucketInstanceId),v.addBucket(z.tileID,q,this.crossTileIDs)&&(S=!0),M[q.bucketInstanceId]=!0)}return v.removeStaleBuckets(M)&&(S=!0),S}pruneUnusedLayers(i){const u={};i.forEach(m=>{u[m]=!0});for(const m in this.layerIndexes)u[m]||delete this.layerIndexes[m]}}var In=a.createLayout([{name:"a_pos",type:"Int16",components:2}]);class mn extends a.Evented{constructor(i){super(),this.sourceCache=i,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.renderHistory=[],this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,this.renderHistorySize=i._cache.max,i.usedForTerrain=!0,i.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null;for(const i in this._tiles){const u=this._tiles[i];u.textures.forEach(m=>m.destroy()),u.textures=[]}}update(i,u){this.sourceCache.update(i,u),this._renderableTilesKeys=[];for(const m of i.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:u}))this._renderableTilesKeys.push(m.key),this._tiles[m.key]||(m.posMatrix=new Float64Array(16),a.ortho(m.posMatrix,0,a.EXTENT,0,a.EXTENT,0,1),this._tiles[m.key]=new ot(m,this.tileSize))}removeOutdated(i){const u={};this.renderHistory=this.renderHistory.filter((m,v)=>this.renderHistory.indexOf(m)===v).slice(0,this.renderHistorySize);for(const m of this._renderableTilesKeys)u[m]=!0;for(const m of this.renderHistory)u[m]=!0;for(const m in this._tiles)u[m]||(this._tiles[m].clearTextures(i),delete this._tiles[m])}getRenderableTiles(){return this._renderableTilesKeys.map(i=>this.getTileByID(i))}getTileByID(i){return this._tiles[i]}getTerrainCoords(i){const u={};for(const m of this._renderableTilesKeys){const v=this._tiles[m].tileID;if(v.canonical.equals(i.canonical)){const S=i.clone();S.posMatrix=new Float64Array(16),a.ortho(S.posMatrix,0,a.EXTENT,0,a.EXTENT,0,1),u[m]=S}else if(v.canonical.isChildOf(i.canonical)){const S=i.clone();S.posMatrix=new Float64Array(16);const M=v.canonical.z-i.canonical.z,z=v.canonical.x-(v.canonical.x>>M<<M),q=v.canonical.y-(v.canonical.y>>M<<M),J=a.EXTENT>>M;a.ortho(S.posMatrix,0,J,0,J,0,1),a.translate(S.posMatrix,S.posMatrix,[-z*J,-q*J,0]),u[m]=S}else if(i.canonical.isChildOf(v.canonical)){const S=i.clone();S.posMatrix=new Float64Array(16);const M=i.canonical.z-v.canonical.z,z=i.canonical.x-(i.canonical.x>>M<<M),q=i.canonical.y-(i.canonical.y>>M<<M),J=a.EXTENT>>M;a.ortho(S.posMatrix,0,a.EXTENT,0,a.EXTENT,0,1),a.translate(S.posMatrix,S.posMatrix,[z*J,q*J,0]),a.scale(S.posMatrix,S.posMatrix,[1/2**M,1/2**M,0]),u[m]=S}}return u}getSourceTile(i,u){const m=this.sourceCache._source;let v=i.overscaledZ-this.deltaZoom;if(v>m.maxzoom&&(v=m.maxzoom),v<m.minzoom)return null;this._sourceTileCache[i.key]||(this._sourceTileCache[i.key]=i.scaledTo(v).key);let S=this.sourceCache.getTileByID(this._sourceTileCache[i.key]);if((!S||!S.dem)&&u)for(;v>=m.minzoom&&(!S||!S.dem);)S=this.sourceCache.getTileByID(i.scaledTo(v--).key);return S}tilesAfterTime(i=Date.now()){return Object.values(this._tiles).filter(u=>u.timeLoaded>=i)}}class Bn{constructor(i,u,m){this.style=i,this.sourceCache=new mn(u),this.options=m,this.exaggeration=typeof m.exaggeration=="number"?m.exaggeration:1,this.elevationOffset=typeof m.elevationOffset=="number"?m.elevationOffset:450,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024,this.clearRerenderCache()}getDEMElevation(i,u,m,v=a.EXTENT){if(!(u>=0&&u<v&&m>=0&&m<v))return this.elevationOffset;let S=0;const M=this.getTerrainData(i);if(M.tile&&M.tile.dem){const z=a.transformMat4$1([],[u/v*a.EXTENT,m/v*a.EXTENT],M.u_terrain_matrix),q=[z[0]*M.tile.dem.dim,z[1]*M.tile.dem.dim],J=[Math.floor(q[0]),Math.floor(q[1])],se=M.tile.dem.get(J[0],J[1]),pe=M.tile.dem.get(J[0],J[1]+1),we=M.tile.dem.get(J[0]+1,J[1]),Ve=M.tile.dem.get(J[0]+1,J[1]+1);S=a.number(a.number(se,pe,q[0]-J[0]),a.number(we,Ve,q[0]-J[0]),q[1]-J[1])}return S}rememberForRerender(i,u){for(const m in this.sourceCache._tiles){const v=this.sourceCache._tiles[m];(v.tileID.equals(u)||v.tileID.isChildOf(u))&&(i===this.sourceCache.sourceCache.id&&(v.timeLoaded=Date.now()),this._rerender[i]=this._rerender[i]||{},this._rerender[i][v.tileID.key]=!0)}}needsRerender(i,u){return this._rerender[i]&&this._rerender[i][u.key]}clearRerenderCache(){this._rerender={}}getElevation(i,u,m,v=a.EXTENT){return(this.getDEMElevation(i,u,m,v)+this.elevationOffset)*this.exaggeration}getTerrainData(i){if(!this._emptyDemTexture){const v=this.style.map.painter.context,S=new a.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new k(v,S,v.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new k(v,new a.RGBAImage({width:1,height:1}),v.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(v.gl.NEAREST,v.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.identity([])}const u=this.sourceCache.getSourceTile(i,!0);if(u&&u.dem&&(!u.demTexture||u.needsTerrainPrepare)){const v=this.style.map.painter.context;u.demTexture=this.style.map.painter.getTileTexture(u.dem.stride),u.demTexture?u.demTexture.update(u.dem.getPixels(),{premultiply:!1}):u.demTexture=new k(v,u.dem.getPixels(),v.gl.RGBA,{premultiply:!1}),u.demTexture.bind(v.gl.NEAREST,v.gl.CLAMP_TO_EDGE),u.needsTerrainPrepare=!1}const m=u&&u+u.tileID.key+i.key;if(m&&!this._demMatrixCache[m]){const v=this.sourceCache.sourceCache._source.maxzoom;let S=i.canonical.z-u.tileID.canonical.z;i.overscaledZ>i.canonical.z&&(i.canonical.z>=v?S=i.canonical.z-v:a.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const M=i.canonical.x-(i.canonical.x>>S<<S),z=i.canonical.y-(i.canonical.y>>S<<S),q=a.fromScaling(new Float64Array(16),[1/(a.EXTENT<<S),1/(a.EXTENT<<S),0]);a.translate(q,q,[M*a.EXTENT,z*a.EXTENT,0]),this._demMatrixCache[i.key]={matrix:q,coord:i}}return{u_depth:2,u_terrain:3,u_terrain_dim:u&&u.dem&&u.dem.dim||1,u_terrain_matrix:m?this._demMatrixCache[i.key].matrix:this._emptyDemMatrix,u_terrain_unpack:u&&u.dem&&u.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_offset:this.elevationOffset,u_terrain_exaggeration:this.exaggeration,texture:(u&&u.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:u}}getRTTFramebuffer(){const i=this.style.map.painter;if(!this._rttFramebuffer){const u=this.sourceCache.tileSize*this.qualityFactor;this._rttFramebuffer=i.context.createFramebuffer(u,u,!0),this._rttFramebuffer.depthAttachment.set(i.context.createRenderbuffer(i.context.gl.DEPTH_COMPONENT16,u,u))}return this._rttFramebuffer}getFramebuffer(i){const u=this.style.map.painter,m=u.width/devicePixelRatio,v=u.height/devicePixelRatio;return!this._fbo||this._fbo.width===m&&this._fbo.height===v||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new k(u.context,{width:m,height:v,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new k(u.context,{width:m,height:v,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=u.context.createFramebuffer(m,v,!0),this._fbo.depthAttachment.set(u.context.createRenderbuffer(u.context.gl.DEPTH_COMPONENT16,m,v))),this._fbo.colorAttachment.set(i==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const i=this.style.map.painter.context;if(this._coordsTexture)return this._coordsTexture;const u=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let S=0,M=0;S<this._coordsTextureSize;S++)for(let z=0;z<this._coordsTextureSize;z++,M+=4)u[M+0]=255&z,u[M+1]=255&S,u[M+2]=z>>8<<4|S>>8,u[M+3]=0;const m=new a.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(u.buffer)),v=new k(i,m,i.gl.RGBA,{premultiply:!1});return v.bind(i.gl.NEAREST,i.gl.CLAMP_TO_EDGE),this._coordsTexture=v,v}pointCoordinate(i){const u=new Uint8Array(4),m=this.style.map.painter,v=m.context,S=v.gl;v.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),S.readPixels(i.x,m.height/devicePixelRatio-i.y-1,1,1,S.RGBA,S.UNSIGNED_BYTE,u),v.bindFramebuffer.set(null);const M=u[0]+(u[2]>>4<<8),z=u[1]+((15&u[2])<<8),q=this.coordsIndex[255-u[3]],J=q&&this.sourceCache.getTileByID(q);if(!J)return null;const se=this._coordsTextureSize,pe=(1<<J.tileID.canonical.z)*se;return new a.MercatorCoordinate((J.tileID.canonical.x*se+M)/pe,(J.tileID.canonical.y*se+z)/pe,this.getElevation(J.tileID,M,z,se))}getTerrainMesh(){if(this._mesh)return this._mesh;const i=this.style.map.painter.context,u=new a.PosArray,m=new a.TriangleIndexArray,v=this.meshSize,S=a.EXTENT/v,M=v*v;for(let z=0;z<=v;z++)for(let q=0;q<=v;q++)u.emplaceBack(q*S,z*S);for(let z=0;z<M;z+=v+1)for(let q=0;q<v;q++)m.emplaceBack(q+z,v+q+z+1,v+q+z+2),m.emplaceBack(q+z,v+q+z+2,q+z+1);return this._mesh={indexBuffer:i.createIndexBuffer(m),vertexBuffer:i.createVertexBuffer(u,In.members),segments:a.SegmentVector.simpleSegment(0,0,u.length,m.length)},this._mesh}getMinMaxElevation(i){const u=this.getTerrainData(i).tile,m={minElevation:null,maxElevation:null};return u&&u.dem&&(m.minElevation=(u.dem.min+this.elevationOffset)*this.exaggeration,m.maxElevation=(u.dem.max+this.elevationOffset)*this.exaggeration),m}}const Qn=(g,i)=>a.emitValidationErrors(g,i&&i.filter(u=>u.identifier!=="source.canvas")),Vn=a.pick(Ht,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Ti=a.pick(Ht,["setCenter","setZoom","setBearing","setPitch"]),oi=function(){const g={},i=a.spec.$version;for(const u in a.spec.$root){const m=a.spec.$root[u];if(m.required){let v=null;v=u==="version"?i:m.type==="array"?[]:{},v!=null&&(g[u]=v)}}return g}();class wi extends a.Evented{constructor(i,u={}){super(),this.map=i,this.dispatcher=new fe(ze(),this),this.imageManager=new P,this.imageManager.setEventedParent(this),this.glyphManager=new Z(i._requestManager,u.localIdeographFontFamily),this.lineAtlas=new Ce(256,512),this.crossTileSymbolIndex=new dn,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",a.getReferrer());const m=this;this._rtlTextPluginCallback=wi.registerForPluginStateChange(v=>{m.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:v.pluginStatus,pluginURL:v.pluginURL},(S,M)=>{if(a.triggerPluginCompletionEvent(S),M&&M.every(z=>z))for(const z in m.sourceCaches)m.sourceCaches[z].reload()})}),this.on("data",v=>{if(v.dataType!=="source"||v.sourceDataType!=="metadata")return;const S=this.sourceCaches[v.sourceId];if(!S)return;const M=S.getSource();if(M&&M.vectorLayerIds)for(const z in this._layers){const q=this._layers[z];q.source===M.id&&this._validateLayer(q)}})}loadURL(i,u={}){this.fire(new a.Event("dataloading",{dataType:"style"}));const m=typeof u.validate!="boolean"||u.validate,v=this.map._requestManager.transformRequest(i,a.ResourceType.Style);this._request=a.getJSON(v,(S,M)=>{this._request=null,S?this.fire(new a.ErrorEvent(S)):M&&this._load(M,m)})}loadJSON(i,u={}){this.fire(new a.Event("dataloading",{dataType:"style"})),this._request=a.exported.frame(()=>{this._request=null,this._load(i,u.validate!==!1)})}loadEmpty(){this.fire(new a.Event("dataloading",{dataType:"style"})),this._load(oi,!1)}_load(i,u){if(u&&Qn(this,a.validateStyle(i)))return;this._loaded=!0,this.stylesheet=i;for(const v in i.sources)this.addSource(v,i.sources[v],{validate:!1});i.sprite?this._loadSprite(i.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(i.glyphs);const m=sr(this.stylesheet.layers);this._order=m.map(v=>v.id),this._layers={},this._serializedLayers={};for(let v of m)v=a.createStyleLayer(v),v.setEventedParent(this,{layer:{id:v.id}}),this._layers[v.id]=v,this._serializedLayers[v.id]=v.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new he(this.stylesheet.light),this.setTerrain(this.stylesheet.terrain),this.fire(new a.Event("data",{dataType:"style"})),this.fire(new a.Event("style.load"))}_loadSprite(i){this._spriteRequest=function(u,m,v,S){let M,z,q;const J=v>1?"@2x":"";let se=a.getJSON(m.transformRequest(m.normalizeSpriteURL(u,J,".json"),a.ResourceType.SpriteJSON),(Ve,De)=>{se=null,q||(q=Ve,M=De,we())}),pe=a.getImage(m.transformRequest(m.normalizeSpriteURL(u,J,".png"),a.ResourceType.SpriteImage),(Ve,De)=>{pe=null,q||(q=Ve,z=De,we())});function we(){if(q)S(q);else if(M&&z){const Ve=a.exported.getImageData(z),De={};for(const Oe in M){const{width:ct,height:wt,x:St,y:We,sdf:Rt,pixelRatio:Mt,stretchX:Xt,stretchY:Zt,content:ur}=M[Oe],qt=new a.RGBAImage({width:ct,height:wt});a.RGBAImage.copy(Ve,qt,{x:St,y:We},{x:0,y:0},{width:ct,height:wt}),De[Oe]={data:qt,pixelRatio:Mt,sdf:Rt,stretchX:Xt,stretchY:Zt,content:ur}}S(null,De)}}return{cancel(){se&&(se.cancel(),se=null),pe&&(pe.cancel(),pe=null)}}}(i,this.map._requestManager,this.map.getPixelRatio(),(u,m)=>{if(this._spriteRequest=null,u)this.fire(new a.ErrorEvent(u));else if(m)for(const v in m)this.imageManager.addImage(v,m[v]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.Event("data",{dataType:"style"}))})}_validateLayer(i){const u=this.sourceCaches[i.source];if(!u)return;const m=i.sourceLayer;if(!m)return;const v=u.getSource();(v.type==="geojson"||v.vectorLayerIds&&v.vectorLayerIds.indexOf(m)===-1)&&this.fire(new a.ErrorEvent(new Error(`Source layer "${m}" does not exist on source "${v.id}" as specified by style layer "${i.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this.sourceCaches)if(!this.sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(i){const u=[];for(const m of i){const v=this._layers[m];v.type!=="custom"&&u.push(v.serialize())}return u}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const i in this.sourceCaches)if(this.sourceCaches[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(i){if(!this._loaded)return;const u=this._changed;if(this._changed){const v=Object.keys(this._updatedLayers),S=Object.keys(this._removedLayers);(v.length||S.length)&&this._updateWorkerLayers(v,S);for(const M in this._updatedSources){const z=this._updatedSources[M];if(z==="reload")this._reloadSource(M);else{if(z!=="clear")throw new Error(`Invalid action ${z}`);this._clearSource(M)}}this._updateTilesForChangedImages();for(const M in this._updatedPaintProps)this._layers[M].updateTransitions(i);this.light.updateTransitions(i),this._resetUpdates()}const m={};for(const v in this.sourceCaches){const S=this.sourceCaches[v];m[v]=S.used,S.used=!1}for(const v of this._order){const S=this._layers[v];S.recalculate(i,this._availableImages),!S.isHidden(i.zoom)&&S.source&&(this.sourceCaches[S.source].used=!0)}for(const v in m){const S=this.sourceCaches[v];m[v]!==S.used&&S.fire(new a.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:v}))}this.light.recalculate(i),this.z=i.zoom,u&&this.fire(new a.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateWorkerLayers(i,u){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(i),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setTerrain(i){if(this._checkLoaded(),this._terrainDataCallback&&this.off("data",this._terrainDataCallback),this._terrainfreezeElevationCallback&&this.map.off("freezeElevation",this._terrainfreezeElevationCallback),i){const u=this.sourceCaches[i.source];if(!u)throw new Error(`cannot load terrain, because there exists no source with ID: ${i.source}`);this.terrain=new Bn(this,u,i),this.map.transform.updateElevation(this.terrain),this._terrainfreezeElevationCallback=m=>{m.freeze?this.map.transform.freezeElevation=!0:(this.map.transform.freezeElevation=!1,this.map.transform.recalculateZoom(this.terrain))},this._terrainDataCallback=m=>{m.tile&&(m.sourceId===i.source?(this.map.transform.updateElevation(this.terrain),this.terrain.rememberForRerender(m.sourceId,m.tile.tileID)):m.source.type==="geojson"&&this.terrain.rememberForRerender(m.sourceId,m.tile.tileID))},this.on("data",this._terrainDataCallback),this.map.on("freezeElevation",this._terrainfreezeElevationCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.map.transform.updateElevation(this.terrain);this.map.fire(new a.Event("terrain",{terrain:i}))}setState(i){if(this._checkLoaded(),Qn(this,a.validateStyle(i)))return!1;(i=a.clone$1(i)).layers=sr(i.layers);const u=function(v,S){if(!v)return[{command:Ht.setStyle,args:[S]}];let M=[];try{if(!E(v.version,S.version))return[{command:Ht.setStyle,args:[S]}];E(v.center,S.center)||M.push({command:Ht.setCenter,args:[S.center]}),E(v.zoom,S.zoom)||M.push({command:Ht.setZoom,args:[S.zoom]}),E(v.bearing,S.bearing)||M.push({command:Ht.setBearing,args:[S.bearing]}),E(v.pitch,S.pitch)||M.push({command:Ht.setPitch,args:[S.pitch]}),E(v.sprite,S.sprite)||M.push({command:Ht.setSprite,args:[S.sprite]}),E(v.glyphs,S.glyphs)||M.push({command:Ht.setGlyphs,args:[S.glyphs]}),E(v.transition,S.transition)||M.push({command:Ht.setTransition,args:[S.transition]}),E(v.light,S.light)||M.push({command:Ht.setLight,args:[S.light]});const z={},q=[];(function(se,pe,we,Ve){let De;for(De in pe=pe||{},se=se||{})Object.prototype.hasOwnProperty.call(se,De)&&(Object.prototype.hasOwnProperty.call(pe,De)||Br(De,we,Ve));for(De in pe)Object.prototype.hasOwnProperty.call(pe,De)&&(Object.prototype.hasOwnProperty.call(se,De)?E(se[De],pe[De])||(se[De].type==="geojson"&&pe[De].type==="geojson"&&Gr(se,pe,De)?we.push({command:Ht.setGeoJSONSourceData,args:[De,pe[De].data]}):vr(De,pe,we,Ve)):pr(De,pe,we))})(v.sources,S.sources,q,z);const J=[];v.layers&&v.layers.forEach(se=>{z[se.source]?M.push({command:Ht.removeLayer,args:[se.id]}):J.push(se)}),M=M.concat(q),function(se,pe,we){pe=pe||[];const Ve=(se=se||[]).map(xr),De=pe.map(xr),Oe=se.reduce(Zr,{}),ct=pe.reduce(Zr,{}),wt=Ve.slice(),St=Object.create(null);let We,Rt,Mt,Xt,Zt,ur,qt;for(We=0,Rt=0;We<Ve.length;We++)Mt=Ve[We],Object.prototype.hasOwnProperty.call(ct,Mt)?Rt++:(we.push({command:Ht.removeLayer,args:[Mt]}),wt.splice(wt.indexOf(Mt,Rt),1));for(We=0,Rt=0;We<De.length;We++)Mt=De[De.length-1-We],wt[wt.length-1-We]!==Mt&&(Object.prototype.hasOwnProperty.call(Oe,Mt)?(we.push({command:Ht.removeLayer,args:[Mt]}),wt.splice(wt.lastIndexOf(Mt,wt.length-Rt),1)):Rt++,ur=wt[wt.length-We],we.push({command:Ht.addLayer,args:[ct[Mt],ur]}),wt.splice(wt.length-We,0,Mt),St[Mt]=!0);for(We=0;We<De.length;We++)if(Mt=De[We],Xt=Oe[Mt],Zt=ct[Mt],!St[Mt]&&!E(Xt,Zt))if(E(Xt.source,Zt.source)&&E(Xt["source-layer"],Zt["source-layer"])&&E(Xt.type,Zt.type)){for(qt in rr(Xt.layout,Zt.layout,we,Mt,null,Ht.setLayoutProperty),rr(Xt.paint,Zt.paint,we,Mt,null,Ht.setPaintProperty),E(Xt.filter,Zt.filter)||we.push({command:Ht.setFilter,args:[Mt,Zt.filter]}),E(Xt.minzoom,Zt.minzoom)&&E(Xt.maxzoom,Zt.maxzoom)||we.push({command:Ht.setLayerZoomRange,args:[Mt,Zt.minzoom,Zt.maxzoom]}),Xt)Object.prototype.hasOwnProperty.call(Xt,qt)&&qt!=="layout"&&qt!=="paint"&&qt!=="filter"&&qt!=="metadata"&&qt!=="minzoom"&&qt!=="maxzoom"&&(qt.indexOf("paint.")===0?rr(Xt[qt],Zt[qt],we,Mt,qt.slice(6),Ht.setPaintProperty):E(Xt[qt],Zt[qt])||we.push({command:Ht.setLayerProperty,args:[Mt,qt,Zt[qt]]}));for(qt in Zt)Object.prototype.hasOwnProperty.call(Zt,qt)&&!Object.prototype.hasOwnProperty.call(Xt,qt)&&qt!=="layout"&&qt!=="paint"&&qt!=="filter"&&qt!=="metadata"&&qt!=="minzoom"&&qt!=="maxzoom"&&(qt.indexOf("paint.")===0?rr(Xt[qt],Zt[qt],we,Mt,qt.slice(6),Ht.setPaintProperty):E(Xt[qt],Zt[qt])||we.push({command:Ht.setLayerProperty,args:[Mt,qt,Zt[qt]]}))}else we.push({command:Ht.removeLayer,args:[Mt]}),ur=wt[wt.lastIndexOf(Mt)+1],we.push({command:Ht.addLayer,args:[Zt,ur]})}(J,S.layers,M)}catch(z){console.warn("Unable to compute style diff:",z),M=[{command:Ht.setStyle,args:[S]}]}return M}(this.serialize(),i).filter(v=>!(v.command in Ti));if(u.length===0)return!1;const m=u.filter(v=>!(v.command in Vn));if(m.length>0)throw new Error(`Unimplemented: ${m.map(v=>v.command).join(", ")}.`);return u.forEach(v=>{v.command!=="setTransition"&&this[v.command].apply(this,v.args)}),this.stylesheet=i,!0}addImage(i,u){if(this.getImage(i))return this.fire(new a.ErrorEvent(new Error(`An image named "${i}" already exists.`)));this.imageManager.addImage(i,u),this._afterImageUpdated(i)}updateImage(i,u){this.imageManager.updateImage(i,u)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){if(!this.getImage(i))return this.fire(new a.ErrorEvent(new Error(`An image named "${i}" does not exist.`)));this.imageManager.removeImage(i),this._afterImageUpdated(i)}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(i,u,m={}){if(this._checkLoaded(),this.sourceCaches[i]!==void 0)throw new Error(`Source "${i}" already exists.`);if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(a.validateStyle.source,`sources.${i}`,u,null,m))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);const v=this.sourceCaches[i]=new Ge(i,u,this.dispatcher);v.style=this,v.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:v.serialize(),sourceId:i})),v.onAdd(this.map),this._changed=!0}removeSource(i){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error("There is no source with this ID");for(const m in this._layers)if(this._layers[m].source===i)return this.fire(new a.ErrorEvent(new Error(`Source "${i}" cannot be removed while layer "${m}" is using it.`)));const u=this.sourceCaches[i];delete this.sourceCaches[i],delete this._updatedSources[i],u.fire(new a.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:i})),u.setEventedParent(null),u.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(i,u){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error(`There is no source with this ID=${i}`);const m=this.sourceCaches[i].getSource();if(m.type!=="geojson")throw new Error(`geojsonSource.type is ${m.type}, which is !== 'geojson`);m.setData(u),this._changed=!0}getSource(i){return this.sourceCaches[i]&&this.sourceCaches[i].getSource()}addLayer(i,u,m={}){this._checkLoaded();const v=i.id;if(this.getLayer(v))return void this.fire(new a.ErrorEvent(new Error(`Layer "${v}" already exists on this map.`)));let S;if(i.type==="custom"){if(Qn(this,a.validateCustomStyleLayer(i)))return;S=a.createStyleLayer(i)}else{if(typeof i.source=="object"&&(this.addSource(v,i.source),i=a.clone$1(i),i=a.extend(i,{source:v})),this._validate(a.validateStyle.layer,`layers.${v}`,i,{arrayIndex:-1},m))return;S=a.createStyleLayer(i),this._validateLayer(S),S.setEventedParent(this,{layer:{id:v}}),this._serializedLayers[S.id]=S.serialize()}const M=u?this._order.indexOf(u):this._order.length;if(u&&M===-1)this.fire(new a.ErrorEvent(new Error(`Cannot add layer "${v}" before non-existing layer "${u}".`)));else{if(this._order.splice(M,0,v),this._layerOrderChanged=!0,this._layers[v]=S,this._removedLayers[v]&&S.source&&S.type!=="custom"){const z=this._removedLayers[v];delete this._removedLayers[v],z.type!==S.type?this._updatedSources[S.source]="clear":(this._updatedSources[S.source]="reload",this.sourceCaches[S.source].pause())}this._updateLayer(S),S.onAdd&&S.onAdd(this.map)}}moveLayer(i,u){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new a.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===u)return;const m=this._order.indexOf(i);this._order.splice(m,1);const v=u?this._order.indexOf(u):this._order.length;u&&v===-1?this.fire(new a.ErrorEvent(new Error(`Cannot move layer "${i}" before non-existing layer "${u}".`))):(this._order.splice(v,0,i),this._layerOrderChanged=!0)}removeLayer(i){this._checkLoaded();const u=this._layers[i];if(!u)return void this.fire(new a.ErrorEvent(new Error(`Cannot remove non-existing layer "${i}".`)));u.setEventedParent(null);const m=this._order.indexOf(i);this._order.splice(m,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=u,delete this._layers[i],delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],u.onRemove&&u.onRemove(this.map)}getLayer(i){return this._layers[i]}hasLayer(i){return i in this._layers}setLayerZoomRange(i,u,m){this._checkLoaded();const v=this.getLayer(i);v?v.minzoom===u&&v.maxzoom===m||(u!=null&&(v.minzoom=u),m!=null&&(v.maxzoom=m),this._updateLayer(v)):this.fire(new a.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${i}".`)))}setFilter(i,u,m={}){this._checkLoaded();const v=this.getLayer(i);if(v){if(!E(v.filter,u))return u==null?(v.filter=void 0,void this._updateLayer(v)):void(this._validate(a.validateStyle.filter,`layers.${v.id}.filter`,u,null,m)||(v.filter=a.clone$1(u),this._updateLayer(v)))}else this.fire(new a.ErrorEvent(new Error(`Cannot filter non-existing layer "${i}".`)))}getFilter(i){return a.clone$1(this.getLayer(i).filter)}setLayoutProperty(i,u,m,v={}){this._checkLoaded();const S=this.getLayer(i);S?E(S.getLayoutProperty(u),m)||(S.setLayoutProperty(u,m,v),this._updateLayer(S)):this.fire(new a.ErrorEvent(new Error(`Cannot style non-existing layer "${i}".`)))}getLayoutProperty(i,u){const m=this.getLayer(i);if(m)return m.getLayoutProperty(u);this.fire(new a.ErrorEvent(new Error(`Cannot get style of non-existing layer "${i}".`)))}setPaintProperty(i,u,m,v={}){this._checkLoaded();const S=this.getLayer(i);S?E(S.getPaintProperty(u),m)||(S.setPaintProperty(u,m,v)&&this._updateLayer(S),this._changed=!0,this._updatedPaintProps[i]=!0):this.fire(new a.ErrorEvent(new Error(`Cannot style non-existing layer "${i}".`)))}getPaintProperty(i,u){return this.getLayer(i).getPaintProperty(u)}setFeatureState(i,u){this._checkLoaded();const m=i.source,v=i.sourceLayer,S=this.sourceCaches[m];if(S===void 0)return void this.fire(new a.ErrorEvent(new Error(`The source '${m}' does not exist in the map's style.`)));const M=S.getSource().type;M==="geojson"&&v?this.fire(new a.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):M!=="vector"||v?(i.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),S.setFeatureState(v,i.id,u)):this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(i,u){this._checkLoaded();const m=i.source,v=this.sourceCaches[m];if(v===void 0)return void this.fire(new a.ErrorEvent(new Error(`The source '${m}' does not exist in the map's style.`)));const S=v.getSource().type,M=S==="vector"?i.sourceLayer:void 0;S!=="vector"||M?u&&typeof i.id!="string"&&typeof i.id!="number"?this.fire(new a.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):v.removeFeatureState(M,i.id,u):this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(i){this._checkLoaded();const u=i.source,m=i.sourceLayer,v=this.sourceCaches[u];if(v!==void 0)return v.getSource().type!=="vector"||m?(i.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),v.getFeatureState(m,i.id)):void this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.ErrorEvent(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return a.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return a.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:a.mapObject(this.sourceCaches,i=>i.serialize()),layers:this._serializeLayers(this._order)},i=>i!==void 0)}_updateLayer(i){this._updatedLayers[i.id]=!0,i.source&&!this._updatedSources[i.source]&&this.sourceCaches[i.source].getSource().type!=="raster"&&(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(i){const u=M=>this._layers[M].type==="fill-extrusion",m={},v=[];for(let M=this._order.length-1;M>=0;M--){const z=this._order[M];if(u(z)){m[z]=M;for(const q of i){const J=q[z];if(J)for(const se of J)v.push(se)}}}v.sort((M,z)=>z.intersectionZ-M.intersectionZ);const S=[];for(let M=this._order.length-1;M>=0;M--){const z=this._order[M];if(u(z))for(let q=v.length-1;q>=0;q--){const J=v[q].feature;if(m[J.layer.id]<M)break;S.push(J),v.pop()}else for(const q of i){const J=q[z];if(J)for(const se of J)S.push(se.feature)}}return S}queryRenderedFeatures(i,u,m){u&&u.filter&&this._validate(a.validateStyle.filter,"queryRenderedFeatures.filter",u.filter,null,u);const v={};if(u&&u.layers){if(!Array.isArray(u.layers))return this.fire(new a.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const M of u.layers){const z=this._layers[M];if(!z)return this.fire(new a.ErrorEvent(new Error(`The layer '${M}' does not exist in the map's style and cannot be queried for features.`))),[];v[z.source]=!0}}const S=[];u.availableImages=this._availableImages;for(const M in this.sourceCaches)u.layers&&!v[M]||S.push(Qe(this.sourceCaches[M],this._layers,this._serializedLayers,i,u,m));return this.placement&&S.push(function(M,z,q,J,se,pe,we){const Ve={},De=pe.queryRenderedSymbols(J),Oe=[];for(const ct of Object.keys(De).map(Number))Oe.push(we[ct]);Oe.sort(Ke);for(const ct of Oe){const wt=ct.featureIndex.lookupSymbolFeatures(De[ct.bucketInstanceId],z,ct.bucketIndex,ct.sourceLayerIndex,se.filter,se.layers,se.availableImages,M);for(const St in wt){const We=Ve[St]=Ve[St]||[],Rt=wt[St];Rt.sort((Mt,Xt)=>{const Zt=ct.featureSortOrder;if(Zt){const ur=Zt.indexOf(Mt.featureIndex);return Zt.indexOf(Xt.featureIndex)-ur}return Xt.featureIndex-Mt.featureIndex});for(const Mt of Rt)We.push(Mt)}}for(const ct in Ve)Ve[ct].forEach(wt=>{const St=wt.feature,We=q[M[ct].source].getFeatureState(St.layer["source-layer"],St.id);St.source=St.layer.source,St.layer["source-layer"]&&(St.sourceLayer=St.layer["source-layer"]),St.state=We});return Ve}(this._layers,this._serializedLayers,this.sourceCaches,i,u,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(S)}querySourceFeatures(i,u){u&&u.filter&&this._validate(a.validateStyle.filter,"querySourceFeatures.filter",u.filter,null,u);const m=this.sourceCaches[i];return m?function(v,S){const M=v.getRenderableIds().map(J=>v.getTileByID(J)),z=[],q={};for(let J=0;J<M.length;J++){const se=M[J],pe=se.tileID.canonical.key;q[pe]||(q[pe]=!0,se.querySourceFeatures(z,S))}return z}(m,u):[]}addSourceType(i,u,m){return wi.getSourceType(i)?m(new Error(`A source type called "${i}" already exists.`)):(wi.setSourceType(i,u),u.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:i,url:u.workerSourceURL},m):m(null,null))}getLight(){return this.light.getLight()}setLight(i,u={}){this._checkLoaded();const m=this.light.getLight();let v=!1;for(const M in i)if(!E(i[M],m[M])){v=!0;break}if(!v)return;const S={now:a.exported.now(),transition:a.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,u),this.light.updateTransitions(S)}_validate(i,u,m,v,S={}){return(!S||S.validate!==!1)&&Qn(this,i.call(a.validateStyle,a.extend({key:u,style:this.serialize(),value:m,styleSpec:a.spec},v)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),a.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const i in this._layers)this._layers[i].setEventedParent(null);for(const i in this.sourceCaches){const u=this.sourceCaches[i];u.setEventedParent(null),u.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(i){this.sourceCaches[i].clearTiles()}_reloadSource(i){this.sourceCaches[i].resume(),this.sourceCaches[i].reload()}_updateSources(i){for(const u in this.sourceCaches)this.sourceCaches[u].update(i,this.terrain)}_generateCollisionBoxes(){for(const i in this.sourceCaches)this._reloadSource(i)}_updatePlacement(i,u,m,v,S=!1){let M=!1,z=!1;const q={};for(const J of this._order){const se=this._layers[J];if(se.type!=="symbol")continue;if(!q[se.source]){const we=this.sourceCaches[se.source];q[se.source]=we.getRenderableIds(!0).map(Ve=>we.getTileByID(Ve)).sort((Ve,De)=>De.tileID.overscaledZ-Ve.tileID.overscaledZ||(Ve.tileID.isLessThan(De.tileID)?-1:1))}const pe=this.crossTileSymbolIndex.addLayer(se,q[se.source],i.center.lng);M=M||pe}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((S=S||this._layerOrderChanged||m===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(a.exported.now(),i.zoom))&&(this.pauseablePlacement=new zt(i,this.terrain,this._order,S,u,m,v,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,q),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(a.exported.now()),z=!0),M&&this.pauseablePlacement.placement.setStale()),z||M)for(const J of this._order){const se=this._layers[J];se.type==="symbol"&&this.placement.updateLayerOpacities(se,q[se.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(a.exported.now())}_releaseSymbolFadeTiles(){for(const i in this.sourceCaches)this.sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,u,m){this.imageManager.getImages(u.icons,m),this._updateTilesForChangedImages();const v=this.sourceCaches[u.source];v&&v.setDependencies(u.tileID.key,u.type,u.icons)}getGlyphs(i,u,m){this.glyphManager.getGlyphs(u.stacks,m)}getResource(i,u,m){return a.makeRequest(u,m)}}wi.getSourceType=function(g){return ie[g]},wi.setSourceType=function(g,i){ie[g]=i},wi.registerForPluginStateChange=a.registerForPluginStateChange;var ks="attribute vec2 a_pos;uniform mat4 u_matrix;varying vec2 v_texture_pos;varying float v_depth;void main() {v_texture_pos=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);v_depth=gl_Position.z/gl_Position.w;}";const bi={prelude:Yn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_offset;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return (elevation+u_terrain_offset)*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Yn(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Yn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Yn(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Yn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Yn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Yn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Yn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Yn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Yn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Yn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Yn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Yn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Yn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Yn(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Yn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Yn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Yn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Yn(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Yn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Yn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Yn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Yn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Yn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Yn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Yn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Yn("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",ks),terrainDepth:Yn("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",ks),terrainCoords:Yn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",ks)};function Yn(g,i){const u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,m=i.match(/attribute ([\w]+) ([\w]+)/g),v=g.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),S=i.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),M=S?S.concat(v):v,z={};return{fragmentSource:g=g.replace(u,(q,J,se,pe,we)=>(z[we]=!0,J==="define"?`
#ifndef HAS_UNIFORM_u_${we}
varying ${se} ${pe} ${we};
#else
uniform ${se} ${pe} u_${we};
#endif
`:`
#ifdef HAS_UNIFORM_u_${we}
    ${se} ${pe} ${we} = u_${we};
#endif
`)),vertexSource:i=i.replace(u,(q,J,se,pe,we)=>{const Ve=pe==="float"?"vec2":"vec4",De=we.match(/color/)?"color":Ve;return z[we]?J==="define"?`
#ifndef HAS_UNIFORM_u_${we}
uniform lowp float u_${we}_t;
attribute ${se} ${Ve} a_${we};
varying ${se} ${pe} ${we};
#else
uniform ${se} ${pe} u_${we};
#endif
`:De==="vec4"?`
#ifndef HAS_UNIFORM_u_${we}
    ${we} = a_${we};
#else
    ${se} ${pe} ${we} = u_${we};
#endif
`:`
#ifndef HAS_UNIFORM_u_${we}
    ${we} = unpack_mix_${De}(a_${we}, u_${we}_t);
#else
    ${se} ${pe} ${we} = u_${we};
#endif
`:J==="define"?`
#ifndef HAS_UNIFORM_u_${we}
uniform lowp float u_${we}_t;
attribute ${se} ${Ve} a_${we};
#else
uniform ${se} ${pe} u_${we};
#endif
`:De==="vec4"?`
#ifndef HAS_UNIFORM_u_${we}
    ${se} ${pe} ${we} = a_${we};
#else
    ${se} ${pe} ${we} = u_${we};
#endif
`:`
#ifndef HAS_UNIFORM_u_${we}
    ${se} ${pe} ${we} = unpack_mix_${De}(a_${we}, u_${we}_t);
#else
    ${se} ${pe} ${we} = u_${we};
#endif
`}),staticAttributes:m,staticUniforms:M}}class Ya{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,u,m,v,S,M,z,q,J){this.context=i;let se=this.boundPaintVertexBuffers.length!==v.length;for(let pe=0;!se&&pe<v.length;pe++)this.boundPaintVertexBuffers[pe]!==v[pe]&&(se=!0);i.extVertexArrayObject&&this.vao&&this.boundProgram===u&&this.boundLayoutVertexBuffer===m&&!se&&this.boundIndexBuffer===S&&this.boundVertexOffset===M&&this.boundDynamicVertexBuffer===z&&this.boundDynamicVertexBuffer2===q&&this.boundDynamicVertexBuffer3===J?(i.bindVertexArrayOES.set(this.vao),z&&z.bind(),S&&S.dynamicDraw&&S.bind(),q&&q.bind(),J&&J.bind()):this.freshBind(u,m,v,S,M,z,q,J)}freshBind(i,u,m,v,S,M,z,q){let J;const se=i.numAttributes,pe=this.context,we=pe.gl;if(pe.extVertexArrayObject)this.vao&&this.destroy(),this.vao=pe.extVertexArrayObject.createVertexArrayOES(),pe.bindVertexArrayOES.set(this.vao),J=0,this.boundProgram=i,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=m,this.boundIndexBuffer=v,this.boundVertexOffset=S,this.boundDynamicVertexBuffer=M,this.boundDynamicVertexBuffer2=z,this.boundDynamicVertexBuffer3=q;else{J=pe.currentNumAttributes||0;for(let Ve=se;Ve<J;Ve++)we.disableVertexAttribArray(Ve)}u.enableAttributes(we,i);for(const Ve of m)Ve.enableAttributes(we,i);M&&M.enableAttributes(we,i),z&&z.enableAttributes(we,i),q&&q.enableAttributes(we,i),u.bind(),u.setVertexAttribPointers(we,i,S);for(const Ve of m)Ve.bind(),Ve.setVertexAttribPointers(we,i,S);M&&(M.bind(),M.setVertexAttribPointers(we,i,S)),v&&v.bind(),z&&(z.bind(),z.setVertexAttribPointers(we,i,S)),q&&(q.bind(),q.setVertexAttribPointers(we,i,S)),pe.currentNumAttributes=se}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Ks(g){const i=[];for(let u=0;u<g.length;u++){if(g[u]===null)continue;const m=g[u].split(" ");i.push(m.pop())}return i}class Gs{constructor(i,u,m,v,S,M,z){const q=i.gl;this.program=q.createProgram();const J=Ks(m.staticAttributes),se=v?v.getBinderAttributes():[],pe=J.concat(se),we=bi.prelude.staticUniforms?Ks(bi.prelude.staticUniforms):[],Ve=m.staticUniforms?Ks(m.staticUniforms):[],De=v?v.getBinderUniforms():[],Oe=we.concat(Ve).concat(De),ct=[];for(const Zt of Oe)ct.indexOf(Zt)<0&&ct.push(Zt);const wt=v?v.defines():[];M&&wt.push("#define OVERDRAW_INSPECTOR;"),z&&wt.push("#define TERRAIN3D;");const St=wt.concat(bi.prelude.fragmentSource,m.fragmentSource).join(`
`),We=wt.concat(bi.prelude.vertexSource,m.vertexSource).join(`
`),Rt=q.createShader(q.FRAGMENT_SHADER);if(q.isContextLost())return void(this.failedToCreate=!0);q.shaderSource(Rt,St),q.compileShader(Rt),q.attachShader(this.program,Rt);const Mt=q.createShader(q.VERTEX_SHADER);if(q.isContextLost())return void(this.failedToCreate=!0);q.shaderSource(Mt,We),q.compileShader(Mt),q.attachShader(this.program,Mt),this.attributes={};const Xt={};this.numAttributes=pe.length;for(let Zt=0;Zt<this.numAttributes;Zt++)pe[Zt]&&(q.bindAttribLocation(this.program,Zt,pe[Zt]),this.attributes[pe[Zt]]=Zt);q.linkProgram(this.program),q.deleteShader(Mt),q.deleteShader(Rt);for(let Zt=0;Zt<ct.length;Zt++){const ur=ct[Zt];if(ur&&!Xt[ur]){const qt=q.getUniformLocation(this.program,ur);qt&&(Xt[ur]=qt)}}this.fixedUniforms=S(i,Xt),this.terrainUniforms=((Zt,ur)=>({u_depth:new a.Uniform1i(Zt,ur.u_depth),u_terrain:new a.Uniform1i(Zt,ur.u_terrain),u_terrain_dim:new a.Uniform1f(Zt,ur.u_terrain_dim),u_terrain_matrix:new a.UniformMatrix4f(Zt,ur.u_terrain_matrix),u_terrain_unpack:new a.Uniform4f(Zt,ur.u_terrain_unpack),u_terrain_offset:new a.Uniform1f(Zt,ur.u_terrain_offset),u_terrain_exaggeration:new a.Uniform1f(Zt,ur.u_terrain_exaggeration)}))(i,Xt),this.binderUniforms=v?v.getUniforms(i,Xt):[]}draw(i,u,m,v,S,M,z,q,J,se,pe,we,Ve,De,Oe,ct,wt,St){const We=i.gl;if(this.failedToCreate)return;if(i.program.set(this.program),i.setDepthMode(m),i.setStencilMode(v),i.setColorMode(S),i.setCullFace(M),q){i.activeTexture.set(We.TEXTURE2),We.bindTexture(We.TEXTURE_2D,q.depthTexture),i.activeTexture.set(We.TEXTURE3),We.bindTexture(We.TEXTURE_2D,q.texture);for(const Mt in this.terrainUniforms)this.terrainUniforms[Mt].set(q[Mt])}for(const Mt in this.fixedUniforms)this.fixedUniforms[Mt].set(z[Mt]);Oe&&Oe.setUniforms(i,this.binderUniforms,Ve,{zoom:De});let Rt=0;switch(u){case We.LINES:Rt=2;break;case We.TRIANGLES:Rt=3;break;case We.LINE_STRIP:Rt=1}for(const Mt of we.get()){const Xt=Mt.vaos||(Mt.vaos={});(Xt[J]||(Xt[J]=new Ya)).bind(i,this,se,Oe?Oe.getPaintVertexBuffers():[],pe,Mt.vertexOffset,ct,wt,St),We.drawElements(u,Mt.primitiveLength*Rt,We.UNSIGNED_SHORT,Mt.primitiveOffset*Rt*2)}}}function ia(g,i,u){const m=1/hn(u,1,i.transform.tileZoom),v=Math.pow(2,u.tileID.overscaledZ),S=u.tileSize*Math.pow(2,i.transform.tileZoom)/v,M=S*(u.tileID.canonical.x+u.tileID.wrap*v),z=S*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[m,g.fromScale,g.toScale],u_fade:g.t,u_pixel_coord_upper:[M>>16,z>>16],u_pixel_coord_lower:[65535&M,65535&z]}}const gs=(g,i,u,m)=>{const v=i.style.light,S=v.properties.get("position"),M=[S.x,S.y,S.z],z=a.create$1();v.properties.get("anchor")==="viewport"&&a.fromRotation(z,-i.transform.angle),a.transformMat3(M,M,z);const q=v.properties.get("color");return{u_matrix:g,u_lightpos:M,u_lightintensity:v.properties.get("intensity"),u_lightcolor:[q.r,q.g,q.b],u_vertical_gradient:+u,u_opacity:m}},Ri=(g,i,u,m,v,S,M)=>a.extend(gs(g,i,u,m),ia(S,i,M),{u_height_factor:-Math.pow(2,v.overscaledZ)/M.tileSize/8}),Xi=g=>({u_matrix:g}),vo=(g,i,u,m)=>a.extend(Xi(g),ia(u,i,m)),nA=(g,i)=>({u_matrix:g,u_world:i}),EA=(g,i,u,m,v)=>a.extend(vo(g,i,u,m),{u_world:v}),sa=(g,i,u,m)=>{const v=g.transform;let S,M;if(m.paint.get("circle-pitch-alignment")==="map"){const z=hn(u,1,v.zoom);S=!0,M=[z,z]}else S=!1,M=v.pixelsToGLUnits;return{u_camera_to_center_distance:v.cameraToCenterDistance,u_scale_with_map:+(m.paint.get("circle-pitch-scale")==="map"),u_matrix:g.translatePosMatrix(i.posMatrix,u,m.paint.get("circle-translate"),m.paint.get("circle-translate-anchor")),u_pitch_with_map:+S,u_device_pixel_ratio:g.pixelRatio,u_extrude_scale:M}},bs=(g,i,u)=>{const m=hn(u,1,i.zoom),v=Math.pow(2,i.zoom-u.tileID.overscaledZ),S=u.tileID.overscaleFactor();return{u_matrix:g,u_camera_to_center_distance:i.cameraToCenterDistance,u_pixels_to_tile_units:m,u_extrude_scale:[i.pixelsToGLUnits[0]/(m*v),i.pixelsToGLUnits[1]/(m*v)],u_overscale_factor:S}},xs=(g,i,u=1)=>({u_matrix:g,u_color:i,u_overlay:0,u_overlay_scale:u}),$a=g=>({u_matrix:g}),aa=(g,i,u,m)=>({u_matrix:g,u_extrude_scale:hn(i,1,u),u_intensity:m});function Mo(g,i){const u=Math.pow(2,i.canonical.z),m=i.canonical.y;return[new a.MercatorCoordinate(0,m/u).toLngLat().lat,new a.MercatorCoordinate(0,(m+1)/u).toLngLat().lat]}const Qa=(g,i,u,m)=>{const v=g.transform;return{u_matrix:Bs(g,i,u,m),u_ratio:1/hn(i,1,v.zoom),u_device_pixel_ratio:g.pixelRatio,u_units_to_pixels:[1/v.pixelsToGLUnits[0],1/v.pixelsToGLUnits[1]]}},Do=(g,i,u,m,v)=>a.extend(Qa(g,i,u,v),{u_image:0,u_image_height:m}),oa=(g,i,u,m,v)=>{const S=g.transform,M=si(i,S);return{u_matrix:Bs(g,i,u,v),u_texsize:i.imageAtlasTexture.size,u_ratio:1/hn(i,1,S.zoom),u_device_pixel_ratio:g.pixelRatio,u_image:0,u_scale:[M,m.fromScale,m.toScale],u_fade:m.t,u_units_to_pixels:[1/S.pixelsToGLUnits[0],1/S.pixelsToGLUnits[1]]}},qs=(g,i,u,m,v,S)=>{const M=g.lineAtlas,z=si(i,g.transform),q=u.layout.get("line-cap")==="round",J=M.getDash(m.from,q),se=M.getDash(m.to,q),pe=J.width*v.fromScale,we=se.width*v.toScale;return a.extend(Qa(g,i,u,S),{u_patternscale_a:[z/pe,-J.height/2],u_patternscale_b:[z/we,-se.height/2],u_sdfgamma:M.width/(256*Math.min(pe,we)*g.pixelRatio)/2,u_image:0,u_tex_y_a:J.y,u_tex_y_b:se.y,u_mix:v.t})};function si(g,i){return 1/hn(g,1,i.tileZoom)}function Bs(g,i,u,m){return g.translatePosMatrix(m?m.posMatrix:i.tileID.posMatrix,i,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const ys=(g,i,u,m,v)=>{return{u_matrix:g,u_tl_parent:i,u_scale_parent:u,u_buffer_scale:1,u_fade_t:m.mix,u_opacity:m.opacity*v.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:v.paint.get("raster-brightness-min"),u_brightness_high:v.paint.get("raster-brightness-max"),u_saturation_factor:(M=v.paint.get("raster-saturation"),M>0?1-1/(1.001-M):-M),u_contrast_factor:(S=v.paint.get("raster-contrast"),S>0?1/(1-S):1+S),u_spin_weights:iA(v.paint.get("raster-hue-rotate"))};var S,M};function iA(g){g*=Math.PI/180;const i=Math.sin(g),u=Math.cos(g);return[(2*u+1)/3,(-Math.sqrt(3)*i-u+1)/3,(Math.sqrt(3)*i-u+1)/3]}const sA=(g,i,u,m,v,S,M,z,q,J)=>{const se=v.transform;return{u_is_size_zoom_constant:+(g==="constant"||g==="source"),u_is_size_feature_constant:+(g==="constant"||g==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:se.cameraToCenterDistance,u_pitch:se.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:se.width/se.height,u_fade_change:v.options.fadeDuration?v.symbolFadeChange:1,u_matrix:S,u_label_plane_matrix:M,u_coord_matrix:z,u_is_text:+q,u_pitch_with_map:+m,u_texsize:J,u_texture:0}},Cn=(g,i,u,m,v,S,M,z,q,J,se)=>{const pe=v.transform;return a.extend(sA(g,i,u,m,v,S,M,z,q,J),{u_gamma_scale:m?Math.cos(pe._pitch)*pe.cameraToCenterDistance:1,u_device_pixel_ratio:v.pixelRatio,u_is_halo:+se})},GA=(g,i,u,m,v,S,M,z,q,J)=>a.extend(Cn(g,i,u,m,v,S,M,z,!0,q,!0),{u_texsize_icon:J,u_texture_icon:1}),ml=(g,i,u)=>({u_matrix:g,u_opacity:i,u_color:u}),Pa=(g,i,u,m,v,S)=>a.extend(function(M,z,q,J){const se=q.imageManager.getPattern(M.from.toString()),pe=q.imageManager.getPattern(M.to.toString()),{width:we,height:Ve}=q.imageManager.getPixelSize(),De=Math.pow(2,J.tileID.overscaledZ),Oe=J.tileSize*Math.pow(2,q.transform.tileZoom)/De,ct=Oe*(J.tileID.canonical.x+J.tileID.wrap*De),wt=Oe*J.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:se.tl,u_pattern_br_a:se.br,u_pattern_tl_b:pe.tl,u_pattern_br_b:pe.br,u_texsize:[we,Ve],u_mix:z.t,u_pattern_size_a:se.displaySize,u_pattern_size_b:pe.displaySize,u_scale_a:z.fromScale,u_scale_b:z.toScale,u_tile_units_to_pixels:1/hn(J,1,q.transform.tileZoom),u_pixel_coord_upper:[ct>>16,wt>>16],u_pixel_coord_lower:[65535&ct,65535&wt]}}(m,S,u,v),{u_matrix:g,u_opacity:i}),_o={fillExtrusion:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_lightpos:new a.Uniform3f(g,i.u_lightpos),u_lightintensity:new a.Uniform1f(g,i.u_lightintensity),u_lightcolor:new a.Uniform3f(g,i.u_lightcolor),u_vertical_gradient:new a.Uniform1f(g,i.u_vertical_gradient),u_opacity:new a.Uniform1f(g,i.u_opacity)}),fillExtrusionPattern:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_lightpos:new a.Uniform3f(g,i.u_lightpos),u_lightintensity:new a.Uniform1f(g,i.u_lightintensity),u_lightcolor:new a.Uniform3f(g,i.u_lightcolor),u_vertical_gradient:new a.Uniform1f(g,i.u_vertical_gradient),u_height_factor:new a.Uniform1f(g,i.u_height_factor),u_image:new a.Uniform1i(g,i.u_image),u_texsize:new a.Uniform2f(g,i.u_texsize),u_pixel_coord_upper:new a.Uniform2f(g,i.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(g,i.u_pixel_coord_lower),u_scale:new a.Uniform3f(g,i.u_scale),u_fade:new a.Uniform1f(g,i.u_fade),u_opacity:new a.Uniform1f(g,i.u_opacity)}),fill:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix)}),fillPattern:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_image:new a.Uniform1i(g,i.u_image),u_texsize:new a.Uniform2f(g,i.u_texsize),u_pixel_coord_upper:new a.Uniform2f(g,i.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(g,i.u_pixel_coord_lower),u_scale:new a.Uniform3f(g,i.u_scale),u_fade:new a.Uniform1f(g,i.u_fade)}),fillOutline:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_world:new a.Uniform2f(g,i.u_world)}),fillOutlinePattern:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_world:new a.Uniform2f(g,i.u_world),u_image:new a.Uniform1i(g,i.u_image),u_texsize:new a.Uniform2f(g,i.u_texsize),u_pixel_coord_upper:new a.Uniform2f(g,i.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(g,i.u_pixel_coord_lower),u_scale:new a.Uniform3f(g,i.u_scale),u_fade:new a.Uniform1f(g,i.u_fade)}),circle:(g,i)=>({u_camera_to_center_distance:new a.Uniform1f(g,i.u_camera_to_center_distance),u_scale_with_map:new a.Uniform1i(g,i.u_scale_with_map),u_pitch_with_map:new a.Uniform1i(g,i.u_pitch_with_map),u_extrude_scale:new a.Uniform2f(g,i.u_extrude_scale),u_device_pixel_ratio:new a.Uniform1f(g,i.u_device_pixel_ratio),u_matrix:new a.UniformMatrix4f(g,i.u_matrix)}),collisionBox:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_camera_to_center_distance:new a.Uniform1f(g,i.u_camera_to_center_distance),u_pixels_to_tile_units:new a.Uniform1f(g,i.u_pixels_to_tile_units),u_extrude_scale:new a.Uniform2f(g,i.u_extrude_scale),u_overscale_factor:new a.Uniform1f(g,i.u_overscale_factor)}),collisionCircle:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_inv_matrix:new a.UniformMatrix4f(g,i.u_inv_matrix),u_camera_to_center_distance:new a.Uniform1f(g,i.u_camera_to_center_distance),u_viewport_size:new a.Uniform2f(g,i.u_viewport_size)}),debug:(g,i)=>({u_color:new a.UniformColor(g,i.u_color),u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_overlay:new a.Uniform1i(g,i.u_overlay),u_overlay_scale:new a.Uniform1f(g,i.u_overlay_scale)}),clippingMask:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix)}),heatmap:(g,i)=>({u_extrude_scale:new a.Uniform1f(g,i.u_extrude_scale),u_intensity:new a.Uniform1f(g,i.u_intensity),u_matrix:new a.UniformMatrix4f(g,i.u_matrix)}),heatmapTexture:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_world:new a.Uniform2f(g,i.u_world),u_image:new a.Uniform1i(g,i.u_image),u_color_ramp:new a.Uniform1i(g,i.u_color_ramp),u_opacity:new a.Uniform1f(g,i.u_opacity)}),hillshade:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_image:new a.Uniform1i(g,i.u_image),u_latrange:new a.Uniform2f(g,i.u_latrange),u_light:new a.Uniform2f(g,i.u_light),u_shadow:new a.UniformColor(g,i.u_shadow),u_highlight:new a.UniformColor(g,i.u_highlight),u_accent:new a.UniformColor(g,i.u_accent)}),hillshadePrepare:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_image:new a.Uniform1i(g,i.u_image),u_dimension:new a.Uniform2f(g,i.u_dimension),u_zoom:new a.Uniform1f(g,i.u_zoom),u_unpack:new a.Uniform4f(g,i.u_unpack)}),line:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_ratio:new a.Uniform1f(g,i.u_ratio),u_device_pixel_ratio:new a.Uniform1f(g,i.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(g,i.u_units_to_pixels)}),lineGradient:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_ratio:new a.Uniform1f(g,i.u_ratio),u_device_pixel_ratio:new a.Uniform1f(g,i.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(g,i.u_units_to_pixels),u_image:new a.Uniform1i(g,i.u_image),u_image_height:new a.Uniform1f(g,i.u_image_height)}),linePattern:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_texsize:new a.Uniform2f(g,i.u_texsize),u_ratio:new a.Uniform1f(g,i.u_ratio),u_device_pixel_ratio:new a.Uniform1f(g,i.u_device_pixel_ratio),u_image:new a.Uniform1i(g,i.u_image),u_units_to_pixels:new a.Uniform2f(g,i.u_units_to_pixels),u_scale:new a.Uniform3f(g,i.u_scale),u_fade:new a.Uniform1f(g,i.u_fade)}),lineSDF:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_ratio:new a.Uniform1f(g,i.u_ratio),u_device_pixel_ratio:new a.Uniform1f(g,i.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(g,i.u_units_to_pixels),u_patternscale_a:new a.Uniform2f(g,i.u_patternscale_a),u_patternscale_b:new a.Uniform2f(g,i.u_patternscale_b),u_sdfgamma:new a.Uniform1f(g,i.u_sdfgamma),u_image:new a.Uniform1i(g,i.u_image),u_tex_y_a:new a.Uniform1f(g,i.u_tex_y_a),u_tex_y_b:new a.Uniform1f(g,i.u_tex_y_b),u_mix:new a.Uniform1f(g,i.u_mix)}),raster:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_tl_parent:new a.Uniform2f(g,i.u_tl_parent),u_scale_parent:new a.Uniform1f(g,i.u_scale_parent),u_buffer_scale:new a.Uniform1f(g,i.u_buffer_scale),u_fade_t:new a.Uniform1f(g,i.u_fade_t),u_opacity:new a.Uniform1f(g,i.u_opacity),u_image0:new a.Uniform1i(g,i.u_image0),u_image1:new a.Uniform1i(g,i.u_image1),u_brightness_low:new a.Uniform1f(g,i.u_brightness_low),u_brightness_high:new a.Uniform1f(g,i.u_brightness_high),u_saturation_factor:new a.Uniform1f(g,i.u_saturation_factor),u_contrast_factor:new a.Uniform1f(g,i.u_contrast_factor),u_spin_weights:new a.Uniform3f(g,i.u_spin_weights)}),symbolIcon:(g,i)=>({u_is_size_zoom_constant:new a.Uniform1i(g,i.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(g,i.u_is_size_feature_constant),u_size_t:new a.Uniform1f(g,i.u_size_t),u_size:new a.Uniform1f(g,i.u_size),u_camera_to_center_distance:new a.Uniform1f(g,i.u_camera_to_center_distance),u_pitch:new a.Uniform1f(g,i.u_pitch),u_rotate_symbol:new a.Uniform1i(g,i.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(g,i.u_aspect_ratio),u_fade_change:new a.Uniform1f(g,i.u_fade_change),u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(g,i.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(g,i.u_coord_matrix),u_is_text:new a.Uniform1i(g,i.u_is_text),u_pitch_with_map:new a.Uniform1i(g,i.u_pitch_with_map),u_texsize:new a.Uniform2f(g,i.u_texsize),u_texture:new a.Uniform1i(g,i.u_texture)}),symbolSDF:(g,i)=>({u_is_size_zoom_constant:new a.Uniform1i(g,i.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(g,i.u_is_size_feature_constant),u_size_t:new a.Uniform1f(g,i.u_size_t),u_size:new a.Uniform1f(g,i.u_size),u_camera_to_center_distance:new a.Uniform1f(g,i.u_camera_to_center_distance),u_pitch:new a.Uniform1f(g,i.u_pitch),u_rotate_symbol:new a.Uniform1i(g,i.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(g,i.u_aspect_ratio),u_fade_change:new a.Uniform1f(g,i.u_fade_change),u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(g,i.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(g,i.u_coord_matrix),u_is_text:new a.Uniform1i(g,i.u_is_text),u_pitch_with_map:new a.Uniform1i(g,i.u_pitch_with_map),u_texsize:new a.Uniform2f(g,i.u_texsize),u_texture:new a.Uniform1i(g,i.u_texture),u_gamma_scale:new a.Uniform1f(g,i.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(g,i.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(g,i.u_is_halo)}),symbolTextAndIcon:(g,i)=>({u_is_size_zoom_constant:new a.Uniform1i(g,i.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(g,i.u_is_size_feature_constant),u_size_t:new a.Uniform1f(g,i.u_size_t),u_size:new a.Uniform1f(g,i.u_size),u_camera_to_center_distance:new a.Uniform1f(g,i.u_camera_to_center_distance),u_pitch:new a.Uniform1f(g,i.u_pitch),u_rotate_symbol:new a.Uniform1i(g,i.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(g,i.u_aspect_ratio),u_fade_change:new a.Uniform1f(g,i.u_fade_change),u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(g,i.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(g,i.u_coord_matrix),u_is_text:new a.Uniform1i(g,i.u_is_text),u_pitch_with_map:new a.Uniform1i(g,i.u_pitch_with_map),u_texsize:new a.Uniform2f(g,i.u_texsize),u_texsize_icon:new a.Uniform2f(g,i.u_texsize_icon),u_texture:new a.Uniform1i(g,i.u_texture),u_texture_icon:new a.Uniform1i(g,i.u_texture_icon),u_gamma_scale:new a.Uniform1f(g,i.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(g,i.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(g,i.u_is_halo)}),background:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_opacity:new a.Uniform1f(g,i.u_opacity),u_color:new a.UniformColor(g,i.u_color)}),backgroundPattern:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_opacity:new a.Uniform1f(g,i.u_opacity),u_image:new a.Uniform1i(g,i.u_image),u_pattern_tl_a:new a.Uniform2f(g,i.u_pattern_tl_a),u_pattern_br_a:new a.Uniform2f(g,i.u_pattern_br_a),u_pattern_tl_b:new a.Uniform2f(g,i.u_pattern_tl_b),u_pattern_br_b:new a.Uniform2f(g,i.u_pattern_br_b),u_texsize:new a.Uniform2f(g,i.u_texsize),u_mix:new a.Uniform1f(g,i.u_mix),u_pattern_size_a:new a.Uniform2f(g,i.u_pattern_size_a),u_pattern_size_b:new a.Uniform2f(g,i.u_pattern_size_b),u_scale_a:new a.Uniform1f(g,i.u_scale_a),u_scale_b:new a.Uniform1f(g,i.u_scale_b),u_pixel_coord_upper:new a.Uniform2f(g,i.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(g,i.u_pixel_coord_lower),u_tile_units_to_pixels:new a.Uniform1f(g,i.u_tile_units_to_pixels)}),terrain:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_texture:new a.Uniform1i(g,i.u_texture)}),terrainDepth:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix)}),terrainCoords:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_texture:new a.Uniform1i(g,i.u_texture),u_terrain_coords_id:new a.Uniform1f(g,i.u_terrain_coords_id)})};class aA{constructor(i,u,m){this.context=i;const v=i.gl;this.buffer=v.createBuffer(),this.dynamicDraw=Boolean(m),this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),v.bufferData(v.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const u=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const wo={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class gt{constructor(i,u,m,v){this.length=u.length,this.attributes=m,this.itemSize=u.bytesPerElement,this.dynamicDraw=v,this.context=i;const S=i.gl;this.buffer=S.createBuffer(),i.bindVertexBuffer.set(this.buffer),S.bufferData(S.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?S.DYNAMIC_DRAW:S.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){if(i.length!==this.length)throw new Error(`Length of new data is ${i.length}, which doesn't match current length of ${this.length}`);const u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,u){for(let m=0;m<this.attributes.length;m++){const v=u.attributes[this.attributes[m].name];v!==void 0&&i.enableVertexAttribArray(v)}}setVertexAttribPointers(i,u,m){for(let v=0;v<this.attributes.length;v++){const S=this.attributes[v],M=u.attributes[S.name];M!==void 0&&i.vertexAttribPointer(M,S.components,i[wo[S.type]],!1,this.itemSize,S.offset+this.itemSize*(m||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Mn{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Ds extends Mn{getDefault(){return a.Color.transparent}set(i){const u=this.current;(i.r!==u.r||i.g!==u.g||i.b!==u.b||i.a!==u.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class Oi extends Mn{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class Qs extends Mn{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class ya extends Mn{getDefault(){return[!0,!0,!0,!0]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||i[3]!==u[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class eo extends Mn{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class Cs extends Mn{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class Aa extends Mn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const u=this.current;(i.func!==u.func||i.ref!==u.ref||i.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class to extends Mn{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class va extends Mn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=i,this.dirty=!1}}class qA extends Mn{getDefault(){return[0,1]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class ts extends Mn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=i,this.dirty=!1}}class FA extends Mn{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class ro extends Mn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.BLEND):u.disable(u.BLEND),this.current=i,this.dirty=!1}}class no extends Mn{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class io extends Mn{getDefault(){return a.Color.transparent}set(i){const u=this.current;(i.r!==u.r||i.g!==u.g||i.b!==u.b||i.a!==u.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class Wl extends Mn{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class No extends Mn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=i,this.dirty=!1}}class vs extends Mn{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class oA extends Mn{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class AA extends Mn{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class _c extends Mn{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class _a extends Mn{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||i[3]!==u[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class WA extends Mn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class SA extends Mn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class IA extends Mn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindTexture(u.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class TA extends Mn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class lA extends Mn{getDefault(){return null}set(i){const u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class UA extends Mn{constructor(i){super(i),this.vao=i.extVertexArrayObject}getDefault(){return null}set(i){this.vao&&(i!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(i),this.current=i,this.dirty=!1)}}class bo extends Mn{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class gl extends Mn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class Xl extends Mn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class jo extends Mn{constructor(i,u){super(i),this.context=i,this.parent=u}getDefault(){return null}}class wa extends jo{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class XA extends jo{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class ba{constructor(i,u,m,v){this.context=i,this.width=u,this.height=m;const S=i.gl,M=this.framebuffer=S.createFramebuffer();if(this.colorAttachment=new wa(i,M),v&&(this.depthAttachment=new XA(i,M)),S.checkFramebufferStatus(S.FRAMEBUFFER)!==S.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const i=this.context.gl,u=this.colorAttachment.get();if(u&&i.deleteTexture(u),this.depthAttachment){const m=this.depthAttachment.get();m&&i.deleteRenderbuffer(m)}i.deleteFramebuffer(this.framebuffer)}}class xi{constructor(i,u,m){this.blendFunction=i,this.blendColor=u,this.mask=m}}xi.Replace=[1,0],xi.disabled=new xi(xi.Replace,a.Color.transparent,[!1,!1,!1,!1]),xi.unblended=new xi(xi.Replace,a.Color.transparent,[!0,!0,!0,!0]),xi.alphaBlended=new xi([1,771],a.Color.transparent,[!0,!0,!0,!0]);class N{constructor(i){this.gl=i,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Ds(this),this.clearDepth=new Oi(this),this.clearStencil=new Qs(this),this.colorMask=new ya(this),this.depthMask=new eo(this),this.stencilMask=new Cs(this),this.stencilFunc=new Aa(this),this.stencilOp=new to(this),this.stencilTest=new va(this),this.depthRange=new qA(this),this.depthTest=new ts(this),this.depthFunc=new FA(this),this.blend=new ro(this),this.blendFunc=new no(this),this.blendColor=new io(this),this.blendEquation=new Wl(this),this.cullFace=new No(this),this.cullFaceSide=new vs(this),this.frontFace=new oA(this),this.program=new AA(this),this.activeTexture=new _c(this),this.viewport=new _a(this),this.bindFramebuffer=new WA(this),this.bindRenderbuffer=new SA(this),this.bindTexture=new IA(this),this.bindVertexBuffer=new TA(this),this.bindElementBuffer=new lA(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new UA(this),this.pixelStoreUnpack=new bo(this),this.pixelStoreUnpackPremultiplyAlpha=new gl(this),this.pixelStoreUnpackFlipY=new Xl(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=i.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(i.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=i.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=i.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,u){return new aA(this,i,u)}createVertexBuffer(i,u,m){return new gt(this,i,u,m)}createRenderbuffer(i,u,m){const v=this.gl,S=v.createRenderbuffer();return this.bindRenderbuffer.set(S),v.renderbufferStorage(v.RENDERBUFFER,i,u,m),this.bindRenderbuffer.set(null),S}createFramebuffer(i,u,m){return new ba(this,i,u,m)}clear({color:i,depth:u}){const m=this.gl;let v=0;i&&(v|=m.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),u!==void 0&&(v|=m.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),m.clear(v)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){E(i.blendFunction,xi.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class oe{constructor(i,u,m){this.func=i,this.mask=u,this.range=m}}oe.ReadOnly=!1,oe.ReadWrite=!0,oe.disabled=new oe(519,oe.ReadOnly,[0,1]);const Me=7680;class tt{constructor(i,u,m,v,S,M){this.test=i,this.ref=u,this.mask=m,this.fail=v,this.depthFail=S,this.pass=M}}tt.disabled=new tt({func:519,mask:0},0,0,Me,Me,Me);class _t{constructor(i,u,m){this.enable=i,this.mode=u,this.frontFace=m}}let Jt;function _r(g,i,u,m,v,S,M){const z=g.context,q=z.gl,J=g.useProgram("collisionBox"),se=[];let pe=0,we=0;for(let We=0;We<m.length;We++){const Rt=m[We],Mt=i.getTile(Rt),Xt=Mt.getBucket(u);if(!Xt)continue;let Zt=Rt.posMatrix;v[0]===0&&v[1]===0||(Zt=g.translatePosMatrix(Rt.posMatrix,Mt,v,S));const ur=M?Xt.textCollisionBox:Xt.iconCollisionBox,qt=Xt.collisionCircleArray;if(qt.length>0){const Rr=a.create(),Ur=Zt;a.mul(Rr,Xt.placementInvProjMatrix,g.transform.glCoordMatrix),a.mul(Rr,Rr,Xt.placementViewportMatrix),se.push({circleArray:qt,circleOffset:we,transform:Ur,invTransform:Rr,coord:Rt}),pe+=qt.length/4,we=pe}ur&&J.draw(z,q.LINES,oe.disabled,tt.disabled,g.colorModeForRenderPass(),_t.disabled,bs(Zt,g.transform,Mt),g.style.terrain&&g.style.terrain.getTerrainData(Rt),u.id,ur.layoutVertexBuffer,ur.indexBuffer,ur.segments,null,g.transform.zoom,null,null,ur.collisionVertexBuffer)}if(!M||!se.length)return;const Ve=g.useProgram("collisionCircle"),De=new a.CollisionCircleLayoutArray;De.resize(4*pe),De._trim();let Oe=0;for(const We of se)for(let Rt=0;Rt<We.circleArray.length/4;Rt++){const Mt=4*Rt,Xt=We.circleArray[Mt+0],Zt=We.circleArray[Mt+1],ur=We.circleArray[Mt+2],qt=We.circleArray[Mt+3];De.emplace(Oe++,Xt,Zt,ur,qt,0),De.emplace(Oe++,Xt,Zt,ur,qt,1),De.emplace(Oe++,Xt,Zt,ur,qt,2),De.emplace(Oe++,Xt,Zt,ur,qt,3)}(!Jt||Jt.length<2*pe)&&(Jt=function(We){const Rt=2*We,Mt=new a.QuadTriangleArray;Mt.resize(Rt),Mt._trim();for(let Xt=0;Xt<Rt;Xt++){const Zt=6*Xt;Mt.uint16[Zt+0]=4*Xt+0,Mt.uint16[Zt+1]=4*Xt+1,Mt.uint16[Zt+2]=4*Xt+2,Mt.uint16[Zt+3]=4*Xt+2,Mt.uint16[Zt+4]=4*Xt+3,Mt.uint16[Zt+5]=4*Xt+0}return Mt}(pe));const ct=z.createIndexBuffer(Jt,!0),wt=z.createVertexBuffer(De,a.collisionCircleLayout.members,!0);for(const We of se){const Rt={u_matrix:We.transform,u_inv_matrix:We.invTransform,u_camera_to_center_distance:(St=g.transform).cameraToCenterDistance,u_viewport_size:[St.width,St.height]};Ve.draw(z,q.TRIANGLES,oe.disabled,tt.disabled,g.colorModeForRenderPass(),_t.disabled,Rt,g.style.terrain&&g.style.terrain.getTerrainData(We.coord),u.id,wt,ct,a.SegmentVector.simpleSegment(0,2*We.circleOffset,We.circleArray.length,We.circleArray.length/2),null,g.transform.zoom,null,null,null)}var St;wt.destroy(),ct.destroy()}_t.disabled=new _t(!1,1029,2305),_t.backCCW=new _t(!0,1029,2305);const en=a.identity(new Float32Array(16));function En(g,i,u,m,v,S){const{horizontalAlign:M,verticalAlign:z}=a.getAnchorAlignment(g),q=-(M-.5)*i,J=-(z-.5)*u,se=a.evaluateVariableOffset(g,m);return new a.pointGeometry((q/v+se[0])*S,(J/v+se[1])*S)}function Dn(g,i,u,m,v,S,M,z,q,J,se){const pe=g.text.placedSymbolArray,we=g.text.dynamicLayoutVertexArray,Ve=g.icon.dynamicLayoutVertexArray,De={};we.clear();for(let Oe=0;Oe<pe.length;Oe++){const ct=pe.get(Oe),wt=g.allowVerticalPlacement&&!ct.placedOrientation,St=ct.hidden||!ct.crossTileID||wt?null:m[ct.crossTileID];if(St){const We=new a.pointGeometry(ct.anchorX,ct.anchorY),Rt=jt(We,u?M:S,se),Mt=er(v.cameraToCenterDistance,Rt.signedDistanceFromCamera);let Xt=a.evaluateSizeForFeature(g.textSizeData,q,ct)*Mt/a.ONE_EM;u&&(Xt*=g.tilePixelRatio/z);const{width:Zt,height:ur,anchor:qt,textOffset:Rr,textBoxScale:Ur}=St,qr=En(qt,Zt,ur,Rr,Ur,Xt),Pn=u?jt(We.add(qr),S,se).point:Rt.point.add(i?qr.rotate(-v.angle):qr),jn=g.allowVerticalPlacement&&ct.placedOrientation===a.WritingMode.vertical?Math.PI/2:0;for(let b=0;b<ct.numGlyphs;b++)a.addDynamicAttributes(we,Pn,jn);J&&ct.associatedIconIndex>=0&&(De[ct.associatedIconIndex]={shiftedAnchor:Pn,angle:jn})}else br(ct.numGlyphs,we)}if(J){Ve.clear();const Oe=g.icon.placedSymbolArray;for(let ct=0;ct<Oe.length;ct++){const wt=Oe.get(ct);if(wt.hidden)br(wt.numGlyphs,Ve);else{const St=De[ct];if(St)for(let We=0;We<wt.numGlyphs;We++)a.addDynamicAttributes(Ve,St.shiftedAnchor,St.angle);else br(wt.numGlyphs,Ve)}}g.icon.dynamicLayoutVertexBuffer.updateData(Ve)}g.text.dynamicLayoutVertexBuffer.updateData(we)}function Kn(g,i,u){return u.iconsInText&&i?"symbolTextAndIcon":g?"symbolSDF":"symbolIcon"}function Wn(g,i,u,m,v,S,M,z,q,J,se,pe){const we=g.context,Ve=we.gl,De=g.transform,Oe=z==="map",ct=q==="map",wt=z!=="viewport"&&u.layout.get("symbol-placement")!=="point",St=Oe&&!ct&&!wt,We=!u.layout.get("symbol-sort-key").isConstant();let Rt=!1;const Mt=g.depthModeForSublayer(0,oe.ReadOnly),Xt=u.layout.get("text-variable-anchor"),Zt=[];for(const ur of m){const qt=i.getTile(ur),Rr=qt.getBucket(u);if(!Rr)continue;const Ur=v?Rr.text:Rr.icon;if(!Ur||!Ur.segments.get().length)continue;const qr=Ur.programConfigurations.get(u.id),Pn=v||Rr.sdfIcons,jn=v?Rr.textSizeData:Rr.iconSizeData,b=ct||De.pitch!==0,L=g.useProgram(Kn(Pn,v,Rr),qr),j=a.evaluateSizeForZoom(jn,De.zoom),W=g.style.terrain&&g.style.terrain.getTerrainData(ur);let ae,de,ge,xe,Ie=[0,0],Ne=null;if(v){if(de=qt.glyphAtlasTexture,ge=Ve.LINEAR,ae=qt.glyphAtlasTexture.size,Rr.iconsInText){Ie=qt.imageAtlasTexture.size,Ne=qt.imageAtlasTexture;const Dr=jn.kind==="composite"||jn.kind==="camera";xe=b||g.options.rotating||g.options.zooming||Dr?Ve.LINEAR:Ve.NEAREST}}else{const Dr=u.layout.get("icon-size").constantOr(0)!==1||Rr.iconsNeedLinear;de=qt.imageAtlasTexture,ge=Pn||g.options.rotating||g.options.zooming||Dr||b?Ve.LINEAR:Ve.NEAREST,ae=qt.imageAtlasTexture.size}const ft=hn(qt,1,g.transform.zoom),It=bt(ur.posMatrix,ct,Oe,g.transform,ft),Ft=Ct(ur.posMatrix,ct,Oe,g.transform,ft),pt=Xt&&Rr.hasTextData(),Ar=u.layout.get("icon-text-fit")!=="none"&&pt&&Rr.hasIconData();if(wt){const Dr=g.style.terrain?(Fn,Nr)=>g.style.terrain.getElevation(ur,Fn,Nr):null,kr=u.layout.get("text-rotation-alignment")==="map";Sr(Rr,ur.posMatrix,g,v,It,Ft,ct,J,kr,Dr)}const Vt=g.translatePosMatrix(ur.posMatrix,qt,S,M),Ye=wt||v&&Xt||Ar?en:It,At=g.translatePosMatrix(Ft,qt,S,M,!0),Yt=Pn&&u.paint.get(v?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let ir;ir=Pn?Rr.iconsInText?GA(jn.kind,j,St,ct,g,Vt,Ye,At,ae,Ie):Cn(jn.kind,j,St,ct,g,Vt,Ye,At,v,ae,!0):sA(jn.kind,j,St,ct,g,Vt,Ye,At,v,ae);const Wt={program:L,buffers:Ur,uniformValues:ir,atlasTexture:de,atlasTextureIcon:Ne,atlasInterpolation:ge,atlasInterpolationIcon:xe,isSDF:Pn,hasHalo:Yt};if(We&&Rr.canOverlap){Rt=!0;const Dr=Ur.segments.get();for(const kr of Dr)Zt.push({segments:new a.SegmentVector([kr]),sortKey:kr.sortKey,state:Wt,terrainData:W})}else Zt.push({segments:Ur.segments,sortKey:0,state:Wt,terrainData:W})}Rt&&Zt.sort((ur,qt)=>ur.sortKey-qt.sortKey);for(const ur of Zt){const qt=ur.state;if(we.activeTexture.set(Ve.TEXTURE0),qt.atlasTexture.bind(qt.atlasInterpolation,Ve.CLAMP_TO_EDGE),qt.atlasTextureIcon&&(we.activeTexture.set(Ve.TEXTURE1),qt.atlasTextureIcon&&qt.atlasTextureIcon.bind(qt.atlasInterpolationIcon,Ve.CLAMP_TO_EDGE)),qt.isSDF){const Rr=qt.uniformValues;qt.hasHalo&&(Rr.u_is_halo=1,pi(qt.buffers,ur.segments,u,g,qt.program,Mt,se,pe,Rr,ur.terrainData)),Rr.u_is_halo=0}pi(qt.buffers,ur.segments,u,g,qt.program,Mt,se,pe,qt.uniformValues,ur.terrainData)}}function pi(g,i,u,m,v,S,M,z,q,J){const se=m.context;v.draw(se,se.gl.TRIANGLES,S,M,z,_t.disabled,q,J,u.id,g.layoutVertexBuffer,g.indexBuffer,i,u.paint,m.transform.zoom,g.programConfigurations.get(u.id),g.dynamicLayoutVertexBuffer,g.opacityVertexBuffer)}function mi(g,i,u,m,v,S,M){const z=g.context.gl,q=u.paint.get("fill-pattern"),J=q&&q.constantOr(1),se=u.getCrossfadeParameters();let pe,we,Ve,De,Oe;M?(we=J&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",pe=z.LINES):(we=J?"fillPattern":"fill",pe=z.TRIANGLES);for(const ct of m){const wt=i.getTile(ct);if(J&&!wt.patternsLoaded())continue;const St=wt.getBucket(u);if(!St)continue;const We=St.programConfigurations.get(u.id),Rt=g.useProgram(we,We),Mt=g.style.terrain&&g.style.terrain.getTerrainData(ct);J&&(g.context.activeTexture.set(z.TEXTURE0),wt.imageAtlasTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE),We.updatePaintBuffers(se));const Xt=q.constantOr(null);if(Xt&&wt.imageAtlas){const qt=wt.imageAtlas,Rr=qt.patternPositions[Xt.to.toString()],Ur=qt.patternPositions[Xt.from.toString()];Rr&&Ur&&We.setConstantPatternPositions(Rr,Ur)}const Zt=Mt?ct:null,ur=g.translatePosMatrix(Zt?Zt.posMatrix:ct.posMatrix,wt,u.paint.get("fill-translate"),u.paint.get("fill-translate-anchor"));if(M){De=St.indexBuffer2,Oe=St.segments2;const qt=[z.drawingBufferWidth,z.drawingBufferHeight];Ve=we==="fillOutlinePattern"&&J?EA(ur,g,se,wt,qt):nA(ur,qt)}else De=St.indexBuffer,Oe=St.segments,Ve=J?vo(ur,g,se,wt):Xi(ur);Rt.draw(g.context,pe,v,g.stencilModeForClipping(ct),S,_t.disabled,Ve,Mt,u.id,St.layoutVertexBuffer,De,Oe,u.paint,g.transform.zoom,We)}}function Tn(g,i,u,m,v,S,M){const z=g.context,q=z.gl,J=u.paint.get("fill-extrusion-pattern"),se=J.constantOr(1),pe=u.getCrossfadeParameters(),we=u.paint.get("fill-extrusion-opacity");for(const Ve of m){const De=i.getTile(Ve),Oe=De.getBucket(u);if(!Oe)continue;const ct=g.style.terrain&&g.style.terrain.getTerrainData(Ve),wt=Oe.programConfigurations.get(u.id),St=g.useProgram(se?"fillExtrusionPattern":"fillExtrusion",wt);se&&(g.context.activeTexture.set(q.TEXTURE0),De.imageAtlasTexture.bind(q.LINEAR,q.CLAMP_TO_EDGE),wt.updatePaintBuffers(pe));const We=J.constantOr(null);if(We&&De.imageAtlas){const Zt=De.imageAtlas,ur=Zt.patternPositions[We.to.toString()],qt=Zt.patternPositions[We.from.toString()];ur&&qt&&wt.setConstantPatternPositions(ur,qt)}const Rt=g.translatePosMatrix(Ve.posMatrix,De,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),Mt=u.paint.get("fill-extrusion-vertical-gradient"),Xt=se?Ri(Rt,g,Mt,we,Ve,pe,De):gs(Rt,g,Mt,we);St.draw(z,z.gl.TRIANGLES,v,S,M,_t.backCCW,Xt,ct,u.id,Oe.layoutVertexBuffer,Oe.indexBuffer,Oe.segments,u.paint,g.transform.zoom,wt,g.style.terrain&&Oe.centroidVertexBuffer)}}function Es(g,i,u,m,v,S,M){const z=g.context,q=z.gl,J=u.fbo;if(!J)return;const se=g.useProgram("hillshade"),pe=g.style.terrain&&g.style.terrain.getTerrainData(i);z.activeTexture.set(q.TEXTURE0),q.bindTexture(q.TEXTURE_2D,J.colorAttachment.get()),se.draw(z,q.TRIANGLES,v,S,M,_t.disabled,((we,Ve,De,Oe)=>{const ct=De.paint.get("hillshade-shadow-color"),wt=De.paint.get("hillshade-highlight-color"),St=De.paint.get("hillshade-accent-color");let We=De.paint.get("hillshade-illumination-direction")*(Math.PI/180);De.paint.get("hillshade-illumination-anchor")==="viewport"&&(We-=we.transform.angle);const Rt=!we.options.moving;return{u_matrix:Oe?Oe.posMatrix:we.transform.calculatePosMatrix(Ve.tileID.toUnwrapped(),Rt),u_image:0,u_latrange:Mo(0,Ve.tileID),u_light:[De.paint.get("hillshade-exaggeration"),We],u_shadow:ct,u_highlight:wt,u_accent:St}})(g,u,m,pe?i:null),pe,m.id,g.rasterBoundsBuffer,g.quadTriangleIndexBuffer,g.rasterBoundsSegments)}function rs(g,i,u,m,v,S){const M=g.context,z=M.gl,q=i.dem;if(q&&q.data){const J=q.dim,se=q.stride,pe=q.getPixels();if(M.activeTexture.set(z.TEXTURE1),M.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||g.getTileTexture(se),i.demTexture){const Ve=i.demTexture;Ve.update(pe,{premultiply:!1}),Ve.bind(z.NEAREST,z.CLAMP_TO_EDGE)}else i.demTexture=new k(M,pe,z.RGBA,{premultiply:!1}),i.demTexture.bind(z.NEAREST,z.CLAMP_TO_EDGE);M.activeTexture.set(z.TEXTURE0);let we=i.fbo;if(!we){const Ve=new k(M,{width:J,height:J,data:null},z.RGBA);Ve.bind(z.LINEAR,z.CLAMP_TO_EDGE),we=i.fbo=M.createFramebuffer(J,J,!0),we.colorAttachment.set(Ve.texture)}M.bindFramebuffer.set(we.framebuffer),M.viewport.set([0,0,J,J]),g.useProgram("hillshadePrepare").draw(M,z.TRIANGLES,m,v,S,_t.disabled,((Ve,De)=>{const Oe=De.stride,ct=a.create();return a.ortho(ct,0,a.EXTENT,-a.EXTENT,0,0,1),a.translate(ct,ct,[0,-a.EXTENT,0]),{u_matrix:ct,u_image:1,u_dimension:[Oe,Oe],u_zoom:Ve.overscaledZ,u_unpack:De.getUnpackVector()}})(i.tileID,q),null,u.id,g.rasterBoundsBuffer,g.quadTriangleIndexBuffer,g.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function Ws(g,i,u,m,v,S){const M=m.paint.get("raster-fade-duration");if(!S&&M>0){const z=a.exported.now(),q=(z-g.timeAdded)/M,J=i?(z-i.timeAdded)/M:-1,se=u.getSource(),pe=v.coveringZoomLevel({tileSize:se.tileSize,roundZoom:se.roundZoom}),we=!i||Math.abs(i.tileID.overscaledZ-pe)>Math.abs(g.tileID.overscaledZ-pe),Ve=we&&g.refreshedUponExpiration?1:a.clamp(we?q:1-J,0,1);return g.refreshedUponExpiration&&q>=1&&(g.refreshedUponExpiration=!1),i?{opacity:1,mix:1-Ve}:{opacity:Ve,mix:0}}return{opacity:1,mix:0}}const ns=new a.Color(1,0,0,1),Si=new a.Color(0,1,0,1),yl=new a.Color(0,0,1,1),la=new a.Color(1,0,1,1),Pi=new a.Color(0,1,1,1);function xa(g,i,u,m){Ma(g,0,i+u/2,g.transform.width,u,m)}function Mi(g,i,u,m){Ma(g,i-u/2,0,u,g.transform.height,m)}function Ma(g,i,u,m,v,S){const M=g.context,z=M.gl;z.enable(z.SCISSOR_TEST),z.scissor(i*g.pixelRatio,u*g.pixelRatio,m*g.pixelRatio,v*g.pixelRatio),M.clear({color:S}),z.disable(z.SCISSOR_TEST)}function Ba(g,i,u){const m=g.context,v=m.gl,S=u.posMatrix,M=g.useProgram("debug"),z=oe.disabled,q=tt.disabled,J=g.colorModeForRenderPass(),se="$debug",pe=g.style.terrain&&g.style.terrain.getTerrainData(u);m.activeTexture.set(v.TEXTURE0),g.emptyTexture.bind(v.LINEAR,v.CLAMP_TO_EDGE);const we=i.getTileByID(u.key).latestRawTileData,Ve=Math.floor((we&&we.byteLength||0)/1024),De=i.getTile(u).tileSize,Oe=512/Math.min(De,512)*(u.overscaledZ/g.transform.zoom)*.5;let ct=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(ct+=` => ${u.overscaledZ}`),function(wt,St){wt.initDebugOverlayCanvas();const We=wt.debugOverlayCanvas,Rt=wt.context.gl,Mt=wt.debugOverlayCanvas.getContext("2d");Mt.clearRect(0,0,We.width,We.height),Mt.shadowColor="white",Mt.shadowBlur=2,Mt.lineWidth=1.5,Mt.strokeStyle="white",Mt.textBaseline="top",Mt.font="bold 36px Open Sans, sans-serif",Mt.fillText(St,5,5),Mt.strokeText(St,5,5),wt.debugOverlayTexture.update(We),wt.debugOverlayTexture.bind(Rt.LINEAR,Rt.CLAMP_TO_EDGE)}(g,`${ct} ${Ve}kB`),M.draw(m,v.TRIANGLES,z,q,xi.alphaBlended,_t.disabled,xs(S,a.Color.transparent,Oe),null,se,g.debugBuffer,g.quadTriangleIndexBuffer,g.debugSegments),M.draw(m,v.LINE_STRIP,z,q,J,_t.disabled,xs(S,a.Color.red),pe,se,g.debugBuffer,g.tileBorderIndexBuffer,g.debugSegments)}function is(g,i,u){const m=g.context,v=m.gl,S=g.colorModeForRenderPass(),M=new oe(v.LEQUAL,oe.ReadWrite,g.depthRangeFor3D),z=g.useProgram("terrain"),q=i.getTerrainMesh(),J=i.getTerrainData(u.tileID);m.bindFramebuffer.set(null),m.viewport.set([0,0,g.width,g.height]),m.activeTexture.set(v.TEXTURE0),v.bindTexture(v.TEXTURE_2D,i.getRTTFramebuffer().colorAttachment.get());const se=g.transform.calculatePosMatrix(u.tileID.toUnwrapped());z.draw(m,v.TRIANGLES,M,tt.disabled,S,_t.backCCW,{u_matrix:se,u_texture:0},J,"terrain",q.vertexBuffer,q.indexBuffer,q.segments)}function hi(g,i,u,m){const v=g.context,S=u.tileSize*i.qualityFactor;u.textures[m]||(u.textures[m]=g.getTileTexture(S)||new k(v,{width:S,height:S,data:null},v.gl.RGBA),u.textures[m].bind(v.gl.LINEAR,v.gl.CLAMP_TO_EDGE),m===0&&i.sourceCache.renderHistory.unshift(u.tileID.key));const M=i.getRTTFramebuffer();M.colorAttachment.set(u.textures[m].texture),v.bindFramebuffer.set(M.framebuffer),v.viewport.set([0,0,S,S])}class cA{constructor(i){this._coordsDescendingInv={},this._coordsDescendingInvStr={},this.painter=i,this._renderToTexture={background:!0,fill:!0,line:!0,raster:!0},this._coordsDescendingInv={},this._coordsDescendingInvStr={},this._stacks=[],this._prevType=null,this._rerender={},this._renderableTiles=i.style.terrain.sourceCache.getRenderableTiles(),this._init()}_init(){const i=this.painter.style,u=i.terrain;for(const m in i.sourceCaches){this._coordsDescendingInv[m]={};const v=i.sourceCaches[m].getVisibleCoordinates();for(const S of v){const M=u.sourceCache.getTerrainCoords(S);for(const z in M)this._coordsDescendingInv[m][z]||(this._coordsDescendingInv[m][z]=[]),this._coordsDescendingInv[m][z].push(M[z])}}for(const m of i._order){const v=i._layers[m],S=v.source;if(this._renderToTexture[v.type]&&!this._coordsDescendingInvStr[S]){this._coordsDescendingInvStr[S]={};for(const M in this._coordsDescendingInv[S])this._coordsDescendingInvStr[S][M]=this._coordsDescendingInv[S][M].map(z=>z.key).sort().join()}}return this._renderableTiles.forEach(m=>{for(const v in this._coordsDescendingInvStr){const S=this._coordsDescendingInvStr[v][m.tileID.key];S&&S!==m.textureCoords[v]&&m.clearTextures(this.painter),u.needsRerender(v,m.tileID)&&m.clearTextures(this.painter)}this._rerender[m.tileID.key]=!m.textures.length}),u.clearRerenderCache(),u.sourceCache.removeOutdated(this.painter),this}renderLayer(i){const u=i.type,m=this.painter,v=m.style._order,S=m.currentLayer,M=S+1===v.length;if(this._renderToTexture[u]&&(this._prevType&&this._renderToTexture[this._prevType]||this._stacks.push([]),this._prevType=u,this._stacks[this._stacks.length-1].push(v[S]),!M))return!0;if(this._renderToTexture[this._prevType]||u==="hillshade"||this._renderToTexture[u]&&M){this._prevType=u;const z=this._stacks.length-1,q=this._stacks[z]||[];for(const J of this._renderableTiles){if(hi(m,m.style.terrain,J,z),this._rerender[J.tileID.key]){m.context.clear({color:a.Color.transparent});for(let se=0;se<q.length;se++){const pe=m.style._layers[q[se]],we=pe.source?this._coordsDescendingInv[pe.source][J.tileID.key]:[J.tileID];m._renderTileClippingMasks(pe,we),m.renderLayer(m,m.style.sourceCaches[pe.source],pe,we),pe.source&&(J.textureCoords[pe.source]=this._coordsDescendingInvStr[pe.source][J.tileID.key])}}is(m,m.style.terrain,J)}if(u==="hillshade"){this._stacks.push([v[S]]);for(const J of this._renderableTiles){const se=this._coordsDescendingInv[i.source][J.tileID.key];hi(m,m.style.terrain,J,this._stacks.length-1),m.context.clear({color:a.Color.transparent}),m._renderTileClippingMasks(i,se),m.renderLayer(m,m.style.sourceCaches[i.source],i,se),is(m,m.style.terrain,J)}return!0}return this._renderToTexture[u]}return!1}}const so={symbol:function(g,i,u,m,v){if(g.renderPass!=="translucent")return;const S=tt.disabled,M=g.colorModeForRenderPass();u.layout.get("text-variable-anchor")&&function(z,q,J,se,pe,we,Ve){const De=q.transform,Oe=pe==="map",ct=we==="map";for(const wt of z){const St=se.getTile(wt),We=St.getBucket(J);if(!We||!We.text||!We.text.segments.get().length)continue;const Rt=a.evaluateSizeForZoom(We.textSizeData,De.zoom),Mt=hn(St,1,q.transform.zoom),Xt=bt(wt.posMatrix,ct,Oe,q.transform,Mt),Zt=J.layout.get("icon-text-fit")!=="none"&&We.hasIconData();if(Rt){const ur=Math.pow(2,De.zoom-St.tileID.overscaledZ);Dn(We,Oe,ct,Ve,De,Xt,wt.posMatrix,ur,Rt,Zt,q.style.terrain?(qt,Rr)=>q.style.terrain.getElevation(wt,qt,Rr):null)}}}(m,g,u,i,u.layout.get("text-rotation-alignment"),u.layout.get("text-pitch-alignment"),v),u.paint.get("icon-opacity").constantOr(1)!==0&&Wn(g,i,u,m,!1,u.paint.get("icon-translate"),u.paint.get("icon-translate-anchor"),u.layout.get("icon-rotation-alignment"),u.layout.get("icon-pitch-alignment"),u.layout.get("icon-keep-upright"),S,M),u.paint.get("text-opacity").constantOr(1)!==0&&Wn(g,i,u,m,!0,u.paint.get("text-translate"),u.paint.get("text-translate-anchor"),u.layout.get("text-rotation-alignment"),u.layout.get("text-pitch-alignment"),u.layout.get("text-keep-upright"),S,M),i.map.showCollisionBoxes&&(_r(g,i,u,m,u.paint.get("text-translate"),u.paint.get("text-translate-anchor"),!0),_r(g,i,u,m,u.paint.get("icon-translate"),u.paint.get("icon-translate-anchor"),!1))},circle:function(g,i,u,m){if(g.renderPass!=="translucent")return;const v=u.paint.get("circle-opacity"),S=u.paint.get("circle-stroke-width"),M=u.paint.get("circle-stroke-opacity"),z=!u.layout.get("circle-sort-key").isConstant();if(v.constantOr(1)===0&&(S.constantOr(1)===0||M.constantOr(1)===0))return;const q=g.context,J=q.gl,se=g.depthModeForSublayer(0,oe.ReadOnly),pe=tt.disabled,we=g.colorModeForRenderPass(),Ve=[];for(let De=0;De<m.length;De++){const Oe=m[De],ct=i.getTile(Oe),wt=ct.getBucket(u);if(!wt)continue;const St=wt.programConfigurations.get(u.id),We=g.useProgram("circle",St),Rt=wt.layoutVertexBuffer,Mt=wt.indexBuffer,Xt=g.style.terrain&&g.style.terrain.getTerrainData(Oe),Zt={programConfiguration:St,program:We,layoutVertexBuffer:Rt,indexBuffer:Mt,uniformValues:sa(g,Oe,ct,u),terrainData:Xt};if(z){const ur=wt.segments.get();for(const qt of ur)Ve.push({segments:new a.SegmentVector([qt]),sortKey:qt.sortKey,state:Zt})}else Ve.push({segments:wt.segments,sortKey:0,state:Zt})}z&&Ve.sort((De,Oe)=>De.sortKey-Oe.sortKey);for(const De of Ve){const{programConfiguration:Oe,program:ct,layoutVertexBuffer:wt,indexBuffer:St,uniformValues:We,terrainData:Rt}=De.state;ct.draw(q,J.TRIANGLES,se,pe,we,_t.disabled,We,Rt,u.id,wt,St,De.segments,u.paint,g.transform.zoom,Oe)}},heatmap:function(g,i,u,m){if(u.paint.get("heatmap-opacity")!==0)if(g.renderPass==="offscreen"){const v=g.context,S=v.gl,M=tt.disabled,z=new xi([S.ONE,S.ONE],a.Color.transparent,[!0,!0,!0,!0]);(function(q,J,se){const pe=q.gl;q.activeTexture.set(pe.TEXTURE1),q.viewport.set([0,0,J.width/4,J.height/4]);let we=se.heatmapFbo;if(we)pe.bindTexture(pe.TEXTURE_2D,we.colorAttachment.get()),q.bindFramebuffer.set(we.framebuffer);else{const Ve=pe.createTexture();pe.bindTexture(pe.TEXTURE_2D,Ve),pe.texParameteri(pe.TEXTURE_2D,pe.TEXTURE_WRAP_S,pe.CLAMP_TO_EDGE),pe.texParameteri(pe.TEXTURE_2D,pe.TEXTURE_WRAP_T,pe.CLAMP_TO_EDGE),pe.texParameteri(pe.TEXTURE_2D,pe.TEXTURE_MIN_FILTER,pe.LINEAR),pe.texParameteri(pe.TEXTURE_2D,pe.TEXTURE_MAG_FILTER,pe.LINEAR),we=se.heatmapFbo=q.createFramebuffer(J.width/4,J.height/4,!1),function(De,Oe,ct,wt){const St=De.gl;St.texImage2D(St.TEXTURE_2D,0,St.RGBA,Oe.width/4,Oe.height/4,0,St.RGBA,De.extRenderToTextureHalfFloat?De.extTextureHalfFloat.HALF_FLOAT_OES:St.UNSIGNED_BYTE,null),wt.colorAttachment.set(ct)}(q,J,Ve,we)}})(v,g,u),v.clear({color:a.Color.transparent});for(let q=0;q<m.length;q++){const J=m[q];if(i.hasRenderableParent(J))continue;const se=i.getTile(J),pe=se.getBucket(u);if(!pe)continue;const we=pe.programConfigurations.get(u.id),Ve=g.useProgram("heatmap",we),{zoom:De}=g.transform;Ve.draw(v,S.TRIANGLES,oe.disabled,M,z,_t.disabled,aa(J.posMatrix,se,De,u.paint.get("heatmap-intensity")),null,u.id,pe.layoutVertexBuffer,pe.indexBuffer,pe.segments,u.paint,g.transform.zoom,we)}v.viewport.set([0,0,g.width,g.height])}else g.renderPass==="translucent"&&(g.context.setColorMode(g.colorModeForRenderPass()),function(v,S){const M=v.context,z=M.gl,q=S.heatmapFbo;if(!q)return;M.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,q.colorAttachment.get()),M.activeTexture.set(z.TEXTURE1);let J=S.colorRampTexture;J||(J=S.colorRampTexture=new k(M,S.colorRamp,z.RGBA)),J.bind(z.LINEAR,z.CLAMP_TO_EDGE),v.useProgram("heatmapTexture").draw(M,z.TRIANGLES,oe.disabled,tt.disabled,v.colorModeForRenderPass(),_t.disabled,((se,pe,we,Ve)=>{const De=a.create();a.ortho(De,0,se.width,se.height,0,0,1);const Oe=se.context.gl;return{u_matrix:De,u_world:[Oe.drawingBufferWidth,Oe.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:pe.paint.get("heatmap-opacity")}})(v,S),null,S.id,v.viewportBuffer,v.quadTriangleIndexBuffer,v.viewportSegments,S.paint,v.transform.zoom)}(g,u))},line:function(g,i,u,m){if(g.renderPass!=="translucent")return;const v=u.paint.get("line-opacity"),S=u.paint.get("line-width");if(v.constantOr(1)===0||S.constantOr(1)===0)return;const M=g.depthModeForSublayer(0,oe.ReadOnly),z=g.colorModeForRenderPass(),q=u.paint.get("line-dasharray"),J=u.paint.get("line-pattern"),se=J.constantOr(1),pe=u.paint.get("line-gradient"),we=u.getCrossfadeParameters(),Ve=se?"linePattern":q?"lineSDF":pe?"lineGradient":"line",De=g.context,Oe=De.gl;let ct=!0;for(const wt of m){const St=i.getTile(wt);if(se&&!St.patternsLoaded())continue;const We=St.getBucket(u);if(!We)continue;const Rt=We.programConfigurations.get(u.id),Mt=g.context.program.get(),Xt=g.useProgram(Ve,Rt),Zt=ct||Xt.program!==Mt,ur=g.style.terrain&&g.style.terrain.getTerrainData(wt),qt=J.constantOr(null);if(qt&&St.imageAtlas){const qr=St.imageAtlas,Pn=qr.patternPositions[qt.to.toString()],jn=qr.patternPositions[qt.from.toString()];Pn&&jn&&Rt.setConstantPatternPositions(Pn,jn)}const Rr=ur?wt:null,Ur=se?oa(g,St,u,we,Rr):q?qs(g,St,u,q,we,Rr):pe?Do(g,St,u,We.lineClipsArray.length,Rr):Qa(g,St,u,Rr);if(se)De.activeTexture.set(Oe.TEXTURE0),St.imageAtlasTexture.bind(Oe.LINEAR,Oe.CLAMP_TO_EDGE),Rt.updatePaintBuffers(we);else if(q&&(Zt||g.lineAtlas.dirty))De.activeTexture.set(Oe.TEXTURE0),g.lineAtlas.bind(De);else if(pe){const qr=We.gradients[u.id];let Pn=qr.texture;if(u.gradientVersion!==qr.version){let jn=256;if(u.stepInterpolant){const b=i.getSource().maxzoom,L=wt.canonical.z===b?Math.ceil(1<<g.transform.maxZoom-wt.canonical.z):1;jn=a.clamp(a.nextPowerOfTwo(We.maxLineLength/a.EXTENT*1024*L),256,De.maxTextureSize)}qr.gradient=a.renderColorRamp({expression:u.gradientExpression(),evaluationKey:"lineProgress",resolution:jn,image:qr.gradient||void 0,clips:We.lineClipsArray}),qr.texture?qr.texture.update(qr.gradient):qr.texture=new k(De,qr.gradient,Oe.RGBA),qr.version=u.gradientVersion,Pn=qr.texture}De.activeTexture.set(Oe.TEXTURE0),Pn.bind(u.stepInterpolant?Oe.NEAREST:Oe.LINEAR,Oe.CLAMP_TO_EDGE)}Xt.draw(De,Oe.TRIANGLES,M,g.stencilModeForClipping(wt),z,_t.disabled,Ur,ur,u.id,We.layoutVertexBuffer,We.indexBuffer,We.segments,u.paint,g.transform.zoom,Rt,We.layoutVertexBuffer2),ct=!1}},fill:function(g,i,u,m){const v=u.paint.get("fill-color"),S=u.paint.get("fill-opacity");if(S.constantOr(1)===0)return;const M=g.colorModeForRenderPass(),z=u.paint.get("fill-pattern"),q=g.opaquePassEnabledForLayer()&&!z.constantOr(1)&&v.constantOr(a.Color.transparent).a===1&&S.constantOr(0)===1?"opaque":"translucent";if(g.renderPass===q){const J=g.depthModeForSublayer(1,g.renderPass==="opaque"?oe.ReadWrite:oe.ReadOnly);mi(g,i,u,m,J,M,!1)}if(g.renderPass==="translucent"&&u.paint.get("fill-antialias")){const J=g.depthModeForSublayer(u.getPaintProperty("fill-outline-color")?2:0,oe.ReadOnly);mi(g,i,u,m,J,M,!0)}},"fill-extrusion":function(g,i,u,m){const v=u.paint.get("fill-extrusion-opacity");if(v!==0&&g.renderPass==="translucent"){const S=new oe(g.context.gl.LEQUAL,oe.ReadWrite,g.depthRangeFor3D);if(v!==1||u.paint.get("fill-extrusion-pattern").constantOr(1))Tn(g,i,u,m,S,tt.disabled,xi.disabled),Tn(g,i,u,m,S,g.stencilModeFor3D(),g.colorModeForRenderPass());else{const M=g.colorModeForRenderPass();Tn(g,i,u,m,S,tt.disabled,M)}}},hillshade:function(g,i,u,m){if(g.renderPass!=="offscreen"&&g.renderPass!=="translucent")return;const v=g.context,S=g.depthModeForSublayer(0,oe.ReadOnly),M=g.colorModeForRenderPass(),[z,q]=g.renderPass==="translucent"?g.stencilConfigForOverlap(m):[{},m];for(const J of q){const se=i.getTile(J);se.needsHillshadePrepare!==void 0&&se.needsHillshadePrepare&&g.renderPass==="offscreen"?rs(g,se,u,S,tt.disabled,M):g.renderPass==="translucent"&&Es(g,J,se,u,S,z[J.overscaledZ],M)}v.viewport.set([0,0,g.width,g.height])},raster:function(g,i,u,m){if(g.renderPass!=="translucent"||u.paint.get("raster-opacity")===0||!m.length)return;const v=g.context,S=v.gl,M=i.getSource(),z=g.useProgram("raster"),q=g.colorModeForRenderPass(),[J,se]=M instanceof Je?[{},m]:g.stencilConfigForOverlap(m),pe=se[se.length-1].overscaledZ,we=!g.options.moving;for(const Ve of se){const De=g.depthModeForSublayer(Ve.overscaledZ-pe,u.paint.get("raster-opacity")===1?oe.ReadWrite:oe.ReadOnly,S.LESS),Oe=i.getTile(Ve);Oe.registerFadeDuration(u.paint.get("raster-fade-duration"));const ct=i.findLoadedParent(Ve,0),wt=Ws(Oe,ct,i,u,g.transform,g.style.terrain);let St,We;const Rt=u.paint.get("raster-resampling")==="nearest"?S.NEAREST:S.LINEAR;v.activeTexture.set(S.TEXTURE0),Oe.texture.bind(Rt,S.CLAMP_TO_EDGE,S.LINEAR_MIPMAP_NEAREST),v.activeTexture.set(S.TEXTURE1),ct?(ct.texture.bind(Rt,S.CLAMP_TO_EDGE,S.LINEAR_MIPMAP_NEAREST),St=Math.pow(2,ct.tileID.overscaledZ-Oe.tileID.overscaledZ),We=[Oe.tileID.canonical.x*St%1,Oe.tileID.canonical.y*St%1]):Oe.texture.bind(Rt,S.CLAMP_TO_EDGE,S.LINEAR_MIPMAP_NEAREST);const Mt=g.style.terrain&&g.style.terrain.getTerrainData(Ve),Xt=Mt?Ve:null,Zt=Xt?Xt.posMatrix:g.transform.calculatePosMatrix(Ve.toUnwrapped(),we),ur=ys(Zt,We||[0,0],St||1,wt,u);M instanceof Je?z.draw(v,S.TRIANGLES,De,tt.disabled,q,_t.disabled,ur,Mt,u.id,M.boundsBuffer,g.quadTriangleIndexBuffer,M.boundsSegments):z.draw(v,S.TRIANGLES,De,J[Ve.overscaledZ],q,_t.disabled,ur,Mt,u.id,g.rasterBoundsBuffer,g.quadTriangleIndexBuffer,g.rasterBoundsSegments)}},background:function(g,i,u,m){const v=u.paint.get("background-color"),S=u.paint.get("background-opacity");if(S===0)return;const M=g.context,z=M.gl,q=g.transform,J=q.tileSize,se=u.paint.get("background-pattern");if(g.isPatternMissing(se))return;const pe=!se&&v.a===1&&S===1&&g.opaquePassEnabledForLayer()?"opaque":"translucent";if(g.renderPass!==pe)return;const we=tt.disabled,Ve=g.depthModeForSublayer(0,pe==="opaque"?oe.ReadWrite:oe.ReadOnly),De=g.colorModeForRenderPass(),Oe=g.useProgram(se?"backgroundPattern":"background"),ct=m||q.coveringTiles({tileSize:J,terrain:g.style.terrain});se&&(M.activeTexture.set(z.TEXTURE0),g.imageManager.bind(g.context));const wt=u.getCrossfadeParameters();for(const St of ct){const We=m?St.posMatrix:g.transform.calculatePosMatrix(St.toUnwrapped()),Rt=se?Pa(We,S,g,se,{tileID:St,tileSize:J},wt):ml(We,S,v),Mt=g.style.terrain&&g.style.terrain.getTerrainData(St);Oe.draw(M,z.TRIANGLES,Ve,we,De,_t.disabled,Rt,Mt,u.id,g.tileExtentBuffer,g.quadTriangleIndexBuffer,g.tileExtentSegments)}},debug:function(g,i,u){for(let m=0;m<u.length;m++)Ba(g,i,u[m])},custom:function(g,i,u){const m=g.context,v=u.implementation;if(g.renderPass==="offscreen"){const S=v.prerender;S&&(g.setCustomLayerDefaults(),m.setColorMode(g.colorModeForRenderPass()),S.call(v,m.gl,g.transform.customLayerMatrix()),m.setDirty(),g.setBaseState())}else if(g.renderPass==="translucent"){g.setCustomLayerDefaults(),m.setColorMode(g.colorModeForRenderPass()),m.setStencilMode(tt.disabled);const S=v.renderingMode==="3d"?new oe(g.context.gl.LEQUAL,oe.ReadWrite,g.depthRangeFor3D):g.depthModeForSublayer(0,oe.ReadOnly);m.setDepthMode(S),v.render(m.gl,g.transform.customLayerMatrix()),m.setDirty(),g.setBaseState(),m.bindFramebuffer.set(null)}}};class uA{constructor(i,u){this.context=new N(i),this.transform=u,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.create(),renderTime:0},this.setup(),this.numSublayers=Ge.maxUnderzooming+Ge.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new dn,this.gpuTimers={}}resize(i,u,m){if(this.width=i*m,this.height=u*m,this.pixelRatio=m,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const v of this.style._order)this.style._layers[v].resize()}setup(){const i=this.context,u=new a.PosArray;u.emplaceBack(0,0),u.emplaceBack(a.EXTENT,0),u.emplaceBack(0,a.EXTENT),u.emplaceBack(a.EXTENT,a.EXTENT),this.tileExtentBuffer=i.createVertexBuffer(u,In.members),this.tileExtentSegments=a.SegmentVector.simpleSegment(0,0,4,2);const m=new a.PosArray;m.emplaceBack(0,0),m.emplaceBack(a.EXTENT,0),m.emplaceBack(0,a.EXTENT),m.emplaceBack(a.EXTENT,a.EXTENT),this.debugBuffer=i.createVertexBuffer(m,In.members),this.debugSegments=a.SegmentVector.simpleSegment(0,0,4,5);const v=new a.RasterBoundsArray;v.emplaceBack(0,0,0,0),v.emplaceBack(a.EXTENT,0,a.EXTENT,0),v.emplaceBack(0,a.EXTENT,0,a.EXTENT),v.emplaceBack(a.EXTENT,a.EXTENT,a.EXTENT,a.EXTENT),this.rasterBoundsBuffer=i.createVertexBuffer(v,Le.members),this.rasterBoundsSegments=a.SegmentVector.simpleSegment(0,0,4,2);const S=new a.PosArray;S.emplaceBack(0,0),S.emplaceBack(1,0),S.emplaceBack(0,1),S.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(S,In.members),this.viewportSegments=a.SegmentVector.simpleSegment(0,0,4,2);const M=new a.LineStripIndexArray;M.emplaceBack(0),M.emplaceBack(1),M.emplaceBack(3),M.emplaceBack(2),M.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(M);const z=new a.TriangleIndexArray;z.emplaceBack(0,1,2),z.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(z),this.emptyTexture=new k(i,{width:1,height:1,data:new Uint8Array([0,0,0,0])},i.gl.RGBA);const q=this.context.gl;this.stencilClearMode=new tt({func:q.ALWAYS,mask:0},0,255,q.ZERO,q.ZERO,q.ZERO)}clearStencil(){const i=this.context,u=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const m=a.create();a.ortho(m,0,this.width,this.height,0,0,1),a.scale(m,m,[u.drawingBufferWidth,u.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(i,u.TRIANGLES,oe.disabled,this.stencilClearMode,xi.disabled,_t.disabled,$a(m),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(i,u){if(this.currentStencilSource===i.source||!i.isTileClipped()||!u||!u.length)return;this.currentStencilSource=i.source;const m=this.context,v=m.gl;this.nextStencilID+u.length>256&&this.clearStencil(),m.setColorMode(xi.disabled),m.setDepthMode(oe.disabled);const S=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const M of u){const z=this._tileClippingMaskIDs[M.key]=this.nextStencilID++,q=this.style.terrain&&this.style.terrain.getTerrainData(M);S.draw(m,v.TRIANGLES,oe.disabled,new tt({func:v.ALWAYS,mask:0},z,255,v.KEEP,v.KEEP,v.REPLACE),xi.disabled,_t.disabled,$a(M.posMatrix),q,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,u=this.context.gl;return new tt({func:u.NOTEQUAL,mask:255},i,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(i){const u=this.context.gl;return new tt({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,u.KEEP,u.KEEP,u.REPLACE)}stencilConfigForOverlap(i){const u=this.context.gl,m=i.sort((M,z)=>z.overscaledZ-M.overscaledZ),v=m[m.length-1].overscaledZ,S=m[0].overscaledZ-v+1;if(S>1){this.currentStencilSource=void 0,this.nextStencilID+S>256&&this.clearStencil();const M={};for(let z=0;z<S;z++)M[z+v]=new tt({func:u.GEQUAL,mask:255},z+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=S,[M,m]}return[{[v]:tt.disabled},m]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new xi([i.CONSTANT_COLOR,i.ONE],new a.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?xi.unblended:xi.alphaBlended}depthModeForSublayer(i,u,m){if(!this.opaquePassEnabledForLayer())return oe.disabled;const v=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new oe(m||this.context.gl.LEQUAL,u,[v,v])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,u){this.style=i,this.options=u,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(a.exported.now()),this.imageManager.beginFrame();const m=this.style._order,v=this.style.sourceCaches,S=this.style.terrain&&new cA(this);for(const J in v){const se=v[J];se.used&&se.prepare(this.context)}const M={},z={},q={};for(const J in v){const se=v[J];M[J]=se.getVisibleCoordinates(),z[J]=M[J].slice().reverse(),q[J]=se.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let J=0;J<m.length;J++)if(this.style._layers[m[J]].is3D()){this.opaquePassCutoff=J;break}if(S){this.opaquePassCutoff=0;const J=this.style.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!a.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||J.length)&&(a.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(se,pe){const we=se.context,Ve=we.gl,De=xi.unblended,Oe=new oe(Ve.LEQUAL,oe.ReadWrite,[0,1]),ct=pe.getTerrainMesh(),wt=pe.sourceCache.getRenderableTiles(),St=se.useProgram("terrainDepth");we.bindFramebuffer.set(pe.getFramebuffer("depth").framebuffer),we.viewport.set([0,0,se.width/devicePixelRatio,se.height/devicePixelRatio]),we.clear({color:a.Color.transparent,depth:1});for(const We of wt){const Rt=pe.getTerrainData(We.tileID),Mt=se.transform.calculatePosMatrix(We.tileID.toUnwrapped());St.draw(we,Ve.TRIANGLES,Oe,tt.disabled,De,_t.backCCW,{u_matrix:Mt},Rt,"terrain",ct.vertexBuffer,ct.indexBuffer,ct.segments)}we.bindFramebuffer.set(null),we.viewport.set([0,0,se.width,se.height])}(this,this.style.terrain),function(se,pe){const we=se.context,Ve=we.gl,De=xi.unblended,Oe=new oe(Ve.LEQUAL,oe.ReadWrite,[0,1]),ct=pe.getTerrainMesh(),wt=pe.getCoordsTexture(),St=pe.sourceCache.getRenderableTiles(),We=se.useProgram("terrainCoords");we.bindFramebuffer.set(pe.getFramebuffer("coords").framebuffer),we.viewport.set([0,0,se.width/devicePixelRatio,se.height/devicePixelRatio]),we.clear({color:a.Color.transparent,depth:1}),pe.coordsIndex=[];for(const Rt of St){const Mt=pe.getTerrainData(Rt.tileID);we.activeTexture.set(Ve.TEXTURE0),Ve.bindTexture(Ve.TEXTURE_2D,wt.texture);const Xt=se.transform.calculatePosMatrix(Rt.tileID.toUnwrapped());We.draw(we,Ve.TRIANGLES,Oe,tt.disabled,De,_t.backCCW,{u_matrix:Xt,u_terrain_coords_id:(255-pe.coordsIndex.length)/255,u_texture:0},Mt,"terrain",ct.vertexBuffer,ct.indexBuffer,ct.segments),pe.coordsIndex.push(Rt.tileID.key)}we.bindFramebuffer.set(null),we.viewport.set([0,0,se.width,se.height])}(this,this.style.terrain))}this.renderPass="offscreen";for(const J of m){const se=this.style._layers[J];if(!se.hasOffscreenPass()||se.isHidden(this.transform.zoom))continue;const pe=z[se.source];(se.type==="custom"||pe.length)&&this.renderLayer(this,v[se.source],se,pe)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:u.showOverdrawInspector?a.Color.black:a.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=u.showOverdrawInspector,this.depthRangeFor3D=[0,1-(i._order.length+2)*this.numSublayers*this.depthEpsilon],!S)for(this.renderPass="opaque",this.currentLayer=m.length-1;this.currentLayer>=0;this.currentLayer--){const J=this.style._layers[m[this.currentLayer]],se=v[J.source],pe=M[J.source];this._renderTileClippingMasks(J,pe),this.renderLayer(this,se,J,pe)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<m.length;this.currentLayer++){const J=this.style._layers[m[this.currentLayer]],se=v[J.source];if(S&&S.renderLayer(J))continue;const pe=(J.type==="symbol"?q:z)[J.source];this._renderTileClippingMasks(J,M[J.source]),this.renderLayer(this,se,J,pe)}if(this.options.showTileBoundaries){let J,se;Object.values(this.style._layers).forEach(pe=>{pe.source&&!pe.isHidden(this.transform.zoom)&&(pe.source!==(se&&se.id)&&(se=this.style.sourceCaches[pe.source]),(!J||J.getSource().maxzoom<se.getSource().maxzoom)&&(J=se))}),J&&so.debug(this,J,J.getVisibleCoordinates())}this.options.showPadding&&function(J){const se=J.transform.padding;xa(J,J.transform.height-(se.top||0),3,ns),xa(J,se.bottom||0,3,Si),Mi(J,se.left||0,3,yl),Mi(J,J.transform.width-(se.right||0),3,la);const pe=J.transform.centerPoint;(function(we,Ve,De,Oe){Ma(we,Ve-1,De-10,2,20,Oe),Ma(we,Ve-10,De-1,20,2,Oe)})(J,pe.x,J.transform.height-pe.y,Pi)}(this),this.context.setDefault()}renderLayer(i,u,m,v){m.isHidden(this.transform.zoom)||(m.type==="background"||m.type==="custom"||(v||[]).length)&&(this.id=m.id,this.gpuTimingStart(m),so[m.type](i,u,m,v,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(i){if(!this.options.gpuTiming)return;const u=this.context.extTimerQuery;let m=this.gpuTimers[i.id];m||(m=this.gpuTimers[i.id]={calls:0,cpuTime:0,query:u.createQueryEXT()}),m.calls++,u.beginQueryEXT(u.TIME_ELAPSED_EXT,m.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const i=this.context.extTimerQuery;i.endQueryEXT(i.TIME_ELAPSED_EXT)}collectGpuTimers(){const i=this.gpuTimers;return this.gpuTimers={},i}queryGpuTimers(i){const u={};for(const m in i){const v=i[m],S=this.context.extTimerQuery,M=S.getQueryObjectEXT(v.query,S.QUERY_RESULT_EXT)/1e6;S.deleteQueryEXT(v.query),u[m]=M}return u}translatePosMatrix(i,u,m,v,S){if(!m[0]&&!m[1])return i;const M=S?v==="map"?this.transform.angle:0:v==="viewport"?-this.transform.angle:0;if(M){const J=Math.sin(M),se=Math.cos(M);m=[m[0]*se-m[1]*J,m[0]*J+m[1]*se]}const z=[S?m[0]:hn(u,m[0],this.transform.zoom),S?m[1]:hn(u,m[1],this.transform.zoom),0],q=new Float32Array(16);return a.translate(q,i,z),q}saveTileTexture(i){const u=this._tileTextures[i.size[0]];u?u.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const u=this._tileTextures[i];return u&&u.length>0?u.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;const u=this.imageManager.getPattern(i.from.toString()),m=this.imageManager.getPattern(i.to.toString());return!u||!m}useProgram(i,u){this.cache=this.cache||{};const m=i+(u?u.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.terrain?"/terrain":"");return this.cache[m]||(this.cache[m]=new Gs(this.context,i,bi[i],u,_o[i],this._showOverdrawInspector,this.style.terrain)),this.cache[m]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new k(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class Fs{constructor(i,u){this.points=i,this.planes=u}static fromInvProjectionMatrix(i,u,m){const v=Math.pow(2,m),S=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(z=>{const q=1/(z=a.transformMat4([],z,i))[3]/u*v;return a.mul$1(z,z,[q,q,1/z[3],q])}),M=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(z=>{const q=a.sub([],S[z[0]],S[z[1]]),J=a.sub([],S[z[2]],S[z[1]]),se=a.normalize([],a.cross([],q,J)),pe=-a.dot(se,S[z[1]]);return se.concat(pe)});return new Fs(S,M)}}class xo{constructor(i,u){this.min=i,this.max=u,this.center=a.scale$1([],a.add([],this.min,this.max),.5)}quadrant(i){const u=[i%2==0,i<2],m=a.clone$2(this.min),v=a.clone$2(this.max);for(let S=0;S<u.length;S++)m[S]=u[S]?this.min[S]:this.center[S],v[S]=u[S]?this.center[S]:this.max[S];return v[2]=this.max[2],new xo(m,v)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}intersects(i){const u=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let m=!0;for(let v=0;v<i.planes.length;v++){const S=i.planes[v];let M=0;for(let z=0;z<u.length;z++)a.dot$1(S,u[z])>=0&&M++;if(M===0)return 0;M!==u.length&&(m=!1)}if(m)return 2;for(let v=0;v<3;v++){let S=Number.MAX_VALUE,M=-Number.MAX_VALUE;for(let z=0;z<i.points.length;z++){const q=i.points[z][v]-this.min[v];S=Math.min(S,q),M=Math.max(M,q)}if(M<0||S>this.max[v]-this.min[v])return 0}return 1}}class ao{constructor(i=0,u=0,m=0,v=0){if(isNaN(i)||i<0||isNaN(u)||u<0||isNaN(m)||m<0||isNaN(v)||v<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=u,this.left=m,this.right=v}interpolate(i,u,m){return u.top!=null&&i.top!=null&&(this.top=a.number(i.top,u.top,m)),u.bottom!=null&&i.bottom!=null&&(this.bottom=a.number(i.bottom,u.bottom,m)),u.left!=null&&i.left!=null&&(this.left=a.number(i.left,u.left,m)),u.right!=null&&i.right!=null&&(this.right=a.number(i.right,u.right,m)),this}getCenter(i,u){const m=a.clamp((this.left+i-this.right)/2,0,i),v=a.clamp((this.top+u-this.bottom)/2,0,u);return new a.pointGeometry(m,v)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new ao(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Ro{constructor(i,u,m,v,S){this.tileSize=512,this.maxValidLatitude=85.051129,this.freezeElevation=!1,this._renderWorldCopies=S===void 0||!!S,this._minZoom=i||0,this._maxZoom=u||22,this._minPitch=m??0,this._maxPitch=v??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new a.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new ao,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const i=new Ro(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return i.tileSize=this.tileSize,i.latRange=this.latRange,i.width=this.width,i.height=this.height,i._center=this._center,i._elevation=this._elevation,i.zoom=this.zoom,i.angle=this.angle,i._fov=this._fov,i._pitch=this._pitch,i._unmodified=this._unmodified,i._edgeInsets=this._edgeInsets.clone(),i._calcMatrices(),i}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(i){const u=-a.wrap(i,-180,180)*Math.PI/180;var m;this.angle!==u&&(this._unmodified=!1,this.angle=u,this._calcMatrices(),this.rotationMatrix=(m=new a.ARRAY_TYPE(4),a.ARRAY_TYPE!=Float32Array&&(m[1]=0,m[2]=0),m[0]=1,m[3]=1,m),function(v,S,M){var z=S[0],q=S[1],J=S[2],se=S[3],pe=Math.sin(M),we=Math.cos(M);v[0]=z*we+J*pe,v[1]=q*we+se*pe,v[2]=z*-pe+J*we,v[3]=q*-pe+se*we}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){const u=a.clamp(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==u&&(this._unmodified=!1,this._pitch=u,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=i/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(i){const u=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==u&&(this._unmodified=!1,this._zoom=u,this.scale=this.zoomScale(u),this.tileZoom=Math.floor(u),this.zoomFraction=u-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(i){i!==this._elevation&&(this._elevation=i,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,u,m){this._unmodified=!1,this._edgeInsets.interpolate(i,u,m),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){const u=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,u)}getVisibleUnwrappedCoordinates(i){const u=[new a.UnwrappedTileID(0,i)];if(this._renderWorldCopies){const m=this.pointCoordinate(new a.pointGeometry(0,0)),v=this.pointCoordinate(new a.pointGeometry(this.width,0)),S=this.pointCoordinate(new a.pointGeometry(this.width,this.height)),M=this.pointCoordinate(new a.pointGeometry(0,this.height)),z=Math.floor(Math.min(m.x,v.x,S.x,M.x)),q=Math.floor(Math.max(m.x,v.x,S.x,M.x)),J=1;for(let se=z-J;se<=q+J;se++)se!==0&&u.push(new a.UnwrappedTileID(se,i))}return u}coveringTiles(i){var u,m;let v=this.coveringZoomLevel(i);const S=v;if(i.minzoom!==void 0&&v<i.minzoom)return[];i.maxzoom!==void 0&&v>i.maxzoom&&(v=i.maxzoom);const M=this.pointCoordinate(this.getCameraPoint()),z=a.MercatorCoordinate.fromLngLat(this.center),q=Math.pow(2,v),J=[q*M.x,q*M.y,0],se=[q*z.x,q*z.y,0],pe=Fs.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,v);let we=i.minzoom||0;!i.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(we=v);const Ve=i.terrain?2/Math.min(this.tileSize,i.tileSize)*this.tileSize:3,De=We=>({aabb:new xo([We*q,0,0],[(We+1)*q,q,0]),zoom:0,x:0,y:0,wrap:We,fullyVisible:!1}),Oe=[],ct=[],wt=v,St=i.reparseOverscaled?S:v;if(this._renderWorldCopies)for(let We=1;We<=3;We++)Oe.push(De(-We)),Oe.push(De(We));for(Oe.push(De(0));Oe.length>0;){const We=Oe.pop(),Rt=We.x,Mt=We.y;let Xt=We.fullyVisible;if(!Xt){const qr=We.aabb.intersects(pe);if(qr===0)continue;Xt=qr===2}const Zt=i.terrain?J:se,ur=We.aabb.distanceX(Zt),qt=We.aabb.distanceY(Zt),Rr=Math.max(Math.abs(ur),Math.abs(qt)),Ur=Ve+(1<<wt-We.zoom)-2;if(We.zoom===wt||Rr>Ur&&We.zoom>=we){const qr=wt-We.zoom,Pn=J[0]-.5-(Rt<<qr),jn=J[1]-.5-(Mt<<qr);ct.push({tileID:new a.OverscaledTileID(We.zoom===wt?St:We.zoom,We.wrap,We.zoom,Rt,Mt),distanceSq:a.sqrLen([se[0]-.5-Rt,se[1]-.5-Mt]),tileDistanceToCamera:Math.sqrt(Pn*Pn+jn*jn)})}else for(let qr=0;qr<4;qr++){const Pn=(Rt<<1)+qr%2,jn=(Mt<<1)+(qr>>1),b=We.zoom+1;let L=We.aabb.quadrant(qr);if(i.terrain){const j=new a.OverscaledTileID(b,We.wrap,b,Pn,jn),W=i.terrain.getMinMaxElevation(j),ae=(u=W.minElevation)!==null&&u!==void 0?u:this.elevation,de=(m=W.maxElevation)!==null&&m!==void 0?m:this.elevation;L=new xo([L.min[0],L.min[1],ae],[L.max[0],L.max[1],de])}Oe.push({aabb:L,zoom:b,x:Pn,y:jn,wrap:We.wrap,fullyVisible:Xt})}}return ct.sort((We,Rt)=>We.distanceSq-Rt.distanceSq).map(We=>We.tileID)}resize(i,u){this.width=i,this.height=u,this.pixelsToGLUnits=[2/i,-2/u],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){const u=a.clamp(i.lat,-this.maxValidLatitude,this.maxValidLatitude);return new a.pointGeometry(a.mercatorXfromLng(i.lng)*this.worldSize,a.mercatorYfromLat(u)*this.worldSize)}unproject(i){return new a.MercatorCoordinate(i.x/this.worldSize,i.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}updateElevation(i){this.freezeElevation||(this.elevation=i?this.getElevation(this._center,i):0)}getElevation(i,u){const m=a.MercatorCoordinate.fromLngLat(i),v=(1<<this.tileZoom)*a.EXTENT,S=m.x*v,M=m.y*v,z=Math.floor(S/a.EXTENT),q=Math.floor(M/a.EXTENT),J=new a.OverscaledTileID(this.tileZoom,0,this.tileZoom,z,q);return u.getElevation(J,S%a.EXTENT,M%a.EXTENT,a.EXTENT)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(i){const u=this.pointLocation(this.centerPoint,i),m=this.getElevation(u,i);if(!(this.elevation-m))return;const v=this.getCameraPosition(),S=a.MercatorCoordinate.fromLngLat(v.lngLat,v.altitude),M=a.MercatorCoordinate.fromLngLat(u,m),z=S.x-M.x,q=S.y-M.y,J=S.z-M.z,se=Math.sqrt(z*z+q*q+J*J),pe=this.scaleZoom(this.cameraToCenterDistance/se/this.tileSize);this._elevation=m,this._center=u,this.zoom=pe}setLocationAtPoint(i,u){const m=this.pointCoordinate(u),v=this.pointCoordinate(this.centerPoint),S=this.locationCoordinate(i),M=new a.MercatorCoordinate(S.x-(m.x-v.x),S.y-(m.y-v.y));this.center=this.coordinateLocation(M),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(i,u){return u?this.coordinatePoint(this.locationCoordinate(i),this.getElevation(i,u),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(i))}pointLocation(i,u){return this.coordinateLocation(this.pointCoordinate(i,u))}locationCoordinate(i){return a.MercatorCoordinate.fromLngLat(i)}coordinateLocation(i){return i&&i.toLngLat()}pointCoordinate(i,u){if(u){const we=u.pointCoordinate(i);if(we!=null)return we}const m=[i.x,i.y,0,1],v=[i.x,i.y,1,1];a.transformMat4(m,m,this.pixelMatrixInverse),a.transformMat4(v,v,this.pixelMatrixInverse);const S=m[3],M=v[3],z=m[1]/S,q=v[1]/M,J=m[2]/S,se=v[2]/M,pe=J===se?0:(0-J)/(se-J);return new a.MercatorCoordinate(a.number(m[0]/S,v[0]/M,pe)/this.worldSize,a.number(z,q,pe)/this.worldSize)}coordinatePoint(i,u=0,m=this.pixelMatrix){const v=[i.x*this.worldSize,i.y*this.worldSize,u,1];return a.transformMat4(v,v,m),new a.pointGeometry(v[0]/v[3],v[1]/v[3])}getBounds(){const i=Math.max(0,this.height/2-this.getHorizon());return new a.LngLatBounds().extend(this.pointLocation(new a.pointGeometry(0,i))).extend(this.pointLocation(new a.pointGeometry(this.width,i))).extend(this.pointLocation(new a.pointGeometry(this.width,this.height))).extend(this.pointLocation(new a.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new a.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(i){i?(this.lngRange=[i.getWest(),i.getEast()],this.latRange=[i.getSouth(),i.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(i,u=!1){const m=i.key,v=u?this._alignedPosMatrixCache:this._posMatrixCache;if(v[m])return v[m];const S=i.canonical,M=this.worldSize/this.zoomScale(S.z),z=S.x+Math.pow(2,S.z)*i.wrap,q=a.identity(new Float64Array(16));return a.translate(q,q,[z*M,S.y*M,0]),a.scale(q,q,[M/a.EXTENT,M/a.EXTENT,1]),a.multiply(q,u?this.alignedProjMatrix:this.projMatrix,q),v[m]=new Float32Array(q),v[m]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let i,u,m,v,S=-90,M=90,z=-180,q=180;const J=this.size,se=this._unmodified;if(this.latRange){const Ve=this.latRange;S=a.mercatorYfromLat(Ve[1])*this.worldSize,M=a.mercatorYfromLat(Ve[0])*this.worldSize,i=M-S<J.y?J.y/(M-S):0}if(this.lngRange){const Ve=this.lngRange;z=a.wrap(a.mercatorXfromLng(Ve[0])*this.worldSize,0,this.worldSize),q=a.wrap(a.mercatorXfromLng(Ve[1])*this.worldSize,0,this.worldSize),q<z&&(q+=this.worldSize),u=q-z<J.x?J.x/(q-z):0}const pe=this.point,we=Math.max(u||0,i||0);if(we)return this.center=this.unproject(new a.pointGeometry(u?(q+z)/2:pe.x,i?(M+S)/2:pe.y)),this.zoom+=this.scaleZoom(we),this._unmodified=se,void(this._constraining=!1);if(this.latRange){const Ve=pe.y,De=J.y/2;Ve-De<S&&(v=S+De),Ve+De>M&&(v=M-De)}if(this.lngRange){const Ve=(z+q)/2,De=a.wrap(pe.x,Ve-this.worldSize/2,Ve+this.worldSize/2),Oe=J.x/2;De-Oe<z&&(m=z+Oe),De+Oe>q&&(m=q-Oe)}m===void 0&&v===void 0||(this.center=this.unproject(new a.pointGeometry(m!==void 0?m:pe.x,v!==void 0?v:pe.y)).wrap()),this._unmodified=se,this._constraining=!1}_calcMatrices(){if(!this.height)return;const i=this.centerOffset,u=this.point.x,m=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=a.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let v=a.identity(new Float64Array(16));a.scale(v,v,[this.width/2,-this.height/2,1]),a.translate(v,v,[1,-1,0]),this.labelPlaneMatrix=v,v=a.identity(new Float64Array(16)),a.scale(v,v,[1,-1,1]),a.translate(v,v,[-1,-1,0]),a.scale(v,v,[2/this.width,2/this.height,1]),this.glCoordMatrix=v,this.cameraToSeaLevelDistance=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch);const S=Math.PI/2+this._pitch,M=this._fov*(.5+i.y/this.height),z=Math.sin(M)*this.cameraToSeaLevelDistance/Math.sin(a.clamp(Math.PI-S-M,.01,Math.PI-.01)),q=this.getHorizon(),J=2*Math.atan(q/this.cameraToCenterDistance)*(.5+i.y/(2*q)),se=Math.sin(J)*this.cameraToSeaLevelDistance/Math.sin(a.clamp(Math.PI-S-J,.01,Math.PI-.01)),pe=Math.cos(Math.PI/2-this._pitch)*z+this.cameraToSeaLevelDistance,we=Math.cos(Math.PI/2-this._pitch)*se+this.cameraToSeaLevelDistance,Ve=1.01*Math.min(pe,we),De=this.height/50;v=new Float64Array(16),a.perspective(v,this._fov,this.width/this.height,De,Ve),v[8]=2*-i.x/this.width,v[9]=2*i.y/this.height,a.scale(v,v,[1,-1,1]),a.translate(v,v,[0,0,-this.cameraToCenterDistance]),a.rotateX(v,v,this._pitch),a.rotateZ(v,v,this.angle),a.translate(v,v,[-u,-m,0]),this.mercatorMatrix=a.scale([],v,[this.worldSize,this.worldSize,this.worldSize]),a.scale(v,v,[1,1,this._pixelPerMeter]),this.pixelMatrix=a.multiply(new Float64Array(16),this.labelPlaneMatrix,v),a.translate(v,v,[0,0,-this.elevation]),this.projMatrix=v,this.invProjMatrix=a.invert([],v),this.pixelMatrix3D=a.multiply(new Float64Array(16),this.labelPlaneMatrix,v);const Oe=this.width%2/2,ct=this.height%2/2,wt=Math.cos(this.angle),St=Math.sin(this.angle),We=u-Math.round(u)+wt*Oe+St*ct,Rt=m-Math.round(m)+wt*ct+St*Oe,Mt=new Float64Array(v);if(a.translate(Mt,Mt,[We>.5?We-1:We,Rt>.5?Rt-1:Rt,0]),this.alignedProjMatrix=Mt,v=a.invert(new Float64Array(16),this.pixelMatrix),!v)throw new Error("failed to invert matrix");this.pixelMatrixInverse=v,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const i=this.pointCoordinate(new a.pointGeometry(0,0)),u=[i.x*this.worldSize,i.y*this.worldSize,0,1];return a.transformMat4(u,u,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.pointGeometry(0,i))}getCameraQueryGeometry(i){const u=this.getCameraPoint();if(i.length===1)return[i[0],u];{let m=u.x,v=u.y,S=u.x,M=u.y;for(const z of i)m=Math.min(m,z.x),v=Math.min(v,z.y),S=Math.max(S,z.x),M=Math.max(M,z.y);return[new a.pointGeometry(m,v),new a.pointGeometry(S,v),new a.pointGeometry(S,M),new a.pointGeometry(m,M),new a.pointGeometry(m,v)]}}}class Hi{constructor(i){this._hashName=i&&encodeURIComponent(i),a.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(u,m){let v=!1,S=null;const M=()=>{S=null,v&&(u(),S=setTimeout(M,300),v=!1)};return()=>(v=!0,S||M(),S)}(this._updateHashUnthrottled.bind(this))}addTo(i){return this._map=i,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(i){const u=this._map.getCenter(),m=Math.round(100*this._map.getZoom())/100,v=Math.ceil((m*Math.LN2+Math.log(512/360/.5))/Math.LN10),S=Math.pow(10,v),M=Math.round(u.lng*S)/S,z=Math.round(u.lat*S)/S,q=this._map.getBearing(),J=this._map.getPitch();let se="";if(se+=i?`/${M}/${z}/${m}`:`${m}/${z}/${M}`,(q||J)&&(se+="/"+Math.round(10*q)/10),J&&(se+=`/${Math.round(J)}`),this._hashName){const pe=this._hashName;let we=!1;const Ve=window.location.hash.slice(1).split("&").map(De=>{const Oe=De.split("=")[0];return Oe===pe?(we=!0,`${Oe}=${se}`):De}).filter(De=>De);return we||Ve.push(`${pe}=${se}`),`#${Ve.join("&")}`}return`#${se}`}_getCurrentHash(){const i=window.location.hash.replace("#","");if(this._hashName){let u;return i.split("&").map(m=>m.split("=")).forEach(m=>{m[0]===this._hashName&&(u=m)}),(u&&u[1]||"").split("/")}return i.split("/")}_onHashChange(){const i=this._getCurrentHash();if(i.length>=3&&!i.some(u=>isNaN(u))){const u=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(i[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+i[2],+i[1]],zoom:+i[0],bearing:u,pitch:+(i[4]||0)}),!0}return!1}_updateHashUnthrottled(){const i=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,i)}catch{}}}const Ns={linearity:.3,easing:a.bezier(0,0,.3,1)},oo=a.extend({deceleration:2500,maxSpeed:1400},Ns),ss=a.extend({deceleration:20,maxSpeed:1400},Ns),js=a.extend({deceleration:1e3,maxSpeed:360},Ns),Ss=a.extend({deceleration:1e3,maxSpeed:90},Ns);class Ca{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:a.exported.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,u=a.exported.now();for(;i.length>0&&u-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const u={zoom:0,bearing:0,pitch:0,pan:new a.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:S}of this._inertiaBuffer)u.zoom+=S.zoomDelta||0,u.bearing+=S.bearingDelta||0,u.pitch+=S.pitchDelta||0,S.panDelta&&u.pan._add(S.panDelta),S.around&&(u.around=S.around),S.pinchAround&&(u.pinchAround=S.pinchAround);const m=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,v={};if(u.pan.mag()){const S=Xs(u.pan.mag(),m,a.extend({},oo,i||{}));v.offset=u.pan.mult(S.amount/u.pan.mag()),v.center=this._map.transform.center,ca(v,S)}if(u.zoom){const S=Xs(u.zoom,m,ss);v.zoom=this._map.transform.zoom+S.amount,ca(v,S)}if(u.bearing){const S=Xs(u.bearing,m,js);v.bearing=this._map.transform.bearing+a.clamp(S.amount,-179,179),ca(v,S)}if(u.pitch){const S=Xs(u.pitch,m,Ss);v.pitch=this._map.transform.pitch+S.amount,ca(v,S)}if(v.zoom||v.bearing){const S=u.pinchAround===void 0?u.around:u.pinchAround;v.around=S?this._map.unproject(S):this._map.getCenter()}return this.clear(),a.extend(v,{noMoveStart:!0})}}function ca(g,i){(!g.duration||g.duration<i.duration)&&(g.duration=i.duration,g.easing=i.easing)}function Xs(g,i,u){const{maxSpeed:m,linearity:v,deceleration:S}=u,M=a.clamp(g*v/(i/1e3),-m,m),z=Math.abs(M)/(S*v);return{easing:u.easing,duration:1e3*z,amount:M*(z/2)}}class as extends a.Event{constructor(i,u,m,v={}){const S=w.mousePos(u.getCanvasContainer(),m),M=u.unproject(S);super(i,a.extend({point:S,lngLat:M,originalEvent:m},v)),this._defaultPrevented=!1,this.target=u}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class ua extends a.Event{constructor(i,u,m){const v=i==="touchend"?m.changedTouches:m.touches,S=w.touchPos(u.getCanvasContainer(),v),M=S.map(q=>u.unproject(q)),z=S.reduce((q,J,se,pe)=>q.add(J.div(pe.length)),new a.pointGeometry(0,0));super(i,{points:S,point:z,lngLats:M,lngLat:u.unproject(z),originalEvent:m}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class gi extends a.Event{constructor(i,u,m){super(i,{originalEvent:m}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class ZA{constructor(i,u){this._map=i,this._clickTolerance=u.clickTolerance}reset(){delete this._mousedownPos}wheel(i){return this._firePreventable(new gi(i.type,this._map,i))}mousedown(i,u){return this._mousedownPos=u,this._firePreventable(new as(i.type,this._map,i))}mouseup(i){this._map.fire(new as(i.type,this._map,i))}click(i,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||this._map.fire(new as(i.type,this._map,i))}dblclick(i){return this._firePreventable(new as(i.type,this._map,i))}mouseover(i){this._map.fire(new as(i.type,this._map,i))}mouseout(i){this._map.fire(new as(i.type,this._map,i))}touchstart(i){return this._firePreventable(new ua(i.type,this._map,i))}touchmove(i){this._map.fire(new ua(i.type,this._map,i))}touchend(i){this._map.fire(new ua(i.type,this._map,i))}touchcancel(i){this._map.fire(new ua(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Da{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(i){this._map.fire(new as(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new as("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._ignoreContextMenu||this._map.fire(new as(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Na{constructor(i,u){this._map=i,this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,u){this.isEnabled()&&i.shiftKey&&i.button===0&&(w.disableDrag(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(i,u){if(!this._active)return;const m=u;if(this._lastPos.equals(m)||!this._box&&m.dist(this._startPos)<this._clickTolerance)return;const v=this._startPos;this._lastPos=m,this._box||(this._box=w.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",i));const S=Math.min(v.x,m.x),M=Math.max(v.x,m.x),z=Math.min(v.y,m.y),q=Math.max(v.y,m.y);w.setTransform(this._box,`translate(${S}px,${z}px)`),this._box.style.width=M-S+"px",this._box.style.height=q-z+"px"}mouseupWindow(i,u){if(!this._active||i.button!==0)return;const m=this._startPos,v=u;if(this.reset(),w.suppressClick(),m.x!==v.x||m.y!==v.y)return this._map.fire(new a.Event("boxzoomend",{originalEvent:i})),{cameraAnimation:S=>S.fitScreenCoordinates(m,v,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(w.remove(this._box),this._box=null),w.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(i,u){return this._map.fire(new a.Event(i,{originalEvent:u}))}}function fs(g,i){if(g.length!==i.length)throw new Error(`The number of touches and points are not equal - touches ${g.length}, points ${i.length}`);const u={};for(let m=0;m<g.length;m++)u[g[m].identifier]=i[m];return u}class Ea{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(i,u,m){(this.centroid||m.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=i.timeStamp),m.length===this.numTouches&&(this.centroid=function(v){const S=new a.pointGeometry(0,0);for(const M of v)S._add(M);return S.div(v.length)}(u),this.touches=fs(m,u)))}touchmove(i,u,m){if(this.aborted||!this.centroid)return;const v=fs(m,u);for(const S in this.touches){const M=this.touches[S],z=v[S];(!z||z.dist(M)>30)&&(this.aborted=!0)}}touchend(i,u,m){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),m.length===0){const v=!this.aborted&&this.centroid;if(this.reset(),v)return v}}}class Oo{constructor(i){this.singleTap=new Ea(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(i,u,m){this.singleTap.touchstart(i,u,m)}touchmove(i,u,m){this.singleTap.touchmove(i,u,m)}touchend(i,u,m){const v=this.singleTap.touchend(i,u,m);if(v){const S=i.timeStamp-this.lastTime<500,M=!this.lastTap||this.lastTap.dist(v)<30;if(S&&M||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=v,this.count===this.numTaps)return this.reset(),v}}}class Rs{constructor(){this._zoomIn=new Oo({numTouches:1,numTaps:2}),this._zoomOut=new Oo({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,u,m){this._zoomIn.touchstart(i,u,m),this._zoomOut.touchstart(i,u,m)}touchmove(i,u,m){this._zoomIn.touchmove(i,u,m),this._zoomOut.touchmove(i,u,m)}touchend(i,u,m){const v=this._zoomIn.touchend(i,u,m),S=this._zoomOut.touchend(i,u,m);return v?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:M=>M.easeTo({duration:300,zoom:M.getZoom()+1,around:M.unproject(v)},{originalEvent:i})}):S?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:M=>M.easeTo({duration:300,zoom:M.getZoom()-1,around:M.unproject(S)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const hA={0:1,2:2};class Ao{constructor(i){this.reset(),this._clickTolerance=i.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(i,u){return!1}_move(i,u){return{}}mousedown(i,u){if(this._lastPoint)return;const m=w.mouseButton(i);this._correctButton(i,m)&&(this._lastPoint=u,this._eventButton=m)}mousemoveWindow(i,u){const m=this._lastPoint;if(m){if(i.preventDefault(),function(v,S){const M=hA[S];return v.buttons===void 0||(v.buttons&M)!==M}(i,this._eventButton))this.reset();else if(this._moved||!(u.dist(m)<this._clickTolerance))return this._moved=!0,this._lastPoint=u,this._move(m,u)}}mouseupWindow(i){this._lastPoint&&w.mouseButton(i)===this._eventButton&&(this._moved&&w.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ho extends Ao{mousedown(i,u){super.mousedown(i,u),this._lastPoint&&(this._active=!0)}_correctButton(i,u){return u===0&&!i.ctrlKey}_move(i,u){return{around:u,panDelta:u.sub(i)}}}class zi extends Ao{_correctButton(i,u){return u===0&&i.ctrlKey||u===2}_move(i,u){const m=.8*(u.x-i.x);if(m)return this._active=!0,{bearingDelta:m}}contextmenu(i){i.preventDefault()}}class Pr extends Ao{_correctButton(i,u){return u===0&&i.ctrlKey||u===2}_move(i,u){const m=-.5*(u.y-i.y);if(m)return this._active=!0,{pitchDelta:m}}contextmenu(i){i.preventDefault()}}class Ii{constructor(i,u){this._minTouches=i.cooperativeGestures?2:1,this._clickTolerance=i.clickTolerance||1,this._map=u,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.pointGeometry(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(i,u,m){return this._calculateTransform(i,u,m)}touchmove(i,u,m){if(this._map._cooperativeGestures&&(this._minTouches===2&&m.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(i,!1,m.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(m.length<this._minTouches))return i.preventDefault(),this._calculateTransform(i,u,m)}touchend(i,u,m){this._calculateTransform(i,u,m),this._active&&m.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,u,m){m.length>0&&(this._active=!0);const v=fs(m,u),S=new a.pointGeometry(0,0),M=new a.pointGeometry(0,0);let z=0;for(const J in v){const se=v[J],pe=this._touches[J];pe&&(S._add(se),M._add(se.sub(pe)),z++,v[J]=se)}if(this._touches=v,z<this._minTouches||!M.mag())return;const q=M.div(z);return this._sum._add(q),this._sum.mag()<this._clickTolerance?void 0:{around:S.div(z),panDelta:q}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ai{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(i){}_move(i,u,m){return{}}touchstart(i,u,m){this._firstTwoTouches||m.length<2||(this._firstTwoTouches=[m[0].identifier,m[1].identifier],this._start([u[0],u[1]]))}touchmove(i,u,m){if(!this._firstTwoTouches)return;i.preventDefault();const[v,S]=this._firstTwoTouches,M=Bi(m,u,v),z=Bi(m,u,S);if(!M||!z)return;const q=this._aroundCenter?null:M.add(z).div(2);return this._move([M,z],q,i)}touchend(i,u,m){if(!this._firstTwoTouches)return;const[v,S]=this._firstTwoTouches,M=Bi(m,u,v),z=Bi(m,u,S);M&&z||(this._active&&w.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Bi(g,i,u){for(let m=0;m<g.length;m++)if(g[m].identifier===u)return i[m]}function Zi(g,i){return Math.log(g/i)/Math.LN2}class Ir extends Ai{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,u){const m=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(Zi(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Zi(this._distance,m),pinchAround:u}}}function ja(g,i){return 180*g.angleWith(i)/Math.PI}class LA extends Ai{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,u){const m=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:ja(this._vector,m),pinchAround:u}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const u=25/(Math.PI*this._minDiameter)*360,m=ja(i,this._startVector);return Math.abs(m)<u}}function kA(g){return Math.abs(g.y)>Math.abs(g.x)}class Zl extends Ai{constructor(i){super(),this._map=i}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(i,u,m){super.touchstart(i,u,m),this._currentTouchCount=m.length}_start(i){this._lastPoints=i,kA(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,u,m){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const v=i[0].sub(this._lastPoints[0]),S=i[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(v,S,m.timeStamp),this._valid?(this._lastPoints=i,this._active=!0,{pitchDelta:(v.y+S.y)/2*-.5}):void 0}gestureBeginsVertically(i,u,m){if(this._valid!==void 0)return this._valid;const v=i.mag()>=2,S=u.mag()>=2;if(!v&&!S)return;if(!v||!S)return this._firstMove===void 0&&(this._firstMove=m),m-this._firstMove<100&&void 0;const M=i.y>0==u.y>0;return kA(i)&&kA(u)&&M}}const JA={panStep:100,bearingStep:15,pitchStep:10};class wc{constructor(){const i=JA;this._panStep=i.panStep,this._bearingStep=i.bearingStep,this._pitchStep=i.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let u=0,m=0,v=0,S=0,M=0;switch(i.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:i.shiftKey?m=-1:(i.preventDefault(),S=-1);break;case 39:i.shiftKey?m=1:(i.preventDefault(),S=1);break;case 38:i.shiftKey?v=1:(i.preventDefault(),M=-1);break;case 40:i.shiftKey?v=-1:(i.preventDefault(),M=1);break;default:return}return this._rotationDisabled&&(m=0,v=0),{cameraAnimation:z=>{const q=z.getZoom();z.easeTo({duration:300,easeId:"keyboardHandler",easing:zc,zoom:u?Math.round(q)+u*(i.shiftKey?2:1):q,bearing:z.getBearing()+m*this._bearingStep,pitch:z.getPitch()+v*this._pitchStep,offset:[-S*this._panStep,-M*this._panStep],center:z.getCenter()},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function zc(g){return g*(2-g)}const vl=4.000244140625;class Jl{constructor(i,u){this._map=i,this._el=i.getCanvasContainer(),this._handler=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,a.bindAll(["_onTimeout"],this)}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=i&&i.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(i){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!this._map._metaPress)return;i.preventDefault()}let u=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const m=a.exported.now(),v=m-(this._lastWheelEventTime||0);this._lastWheelEventTime=m,u!==0&&u%vl==0?this._type="wheel":u!==0&&Math.abs(u)<4?this._type="trackpad":v>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(v*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),i.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=i,this._delta-=u,this._active||this._start(i)),i.preventDefault()}_onTimeout(i){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(i)}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const u=w.mousePos(this._el,i);this._around=a.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(u)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._map.transform;if(this._delta!==0){const z=this._type==="wheel"&&Math.abs(this._delta)>vl?this._wheelZoomRate:this._defaultZoomRate;let q=2/(1+Math.exp(-Math.abs(this._delta*z)));this._delta<0&&q!==0&&(q=1/q);const J=typeof this._targetZoom=="number"?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(J*q))),this._type==="wheel"&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const u=typeof this._targetZoom=="number"?this._targetZoom:i.zoom,m=this._startZoom,v=this._easing;let S,M=!1;if(this._type==="wheel"&&m&&v){const z=Math.min((a.exported.now()-this._lastWheelEventTime)/200,1),q=v(z);S=a.number(m,u,q),z<1?this._frameId||(this._frameId=!0):M=!0}else S=u,M=!0;return this._active=!0,M&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!M,zoomDelta:S-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let u=a.ease;if(this._prevEase){const m=this._prevEase,v=(a.exported.now()-m.start)/m.duration,S=m.easing(v+.01)-m.easing(v),M=.27/Math.sqrt(S*S+1e-4)*.01,z=Math.sqrt(.0729-M*M);u=a.bezier(M,z,.25,1)}return this._prevEase={start:a.exported.now(),duration:i,easing:u},u}reset(){this._active=!1}}class YA{constructor(i,u){this._clickZoom=i,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class $A{constructor(){this.reset()}reset(){this._active=!1}dblclick(i,u){return i.preventDefault(),{cameraAnimation:m=>{m.easeTo({duration:300,zoom:m.getZoom()+(i.shiftKey?-1:1),around:m.unproject(u)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Zs{constructor(){this._tap=new Oo({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(i,u,m){this._swipePoint||(this._tapTime&&i.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?m.length>0&&(this._swipePoint=u[0],this._swipeTouch=m[0].identifier):this._tap.touchstart(i,u,m))}touchmove(i,u,m){if(this._tapTime){if(this._swipePoint){if(m[0].identifier!==this._swipeTouch)return;const v=u[0],S=v.y-this._swipePoint.y;return this._swipePoint=v,i.preventDefault(),this._active=!0,{zoomDelta:S/128}}}else this._tap.touchmove(i,u,m)}touchend(i,u,m){this._tapTime?this._swipePoint&&m.length===0&&this.reset():this._tap.touchend(i,u,m)&&(this._tapTime=i.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Di{constructor(i,u,m){this._el=i,this._mousePan=u,this._touchPan=m}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class lo{constructor(i,u,m){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=u,this._mousePitch=m}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class _l{constructor(i,u,m,v){this._el=i,this._touchZoom=u,this._touchRotate=m,this._tapDragZoom=v,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Ra=g=>g.zoom||g.drag||g.pitch||g.rotate;class el extends a.Event{}function fA(g){return g.panDelta&&g.panDelta.mag()||g.zoomDelta||g.bearingDelta||g.pitchDelta}class QA{constructor(i,u){this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ca(i),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(u),a.bindAll(["handleEvent","handleWindowEvent"],this);const m=this._el;this._listeners=[[m,"touchstart",{passive:!0}],[m,"touchmove",{passive:!1}],[m,"touchend",void 0],[m,"touchcancel",void 0],[m,"mousedown",void 0],[m,"mousemove",void 0],[m,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[m,"mouseover",void 0],[m,"mouseout",void 0],[m,"dblclick",void 0],[m,"click",void 0],[m,"keydown",{capture:!1}],[m,"keyup",void 0],[m,"wheel",{passive:!1}],[m,"contextmenu",void 0],[window,"blur",void 0]];for(const[v,S,M]of this._listeners)w.addEventListener(v,S,v===document?this.handleWindowEvent:this.handleEvent,M)}destroy(){for(const[i,u,m]of this._listeners)w.removeEventListener(i,u,i===document?this.handleWindowEvent:this.handleEvent,m)}_addDefaultHandlers(i){const u=this._map,m=u.getCanvasContainer();this._add("mapEvent",new ZA(u,i));const v=u.boxZoom=new Na(u,i);this._add("boxZoom",v);const S=new Rs,M=new $A;u.doubleClickZoom=new YA(M,S),this._add("tapZoom",S),this._add("clickZoom",M);const z=new Zs;this._add("tapDragZoom",z);const q=u.touchPitch=new Zl(u);this._add("touchPitch",q);const J=new zi(i),se=new Pr(i);u.dragRotate=new lo(i,J,se),this._add("mouseRotate",J,["mousePitch"]),this._add("mousePitch",se,["mouseRotate"]);const pe=new Ho(i),we=new Ii(i,u);u.dragPan=new Di(m,pe,we),this._add("mousePan",pe),this._add("touchPan",we,["touchZoom","touchRotate"]);const Ve=new LA,De=new Ir;u.touchZoomRotate=new _l(m,De,Ve,z),this._add("touchRotate",Ve,["touchPan","touchZoom"]),this._add("touchZoom",De,["touchPan","touchRotate"]);const Oe=u.scrollZoom=new Jl(u,this);this._add("scrollZoom",Oe,["mousePan"]);const ct=u.keyboard=new wc;this._add("keyboard",ct),this._add("blockableMapEvent",new Da(u));for(const wt of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])i.interactive&&i[wt]&&u[wt].enable(i[wt])}_add(i,u,m){this._handlers.push({handlerName:i,handler:u,allowed:m}),this._handlersById[i]=u}stop(i){if(!this._updatingCamera){for(const{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(Ra(this._eventsInProgress))||this.isZooming()}_blockedByActive(i,u,m){for(const v in i)if(v!==m&&(!u||u.indexOf(v)<0))return!0;return!1}handleWindowEvent(i){this.handleEvent(i,`${i.type}Window`)}_getMapTouches(i){const u=[];for(const m of i)this._el.contains(m.target)&&u.push(m);return u}handleEvent(i,u){if(i.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const m=i.type==="renderFrame"?void 0:i,v={needsRenderFrame:!1},S={},M={},z=i.touches,q=z?this._getMapTouches(z):void 0,J=q?w.touchPos(this._el,q):w.mousePos(this._el,i);for(const{handlerName:we,handler:Ve,allowed:De}of this._handlers){if(!Ve.isEnabled())continue;let Oe;this._blockedByActive(M,De,we)?Ve.reset():Ve[u||i.type]&&(Oe=Ve[u||i.type](i,J,q),this.mergeHandlerResult(v,S,Oe,we,m),Oe&&Oe.needsRenderFrame&&this._triggerRenderFrame()),(Oe||Ve.isActive())&&(M[we]=Ve)}const se={};for(const we in this._previousActiveHandlers)M[we]||(se[we]=m);this._previousActiveHandlers=M,(Object.keys(se).length||fA(v))&&(this._changes.push([v,S,se]),this._triggerRenderFrame()),(Object.keys(M).length||fA(v))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:pe}=v;pe&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],pe(this._map))}mergeHandlerResult(i,u,m,v,S){if(!m)return;a.extend(i,m);const M={handlerName:v,originalEvent:m.originalEvent||S};m.zoomDelta!==void 0&&(u.zoom=M),m.panDelta!==void 0&&(u.drag=M),m.pitchDelta!==void 0&&(u.pitch=M),m.bearingDelta!==void 0&&(u.rotate=M)}_applyChanges(){const i={},u={},m={};for(const[v,S,M]of this._changes)v.panDelta&&(i.panDelta=(i.panDelta||new a.pointGeometry(0,0))._add(v.panDelta)),v.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+v.zoomDelta),v.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+v.bearingDelta),v.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+v.pitchDelta),v.around!==void 0&&(i.around=v.around),v.pinchAround!==void 0&&(i.pinchAround=v.pinchAround),v.noInertia&&(i.noInertia=v.noInertia),a.extend(u,S),a.extend(m,M);this._updateMapTransform(i,u,m),this._changes=[]}_updateMapTransform(i,u,m){const v=this._map,S=v.transform,M=v.style&&v.style.terrain;if(!(fA(i)||M&&this._drag))return this._fireEvents(u,m,!0);let{panDelta:z,zoomDelta:q,bearingDelta:J,pitchDelta:se,around:pe,pinchAround:we}=i;we!==void 0&&(pe=we),v._stop(!0),pe=pe||v.transform.centerPoint;const Ve=S.pointLocation(z?pe.sub(z):pe);J&&(S.bearing+=J),se&&(S.pitch+=se),q&&(S.zoom+=q),M?u.drag&&!this._drag?(this._drag={center:S.centerPoint,lngLat:S.pointLocation(pe),point:pe,handlerName:u.drag.handlerName},v.fire(new a.Event("freezeElevation",{freeze:!0}))):this._drag&&m[this._drag.handlerName]?(v.fire(new a.Event("freezeElevation",{freeze:!1})),this._drag=null):u.drag&&this._drag&&(S.center=S.pointLocation(S.centerPoint.sub(z))):S.setLocationAtPoint(Ve,pe),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(u,m,!0)}_fireEvents(i,u,m){const v=Ra(this._eventsInProgress),S=Ra(i),M={};for(const se in i){const{originalEvent:pe}=i[se];this._eventsInProgress[se]||(M[`${se}start`]=pe),this._eventsInProgress[se]=i[se]}!v&&S&&this._fireEvent("movestart",S.originalEvent);for(const se in M)this._fireEvent(se,M[se]);S&&this._fireEvent("move",S.originalEvent);for(const se in i){const{originalEvent:pe}=i[se];this._fireEvent(se,pe)}const z={};let q;for(const se in this._eventsInProgress){const{handlerName:pe,originalEvent:we}=this._eventsInProgress[se];this._handlersById[pe].isActive()||(delete this._eventsInProgress[se],q=u[pe]||we,z[`${se}end`]=q)}for(const se in z)this._fireEvent(se,z[se]);const J=Ra(this._eventsInProgress);if(m&&(v||S)&&!J){this._updatingCamera=!0;const se=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),pe=we=>we!==0&&-this._bearingSnap<we&&we<this._bearingSnap;se?(pe(se.bearing||this._map.getBearing())&&(se.bearing=0),this._map.easeTo(se,{originalEvent:q})):(this._map.fire(new a.Event("moveend",{originalEvent:q})),pe(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(i,u){this._map.fire(new a.Event(i,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{delete this._frameId,this.handleEvent(new el("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Fa={extend:(g,...i)=>a.extend(g,...i),run(g){g()},logToElement(g,i=!1,u="log"){const m=window.document.getElementById(u);m&&(i&&(m.innerHTML=""),m.innerHTML+=`<br>${g}`)}};class Ui extends a.Evented{constructor(i,u){super(),this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=u.bearingSnap,a.bindAll(["_renderFrameCallback"],this)}getCenter(){return new a.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(i,u){return this.jumpTo({center:i},u)}panBy(i,u,m){return i=a.pointGeometry.convert(i).mult(-1),this.panTo(this.transform.center,a.extend({offset:i},u),m)}panTo(i,u,m){return this.easeTo(a.extend({center:i},u),m)}getZoom(){return this.transform.zoom}setZoom(i,u){return this.jumpTo({zoom:i},u),this}zoomTo(i,u,m){return this.easeTo(a.extend({zoom:i},u),m)}zoomIn(i,u){return this.zoomTo(this.getZoom()+1,i,u),this}zoomOut(i,u){return this.zoomTo(this.getZoom()-1,i,u),this}getBearing(){return this.transform.bearing}setBearing(i,u){return this.jumpTo({bearing:i},u),this}getPadding(){return this.transform.padding}setPadding(i,u){return this.jumpTo({padding:i},u),this}rotateTo(i,u,m){return this.easeTo(a.extend({bearing:i},u),m)}resetNorth(i,u){return this.rotateTo(0,a.extend({duration:1e3},i),u),this}resetNorthPitch(i,u){return this.easeTo(a.extend({bearing:0,pitch:0,duration:1e3},i),u),this}snapToNorth(i,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,u):this}getPitch(){return this.transform.pitch}setPitch(i,u){return this.jumpTo({pitch:i},u),this}cameraForBounds(i,u){i=a.LngLatBounds.convert(i);const m=u&&u.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),m,u)}_cameraForBoxAndBearing(i,u,m,v){const S={top:0,bottom:0,right:0,left:0};if(typeof(v=a.extend({padding:S,offset:[0,0],maxZoom:this.transform.maxZoom},v)).padding=="number"){const Mt=v.padding;v.padding={top:Mt,bottom:Mt,right:Mt,left:Mt}}v.padding=a.extend(S,v.padding);const M=this.transform,z=M.padding,q=M.project(a.LngLat.convert(i)),J=M.project(a.LngLat.convert(u)),se=q.rotate(-m*Math.PI/180),pe=J.rotate(-m*Math.PI/180),we=new a.pointGeometry(Math.max(se.x,pe.x),Math.max(se.y,pe.y)),Ve=new a.pointGeometry(Math.min(se.x,pe.x),Math.min(se.y,pe.y)),De=we.sub(Ve),Oe=(M.width-(z.left+z.right+v.padding.left+v.padding.right))/De.x,ct=(M.height-(z.top+z.bottom+v.padding.top+v.padding.bottom))/De.y;if(ct<0||Oe<0)return void a.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const wt=Math.min(M.scaleZoom(M.scale*Math.min(Oe,ct)),v.maxZoom),St=a.pointGeometry.convert(v.offset),We=new a.pointGeometry((v.padding.left-v.padding.right)/2,(v.padding.top-v.padding.bottom)/2).rotate(m*Math.PI/180),Rt=St.add(We).mult(M.scale/M.zoomScale(wt));return{center:M.unproject(q.add(J).div(2).sub(Rt)),zoom:wt,bearing:m}}fitBounds(i,u,m){return this._fitInternal(this.cameraForBounds(i,u),u,m)}fitScreenCoordinates(i,u,m,v,S){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(a.pointGeometry.convert(i)),this.transform.pointLocation(a.pointGeometry.convert(u)),m,v),v,S)}_fitInternal(i,u,m){return i?(delete(u=a.extend(i,u)).padding,u.linear?this.easeTo(u,m):this.flyTo(u,m)):this}jumpTo(i,u){this.stop();const m=this.transform;let v=!1,S=!1,M=!1;return"zoom"in i&&m.zoom!==+i.zoom&&(v=!0,m.zoom=+i.zoom),i.center!==void 0&&(m.center=a.LngLat.convert(i.center)),"bearing"in i&&m.bearing!==+i.bearing&&(S=!0,m.bearing=+i.bearing),"pitch"in i&&m.pitch!==+i.pitch&&(M=!0,m.pitch=+i.pitch),i.padding==null||m.isPaddingEqual(i.padding)||(m.padding=i.padding),this.fire(new a.Event("movestart",u)).fire(new a.Event("move",u)),v&&this.fire(new a.Event("zoomstart",u)).fire(new a.Event("zoom",u)).fire(new a.Event("zoomend",u)),S&&this.fire(new a.Event("rotatestart",u)).fire(new a.Event("rotate",u)).fire(new a.Event("rotateend",u)),M&&this.fire(new a.Event("pitchstart",u)).fire(new a.Event("pitch",u)).fire(new a.Event("pitchend",u)),this.fire(new a.Event("moveend",u))}calculateCameraOptionsFromTo(i,u,m,v=0){const S=a.MercatorCoordinate.fromLngLat(i,u),M=a.MercatorCoordinate.fromLngLat(m,v),z=M.x-S.x,q=M.y-S.y,J=M.z-S.z,se=Math.hypot(z,q,J);if(se===0)throw new Error("Can't calculate camera options with same From and To");const pe=Math.hypot(z,q),we=this.transform.scaleZoom(this.transform.cameraToCenterDistance/se/this.transform.tileSize),Ve=180*Math.atan2(z,-q)/Math.PI;let De=180*Math.acos(pe/se)/Math.PI;return De=J<0?90-De:90+De,{center:M.toLngLat(),zoom:we,pitch:De,bearing:Ve}}easeTo(i,u){this._stop(!1,i.easeId),((i=a.extend({offset:[0,0],duration:500,easing:a.ease},i)).animate===!1||!i.essential&&a.exported.prefersReducedMotion)&&(i.duration=0);const m=this.transform,v=this.getZoom(),S=this.getBearing(),M=this.getPitch(),z=this.getPadding(),q="zoom"in i?+i.zoom:v,J="bearing"in i?this._normalizeBearing(i.bearing,S):S,se="pitch"in i?+i.pitch:M,pe="padding"in i?i.padding:m.padding,we=a.pointGeometry.convert(i.offset);let Ve=m.centerPoint.add(we);const De=m.pointLocation(Ve),Oe=a.LngLat.convert(i.center||De);this._normalizeCenter(Oe);const ct=m.project(De),wt=m.project(Oe).sub(ct),St=m.zoomScale(q-v);let We,Rt;i.around&&(We=a.LngLat.convert(i.around),Rt=m.locationPoint(We));const Mt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||q!==v,this._rotating=this._rotating||S!==J,this._pitching=this._pitching||se!==M,this._padding=!m.isPaddingEqual(pe),this._easeId=i.easeId,this._prepareEase(u,i.noMoveStart,Mt),this._ease(Xt=>{if(this._zooming&&(m.zoom=a.number(v,q,Xt)),this._rotating&&(m.bearing=a.number(S,J,Xt)),this._pitching&&(m.pitch=a.number(M,se,Xt)),this._padding&&(m.interpolatePadding(z,pe,Xt),Ve=m.centerPoint.add(we)),We)m.setLocationAtPoint(We,Rt);else{const Zt=m.zoomScale(m.zoom-v),ur=q>v?Math.min(2,St):Math.max(.5,St),qt=Math.pow(ur,1-Xt),Rr=m.unproject(ct.add(wt.mult(Xt*qt)).mult(Zt));m.setLocationAtPoint(m.renderWorldCopies?Rr.wrap():Rr,Ve)}this._fireMoveEvents(u)},Xt=>{this._afterEase(u,Xt)},i),this}_prepareEase(i,u,m={}){this._moving=!0,this.fire(new a.Event("freezeElevation",{freeze:!0})),u||m.moving||this.fire(new a.Event("movestart",i)),this._zooming&&!m.zooming&&this.fire(new a.Event("zoomstart",i)),this._rotating&&!m.rotating&&this.fire(new a.Event("rotatestart",i)),this._pitching&&!m.pitching&&this.fire(new a.Event("pitchstart",i))}_fireMoveEvents(i){this.fire(new a.Event("move",i)),this._zooming&&this.fire(new a.Event("zoom",i)),this._rotating&&this.fire(new a.Event("rotate",i)),this._pitching&&this.fire(new a.Event("pitch",i))}_afterEase(i,u){if(this._easeId&&u&&this._easeId===u)return;delete this._easeId,this.fire(new a.Event("freezeElevation",{freeze:!1}));const m=this._zooming,v=this._rotating,S=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,m&&this.fire(new a.Event("zoomend",i)),v&&this.fire(new a.Event("rotateend",i)),S&&this.fire(new a.Event("pitchend",i)),this.fire(new a.Event("moveend",i))}flyTo(i,u){if(!i.essential&&a.exported.prefersReducedMotion){const b=a.pick(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(b,u)}this.stop(),i=a.extend({offset:[0,0],speed:1.2,curve:1.42,easing:a.ease},i);const m=this.transform,v=this.getZoom(),S=this.getBearing(),M=this.getPitch(),z=this.getPadding(),q="zoom"in i?a.clamp(+i.zoom,m.minZoom,m.maxZoom):v,J="bearing"in i?this._normalizeBearing(i.bearing,S):S,se="pitch"in i?+i.pitch:M,pe="padding"in i?i.padding:m.padding,we=m.zoomScale(q-v),Ve=a.pointGeometry.convert(i.offset);let De=m.centerPoint.add(Ve);const Oe=m.pointLocation(De),ct=a.LngLat.convert(i.center||Oe);this._normalizeCenter(ct);const wt=m.project(Oe),St=m.project(ct).sub(wt);let We=i.curve;const Rt=Math.max(m.width,m.height),Mt=Rt/we,Xt=St.mag();if("minZoom"in i){const b=a.clamp(Math.min(i.minZoom,v,q),m.minZoom,m.maxZoom),L=Rt/m.zoomScale(b-v);We=Math.sqrt(L/Xt*2)}const Zt=We*We;function ur(b){const L=(Mt*Mt-Rt*Rt+(b?-1:1)*Zt*Zt*Xt*Xt)/(2*(b?Mt:Rt)*Zt*Xt);return Math.log(Math.sqrt(L*L+1)-L)}function qt(b){return(Math.exp(b)-Math.exp(-b))/2}function Rr(b){return(Math.exp(b)+Math.exp(-b))/2}const Ur=ur(0);let qr=function(b){return Rr(Ur)/Rr(Ur+We*b)},Pn=function(b){return Rt*((Rr(Ur)*(qt(L=Ur+We*b)/Rr(L))-qt(Ur))/Zt)/Xt;var L},jn=(ur(1)-Ur)/We;if(Math.abs(Xt)<1e-6||!isFinite(jn)){if(Math.abs(Rt-Mt)<1e-6)return this.easeTo(i,u);const b=Mt<Rt?-1:1;jn=Math.abs(Math.log(Mt/Rt))/We,Pn=function(){return 0},qr=function(L){return Math.exp(b*We*L)}}return i.duration="duration"in i?+i.duration:1e3*jn/("screenSpeed"in i?+i.screenSpeed/We:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0),this._zooming=!0,this._rotating=S!==J,this._pitching=se!==M,this._padding=!m.isPaddingEqual(pe),this._prepareEase(u,!1),this._ease(b=>{const L=b*jn,j=1/qr(L);m.zoom=b===1?q:v+m.scaleZoom(j),this._rotating&&(m.bearing=a.number(S,J,b)),this._pitching&&(m.pitch=a.number(M,se,b)),this._padding&&(m.interpolatePadding(z,pe,b),De=m.centerPoint.add(Ve));const W=b===1?ct:m.unproject(wt.add(St.mult(Pn(L))).mult(j));m.setLocationAtPoint(m.renderWorldCopies?W.wrap():W,De),this._fireMoveEvents(u)},()=>this._afterEase(u),i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,u){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const m=this._onEaseEnd;delete this._onEaseEnd,m.call(this,u)}if(!i){const m=this.handlers;m&&m.stop(!1)}return this}_ease(i,u,m){m.animate===!1||m.duration===0?(i(1),u()):(this._easeStart=a.exported.now(),this._easeOptions=m,this._onEaseFrame=i,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const i=Math.min((a.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(i)),i<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(i,u){i=a.wrap(i,-180,180);const m=Math.abs(i-u);return Math.abs(i-360-u)<m&&(i-=360),Math.abs(i+360-u)<m&&(i+=360),i}_normalizeCenter(i){const u=this.transform;if(!u.renderWorldCopies||u.lngRange)return;const m=i.lng-u.center.lng;i.lng+=m>180?-360:m<-180?360:0}}class PA{constructor(i={}){this.options=i,a.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(i){return this._map=i,this._compact=this.options&&this.options.compact,this._container=w.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=w.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=w.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){w.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(i,u){const m=this._map._getUIString(`AttributionControl.${u}`);i.title=m,i.setAttribute("aria-label",m)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(i){!i||i.sourceDataType!=="metadata"&&i.sourceDataType!=="visibility"&&i.dataType!=="style"&&i.type!=="terrain"||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map(v=>typeof v!="string"?"":v)):typeof this.options.customAttribution=="string"&&i.push(this.options.customAttribution)),this._map.style.stylesheet){const v=this._map.style.stylesheet;this.styleOwner=v.owner,this.styleId=v.id}const u=this._map.style.sourceCaches;for(const v in u){const S=u[v];if(S.used||S.usedForTerrain){const M=S.getSource();M.attribution&&i.indexOf(M.attribution)<0&&i.push(M.attribution)}}i=i.filter(v=>String(v).trim()),i.sort((v,S)=>v.length-S.length),i=i.filter((v,S)=>{for(let M=S+1;M<i.length;M++)if(i[M].indexOf(v)>=0)return!1;return!0});const m=i.join(" | ");m!==this._attribHTML&&(this._attribHTML=m,i.length?(this._innerContainer.innerHTML=m,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class MA{constructor(i={}){this.options=i,a.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(i){this._map=i,this._compact=this.options&&this.options.compact,this._container=w.create("div","maplibregl-ctrl mapboxgl-ctrl");const u=w.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://maplibre.org/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){w.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const i=this._container.children;if(i.length){const u=i[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&u.classList.add("maplibregl-compact","mapboxgl-compact"):u.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class DA{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const u=++this._id;return this._queue.push({callback:i,id:u,cancelled:!1}),u}remove(i){const u=this._currentlyRunning,m=u?this._queue.concat(u):this._queue;for(const v of m)if(v.id===i)return void(v.cancelled=!0)}run(i=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const u=this._currentlyRunning=this._queue;this._queue=[];for(const m of u)if(!m.cancelled&&(m.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Vc={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"},Kc={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},Gc={showCompass:!0,showZoom:!0,visualizePitch:!1};class Bo{constructor(i,u,m=!1){this._clickTolerance=10,this.element=u,this.mouseRotate=new zi({clickTolerance:i.dragRotate._mouseRotate._clickTolerance}),this.map=i,m&&(this.mousePitch=new Pr({clickTolerance:i.dragRotate._mousePitch._clickTolerance})),a.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),w.addEventListener(u,"mousedown",this.mousedown),w.addEventListener(u,"touchstart",this.touchstart,{passive:!1}),w.addEventListener(u,"touchmove",this.touchmove),w.addEventListener(u,"touchend",this.touchend),w.addEventListener(u,"touchcancel",this.reset)}down(i,u){this.mouseRotate.mousedown(i,u),this.mousePitch&&this.mousePitch.mousedown(i,u),w.disableDrag()}move(i,u){const m=this.map,v=this.mouseRotate.mousemoveWindow(i,u);if(v&&v.bearingDelta&&m.setBearing(m.getBearing()+v.bearingDelta),this.mousePitch){const S=this.mousePitch.mousemoveWindow(i,u);S&&S.pitchDelta&&m.setPitch(m.getPitch()+S.pitchDelta)}}off(){const i=this.element;w.removeEventListener(i,"mousedown",this.mousedown),w.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),w.removeEventListener(i,"touchmove",this.touchmove),w.removeEventListener(i,"touchend",this.touchend),w.removeEventListener(i,"touchcancel",this.reset),this.offTemp()}offTemp(){w.enableDrag(),w.removeEventListener(window,"mousemove",this.mousemove),w.removeEventListener(window,"mouseup",this.mouseup)}mousedown(i){this.down(a.extend({},i,{ctrlKey:!0,preventDefault:()=>i.preventDefault()}),w.mousePos(this.element,i)),w.addEventListener(window,"mousemove",this.mousemove),w.addEventListener(window,"mouseup",this.mouseup)}mousemove(i){this.move(i,w.mousePos(this.element,i))}mouseup(i){this.mouseRotate.mouseupWindow(i),this.mousePitch&&this.mousePitch.mouseupWindow(i),this.offTemp()}touchstart(i){i.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=w.touchPos(this.element,i.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>i.preventDefault()},this._startPos))}touchmove(i){i.targetTouches.length!==1?this.reset():(this._lastPos=w.touchPos(this.element,i.targetTouches)[0],this.move({preventDefault:()=>i.preventDefault()},this._lastPos))}touchend(i){i.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function dA(g,i,u){if(g=new a.LngLat(g.lng,g.lat),i){const m=new a.LngLat(g.lng-360,g.lat),v=new a.LngLat(g.lng+360,g.lat),S=u.locationPoint(g).distSqr(i);u.locationPoint(m).distSqr(i)<S?g=m:u.locationPoint(v).distSqr(i)<S&&(g=v)}for(;Math.abs(g.lng-u.center.lng)>180;){const m=u.locationPoint(g);if(m.x>=0&&m.y>=0&&m.x<=u.width&&m.y<=u.height)break;g.lng>u.center.lng?g.lng-=360:g.lng+=360}return g}const sn={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function vn(g,i,u){const m=g.classList;for(const v in sn)m.remove(`maplibregl-${u}-anchor-${v}`,`mapboxgl-${u}-anchor-${v}`);m.add(`maplibregl-${u}-anchor-${i}`,`mapboxgl-${u}-anchor-${i}`)}class tl extends a.Evented{constructor(i,u){if(super(),(i instanceof HTMLElement||u)&&(i=a.extend({element:i},u)),a.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment!=="auto"?i.pitchAlignment:this._rotationAlignment,i&&i.element)this._element=i.element,this._offset=a.pointGeometry.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=w.create("div"),this._element.setAttribute("aria-label","Map marker");const m=w.createNS("http://www.w3.org/2000/svg","svg"),v=41,S=27;m.setAttributeNS(null,"display","block"),m.setAttributeNS(null,"height",`${v}px`),m.setAttributeNS(null,"width",`${S}px`),m.setAttributeNS(null,"viewBox",`0 0 ${S} ${v}`);const M=w.createNS("http://www.w3.org/2000/svg","g");M.setAttributeNS(null,"stroke","none"),M.setAttributeNS(null,"stroke-width","1"),M.setAttributeNS(null,"fill","none"),M.setAttributeNS(null,"fill-rule","evenodd");const z=w.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"fill-rule","nonzero");const q=w.createNS("http://www.w3.org/2000/svg","g");q.setAttributeNS(null,"transform","translate(3.0, 29.0)"),q.setAttributeNS(null,"fill","#000000");const J=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const St of J){const We=w.createNS("http://www.w3.org/2000/svg","ellipse");We.setAttributeNS(null,"opacity","0.04"),We.setAttributeNS(null,"cx","10.5"),We.setAttributeNS(null,"cy","5.80029008"),We.setAttributeNS(null,"rx",St.rx),We.setAttributeNS(null,"ry",St.ry),q.appendChild(We)}const se=w.createNS("http://www.w3.org/2000/svg","g");se.setAttributeNS(null,"fill",this._color);const pe=w.createNS("http://www.w3.org/2000/svg","path");pe.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),se.appendChild(pe);const we=w.createNS("http://www.w3.org/2000/svg","g");we.setAttributeNS(null,"opacity","0.25"),we.setAttributeNS(null,"fill","#000000");const Ve=w.createNS("http://www.w3.org/2000/svg","path");Ve.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),we.appendChild(Ve);const De=w.createNS("http://www.w3.org/2000/svg","g");De.setAttributeNS(null,"transform","translate(6.0, 7.0)"),De.setAttributeNS(null,"fill","#FFFFFF");const Oe=w.createNS("http://www.w3.org/2000/svg","g");Oe.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ct=w.createNS("http://www.w3.org/2000/svg","circle");ct.setAttributeNS(null,"fill","#000000"),ct.setAttributeNS(null,"opacity","0.25"),ct.setAttributeNS(null,"cx","5.5"),ct.setAttributeNS(null,"cy","5.5"),ct.setAttributeNS(null,"r","5.4999962");const wt=w.createNS("http://www.w3.org/2000/svg","circle");wt.setAttributeNS(null,"fill","#FFFFFF"),wt.setAttributeNS(null,"cx","5.5"),wt.setAttributeNS(null,"cy","5.5"),wt.setAttributeNS(null,"r","5.4999962"),Oe.appendChild(ct),Oe.appendChild(wt),z.appendChild(q),z.appendChild(se),z.appendChild(we),z.appendChild(De),z.appendChild(Oe),m.appendChild(z),m.setAttributeNS(null,"height",v*this._scale+"px"),m.setAttributeNS(null,"width",S*this._scale+"px"),this._element.appendChild(m),this._offset=a.pointGeometry.convert(i&&i.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",m=>{m.preventDefault()}),this._element.addEventListener("mousedown",m=>{m.preventDefault()}),vn(this._element,this._anchor,"marker"),this._popup=null}addTo(i){return this.remove(),this._map=i,i.getCanvasContainer().appendChild(this._element),i.on("move",this._update),i.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),w.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=a.LngLat.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const v=Math.sqrt(Math.pow(13.5,2)/2);i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[v,-1*(38.1-13.5+v)],"bottom-right":[-v,-1*(38.1-13.5+v)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(i){const u=i.code,m=i.charCode||i.keyCode;u!=="Space"&&u!=="Enter"&&m!==32&&m!==13||this.togglePopup()}_onMapClick(i){const u=i.originalEvent.target,m=this._element;this._popup&&(u===m||m.contains(u))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const i=this._popup;return i?(i.isOpen()?i.remove():i.addTo(this._map),this):this}_update(i){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=dA(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let u="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?u=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(u=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let m="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?m="rotateX(0deg)":this._pitchAlignment==="map"&&(m=`rotateX(${this._map.getPitch()}deg)`),i&&i.type!=="moveend"||(this._pos=this._pos.round()),w.setTransform(this._element,`${sn[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${m} ${u}`),this._map.style&&this._map.style.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const v=this._map.unproject(this._pos),S=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=v.distanceTo(this._lngLat)>20*S?"0.2":"1.0",this._opacityTimeout=null},100))}getOffset(){return this._offset}setOffset(i){return this._offset=a.pointGeometry.convert(i),this._update(),this}_onMove(i){if(!this._isDragging){const u=this._clickTolerance||this._map._clickTolerance;this._isDragging=i.point.dist(this._pointerdownPos)>=u}this._isDragging&&(this._pos=i.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.Event("dragstart"))),this.fire(new a.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.Event("dragend")),this._state="inactive"}_addDragHandler(i){this._element.contains(i.originalEvent.target)&&(i.preventDefault(),this._positionDelta=i.point.sub(this._pos).add(this._offset),this._pointerdownPos=i.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&i!=="auto"?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const wl={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Sa,os=0,pA=!1;const Co={maxWidth:100,unit:"metric"};function bc(g,i,u){const m=u&&u.maxWidth||100,v=g._container.clientHeight/2,S=g.unproject([0,v]),M=g.unproject([m,v]),z=S.distanceTo(M);if(u&&u.unit==="imperial"){const q=3.2808*z;q>5280?mA(i,m,q/5280,g._getUIString("ScaleControl.Miles")):mA(i,m,q,g._getUIString("ScaleControl.Feet"))}else u&&u.unit==="nautical"?mA(i,m,z/1852,g._getUIString("ScaleControl.NauticalMiles")):z>=1e3?mA(i,m,z/1e3,g._getUIString("ScaleControl.Kilometers")):mA(i,m,z,g._getUIString("ScaleControl.Meters"))}function mA(g,i,u,m){const v=function(S){const M=Math.pow(10,`${Math.floor(S)}`.length-1);let z=S/M;return z=z>=10?10:z>=5?5:z>=3?3:z>=2?2:z>=1?1:function(q){const J=Math.pow(10,Math.ceil(-Math.log(q)/Math.LN10));return Math.round(q*J)/J}(z),M*z}(u);g.style.width=i*(v/u)+"px",g.innerHTML=`${v}&nbsp;${m}`}const Ji={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},ds=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function xc(g){if(g){if(typeof g=="number"){const i=Math.round(Math.sqrt(.5*Math.pow(g,2)));return{center:new a.pointGeometry(0,0),top:new a.pointGeometry(0,g),"top-left":new a.pointGeometry(i,i),"top-right":new a.pointGeometry(-i,i),bottom:new a.pointGeometry(0,-g),"bottom-left":new a.pointGeometry(i,-i),"bottom-right":new a.pointGeometry(-i,-i),left:new a.pointGeometry(g,0),right:new a.pointGeometry(-g,0)}}if(g instanceof a.pointGeometry||Array.isArray(g)){const i=a.pointGeometry.convert(g);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:a.pointGeometry.convert(g.center||[0,0]),top:a.pointGeometry.convert(g.top||[0,0]),"top-left":a.pointGeometry.convert(g["top-left"]||[0,0]),"top-right":a.pointGeometry.convert(g["top-right"]||[0,0]),bottom:a.pointGeometry.convert(g.bottom||[0,0]),"bottom-left":a.pointGeometry.convert(g["bottom-left"]||[0,0]),"bottom-right":a.pointGeometry.convert(g["bottom-right"]||[0,0]),left:a.pointGeometry.convert(g.left||[0,0]),right:a.pointGeometry.convert(g.right||[0,0])}}return xc(new a.pointGeometry(0,0))}const ha={supported:d,setRTLTextPlugin:a.setRTLTextPlugin,getRTLTextPluginStatus:a.getRTLTextPluginStatus,Map:class extends Ui{constructor(g){var i;if(a.PerformanceUtils.mark(a.PerformanceMarkers.create),(g=a.extend({},Kc,g)).minZoom!=null&&g.maxZoom!=null&&g.minZoom>g.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(g.minPitch!=null&&g.maxPitch!=null&&g.minPitch>g.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(g.minPitch!=null&&g.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(g.maxPitch!=null&&g.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Ro(g.minZoom,g.maxZoom,g.minPitch,g.maxPitch,g.renderWorldCopies),{bearingSnap:g.bearingSnap}),this._interactive=g.interactive,this._cooperativeGestures=g.cooperativeGestures,this._maxTileCacheSize=g.maxTileCacheSize,this._failIfMajorPerformanceCaveat=g.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=g.preserveDrawingBuffer,this._antialias=g.antialias,this._trackResize=g.trackResize,this._bearingSnap=g.bearingSnap,this._refreshExpiredTiles=g.refreshExpiredTiles,this._fadeDuration=g.fadeDuration,this._crossSourceCollisions=g.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=g.collectResourceTiming,this._renderTaskQueue=new DA,this._controls=[],this._mapId=a.uniqueId(),this._locale=a.extend({},Vc,g.locale),this._clickTolerance=g.clickTolerance,this._pixelRatio=(i=g.pixelRatio)!==null&&i!==void 0?i:devicePixelRatio,this._requestManager=new x(g.transformRequest),typeof g.container=="string"){if(this._container=document.getElementById(g.container),!this._container)throw new Error(`Container '${g.container}' not found.`)}else{if(!(g.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=g.container}if(g.maxBounds&&this.setMaxBounds(g.maxBounds),a.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),typeof window<"u"&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new QA(this,g),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=g.hash&&new Hi(typeof g.hash=="string"&&g.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:g.center,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch}),g.bounds&&(this.resize(),this.fitBounds(g.bounds,a.extend({},g.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=g.localIdeographFontFamily,g.style&&this.setStyle(g.style,{localIdeographFontFamily:g.localIdeographFontFamily}),g.attributionControl&&this.addControl(new PA({customAttribution:g.customAttribution})),g.maplibreLogo&&this.addControl(new MA,g.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",u=>{this._update(u.dataType==="style"),this.fire(new a.Event(`${u.dataType}data`,u))}),this.on("dataloading",u=>{this.fire(new a.Event(`${u.dataType}dataloading`,u))}),this.on("dataabort",u=>{this.fire(new a.Event("sourcedataabort",u))})}_getMapId(){return this._mapId}addControl(g,i){if(i===void 0&&(i=g.getDefaultPosition?g.getDefaultPosition():"top-right"),!g||!g.onAdd)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const u=g.onAdd(this);this._controls.push(g);const m=this._controlPositions[i];return i.indexOf("bottom")!==-1?m.insertBefore(u,m.firstChild):m.appendChild(u),this}removeControl(g){if(!g||!g.onRemove)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(g);return i>-1&&this._controls.splice(i,1),g.onRemove(this),this}hasControl(g){return this._controls.indexOf(g)>-1}calculateCameraOptionsFromTo(g,i,u,m){return m==null&&this.style.terrain&&(m=this.transform.getElevation(u,this.style.terrain)),super.calculateCameraOptionsFromTo(g,i,u,m)}resize(g){const i=this._containerDimensions(),u=i[0],m=i[1];this._resizeCanvas(u,m,this.getPixelRatio()),this.transform.resize(u,m),this.painter.resize(u,m,this.getPixelRatio());const v=!this._moving;return v&&(this.stop(),this.fire(new a.Event("movestart",g)).fire(new a.Event("move",g))),this.fire(new a.Event("resize",g)),v&&this.fire(new a.Event("moveend",g)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(g){const[i,u]=this._containerDimensions();this._pixelRatio=g,this._resizeCanvas(i,u,g),this.painter.resize(i,u,g)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(g){return this.transform.setMaxBounds(a.LngLatBounds.convert(g)),this._update()}setMinZoom(g){if((g=g??-2)>=-2&&g<=this.transform.maxZoom)return this.transform.minZoom=g,this._update(),this.getZoom()<g&&this.setZoom(g),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(g){if((g=g??22)>=this.transform.minZoom)return this.transform.maxZoom=g,this._update(),this.getZoom()>g&&this.setZoom(g),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(g){if((g=g??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(g>=0&&g<=this.transform.maxPitch)return this.transform.minPitch=g,this._update(),this.getPitch()<g&&this.setPitch(g),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(g){if((g=g??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(g>=this.transform.minPitch)return this.transform.maxPitch=g,this._update(),this.getPitch()>g&&this.setPitch(g),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(g){return this.transform.renderWorldCopies=g,this._update()}project(g){return this.transform.locationPoint(a.LngLat.convert(g),this.style&&this.style.terrain)}unproject(g){return this.transform.pointLocation(a.pointGeometry.convert(g),this.style&&this.style.terrain)}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(g,i,u){if(g==="mouseenter"||g==="mouseover"){let m=!1;return{layer:i,listener:u,delegates:{mousemove:S=>{const M=this.getLayer(i)?this.queryRenderedFeatures(S.point,{layers:[i]}):[];M.length?m||(m=!0,u.call(this,new as(g,this,S.originalEvent,{features:M}))):m=!1},mouseout:()=>{m=!1}}}}if(g==="mouseleave"||g==="mouseout"){let m=!1;return{layer:i,listener:u,delegates:{mousemove:M=>{(this.getLayer(i)?this.queryRenderedFeatures(M.point,{layers:[i]}):[]).length?m=!0:m&&(m=!1,u.call(this,new as(g,this,M.originalEvent)))},mouseout:M=>{m&&(m=!1,u.call(this,new as(g,this,M.originalEvent)))}}}}{const m=v=>{const S=this.getLayer(i)?this.queryRenderedFeatures(v.point,{layers:[i]}):[];S.length&&(v.features=S,u.call(this,v),delete v.features)};return{layer:i,listener:u,delegates:{[g]:m}}}}on(g,i,u){if(u===void 0)return super.on(g,i);const m=this._createDelegatedListener(g,i,u);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[g]=this._delegatedListeners[g]||[],this._delegatedListeners[g].push(m);for(const v in m.delegates)this.on(v,m.delegates[v]);return this}once(g,i,u){if(u===void 0)return super.once(g,i);const m=this._createDelegatedListener(g,i,u);for(const v in m.delegates)this.once(v,m.delegates[v]);return this}off(g,i,u){return u===void 0?super.off(g,i):(this._delegatedListeners&&this._delegatedListeners[g]&&(m=>{const v=this._delegatedListeners[g];for(let S=0;S<v.length;S++){const M=v[S];if(M.layer===i&&M.listener===u){for(const z in M.delegates)this.off(z,M.delegates[z]);return v.splice(S,1),this}}})(),this)}queryRenderedFeatures(g,i){if(!this.style)return[];let u;if(i!==void 0||g===void 0||g instanceof a.pointGeometry||Array.isArray(g)||(i=g,g=void 0),i=i||{},(g=g||[[0,0],[this.transform.width,this.transform.height]])instanceof a.pointGeometry||typeof g[0]=="number")u=[a.pointGeometry.convert(g)];else{const m=a.pointGeometry.convert(g[0]),v=a.pointGeometry.convert(g[1]);u=[m,new a.pointGeometry(v.x,m.y),v,new a.pointGeometry(m.x,v.y),m]}return this.style.queryRenderedFeatures(u,i,this.transform)}querySourceFeatures(g,i){return this.style.querySourceFeatures(g,i)}setStyle(g,i){return(i=a.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&g?(this._diffStyle(g,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(g,i))}setTransformRequest(g){return this._requestManager.setTransformRequest(g),this}_getUIString(g){const i=this._locale[g];if(i==null)throw new Error(`Missing UI string '${g}'`);return i}_updateStyle(g,i){return this.style&&(this.style.setEventedParent(null),this.style._remove()),g?(this.style=new wi(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof g=="string"?this.style.loadURL(g):this.style.loadJSON(g),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new wi(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(g,i){if(typeof g=="string"){const u=this._requestManager.transformRequest(g,a.ResourceType.Style);a.getJSON(u,(m,v)=>{m?this.fire(new a.ErrorEvent(m)):v&&this._updateDiff(v,i)})}else typeof g=="object"&&this._updateDiff(g,i)}_updateDiff(g,i){try{this.style.setState(g)&&this._update(!0)}catch(u){a.warnOnce(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(g,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():a.warnOnce("There is no style added to the map.")}addSource(g,i){return this._lazyInitEmptyStyle(),this.style.addSource(g,i),this._update(!0)}isSourceLoaded(g){const i=this.style&&this.style.sourceCaches[g];if(i!==void 0)return i.loaded();this.fire(new a.ErrorEvent(new Error(`There is no source with ID '${g}'`)))}setTerrain(g){return this.style.setTerrain(g),this}getTerrain(){return this.style.terrain&&this.style.terrain.options}areTilesLoaded(){const g=this.style&&this.style.sourceCaches;for(const i in g){const u=g[i]._tiles;for(const m in u){const v=u[m];if(v.state!=="loaded"&&v.state!=="errored")return!1}}return!0}addSourceType(g,i,u){return this._lazyInitEmptyStyle(),this.style.addSourceType(g,i,u)}removeSource(g){return this.style.removeSource(g),this._update(!0)}getSource(g){return this.style.getSource(g)}addImage(g,i,{pixelRatio:u=1,sdf:m=!1,stretchX:v,stretchY:S,content:M}={}){if(this._lazyInitEmptyStyle(),i instanceof HTMLImageElement||a.isImageBitmap(i)){const{width:z,height:q,data:J}=a.exported.getImageData(i);this.style.addImage(g,{data:new a.RGBAImage({width:z,height:q},J),pixelRatio:u,stretchX:v,stretchY:S,content:M,sdf:m,version:0})}else{if(i.width===void 0||i.height===void 0)return this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:z,height:q,data:J}=i,se=i;this.style.addImage(g,{data:new a.RGBAImage({width:z,height:q},new Uint8Array(J)),pixelRatio:u,stretchX:v,stretchY:S,content:M,sdf:m,version:0,userImage:se}),se.onAdd&&se.onAdd(this,g)}}}updateImage(g,i){const u=this.style.getImage(g);if(!u)return this.fire(new a.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const m=i instanceof HTMLImageElement||a.isImageBitmap(i)?a.exported.getImageData(i):i,{width:v,height:S,data:M}=m;if(v===void 0||S===void 0)return this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(v!==u.data.width||S!==u.data.height)return this.fire(new a.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const z=!(i instanceof HTMLImageElement||a.isImageBitmap(i));u.data.replace(M,z),this.style.updateImage(g,u)}hasImage(g){return g?!!this.style.getImage(g):(this.fire(new a.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(g){this.style.removeImage(g)}loadImage(g,i){a.getImage(this._requestManager.transformRequest(g,a.ResourceType.Image),i)}listImages(){return this.style.listImages()}addLayer(g,i){return this._lazyInitEmptyStyle(),this.style.addLayer(g,i),this._update(!0)}moveLayer(g,i){return this.style.moveLayer(g,i),this._update(!0)}removeLayer(g){return this.style.removeLayer(g),this._update(!0)}getLayer(g){return this.style.getLayer(g)}setLayerZoomRange(g,i,u){return this.style.setLayerZoomRange(g,i,u),this._update(!0)}setFilter(g,i,u={}){return this.style.setFilter(g,i,u),this._update(!0)}getFilter(g){return this.style.getFilter(g)}setPaintProperty(g,i,u,m={}){return this.style.setPaintProperty(g,i,u,m),this._update(!0)}getPaintProperty(g,i){return this.style.getPaintProperty(g,i)}setLayoutProperty(g,i,u,m={}){return this.style.setLayoutProperty(g,i,u,m),this._update(!0)}getLayoutProperty(g,i){return this.style.getLayoutProperty(g,i)}setLight(g,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(g,i),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(g,i){return this.style.setFeatureState(g,i),this._update()}removeFeatureState(g,i){return this.style.removeFeatureState(g,i),this._update()}getFeatureState(g){return this.style.getFeatureState(g)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let g=0,i=0;return this._container&&(g=this._container.clientWidth||400,i=this._container.clientHeight||300),[g,i]}_setupContainer(){const g=this._container;g.classList.add("maplibregl-map","mapboxgl-map");const i=this._canvasContainer=w.create("div","maplibregl-canvas-container mapboxgl-canvas-container",g);this._interactive&&i.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=w.create("canvas","maplibregl-canvas mapboxgl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const u=this._containerDimensions();this._resizeCanvas(u[0],u[1],this.getPixelRatio());const m=this._controlContainer=w.create("div","maplibregl-control-container mapboxgl-control-container",g),v=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(S=>{v[S]=w.create("div",`maplibregl-ctrl-${S} mapboxgl-ctrl-${S}`,m)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){const g=this._container;this._metaPress=!1,this._cooperativeGesturesScreen=w.create("div","maplibregl-cooperative-gesture-screen",g);let i="Control",u=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(u=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use ⌘ + scroll to zoom the map",i="Meta"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${u}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,document.addEventListener("keydown",m=>{m.key===i&&(this._metaPress=!0)}),document.addEventListener("keyup",m=>{m.key===i&&(this._metaPress=!1)}),this._canvasContainer.addEventListener("wheel",m=>{this._onCooperativeGesture(m,this._metaPress,1)},!1),this._canvasContainer.classList.remove("mapboxgl-touch-drag-pan","maplibregl-touch-drag-pan")}_resizeCanvas(g,i,u){this._canvas.width=u*g,this._canvas.height=u*i,this._canvas.style.width=`${g}px`,this._canvas.style.height=`${i}px`}_setupPainter(){const g=a.extend({},d.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),i=this._canvas.getContext("webgl",g)||this._canvas.getContext("experimental-webgl",g);i?(this.painter=new uA(i,this.transform),a.exported$1.testSupport(i)):this.fire(new a.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(g){g.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new a.Event("webglcontextlost",{originalEvent:g}))}_contextRestored(g){this._setupPainter(),this.resize(),this._update(),this.fire(new a.Event("webglcontextrestored",{originalEvent:g}))}_onMapScroll(g){if(g.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}_onCooperativeGesture(g,i,u){return!i&&u<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(g){return this.style?(this._styleDirty=this._styleDirty||g,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(g){return this._update(),this._renderTaskQueue.add(g)}_cancelRenderFrame(g){this._renderTaskQueue.remove(g)}_render(g){let i,u=0;const m=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(i=m.createQueryEXT(),m.beginQueryEXT(m.TIME_ELAPSED_EXT,i),u=a.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(g),this._removed)return;let v=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const M=this.transform.zoom,z=a.exported.now();this.style.zoomHistory.update(M,z);const q=new a.EvaluationParameters(M,{now:z,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),J=q.crossFadingFactor();J===1&&J===this._crossFadingFactor||(v=!0,this._crossFadingFactor=J),this.style.update(q)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.style.terrain&&this.style.terrain.sourceCache.update(this.transform,this.style.terrain),this.transform.updateElevation(this.style.terrain),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new a.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.PerformanceUtils.mark(a.PerformanceMarkers.load),this.fire(new a.Event("load"))),this.style&&(this.style.hasTransitions()||v)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const M=a.exported.now()-u;m.endQueryEXT(m.TIME_ELAPSED_EXT,i),setTimeout(()=>{const z=m.getQueryObjectEXT(i,m.QUERY_RESULT_EXT)/1e6;m.deleteQueryEXT(i),this.fire(new a.Event("gpu-timing-frame",{cpuTime:M,gpuTime:z}))},50)}if(this.listens("gpu-timing-layer")){const M=this.painter.collectGpuTimers();setTimeout(()=>{const z=this.painter.queryGpuTimers(M);this.fire(new a.Event("gpu-timing-layer",{layerTimes:z}))},50)}const S=this._sourcesDirty||this._styleDirty||this._placementDirty;return S||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.Event("idle")),!this._loaded||this._fullyLoaded||S||(this._fullyLoaded=!0,a.PerformanceUtils.mark(a.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const i of this._controls)i.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const g=this.painter.context.gl.getExtension("WEBGL_lose_context");g&&g.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),w.remove(this._canvasContainer),w.remove(this._controlContainer),this._cooperativeGestures&&w.remove(this._cooperativeGesturesScreen),this._container.classList.remove("maplibregl-map","mapboxgl-map"),a.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new a.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=a.exported.frame(g=>{a.PerformanceUtils.frame(g),this._frame=null,this._render(g)}))}_onWindowOnline(){this._update()}_onWindowResize(g){this._trackResize&&this.resize({originalEvent:g})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(g){this._showTileBoundaries!==g&&(this._showTileBoundaries=g,this._update())}get showPadding(){return!!this._showPadding}set showPadding(g){this._showPadding!==g&&(this._showPadding=g,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(g){this._showCollisionBoxes!==g&&(this._showCollisionBoxes=g,g?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(g){this._showOverdrawInspector!==g&&(this._showOverdrawInspector=g,this._update())}get repaint(){return!!this._repaint}set repaint(g){this._repaint!==g&&(this._repaint=g,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(g){this._vertices=g,this._update()}_setCacheLimits(g,i){a.setCacheLimits(g,i)}get version(){return"2.4.0"}},NavigationControl:class{constructor(g){this.options=a.extend({},Gc,g),this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(a.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",i=>this._map.zoomIn({},{originalEvent:i})),w.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",i=>this._map.zoomOut({},{originalEvent:i})),w.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(a.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",i=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:i}):this._map.resetNorth({},{originalEvent:i})}),this._compassIcon=w.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const g=this._map.getZoom(),i=g===this._map.getMaxZoom(),u=g===this._map.getMinZoom();this._zoomInButton.disabled=i,this._zoomOutButton.disabled=u,this._zoomInButton.setAttribute("aria-disabled",i.toString()),this._zoomOutButton.setAttribute("aria-disabled",u.toString())}_rotateCompassArrow(){const g=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=g}onAdd(g){return this._map=g,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Bo(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){w.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(g,i){const u=w.create("button",g,this._container);return u.type="button",u.addEventListener("click",i),u}_setButtonTitle(g,i){const u=this._map._getUIString(`NavigationControl.${i}`);g.title=u,g.setAttribute("aria-label",u)}},GeolocateControl:class extends a.Evented{constructor(g){super(),this.options=a.extend({},wl,g),a.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(g){var i;return this._map=g,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),i=this._setupUI,Sa!==void 0?i(Sa):window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(u=>{Sa=u.state!=="denied",i(Sa)}):(Sa=!!window.navigator.geolocation,i(Sa)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),w.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,os=0,pA=!1}_isOutOfMapMaxBounds(g){const i=this._map.getMaxBounds(),u=g.coords;return i&&(u.longitude<i.getWest()||u.longitude>i.getEast()||u.latitude<i.getSouth()||u.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_onSuccess(g){if(this._map){if(this._isOutOfMapMaxBounds(g))return this._setErrorState(),this.fire(new a.Event("outofmaxbounds",g)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=g,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(g),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(g),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new a.Event("geolocate",g)),this._finish()}}_updateCamera(g){const i=new a.LngLat(g.coords.longitude,g.coords.latitude),u=g.coords.accuracy,m=this._map.getBearing(),v=a.extend({bearing:m},this.options.fitBoundsOptions);this._map.fitBounds(i.toBounds(u),v,{geolocateSource:!0})}_updateMarker(g){if(g){const i=new a.LngLat(g.coords.longitude,g.coords.latitude);this._accuracyCircleMarker.setLngLat(i).addTo(this._map),this._userLocationDotMarker.setLngLat(i).addTo(this._map),this._accuracy=g.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const g=this._map._container.clientHeight/2,i=this._map.unproject([0,g]),u=this._map.unproject([1,g]),m=i.distanceTo(u),v=Math.ceil(2*this._accuracy/m);this._circleElement.style.width=`${v}px`,this._circleElement.style.height=`${v}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(g){if(this._map){if(this.options.trackUserLocation)if(g.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(g.code===3&&pA)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new a.Event("error",g)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(g){if(this._container.addEventListener("contextmenu",i=>i.preventDefault()),this._geolocateButton=w.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),w.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",g===!1){a.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i)}else{const i=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=w.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new tl(this._dotElement),this._circleElement=w.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new tl({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",i=>{i.geolocateSource||this._watchState!=="ACTIVE_LOCK"||i.originalEvent&&i.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new a.Event("trackuserlocationend")))})}trigger(){if(!this._setup)return a.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":os--,pA=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new a.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let g;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),os++,os>1?(g={maximumAge:6e5,timeout:0},pA=!0):(g=this.options.positionOptions,pA=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,g)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:PA,LogoControl:MA,ScaleControl:class{constructor(g){this.options=a.extend({},Co,g),a.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){bc(this._map,this._container,this.options)}onAdd(g){return this._map=g,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",g.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){w.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(g){this.options.unit=g,bc(this._map,this._container,this.options)}},FullscreenControl:class{constructor(g){this._fullscreen=!1,g&&g.container&&(g.container instanceof HTMLElement?this._container=g.container:a.warnOnce("Full screen control 'container' must be a DOM element.")),a.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(g){return this._map=g,this._container||(this._container=this._map.getContainer()),this._controlContainer=w.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",a.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){w.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){const g=this._fullscreenButton=w.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);w.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",g).setAttribute("aria-hidden","true"),g.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const g=this._getTitle();this._fullscreenButton.setAttribute("aria-label",g),this._fullscreenButton.title=g}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},TerrainControl:class{constructor(g){this.options=g,a.bindAll(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(g){return this._map=g,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._terrainButton=w.create("button","maplibregl-ctrl-terrain mapboxgl-ctrl-terrain",this._container),w.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){w.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._map.style.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}},Popup:class extends a.Evented{constructor(g){super(),this.options=a.extend(Object.create(Ji),g),a.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(g){return this._map&&this.remove(),this._map=g,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new a.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&w.remove(this._content),this._container&&(w.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new a.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(g){return this._lngLat=a.LngLat.convert(g),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(g){return this.setDOMContent(document.createTextNode(g))}setHTML(g){const i=document.createDocumentFragment(),u=document.createElement("body");let m;for(u.innerHTML=g;m=u.firstChild,m;)i.appendChild(m);return this.setDOMContent(i)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(g){return this.options.maxWidth=g,this._update(),this}setDOMContent(g){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=w.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(g),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(g){this._container&&this._container.classList.add(g)}removeClassName(g){this._container&&this._container.classList.remove(g)}setOffset(g){return this.options.offset=g,this._update(),this}toggleClassName(g){if(this._container)return this._container.classList.toggle(g)}_createCloseButton(){this.options.closeButton&&(this._closeButton=w.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(g){this._update(g.point)}_onMouseMove(g){this._update(g.point)}_onDrag(g){this._update(g.point)}_update(g){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=w.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=w.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(S=>this._container.classList.add(S)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=dA(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!g))return;const i=this._pos=this._trackPointer&&g?g:this._map.project(this._lngLat);let u=this.options.anchor;const m=xc(this.options.offset);if(!u){const S=this._container.offsetWidth,M=this._container.offsetHeight;let z;z=i.y+m.bottom.y<M?["top"]:i.y>this._map.transform.height-M?["bottom"]:[],i.x<S/2?z.push("left"):i.x>this._map.transform.width-S/2&&z.push("right"),u=z.length===0?"bottom":z.join("-")}const v=i.add(m[u]).round();w.setTransform(this._container,`${sn[u]} translate(${v.x}px,${v.y}px)`),vn(this._container,u,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const g=this._container.querySelector(ds);g&&g.focus()}_onClose(){this.remove()}},Marker:tl,Style:wi,LngLat:a.LngLat,LngLatBounds:a.LngLatBounds,Point:a.pointGeometry,MercatorCoordinate:a.MercatorCoordinate,Evented:a.Evented,AJAXError:a.AJAXError,config:a.config,CanvasSource:kt,GeoJSONSource:He,ImageSource:Je,RasterDEMTileSource:_e,RasterTileSource:me,VectorTileSource:be,VideoSource:ke,prewarm:function(){ze().acquire(ht)},clearPrewarmedResources:function(){const g=Pt;g&&(g.isPreloaded()&&g.numActive()===1?(g.release(ht),Pt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get version(){return"2.4.0"},get workerCount(){return Nt.workerCount},set workerCount(g){Nt.workerCount=g},get maxParallelImageRequests(){return a.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(g){a.config.MAX_PARALLEL_IMAGE_REQUESTS=g},clearStorage(g){a.clearTileCache(g)},workerUrl:"",addProtocol(g,i){a.config.REGISTERED_PROTOCOLS[g]=i},removeProtocol(g){delete a.config.REGISTERED_PROTOCOLS[g]}};return Fa.extend(ha,{isSafari:a.isSafari,getPerformanceMetrics:a.PerformanceUtils.getPerformanceMetrics}),ha});var h=l;return h})})(Sw);const zu=Xm;const{document:Iw}=Xy;function m0(e){let t;const r=e[18].default,s=wA(r,e,e[17],null);return{c(){s&&s.c()},m(l,c){s&&s.m(l,c),t=!0},p(l,c){s&&s.p&&(!t||c&131072)&&xA(s,r,l,l[17],t?bA(r,l[17],c,null):BA(l[17]),null)},i(l){t||(Tt(s,l),t=!0)},o(l){Kt(s,l),t=!1},d(l){s&&s.d(l)}}}function Tw(e){let t,r,s,l,c=e[2]&&m0(e);return{c(){t=Lt("link"),r=$t(),s=Lt("div"),c&&c.c(),ue(t,"rel","stylesheet"),ue(t,"href","https://unpkg.com/maplibre-gl@2.1.9/dist/maplibre-gl.css"),ue(s,"id",e[0]),ue(s,"class","map svelte-1wo1snc")},m(h,a){it(Iw.head,t),st(h,r,a),st(h,s,a),c&&c.m(s,null),e[19](s),l=!0},p(h,[a]){h[2]?c?(c.p(h,a),a&4&&Tt(c,1)):(c=m0(h),c.c(),Tt(c,1),c.m(s,null)):c&&(Xa(),Kt(c,1,1,()=>{c=null}),Za()),(!l||a&1)&&ue(s,"id",h[0])},i(h){l||(Tt(c),l=!0)},o(h){Kt(c),l=!1},d(h){nt(t),h&&nt(r),h&&nt(s),c&&c.d(),e[19](null)}}}function Uw(e=100){return new Promise(t=>setTimeout(t,e))}function Lw(e,t,r){let{$$slots:s={},$$scope:l}=t;const c=$h();let{map:h}=t,{id:a="map"}=t,{location:d={lng:15,lat:45,zoom:1}}=t,{style:_={version:8,sources:{},layers:[{id:"background",type:"background",paint:{"background-color":"lightgrey"}}]}}=t,{options:p={}}=t,{minzoom:E=0}=t,{maxzoom:w=24}=t,{controls:x=!1}=t,{tabbable:Q=!1}=t,{zoom:k=null}=t,{center:R=null}=t,{pitch:P=null}=t,{bearing:O=null}=t,{interactive:G=!0}=t,{attribution:V=!0}=t,Z,te={},ce=!1;Gh("map",{getMap:()=>h}),d.bounds?te.bounds=d.bounds:d.lng&&d.lat&&(te.center=[+d.lng,+d.lat],d.zoom&&(te.zoom=+d.zoom),d.pitch&&(te.pitch=+d.pitch),d.bearing&&(te.bearing=+d.bearing)),V||(te.attributionControl=!1),te={...te,...p},Wa(()=>{r(3,h=new zu.Map({container:Z,style:_,minZoom:E,maxZoom:w,interactive:G,...te})),x&&!Array.isArray(x)?h.addControl(new zu.NavigationControl({showCompass:!1})):Array.isArray(x)&&x!=["locate"]&&h.addControl(new zu.NavigationControl({showCompass:x.includes("compass"),visualizePitch:x.includes("pitch")})),Array.isArray(x)&&x.includes("locate")&&h.addControl(new zu.GeolocateControl),h.addControl(new zu.FullscreenControl),h.on("load",fe=>{r(4,k=h.getZoom()),r(5,R=h.getCenter()),r(6,P=h.getPitch()),r(7,O=h.getBearing()),r(2,ce=!0),!Q&&document.querySelector(`#${a} canvas`)&&(document.querySelector(`#${a} canvas`).tabIndex="-1"),c("load",{event:fe})}),h.loadImage("https://vera-insights-data-viz.s3.amazonaws.com/louisiana/diag.png",function(fe,ee){if(fe)throw fe;h.addImage("pattern",ee)}),h.on("moveend",()=>{r(4,k=h.getZoom()),r(5,R=h.getCenter()),r(6,P=h.getPitch()),r(7,O=h.getBearing())})}),kp(async()=>{await Uw(250),h&&h.remove(),r(3,h=null)});function he(fe){h&&h.setStyle(fe),c("style",{style:fe})}function Ce(fe){qa[fe?"unshift":"push"](()=>{Z=fe,r(1,Z)})}return e.$$set=fe=>{"map"in fe&&r(3,h=fe.map),"id"in fe&&r(0,a=fe.id),"location"in fe&&r(8,d=fe.location),"style"in fe&&r(9,_=fe.style),"options"in fe&&r(10,p=fe.options),"minzoom"in fe&&r(11,E=fe.minzoom),"maxzoom"in fe&&r(12,w=fe.maxzoom),"controls"in fe&&r(13,x=fe.controls),"tabbable"in fe&&r(14,Q=fe.tabbable),"zoom"in fe&&r(4,k=fe.zoom),"center"in fe&&r(5,R=fe.center),"pitch"in fe&&r(6,P=fe.pitch),"bearing"in fe&&r(7,O=fe.bearing),"interactive"in fe&&r(15,G=fe.interactive),"attribution"in fe&&r(16,V=fe.attribution),"$$scope"in fe&&r(17,l=fe.$$scope)},e.$$.update=()=>{e.$$.dirty&512&&he(_)},[a,Z,ce,h,k,R,P,O,d,_,p,E,w,x,Q,G,V,l,s,Ce]}let Lg=class extends ii{constructor(t){super(),ni(this,t,Lw,Tw,ti,{map:3,id:0,location:8,style:9,options:10,minzoom:11,maxzoom:12,controls:13,tabbable:14,zoom:4,center:5,pitch:6,bearing:7,interactive:15,attribution:16})}};function g0(e){let t;const r=e[12].default,s=wA(r,e,e[11],null);return{c(){s&&s.c()},m(l,c){s&&s.m(l,c),t=!0},p(l,c){s&&s.p&&(!t||c&2048)&&xA(s,r,l,l[11],t?bA(r,l[11],c,null):BA(l[11]),null)},i(l){t||(Tt(s,l),t=!0)},o(l){Kt(s,l),t=!1},d(l){s&&s.d(l)}}}function kw(e){let t,r,s=e[0]&&g0(e);return{c(){s&&s.c(),t=yo()},m(l,c){s&&s.m(l,c),st(l,t,c),r=!0},p(l,[c]){l[0]?s?(s.p(l,c),c&1&&Tt(s,1)):(s=g0(l),s.c(),Tt(s,1),s.m(t.parentNode,t)):s&&(Xa(),Kt(s,1,1,()=>{s=null}),Za())},i(l){r||(Tt(s),r=!0)},o(l){Kt(s),r=!1},d(l){s&&s.d(l),l&&nt(t)}}}function Qw(e=1e3){return new Promise(t=>setTimeout(t,e))}function Pw(e,t,r){let{$$slots:s={},$$scope:l}=t,{id:c}=t,{type:h}=t,{url:a=null}=t,{props:d={}}=t,{data:_=null}=t,{layer:p=null}=t,{promoteId:E=null}=t,{minzoom:w=null}=t,{maxzoom:x=null}=t,{tilesize:Q=256}=t,k=!1;const{getMap:R}=$o("map"),P=R();Gh("source",{source:c,layer:p,promoteId:E}),P.getSource(c)&&P.removeSource(c);async function O(){await Qw(1e3),P.isSourceLoaded(c)?r(0,k=!0):r(0,k=!1)}w&&(d.minzoom=w),x&&(d.maxzoom=x),p&&E?(d.promoteId={},d.promoteId[p]=E):E&&(d.promoteId=E);function G(){let ce;h=="geojson"?_?ce={type:h,data:_,...d}:a&&(ce={type:h,data:a,...d}):h=="vector"?ce={type:h,tiles:[a],...d}:h=="raster"?ce={type:h,tiles:[a],tileSize:Q,...d}:h=="raster-dem"&&(ce={type:h,tiles:[a],tileSize:Q,...d}),ce&&(P.addSource(c,ce),O())}G();function V(ce){let he=P.getSource(c);he&&he.setData(ce)}function Z(ce){let he=P.getSource(c);he&&he.setTiles([ce])}function te(ce){P.getSource(c).tiles=[ce],P.style.sourceCaches[c].clearTiles(),P.style.sourceCaches[c].update(P.transform),P.triggerRepaint()}return kp(async()=>{P&&P.getSource(c)&&(P.getStyle().layers.filter(he=>he.source==c).forEach(he=>{P.removeLayer(he.id)}),P.removeSource(c))}),e.$$set=ce=>{"id"in ce&&r(2,c=ce.id),"type"in ce&&r(3,h=ce.type),"url"in ce&&r(4,a=ce.url),"props"in ce&&r(1,d=ce.props),"data"in ce&&r(5,_=ce.data),"layer"in ce&&r(6,p=ce.layer),"promoteId"in ce&&r(7,E=ce.promoteId),"minzoom"in ce&&r(8,w=ce.minzoom),"maxzoom"in ce&&r(9,x=ce.maxzoom),"tilesize"in ce&&r(10,Q=ce.tilesize),"$$scope"in ce&&r(11,l=ce.$$scope)},e.$$.update=()=>{e.$$.dirty&41&&h=="geojson"&&k&&V(_),e.$$.dirty&25&&h=="vector"&&k&&Z(a),e.$$.dirty&25&&h=="raster"&&k&&te(a)},[k,d,c,h,a,_,p,E,w,x,Q,l,s]}class KA extends ii{constructor(t){super(),ni(this,t,Pw,kw,ti,{id:2,type:3,url:4,props:1,data:5,layer:6,promoteId:7,minzoom:8,maxzoom:9,tilesize:10})}}const Qh=[];function Mw(e,t){return{subscribe:ui(e,t).subscribe}}function ui(e,t=bn){let r;const s=new Set;function l(a){if(ti(e,a)&&(e=a,r)){const d=!Qh.length;for(const _ of s)_[1](),Qh.push(_,e);if(d){for(let _=0;_<Qh.length;_+=2)Qh[_][0](Qh[_+1]);Qh.length=0}}}function c(a){l(a(e))}function h(a,d=bn){const _=[a,d];return s.add(_),s.size===1&&(r=t(l)||bn),a(e),()=>{s.delete(_),s.size===0&&(r(),r=null)}}return{set:l,update:c,subscribe:h}}function Ms(e,t,r){const s=!Array.isArray(e),l=s?[e]:e,c=t.length<2;return Mw(r,h=>{let a=!1;const d=[];let _=0,p=bn;const E=()=>{if(_)return;p();const x=t(s?d[0]:d,h);c?h(x):p=id(x)?x:bn},w=l.map((x,Q)=>Gy(x,k=>{d[Q]=k,_&=~(1<<Q),a&&E()},()=>{_|=1<<Q}));return a=!0,E(),function(){tA(w),p()}})}const Dw=e=>({hovered:e[0]&1}),y0=e=>({hovered:e[0]});function Nw(e){let t;const r=e[31].default,s=wA(r,e,e[30],y0);return{c(){s&&s.c()},m(l,c){s&&s.m(l,c),t=!0},p(l,c){s&&s.p&&(!t||c[0]&1073741825)&&xA(s,r,l,l[30],t?bA(r,l[30],c,Dw):BA(l[30]),y0)},i(l){t||(Tt(s,l),t=!0)},o(l){Kt(s,l),t=!1},d(l){s&&s.d(l)}}}function jw(e,t,r){let s,{$$slots:l={},$$scope:c}=t;const h=$h();let{id:a}=t,{type:d}=t,{filter:_=null}=t,{layout:p={}}=t,{paint:E={}}=t,{data:w=null}=t,{colorKey:x="color"}=t,{nameKey:Q=null}=t,{outlineKey:k="outline"}=t,{valueKey:R=null}=t,{idKey:P=null}=t,{select:O=!1}=t,{clickIgnore:G=!1}=t,{clickCenter:V=!1}=t,{selected:Z=null}=t,{hover:te=!1}=t,{hovered:ce=null}=t,{highlight:he=!1}=t,{highlightKey:Ce="highlighted"}=t,{highlighted:fe=[]}=t,{order:ee=null}=t,{maxzoom:re=null}=t,{minzoom:be=null}=t,{sourceLayer:me=null}=t,{visible:Re=!0}=t;const{source:_e,layer:He,promoteId:Le}=$o("source"),{getMap:Je}=$o("map"),ke=Je();Gh("layer",{layer:a});const kt=ui({id:null,feature:null,event:null});$r(e,kt,rt=>r(33,s=rt)),Gh("hover",kt),P=P||Le,me=me||He;let ie=null,Se=null,Qe=[];p.visibility=Re?"visible":"none";let Ke={id:a,type:d,source:_e,paint:E,layout:p};_&&(Ke.filter=_),me&&(Ke["source-layer"]=me),re&&(Ke.maxzoom=re),be&&(Ke.minzoom=be),ke.getLayer(a)&&ke.removeLayer(a),ke.addLayer(Ke,ee);function ot(rt,Qt=x,ht=k){if(Q||R)for(const Nt of rt)ke.setFeatureState({source:_e,sourceLayer:me,id:Nt[P]},{color:Qt?Nt[Qt]:null,name:Q?Nt[Q]:null,value:R?Nt[R]:null,outline:ht?Nt[ht]:null});else for(const Nt of rt)ke.setFeatureState({source:_e,sourceLayer:me,id:Nt[P]},{color:Nt[Qt],outline:"pink"})}function dt(rt){ke.getLayer(a)&&ke.setFilter(a,rt)}function Bt(rt){if(ke.getLayer(a))for(const Qt in rt)ke.setPaintProperty(a,Qt,rt[Qt])}function Ge(rt){ke.getLayer(a)&&ke.setLayoutProperty(a,"visibility",rt?"visible":"none")}return O&&ke.on("click",a,rt=>{if(rt.features.length>0&&!G){let Qt=rt.features[0];if(r(2,Z=Qt.id),h("select",{id:Z,feature:Qt,event:rt}),ie&&ke.setFeatureState({source:_e,sourceLayer:me,id:ie},{selected:!1}),ke.setFeatureState({source:_e,sourceLayer:me,id:Z},{selected:!0}),V){let ht=centroid(rt.features[0].toJSON().geometry);ke.flyTo({center:ht.geometry.coordinates})}r(27,ie=Z)}}),te&&(ke.on("mousemove",a,rt=>{if(rt.features.length>0){ce&&ke.setFeatureState({source:_e,sourceLayer:me,id:ce},{hovered:!1});let Qt=rt.features[0];r(0,ce=r(28,Se=Qt.id)),kt.set({id:ce,feature:Qt,event:rt}),h("hover",s),ke.setFeatureState({source:_e,sourceLayer:me,id:ce},{hovered:!0}),ke.getCanvas().style.cursor="pointer"}}),ke.on("mouseleave",a,rt=>{ce&&ke.setFeatureState({source:_e,sourceLayer:me,id:ce},{hovered:!1}),r(0,ce=r(28,Se=null)),kt.set({id:null,feature:null,event:rt}),h("hover",s),ke.getCanvas().style.cursor=""})),kp(async()=>{ke&&ke.getLayer(a)&&ke.removeLayer(a)}),e.$$set=rt=>{"id"in rt&&r(6,a=rt.id),"type"in rt&&r(7,d=rt.type),"filter"in rt&&r(8,_=rt.filter),"layout"in rt&&r(4,p=rt.layout),"paint"in rt&&r(9,E=rt.paint),"data"in rt&&r(10,w=rt.data),"colorKey"in rt&&r(11,x=rt.colorKey),"nameKey"in rt&&r(12,Q=rt.nameKey),"outlineKey"in rt&&r(13,k=rt.outlineKey),"valueKey"in rt&&r(14,R=rt.valueKey),"idKey"in rt&&r(5,P=rt.idKey),"select"in rt&&r(15,O=rt.select),"clickIgnore"in rt&&r(16,G=rt.clickIgnore),"clickCenter"in rt&&r(17,V=rt.clickCenter),"selected"in rt&&r(2,Z=rt.selected),"hover"in rt&&r(18,te=rt.hover),"hovered"in rt&&r(0,ce=rt.hovered),"highlight"in rt&&r(19,he=rt.highlight),"highlightKey"in rt&&r(20,Ce=rt.highlightKey),"highlighted"in rt&&r(21,fe=rt.highlighted),"order"in rt&&r(22,ee=rt.order),"maxzoom"in rt&&r(23,re=rt.maxzoom),"minzoom"in rt&&r(24,be=rt.minzoom),"sourceLayer"in rt&&r(3,me=rt.sourceLayer),"visible"in rt&&r(25,Re=rt.visible),"$$scope"in rt&&r(30,c=rt.$$scope)},e.$$.update=()=>{if(e.$$.dirty[0]&11264&&w&&ot(w,x,k),e.$$.dirty[0]&256&&dt(_),e.$$.dirty[0]&512&&Bt(E),e.$$.dirty[0]&33554432&&Ge(Re),e.$$.dirty[0]&540540936&&he&&fe!=Qe){if(Qe[0])for(const rt of Qe){let Qt={};Qt[Ce]=!1,ke.setFeatureState({source:_e,sourceLayer:me,id:rt},Qt)}if(r(29,Qe=fe),fe[0])for(const rt of fe){let Qt={};Qt[Ce]=!0,ke.setFeatureState({source:_e,sourceLayer:me,id:rt},Qt)}}e.$$.dirty[0]&134250508&&O&&Z!=ie&&(ie&&ke.setFeatureState({source:_e,sourceLayer:me,id:ie},{selected:!1}),Z&&ke.setFeatureState({source:_e,sourceLayer:me,id:Z},{selected:!0}),r(27,ie=Z)),e.$$.dirty[0]&268697609&&te&&ce!=Se&&(Se&&ke.setFeatureState({source:_e,sourceLayer:me,id:Se},{hovered:!1}),ce&&ke.setFeatureState({source:_e,sourceLayer:me,id:ce},{hovered:!0}),r(28,Se=ce))},[ce,kt,Z,me,p,P,a,d,_,E,w,x,Q,k,R,O,G,V,te,he,Ce,fe,ee,re,be,Re,ot,ie,Se,Qe,c,l]}class Po extends ii{constructor(t){super(),ni(this,t,jw,Nw,ti,{id:6,type:7,filter:8,layout:4,paint:9,data:10,colorKey:11,nameKey:12,outlineKey:13,valueKey:14,idKey:5,select:15,clickIgnore:16,clickCenter:17,selected:2,hover:18,hovered:0,highlight:19,highlightKey:20,highlighted:21,order:22,maxzoom:23,minzoom:24,sourceLayer:3,visible:25,updateColors:26},null,[-1,-1])}get updateColors(){return this.$$.ctx[26]}}function Rw(e,t,r){let s,{content:l}=t;const c=new zu.Popup({closeButton:!1,closeOnClick:!1}),{getMap:h}=$o("map"),a=h(),d=$o("hover");$r(e,d,p=>r(2,s=p));function _(p,E){p.id?c.setLngLat(p.event.lngLat).setHTML(E||p.code).addTo(a):c.remove()}return kp(()=>c.remove()),e.$$set=p=>{"content"in p&&r(1,l=p.content)},e.$$.update=()=>{e.$$.dirty&6&&_(s,l)},[d,l,s]}class Ow extends ii{constructor(t){super(),ni(this,t,Rw,null,ti,{content:1})}}function Hw(e){let t,r,s;return{c(){t=Lt("div"),t.innerHTML=`<div id="facility_size"><div class="circlelabels svelte-j3bpv"><p class="fac-size svelte-j3bpv">Facility Size</p> 
          <ul class="svelte-j3bpv"><li class="svelte-j3bpv">More than 5,000 beds</li> 
            <li class="svelte-j3bpv">1,000 - 5,000 beds</li> 
            <li class="svelte-j3bpv">Fewer than 1,000 beds</li></ul></div> 
        <svg class="legendcircles svelte-j3bpv"><line x1="50" y1="111" x2="100" y2="103" stroke="#666" stroke-width="1px"></line><line x1="50" y1="119" x2="100" y2="119" stroke="#666" stroke-width="1px"></line><line x1="50" y1="126" x2="100" y2="133" stroke="#666" stroke-width="1px"></line><circle cx="50" cy="131" r="5" fill="none" stroke="#000" stroke-width="1px"></circle><circle cx="50" cy="128" r="9" fill="none" stroke="#000" stroke-width="1px"></circle><circle cx="50" cy="124" r="13" fill="none" stroke="#000" stroke-width="1px"></circle></svg></div>`,r=$t(),s=Lt("div"),s.innerHTML=`<div id="facility_size"><h4 class="facilities svelte-j3bpv">Facility Size</h4> 
        <div class="leg-item svelte-j3bpv"><div class="circsymb circlethree svelte-j3bpv"></div> 
          <div class="leg-text three svelte-j3bpv">More than 5,000 beds</div></div> 
        <div class="leg-item two svelte-j3bpv"><div class="circsymb circletwo svelte-j3bpv"></div> 
          <div class="leg-text two svelte-j3bpv">1,000 - 5,000 beds</div></div> 
        <div class="leg-item one svelte-j3bpv"><div class="circsymb circleone svelte-j3bpv"></div> 
          <div class="leg-text one svelte-j3bpv">Fewer than 1,000 beds</div></div></div>`,ue(t,"class","mobile svelte-j3bpv"),ue(s,"class","nonmobile svelte-j3bpv")},m(l,c){st(l,t,c),st(l,r,c),st(l,s,c)},d(l){l&&nt(t),l&&nt(r),l&&nt(s)}}}function zw(e){let t;return{c(){t=Lt("div"),t.innerHTML=`<div class="nonmobile svelte-j3bpv"><div id="facility_size"><h4 class="facilities svelte-j3bpv">Facility Size</h4> 
          <div class="leg-item svelte-j3bpv"><div class="circsymb circlethree svelte-j3bpv"></div> 
            <div class="leg-text three svelte-j3bpv">More than 5,000 beds</div></div> 
          <div class="leg-item two svelte-j3bpv"><div class="circsymb circletwo svelte-j3bpv"></div> 
            <div class="leg-text two svelte-j3bpv">1,000 - 5,000 beds</div></div> 
          <div class="leg-item one svelte-j3bpv"><div class="circsymb circleone svelte-j3bpv"></div> 
            <div class="leg-text one svelte-j3bpv">Fewer than 1,000 beds</div></div></div></div> 
      <div id="pretrial_rate" class="svelte-j3bpv"><h4 class="choro svelte-j3bpv">Pretrial Detention Rate (2021)</h4> 
        <div id="colors" class="svelte-j3bpv"><div class="citem svelte-j3bpv"><div class="color a svelte-j3bpv"></div> 
            <div class="rank svelte-j3bpv">Below U.S. Avg.</div> 
            <div class="title svelte-j3bpv">(0-12 per 10k)</div></div> 
          <div class="citem svelte-j3bpv"><div class="color b svelte-j3bpv"></div> 
            <div class="rank svelte-j3bpv">Above U.S. Avg.</div> 
            <div class="title svelte-j3bpv">(12 – 25 per 10k)</div></div> 
          <div class="citem svelte-j3bpv"><div class="color c svelte-j3bpv"></div> 
            <div class="rank svelte-j3bpv">More than twice U.S. Avg.</div> 
            <div class="title svelte-j3bpv">(25+ per 10k)</div></div></div></div>`,ue(t,"id","multi-legend"),ue(t,"class","svelte-j3bpv")},m(r,s){st(r,t,s)},d(r){r&&nt(t)}}}function Vw(e){let t;return{c(){t=Lt("div"),t.innerHTML=`<div class="nonmobile svelte-j3bpv"><div id="facility_size"><h4 class="facilities svelte-j3bpv">Facility Size</h4> 
          <div class="leg-item svelte-j3bpv"><div class="circsymb circlethree svelte-j3bpv"></div> 
            <div class="leg-text three svelte-j3bpv">More than 5,000 beds</div></div> 
          <div class="leg-item two svelte-j3bpv"><div class="circsymb circletwo svelte-j3bpv"></div> 
            <div class="leg-text two svelte-j3bpv">1,000 - 5,000 beds</div></div> 
          <div class="leg-item one svelte-j3bpv"><div class="circsymb circleone svelte-j3bpv"></div> 
            <div class="leg-text one svelte-j3bpv">Fewer than 1,000 beds</div></div></div></div> 
      <div id="type-legend" class="svelte-j3bpv"><div class="item svelte-j3bpv"><div class="swatch hold svelte-j3bpv"></div>
          Holding Cell</div> 
        <div class="item svelte-j3bpv"><div class="swatch jail svelte-j3bpv"></div>
          Jail</div> 
        <div class="item svelte-j3bpv"><div class="swatch juvenile svelte-j3bpv"></div>
          Juvenile Facility</div> 
        <div class="item svelte-j3bpv"><div class="swatch prison svelte-j3bpv"></div>
          Prison</div> 
        <div class="item svelte-j3bpv"><div class="swatch twp svelte-j3bpv"></div>
          TWP Facility</div></div>`,ue(t,"id","multi-legend"),ue(t,"class","svelte-j3bpv")},m(r,s){st(r,t,s)},d(r){r&&nt(t)}}}function Kw(e){let t,r,s;return{c(){t=Lt("div"),t.innerHTML=`<div id="facility_size"><h4 class="facilities svelte-j3bpv">Facility Size</h4> 
        <div class="leg-item svelte-j3bpv"><div class="circsymb circlethree svelte-j3bpv"></div> 
          <div class="leg-text three svelte-j3bpv">More than 5,000 beds</div></div> 
        <div class="leg-item two svelte-j3bpv"><div class="circsymb circletwo svelte-j3bpv"></div> 
          <div class="leg-text two svelte-j3bpv">1,000 - 5,000 beds</div></div> 
        <div class="leg-item one svelte-j3bpv"><div class="circsymb circleone svelte-j3bpv"></div> 
          <div class="leg-text one svelte-j3bpv">Fewer than 1,000 beds</div></div></div>`,r=$t(),s=Lt("div"),s.innerHTML=`<div class="item svelte-j3bpv"><div class="color square d svelte-j3bpv"></div> 
        <div class="title svelte-j3bpv">Louisiana plantations circa 1853</div></div>`,ue(t,"class","nonmobile svelte-j3bpv"),ue(s,"class","plantations-legend svelte-j3bpv")},m(l,c){st(l,t,c),st(l,r,c),st(l,s,c)},d(l){l&&nt(t),l&&nt(r),l&&nt(s)}}}function Gw(e){let t;return{c(){t=Lt("div")},m(r,s){st(r,t,s)},d(r){r&&nt(t)}}}function qw(e){let t;return{c(){t=Lt("div"),t.textContent="$: Estimated 2021 revenue brought into local jails from DOC",ue(t,"class","financial svelte-j3bpv")},m(r,s){st(r,t,s)},d(r){r&&nt(t)}}}function Ww(e){let t;return{c(){t=Lt("div"),ue(t,"id","facility_size")},m(r,s){st(r,t,s)},d(r){r&&nt(t)}}}function Xw(e){let t;return{c(){t=Lt("div"),t.innerHTML=`<h4 class="choro svelte-j3bpv">Pretrial Detention Rate (2021)</h4> 
      <div id="colors" class="svelte-j3bpv"><div class="citem svelte-j3bpv"><div class="color a svelte-j3bpv"></div> 
          <div class="rank svelte-j3bpv">Below U.S. Avg.</div> 
          <div class="title svelte-j3bpv">(0-12 per 10k)</div></div> 
        <div class="citem svelte-j3bpv"><div class="color b svelte-j3bpv"></div> 
          <div class="rank svelte-j3bpv">Above U.S. Avg.</div> 
          <div class="title svelte-j3bpv">(12 – 25 per 10k)</div></div> 
        <div class="citem svelte-j3bpv"><div class="color c svelte-j3bpv"></div> 
          <div class="rank svelte-j3bpv">More than twice U.S. Avg.</div> 
          <div class="title svelte-j3bpv">(25+ per 10k)</div></div></div>`,ue(t,"id","pretrial_rate"),ue(t,"class","svelte-j3bpv")},m(r,s){st(r,t,s)},d(r){r&&nt(t)}}}function Zw(e){let t,r,s;return{c(){t=Lt("h4"),t.textContent="Prison Admission Rate (2021)",r=$t(),s=Lt("div"),s.innerHTML=`<div class="citem svelte-j3bpv"><div class="color a svelte-j3bpv"></div> 
        <div class="rank svelte-j3bpv">Below U.S. Avg.</div> 
        <div class="title svelte-j3bpv">(0-13 per 10k)</div></div> 
      <div class="citem svelte-j3bpv"><div class="color b svelte-j3bpv"></div> 
        <div class="rank svelte-j3bpv">Above U.S. Avg.</div> 
        <div class="title svelte-j3bpv">(13 – 26 per 10k)</div></div> 
      <div class="citem svelte-j3bpv"><div class="color c svelte-j3bpv"></div> 
        <div class="rank svelte-j3bpv">More than twice U.S. Avg.</div> 
        <div class="title svelte-j3bpv">(26+ per 10k)</div></div>`,ue(t,"class","choro svelte-j3bpv"),ue(s,"id","colors"),ue(s,"class","svelte-j3bpv")},m(l,c){st(l,t,c),st(l,r,c),st(l,s,c)},d(l){l&&nt(t),l&&nt(r),l&&nt(s)}}}function Jw(e){let t;function r(c,h){return c[0]=="map01"?Zw:c[0]=="map02"?Xw:c[0]=="map04"||c[0]=="map05"?Ww:c[0]=="map08"?qw:c[0]=="map12"?Gw:c[0]=="map13"?Kw:c[0]=="map14"?Vw:c[0]=="map15"?zw:Hw}let s=r(e),l=s(e);return{c(){t=Lt("div"),l.c(),ue(t,"id","legend"),ue(t,"class","svelte-j3bpv")},m(c,h){st(c,t,h),l.m(t,null)},p(c,[h]){s!==(s=r(c))&&(l.d(1),l=s(c),l&&(l.c(),l.m(t,null)))},i:bn,o:bn,d(c){c&&nt(t),l.d()}}}function Yw(e,t,r){let{lo:s}=t;return e.$$set=l=>{"lo"in l&&r(0,s=l.lo)},[s]}class $w extends ii{constructor(t){super(),ni(this,t,Yw,Jw,ti,{lo:0})}}function e2(e){let t,r,s,l,c,h,a,d,_,p,E;return{c(){t=Lt("h2"),t.textContent="Acknowledgments",r=$t(),s=Lt("p"),s.textContent=`Vera would like to thank Families and Friends of Louisiana’s Incarcerated
  Children, Power Coalition for Equity and Justice, and Voice of the Experienced
  for sharing their advice, guidance, and time throughout the process of
  creating this tool.`,l=$t(),c=Lt("p"),c.textContent=`Vera would like to thank the following colleagues for their support in
  providing research and invaluable advice: Connor Burruss, Sarah Omojola, Josh
  Pichon, Kimberly Dickerson, Jacob Kang-Brown, Nina Siulc, and Karen Ball.`,h=$t(),a=Lt("p"),a.textContent=`Vera would like to thank the Ford Foundation, the Foundation for Louisiana,
  the Huey and Angelina Wilson Foundation, and the Wellspring Philanthropic Fund
  for their generous financial contributions that helped make this project
  possible.`,d=$t(),_=Lt("h2"),_.textContent="Credits",p=$t(),E=Lt("ul"),E.innerHTML=`<li>Design and development: Jill Hubley and Hao Lun Hung</li> 
  <li>Data analysis: Selina Ho, Sara Lanclos, and Christian Henrichson</li> 
  <li>Writing: Sam Raim, Will Snowden, Kim Mosby, PhD, and Christian Henrichson</li> 
  <li>Editing: Léon Digard</li>`,ue(E,"class","svelte-6fbqw6")},m(w,x){st(w,t,x),st(w,r,x),st(w,s,x),st(w,l,x),st(w,c,x),st(w,h,x),st(w,a,x),st(w,d,x),st(w,_,x),st(w,p,x),st(w,E,x)},p:bn,i:bn,o:bn,d(w){w&&nt(t),w&&nt(r),w&&nt(s),w&&nt(l),w&&nt(c),w&&nt(h),w&&nt(a),w&&nt(d),w&&nt(_),w&&nt(p),w&&nt(E)}}}class t2 extends ii{constructor(t){super(),ni(this,t,null,e2,ti,{})}}function cp(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function r2(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function cv(e){let t,r,s;e.length!==2?(t=cp,r=(a,d)=>cp(e(a),d),s=(a,d)=>e(a)-d):(t=e===cp||e===r2?e:n2,r=e,s=e);function l(a,d,_=0,p=a.length){if(_<p){if(t(d,d)!==0)return p;do{const E=_+p>>>1;r(a[E],d)<0?_=E+1:p=E}while(_<p)}return _}function c(a,d,_=0,p=a.length){if(_<p){if(t(d,d)!==0)return p;do{const E=_+p>>>1;r(a[E],d)<=0?_=E+1:p=E}while(_<p)}return _}function h(a,d,_=0,p=a.length){const E=l(a,d,_,p-1);return E>_&&s(a[E-1],d)>-s(a[E],d)?E-1:E}return{left:l,center:h,right:c}}function n2(){return 0}function i2(e){return e===null?NaN:+e}const s2=cv(cp),a2=s2.right;cv(i2).center;const o2=a2;class Zm extends Map{constructor(t,r=c2){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[s,l]of t)this.set(s,l)}get(t){return super.get(v0(this,t))}has(t){return super.has(v0(this,t))}set(t,r){return super.set(A2(this,t),r)}delete(t){return super.delete(l2(this,t))}}function v0({_intern:e,_key:t},r){const s=t(r);return e.has(s)?e.get(s):r}function A2({_intern:e,_key:t},r){const s=t(r);return e.has(s)?e.get(s):(e.set(s,r),r)}function l2({_intern:e,_key:t},r){const s=t(r);return e.has(s)&&(r=e.get(s),e.delete(s)),r}function c2(e){return e!==null&&typeof e=="object"?e.valueOf():e}function gp(e){return e}function u2(e,...t){return kg(e,gp,gp,t)}function h2(e,...t){return kg(e,Array.from,gp,t)}function f2(e,t){for(let r=1,s=t.length;r<s;++r)e=e.flatMap(l=>l.pop().map(([c,h])=>[...l,c,h]));return e}function d2(e,...t){return f2(h2(e,...t),t)}function Jm(e,t,...r){return kg(e,gp,t,r)}function kg(e,t,r,s){return function l(c,h){if(h>=s.length)return r(c);const a=new Zm,d=s[h++];let _=-1;for(const p of c){const E=d(p,++_,c),w=a.get(E);w?w.push(p):a.set(E,[p])}for(const[p,E]of a)a.set(p,l(E,h));return t(a)}(e,0)}var Ym=Math.sqrt(50),$m=Math.sqrt(10),eg=Math.sqrt(2);function p2(e,t,r){var s,l=-1,c,h,a;if(t=+t,e=+e,r=+r,e===t&&r>0)return[e];if((s=t<e)&&(c=e,e=t,t=c),(a=uv(e,t,r))===0||!isFinite(a))return[];if(a>0){let d=Math.round(e/a),_=Math.round(t/a);for(d*a<e&&++d,_*a>t&&--_,h=new Array(c=_-d+1);++l<c;)h[l]=(d+l)*a}else{a=-a;let d=Math.round(e*a),_=Math.round(t*a);for(d/a<e&&++d,_/a>t&&--_,h=new Array(c=_-d+1);++l<c;)h[l]=(d+l)/a}return s&&h.reverse(),h}function uv(e,t,r){var s=(t-e)/Math.max(0,r),l=Math.floor(Math.log(s)/Math.LN10),c=s/Math.pow(10,l);return l>=0?(c>=Ym?10:c>=$m?5:c>=eg?2:1)*Math.pow(10,l):-Math.pow(10,-l)/(c>=Ym?10:c>=$m?5:c>=eg?2:1)}function m2(e,t,r){var s=Math.abs(t-e)/Math.max(0,r),l=Math.pow(10,Math.floor(Math.log(s)/Math.LN10)),c=s/l;return c>=Ym?l*=10:c>=$m?l*=5:c>=eg&&(l*=2),t<e?-l:l}function Xf(e,t){let r;if(t===void 0)for(const s of e)s!=null&&(r<s||r===void 0&&s>=s)&&(r=s);else{let s=-1;for(let l of e)(l=t(l,++s,e))!=null&&(r<l||r===void 0&&l>=l)&&(r=l)}return r}function g2(e,t,r){e=+e,t=+t,r=(l=arguments.length)<2?(t=e,e=0,1):l<3?1:+r;for(var s=-1,l=Math.max(0,Math.ceil((t-e)/r))|0,c=new Array(l);++s<l;)c[s]=e+s*r;return c}function tg(e,t){let r=0;if(t===void 0)for(let s of e)(s=+s)&&(r+=s);else{let s=-1;for(let l of e)(l=+t(l,++s,e))&&(r+=l)}return r}function y2(e){return e}var Bm=1,Cm=2,rg=3,Wd=4,_0=1e-6;function v2(e){return"translate("+e+",0)"}function _2(e){return"translate(0,"+e+")"}function w2(e){return t=>+e(t)}function b2(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),r=>+e(r)+t}function x2(){return!this.__axis}function B2(e,t){var r=[],s=null,l=null,c=6,h=6,a=3,d=typeof window<"u"&&window.devicePixelRatio>1?0:.5,_=e===Bm||e===Wd?-1:1,p=e===Wd||e===Cm?"x":"y",E=e===Bm||e===rg?v2:_2;function w(x){var Q=s??(t.ticks?t.ticks.apply(t,r):t.domain()),k=l??(t.tickFormat?t.tickFormat.apply(t,r):y2),R=Math.max(c,0)+a,P=t.range(),O=+P[0]+d,G=+P[P.length-1]+d,V=(t.bandwidth?b2:w2)(t.copy(),d),Z=x.selection?x.selection():x,te=Z.selectAll(".domain").data([null]),ce=Z.selectAll(".tick").data(Q,t).order(),he=ce.exit(),Ce=ce.enter().append("g").attr("class","tick"),fe=ce.select("line"),ee=ce.select("text");te=te.merge(te.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),ce=ce.merge(Ce),fe=fe.merge(Ce.append("line").attr("stroke","currentColor").attr(p+"2",_*c)),ee=ee.merge(Ce.append("text").attr("fill","currentColor").attr(p,_*R).attr("dy",e===Bm?"0em":e===rg?"0.71em":"0.32em")),x!==Z&&(te=te.transition(x),ce=ce.transition(x),fe=fe.transition(x),ee=ee.transition(x),he=he.transition(x).attr("opacity",_0).attr("transform",function(re){return isFinite(re=V(re))?E(re+d):this.getAttribute("transform")}),Ce.attr("opacity",_0).attr("transform",function(re){var be=this.parentNode.__axis;return E((be&&isFinite(be=be(re))?be:V(re))+d)})),he.remove(),te.attr("d",e===Wd||e===Cm?h?"M"+_*h+","+O+"H"+d+"V"+G+"H"+_*h:"M"+d+","+O+"V"+G:h?"M"+O+","+_*h+"V"+d+"H"+G+"V"+_*h:"M"+O+","+d+"H"+G),ce.attr("opacity",1).attr("transform",function(re){return E(V(re)+d)}),fe.attr(p+"2",_*c),ee.attr(p,_*R).text(k),Z.filter(x2).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===Cm?"start":e===Wd?"end":"middle"),Z.each(function(){this.__axis=V})}return w.scale=function(x){return arguments.length?(t=x,w):t},w.ticks=function(){return r=Array.from(arguments),w},w.tickArguments=function(x){return arguments.length?(r=x==null?[]:Array.from(x),w):r.slice()},w.tickValues=function(x){return arguments.length?(s=x==null?null:Array.from(x),w):s&&s.slice()},w.tickFormat=function(x){return arguments.length?(l=x,w):l},w.tickSize=function(x){return arguments.length?(c=h=+x,w):c},w.tickSizeInner=function(x){return arguments.length?(c=+x,w):c},w.tickSizeOuter=function(x){return arguments.length?(h=+x,w):h},w.tickPadding=function(x){return arguments.length?(a=+x,w):a},w.offset=function(x){return arguments.length?(d=+x,w):d},w}function C2(e){return B2(rg,e)}var E2={value:()=>{}};function hv(){for(var e=0,t=arguments.length,r={},s;e<t;++e){if(!(s=arguments[e]+"")||s in r||/[\s.]/.test(s))throw new Error("illegal type: "+s);r[s]=[]}return new up(r)}function up(e){this._=e}function F2(e,t){return e.trim().split(/^|\s+/).map(function(r){var s="",l=r.indexOf(".");if(l>=0&&(s=r.slice(l+1),r=r.slice(0,l)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:s}})}up.prototype=hv.prototype={constructor:up,on:function(e,t){var r=this._,s=F2(e+"",r),l,c=-1,h=s.length;if(arguments.length<2){for(;++c<h;)if((l=(e=s[c]).type)&&(l=S2(r[l],e.name)))return l;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++c<h;)if(l=(e=s[c]).type)r[l]=w0(r[l],e.name,t);else if(t==null)for(l in r)r[l]=w0(r[l],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new up(e)},call:function(e,t){if((l=arguments.length-2)>0)for(var r=new Array(l),s=0,l,c;s<l;++s)r[s]=arguments[s+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(c=this._[e],s=0,l=c.length;s<l;++s)c[s].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var s=this._[e],l=0,c=s.length;l<c;++l)s[l].value.apply(t,r)}};function S2(e,t){for(var r=0,s=e.length,l;r<s;++r)if((l=e[r]).name===t)return l.value}function w0(e,t,r){for(var s=0,l=e.length;s<l;++s)if(e[s].name===t){e[s]=E2,e=e.slice(0,s).concat(e.slice(s+1));break}return r!=null&&e.push({name:t,value:r}),e}var ng="http://www.w3.org/1999/xhtml";const b0={svg:"http://www.w3.org/2000/svg",xhtml:ng,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Mp(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),b0.hasOwnProperty(t)?{space:b0[t],local:e}:e}function I2(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===ng&&t.documentElement.namespaceURI===ng?t.createElement(e):t.createElementNS(r,e)}}function T2(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function fv(e){var t=Mp(e);return(t.local?T2:I2)(t)}function U2(){}function Qg(e){return e==null?U2:function(){return this.querySelector(e)}}function L2(e){typeof e!="function"&&(e=Qg(e));for(var t=this._groups,r=t.length,s=new Array(r),l=0;l<r;++l)for(var c=t[l],h=c.length,a=s[l]=new Array(h),d,_,p=0;p<h;++p)(d=c[p])&&(_=e.call(d,d.__data__,p,c))&&("__data__"in d&&(_.__data__=d.__data__),a[p]=_);return new eA(s,this._parents)}function dv(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function k2(){return[]}function pv(e){return e==null?k2:function(){return this.querySelectorAll(e)}}function Q2(e){return function(){return dv(e.apply(this,arguments))}}function P2(e){typeof e=="function"?e=Q2(e):e=pv(e);for(var t=this._groups,r=t.length,s=[],l=[],c=0;c<r;++c)for(var h=t[c],a=h.length,d,_=0;_<a;++_)(d=h[_])&&(s.push(e.call(d,d.__data__,_,h)),l.push(d));return new eA(s,l)}function mv(e){return function(){return this.matches(e)}}function gv(e){return function(t){return t.matches(e)}}var M2=Array.prototype.find;function D2(e){return function(){return M2.call(this.children,e)}}function N2(){return this.firstElementChild}function j2(e){return this.select(e==null?N2:D2(typeof e=="function"?e:gv(e)))}var R2=Array.prototype.filter;function O2(){return Array.from(this.children)}function H2(e){return function(){return R2.call(this.children,e)}}function z2(e){return this.selectAll(e==null?O2:H2(typeof e=="function"?e:gv(e)))}function V2(e){typeof e!="function"&&(e=mv(e));for(var t=this._groups,r=t.length,s=new Array(r),l=0;l<r;++l)for(var c=t[l],h=c.length,a=s[l]=[],d,_=0;_<h;++_)(d=c[_])&&e.call(d,d.__data__,_,c)&&a.push(d);return new eA(s,this._parents)}function yv(e){return new Array(e.length)}function K2(){return new eA(this._enter||this._groups.map(yv),this._parents)}function yp(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}yp.prototype={constructor:yp,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function G2(e){return function(){return e}}function q2(e,t,r,s,l,c){for(var h=0,a,d=t.length,_=c.length;h<_;++h)(a=t[h])?(a.__data__=c[h],s[h]=a):r[h]=new yp(e,c[h]);for(;h<d;++h)(a=t[h])&&(l[h]=a)}function W2(e,t,r,s,l,c,h){var a,d,_=new Map,p=t.length,E=c.length,w=new Array(p),x;for(a=0;a<p;++a)(d=t[a])&&(w[a]=x=h.call(d,d.__data__,a,t)+"",_.has(x)?l[a]=d:_.set(x,d));for(a=0;a<E;++a)x=h.call(e,c[a],a,c)+"",(d=_.get(x))?(s[a]=d,d.__data__=c[a],_.delete(x)):r[a]=new yp(e,c[a]);for(a=0;a<p;++a)(d=t[a])&&_.get(w[a])===d&&(l[a]=d)}function X2(e){return e.__data__}function Z2(e,t){if(!arguments.length)return Array.from(this,X2);var r=t?W2:q2,s=this._parents,l=this._groups;typeof e!="function"&&(e=G2(e));for(var c=l.length,h=new Array(c),a=new Array(c),d=new Array(c),_=0;_<c;++_){var p=s[_],E=l[_],w=E.length,x=J2(e.call(p,p&&p.__data__,_,s)),Q=x.length,k=a[_]=new Array(Q),R=h[_]=new Array(Q),P=d[_]=new Array(w);r(p,E,k,R,P,x,t);for(var O=0,G=0,V,Z;O<Q;++O)if(V=k[O]){for(O>=G&&(G=O+1);!(Z=R[G])&&++G<Q;);V._next=Z||null}}return h=new eA(h,s),h._enter=a,h._exit=d,h}function J2(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Y2(){return new eA(this._exit||this._groups.map(yv),this._parents)}function $2(e,t,r){var s=this.enter(),l=this,c=this.exit();return typeof e=="function"?(s=e(s),s&&(s=s.selection())):s=s.append(e+""),t!=null&&(l=t(l),l&&(l=l.selection())),r==null?c.remove():r(c),s&&l?s.merge(l).order():l}function eb(e){for(var t=e.selection?e.selection():e,r=this._groups,s=t._groups,l=r.length,c=s.length,h=Math.min(l,c),a=new Array(l),d=0;d<h;++d)for(var _=r[d],p=s[d],E=_.length,w=a[d]=new Array(E),x,Q=0;Q<E;++Q)(x=_[Q]||p[Q])&&(w[Q]=x);for(;d<l;++d)a[d]=r[d];return new eA(a,this._parents)}function tb(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var s=e[t],l=s.length-1,c=s[l],h;--l>=0;)(h=s[l])&&(c&&h.compareDocumentPosition(c)^4&&c.parentNode.insertBefore(h,c),c=h);return this}function rb(e){e||(e=nb);function t(E,w){return E&&w?e(E.__data__,w.__data__):!E-!w}for(var r=this._groups,s=r.length,l=new Array(s),c=0;c<s;++c){for(var h=r[c],a=h.length,d=l[c]=new Array(a),_,p=0;p<a;++p)(_=h[p])&&(d[p]=_);d.sort(t)}return new eA(l,this._parents).order()}function nb(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function ib(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function sb(){return Array.from(this)}function ab(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var s=e[t],l=0,c=s.length;l<c;++l){var h=s[l];if(h)return h}return null}function ob(){let e=0;for(const t of this)++e;return e}function Ab(){return!this.node()}function lb(e){for(var t=this._groups,r=0,s=t.length;r<s;++r)for(var l=t[r],c=0,h=l.length,a;c<h;++c)(a=l[c])&&e.call(a,a.__data__,c,l);return this}function cb(e){return function(){this.removeAttribute(e)}}function ub(e){return function(){this.removeAttributeNS(e.space,e.local)}}function hb(e,t){return function(){this.setAttribute(e,t)}}function fb(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function db(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function pb(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function mb(e,t){var r=Mp(e);if(arguments.length<2){var s=this.node();return r.local?s.getAttributeNS(r.space,r.local):s.getAttribute(r)}return this.each((t==null?r.local?ub:cb:typeof t=="function"?r.local?pb:db:r.local?fb:hb)(r,t))}function vv(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function gb(e){return function(){this.style.removeProperty(e)}}function yb(e,t,r){return function(){this.style.setProperty(e,t,r)}}function vb(e,t,r){return function(){var s=t.apply(this,arguments);s==null?this.style.removeProperty(e):this.style.setProperty(e,s,r)}}function _b(e,t,r){return arguments.length>1?this.each((t==null?gb:typeof t=="function"?vb:yb)(e,t,r??"")):Wh(this.node(),e)}function Wh(e,t){return e.style.getPropertyValue(t)||vv(e).getComputedStyle(e,null).getPropertyValue(t)}function wb(e){return function(){delete this[e]}}function bb(e,t){return function(){this[e]=t}}function xb(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function Bb(e,t){return arguments.length>1?this.each((t==null?wb:typeof t=="function"?xb:bb)(e,t)):this.node()[e]}function _v(e){return e.trim().split(/^|\s+/)}function Pg(e){return e.classList||new wv(e)}function wv(e){this._node=e,this._names=_v(e.getAttribute("class")||"")}wv.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function bv(e,t){for(var r=Pg(e),s=-1,l=t.length;++s<l;)r.add(t[s])}function xv(e,t){for(var r=Pg(e),s=-1,l=t.length;++s<l;)r.remove(t[s])}function Cb(e){return function(){bv(this,e)}}function Eb(e){return function(){xv(this,e)}}function Fb(e,t){return function(){(t.apply(this,arguments)?bv:xv)(this,e)}}function Sb(e,t){var r=_v(e+"");if(arguments.length<2){for(var s=Pg(this.node()),l=-1,c=r.length;++l<c;)if(!s.contains(r[l]))return!1;return!0}return this.each((typeof t=="function"?Fb:t?Cb:Eb)(r,t))}function Ib(){this.textContent=""}function Tb(e){return function(){this.textContent=e}}function Ub(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Lb(e){return arguments.length?this.each(e==null?Ib:(typeof e=="function"?Ub:Tb)(e)):this.node().textContent}function kb(){this.innerHTML=""}function Qb(e){return function(){this.innerHTML=e}}function Pb(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Mb(e){return arguments.length?this.each(e==null?kb:(typeof e=="function"?Pb:Qb)(e)):this.node().innerHTML}function Db(){this.nextSibling&&this.parentNode.appendChild(this)}function Nb(){return this.each(Db)}function jb(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Rb(){return this.each(jb)}function Ob(e){var t=typeof e=="function"?e:fv(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Hb(){return null}function zb(e,t){var r=typeof e=="function"?e:fv(e),s=t==null?Hb:typeof t=="function"?t:Qg(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),s.apply(this,arguments)||null)})}function Vb(){var e=this.parentNode;e&&e.removeChild(this)}function Kb(){return this.each(Vb)}function Gb(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function qb(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Wb(e){return this.select(e?qb:Gb)}function Xb(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Zb(e){return function(t){e.call(this,t,this.__data__)}}function Jb(e){return e.trim().split(/^|\s+/).map(function(t){var r="",s=t.indexOf(".");return s>=0&&(r=t.slice(s+1),t=t.slice(0,s)),{type:t,name:r}})}function Yb(e){return function(){var t=this.__on;if(t){for(var r=0,s=-1,l=t.length,c;r<l;++r)c=t[r],(!e.type||c.type===e.type)&&c.name===e.name?this.removeEventListener(c.type,c.listener,c.options):t[++s]=c;++s?t.length=s:delete this.__on}}}function $b(e,t,r){return function(){var s=this.__on,l,c=Zb(t);if(s){for(var h=0,a=s.length;h<a;++h)if((l=s[h]).type===e.type&&l.name===e.name){this.removeEventListener(l.type,l.listener,l.options),this.addEventListener(l.type,l.listener=c,l.options=r),l.value=t;return}}this.addEventListener(e.type,c,r),l={type:e.type,name:e.name,value:t,listener:c,options:r},s?s.push(l):this.__on=[l]}}function ex(e,t,r){var s=Jb(e+""),l,c=s.length,h;if(arguments.length<2){var a=this.node().__on;if(a){for(var d=0,_=a.length,p;d<_;++d)for(l=0,p=a[d];l<c;++l)if((h=s[l]).type===p.type&&h.name===p.name)return p.value}return}for(a=t?$b:Yb,l=0;l<c;++l)this.each(a(s[l],t,r));return this}function Bv(e,t,r){var s=vv(e),l=s.CustomEvent;typeof l=="function"?l=new l(t,r):(l=s.document.createEvent("Event"),r?(l.initEvent(t,r.bubbles,r.cancelable),l.detail=r.detail):l.initEvent(t,!1,!1)),e.dispatchEvent(l)}function tx(e,t){return function(){return Bv(this,e,t)}}function rx(e,t){return function(){return Bv(this,e,t.apply(this,arguments))}}function nx(e,t){return this.each((typeof t=="function"?rx:tx)(e,t))}function*ix(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var s=e[t],l=0,c=s.length,h;l<c;++l)(h=s[l])&&(yield h)}var Mg=[null];function eA(e,t){this._groups=e,this._parents=t}function ld(){return new eA([[document.documentElement]],Mg)}function sx(){return this}eA.prototype=ld.prototype={constructor:eA,select:L2,selectAll:P2,selectChild:j2,selectChildren:z2,filter:V2,data:Z2,enter:K2,exit:Y2,join:$2,merge:eb,selection:sx,order:tb,sort:rb,call:ib,nodes:sb,node:ab,size:ob,empty:Ab,each:lb,attr:mb,style:_b,property:Bb,classed:Sb,text:Lb,html:Mb,raise:Nb,lower:Rb,append:Ob,insert:zb,remove:Kb,clone:Wb,datum:Xb,on:ex,dispatch:nx,[Symbol.iterator]:ix};function Ga(e){return typeof e=="string"?new eA([[document.querySelector(e)]],[document.documentElement]):new eA([[e]],Mg)}function Cv(e){return typeof e=="string"?new eA([document.querySelectorAll(e)],[document.documentElement]):new eA([dv(e)],Mg)}function Dg(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function Ev(e,t){var r=Object.create(e.prototype);for(var s in t)r[s]=t[s];return r}function cd(){}var Zf=.7,vp=1/Zf,zh="\\s*([+-]?\\d+)\\s*",Jf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",pc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ax=/^#([0-9a-f]{3,8})$/,ox=new RegExp(`^rgb\\(${zh},${zh},${zh}\\)$`),Ax=new RegExp(`^rgb\\(${pc},${pc},${pc}\\)$`),lx=new RegExp(`^rgba\\(${zh},${zh},${zh},${Jf}\\)$`),cx=new RegExp(`^rgba\\(${pc},${pc},${pc},${Jf}\\)$`),ux=new RegExp(`^hsl\\(${Jf},${pc},${pc}\\)$`),hx=new RegExp(`^hsla\\(${Jf},${pc},${pc},${Jf}\\)$`),x0={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Dg(cd,Yu,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:B0,formatHex:B0,formatHex8:fx,formatHsl:dx,formatRgb:C0,toString:C0});function B0(){return this.rgb().formatHex()}function fx(){return this.rgb().formatHex8()}function dx(){return Fv(this).formatHsl()}function C0(){return this.rgb().formatRgb()}function Yu(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=ax.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?E0(t):r===3?new _A(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Xd(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Xd(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ox.exec(e))?new _A(t[1],t[2],t[3],1):(t=Ax.exec(e))?new _A(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=lx.exec(e))?Xd(t[1],t[2],t[3],t[4]):(t=cx.exec(e))?Xd(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=ux.exec(e))?I0(t[1],t[2]/100,t[3]/100,1):(t=hx.exec(e))?I0(t[1],t[2]/100,t[3]/100,t[4]):x0.hasOwnProperty(e)?E0(x0[e]):e==="transparent"?new _A(NaN,NaN,NaN,0):null}function E0(e){return new _A(e>>16&255,e>>8&255,e&255,1)}function Xd(e,t,r,s){return s<=0&&(e=t=r=NaN),new _A(e,t,r,s)}function px(e){return e instanceof cd||(e=Yu(e)),e?(e=e.rgb(),new _A(e.r,e.g,e.b,e.opacity)):new _A}function _p(e,t,r,s){return arguments.length===1?px(e):new _A(e,t,r,s??1)}function _A(e,t,r,s){this.r=+e,this.g=+t,this.b=+r,this.opacity=+s}Dg(_A,_p,Ev(cd,{brighter(e){return e=e==null?vp:Math.pow(vp,e),new _A(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Zf:Math.pow(Zf,e),new _A(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new _A(qu(this.r),qu(this.g),qu(this.b),wp(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:F0,formatHex:F0,formatHex8:mx,formatRgb:S0,toString:S0}));function F0(){return`#${Ku(this.r)}${Ku(this.g)}${Ku(this.b)}`}function mx(){return`#${Ku(this.r)}${Ku(this.g)}${Ku(this.b)}${Ku((isNaN(this.opacity)?1:this.opacity)*255)}`}function S0(){const e=wp(this.opacity);return`${e===1?"rgb(":"rgba("}${qu(this.r)}, ${qu(this.g)}, ${qu(this.b)}${e===1?")":`, ${e})`}`}function wp(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function qu(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ku(e){return e=qu(e),(e<16?"0":"")+e.toString(16)}function I0(e,t,r,s){return s<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new zl(e,t,r,s)}function Fv(e){if(e instanceof zl)return new zl(e.h,e.s,e.l,e.opacity);if(e instanceof cd||(e=Yu(e)),!e)return new zl;if(e instanceof zl)return e;e=e.rgb();var t=e.r/255,r=e.g/255,s=e.b/255,l=Math.min(t,r,s),c=Math.max(t,r,s),h=NaN,a=c-l,d=(c+l)/2;return a?(t===c?h=(r-s)/a+(r<s)*6:r===c?h=(s-t)/a+2:h=(t-r)/a+4,a/=d<.5?c+l:2-c-l,h*=60):a=d>0&&d<1?0:h,new zl(h,a,d,e.opacity)}function gx(e,t,r,s){return arguments.length===1?Fv(e):new zl(e,t,r,s??1)}function zl(e,t,r,s){this.h=+e,this.s=+t,this.l=+r,this.opacity=+s}Dg(zl,gx,Ev(cd,{brighter(e){return e=e==null?vp:Math.pow(vp,e),new zl(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Zf:Math.pow(Zf,e),new zl(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,s=r+(r<.5?r:1-r)*t,l=2*r-s;return new _A(Em(e>=240?e-240:e+120,l,s),Em(e,l,s),Em(e<120?e+240:e-120,l,s),this.opacity)},clamp(){return new zl(T0(this.h),Zd(this.s),Zd(this.l),wp(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=wp(this.opacity);return`${e===1?"hsl(":"hsla("}${T0(this.h)}, ${Zd(this.s)*100}%, ${Zd(this.l)*100}%${e===1?")":`, ${e})`}`}}));function T0(e){return e=(e||0)%360,e<0?e+360:e}function Zd(e){return Math.max(0,Math.min(1,e||0))}function Em(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const Ng=e=>()=>e;function yx(e,t){return function(r){return e+r*t}}function vx(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(s){return Math.pow(e+s*t,r)}}function _x(e){return(e=+e)==1?Sv:function(t,r){return r-t?vx(t,r,e):Ng(isNaN(t)?r:t)}}function Sv(e,t){var r=t-e;return r?yx(e,r):Ng(isNaN(e)?t:e)}const bp=function e(t){var r=_x(t);function s(l,c){var h=r((l=_p(l)).r,(c=_p(c)).r),a=r(l.g,c.g),d=r(l.b,c.b),_=Sv(l.opacity,c.opacity);return function(p){return l.r=h(p),l.g=a(p),l.b=d(p),l.opacity=_(p),l+""}}return s.gamma=e,s}(1);function wx(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,s=t.slice(),l;return function(c){for(l=0;l<r;++l)s[l]=e[l]*(1-c)+t[l]*c;return s}}function bx(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function xx(e,t){var r=t?t.length:0,s=e?Math.min(r,e.length):0,l=new Array(s),c=new Array(r),h;for(h=0;h<s;++h)l[h]=jg(e[h],t[h]);for(;h<r;++h)c[h]=t[h];return function(a){for(h=0;h<s;++h)c[h]=l[h](a);return c}}function Bx(e,t){var r=new Date;return e=+e,t=+t,function(s){return r.setTime(e*(1-s)+t*s),r}}function Ol(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function Cx(e,t){var r={},s={},l;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(l in t)l in e?r[l]=jg(e[l],t[l]):s[l]=t[l];return function(c){for(l in r)s[l]=r[l](c);return s}}var ig=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Fm=new RegExp(ig.source,"g");function Ex(e){return function(){return e}}function Fx(e){return function(t){return e(t)+""}}function Iv(e,t){var r=ig.lastIndex=Fm.lastIndex=0,s,l,c,h=-1,a=[],d=[];for(e=e+"",t=t+"";(s=ig.exec(e))&&(l=Fm.exec(t));)(c=l.index)>r&&(c=t.slice(r,c),a[h]?a[h]+=c:a[++h]=c),(s=s[0])===(l=l[0])?a[h]?a[h]+=l:a[++h]=l:(a[++h]=null,d.push({i:h,x:Ol(s,l)})),r=Fm.lastIndex;return r<t.length&&(c=t.slice(r),a[h]?a[h]+=c:a[++h]=c),a.length<2?d[0]?Fx(d[0].x):Ex(t):(t=d.length,function(_){for(var p=0,E;p<t;++p)a[(E=d[p]).i]=E.x(_);return a.join("")})}function jg(e,t){var r=typeof t,s;return t==null||r==="boolean"?Ng(t):(r==="number"?Ol:r==="string"?(s=Yu(t))?(t=s,bp):Iv:t instanceof Yu?bp:t instanceof Date?Bx:bx(t)?wx:Array.isArray(t)?xx:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Cx:Ol)(e,t)}function Sx(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}var U0=180/Math.PI,sg={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Tv(e,t,r,s,l,c){var h,a,d;return(h=Math.sqrt(e*e+t*t))&&(e/=h,t/=h),(d=e*r+t*s)&&(r-=e*d,s-=t*d),(a=Math.sqrt(r*r+s*s))&&(r/=a,s/=a,d/=a),e*s<t*r&&(e=-e,t=-t,d=-d,h=-h),{translateX:l,translateY:c,rotate:Math.atan2(t,e)*U0,skewX:Math.atan(d)*U0,scaleX:h,scaleY:a}}var Jd;function Ix(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?sg:Tv(t.a,t.b,t.c,t.d,t.e,t.f)}function Tx(e){return e==null||(Jd||(Jd=document.createElementNS("http://www.w3.org/2000/svg","g")),Jd.setAttribute("transform",e),!(e=Jd.transform.baseVal.consolidate()))?sg:(e=e.matrix,Tv(e.a,e.b,e.c,e.d,e.e,e.f))}function Uv(e,t,r,s){function l(_){return _.length?_.pop()+" ":""}function c(_,p,E,w,x,Q){if(_!==E||p!==w){var k=x.push("translate(",null,t,null,r);Q.push({i:k-4,x:Ol(_,E)},{i:k-2,x:Ol(p,w)})}else(E||w)&&x.push("translate("+E+t+w+r)}function h(_,p,E,w){_!==p?(_-p>180?p+=360:p-_>180&&(_+=360),w.push({i:E.push(l(E)+"rotate(",null,s)-2,x:Ol(_,p)})):p&&E.push(l(E)+"rotate("+p+s)}function a(_,p,E,w){_!==p?w.push({i:E.push(l(E)+"skewX(",null,s)-2,x:Ol(_,p)}):p&&E.push(l(E)+"skewX("+p+s)}function d(_,p,E,w,x,Q){if(_!==E||p!==w){var k=x.push(l(x)+"scale(",null,",",null,")");Q.push({i:k-4,x:Ol(_,E)},{i:k-2,x:Ol(p,w)})}else(E!==1||w!==1)&&x.push(l(x)+"scale("+E+","+w+")")}return function(_,p){var E=[],w=[];return _=e(_),p=e(p),c(_.translateX,_.translateY,p.translateX,p.translateY,E,w),h(_.rotate,p.rotate,E,w),a(_.skewX,p.skewX,E,w),d(_.scaleX,_.scaleY,p.scaleX,p.scaleY,E,w),_=p=null,function(x){for(var Q=-1,k=w.length,R;++Q<k;)E[(R=w[Q]).i]=R.x(x);return E.join("")}}}var Ux=Uv(Ix,"px, ","px)","deg)"),Lx=Uv(Tx,", ",")",")"),Xh=0,jf=0,Tf=0,Lv=1e3,xp,Rf,Bp=0,$u=0,Dp=0,Yf=typeof performance=="object"&&performance.now?performance:Date,kv=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Rg(){return $u||(kv(kx),$u=Yf.now()+Dp)}function kx(){$u=0}function Cp(){this._call=this._time=this._next=null}Cp.prototype=Qv.prototype={constructor:Cp,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?Rg():+r)+(t==null?0:+t),!this._next&&Rf!==this&&(Rf?Rf._next=this:xp=this,Rf=this),this._call=e,this._time=r,ag()},stop:function(){this._call&&(this._call=null,this._time=1/0,ag())}};function Qv(e,t,r){var s=new Cp;return s.restart(e,t,r),s}function Qx(){Rg(),++Xh;for(var e=xp,t;e;)(t=$u-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Xh}function L0(){$u=(Bp=Yf.now())+Dp,Xh=jf=0;try{Qx()}finally{Xh=0,Mx(),$u=0}}function Px(){var e=Yf.now(),t=e-Bp;t>Lv&&(Dp-=t,Bp=e)}function Mx(){for(var e,t=xp,r,s=1/0;t;)t._call?(s>t._time&&(s=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:xp=r);Rf=e,ag(s)}function ag(e){if(!Xh){jf&&(jf=clearTimeout(jf));var t=e-$u;t>24?(e<1/0&&(jf=setTimeout(L0,e-Yf.now()-Dp)),Tf&&(Tf=clearInterval(Tf))):(Tf||(Bp=Yf.now(),Tf=setInterval(Px,Lv)),Xh=1,kv(L0))}}function k0(e,t,r){var s=new Cp;return t=t==null?0:+t,s.restart(l=>{s.stop(),e(l+t)},t,r),s}var Dx=hv("start","end","cancel","interrupt"),Nx=[],Pv=0,Q0=1,og=2,hp=3,P0=4,Ag=5,fp=6;function Np(e,t,r,s,l,c){var h=e.__transition;if(!h)e.__transition={};else if(r in h)return;jx(e,r,{name:t,index:s,group:l,on:Dx,tween:Nx,time:c.time,delay:c.delay,duration:c.duration,ease:c.ease,timer:null,state:Pv})}function Og(e,t){var r=Kl(e,t);if(r.state>Pv)throw new Error("too late; already scheduled");return r}function gc(e,t){var r=Kl(e,t);if(r.state>hp)throw new Error("too late; already running");return r}function Kl(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function jx(e,t,r){var s=e.__transition,l;s[t]=r,r.timer=Qv(c,0,r.time);function c(_){r.state=Q0,r.timer.restart(h,r.delay,r.time),r.delay<=_&&h(_-r.delay)}function h(_){var p,E,w,x;if(r.state!==Q0)return d();for(p in s)if(x=s[p],x.name===r.name){if(x.state===hp)return k0(h);x.state===P0?(x.state=fp,x.timer.stop(),x.on.call("interrupt",e,e.__data__,x.index,x.group),delete s[p]):+p<t&&(x.state=fp,x.timer.stop(),x.on.call("cancel",e,e.__data__,x.index,x.group),delete s[p])}if(k0(function(){r.state===hp&&(r.state=P0,r.timer.restart(a,r.delay,r.time),a(_))}),r.state=og,r.on.call("start",e,e.__data__,r.index,r.group),r.state===og){for(r.state=hp,l=new Array(w=r.tween.length),p=0,E=-1;p<w;++p)(x=r.tween[p].value.call(e,e.__data__,r.index,r.group))&&(l[++E]=x);l.length=E+1}}function a(_){for(var p=_<r.duration?r.ease.call(null,_/r.duration):(r.timer.restart(d),r.state=Ag,1),E=-1,w=l.length;++E<w;)l[E].call(e,p);r.state===Ag&&(r.on.call("end",e,e.__data__,r.index,r.group),d())}function d(){r.state=fp,r.timer.stop(),delete s[t];for(var _ in s)return;delete e.__transition}}function Rx(e,t){var r=e.__transition,s,l,c=!0,h;if(r){t=t==null?null:t+"";for(h in r){if((s=r[h]).name!==t){c=!1;continue}l=s.state>og&&s.state<Ag,s.state=fp,s.timer.stop(),s.on.call(l?"interrupt":"cancel",e,e.__data__,s.index,s.group),delete r[h]}c&&delete e.__transition}}function Ox(e){return this.each(function(){Rx(this,e)})}function Hx(e,t){var r,s;return function(){var l=gc(this,e),c=l.tween;if(c!==r){s=r=c;for(var h=0,a=s.length;h<a;++h)if(s[h].name===t){s=s.slice(),s.splice(h,1);break}}l.tween=s}}function zx(e,t,r){var s,l;if(typeof r!="function")throw new Error;return function(){var c=gc(this,e),h=c.tween;if(h!==s){l=(s=h).slice();for(var a={name:t,value:r},d=0,_=l.length;d<_;++d)if(l[d].name===t){l[d]=a;break}d===_&&l.push(a)}c.tween=l}}function Vx(e,t){var r=this._id;if(e+="",arguments.length<2){for(var s=Kl(this.node(),r).tween,l=0,c=s.length,h;l<c;++l)if((h=s[l]).name===e)return h.value;return null}return this.each((t==null?Hx:zx)(r,e,t))}function Hg(e,t,r){var s=e._id;return e.each(function(){var l=gc(this,s);(l.value||(l.value={}))[t]=r.apply(this,arguments)}),function(l){return Kl(l,s).value[t]}}function Mv(e,t){var r;return(typeof t=="number"?Ol:t instanceof Yu?bp:(r=Yu(t))?(t=r,bp):Iv)(e,t)}function Kx(e){return function(){this.removeAttribute(e)}}function Gx(e){return function(){this.removeAttributeNS(e.space,e.local)}}function qx(e,t,r){var s,l=r+"",c;return function(){var h=this.getAttribute(e);return h===l?null:h===s?c:c=t(s=h,r)}}function Wx(e,t,r){var s,l=r+"",c;return function(){var h=this.getAttributeNS(e.space,e.local);return h===l?null:h===s?c:c=t(s=h,r)}}function Xx(e,t,r){var s,l,c;return function(){var h,a=r(this),d;return a==null?void this.removeAttribute(e):(h=this.getAttribute(e),d=a+"",h===d?null:h===s&&d===l?c:(l=d,c=t(s=h,a)))}}function Zx(e,t,r){var s,l,c;return function(){var h,a=r(this),d;return a==null?void this.removeAttributeNS(e.space,e.local):(h=this.getAttributeNS(e.space,e.local),d=a+"",h===d?null:h===s&&d===l?c:(l=d,c=t(s=h,a)))}}function Jx(e,t){var r=Mp(e),s=r==="transform"?Lx:Mv;return this.attrTween(e,typeof t=="function"?(r.local?Zx:Xx)(r,s,Hg(this,"attr."+e,t)):t==null?(r.local?Gx:Kx)(r):(r.local?Wx:qx)(r,s,t))}function Yx(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function $x(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function eB(e,t){var r,s;function l(){var c=t.apply(this,arguments);return c!==s&&(r=(s=c)&&$x(e,c)),r}return l._value=t,l}function tB(e,t){var r,s;function l(){var c=t.apply(this,arguments);return c!==s&&(r=(s=c)&&Yx(e,c)),r}return l._value=t,l}function rB(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var s=Mp(e);return this.tween(r,(s.local?eB:tB)(s,t))}function nB(e,t){return function(){Og(this,e).delay=+t.apply(this,arguments)}}function iB(e,t){return t=+t,function(){Og(this,e).delay=t}}function sB(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?nB:iB)(t,e)):Kl(this.node(),t).delay}function aB(e,t){return function(){gc(this,e).duration=+t.apply(this,arguments)}}function oB(e,t){return t=+t,function(){gc(this,e).duration=t}}function AB(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?aB:oB)(t,e)):Kl(this.node(),t).duration}function lB(e,t){if(typeof t!="function")throw new Error;return function(){gc(this,e).ease=t}}function cB(e){var t=this._id;return arguments.length?this.each(lB(t,e)):Kl(this.node(),t).ease}function uB(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;gc(this,e).ease=r}}function hB(e){if(typeof e!="function")throw new Error;return this.each(uB(this._id,e))}function fB(e){typeof e!="function"&&(e=mv(e));for(var t=this._groups,r=t.length,s=new Array(r),l=0;l<r;++l)for(var c=t[l],h=c.length,a=s[l]=[],d,_=0;_<h;++_)(d=c[_])&&e.call(d,d.__data__,_,c)&&a.push(d);return new Rc(s,this._parents,this._name,this._id)}function dB(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,s=t.length,l=r.length,c=Math.min(s,l),h=new Array(s),a=0;a<c;++a)for(var d=t[a],_=r[a],p=d.length,E=h[a]=new Array(p),w,x=0;x<p;++x)(w=d[x]||_[x])&&(E[x]=w);for(;a<s;++a)h[a]=t[a];return new Rc(h,this._parents,this._name,this._id)}function pB(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function mB(e,t,r){var s,l,c=pB(t)?Og:gc;return function(){var h=c(this,e),a=h.on;a!==s&&(l=(s=a).copy()).on(t,r),h.on=l}}function gB(e,t){var r=this._id;return arguments.length<2?Kl(this.node(),r).on.on(e):this.each(mB(r,e,t))}function yB(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function vB(){return this.on("end.remove",yB(this._id))}function _B(e){var t=this._name,r=this._id;typeof e!="function"&&(e=Qg(e));for(var s=this._groups,l=s.length,c=new Array(l),h=0;h<l;++h)for(var a=s[h],d=a.length,_=c[h]=new Array(d),p,E,w=0;w<d;++w)(p=a[w])&&(E=e.call(p,p.__data__,w,a))&&("__data__"in p&&(E.__data__=p.__data__),_[w]=E,Np(_[w],t,r,w,_,Kl(p,r)));return new Rc(c,this._parents,t,r)}function wB(e){var t=this._name,r=this._id;typeof e!="function"&&(e=pv(e));for(var s=this._groups,l=s.length,c=[],h=[],a=0;a<l;++a)for(var d=s[a],_=d.length,p,E=0;E<_;++E)if(p=d[E]){for(var w=e.call(p,p.__data__,E,d),x,Q=Kl(p,r),k=0,R=w.length;k<R;++k)(x=w[k])&&Np(x,t,r,k,w,Q);c.push(w),h.push(p)}return new Rc(c,h,t,r)}var bB=ld.prototype.constructor;function xB(){return new bB(this._groups,this._parents)}function BB(e,t){var r,s,l;return function(){var c=Wh(this,e),h=(this.style.removeProperty(e),Wh(this,e));return c===h?null:c===r&&h===s?l:l=t(r=c,s=h)}}function Dv(e){return function(){this.style.removeProperty(e)}}function CB(e,t,r){var s,l=r+"",c;return function(){var h=Wh(this,e);return h===l?null:h===s?c:c=t(s=h,r)}}function EB(e,t,r){var s,l,c;return function(){var h=Wh(this,e),a=r(this),d=a+"";return a==null&&(d=a=(this.style.removeProperty(e),Wh(this,e))),h===d?null:h===s&&d===l?c:(l=d,c=t(s=h,a))}}function FB(e,t){var r,s,l,c="style."+t,h="end."+c,a;return function(){var d=gc(this,e),_=d.on,p=d.value[c]==null?a||(a=Dv(t)):void 0;(_!==r||l!==p)&&(s=(r=_).copy()).on(h,l=p),d.on=s}}function SB(e,t,r){var s=(e+="")=="transform"?Ux:Mv;return t==null?this.styleTween(e,BB(e,s)).on("end.style."+e,Dv(e)):typeof t=="function"?this.styleTween(e,EB(e,s,Hg(this,"style."+e,t))).each(FB(this._id,e)):this.styleTween(e,CB(e,s,t),r).on("end.style."+e,null)}function IB(e,t,r){return function(s){this.style.setProperty(e,t.call(this,s),r)}}function TB(e,t,r){var s,l;function c(){var h=t.apply(this,arguments);return h!==l&&(s=(l=h)&&IB(e,h,r)),s}return c._value=t,c}function UB(e,t,r){var s="style."+(e+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(t==null)return this.tween(s,null);if(typeof t!="function")throw new Error;return this.tween(s,TB(e,t,r??""))}function LB(e){return function(){this.textContent=e}}function kB(e){return function(){var t=e(this);this.textContent=t??""}}function QB(e){return this.tween("text",typeof e=="function"?kB(Hg(this,"text",e)):LB(e==null?"":e+""))}function PB(e){return function(t){this.textContent=e.call(this,t)}}function MB(e){var t,r;function s(){var l=e.apply(this,arguments);return l!==r&&(t=(r=l)&&PB(l)),t}return s._value=e,s}function DB(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,MB(e))}function NB(){for(var e=this._name,t=this._id,r=Nv(),s=this._groups,l=s.length,c=0;c<l;++c)for(var h=s[c],a=h.length,d,_=0;_<a;++_)if(d=h[_]){var p=Kl(d,t);Np(d,e,r,_,h,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new Rc(s,this._parents,e,r)}function jB(){var e,t,r=this,s=r._id,l=r.size();return new Promise(function(c,h){var a={value:h},d={value:function(){--l===0&&c()}};r.each(function(){var _=gc(this,s),p=_.on;p!==e&&(t=(e=p).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(d)),_.on=t}),l===0&&c()})}var RB=0;function Rc(e,t,r,s){this._groups=e,this._parents=t,this._name=r,this._id=s}function Nv(){return++RB}var Dc=ld.prototype;Rc.prototype={constructor:Rc,select:_B,selectAll:wB,selectChild:Dc.selectChild,selectChildren:Dc.selectChildren,filter:fB,merge:dB,selection:xB,transition:NB,call:Dc.call,nodes:Dc.nodes,node:Dc.node,size:Dc.size,empty:Dc.empty,each:Dc.each,on:gB,attr:Jx,attrTween:rB,style:SB,styleTween:UB,text:QB,textTween:DB,remove:vB,tween:Vx,delay:sB,duration:AB,ease:cB,easeVarying:hB,end:jB,[Symbol.iterator]:Dc[Symbol.iterator]};function OB(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var HB={time:null,delay:0,duration:250,ease:OB};function zB(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function VB(e){var t,r;e instanceof Rc?(t=e._id,e=e._name):(t=Nv(),(r=HB).time=Rg(),e=e==null?null:e+"");for(var s=this._groups,l=s.length,c=0;c<l;++c)for(var h=s[c],a=h.length,d,_=0;_<a;++_)(d=h[_])&&Np(d,e,t,_,h,r||zB(d,t));return new Rc(s,this._parents,e,t)}ld.prototype.interrupt=Ox;ld.prototype.transition=VB;function KB(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function GB(e,t){return fetch(e,t).then(KB)}function qB(e){return function(t,r,s){return arguments.length===2&&typeof r=="function"&&(s=r,r=void 0),GB(t,r).then(function(l){return e(l,s)})}}var pl=qB(iv);function WB(e){const t=+this._x.call(null,e),r=+this._y.call(null,e);return jv(this.cover(t,r),t,r,e)}function jv(e,t,r,s){if(isNaN(t)||isNaN(r))return e;var l,c=e._root,h={data:s},a=e._x0,d=e._y0,_=e._x1,p=e._y1,E,w,x,Q,k,R,P,O;if(!c)return e._root=h,e;for(;c.length;)if((k=t>=(E=(a+_)/2))?a=E:_=E,(R=r>=(w=(d+p)/2))?d=w:p=w,l=c,!(c=c[P=R<<1|k]))return l[P]=h,e;if(x=+e._x.call(null,c.data),Q=+e._y.call(null,c.data),t===x&&r===Q)return h.next=c,l?l[P]=h:e._root=h,e;do l=l?l[P]=new Array(4):e._root=new Array(4),(k=t>=(E=(a+_)/2))?a=E:_=E,(R=r>=(w=(d+p)/2))?d=w:p=w;while((P=R<<1|k)===(O=(Q>=w)<<1|x>=E));return l[O]=c,l[P]=h,e}function XB(e){var t,r,s=e.length,l,c,h=new Array(s),a=new Array(s),d=1/0,_=1/0,p=-1/0,E=-1/0;for(r=0;r<s;++r)isNaN(l=+this._x.call(null,t=e[r]))||isNaN(c=+this._y.call(null,t))||(h[r]=l,a[r]=c,l<d&&(d=l),l>p&&(p=l),c<_&&(_=c),c>E&&(E=c));if(d>p||_>E)return this;for(this.cover(d,_).cover(p,E),r=0;r<s;++r)jv(this,h[r],a[r],e[r]);return this}function ZB(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var r=this._x0,s=this._y0,l=this._x1,c=this._y1;if(isNaN(r))l=(r=Math.floor(e))+1,c=(s=Math.floor(t))+1;else{for(var h=l-r||1,a=this._root,d,_;r>e||e>=l||s>t||t>=c;)switch(_=(t<s)<<1|e<r,d=new Array(4),d[_]=a,a=d,h*=2,_){case 0:l=r+h,c=s+h;break;case 1:r=l-h,c=s+h;break;case 2:l=r+h,s=c-h;break;case 3:r=l-h,s=c-h;break}this._root&&this._root.length&&(this._root=a)}return this._x0=r,this._y0=s,this._x1=l,this._y1=c,this}function JB(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function YB(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Zo(e,t,r,s,l){this.node=e,this.x0=t,this.y0=r,this.x1=s,this.y1=l}function $B(e,t,r){var s,l=this._x0,c=this._y0,h,a,d,_,p=this._x1,E=this._y1,w=[],x=this._root,Q,k;for(x&&w.push(new Zo(x,l,c,p,E)),r==null?r=1/0:(l=e-r,c=t-r,p=e+r,E=t+r,r*=r);Q=w.pop();)if(!(!(x=Q.node)||(h=Q.x0)>p||(a=Q.y0)>E||(d=Q.x1)<l||(_=Q.y1)<c))if(x.length){var R=(h+d)/2,P=(a+_)/2;w.push(new Zo(x[3],R,P,d,_),new Zo(x[2],h,P,R,_),new Zo(x[1],R,a,d,P),new Zo(x[0],h,a,R,P)),(k=(t>=P)<<1|e>=R)&&(Q=w[w.length-1],w[w.length-1]=w[w.length-1-k],w[w.length-1-k]=Q)}else{var O=e-+this._x.call(null,x.data),G=t-+this._y.call(null,x.data),V=O*O+G*G;if(V<r){var Z=Math.sqrt(r=V);l=e-Z,c=t-Z,p=e+Z,E=t+Z,s=x.data}}return s}function e5(e){if(isNaN(p=+this._x.call(null,e))||isNaN(E=+this._y.call(null,e)))return this;var t,r=this._root,s,l,c,h=this._x0,a=this._y0,d=this._x1,_=this._y1,p,E,w,x,Q,k,R,P;if(!r)return this;if(r.length)for(;;){if((Q=p>=(w=(h+d)/2))?h=w:d=w,(k=E>=(x=(a+_)/2))?a=x:_=x,t=r,!(r=r[R=k<<1|Q]))return this;if(!r.length)break;(t[R+1&3]||t[R+2&3]||t[R+3&3])&&(s=t,P=R)}for(;r.data!==e;)if(l=r,!(r=r.next))return this;return(c=r.next)&&delete r.next,l?(c?l.next=c:delete l.next,this):t?(c?t[R]=c:delete t[R],(r=t[0]||t[1]||t[2]||t[3])&&r===(t[3]||t[2]||t[1]||t[0])&&!r.length&&(s?s[P]=r:this._root=r),this):(this._root=c,this)}function t5(e){for(var t=0,r=e.length;t<r;++t)this.remove(e[t]);return this}function r5(){return this._root}function n5(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function i5(e){var t=[],r,s=this._root,l,c,h,a,d;for(s&&t.push(new Zo(s,this._x0,this._y0,this._x1,this._y1));r=t.pop();)if(!e(s=r.node,c=r.x0,h=r.y0,a=r.x1,d=r.y1)&&s.length){var _=(c+a)/2,p=(h+d)/2;(l=s[3])&&t.push(new Zo(l,_,p,a,d)),(l=s[2])&&t.push(new Zo(l,c,p,_,d)),(l=s[1])&&t.push(new Zo(l,_,h,a,p)),(l=s[0])&&t.push(new Zo(l,c,h,_,p))}return this}function s5(e){var t=[],r=[],s;for(this._root&&t.push(new Zo(this._root,this._x0,this._y0,this._x1,this._y1));s=t.pop();){var l=s.node;if(l.length){var c,h=s.x0,a=s.y0,d=s.x1,_=s.y1,p=(h+d)/2,E=(a+_)/2;(c=l[0])&&t.push(new Zo(c,h,a,p,E)),(c=l[1])&&t.push(new Zo(c,p,a,d,E)),(c=l[2])&&t.push(new Zo(c,h,E,p,_)),(c=l[3])&&t.push(new Zo(c,p,E,d,_))}r.push(s)}for(;s=r.pop();)e(s.node,s.x0,s.y0,s.x1,s.y1);return this}function a5(e){return e[0]}function o5(e){return arguments.length?(this._x=e,this):this._x}function A5(e){return e[1]}function l5(e){return arguments.length?(this._y=e,this):this._y}function Rv(e,t,r){var s=new zg(t??a5,r??A5,NaN,NaN,NaN,NaN);return e==null?s:s.addAll(e)}function zg(e,t,r,s,l,c){this._x=e,this._y=t,this._x0=r,this._y0=s,this._x1=l,this._y1=c,this._root=void 0}function M0(e){for(var t={data:e.data},r=t;e=e.next;)r=r.next={data:e.data};return t}var rA=Rv.prototype=zg.prototype;rA.copy=function(){var e=new zg(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,r,s;if(!t)return e;if(!t.length)return e._root=M0(t),e;for(r=[{source:t,target:e._root=new Array(4)}];t=r.pop();)for(var l=0;l<4;++l)(s=t.source[l])&&(s.length?r.push({source:s,target:t.target[l]=new Array(4)}):t.target[l]=M0(s));return e};rA.add=WB;rA.addAll=XB;rA.cover=ZB;rA.data=JB;rA.extent=YB;rA.find=$B;rA.remove=e5;rA.removeAll=t5;rA.root=r5;rA.size=n5;rA.visit=i5;rA.visitAfter=s5;rA.x=o5;rA.y=l5;function c5(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Ep(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,s=e.slice(0,r);return[s.length>1?s[0]+s.slice(2):s,+e.slice(r+1)]}function Zh(e){return e=Ep(Math.abs(e)),e?e[1]:NaN}function u5(e,t){return function(r,s){for(var l=r.length,c=[],h=0,a=e[0],d=0;l>0&&a>0&&(d+a+1>s&&(a=Math.max(1,s-d)),c.push(r.substring(l-=a,l+a)),!((d+=a+1)>s));)a=e[h=(h+1)%e.length];return c.reverse().join(t)}}function h5(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var f5=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Fp(e){if(!(t=f5.exec(e)))throw new Error("invalid format: "+e);var t;return new Vg({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Fp.prototype=Vg.prototype;function Vg(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Vg.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function d5(e){e:for(var t=e.length,r=1,s=-1,l;r<t;++r)switch(e[r]){case".":s=l=r;break;case"0":s===0&&(s=r),l=r;break;default:if(!+e[r])break e;s>0&&(s=0);break}return s>0?e.slice(0,s)+e.slice(l+1):e}var Ov;function p5(e,t){var r=Ep(e,t);if(!r)return e+"";var s=r[0],l=r[1],c=l-(Ov=Math.max(-8,Math.min(8,Math.floor(l/3)))*3)+1,h=s.length;return c===h?s:c>h?s+new Array(c-h+1).join("0"):c>0?s.slice(0,c)+"."+s.slice(c):"0."+new Array(1-c).join("0")+Ep(e,Math.max(0,t+c-1))[0]}function D0(e,t){var r=Ep(e,t);if(!r)return e+"";var s=r[0],l=r[1];return l<0?"0."+new Array(-l).join("0")+s:s.length>l+1?s.slice(0,l+1)+"."+s.slice(l+1):s+new Array(l-s.length+2).join("0")}const N0={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:c5,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>D0(e*100,t),r:D0,s:p5,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function j0(e){return e}var R0=Array.prototype.map,O0=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function m5(e){var t=e.grouping===void 0||e.thousands===void 0?j0:u5(R0.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",s=e.currency===void 0?"":e.currency[1]+"",l=e.decimal===void 0?".":e.decimal+"",c=e.numerals===void 0?j0:h5(R0.call(e.numerals,String)),h=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"−":e.minus+"",d=e.nan===void 0?"NaN":e.nan+"";function _(E){E=Fp(E);var w=E.fill,x=E.align,Q=E.sign,k=E.symbol,R=E.zero,P=E.width,O=E.comma,G=E.precision,V=E.trim,Z=E.type;Z==="n"?(O=!0,Z="g"):N0[Z]||(G===void 0&&(G=12),V=!0,Z="g"),(R||w==="0"&&x==="=")&&(R=!0,w="0",x="=");var te=k==="$"?r:k==="#"&&/[boxX]/.test(Z)?"0"+Z.toLowerCase():"",ce=k==="$"?s:/[%p]/.test(Z)?h:"",he=N0[Z],Ce=/[defgprs%]/.test(Z);G=G===void 0?6:/[gprs]/.test(Z)?Math.max(1,Math.min(21,G)):Math.max(0,Math.min(20,G));function fe(ee){var re=te,be=ce,me,Re,_e;if(Z==="c")be=he(ee)+be,ee="";else{ee=+ee;var He=ee<0||1/ee<0;if(ee=isNaN(ee)?d:he(Math.abs(ee),G),V&&(ee=d5(ee)),He&&+ee==0&&Q!=="+"&&(He=!1),re=(He?Q==="("?Q:a:Q==="-"||Q==="("?"":Q)+re,be=(Z==="s"?O0[8+Ov/3]:"")+be+(He&&Q==="("?")":""),Ce){for(me=-1,Re=ee.length;++me<Re;)if(_e=ee.charCodeAt(me),48>_e||_e>57){be=(_e===46?l+ee.slice(me+1):ee.slice(me))+be,ee=ee.slice(0,me);break}}}O&&!R&&(ee=t(ee,1/0));var Le=re.length+ee.length+be.length,Je=Le<P?new Array(P-Le+1).join(w):"";switch(O&&R&&(ee=t(Je+ee,Je.length?P-be.length:1/0),Je=""),x){case"<":ee=re+ee+be+Je;break;case"=":ee=re+Je+ee+be;break;case"^":ee=Je.slice(0,Le=Je.length>>1)+re+ee+be+Je.slice(Le);break;default:ee=Je+re+ee+be;break}return c(ee)}return fe.toString=function(){return E+""},fe}function p(E,w){var x=_((E=Fp(E),E.type="f",E)),Q=Math.max(-8,Math.min(8,Math.floor(Zh(w)/3)))*3,k=Math.pow(10,-Q),R=O0[8+Q/3];return function(P){return x(k*P)+R}}return{format:_,formatPrefix:p}}var Yd,Kg,Hv;g5({thousands:",",grouping:[3],currency:["$",""]});function g5(e){return Yd=m5(e),Kg=Yd.format,Hv=Yd.formatPrefix,Yd}function y5(e){return Math.max(0,-Zh(Math.abs(e)))}function v5(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Zh(t)/3)))*3-Zh(Math.abs(e)))}function _5(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Zh(t)-Zh(e))+1}function w5(e){var t=0,r=e.children,s=r&&r.length;if(!s)t=1;else for(;--s>=0;)t+=r[s].value;e.value=t}function b5(){return this.eachAfter(w5)}function x5(e,t){let r=-1;for(const s of this)e.call(t,s,++r,this);return this}function B5(e,t){for(var r=this,s=[r],l,c,h=-1;r=s.pop();)if(e.call(t,r,++h,this),l=r.children)for(c=l.length-1;c>=0;--c)s.push(l[c]);return this}function C5(e,t){for(var r=this,s=[r],l=[],c,h,a,d=-1;r=s.pop();)if(l.push(r),c=r.children)for(h=0,a=c.length;h<a;++h)s.push(c[h]);for(;r=l.pop();)e.call(t,r,++d,this);return this}function E5(e,t){let r=-1;for(const s of this)if(e.call(t,s,++r,this))return s}function F5(e){return this.eachAfter(function(t){for(var r=+e(t.data)||0,s=t.children,l=s&&s.length;--l>=0;)r+=s[l].value;t.value=r})}function S5(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function I5(e){for(var t=this,r=T5(t,e),s=[t];t!==r;)t=t.parent,s.push(t);for(var l=s.length;e!==r;)s.splice(l,0,e),e=e.parent;return s}function T5(e,t){if(e===t)return e;var r=e.ancestors(),s=t.ancestors(),l=null;for(e=r.pop(),t=s.pop();e===t;)l=e,e=r.pop(),t=s.pop();return l}function U5(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function L5(){return Array.from(this)}function k5(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Q5(){var e=this,t=[];return e.each(function(r){r!==e&&t.push({source:r.parent,target:r})}),t}function*P5(){var e=this,t,r=[e],s,l,c;do for(t=r.reverse(),r=[];e=t.pop();)if(yield e,s=e.children)for(l=0,c=s.length;l<c;++l)r.push(s[l]);while(r.length)}function Gg(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=N5)):t===void 0&&(t=D5);for(var r=new $f(e),s,l=[r],c,h,a,d;s=l.pop();)if((h=t(s.data))&&(d=(h=Array.from(h)).length))for(s.children=h,a=d-1;a>=0;--a)l.push(c=h[a]=new $f(h[a])),c.parent=s,c.depth=s.depth+1;return r.eachBefore(zv)}function M5(){return Gg(this).eachBefore(j5)}function D5(e){return e.children}function N5(e){return Array.isArray(e)?e[1]:null}function j5(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function zv(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function $f(e){this.data=e,this.depth=this.height=0,this.parent=null}$f.prototype=Gg.prototype={constructor:$f,count:b5,each:x5,eachAfter:C5,eachBefore:B5,find:E5,sum:F5,sort:S5,path:I5,ancestors:U5,descendants:L5,leaves:k5,links:Q5,copy:M5,[Symbol.iterator]:P5};function Sm(e){return e==null?null:Vv(e)}function Vv(e){if(typeof e!="function")throw new Error;return e}function Uf(){return 0}function Lf(e){return function(){return e}}function R5(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function O5(e,t,r,s,l){for(var c=e.children,h,a=-1,d=c.length,_=e.value&&(s-t)/e.value;++a<d;)h=c[a],h.y0=r,h.y1=l,h.x0=t,h.x1=t+=h.value*_}var H5={depth:-1},H0={},Im={};function z5(e){return e.id}function V5(e){return e.parentId}function K5(){var e=z5,t=V5,r;function s(l){var c=Array.from(l),h=e,a=t,d,_,p,E,w,x,Q,k,R=new Map;if(r!=null){const P=c.map((V,Z)=>G5(r(V,Z,l))),O=P.map(z0),G=new Set(P).add("");for(const V of O)G.has(V)||(G.add(V),P.push(V),O.push(z0(V)),c.push(Im));h=(V,Z)=>P[Z],a=(V,Z)=>O[Z]}for(p=0,d=c.length;p<d;++p)_=c[p],x=c[p]=new $f(_),(Q=h(_,p,l))!=null&&(Q+="")&&(k=x.id=Q,R.set(k,R.has(k)?H0:x)),(Q=a(_,p,l))!=null&&(Q+="")&&(x.parent=Q);for(p=0;p<d;++p)if(x=c[p],Q=x.parent){if(w=R.get(Q),!w)throw new Error("missing: "+Q);if(w===H0)throw new Error("ambiguous: "+Q);w.children?w.children.push(x):w.children=[x],x.parent=w}else{if(E)throw new Error("multiple roots");E=x}if(!E)throw new Error("no root");if(r!=null){for(;E.data===Im&&E.children.length===1;)E=E.children[0],--d;for(let P=c.length-1;P>=0&&(x=c[P],x.data===Im);--P)x.data=null}if(E.parent=H5,E.eachBefore(function(P){P.depth=P.parent.depth+1,--d}).eachBefore(zv),E.parent=null,d>0)throw new Error("cycle");return E}return s.id=function(l){return arguments.length?(e=Sm(l),s):e},s.parentId=function(l){return arguments.length?(t=Sm(l),s):t},s.path=function(l){return arguments.length?(r=Sm(l),s):r},s}function G5(e){e=`${e}`;let t=e.length;return lg(e,t-1)&&!lg(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function z0(e){let t=e.length;if(t<2)return"";for(;--t>1&&!lg(e,t););return e.slice(0,t)}function lg(e,t){if(e[t]==="/"){let r=0;for(;t>0&&e[--t]==="\\";)++r;if(!(r&1))return!0}return!1}function q5(e,t,r,s,l){for(var c=e.children,h,a=-1,d=c.length,_=e.value&&(l-r)/e.value;++a<d;)h=c[a],h.x0=t,h.x1=s,h.y0=r,h.y1=r+=h.value*_}var W5=(1+Math.sqrt(5))/2;function X5(e,t,r,s,l,c){for(var h=[],a=t.children,d,_,p=0,E=0,w=a.length,x,Q,k=t.value,R,P,O,G,V,Z,te;p<w;){x=l-r,Q=c-s;do R=a[E++].value;while(!R&&E<w);for(P=O=R,Z=Math.max(Q/x,x/Q)/(k*e),te=R*R*Z,V=Math.max(O/te,te/P);E<w;++E){if(R+=_=a[E].value,_<P&&(P=_),_>O&&(O=_),te=R*R*Z,G=Math.max(O/te,te/P),G>V){R-=_;break}V=G}h.push(d={value:R,dice:x<Q,children:a.slice(p,E)}),d.dice?O5(d,r,s,l,k?s+=Q*R/k:c):q5(d,r,s,k?r+=x*R/k:l,c),k-=R,p=E}return h}const Z5=function e(t){function r(s,l,c,h,a){X5(t,s,l,c,h,a)}return r.ratio=function(s){return e((s=+s)>1?s:1)},r}(W5);function V0(){var e=Z5,t=!1,r=1,s=1,l=[0],c=Uf,h=Uf,a=Uf,d=Uf,_=Uf;function p(w){return w.x0=w.y0=0,w.x1=r,w.y1=s,w.eachBefore(E),l=[0],t&&w.eachBefore(R5),w}function E(w){var x=l[w.depth],Q=w.x0+x,k=w.y0+x,R=w.x1-x,P=w.y1-x;R<Q&&(Q=R=(Q+R)/2),P<k&&(k=P=(k+P)/2),w.x0=Q,w.y0=k,w.x1=R,w.y1=P,w.children&&(x=l[w.depth+1]=c(w)/2,Q+=_(w)-x,k+=h(w)-x,R-=a(w)-x,P-=d(w)-x,R<Q&&(Q=R=(Q+R)/2),P<k&&(k=P=(k+P)/2),e(w,Q,k,R,P))}return p.round=function(w){return arguments.length?(t=!!w,p):t},p.size=function(w){return arguments.length?(r=+w[0],s=+w[1],p):[r,s]},p.tile=function(w){return arguments.length?(e=Vv(w),p):e},p.padding=function(w){return arguments.length?p.paddingInner(w).paddingOuter(w):p.paddingInner()},p.paddingInner=function(w){return arguments.length?(c=typeof w=="function"?w:Lf(+w),p):c},p.paddingOuter=function(w){return arguments.length?p.paddingTop(w).paddingRight(w).paddingBottom(w).paddingLeft(w):p.paddingTop()},p.paddingTop=function(w){return arguments.length?(h=typeof w=="function"?w:Lf(+w),p):h},p.paddingRight=function(w){return arguments.length?(a=typeof w=="function"?w:Lf(+w),p):a},p.paddingBottom=function(w){return arguments.length?(d=typeof w=="function"?w:Lf(+w),p):d},p.paddingLeft=function(w){return arguments.length?(_=typeof w=="function"?w:Lf(+w),p):_},p}function jp(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const K0=Symbol("implicit");function Sp(){var e=new Zm,t=[],r=[],s=K0;function l(c){let h=e.get(c);if(h===void 0){if(s!==K0)return s;e.set(c,h=t.push(c)-1)}return r[h%r.length]}return l.domain=function(c){if(!arguments.length)return t.slice();t=[],e=new Zm;for(const h of c)e.has(h)||e.set(h,t.push(h)-1);return l},l.range=function(c){return arguments.length?(r=Array.from(c),l):r.slice()},l.unknown=function(c){return arguments.length?(s=c,l):s},l.copy=function(){return Sp(t,r).unknown(s)},jp.apply(l,arguments),l}function eh(){var e=Sp().unknown(void 0),t=e.domain,r=e.range,s=0,l=1,c,h,a=!1,d=0,_=0,p=.5;delete e.unknown;function E(){var w=t().length,x=l<s,Q=x?l:s,k=x?s:l;c=(k-Q)/Math.max(1,w-d+_*2),a&&(c=Math.floor(c)),Q+=(k-Q-c*(w-d))*p,h=c*(1-d),a&&(Q=Math.round(Q),h=Math.round(h));var R=g2(w).map(function(P){return Q+c*P});return r(x?R.reverse():R)}return e.domain=function(w){return arguments.length?(t(w),E()):t()},e.range=function(w){return arguments.length?([s,l]=w,s=+s,l=+l,E()):[s,l]},e.rangeRound=function(w){return[s,l]=w,s=+s,l=+l,a=!0,E()},e.bandwidth=function(){return h},e.step=function(){return c},e.round=function(w){return arguments.length?(a=!!w,E()):a},e.padding=function(w){return arguments.length?(d=Math.min(1,_=+w),E()):d},e.paddingInner=function(w){return arguments.length?(d=Math.min(1,w),E()):d},e.paddingOuter=function(w){return arguments.length?(_=+w,E()):_},e.align=function(w){return arguments.length?(p=Math.max(0,Math.min(1,w)),E()):p},e.copy=function(){return eh(t(),[s,l]).round(a).paddingInner(d).paddingOuter(_).align(p)},jp.apply(E(),arguments)}function J5(e){return function(){return e}}function Y5(e){return+e}var G0=[0,1];function fc(e){return e}function cg(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:J5(isNaN(t)?NaN:.5)}function $5(e,t){var r;return e>t&&(r=e,e=t,t=r),function(s){return Math.max(e,Math.min(t,s))}}function eC(e,t,r){var s=e[0],l=e[1],c=t[0],h=t[1];return l<s?(s=cg(l,s),c=r(h,c)):(s=cg(s,l),c=r(c,h)),function(a){return c(s(a))}}function tC(e,t,r){var s=Math.min(e.length,t.length)-1,l=new Array(s),c=new Array(s),h=-1;for(e[s]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++h<s;)l[h]=cg(e[h],e[h+1]),c[h]=r(t[h],t[h+1]);return function(a){var d=o2(e,a,1,s)-1;return c[d](l[d](a))}}function Kv(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Gv(){var e=G0,t=G0,r=jg,s,l,c,h=fc,a,d,_;function p(){var w=Math.min(e.length,t.length);return h!==fc&&(h=$5(e[0],e[w-1])),a=w>2?tC:eC,d=_=null,E}function E(w){return w==null||isNaN(w=+w)?c:(d||(d=a(e.map(s),t,r)))(s(h(w)))}return E.invert=function(w){return h(l((_||(_=a(t,e.map(s),Ol)))(w)))},E.domain=function(w){return arguments.length?(e=Array.from(w,Y5),p()):e.slice()},E.range=function(w){return arguments.length?(t=Array.from(w),p()):t.slice()},E.rangeRound=function(w){return t=Array.from(w),r=Sx,p()},E.clamp=function(w){return arguments.length?(h=w?!0:fc,p()):h!==fc},E.interpolate=function(w){return arguments.length?(r=w,p()):r},E.unknown=function(w){return arguments.length?(c=w,E):c},function(w,x){return s=w,l=x,p()}}function rC(){return Gv()(fc,fc)}function nC(e,t,r,s){var l=m2(e,t,r),c;switch(s=Fp(s??",f"),s.type){case"s":{var h=Math.max(Math.abs(e),Math.abs(t));return s.precision==null&&!isNaN(c=v5(l,h))&&(s.precision=c),Hv(s,h)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(c=_5(l,Math.max(Math.abs(e),Math.abs(t))))&&(s.precision=c-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(c=y5(l))&&(s.precision=c-(s.type==="%")*2);break}}return Kg(s)}function qv(e){var t=e.domain;return e.ticks=function(r){var s=t();return p2(s[0],s[s.length-1],r??10)},e.tickFormat=function(r,s){var l=t();return nC(l[0],l[l.length-1],r??10,s)},e.nice=function(r){r==null&&(r=10);var s=t(),l=0,c=s.length-1,h=s[l],a=s[c],d,_,p=10;for(a<h&&(_=h,h=a,a=_,_=l,l=c,c=_);p-- >0;){if(_=uv(h,a,r),_===d)return s[l]=h,s[c]=a,t(s);if(_>0)h=Math.floor(h/_)*_,a=Math.ceil(a/_)*_;else if(_<0)h=Math.ceil(h*_)/_,a=Math.floor(a*_)/_;else break;d=_}return e},e}function wu(){var e=rC();return e.copy=function(){return Kv(e,wu())},jp.apply(e,arguments),qv(e)}function q0(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function iC(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function sC(e){return e<0?-e*e:e*e}function aC(e){var t=e(fc,fc),r=1;function s(){return r===1?e(fc,fc):r===.5?e(iC,sC):e(q0(r),q0(1/r))}return t.exponent=function(l){return arguments.length?(r=+l,s()):r},qv(t)}function Wv(){var e=aC(Gv());return e.copy=function(){return Kv(e,Wv()).exponent(e.exponent())},jp.apply(e,arguments),e}function oC(){return Wv.apply(null,arguments).exponent(.5)}const Tm=new Date,Um=new Date;function yc(e,t,r,s){function l(c){return e(c=arguments.length===0?new Date:new Date(+c)),c}return l.floor=c=>(e(c=new Date(+c)),c),l.ceil=c=>(e(c=new Date(c-1)),t(c,1),e(c),c),l.round=c=>{const h=l(c),a=l.ceil(c);return c-h<a-c?h:a},l.offset=(c,h)=>(t(c=new Date(+c),h==null?1:Math.floor(h)),c),l.range=(c,h,a)=>{const d=[];if(c=l.ceil(c),a=a==null?1:Math.floor(a),!(c<h)||!(a>0))return d;let _;do d.push(_=new Date(+c)),t(c,a),e(c);while(_<c&&c<h);return d},l.filter=c=>yc(h=>{if(h>=h)for(;e(h),!c(h);)h.setTime(h-1)},(h,a)=>{if(h>=h)if(a<0)for(;++a<=0;)for(;t(h,-1),!c(h););else for(;--a>=0;)for(;t(h,1),!c(h););}),r&&(l.count=(c,h)=>(Tm.setTime(+c),Um.setTime(+h),e(Tm),e(Um),Math.floor(r(Tm,Um))),l.every=c=>(c=Math.floor(c),!isFinite(c)||!(c>0)?null:c>1?l.filter(s?h=>s(h)%c===0:h=>l.count(0,h)%c===0):l)),l}const AC=1e3,qg=AC*60,lC=qg*60,ed=lC*24,Xv=ed*7,Wg=yc(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*qg)/ed,e=>e.getDate()-1);Wg.range;const Xg=yc(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ed,e=>e.getUTCDate()-1);Xg.range;const cC=yc(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ed,e=>Math.floor(e/ed));cC.range;function ih(e){return yc(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*qg)/Xv)}const Zv=ih(0),Ip=ih(1),uC=ih(2),hC=ih(3),Jh=ih(4),fC=ih(5),dC=ih(6);Zv.range;Ip.range;uC.range;hC.range;Jh.range;fC.range;dC.range;function sh(e){return yc(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/Xv)}const Jv=sh(0),Tp=sh(1),pC=sh(2),mC=sh(3),Yh=sh(4),gC=sh(5),yC=sh(6);Jv.range;Tp.range;pC.range;mC.range;Yh.range;gC.range;yC.range;const th=yc(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());th.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:yc(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});th.range;const rh=yc(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());rh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:yc(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});rh.range;function Lm(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function km(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function kf(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function vC(e){var t=e.dateTime,r=e.date,s=e.time,l=e.periods,c=e.days,h=e.shortDays,a=e.months,d=e.shortMonths,_=Qf(l),p=Pf(l),E=Qf(c),w=Pf(c),x=Qf(h),Q=Pf(h),k=Qf(a),R=Pf(a),P=Qf(d),O=Pf(d),G={a:He,A:Le,b:Je,B:ke,c:null,d:$0,e:$0,f:HC,g:YC,G:e4,H:jC,I:RC,j:OC,L:Yv,m:zC,M:VC,p:kt,q:ie,Q:r1,s:n1,S:KC,u:GC,U:qC,V:WC,w:XC,W:ZC,x:null,X:null,y:JC,Y:$C,Z:t4,"%":t1},V={a:Se,A:Qe,b:Ke,B:ot,c:null,d:e1,e:e1,f:s4,g:p4,G:g4,H:r4,I:n4,j:i4,L:e_,m:a4,M:o4,p:dt,q:Bt,Q:r1,s:n1,S:A4,u:l4,U:c4,V:u4,w:h4,W:f4,x:null,X:null,y:d4,Y:m4,Z:y4,"%":t1},Z={a:fe,A:ee,b:re,B:be,c:me,d:J0,e:J0,f:PC,g:Z0,G:X0,H:Y0,I:Y0,j:UC,L:QC,m:TC,M:LC,p:Ce,q:IC,Q:DC,s:NC,S:kC,u:BC,U:CC,V:EC,w:xC,W:FC,x:Re,X:_e,y:Z0,Y:X0,Z:SC,"%":MC};G.x=te(r,G),G.X=te(s,G),G.c=te(t,G),V.x=te(r,V),V.X=te(s,V),V.c=te(t,V);function te(Ge,rt){return function(Qt){var ht=[],Nt=-1,gr=0,Pt=Ge.length,ze,yr,sr;for(Qt instanceof Date||(Qt=new Date(+Qt));++Nt<Pt;)Ge.charCodeAt(Nt)===37&&(ht.push(Ge.slice(gr,Nt)),(yr=W0[ze=Ge.charAt(++Nt)])!=null?ze=Ge.charAt(++Nt):yr=ze==="e"?" ":"0",(sr=rt[ze])&&(ze=sr(Qt,yr)),ht.push(ze),gr=Nt+1);return ht.push(Ge.slice(gr,Nt)),ht.join("")}}function ce(Ge,rt){return function(Qt){var ht=kf(1900,void 0,1),Nt=he(ht,Ge,Qt+="",0),gr,Pt;if(Nt!=Qt.length)return null;if("Q"in ht)return new Date(ht.Q);if("s"in ht)return new Date(ht.s*1e3+("L"in ht?ht.L:0));if(rt&&!("Z"in ht)&&(ht.Z=0),"p"in ht&&(ht.H=ht.H%12+ht.p*12),ht.m===void 0&&(ht.m="q"in ht?ht.q:0),"V"in ht){if(ht.V<1||ht.V>53)return null;"w"in ht||(ht.w=1),"Z"in ht?(gr=km(kf(ht.y,0,1)),Pt=gr.getUTCDay(),gr=Pt>4||Pt===0?Tp.ceil(gr):Tp(gr),gr=Xg.offset(gr,(ht.V-1)*7),ht.y=gr.getUTCFullYear(),ht.m=gr.getUTCMonth(),ht.d=gr.getUTCDate()+(ht.w+6)%7):(gr=Lm(kf(ht.y,0,1)),Pt=gr.getDay(),gr=Pt>4||Pt===0?Ip.ceil(gr):Ip(gr),gr=Wg.offset(gr,(ht.V-1)*7),ht.y=gr.getFullYear(),ht.m=gr.getMonth(),ht.d=gr.getDate()+(ht.w+6)%7)}else("W"in ht||"U"in ht)&&("w"in ht||(ht.w="u"in ht?ht.u%7:"W"in ht?1:0),Pt="Z"in ht?km(kf(ht.y,0,1)).getUTCDay():Lm(kf(ht.y,0,1)).getDay(),ht.m=0,ht.d="W"in ht?(ht.w+6)%7+ht.W*7-(Pt+5)%7:ht.w+ht.U*7-(Pt+6)%7);return"Z"in ht?(ht.H+=ht.Z/100|0,ht.M+=ht.Z%100,km(ht)):Lm(ht)}}function he(Ge,rt,Qt,ht){for(var Nt=0,gr=rt.length,Pt=Qt.length,ze,yr;Nt<gr;){if(ht>=Pt)return-1;if(ze=rt.charCodeAt(Nt++),ze===37){if(ze=rt.charAt(Nt++),yr=Z[ze in W0?rt.charAt(Nt++):ze],!yr||(ht=yr(Ge,Qt,ht))<0)return-1}else if(ze!=Qt.charCodeAt(ht++))return-1}return ht}function Ce(Ge,rt,Qt){var ht=_.exec(rt.slice(Qt));return ht?(Ge.p=p.get(ht[0].toLowerCase()),Qt+ht[0].length):-1}function fe(Ge,rt,Qt){var ht=x.exec(rt.slice(Qt));return ht?(Ge.w=Q.get(ht[0].toLowerCase()),Qt+ht[0].length):-1}function ee(Ge,rt,Qt){var ht=E.exec(rt.slice(Qt));return ht?(Ge.w=w.get(ht[0].toLowerCase()),Qt+ht[0].length):-1}function re(Ge,rt,Qt){var ht=P.exec(rt.slice(Qt));return ht?(Ge.m=O.get(ht[0].toLowerCase()),Qt+ht[0].length):-1}function be(Ge,rt,Qt){var ht=k.exec(rt.slice(Qt));return ht?(Ge.m=R.get(ht[0].toLowerCase()),Qt+ht[0].length):-1}function me(Ge,rt,Qt){return he(Ge,t,rt,Qt)}function Re(Ge,rt,Qt){return he(Ge,r,rt,Qt)}function _e(Ge,rt,Qt){return he(Ge,s,rt,Qt)}function He(Ge){return h[Ge.getDay()]}function Le(Ge){return c[Ge.getDay()]}function Je(Ge){return d[Ge.getMonth()]}function ke(Ge){return a[Ge.getMonth()]}function kt(Ge){return l[+(Ge.getHours()>=12)]}function ie(Ge){return 1+~~(Ge.getMonth()/3)}function Se(Ge){return h[Ge.getUTCDay()]}function Qe(Ge){return c[Ge.getUTCDay()]}function Ke(Ge){return d[Ge.getUTCMonth()]}function ot(Ge){return a[Ge.getUTCMonth()]}function dt(Ge){return l[+(Ge.getUTCHours()>=12)]}function Bt(Ge){return 1+~~(Ge.getUTCMonth()/3)}return{format:function(Ge){var rt=te(Ge+="",G);return rt.toString=function(){return Ge},rt},parse:function(Ge){var rt=ce(Ge+="",!1);return rt.toString=function(){return Ge},rt},utcFormat:function(Ge){var rt=te(Ge+="",V);return rt.toString=function(){return Ge},rt},utcParse:function(Ge){var rt=ce(Ge+="",!0);return rt.toString=function(){return Ge},rt}}}var W0={"-":"",_:" ",0:"0"},Ja=/^\s*\d+/,_C=/^%/,wC=/[\\^$*+?|[\]().{}]/g;function Qi(e,t,r){var s=e<0?"-":"",l=(s?-e:e)+"",c=l.length;return s+(c<r?new Array(r-c+1).join(t)+l:l)}function bC(e){return e.replace(wC,"\\$&")}function Qf(e){return new RegExp("^(?:"+e.map(bC).join("|")+")","i")}function Pf(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function xC(e,t,r){var s=Ja.exec(t.slice(r,r+1));return s?(e.w=+s[0],r+s[0].length):-1}function BC(e,t,r){var s=Ja.exec(t.slice(r,r+1));return s?(e.u=+s[0],r+s[0].length):-1}function CC(e,t,r){var s=Ja.exec(t.slice(r,r+2));return s?(e.U=+s[0],r+s[0].length):-1}function EC(e,t,r){var s=Ja.exec(t.slice(r,r+2));return s?(e.V=+s[0],r+s[0].length):-1}function FC(e,t,r){var s=Ja.exec(t.slice(r,r+2));return s?(e.W=+s[0],r+s[0].length):-1}function X0(e,t,r){var s=Ja.exec(t.slice(r,r+4));return s?(e.y=+s[0],r+s[0].length):-1}function Z0(e,t,r){var s=Ja.exec(t.slice(r,r+2));return s?(e.y=+s[0]+(+s[0]>68?1900:2e3),r+s[0].length):-1}function SC(e,t,r){var s=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return s?(e.Z=s[1]?0:-(s[2]+(s[3]||"00")),r+s[0].length):-1}function IC(e,t,r){var s=Ja.exec(t.slice(r,r+1));return s?(e.q=s[0]*3-3,r+s[0].length):-1}function TC(e,t,r){var s=Ja.exec(t.slice(r,r+2));return s?(e.m=s[0]-1,r+s[0].length):-1}function J0(e,t,r){var s=Ja.exec(t.slice(r,r+2));return s?(e.d=+s[0],r+s[0].length):-1}function UC(e,t,r){var s=Ja.exec(t.slice(r,r+3));return s?(e.m=0,e.d=+s[0],r+s[0].length):-1}function Y0(e,t,r){var s=Ja.exec(t.slice(r,r+2));return s?(e.H=+s[0],r+s[0].length):-1}function LC(e,t,r){var s=Ja.exec(t.slice(r,r+2));return s?(e.M=+s[0],r+s[0].length):-1}function kC(e,t,r){var s=Ja.exec(t.slice(r,r+2));return s?(e.S=+s[0],r+s[0].length):-1}function QC(e,t,r){var s=Ja.exec(t.slice(r,r+3));return s?(e.L=+s[0],r+s[0].length):-1}function PC(e,t,r){var s=Ja.exec(t.slice(r,r+6));return s?(e.L=Math.floor(s[0]/1e3),r+s[0].length):-1}function MC(e,t,r){var s=_C.exec(t.slice(r,r+1));return s?r+s[0].length:-1}function DC(e,t,r){var s=Ja.exec(t.slice(r));return s?(e.Q=+s[0],r+s[0].length):-1}function NC(e,t,r){var s=Ja.exec(t.slice(r));return s?(e.s=+s[0],r+s[0].length):-1}function $0(e,t){return Qi(e.getDate(),t,2)}function jC(e,t){return Qi(e.getHours(),t,2)}function RC(e,t){return Qi(e.getHours()%12||12,t,2)}function OC(e,t){return Qi(1+Wg.count(th(e),e),t,3)}function Yv(e,t){return Qi(e.getMilliseconds(),t,3)}function HC(e,t){return Yv(e,t)+"000"}function zC(e,t){return Qi(e.getMonth()+1,t,2)}function VC(e,t){return Qi(e.getMinutes(),t,2)}function KC(e,t){return Qi(e.getSeconds(),t,2)}function GC(e){var t=e.getDay();return t===0?7:t}function qC(e,t){return Qi(Zv.count(th(e)-1,e),t,2)}function $v(e){var t=e.getDay();return t>=4||t===0?Jh(e):Jh.ceil(e)}function WC(e,t){return e=$v(e),Qi(Jh.count(th(e),e)+(th(e).getDay()===4),t,2)}function XC(e){return e.getDay()}function ZC(e,t){return Qi(Ip.count(th(e)-1,e),t,2)}function JC(e,t){return Qi(e.getFullYear()%100,t,2)}function YC(e,t){return e=$v(e),Qi(e.getFullYear()%100,t,2)}function $C(e,t){return Qi(e.getFullYear()%1e4,t,4)}function e4(e,t){var r=e.getDay();return e=r>=4||r===0?Jh(e):Jh.ceil(e),Qi(e.getFullYear()%1e4,t,4)}function t4(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Qi(t/60|0,"0",2)+Qi(t%60,"0",2)}function e1(e,t){return Qi(e.getUTCDate(),t,2)}function r4(e,t){return Qi(e.getUTCHours(),t,2)}function n4(e,t){return Qi(e.getUTCHours()%12||12,t,2)}function i4(e,t){return Qi(1+Xg.count(rh(e),e),t,3)}function e_(e,t){return Qi(e.getUTCMilliseconds(),t,3)}function s4(e,t){return e_(e,t)+"000"}function a4(e,t){return Qi(e.getUTCMonth()+1,t,2)}function o4(e,t){return Qi(e.getUTCMinutes(),t,2)}function A4(e,t){return Qi(e.getUTCSeconds(),t,2)}function l4(e){var t=e.getUTCDay();return t===0?7:t}function c4(e,t){return Qi(Jv.count(rh(e)-1,e),t,2)}function t_(e){var t=e.getUTCDay();return t>=4||t===0?Yh(e):Yh.ceil(e)}function u4(e,t){return e=t_(e),Qi(Yh.count(rh(e),e)+(rh(e).getUTCDay()===4),t,2)}function h4(e){return e.getUTCDay()}function f4(e,t){return Qi(Tp.count(rh(e)-1,e),t,2)}function d4(e,t){return Qi(e.getUTCFullYear()%100,t,2)}function p4(e,t){return e=t_(e),Qi(e.getUTCFullYear()%100,t,2)}function m4(e,t){return Qi(e.getUTCFullYear()%1e4,t,4)}function g4(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Yh(e):Yh.ceil(e),Qi(e.getUTCFullYear()%1e4,t,4)}function y4(){return"+0000"}function t1(){return"%"}function r1(e){return+e}function n1(e){return Math.floor(+e/1e3)}var Ph,Rp,Zg;v4({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function v4(e){return Ph=vC(e),Rp=Ph.format,Zg=Ph.parse,Ph.utcFormat,Ph.utcParse,Ph}function Oh(e,t,r){this.k=e,this.x=t,this.y=r}Oh.prototype={constructor:Oh,scale:function(e){return e===1?this:new Oh(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Oh(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new Oh(1,0,0);Oh.prototype;function i1(e,t,r){const s=e.slice();return s[59]=t[r],s}function s1(e,t,r){const s=e.slice();return s[59]=t[r],s}function _4(e){let t,r,s;return{c(){t=Lt("h1"),t.textContent="Louisiana Locked Up:",r=$t(),s=Lt("h1"),s.textContent="A Problem in Every Parish",ue(t,"class","svelte-bpiw7r"),ue(s,"class","sub svelte-bpiw7r")},m(l,c){st(l,t,c),st(l,r,c),st(l,s,c)},p:bn,d(l){l&&nt(t),l&&nt(r),l&&nt(s)}}}function a1(e){let t,r,s;function l(h){e[46](h)}let c={threshold:R4,$$slots:{foreground:[N4],background:[D4]},$$scope:{ctx:e}};return e[0].map!==void 0&&(c.id=e[0].map),t=new Ew({props:c}),qa.push(()=>Sg(t,"id",l)),{c(){mr(t.$$.fragment)},m(h,a){fr(t,h,a),s=!0},p(h,a){const d={};a[0]&2147483647|a[1]&15|a[2]&4&&(d.$$scope={dirty:a,ctx:h}),!r&&a[0]&1&&(r=!0,d.id=h[0].map,Fg(()=>r=!1)),t.$set(d)},i(h){s||(Tt(t.$$.fragment,h),s=!0)},o(h){Kt(t.$$.fragment,h),s=!1},d(h){dr(t,h)}}}function w4(e){let t,r;return t=new Po({props:{id:"rest-fill",type:"fill",paint:{"fill-color":"#fff","fill-opacity":.4}}}),{c(){mr(t.$$.fragment)},m(s,l){fr(t,s,l),r=!0},p:bn,i(s){r||(Tt(t.$$.fragment,s),r=!0)},o(s){Kt(t.$$.fragment,s),r=!1},d(s){dr(t,s)}}}function b4(e){let t,r;return t=new Po({props:{id:"cad-fill",idKey:"county_key",type:"fill",paint:{"fill-color":"#97DFD1","fill-opacity":e[24]}}}),{c(){mr(t.$$.fragment)},m(s,l){fr(t,s,l),r=!0},p(s,l){const c={};l[0]&16777216&&(c.paint={"fill-color":"#97DFD1","fill-opacity":s[24]}),t.$set(c)},i(s){r||(Tt(t.$$.fragment,s),r=!0)},o(s){Kt(t.$$.fragment,s),r=!1},d(s){dr(t,s)}}}function x4(e){let t,r;return t=new Po({props:{id:"sad-fill",idKey:"county_key",type:"line",paint:{"line-color":"#fff000","line-opacity":e[25],"line-width":5}}}),{c(){mr(t.$$.fragment)},m(s,l){fr(t,s,l),r=!0},p(s,l){const c={};l[0]&33554432&&(c.paint={"line-color":"#fff000","line-opacity":s[25],"line-width":5}),t.$set(c)},i(s){r||(Tt(t.$$.fragment,s),r=!0)},o(s){Kt(t.$$.fragment,s),r=!1},d(s){dr(t,s)}}}function B4(e){let t,r;return t=new Po({props:{id:"outline-line",idKey:"fips",type:"line",paint:{"line-color":"#333","line-width":1.5}}}),{c(){mr(t.$$.fragment)},m(s,l){fr(t,s,l),r=!0},p:bn,i(s){r||(Tt(t.$$.fragment,s),r=!0)},o(s){Kt(t.$$.fragment,s),r=!1},d(s){dr(t,s)}}}function C4(e){let t,r;return t=new Ow({props:{content:e[18]&&e[21]=="pretrial"?`<strong>${e[2].parish.lookup[e[18]].name}</strong><br/>
                    On ${e[40](e[2].parish.lookup[e[18]].pretrial_date)},  ${Ou(e[2].parish.lookup[e[18]].total_jail_pretrial.toFixed(0))} people (${e[2].parish.lookup[e[18]].jail_pretrial_rate.toFixed(0)} per 10,000 residents) were detained pretrial in ${e[2].parish.lookup[e[18]].name} (population ${Ou(e[2].parish.lookup[e[18]].total_pop)}).`:e[18]&&e[21]=="admission"?`<strong>${e[2].parish.lookup[e[18]].name}</strong><br/>
                    In ${e[2].parish.lookup[e[18]].year},  ${e[2].parish.lookup[e[18]].prison_adm_count} people (${e[2].parish.lookup[e[18]].prison_adm_rate.toFixed(0)} per 10,000 residents) were sent to prison from ${e[2].parish.lookup[e[18]].name} (population ${Ou(e[2].parish.lookup[e[18]].total_pop)}).`:e[18]&&e[21]=="none"||e[18]&&e[21]=="over_1000_19"||e[18]&&e[21]=="over_1000_99"?`<strong>${e[2].parish.lookup[e[18]].name}</strong>`:""}}),{c(){mr(t.$$.fragment)},m(s,l){fr(t,s,l),r=!0},p(s,l){const c={};l[0]&2359300&&(c.content=s[18]&&s[21]=="pretrial"?`<strong>${s[2].parish.lookup[s[18]].name}</strong><br/>
                    On ${s[40](s[2].parish.lookup[s[18]].pretrial_date)},  ${Ou(s[2].parish.lookup[s[18]].total_jail_pretrial.toFixed(0))} people (${s[2].parish.lookup[s[18]].jail_pretrial_rate.toFixed(0)} per 10,000 residents) were detained pretrial in ${s[2].parish.lookup[s[18]].name} (population ${Ou(s[2].parish.lookup[s[18]].total_pop)}).`:s[18]&&s[21]=="admission"?`<strong>${s[2].parish.lookup[s[18]].name}</strong><br/>
                    In ${s[2].parish.lookup[s[18]].year},  ${s[2].parish.lookup[s[18]].prison_adm_count} people (${s[2].parish.lookup[s[18]].prison_adm_rate.toFixed(0)} per 10,000 residents) were sent to prison from ${s[2].parish.lookup[s[18]].name} (population ${Ou(s[2].parish.lookup[s[18]].total_pop)}).`:s[18]&&s[21]=="none"||s[18]&&s[21]=="over_1000_19"||s[18]&&s[21]=="over_1000_99"?`<strong>${s[2].parish.lookup[s[18]].name}</strong>`:""),t.$set(c)},i(s){r||(Tt(t.$$.fragment,s),r=!0)},o(s){Kt(t.$$.fragment,s),r=!1},d(s){dr(t,s)}}}function E4(e){let t,r,s,l;return t=new Po({props:{id:"lad-fill",idKey:"code",colorKey:e[21]+"_color",outlineKey:e[21]+"_outline",data:e[1].parish.indicators,type:"fill",select:!0,selected:e[19],clickIgnore:!e[23],hover:!0,hovered:e[18],highlight:!0,highlighted:e[20],paint:{"fill-color":["case",["!=",["feature-state","color"],null],["feature-state","color"],"rgba(255, 255, 255, 0)"],"fill-opacity":1},$$slots:{default:[C4]},$$scope:{ctx:e}}}),t.$on("select",e[37]),t.$on("hover",e[39]),s=new Po({props:{id:"lad-line",type:"line",paint:{"line-color":["case",["boolean",["feature-state","hovered"],!1],"#ff9000",["boolean",["feature-state","selected"],!1],"black",["boolean",["feature-state","highlighted"],!1],"black","#fff"],"line-width":["case",["boolean",["feature-state","hovered"],!1],2,["boolean",["feature-state","selected"],!1],2,["boolean",["feature-state","highlighted"],!1],3,.5]}}}),{c(){mr(t.$$.fragment),r=$t(),mr(s.$$.fragment)},m(c,h){fr(t,c,h),st(c,r,h),fr(s,c,h),l=!0},p(c,h){const a={};h[0]&2097152&&(a.colorKey=c[21]+"_color"),h[0]&2097152&&(a.outlineKey=c[21]+"_outline"),h[0]&2&&(a.data=c[1].parish.indicators),h[0]&524288&&(a.selected=c[19]),h[0]&8388608&&(a.clickIgnore=!c[23]),h[0]&262144&&(a.hovered=c[18]),h[0]&1048576&&(a.highlighted=c[20]),h[0]&2359300|h[2]&4&&(a.$$scope={dirty:h,ctx:c}),t.$set(a)},i(c){l||(Tt(t.$$.fragment,c),Tt(s.$$.fragment,c),l=!0)},o(c){Kt(t.$$.fragment,c),Kt(s.$$.fragment,c),l=!1},d(c){dr(t,c),c&&nt(r),dr(s,c)}}}function F4(e){let t,r,s,l;return t=new Po({props:{id:"pad-fill",idKey:"geopin",type:"fill",paint:{"fill-color":"#ff3300","fill-opacity":e[26]}}}),s=new Po({props:{id:"bldg-labels",type:"symbol",paint:{"text-halo-width":.75,"text-halo-color":"#fff","text-color":"#223476","text-opacity":e[26]},layout:{"text-field":["get","name"],visibility:"visible","text-variable-anchor":["top","bottom","left","right"],"text-radial-offset":.5,"text-size":14,"text-justify":"auto","text-padding":5}}}),{c(){mr(t.$$.fragment),r=$t(),mr(s.$$.fragment)},m(c,h){fr(t,c,h),st(c,r,h),fr(s,c,h),l=!0},p(c,h){const a={};h[0]&67108864&&(a.paint={"fill-color":"#ff3300","fill-opacity":c[26]}),t.$set(a);const d={};h[0]&67108864&&(d.paint={"text-halo-width":.75,"text-halo-color":"#fff","text-color":"#223476","text-opacity":c[26]}),s.$set(d)},i(c){l||(Tt(t.$$.fragment,c),Tt(s.$$.fragment,c),l=!0)},o(c){Kt(t.$$.fragment,c),Kt(s.$$.fragment,c),l=!1},d(c){dr(t,c),c&&nt(r),dr(s,c)}}}function S4(e){let t,r,s,l;return t=new Po({props:{id:"ead-fill",idKey:"geopin",type:"fill",paint:{"fill-color":"#ff3300","fill-opacity":e[27]}}}),s=new Po({props:{id:"bldg-labels2",type:"symbol",paint:{"text-halo-width":1,"text-halo-color":"#fff","text-color":"#223476","text-opacity":e[27]},layout:{"text-field":["get","name"],visibility:"visible","text-variable-anchor":["top","bottom","left","right"],"text-radial-offset":.5,"text-size":14,"text-justify":"auto","text-padding":5}}}),{c(){mr(t.$$.fragment),r=$t(),mr(s.$$.fragment)},m(c,h){fr(t,c,h),st(c,r,h),fr(s,c,h),l=!0},p(c,h){const a={};h[0]&134217728&&(a.paint={"fill-color":"#ff3300","fill-opacity":c[27]}),t.$set(a);const d={};h[0]&134217728&&(d.paint={"text-halo-width":1,"text-halo-color":"#fff","text-color":"#223476","text-opacity":c[27]}),s.$set(d)},i(c){l||(Tt(t.$$.fragment,c),Tt(s.$$.fragment,c),l=!0)},o(c){Kt(t.$$.fragment,c),Kt(s.$$.fragment,c),l=!1},d(c){dr(t,c),c&&nt(r),dr(s,c)}}}function I4(e){let t,r;return t=new Po({props:{id:"facs",idKey:"uuid",data:e[3].facility.indicators,colorKey:e[22]+"_color",type:"circle",paint:{"circle-stroke-width":e[29],"circle-stroke-color":e[30],"circle-color":e[28],"circle-stroke-opacity":["get","GT_1000_beds_99"],"circle-radius":["step",["get","capacity"],5,100,7,500,9,1e3,11,2e3,13,5e3,10]}}}),{c(){mr(t.$$.fragment)},m(s,l){fr(t,s,l),r=!0},p(s,l){const c={};l[0]&8&&(c.data=s[3].facility.indicators),l[0]&4194304&&(c.colorKey=s[22]+"_color"),l[0]&1879048192&&(c.paint={"circle-stroke-width":s[29],"circle-stroke-color":s[30],"circle-color":s[28],"circle-stroke-opacity":["get","GT_1000_beds_99"],"circle-radius":["step",["get","capacity"],5,100,7,500,9,1e3,11,2e3,13,5e3,10]}),t.$set(c)},i(s){r||(Tt(t.$$.fragment,s),r=!0)},o(s){Kt(t.$$.fragment,s),r=!1},d(s){dr(t,s)}}}function T4(e){let t,r;return t=new Po({props:{id:"gead-labels",type:"symbol",paint:{"text-halo-width":1,"text-halo-color":"#fff","text-color":"#333a5c","text-opacity":e[33]},layout:{"text-field":["get","facility_name"],visibility:"visible","text-variable-anchor":["top","bottom","left","right"],"text-radial-offset":1.5,"text-size":10,"text-justify":"left","text-padding":5,"text-allow-overlap":!(e[36]<420)}}}),{c(){mr(t.$$.fragment)},m(s,l){fr(t,s,l),r=!0},p(s,l){const c={};l[1]&4&&(c.paint={"text-halo-width":1,"text-halo-color":"#fff","text-color":"#333a5c","text-opacity":s[33]}),t.$set(c)},i(s){r||(Tt(t.$$.fragment,s),r=!0)},o(s){Kt(t.$$.fragment,s),r=!1},d(s){dr(t,s)}}}function U4(e){let t,r;return t=new Po({props:{id:"grad-labels",type:"symbol",paint:{"text-halo-width":1,"text-halo-color":"#fff","text-color":"#333a5c","text-opacity":e[32]},layout:{"text-field":["get","facility_name"],visibility:"visible","text-anchor":"center","text-size":10,"text-justify":"left","text-padding":5,"text-allow-overlap":!(e[36]<420),"text-offset":[0,2]}}}),{c(){mr(t.$$.fragment)},m(s,l){fr(t,s,l),r=!0},p(s,l){const c={};l[1]&2&&(c.paint={"text-halo-width":1,"text-halo-color":"#fff","text-color":"#333a5c","text-opacity":s[32]}),t.$set(c)},i(s){r||(Tt(t.$$.fragment,s),r=!0)},o(s){Kt(t.$$.fragment,s),r=!1},d(s){dr(t,s)}}}function L4(e){let t,r;return t=new Po({props:{id:"glad-labels",type:"symbol",paint:{"text-halo-width":1,"text-halo-color":"#fff","text-color":"#333a5c","text-opacity":e[31]},layout:{"text-field":["get","facility_name"],visibility:"visible","text-variable-anchor":["top","bottom","left","right"],"text-radial-offset":.5,"text-size":10,"text-justify":"left","text-padding":5,"text-allow-overlap":!(e[36]<420)}}}),{c(){mr(t.$$.fragment)},m(s,l){fr(t,s,l),r=!0},p(s,l){const c={};l[1]&1&&(c.paint={"text-halo-width":1,"text-halo-color":"#fff","text-color":"#333a5c","text-opacity":s[31]}),t.$set(c)},i(s){r||(Tt(t.$$.fragment,s),r=!0)},o(s){Kt(t.$$.fragment,s),r=!1},d(s){dr(t,s)}}}function k4(e){let t,r;return t=new Po({props:{id:"gred-labels",type:"symbol",paint:{"text-halo-width":2.5,"text-halo-color":"#feffea","text-color":"#44986e","text-opacity":e[34]},layout:{"text-field":["get","rev"],visibility:"visible","text-variable-anchor":["top","bottom","left","right"],"text-radial-offset":.5,"text-size":["step",["get","est_doc_rev"],0,1,12,1e4,14,3e6,16,5e6,18,8e6,20,1e7,10],"text-justify":"left","text-padding":5}}}),{c(){mr(t.$$.fragment)},m(s,l){fr(t,s,l),r=!0},p(s,l){const c={};l[1]&8&&(c.paint={"text-halo-width":2.5,"text-halo-color":"#feffea","text-color":"#44986e","text-opacity":s[34]}),t.$set(c)},i(s){r||(Tt(t.$$.fragment,s),r=!0)},o(s){Kt(t.$$.fragment,s),r=!1},d(s){dr(t,s)}}}function Q4(e){let t,r,s,l,c,h,a,d,_,p,E,w,x,Q,k,R,P,O,G,V,Z,te,ce,he;return t=new KA({props:{id:"rest",type:"geojson",data:e[7],maxzoom:24,$$slots:{default:[w4]},$$scope:{ctx:e}}}),s=new KA({props:{id:"cad",type:"geojson",data:e[6],maxzoom:22,$$slots:{default:[b4]},$$scope:{ctx:e}}}),c=new KA({props:{id:"sad",type:"geojson",data:e[5],maxzoom:22,$$slots:{default:[x4]},$$scope:{ctx:e}}}),a=new KA({props:{id:"outline",type:"geojson",data:e[11],maxzoom:22,$$slots:{default:[B4]},$$scope:{ctx:e}}}),_=new KA({props:{id:"lad",type:"geojson",data:e[4],promoteId:"AREACD",maxzoom:22,$$slots:{default:[E4]},$$scope:{ctx:e}}}),E=new KA({props:{id:"pad",type:"geojson",data:e[9],maxzoom:24,$$slots:{default:[F4]},$$scope:{ctx:e}}}),x=new KA({props:{id:"ead",type:"geojson",data:e[10],maxzoom:24,$$slots:{default:[S4]},$$scope:{ctx:e}}}),k=new KA({props:{id:"rad",type:"geojson",data:e[12],maxzoom:22,promoteId:"uuid",$$slots:{default:[I4]},$$scope:{ctx:e}}}),P=new KA({props:{id:"gead",type:"geojson",data:e[15],maxzoom:24,$$slots:{default:[T4]},$$scope:{ctx:e}}}),G=new KA({props:{id:"grad",type:"geojson",data:e[14],maxzoom:24,$$slots:{default:[U4]},$$scope:{ctx:e}}}),Z=new KA({props:{id:"glad",type:"geojson",data:e[13],maxzoom:24,$$slots:{default:[L4]},$$scope:{ctx:e}}}),ce=new KA({props:{id:"gred",type:"geojson",data:e[16],maxzoom:24,$$slots:{default:[k4]},$$scope:{ctx:e}}}),{c(){mr(t.$$.fragment),r=$t(),mr(s.$$.fragment),l=$t(),mr(c.$$.fragment),h=$t(),mr(a.$$.fragment),d=$t(),mr(_.$$.fragment),p=$t(),mr(E.$$.fragment),w=$t(),mr(x.$$.fragment),Q=$t(),mr(k.$$.fragment),R=$t(),mr(P.$$.fragment),O=$t(),mr(G.$$.fragment),V=$t(),mr(Z.$$.fragment),te=$t(),mr(ce.$$.fragment)},m(Ce,fe){fr(t,Ce,fe),st(Ce,r,fe),fr(s,Ce,fe),st(Ce,l,fe),fr(c,Ce,fe),st(Ce,h,fe),fr(a,Ce,fe),st(Ce,d,fe),fr(_,Ce,fe),st(Ce,p,fe),fr(E,Ce,fe),st(Ce,w,fe),fr(x,Ce,fe),st(Ce,Q,fe),fr(k,Ce,fe),st(Ce,R,fe),fr(P,Ce,fe),st(Ce,O,fe),fr(G,Ce,fe),st(Ce,V,fe),fr(Z,Ce,fe),st(Ce,te,fe),fr(ce,Ce,fe),he=!0},p(Ce,fe){const ee={};fe[0]&128&&(ee.data=Ce[7]),fe[2]&4&&(ee.$$scope={dirty:fe,ctx:Ce}),t.$set(ee);const re={};fe[0]&64&&(re.data=Ce[6]),fe[0]&16777216|fe[2]&4&&(re.$$scope={dirty:fe,ctx:Ce}),s.$set(re);const be={};fe[0]&32&&(be.data=Ce[5]),fe[0]&33554432|fe[2]&4&&(be.$$scope={dirty:fe,ctx:Ce}),c.$set(be);const me={};fe[0]&2048&&(me.data=Ce[11]),fe[2]&4&&(me.$$scope={dirty:fe,ctx:Ce}),a.$set(me);const Re={};fe[0]&16&&(Re.data=Ce[4]),fe[0]&12320774|fe[2]&4&&(Re.$$scope={dirty:fe,ctx:Ce}),_.$set(Re);const _e={};fe[0]&512&&(_e.data=Ce[9]),fe[0]&67108864|fe[2]&4&&(_e.$$scope={dirty:fe,ctx:Ce}),E.$set(_e);const He={};fe[0]&1024&&(He.data=Ce[10]),fe[0]&134217728|fe[2]&4&&(He.$$scope={dirty:fe,ctx:Ce}),x.$set(He);const Le={};fe[0]&4096&&(Le.data=Ce[12]),fe[0]&1883242504|fe[2]&4&&(Le.$$scope={dirty:fe,ctx:Ce}),k.$set(Le);const Je={};fe[0]&32768&&(Je.data=Ce[15]),fe[1]&4|fe[2]&4&&(Je.$$scope={dirty:fe,ctx:Ce}),P.$set(Je);const ke={};fe[0]&16384&&(ke.data=Ce[14]),fe[1]&2|fe[2]&4&&(ke.$$scope={dirty:fe,ctx:Ce}),G.$set(ke);const kt={};fe[0]&8192&&(kt.data=Ce[13]),fe[1]&1|fe[2]&4&&(kt.$$scope={dirty:fe,ctx:Ce}),Z.$set(kt);const ie={};fe[0]&65536&&(ie.data=Ce[16]),fe[1]&8|fe[2]&4&&(ie.$$scope={dirty:fe,ctx:Ce}),ce.$set(ie)},i(Ce){he||(Tt(t.$$.fragment,Ce),Tt(s.$$.fragment,Ce),Tt(c.$$.fragment,Ce),Tt(a.$$.fragment,Ce),Tt(_.$$.fragment,Ce),Tt(E.$$.fragment,Ce),Tt(x.$$.fragment,Ce),Tt(k.$$.fragment,Ce),Tt(P.$$.fragment,Ce),Tt(G.$$.fragment,Ce),Tt(Z.$$.fragment,Ce),Tt(ce.$$.fragment,Ce),he=!0)},o(Ce){Kt(t.$$.fragment,Ce),Kt(s.$$.fragment,Ce),Kt(c.$$.fragment,Ce),Kt(a.$$.fragment,Ce),Kt(_.$$.fragment,Ce),Kt(E.$$.fragment,Ce),Kt(x.$$.fragment,Ce),Kt(k.$$.fragment,Ce),Kt(P.$$.fragment,Ce),Kt(G.$$.fragment,Ce),Kt(Z.$$.fragment,Ce),Kt(ce.$$.fragment,Ce),he=!1},d(Ce){dr(t,Ce),Ce&&nt(r),dr(s,Ce),Ce&&nt(l),dr(c,Ce),Ce&&nt(h),dr(a,Ce),Ce&&nt(d),dr(_,Ce),Ce&&nt(p),dr(E,Ce),Ce&&nt(w),dr(x,Ce),Ce&&nt(Q),dr(k,Ce),Ce&&nt(R),dr(P,Ce),Ce&&nt(O),dr(G,Ce),Ce&&nt(V),dr(Z,Ce),Ce&&nt(te),dr(ce,Ce)}}}function o1(e){let t,r,s,l,c;return r=new Lg({props:{style:r3,interactive:!1,location:{bounds:e[35].angola},$$slots:{default:[M4]},$$scope:{ctx:e}}}),{c(){t=Lt("div"),mr(r.$$.fragment),s=$t(),l=Lt("div"),l.innerHTML=`<div id="angola-legend-hold" class="svelte-bpiw7r"><div class="line svelte-bpiw7r"></div>
                Louisiana plantations circa 1853</div>`,ue(t,"id","angola"),ue(t,"class","svelte-bpiw7r"),ue(l,"id","angola-legend"),ue(l,"class","svelte-bpiw7r")},m(h,a){st(h,t,a),fr(r,t,null),st(h,s,a),st(h,l,a),c=!0},p(h,a){const d={};a[0]&256|a[2]&4&&(d.$$scope={dirty:a,ctx:h}),r.$set(d)},i(h){c||(Tt(r.$$.fragment,h),c=!0)},o(h){Kt(r.$$.fragment,h),c=!1},d(h){h&&nt(t),dr(r),h&&nt(s),h&&nt(l)}}}function P4(e){let t,r;return t=new Po({props:{id:"chad-line",idKey:"county_key",type:"line",paint:{"line-color":"#97DFD1","line-opacity":.4,"line-width":3}}}),{c(){mr(t.$$.fragment)},m(s,l){fr(t,s,l),r=!0},p:bn,i(s){r||(Tt(t.$$.fragment,s),r=!0)},o(s){Kt(t.$$.fragment,s),r=!1},d(s){dr(t,s)}}}function M4(e){let t,r;return t=new KA({props:{id:"chad",type:"geojson",data:e[8],maxzoom:22,$$slots:{default:[P4]},$$scope:{ctx:e}}}),{c(){mr(t.$$.fragment)},m(s,l){fr(t,s,l),r=!0},p(s,l){const c={};l[0]&256&&(c.data=s[8]),l[2]&4&&(c.$$scope={dirty:l,ctx:s}),t.$set(c)},i(s){r||(Tt(t.$$.fragment,s),r=!0)},o(s){Kt(t.$$.fragment,s),r=!1},d(s){dr(t,s)}}}function A1(e){let t,r,s,l,c,h=e[4].features,a=[];for(let d=0;d<h.length;d+=1)a[d]=l1(i1(e,h,d));return{c(){t=Lt("div"),r=Lt("select"),s=Lt("option"),s.textContent="See data for each Parish.";for(let d=0;d<a.length;d+=1)a[d].c();s.__value=null,s.value=s.__value,ue(r,"class","svelte-bpiw7r"),e[19]===void 0&&xu(()=>e[44].call(r)),ue(t,"id","persistent-parish-data"),ue(t,"class","svelte-bpiw7r")},m(d,_){st(d,t,_),it(t,r),it(r,s);for(let p=0;p<a.length;p+=1)a[p].m(r,null);Vh(r,e[19]),l||(c=[es(r,"change",e[44]),es(r,"change",e[45])],l=!0)},p(d,_){if(_[0]&16){h=d[4].features;let p;for(p=0;p<h.length;p+=1){const E=i1(d,h,p);a[p]?a[p].p(E,_):(a[p]=l1(E),a[p].c(),a[p].m(r,null))}for(;p<a.length;p+=1)a[p].d(1);a.length=h.length}_[0]&524304&&Vh(r,d[19])},d(d){d&&nt(t),Vl(a,d),l=!1,tA(c)}}}function l1(e){let t,r=e[59].properties.AREANM+"",s,l,c;return{c(){t=Lt("option"),s=Fr(r),l=$t(),t.__value=c=e[59].properties.AREANM,t.value=t.__value},m(h,a){st(h,t,a),it(t,s),it(t,l)},p(h,a){a[0]&16&&r!==(r=h[59].properties.AREANM+"")&&$n(s,r),a[0]&16&&c!==(c=h[59].properties.AREANM)&&(t.__value=c,t.value=t.__value)},d(h){h&&nt(t)}}}function D4(e){let t,r,s,l,c,h,a,d,_,p;function E(k){e[43](k)}let w={style:t3,interactive:!1,location:{bounds:e[36]<420?e[35].lamobile:e[35].la},$$slots:{default:[Q4]},$$scope:{ctx:e}};e[17]!==void 0&&(w.map=e[17]),l=new Lg({props:w}),qa.push(()=>Sg(l,"map",E));let x=e[0].map=="map12"&&o1(e);d=new $w({props:{lo:e[0].map}});let Q=e[0].map!=="map15"&&A1(e);return{c(){t=Lt("div"),r=Lt("figure"),s=Lt("div"),mr(l.$$.fragment),h=$t(),x&&x.c(),a=$t(),mr(d.$$.fragment),_=$t(),Q&&Q.c(),ue(s,"class","col-full height-full"),ue(t,"slot","background")},m(k,R){st(k,t,R),it(t,r),it(r,s),fr(l,s,null),it(s,h),x&&x.m(s,null),it(t,a),fr(d,t,null),it(t,_),Q&&Q.m(t,null),p=!0},p(k,R){const P={};R[0]&2147352318|R[1]&15|R[2]&4&&(P.$$scope={dirty:R,ctx:k}),!c&&R[0]&131072&&(c=!0,P.map=k[17],Fg(()=>c=!1)),l.$set(P),k[0].map=="map12"?x?(x.p(k,R),R[0]&1&&Tt(x,1)):(x=o1(k),x.c(),Tt(x,1),x.m(s,null)):x&&(Xa(),Kt(x,1,1,()=>{x=null}),Za());const O={};R[0]&1&&(O.lo=k[0].map),d.$set(O),k[0].map!=="map15"?Q?Q.p(k,R):(Q=A1(k),Q.c(),Q.m(t,null)):Q&&(Q.d(1),Q=null)},i(k){p||(Tt(l.$$.fragment,k),Tt(x),Tt(d.$$.fragment,k),p=!0)},o(k){Kt(l.$$.fragment,k),Kt(x),Kt(d.$$.fragment,k),p=!1},d(k){k&&nt(t),dr(l),x&&x.d(),dr(d),Q&&Q.d()}}}function c1(e){let t,r,s,l,c,h=e[4].features,a=[];for(let d=0;d<h.length;d+=1)a[d]=u1(s1(e,h,d));return{c(){t=Lt("p"),r=Lt("select"),s=Lt("option"),s.textContent="Select one";for(let d=0;d<a.length;d+=1)a[d].c();s.__value=null,s.value=s.__value,ue(r,"class","svelte-bpiw7r"),e[19]===void 0&&xu(()=>e[41].call(r))},m(d,_){st(d,t,_),it(t,r),it(r,s);for(let p=0;p<a.length;p+=1)a[p].m(r,null);Vh(r,e[19]),l||(c=[es(r,"change",e[41]),es(r,"change",e[42])],l=!0)},p(d,_){if(_[0]&16){h=d[4].features;let p;for(p=0;p<h.length;p+=1){const E=s1(d,h,p);a[p]?a[p].p(E,_):(a[p]=u1(E),a[p].c(),a[p].m(r,null))}for(;p<a.length;p+=1)a[p].d(1);a.length=h.length}_[0]&524304&&Vh(r,d[19])},d(d){d&&nt(t),Vl(a,d),l=!1,tA(c)}}}function u1(e){let t,r=e[59].properties.AREANM+"",s,l,c;return{c(){t=Lt("option"),s=Fr(r),l=$t(),t.__value=c=e[59].properties.AREANM,t.value=t.__value},m(h,a){st(h,t,a),it(t,s),it(t,l)},p(h,a){a[0]&16&&r!==(r=h[59].properties.AREANM+"")&&$n(s,r),a[0]&16&&c!==(c=h[59].properties.AREANM)&&(t.__value=c,t.value=t.__value)},d(h){h&&nt(t)}}}function N4(e){let t,r,s,l,c,h,a,d,_,p,E,w,x,Q,k,R,P,O,G,V,Z,te,ce,he,Ce,fe,ee,re,be,me,Re,_e,He,Le,Je,ke,kt,ie=e[4]&&c1(e);return{c(){t=Lt("div"),r=Lt("section"),r.innerHTML=`<div class="col-medium"><p>Louisiana now has the second highest <a href="https://bjs.ojp.gov/sites/g/files/xyckuh236/files/media/document/p21st.pdf" target="_blank" class="svelte-bpiw7r"><strong>imprisonment rate</strong></a> in the nation. Despite modest declines in the prison population, mass
            incarceration remains a problem in every parish: the prison admission
            rate is greater than the national average in 92 percent of parishes and
            more than twice the national average in 63 percent of parishes.</p></div>`,s=$t(),l=Lt("section"),l.innerHTML=`<div class="col-medium"><p>Mass incarceration is not only measured by the number of people in
            prison. People arrested but not convicted—that is, people in the
            “pretrial” period—are held in local jails. The <strong>pretrial incarceration rate</strong> in Louisiana is the highest in the nation and twice the national average.
            On a local level, the pretrial incarceration rate is greater than the
            national average in 89 percent of parishes and more than twice the national
            average in 59 percent of parishes.​</p></div>`,c=$t(),h=Lt("section"),h.innerHTML=`<div class="col-medium"><p>Recent history illustrates how jail capacity has increased across
            the state. In 1999, there were only <span class="enormousjails svelte-bpiw7r">five parishes</span>
            with more than 1,000 <span class="localjails svelte-bpiw7r">jail beds</span>.</p></div>`,a=$t(),d=Lt("section"),d.innerHTML=`<div class="col-medium"><p>One of these was Orleans Parish, which at the time had a sprawling
            complex with more than 7,500 jail beds.</p></div>`,_=$t(),p=Lt("section"),p.innerHTML=`<div class="col-medium"><p>But in 2005, the complex was destroyed by Hurricane Katrina,
            prompting a dialogue on how much the city should invest in jailing
            people. Through the efforts of community advocates, the parish ended
            the practice of holding people for the state corrections department
            and limited the new jail’s capacity to 1,250 people. By 2019,
            Orleans Parish’s pretrial population had declined by 75 percent, and
            the total jail population had dropped by more than 80 percent.</p></div>`,E=$t(),w=Lt("section"),w.innerHTML=`<div class="col-medium"><p>During this time, however, sheriffs across the state added
            14,000 jail beds, and there are now <span class="enormousjails svelte-bpiw7r">13 parishes</span>
            with more than <span class="localjails svelte-bpiw7r">1,000 jail beds</span>.​</p></div>`,x=$t(),Q=Lt("section"),Q.innerHTML=`<div class="col-medium"><p><strong><span class="localjails svelte-bpiw7r">Local jails</span></strong> operated
            by sheriffs and police departments are the foundation of Louisiana’s
            carceral infrastructure. Sheriffs operate 85 jails with a combined capacity
            of more than 29,000 beds, while municipal police departments operate
            65 jails with a total of nearly 4,800 beds. This enables the state’s
            astronomical pretrial detention rates.</p></div>`,k=$t(),R=Lt("section"),R.innerHTML=`<div class="col-medium"><p>This growth in jail capacity also means that Louisiana’s law
            enforcement agencies are uniquely invested in incarceration, as the
            state pays local jails “per diems” to hold people serving a state
            prison sentence. More than half of the 27,000 people that comprise
            Louisiana’s “prison population” are serving their sentence in a
            local jail. This arrangement costs the state less than building new
            prisons and <span class="financial svelte-bpiw7r">financially benefits</span> the sheriffs,
            while depriving incarcerated people of services like education and vocational
            training, which are more often available in prisons.</p></div>`,P=$t(),O=Lt("section"),O.innerHTML=`<div class="col-medium"><p>Dozens of sheriffs also operate <strong>Transitional Work Programs (TWP)</strong>
            that hold people who are nearing the end of their prison term. These
            programs release people during the day to work in the community, but
            take about
            <a href="https://app.lla.state.la.us/publicreports.nsf/87d9ddaec96efe3a86257f94007293f3/$file/0000e78f.pdf" target="_blank" class="svelte-bpiw7r">65 percent</a> of their wages for the jail, which also receives a payment from the
            state. Several private operators have TWP contracts with the state as
            well, and 11 parishes have built an additional facility solely to provide
            TWP beds.</p></div>`,G=$t(),V=Lt("section"),V.innerHTML=`<div class="col-medium"><p>In addition to the 150 jails operated by local law enforcement
            agencies, there are 11 <span class="privatejails svelte-bpiw7r">privately operated jails</span> with more than 10,000 beds combined. U.S. Immigration and Customs Enforcement
            (ICE) has contracts with the GEO Group to operate four detention facilities.
            And local sheriffs have partnerships with LaSalle Corrections and other
            private firms to operate seven additional jails, which principally hold
            people for the state but also hold people for ICE.</p></div>`,Z=$t(),te=Lt("section"),te.innerHTML='<div class="col-medium"><p>Louisiana has five federal prisons and eight state <span class="prisons svelte-bpiw7r">prisons</span>.</p></div>',ce=$t(),he=Lt("section"),he.innerHTML=`<div class="col-medium"><p>One of these is the Louisiana State Penitentiary, more commonly
            called “Angola” after the plantation that once occupied the same
            site. Today, the prison’s plantation continues to produce cotton,
            sugar, corn, and other crops that were harvested during times of
            slavery—except today, incarcerated people tend the fields, an
            arrangement made possible by an exception in the 13th Amendment
            permitting slavery “as a punishment for crime.”</p></div>`,Ce=$t(),fe=Lt("section"),fe.innerHTML=`<div class="col-medium"><p>Looking at historical plantations next to modern-day jails and
            prisons, Louisiana’s evolution from mass enslavement to mass
            incarceration is undeniable. The state’s largest jails and prisons
            are situated squarely on the same land where Black people were
            enslaved to sustain the state’s agricultural industry. These
            facilities now use the forced labor of incarcerated people (who are
            disproportionally Black) to sustain the “corrections” industry.</p></div>`,ee=$t(),re=Lt("section"),re.innerHTML=`<div class="col-medium"><p>Adding youth prisons and jails to the facilities already outlined
            shows that there are more than 230 jails and prisons across
            Louisiana. In comparison, there are only 43 universities and
            colleges in the state.</p></div>`,be=$t(),me=Lt("section"),Re=Lt("a"),_e=$t(),He=Lt("div"),Le=Lt("p"),Le.textContent=`These numbers matter: more facilities lead to more incarceration.
            The parishes with the most outsized jails often have the highest
            pretrial detention and prison incarceration rates.`,Je=$t(),ke=Lt("p"),ke.innerHTML=`<strong>Visit your parish page to see how local policies add up to
              statewide mass incarceration. Scroll down to see Vera’s
              recommendations for tackling these issues.</strong>`,kt=$t(),ie&&ie.c(),ue(r,"data-id","map01"),ue(l,"data-id","map02"),ue(h,"data-id","map03"),ue(d,"data-id","map04"),ue(p,"data-id","map05"),ue(w,"data-id","map06"),ue(Q,"data-id","map07"),ue(R,"data-id","map08"),ue(O,"data-id","map09"),ue(V,"data-id","map10"),ue(te,"data-id","map11"),ue(he,"data-id","map12"),ue(fe,"data-id","map13"),ue(re,"data-id","map14"),ue(Re,"id","parishes"),ue(Re,"class","svelte-bpiw7r"),ue(He,"class","col-medium"),ue(me,"data-id","map15"),ue(me,"id","browseparishes"),ue(t,"slot","foreground")},m(Se,Qe){st(Se,t,Qe),it(t,r),it(t,s),it(t,l),it(t,c),it(t,h),it(t,a),it(t,d),it(t,_),it(t,p),it(t,E),it(t,w),it(t,x),it(t,Q),it(t,k),it(t,R),it(t,P),it(t,O),it(t,G),it(t,V),it(t,Z),it(t,te),it(t,ce),it(t,he),it(t,Ce),it(t,fe),it(t,ee),it(t,re),it(t,be),it(t,me),it(me,Re),it(me,_e),it(me,He),it(He,Le),it(He,Je),it(He,ke),it(He,kt),ie&&ie.m(He,null)},p(Se,Qe){Se[4]?ie?ie.p(Se,Qe):(ie=c1(Se),ie.c(),ie.m(He,null)):ie&&(ie.d(1),ie=null)},d(Se){Se&&nt(t),ie&&ie.d()}}}function j4(e){let t,r,s,l,c,h,a,d,_,p,E,w,x,Q;t=new ww({props:{$$slots:{default:[_4]},$$scope:{ctx:e}}}),s=new pw({});let k=e[4]&&e[1].parish.indicators&&e[3].facility.indicators&&a1(e);return a=new gw({}),p=new ov({}),x=new t2({}),{c(){mr(t.$$.fragment),r=$t(),mr(s.$$.fragment),l=$t(),k&&k.c(),c=$t(),h=Lt("div"),mr(a.$$.fragment),d=$t(),_=Lt("div"),mr(p.$$.fragment),E=$t(),w=Lt("div"),mr(x.$$.fragment),ue(_,"class","col-wide"),ue(w,"class","col-wide"),ue(h,"id","bottom"),ue(h,"class","svelte-bpiw7r")},m(R,P){fr(t,R,P),st(R,r,P),fr(s,R,P),st(R,l,P),k&&k.m(R,P),st(R,c,P),st(R,h,P),fr(a,h,null),it(h,d),it(h,_),fr(p,_,null),it(h,E),it(h,w),fr(x,w,null),Q=!0},p(R,P){const O={};P[2]&4&&(O.$$scope={dirty:P,ctx:R}),t.$set(O),R[4]&&R[1].parish.indicators&&R[3].facility.indicators?k?(k.p(R,P),P[0]&26&&Tt(k,1)):(k=a1(R),k.c(),Tt(k,1),k.m(c.parentNode,c)):k&&(Xa(),Kt(k,1,1,()=>{k=null}),Za())},i(R){Q||(Tt(t.$$.fragment,R),Tt(s.$$.fragment,R),Tt(k),Tt(a.$$.fragment,R),Tt(p.$$.fragment,R),Tt(x.$$.fragment,R),Q=!0)},o(R){Kt(t.$$.fragment,R),Kt(s.$$.fragment,R),Kt(k),Kt(a.$$.fragment,R),Kt(p.$$.fragment,R),Kt(x.$$.fragment,R),Q=!1},d(R){dr(t,R),R&&nt(r),dr(s,R),R&&nt(l),k&&k.d(R),R&&nt(c),R&&nt(h),dr(a),dr(p),dr(x)}}}let h1="light";const R4=.65,O4="./data/parishes.json",H4="./data/orleansparishtopo.json",z4="./data/clippedtopo.json",V4="./data/franklin.json",K4="./data/restUS.json",G4="./data/wfel.json",q4="./data/bldg2005topo.json",W4="./data/bldg2023topo.json",X4="./data/statetopo.json",Z4="./data/facility.json",J4="./data/twp.json",Y4="./data/private.json",$4="./data/prison.json",e3="./data/estdocrev.json",t3="https://api.maptiler.com/maps/72c3ba93-41a4-4cb7-8f43-eb0d3c5797d7/style.json?key=FauA8RpnouVUuBS6hR1V",r3="https://api.maptiler.com/maps/hybrid/style.json?key=epSI7oxRYqxkl2HpZgcr";function Ou(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")}function n3(e,t,r){dl.start({click:!1}),Gh("theme",h1),fw(Nf,h1);let s=av(),l={},c={};Wa(()=>{c={...l}});const h=["parish"],a=["facility"],d={la:[[-95.0399448042286,28.595645625527535],[-88.58723191094903,33.39651900203391]],la2:[[-94.20437521837017,29.05549858060883],[-88.64342295552318,32.92697341963069]],lamobile:[[-94.16658071248452,25.45654294508548],[-89.31523133151606,35.632898417372274]],neworleans:[[-90.20218547121677,29.832442237380768],[-89.5287512047579,30.2826563423104]],neworleansmobile:[[-90.0994909234169,29.951175901295326],[-90.08906084005827,29.97318139970902]],orleansparishjail:[[-90.09584076786747,29.95885105594476],[-90.09124436292655,29.96202846489282]],angola:[[-91.64341265873233,30.93019793919344],[-91.56290347711851,30.9865779654985]],nolajailbldg:[[-90.1026537217127,29.956812140351577],[-90.08733946304126,29.965537706523364]],nolajailbldg2:[[-90.09702702023108,29.953342990656846],[-90.08936855325291,29.974661699522763]],nola2023:[[-90.09790954793945,29.95716669715467],[-90.0920981511653,29.962729653377394]]};let _={parish:{}},p={parish:{}},E={facility:{}},w={facility:{}},x,Q,k,R,P,O,G,V,Z,te,ce,he,Ce,fe=null,ee,re,be=[],me="admission",Re="none",_e=!1,He=0,Le=0,Je=0,ke=0,kt,ie,Se,Qe=0,Ke=0,ot=0,dt=0,Ge=Ga("#app").node().getBoundingClientRect().width;function rt(rr){r(19,re=rr.detail.feature.properties.AREANM),dl("/louisiana-locked-up/parish/"+re),rr.preventDefault()}function Qt(rr){dl("/louisiana-locked-up/parish/"+rr),rr.preventDefault()}function ht(rr){r(18,ee=rr.detail.id)}function Nt(rr){fe&&fe.fitBounds(rr,{animate:s,padding:30})}const gr={map:{map01:()=>{Nt(Ge<420?d.lamobile:d.la),r(21,me="admission"),r(20,be=[]),r(23,_e=!1),r(22,Re="none"),r(24,He=0),r(25,Le=0),r(26,Je=0),r(27,ke=0),r(29,ie=0),r(28,kt="rgba(0,0,0,0)"),r(30,Se="rgba(255,255,255,0)"),r(31,Qe=0),r(32,Ke=0),r(33,ot=0),r(34,dt=0)},map02:()=>{Nt(Ge<420?d.lamobile:d.la),r(21,me="pretrial"),r(20,be=[]),r(23,_e=!1),r(22,Re="none"),r(24,He=0),r(25,Le=0),r(26,Je=0),r(27,ke=0),r(29,ie=0),r(30,Se="rgba(255,255,255,0)"),r(31,Qe=0),r(32,Ke=0),r(33,ot=0),r(34,dt=0)},map03:()=>{Nt(Ge<420?d.lamobile:d.la),r(20,be=[]),r(21,me="over_1000_99"),r(23,_e=!1),r(22,Re="GT_1000_beds_99"),r(24,He=0),r(25,Le=0),r(26,Je=0),r(27,ke=0),r(28,kt=["case",["!=",["feature-state","color"],null],["feature-state","color"],"rgba(255, 255, 255, 0)"]),r(29,ie=["get","over_1000_99"]),r(30,Se="rgba(255, 255, 255, 1)"),r(31,Qe=0),r(32,Ke=0),r(33,ot=0),r(34,dt=0)},map04:()=>{r(20,be=[]),Nt(Ge<420?d.neworleansmobile:d.nolajailbldg),r(21,me="none"),r(23,_e=!1),r(22,Re=""),r(24,He=0),r(25,Le=1),r(26,Je=1),r(27,ke=0),r(28,kt=["case",["!=",["feature-state","color"],null],["feature-state","color"],"rgba(255, 255, 255, 0)"]),r(29,ie=0),r(30,Se="rgba(255,255,255,0)"),r(31,Qe=0),r(32,Ke=0),r(34,dt=0)},map05:()=>{Nt(Ge<420?d.neworleansmobile:d.nolajailbldg),r(20,be=[]),r(21,me="none"),r(23,_e=!1),r(22,Re=""),r(24,He=0),r(25,Le=1),r(26,Je=0),r(27,ke=1),r(28,kt=["case",["!=",["feature-state","color"],null],["feature-state","color"],"rgba(255, 255, 255, 0)"]),r(29,ie=0),r(30,Se="rgba(255,255,255,0)"),r(31,Qe=0),r(32,Ke=0),r(33,ot=0),r(34,dt=0)},map06:()=>{Nt(Ge<420?d.lamobile:d.la),r(20,be=[]),r(21,me="over_1000_19"),r(23,_e=!1),r(22,Re="GT_1000_beds_19"),r(24,He=0),r(25,Le=0),r(26,Je=0),r(27,ke=0),r(28,kt=["case",["!=",["feature-state","color"],null],["feature-state","color"],"rgba(255, 255, 255, 0)"]),r(29,ie=["get","GT_1000_beds_19"]),r(30,Se="rgba(255,255,255,1)"),r(31,Qe=0),r(32,Ke=0),r(33,ot=0),r(34,dt=0)},map07:()=>{Nt(Ge<420?d.lamobile:d.la),r(20,be=[]),r(21,me="none"),r(23,_e=!1),r(22,Re="map_jails"),r(24,He=0),r(25,Le=0),r(26,Je=0),r(27,ke=0),r(28,kt=["case",["!=",["feature-state","color"],null],["feature-state","color"],"rgba(255, 255, 255, 0)"]),r(29,ie=["get","map_jails"]),r(30,Se="rgba(255,255,255,1)"),r(31,Qe=0),r(32,Ke=0),r(33,ot=0),r(34,dt=0)},map08:()=>{Nt(Ge<420?d.lamobile:d.la),r(20,be=[]),r(21,me="none"),r(23,_e=!1),r(22,Re=""),r(24,He=0),r(25,Le=0),r(26,Je=0),r(27,ke=0),r(28,kt=["case",["!=",["feature-state","color"],null],["feature-state","color"],"rgba(255, 255, 255, 0)"]),r(29,ie=0),r(30,Se="rgba(255,255,255,0)"),r(31,Qe=0),r(32,Ke=0),r(33,ot=0),r(34,dt=1)},map09:()=>{Nt(Ge<420?d.lamobile:d.la),r(21,me="none"),r(20,be=[]),r(23,_e=!1),r(22,Re="map_twp"),r(24,He=0),r(25,Le=0),r(26,Je=0),r(27,ke=0),r(28,kt=["case",["!=",["feature-state","color"],null],["feature-state","color"],"rgba(255, 255, 255, 0)"]),r(29,ie=["get","map_twp"]),r(30,Se="rgba(255,255,255,1)"),r(31,Qe=1),r(32,Ke=0),r(33,ot=0),r(34,dt=0)},map10:()=>{Nt(Ge<420?d.lamobile:d.la),r(21,me="none"),r(20,be=[]),r(23,_e=!1),r(22,Re="map_private"),r(24,He=0),r(25,Le=0),r(26,Je=0),r(27,ke=0),r(28,kt=["case",["!=",["feature-state","color"],null],["feature-state","color"],"rgba(255, 255, 255, 0)"]),r(29,ie=["get","map_private"]),r(30,Se="rgba(255,255,255,1)"),r(31,Qe=0),r(32,Ke=1),r(33,ot=0),r(34,dt=0)},map11:()=>{Nt(Ge<420?d.lamobile:d.la),r(21,me="none"),r(20,be=[]),r(23,_e=!1),r(22,Re="map_prison"),r(24,He=0),r(25,Le=0),r(26,Je=0),r(27,ke=0),r(28,kt=["case",["!=",["feature-state","color"],null],["feature-state","color"],"rgba(255, 255, 255, 0)"]),r(29,ie=["get","map_prison"]),r(30,Se="rgba(255,255,255,1)"),r(31,Qe=0),r(32,Ke=0),r(33,ot=1),r(34,dt=0)},map12:()=>{Nt(d.angola),r(21,me="none"),r(20,be=[]),r(22,Re=""),r(23,_e=!1),r(24,He=1),r(25,Le=0),r(26,Je=0),r(27,ke=0),r(29,ie=0),r(28,kt=["case",["!=",["feature-state","color"],null],["feature-state","color"],"rgba(255, 255, 255, 0)"]),r(30,Se="rgba(255,255,255,0)"),r(31,Qe=0),r(32,Ke=0),r(33,ot=0),r(34,dt=0)},map13:()=>{Nt(Ge<420?d.lamobile:d.la),r(21,me="none"),r(20,be=[]),r(22,Re="map_all"),r(23,_e=!1),r(24,He=1),r(25,Le=0),r(26,Je=0),r(27,ke=0),r(28,kt="rgba(255,255,255,0)"),r(29,ie=.7),r(30,Se="rgba(0,0,0,1)"),r(31,Qe=0),r(32,Ke=0),r(33,ot=0),r(34,dt=0)},map14:()=>{Nt(Ge<420?d.lamobile:d.la),r(21,me="none"),r(20,be=[]),r(22,Re="map_all"),r(23,_e=!1),r(24,He=0),r(25,Le=0),r(26,Je=0),r(27,ke=0),r(28,kt=["match",["get","facility_type"],"Jail","rgba(46,29,151,.9)","Prison","rgba(0,92,229, 0.9)","Juvenile","rgba(235,65,44,.9)","TWP Facility","rgba(255,158,68,0.9)","Holding Cell","rgba(177, 188, 255, 0.9)","#ccc"]),r(29,ie=1),r(30,Se="rgba(255,255,255,1)"),r(31,Qe=0),r(32,Ke=0),r(33,ot=0),r(34,dt=0)},map15:()=>{Nt(Ge<420?d.lamobile:d.la),r(21,me="pretrial"),r(20,be=[]),r(22,Re="map_all"),r(24,He=0),r(25,Le=0),r(26,Je=0),r(27,ke=0),r(28,kt="rgba(255,255,255,0)"),r(29,ie=1),r(30,Se="rgba(255,255,255,1)"),r(31,Qe=0),r(32,Ke=0),r(33,ot=0),r(34,dt=0),r(23,_e=!0)}}};function Pt(rr=[]){rr.forEach(xr=>{l[xr]!=c[xr]&&(gr[xr][l[xr]]&&gr[xr][l[xr]](),c[xr]=l[xr])})}const ze=Zg("%m/%d/%y");h.forEach(rr=>{c0(`./data/data_${rr}.csv`).then(xr=>{xr.forEach(at=>{at.jail_pretrial_rate=+at.jail_pretrial_rate.toFixed(1),at.prison_adm_rate=+at.prison_adm_rate.toFixed(1),at.over_1000_19=+at.over_1000_19,at.over_1000_99=+at.over_1000_99});let Zr=xr.map(at=>({code:at.code,name:at.parish,prison_adm_count:at.prison_adm_count,year:at.year,prison_adm_rate:at.prison_adm_rate,total_pop:at.total_pop,jail_pretrial_rate:at.jail_pretrial_rate,total_jail_pretrial:at.total_jail_pretrial,pretrial_date:ze(at.pretrial_date)})),pn={};Zr.forEach(at=>{pn[at.code]=at}),r(2,p[rr].array=Zr,p),r(2,p[rr].lookup=pn,p);let vt=xr.map((at,bt)=>({...Zr[bt],pretrial:at.jail_pretrial_rate,admission:at.prison_adm_rate,over_1000_19:at.over_1000_19,over_1000_99:at.over_1000_99}));rr=="parish"&&["pretrial","admission","over_1000_19","over_1000_99"].forEach(at=>{let bt=vt.map(jt=>jt[at]).sort((jt,er)=>jt-er),Ct=h0(at,bt);vt.forEach((jt,er)=>vt[er][at+"_color"]=u0(jt[at],Ct,f0[at]))}),r(1,_[rr].indicators=vt,_)})}),a.forEach(rr=>{c0(`./data/data_${rr}.csv`).then(xr=>{xr.forEach(at=>{at.capacity=+at.capacity,at.ice_active=+at.ice_capacity,at.num_facilities=+at.num_facilities,at.twp=+at.twp,at.parish_hold=+at.parish_hold,at.total_pop=+at.total_pop,at.map_twp=+at.map_twp,at.map_private=+at.map_private,at.map_prison=+at.map_prison,at.GT99=+at.GT_1000_beds_99,at.GT_1000_beds_99=+at.GT_1000_beds_99,at.GT_1000_beds_19=+at.GT_1000_beds_19,at.map_jails=+at.map_jails,at.ice=+at.ice});let Zr=xr.map(at=>({uuid:at.uuid,name:at.facility_name})),pn={};Zr.forEach(at=>{pn[at.uuid]=at}),w[rr].array=Zr,w[rr].lookup=pn;let vt=xr.map((at,bt)=>({...Zr[bt],map_twp:at.map_twp,map_private:at.map_private,map_prison:at.map_prison,GT_1000_beds_99:at.GT_1000_beds_99,GT_1000_beds_19:at.GT_1000_beds_19,map_jails:at.map_jails,map_all:1,ice:at.ice,gt99:+at.GT99,capacity:+at.capacity,why:+at.why,ind:bt}));rr=="facility"&&["map_twp","map_private","map_prison","GT_1000_beds_99","GT_1000_beds_19","map_jails","map_all"].forEach(at=>{let bt=vt.map(jt=>jt[at]).sort((jt,er)=>jt-er),Ct=h0(at,bt);vt.forEach((jt,er)=>vt[er][at+"_color"]=u0(jt[at],Ct,f0[at]),vt[at+"_outline"]="#fff")}),r(3,E[rr].indicators=vt,E)})}),Mc(O4,"la").then(rr=>{rr.features.sort((xr,Zr)=>xr.properties.AREANM.localeCompare(Zr.properties.AREANM)),r(4,x=rr)}),Mc(H4,"orleansparish").then(rr=>{r(5,Q=rr)}),Mc(z4,"plantations").then(rr=>{r(6,k=rr)}),Mc(G4,"westfplantations").then(rr=>{r(8,P=rr)}),Mc(V4,"Franklin").then(rr=>{}),Mc(K4,"restUS").then(rr=>{r(7,R=rr)}),Mc(q4,"nolabldg").then(rr=>{r(9,O=rr)}),Mc(W4,"bldg2023").then(rr=>{r(10,G=rr)}),Mc(X4,"state").then(rr=>{r(11,V=rr)}),If(Z4,"facilities").then(rr=>{rr.features.sort((xr,Zr)=>Zr.properties.capacity-xr.properties.capacity),r(12,Z=rr)}),If(J4,"twp").then(rr=>{r(13,te=rr)}),If(Y4,"private").then(rr=>{r(14,ce=rr)}),If($4,"prison").then(rr=>{r(15,he=rr)}),If(e3,"estdocrev").then(rr=>{rr.features.forEach(xr=>{xr.properties.est_doc_rev!==null&&(xr.properties.rev="$"+Ou(xr.properties.est_doc_rev.toFixed(0)))}),r(16,Ce=rr)});const yr=Rp("%B %d, %Y");function sr(){re=Vm(this),r(19,re),r(4,x)}const Ht=()=>Qt(re);function pr(rr){fe=rr,r(17,fe)}function Br(){re=Vm(this),r(19,re),r(4,x)}const vr=()=>Qt(re);function Gr(rr){e.$$.not_equal(l.map,rr)&&(l.map=rr,r(0,l))}return e.$$.update=()=>{e.$$.dirty[0]&1&&l&&Pt(Object.keys(gr))},[l,_,p,E,x,Q,k,R,P,O,G,V,Z,te,ce,he,Ce,fe,ee,re,be,me,Re,_e,He,Le,Je,ke,kt,ie,Se,Qe,Ke,ot,dt,d,Ge,rt,Qt,ht,yr,sr,Ht,pr,Br,vr,Gr]}class i3 extends ii{constructor(t){super(),ni(this,t,n3,j4,ti,{},null,[-1,-1,-1])}}function s3(e){let t,r;return t=new i3({}),{c(){mr(t.$$.fragment)},m(s,l){fr(t,s,l),r=!0},p:bn,i(s){r||(Tt(t.$$.fragment,s),r=!0)},o(s){Kt(t.$$.fragment,s),r=!1},d(s){dr(t,s)}}}class f1 extends ii{constructor(t){super(),ni(this,t,null,s3,ti,{})}}function d1(e,t,r){const s=e.slice();return s[20]=t[r],s}function p1(e){let t,r=e[20].county+"",s,l,c;return{c(){t=Lt("option"),s=Fr(r),l=$t(),t.__value=c=e[20].county,t.value=t.__value},m(h,a){st(h,t,a),it(t,s),it(t,l)},p(h,a){a&2&&r!==(r=h[20].county+"")&&$n(s,r),a&2&&c!==(c=h[20].county)&&(t.__value=c,t.value=t.__value)},d(h){h&&nt(t)}}}function a3(e){let t,r,s,l,c,h,a,d,_,p,E,w,x,Q,k,R=e[1],P=[];for(let V=0;V<R.length;V+=1)P[V]=p1(d1(e,R,V));function O(V){e[8](V)}let G={style:r_,interactive:!0,controls:!0,location:{bounds:e[3].la},options:{minZoom:6.5}};return e[0]!==void 0&&(G.map=e[0]),_=new Lg({props:G}),qa.push(()=>Sg(_,"map",O)),{c(){t=Lt("div"),r=Lt("div"),r.innerHTML=`<div class="dotlegend-li svelte-vun94k"><div class="circ jail svelte-vun94k"></div>
      Jail</div> 
    <div class="dotlegend-li svelte-vun94k"><div class="circ prison svelte-vun94k"></div>
      Prison</div> 
    <div class="dotlegend-li svelte-vun94k"><div class="circ juvenile svelte-vun94k"></div>
      Juvenile</div> 
    <div class="dotlegend-li svelte-vun94k"><div class="circ twp svelte-vun94k"></div>
      TWP Facility</div> 
    <div class="dotlegend-li svelte-vun94k"><div class="circ holding svelte-vun94k"></div>
      Holding Cell</div>`,s=$t(),l=Lt("select"),c=Lt("option"),c.textContent="Select Parish";for(let V=0;V<P.length;V+=1)P[V].c();h=$t(),a=Lt("div"),d=Lt("div"),mr(_.$$.fragment),E=$t(),w=Lt("div"),w.innerHTML=`<div class="base"><div id="menu" class="svelte-vun94k"><div class="menu-item svelte-vun94k"><input id="streets" type="radio" name="rtoggle" value="streets" checked="checked" class="svelte-vun94k"/> 
            <label for="streets-v12" class="svelte-vun94k">streets</label></div> 
          <div class="menu-item svelte-vun94k"><input id="sat" type="radio" name="rtoggle" value="satellite" class="svelte-vun94k"/> 
            <label for="satellite-streets-v12" class="svelte-vun94k">satellite</label></div></div></div> 
      <div class="optional">Options:
        <ul><li>plantations</li></ul>
        Census data:
        <ul><li>census data a - race</li> 
          <li>census data b - edu</li> 
          <li>census data c - ?</li></ul></div>`,ue(r,"id","map_legend"),ue(r,"class","svelte-vun94k"),c.__value=null,c.value=c.__value,ue(l,"class","selectParish svelte-vun94k"),e[2]===void 0&&xu(()=>e[6].call(l)),ue(d,"id","map"),ue(d,"class","svelte-vun94k"),ue(w,"id","layers"),ue(w,"class","svelte-vun94k"),ue(a,"class","map-wrap svelte-vun94k"),ue(t,"id","group"),ue(t,"class","svelte-vun94k")},m(V,Z){st(V,t,Z),it(t,r),it(t,s),it(t,l),it(l,c);for(let te=0;te<P.length;te+=1)P[te].m(l,null);Vh(l,e[2]),it(t,h),it(t,a),it(a,d),fr(_,d,null),it(a,E),it(a,w),x=!0,Q||(k=[es(l,"change",e[6]),es(l,"change",e[7])],Q=!0)},p(V,[Z]){if(Z&2){R=V[1];let ce;for(ce=0;ce<R.length;ce+=1){const he=d1(V,R,ce);P[ce]?P[ce].p(he,Z):(P[ce]=p1(he),P[ce].c(),P[ce].m(l,null))}for(;ce<P.length;ce+=1)P[ce].d(1);P.length=R.length}Z&6&&Vh(l,V[2]);const te={};!p&&Z&1&&(p=!0,te.map=V[0],Fg(()=>p=!1)),_.$set(te)},i(V){x||(Tt(_.$$.fragment,V),x=!0)},o(V){Kt(_.$$.fragment,V),x=!1},d(V){V&&nt(t),Vl(P,V),dr(_),Q=!1,tA(k)}}}const r_="https://api.maptiler.com/maps/72c3ba93-41a4-4cb7-8f43-eb0d3c5797d7/style.json?key=FauA8RpnouVUuBS6hR1V",o3="https://api.maptiler.com/maps/hybrid/style.json?key=epSI7oxRYqxkl2HpZgcr";function m1(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")}function A3(e,t,r){let{parishTitle:s}=t,l,c=av(),h={},a,d=[],_=[],p=[],E;Wa(async()=>{const G=await pl("https://vera-insights-data-viz.s3.amazonaws.com/louisiana/la_bounding_boxes.csv");r(1,p=G);const V=G.filter(Z=>Z.county==s)[0];h={parish:[[+V.xmin,+V.ymax],[+V.xmax,+V.ymin]]},Q(h.parish)});const w={la:[[-95.0399448042286,28.595645625527535],[-88.58723191094903,33.39651900203391]]};function x(G){var V=G.features[0].properties.NAME;dl(V),V.preventDefault()}function Q(G){l&&l.fitBounds(G,{animate:c,padding:30})}Wa(async()=>{a=await(await fetch("https://vera-insights-data-viz.s3.amazonaws.com/louisiana/louisiana_parishes.json")).json(),a.features.forEach(function(ce){ce.properties.NAME==s?ce.properties.selected=1:ce.properties.selected=0});let V=null;d=await(await fetch("https://vera-insights-data-viz.s3.amazonaws.com/louisiana/points.json")).json(),d.features.forEach(ce=>{ce.properties.capacity=="N/A"?ce.properties.capacity=ce.properties.capacity:ce.properties.capacity=+ce.properties.capacity}),_={type:"FeatureCollection",features:d.features.filter(function(ce){return ce.properties.parish==s+" Parish"})},l.on("load",function(){l.addSource("parish_incarceration_rates",{type:"geojson",data:a,generateId:!0});const ce=l.getStyle().layers;let he;for(let re=0;re<ce.length;re++)if(ce[re].type==="symbol"){he=ce[re].id;break}l.addLayer({id:"parishes",source:"parish_incarceration_rates",type:"fill",paint:{"fill-color":["case",["==",["get","selected"],1],"#c9e3e7",["boolean",["feature-state","hovered"],!0],"#fff7f0","rgba(255,255,255,0)"],"fill-outline-color":"#000","fill-opacity":["case",["==",["get","selected"],1],.4,["boolean",["feature-state","hover"],!1],.5,0]}},he),l.addLayer({id:"parish-outlines",source:"parish_incarceration_rates",type:"line",paint:{"line-width":1.5}},he);var Ce=new zu.Popup({closeButton:!1,closeOnClick:!1});l.on("mousemove","parishes",re=>{re.features.length>0&&(V!==null&&l.setFeatureState({source:"parish_incarceration_rates",id:V},{hover:!1}),V=re.features[0].id,l.setFeatureState({source:"parish_incarceration_rates",id:V},{hover:!0})),l.getCanvas().style.cursor="pointer";var be=[re.lngLat.lng,re.lngLat.lat],me=re.features[0].properties.NAME_ALT;Ce.setLngLat(be).setHTML(me).addTo(l)}),l.on("click","parishes",re=>{var be=re.features[0].properties.NAME;let me=p.filter(_e=>_e.county==be)[0],Re={parish:[[+me.xmin,+me.ymax],[+me.xmax,+me.ymin]]};x(re),Q(Re.parish)}),l.on("mouseleave","parishes",()=>{V!==null&&l.setFeatureState({source:"parish_incarceration_rates",id:V},{hover:!1}),V=null}),l.addSource("facility_data",{type:"geojson",data:_,generateId:!0}),l.addLayer({id:"facilities",source:"facility_data",type:"circle",paint:{"circle-color":["match",["get","type"],"Jail","#223b53","Prison","#fbb03b","TWP Facility","#e55e5e","Juvenile","#3bb2d0","Holding Cell","#0cb74c","#ccc"],"circle-radius":["step",["get","capacity"],5,100,7,500,9,1e3,11,2e3,13,5e3,10]}}),l.on("mousemove","facilities",re=>{l.getCanvas().style.cursor="pointer";var be=[re.lngLat.lng,re.lngLat.lat];let me;re.features[0].properties.capacity=="N/A"?me="<strong>"+re.features[0].properties.facility_name+"</strong><br/>Type: "+re.features[0].properties.type+"<br/>Capacity: "+m1(re.features[0].properties.capacity)+"<br/>Operator: "+re.features[0].properties.operator:me="<strong>"+re.features[0].properties.facility_name+"</strong><br/>Type: "+re.features[0].properties.type+"<br/>Capacity: "+m1(re.features[0].properties.capacity)+" beds<br/>Operator: "+re.features[0].properties.operator,Ce.setLngLat(be).setHTML(me).addTo(l)}),l.on("mouseleave","facilities",()=>{V=null});const ee=document.getElementById("menu").getElementsByTagName("input");for(const re of ee)re.onclick=be=>{console.log("layer",be);const me=be.target.id;console.log("layerId",me),me=="sat"?l.setStyle(o3):me=="streets"&&l.setStyle(r_)}})});function k(G){dl(G),G.preventDefault()}function R(){E=Vm(this),r(2,E),r(1,p)}const P=()=>k(E);function O(G){l=G,r(0,l)}return e.$$set=G=>{"parishTitle"in G&&r(5,s=G.parishTitle)},[l,p,E,w,k,s,R,P,O]}class l3 extends ii{constructor(t){super(),ni(this,t,A3,a3,ti,{parishTitle:5})}}function c3(e){return e===0?!0:e}function mu(e){return c3(e)?Array.isArray(e)?t=>e.map(r=>typeof r!="function"?t[r]:r(t)):typeof e!="function"?t=>t[e]:e:null}function u3(e){const t={};for(const r of e){if(Object(r)!==r)throw new TypeError("iterable for fromEntries should yield objects");const{"0":s,"1":l}=r;Object.defineProperty(t,s,{configurable:!0,enumerable:!0,writable:!0,value:l})}return t}function Qm(e,t={}){return u3(Object.entries(e).filter(([r,s])=>s!==void 0&&t[r]===void 0))}function h3(e,t,{sort:r=!1}={}){if(!Array.isArray(e))throw new TypeError(`The first argument of calcUniques() must be an array. You passed in a ${typeof e}. If you got this error using the <LayerCake> component, consider passing a flat array to the \`flatData\` prop. More info: https://layercake.graphics/guide/#flatdata`);if(Array.isArray(t)||t===void 0||t===null)throw new TypeError("The second argument of calcUniques() must be an object with field names as keys as accessor functions as values.");const s={},l=Object.keys(t),c=l.length;let h,a,d,_,p,E,w;const x=e.length;for(h=0;h<c;h+=1){for(w=new Set,_=l[h],p=t[_],a=0;a<x;a+=1)if(E=p(e[a]),Array.isArray(E)){const k=E.length;for(d=0;d<k;d+=1)w.add(E[d])}else w.add(E);const Q=Array.from(w);s[_]=r===!0?Q.sort():Q}return s}function f3(e,t){if(!Array.isArray(e))throw new TypeError(`The first argument of calcExtents() must be an array. You passed in a ${typeof e}. If you got this error using the <LayerCake> component, consider passing a flat array to the \`flatData\` prop. More info: https://layercake.graphics/guide/#flatdata`);if(Array.isArray(t)||t===void 0||t===null)throw new TypeError("The second argument of calcExtents() must be an object with field names as keys as accessor functions as values.");const r={},s=Object.keys(t),l=s.length;let c,h,a,d,_,p,E,w;const x=e.length;for(c=0;c<l;c+=1){for(d=s[c],E=t[d],_=null,p=null,h=0;h<x;h+=1)if(w=E(e[h]),Array.isArray(w)){const Q=w.length;for(a=0;a<Q;a+=1)w[a]!==!1&&w[a]!==void 0&&w[a]!==null&&Number.isNaN(w[a])===!1&&((_===null||w[a]<_)&&(_=w[a]),(p===null||w[a]>p)&&(p=w[a]))}else w!==!1&&w!==void 0&&w!==null&&Number.isNaN(w)===!1&&((_===null||w<_)&&(_=w),(p===null||w>p)&&(p=w));r[d]=[_,p]}return r}function d3(e){return typeof e.bandwidth=="function"||p3(Object.keys(e),["domain","range","unknown","copy"])?"ordinal":"other"}function p3(e,t){return e.length!==t.length?!1:e.every(r=>t.includes(r))}function m3(e,t,r){const s=Object.keys(r).reduce((c,h)=>{const a=d3(r[h]);return c[a]||(c[a]={}),c[a][h]=t[h],c},{ordinal:!1,other:!1});let l={};return s.ordinal&&(l=h3(e,s.ordinal)),s.other&&(l={...l,...f3(e,s.other)}),l}function g3(e=[],t){return Array.isArray(t)===!0?t.map((r,s)=>r===null?e[s]:r):e}function $d(e){return function([r,s]){return typeof s=="function"&&(s=s(r[e])),r?g3(r[e],s):s}}const Of={x:wu,y:wu,z:wu,r:oC};function y3(e){return e.constant?"symlog":e.base?"log":e.exponent?e.exponent()===.5?"sqrt":"pow":"other"}function g1(e){return e}function v3(e){return t=>Math.log(e*t)}function _3(e){return t=>e*Math.exp(t)}function w3(e){return t=>Math.sign(t)*Math.log1p(Math.abs(t/e))}function b3(e){return t=>Math.sign(t)*Math.expm1(Math.abs(t))*e}function ep(e){return function(r){return r<0?-Math.pow(-r,e):Math.pow(r,e)}}function x3(e){const t=y3(e);if(t==="log"){const r=Math.sign(e.domain()[0]);return{lift:v3(r),ground:_3(r),scaleType:t}}return t==="pow"?{lift:ep(1),ground:ep(1/1),scaleType:t}:t==="sqrt"?{lift:ep(.5),ground:ep(1/.5),scaleType:t}:t==="symlog"?{lift:w3(1),ground:b3(1),scaleType:t}:{lift:g1,ground:g1,scaleType:t}}function B3(e,t){if(typeof e.range!="function")throw new Error("Scale method `range` must be a function");if(typeof e.domain!="function")throw new Error("Scale method `domain` must be a function");if(!Array.isArray(t))return e.domain();e.domain().length!==2&&console.warn("[LayerCake] The scale is expected to have a domain of length 2 to use padding. Are you sure you want to use padding? Your scale's domain is:",e.domain()),e.range().length!==2&&console.warn("[LayerCake] The scale is expected to have a range of length 2 to use padding. Are you sure you want to use padding? Your scale's range is:",e.range());const{lift:r,ground:s}=x3(e),l=e.domain()[0],c=Object.prototype.toString.call(l)==="[object Date]",[h,a]=e.domain().map(x=>r(c?x.getTime():x)),[d,_]=e.range(),p=t[0]||0,E=t[1]||0,w=(a-h)/(Math.abs(_-d)-p-E);return[h-p*w,E*w+a].map(x=>s(c?new Date(x):x))}function C3(e,t,r,s,l){let c,h;return l===!0?(c=0,h=100):(c=e==="r"?1:0,h=e==="y"?r:e==="r"?25:t),s===!0?[h,c]:[c,h]}function E3(e,t,r,s,l,c){return l?typeof l=="function"?l({width:t,height:r}):l:C3(e,t,r,s,c)}function tp(e){return function([r,s,l,c,h,a,d,_,p,E]){if(s===null)return null;const w=E3(e,d,_,a,p,E),x=r===Of[e]?r():r.copy();return x.domain(l),(!x.interpolator||typeof x.interpolator=="function"&&x.interpolator().name.startsWith("identity"))&&x.range(w),c&&x.domain(B3(x,c)),(h===!0||typeof h=="number")&&(typeof x.nice=="function"?x.nice(typeof h=="number"?h:void 0):console.error(`[Layer Cake] You set \`${e}Nice: true\` but the ${e}Scale does not have a \`.nice\` method. Ignoring...`)),x}}function rp([e,t]){return r=>{const s=e(r);return Array.isArray(s)?s.map(l=>t(l)):t(s)}}function np([e]){if(typeof e=="function"){if(typeof e.range=="function")return e.range();console.error("[LayerCake] Your scale doesn't have a `.range` method?")}return null}const F3=e=>({element:e[0]&4,width:e[0]&256,height:e[0]&512,aspectRatio:e[0]&1024,containerWidth:e[0]&128,containerHeight:e[0]&64}),y1=e=>({element:e[2],width:e[8],height:e[9],aspectRatio:e[10],containerWidth:e[7],containerHeight:e[6]});function v1(e){let t,r,s;const l=e[90].default,c=wA(l,e,e[89],y1);return{c(){t=Lt("div"),c&&c.c(),ue(t,"class","layercake-container svelte-vhzpsp"),xu(()=>e[92].call(t)),kn(t,"position",e[5]),kn(t,"top",e[5]==="absolute"?"0":null),kn(t,"right",e[5]==="absolute"?"0":null),kn(t,"bottom",e[5]==="absolute"?"0":null),kn(t,"left",e[5]==="absolute"?"0":null),kn(t,"pointer-events",e[4]===!1?"none":null)},m(h,a){st(h,t,a),c&&c.m(t,null),e[91](t),r=M_(t,e[92].bind(t)),s=!0},p(h,a){c&&c.p&&(!s||a[0]&1988|a[2]&134217728)&&xA(c,l,h,h[89],s?bA(l,h[89],a,F3):BA(h[89]),y1),a[0]&32&&kn(t,"position",h[5]),a[0]&32&&kn(t,"top",h[5]==="absolute"?"0":null),a[0]&32&&kn(t,"right",h[5]==="absolute"?"0":null),a[0]&32&&kn(t,"bottom",h[5]==="absolute"?"0":null),a[0]&32&&kn(t,"left",h[5]==="absolute"?"0":null),a[0]&16&&kn(t,"pointer-events",h[4]===!1?"none":null)},i(h){s||(Tt(c,h),s=!0)},o(h){Kt(c,h),s=!1},d(h){h&&nt(t),c&&c.d(h),e[91](null),r()}}}function S3(e){let t,r,s=(e[3]===!0||typeof window<"u")&&v1(e);return{c(){s&&s.c(),t=yo()},m(l,c){s&&s.m(l,c),st(l,t,c),r=!0},p(l,c){l[3]===!0||typeof window<"u"?s?(s.p(l,c),c[0]&8&&Tt(s,1)):(s=v1(l),s.c(),Tt(s,1),s.m(t.parentNode,t)):s&&(Xa(),Kt(s,1,1,()=>{s=null}),Za())},i(l){r||(Tt(s),r=!0)},o(l){Kt(s),r=!1},d(l){s&&s.d(l),l&&nt(t)}}}function I3(e,t,r){let s,l,c,h,a,d,_,p,E,w,x,Q,k,R,P,O,G,V,Z,te,ce,he,Ce,fe,ee,re,be,me,Re,_e,He,Le,Je,ke,kt,ie,Se,Qe,Ke,ot,dt,{$$slots:Bt={},$$scope:Ge}=t,{ssr:rt=!1}=t,{pointerEvents:Qt=!0}=t,{position:ht="relative"}=t,{percentRange:Nt=!1}=t,{width:gr=void 0}=t,{height:Pt=void 0}=t,{containerWidth:ze=gr||100}=t,{containerHeight:yr=Pt||100}=t,{element:sr=void 0}=t,{x:Ht=void 0}=t,{y:pr=void 0}=t,{z:Br=void 0}=t,{r:vr=void 0}=t,{data:Gr=[]}=t,{xDomain:rr=void 0}=t,{yDomain:xr=void 0}=t,{zDomain:Zr=void 0}=t,{rDomain:pn=void 0}=t,{xNice:vt=!1}=t,{yNice:at=!1}=t,{zNice:bt=!1}=t,{rNice:Ct=!1}=t,{xPadding:jt=void 0}=t,{yPadding:er=void 0}=t,{zPadding:Vr=void 0}=t,{rPadding:Sr=void 0}=t,{xScale:un=Of.x}=t,{yScale:lr=Of.y}=t,{zScale:Er=Of.z}=t,{rScale:An=Of.r}=t,{xRange:wn=void 0}=t,{yRange:_i=void 0}=t,{zRange:br=void 0}=t,{rRange:Cr=void 0}=t,{xReverse:cr=!1}=t,{yReverse:Kr=typeof lr.bandwidth!="function"}=t,{zReverse:hn=!1}=t,{rReverse:xn=!1}=t,{padding:Sn={}}=t,{extents:ji={}}=t,{flatData:tn=void 0}=t,{custom:Wi={}}=t,hs=!1;Wa(()=>{hs=!0});const Ln={},nn=ui(Nt);$r(e,nn,gt=>r(128,Qe=gt));const Te=ui(ze);$r(e,Te,gt=>r(7,Se=gt));const Y=ui(yr);$r(e,Y,gt=>r(6,ie=gt));const Ae=ui(Qm(ji));$r(e,Ae,gt=>r(127,kt=gt));const Ee=ui(Gr);$r(e,Ee,gt=>r(126,ke=gt));const Ue=ui(tn||Gr);$r(e,Ue,gt=>r(125,Je=gt));const Xe=ui(Sn);$r(e,Xe,gt=>r(124,Le=gt));const lt=ui(mu(Ht));$r(e,lt,gt=>r(123,He=gt));const $e=ui(mu(pr));$r(e,$e,gt=>r(122,_e=gt));const qe=ui(mu(Br));$r(e,qe,gt=>r(121,Re=gt));const ut=ui(mu(vr));$r(e,ut,gt=>r(120,me=gt));const Ot=ui(rr);$r(e,Ot,gt=>r(119,be=gt));const nr=ui(xr);$r(e,nr,gt=>r(118,re=gt));const zt=ui(Zr);$r(e,zt,gt=>r(117,ee=gt));const jr=ui(pn);$r(e,jr,gt=>r(116,fe=gt));const Hr=ui(vt);$r(e,Hr,gt=>r(115,Ce=gt));const Tr=ui(at);$r(e,Tr,gt=>r(114,he=gt));const ln=ui(bt);$r(e,ln,gt=>r(113,ce=gt));const dn=ui(Ct);$r(e,dn,gt=>r(112,te=gt));const In=ui(cr);$r(e,In,gt=>r(111,Z=gt));const mn=ui(Kr);$r(e,mn,gt=>r(110,V=gt));const Bn=ui(hn);$r(e,Bn,gt=>r(109,G=gt));const Qn=ui(xn);$r(e,Qn,gt=>r(108,O=gt));const Vn=ui(jt);$r(e,Vn,gt=>r(107,P=gt));const Ti=ui(er);$r(e,Ti,gt=>r(106,R=gt));const oi=ui(Vr);$r(e,oi,gt=>r(105,k=gt));const wi=ui(Sr);$r(e,wi,gt=>r(104,Q=gt));const ks=ui(wn);$r(e,ks,gt=>r(103,x=gt));const bi=ui(_i);$r(e,bi,gt=>r(102,w=gt));const Yn=ui(br);$r(e,Yn,gt=>r(101,E=gt));const Ya=ui(Cr);$r(e,Ya,gt=>r(100,p=gt));const Ks=ui(un);$r(e,Ks,gt=>r(99,_=gt));const Gs=ui(lr);$r(e,Gs,gt=>r(98,d=gt));const ia=ui(Er);$r(e,ia,gt=>r(97,a=gt));const gs=ui(An);$r(e,gs,gt=>r(96,h=gt));const Ri=ui(Ln);$r(e,Ri,gt=>r(94,l=gt));const Xi=ui(Wi);$r(e,Xi,gt=>r(95,c=gt));const vo=Ms([lt,$e,qe,ut],([gt,Mn,Ds,Oi])=>{const Qs={};return gt&&(Qs.x=gt),Mn&&(Qs.y=Mn),Ds&&(Qs.z=Ds),Oi&&(Qs.r=Oi),Qs}),nA=Ms([Xe,Te,Y],([gt])=>Object.assign({top:0,right:0,bottom:0,left:0},gt)),EA=Ms([Te,Y,nA],([gt,Mn,Ds])=>{const Oi={};return Oi.top=Ds.top,Oi.right=gt-Ds.right,Oi.bottom=Mn-Ds.bottom,Oi.left=Ds.left,Oi.width=Oi.right-Oi.left,Oi.height=Oi.bottom-Oi.top,Oi.width<=0&&hs===!0&&console.warn("[LayerCake] Target div has zero or negative width. Did you forget to set an explicit width in CSS on the container?"),Oi.height<=0&&hs===!0&&console.warn("[LayerCake] Target div has zero or negative height. Did you forget to set an explicit height in CSS on the container?"),Oi}),sa=Ms([EA],([gt])=>gt.width);$r(e,sa,gt=>r(8,Ke=gt));const bs=Ms([EA],([gt])=>gt.height);$r(e,bs,gt=>r(9,ot=gt));const xs=Ms([Ue,vo,Ae,Ks,Gs,gs,ia],([gt,Mn,Ds,Oi,Qs,ya,eo])=>{const Cs={x:Oi,y:Qs,r:ya,z:eo},Aa=Qm(Mn,Ds),to=Object.fromEntries(Object.keys(Aa).map(va=>[va,Cs[va]]));return Object.keys(Aa).length>0?{...m3(gt,Aa,to),...Ds}:{}}),$a=Ms([xs,Ot],$d("x")),aa=Ms([xs,nr],$d("y")),Mo=Ms([xs,zt],$d("z")),Qa=Ms([xs,jr],$d("r")),Do=Ms([Ks,xs,$a,Vn,Hr,In,sa,bs,ks,nn],tp("x")),oa=Ms([lt,Do],rp),qs=Ms([Gs,xs,aa,Ti,Tr,mn,sa,bs,bi,nn],tp("y")),si=Ms([$e,qs],rp),Bs=Ms([ia,xs,Mo,oi,ln,Bn,sa,bs,Yn,nn],tp("z")),ys=Ms([qe,Bs],rp),iA=Ms([gs,xs,Qa,wi,dn,Qn,sa,bs,Ya,nn],tp("r")),sA=Ms([ut,iA],rp),Cn=Ms([Do],np),GA=Ms([qs],np),ml=Ms([Bs],np),Pa=Ms([iA],np),_o=Ms([sa,bs],([gt,Mn])=>gt/Mn);$r(e,_o,gt=>r(10,dt=gt));function aA(gt){qa[gt?"unshift":"push"](()=>{sr=gt,r(2,sr)})}function wo(){ze=this.clientWidth,yr=this.clientHeight,r(0,ze),r(1,yr)}return e.$$set=gt=>{"ssr"in gt&&r(3,rt=gt.ssr),"pointerEvents"in gt&&r(4,Qt=gt.pointerEvents),"position"in gt&&r(5,ht=gt.position),"percentRange"in gt&&r(51,Nt=gt.percentRange),"width"in gt&&r(52,gr=gt.width),"height"in gt&&r(53,Pt=gt.height),"containerWidth"in gt&&r(0,ze=gt.containerWidth),"containerHeight"in gt&&r(1,yr=gt.containerHeight),"element"in gt&&r(2,sr=gt.element),"x"in gt&&r(54,Ht=gt.x),"y"in gt&&r(55,pr=gt.y),"z"in gt&&r(56,Br=gt.z),"r"in gt&&r(57,vr=gt.r),"data"in gt&&r(58,Gr=gt.data),"xDomain"in gt&&r(59,rr=gt.xDomain),"yDomain"in gt&&r(60,xr=gt.yDomain),"zDomain"in gt&&r(61,Zr=gt.zDomain),"rDomain"in gt&&r(62,pn=gt.rDomain),"xNice"in gt&&r(63,vt=gt.xNice),"yNice"in gt&&r(64,at=gt.yNice),"zNice"in gt&&r(65,bt=gt.zNice),"rNice"in gt&&r(66,Ct=gt.rNice),"xPadding"in gt&&r(67,jt=gt.xPadding),"yPadding"in gt&&r(68,er=gt.yPadding),"zPadding"in gt&&r(69,Vr=gt.zPadding),"rPadding"in gt&&r(70,Sr=gt.rPadding),"xScale"in gt&&r(71,un=gt.xScale),"yScale"in gt&&r(72,lr=gt.yScale),"zScale"in gt&&r(73,Er=gt.zScale),"rScale"in gt&&r(74,An=gt.rScale),"xRange"in gt&&r(75,wn=gt.xRange),"yRange"in gt&&r(76,_i=gt.yRange),"zRange"in gt&&r(77,br=gt.zRange),"rRange"in gt&&r(78,Cr=gt.rRange),"xReverse"in gt&&r(79,cr=gt.xReverse),"yReverse"in gt&&r(80,Kr=gt.yReverse),"zReverse"in gt&&r(81,hn=gt.zReverse),"rReverse"in gt&&r(82,xn=gt.rReverse),"padding"in gt&&r(83,Sn=gt.padding),"extents"in gt&&r(84,ji=gt.extents),"flatData"in gt&&r(85,tn=gt.flatData),"custom"in gt&&r(86,Wi=gt.custom),"$$scope"in gt&&r(89,Ge=gt.$$scope)},e.$$.update=()=>{e.$$.dirty[1]&8388608&&Ht&&r(87,Ln.x=Ht,Ln),e.$$.dirty[1]&16777216&&pr&&r(87,Ln.y=pr,Ln),e.$$.dirty[1]&33554432&&Br&&r(87,Ln.z=Br,Ln),e.$$.dirty[1]&67108864&&vr&&r(87,Ln.r=vr,Ln),e.$$.dirty[1]&268435456&&rr&&r(87,Ln.xDomain=rr,Ln),e.$$.dirty[1]&536870912&&xr&&r(87,Ln.yDomain=xr,Ln),e.$$.dirty[1]&1073741824&&Zr&&r(87,Ln.zDomain=Zr,Ln),e.$$.dirty[2]&1&&pn&&r(87,Ln.rDomain=pn,Ln),e.$$.dirty[2]&8192&&wn&&r(87,Ln.xRange=wn,Ln),e.$$.dirty[2]&16384&&_i&&r(87,Ln.yRange=_i,Ln),e.$$.dirty[2]&32768&&br&&r(87,Ln.zRange=br,Ln),e.$$.dirty[2]&65536&&Cr&&r(87,Ln.rRange=Cr,Ln),e.$$.dirty[1]&1048576&&vi(nn,Qe=Nt,Qe),e.$$.dirty[0]&1&&vi(Te,Se=ze,Se),e.$$.dirty[0]&2&&vi(Y,ie=yr,ie),e.$$.dirty[2]&4194304&&vi(Ae,kt=Qm(ji),kt),e.$$.dirty[1]&134217728&&vi(Ee,ke=Gr,ke),e.$$.dirty[1]&134217728|e.$$.dirty[2]&8388608&&vi(Ue,Je=tn||Gr,Je),e.$$.dirty[2]&2097152&&vi(Xe,Le=Sn,Le),e.$$.dirty[1]&8388608&&vi(lt,He=mu(Ht),He),e.$$.dirty[1]&16777216&&vi($e,_e=mu(pr),_e),e.$$.dirty[1]&33554432&&vi(qe,Re=mu(Br),Re),e.$$.dirty[1]&67108864&&vi(ut,me=mu(vr),me),e.$$.dirty[1]&268435456&&vi(Ot,be=rr,be),e.$$.dirty[1]&536870912&&vi(nr,re=xr,re),e.$$.dirty[1]&1073741824&&vi(zt,ee=Zr,ee),e.$$.dirty[2]&1&&vi(jr,fe=pn,fe),e.$$.dirty[2]&2&&vi(Hr,Ce=vt,Ce),e.$$.dirty[2]&4&&vi(Tr,he=at,he),e.$$.dirty[2]&8&&vi(ln,ce=bt,ce),e.$$.dirty[2]&16&&vi(dn,te=Ct,te),e.$$.dirty[2]&131072&&vi(In,Z=cr,Z),e.$$.dirty[2]&262144&&vi(mn,V=Kr,V),e.$$.dirty[2]&524288&&vi(Bn,G=hn,G),e.$$.dirty[2]&1048576&&vi(Qn,O=xn,O),e.$$.dirty[2]&32&&vi(Vn,P=jt,P),e.$$.dirty[2]&64&&vi(Ti,R=er,R),e.$$.dirty[2]&128&&vi(oi,k=Vr,k),e.$$.dirty[2]&256&&vi(wi,Q=Sr,Q),e.$$.dirty[2]&8192&&vi(ks,x=wn,x),e.$$.dirty[2]&16384&&vi(bi,w=_i,w),e.$$.dirty[2]&32768&&vi(Yn,E=br,E),e.$$.dirty[2]&65536&&vi(Ya,p=Cr,p),e.$$.dirty[2]&512&&vi(Ks,_=un,_),e.$$.dirty[2]&1024&&vi(Gs,d=lr,d),e.$$.dirty[2]&2048&&vi(ia,a=Er,a),e.$$.dirty[2]&4096&&vi(gs,h=An,h),e.$$.dirty[2]&16777216&&vi(Xi,c=Wi,c),e.$$.dirty[2]&33554432&&vi(Ri,l=Ln,l),e.$$.dirty[2]&67108864&&Gh("LayerCake",s)},r(88,s={activeGetters:vo,width:sa,height:bs,percentRange:nn,aspectRatio:_o,containerWidth:Te,containerHeight:Y,x:lt,y:$e,z:qe,r:ut,custom:Xi,data:Ee,xNice:Hr,yNice:Tr,zNice:ln,rNice:dn,xReverse:In,yReverse:mn,zReverse:Bn,rReverse:Qn,xPadding:Vn,yPadding:Ti,zPadding:oi,rPadding:wi,padding:nA,flatData:Ue,extents:xs,xDomain:$a,yDomain:aa,zDomain:Mo,rDomain:Qa,xRange:Cn,yRange:GA,zRange:ml,rRange:Pa,config:Ri,xScale:Do,xGet:oa,yScale:qs,yGet:si,zScale:Bs,zGet:ys,rScale:iA,rGet:sA}),[ze,yr,sr,rt,Qt,ht,ie,Se,Ke,ot,dt,nn,Te,Y,Ae,Ee,Ue,Xe,lt,$e,qe,ut,Ot,nr,zt,jr,Hr,Tr,ln,dn,In,mn,Bn,Qn,Vn,Ti,oi,wi,ks,bi,Yn,Ya,Ks,Gs,ia,gs,Ri,Xi,sa,bs,_o,Nt,gr,Pt,Ht,pr,Br,vr,Gr,rr,xr,Zr,pn,vt,at,bt,Ct,jt,er,Vr,Sr,un,lr,Er,An,wn,_i,br,Cr,cr,Kr,hn,xn,Sn,ji,tn,Wi,Ln,s,Ge,Bt,aA,wo]}class nh extends ii{constructor(t){super(),ni(this,t,I3,S3,ti,{ssr:3,pointerEvents:4,position:5,percentRange:51,width:52,height:53,containerWidth:0,containerHeight:1,element:2,x:54,y:55,z:56,r:57,data:58,xDomain:59,yDomain:60,zDomain:61,rDomain:62,xNice:63,yNice:64,zNice:65,rNice:66,xPadding:67,yPadding:68,zPadding:69,rPadding:70,xScale:71,yScale:72,zScale:73,rScale:74,xRange:75,yRange:76,zRange:77,rRange:78,xReverse:79,yReverse:80,zReverse:81,rReverse:82,padding:83,extents:84,flatData:85,custom:86},null,[-1,-1,-1,-1,-1])}}const T3=e=>({element:e&1}),_1=e=>({element:e[0]});function U3(e){let t,r;const s=e[6].default,l=wA(s,e,e[5],_1);return{c(){t=Lt("div"),l&&l.c(),ue(t,"class","layercake-layout-html svelte-1bu60uu"),kn(t,"z-index",e[1]),kn(t,"pointer-events",e[2]===!1?"none":null),kn(t,"top",e[3].top+"px"),kn(t,"right",e[3].right+"px"),kn(t,"bottom",e[3].bottom+"px"),kn(t,"left",e[3].left+"px")},m(c,h){st(c,t,h),l&&l.m(t,null),e[7](t),r=!0},p(c,[h]){l&&l.p&&(!r||h&33)&&xA(l,s,c,c[5],r?bA(s,c[5],h,T3):BA(c[5]),_1),h&2&&kn(t,"z-index",c[1]),h&4&&kn(t,"pointer-events",c[2]===!1?"none":null),h&8&&kn(t,"top",c[3].top+"px"),h&8&&kn(t,"right",c[3].right+"px"),h&8&&kn(t,"bottom",c[3].bottom+"px"),h&8&&kn(t,"left",c[3].left+"px")},i(c){r||(Tt(l,c),r=!0)},o(c){Kt(l,c),r=!1},d(c){c&&nt(t),l&&l.d(c),e[7](null)}}}function L3(e,t,r){let s,{$$slots:l={},$$scope:c}=t,{element:h=void 0}=t,{zIndex:a=void 0}=t,{pointerEvents:d=void 0}=t;const{padding:_}=$o("LayerCake");$r(e,_,E=>r(3,s=E));function p(E){qa[E?"unshift":"push"](()=>{h=E,r(0,h)})}return e.$$set=E=>{"element"in E&&r(0,h=E.element),"zIndex"in E&&r(1,a=E.zIndex),"pointerEvents"in E&&r(2,d=E.pointerEvents),"$$scope"in E&&r(5,c=E.$$scope)},[h,a,d,s,_,c,l,p]}class ah extends ii{constructor(t){super(),ni(this,t,L3,U3,ti,{element:0,zIndex:1,pointerEvents:2})}}const k3=e=>({element:e&1}),w1=e=>({element:e[0]}),Q3=e=>({element:e&1}),b1=e=>({element:e[0]});function P3(e){let t,r,s,l,c;const h=e[12].defs,a=wA(h,e,e[11],b1),d=e[12].default,_=wA(d,e,e[11],w1);return{c(){t=Gn("svg"),r=Gn("defs"),a&&a.c(),s=Gn("g"),_&&_.c(),ue(s,"class","layercake-layout-svg_g"),ue(s,"transform",l="translate("+e[7].left+", "+e[7].top+")"),ue(t,"class","layercake-layout-svg svelte-u84d8d"),ue(t,"viewBox",e[4]),ue(t,"width",e[5]),ue(t,"height",e[6]),kn(t,"z-index",e[2]),kn(t,"pointer-events",e[3]===!1?"none":null)},m(p,E){st(p,t,E),it(t,r),a&&a.m(r,null),it(t,s),_&&_.m(s,null),e[13](s),e[14](t),c=!0},p(p,[E]){a&&a.p&&(!c||E&2049)&&xA(a,h,p,p[11],c?bA(h,p[11],E,Q3):BA(p[11]),b1),_&&_.p&&(!c||E&2049)&&xA(_,d,p,p[11],c?bA(d,p[11],E,k3):BA(p[11]),w1),(!c||E&128&&l!==(l="translate("+p[7].left+", "+p[7].top+")"))&&ue(s,"transform",l),(!c||E&16)&&ue(t,"viewBox",p[4]),(!c||E&32)&&ue(t,"width",p[5]),(!c||E&64)&&ue(t,"height",p[6]),E&4&&kn(t,"z-index",p[2]),E&8&&kn(t,"pointer-events",p[3]===!1?"none":null)},i(p){c||(Tt(a,p),Tt(_,p),c=!0)},o(p){Kt(a,p),Kt(_,p),c=!1},d(p){p&&nt(t),a&&a.d(p),_&&_.d(p),e[13](null),e[14](null)}}}function M3(e,t,r){let s,l,c,{$$slots:h={},$$scope:a}=t,{element:d=void 0}=t,{innerElement:_=void 0}=t,{zIndex:p=void 0}=t,{pointerEvents:E=void 0}=t,{viewBox:w=void 0}=t;const{containerWidth:x,containerHeight:Q,padding:k}=$o("LayerCake");$r(e,x,O=>r(5,s=O)),$r(e,Q,O=>r(6,l=O)),$r(e,k,O=>r(7,c=O));function R(O){qa[O?"unshift":"push"](()=>{_=O,r(1,_)})}function P(O){qa[O?"unshift":"push"](()=>{d=O,r(0,d)})}return e.$$set=O=>{"element"in O&&r(0,d=O.element),"innerElement"in O&&r(1,_=O.innerElement),"zIndex"in O&&r(2,p=O.zIndex),"pointerEvents"in O&&r(3,E=O.pointerEvents),"viewBox"in O&&r(4,w=O.viewBox),"$$scope"in O&&r(11,a=O.$$scope)},[d,_,p,E,w,s,l,c,x,Q,k,a,h,R,P]}class oh extends ii{constructor(t){super(),ni(this,t,M3,P3,ti,{element:0,innerElement:1,zIndex:2,pointerEvents:3,viewBox:4})}}function x1(e,t,r){const s=e.slice();return s[18]=t[r],s[20]=r,s}function B1(e){let t,r,s,l,c,h,a;function d(...E){return e[13](e[18],...E)}function _(...E){return e[14](e[18],...E)}function p(...E){return e[15](e[18],...E)}return{c(){t=Gn("rect"),ue(t,"class","group-rect"),ue(t,"data-id",e[20]),ue(t,"x",r=e[2].range()[0]),ue(t,"y",s=e[3](e[18])),ue(t,"height",l=e[4].bandwidth()),ue(t,"width",c=e[5](e[18])),ue(t,"fill",e[0])},m(E,w){st(E,t,w),h||(a=[es(t,"mouseover",d),es(t,"focus",_),es(t,"mousemove",p)],h=!0)},p(E,w){e=E,w&4&&r!==(r=e[2].range()[0])&&ue(t,"x",r),w&10&&s!==(s=e[3](e[18]))&&ue(t,"y",s),w&16&&l!==(l=e[4].bandwidth())&&ue(t,"height",l),w&34&&c!==(c=e[5](e[18]))&&ue(t,"width",c),w&1&&ue(t,"fill",e[0])},d(E){E&&nt(t),h=!1,tA(a)}}}function D3(e){let t,r,s,l=e[1],c=[];for(let h=0;h<l.length;h+=1)c[h]=B1(x1(e,l,h));return{c(){t=Gn("g");for(let h=0;h<c.length;h+=1)c[h].c();ue(t,"class","bar-group")},m(h,a){st(h,t,a);for(let d=0;d<c.length;d+=1)c[d].m(t,null);r||(s=[es(t,"mouseout",e[16]),es(t,"blur",e[17])],r=!0)},p(h,[a]){if(a&6207){l=h[1];let d;for(d=0;d<l.length;d+=1){const _=x1(h,l,d);c[d]?c[d].p(_,a):(c[d]=B1(_),c[d].c(),c[d].m(t,null))}for(;d<c.length;d+=1)c[d].d(1);c.length=l.length}},i:bn,o:bn,d(h){h&&nt(t),Vl(c,h),r=!1,tA(s)}}}function N3(e,t,r){let s,l,c,h,a;const{data:d,xGet:_,yGet:p,xScale:E,yScale:w}=$o("LayerCake");$r(e,d,Z=>r(1,s=Z)),$r(e,_,Z=>r(5,a=Z)),$r(e,p,Z=>r(3,c=Z)),$r(e,E,Z=>r(2,l=Z)),$r(e,w,Z=>r(4,h=Z));let{fill:x="#97dfd1"}=t;const Q=$h();function k(Z){return function(ce){raise(this),ce.layerX!==0&&ce.layerY!==0&&Q("mousemove",{e:ce})}}const R=(Z,te)=>Q("mousemove",{e:te,props:Z}),P=(Z,te)=>Q("mousemove",{e:te,props:Z}),O=(Z,te)=>k(),G=Z=>Q("mouseout"),V=Z=>Q("mouseout");return e.$$set=Z=>{"fill"in Z&&r(0,x=Z.fill)},[x,s,l,c,h,a,d,_,p,E,w,Q,k,R,P,O,G,V]}class Op extends ii{constructor(t){super(),ni(this,t,N3,D3,ti,{fill:0})}}function C1(e,t,r){const s=e.slice();return s[19]=t[r],s[21]=r,s}function E1(e){let t,r;return{c(){t=Gn("line"),ue(t,"class","gridline svelte-19phsub"),ue(t,"y1",r=e[11]*-1),ue(t,"y2","0"),ue(t,"x1","0"),ue(t,"x2","0")},m(s,l){st(s,t,l)},p(s,l){l&2048&&r!==(r=s[11]*-1)&&ue(t,"y1",r)},d(s){s&&nt(t)}}}function F1(e){let t,r,s;return{c(){t=Gn("line"),ue(t,"class","tick-mark svelte-19phsub"),ue(t,"y1",0),ue(t,"y2",6),ue(t,"x1",r=e[5]||e[7]?e[8].bandwidth()/2:0),ue(t,"x2",s=e[5]||e[7]?e[8].bandwidth()/2:0)},m(l,c){st(l,t,c)},p(l,c){c&416&&r!==(r=l[5]||l[7]?l[8].bandwidth()/2:0)&&ue(t,"x1",r),c&416&&s!==(s=l[5]||l[7]?l[8].bandwidth()/2:0)&&ue(t,"x2",s)},d(l){l&&nt(t)}}}function S1(e,t){let r,s,l,c=t[4](t[19])+"",h,a,d,_,p,E=t[0]!==!1&&E1(t),w=t[1]===!0&&F1(t);return{key:e,first:null,c(){r=Gn("g"),E&&E.c(),s=yo(),w&&w.c(),l=Gn("text"),h=Fr(c),ue(l,"x",a=t[5]||t[7]?t[8].bandwidth()/2:0),ue(l,"y",t[6]),ue(l,"dx",""),ue(l,"dy",""),ue(l,"text-anchor",d=t[17](t[21])),ue(l,"class","svelte-19phsub"),ue(r,"class",_="tick tick-"+t[21]+" svelte-19phsub"),ue(r,"transform",p="translate("+t[8](t[19])+","+Math.max(...t[10])+")"),this.first=r},m(x,Q){st(x,r,Q),E&&E.m(r,null),it(r,s),w&&w.m(r,null),it(r,l),it(l,h)},p(x,Q){t=x,t[0]!==!1?E?E.p(t,Q):(E=E1(t),E.c(),E.m(r,s)):E&&(E.d(1),E=null),t[1]===!0?w?w.p(t,Q):(w=F1(t),w.c(),w.m(r,l)):w&&(w.d(1),w=null),Q&528&&c!==(c=t[4](t[19])+"")&&$n(h,c),Q&416&&a!==(a=t[5]||t[7]?t[8].bandwidth()/2:0)&&ue(l,"x",a),Q&64&&ue(l,"y",t[6]),Q&512&&d!==(d=t[17](t[21]))&&ue(l,"text-anchor",d),Q&512&&_!==(_="tick tick-"+t[21]+" svelte-19phsub")&&ue(r,"class",_),Q&1792&&p!==(p="translate("+t[8](t[19])+","+Math.max(...t[10])+")")&&ue(r,"transform",p)},d(x){x&&nt(r),E&&E.d(),w&&w.d()}}}function I1(e){let t,r,s;return{c(){t=Gn("line"),ue(t,"class","baseline svelte-19phsub"),ue(t,"y1",r=e[11]+.5),ue(t,"y2",s=e[11]+.5),ue(t,"x1","0"),ue(t,"x2",e[12])},m(l,c){st(l,t,c)},p(l,c){c&2048&&r!==(r=l[11]+.5)&&ue(t,"y1",r),c&2048&&s!==(s=l[11]+.5)&&ue(t,"y2",s),c&4096&&ue(t,"x2",l[12])},d(l){l&&nt(t)}}}function j3(e){let t,r=[],s=new Map,l,c=e[9];const h=d=>d[19];for(let d=0;d<c.length;d+=1){let _=C1(e,c,d),p=h(_);s.set(p,r[d]=S1(p,_))}let a=e[2]===!0&&I1(e);return{c(){t=Gn("g");for(let d=0;d<r.length;d+=1)r[d].c();l=yo(),a&&a.c(),ue(t,"class","axis x-axis svelte-19phsub"),pp(t,"snapTicks",e[3])},m(d,_){st(d,t,_);for(let p=0;p<r.length;p+=1)r[p].m(t,null);it(t,l),a&&a.m(t,null)},p(d,[_]){_&135155&&(c=d[9],r=Jy(r,_,h,1,d,c,s,t,Zy,S1,l,C1)),d[2]===!0?a?a.p(d,_):(a=I1(d),a.c(),a.m(t,null)):a&&(a.d(1),a=null),_&8&&pp(t,"snapTicks",d[3])},i:bn,o:bn,d(d){d&&nt(t);for(let _=0;_<r.length;_+=1)r[_].d();a&&a.d()}}}function R3(e,t,r){let s,l,c,h,a,d;const{width:_,height:p,xScale:E,yRange:w}=$o("LayerCake");$r(e,_,te=>r(12,d=te)),$r(e,p,te=>r(11,a=te)),$r(e,E,te=>r(8,c=te)),$r(e,w,te=>r(10,h=te));let{gridlines:x=!0}=t,{tickMarks:Q=!1}=t,{baseline:k=!1}=t,{snapTicks:R=!1}=t,{formatTick:P=te=>te}=t,{ticks:O=void 0}=t,{xTick:G=0}=t,{yTick:V=16}=t;function Z(te){if(R===!0){if(te===0)return"start";if(te===l.length-1)return"end"}return"middle"}return e.$$set=te=>{"gridlines"in te&&r(0,x=te.gridlines),"tickMarks"in te&&r(1,Q=te.tickMarks),"baseline"in te&&r(2,k=te.baseline),"snapTicks"in te&&r(3,R=te.snapTicks),"formatTick"in te&&r(4,P=te.formatTick),"ticks"in te&&r(18,O=te.ticks),"xTick"in te&&r(5,G=te.xTick),"yTick"in te&&r(6,V=te.yTick)},e.$$.update=()=>{e.$$.dirty&256&&r(7,s=typeof c.bandwidth=="function"),e.$$.dirty&262528&&r(9,l=Array.isArray(O)?O:s?c.domain():typeof O=="function"?O(c.ticks()):c.ticks(O))},[x,Q,k,R,P,G,V,s,c,l,h,a,d,_,p,E,w,Z,O]}class Oc extends ii{constructor(t){super(),ni(this,t,R3,j3,ti,{gridlines:0,tickMarks:1,baseline:2,snapTicks:3,formatTick:4,ticks:18,xTick:5,yTick:6})}}function T1(e,t,r){const s=e.slice();return s[17]=t[r],s}function U1(e){let t,r,s;return{c(){t=Gn("line"),ue(t,"class","gridline svelte-df3iti"),ue(t,"x2","100%"),ue(t,"y1",r=e[4]+(e[8]?e[9].bandwidth()/2:0)),ue(t,"y2",s=e[4]+(e[8]?e[9].bandwidth()/2:0))},m(l,c){st(l,t,c)},p(l,c){c&784&&r!==(r=l[4]+(l[8]?l[9].bandwidth()/2:0))&&ue(t,"y1",r),c&784&&s!==(s=l[4]+(l[8]?l[9].bandwidth()/2:0))&&ue(t,"y2",s)},d(l){l&&nt(t)}}}function L1(e){let t,r,s,l;return{c(){t=Gn("line"),ue(t,"class","tick-mark svelte-df3iti"),ue(t,"x1","0"),ue(t,"x2",r=e[8]?-6:6),ue(t,"y1",s=e[4]+(e[8]?e[9].bandwidth()/2:0)),ue(t,"y2",l=e[4]+(e[8]?e[9].bandwidth()/2:0))},m(c,h){st(c,t,h)},p(c,h){h&256&&r!==(r=c[8]?-6:6)&&ue(t,"x2",r),h&784&&s!==(s=c[4]+(c[8]?c[9].bandwidth()/2:0))&&ue(t,"y1",s),h&784&&l!==(l=c[4]+(c[8]?c[9].bandwidth()/2:0))&&ue(t,"y2",l)},d(c){c&&nt(t)}}}function k1(e,t){let r,s,l,c=t[2](t[17])+"",h,a,d,_,p,E,w=t[0]!==!1&&U1(t),x=t[1]===!0&&L1(t);return{key:e,first:null,c(){r=Gn("g"),w&&w.c(),s=yo(),x&&x.c(),l=Gn("text"),h=Fr(c),ue(l,"x",t[3]),ue(l,"y",a=t[4]+(t[8]?t[9].bandwidth()/2:0)),ue(l,"dx",d=t[8]?-9:t[5]),ue(l,"dy",_=t[8]?4:t[6]),kn(l,"text-anchor",t[8]?"end":t[7]),ue(l,"class","svelte-df3iti"),ue(r,"class",p="tick tick-"+t[17]+" svelte-df3iti"),ue(r,"transform",E="translate("+(t[12][0]+(t[8]?t[11].left:0))+", "+t[9](t[17])+")"),this.first=r},m(Q,k){st(Q,r,k),w&&w.m(r,null),it(r,s),x&&x.m(r,null),it(r,l),it(l,h)},p(Q,k){t=Q,t[0]!==!1?w?w.p(t,k):(w=U1(t),w.c(),w.m(r,s)):w&&(w.d(1),w=null),t[1]===!0?x?x.p(t,k):(x=L1(t),x.c(),x.m(r,l)):x&&(x.d(1),x=null),k&1028&&c!==(c=t[2](t[17])+"")&&$n(h,c),k&8&&ue(l,"x",t[3]),k&784&&a!==(a=t[4]+(t[8]?t[9].bandwidth()/2:0))&&ue(l,"y",a),k&288&&d!==(d=t[8]?-9:t[5])&&ue(l,"dx",d),k&320&&_!==(_=t[8]?4:t[6])&&ue(l,"dy",_),k&384&&kn(l,"text-anchor",t[8]?"end":t[7]),k&1024&&p!==(p="tick tick-"+t[17]+" svelte-df3iti")&&ue(r,"class",p),k&7936&&E!==(E="translate("+(t[12][0]+(t[8]?t[11].left:0))+", "+t[9](t[17])+")")&&ue(r,"transform",E)},d(Q){Q&&nt(r),w&&w.d(),x&&x.d()}}}function O3(e){let t,r=[],s=new Map,l,c=e[10];const h=a=>a[17];for(let a=0;a<c.length;a+=1){let d=T1(e,c,a),_=h(d);s.set(_,r[a]=k1(_,d))}return{c(){t=Gn("g");for(let a=0;a<r.length;a+=1)r[a].c();ue(t,"class","axis y-axis"),ue(t,"transform",l="translate("+-e[11].left+", 0)")},m(a,d){st(a,t,d);for(let _=0;_<r.length;_+=1)r[_].m(t,null)},p(a,[d]){d&8191&&(c=a[10],r=Jy(r,d,h,1,a,c,s,t,Zy,k1,null,T1)),d&2048&&l!==(l="translate("+-a[11].left+", 0)")&&ue(t,"transform",l)},i:bn,o:bn,d(a){a&&nt(t);for(let d=0;d<r.length;d+=1)r[d].d()}}}function H3(e,t,r){let s,l,c,h,a;const{padding:d,xRange:_,yScale:p}=$o("LayerCake");$r(e,d,V=>r(11,h=V)),$r(e,_,V=>r(12,a=V)),$r(e,p,V=>r(9,c=V));let{gridlines:E=!0}=t,{tickMarks:w=!1}=t,{formatTick:x=V=>V}=t,{ticks:Q=4}=t,{xTick:k=0}=t,{yTick:R=0}=t,{dxTick:P=0}=t,{dyTick:O=-4}=t,{textAnchor:G="start"}=t;return e.$$set=V=>{"gridlines"in V&&r(0,E=V.gridlines),"tickMarks"in V&&r(1,w=V.tickMarks),"formatTick"in V&&r(2,x=V.formatTick),"ticks"in V&&r(16,Q=V.ticks),"xTick"in V&&r(3,k=V.xTick),"yTick"in V&&r(4,R=V.yTick),"dxTick"in V&&r(5,P=V.dxTick),"dyTick"in V&&r(6,O=V.dyTick),"textAnchor"in V&&r(7,G=V.textAnchor)},e.$$.update=()=>{e.$$.dirty&512&&r(8,s=typeof c.bandwidth=="function"),e.$$.dirty&66304&&r(10,l=Array.isArray(Q)?Q:s?c.domain():typeof Q=="function"?Q(c.ticks()):c.ticks(Q))},[E,w,x,k,R,P,O,G,s,c,l,h,a,d,_,p,Q]}class Hc extends ii{constructor(t){super(),ni(this,t,H3,O3,ti,{gridlines:0,tickMarks:1,formatTick:2,ticks:16,xTick:3,yTick:4,dxTick:5,dyTick:6,textAnchor:7})}}const z3=e=>({detail:e&2}),Q1=e=>({detail:e[1].detail}),V3=e=>({detail:e&1}),P1=e=>({detail:e[0].detail});function M1(e){let t,r;const s=e[4].default,l=wA(s,e,e[3],P1);return{c(){t=Lt("div"),l&&l.c(),ue(t,"class","tooltip svelte-12op57k"),kn(t,"top",e[0].detail.e.layerY+"px"),kn(t,"left",e[0].detail.e.layerX-e[2]+"px")},m(c,h){st(c,t,h),l&&l.m(t,null),r=!0},p(c,h){l&&l.p&&(!r||h&9)&&xA(l,s,c,c[3],r?bA(s,c[3],h,V3):BA(c[3]),P1),(!r||h&1)&&kn(t,"top",c[0].detail.e.layerY+"px"),(!r||h&5)&&kn(t,"left",c[0].detail.e.layerX-c[2]+"px")},i(c){r||(Tt(l,c),r=!0)},o(c){Kt(l,c),r=!1},d(c){c&&nt(t),l&&l.d(c)}}}function D1(e){let t,r;const s=e[4].default,l=wA(s,e,e[3],Q1);return{c(){t=Lt("div"),l&&l.c(),ue(t,"class","tooltip svelte-12op57k"),kn(t,"top",e[1].detail.e.layerY+"px"),kn(t,"left",e[1].detail.e.layerX-e[2]+"px")},m(c,h){st(c,t,h),l&&l.m(t,null),r=!0},p(c,h){l&&l.p&&(!r||h&10)&&xA(l,s,c,c[3],r?bA(s,c[3],h,z3):BA(c[3]),Q1),(!r||h&2)&&kn(t,"top",c[1].detail.e.layerY+"px"),(!r||h&6)&&kn(t,"left",c[1].detail.e.layerX-c[2]+"px")},i(c){r||(Tt(l,c),r=!0)},o(c){Kt(l,c),r=!1},d(c){c&&nt(t),l&&l.d(c)}}}function K3(e){let t,r,s,l=e[0].detail&&M1(e),c=e[1].detail&&D1(e);return{c(){l&&l.c(),t=$t(),c&&c.c(),r=yo()},m(h,a){l&&l.m(h,a),st(h,t,a),c&&c.m(h,a),st(h,r,a),s=!0},p(h,[a]){h[0].detail?l?(l.p(h,a),a&1&&Tt(l,1)):(l=M1(h),l.c(),Tt(l,1),l.m(t.parentNode,t)):l&&(Xa(),Kt(l,1,1,()=>{l=null}),Za()),h[1].detail?c?(c.p(h,a),a&2&&Tt(c,1)):(c=D1(h),c.c(),Tt(c,1),c.m(r.parentNode,r)):c&&(Xa(),Kt(c,1,1,()=>{c=null}),Za())},i(h){s||(Tt(l),Tt(c),s=!0)},o(h){Kt(l),Kt(c),s=!1},d(h){l&&l.d(h),h&&nt(t),c&&c.d(h),h&&nt(r)}}}function G3(e,t,r){let{$$slots:s={},$$scope:l}=t,{evt:c={}}=t,{evt2:h={}}=t,{offset:a=50}=t;return e.$$set=d=>{"evt"in d&&r(0,c=d.evt),"evt2"in d&&r(1,h=d.evt2),"offset"in d&&r(2,a=d.offset),"$$scope"in d&&r(3,l=d.$$scope)},[c,h,a,l,s]}class ud extends ii{constructor(t){super(),ni(this,t,G3,K3,ti,{evt:0,evt2:1,offset:2})}}function N1(e){const t={...e[13].props};e[14]=t}function j1(e){const t={...e[13].props};e[14]=t}function q3(e){let t,r,s,l,c,h;return t=new Oc({props:{gridlines:!0,baseline:!0,snapTicks:!0,ticks:"4"}}),s=new Hc({props:{gridlines:!1}}),c=new Op({}),c.$on("mousemove",e[8]),c.$on("mouseout",e[9]),{c(){mr(t.$$.fragment),r=$t(),mr(s.$$.fragment),l=$t(),mr(c.$$.fragment)},m(a,d){fr(t,a,d),st(a,r,d),fr(s,a,d),st(a,l,d),fr(c,a,d),h=!0},p:bn,i(a){h||(Tt(t.$$.fragment,a),Tt(s.$$.fragment,a),Tt(c.$$.fragment,a),h=!0)},o(a){Kt(t.$$.fragment,a),Kt(s.$$.fragment,a),Kt(c.$$.fragment,a),h=!1},d(a){dr(t,a),a&&nt(r),dr(s,a),a&&nt(l),dr(c,a)}}}function R1(e){let t,r;return t=new ud({props:{evt:e[4],$$slots:{default:[W3,({detail:s})=>({13:s}),({detail:s})=>s?8192:0]},$$scope:{ctx:e}}}),{c(){mr(t.$$.fragment)},m(s,l){fr(t,s,l),r=!0},p(s,l){const c={};l&16&&(c.evt=s[4]),l&40960&&(c.$$scope={dirty:l,ctx:s}),t.$set(c)},i(s){r||(Tt(t.$$.fragment,s),r=!0)},o(s){Kt(t.$$.fragment,s),r=!1},d(s){dr(t,s)}}}function W3(e){j1(e);let t,r=e[14].parish+"",s,l,c,h=(+e[14].jail_pretrial_rate).toFixed(1)+"",a,d;return{c(){t=Lt("div"),s=Fr(r),l=Lt("br"),c=Fr(`
                  Pretrial Rate: `),a=Fr(h),d=Fr(` per
                  10,000 residents`),ue(t,"class","row")},m(_,p){st(_,t,p),it(t,s),it(t,l),it(t,c),it(t,a),it(t,d)},p(_,p){j1(_),p&8192&&r!==(r=_[14].parish+"")&&$n(s,r),p&8192&&h!==(h=(+_[14].jail_pretrial_rate).toFixed(1)+"")&&$n(a,h)},d(_){_&&nt(t)}}}function X3(e){let t,r,s=e[5]!==!0&&R1(e);return{c(){s&&s.c(),t=yo()},m(l,c){s&&s.m(l,c),st(l,t,c),r=!0},p(l,c){l[5]!==!0?s?(s.p(l,c),c&32&&Tt(s,1)):(s=R1(l),s.c(),Tt(s,1),s.m(t.parentNode,t)):s&&(Xa(),Kt(s,1,1,()=>{s=null}),Za())},i(l){r||(Tt(s),r=!0)},o(l){Kt(s),r=!1},d(l){s&&s.d(l),l&&nt(t)}}}function Z3(e){let t,r,s,l;return t=new oh({props:{$$slots:{default:[q3]},$$scope:{ctx:e}}}),s=new ah({props:{pointerEvents:!1,$$slots:{default:[X3]},$$scope:{ctx:e}}}),{c(){mr(t.$$.fragment),r=$t(),mr(s.$$.fragment)},m(c,h){fr(t,c,h),st(c,r,h),fr(s,c,h),l=!0},p(c,h){const a={};h&32816&&(a.$$scope={dirty:h,ctx:c}),t.$set(a);const d={};h&32816&&(d.$$scope={dirty:h,ctx:c}),s.$set(d)},i(c){l||(Tt(t.$$.fragment,c),Tt(s.$$.fragment,c),l=!0)},o(c){Kt(t.$$.fragment,c),Kt(s.$$.fragment,c),l=!1},d(c){dr(t,c),c&&nt(r),dr(s,c)}}}function J3(e){let t,r,s,l,c,h;return t=new Oc({props:{gridlines:!0,baseline:!0,snapTicks:!0,ticks:"4"}}),s=new Hc({props:{gridlines:!1}}),c=new Op({}),c.$on("mousemove",e[10]),c.$on("mouseout",e[11]),{c(){mr(t.$$.fragment),r=$t(),mr(s.$$.fragment),l=$t(),mr(c.$$.fragment)},m(a,d){fr(t,a,d),st(a,r,d),fr(s,a,d),st(a,l,d),fr(c,a,d),h=!0},p:bn,i(a){h||(Tt(t.$$.fragment,a),Tt(s.$$.fragment,a),Tt(c.$$.fragment,a),h=!0)},o(a){Kt(t.$$.fragment,a),Kt(s.$$.fragment,a),Kt(c.$$.fragment,a),h=!1},d(a){dr(t,a),a&&nt(r),dr(s,a),a&&nt(l),dr(c,a)}}}function O1(e){let t,r;return t=new ud({props:{evt2:e[6],$$slots:{default:[Y3,({detail:s})=>({13:s}),({detail:s})=>s?8192:0]},$$scope:{ctx:e}}}),{c(){mr(t.$$.fragment)},m(s,l){fr(t,s,l),r=!0},p(s,l){const c={};l&64&&(c.evt2=s[6]),l&40960&&(c.$$scope={dirty:l,ctx:s}),t.$set(c)},i(s){r||(Tt(t.$$.fragment,s),r=!0)},o(s){Kt(t.$$.fragment,s),r=!1},d(s){dr(t,s)}}}function Y3(e){N1(e);let t,r=e[14].parish+"",s,l,c,h=e[14].prison_adm_rate.toFixed(1)+"",a,d;return{c(){t=Lt("div"),s=Fr(r),l=Lt("br"),c=Fr(`
                  Admission Rate: `),a=Fr(h),d=Fr(` per 10,000
                  residents`),ue(t,"class","row")},m(_,p){st(_,t,p),it(t,s),it(t,l),it(t,c),it(t,a),it(t,d)},p(_,p){N1(_),p&8192&&r!==(r=_[14].parish+"")&&$n(s,r),p&8192&&h!==(h=_[14].prison_adm_rate.toFixed(1)+"")&&$n(a,h)},d(_){_&&nt(t)}}}function $3(e){let t,r,s=e[7]!==!0&&O1(e);return{c(){s&&s.c(),t=yo()},m(l,c){s&&s.m(l,c),st(l,t,c),r=!0},p(l,c){l[7]!==!0?s?(s.p(l,c),c&128&&Tt(s,1)):(s=O1(l),s.c(),Tt(s,1),s.m(t.parentNode,t)):s&&(Xa(),Kt(s,1,1,()=>{s=null}),Za())},i(l){r||(Tt(s),r=!0)},o(l){Kt(s),r=!1},d(l){s&&s.d(l),l&&nt(t)}}}function eE(e){let t,r,s,l;return t=new oh({props:{$$slots:{default:[J3]},$$scope:{ctx:e}}}),s=new ah({props:{pointerEvents:!1,$$slots:{default:[$3]},$$scope:{ctx:e}}}),{c(){mr(t.$$.fragment),r=$t(),mr(s.$$.fragment)},m(c,h){fr(t,c,h),st(c,r,h),fr(s,c,h),l=!0},p(c,h){const a={};h&32960&&(a.$$scope={dirty:h,ctx:c}),t.$set(a);const d={};h&32960&&(d.$$scope={dirty:h,ctx:c}),s.$set(d)},i(c){l||(Tt(t.$$.fragment,c),Tt(s.$$.fragment,c),l=!0)},o(c){Kt(t.$$.fragment,c),Kt(s.$$.fragment,c),l=!1},d(c){dr(t,c),c&&nt(r),dr(s,c)}}}function tE(e){let t,r,s,l,c,h,a,d,_,p,E,w,x,Q,k,R,P,O,G,V,Z;return c=new l3({props:{parishTitle:e[0]}}),w=new nh({props:{padding:{top:0,bottom:40,left:120},x:rE,y:H1,yScale:eh().paddingInner([.15]),xDomain:[0,e[2]],data:e[1],$$slots:{default:[Z3]},$$scope:{ctx:e}}}),O=new nh({props:{padding:{top:0,bottom:40,left:120},x:ug,y:H1,yScale:eh().paddingInner([.15]),xDomain:[0,e[3]],data:e[1],$$slots:{default:[eE]},$$scope:{ctx:e}}}),{c(){t=Lt("div"),r=Lt("div"),r.innerHTML=`<p class="svelte-vmwqbp">Every region of Louisiana is harmed by mass incarceration: nearly every
      parish has a pretrial incarceration rate above the national average, and
      dozens of parishes send people to prison at rates above the national
      average. The prevalence of incarceration is hard to see in many places,
      owing to an alarming lack of transparency and data, as well as a
      convoluted carceral landscape where jails also function as prisons. But
      parish and state-level research by Vera aims to clarify this picture.</p>`,s=$t(),l=Lt("div"),mr(c.$$.fragment),h=$t(),a=Lt("div"),d=Lt("div"),_=Lt("h4"),_.textContent="Pretrial Incarceration Rate (2021)",p=$t(),E=Lt("div"),mr(w.$$.fragment),x=$t(),Q=Lt("div"),k=Lt("h4"),k.textContent="Prison Admission Rate (2021)",R=$t(),P=Lt("div"),mr(O.$$.fragment),G=$t(),V=Lt("p"),V.innerHTML=`State policy plays a major role in driving mass incarceration—as evidenced
    by a decrease in the state’s prison population that resulted, in part, from
    <a href="https://s32082.pcdn.co/wp-content/uploads/2022/10/2022-JRI-ANNUAL-Report-FinalREVISED102022.pdf" target="_blank">the 2017 Justice Reinvestment Package</a>. However, state-level reform alone is insufficient. Significant progress
    on justice reform requires change at the local level: arrest and pretrial
    detention are the “front door” to mass incarceration and decisions by local
    police, prosecutors, and judges dictate how many people are put behind bars
    and for how long. Local jails also play a part in state prison
    incarceration: After a
    <a href="https://www.nola.com/news/crime_police/louisiana-is-the-worlds-prison-capital/article_8feef59a-1196-5988-9128-1e8e7c9aefda.html" target="_blank">federal court ordered Louisiana to address prison overcrowding in the
      1990s</a>, many sheriffs expanded their jails, enabling them to receive revenue from
    the state for holding people sentenced to prison. As a result, many sheriffs
    are now reliant on these funds to support oversized jails. Given the role of
    local decisionmakers in dictating the use of jails and prisons, local
    governments have the power to scale back the use of incarceration and
    implement evidence-based solutions that will help Louisiana’s communities
    thrive.`,ue(r,"id","stats"),ue(r,"class","svelte-vmwqbp"),ue(l,"id","map"),ue(l,"class","svelte-vmwqbp"),ue(_,"class","svelte-vmwqbp"),ue(E,"class","chart-container svelte-vmwqbp"),ue(d,"class","barchart svelte-vmwqbp"),ue(k,"class","svelte-vmwqbp"),ue(P,"class","chart-container svelte-vmwqbp"),ue(Q,"class","barchart svelte-vmwqbp"),ue(a,"id","barcomps"),ue(a,"class","svelte-vmwqbp"),ue(V,"class","svelte-vmwqbp")},m(te,ce){st(te,t,ce),it(t,r),it(t,s),it(t,l),fr(c,l,null),it(t,h),it(t,a),it(a,d),it(d,_),it(d,p),it(d,E),fr(w,E,null),it(a,x),it(a,Q),it(Q,k),it(Q,R),it(Q,P),fr(O,P,null),it(t,G),it(t,V),Z=!0},p(te,[ce]){const he={};ce&1&&(he.parishTitle=te[0]),c.$set(he);const Ce={};ce&4&&(Ce.xDomain=[0,te[2]]),ce&2&&(Ce.data=te[1]),ce&32816&&(Ce.$$scope={dirty:ce,ctx:te}),w.$set(Ce);const fe={};ce&8&&(fe.xDomain=[0,te[3]]),ce&2&&(fe.data=te[1]),ce&32960&&(fe.$$scope={dirty:ce,ctx:te}),O.$set(fe)},i(te){Z||(Tt(c.$$.fragment,te),Tt(w.$$.fragment,te),Tt(O.$$.fragment,te),Z=!0)},o(te){Kt(c.$$.fragment,te),Kt(w.$$.fragment,te),Kt(O.$$.fragment,te),Z=!1},d(te){te&&nt(t),dr(c),dr(w),dr(O)}}}const ug="prison_adm_rate",rE="jail_pretrial_rate",H1="parish";function nE(e,t,r){let s=[],l,c;Wa(async()=>{const k=await pl("https://vera-louisiana-data.s3.amazonaws.com/curated_data/clearinghouse/parish_incarceration_21.csv");r(1,s=k.filter(R=>R.parish==h+" Parish"||R.parish=="Louisiana"||R.parish=="U.S.")),s.forEach(R=>{R[ug]=+R[ug]}),r(2,l=Xf(s,R=>+R.jail_pretrial_rate)),r(3,c=Xf(s,R=>+R.prison_adm_rate))});let{parishTitle:h}=t;Wa(async()=>{window.scrollTo(0,0)});let a,d=!1,_,p=!1;const E=k=>r(4,a=r(5,d=k)),w=()=>r(5,d=!0),x=k=>r(6,_=r(7,p=k)),Q=()=>r(7,p=!0);return e.$$set=k=>{"parishTitle"in k&&r(0,h=k.parishTitle)},[h,s,l,c,a,d,_,p,E,w,x,Q]}class z1 extends ii{constructor(t){super(),ni(this,t,nE,tE,ti,{parishTitle:0})}}function V1(e,t,r){const s=e.slice();return s[17]=t[r],s[19]=r,s}function K1(e,t,r){const s=e.slice();return s[17]=t[r],s[19]=r,s}function iE(e){let t,r,s,l,c,h=Bu(e[8])+"",a,d;return{c(){t=Fr("In "),r=Fr(e[0]),s=Fr(` Parish, there is
    `),l=Fr(e[6]),c=Fr(` prison with a capacity of
    `),a=Fr(h),d=Fr(" people.")},m(_,p){st(_,t,p),st(_,r,p),st(_,s,p),st(_,l,p),st(_,c,p),st(_,a,p),st(_,d,p)},p(_,p){p&1&&$n(r,_[0]),p&64&&$n(l,_[6]),p&256&&h!==(h=Bu(_[8])+"")&&$n(a,h)},d(_){_&&nt(t),_&&nt(r),_&&nt(s),_&&nt(l),_&&nt(c),_&&nt(a),_&&nt(d)}}}function sE(e){let t,r,s,l,c,h=Bu(e[8])+"",a,d;return{c(){t=Fr("In "),r=Fr(e[0]),s=Fr(` Parish, there is
    `),l=Fr(e[6]),c=Fr(` jail with a capacity of
    `),a=Fr(h),d=Fr(" people.")},m(_,p){st(_,t,p),st(_,r,p),st(_,s,p),st(_,l,p),st(_,c,p),st(_,a,p),st(_,d,p)},p(_,p){p&1&&$n(r,_[0]),p&64&&$n(l,_[6]),p&256&&h!==(h=Bu(_[8])+"")&&$n(a,h)},d(_){_&&nt(t),_&&nt(r),_&&nt(s),_&&nt(l),_&&nt(c),_&&nt(a),_&&nt(d)}}}function aE(e){let t,r,s,l,c,h=Bu(e[8])+"",a,d;return{c(){t=Fr("In "),r=Fr(e[0]),s=Fr(` Parish, there are
    `),l=Fr(e[6]),c=Fr(` prisons and jails with a combined capacity of
    `),a=Fr(h),d=Fr(" people.")},m(_,p){st(_,t,p),st(_,r,p),st(_,s,p),st(_,l,p),st(_,c,p),st(_,a,p),st(_,d,p)},p(_,p){p&1&&$n(r,_[0]),p&64&&$n(l,_[6]),p&256&&h!==(h=Bu(_[8])+"")&&$n(a,h)},d(_){_&&nt(t),_&&nt(r),_&&nt(s),_&&nt(l),_&&nt(c),_&&nt(a),_&&nt(d)}}}function G1(e){let t,r;return{c(){t=Gn("rect"),ue(t,"x",Math.floor(e[19]/e[9])*e[10]+Math.floor(e[19]/e[9])*e[11]),ue(t,"y",e[9]*e[10]-(e[19]%e[9]*e[10]+e[19]%e[9]*e[11])),ue(t,"width",e[10]),ue(t,"height",e[10]),ue(t,"fill",r=e[12][e[17].groupIndex])},m(s,l){st(s,t,l)},p(s,l){l&16&&r!==(r=s[12][s[17].groupIndex])&&ue(t,"fill",r)},d(s){s&&nt(t)}}}function oE(e){let t,r=e[17].facility_name+"",s,l,c=Bu(e[17].capacity)+"",h,a;return{c(){t=Gn("text"),s=Fr(r),l=Fr(" ("),h=Fr(c),a=Fr(" beds)"),ue(t,"x","25"),ue(t,"y","13"),ue(t,"class","svelte-tq0yyc")},m(d,_){st(d,t,_),it(t,s),it(t,l),it(t,h),it(t,a)},p(d,_){_&128&&r!==(r=d[17].facility_name+"")&&$n(s,r),_&128&&c!==(c=Bu(d[17].capacity)+"")&&$n(h,c)},d(d){d&&nt(t)}}}function AE(e){let t,r=e[17].facility_name+"",s;return{c(){t=Gn("text"),s=Fr(r),ue(t,"x","25"),ue(t,"y","13"),ue(t,"class","svelte-tq0yyc")},m(l,c){st(l,t,c),it(t,s)},p(l,c){c&128&&r!==(r=l[17].facility_name+"")&&$n(s,r)},d(l){l&&nt(t)}}}function q1(e){let t,r;function s(h,a){return window.innerWidth<600?AE:oE}let c=s()(e);return{c(){t=Gn("g"),r=Gn("rect"),c.c(),ue(r,"width","15"),ue(r,"height","15"),ue(r,"fill",e[12][e[19]]),kn(t,"transform","translate(0,"+e[19]*20+"px)")},m(h,a){st(h,t,a),it(t,r),c.m(t,null)},p(h,a){c.p(h,a)},d(h){h&&nt(t),c.d()}}}function lE(e){let t,r,s,l,c,h,a;function d(k,R){return k[6]>1?aE:k[6]==1&&k[7].map_jails>0?sE:iE}let _=d(e),p=_(e),E=e[4],w=[];for(let k=0;k<E.length;k+=1)w[k]=G1(K1(e,E,k));let x=e[7],Q=[];for(let k=0;k<x.length;k+=1)Q[k]=q1(V1(e,x,k));return{c(){t=Lt("p"),r=Fr(`Every parish is part of the state’s vast network of jails and prisons. There
  are more than 230 jails and prisons statewide that have the capacity to lock
  up more than 70,000 adults and children.
  `),p.c(),s=$t(),l=Lt("div"),c=Gn("svg");for(let k=0;k<w.length;k+=1)w[k].c();h=$t(),a=Gn("svg");for(let k=0;k<Q.length;k+=1)Q[k].c();ue(t,"class","break-avoid"),ue(c,"width",e[1]),ue(c,"height",e[3]),ue(a,"width",e[2]),ue(a,"height",e[5]),ue(a,"class","legend"),ue(l,"id","waffle"),ue(l,"class","svelte-tq0yyc")},m(k,R){st(k,t,R),it(t,r),p.m(t,null),st(k,s,R),st(k,l,R),it(l,c);for(let P=0;P<w.length;P+=1)w[P].m(c,null);it(l,h),it(l,a);for(let P=0;P<Q.length;P+=1)Q[P].m(a,null)},p(k,[R]){if(_===(_=d(k))&&p?p.p(k,R):(p.d(1),p=_(k),p&&(p.c(),p.m(t,null))),R&7696){E=k[4];let P;for(P=0;P<E.length;P+=1){const O=K1(k,E,P);w[P]?w[P].p(O,R):(w[P]=G1(O),w[P].c(),w[P].m(c,null))}for(;P<w.length;P+=1)w[P].d(1);w.length=E.length}if(R&2&&ue(c,"width",k[1]),R&8&&ue(c,"height",k[3]),R&4224){x=k[7];let P;for(P=0;P<x.length;P+=1){const O=V1(k,x,P);Q[P]?Q[P].p(O,R):(Q[P]=q1(O),Q[P].c(),Q[P].m(a,null))}for(;P<Q.length;P+=1)Q[P].d(1);Q.length=x.length}R&4&&ue(a,"width",k[2]),R&32&&ue(a,"height",k[5])},i:bn,o:bn,d(k){k&&nt(t),p.d(),k&&nt(s),k&&nt(l),Vl(w,k),Vl(Q,k)}}}function Bu(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")}function cE(e,t,r){let{parishname:s}=t,c=Ga("#app").node().getBoundingClientRect().width;var h,a,d,_=10,p=15,E=0,w=1,x,Q=[];c<400?x=20:x=40;let k,R,P=[],O=0;var G=["#012A41","#038AD8","#B7E2FB","#FBE798","#FDF0BF","#F7685E","#da392f","#940A00","#59C9A2","#054830","#F9DC66","#DD2113","#24AFFF"];return Wa(async()=>{const V=await pl("https://vera-louisiana-data.s3.amazonaws.com/curated_data/clearinghouse/facilities.csv");r(7,P=V.filter(Z=>Z.parish==s+" Parish"&&Z.capacity!=="N/A")),r(6,R=P.length),r(5,k=P.length*22),P.forEach(Z=>{Z.capacity=+Z.capacity}),r(8,O=Jm(P,Z=>tg(Z,te=>te.capacity))),E=O/(x*_),P.forEach(function(Z,te){Z.capacity=+Z.capacity,Z.units=Math.floor(Z.capacity/E),r(4,Q=Q.concat(Array(Z.units+1).join(1).split("").map(function(){return{squareValue:E,units:Z.units,capacity:Z.capacity,groupIndex:te}})))}),r(1,h=p*x+x*w+25),r(2,a=p*x+x*w+65),r(3,d=p*_+_*w+25)}),e.$$set=V=>{"parishname"in V&&r(0,s=V.parishname)},[s,h,a,d,Q,k,R,P,O,_,p,w,G]}class uE extends ii{constructor(t){super(),ni(this,t,cE,lE,ti,{parishname:0})}}function W1(e,t,r){const s=e.slice();return s[17]=t[r],s[19]=r,s}function X1(e){let t,r,s;function l(...a){return e[10](e[17],...a)}function c(...a){return e[11](e[17],...a)}function h(...a){return e[12](e[17],...a)}return{c(){t=Gn("path"),ue(t,"class","path-line svelte-d6euqo"),ue(t,"data-id",e[19]),ue(t,"d",e[2]),ue(t,"stroke",e[0])},m(a,d){st(a,t,d),r||(s=[es(t,"mouseover",l),es(t,"focus",c),es(t,"mousemove",h)],r=!0)},p(a,d){e=a,d&4&&ue(t,"d",e[2]),d&1&&ue(t,"stroke",e[0])},d(a){a&&nt(t),r=!1,tA(s)}}}function hE(e){let t,r,s,l,c,h=e[1],a=[];for(let d=0;d<h.length;d+=1)a[d]=X1(W1(e,h,d));return{c(){t=Gn("path"),r=$t(),s=Gn("g");for(let d=0;d<a.length;d+=1)a[d].c();ue(t,"class","path-line svelte-d6euqo"),ue(t,"d",e[2]),ue(t,"stroke",e[0]),ue(s,"class","line-group")},m(d,_){st(d,t,_),st(d,r,_),st(d,s,_);for(let p=0;p<a.length;p+=1)a[p].m(s,null);l||(c=[es(s,"mouseout",e[13]),es(s,"blur",e[14])],l=!0)},p(d,[_]){if(_&4&&ue(t,"d",d[2]),_&1&&ue(t,"stroke",d[0]),_&199){h=d[1];let p;for(p=0;p<h.length;p+=1){const E=W1(d,h,p);a[p]?a[p].p(E,_):(a[p]=X1(E),a[p].c(),a[p].m(s,null))}for(;p<a.length;p+=1)a[p].d(1);a.length=h.length}},i:bn,o:bn,d(d){d&&nt(t),d&&nt(r),d&&nt(s),Vl(a,d),l=!1,tA(c)}}}function fE(e,t,r){let s,l,c,h;const{data:a,xGet:d,yGet:_,xScale:p,yScale:E}=$o("LayerCake");$r(e,a,V=>r(1,h=V)),$r(e,d,V=>r(9,c=V)),$r(e,_,V=>r(8,l=V));let{stroke:w="#ab00d6"}=t;const x=$h();function Q(V){return function(te){raise(this),te.layerX!==0&&te.layerY!==0&&x("mousemove",{e:te})}}const k=(V,Z)=>x("mousemove",{e:Z,props:V}),R=(V,Z)=>x("mousemove",{e:Z,props:V}),P=(V,Z)=>Q(),O=V=>x("mouseout"),G=V=>x("mouseout");return e.$$set=V=>{"stroke"in V&&r(0,w=V.stroke)},e.$$.update=()=>{e.$$.dirty&770&&r(2,s="M"+h.map(V=>c(V)+","+l(V)).join("L"))},[w,h,s,a,d,_,x,Q,l,c,k,R,P,O,G]}class n_ extends ii{constructor(t){super(),ni(this,t,fE,hE,ti,{stroke:0})}}const dE=e=>({x:e&10,y:e&9,found:e&8,visible:e&4,e:e&16}),Z1=e=>({x:e[1](e[3])||0,y:e[0](e[3])||0,found:e[3],visible:e[2],e:e[4]});function pE(e){let t,r,s,l,c;const h=e[21].default,a=wA(h,e,e[20],Z1);return{c(){t=Lt("div"),r=$t(),a&&a.c(),ue(t,"class","bg svelte-n2rx0m")},m(d,_){st(d,t,_),st(d,r,_),a&&a.m(d,_),s=!0,l||(c=[es(t,"mousemove",e[10]),es(t,"mouseout",e[22]),es(t,"blur",e[23])],l=!0)},p(d,[_]){a&&a.p&&(!s||_&1048607)&&xA(a,h,d,d[20],s?bA(h,d[20],_,dE):BA(d[20]),Z1)},i(d){s||(Tt(a,d),s=!0)},o(d){Kt(a,d),s=!1},d(d){d&&nt(t),d&&nt(r),a&&a.d(d),l=!1,tA(c)}}}function mE(e,t,r){let s,l,c,h,a,d,_,p,{$$slots:E={},$$scope:w}=t;const{data:x,xGet:Q,yGet:k,width:R,height:P}=$o("LayerCake");$r(e,x,re=>r(15,h=re)),$r(e,Q,re=>r(18,_=re)),$r(e,k,re=>r(19,p=re)),$r(e,R,re=>r(17,d=re)),$r(e,P,re=>r(16,a=re));let O=!1,G={},V={},{x:Z="x"}=t,{y:te="y"}=t,{searchRadius:ce=void 0}=t,{dataset:he=void 0}=t;function Ce(re){r(4,V=re);const be=`layer${Z.toUpperCase()}`,me=`layer${te.toUpperCase()}`;r(3,G=c.find(re[be],re[me],ce)||{}),r(2,O=Object.keys(G).length>0)}const fe=()=>r(2,O=!1),ee=()=>r(2,O=!1);return e.$$set=re=>{"x"in re&&r(11,Z=re.x),"y"in re&&r(12,te=re.y),"searchRadius"in re&&r(13,ce=re.searchRadius),"dataset"in re&&r(14,he=re.dataset),"$$scope"in re&&r(20,w=re.$$scope)},e.$$.update=()=>{e.$$.dirty&788480&&r(1,s=Z==="x"?_:p),e.$$.dirty&790528&&r(0,l=te==="y"?p:_),e.$$.dirty&245763&&(c=Rv().extent([[-1,-1],[d+1,a+1]]).x(s).y(l).addAll(he||h))},[l,s,O,G,V,x,Q,k,R,P,Ce,Z,te,ce,he,h,a,d,_,p,w,E,fe,ee]}class gE extends ii{constructor(t){super(),ni(this,t,mE,pE,ti,{x:11,y:12,searchRadius:13,dataset:14})}}function J1(e){const t=e[11](e[20]);e[22]=t}function Y1(e){let t,r,s,l,c=e[20][e[2].x]+"",h,a,d,_,p=e[22][2].value+"",E;return{c(){t=Lt("div"),r=$t(),s=Lt("div"),l=Lt("div"),h=Fr(c),a=$t(),d=Lt("div"),_=Fr("Total Prison Admissions: "),E=Fr(p),kn(t,"left",e[17]+"px"),ue(t,"class","line svelte-1ll29vg"),ue(l,"class","row"),ue(d,"class","row"),ue(s,"class","tooltip svelte-1ll29vg"),kn(s,"width",i_+"px"),kn(s,"display",e[19]?"block":"none"),kn(s,"top",e[4](e[22][2].value)+e[0]+"px"),kn(s,"left",Math.min(Math.max(e[10],e[17]),e[5]-e[10])+"px")},m(w,x){st(w,t,x),st(w,r,x),st(w,s,x),it(s,l),it(l,h),it(s,a),it(s,d),it(d,_),it(d,E)},p(w,x){x&131072&&kn(t,"left",w[17]+"px"),x&1048580&&c!==(c=w[20][w[2].x]+"")&&$n(h,c),x&1048576&&p!==(p=w[22][2].value+"")&&$n(E,p),x&524288&&kn(s,"display",w[19]?"block":"none"),x&1048593&&kn(s,"top",w[4](w[22][2].value)+w[0]+"px"),x&131104&&kn(s,"left",Math.min(Math.max(w[10],w[17]),w[5]-w[10])+"px")},d(w){w&&nt(t),w&&nt(r),w&&nt(s)}}}function yE(e){J1(e);let t,r=e[19]===!0&&Y1(e);return{c(){r&&r.c(),t=yo()},m(s,l){r&&r.m(s,l),st(s,t,l)},p(s,l){J1(s),s[19]===!0?r?r.p(s,l):(r=Y1(s),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},d(s){r&&r.d(s),s&&nt(t)}}}function vE(e){let t,r;return t=new gE({props:{dataset:e[1]||e[3],y:"x",$$slots:{default:[yE,({x:s,y:l,visible:c,found:h,e:a})=>({17:s,18:l,19:c,20:h,21:a}),({x:s,y:l,visible:c,found:h,e:a})=>(s?131072:0)|(l?262144:0)|(c?524288:0)|(h?1048576:0)|(a?2097152:0)]},$$scope:{ctx:e}}}),{c(){mr(t.$$.fragment)},m(s,l){fr(t,s,l),r=!0},p(s,[l]){const c={};l&10&&(c.dataset=s[1]||s[3]),l&10092597&&(c.$$scope={dirty:l,ctx:s}),t.$set(c)},i(s){r||(Tt(t.$$.fragment,s),r=!0)},o(s){Kt(t.$$.fragment,s),r=!1},d(s){dr(t,s)}}}const i_=150;function _E(e,t,r){let s,l,c,h;const{data:a,width:d,yScale:_,config:p}=$o("LayerCake");$r(e,a,V=>r(3,l=V)),$r(e,d,V=>r(5,h=V)),$r(e,_,V=>r(4,c=V)),$r(e,p,V=>r(2,s=V));const E=Kg(","),w=V=>V.replace(/^\w/,Z=>Z.toUpperCase());let{formatTitle:x=V=>V}=t,{formatValue:Q=V=>isNaN(+V)?V:E(V)}=t,{formatKey:k=V=>w(V)}=t,{offset:R=0}=t,{dataset:P=void 0}=t;const O=i_/2;function G(V){return Object.keys(V).length===0?[]:Object.keys(V).filter(te=>te!==s.x).map(te=>({key:te,value:V[te]})).sort((te,ce)=>ce.value-te.value)}return e.$$set=V=>{"formatTitle"in V&&r(12,x=V.formatTitle),"formatValue"in V&&r(13,Q=V.formatValue),"formatKey"in V&&r(14,k=V.formatKey),"offset"in V&&r(0,R=V.offset),"dataset"in V&&r(1,P=V.dataset)},[R,P,s,l,c,h,a,d,_,p,O,G,x,Q,k]}class s_ extends ii{constructor(t){super(),ni(this,t,_E,vE,ti,{formatTitle:12,formatValue:13,formatKey:14,offset:0,dataset:1})}}function wE(e){let t,r,s,l;return t=new Oc({props:{ticks:6}}),s=new Hc({props:{ticks:4}}),{c(){mr(t.$$.fragment),r=$t(),mr(s.$$.fragment)},m(c,h){fr(t,c,h),st(c,r,h),fr(s,c,h),l=!0},i(c){l||(Tt(t.$$.fragment,c),Tt(s.$$.fragment,c),l=!0)},o(c){Kt(t.$$.fragment,c),Kt(s.$$.fragment,c),l=!1},d(c){dr(t,c),c&&nt(r),dr(s,c)}}}function bE(e){let t,r,s,l;return t=new Oc({props:{ticks:3}}),s=new Hc({props:{ticks:4}}),{c(){mr(t.$$.fragment),r=$t(),mr(s.$$.fragment)},m(c,h){fr(t,c,h),st(c,r,h),fr(s,c,h),l=!0},i(c){l||(Tt(t.$$.fragment,c),Tt(s.$$.fragment,c),l=!0)},o(c){Kt(t.$$.fragment,c),Kt(s.$$.fragment,c),l=!1},d(c){dr(t,c),c&&nt(r),dr(s,c)}}}function xE(e){let t,r,s,l,c;const h=[bE,wE],a=[];function d(_,p){return window.innerWidth<500?0:1}return t=d(),r=a[t]=h[t](e),l=new n_({}),l.$on("mousemove",e[7]),l.$on("mouseout",e[8]),{c(){r.c(),s=$t(),mr(l.$$.fragment)},m(_,p){a[t].m(_,p),st(_,s,p),fr(l,_,p),c=!0},p:bn,i(_){c||(Tt(r),Tt(l.$$.fragment,_),c=!0)},o(_){Kt(r),Kt(l.$$.fragment,_),c=!1},d(_){a[t].d(_),_&&nt(s),dr(l,_)}}}function BE(e){let t,r;return t=new s_({props:{formatTitle:e[6],dataset:e[1]}}),{c(){mr(t.$$.fragment)},m(s,l){fr(t,s,l),r=!0},p(s,l){const c={};l&2&&(c.dataset=s[1]),t.$set(c)},i(s){r||(Tt(t.$$.fragment,s),r=!0)},o(s){Kt(t.$$.fragment,s),r=!1},d(s){dr(t,s)}}}function CE(e){let t,r,s,l;return t=new oh({props:{$$slots:{default:[xE]},$$scope:{ctx:e}}}),s=new ah({props:{$$slots:{default:[BE]},$$scope:{ctx:e}}}),{c(){mr(t.$$.fragment),r=$t(),mr(s.$$.fragment)},m(c,h){fr(t,c,h),st(c,r,h),fr(s,c,h),l=!0},p(c,h){const a={};h&1072&&(a.$$scope={dirty:h,ctx:c}),t.$set(a);const d={};h&1026&&(d.$$scope={dirty:h,ctx:c}),s.$set(d)},i(c){l||(Tt(t.$$.fragment,c),Tt(s.$$.fragment,c),l=!0)},o(c){Kt(t.$$.fragment,c),Kt(s.$$.fragment,c),l=!1},d(c){dr(t,c),c&&nt(r),dr(s,c)}}}function EE(e){let t,r,s,l;return t=new Oc({props:{ticks:2}}),s=new Hc({props:{ticks:4}}),{c(){mr(t.$$.fragment),r=$t(),mr(s.$$.fragment)},m(c,h){fr(t,c,h),st(c,r,h),fr(s,c,h),l=!0},i(c){l||(Tt(t.$$.fragment,c),Tt(s.$$.fragment,c),l=!0)},o(c){Kt(t.$$.fragment,c),Kt(s.$$.fragment,c),l=!1},d(c){dr(t,c),c&&nt(r),dr(s,c)}}}function FE(e){let t,r,s,l;return t=new Oc({props:{ticks:1}}),s=new Hc({props:{ticks:4}}),{c(){mr(t.$$.fragment),r=$t(),mr(s.$$.fragment)},m(c,h){fr(t,c,h),st(c,r,h),fr(s,c,h),l=!0},i(c){l||(Tt(t.$$.fragment,c),Tt(s.$$.fragment,c),l=!0)},o(c){Kt(t.$$.fragment,c),Kt(s.$$.fragment,c),l=!1},d(c){dr(t,c),c&&nt(r),dr(s,c)}}}function SE(e){let t,r,s,l,c;const h=[FE,EE],a=[];function d(_,p){return window.innerWidth<500?0:1}return t=d(),r=a[t]=h[t](e),l=new n_({}),{c(){r.c(),s=$t(),mr(l.$$.fragment)},m(_,p){a[t].m(_,p),st(_,s,p),fr(l,_,p),c=!0},p:bn,i(_){c||(Tt(r),Tt(l.$$.fragment,_),c=!0)},o(_){Kt(r),Kt(l.$$.fragment,_),c=!1},d(_){a[t].d(_),_&&nt(s),dr(l,_)}}}function IE(e){let t,r;return t=new s_({props:{formatTitle:e[6],dataset:e[2]}}),{c(){mr(t.$$.fragment)},m(s,l){fr(t,s,l),r=!0},p(s,l){const c={};l&4&&(c.dataset=s[2]),t.$set(c)},i(s){r||(Tt(t.$$.fragment,s),r=!0)},o(s){Kt(t.$$.fragment,s),r=!1},d(s){dr(t,s)}}}function TE(e){let t,r,s,l;return t=new oh({props:{$$slots:{default:[SE]},$$scope:{ctx:e}}}),s=new ah({props:{$$slots:{default:[IE]},$$scope:{ctx:e}}}),{c(){mr(t.$$.fragment),r=$t(),mr(s.$$.fragment)},m(c,h){fr(t,c,h),st(c,r,h),fr(s,c,h),l=!0},p(c,h){const a={};h&1024&&(a.$$scope={dirty:h,ctx:c}),t.$set(a);const d={};h&1028&&(d.$$scope={dirty:h,ctx:c}),s.$set(d)},i(c){l||(Tt(t.$$.fragment,c),Tt(s.$$.fragment,c),l=!0)},o(c){Kt(t.$$.fragment,c),Kt(s.$$.fragment,c),l=!1},d(c){dr(t,c),c&&nt(r),dr(s,c)}}}function UE(e){let t,r,s,l,c,h,a,d,_,p,E,w,x;return _=new nh({props:{padding:{top:8,right:10,bottom:20,left:25},x:$1,y:Hh,yNice:4,yDomain:[0,e[3]],data:e[1],$$slots:{default:[CE]},$$scope:{ctx:e}}}),w=new nh({props:{padding:{top:8,right:10,bottom:20,left:25},x:$1,y:Hh,yNice:4,yDomain:[0,e[3]],data:e[2],$$slots:{default:[TE]},$$scope:{ctx:e}}}),{c(){t=Lt("div"),r=Lt("h4"),s=Fr("People from "),l=Fr(e[0]),c=Fr(" Parish Sent to Prison (1992-2014, 2019-2021)"),h=$t(),a=Lt("div"),d=Lt("div"),mr(_.$$.fragment),p=$t(),E=Lt("div"),mr(w.$$.fragment),ue(r,"class","svelte-pzfb8c"),ue(d,"class","chart-container first svelte-pzfb8c"),ue(E,"class","chart-container second svelte-pzfb8c"),ue(a,"id","container-wrap"),ue(a,"class","svelte-pzfb8c"),ue(t,"id","linechart"),ue(t,"class","svelte-pzfb8c")},m(Q,k){st(Q,t,k),it(t,r),it(r,s),it(r,l),it(r,c),it(t,h),it(t,a),it(a,d),fr(_,d,null),it(a,p),it(a,E),fr(w,E,null),x=!0},p(Q,[k]){(!x||k&1)&&$n(l,Q[0]);const R={};k&8&&(R.yDomain=[0,Q[3]]),k&2&&(R.data=Q[1]),k&1074&&(R.$$scope={dirty:k,ctx:Q}),_.$set(R);const P={};k&8&&(P.yDomain=[0,Q[3]]),k&4&&(P.data=Q[2]),k&1028&&(P.$$scope={dirty:k,ctx:Q}),w.$set(P)},i(Q){x||(Tt(_.$$.fragment,Q),Tt(w.$$.fragment,Q),x=!0)},o(Q){Kt(_.$$.fragment,Q),Kt(w.$$.fragment,Q),x=!1},d(Q){Q&&nt(t),dr(_),dr(w)}}}const $1="year",Hh="total_prison_adm";function LE(e,t,r){let{parishname:s}=t,l=[],c=[],h=[],a=100;console.log("window.innerWidth",window.innerWidth),Wa(async()=>{l=(await pl("https://vera-louisiana-data.s3.amazonaws.com/curated_data/clearinghouse/parish_prison_adm_trends.csv")).filter(Q=>Q.parish==s+" Parish"),l.forEach(function(Q){Q.year=+Q.year,Q.total_prison_adm=+Q.total_prison_adm}),r(1,c=l.filter(Q=>Q.year<=2014)),r(2,h=l.filter(Q=>Q.year>=2019)),r(3,a=Xf(l,Q=>Q.total_prison_adm)),c.forEach(Q=>{Q[Hh]=+Q[Hh]}),h.forEach(Q=>{Q[Hh]=+Q[Hh]})});const d=Rp("%Y");let _,p=!1;const E=x=>r(4,_=r(5,p=x)),w=()=>r(5,p=!0);return e.$$set=x=>{"parishname"in x&&r(0,s=x.parishname)},[s,c,h,a,_,p,d,E,w]}class kE extends ii{constructor(t){super(),ni(this,t,LE,UE,ti,{parishname:0})}}function ey(e){const t={...e[37].props};e[38]=t}function QE(e){let t,r,s,l,c,h;return t=new Oc({props:{gridlines:!0,baseline:!0,snapTicks:!0,ticks:"4"}}),s=new Hc({props:{gridlines:!1}}),c=new Op({props:{fill:"#0e002c"}}),c.$on("mousemove",e[5]),c.$on("mouseout",e[6]),{c(){mr(t.$$.fragment),r=$t(),mr(s.$$.fragment),l=$t(),mr(c.$$.fragment)},m(a,d){fr(t,a,d),st(a,r,d),fr(s,a,d),st(a,l,d),fr(c,a,d),h=!0},p:bn,i(a){h||(Tt(t.$$.fragment,a),Tt(s.$$.fragment,a),Tt(c.$$.fragment,a),h=!0)},o(a){Kt(t.$$.fragment,a),Kt(s.$$.fragment,a),Kt(c.$$.fragment,a),h=!1},d(a){dr(t,a),a&&nt(r),dr(s,a),a&&nt(l),dr(c,a)}}}function ty(e){let t,r;return t=new ud({props:{evt:e[2],$$slots:{default:[PE,({detail:s})=>({37:s}),({detail:s})=>[0,s?64:0]]},$$scope:{ctx:e}}}),{c(){mr(t.$$.fragment)},m(s,l){fr(t,s,l),r=!0},p(s,l){const c={};l[0]&4&&(c.evt=s[2]),l[1]&320&&(c.$$scope={dirty:l,ctx:s}),t.$set(c)},i(s){r||(Tt(t.$$.fragment,s),r=!0)},o(s){Kt(t.$$.fragment,s),r=!1},d(s){dr(t,s)}}}function PE(e){ey(e);let t,r=(+e[38].people).toFixed(0)+"",s,l;return{c(){t=Lt("div"),s=Fr(r),l=Fr(" people"),ue(t,"class","row")},m(c,h){st(c,t,h),it(t,s),it(t,l)},p(c,h){ey(c),h[1]&64&&r!==(r=(+c[38].people).toFixed(0)+"")&&$n(s,r)},d(c){c&&nt(t)}}}function ME(e){let t,r,s=e[3]!==!0&&ty(e);return{c(){s&&s.c(),t=yo()},m(l,c){s&&s.m(l,c),st(l,t,c),r=!0},p(l,c){l[3]!==!0?s?(s.p(l,c),c[0]&8&&Tt(s,1)):(s=ty(l),s.c(),Tt(s,1),s.m(t.parentNode,t)):s&&(Xa(),Kt(s,1,1,()=>{s=null}),Za())},i(l){r||(Tt(s),r=!0)},o(l){Kt(s),r=!1},d(l){s&&s.d(l),l&&nt(t)}}}function DE(e){let t,r,s,l;return t=new oh({props:{$$slots:{default:[QE]},$$scope:{ctx:e}}}),s=new ah({props:{pointerEvents:!1,$$slots:{default:[ME]},$$scope:{ctx:e}}}),{c(){mr(t.$$.fragment),r=$t(),mr(s.$$.fragment)},m(c,h){fr(t,c,h),st(c,r,h),fr(s,c,h),l=!0},p(c,h){const a={};h[0]&12|h[1]&256&&(a.$$scope={dirty:h,ctx:c}),t.$set(a);const d={};h[0]&12|h[1]&256&&(d.$$scope={dirty:h,ctx:c}),s.$set(d)},i(c){l||(Tt(t.$$.fragment,c),Tt(s.$$.fragment,c),l=!0)},o(c){Kt(t.$$.fragment,c),Kt(s.$$.fragment,c),l=!1},d(c){dr(t,c),c&&nt(r),dr(s,c)}}}function NE(e){let t,r,s,l,c,h,a,d,_,p,E,w,x,Q,k,R,P,O,G;return r=new uE({props:{parishname:e[0]}}),x=new nh({props:{padding:{top:0,bottom:40,left:e[4]},x:hg,y:jE,yScale:eh().paddingInner([.15]),xDomain:[0,null],data:e[1],$$slots:{default:[DE]},$$scope:{ctx:e}}}),R=new kE({props:{parishname:e[0]}}),{c(){t=Lt("div"),mr(r.$$.fragment),s=$t(),l=Lt("p"),l.textContent=`Incarceration takes many forms in Louisiana and includes state prisons, parish
  jails operated by sheriffs, jails operated by private companies, municipal
  jails operated by police departments, and sheriff-operated Transitional Work
  Programs. Many of these facilities are playing roles they should not play.
  This is especially true of jails: intended to hold only pretrial detainees and
  people serving short sentences, many Louisiana jails are holding people
  serving long prison sentences. All these facilities have a financial stake in
  filling their capacity. Ending Louisiana’s reliance on incarceration
  ultimately requires reducing capacity and permanently closing facilities.`,c=$t(),h=Lt("div"),a=Lt("h4"),d=Fr("People held in "),_=Fr(e[0]),p=Fr(" Parish Jails, by Jurisdiction (November 26, 2021)"),E=$t(),w=Lt("div"),mr(x.$$.fragment),Q=$t(),k=Lt("div"),mr(R.$$.fragment),P=$t(),O=Lt("div"),O.innerHTML=`<p><span class="rec svelte-1h9vuvp">Recommendation</span>: End Louisiana’s practice of housing
    distinct groups of people with vastly different needs in the same multi-use
    facilities; for example, housing juveniles at Louisiana State Penitentiary
    (Angola) and housing people with prison sentences in pretrial detention
    facilities, like parish jails. The state should use sentencing reform,
    applied retroactively, to reduce the number of incarcerated people to fit
    current Department of Public Safety &amp; Corrections capacity.</p> 
  <p><span class="rec svelte-1h9vuvp">Recommendation</span>: Pass a data transparency bill that
    standardizes the data a carceral facility must collect and report.</p> 
  <p><span class="rec svelte-1h9vuvp">Recommendation</span>: Reduce the prison population by
    providing parole eligibility after 20 years to people serving long sentences
    and after 25 years to those serving life sentences; making
    parole-eligibility and sentencing reforms available retroactively; and
    implementing a felony classification system to eliminate inconsistencies in
    sentencing and release.</p>`,ue(t,"id","waffle"),ue(l,"class","break-avoid"),ue(w,"class","chart-container svelte-1h9vuvp"),ue(h,"class","barchart svelte-1h9vuvp"),ue(k,"id","lines"),ue(k,"class","svelte-1h9vuvp"),ue(O,"id","recs")},m(V,Z){st(V,t,Z),fr(r,t,null),st(V,s,Z),st(V,l,Z),st(V,c,Z),st(V,h,Z),it(h,a),it(a,d),it(a,_),it(a,p),it(h,E),it(h,w),fr(x,w,null),st(V,Q,Z),st(V,k,Z),fr(R,k,null),st(V,P,Z),st(V,O,Z),G=!0},p(V,Z){const te={};Z[0]&1&&(te.parishname=V[0]),r.$set(te),(!G||Z[0]&1)&&$n(_,V[0]);const ce={};Z[0]&16&&(ce.padding={top:0,bottom:40,left:V[4]}),Z[0]&2&&(ce.data=V[1]),Z[0]&12|Z[1]&256&&(ce.$$scope={dirty:Z,ctx:V}),x.$set(ce);const he={};Z[0]&1&&(he.parishname=V[0]),R.$set(he)},i(V){G||(Tt(r.$$.fragment,V),Tt(x.$$.fragment,V),Tt(R.$$.fragment,V),G=!0)},o(V){Kt(r.$$.fragment,V),Kt(x.$$.fragment,V),Kt(R.$$.fragment,V),G=!1},d(V){V&&nt(t),dr(r),V&&nt(s),V&&nt(l),V&&nt(c),V&&nt(h),dr(x),V&&nt(Q),V&&nt(k),dr(R),V&&nt(P),V&&nt(O)}}}const hg="people",jE="jurisdiction";function RE(e,t,r){let{parishname:s}=t,l=[],c=[];Wa(async()=>{l=(await pl("https://vera-louisiana-data.s3.amazonaws.com/curated_data/clearinghouse/parish_facilities.csv")).filter(w=>w.parish==s+" Parish"),r(1,c=[{people:+l[0].held_for_doc_dpsc_2021,jurisdiction:"State DOC"},{people:+l[0].held_for_fed_dpsc_2021,jurisdiction:"Federal"},{people:+l[0].pretrial_dpsc_2021,jurisdiction:"Pretrial"},{people:+l[0].parish_dpsc_2021,jurisdiction:"Parish"},{people:+l[0].held_for_ice_ice_2021,jurisdiction:"ICE"}]),c.sort((w,x)=>x.people-w.people),c.forEach(w=>{w[hg]=+w[hg]})});let h,a=!1,d;window.innerWidth<600?d=80:d=120;const _=E=>r(2,h=r(3,a=E)),p=()=>r(3,a=!0);return e.$$set=E=>{"parishname"in E&&r(0,s=E.parishname)},[s,c,h,a,d,_,p]}class ry extends ii{constructor(t){super(),ni(this,t,RE,NE,ti,{parishname:0},null,[-1,-1])}}function ny(e,t,r){const s=e.slice();s[30]=t[r],s[37]=r;const l=s[6](s[30]);s[31]=l;const c=s[5](s[30]);s[32]=c;const h=Array.isArray(s[32])?s[32][0]:s[32];s[33]=h;const a=s[9].bandwidth?s[9].bandwidth():s[7](s[30]);s[34]=a;const d=s[10](s[30]);return s[35]=d,s}function iy(e){let t,r=e[35]+"",s,l,c;return{c(){t=Gn("text"),s=Fr(r),ue(t,"x",l=e[33]+e[34]/2),ue(t,"y",c=e[12]-e[31]-5),ue(t,"text-anchor","middle"),ue(t,"class","svelte-xn7mh7")},m(h,a){st(h,t,a),it(t,s)},p(h,a){a[0]&1280&&r!==(r=h[35]+"")&&$n(s,r),a[0]&928&&l!==(l=h[33]+h[34]/2)&&ue(t,"x",l),a[0]&4416&&c!==(c=h[12]-h[31]-5)&&ue(t,"y",c)},d(h){h&&nt(t)}}}function sy(e){let t,r,s,l,c,h,a,d,_,p;function E(...k){return e[24](e[30],...k)}function w(...k){return e[25](e[30],...k)}function x(...k){return e[26](e[30],...k)}let Q=e[3]&&e[35]&&iy(e);return{c(){t=Gn("rect"),Q&&Q.c(),d=yo(),ue(t,"class","group-rect"),ue(t,"data-id",e[37]),ue(t,"data-range",r=e[11](e[30])),ue(t,"data-count",s=e[35]),ue(t,"x",l=e[33]),ue(t,"y",c=e[4](e[30])),ue(t,"width",h=e[34]),ue(t,"height",a=e[31]),ue(t,"fill",e[0]),ue(t,"stroke",e[1]),ue(t,"stroke-width",e[2])},m(k,R){st(k,t,R),Q&&Q.m(k,R),st(k,d,R),_||(p=[es(t,"mouseover",E),es(t,"focus",w),es(t,"mousemove",x)],_=!0)},p(k,R){e=k,R[0]&2304&&r!==(r=e[11](e[30]))&&ue(t,"data-range",r),R[0]&1280&&s!==(s=e[35])&&ue(t,"data-count",s),R[0]&288&&l!==(l=e[33])&&ue(t,"x",l),R[0]&272&&c!==(c=e[4](e[30]))&&ue(t,"y",c),R[0]&896&&h!==(h=e[34])&&ue(t,"width",h),R[0]&320&&a!==(a=e[31])&&ue(t,"height",a),R[0]&1&&ue(t,"fill",e[0]),R[0]&2&&ue(t,"stroke",e[1]),R[0]&4&&ue(t,"stroke-width",e[2]),e[3]&&e[35]?Q?Q.p(e,R):(Q=iy(e),Q.c(),Q.m(d.parentNode,d)):Q&&(Q.d(1),Q=null)},d(k){k&&nt(t),Q&&Q.d(k),k&&nt(d),_=!1,tA(p)}}}function OE(e){let t,r=e[8],s=[];for(let l=0;l<r.length;l+=1)s[l]=sy(ny(e,r,l));return{c(){t=Gn("g");for(let l=0;l<s.length;l+=1)s[l].c();ue(t,"class","column-group")},m(l,c){st(l,t,c);for(let h=0;h<s.length;h+=1)s[h].m(t,null)},p(l,c){if(c[0]&6299647){r=l[8];let h;for(h=0;h<r.length;h+=1){const a=ny(l,r,h);s[h]?s[h].p(a,c):(s[h]=sy(a),s[h].c(),s[h].m(t,null))}for(;h<s.length;h+=1)s[h].d(1);s.length=r.length}},i:bn,o:bn,d(l){l&&nt(t),Vl(s,l)}}}function HE(e,t,r){let s,l,c,h,a,d,_,p,E,w;const{data:x,xGet:Q,yGet:k,x:R,yRange:P,xScale:O,y:G,height:V,zGet:Z,zScale:te,z:ce}=$o("LayerCake");$r(e,x,He=>r(8,d=He)),$r(e,Q,He=>r(5,a=He)),$r(e,k,He=>r(4,c=He)),$r(e,R,He=>r(11,E=He)),$r(e,P,He=>r(23,h=He)),$r(e,O,He=>r(9,_=He)),$r(e,G,He=>r(10,p=He)),$r(e,V,He=>r(12,w=He));let{fill:he="royalblue"}=t,{stroke:Ce="#000"}=t,{strokeWidth:fe=0}=t,{showLabels:ee=!1}=t;const re=$h();function be(He){return function(Je){raise(this),Je.layerX!==0&&Je.layerY!==0&&re("mousemove",{e:Je})}}const me=(He,Le)=>re("mousemove",{e:Le,props:He}),Re=(He,Le)=>re("mousemove",{e:Le,props:He}),_e=(He,Le)=>be();return e.$$set=He=>{"fill"in He&&r(0,he=He.fill),"stroke"in He&&r(1,Ce=He.stroke),"strokeWidth"in He&&r(2,fe=He.strokeWidth),"showLabels"in He&&r(3,ee=He.showLabels)},e.$$.update=()=>{e.$$.dirty[0]&32&&r(7,s=He=>{const Le=a(He);return Math.abs(Le[1]-Le[0])}),e.$$.dirty[0]&8388624&&r(6,l=He=>h[0]-c(He))},[he,Ce,fe,ee,c,a,l,s,d,_,p,E,w,x,Q,k,R,P,O,G,V,re,be,h,me,Re,_e]}class zE extends ii{constructor(t){super(),ni(this,t,HE,OE,ti,{fill:0,stroke:1,strokeWidth:2,showLabels:3},null,[-1,-1])}}var ay={},VE={get exports(){return ay},set exports(e){ay=e}};(function(e,t){(function(r,s){s()})(Hl,function(){function r(_,p){return typeof p>"u"?p={autoBom:!1}:typeof p!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),p={autoBom:!p}),p.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(_.type)?new Blob(["\uFEFF",_],{type:_.type}):_}function s(_,p,E){var w=new XMLHttpRequest;w.open("GET",_),w.responseType="blob",w.onload=function(){d(w.response,p,E)},w.onerror=function(){console.error("could not download file")},w.send()}function l(_){var p=new XMLHttpRequest;p.open("HEAD",_,!1);try{p.send()}catch{}return 200<=p.status&&299>=p.status}function c(_){try{_.dispatchEvent(new MouseEvent("click"))}catch{var p=document.createEvent("MouseEvents");p.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),_.dispatchEvent(p)}}var h=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Hl=="object"&&Hl.global===Hl?Hl:void 0,a=h.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),d=h.saveAs||(typeof window!="object"||window!==h?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(_,p,E){var w=h.URL||h.webkitURL,x=document.createElement("a");p=p||_.name||"download",x.download=p,x.rel="noopener",typeof _=="string"?(x.href=_,x.origin===location.origin?c(x):l(x.href)?s(_,p,E):c(x,x.target="_blank")):(x.href=w.createObjectURL(_),setTimeout(function(){w.revokeObjectURL(x.href)},4e4),setTimeout(function(){c(x)},0))}:"msSaveOrOpenBlob"in navigator?function(_,p,E){if(p=p||_.name||"download",typeof _!="string")navigator.msSaveOrOpenBlob(r(_,E),p);else if(l(_))s(_,p,E);else{var w=document.createElement("a");w.href=_,w.target="_blank",setTimeout(function(){c(w)})}}:function(_,p,E,w){if(w=w||open("","_blank"),w&&(w.document.title=w.document.body.innerText="downloading..."),typeof _=="string")return s(_,p,E);var x=_.type==="application/octet-stream",Q=/constructor/i.test(h.HTMLElement)||h.safari,k=/CriOS\/[\d]+/.test(navigator.userAgent);if((k||x&&Q||a)&&typeof FileReader<"u"){var R=new FileReader;R.onloadend=function(){var G=R.result;G=k?G:G.replace(/^data:[^;]*;/,"data:attachment/file;"),w?w.location.href=G:location=G,w=null},R.readAsDataURL(_)}else{var P=h.URL||h.webkitURL,O=P.createObjectURL(_);w?w.location=O:location.href=O,w=null,setTimeout(function(){P.revokeObjectURL(O)},4e4)}});h.saveAs=d.saveAs=d,e.exports=d})})(VE);function oy(e){const t={...e[13].props};e[14]=t}function Ay(e){let t,r,s,l,c,h,a,d,_,p,E,w,x,Q,k,R,P,O,G,V,Z,te,ce,he,Ce,fe,ee,re,be,me,Re,_e,He,Le,Je,ke=e[3].total_jail_pretrial.toFixed(0)+"",kt,ie,Se,Qe,Ke=e[3].required_reduction.toFixed(0)+"",ot,dt,Bt=(e[3].required_reduction_pct*100).toFixed(1)+"",Ge,rt;function Qt(yr,sr){return yr[3].required_reduction_pct>.95?GE:KE}let ht=Qt(e),Nt=ht(e);function gr(yr,sr){return yr[3].required_reduction_pct>.95?WE:qE}let Pt=gr(e),ze=Pt(e);return{c(){t=Lt("div"),r=Gn("svg"),s=Gn("defs"),l=Gn("pattern"),c=Gn("image"),h=$t(),a=Lt("div"),d=Gn("svg"),Nt.c(),_=Gn("text"),p=Fr("reduction required"),ze.c(),w=Gn("line"),k=Gn("rect"),O=Gn("rect"),te=Gn("rect"),ce=Gn("rect"),he=Gn("text"),Ce=Fr("pretrial population"),fe=Gn("text"),ee=Fr("reduction required"),me=$t(),Re=Lt("div"),_e=Lt("p"),He=Fr("As of "),Le=Fr(e[5]),Je=Fr(", there were "),kt=Fr(ke),ie=Fr(" held pretrial in "),Se=Fr(e[0]),Qe=Fr(`’s jails. The number of people held
        pretrial needs to decrease by `),ot=Fr(Ke),dt=Fr(" ("),Ge=Fr(Bt),rt=Fr(` percent) to
        align with the national average.`),k_(c,"xlink:href","data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPScxMCcgaGVpZ2h0PScxMCc+CiAgPHJlY3Qgd2lkdGg9JzEwJyBoZWlnaHQ9JzEwJyBmaWxsPSd3aGl0ZScvPgogIDxwYXRoIGQ9J00tMSwxIGwyLC0yCiAgICAgICAgICAgTTAsMTAgbDEwLC0xMAogICAgICAgICAgIE05LDExIGwyLC0yJyBzdHJva2U9J2JsYWNrJyBzdHJva2Utd2lkdGg9JzMnLz4KPC9zdmc+"),ue(c,"x","0"),ue(c,"y","0"),ue(c,"width","10"),ue(c,"height","10"),ue(l,"id","diagonal-stripe-3"),ue(l,"patternUnits","userSpaceOnUse"),ue(l,"width","10"),ue(l,"height","10"),ue(r,"height","10"),ue(r,"width","10"),ue(r,"xmlns","http://www.w3.org/2000/svg"),ue(r,"version","1.1"),ue(_,"x","0"),ue(_,"y",E=e[3].reductionLine),ue(_,"fill","#000"),ue(_,"class","svelte-1xnl78g"),ue(w,"x1","140"),ue(w,"y1",x=e[3].reductionLine2),ue(w,"x2","200"),ue(w,"y2",Q=e[3].reductionLine2),ue(w,"stroke","#000"),ue(w,"class","svelte-1xnl78g"),ue(k,"width",R=e[3].parishPretrialSquareSide),ue(k,"height",P=e[3].parishPretrialSquareSide),ue(k,"x",e[4]),ue(k,"y","0"),ue(k,"fill","#0e002c"),ue(O,"width",G=e[3].parishReductionSquareSide),ue(O,"height",V=e[3].parishReductionSquareSide),ue(O,"x",e[4]),ue(O,"y",Z=e[3].parishPretrialSquareSide-e[3].parishReductionSquareSide),ue(O,"stroke-width","2"),ue(O,"stroke-dasharray","3 6"),ue(O,"stroke","#ef4136"),ue(O,"fill","url(#diagonal-stripe-3)"),ue(O,"opacity",".8"),ue(te,"class","mobile_legend svelte-1xnl78g"),ue(te,"width","15"),ue(te,"height","15"),ue(te,"x","0"),ue(te,"y","210"),ue(te,"fill","#0e002c"),ue(ce,"class","mobile_legend svelte-1xnl78g"),ue(ce,"width","15"),ue(ce,"height","15"),ue(ce,"x","0"),ue(ce,"y","230"),ue(ce,"fill","url(#diagonal-stripe-3)"),ue(ce,"stroke-width","2"),ue(ce,"stroke-dasharray","3,6"),ue(ce,"stroke","rgb(239, 65, 54)"),ue(he,"class","mobile_legend svelte-1xnl78g"),ue(he,"x","20"),ue(he,"y","222"),ue(he,"fill","#000"),ue(fe,"class","mobile_legend svelte-1xnl78g"),ue(fe,"x","20"),ue(fe,"y","242"),ue(fe,"fill","#000"),ue(d,"height",re=e[3].svgSizeH+"px"),ue(d,"width",be=e[3].svgSizeW+"px"),ue(_e,"class","propdescription svelte-1xnl78g"),ue(t,"id","proportion"),ue(t,"class","svelte-1xnl78g")},m(yr,sr){st(yr,t,sr),it(t,r),it(r,s),it(s,l),it(l,c),it(t,h),it(t,a),it(a,d),Nt.m(d,null),it(d,_),it(_,p),ze.m(d,null),it(d,w),it(d,k),it(d,O),it(d,te),it(d,ce),it(d,he),it(he,Ce),it(d,fe),it(fe,ee),it(t,me),it(t,Re),it(Re,_e),it(_e,He),it(_e,Le),it(_e,Je),it(_e,kt),it(_e,ie),it(_e,Se),it(_e,Qe),it(_e,ot),it(_e,dt),it(_e,Ge),it(_e,rt)},p(yr,sr){ht===(ht=Qt(yr))&&Nt?Nt.p(yr,sr):(Nt.d(1),Nt=ht(yr),Nt&&(Nt.c(),Nt.m(d,_))),sr&8&&E!==(E=yr[3].reductionLine)&&ue(_,"y",E),Pt===(Pt=gr(yr))&&ze?ze.p(yr,sr):(ze.d(1),ze=Pt(yr),ze&&(ze.c(),ze.m(d,w))),sr&8&&x!==(x=yr[3].reductionLine2)&&ue(w,"y1",x),sr&8&&Q!==(Q=yr[3].reductionLine2)&&ue(w,"y2",Q),sr&8&&R!==(R=yr[3].parishPretrialSquareSide)&&ue(k,"width",R),sr&8&&P!==(P=yr[3].parishPretrialSquareSide)&&ue(k,"height",P),sr&16&&ue(k,"x",yr[4]),sr&8&&G!==(G=yr[3].parishReductionSquareSide)&&ue(O,"width",G),sr&8&&V!==(V=yr[3].parishReductionSquareSide)&&ue(O,"height",V),sr&16&&ue(O,"x",yr[4]),sr&8&&Z!==(Z=yr[3].parishPretrialSquareSide-yr[3].parishReductionSquareSide)&&ue(O,"y",Z),sr&8&&re!==(re=yr[3].svgSizeH+"px")&&ue(d,"height",re),sr&8&&be!==(be=yr[3].svgSizeW+"px")&&ue(d,"width",be),sr&32&&$n(Le,yr[5]),sr&8&&ke!==(ke=yr[3].total_jail_pretrial.toFixed(0)+"")&&$n(kt,ke),sr&1&&$n(Se,yr[0]),sr&8&&Ke!==(Ke=yr[3].required_reduction.toFixed(0)+"")&&$n(ot,Ke),sr&8&&Bt!==(Bt=(yr[3].required_reduction_pct*100).toFixed(1)+"")&&$n(Ge,Bt)},d(yr){yr&&nt(t),Nt.d(),ze.d()}}}function KE(e){let t,r,s;return{c(){t=Gn("text"),r=Fr("pretrial population"),ue(t,"x","0"),ue(t,"y",s=e[3].parishPretrialLine),ue(t,"fill","#000"),ue(t,"class","svelte-1xnl78g")},m(l,c){st(l,t,c),it(t,r)},p(l,c){c&8&&s!==(s=l[3].parishPretrialLine)&&ue(t,"y",s)},d(l){l&&nt(t)}}}function GE(e){let t,r,s;return{c(){t=Gn("text"),r=Fr("pretrial population"),ue(t,"x","0"),ue(t,"y",s=e[3].parishPretrialLine+9),ue(t,"fill","#000"),ue(t,"class","svelte-1xnl78g")},m(l,c){st(l,t,c),it(t,r)},p(l,c){c&8&&s!==(s=l[3].parishPretrialLine+9)&&ue(t,"y",s)},d(l){l&&nt(t)}}}function qE(e){let t,r,s;return{c(){t=Gn("line"),ue(t,"x1","140"),ue(t,"y1",r=e[3].parishPretrialLine2),ue(t,"x2","200"),ue(t,"y2",s=e[3].parishPretrialLine2),ue(t,"stroke","#000"),ue(t,"class","svelte-1xnl78g")},m(l,c){st(l,t,c)},p(l,c){c&8&&r!==(r=l[3].parishPretrialLine2)&&ue(t,"y1",r),c&8&&s!==(s=l[3].parishPretrialLine2)&&ue(t,"y2",s)},d(l){l&&nt(t)}}}function WE(e){let t,r,s;return{c(){t=Gn("line"),ue(t,"x1","140"),ue(t,"y1",r=e[3].parishPretrialLine2+7),ue(t,"x2","200"),ue(t,"y2",s=e[3].parishPretrialLine2+7),ue(t,"stroke","#000"),ue(t,"class","svelte-1xnl78g")},m(l,c){st(l,t,c)},p(l,c){c&8&&r!==(r=l[3].parishPretrialLine2+7)&&ue(t,"y1",r),c&8&&s!==(s=l[3].parishPretrialLine2+7)&&ue(t,"y2",s)},d(l){l&&nt(t)}}}function XE(e){let t,r,s,l,c,h;return t=new zE({}),t.$on("mousemove",e[8]),t.$on("mouseout",e[9]),s=new Oc({props:{gridlines:!1,snapTicks:!0,ticks:"4"}}),c=new Hc({props:{gridlines:!0}}),{c(){mr(t.$$.fragment),r=$t(),mr(s.$$.fragment),l=$t(),mr(c.$$.fragment)},m(a,d){fr(t,a,d),st(a,r,d),fr(s,a,d),st(a,l,d),fr(c,a,d),h=!0},p:bn,i(a){h||(Tt(t.$$.fragment,a),Tt(s.$$.fragment,a),Tt(c.$$.fragment,a),h=!0)},o(a){Kt(t.$$.fragment,a),Kt(s.$$.fragment,a),Kt(c.$$.fragment,a),h=!1},d(a){dr(t,a),a&&nt(r),dr(s,a),a&&nt(l),dr(c,a)}}}function ly(e){let t,r;return t=new ud({props:{evt:e[6],$$slots:{default:[ZE,({detail:s})=>({13:s}),({detail:s})=>s?8192:0]},$$scope:{ctx:e}}}),{c(){mr(t.$$.fragment)},m(s,l){fr(t,s,l),r=!0},p(s,l){const c={};l&64&&(c.evt=s[6]),l&40960&&(c.$$scope={dirty:l,ctx:s}),t.$set(c)},i(s){r||(Tt(t.$$.fragment,s),r=!0)},o(s){Kt(t.$$.fragment,s),r=!1},d(s){dr(t,s)}}}function ZE(e){oy(e);let t,r=(+e[14].total_jail_pretrial).toFixed(0)+"",s,l;return{c(){t=Lt("div"),s=Fr(r),l=Fr(" people"),ue(t,"class","row")},m(c,h){st(c,t,h),it(t,s),it(t,l)},p(c,h){oy(c),h&8192&&r!==(r=(+c[14].total_jail_pretrial).toFixed(0)+"")&&$n(s,r)},d(c){c&&nt(t)}}}function JE(e){let t,r,s=e[7]!==!0&&ly(e);return{c(){s&&s.c(),t=yo()},m(l,c){s&&s.m(l,c),st(l,t,c),r=!0},p(l,c){l[7]!==!0?s?(s.p(l,c),c&128&&Tt(s,1)):(s=ly(l),s.c(),Tt(s,1),s.m(t.parentNode,t)):s&&(Xa(),Kt(s,1,1,()=>{s=null}),Za())},i(l){r||(Tt(s),r=!0)},o(l){Kt(s),r=!1},d(l){s&&s.d(l),l&&nt(t)}}}function YE(e){let t,r,s,l;return t=new oh({props:{$$slots:{default:[XE]},$$scope:{ctx:e}}}),s=new ah({props:{pointerEvents:!1,$$slots:{default:[JE]},$$scope:{ctx:e}}}),{c(){mr(t.$$.fragment),r=$t(),mr(s.$$.fragment)},m(c,h){fr(t,c,h),st(c,r,h),fr(s,c,h),l=!0},p(c,h){const a={};h&32960&&(a.$$scope={dirty:h,ctx:c}),t.$set(a);const d={};h&32960&&(d.$$scope={dirty:h,ctx:c}),s.$set(d)},i(c){l||(Tt(t.$$.fragment,c),Tt(s.$$.fragment,c),l=!0)},o(c){Kt(t.$$.fragment,c),Kt(s.$$.fragment,c),l=!1},d(c){dr(t,c),c&&nt(r),dr(s,c)}}}function $E(e){let t,r,s,l,c,h,a,d,_,p,E,w,x,Q,k,R,P,O,G=e[3].required_reduction_pct>=0&&Ay(e);return x=new nh({props:{padding:{top:0,right:0,bottom:20,left:20},x:fg,y:eF,xScale:eh().paddingInner([.05]).round(!0),xDomain:["1970","1978","1983","1988","1993","1999","2006","2013","2019","2021"],yDomain:[0,e[2]],data:e[1],$$slots:{default:[YE]},$$scope:{ctx:e}}}),{c(){t=Lt("p"),t.innerHTML=`In 2019, there were nearly 16,000 people held pretrial in Louisiana on a
  typical day—more than twice the national average per capita and more than five
  times the rate of the state with the lowest pretrial detention rate (New
  Hampshire). Louisiana law allows the state to hold people longer without trial
  or conviction than most other states, resulting in lengthy pretrial stays—<a href="https://www.laaclu.org/sites/default/files/field_documents/aclu_la_justicecantwaitreport_02102020_online.pdf" target="_blank">an average of 5.5 months</a>.`,r=$t(),G&&G.c(),s=$t(),l=Lt("p"),l.innerHTML=`Money bail criminalizes poverty by requiring people accused of a crime to pay
  hundreds or even thousands of dollars to be released before trial (often to
  the profit of the private bail bond industry). <a href="https://www.laaclu.org/sites/default/files/field_documents/aclu_la_justicecantwaitreport_02102020_online.pdf" target="_blank">Median bail</a>
  in Louisiana is nearly as high as the median salary. And it’s a system that costs
  taxpayers. For example, in 2015, extracting cash bail and other conviction-related
  fines and fees
  <a href="https://www.vera.org/downloads/publications/past-due-costs-consequences-charging-for-justice-new-orleans-fact-sheet.pdf" target="_blank">cost the City of New Orleans</a> $1.9 million more in jail costs than the revenue it generated for criminal legal
  agencies.`,c=$t(),h=Lt("h4"),a=Fr("Pretrial jail population in "),d=Fr(e[0]),_=Fr(" Parish (1970-2021)"),p=$t(),E=Lt("div"),w=Lt("div"),mr(x.$$.fragment),Q=$t(),k=Lt("p"),k.innerHTML=`<i>For complete detail on jail incarceration trends, including data for race
    and gender, see Vera’s <a href="https://trends.vera.org/" target="_blank">Incarceration Trends</a>.</i>`,R=$t(),P=Lt("div"),P.innerHTML=`<p><span class="rec svelte-1xnl78g">Recommendation</span>: Pass legislation that allows people
    charged with non-violent felonies and misdemeanors to be issued a summons in
    lieu of arrest, and enact comprehensive bail reform so that money does not
    determine freedom.</p>`,ue(t,"class","break-avoid"),ue(l,"class","break-avoid"),ue(w,"class","chart-container pretrial svelte-1xnl78g"),ue(E,"id","wrap"),ue(E,"class","svelte-1xnl78g"),ue(k,"class","note"),ue(P,"id","recs")},m(V,Z){st(V,t,Z),st(V,r,Z),G&&G.m(V,Z),st(V,s,Z),st(V,l,Z),st(V,c,Z),st(V,h,Z),it(h,a),it(h,d),it(h,_),st(V,p,Z),st(V,E,Z),it(E,w),fr(x,w,null),st(V,Q,Z),st(V,k,Z),st(V,R,Z),st(V,P,Z),O=!0},p(V,[Z]){V[3].required_reduction_pct>=0?G?G.p(V,Z):(G=Ay(V),G.c(),G.m(s.parentNode,s)):G&&(G.d(1),G=null),(!O||Z&1)&&$n(d,V[0]);const te={};Z&4&&(te.yDomain=[0,V[2]]),Z&2&&(te.data=V[1]),Z&32960&&(te.$$scope={dirty:Z,ctx:V}),x.$set(te)},i(V){O||(Tt(x.$$.fragment,V),O=!0)},o(V){Kt(x.$$.fragment,V),O=!1},d(V){V&&nt(t),V&&nt(r),G&&G.d(V),V&&nt(s),V&&nt(l),V&&nt(c),V&&nt(h),V&&nt(p),V&&nt(E),dr(x),V&&nt(Q),V&&nt(k),V&&nt(R),V&&nt(P)}}}const fg="year",eF="total_jail_pretrial";function tF(e,t,r){let{parishname:s}=t,l=[],c,h=[],a=[],d,_,E=Ga("#app").node().getBoundingClientRect().width;E>400?d=200:d=0,Wa(async()=>{const R=await pl("https://vera-louisiana-data.s3.amazonaws.com/curated_data/clearinghouse/pretrial_trends.csv");R.forEach(ee=>{ee.total_jail_pretrial=+ee.total_jail_pretrial}),r(1,l=R.filter(ee=>ee.parish==s+" Parish")),r(2,c=Xf(l,ee=>ee.total_jail_pretrial));const P=await pl("https://vera-louisiana-data.s3.amazonaws.com/curated_data/clearinghouse/pretrial_infographic.csv"),G=(await pl("https://vera-louisiana-data.s3.amazonaws.com/curated_data/clearinghouse/pretrial_date.csv")).filter(ee=>ee.parish==s+" Parish")[0].pretrial_date;let Z=Zg("%m/%d/%y")(G);const te=Rp("%B %d, %Y");r(5,_=te(Z)),h=P.filter(ee=>ee.parish==s+" Parish");let he=200*200*h[0].required_reduction_pct,Ce=Math.sqrt(he),fe=wu().domain([0,h[0].total_jail_pretrial]).range([0,200]);h.forEach(ee=>{ee.total_jail_pretrial=+ee.total_jail_pretrial,ee.required_reduction_pct=+ee.required_reduction_pct,ee.required_reduction=+ee.required_reduction,ee.parishPretrialSquareSide=fe(ee.total_jail_pretrial),ee.parishReductionSquareSide=Ce,ee.svgSizeW=420,ee.svgSizeH=E>400?220:260,ee.parishPretrialLine=(fe(ee.total_jail_pretrial)-fe(ee.total_jail_pretrial)*ee.required_reduction_pct)/2,ee.parishPretrialLine2=(fe(ee.total_jail_pretrial)-fe(ee.total_jail_pretrial)*ee.required_reduction_pct)/2-4,ee.reductionLine=fe(ee.total_jail_pretrial)*ee.required_reduction_pct/2+(fe(ee.total_jail_pretrial)-fe(ee.total_jail_pretrial)*ee.required_reduction_pct),ee.reductionLine2=fe(ee.total_jail_pretrial)*ee.required_reduction_pct/2+(fe(ee.total_jail_pretrial)-fe(ee.total_jail_pretrial)*ee.required_reduction_pct)-4}),r(3,a=h[0])}),l.forEach(R=>{R[fg]=+R[fg]});let w,x=!1;const Q=R=>r(6,w=r(7,x=R)),k=()=>r(7,x=!0);return e.$$set=R=>{"parishname"in R&&r(0,s=R.parishname)},[s,l,c,a,d,_,w,x,Q,k]}class cy extends ii{constructor(t){super(),ni(this,t,tF,$E,ti,{parishname:0})}}function rF(e){let t,r,s,l,c,h,a,d,_,p,E,w;return{c(){t=Lt("h4"),r=Fr("Annual "),s=Fr(e[0]),l=Fr(" Parish government payroll, by function ("),c=Fr(e[3]),h=Fr(")"),a=$t(),d=Lt("div"),_=$t(),p=Lt("div"),E=$t(),w=Lt("div"),w.innerHTML=`<div class="legend-item criminallegal svelte-1qt8esd"><div class="marker svelte-1qt8esd"></div> 
    <div class="name">Criminal Legal Spending</div></div> 
  <div class="legend-item other svelte-1qt8esd"><div class="marker svelte-1qt8esd"></div> 
    <div class="name">All Other Spending</div></div>`,ue(d,"class","feature svelte-1qt8esd"),ue(d,"id","chart"),ue(p,"class","tooltip svelte-1qt8esd"),ue(w,"class","legend svelte-1qt8esd")},m(x,Q){st(x,t,Q),it(t,r),it(t,s),it(t,l),it(t,c),it(t,h),st(x,a,Q),st(x,d,Q),e[4](d),st(x,_,Q),st(x,p,Q),e[5](p),st(x,E,Q),st(x,w,Q)},p(x,[Q]){Q&1&&$n(s,x[0]),Q&8&&$n(c,x[3])},i:bn,o:bn,d(x){x&&nt(t),x&&nt(a),x&&nt(d),e[4](null),x&&nt(_),x&&nt(p),e[5](null),x&&nt(E),x&&nt(w)}}}function nF(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")}function iF(e,t,r){let{parishname:s}=t,c=Ga(".tabs").node().getBoundingClientRect().width,h,a=280;c<400?h=c-20:h=c-80;let d=[],_=[],p=[],E=[],w;K5().parentId(function(P){return P.id.substring(0,P.id.lastIndexOf("."))}),V0().size([h,a]).padding(1).round(!0);let x=Ga("body").append("div").attr("class","tooltip"),Q;Wa(async()=>{d=(await pl("https://vera-louisiana-data.s3.amazonaws.com/curated_data/clearinghouse/la_state_and_local_gov_employment_payroll_parish.csv")).filter(Le=>Le.parish==s&&Le.government_function!=="budget"),r(3,Q=d[0].year),p=d.filter(Le=>Le.government_function=="budget.criminal.corrections"||Le.government_function=="budget.criminal.judicial_and_legal"||Le.government_function=="budget.criminal.police"),E=d.filter(Le=>Le.government_function!=="budget.criminal.corrections"&&Le.government_function!=="budget.criminal.judicial_and_legal"&&Le.government_function!=="budget.criminal.police"&&Le.government_function!=="budget.criminal.police.police_protection_other"&&Le.government_function!=="budget.criminal.police.police_protection_persons_with_power_of_arrest"&&Le.government_function!=="budget.criminal"&&Le.government_function!=="budget"),_=(await pl("https://vera-louisiana-data.s3.amazonaws.com/curated_data/clearinghouse/la_state_and_local_gov_employment_payroll_municipality.csv")).filter(Le=>Le.parish==s&&Le.government_function!=="budget");let G=d2(_,Le=>Le.name_of_government),V=[],Z=[];for(let Le=0;Le<G.length;Le++)V.push(G[Le][0]),Z.push(G[Le][1]);const te=["budget.air_transportation","budget.all_other_and_unallocable","budget.criminal.corrections","budget.criminal.judicial_and_legal","budget.criminal.police","budget.education_elementary_and_secondary_other","budget.electric_power","budget.financial_administration","budget.fire_protection_firefighters","budget.fire_protection_other","budget.gas_supply","budget.health","budget.highways","budget.hospitals","budget.housing_and_community_development","budget.libraries","budget.natural_resources","budget.other_government_administration","budget.parks_and_recreation","budget.public_welfare","budget.sea_and_inland_port_facilities","budget.sewerage","budget.solid_waste_management","budget.transit","budget.water_supply"],ce=["Air Transportation","All Other & Unallocable","Corrections","Judicial and Legal","Police","Education","Electric Power","Financial Administration","Firefighters","Fire Protection Other","Gas Supply","Health","Highways","Hospitals","Housing & Community Development","Libraries","Natural Resources","Other Gov't Administration","Parks & Recreation","Public Welfare","Sea & Inland Port Facilities","Sewerage","Solid Waste Management","Transit","Water Supply"],he=p.map(Le=>({name:ce[te.indexOf(Le.government_function)],value:+Le.total_payroll_percent_of_total,payroll:+Le.total_payroll,employees:+Le.full_time_employees})),Ce=E.map(Le=>({name:ce[te.indexOf(Le.government_function)],value:+Le.total_payroll_percent_of_total,payroll:+Le.total_payroll,employees:+Le.full_time_employees}));for(let Le=0;Le<Z.length;Le++)Z[Le].map(Je=>({name:ce[te.indexOf(Je.government_function)],value:+Je.total_payroll_percent_of_total,payroll:+Je.total_payroll,employees:+Je.full_time_employees}));var fe=a=100,ee=wu().domain([0,fe]).range([0,fe]),re=wu().domain([0,a]).range([0,a]);Sp().range(["#EF4136","#DA392F","#b6231a"]),Sp().range(["#2E1D97","#97DFD1","royalblue","#0E002C","#0A0319","navy","slateblue","#146571","#4625ae","#361694","#3d83da","#0553b3","#546a86","#6b91c0","#2d4d75"].map(function(Le){return Le=_p(Le),Le}));var be=V0().size([fe,a]).paddingInner(0).round(!1),me={name:"Budget",children:[{name:"Criminal Legal Spending",children:he},{name:"Other",children:Ce}]},Re=Gg(me).sum(function(Le){return Le.value?Le.value:0}).sort(function(Le,Je){return Je.height-Le.height||Je.value-Le.value});be(Re);var _e=Ga("#chart").append("div").attr("id","chartle"),He=_e.selectAll(".node").data(Re.descendants()).enter().append("div").attr("class",function(Le){return"node level-"+Le.depth}).attr("title",function(Le){return Le.data.name?Le.data.name:"null"});He.style("left",function(Le){return ee(Le.x0)+"%"}).style("top",function(Le){return re(Le.y0)+"%"}).style("width",function(Le){return ee(Le.x1)-ee(Le.x0)+"%"}).style("height",function(Le){return re(Le.y1)-re(Le.y0)+"%"}).style("background-color",function(Le){for(;Le.depth>2;)Le=Le.parent;return Le.data.name=="Corrections"||Le.data.name=="Police"||Le.data.name=="Judicial and Legal"?"#ef4136":"#0E002C"}).on("mouseover",function(Le,Je){var ke=Je.data.name+"<br/>$"+nF(Je.data.payroll)+" ("+Je.data.value.toFixed(1)+"%)";Ga(x).html(ke).style("visibility","visible")}).on("mousemove",function(Le,Je){Ga(x).style("top",Le.pageY+"px").style("left",Le.pageX+"px")}).on("mouseout",function(Le,Je){Cv("rect").attr("stroke-width",0),Ga(x).style("visibility","hidden")}),He.append("p").text(function(Le){return Le.data.name?Le.data.name:"---"}).attr("class",function(Le){let Je=Ga(this).node(),ke=Je.getBoundingClientRect().width,kt=Je.getBoundingClientRect().height,ie=Je.parentNode,Se=ie.getBoundingClientRect().width,Qe=ie.getBoundingClientRect().height;return ke>Se||kt+14>Qe?"label overflow":"label inbounds"})});function k(P){qa[P?"unshift":"push"](()=>{w=P,r(1,w)})}function R(P){qa[P?"unshift":"push"](()=>{x=P,r(2,x)})}return e.$$set=P=>{"parishname"in P&&r(0,s=P.parishname)},[s,w,x,Q,k,R]}class sF extends ii{constructor(t){super(),ni(this,t,iF,rF,ti,{parishname:0})}}function aF(e){let t,r,s,l,c,h,a;return l=new sF({props:{parishname:e[0]}}),{c(){t=Lt("p"),t.innerHTML=`A large proportion of parish and municipal budgets support the criminal legal
  system. But incarceration does not guarantee safety—if it did, Louisiana would
  be one of the safest places in the world. Every dollar spent on policing and
  incarceration is money that could instead go towards cost-efficient systems
  that are <a href="https://www.brookings.edu/essay/a-new-community-safety-blueprint-how-the-federal-government-can-address-violence-and-harm-through-a-public-health-approach/" target="_blank">proven to produce safety and keep people out of jails and prisons</a>, like mental health care, education, vocational programs, and housing.`,r=$t(),s=Lt("div"),mr(l.$$.fragment),c=$t(),h=Lt("div"),h.innerHTML=`<p><span class="rec svelte-1lv3cy1">Recommendation</span>: Enact meaningful reforms that will
    allow for jail decarceration, and then close jails and repurpose carceral
    facilities for non-jail, non-detention purposes. Reducing corrections
    spending and ending mass incarceration in Louisiana will require lowering
    jail capacity. This means working towards permanently closing jails.</p>`,ue(t,"class","break-avoid"),ue(s,"id","treemap"),ue(s,"class","svelte-1lv3cy1"),ue(h,"id","recs"),ue(h,"class","svelte-1lv3cy1")},m(d,_){st(d,t,_),st(d,r,_),st(d,s,_),fr(l,s,null),st(d,c,_),st(d,h,_),a=!0},p(d,[_]){const p={};_&1&&(p.parishname=d[0]),l.$set(p)},i(d){a||(Tt(l.$$.fragment,d),a=!0)},o(d){Kt(l.$$.fragment,d),a=!1},d(d){d&&nt(t),d&&nt(r),d&&nt(s),dr(l),d&&nt(c),d&&nt(h)}}}function oF(e,t,r){let{parishname:s}=t;return Wa(async()=>{}),e.$$set=l=>{"parishname"in l&&r(0,s=l.parishname)},[s]}class uy extends ii{constructor(t){super(),ni(this,t,oF,aF,ti,{parishname:0})}}function AF(e){let t,r,s;return{c(){t=Lt("div"),r=$t(),s=Lt("div"),ue(t,"id","vis"),ue(s,"class","tooltip svelte-1x80qnr")},m(l,c){st(l,t,c),e[3](t),st(l,r,c),st(l,s,c),e[4](s)},p:bn,i:bn,o:bn,d(l){l&&nt(t),e[3](null),l&&nt(r),l&&nt(s),e[4](null)}}}function lF(e,t,r){let{parishname:s}=t,l,c=[],h=Ga("body").append("div").attr("class","tooltip");Wa(async()=>{const _=await pl("https://vera-louisiana-data.s3.amazonaws.com/curated_data/clearinghouse/arrests_long.csv");_.forEach(G=>{if(G.the_value=+G.value,G.parameter=G.department.replace(/[^A-Z0-9]+/gi,""),G.metric=="black_pt2_arrests_pct")return G.segment="Pt 2 Arrests, Black (%)";if(G.metric=="black_pop_pct")return G.segment="Black Population (%)"});let p=_.filter(G=>G.parish==s+" Parish");var E=240,w=220,x={top:15,right:30,bottom:40,left:35},Q=eh().range([0,E]).padding(.1),k=wu().range([w,30]),R=C2().scale(Q),P=Array.from(new Set(p.map(function(G){return G.segment})));Q.domain(P),c=Array.from(u2(p,G=>G.parameter),([G,V])=>({key:G,value:V}));var O=Ga("#vis").selectAll("svg").data(c).enter().append("svg").attr("id","dept").attr("height",w+x.bottom).attr("class",function(G){return G.value[0].parameter});O.append("g").attr("transform","translate(0,"+16+")").append("text").text(G=>G.value[0].department),c.forEach(function(G,V){k.domain([0,Xf(G.value,function(te){return te.the_value})]),Ga("svg."+G.value[0].parameter).selectAll(".bar").data(G.value).enter().append("rect").attr("class","bar").attr("x",function(te){return Q(te.segment)}).attr("width",Q.bandwidth()).attr("y",function(te){return k(te.the_value)}).attr("height",function(te){return w-k(te.the_value)}).attr("stroke",te=>te.metric=="black_pt2_arrests_pct"?"none":"#97dfd1").attr("fill",te=>te.metric=="black_pt2_arrests_pct"?"#0e002c":"#97dfd1").on("mouseover",function(te,ce){var he=ce.the_value.toFixed(0)+"%";Ga(h).html(he).style("visibility","visible")}).on("mousemove",function(te,ce){Ga(h).style("top",te.pageY+"px").style("left",te.pageX+"px")}).on("mouseout",function(te,ce){Cv("rect").attr("stroke-width",0),Ga(h).style("visibility","hidden")}),Ga("svg."+G.value[0].parameter).append("g").attr("transform","translate(0,"+w+")").call(R)})});function a(_){qa[_?"unshift":"push"](()=>{l=_,r(0,l)})}function d(_){qa[_?"unshift":"push"](()=>{h=_,r(1,h)})}return e.$$set=_=>{"parishname"in _&&r(2,s=_.parishname)},[l,h,s,a,d]}class cF extends ii{constructor(t){super(),ni(this,t,lF,AF,ti,{parishname:2})}}function hy(e){const t={...e[10].props};e[11]=t}function uF(e){let t,r,s,l,c,h;return t=new Oc({props:{gridlines:!0,baseline:!0,snapTicks:!0,ticks:"4"}}),s=new Hc({props:{gridlines:!1}}),c=new Op({props:{fill:"#da392f"}}),c.$on("mousemove",e[7]),c.$on("mouseout",e[8]),{c(){mr(t.$$.fragment),r=$t(),mr(s.$$.fragment),l=$t(),mr(c.$$.fragment)},m(a,d){fr(t,a,d),st(a,r,d),fr(s,a,d),st(a,l,d),fr(c,a,d),h=!0},p:bn,i(a){h||(Tt(t.$$.fragment,a),Tt(s.$$.fragment,a),Tt(c.$$.fragment,a),h=!0)},o(a){Kt(t.$$.fragment,a),Kt(s.$$.fragment,a),Kt(c.$$.fragment,a),h=!1},d(a){dr(t,a),a&&nt(r),dr(s,a),a&&nt(l),dr(c,a)}}}function fy(e){let t,r;return t=new ud({props:{evt:e[5],$$slots:{default:[hF,({detail:s})=>({10:s}),({detail:s})=>s?1024:0]},$$scope:{ctx:e}}}),{c(){mr(t.$$.fragment)},m(s,l){fr(t,s,l),r=!0},p(s,l){const c={};l&32&&(c.evt=s[5]),l&5120&&(c.$$scope={dirty:l,ctx:s}),t.$set(c)},i(s){r||(Tt(t.$$.fragment,s),r=!0)},o(s){Kt(t.$$.fragment,s),r=!1},d(s){dr(t,s)}}}function hF(e){hy(e);let t,r=e[11].department+"",s,l,c=(+e[11].pt2_arrests_pct).toFixed(0)+"",h,a;return{c(){t=Lt("div"),s=Fr(r),l=Fr(": "),h=Fr(c),a=Fr("% Part 2 Arrests"),ue(t,"class","row")},m(d,_){st(d,t,_),it(t,s),it(t,l),it(t,h),it(t,a)},p(d,_){hy(d),_&1024&&r!==(r=d[11].department+"")&&$n(s,r),_&1024&&c!==(c=(+d[11].pt2_arrests_pct).toFixed(0)+"")&&$n(h,c)},d(d){d&&nt(t)}}}function fF(e){let t,r,s=e[6]!==!0&&fy(e);return{c(){s&&s.c(),t=yo()},m(l,c){s&&s.m(l,c),st(l,t,c),r=!0},p(l,c){l[6]!==!0?s?(s.p(l,c),c&64&&Tt(s,1)):(s=fy(l),s.c(),Tt(s,1),s.m(t.parentNode,t)):s&&(Xa(),Kt(s,1,1,()=>{s=null}),Za())},i(l){r||(Tt(s),r=!0)},o(l){Kt(s),r=!1},d(l){s&&s.d(l),l&&nt(t)}}}function dF(e){let t,r,s,l;return t=new oh({props:{$$slots:{default:[uF]},$$scope:{ctx:e}}}),s=new ah({props:{pointerEvents:!1,$$slots:{default:[fF]},$$scope:{ctx:e}}}),{c(){mr(t.$$.fragment),r=$t(),mr(s.$$.fragment)},m(c,h){fr(t,c,h),st(c,r,h),fr(s,c,h),l=!0},p(c,h){const a={};h&4192&&(a.$$scope={dirty:h,ctx:c}),t.$set(a);const d={};h&4192&&(d.$$scope={dirty:h,ctx:c}),s.$set(d)},i(c){l||(Tt(t.$$.fragment,c),Tt(s.$$.fragment,c),l=!0)},o(c){Kt(t.$$.fragment,c),Kt(s.$$.fragment,c),l=!1},d(c){dr(t,c),c&&nt(r),dr(s,c)}}}function pF(e){let t,r,s,l,c,h,a,d,_,p,E,w,x,Q,k,R,P,O,G,V,Z,te,ce,he,Ce,fe,ee,re,be,me,Re;return _=new nh({props:{padding:{top:0,bottom:40,left:230},x:dg,y:mF,yScale:eh().paddingInner([.15]),xDomain:[0,null],data:e[1],$$slots:{default:[dF]},$$scope:{ctx:e}}}),fe=new cF({props:{parishname:e[0]}}),{c(){t=Lt("p"),t.textContent=`Entry into the criminal legal system begins with an arrest. The FBI classifies
  arrests as either “Part I” or “Part II.” Part I offenses include property
  crimes such as larceny (usually shoplifting or theft from a motor vehicle),
  burglary, and arson, as well as violent crimes such as aggravated assault,
  criminal homicide, rape, and robbery. Part II offenses include less serious
  offenses such as drug abuse violations, disorderly conduct, and gambling.`,r=$t(),s=Lt("p"),s.textContent=`In Louisiana, 75 percent of arrests are Part II arrests, as are the majority
  in Union Parish. Any arrest can lead to cascading consequences: high bail
  leads to long pretrial detention, which leads to loss of employment, child
  custody, housing, and possessions. These consequences exacerbate trauma and
  harm mental health. It is therefore essential to consider whether these
  arrests are improving public safety and if there are better alternatives to
  the police in nonviolent situations.`,l=$t(),c=Lt("div"),h=Lt("h4"),h.textContent="Part 2 arrests, proportion of total arrests (2018)",a=$t(),d=Lt("div"),mr(_.$$.fragment),p=$t(),E=Lt("p"),w=Fr(`Arrests are the rare part of the Louisiana criminal legal system where data on
  race is available. The disproportionate arrest of Black people in Louisiana,
  along with a heightened focus on lower-level offenses, leads to `),x=Lt("a"),x.textContent="long-term damage to communities of color and a distrust of the police",Q=Fr(". In "),k=Fr(e[0]),R=Fr(" Parish, Black people make up "),P=Fr(e[2]),O=Fr(` percent of the
  population but
  `),G=Fr(e[3]),V=Fr(` percent of people arrested for Part II offenses, which
  pose little threat to public safety.`),Z=$t(),te=Lt("div"),ce=Lt("h4"),ce.textContent="Part 2 Arrests, Racial Disparity",he=$t(),Ce=Lt("div"),mr(fe.$$.fragment),ee=$t(),re=Lt("p"),re.textContent="Source: Arrest Trends (2018) and U.S. Census American Community Survey (2020)",be=$t(),me=Lt("div"),me.innerHTML=`<p><span class="rec svelte-1y64uy">Recommendation</span>: Advance civilian responses to
    <a href="https://www.vera.org/behavioral-health-crisis-alternatives" target="_blank">911 calls that don’t require law enforcement</a>. Removing the police from encounters that don’t require them–like mental
    health crises,
    <a href="https://www.vera.org/ending-mass-incarceration/criminalization-racial-disparities/public-safety/redefining-public-safety-initiative/stop-the-stops" target="_blank">low-level traffic violations</a>, and noise complaints–is
    <a href="https://www.brookings.edu/essay/a-new-community-safety-blueprint-how-the-federal-government-can-address-violence-and-harm-through-a-public-health-approach/" target="_blank">proven to improve safety</a>, while also reducing arrests (and thus jail admissions).</p>`,ue(t,"class","break-avoid"),ue(d,"class","chart-container svelte-1y64uy"),ue(c,"class","barchart svelte-1y64uy"),kn(c,"height",e[4]*60+"px"),ue(x,"href","https://www.vera.org/downloads/publications/for-the-record-unjust-burden-racial-disparities.pdf"),ue(x,"target","_blank"),ue(E,"class","disparities svelte-1y64uy"),ue(Ce,"id","grid"),ue(Ce,"class","svelte-1y64uy"),ue(te,"id","bar"),ue(te,"class","svelte-1y64uy"),ue(re,"class","note"),ue(me,"id","recs")},m(_e,He){st(_e,t,He),st(_e,r,He),st(_e,s,He),st(_e,l,He),st(_e,c,He),it(c,h),it(c,a),it(c,d),fr(_,d,null),st(_e,p,He),st(_e,E,He),it(E,w),it(E,x),it(E,Q),it(E,k),it(E,R),it(E,P),it(E,O),it(E,G),it(E,V),st(_e,Z,He),st(_e,te,He),it(te,ce),it(te,he),it(te,Ce),fr(fe,Ce,null),st(_e,ee,He),st(_e,re,He),st(_e,be,He),st(_e,me,He),Re=!0},p(_e,[He]){const Le={};He&2&&(Le.data=_e[1]),He&4192&&(Le.$$scope={dirty:He,ctx:_e}),_.$set(Le),(!Re||He&16)&&kn(c,"height",_e[4]*60+"px"),(!Re||He&1)&&$n(k,_e[0]),(!Re||He&4)&&$n(P,_e[2]),(!Re||He&8)&&$n(G,_e[3]);const Je={};He&1&&(Je.parishname=_e[0]),fe.$set(Je)},i(_e){Re||(Tt(_.$$.fragment,_e),Tt(fe.$$.fragment,_e),Re=!0)},o(_e){Kt(_.$$.fragment,_e),Kt(fe.$$.fragment,_e),Re=!1},d(_e){_e&&nt(t),_e&&nt(r),_e&&nt(s),_e&&nt(l),_e&&nt(c),dr(_),_e&&nt(p),_e&&nt(E),_e&&nt(Z),_e&&nt(te),dr(fe),_e&&nt(ee),_e&&nt(re),_e&&nt(be),_e&&nt(me)}}}const dg="pt2_arrests_pct",mF="department";function gF(e,t,r){let{parishname:s}=t,l=[],c=0,h=0,a;Wa(async()=>{const w=await pl("https://vera-louisiana-data.s3.amazonaws.com/curated_data/clearinghouse/arrests.csv");w.forEach(k=>{k.pt2_arrests_pct=+k.pt2_arrests_pct,k.black_pop_pct=+k.black_pop_pct,k.black_pt2_arrests_pct=+k.black_pt2_arrests_pct}),r(1,l=w.filter(k=>k.parish==s+" Parish")),l.sort((k,R)=>R.pt2_arrests_pct-k.pt2_arrests_pct),console.log("part 2",l);let x=Jm(l,k=>tg(k,R=>R.black_pop_pct)),Q=Jm(l,k=>tg(k,R=>R.black_arrests_pct));r(4,a=l.length),r(2,c=(x/a).toFixed(0)),r(3,h=(Q/a).toFixed(0))}),l.forEach(w=>{w[dg]=+w[dg]}),Ga("body").append("div").attr("class","tooltip");let d,_=!1;const p=w=>r(5,d=r(6,_=w)),E=()=>r(6,_=!0);return e.$$set=w=>{"parishname"in w&&r(0,s=w.parishname)},[s,l,c,h,a,d,_,p,E]}class yF extends ii{constructor(t){super(),ni(this,t,gF,pF,ti,{parishname:0})}}function dy(e,t,r){const s=e.slice();return s[4]=t[r],s}function py(e,t,r){const s=e.slice();return s[4]=t[r],s}function my(e){let t,r,s=e[4].label+"",l,c,h,a,d;return{c(){t=Lt("li"),r=Lt("span"),l=Fr(s),c=$t(),ue(r,"class","tabitem svelte-1mfb3zm"),ue(t,"class",h=s0(e[0]===e[4].value?"active":"")+" svelte-1mfb3zm")},m(_,p){st(_,t,p),it(t,r),it(r,l),it(t,c),a||(d=es(r,"click",function(){id(e[3](e[4].value))&&e[3](e[4].value).apply(this,arguments)}),a=!0)},p(_,p){e=_,p&2&&s!==(s=e[4].label+"")&&$n(l,s),p&3&&h!==(h=s0(e[0]===e[4].value?"active":"")+" svelte-1mfb3zm")&&ue(t,"class",h)},d(_){_&&nt(t),a=!1,d()}}}function gy(e){let t,r,s,l;var c=e[4].component;function h(a){return{props:{parishname:a[2]}}}return c&&(r=Kh(c,h(e))),{c(){t=Lt("div"),r&&mr(r.$$.fragment),s=$t(),ue(t,"class","box svelte-1mfb3zm")},m(a,d){st(a,t,d),r&&fr(r,t,null),it(t,s),l=!0},p(a,d){const _={};if(d&4&&(_.parishname=a[2]),c!==(c=a[4].component)){if(r){Xa();const p=r;Kt(p.$$.fragment,1,0,()=>{dr(p,1)}),Za()}c?(r=Kh(c,h(a)),mr(r.$$.fragment),Tt(r.$$.fragment,1),fr(r,t,s)):r=null}else c&&r.$set(_)},i(a){l||(r&&Tt(r.$$.fragment,a),l=!0)},o(a){r&&Kt(r.$$.fragment,a),l=!1},d(a){a&&nt(t),r&&dr(r)}}}function yy(e){let t,r,s=e[0]==e[4].value&&gy(e);return{c(){s&&s.c(),t=yo()},m(l,c){s&&s.m(l,c),st(l,t,c),r=!0},p(l,c){l[0]==l[4].value?s?(s.p(l,c),c&3&&Tt(s,1)):(s=gy(l),s.c(),Tt(s,1),s.m(t.parentNode,t)):s&&(Xa(),Kt(s,1,1,()=>{s=null}),Za())},i(l){r||(Tt(s),r=!0)},o(l){Kt(s),r=!1},d(l){s&&s.d(l),l&&nt(t)}}}function vF(e){let t,r,s,l,c=e[1],h=[];for(let p=0;p<c.length;p+=1)h[p]=my(py(e,c,p));let a=e[1],d=[];for(let p=0;p<a.length;p+=1)d[p]=yy(dy(e,a,p));const _=p=>Kt(d[p],1,1,()=>{d[p]=null});return{c(){t=Lt("ul");for(let p=0;p<h.length;p+=1)h[p].c();r=$t();for(let p=0;p<d.length;p+=1)d[p].c();s=yo(),ue(t,"class","svelte-1mfb3zm")},m(p,E){st(p,t,E);for(let w=0;w<h.length;w+=1)h[w].m(t,null);st(p,r,E);for(let w=0;w<d.length;w+=1)d[w].m(p,E);st(p,s,E),l=!0},p(p,[E]){if(E&11){c=p[1];let w;for(w=0;w<c.length;w+=1){const x=py(p,c,w);h[w]?h[w].p(x,E):(h[w]=my(x),h[w].c(),h[w].m(t,null))}for(;w<h.length;w+=1)h[w].d(1);h.length=c.length}if(E&7){a=p[1];let w;for(w=0;w<a.length;w+=1){const x=dy(p,a,w);d[w]?(d[w].p(x,E),Tt(d[w],1)):(d[w]=yy(x),d[w].c(),Tt(d[w],1),d[w].m(s.parentNode,s))}for(Xa(),w=a.length;w<d.length;w+=1)_(w);Za()}},i(p){if(!l){for(let E=0;E<a.length;E+=1)Tt(d[E]);l=!0}},o(p){d=d.filter(Boolean);for(let E=0;E<d.length;E+=1)Kt(d[E]);l=!1},d(p){p&&nt(t),Vl(h,p),p&&nt(r),Vl(d,p),p&&nt(s)}}}function _F(e,t,r){let{items:s=[]}=t,{activeTabValue:l=1}=t,{parishname:c}=t;const h=a=>()=>r(0,l=a);return e.$$set=a=>{"items"in a&&r(1,s=a.items),"activeTabValue"in a&&r(0,l=a.activeTabValue),"parishname"in a&&r(2,c=a.parishname)},[l,s,c,h]}class wF extends ii{constructor(t){super(),ni(this,t,_F,vF,ti,{items:1,activeTabValue:0,parishname:2})}}function vy(e,t,r){const s=e.slice();return s[4]=t[r],s}function _y(e){let t,r,s=e[4].label+"",l,c,h,a,d,_,p;var E=e[4].component;function w(x){return{props:{parishname:x[1]}}}return E&&(h=Kh(E,w(e))),{c(){t=Lt("li"),r=Lt("span"),l=Fr(s),c=$t(),h&&mr(h.$$.fragment),a=yo(),ue(r,"class","tabitem svelte-1kn78ub"),ue(t,"class","item-tab svelte-1kn78ub")},m(x,Q){st(x,t,Q),it(t,r),it(r,l),st(x,c,Q),h&&fr(h,x,Q),st(x,a,Q),d=!0,_||(p=es(r,"click",function(){id(e[2](e[4].value))&&e[2](e[4].value).apply(this,arguments)}),_=!0)},p(x,Q){e=x,(!d||Q&1)&&s!==(s=e[4].label+"")&&$n(l,s);const k={};if(Q&2&&(k.parishname=e[1]),E!==(E=e[4].component)){if(h){Xa();const R=h;Kt(R.$$.fragment,1,0,()=>{dr(R,1)}),Za()}E?(h=Kh(E,w(e)),mr(h.$$.fragment),Tt(h.$$.fragment,1),fr(h,a.parentNode,a)):h=null}else E&&h.$set(k)},i(x){d||(h&&Tt(h.$$.fragment,x),d=!0)},o(x){h&&Kt(h.$$.fragment,x),d=!1},d(x){x&&nt(t),x&&nt(c),x&&nt(a),h&&dr(h,x),_=!1,p()}}}function bF(e){let t,r,s=e[0],l=[];for(let h=0;h<s.length;h+=1)l[h]=_y(vy(e,s,h));const c=h=>Kt(l[h],1,1,()=>{l[h]=null});return{c(){for(let h=0;h<l.length;h+=1)l[h].c();t=yo()},m(h,a){for(let d=0;d<l.length;d+=1)l[d].m(h,a);st(h,t,a),r=!0},p(h,[a]){if(a&7){s=h[0];let d;for(d=0;d<s.length;d+=1){const _=vy(h,s,d);l[d]?(l[d].p(_,a),Tt(l[d],1)):(l[d]=_y(_),l[d].c(),Tt(l[d],1),l[d].m(t.parentNode,t))}for(Xa(),d=s.length;d<l.length;d+=1)c(d);Za()}},i(h){if(!r){for(let a=0;a<s.length;a+=1)Tt(l[a]);r=!0}},o(h){l=l.filter(Boolean);for(let a=0;a<l.length;a+=1)Kt(l[a]);r=!1},d(h){Vl(l,h),h&&nt(t)}}}function xF(e,t,r){let{items:s=[]}=t,{activeTabValue:l=1}=t,{parishname:c}=t;const h=a=>()=>r(3,l=a);return e.$$set=a=>{"items"in a&&r(0,s=a.items),"activeTabValue"in a&&r(3,l=a.activeTabValue),"parishname"in a&&r(1,c=a.parishname)},[s,c,h,l]}class BF extends ii{constructor(t){super(),ni(this,t,xF,bF,ti,{items:0,activeTabValue:3,parishname:1})}}var wy={},CF={get exports(){return wy},set exports(e){wy=e}};const EF="modulepreload",FF=function(e){return"/"+e},by={},pg=function(t,r,s){if(!r||r.length===0)return t();const l=document.getElementsByTagName("link");return Promise.all(r.map(c=>{if(c=FF(c),c in by)return;by[c]=!0;const h=c.endsWith(".css"),a=h?'[rel="stylesheet"]':"";if(!!s)for(let p=l.length-1;p>=0;p--){const E=l[p];if(E.href===c&&(!h||E.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${a}`))return;const _=document.createElement("link");if(_.rel=h?"stylesheet":EF,h||(_.as="script",_.crossOrigin=""),_.href=c,document.head.appendChild(_),h)return new Promise((p,E)=>{_.addEventListener("load",p),_.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${c}`)))})})).then(()=>t())};function qi(e){return qi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qi(e)}var Jo=Uint8Array,Yo=Uint16Array,td=Uint32Array,Hp=new Jo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),zp=new Jo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),mg=new Jo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a_=function(e,t){for(var r=new Yo(31),s=0;s<31;++s)r[s]=t+=1<<e[s-1];for(var l=new td(r[30]),s=1;s<30;++s)for(var c=r[s];c<r[s+1];++c)l[c]=c-r[s]<<5|s;return[r,l]},o_=a_(Hp,2),A_=o_[0],gg=o_[1];A_[28]=258,gg[258]=28;var l_=a_(zp,0),SF=l_[0],xy=l_[1],yg=new Yo(32768);for(var ws=0;ws<32768;++ws){var gu=(ws&43690)>>>1|(ws&21845)<<1;gu=(gu&52428)>>>2|(gu&13107)<<2,gu=(gu&61680)>>>4|(gu&3855)<<4,yg[ws]=((gu&65280)>>>8|(gu&255)<<8)>>>1}var mc=function(e,t,r){for(var s=e.length,l=0,c=new Yo(t);l<s;++l)++c[e[l]-1];var h=new Yo(t);for(l=0;l<t;++l)h[l]=h[l-1]+c[l-1]<<1;var a;if(r){a=new Yo(1<<t);var d=15-t;for(l=0;l<s;++l)if(e[l])for(var _=l<<4|e[l],p=t-e[l],E=h[e[l]-1]++<<p,w=E|(1<<p)-1;E<=w;++E)a[yg[E]>>>d]=_}else for(a=new Yo(s),l=0;l<s;++l)a[l]=yg[h[e[l]-1]++]>>>15-e[l];return a},Cu=new Jo(288);for(var ws=0;ws<144;++ws)Cu[ws]=8;for(var ws=144;ws<256;++ws)Cu[ws]=9;for(var ws=256;ws<280;++ws)Cu[ws]=7;for(var ws=280;ws<288;++ws)Cu[ws]=8;var rd=new Jo(32);for(var ws=0;ws<32;++ws)rd[ws]=5;var IF=mc(Cu,9,0),TF=mc(Cu,9,1),UF=mc(rd,5,0),LF=mc(rd,5,1),Pm=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},jl=function(e,t,r){var s=t/8>>0;return(e[s]|e[s+1]<<8)>>>(t&7)&r},Mm=function(e,t){var r=t/8>>0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>>(t&7)},Jg=function(e){return(e/8>>0)+(e&7&&1)},c_=function(e,t,r){(t==null||t<0)&&(t=0),(r==null||r>e.length)&&(r=e.length);var s=new(e instanceof Yo?Yo:e instanceof td?td:Jo)(r-t);return s.set(e.subarray(t,r)),s},kF=function(e,t,r){var s=e.length,l=!t||r,c=!r||r.i;r||(r={}),t||(t=new Jo(s*3));var h=function(ot){var dt=t.length;if(ot>dt){var Bt=new Jo(Math.max(dt*2,ot));Bt.set(t),t=Bt}},a=r.f||0,d=r.p||0,_=r.b||0,p=r.l,E=r.d,w=r.m,x=r.n,Q=s*8;do{if(!p){r.f=a=jl(e,d,1);var k=jl(e,d+1,3);if(d+=3,k)if(k==1)p=TF,E=LF,w=9,x=5;else if(k==2){var G=jl(e,d,31)+257,V=jl(e,d+10,15)+4,Z=G+jl(e,d+5,31)+1;d+=14;for(var te=new Jo(Z),ce=new Jo(19),he=0;he<V;++he)ce[mg[he]]=jl(e,d+he*3,7);d+=V*3;var Ce=Pm(ce),fe=(1<<Ce)-1;if(!c&&d+Z*(Ce+7)>Q)break;for(var ee=mc(ce,Ce,1),he=0;he<Z;){var re=ee[jl(e,d,fe)];d+=re&15;var R=re>>>4;if(R<16)te[he++]=R;else{var be=0,me=0;for(R==16?(me=3+jl(e,d,3),d+=2,be=te[he-1]):R==17?(me=3+jl(e,d,7),d+=3):R==18&&(me=11+jl(e,d,127),d+=7);me--;)te[he++]=be}}var Re=te.subarray(0,G),_e=te.subarray(G);w=Pm(Re),x=Pm(_e),p=mc(Re,w,1),E=mc(_e,x,1)}else throw"invalid block type";else{var R=Jg(d)+4,P=e[R-4]|e[R-3]<<8,O=R+P;if(O>s){if(c)throw"unexpected EOF";break}l&&h(_+P),t.set(e.subarray(R,O),_),r.b=_+=P,r.p=d=O*8;continue}if(d>Q)throw"unexpected EOF"}l&&h(_+131072);for(var He=(1<<w)-1,Le=(1<<x)-1,Je=w+x+18;c||d+Je<Q;){var be=p[Mm(e,d)&He],ke=be>>>4;if(d+=be&15,d>Q)throw"unexpected EOF";if(!be)throw"invalid length/literal";if(ke<256)t[_++]=ke;else if(ke==256){p=null;break}else{var kt=ke-254;if(ke>264){var he=ke-257,ie=Hp[he];kt=jl(e,d,(1<<ie)-1)+A_[he],d+=ie}var Se=E[Mm(e,d)&Le],Qe=Se>>>4;if(!Se)throw"invalid distance";d+=Se&15;var _e=SF[Qe];if(Qe>3){var ie=zp[Qe];_e+=Mm(e,d)&(1<<ie)-1,d+=ie}if(d>Q)throw"unexpected EOF";l&&h(_+131072);for(var Ke=_+kt;_<Ke;_+=4)t[_]=t[_-_e],t[_+1]=t[_+1-_e],t[_+2]=t[_+2-_e],t[_+3]=t[_+3-_e];_=Ke}}r.l=p,r.p=d,r.b=_,p&&(a=1,r.m=w,r.d=E,r.n=x)}while(!a);return _==t.length?t:c_(t,0,_)},Nc=function(e,t,r){r<<=t&7;var s=t/8>>0;e[s]|=r,e[s+1]|=r>>>8},Mf=function(e,t,r){r<<=t&7;var s=t/8>>0;e[s]|=r,e[s+1]|=r>>>8,e[s+2]|=r>>>16},Dm=function(e,t){for(var r=[],s=0;s<e.length;++s)e[s]&&r.push({s,f:e[s]});var l=r.length,c=r.slice();if(!l)return[new Jo(0),0];if(l==1){var h=new Jo(r[0].s+1);return h[r[0].s]=1,[h,1]}r.sort(function(Z,te){return Z.f-te.f}),r.push({s:-1,f:25001});var a=r[0],d=r[1],_=0,p=1,E=2;for(r[0]={s:-1,f:a.f+d.f,l:a,r:d};p!=l-1;)a=r[r[_].f<r[E].f?_++:E++],d=r[_!=p&&r[_].f<r[E].f?_++:E++],r[p++]={s:-1,f:a.f+d.f,l:a,r:d};for(var w=c[0].s,s=1;s<l;++s)c[s].s>w&&(w=c[s].s);var x=new Yo(w+1),Q=vg(r[p-1],x,0);if(Q>t){var s=0,k=0,R=Q-t,P=1<<R;for(c.sort(function(te,ce){return x[ce.s]-x[te.s]||te.f-ce.f});s<l;++s){var O=c[s].s;if(x[O]>t)k+=P-(1<<Q-x[O]),x[O]=t;else break}for(k>>>=R;k>0;){var G=c[s].s;x[G]<t?k-=1<<t-x[G]++-1:++s}for(;s>=0&&k;--s){var V=c[s].s;x[V]==t&&(--x[V],++k)}Q=t}return[new Jo(x),Q]},vg=function(e,t,r){return e.s==-1?Math.max(vg(e.l,t,r+1),vg(e.r,t,r+1)):t[e.s]=r},By=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new Yo(++t),s=0,l=e[0],c=1,h=function(d){r[s++]=d},a=1;a<=t;++a)if(e[a]==l&&a!=t)++c;else{if(!l&&c>2){for(;c>138;c-=138)h(32754);c>2&&(h(c>10?c-11<<5|28690:c-3<<5|12305),c=0)}else if(c>3){for(h(l),--c;c>6;c-=6)h(8304);c>2&&(h(c-3<<5|8208),c=0)}for(;c--;)h(l);c=1,l=e[a]}return[r.subarray(0,s),t]},Df=function(e,t){for(var r=0,s=0;s<t.length;++s)r+=e[s]*t[s];return r},dp=function(e,t,r){var s=r.length,l=Jg(t+2);e[l]=s&255,e[l+1]=s>>>8,e[l+2]=e[l]^255,e[l+3]=e[l+1]^255;for(var c=0;c<s;++c)e[l+c+4]=r[c];return(l+4+s)*8},Cy=function(e,t,r,s,l,c,h,a,d,_,p){Nc(t,p++,r),++l[256];for(var E=Dm(l,15),w=E[0],x=E[1],Q=Dm(c,15),k=Q[0],R=Q[1],P=By(w),O=P[0],G=P[1],V=By(k),Z=V[0],te=V[1],ce=new Yo(19),he=0;he<O.length;++he)ce[O[he]&31]++;for(var he=0;he<Z.length;++he)ce[Z[he]&31]++;for(var Ce=Dm(ce,7),fe=Ce[0],ee=Ce[1],re=19;re>4&&!fe[mg[re-1]];--re);var be=_+5<<3,me=Df(l,Cu)+Df(c,rd)+h,Re=Df(l,w)+Df(c,k)+h+14+3*re+Df(ce,fe)+(2*ce[16]+3*ce[17]+7*ce[18]);if(be<=me&&be<=Re)return dp(t,p,e.subarray(d,d+_));var _e,He,Le,Je;if(Nc(t,p,1+(Re<me)),p+=2,Re<me){_e=mc(w,x,0),He=w,Le=mc(k,R,0),Je=k;var ke=mc(fe,ee,0);Nc(t,p,G-257),Nc(t,p+5,te-1),Nc(t,p+10,re-4),p+=14;for(var he=0;he<re;++he)Nc(t,p+3*he,fe[mg[he]]);p+=3*re;for(var kt=[O,Z],ie=0;ie<2;++ie)for(var Se=kt[ie],he=0;he<Se.length;++he){var Qe=Se[he]&31;Nc(t,p,ke[Qe]),p+=fe[Qe],Qe>15&&(Nc(t,p,Se[he]>>>5&127),p+=Se[he]>>>12)}}else _e=IF,He=Cu,Le=UF,Je=rd;for(var he=0;he<a;++he)if(s[he]>255){var Qe=s[he]>>>18&31;Mf(t,p,_e[Qe+257]),p+=He[Qe+257],Qe>7&&(Nc(t,p,s[he]>>>23&31),p+=Hp[Qe]);var Ke=s[he]&31;Mf(t,p,Le[Ke]),p+=Je[Ke],Ke>3&&(Mf(t,p,s[he]>>>5&8191),p+=zp[Ke])}else Mf(t,p,_e[s[he]]),p+=He[s[he]];return Mf(t,p,_e[256]),p+He[256]},QF=new td([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),PF=new Jo(0),MF=function(e,t,r,s,l,c){var h=e.length,a=new Jo(s+h+5*(1+Math.floor(h/7e3))+l),d=a.subarray(s,a.length-l),_=0;if(!t||h<8)for(var p=0;p<=h;p+=65535){var E=p+65535;E<h?_=dp(d,_,e.subarray(p,E)):(d[p]=c,_=dp(d,_,e.subarray(p,h)))}else{for(var w=QF[t-1],x=w>>>13,Q=w&8191,k=(1<<r)-1,R=new Yo(32768),P=new Yo(k+1),O=Math.ceil(r/3),G=2*O,V=function(gr){return(e[gr]^e[gr+1]<<O^e[gr+2]<<G)&k},Z=new td(25e3),te=new Yo(288),ce=new Yo(32),he=0,Ce=0,p=0,fe=0,ee=0,re=0;p<h;++p){var be=V(p),me=p&32767,Re=P[be];if(R[me]=Re,P[be]=me,ee<=p){var _e=h-p;if((he>7e3||fe>24576)&&_e>423){_=Cy(e,d,0,Z,te,ce,Ce,fe,re,p-re,_),fe=he=Ce=0,re=p;for(var He=0;He<286;++He)te[He]=0;for(var He=0;He<30;++He)ce[He]=0}var Le=2,Je=0,ke=Q,kt=me-Re&32767;if(_e>2&&be==V(p-kt))for(var ie=Math.min(x,_e)-1,Se=Math.min(32767,p),Qe=Math.min(258,_e);kt<=Se&&--ke&&me!=Re;){if(e[p+Le]==e[p+Le-kt]){for(var Ke=0;Ke<Qe&&e[p+Ke]==e[p+Ke-kt];++Ke);if(Ke>Le){if(Le=Ke,Je=kt,Ke>ie)break;for(var ot=Math.min(kt,Ke-2),dt=0,He=0;He<ot;++He){var Bt=p-kt+He+32768&32767,Ge=R[Bt],rt=Bt-Ge+32768&32767;rt>dt&&(dt=rt,Re=Bt)}}}me=Re,Re=R[me],kt+=me-Re+32768&32767}if(Je){Z[fe++]=268435456|gg[Le]<<18|xy[Je];var Qt=gg[Le]&31,ht=xy[Je]&31;Ce+=Hp[Qt]+zp[ht],++te[257+Qt],++ce[ht],ee=p+Le,++he}else Z[fe++]=e[p],++te[e[p]]}}_=Cy(e,d,c,Z,te,ce,Ce,fe,re,p-re,_),c||(_=dp(d,_,PF))}return c_(a,0,s+Jg(_)+l)},DF=function(){var e=1,t=0;return{p:function(r){for(var s=e,l=t,c=r.length,h=0;h!=c;){for(var a=Math.min(h+5552,c);h<a;++h)s+=r[h],l+=s;s%=65521,l%=65521}e=s,t=l},d:function(){return(e>>>8<<16|(t&255)<<8|t>>>8)+((e&255)<<23)*2}}},NF=function(e,t,r,s,l){return MF(e,t.level==null?6:t.level,t.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):12+t.mem,r,s,!l)},jF=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},RF=function(e,t){var r=t.level,s=r==0?0:r<6?1:r==9?3:2;e[0]=120,e[1]=s<<6|(s?32-2*s:1)},OF=function(e){if((e[0]&15)!=8||e[0]>>>4>7||(e[0]<<8|e[1])%31)throw"invalid zlib data";if(e[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function _g(e,t){t===void 0&&(t={});var r=DF();r.p(e);var s=NF(e,t,2,4);return RF(s,t),jF(s,s.length-4,r.d()),s}function HF(e,t){return kF((OF(e),e.subarray(2,-4)),t)}var Hn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Nm(){Hn.console&&typeof Hn.console.log=="function"&&Hn.console.log.apply(Hn.console,arguments)}var us={log:Nm,warn:function(e){Hn.console&&(typeof Hn.console.warn=="function"?Hn.console.warn.apply(Hn.console,arguments):Nm.call(null,arguments))},error:function(e){Hn.console&&(typeof Hn.console.error=="function"?Hn.console.error.apply(Hn.console,arguments):Nm(e))}};function jm(e,t,r){var s=new XMLHttpRequest;s.open("GET",e),s.responseType="blob",s.onload=function(){Hu(s.response,t,r)},s.onerror=function(){us.error("could not download file")},s.send()}function Ey(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function ip(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var zf,wg,Hu=Hn.saveAs||((typeof window>"u"?"undefined":qi(window))!=="object"||window!==Hn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var s=Hn.URL||Hn.webkitURL,l=document.createElement("a");t=t||e.name||"download",l.download=t,l.rel="noopener",typeof e=="string"?(l.href=e,l.origin!==location.origin?Ey(l.href)?jm(e,t,r):ip(l,l.target="_blank"):ip(l)):(l.href=s.createObjectURL(e),setTimeout(function(){s.revokeObjectURL(l.href)},4e4),setTimeout(function(){ip(l)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(Ey(e))jm(e,t,r);else{var s=document.createElement("a");s.href=e,s.target="_blank",setTimeout(function(){ip(s)})}else navigator.msSaveOrOpenBlob(function(l,c){return c===void 0?c={autoBom:!1}:qi(c)!=="object"&&(us.warn("Deprecated: Expected third argument to be a object"),c={autoBom:!c}),c.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(l.type)?new Blob([String.fromCharCode(65279),l],{type:l.type}):l}(e,r),t)}:function(e,t,r,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),typeof e=="string")return jm(e,t,r);var l=e.type==="application/octet-stream",c=/constructor/i.test(Hn.HTMLElement)||Hn.safari,h=/CriOS\/[\d]+/.test(navigator.userAgent);if((h||l&&c)&&(typeof FileReader>"u"?"undefined":qi(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var p=a.result;p=h?p:p.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=p:location=p,s=null},a.readAsDataURL(e)}else{var d=Hn.URL||Hn.webkitURL,_=d.createObjectURL(e);s?s.location=_:location.href=_,s=null,setTimeout(function(){d.revokeObjectURL(_)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function u_(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],s=0;s<r.length;s++){var l=r[s].re,c=r[s].process,h=l.exec(e);h&&(t=c(h),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),d=this.g.toString(16),_=this.b.toString(16);return a.length==1&&(a="0"+a),d.length==1&&(d="0"+d),_.length==1&&(_="0"+_),"#"+a+d+_}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Rm(e,t){var r=e[0],s=e[1],l=e[2],c=e[3];r=Uo(r,s,l,c,t[0],7,-680876936),c=Uo(c,r,s,l,t[1],12,-389564586),l=Uo(l,c,r,s,t[2],17,606105819),s=Uo(s,l,c,r,t[3],22,-1044525330),r=Uo(r,s,l,c,t[4],7,-176418897),c=Uo(c,r,s,l,t[5],12,1200080426),l=Uo(l,c,r,s,t[6],17,-1473231341),s=Uo(s,l,c,r,t[7],22,-45705983),r=Uo(r,s,l,c,t[8],7,1770035416),c=Uo(c,r,s,l,t[9],12,-1958414417),l=Uo(l,c,r,s,t[10],17,-42063),s=Uo(s,l,c,r,t[11],22,-1990404162),r=Uo(r,s,l,c,t[12],7,1804603682),c=Uo(c,r,s,l,t[13],12,-40341101),l=Uo(l,c,r,s,t[14],17,-1502002290),r=Lo(r,s=Uo(s,l,c,r,t[15],22,1236535329),l,c,t[1],5,-165796510),c=Lo(c,r,s,l,t[6],9,-1069501632),l=Lo(l,c,r,s,t[11],14,643717713),s=Lo(s,l,c,r,t[0],20,-373897302),r=Lo(r,s,l,c,t[5],5,-701558691),c=Lo(c,r,s,l,t[10],9,38016083),l=Lo(l,c,r,s,t[15],14,-660478335),s=Lo(s,l,c,r,t[4],20,-405537848),r=Lo(r,s,l,c,t[9],5,568446438),c=Lo(c,r,s,l,t[14],9,-1019803690),l=Lo(l,c,r,s,t[3],14,-187363961),s=Lo(s,l,c,r,t[8],20,1163531501),r=Lo(r,s,l,c,t[13],5,-1444681467),c=Lo(c,r,s,l,t[2],9,-51403784),l=Lo(l,c,r,s,t[7],14,1735328473),r=ko(r,s=Lo(s,l,c,r,t[12],20,-1926607734),l,c,t[5],4,-378558),c=ko(c,r,s,l,t[8],11,-2022574463),l=ko(l,c,r,s,t[11],16,1839030562),s=ko(s,l,c,r,t[14],23,-35309556),r=ko(r,s,l,c,t[1],4,-1530992060),c=ko(c,r,s,l,t[4],11,1272893353),l=ko(l,c,r,s,t[7],16,-155497632),s=ko(s,l,c,r,t[10],23,-1094730640),r=ko(r,s,l,c,t[13],4,681279174),c=ko(c,r,s,l,t[0],11,-358537222),l=ko(l,c,r,s,t[3],16,-722521979),s=ko(s,l,c,r,t[6],23,76029189),r=ko(r,s,l,c,t[9],4,-640364487),c=ko(c,r,s,l,t[12],11,-421815835),l=ko(l,c,r,s,t[15],16,530742520),r=Qo(r,s=ko(s,l,c,r,t[2],23,-995338651),l,c,t[0],6,-198630844),c=Qo(c,r,s,l,t[7],10,1126891415),l=Qo(l,c,r,s,t[14],15,-1416354905),s=Qo(s,l,c,r,t[5],21,-57434055),r=Qo(r,s,l,c,t[12],6,1700485571),c=Qo(c,r,s,l,t[3],10,-1894986606),l=Qo(l,c,r,s,t[10],15,-1051523),s=Qo(s,l,c,r,t[1],21,-2054922799),r=Qo(r,s,l,c,t[8],6,1873313359),c=Qo(c,r,s,l,t[15],10,-30611744),l=Qo(l,c,r,s,t[6],15,-1560198380),s=Qo(s,l,c,r,t[13],21,1309151649),r=Qo(r,s,l,c,t[4],6,-145523070),c=Qo(c,r,s,l,t[11],10,-1120210379),l=Qo(l,c,r,s,t[2],15,718787259),s=Qo(s,l,c,r,t[9],21,-343485551),e[0]=_u(r,e[0]),e[1]=_u(s,e[1]),e[2]=_u(l,e[2]),e[3]=_u(c,e[3])}function Vp(e,t,r,s,l,c){return t=_u(_u(t,e),_u(s,c)),_u(t<<l|t>>>32-l,r)}function Uo(e,t,r,s,l,c,h){return Vp(t&r|~t&s,e,t,l,c,h)}function Lo(e,t,r,s,l,c,h){return Vp(t&s|r&~s,e,t,l,c,h)}function ko(e,t,r,s,l,c,h){return Vp(t^r^s,e,t,l,c,h)}function Qo(e,t,r,s,l,c,h){return Vp(r^(t|~s),e,t,l,c,h)}function h_(e){var t,r=e.length,s=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)Rm(s,zF(e.substring(t-64,t)));e=e.substring(t-64);var l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)l[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(l[t>>2]|=128<<(t%4<<3),t>55)for(Rm(s,l),t=0;t<16;t++)l[t]=0;return l[14]=8*r,Rm(s,l),s}function zF(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}zf=Hn.atob.bind(Hn),wg=Hn.btoa.bind(Hn);var Fy="0123456789abcdef".split("");function VF(e){for(var t="",r=0;r<4;r++)t+=Fy[e>>8*r+4&15]+Fy[e>>8*r&15];return t}function KF(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function bg(e){return h_(e).map(KF).join("")}var GF=function(e){for(var t=0;t<e.length;t++)e[t]=VF(e[t]);return e.join("")}(h_("hello"))!="5d41402abc4b2a76b9719d911017c592";function _u(e,t){if(GF){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function xg(e,t){var r,s,l,c;if(e!==r){for(var h=(l=e,c=1+(256/e.length>>0),new Array(c+1).join(l)),a=[],d=0;d<256;d++)a[d]=d;var _=0;for(d=0;d<256;d++){var p=a[d];_=(_+p+h.charCodeAt(d))%256,a[d]=a[_],a[_]=p}r=e,s=a}else a=s;var E=t.length,w=0,x=0,Q="";for(d=0;d<E;d++)x=(x+(p=a[w=(w+1)%256]))%256,a[w]=a[x],a[x]=p,h=a[(a[w]+a[x])%256],Q+=String.fromCharCode(t.charCodeAt(d)^h);return Q}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Sy={print:4,modify:8,copy:16,"annot-forms":32};function jh(e,t,r,s){this.v=1,this.r=2;var l=192;e.forEach(function(a){if(Sy.perm!==void 0)throw new Error("Invalid permission: "+a);l+=Sy[a]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var c=(t+this.padding).substr(0,32),h=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(c,h),this.P=-(1+(255^l)),this.encryptionKey=bg(c+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(s)).substr(0,5),this.U=xg(this.encryptionKey,this.padding)}function Rh(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,s=0;s<r;s++){var l=e.charCodeAt(s);l<33||l===35||l===37||l===40||l===41||l===47||l===60||l===62||l===91||l===93||l===123||l===125||l>126?t+="#"+("0"+l.toString(16)).slice(-2):t+=e[s]}return t}function Iy(e){if(qi(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,s,l){if(l=l||!1,typeof r!="string"||typeof s!="function"||typeof l!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var c=Math.random().toString(35);return t[r][c]=[s,!!l],c},this.unsubscribe=function(r){for(var s in t)if(t[s][r])return delete t[s][r],Object.keys(t[s]).length===0&&delete t[s],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var s=Array.prototype.slice.call(arguments,1),l=[];for(var c in t[r]){var h=t[r][c];try{h[0].apply(e,s)}catch(a){Hn.console&&us.error("jsPDF PubSub Error",a.message,a)}h[1]&&l.push(c)}l.length&&l.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function nd(e){if(!(this instanceof nd))return new nd(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function f_(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function vu(e,t,r,s,l){if(!(this instanceof vu))return new vu(e,t,r,s,l);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,f_.call(this,s,l)}function Gu(e,t,r,s,l){if(!(this instanceof Gu))return new Gu(e,t,r,s,l);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,f_.call(this,s,l)}function Nn(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",s=arguments[1],l=arguments[2],c=arguments[3],h=[],a=1,d=16,_="S",p=null;qi(e=e||{})==="object"&&(r=e.orientation,s=e.unit||s,l=e.format||l,c=e.compress||e.compressPdf||c,(p=e.encryption||null)!==null&&(p.userPassword=p.userPassword||"",p.ownerPassword=p.ownerPassword||"",p.userPermissions=p.userPermissions||[]),a=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(d=e.floatPrecision),_=e.defaultPathOperation||"S"),h=e.filters||(c===!0?["FlateEncode"]:h),s=s||"mm",r=(""+(r||"P")).toLowerCase();var E=e.putOnlyUsedFonts||!1,w={},x={internal:{},__private__:{}};x.__private__.PubSub=Iy;var Q="1.3",k=x.__private__.getPdfVersion=function(){return Q};x.__private__.setPdfVersion=function(N){Q=N};var R={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};x.__private__.getPageFormats=function(){return R};var P=x.__private__.getPageFormat=function(N){return R[N]};l=l||"a4";var O={COMPAT:"compat",ADVANCED:"advanced"},G=O.COMPAT;function V(){this.saveGraphicsState(),ze(new tn(Ct,0,0,-Ct,0,ba()*Ct).toString()+" cm"),this.setFontSize(this.getFontSize()/Ct),_="n",G=O.ADVANCED}function Z(){this.restoreGraphicsState(),_="S",G=O.COMPAT}var te=x.__private__.combineFontStyleAndFontWeight=function(N,oe){if(N=="bold"&&oe=="normal"||N=="bold"&&oe==400||N=="normal"&&oe=="italic"||N=="bold"&&oe=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return oe&&(N=oe==400||oe==="normal"?N==="italic"?"italic":"normal":oe!=700&&oe!=="bold"||N!=="normal"?(oe==700?"bold":oe)+""+N:"bold"),N};x.advancedAPI=function(N){var oe=G===O.COMPAT;return oe&&V.call(this),typeof N!="function"||(N(this),oe&&Z.call(this)),this},x.compatAPI=function(N){var oe=G===O.ADVANCED;return oe&&Z.call(this),typeof N!="function"||(N(this),oe&&V.call(this)),this},x.isAdvancedAPI=function(){return G===O.ADVANCED};var ce,he=function(N){if(G!==O.ADVANCED)throw new Error(N+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Ce=x.roundToPrecision=x.__private__.roundToPrecision=function(N,oe){var Me=t||oe;if(isNaN(N)||isNaN(Me))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return N.toFixed(Me).replace(/0+$/,"")};ce=x.hpf=x.__private__.hpf=typeof d=="number"?function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.hpf");return Ce(N,d)}:d==="smart"?function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.hpf");return Ce(N,N>-1&&N<1?16:5)}:function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.hpf");return Ce(N,16)};var fe=x.f2=x.__private__.f2=function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.f2");return Ce(N,2)},ee=x.__private__.f3=function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.f3");return Ce(N,3)},re=x.scale=x.__private__.scale=function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.scale");return G===O.COMPAT?N*Ct:G===O.ADVANCED?N:void 0},be=function(N){return G===O.COMPAT?ba()-N:G===O.ADVANCED?N:void 0},me=function(N){return re(be(N))};x.__private__.setPrecision=x.setPrecision=function(N){typeof parseInt(N,10)=="number"&&(t=parseInt(N,10))};var Re,_e="00000000000000000000000000000000",He=x.__private__.getFileId=function(){return _e},Le=x.__private__.setFileId=function(N){return _e=N!==void 0&&/^[a-fA-F0-9]{32}$/.test(N)?N.toUpperCase():_e.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),p!==null&&(ys=new jh(p.userPermissions,p.userPassword,p.ownerPassword,_e)),_e};x.setFileId=function(N){return Le(N),this},x.getFileId=function(){return He()};var Je=x.__private__.convertDateToPDFDate=function(N){var oe=N.getTimezoneOffset(),Me=oe<0?"+":"-",tt=Math.floor(Math.abs(oe/60)),_t=Math.abs(oe%60),Jt=[Me,Qe(tt),"'",Qe(_t),"'"].join("");return["D:",N.getFullYear(),Qe(N.getMonth()+1),Qe(N.getDate()),Qe(N.getHours()),Qe(N.getMinutes()),Qe(N.getSeconds()),Jt].join("")},ke=x.__private__.convertPDFDateToDate=function(N){var oe=parseInt(N.substr(2,4),10),Me=parseInt(N.substr(6,2),10)-1,tt=parseInt(N.substr(8,2),10),_t=parseInt(N.substr(10,2),10),Jt=parseInt(N.substr(12,2),10),_r=parseInt(N.substr(14,2),10);return new Date(oe,Me,tt,_t,Jt,_r,0)},kt=x.__private__.setCreationDate=function(N){var oe;if(N===void 0&&(N=new Date),N instanceof Date)oe=Je(N);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(N))throw new Error("Invalid argument passed to jsPDF.setCreationDate");oe=N}return Re=oe},ie=x.__private__.getCreationDate=function(N){var oe=Re;return N==="jsDate"&&(oe=ke(Re)),oe};x.setCreationDate=function(N){return kt(N),this},x.getCreationDate=function(N){return ie(N)};var Se,Qe=x.__private__.padd2=function(N){return("0"+parseInt(N)).slice(-2)},Ke=x.__private__.padd2Hex=function(N){return("00"+(N=N.toString())).substr(N.length)},ot=0,dt=[],Bt=[],Ge=0,rt=[],Qt=[],ht=!1,Nt=Bt,gr=function(){ot=0,Ge=0,Bt=[],dt=[],rt=[],Ee=Te(),Ue=Te()};x.__private__.setCustomOutputDestination=function(N){ht=!0,Nt=N};var Pt=function(N){ht||(Nt=N)};x.__private__.resetCustomOutputDestination=function(){ht=!1,Nt=Bt};var ze=x.__private__.out=function(N){return N=N.toString(),Ge+=N.length+1,Nt.push(N),Nt},yr=x.__private__.write=function(N){return ze(arguments.length===1?N.toString():Array.prototype.join.call(arguments," "))},sr=x.__private__.getArrayBuffer=function(N){for(var oe=N.length,Me=new ArrayBuffer(oe),tt=new Uint8Array(Me);oe--;)tt[oe]=N.charCodeAt(oe);return Me},Ht=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];x.__private__.getStandardFonts=function(){return Ht};var pr=e.fontSize||16;x.__private__.setFontSize=x.setFontSize=function(N){return pr=G===O.ADVANCED?N/Ct:N,this};var Br,vr=x.__private__.getFontSize=x.getFontSize=function(){return G===O.COMPAT?pr:pr*Ct},Gr=e.R2L||!1;x.__private__.setR2L=x.setR2L=function(N){return Gr=N,this},x.__private__.getR2L=x.getR2L=function(){return Gr};var rr,xr=x.__private__.setZoomMode=function(N){var oe=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(N))Br=N;else if(isNaN(N)){if(oe.indexOf(N)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+N+'" is not recognized.');Br=N}else Br=parseInt(N,10)};x.__private__.getZoomMode=function(){return Br};var Zr,pn=x.__private__.setPageMode=function(N){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(N)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+N+'" is not recognized.');rr=N};x.__private__.getPageMode=function(){return rr};var vt=x.__private__.setLayoutMode=function(N){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(N)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+N+'" is not recognized.');Zr=N};x.__private__.getLayoutMode=function(){return Zr},x.__private__.setDisplayMode=x.setDisplayMode=function(N,oe,Me){return xr(N),vt(oe),pn(Me),this};var at={title:"",subject:"",author:"",keywords:"",creator:""};x.__private__.getDocumentProperty=function(N){if(Object.keys(at).indexOf(N)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return at[N]},x.__private__.getDocumentProperties=function(){return at},x.__private__.setDocumentProperties=x.setProperties=x.setDocumentProperties=function(N){for(var oe in at)at.hasOwnProperty(oe)&&N[oe]&&(at[oe]=N[oe]);return this},x.__private__.setDocumentProperty=function(N,oe){if(Object.keys(at).indexOf(N)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return at[N]=oe};var bt,Ct,jt,er,Vr,Sr={},un={},lr=[],Er={},An={},wn={},_i={},br=null,Cr=0,cr=[],Kr=new Iy(x),hn=e.hotfixes||[],xn={},Sn={},ji=[],tn=function N(oe,Me,tt,_t,Jt,_r){if(!(this instanceof N))return new N(oe,Me,tt,_t,Jt,_r);isNaN(oe)&&(oe=1),isNaN(Me)&&(Me=0),isNaN(tt)&&(tt=0),isNaN(_t)&&(_t=1),isNaN(Jt)&&(Jt=0),isNaN(_r)&&(_r=0),this._matrix=[oe,Me,tt,_t,Jt,_r]};Object.defineProperty(tn.prototype,"sx",{get:function(){return this._matrix[0]},set:function(N){this._matrix[0]=N}}),Object.defineProperty(tn.prototype,"shy",{get:function(){return this._matrix[1]},set:function(N){this._matrix[1]=N}}),Object.defineProperty(tn.prototype,"shx",{get:function(){return this._matrix[2]},set:function(N){this._matrix[2]=N}}),Object.defineProperty(tn.prototype,"sy",{get:function(){return this._matrix[3]},set:function(N){this._matrix[3]=N}}),Object.defineProperty(tn.prototype,"tx",{get:function(){return this._matrix[4]},set:function(N){this._matrix[4]=N}}),Object.defineProperty(tn.prototype,"ty",{get:function(){return this._matrix[5]},set:function(N){this._matrix[5]=N}}),Object.defineProperty(tn.prototype,"a",{get:function(){return this._matrix[0]},set:function(N){this._matrix[0]=N}}),Object.defineProperty(tn.prototype,"b",{get:function(){return this._matrix[1]},set:function(N){this._matrix[1]=N}}),Object.defineProperty(tn.prototype,"c",{get:function(){return this._matrix[2]},set:function(N){this._matrix[2]=N}}),Object.defineProperty(tn.prototype,"d",{get:function(){return this._matrix[3]},set:function(N){this._matrix[3]=N}}),Object.defineProperty(tn.prototype,"e",{get:function(){return this._matrix[4]},set:function(N){this._matrix[4]=N}}),Object.defineProperty(tn.prototype,"f",{get:function(){return this._matrix[5]},set:function(N){this._matrix[5]=N}}),Object.defineProperty(tn.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(tn.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(tn.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(tn.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),tn.prototype.join=function(N){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(ce).join(N)},tn.prototype.multiply=function(N){var oe=N.sx*this.sx+N.shy*this.shx,Me=N.sx*this.shy+N.shy*this.sy,tt=N.shx*this.sx+N.sy*this.shx,_t=N.shx*this.shy+N.sy*this.sy,Jt=N.tx*this.sx+N.ty*this.shx+this.tx,_r=N.tx*this.shy+N.ty*this.sy+this.ty;return new tn(oe,Me,tt,_t,Jt,_r)},tn.prototype.decompose=function(){var N=this.sx,oe=this.shy,Me=this.shx,tt=this.sy,_t=this.tx,Jt=this.ty,_r=Math.sqrt(N*N+oe*oe),en=(N/=_r)*Me+(oe/=_r)*tt;Me-=N*en,tt-=oe*en;var En=Math.sqrt(Me*Me+tt*tt);return en/=En,N*(tt/=En)<oe*(Me/=En)&&(N=-N,oe=-oe,en=-en,_r=-_r),{scale:new tn(_r,0,0,En,0,0),translate:new tn(1,0,0,1,_t,Jt),rotate:new tn(N,oe,-oe,N,0,0),skew:new tn(1,0,en,1,0,0)}},tn.prototype.toString=function(N){return this.join(" ")},tn.prototype.inversed=function(){var N=this.sx,oe=this.shy,Me=this.shx,tt=this.sy,_t=this.tx,Jt=this.ty,_r=1/(N*tt-oe*Me),en=tt*_r,En=-oe*_r,Dn=-Me*_r,Kn=N*_r;return new tn(en,En,Dn,Kn,-en*_t-Dn*Jt,-En*_t-Kn*Jt)},tn.prototype.applyToPoint=function(N){var oe=N.x*this.sx+N.y*this.shx+this.tx,Me=N.x*this.shy+N.y*this.sy+this.ty;return new lA(oe,Me)},tn.prototype.applyToRectangle=function(N){var oe=this.applyToPoint(N),Me=this.applyToPoint(new lA(N.x+N.w,N.y+N.h));return new UA(oe.x,oe.y,Me.x-oe.x,Me.y-oe.y)},tn.prototype.clone=function(){var N=this.sx,oe=this.shy,Me=this.shx,tt=this.sy,_t=this.tx,Jt=this.ty;return new tn(N,oe,Me,tt,_t,Jt)},x.Matrix=tn;var Wi=x.matrixMult=function(N,oe){return oe.multiply(N)},hs=new tn(1,0,0,1,0,0);x.unitMatrix=x.identityMatrix=hs;var Ln=function(N,oe){if(!An[N]){var Me=(oe instanceof vu?"Sh":"P")+(Object.keys(Er).length+1).toString(10);oe.id=Me,An[N]=Me,Er[Me]=oe,Kr.publish("addPattern",oe)}};x.ShadingPattern=vu,x.TilingPattern=Gu,x.addShadingPattern=function(N,oe){return he("addShadingPattern()"),Ln(N,oe),this},x.beginTilingPattern=function(N){he("beginTilingPattern()"),gl(N.boundingBox[0],N.boundingBox[1],N.boundingBox[2]-N.boundingBox[0],N.boundingBox[3]-N.boundingBox[1],N.matrix)},x.endTilingPattern=function(N,oe){he("endTilingPattern()"),oe.stream=Qt[Se].join(`
`),Ln(N,oe),Kr.publish("endTilingPattern",oe),ji.pop().restore()};var nn=x.__private__.newObject=function(){var N=Te();return Y(N,!0),N},Te=x.__private__.newObjectDeferred=function(){return ot++,dt[ot]=function(){return Ge},ot},Y=function(N,oe){return oe=typeof oe=="boolean"&&oe,dt[N]=Ge,oe&&ze(N+" 0 obj"),N},Ae=x.__private__.newAdditionalObject=function(){var N={objId:Te(),content:""};return rt.push(N),N},Ee=Te(),Ue=Te(),Xe=x.__private__.decodeColorString=function(N){var oe=N.split(" ");if(oe.length!==2||oe[1]!=="g"&&oe[1]!=="G")oe.length===5&&(oe[4]==="k"||oe[4]==="K")&&(oe=[(1-oe[0])*(1-oe[3]),(1-oe[1])*(1-oe[3]),(1-oe[2])*(1-oe[3]),"r"]);else{var Me=parseFloat(oe[0]);oe=[Me,Me,Me,"r"]}for(var tt="#",_t=0;_t<3;_t++)tt+=("0"+Math.floor(255*parseFloat(oe[_t])).toString(16)).slice(-2);return tt},lt=x.__private__.encodeColorString=function(N){var oe;typeof N=="string"&&(N={ch1:N});var Me=N.ch1,tt=N.ch2,_t=N.ch3,Jt=N.ch4,_r=N.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Me=="string"&&Me.charAt(0)!=="#"){var en=new u_(Me);if(en.ok)Me=en.toHex();else if(!/^\d*\.?\d*$/.test(Me))throw new Error('Invalid color "'+Me+'" passed to jsPDF.encodeColorString.')}if(typeof Me=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Me)&&(Me="#"+Me[1]+Me[1]+Me[2]+Me[2]+Me[3]+Me[3]),typeof Me=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Me)){var En=parseInt(Me.substr(1),16);Me=En>>16&255,tt=En>>8&255,_t=255&En}if(tt===void 0||Jt===void 0&&Me===tt&&tt===_t)if(typeof Me=="string")oe=Me+" "+_r[0];else switch(N.precision){case 2:oe=fe(Me/255)+" "+_r[0];break;case 3:default:oe=ee(Me/255)+" "+_r[0]}else if(Jt===void 0||qi(Jt)==="object"){if(Jt&&!isNaN(Jt.a)&&Jt.a===0)return oe=["1.","1.","1.",_r[1]].join(" ");if(typeof Me=="string")oe=[Me,tt,_t,_r[1]].join(" ");else switch(N.precision){case 2:oe=[fe(Me/255),fe(tt/255),fe(_t/255),_r[1]].join(" ");break;default:case 3:oe=[ee(Me/255),ee(tt/255),ee(_t/255),_r[1]].join(" ")}}else if(typeof Me=="string")oe=[Me,tt,_t,Jt,_r[2]].join(" ");else switch(N.precision){case 2:oe=[fe(Me),fe(tt),fe(_t),fe(Jt),_r[2]].join(" ");break;case 3:default:oe=[ee(Me),ee(tt),ee(_t),ee(Jt),_r[2]].join(" ")}return oe},$e=x.__private__.getFilters=function(){return h},qe=x.__private__.putStream=function(N){var oe=(N=N||{}).data||"",Me=N.filters||$e(),tt=N.alreadyAppliedFilters||[],_t=N.addLength1||!1,Jt=oe.length,_r=N.objectId,en=function(Es){return Es};if(p!==null&&_r===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");p!==null&&(en=ys.encryptor(_r,0));var En={};Me===!0&&(Me=["FlateEncode"]);var Dn=N.additionalKeyValues||[],Kn=(En=Nn.API.processDataByFilters!==void 0?Nn.API.processDataByFilters(oe,Me):{data:oe,reverseChain:[]}).reverseChain+(Array.isArray(tt)?tt.join(" "):tt.toString());if(En.data.length!==0&&(Dn.push({key:"Length",value:En.data.length}),_t===!0&&Dn.push({key:"Length1",value:Jt})),Kn.length!=0)if(Kn.split("/").length-1==1)Dn.push({key:"Filter",value:Kn});else{Dn.push({key:"Filter",value:"["+Kn+"]"});for(var Wn=0;Wn<Dn.length;Wn+=1)if(Dn[Wn].key==="DecodeParms"){for(var pi=[],mi=0;mi<En.reverseChain.split("/").length-1;mi+=1)pi.push("null");pi.push(Dn[Wn].value),Dn[Wn].value="["+pi.join(" ")+"]"}}ze("<<");for(var Tn=0;Tn<Dn.length;Tn++)ze("/"+Dn[Tn].key+" "+Dn[Tn].value);ze(">>"),En.data.length!==0&&(ze("stream"),ze(en(En.data)),ze("endstream"))},ut=x.__private__.putPage=function(N){var oe=N.number,Me=N.data,tt=N.objId,_t=N.contentsObjId;Y(tt,!0),ze("<</Type /Page"),ze("/Parent "+N.rootDictionaryObjId+" 0 R"),ze("/Resources "+N.resourceDictionaryObjId+" 0 R"),ze("/MediaBox ["+parseFloat(ce(N.mediaBox.bottomLeftX))+" "+parseFloat(ce(N.mediaBox.bottomLeftY))+" "+ce(N.mediaBox.topRightX)+" "+ce(N.mediaBox.topRightY)+"]"),N.cropBox!==null&&ze("/CropBox ["+ce(N.cropBox.bottomLeftX)+" "+ce(N.cropBox.bottomLeftY)+" "+ce(N.cropBox.topRightX)+" "+ce(N.cropBox.topRightY)+"]"),N.bleedBox!==null&&ze("/BleedBox ["+ce(N.bleedBox.bottomLeftX)+" "+ce(N.bleedBox.bottomLeftY)+" "+ce(N.bleedBox.topRightX)+" "+ce(N.bleedBox.topRightY)+"]"),N.trimBox!==null&&ze("/TrimBox ["+ce(N.trimBox.bottomLeftX)+" "+ce(N.trimBox.bottomLeftY)+" "+ce(N.trimBox.topRightX)+" "+ce(N.trimBox.topRightY)+"]"),N.artBox!==null&&ze("/ArtBox ["+ce(N.artBox.bottomLeftX)+" "+ce(N.artBox.bottomLeftY)+" "+ce(N.artBox.topRightX)+" "+ce(N.artBox.topRightY)+"]"),typeof N.userUnit=="number"&&N.userUnit!==1&&ze("/UserUnit "+N.userUnit),Kr.publish("putPage",{objId:tt,pageContext:cr[oe],pageNumber:oe,page:Me}),ze("/Contents "+_t+" 0 R"),ze(">>"),ze("endobj");var Jt=Me.join(`
`);return G===O.ADVANCED&&(Jt+=`
Q`),Y(_t,!0),qe({data:Jt,filters:$e(),objectId:_t}),ze("endobj"),tt},Ot=x.__private__.putPages=function(){var N,oe,Me=[];for(N=1;N<=Cr;N++)cr[N].objId=Te(),cr[N].contentsObjId=Te();for(N=1;N<=Cr;N++)Me.push(ut({number:N,data:Qt[N],objId:cr[N].objId,contentsObjId:cr[N].contentsObjId,mediaBox:cr[N].mediaBox,cropBox:cr[N].cropBox,bleedBox:cr[N].bleedBox,trimBox:cr[N].trimBox,artBox:cr[N].artBox,userUnit:cr[N].userUnit,rootDictionaryObjId:Ee,resourceDictionaryObjId:Ue}));Y(Ee,!0),ze("<</Type /Pages");var tt="/Kids [";for(oe=0;oe<Cr;oe++)tt+=Me[oe]+" 0 R ";ze(tt+"]"),ze("/Count "+Cr),ze(">>"),ze("endobj"),Kr.publish("postPutPages")},nr=function(N){Kr.publish("putFont",{font:N,out:ze,newObject:nn,putStream:qe}),N.isAlreadyPutted!==!0&&(N.objectNumber=nn(),ze("<<"),ze("/Type /Font"),ze("/BaseFont /"+Rh(N.postScriptName)),ze("/Subtype /Type1"),typeof N.encoding=="string"&&ze("/Encoding /"+N.encoding),ze("/FirstChar 32"),ze("/LastChar 255"),ze(">>"),ze("endobj"))},zt=function(){for(var N in Sr)Sr.hasOwnProperty(N)&&(E===!1||E===!0&&w.hasOwnProperty(N))&&nr(Sr[N])},jr=function(N){N.objectNumber=nn();var oe=[];oe.push({key:"Type",value:"/XObject"}),oe.push({key:"Subtype",value:"/Form"}),oe.push({key:"BBox",value:"["+[ce(N.x),ce(N.y),ce(N.x+N.width),ce(N.y+N.height)].join(" ")+"]"}),oe.push({key:"Matrix",value:"["+N.matrix.toString()+"]"});var Me=N.pages[1].join(`
`);qe({data:Me,additionalKeyValues:oe,objectId:N.objectNumber}),ze("endobj")},Hr=function(){for(var N in xn)xn.hasOwnProperty(N)&&jr(xn[N])},Tr=function(N,oe){var Me,tt=[],_t=1/(oe-1);for(Me=0;Me<1;Me+=_t)tt.push(Me);if(tt.push(1),N[0].offset!=0){var Jt={offset:0,color:N[0].color};N.unshift(Jt)}if(N[N.length-1].offset!=1){var _r={offset:1,color:N[N.length-1].color};N.push(_r)}for(var en="",En=0,Dn=0;Dn<tt.length;Dn++){for(Me=tt[Dn];Me>N[En+1].offset;)En++;var Kn=N[En].offset,Wn=(Me-Kn)/(N[En+1].offset-Kn),pi=N[En].color,mi=N[En+1].color;en+=Ke(Math.round((1-Wn)*pi[0]+Wn*mi[0]).toString(16))+Ke(Math.round((1-Wn)*pi[1]+Wn*mi[1]).toString(16))+Ke(Math.round((1-Wn)*pi[2]+Wn*mi[2]).toString(16))}return en.trim()},ln=function(N,oe){oe||(oe=21);var Me=nn(),tt=Tr(N.colors,oe),_t=[];_t.push({key:"FunctionType",value:"0"}),_t.push({key:"Domain",value:"[0.0 1.0]"}),_t.push({key:"Size",value:"["+oe+"]"}),_t.push({key:"BitsPerSample",value:"8"}),_t.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),_t.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),qe({data:tt,additionalKeyValues:_t,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Me}),ze("endobj"),N.objectNumber=nn(),ze("<< /ShadingType "+N.type),ze("/ColorSpace /DeviceRGB");var Jt="/Coords ["+ce(parseFloat(N.coords[0]))+" "+ce(parseFloat(N.coords[1]))+" ";N.type===2?Jt+=ce(parseFloat(N.coords[2]))+" "+ce(parseFloat(N.coords[3])):Jt+=ce(parseFloat(N.coords[2]))+" "+ce(parseFloat(N.coords[3]))+" "+ce(parseFloat(N.coords[4]))+" "+ce(parseFloat(N.coords[5])),ze(Jt+="]"),N.matrix&&ze("/Matrix ["+N.matrix.toString()+"]"),ze("/Function "+Me+" 0 R"),ze("/Extend [true true]"),ze(">>"),ze("endobj")},dn=function(N,oe){var Me=Te(),tt=nn();oe.push({resourcesOid:Me,objectOid:tt}),N.objectNumber=tt;var _t=[];_t.push({key:"Type",value:"/Pattern"}),_t.push({key:"PatternType",value:"1"}),_t.push({key:"PaintType",value:"1"}),_t.push({key:"TilingType",value:"1"}),_t.push({key:"BBox",value:"["+N.boundingBox.map(ce).join(" ")+"]"}),_t.push({key:"XStep",value:ce(N.xStep)}),_t.push({key:"YStep",value:ce(N.yStep)}),_t.push({key:"Resources",value:Me+" 0 R"}),N.matrix&&_t.push({key:"Matrix",value:"["+N.matrix.toString()+"]"}),qe({data:N.stream,additionalKeyValues:_t,objectId:N.objectNumber}),ze("endobj")},In=function(N){var oe;for(oe in Er)Er.hasOwnProperty(oe)&&(Er[oe]instanceof vu?ln(Er[oe]):Er[oe]instanceof Gu&&dn(Er[oe],N))},mn=function(N){for(var oe in N.objectNumber=nn(),ze("<<"),N)switch(oe){case"opacity":ze("/ca "+fe(N[oe]));break;case"stroke-opacity":ze("/CA "+fe(N[oe]))}ze(">>"),ze("endobj")},Bn=function(){var N;for(N in wn)wn.hasOwnProperty(N)&&mn(wn[N])},Qn=function(){for(var N in ze("/XObject <<"),xn)xn.hasOwnProperty(N)&&xn[N].objectNumber>=0&&ze("/"+N+" "+xn[N].objectNumber+" 0 R");Kr.publish("putXobjectDict"),ze(">>")},Vn=function(){ys.oid=nn(),ze("<<"),ze("/Filter /Standard"),ze("/V "+ys.v),ze("/R "+ys.r),ze("/U <"+ys.toHexString(ys.U)+">"),ze("/O <"+ys.toHexString(ys.O)+">"),ze("/P "+ys.P),ze(">>"),ze("endobj")},Ti=function(){for(var N in ze("/Font <<"),Sr)Sr.hasOwnProperty(N)&&(E===!1||E===!0&&w.hasOwnProperty(N))&&ze("/"+N+" "+Sr[N].objectNumber+" 0 R");ze(">>")},oi=function(){if(Object.keys(Er).length>0){for(var N in ze("/Shading <<"),Er)Er.hasOwnProperty(N)&&Er[N]instanceof vu&&Er[N].objectNumber>=0&&ze("/"+N+" "+Er[N].objectNumber+" 0 R");Kr.publish("putShadingPatternDict"),ze(">>")}},wi=function(N){if(Object.keys(Er).length>0){for(var oe in ze("/Pattern <<"),Er)Er.hasOwnProperty(oe)&&Er[oe]instanceof x.TilingPattern&&Er[oe].objectNumber>=0&&Er[oe].objectNumber<N&&ze("/"+oe+" "+Er[oe].objectNumber+" 0 R");Kr.publish("putTilingPatternDict"),ze(">>")}},ks=function(){if(Object.keys(wn).length>0){var N;for(N in ze("/ExtGState <<"),wn)wn.hasOwnProperty(N)&&wn[N].objectNumber>=0&&ze("/"+N+" "+wn[N].objectNumber+" 0 R");Kr.publish("putGStateDict"),ze(">>")}},bi=function(N){Y(N.resourcesOid,!0),ze("<<"),ze("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Ti(),oi(),wi(N.objectOid),ks(),Qn(),ze(">>"),ze("endobj")},Yn=function(){var N=[];zt(),Bn(),Hr(),In(N),Kr.publish("putResources"),N.forEach(bi),bi({resourcesOid:Ue,objectOid:Number.MAX_SAFE_INTEGER}),Kr.publish("postPutResources")},Ya=function(){Kr.publish("putAdditionalObjects");for(var N=0;N<rt.length;N++){var oe=rt[N];Y(oe.objId,!0),ze(oe.content),ze("endobj")}Kr.publish("postPutAdditionalObjects")},Ks=function(N){un[N.fontName]=un[N.fontName]||{},un[N.fontName][N.fontStyle]=N.id},Gs=function(N,oe,Me,tt,_t){var Jt={id:"F"+(Object.keys(Sr).length+1).toString(10),postScriptName:N,fontName:oe,fontStyle:Me,encoding:tt,isStandardFont:_t||!1,metadata:{}};return Kr.publish("addFont",{font:Jt,instance:this}),Sr[Jt.id]=Jt,Ks(Jt),Jt.id},ia=function(N){for(var oe=0,Me=Ht.length;oe<Me;oe++){var tt=Gs.call(this,N[oe][0],N[oe][1],N[oe][2],Ht[oe][3],!0);E===!1&&(w[tt]=!0);var _t=N[oe][0].split("-");Ks({id:tt,fontName:_t[0],fontStyle:_t[1]||""})}Kr.publish("addFonts",{fonts:Sr,dictionary:un})},gs=function(N){return N.foo=function(){try{return N.apply(this,arguments)}catch(tt){var oe=tt.stack||"";~oe.indexOf(" at ")&&(oe=oe.split(" at ")[1]);var Me="Error in function "+oe.split(`
`)[0].split("<")[0]+": "+tt.message;if(!Hn.console)throw new Error(Me);Hn.console.error(Me,tt),Hn.alert&&alert(Me)}},N.foo.bar=N,N.foo},Ri=function(N,oe){var Me,tt,_t,Jt,_r,en,En,Dn,Kn;if(_t=(oe=oe||{}).sourceEncoding||"Unicode",_r=oe.outputEncoding,(oe.autoencode||_r)&&Sr[bt].metadata&&Sr[bt].metadata[_t]&&Sr[bt].metadata[_t].encoding&&(Jt=Sr[bt].metadata[_t].encoding,!_r&&Sr[bt].encoding&&(_r=Sr[bt].encoding),!_r&&Jt.codePages&&(_r=Jt.codePages[0]),typeof _r=="string"&&(_r=Jt[_r]),_r)){for(En=!1,en=[],Me=0,tt=N.length;Me<tt;Me++)(Dn=_r[N.charCodeAt(Me)])?en.push(String.fromCharCode(Dn)):en.push(N[Me]),en[Me].charCodeAt(0)>>8&&(En=!0);N=en.join("")}for(Me=N.length;En===void 0&&Me!==0;)N.charCodeAt(Me-1)>>8&&(En=!0),Me--;if(!En)return N;for(en=oe.noBOM?[]:[254,255],Me=0,tt=N.length;Me<tt;Me++){if((Kn=(Dn=N.charCodeAt(Me))>>8)>>8)throw new Error("Character at position "+Me+" of string '"+N+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");en.push(Kn),en.push(Dn-(Kn<<8))}return String.fromCharCode.apply(void 0,en)},Xi=x.__private__.pdfEscape=x.pdfEscape=function(N,oe){return Ri(N,oe).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},vo=x.__private__.beginPage=function(N){Qt[++Cr]=[],cr[Cr]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(N[0]),topRightY:Number(N[1])}},sa(Cr),Pt(Qt[Se])},nA=function(N,oe){var Me,tt,_t;switch(r=oe||r,typeof N=="string"&&(Me=P(N.toLowerCase()),Array.isArray(Me)&&(tt=Me[0],_t=Me[1])),Array.isArray(N)&&(tt=N[0]*Ct,_t=N[1]*Ct),isNaN(tt)&&(tt=l[0],_t=l[1]),(tt>14400||_t>14400)&&(us.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),tt=Math.min(14400,tt),_t=Math.min(14400,_t)),l=[tt,_t],r.substr(0,1)){case"l":_t>tt&&(l=[_t,tt]);break;case"p":tt>_t&&(l=[_t,tt])}vo(l),qA(to),ze(vs),SA!==0&&ze(SA+" J"),IA!==0&&ze(IA+" j"),Kr.publish("addPage",{pageNumber:Cr})},EA=function(N){N>0&&N<=Cr&&(Qt.splice(N,1),cr.splice(N,1),Cr--,Se>Cr&&(Se=Cr),this.setPage(Se))},sa=function(N){N>0&&N<=Cr&&(Se=N)},bs=x.__private__.getNumberOfPages=x.getNumberOfPages=function(){return Qt.length-1},xs=function(N,oe,Me){var tt,_t=void 0;return Me=Me||{},N=N!==void 0?N:Sr[bt].fontName,oe=oe!==void 0?oe:Sr[bt].fontStyle,tt=N.toLowerCase(),un[tt]!==void 0&&un[tt][oe]!==void 0?_t=un[tt][oe]:un[N]!==void 0&&un[N][oe]!==void 0?_t=un[N][oe]:Me.disableWarning===!1&&us.warn("Unable to look up font label for font '"+N+"', '"+oe+"'. Refer to getFontList() for available fonts."),_t||Me.noFallback||(_t=un.times[oe])==null&&(_t=un.times.normal),_t},$a=x.__private__.putInfo=function(){var N=nn(),oe=function(tt){return tt};for(var Me in p!==null&&(oe=ys.encryptor(N,0)),ze("<<"),ze("/Producer ("+Xi(oe("jsPDF "+Nn.version))+")"),at)at.hasOwnProperty(Me)&&at[Me]&&ze("/"+Me.substr(0,1).toUpperCase()+Me.substr(1)+" ("+Xi(oe(at[Me]))+")");ze("/CreationDate ("+Xi(oe(Re))+")"),ze(">>"),ze("endobj")},aa=x.__private__.putCatalog=function(N){var oe=(N=N||{}).rootDictionaryObjId||Ee;switch(nn(),ze("<<"),ze("/Type /Catalog"),ze("/Pages "+oe+" 0 R"),Br||(Br="fullwidth"),Br){case"fullwidth":ze("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ze("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ze("/OpenAction [3 0 R /Fit]");break;case"original":ze("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Me=""+Br;Me.substr(Me.length-1)==="%"&&(Br=parseInt(Br)/100),typeof Br=="number"&&ze("/OpenAction [3 0 R /XYZ null null "+fe(Br)+"]")}switch(Zr||(Zr="continuous"),Zr){case"continuous":ze("/PageLayout /OneColumn");break;case"single":ze("/PageLayout /SinglePage");break;case"two":case"twoleft":ze("/PageLayout /TwoColumnLeft");break;case"tworight":ze("/PageLayout /TwoColumnRight")}rr&&ze("/PageMode /"+rr),Kr.publish("putCatalog"),ze(">>"),ze("endobj")},Mo=x.__private__.putTrailer=function(){ze("trailer"),ze("<<"),ze("/Size "+(ot+1)),ze("/Root "+ot+" 0 R"),ze("/Info "+(ot-1)+" 0 R"),p!==null&&ze("/Encrypt "+ys.oid+" 0 R"),ze("/ID [ <"+_e+"> <"+_e+"> ]"),ze(">>")},Qa=x.__private__.putHeader=function(){ze("%PDF-"+Q),ze("%ºß¬à")},Do=x.__private__.putXRef=function(){var N="0000000000";ze("xref"),ze("0 "+(ot+1)),ze("0000000000 65535 f ");for(var oe=1;oe<=ot;oe++)typeof dt[oe]=="function"?ze((N+dt[oe]()).slice(-10)+" 00000 n "):dt[oe]!==void 0?ze((N+dt[oe]).slice(-10)+" 00000 n "):ze("0000000000 00000 n ")},oa=x.__private__.buildDocument=function(){gr(),Pt(Bt),Kr.publish("buildDocument"),Qa(),Ot(),Ya(),Yn(),p!==null&&Vn(),$a(),aa();var N=Ge;return Do(),Mo(),ze("startxref"),ze(""+N),ze("%%EOF"),Pt(Qt[Se]),Bt.join(`
`)},qs=x.__private__.getBlob=function(N){return new Blob([sr(N)],{type:"application/pdf"})},si=x.output=x.__private__.output=gs(function(N,oe){switch(typeof(oe=oe||{})=="string"?oe={filename:oe}:oe.filename=oe.filename||"generated.pdf",N){case void 0:return oa();case"save":x.save(oe.filename);break;case"arraybuffer":return sr(oa());case"blob":return qs(oa());case"bloburi":case"bloburl":if(Hn.URL!==void 0&&typeof Hn.URL.createObjectURL=="function")return Hn.URL&&Hn.URL.createObjectURL(qs(oa()))||void 0;us.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Me="",tt=oa();try{Me=wg(tt)}catch{Me=wg(unescape(encodeURIComponent(tt)))}return"data:application/pdf;filename="+oe.filename+";base64,"+Me;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Hn)==="[object Window]"){var _t="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Jt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';oe.pdfObjectUrl&&(_t=oe.pdfObjectUrl,Jt="");var _r='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+_t+'"'+Jt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(oe)+");<\/script></body></html>",en=Hn.open();return en!==null&&en.document.write(_r),en}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Hn)==="[object Window]"){var En='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(oe.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+oe.filename+'" width="500px" height="400px" /></body></html>',Dn=Hn.open();if(Dn!==null){Dn.document.write(En);var Kn=this;Dn.document.documentElement.querySelector("#pdfViewer").onload=function(){Dn.document.title=oe.filename,Dn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Kn.output("bloburl"))}}return Dn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Hn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Wn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",oe)+'"></iframe></body></html>',pi=Hn.open();if(pi!==null&&(pi.document.write(Wn),pi.document.title=oe.filename),pi||typeof safari>"u")return pi;break;case"datauri":case"dataurl":return Hn.document.location.href=this.output("datauristring",oe);default:return null}}),Bs=function(N){return Array.isArray(hn)===!0&&hn.indexOf(N)>-1};switch(s){case"pt":Ct=1;break;case"mm":Ct=72/25.4;break;case"cm":Ct=72/2.54;break;case"in":Ct=72;break;case"px":Ct=Bs("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ct=12;break;case"ex":Ct=6;break;default:if(typeof s!="number")throw new Error("Invalid unit: "+s);Ct=s}var ys=null;kt(),Le();var iA=function(N){return p!==null?ys.encryptor(N,0):function(oe){return oe}},sA=x.__private__.getPageInfo=x.getPageInfo=function(N){if(isNaN(N)||N%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:cr[N].objId,pageNumber:N,pageContext:cr[N]}},Cn=x.__private__.getPageInfoByObjId=function(N){if(isNaN(N)||N%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var oe in cr)if(cr[oe].objId===N)break;return sA(oe)},GA=x.__private__.getCurrentPageInfo=x.getCurrentPageInfo=function(){return{objId:cr[Se].objId,pageNumber:Se,pageContext:cr[Se]}};x.addPage=function(){return nA.apply(this,arguments),this},x.setPage=function(){return sa.apply(this,arguments),Pt.call(this,Qt[Se]),this},x.insertPage=function(N){return this.addPage(),this.movePage(Se,N),this},x.movePage=function(N,oe){var Me,tt;if(N>oe){Me=Qt[N],tt=cr[N];for(var _t=N;_t>oe;_t--)Qt[_t]=Qt[_t-1],cr[_t]=cr[_t-1];Qt[oe]=Me,cr[oe]=tt,this.setPage(oe)}else if(N<oe){Me=Qt[N],tt=cr[N];for(var Jt=N;Jt<oe;Jt++)Qt[Jt]=Qt[Jt+1],cr[Jt]=cr[Jt+1];Qt[oe]=Me,cr[oe]=tt,this.setPage(oe)}return this},x.deletePage=function(){return EA.apply(this,arguments),this},x.__private__.text=x.text=function(N,oe,Me,tt,_t){var Jt,_r,en,En,Dn,Kn,Wn,pi,mi,Tn=(tt=tt||{}).scope||this;if(typeof N=="number"&&typeof oe=="number"&&(typeof Me=="string"||Array.isArray(Me))){var Es=Me;Me=oe,oe=N,N=Es}if(arguments[3]instanceof tn?(he("The transform parameter of text() with a Matrix value"),mi=_t):(en=arguments[4],En=arguments[5],qi(Wn=arguments[3])==="object"&&Wn!==null||(typeof en=="string"&&(En=en,en=null),typeof Wn=="string"&&(En=Wn,Wn=null),typeof Wn=="number"&&(en=Wn,Wn=null),tt={flags:Wn,angle:en,align:En})),isNaN(oe)||isNaN(Me)||N==null)throw new Error("Invalid arguments passed to jsPDF.text");if(N.length===0)return Tn;var rs="",Ws=!1,ns=typeof tt.lineHeightFactor=="number"?tt.lineHeightFactor:Aa,Si=Tn.internal.scaleFactor;function yl(Ii){return Ii=Ii.split("	").join(Array(tt.TabLen||9).join(" ")),Xi(Ii,Wn)}function la(Ii){for(var Ai,Bi=Ii.concat(),Zi=[],Ir=Bi.length;Ir--;)typeof(Ai=Bi.shift())=="string"?Zi.push(Ai):Array.isArray(Ii)&&(Ai.length===1||Ai[1]===void 0&&Ai[2]===void 0)?Zi.push(Ai[0]):Zi.push([Ai[0],Ai[1],Ai[2]]);return Zi}function Pi(Ii,Ai){var Bi;if(typeof Ii=="string")Bi=Ai(Ii)[0];else if(Array.isArray(Ii)){for(var Zi,Ir,ja=Ii.concat(),LA=[],kA=ja.length;kA--;)typeof(Zi=ja.shift())=="string"?LA.push(Ai(Zi)[0]):Array.isArray(Zi)&&typeof Zi[0]=="string"&&(Ir=Ai(Zi[0],Zi[1],Zi[2]),LA.push([Ir[0],Ir[1],Ir[2]]));Bi=LA}return Bi}var xa=!1,Mi=!0;if(typeof N=="string")xa=!0;else if(Array.isArray(N)){var Ma=N.concat();_r=[];for(var Ba,is=Ma.length;is--;)(typeof(Ba=Ma.shift())!="string"||Array.isArray(Ba)&&typeof Ba[0]!="string")&&(Mi=!1);xa=Mi}if(xa===!1)throw new Error('Type of text must be string or Array. "'+N+'" is not recognized.');typeof N=="string"&&(N=N.match(/[\r?\n]/)?N.split(/\r\n|\r|\n/g):[N]);var hi=pr/Tn.internal.scaleFactor,cA=hi*(ns-1);switch(tt.baseline){case"bottom":Me-=cA;break;case"top":Me+=hi-cA;break;case"hanging":Me+=hi-2*cA;break;case"middle":Me+=hi/2-cA}if((Kn=tt.maxWidth||0)>0&&(typeof N=="string"?N=Tn.splitTextToSize(N,Kn):Object.prototype.toString.call(N)==="[object Array]"&&(N=N.reduce(function(Ii,Ai){return Ii.concat(Tn.splitTextToSize(Ai,Kn))},[]))),Jt={text:N,x:oe,y:Me,options:tt,mutex:{pdfEscape:Xi,activeFontKey:bt,fonts:Sr,activeFontSize:pr}},Kr.publish("preProcessText",Jt),N=Jt.text,en=(tt=Jt.options).angle,!(mi instanceof tn)&&en&&typeof en=="number"){en*=Math.PI/180,tt.rotationDirection===0&&(en=-en),G===O.ADVANCED&&(en=-en);var so=Math.cos(en),uA=Math.sin(en);mi=new tn(so,uA,-uA,so,0,0)}else en&&en instanceof tn&&(mi=en);G!==O.ADVANCED||mi||(mi=hs),(Dn=tt.charSpace||_a)!==void 0&&(rs+=ce(re(Dn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(pi=tt.horizontalScale)!==void 0&&(rs+=ce(100*pi)+` Tz
`),tt.lang;var Fs=-1,xo=tt.renderingMode!==void 0?tt.renderingMode:tt.stroke,ao=Tn.internal.getCurrentPageInfo().pageContext;switch(xo){case 0:case!1:case"fill":Fs=0;break;case 1:case!0:case"stroke":Fs=1;break;case 2:case"fillThenStroke":Fs=2;break;case 3:case"invisible":Fs=3;break;case 4:case"fillAndAddForClipping":Fs=4;break;case 5:case"strokeAndAddPathForClipping":Fs=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Fs=6;break;case 7:case"addToPathForClipping":Fs=7}var Ro=ao.usedRenderingMode!==void 0?ao.usedRenderingMode:-1;Fs!==-1?rs+=Fs+` Tr
`:Ro!==-1&&(rs+=`0 Tr
`),Fs!==-1&&(ao.usedRenderingMode=Fs),En=tt.align||"left";var Hi,Ns=pr*ns,oo=Tn.internal.pageSize.getWidth(),ss=Sr[bt];Dn=tt.charSpace||_a,Kn=tt.maxWidth||0,Wn=Object.assign({autoencode:!0,noBOM:!0},tt.flags);var js=[];if(Object.prototype.toString.call(N)==="[object Array]"){var Ss;_r=la(N),En!=="left"&&(Hi=_r.map(function(Ii){return Tn.getStringUnitWidth(Ii,{font:ss,charSpace:Dn,fontSize:pr,doKerning:!1})*pr/Si}));var Ca,ca=0;if(En==="right"){oe-=Hi[0],N=[],is=_r.length;for(var Xs=0;Xs<is;Xs++)Xs===0?(Ca=no(oe),Ss=io(Me)):(Ca=re(ca-Hi[Xs]),Ss=-Ns),N.push([_r[Xs],Ca,Ss]),ca=Hi[Xs]}else if(En==="center"){oe-=Hi[0]/2,N=[],is=_r.length;for(var as=0;as<is;as++)as===0?(Ca=no(oe),Ss=io(Me)):(Ca=re((ca-Hi[as])/2),Ss=-Ns),N.push([_r[as],Ca,Ss]),ca=Hi[as]}else if(En==="left"){N=[],is=_r.length;for(var ua=0;ua<is;ua++)N.push(_r[ua])}else{if(En!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');N=[],is=_r.length,Kn=Kn!==0?Kn:oo;for(var gi=0;gi<is;gi++)Ss=gi===0?io(Me):-Ns,Ca=gi===0?no(oe):0,gi<is-1?js.push(ce(re((Kn-Hi[gi])/(_r[gi].split(" ").length-1)))):js.push(0),N.push([_r[gi],Ca,Ss])}}var ZA=typeof tt.R2L=="boolean"?tt.R2L:Gr;ZA===!0&&(N=Pi(N,function(Ii,Ai,Bi){return[Ii.split("").reverse().join(""),Ai,Bi]})),Jt={text:N,x:oe,y:Me,options:tt,mutex:{pdfEscape:Xi,activeFontKey:bt,fonts:Sr,activeFontSize:pr}},Kr.publish("postProcessText",Jt),N=Jt.text,Ws=Jt.mutex.isHex||!1;var Da=Sr[bt].encoding;Da!=="WinAnsiEncoding"&&Da!=="StandardEncoding"||(N=Pi(N,function(Ii,Ai,Bi){return[yl(Ii),Ai,Bi]})),_r=la(N),N=[];for(var Na,fs,Ea,Oo=0,Rs=1,hA=Array.isArray(_r[0])?Rs:Oo,Ao="",Ho=function(Ii,Ai,Bi){var Zi="";return Bi instanceof tn?(Bi=typeof tt.angle=="number"?Wi(Bi,new tn(1,0,0,1,Ii,Ai)):Wi(new tn(1,0,0,1,Ii,Ai),Bi),G===O.ADVANCED&&(Bi=Wi(new tn(1,0,0,-1,0,0),Bi)),Zi=Bi.join(" ")+` Tm
`):Zi=ce(Ii)+" "+ce(Ai)+` Td
`,Zi},zi=0;zi<_r.length;zi++){switch(Ao="",hA){case Rs:Ea=(Ws?"<":"(")+_r[zi][0]+(Ws?">":")"),Na=parseFloat(_r[zi][1]),fs=parseFloat(_r[zi][2]);break;case Oo:Ea=(Ws?"<":"(")+_r[zi]+(Ws?">":")"),Na=no(oe),fs=io(Me)}js!==void 0&&js[zi]!==void 0&&(Ao=js[zi]+` Tw
`),zi===0?N.push(Ao+Ho(Na,fs,mi)+Ea):hA===Oo?N.push(Ao+Ea):hA===Rs&&N.push(Ao+Ho(Na,fs,mi)+Ea)}N=hA===Oo?N.join(` Tj
T* `):N.join(` Tj
`),N+=` Tj
`;var Pr=`BT
/`;return Pr+=bt+" "+pr+` Tf
`,Pr+=ce(pr*ns)+` TL
`,Pr+=AA+`
`,Pr+=rs,Pr+=N,ze(Pr+="ET"),w[bt]=!0,Tn};var ml=x.__private__.clip=x.clip=function(N){return ze(N==="evenodd"?"W*":"W"),this};x.clipEvenOdd=function(){return ml("evenodd")},x.__private__.discardPath=x.discardPath=function(){return ze("n"),this};var Pa=x.__private__.isValidStyle=function(N){var oe=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(N)!==-1&&(oe=!0),oe};x.__private__.setDefaultPathOperation=x.setDefaultPathOperation=function(N){return Pa(N)&&(_=N),this};var _o=x.__private__.getStyle=x.getStyle=function(N){var oe=_;switch(N){case"D":case"S":oe="S";break;case"F":oe="f";break;case"FD":case"DF":oe="B";break;case"f":case"f*":case"B":case"B*":oe=N}return oe},aA=x.close=function(){return ze("h"),this};x.stroke=function(){return ze("S"),this},x.fill=function(N){return wo("f",N),this},x.fillEvenOdd=function(N){return wo("f*",N),this},x.fillStroke=function(N){return wo("B",N),this},x.fillStrokeEvenOdd=function(N){return wo("B*",N),this};var wo=function(N,oe){qi(oe)==="object"?Ds(oe,N):ze(N)},gt=function(N){N===null||G===O.ADVANCED&&N===void 0||(N=_o(N),ze(N))};function Mn(N,oe,Me,tt,_t){var Jt=new Gu(oe||this.boundingBox,Me||this.xStep,tt||this.yStep,this.gState,_t||this.matrix);Jt.stream=this.stream;var _r=N+"$$"+this.cloneIndex+++"$$";return Ln(_r,Jt),Jt}var Ds=function(N,oe){var Me=An[N.key],tt=Er[Me];if(tt instanceof vu)ze("q"),ze(Oi(oe)),tt.gState&&x.setGState(tt.gState),ze(N.matrix.toString()+" cm"),ze("/"+Me+" sh"),ze("Q");else if(tt instanceof Gu){var _t=new tn(1,0,0,-1,0,ba());N.matrix&&(_t=_t.multiply(N.matrix||hs),Me=Mn.call(tt,N.key,N.boundingBox,N.xStep,N.yStep,_t).id),ze("q"),ze("/Pattern cs"),ze("/"+Me+" scn"),tt.gState&&x.setGState(tt.gState),ze(oe),ze("Q")}},Oi=function(N){switch(N){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Qs=x.moveTo=function(N,oe){return ze(ce(re(N))+" "+ce(me(oe))+" m"),this},ya=x.lineTo=function(N,oe){return ze(ce(re(N))+" "+ce(me(oe))+" l"),this},eo=x.curveTo=function(N,oe,Me,tt,_t,Jt){return ze([ce(re(N)),ce(me(oe)),ce(re(Me)),ce(me(tt)),ce(re(_t)),ce(me(Jt)),"c"].join(" ")),this};x.__private__.line=x.line=function(N,oe,Me,tt,_t){if(isNaN(N)||isNaN(oe)||isNaN(Me)||isNaN(tt)||!Pa(_t))throw new Error("Invalid arguments passed to jsPDF.line");return G===O.COMPAT?this.lines([[Me-N,tt-oe]],N,oe,[1,1],_t||"S"):this.lines([[Me-N,tt-oe]],N,oe,[1,1]).stroke()},x.__private__.lines=x.lines=function(N,oe,Me,tt,_t,Jt){var _r,en,En,Dn,Kn,Wn,pi,mi,Tn,Es,rs,Ws;if(typeof N=="number"&&(Ws=Me,Me=oe,oe=N,N=Ws),tt=tt||[1,1],Jt=Jt||!1,isNaN(oe)||isNaN(Me)||!Array.isArray(N)||!Array.isArray(tt)||!Pa(_t)||typeof Jt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Qs(oe,Me),_r=tt[0],en=tt[1],Dn=N.length,Es=oe,rs=Me,En=0;En<Dn;En++)(Kn=N[En]).length===2?(Es=Kn[0]*_r+Es,rs=Kn[1]*en+rs,ya(Es,rs)):(Wn=Kn[0]*_r+Es,pi=Kn[1]*en+rs,mi=Kn[2]*_r+Es,Tn=Kn[3]*en+rs,Es=Kn[4]*_r+Es,rs=Kn[5]*en+rs,eo(Wn,pi,mi,Tn,Es,rs));return Jt&&aA(),gt(_t),this},x.path=function(N){for(var oe=0;oe<N.length;oe++){var Me=N[oe],tt=Me.c;switch(Me.op){case"m":Qs(tt[0],tt[1]);break;case"l":ya(tt[0],tt[1]);break;case"c":eo.apply(this,tt);break;case"h":aA()}}return this},x.__private__.rect=x.rect=function(N,oe,Me,tt,_t){if(isNaN(N)||isNaN(oe)||isNaN(Me)||isNaN(tt)||!Pa(_t))throw new Error("Invalid arguments passed to jsPDF.rect");return G===O.COMPAT&&(tt=-tt),ze([ce(re(N)),ce(me(oe)),ce(re(Me)),ce(re(tt)),"re"].join(" ")),gt(_t),this},x.__private__.triangle=x.triangle=function(N,oe,Me,tt,_t,Jt,_r){if(isNaN(N)||isNaN(oe)||isNaN(Me)||isNaN(tt)||isNaN(_t)||isNaN(Jt)||!Pa(_r))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Me-N,tt-oe],[_t-Me,Jt-tt],[N-_t,oe-Jt]],N,oe,[1,1],_r,!0),this},x.__private__.roundedRect=x.roundedRect=function(N,oe,Me,tt,_t,Jt,_r){if(isNaN(N)||isNaN(oe)||isNaN(Me)||isNaN(tt)||isNaN(_t)||isNaN(Jt)||!Pa(_r))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var en=4/3*(Math.SQRT2-1);return _t=Math.min(_t,.5*Me),Jt=Math.min(Jt,.5*tt),this.lines([[Me-2*_t,0],[_t*en,0,_t,Jt-Jt*en,_t,Jt],[0,tt-2*Jt],[0,Jt*en,-_t*en,Jt,-_t,Jt],[2*_t-Me,0],[-_t*en,0,-_t,-Jt*en,-_t,-Jt],[0,2*Jt-tt],[0,-Jt*en,_t*en,-Jt,_t,-Jt]],N+_t,oe,[1,1],_r,!0),this},x.__private__.ellipse=x.ellipse=function(N,oe,Me,tt,_t){if(isNaN(N)||isNaN(oe)||isNaN(Me)||isNaN(tt)||!Pa(_t))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Jt=4/3*(Math.SQRT2-1)*Me,_r=4/3*(Math.SQRT2-1)*tt;return Qs(N+Me,oe),eo(N+Me,oe-_r,N+Jt,oe-tt,N,oe-tt),eo(N-Jt,oe-tt,N-Me,oe-_r,N-Me,oe),eo(N-Me,oe+_r,N-Jt,oe+tt,N,oe+tt),eo(N+Jt,oe+tt,N+Me,oe+_r,N+Me,oe),gt(_t),this},x.__private__.circle=x.circle=function(N,oe,Me,tt){if(isNaN(N)||isNaN(oe)||isNaN(Me)||!Pa(tt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(N,oe,Me,Me,tt)},x.setFont=function(N,oe,Me){return Me&&(oe=te(oe,Me)),bt=xs(N,oe,{disableWarning:!1}),this};var Cs=x.__private__.getFont=x.getFont=function(){return Sr[xs.apply(x,arguments)]};x.__private__.getFontList=x.getFontList=function(){var N,oe,Me={};for(N in un)if(un.hasOwnProperty(N))for(oe in Me[N]=[],un[N])un[N].hasOwnProperty(oe)&&Me[N].push(oe);return Me},x.addFont=function(N,oe,Me,tt,_t){var Jt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Jt.indexOf(arguments[3])!==-1?_t=arguments[3]:arguments[3]&&Jt.indexOf(arguments[3])==-1&&(Me=te(Me,tt)),_t=_t||"Identity-H",Gs.call(this,N,oe,Me,_t)};var Aa,to=e.lineWidth||.200025,va=x.__private__.getLineWidth=x.getLineWidth=function(){return to},qA=x.__private__.setLineWidth=x.setLineWidth=function(N){return to=N,ze(ce(re(N))+" w"),this};x.__private__.setLineDash=Nn.API.setLineDash=Nn.API.setLineDashPattern=function(N,oe){if(N=N||[],oe=oe||0,isNaN(oe)||!Array.isArray(N))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return N=N.map(function(Me){return ce(re(Me))}).join(" "),oe=ce(re(oe)),ze("["+N+"] "+oe+" d"),this};var ts=x.__private__.getLineHeight=x.getLineHeight=function(){return pr*Aa};x.__private__.getLineHeight=x.getLineHeight=function(){return pr*Aa};var FA=x.__private__.setLineHeightFactor=x.setLineHeightFactor=function(N){return typeof(N=N||1.15)=="number"&&(Aa=N),this},ro=x.__private__.getLineHeightFactor=x.getLineHeightFactor=function(){return Aa};FA(e.lineHeight);var no=x.__private__.getHorizontalCoordinate=function(N){return re(N)},io=x.__private__.getVerticalCoordinate=function(N){return G===O.ADVANCED?N:cr[Se].mediaBox.topRightY-cr[Se].mediaBox.bottomLeftY-re(N)},Wl=x.__private__.getHorizontalCoordinateString=x.getHorizontalCoordinateString=function(N){return ce(no(N))},No=x.__private__.getVerticalCoordinateString=x.getVerticalCoordinateString=function(N){return ce(io(N))},vs=e.strokeColor||"0 G";x.__private__.getStrokeColor=x.getDrawColor=function(){return Xe(vs)},x.__private__.setStrokeColor=x.setDrawColor=function(N,oe,Me,tt){return vs=lt({ch1:N,ch2:oe,ch3:Me,ch4:tt,pdfColorType:"draw",precision:2}),ze(vs),this};var oA=e.fillColor||"0 g";x.__private__.getFillColor=x.getFillColor=function(){return Xe(oA)},x.__private__.setFillColor=x.setFillColor=function(N,oe,Me,tt){return oA=lt({ch1:N,ch2:oe,ch3:Me,ch4:tt,pdfColorType:"fill",precision:2}),ze(oA),this};var AA=e.textColor||"0 g",_c=x.__private__.getTextColor=x.getTextColor=function(){return Xe(AA)};x.__private__.setTextColor=x.setTextColor=function(N,oe,Me,tt){return AA=lt({ch1:N,ch2:oe,ch3:Me,ch4:tt,pdfColorType:"text",precision:3}),this};var _a=e.charSpace,WA=x.__private__.getCharSpace=x.getCharSpace=function(){return parseFloat(_a||0)};x.__private__.setCharSpace=x.setCharSpace=function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return _a=N,this};var SA=0;x.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},x.__private__.setLineCap=x.setLineCap=function(N){var oe=x.CapJoinStyles[N];if(oe===void 0)throw new Error("Line cap style of '"+N+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return SA=oe,ze(oe+" J"),this};var IA=0;x.__private__.setLineJoin=x.setLineJoin=function(N){var oe=x.CapJoinStyles[N];if(oe===void 0)throw new Error("Line join style of '"+N+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return IA=oe,ze(oe+" j"),this},x.__private__.setLineMiterLimit=x.__private__.setMiterLimit=x.setLineMiterLimit=x.setMiterLimit=function(N){if(N=N||0,isNaN(N))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ze(ce(re(N))+" M"),this},x.GState=nd,x.setGState=function(N){(N=typeof N=="string"?wn[_i[N]]:TA(null,N)).equals(br)||(ze("/"+N.id+" gs"),br=N)};var TA=function(N,oe){if(!N||!_i[N]){var Me=!1;for(var tt in wn)if(wn.hasOwnProperty(tt)&&wn[tt].equals(oe)){Me=!0;break}if(Me)oe=wn[tt];else{var _t="GS"+(Object.keys(wn).length+1).toString(10);wn[_t]=oe,oe.id=_t}return N&&(_i[N]=oe.id),Kr.publish("addGState",oe),oe}};x.addGState=function(N,oe){return TA(N,oe),this},x.saveGraphicsState=function(){return ze("q"),lr.push({key:bt,size:pr,color:AA}),this},x.restoreGraphicsState=function(){ze("Q");var N=lr.pop();return bt=N.key,pr=N.size,AA=N.color,br=null,this},x.setCurrentTransformationMatrix=function(N){return ze(N.toString()+" cm"),this},x.comment=function(N){return ze("#"+N),this};var lA=function(N,oe){var Me=N||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Me},set:function(Jt){isNaN(Jt)||(Me=parseFloat(Jt))}});var tt=oe||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return tt},set:function(Jt){isNaN(Jt)||(tt=parseFloat(Jt))}});var _t="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return _t},set:function(Jt){_t=Jt.toString()}}),this},UA=function(N,oe,Me,tt){lA.call(this,N,oe),this.type="rect";var _t=Me||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return _t},set:function(_r){isNaN(_r)||(_t=parseFloat(_r))}});var Jt=tt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Jt},set:function(_r){isNaN(_r)||(Jt=parseFloat(_r))}}),this},bo=function(){this.page=Cr,this.currentPage=Se,this.pages=Qt.slice(0),this.pagesContext=cr.slice(0),this.x=jt,this.y=er,this.matrix=Vr,this.width=wa(Se),this.height=ba(Se),this.outputDestination=Nt,this.id="",this.objectNumber=-1};bo.prototype.restore=function(){Cr=this.page,Se=this.currentPage,cr=this.pagesContext,Qt=this.pages,jt=this.x,er=this.y,Vr=this.matrix,XA(Se,this.width),xi(Se,this.height),Nt=this.outputDestination};var gl=function(N,oe,Me,tt,_t){ji.push(new bo),Cr=Se=0,Qt=[],jt=N,er=oe,Vr=_t,vo([Me,tt])},Xl=function(N){if(Sn[N])ji.pop().restore();else{var oe=new bo,Me="Xo"+(Object.keys(xn).length+1).toString(10);oe.id=Me,Sn[N]=Me,xn[Me]=oe,Kr.publish("addFormObject",oe),ji.pop().restore()}};for(var jo in x.beginFormObject=function(N,oe,Me,tt,_t){return gl(N,oe,Me,tt,_t),this},x.endFormObject=function(N){return Xl(N),this},x.doFormObject=function(N,oe){var Me=xn[Sn[N]];return ze("q"),ze(oe.toString()+" cm"),ze("/"+Me.id+" Do"),ze("Q"),this},x.getFormObject=function(N){var oe=xn[Sn[N]];return{x:oe.x,y:oe.y,width:oe.width,height:oe.height,matrix:oe.matrix}},x.save=function(N,oe){return N=N||"generated.pdf",(oe=oe||{}).returnPromise=oe.returnPromise||!1,oe.returnPromise===!1?(Hu(qs(oa()),N),typeof Hu.unload=="function"&&Hn.setTimeout&&setTimeout(Hu.unload,911),this):new Promise(function(Me,tt){try{var _t=Hu(qs(oa()),N);typeof Hu.unload=="function"&&Hn.setTimeout&&setTimeout(Hu.unload,911),Me(_t)}catch(Jt){tt(Jt.message)}})},Nn.API)Nn.API.hasOwnProperty(jo)&&(jo==="events"&&Nn.API.events.length?function(N,oe){var Me,tt,_t;for(_t=oe.length-1;_t!==-1;_t--)Me=oe[_t][0],tt=oe[_t][1],N.subscribe.apply(N,[Me].concat(typeof tt=="function"?[tt]:tt))}(Kr,Nn.API.events):x[jo]=Nn.API[jo]);var wa=x.getPageWidth=function(N){return(cr[N=N||Se].mediaBox.topRightX-cr[N].mediaBox.bottomLeftX)/Ct},XA=x.setPageWidth=function(N,oe){cr[N].mediaBox.topRightX=oe*Ct+cr[N].mediaBox.bottomLeftX},ba=x.getPageHeight=function(N){return(cr[N=N||Se].mediaBox.topRightY-cr[N].mediaBox.bottomLeftY)/Ct},xi=x.setPageHeight=function(N,oe){cr[N].mediaBox.topRightY=oe*Ct+cr[N].mediaBox.bottomLeftY};return x.internal={pdfEscape:Xi,getStyle:_o,getFont:Cs,getFontSize:vr,getCharSpace:WA,getTextColor:_c,getLineHeight:ts,getLineHeightFactor:ro,getLineWidth:va,write:yr,getHorizontalCoordinate:no,getVerticalCoordinate:io,getCoordinateString:Wl,getVerticalCoordinateString:No,collections:{},newObject:nn,newAdditionalObject:Ae,newObjectDeferred:Te,newObjectDeferredBegin:Y,getFilters:$e,putStream:qe,events:Kr,scaleFactor:Ct,pageSize:{getWidth:function(){return wa(Se)},setWidth:function(N){XA(Se,N)},getHeight:function(){return ba(Se)},setHeight:function(N){xi(Se,N)}},encryptionOptions:p,encryption:ys,getEncryptor:iA,output:si,getNumberOfPages:bs,pages:Qt,out:ze,f2:fe,f3:ee,getPageInfo:sA,getPageInfoByObjId:Cn,getCurrentPageInfo:GA,getPDFVersion:k,Point:lA,Rectangle:UA,Matrix:tn,hasHotfix:Bs},Object.defineProperty(x.internal.pageSize,"width",{get:function(){return wa(Se)},set:function(N){XA(Se,N)},enumerable:!0,configurable:!0}),Object.defineProperty(x.internal.pageSize,"height",{get:function(){return ba(Se)},set:function(N){xi(Se,N)},enumerable:!0,configurable:!0}),ia.call(x,Ht),bt="F1",nA(l,r),Kr.publish("initialized"),x}jh.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},jh.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},jh.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},jh.prototype.processOwnerPassword=function(e,t){return xg(bg(t).substr(0,5),e)},jh.prototype.encryptor=function(e,t){var r=bg(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(s){return xg(r,s)}},nd.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||qi(e)!==qi(this))return!1;var s=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;s++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&s--;return s===0},Nn.API={events:[]},Nn.version="2.5.1";var Vs=Nn.API,Yg=1,Ah=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Mh=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Jn=function(e){return e.toFixed(2)},yu=function(e){return e.toFixed(5)};Vs.__acroform__={};var CA=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},Ty=function(e){return e*Yg},hc=function(e){var t=new p_,r=yn.internal.getHeight(e)||0,s=yn.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Jn(s)),Number(Jn(r))],t},qF=Vs.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},WF=Vs.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},XF=Vs.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},ta=Vs.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return XF(e,t-1)},ra=Vs.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return qF(e,t-1)},na=Vs.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return WF(e,t-1)},ZF=Vs.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,s=t.internal.getVerticalCoordinate,l=e[0],c=e[1],h=e[2],a=e[3],d={};return d.lowerLeft_X=r(l)||0,d.lowerLeft_Y=s(c+a)||0,d.upperRight_X=r(l+h)||0,d.upperRight_Y=s(c)||0,[Number(Jn(d.lowerLeft_X)),Number(Jn(d.lowerLeft_Y)),Number(Jn(d.upperRight_X)),Number(Jn(d.upperRight_Y))]},JF=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,s=Bg(e,r),l=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+l+" "+Jn(s.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC");var c=hc(e);return c.scope=e.scope,c.stream=t.join(`
`),c}},Bg=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,s={text:"",fontSize:""},l=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");l=e.multiline?l.map(function(ee){return ee.split(`
`)}):l.map(function(ee){return[ee]});var c=r,h=yn.internal.getHeight(e)||0;h=h<0?-h:h;var a=yn.internal.getWidth(e)||0;a=a<0?-a:a;var d=function(ee,re,be){if(ee+1<l.length){var me=re+" "+l[ee+1][0];return sp(me,e,be).width<=a-4}return!1};c++;e:for(;c>0;){t="",c--;var _,p,E=sp("3",e,c).height,w=e.multiline?h-c:(h-E)/2,x=w+=2,Q=0,k=0,R=0;if(c<=0){t=`(...) Tj
`,t+="% Width of Text: "+sp(t,e,c=12).width+", FieldWidth:"+a+`
`;break}for(var P="",O=0,G=0;G<l.length;G++)if(l.hasOwnProperty(G)){var V=!1;if(l[G].length!==1&&R!==l[G].length-1){if((E+2)*(O+2)+2>h)continue e;P+=l[G][R],V=!0,k=G,G--}else{P=(P+=l[G][R]+" ").substr(P.length-1)==" "?P.substr(0,P.length-1):P;var Z=parseInt(G),te=d(Z,P,c),ce=G>=l.length-1;if(te&&!ce){P+=" ",R=0;continue}if(te||ce){if(ce)k=Z;else if(e.multiline&&(E+2)*(O+2)+2>h)continue e}else{if(!e.multiline||(E+2)*(O+2)+2>h)continue e;k=Z}}for(var he="",Ce=Q;Ce<=k;Ce++){var fe=l[Ce];if(e.multiline){if(Ce===k){he+=fe[R]+" ",R=(R+1)%fe.length;continue}if(Ce===Q){he+=fe[fe.length-1]+" ";continue}}he+=fe[0]+" "}switch(he=he.substr(he.length-1)==" "?he.substr(0,he.length-1):he,p=sp(he,e,c).width,e.textAlign){case"right":_=a-p-2;break;case"center":_=(a-p)/2;break;case"left":default:_=2}t+=Jn(_)+" "+Jn(x)+` Td
`,t+="("+Ah(he)+`) Tj
`,t+=-Jn(_)+` 0 Td
`,x=-(c+2),p=0,Q=V?k:k+1,O++,P=""}break}return s.text=t,s.fontSize=c,s},sp=function(e,t,r){var s=t.scope.internal.getFont(t.fontName,t.fontStyle),l=t.scope.getStringUnitWidth(e,{font:s,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:s,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:l}},YF={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},$F=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(s){return s.type===r.type&&s.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},eS=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var s=r,l=e[r];t.internal.newObjectDeferredBegin(l.objId,!0),qi(l)==="object"&&typeof l.putStream=="function"&&l.putStream(),delete e[s]}},tS=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Gl.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(YF)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Yg=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new m_,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var s=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var l in s)if(s.hasOwnProperty(l)){var c=s[l];c.objId=void 0,c.hasAnnotation&&$F(c,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(s,l){var c=!s;for(var h in s||(l.internal.newObjectDeferredBegin(l.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),l.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),s=s||l.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(s.hasOwnProperty(h)){var a=s[h],d=[],_=a.Rect;if(a.Rect&&(a.Rect=ZF(a.Rect,l)),l.internal.newObjectDeferredBegin(a.objId,!0),a.DA=yn.createDefaultAppearanceStream(a),qi(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(d=a.getKeyValueListForStream()),a.Rect=_,a.hasAppearanceStream&&!a.appearanceStreamContent){var p=JF(a);d.push({key:"AP",value:"<</N "+p+">>"}),l.internal.acroformPlugin.xForms.push(p)}if(a.appearanceStreamContent){var E="";for(var w in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(w)){var x=a.appearanceStreamContent[w];if(E+="/"+w+" ",E+="<<",Object.keys(x).length>=1||Array.isArray(x)){for(var h in x)if(x.hasOwnProperty(h)){var Q=x[h];typeof Q=="function"&&(Q=Q.call(l,a)),E+="/"+h+" "+Q+" ",l.internal.acroformPlugin.xForms.indexOf(Q)>=0||l.internal.acroformPlugin.xForms.push(Q)}}else typeof(Q=x)=="function"&&(Q=Q.call(l,a)),E+="/"+h+" "+Q,l.internal.acroformPlugin.xForms.indexOf(Q)>=0||l.internal.acroformPlugin.xForms.push(Q);E+=">>"}d.push({key:"AP",value:`<<
`+E+">>"})}l.internal.putStream({additionalKeyValues:d,objectId:a.objId}),l.internal.out("endobj")}c&&eS(l.internal.acroformPlugin.xForms,l)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},d_=Vs.__acroform__.arrayToPdfArray=function(e,t,r){var s=function(h){return h};if(Array.isArray(e)){for(var l="[",c=0;c<e.length;c++)switch(c!==0&&(l+=" "),qi(e[c])){case"boolean":case"number":case"object":l+=e[c].toString();break;case"string":e[c].substr(0,1)!=="/"?(t!==void 0&&r&&(s=r.internal.getEncryptor(t)),l+="("+Ah(s(e[c].toString()))+")"):l+=e[c].toString()}return l+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Om=function(e,t,r){var s=function(l){return l};return t!==void 0&&r&&(s=r.internal.getEncryptor(t)),(e=e||"").toString(),e="("+Ah(s(e))+")"},dc=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};dc.prototype.toString=function(){return this.objId+" 0 R"},dc.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},dc.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(c){return c!="content"&&c!="appearanceStreamContent"&&c!="scope"&&c!="objId"&&c.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var s=t[r],l=this[s];l&&(Array.isArray(l)?e.push({key:s,value:d_(l,this.objId,this.scope)}):l instanceof dc?(l.scope=this.scope,e.push({key:s,value:l.objId+" 0 R"})):typeof l!="function"&&e.push({key:s,value:l}))}return e};var p_=function(){dc.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};CA(p_,dc);var m_=function(){dc.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(s){return s};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Ah(r(e))+")"}},set:function(r){e=r}})};CA(m_,dc);var Gl=function e(){dc.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(P){if(isNaN(P))throw new Error('Invalid value "'+P+'" for attribute F supplied.');t=P}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(t,3))},set:function(P){Boolean(P)===!0?this.F=ra(t,3):this.F=na(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(P){if(isNaN(P))throw new Error('Invalid value "'+P+'" for attribute Ff supplied.');r=P}});var s=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(s.length!==0)return s},set:function(P){s=P!==void 0?P:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[0])?0:s[0]},set:function(P){s[0]=P}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[1])?0:s[1]},set:function(P){s[1]=P}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[2])?0:s[2]},set:function(P){s[2]=P}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[3])?0:s[3]},set:function(P){s[3]=P}});var l="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return l},set:function(P){switch(P){case"/Btn":case"/Tx":case"/Ch":case"/Sig":l=P;break;default:throw new Error('Invalid value "'+P+'" for attribute FT supplied.')}}});var c=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!c||c.length<1){if(this instanceof Up)return;c="FieldObject"+e.FieldNum++}var P=function(O){return O};return this.scope&&(P=this.scope.internal.getEncryptor(this.objId)),"("+Ah(P(c))+")"},set:function(P){c=P.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return c},set:function(P){c=P}});var h="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return h},set:function(P){h=P}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(P){a=P}});var d=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return d},set:function(P){d=P}});var _=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return _===void 0?50/Yg:_},set:function(P){_=P}});var p="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return p},set:function(P){p=P}});var E="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!E||this instanceof Up||this instanceof bu))return Om(E,this.objId,this.scope)},set:function(P){P=P.toString(),E=P}});var w=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(w)return this instanceof ka?w:Om(w,this.objId,this.scope)},set:function(P){P=P.toString(),w=this instanceof ka?P:P.substr(0,1)==="("?Mh(P.substr(1,P.length-2)):Mh(P)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof ka?Mh(w.substr(1,w.length-1)):w},set:function(P){P=P.toString(),w=this instanceof ka?"/"+P:P}});var x=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(x)return x},set:function(P){this.V=P}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(x)return this instanceof ka?x:Om(x,this.objId,this.scope)},set:function(P){P=P.toString(),x=this instanceof ka?P:P.substr(0,1)==="("?Mh(P.substr(1,P.length-2)):Mh(P)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof ka?Mh(x.substr(1,x.length-1)):x},set:function(P){P=P.toString(),x=this instanceof ka?"/"+P:P}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var Q,k=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return k},set:function(P){P=Boolean(P),k=P}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(Q)return Q},set:function(P){Q=P}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,1))},set:function(P){Boolean(P)===!0?this.Ff=ra(this.Ff,1):this.Ff=na(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,2))},set:function(P){Boolean(P)===!0?this.Ff=ra(this.Ff,2):this.Ff=na(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,3))},set:function(P){Boolean(P)===!0?this.Ff=ra(this.Ff,3):this.Ff=na(this.Ff,3)}});var R=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(R!==null)return R},set:function(P){if([0,1,2].indexOf(P)===-1)throw new Error('Invalid value "'+P+'" for attribute Q supplied.');R=P}}),Object.defineProperty(this,"textAlign",{get:function(){var P;switch(R){case 0:default:P="left";break;case 1:P="center";break;case 2:P="right"}return P},configurable:!0,enumerable:!0,set:function(P){switch(P){case"right":case 2:R=2;break;case"center":case 1:R=1;break;case"left":case 0:default:R=0}}})};CA(Gl,dc);var Wu=function(){Gl.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return d_(t,this.objId,this.scope)},set:function(r){var s,l;l=[],typeof(s=r)=="string"&&(l=function(c,h,a){a||(a=1);for(var d,_=[];d=h.exec(c);)_.push(d[a]);return _}(s,/\((.*?)\)/g)),t=l}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,s){for(s=s||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),s!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,18))},set:function(r){Boolean(r)===!0?this.Ff=ra(this.Ff,18):this.Ff=na(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,19))},set:function(r){this.combo===!0&&(Boolean(r)===!0?this.Ff=ra(this.Ff,19):this.Ff=na(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,20))},set:function(r){Boolean(r)===!0?(this.Ff=ra(this.Ff,20),t.sort()):this.Ff=na(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,22))},set:function(r){Boolean(r)===!0?this.Ff=ra(this.Ff,22):this.Ff=na(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,23))},set:function(r){Boolean(r)===!0?this.Ff=ra(this.Ff,23):this.Ff=na(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,27))},set:function(r){Boolean(r)===!0?this.Ff=ra(this.Ff,27):this.Ff=na(this.Ff,27)}}),this.hasAppearanceStream=!1};CA(Wu,Gl);var Xu=function(){Wu.call(this),this.fontName="helvetica",this.combo=!1};CA(Xu,Wu);var Zu=function(){Xu.call(this),this.combo=!0};CA(Zu,Xu);var Vf=function(){Zu.call(this),this.edit=!0};CA(Vf,Zu);var ka=function(){Gl.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,15))},set:function(r){Boolean(r)===!0?this.Ff=ra(this.Ff,15):this.Ff=na(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,16))},set:function(r){Boolean(r)===!0?this.Ff=ra(this.Ff,16):this.Ff=na(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,17))},set:function(r){Boolean(r)===!0?this.Ff=ra(this.Ff,17):this.Ff=na(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,26))},set:function(r){Boolean(r)===!0?this.Ff=ra(this.Ff,26):this.Ff=na(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(c){return c};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var s,l=[];for(s in l.push("<<"),t)l.push("/"+s+" ("+Ah(r(t[s]))+")");return l.push(">>"),l.join(`
`)}},set:function(r){qi(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};CA(ka,Gl);var Kf=function(){ka.call(this),this.pushButton=!0};CA(Kf,ka);var Ju=function(){ka.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};CA(Ju,ka);var Up=function(){var e,t;Gl.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(l){e=l}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(l){t=l}});var r,s={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var l=function(a){return a};this.scope&&(l=this.scope.internal.getEncryptor(this.objId));var c,h=[];for(c in h.push("<<"),s)h.push("/"+c+" ("+Ah(l(s[c]))+")");return h.push(">>"),h.join(`
`)},set:function(l){qi(l)==="object"&&(s=l)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return s.CA||""},set:function(l){typeof l=="string"&&(s.CA=l)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(l){r=l}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(l){r="/"+l}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=yn.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};CA(Up,Gl),Ju.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},Ju.prototype.createOption=function(e){var t=new Up;return t.Parent=this,t.optionName=e,this.Kids.push(t),rS.call(this.scope,t),t};var Gf=function(){ka.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=yn.CheckBox.createAppearanceStream()};CA(Gf,ka);var bu=function(){Gl.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,13))},set:function(t){Boolean(t)===!0?this.Ff=ra(this.Ff,13):this.Ff=na(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,21))},set:function(t){Boolean(t)===!0?this.Ff=ra(this.Ff,21):this.Ff=na(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,23))},set:function(t){Boolean(t)===!0?this.Ff=ra(this.Ff,23):this.Ff=na(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,24))},set:function(t){Boolean(t)===!0?this.Ff=ra(this.Ff,24):this.Ff=na(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,25))},set:function(t){Boolean(t)===!0?this.Ff=ra(this.Ff,25):this.Ff=na(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,26))},set:function(t){Boolean(t)===!0?this.Ff=ra(this.Ff,26):this.Ff=na(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};CA(bu,Gl);var qf=function(){bu.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,14))},set:function(e){Boolean(e)===!0?this.Ff=ra(this.Ff,14):this.Ff=na(this.Ff,14)}}),this.password=!0};CA(qf,bu);var yn={CheckBox:{createAppearanceStream:function(){return{N:{On:yn.CheckBox.YesNormal},D:{On:yn.CheckBox.YesPushDown,Off:yn.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=hc(e);t.scope=e.scope;var r=[],s=e.scope.internal.getFont(e.fontName,e.fontStyle).id,l=e.scope.__private__.encodeColorString(e.color),c=Bg(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+Jn(yn.internal.getWidth(e))+" "+Jn(yn.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+s+" "+Jn(c.fontSize)+" Tf "+l),r.push("BT"),r.push(c.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=hc(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,s=e.scope.__private__.encodeColorString(e.color),l=[],c=yn.internal.getHeight(e),h=yn.internal.getWidth(e),a=Bg(e,e.caption);return l.push("1 g"),l.push("0 0 "+Jn(h)+" "+Jn(c)+" re"),l.push("f"),l.push("q"),l.push("0 0 1 rg"),l.push("0 0 "+Jn(h-1)+" "+Jn(c-1)+" re"),l.push("W"),l.push("n"),l.push("0 g"),l.push("BT"),l.push("/"+r+" "+Jn(a.fontSize)+" Tf "+s),l.push(a.text),l.push("ET"),l.push("Q"),t.stream=l.join(`
`),t},OffPushDown:function(e){var t=hc(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Jn(yn.internal.getWidth(e))+" "+Jn(yn.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:yn.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=yn.RadioButton.Circle.YesNormal,t.D[e]=yn.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=hc(e);t.scope=e.scope;var r=[],s=yn.internal.getWidth(e)<=yn.internal.getHeight(e)?yn.internal.getWidth(e)/4:yn.internal.getHeight(e)/4;s=Number((.9*s).toFixed(5));var l=yn.internal.Bezier_C,c=Number((s*l).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+yu(yn.internal.getWidth(e)/2)+" "+yu(yn.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+c+" "+c+" "+s+" 0 "+s+" c"),r.push("-"+c+" "+s+" -"+s+" "+c+" -"+s+" 0 c"),r.push("-"+s+" -"+c+" -"+c+" -"+s+" 0 -"+s+" c"),r.push(c+" -"+s+" "+s+" -"+c+" "+s+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=hc(e);t.scope=e.scope;var r=[],s=yn.internal.getWidth(e)<=yn.internal.getHeight(e)?yn.internal.getWidth(e)/4:yn.internal.getHeight(e)/4;s=Number((.9*s).toFixed(5));var l=Number((2*s).toFixed(5)),c=Number((l*yn.internal.Bezier_C).toFixed(5)),h=Number((s*yn.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+yu(yn.internal.getWidth(e)/2)+" "+yu(yn.internal.getHeight(e)/2)+" cm"),r.push(l+" 0 m"),r.push(l+" "+c+" "+c+" "+l+" 0 "+l+" c"),r.push("-"+c+" "+l+" -"+l+" "+c+" -"+l+" 0 c"),r.push("-"+l+" -"+c+" -"+c+" -"+l+" 0 -"+l+" c"),r.push(c+" -"+l+" "+l+" -"+c+" "+l+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+yu(yn.internal.getWidth(e)/2)+" "+yu(yn.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+h+" "+h+" "+s+" 0 "+s+" c"),r.push("-"+h+" "+s+" -"+s+" "+h+" -"+s+" 0 c"),r.push("-"+s+" -"+h+" -"+h+" -"+s+" 0 -"+s+" c"),r.push(h+" -"+s+" "+s+" -"+h+" "+s+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=hc(e);t.scope=e.scope;var r=[],s=yn.internal.getWidth(e)<=yn.internal.getHeight(e)?yn.internal.getWidth(e)/4:yn.internal.getHeight(e)/4;s=Number((.9*s).toFixed(5));var l=Number((2*s).toFixed(5)),c=Number((l*yn.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+yu(yn.internal.getWidth(e)/2)+" "+yu(yn.internal.getHeight(e)/2)+" cm"),r.push(l+" 0 m"),r.push(l+" "+c+" "+c+" "+l+" 0 "+l+" c"),r.push("-"+c+" "+l+" -"+l+" "+c+" -"+l+" 0 c"),r.push("-"+l+" -"+c+" -"+c+" -"+l+" 0 -"+l+" c"),r.push(c+" -"+l+" "+l+" -"+c+" "+l+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:yn.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=yn.RadioButton.Cross.YesNormal,t.D[e]=yn.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=hc(e);t.scope=e.scope;var r=[],s=yn.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+Jn(yn.internal.getWidth(e)-2)+" "+Jn(yn.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Jn(s.x1.x)+" "+Jn(s.x1.y)+" m"),r.push(Jn(s.x2.x)+" "+Jn(s.x2.y)+" l"),r.push(Jn(s.x4.x)+" "+Jn(s.x4.y)+" m"),r.push(Jn(s.x3.x)+" "+Jn(s.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=hc(e);t.scope=e.scope;var r=yn.internal.calculateCross(e),s=[];return s.push("0.749023 g"),s.push("0 0 "+Jn(yn.internal.getWidth(e))+" "+Jn(yn.internal.getHeight(e))+" re"),s.push("f"),s.push("q"),s.push("1 1 "+Jn(yn.internal.getWidth(e)-2)+" "+Jn(yn.internal.getHeight(e)-2)+" re"),s.push("W"),s.push("n"),s.push(Jn(r.x1.x)+" "+Jn(r.x1.y)+" m"),s.push(Jn(r.x2.x)+" "+Jn(r.x2.y)+" l"),s.push(Jn(r.x4.x)+" "+Jn(r.x4.y)+" m"),s.push(Jn(r.x3.x)+" "+Jn(r.x3.y)+" l"),s.push("s"),s.push("Q"),t.stream=s.join(`
`),t},OffPushDown:function(e){var t=hc(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Jn(yn.internal.getWidth(e))+" "+Jn(yn.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};yn.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=yn.internal.getWidth(e),r=yn.internal.getHeight(e),s=Math.min(t,r);return{x1:{x:(t-s)/2,y:(r-s)/2+s},x2:{x:(t-s)/2+s,y:(r-s)/2},x3:{x:(t-s)/2,y:(r-s)/2},x4:{x:(t-s)/2+s,y:(r-s)/2+s}}}},yn.internal.getWidth=function(e){var t=0;return qi(e)==="object"&&(t=Ty(e.Rect[2])),t},yn.internal.getHeight=function(e){var t=0;return qi(e)==="object"&&(t=Ty(e.Rect[3])),t};var rS=Vs.addField=function(e){if(tS(this,e),!(e instanceof Gl))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Vs.AcroFormChoiceField=Wu,Vs.AcroFormListBox=Xu,Vs.AcroFormComboBox=Zu,Vs.AcroFormEditBox=Vf,Vs.AcroFormButton=ka,Vs.AcroFormPushButton=Kf,Vs.AcroFormRadioButton=Ju,Vs.AcroFormCheckBox=Gf,Vs.AcroFormTextField=bu,Vs.AcroFormPasswordField=qf,Vs.AcroFormAppearance=yn,Vs.AcroForm={ChoiceField:Wu,ListBox:Xu,ComboBox:Zu,EditBox:Vf,Button:ka,PushButton:Kf,RadioButton:Ju,CheckBox:Gf,TextField:bu,PasswordField:qf,Appearance:yn},Nn.AcroForm={ChoiceField:Wu,ListBox:Xu,ComboBox:Zu,EditBox:Vf,Button:ka,PushButton:Kf,RadioButton:Ju,CheckBox:Gf,TextField:bu,PasswordField:qf,Appearance:yn};var nS=Nn.AcroForm;function g_(e){return e.reduce(function(t,r,s){return t[r]=s,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},s=e.__addimage__.getImageFileTypeByImageData=function(ee,re){var be,me,Re,_e,He,Le=t;if((re=re||t)==="RGBA"||ee.data!==void 0&&ee.data instanceof Uint8ClampedArray&&"height"in ee&&"width"in ee)return"RGBA";if(te(ee))for(He in r)for(Re=r[He],be=0;be<Re.length;be+=1){for(_e=!0,me=0;me<Re[be].length;me+=1)if(Re[be][me]!==void 0&&Re[be][me]!==ee[me]){_e=!1;break}if(_e===!0){Le=He;break}}else for(He in r)for(Re=r[He],be=0;be<Re.length;be+=1){for(_e=!0,me=0;me<Re[be].length;me+=1)if(Re[be][me]!==void 0&&Re[be][me]!==ee.charCodeAt(me)){_e=!1;break}if(_e===!0){Le=He;break}}return Le===t&&re!==t&&(Le=re),Le},l=function ee(re){for(var be=this.internal.write,me=this.internal.putStream,Re=(0,this.internal.getFilters)();Re.indexOf("FlateEncode")!==-1;)Re.splice(Re.indexOf("FlateEncode"),1);re.objectId=this.internal.newObject();var _e=[];if(_e.push({key:"Type",value:"/XObject"}),_e.push({key:"Subtype",value:"/Image"}),_e.push({key:"Width",value:re.width}),_e.push({key:"Height",value:re.height}),re.colorSpace===R.INDEXED?_e.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(re.palette.length/3-1)+" "+("sMask"in re&&re.sMask!==void 0?re.objectId+2:re.objectId+1)+" 0 R]"}):(_e.push({key:"ColorSpace",value:"/"+re.colorSpace}),re.colorSpace===R.DEVICE_CMYK&&_e.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),_e.push({key:"BitsPerComponent",value:re.bitsPerComponent}),"decodeParameters"in re&&re.decodeParameters!==void 0&&_e.push({key:"DecodeParms",value:"<<"+re.decodeParameters+">>"}),"transparency"in re&&Array.isArray(re.transparency)){for(var He="",Le=0,Je=re.transparency.length;Le<Je;Le++)He+=re.transparency[Le]+" "+re.transparency[Le]+" ";_e.push({key:"Mask",value:"["+He+"]"})}re.sMask!==void 0&&_e.push({key:"SMask",value:re.objectId+1+" 0 R"});var ke=re.filter!==void 0?["/"+re.filter]:void 0;if(me({data:re.data,additionalKeyValues:_e,alreadyAppliedFilters:ke,objectId:re.objectId}),be("endobj"),"sMask"in re&&re.sMask!==void 0){var kt="/Predictor "+re.predictor+" /Colors 1 /BitsPerComponent "+re.bitsPerComponent+" /Columns "+re.width,ie={width:re.width,height:re.height,colorSpace:"DeviceGray",bitsPerComponent:re.bitsPerComponent,decodeParameters:kt,data:re.sMask};"filter"in re&&(ie.filter=re.filter),ee.call(this,ie)}if(re.colorSpace===R.INDEXED){var Se=this.internal.newObject();me({data:he(new Uint8Array(re.palette)),objectId:Se}),be("endobj")}},c=function(){var ee=this.internal.collections.addImage_images;for(var re in ee)l.call(this,ee[re])},h=function(){var ee,re=this.internal.collections.addImage_images,be=this.internal.write;for(var me in re)be("/I"+(ee=re[me]).index,ee.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",c),this.internal.events.subscribe("putXobjectDict",h))},d=function(){var ee=this.internal.collections.addImage_images;return a.call(this),ee},_=function(){return Object.keys(this.internal.collections.addImage_images).length},p=function(ee){return typeof e["process"+ee.toUpperCase()]=="function"},E=function(ee){return qi(ee)==="object"&&ee.nodeType===1},w=function(ee,re){if(ee.nodeName==="IMG"&&ee.hasAttribute("src")){var be=""+ee.getAttribute("src");if(be.indexOf("data:image/")===0)return zf(unescape(be).split("base64,").pop());var me=e.loadFile(be,!0);if(me!==void 0)return me}if(ee.nodeName==="CANVAS"){if(ee.width===0||ee.height===0)throw new Error("Given canvas must have data. Canvas width: "+ee.width+", height: "+ee.height);var Re;switch(re){case"PNG":Re="image/png";break;case"WEBP":Re="image/webp";break;case"JPEG":case"JPG":default:Re="image/jpeg"}return zf(ee.toDataURL(Re,1).split("base64,").pop())}},x=function(ee){var re=this.internal.collections.addImage_images;if(re){for(var be in re)if(ee===re[be].alias)return re[be]}},Q=function(ee,re,be){return ee||re||(ee=-96,re=-96),ee<0&&(ee=-1*be.width*72/ee/this.internal.scaleFactor),re<0&&(re=-1*be.height*72/re/this.internal.scaleFactor),ee===0&&(ee=re*be.width/be.height),re===0&&(re=ee*be.height/be.width),[ee,re]},k=function(ee,re,be,me,Re,_e){var He=Q.call(this,be,me,Re),Le=this.internal.getCoordinateString,Je=this.internal.getVerticalCoordinateString,ke=d.call(this);if(be=He[0],me=He[1],ke[Re.index]=Re,_e){_e*=Math.PI/180;var kt=Math.cos(_e),ie=Math.sin(_e),Se=function(Ke){return Ke.toFixed(4)},Qe=[Se(kt),Se(ie),Se(-1*ie),Se(kt),0,0,"cm"]}this.internal.write("q"),_e?(this.internal.write([1,"0","0",1,Le(ee),Je(re+me),"cm"].join(" ")),this.internal.write(Qe.join(" ")),this.internal.write([Le(be),"0","0",Le(me),"0","0","cm"].join(" "))):this.internal.write([Le(be),"0","0",Le(me),Le(ee),Je(re+me),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Re.index+" Do"),this.internal.write("Q")},R=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var P=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},O=e.__addimage__.sHashCode=function(ee){var re,be,me=0;if(typeof ee=="string")for(be=ee.length,re=0;re<be;re++)me=(me<<5)-me+ee.charCodeAt(re),me|=0;else if(te(ee))for(be=ee.byteLength/2,re=0;re<be;re++)me=(me<<5)-me+ee[re],me|=0;return me},G=e.__addimage__.validateStringAsBase64=function(ee){(ee=ee||"").toString().trim();var re=!0;return ee.length===0&&(re=!1),ee.length%4!=0&&(re=!1),/^[A-Za-z0-9+/]+$/.test(ee.substr(0,ee.length-2))===!1&&(re=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(ee.substr(-2))===!1&&(re=!1),re},V=e.__addimage__.extractImageFromDataUrl=function(ee){var re=(ee=ee||"").split("base64,"),be=null;if(re.length===2){var me=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(re[0]);Array.isArray(me)&&(be={mimeType:me[1],charset:me[2],data:re[1]})}return be},Z=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(ee){return Z()&&ee instanceof ArrayBuffer};var te=e.__addimage__.isArrayBufferView=function(ee){return Z()&&typeof Uint32Array<"u"&&(ee instanceof Int8Array||ee instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&ee instanceof Uint8ClampedArray||ee instanceof Int16Array||ee instanceof Uint16Array||ee instanceof Int32Array||ee instanceof Uint32Array||ee instanceof Float32Array||ee instanceof Float64Array)},ce=e.__addimage__.binaryStringToUint8Array=function(ee){for(var re=ee.length,be=new Uint8Array(re),me=0;me<re;me++)be[me]=ee.charCodeAt(me);return be},he=e.__addimage__.arrayBufferToBinaryString=function(ee){for(var re="",be=te(ee)?ee:new Uint8Array(ee),me=0;me<be.length;me+=8192)re+=String.fromCharCode.apply(null,be.subarray(me,me+8192));return re};e.addImage=function(){var ee,re,be,me,Re,_e,He,Le,Je;if(typeof arguments[1]=="number"?(re=t,be=arguments[1],me=arguments[2],Re=arguments[3],_e=arguments[4],He=arguments[5],Le=arguments[6],Je=arguments[7]):(re=arguments[1],be=arguments[2],me=arguments[3],Re=arguments[4],_e=arguments[5],He=arguments[6],Le=arguments[7],Je=arguments[8]),qi(ee=arguments[0])==="object"&&!E(ee)&&"imageData"in ee){var ke=ee;ee=ke.imageData,re=ke.format||re||t,be=ke.x||be||0,me=ke.y||me||0,Re=ke.w||ke.width||Re,_e=ke.h||ke.height||_e,He=ke.alias||He,Le=ke.compression||Le,Je=ke.rotation||ke.angle||Je}var kt=this.internal.getFilters();if(Le===void 0&&kt.indexOf("FlateEncode")!==-1&&(Le="SLOW"),isNaN(be)||isNaN(me))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var ie=Ce.call(this,ee,re,He,Le);return k.call(this,be,me,Re,_e,ie,Je),this};var Ce=function(ee,re,be,me){var Re,_e,He;if(typeof ee=="string"&&s(ee)===t){ee=unescape(ee);var Le=fe(ee,!1);(Le!==""||(Le=e.loadFile(ee,!0))!==void 0)&&(ee=Le)}if(E(ee)&&(ee=w(ee,re)),re=s(ee,re),!p(re))throw new Error("addImage does not support files of type '"+re+"', please ensure that a plugin for '"+re+"' support is added.");if(((He=be)==null||He.length===0)&&(be=function(Je){return typeof Je=="string"||te(Je)?O(Je):te(Je.data)?O(Je.data):null}(ee)),(Re=x.call(this,be))||(Z()&&(ee instanceof Uint8Array||re==="RGBA"||(_e=ee,ee=ce(ee))),Re=this["process"+re.toUpperCase()](ee,_.call(this),be,function(Je){return Je&&typeof Je=="string"&&(Je=Je.toUpperCase()),Je in e.image_compression?Je:P.NONE}(me),_e)),!Re)throw new Error("An unknown error occurred whilst processing the image.");return Re},fe=e.__addimage__.convertBase64ToBinaryString=function(ee,re){var be;re=typeof re!="boolean"||re;var me,Re="";if(typeof ee=="string"){me=(be=V(ee))!==null?be.data:ee;try{Re=zf(me)}catch(_e){if(re)throw G(me)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+_e.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Re};e.getImageProperties=function(ee){var re,be,me="";if(E(ee)&&(ee=w(ee)),typeof ee=="string"&&s(ee)===t&&((me=fe(ee,!1))===""&&(me=e.loadFile(ee)||""),ee=me),be=s(ee),!p(be))throw new Error("addImage does not support files of type '"+be+"', please ensure that a plugin for '"+be+"' support is added.");if(!Z()||ee instanceof Uint8Array||(ee=ce(ee)),!(re=this["process"+be.toUpperCase()](ee)))throw new Error("An unknown error occurred whilst processing the image");return re.fileType=be,re}})(Nn.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};Nn.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var s,l,c,h=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,d=this.internal.getPageInfoByObjId(r.objId),_=r.pageContext.annotations,p=!1,E=0;E<_.length&&!p;E++)switch((s=_[E]).type){case"link":(t(s.options.url)||t(s.options.pageNumber))&&(p=!0);break;case"reference":case"text":case"freetext":p=!0}if(p!=0){this.internal.write("/Annots [");for(var w=0;w<_.length;w++){s=_[w];var x=this.internal.pdfEscape,Q=this.internal.getEncryptor(r.objId);switch(s.type){case"reference":this.internal.write(" "+s.object.objId+" 0 R ");break;case"text":var k=this.internal.newAdditionalObject(),R=this.internal.newAdditionalObject(),P=this.internal.getEncryptor(k.objId),O=s.title||"Note";c="<</Type /Annot /Subtype /Text "+(l="/Rect ["+h(s.bounds.x)+" "+a(s.bounds.y+s.bounds.h)+" "+h(s.bounds.x+s.bounds.w)+" "+a(s.bounds.y)+"] ")+"/Contents ("+x(P(s.contents))+")",c+=" /Popup "+R.objId+" 0 R",c+=" /P "+d.objId+" 0 R",c+=" /T ("+x(P(O))+") >>",k.content=c;var G=k.objId+" 0 R";c="<</Type /Annot /Subtype /Popup "+(l="/Rect ["+h(s.bounds.x+30)+" "+a(s.bounds.y+s.bounds.h)+" "+h(s.bounds.x+s.bounds.w+30)+" "+a(s.bounds.y)+"] ")+" /Parent "+G,s.open&&(c+=" /Open true"),c+=" >>",R.content=c,this.internal.write(k.objId,"0 R",R.objId,"0 R");break;case"freetext":l="/Rect ["+h(s.bounds.x)+" "+a(s.bounds.y)+" "+h(s.bounds.x+s.bounds.w)+" "+a(s.bounds.y+s.bounds.h)+"] ";var V=s.color||"#000000";c="<</Type /Annot /Subtype /FreeText "+l+"/Contents ("+x(Q(s.contents))+")",c+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+V+")",c+=" /Border [0 0 0]",c+=" >>",this.internal.write(c);break;case"link":if(s.options.name){var Z=this.annotations._nameMap[s.options.name];s.options.pageNumber=Z.page,s.options.top=Z.y}else s.options.top||(s.options.top=0);if(l="/Rect ["+s.finalBounds.x+" "+s.finalBounds.y+" "+s.finalBounds.w+" "+s.finalBounds.h+"] ",c="",s.options.url)c="<</Type /Annot /Subtype /Link "+l+"/Border [0 0 0] /A <</S /URI /URI ("+x(Q(s.options.url))+") >>";else if(s.options.pageNumber)switch(c="<</Type /Annot /Subtype /Link "+l+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(s.options.pageNumber).objId+" 0 R",s.options.magFactor=s.options.magFactor||"XYZ",s.options.magFactor){case"Fit":c+=" /Fit]";break;case"FitH":c+=" /FitH "+s.options.top+"]";break;case"FitV":s.options.left=s.options.left||0,c+=" /FitV "+s.options.left+"]";break;case"XYZ":default:var te=a(s.options.top);s.options.left=s.options.left||0,s.options.zoom===void 0&&(s.options.zoom=0),c+=" /XYZ "+s.options.left+" "+te+" "+s.options.zoom+"]"}c!=""&&(c+=" >>",this.internal.write(c))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var s=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":s.pageContext.annotations.push(r)}},e.link=function(r,s,l,c,h){var a=this.internal.getCurrentPageInfo(),d=this.internal.getCoordinateString,_=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:d(r),y:_(s),w:d(r+l),h:_(s+c)},options:h,type:"link"})},e.textWithLink=function(r,s,l,c){var h,a,d=this.getTextWidth(r),_=this.internal.getLineHeight()/this.internal.scaleFactor;if(c.maxWidth!==void 0){a=c.maxWidth;var p=this.splitTextToSize(r,a).length;h=Math.ceil(_*p)}else a=d,h=_;return this.text(r,s,l,c),l+=.2*_,c.align==="center"&&(s-=d/2),c.align==="right"&&(s-=d),this.link(s,l-_,a,h,c),d},e.getTextWidth=function(r){var s=this.internal.getFontSize();return this.getStringUnitWidth(r)*s/this.internal.scaleFactor}}(Nn.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},s={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},l=[1570,1571,1573,1575];e.__arabicParser__={};var c=e.__arabicParser__.isInArabicSubstitutionA=function(k){return t[k.charCodeAt(0)]!==void 0},h=e.__arabicParser__.isArabicLetter=function(k){return typeof k=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(k)},a=e.__arabicParser__.isArabicEndLetter=function(k){return h(k)&&c(k)&&t[k.charCodeAt(0)].length<=2},d=e.__arabicParser__.isArabicAlfLetter=function(k){return h(k)&&l.indexOf(k.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(k){return h(k)&&c(k)&&t[k.charCodeAt(0)].length>=1};var _=e.__arabicParser__.arabicLetterHasFinalForm=function(k){return h(k)&&c(k)&&t[k.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(k){return h(k)&&c(k)&&t[k.charCodeAt(0)].length>=3};var p=e.__arabicParser__.arabicLetterHasMedialForm=function(k){return h(k)&&c(k)&&t[k.charCodeAt(0)].length==4},E=e.__arabicParser__.resolveLigatures=function(k){var R=0,P=r,O="",G=0;for(R=0;R<k.length;R+=1)P[k.charCodeAt(R)]!==void 0?(G++,typeof(P=P[k.charCodeAt(R)])=="number"&&(O+=String.fromCharCode(P),P=r,G=0),R===k.length-1&&(P=r,O+=k.charAt(R-(G-1)),R-=G-1,G=0)):(P=r,O+=k.charAt(R-G),R-=G,G=0);return O};e.__arabicParser__.isArabicDiacritic=function(k){return k!==void 0&&s[k.charCodeAt(0)]!==void 0};var w=e.__arabicParser__.getCorrectForm=function(k,R,P){return h(k)?c(k)===!1?-1:!_(k)||!h(R)&&!h(P)||!h(P)&&a(R)||a(k)&&!h(R)||a(k)&&d(R)||a(k)&&a(R)?0:p(k)&&h(R)&&!a(R)&&h(P)&&_(P)?3:a(k)||!h(P)?1:2:-1},x=function(k){var R=0,P=0,O=0,G="",V="",Z="",te=(k=k||"").split("\\s+"),ce=[];for(R=0;R<te.length;R+=1){for(ce.push(""),P=0;P<te[R].length;P+=1)G=te[R][P],V=te[R][P-1],Z=te[R][P+1],h(G)?(O=w(G,V,Z),ce[R]+=O!==-1?String.fromCharCode(t[G.charCodeAt(0)][O]):G):ce[R]+=G;ce[R]=E(ce[R])}return ce.join(" ")},Q=e.__arabicParser__.processArabic=e.processArabic=function(){var k,R=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,P=[];if(Array.isArray(R)){var O=0;for(P=[],O=0;O<R.length;O+=1)Array.isArray(R[O])?P.push([x(R[O][0]),R[O][1],R[O][2]]):P.push([x(R[O])]);k=P}else k=x(R);return typeof arguments[0]=="string"?k:(arguments[0].text=k,arguments[0])};e.events.push(["preProcessText",Q])}(Nn.API),Nn.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(a){r=a}});var s=150;Object.defineProperty(this,"width",{get:function(){return s},set:function(a){s=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=s+1)}});var l=300;Object.defineProperty(this,"height",{get:function(){return l},set:function(a){l=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=l+1)}});var c=[];Object.defineProperty(this,"childNodes",{get:function(){return c},set:function(a){c=a}});var h={};Object.defineProperty(this,"style",{get:function(){return h},set:function(a){h=a}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,s){var l;if((r=r||"2d")!=="2d")return null;for(l in s)this.pdf.context2d.hasOwnProperty(l)&&(this.pdf.context2d[l]=s[l]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Nn.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,s=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),l.call(this))},l=function(){this.internal.__cell__.lastCell=new c,this.internal.__cell__.pages=1},c=function(){var d=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return d},set:function(k){d=k}});var _=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return _},set:function(k){_=k}});var p=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return p},set:function(k){p=k}});var E=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return E},set:function(k){E=k}});var w=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return w},set:function(k){w=k}});var x=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return x},set:function(k){x=k}});var Q=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return Q},set:function(k){Q=k}}),this};c.prototype.clone=function(){return new c(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},c.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(d){return s.call(this),this.internal.__cell__.headerFunction=typeof d=="function"?d:void 0,this},e.getTextDimensions=function(d,_){s.call(this);var p=(_=_||{}).fontSize||this.getFontSize(),E=_.font||this.getFont(),w=_.scaleFactor||this.internal.scaleFactor,x=0,Q=0,k=0,R=this;if(!Array.isArray(d)&&typeof d!="string"){if(typeof d!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");d=String(d)}var P=_.maxWidth;P>0?typeof d=="string"?d=this.splitTextToSize(d,P):Object.prototype.toString.call(d)==="[object Array]"&&(d=d.reduce(function(G,V){return G.concat(R.splitTextToSize(V,P))},[])):d=Array.isArray(d)?d:[d];for(var O=0;O<d.length;O++)x<(k=this.getStringUnitWidth(d[O],{font:E})*p)&&(x=k);return x!==0&&(Q=d.length),{w:x/=w,h:Math.max((Q*p*this.getLineHeightFactor()-p*(this.getLineHeightFactor()-1))/w,0)}},e.cellAddPage=function(){s.call(this),this.addPage();var d=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new c(d.left,d.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var h=e.cell=function(){var d;d=arguments[0]instanceof c?arguments[0]:new c(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),s.call(this);var _=this.internal.__cell__.lastCell,p=this.internal.__cell__.padding,E=this.internal.__cell__.margins||t,w=this.internal.__cell__.tableHeaderRow,x=this.internal.__cell__.printHeaders;return _.lineNumber!==void 0&&(_.lineNumber===d.lineNumber?(d.x=(_.x||0)+(_.width||0),d.y=_.y||0):_.y+_.height+d.height+E.bottom>this.getPageHeight()?(this.cellAddPage(),d.y=E.top,x&&w&&(this.printHeaderRow(d.lineNumber,!0),d.y+=w[0].height)):d.y=_.y+_.height||d.y),d.text[0]!==void 0&&(this.rect(d.x,d.y,d.width,d.height,r===!0?"FD":void 0),d.align==="right"?this.text(d.text,d.x+d.width-p,d.y+p,{align:"right",baseline:"top"}):d.align==="center"?this.text(d.text,d.x+d.width/2,d.y+p,{align:"center",baseline:"top",maxWidth:d.width-p-p}):this.text(d.text,d.x+p,d.y+p,{align:"left",baseline:"top",maxWidth:d.width-p-p})),this.internal.__cell__.lastCell=d,this};e.table=function(d,_,p,E,w){if(s.call(this),!p)throw new Error("No data for PDF table.");var x,Q,k,R,P=[],O=[],G=[],V={},Z={},te=[],ce=[],he=(w=w||{}).autoSize||!1,Ce=w.printHeaders!==!1,fe=w.css&&w.css["font-size"]!==void 0?16*w.css["font-size"]:w.fontSize||12,ee=w.margins||Object.assign({width:this.getPageWidth()},t),re=typeof w.padding=="number"?w.padding:3,be=w.headerBackgroundColor||"#c8c8c8",me=w.headerTextColor||"#000";if(l.call(this),this.internal.__cell__.printHeaders=Ce,this.internal.__cell__.margins=ee,this.internal.__cell__.table_font_size=fe,this.internal.__cell__.padding=re,this.internal.__cell__.headerBackgroundColor=be,this.internal.__cell__.headerTextColor=me,this.setFontSize(fe),E==null)O=P=Object.keys(p[0]),G=P.map(function(){return"left"});else if(Array.isArray(E)&&qi(E[0])==="object")for(P=E.map(function(ke){return ke.name}),O=E.map(function(ke){return ke.prompt||ke.name||""}),G=E.map(function(ke){return ke.align||"left"}),x=0;x<E.length;x+=1)Z[E[x].name]=E[x].width*(19.049976/25.4);else Array.isArray(E)&&typeof E[0]=="string"&&(O=P=E,G=P.map(function(){return"left"}));if(he||Array.isArray(E)&&typeof E[0]=="string")for(x=0;x<P.length;x+=1){for(V[R=P[x]]=p.map(function(ke){return ke[R]}),this.setFont(void 0,"bold"),te.push(this.getTextDimensions(O[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),Q=V[R],this.setFont(void 0,"normal"),k=0;k<Q.length;k+=1)te.push(this.getTextDimensions(Q[k],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);Z[R]=Math.max.apply(null,te)+re+re,te=[]}if(Ce){var Re={};for(x=0;x<P.length;x+=1)Re[P[x]]={},Re[P[x]].text=O[x],Re[P[x]].align=G[x];var _e=a.call(this,Re,Z);ce=P.map(function(ke){return new c(d,_,Z[ke],_e,Re[ke].text,void 0,Re[ke].align)}),this.setTableHeaderRow(ce),this.printHeaderRow(1,!1)}var He=E.reduce(function(ke,kt){return ke[kt.name]=kt.align,ke},{});for(x=0;x<p.length;x+=1){"rowStart"in w&&w.rowStart instanceof Function&&w.rowStart({row:x,data:p[x]},this);var Le=a.call(this,p[x],Z);for(k=0;k<P.length;k+=1){var Je=p[x][P[k]];"cellStart"in w&&w.cellStart instanceof Function&&w.cellStart({row:x,col:k,data:Je},this),h.call(this,new c(d,_,Z[P[k]],Le,Je,x+2,He[P[k]]))}}return this.internal.__cell__.table_x=d,this.internal.__cell__.table_y=_,this};var a=function(d,_){var p=this.internal.__cell__.padding,E=this.internal.__cell__.table_font_size,w=this.internal.scaleFactor;return Object.keys(d).map(function(x){var Q=d[x];return this.splitTextToSize(Q.hasOwnProperty("text")?Q.text:Q,_[x]-p-p)},this).map(function(x){return this.getLineHeightFactor()*x.length*E/w+p+p},this).reduce(function(x,Q){return Math.max(x,Q)},0)};e.setTableHeaderRow=function(d){s.call(this),this.internal.__cell__.tableHeaderRow=d},e.printHeaderRow=function(d,_){if(s.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var p;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var E=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new c(E[0],E[1],E[2],E[3],void 0,-1)}this.setFont(void 0,"bold");for(var w=[],x=0;x<this.internal.__cell__.tableHeaderRow.length;x+=1){p=this.internal.__cell__.tableHeaderRow[x].clone(),_&&(p.y=this.internal.__cell__.margins.top||0,w.push(p)),p.lineNumber=d;var Q=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),h.call(this,p),this.setTextColor(Q)}w.length>0&&this.setTableHeaderRow(w),this.setFont(void 0,"normal"),r=!1}}(Nn.API);var y_={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},v_=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Cg=g_(v_),__=[100,200,300,400,500,600,700,800,900],iS=g_(__);function Eg(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(c){return y_[c=c||"normal"]?c:"normal"}(e.style),s=function(c){if(!c)return 400;if(typeof c=="number")return c>=100&&c<=900&&c%100==0?c:400;if(/^\d00$/.test(c))return parseInt(c);switch(c){case"bold":return 700;case"normal":default:return 400}}(e.weight),l=function(c){return typeof Cg[c=c||"normal"]=="number"?c:"normal"}(e.stretch);return{family:t,style:r,weight:s,stretch:l,src:e.src||[],ref:e.ref||{name:t,style:[l,r,s].join(" ")}}}function Uy(e,t,r,s){var l;for(l=r;l>=0&&l<t.length;l+=s)if(e[t[l]])return e[t[l]];for(l=r;l>=0&&l<t.length;l-=s)if(e[t[l]])return e[t[l]]}var sS={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Ly={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function ky(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function aS(e,t,r){for(var s=(r=r||{}).defaultFontFamily||"times",l=Object.assign({},sS,r.genericFontFamilies||{}),c=null,h=null,a=0;a<t.length;++a)if(l[(c=Eg(t[a])).family]&&(c.family=l[c.family]),e.hasOwnProperty(c.family)){h=e[c.family];break}if(!(h=h||e[s]))throw new Error("Could not find a font-family for the rule '"+ky(c)+"' and default family '"+s+"'.");if(h=function(d,_){if(_[d])return _[d];var p=Cg[d],E=p<=Cg.normal?-1:1,w=Uy(_,v_,p,E);if(!w)throw new Error("Could not find a matching font-stretch value for "+d);return w}(c.stretch,h),h=function(d,_){if(_[d])return _[d];for(var p=y_[d],E=0;E<p.length;++E)if(_[p[E]])return _[p[E]];throw new Error("Could not find a matching font-style for "+d)}(c.style,h),!(h=function(d,_){if(_[d])return _[d];if(d===400&&_[500])return _[500];if(d===500&&_[400])return _[400];var p=iS[d],E=Uy(_,__,p,d<400?-1:1);if(!E)throw new Error("Could not find a matching font-weight for value "+d);return E}(c.weight,h)))throw new Error("Failed to resolve a font for the rule '"+ky(c)+"'.");return h}function Qy(e){return e.trimLeft()}function oS(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function AS(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var ap,Py,My,Hm=["times"];(function(e){var t,r,s,l,c,h,a,d,_,p=function(ie){return ie=ie||{},this.isStrokeTransparent=ie.isStrokeTransparent||!1,this.strokeOpacity=ie.strokeOpacity||1,this.strokeStyle=ie.strokeStyle||"#000000",this.fillStyle=ie.fillStyle||"#000000",this.isFillTransparent=ie.isFillTransparent||!1,this.fillOpacity=ie.fillOpacity||1,this.font=ie.font||"10px sans-serif",this.textBaseline=ie.textBaseline||"alphabetic",this.textAlign=ie.textAlign||"left",this.lineWidth=ie.lineWidth||1,this.lineJoin=ie.lineJoin||"miter",this.lineCap=ie.lineCap||"butt",this.path=ie.path||[],this.transform=ie.transform!==void 0?ie.transform.clone():new d,this.globalCompositeOperation=ie.globalCompositeOperation||"normal",this.globalAlpha=ie.globalAlpha||1,this.clip_path=ie.clip_path||[],this.currentPoint=ie.currentPoint||new h,this.miterLimit=ie.miterLimit||10,this.lastPoint=ie.lastPoint||new h,this.lineDashOffset=ie.lineDashOffset||0,this.lineDash=ie.lineDash||[],this.margin=ie.margin||[0,0,0,0],this.prevPageLastElemOffset=ie.prevPageLastElemOffset||0,this.ignoreClearRect=typeof ie.ignoreClearRect!="boolean"||ie.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new E(this),t=this.internal.f2,r=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,l=this.internal.getHorizontalCoordinate,c=this.internal.getVerticalCoordinate,h=this.internal.Point,a=this.internal.Rectangle,d=this.internal.Matrix,_=new p}]);var E=function(ie){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Se=ie;Object.defineProperty(this,"pdf",{get:function(){return Se}});var Qe=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Qe},set:function(Pt){Qe=Boolean(Pt)}});var Ke=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Ke},set:function(Pt){Ke=Boolean(Pt)}});var ot=0;Object.defineProperty(this,"posX",{get:function(){return ot},set:function(Pt){isNaN(Pt)||(ot=Pt)}});var dt=0;Object.defineProperty(this,"posY",{get:function(){return dt},set:function(Pt){isNaN(Pt)||(dt=Pt)}}),Object.defineProperty(this,"margin",{get:function(){return _.margin},set:function(Pt){var ze;typeof Pt=="number"?ze=[Pt,Pt,Pt,Pt]:((ze=new Array(4))[0]=Pt[0],ze[1]=Pt.length>=2?Pt[1]:ze[0],ze[2]=Pt.length>=3?Pt[2]:ze[0],ze[3]=Pt.length>=4?Pt[3]:ze[1]),_.margin=ze}});var Bt=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Bt},set:function(Pt){Bt=Pt}});var Ge=0;Object.defineProperty(this,"lastBreak",{get:function(){return Ge},set:function(Pt){Ge=Pt}});var rt=[];Object.defineProperty(this,"pageBreaks",{get:function(){return rt},set:function(Pt){rt=Pt}}),Object.defineProperty(this,"ctx",{get:function(){return _},set:function(Pt){Pt instanceof p&&(_=Pt)}}),Object.defineProperty(this,"path",{get:function(){return _.path},set:function(Pt){_.path=Pt}});var Qt=[];Object.defineProperty(this,"ctxStack",{get:function(){return Qt},set:function(Pt){Qt=Pt}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Pt){var ze;ze=w(Pt),this.ctx.fillStyle=ze.style,this.ctx.isFillTransparent=ze.a===0,this.ctx.fillOpacity=ze.a,this.pdf.setFillColor(ze.r,ze.g,ze.b,{a:ze.a}),this.pdf.setTextColor(ze.r,ze.g,ze.b,{a:ze.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Pt){var ze=w(Pt);this.ctx.strokeStyle=ze.style,this.ctx.isStrokeTransparent=ze.a===0,this.ctx.strokeOpacity=ze.a,ze.a===0?this.pdf.setDrawColor(255,255,255):(ze.a,this.pdf.setDrawColor(ze.r,ze.g,ze.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Pt){["butt","round","square"].indexOf(Pt)!==-1&&(this.ctx.lineCap=Pt,this.pdf.setLineCap(Pt))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Pt){isNaN(Pt)||(this.ctx.lineWidth=Pt,this.pdf.setLineWidth(Pt))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Pt){["bevel","round","miter"].indexOf(Pt)!==-1&&(this.ctx.lineJoin=Pt,this.pdf.setLineJoin(Pt))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Pt){isNaN(Pt)||(this.ctx.miterLimit=Pt,this.pdf.setMiterLimit(Pt))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Pt){this.ctx.textBaseline=Pt}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Pt){["right","end","center","left","start"].indexOf(Pt)!==-1&&(this.ctx.textAlign=Pt)}});var ht=null;function Nt(Pt,ze){if(ht===null){var yr=function(sr){var Ht=[];return Object.keys(sr).forEach(function(pr){sr[pr].forEach(function(Br){var vr=null;switch(Br){case"bold":vr={family:pr,weight:"bold"};break;case"italic":vr={family:pr,style:"italic"};break;case"bolditalic":vr={family:pr,weight:"bold",style:"italic"};break;case"":case"normal":vr={family:pr}}vr!==null&&(vr.ref={name:pr,style:Br},Ht.push(vr))})}),Ht}(Pt.getFontList());ht=function(sr){for(var Ht={},pr=0;pr<sr.length;++pr){var Br=Eg(sr[pr]),vr=Br.family,Gr=Br.stretch,rr=Br.style,xr=Br.weight;Ht[vr]=Ht[vr]||{},Ht[vr][Gr]=Ht[vr][Gr]||{},Ht[vr][Gr][rr]=Ht[vr][Gr][rr]||{},Ht[vr][Gr][rr][xr]=Br}return Ht}(yr.concat(ze))}return ht}var gr=null;Object.defineProperty(this,"fontFaces",{get:function(){return gr},set:function(Pt){ht=null,gr=Pt}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Pt){var ze;if(this.ctx.font=Pt,(ze=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Pt))!==null){var yr=ze[1],sr=(ze[2],ze[3]),Ht=ze[4],pr=(ze[5],ze[6]),Br=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ht)[2];Ht=Math.floor(Br==="px"?parseFloat(Ht)*this.pdf.internal.scaleFactor:Br==="em"?parseFloat(Ht)*this.pdf.getFontSize():parseFloat(Ht)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ht);var vr=function(at){var bt,Ct,jt=[],er=at.trim();if(er==="")return Hm;if(er in Ly)return[Ly[er]];for(;er!=="";){switch(Ct=null,bt=(er=Qy(er)).charAt(0)){case'"':case"'":Ct=oS(er.substring(1),bt);break;default:Ct=AS(er)}if(Ct===null||(jt.push(Ct[0]),(er=Qy(Ct[1]))!==""&&er.charAt(0)!==","))return Hm;er=er.replace(/^,/,"")}return jt}(pr);if(this.fontFaces){var Gr=aS(Nt(this.pdf,this.fontFaces),vr.map(function(at){return{family:at,stretch:"normal",weight:sr,style:yr}}));this.pdf.setFont(Gr.ref.name,Gr.ref.style)}else{var rr="";(sr==="bold"||parseInt(sr,10)>=700||yr==="bold")&&(rr="bold"),yr==="italic"&&(rr+="italic"),rr.length===0&&(rr="normal");for(var xr="",Zr={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},pn=0;pn<vr.length;pn++){if(this.pdf.internal.getFont(vr[pn],rr,{noFallback:!0,disableWarning:!0})!==void 0){xr=vr[pn];break}if(rr==="bolditalic"&&this.pdf.internal.getFont(vr[pn],"bold",{noFallback:!0,disableWarning:!0})!==void 0)xr=vr[pn],rr="bold";else if(this.pdf.internal.getFont(vr[pn],"normal",{noFallback:!0,disableWarning:!0})!==void 0){xr=vr[pn],rr="normal";break}}if(xr===""){for(var vt=0;vt<vr.length;vt++)if(Zr[vr[vt]]){xr=Zr[vr[vt]];break}}xr=xr===""?"Times":xr,this.pdf.setFont(xr,rr)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Pt){this.ctx.globalCompositeOperation=Pt}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Pt){this.ctx.globalAlpha=Pt}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Pt){this.ctx.lineDashOffset=Pt,kt.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Pt){this.ctx.lineDash=Pt,kt.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Pt){this.ctx.ignoreClearRect=Boolean(Pt)}})};E.prototype.setLineDash=function(ie){this.lineDash=ie},E.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},E.prototype.fill=function(){V.call(this,"fill",!1)},E.prototype.stroke=function(){V.call(this,"stroke",!1)},E.prototype.beginPath=function(){this.path=[{type:"begin"}]},E.prototype.moveTo=function(ie,Se){if(isNaN(ie)||isNaN(Se))throw us.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Qe=this.ctx.transform.applyToPoint(new h(ie,Se));this.path.push({type:"mt",x:Qe.x,y:Qe.y}),this.ctx.lastPoint=new h(ie,Se)},E.prototype.closePath=function(){var ie=new h(0,0),Se=0;for(Se=this.path.length-1;Se!==-1;Se--)if(this.path[Se].type==="begin"&&qi(this.path[Se+1])==="object"&&typeof this.path[Se+1].x=="number"){ie=new h(this.path[Se+1].x,this.path[Se+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new h(ie.x,ie.y)},E.prototype.lineTo=function(ie,Se){if(isNaN(ie)||isNaN(Se))throw us.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Qe=this.ctx.transform.applyToPoint(new h(ie,Se));this.path.push({type:"lt",x:Qe.x,y:Qe.y}),this.ctx.lastPoint=new h(Qe.x,Qe.y)},E.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),V.call(this,null,!0)},E.prototype.quadraticCurveTo=function(ie,Se,Qe,Ke){if(isNaN(Qe)||isNaN(Ke)||isNaN(ie)||isNaN(Se))throw us.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ot=this.ctx.transform.applyToPoint(new h(Qe,Ke)),dt=this.ctx.transform.applyToPoint(new h(ie,Se));this.path.push({type:"qct",x1:dt.x,y1:dt.y,x:ot.x,y:ot.y}),this.ctx.lastPoint=new h(ot.x,ot.y)},E.prototype.bezierCurveTo=function(ie,Se,Qe,Ke,ot,dt){if(isNaN(ot)||isNaN(dt)||isNaN(ie)||isNaN(Se)||isNaN(Qe)||isNaN(Ke))throw us.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Bt=this.ctx.transform.applyToPoint(new h(ot,dt)),Ge=this.ctx.transform.applyToPoint(new h(ie,Se)),rt=this.ctx.transform.applyToPoint(new h(Qe,Ke));this.path.push({type:"bct",x1:Ge.x,y1:Ge.y,x2:rt.x,y2:rt.y,x:Bt.x,y:Bt.y}),this.ctx.lastPoint=new h(Bt.x,Bt.y)},E.prototype.arc=function(ie,Se,Qe,Ke,ot,dt){if(isNaN(ie)||isNaN(Se)||isNaN(Qe)||isNaN(Ke)||isNaN(ot))throw us.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(dt=Boolean(dt),!this.ctx.transform.isIdentity){var Bt=this.ctx.transform.applyToPoint(new h(ie,Se));ie=Bt.x,Se=Bt.y;var Ge=this.ctx.transform.applyToPoint(new h(0,Qe)),rt=this.ctx.transform.applyToPoint(new h(0,0));Qe=Math.sqrt(Math.pow(Ge.x-rt.x,2)+Math.pow(Ge.y-rt.y,2))}Math.abs(ot-Ke)>=2*Math.PI&&(Ke=0,ot=2*Math.PI),this.path.push({type:"arc",x:ie,y:Se,radius:Qe,startAngle:Ke,endAngle:ot,counterclockwise:dt})},E.prototype.arcTo=function(ie,Se,Qe,Ke,ot){throw new Error("arcTo not implemented.")},E.prototype.rect=function(ie,Se,Qe,Ke){if(isNaN(ie)||isNaN(Se)||isNaN(Qe)||isNaN(Ke))throw us.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(ie,Se),this.lineTo(ie+Qe,Se),this.lineTo(ie+Qe,Se+Ke),this.lineTo(ie,Se+Ke),this.lineTo(ie,Se),this.lineTo(ie+Qe,Se),this.lineTo(ie,Se)},E.prototype.fillRect=function(ie,Se,Qe,Ke){if(isNaN(ie)||isNaN(Se)||isNaN(Qe)||isNaN(Ke))throw us.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!x.call(this)){var ot={};this.lineCap!=="butt"&&(ot.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ot.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(ie,Se,Qe,Ke),this.fill(),ot.hasOwnProperty("lineCap")&&(this.lineCap=ot.lineCap),ot.hasOwnProperty("lineJoin")&&(this.lineJoin=ot.lineJoin)}},E.prototype.strokeRect=function(ie,Se,Qe,Ke){if(isNaN(ie)||isNaN(Se)||isNaN(Qe)||isNaN(Ke))throw us.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");Q.call(this)||(this.beginPath(),this.rect(ie,Se,Qe,Ke),this.stroke())},E.prototype.clearRect=function(ie,Se,Qe,Ke){if(isNaN(ie)||isNaN(Se)||isNaN(Qe)||isNaN(Ke))throw us.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(ie,Se,Qe,Ke))},E.prototype.save=function(ie){ie=typeof ie!="boolean"||ie;for(var Se=this.pdf.internal.getCurrentPageInfo().pageNumber,Qe=0;Qe<this.pdf.internal.getNumberOfPages();Qe++)this.pdf.setPage(Qe+1),this.pdf.internal.out("q");if(this.pdf.setPage(Se),ie){this.ctx.fontSize=this.pdf.internal.getFontSize();var Ke=new p(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Ke}},E.prototype.restore=function(ie){ie=typeof ie!="boolean"||ie;for(var Se=this.pdf.internal.getCurrentPageInfo().pageNumber,Qe=0;Qe<this.pdf.internal.getNumberOfPages();Qe++)this.pdf.setPage(Qe+1),this.pdf.internal.out("Q");this.pdf.setPage(Se),ie&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},E.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var w=function(ie){var Se,Qe,Ke,ot;if(ie.isCanvasGradient===!0&&(ie=ie.getColor()),!ie)return{r:0,g:0,b:0,a:0,style:ie};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(ie))Se=0,Qe=0,Ke=0,ot=0;else{var dt=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(ie);if(dt!==null)Se=parseInt(dt[1]),Qe=parseInt(dt[2]),Ke=parseInt(dt[3]),ot=1;else if((dt=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(ie))!==null)Se=parseInt(dt[1]),Qe=parseInt(dt[2]),Ke=parseInt(dt[3]),ot=parseFloat(dt[4]);else{if(ot=1,typeof ie=="string"&&ie.charAt(0)!=="#"){var Bt=new u_(ie);ie=Bt.ok?Bt.toHex():"#000000"}ie.length===4?(Se=ie.substring(1,2),Se+=Se,Qe=ie.substring(2,3),Qe+=Qe,Ke=ie.substring(3,4),Ke+=Ke):(Se=ie.substring(1,3),Qe=ie.substring(3,5),Ke=ie.substring(5,7)),Se=parseInt(Se,16),Qe=parseInt(Qe,16),Ke=parseInt(Ke,16)}}return{r:Se,g:Qe,b:Ke,a:ot,style:ie}},x=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},Q=function(){return Boolean(this.ctx.isStrokeTransparent||this.globalAlpha==0)};E.prototype.fillText=function(ie,Se,Qe,Ke){if(isNaN(Se)||isNaN(Qe)||typeof ie!="string")throw us.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Ke=isNaN(Ke)?void 0:Ke,!x.call(this)){var ot=Le(this.ctx.transform.rotation),dt=this.ctx.transform.scaleX;re.call(this,{text:ie,x:Se,y:Qe,scale:dt,angle:ot,align:this.textAlign,maxWidth:Ke})}},E.prototype.strokeText=function(ie,Se,Qe,Ke){if(isNaN(Se)||isNaN(Qe)||typeof ie!="string")throw us.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!Q.call(this)){Ke=isNaN(Ke)?void 0:Ke;var ot=Le(this.ctx.transform.rotation),dt=this.ctx.transform.scaleX;re.call(this,{text:ie,x:Se,y:Qe,scale:dt,renderingMode:"stroke",angle:ot,align:this.textAlign,maxWidth:Ke})}},E.prototype.measureText=function(ie){if(typeof ie!="string")throw us.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Se=this.pdf,Qe=this.pdf.internal.scaleFactor,Ke=Se.internal.getFontSize(),ot=Se.getStringUnitWidth(ie)*Ke/Se.internal.scaleFactor,dt=function(Bt){var Ge=(Bt=Bt||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Ge}}),this};return new dt({width:ot*=Math.round(96*Qe/72*1e4)/1e4})},E.prototype.scale=function(ie,Se){if(isNaN(ie)||isNaN(Se))throw us.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Qe=new d(ie,0,0,Se,0,0);this.ctx.transform=this.ctx.transform.multiply(Qe)},E.prototype.rotate=function(ie){if(isNaN(ie))throw us.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Se=new d(Math.cos(ie),Math.sin(ie),-Math.sin(ie),Math.cos(ie),0,0);this.ctx.transform=this.ctx.transform.multiply(Se)},E.prototype.translate=function(ie,Se){if(isNaN(ie)||isNaN(Se))throw us.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Qe=new d(1,0,0,1,ie,Se);this.ctx.transform=this.ctx.transform.multiply(Qe)},E.prototype.transform=function(ie,Se,Qe,Ke,ot,dt){if(isNaN(ie)||isNaN(Se)||isNaN(Qe)||isNaN(Ke)||isNaN(ot)||isNaN(dt))throw us.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Bt=new d(ie,Se,Qe,Ke,ot,dt);this.ctx.transform=this.ctx.transform.multiply(Bt)},E.prototype.setTransform=function(ie,Se,Qe,Ke,ot,dt){ie=isNaN(ie)?1:ie,Se=isNaN(Se)?0:Se,Qe=isNaN(Qe)?0:Qe,Ke=isNaN(Ke)?1:Ke,ot=isNaN(ot)?0:ot,dt=isNaN(dt)?0:dt,this.ctx.transform=new d(ie,Se,Qe,Ke,ot,dt)};var k=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};E.prototype.drawImage=function(ie,Se,Qe,Ke,ot,dt,Bt,Ge,rt){var Qt=this.pdf.getImageProperties(ie),ht=1,Nt=1,gr=1,Pt=1;Ke!==void 0&&Ge!==void 0&&(gr=Ge/Ke,Pt=rt/ot,ht=Qt.width/Ke*Ge/Ke,Nt=Qt.height/ot*rt/ot),dt===void 0&&(dt=Se,Bt=Qe,Se=0,Qe=0),Ke!==void 0&&Ge===void 0&&(Ge=Ke,rt=ot),Ke===void 0&&Ge===void 0&&(Ge=Qt.width,rt=Qt.height);for(var ze,yr=this.ctx.transform.decompose(),sr=Le(yr.rotate.shx),Ht=new d,pr=(Ht=(Ht=(Ht=Ht.multiply(yr.translate)).multiply(yr.skew)).multiply(yr.scale)).applyToRectangle(new a(dt-Se*gr,Bt-Qe*Pt,Ke*ht,ot*Nt)),Br=R.call(this,pr),vr=[],Gr=0;Gr<Br.length;Gr+=1)vr.indexOf(Br[Gr])===-1&&vr.push(Br[Gr]);if(G(vr),this.autoPaging)for(var rr=vr[0],xr=vr[vr.length-1],Zr=rr;Zr<xr+1;Zr++){this.pdf.setPage(Zr);var pn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],vt=Zr===1?this.posY+this.margin[0]:this.margin[0],at=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],bt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ct=Zr===1?0:at+(Zr-2)*bt;if(this.ctx.clip_path.length!==0){var jt=this.path;ze=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=O(ze,this.posX+this.margin[3],-Ct+vt+this.ctx.prevPageLastElemOffset),Z.call(this,"fill",!0),this.path=jt}var er=JSON.parse(JSON.stringify(pr));er=O([er],this.posX+this.margin[3],-Ct+vt+this.ctx.prevPageLastElemOffset)[0];var Vr=(Zr>rr||Zr<xr)&&k.call(this);Vr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],pn,bt,null).clip().discardPath()),this.pdf.addImage(ie,"JPEG",er.x,er.y,er.w,er.h,null,null,sr),Vr&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(ie,"JPEG",pr.x,pr.y,pr.w,pr.h,null,null,sr)};var R=function(ie,Se,Qe){var Ke=[];Se=Se||this.pdf.internal.pageSize.width,Qe=Qe||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ot=this.posY+this.ctx.prevPageLastElemOffset;switch(ie.type){default:case"mt":case"lt":Ke.push(Math.floor((ie.y+ot)/Qe)+1);break;case"arc":Ke.push(Math.floor((ie.y+ot-ie.radius)/Qe)+1),Ke.push(Math.floor((ie.y+ot+ie.radius)/Qe)+1);break;case"qct":var dt=Je(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ie.x1,ie.y1,ie.x,ie.y);Ke.push(Math.floor((dt.y+ot)/Qe)+1),Ke.push(Math.floor((dt.y+dt.h+ot)/Qe)+1);break;case"bct":var Bt=ke(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ie.x1,ie.y1,ie.x2,ie.y2,ie.x,ie.y);Ke.push(Math.floor((Bt.y+ot)/Qe)+1),Ke.push(Math.floor((Bt.y+Bt.h+ot)/Qe)+1);break;case"rect":Ke.push(Math.floor((ie.y+ot)/Qe)+1),Ke.push(Math.floor((ie.y+ie.h+ot)/Qe)+1)}for(var Ge=0;Ge<Ke.length;Ge+=1)for(;this.pdf.internal.getNumberOfPages()<Ke[Ge];)P.call(this);return Ke},P=function(){var ie=this.fillStyle,Se=this.strokeStyle,Qe=this.font,Ke=this.lineCap,ot=this.lineWidth,dt=this.lineJoin;this.pdf.addPage(),this.fillStyle=ie,this.strokeStyle=Se,this.font=Qe,this.lineCap=Ke,this.lineWidth=ot,this.lineJoin=dt},O=function(ie,Se,Qe){for(var Ke=0;Ke<ie.length;Ke++)switch(ie[Ke].type){case"bct":ie[Ke].x2+=Se,ie[Ke].y2+=Qe;case"qct":ie[Ke].x1+=Se,ie[Ke].y1+=Qe;case"mt":case"lt":case"arc":default:ie[Ke].x+=Se,ie[Ke].y+=Qe}return ie},G=function(ie){return ie.sort(function(Se,Qe){return Se-Qe})},V=function(ie,Se){for(var Qe,Ke,ot=this.fillStyle,dt=this.strokeStyle,Bt=this.lineCap,Ge=this.lineWidth,rt=Math.abs(Ge*this.ctx.transform.scaleX),Qt=this.lineJoin,ht=JSON.parse(JSON.stringify(this.path)),Nt=JSON.parse(JSON.stringify(this.path)),gr=[],Pt=0;Pt<Nt.length;Pt++)if(Nt[Pt].x!==void 0)for(var ze=R.call(this,Nt[Pt]),yr=0;yr<ze.length;yr+=1)gr.indexOf(ze[yr])===-1&&gr.push(ze[yr]);for(var sr=0;sr<gr.length;sr++)for(;this.pdf.internal.getNumberOfPages()<gr[sr];)P.call(this);if(G(gr),this.autoPaging)for(var Ht=gr[0],pr=gr[gr.length-1],Br=Ht;Br<pr+1;Br++){this.pdf.setPage(Br),this.fillStyle=ot,this.strokeStyle=dt,this.lineCap=Bt,this.lineWidth=rt,this.lineJoin=Qt;var vr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Gr=Br===1?this.posY+this.margin[0]:this.margin[0],rr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],xr=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Zr=Br===1?0:rr+(Br-2)*xr;if(this.ctx.clip_path.length!==0){var pn=this.path;Qe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=O(Qe,this.posX+this.margin[3],-Zr+Gr+this.ctx.prevPageLastElemOffset),Z.call(this,ie,!0),this.path=pn}if(Ke=JSON.parse(JSON.stringify(ht)),this.path=O(Ke,this.posX+this.margin[3],-Zr+Gr+this.ctx.prevPageLastElemOffset),Se===!1||Br===0){var vt=(Br>Ht||Br<pr)&&k.call(this);vt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],vr,xr,null).clip().discardPath()),Z.call(this,ie,Se),vt&&this.pdf.restoreGraphicsState()}this.lineWidth=Ge}else this.lineWidth=rt,Z.call(this,ie,Se),this.lineWidth=Ge;this.path=ht},Z=function(ie,Se){if((ie!=="stroke"||Se||!Q.call(this))&&(ie==="stroke"||Se||!x.call(this))){for(var Qe,Ke,ot=[],dt=this.path,Bt=0;Bt<dt.length;Bt++){var Ge=dt[Bt];switch(Ge.type){case"begin":ot.push({begin:!0});break;case"close":ot.push({close:!0});break;case"mt":ot.push({start:Ge,deltas:[],abs:[]});break;case"lt":var rt=ot.length;if(dt[Bt-1]&&!isNaN(dt[Bt-1].x)&&(Qe=[Ge.x-dt[Bt-1].x,Ge.y-dt[Bt-1].y],rt>0)){for(;rt>=0;rt--)if(ot[rt-1].close!==!0&&ot[rt-1].begin!==!0){ot[rt-1].deltas.push(Qe),ot[rt-1].abs.push(Ge);break}}break;case"bct":Qe=[Ge.x1-dt[Bt-1].x,Ge.y1-dt[Bt-1].y,Ge.x2-dt[Bt-1].x,Ge.y2-dt[Bt-1].y,Ge.x-dt[Bt-1].x,Ge.y-dt[Bt-1].y],ot[ot.length-1].deltas.push(Qe);break;case"qct":var Qt=dt[Bt-1].x+2/3*(Ge.x1-dt[Bt-1].x),ht=dt[Bt-1].y+2/3*(Ge.y1-dt[Bt-1].y),Nt=Ge.x+2/3*(Ge.x1-Ge.x),gr=Ge.y+2/3*(Ge.y1-Ge.y),Pt=Ge.x,ze=Ge.y;Qe=[Qt-dt[Bt-1].x,ht-dt[Bt-1].y,Nt-dt[Bt-1].x,gr-dt[Bt-1].y,Pt-dt[Bt-1].x,ze-dt[Bt-1].y],ot[ot.length-1].deltas.push(Qe);break;case"arc":ot.push({deltas:[],abs:[],arc:!0}),Array.isArray(ot[ot.length-1].abs)&&ot[ot.length-1].abs.push(Ge)}}Ke=Se?null:ie==="stroke"?"stroke":"fill";for(var yr=!1,sr=0;sr<ot.length;sr++)if(ot[sr].arc)for(var Ht=ot[sr].abs,pr=0;pr<Ht.length;pr++){var Br=Ht[pr];Br.type==="arc"?he.call(this,Br.x,Br.y,Br.radius,Br.startAngle,Br.endAngle,Br.counterclockwise,void 0,Se,!yr):be.call(this,Br.x,Br.y),yr=!0}else if(ot[sr].close===!0)this.pdf.internal.out("h"),yr=!1;else if(ot[sr].begin!==!0){var vr=ot[sr].start.x,Gr=ot[sr].start.y;me.call(this,ot[sr].deltas,vr,Gr),yr=!0}Ke&&Ce.call(this,Ke),Se&&fe.call(this)}},te=function(ie){var Se=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Qe=Se*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return ie-Qe;case"top":return ie+Se-Qe;case"hanging":return ie+Se-2*Qe;case"middle":return ie+Se/2-Qe;case"ideographic":return ie;case"alphabetic":default:return ie}},ce=function(ie){return ie+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};E.prototype.createLinearGradient=function(){var ie=function(){};return ie.colorStops=[],ie.addColorStop=function(Se,Qe){this.colorStops.push([Se,Qe])},ie.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},ie.isCanvasGradient=!0,ie},E.prototype.createPattern=function(){return this.createLinearGradient()},E.prototype.createRadialGradient=function(){return this.createLinearGradient()};var he=function(ie,Se,Qe,Ke,ot,dt,Bt,Ge,rt){for(var Qt=_e.call(this,Qe,Ke,ot,dt),ht=0;ht<Qt.length;ht++){var Nt=Qt[ht];ht===0&&(rt?ee.call(this,Nt.x1+ie,Nt.y1+Se):be.call(this,Nt.x1+ie,Nt.y1+Se)),Re.call(this,ie,Se,Nt.x2,Nt.y2,Nt.x3,Nt.y3,Nt.x4,Nt.y4)}Ge?fe.call(this):Ce.call(this,Bt)},Ce=function(ie){switch(ie){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},fe=function(){this.pdf.clip(),this.pdf.discardPath()},ee=function(ie,Se){this.pdf.internal.out(r(ie)+" "+s(Se)+" m")},re=function(ie){var Se;switch(ie.align){case"right":case"end":Se="right";break;case"center":Se="center";break;case"left":case"start":default:Se="left"}var Qe=this.pdf.getTextDimensions(ie.text),Ke=te.call(this,ie.y),ot=ce.call(this,Ke)-Qe.h,dt=this.ctx.transform.applyToPoint(new h(ie.x,Ke)),Bt=this.ctx.transform.decompose(),Ge=new d;Ge=(Ge=(Ge=Ge.multiply(Bt.translate)).multiply(Bt.skew)).multiply(Bt.scale);for(var rt,Qt,ht,Nt=this.ctx.transform.applyToRectangle(new a(ie.x,Ke,Qe.w,Qe.h)),gr=Ge.applyToRectangle(new a(ie.x,ot,Qe.w,Qe.h)),Pt=R.call(this,gr),ze=[],yr=0;yr<Pt.length;yr+=1)ze.indexOf(Pt[yr])===-1&&ze.push(Pt[yr]);if(G(ze),this.autoPaging)for(var sr=ze[0],Ht=ze[ze.length-1],pr=sr;pr<Ht+1;pr++){this.pdf.setPage(pr);var Br=pr===1?this.posY+this.margin[0]:this.margin[0],vr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Gr=this.pdf.internal.pageSize.height-this.margin[2],rr=Gr-this.margin[0],xr=this.pdf.internal.pageSize.width-this.margin[1],Zr=xr-this.margin[3],pn=pr===1?0:vr+(pr-2)*rr;if(this.ctx.clip_path.length!==0){var vt=this.path;rt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=O(rt,this.posX+this.margin[3],-1*pn+Br),Z.call(this,"fill",!0),this.path=vt}var at=O([JSON.parse(JSON.stringify(gr))],this.posX+this.margin[3],-pn+Br+this.ctx.prevPageLastElemOffset)[0];ie.scale>=.01&&(Qt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Qt*ie.scale),ht=this.lineWidth,this.lineWidth=ht*ie.scale);var bt=this.autoPaging!=="text";if(bt||at.y+at.h<=Gr){if(bt||at.y>=Br&&at.x<=xr){var Ct=bt?ie.text:this.pdf.splitTextToSize(ie.text,ie.maxWidth||xr-at.x)[0],jt=O([JSON.parse(JSON.stringify(Nt))],this.posX+this.margin[3],-pn+Br+this.ctx.prevPageLastElemOffset)[0],er=bt&&(pr>sr||pr<Ht)&&k.call(this);er&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Zr,rr,null).clip().discardPath()),this.pdf.text(Ct,jt.x,jt.y,{angle:ie.angle,align:Se,renderingMode:ie.renderingMode}),er&&this.pdf.restoreGraphicsState()}}else at.y<Gr&&(this.ctx.prevPageLastElemOffset+=Gr-at.y);ie.scale>=.01&&(this.pdf.setFontSize(Qt),this.lineWidth=ht)}else ie.scale>=.01&&(Qt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Qt*ie.scale),ht=this.lineWidth,this.lineWidth=ht*ie.scale),this.pdf.text(ie.text,dt.x+this.posX,dt.y+this.posY,{angle:ie.angle,align:Se,renderingMode:ie.renderingMode,maxWidth:ie.maxWidth}),ie.scale>=.01&&(this.pdf.setFontSize(Qt),this.lineWidth=ht)},be=function(ie,Se,Qe,Ke){Qe=Qe||0,Ke=Ke||0,this.pdf.internal.out(r(ie+Qe)+" "+s(Se+Ke)+" l")},me=function(ie,Se,Qe){return this.pdf.lines(ie,Se,Qe,null,null)},Re=function(ie,Se,Qe,Ke,ot,dt,Bt,Ge){this.pdf.internal.out([t(l(Qe+ie)),t(c(Ke+Se)),t(l(ot+ie)),t(c(dt+Se)),t(l(Bt+ie)),t(c(Ge+Se)),"c"].join(" "))},_e=function(ie,Se,Qe,Ke){for(var ot=2*Math.PI,dt=Math.PI/2;Se>Qe;)Se-=ot;var Bt=Math.abs(Qe-Se);Bt<ot&&Ke&&(Bt=ot-Bt);for(var Ge=[],rt=Ke?-1:1,Qt=Se;Bt>1e-5;){var ht=Qt+rt*Math.min(Bt,dt);Ge.push(He.call(this,ie,Qt,ht)),Bt-=Math.abs(ht-Qt),Qt=ht}return Ge},He=function(ie,Se,Qe){var Ke=(Qe-Se)/2,ot=ie*Math.cos(Ke),dt=ie*Math.sin(Ke),Bt=ot,Ge=-dt,rt=Bt*Bt+Ge*Ge,Qt=rt+Bt*ot+Ge*dt,ht=4/3*(Math.sqrt(2*rt*Qt)-Qt)/(Bt*dt-Ge*ot),Nt=Bt-ht*Ge,gr=Ge+ht*Bt,Pt=Nt,ze=-gr,yr=Ke+Se,sr=Math.cos(yr),Ht=Math.sin(yr);return{x1:ie*Math.cos(Se),y1:ie*Math.sin(Se),x2:Nt*sr-gr*Ht,y2:Nt*Ht+gr*sr,x3:Pt*sr-ze*Ht,y3:Pt*Ht+ze*sr,x4:ie*Math.cos(Qe),y4:ie*Math.sin(Qe)}},Le=function(ie){return 180*ie/Math.PI},Je=function(ie,Se,Qe,Ke,ot,dt){var Bt=ie+.5*(Qe-ie),Ge=Se+.5*(Ke-Se),rt=ot+.5*(Qe-ot),Qt=dt+.5*(Ke-dt),ht=Math.min(ie,ot,Bt,rt),Nt=Math.max(ie,ot,Bt,rt),gr=Math.min(Se,dt,Ge,Qt),Pt=Math.max(Se,dt,Ge,Qt);return new a(ht,gr,Nt-ht,Pt-gr)},ke=function(ie,Se,Qe,Ke,ot,dt,Bt,Ge){var rt,Qt,ht,Nt,gr,Pt,ze,yr,sr,Ht,pr,Br,vr,Gr,rr=Qe-ie,xr=Ke-Se,Zr=ot-Qe,pn=dt-Ke,vt=Bt-ot,at=Ge-dt;for(Qt=0;Qt<41;Qt++)sr=(ze=(ht=ie+(rt=Qt/40)*rr)+rt*((gr=Qe+rt*Zr)-ht))+rt*(gr+rt*(ot+rt*vt-gr)-ze),Ht=(yr=(Nt=Se+rt*xr)+rt*((Pt=Ke+rt*pn)-Nt))+rt*(Pt+rt*(dt+rt*at-Pt)-yr),Qt==0?(pr=sr,Br=Ht,vr=sr,Gr=Ht):(pr=Math.min(pr,sr),Br=Math.min(Br,Ht),vr=Math.max(vr,sr),Gr=Math.max(Gr,Ht));return new a(Math.round(pr),Math.round(Br),Math.round(vr-pr),Math.round(Gr-Br))},kt=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var ie,Se,Qe=(ie=this.ctx.lineDash,Se=this.ctx.lineDashOffset,JSON.stringify({lineDash:ie,lineDashOffset:Se}));this.prevLineDash!==Qe&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Qe)}}})(Nn.API),function(e){var t=function(c){var h,a,d,_,p,E,w,x,Q,k;for(a=[],d=0,_=(c+=h="\0\0\0\0".slice(c.length%4||4)).length;_>d;d+=4)(p=(c.charCodeAt(d)<<24)+(c.charCodeAt(d+1)<<16)+(c.charCodeAt(d+2)<<8)+c.charCodeAt(d+3))!==0?(E=(p=((p=((p=((p=(p-(k=p%85))/85)-(Q=p%85))/85)-(x=p%85))/85)-(w=p%85))/85)%85,a.push(E+33,w+33,x+33,Q+33,k+33)):a.push(122);return function(R,P){for(var O=P;O>0;O--)R.pop()}(a,h.length),String.fromCharCode.apply(String,a)+"~>"},r=function(c){var h,a,d,_,p,E=String,w="length",x=255,Q="charCodeAt",k="slice",R="replace";for(c[k](-2),c=c[k](0,-2)[R](/\s/g,"")[R]("z","!!!!!"),d=[],_=0,p=(c+=h="uuuuu"[k](c[w]%5||5))[w];p>_;_+=5)a=52200625*(c[Q](_)-33)+614125*(c[Q](_+1)-33)+7225*(c[Q](_+2)-33)+85*(c[Q](_+3)-33)+(c[Q](_+4)-33),d.push(x&a>>24,x&a>>16,x&a>>8,x&a);return function(P,O){for(var G=O;G>0;G--)P.pop()}(d,h[w]),E.fromCharCode.apply(E,d)},s=function(c){var h=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((c=c.replace(/\s/g,"")).indexOf(">")!==-1&&(c=c.substr(0,c.indexOf(">"))),c.length%2&&(c+="0"),h.test(c)===!1)return"";for(var a="",d=0;d<c.length;d+=2)a+=String.fromCharCode("0x"+(c[d]+c[d+1]));return a},l=function(c){for(var h=new Uint8Array(c.length),a=c.length;a--;)h[a]=c.charCodeAt(a);return c=(h=_g(h)).reduce(function(d,_){return d+String.fromCharCode(_)},"")};e.processDataByFilters=function(c,h){var a=0,d=c||"",_=[];for(typeof(h=h||[])=="string"&&(h=[h]),a=0;a<h.length;a+=1)switch(h[a]){case"ASCII85Decode":case"/ASCII85Decode":d=r(d),_.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":d=t(d),_.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":d=s(d),_.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":d=d.split("").map(function(p){return("0"+p.charCodeAt().toString(16)).slice(-2)}).join("")+">",_.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":d=l(d),_.push("/FlateDecode");break;default:throw new Error('The filter: "'+h[a]+'" is not implemented')}return{data:d,reverseChain:_.reverse().join(" ")}}}(Nn.API),function(e){e.loadFile=function(t,r,s){return function(l,c,h){c=c!==!1,h=typeof h=="function"?h:function(){};var a=void 0;try{a=function(d,_,p){var E=new XMLHttpRequest,w=0,x=function(Q){var k=Q.length,R=[],P=String.fromCharCode;for(w=0;w<k;w+=1)R.push(P(255&Q.charCodeAt(w)));return R.join("")};if(E.open("GET",d,!_),E.overrideMimeType("text/plain; charset=x-user-defined"),_===!1&&(E.onload=function(){E.status===200?p(x(this.responseText)):p(void 0)}),E.send(null),_&&E.status===200)return x(E.responseText)}(l,c,h)}catch{}return a}(t,r,s)},e.loadImageFile=e.loadFile}(Nn.API),function(e){function t(){return(Hn.html2canvas?Promise.resolve(Hn.html2canvas):pg(()=>import("./html2canvas-b7b16907.js").then(h=>h.h),[])).catch(function(h){return Promise.reject(new Error("Could not load html2canvas: "+h))}).then(function(h){return h.default?h.default:h})}function r(){return(Hn.DOMPurify?Promise.resolve(Hn.DOMPurify):pg(()=>import("./purify.es-1ffe5759.js"),[])).catch(function(h){return Promise.reject(new Error("Could not load dompurify: "+h))}).then(function(h){return h.default?h.default:h})}var s=function(h){var a=qi(h);return a==="undefined"?"undefined":a==="string"||h instanceof String?"string":a==="number"||h instanceof Number?"number":a==="function"||h instanceof Function?"function":h&&h.constructor===Array?"array":h&&h.nodeType===1?"element":a==="object"?"object":"unknown"},l=function(h,a){var d=document.createElement(h);for(var _ in a.className&&(d.className=a.className),a.innerHTML&&a.dompurify&&(d.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)d.style[_]=a.style[_];return d},c=function h(a){var d=Object.assign(h.convert(Promise.resolve()),JSON.parse(JSON.stringify(h.template))),_=h.convert(Promise.resolve(),d);return _=(_=_.setProgress(1,h,1,[h])).set(a)};(c.prototype=Object.create(Promise.prototype)).constructor=c,c.convert=function(h,a){return h.__proto__=a||c.prototype,h},c.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},c.prototype.from=function(h,a){return this.then(function(){switch(a=a||function(d){switch(s(d)){case"string":return"string";case"element":return d.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(h)){case"string":return this.then(r).then(function(d){return this.set({src:l("div",{innerHTML:h,dompurify:d})})});case"element":return this.set({src:h});case"canvas":return this.set({canvas:h});case"img":return this.set({img:h});default:return this.error("Unknown source type.")}})},c.prototype.to=function(h){switch(h){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},c.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var h={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function d(_,p){for(var E=_.nodeType===3?document.createTextNode(_.nodeValue):_.cloneNode(!1),w=_.firstChild;w;w=w.nextSibling)p!==!0&&w.nodeType===1&&w.nodeName==="SCRIPT"||E.appendChild(d(w,p));return _.nodeType===1&&(_.nodeName==="CANVAS"?(E.width=_.width,E.height=_.height,E.getContext("2d").drawImage(_,0,0)):_.nodeName!=="TEXTAREA"&&_.nodeName!=="SELECT"||(E.value=_.value),E.addEventListener("load",function(){E.scrollTop=_.scrollTop,E.scrollLeft=_.scrollLeft},!0)),E}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(h.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=l("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=l("div",{className:"html2pdf__container",style:h}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(l("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},c.prototype.toCanvas=function(){var h=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(h).then(t).then(function(a){var d=Object.assign({},this.opt.html2canvas);return delete d.onrendered,a(this.prop.container,d)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},c.prototype.toContext2d=function(){var h=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(h).then(t).then(function(a){var d=this.opt.jsPDF,_=this.opt.fontFaces,p=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,E=Object.assign({async:!0,allowTaint:!0,scale:p,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete E.onrendered,d.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,d.context2d.posX=this.opt.x,d.context2d.posY=this.opt.y,d.context2d.margin=this.opt.margin,d.context2d.fontFaces=_,_)for(var w=0;w<_.length;++w){var x=_[w],Q=x.src.find(function(k){return k.format==="truetype"});Q&&d.addFont(Q.url,x.ref.name,x.ref.style)}return E.windowHeight=E.windowHeight||0,E.windowHeight=E.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):E.windowHeight,d.context2d.save(!0),a(this.prop.container,E)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},c.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var h=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=h})},c.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},c.prototype.output=function(h,a,d){return(d=d||"pdf").toLowerCase()==="img"||d.toLowerCase()==="image"?this.outputImg(h,a):this.outputPdf(h,a)},c.prototype.outputPdf=function(h,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(h,a)})},c.prototype.outputImg=function(h){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(h){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+h+'" is not supported.'}})},c.prototype.save=function(h){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(h?{filename:h}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},c.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},c.prototype.set=function(h){if(s(h)!=="object")return this;var a=Object.keys(h||{}).map(function(d){if(d in c.template.prop)return function(){this.prop[d]=h[d]};switch(d){case"margin":return this.setMargin.bind(this,h.margin);case"jsPDF":return function(){return this.opt.jsPDF=h.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,h.pageSize);default:return function(){this.opt[d]=h[d]}}},this);return this.then(function(){return this.thenList(a)})},c.prototype.get=function(h,a){return this.then(function(){var d=h in c.template.prop?this.prop[h]:this.opt[h];return a?a(d):d})},c.prototype.setMargin=function(h){return this.then(function(){switch(s(h)){case"number":h=[h,h,h,h];case"array":if(h.length===2&&(h=[h[0],h[1],h[0],h[1]]),h.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=h}).then(this.setPageSize)},c.prototype.setPageSize=function(h){function a(d,_){return Math.floor(d*_/72*96)}return this.then(function(){(h=h||Nn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(h.inner={width:h.width-this.opt.margin[1]-this.opt.margin[3],height:h.height-this.opt.margin[0]-this.opt.margin[2]},h.inner.px={width:a(h.inner.width,h.k),height:a(h.inner.height,h.k)},h.inner.ratio=h.inner.height/h.inner.width),this.prop.pageSize=h})},c.prototype.setProgress=function(h,a,d,_){return h!=null&&(this.progress.val=h),a!=null&&(this.progress.state=a),d!=null&&(this.progress.n=d),_!=null&&(this.progress.stack=_),this.progress.ratio=this.progress.val/this.progress.state,this},c.prototype.updateProgress=function(h,a,d,_){return this.setProgress(h?this.progress.val+h:null,a||null,d?this.progress.n+d:null,_?this.progress.stack.concat(_):null)},c.prototype.then=function(h,a){var d=this;return this.thenCore(h,a,function(_,p){return d.updateProgress(null,null,1,[_]),Promise.prototype.then.call(this,function(E){return d.updateProgress(null,_),E}).then(_,p).then(function(E){return d.updateProgress(1),E})})},c.prototype.thenCore=function(h,a,d){d=d||Promise.prototype.then,h&&(h=h.bind(this)),a&&(a=a.bind(this));var _=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:c.convert(Object.assign({},this),Promise.prototype),p=d.call(_,h,a);return c.convert(p,this.__proto__)},c.prototype.thenExternal=function(h,a){return Promise.prototype.then.call(this,h,a)},c.prototype.thenList=function(h){var a=this;return h.forEach(function(d){a=a.thenCore(d)}),a},c.prototype.catch=function(h){h&&(h=h.bind(this));var a=Promise.prototype.catch.call(this,h);return c.convert(a,this)},c.prototype.catchExternal=function(h){return Promise.prototype.catch.call(this,h)},c.prototype.error=function(h){return this.then(function(){throw new Error(h)})},c.prototype.using=c.prototype.set,c.prototype.saveAs=c.prototype.save,c.prototype.export=c.prototype.output,c.prototype.run=c.prototype.then,Nn.getPageSize=function(h,a,d){if(qi(h)==="object"){var _=h;h=_.orientation,a=_.unit||a,d=_.format||d}a=a||"mm",d=d||"a4",h=(""+(h||"P")).toLowerCase();var p,E=(""+d).toLowerCase(),w={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":p=1;break;case"mm":p=72/25.4;break;case"cm":p=72/2.54;break;case"in":p=72;break;case"px":p=.75;break;case"pc":case"em":p=12;break;case"ex":p=6;break;default:throw"Invalid unit: "+a}var x,Q=0,k=0;if(w.hasOwnProperty(E))Q=w[E][1]/p,k=w[E][0]/p;else try{Q=d[1],k=d[0]}catch{throw new Error("Invalid format: "+d)}if(h==="p"||h==="portrait")h="p",k>Q&&(x=k,k=Q,Q=x);else{if(h!=="l"&&h!=="landscape")throw"Invalid orientation: "+h;h="l",Q>k&&(x=k,k=Q,Q=x)}return{width:k,height:Q,unit:a,k:p,orientation:h}},e.html=function(h,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(Eg):null;var d=new c(a);return a.worker?d:d.from(h).doCallback()}}(Nn.API),Nn.API.addJS=function(e){return My=e,this.internal.events.subscribe("postPutResources",function(){ap=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(ap+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Py=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+My+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){ap!==void 0&&Py!==void 0&&this.internal.out("/Names <</JavaScript "+ap+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,s=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var l=r.outline.render().split(/\r\n/),c=0;c<l.length;c++){var h=l[c],a=s.exec(h);if(a!=null){var d=a[1];r.internal.newObjectDeferredBegin(d,!1)}r.internal.write(h)}if(this.outline.createNamedDestinations){var _=this.internal.pages.length,p=[];for(c=0;c<_;c++){var E=r.internal.newObject();p.push(E);var w=r.internal.getPageInfo(c+1);r.internal.write("<< /D["+w.objId+" 0 R /XYZ null null null]>> endobj")}var x=r.internal.newObject();for(r.internal.write("<< /Names [ "),c=0;c<p.length;c++)r.internal.write("(page_"+(c+1)+")"+p[c]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+x+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(s,l,c){var h={title:l,options:c,children:[]};return s==null&&(s=this.root),s.children.push(h),h},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(s){s.id=r.internal.newObjectDeferred();for(var l=0;l<s.children.length;l++)this.genIds_r(s.children[l])},r.outline.renderRoot=function(s){this.objStart(s),this.line("/Type /Outlines"),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1]))),this.line("/Count "+this.count_r({count:0},s)),this.objEnd()},r.outline.renderItems=function(s){for(var l=this.ctx.pdf.internal.getVerticalCoordinateString,c=0;c<s.children.length;c++){var h=s.children[c];this.objStart(h),this.line("/Title "+this.makeString(h.title)),this.line("/Parent "+this.makeRef(s)),c>0&&this.line("/Prev "+this.makeRef(s.children[c-1])),c<s.children.length-1&&this.line("/Next "+this.makeRef(s.children[c+1])),h.children.length>0&&(this.line("/First "+this.makeRef(h.children[0])),this.line("/Last "+this.makeRef(h.children[h.children.length-1])));var a=this.count=this.count_r({count:0},h);if(a>0&&this.line("/Count "+a),h.options&&h.options.pageNumber){var d=r.internal.getPageInfo(h.options.pageNumber);this.line("/Dest ["+d.objId+" 0 R /XYZ 0 "+l(0)+" 0]")}this.objEnd()}for(var _=0;_<s.children.length;_++)this.renderItems(s.children[_])},r.outline.line=function(s){this.ctx.val+=s+`\r
`},r.outline.makeRef=function(s){return s.id+" 0 R"},r.outline.makeString=function(s){return"("+r.internal.pdfEscape(s)+")"},r.outline.objStart=function(s){this.ctx.val+=`\r
`+s.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(s,l){for(var c=0;c<l.children.length;c++)s.count++,this.count_r(s,l.children[c]);return s.count}}])}(Nn.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,s,l,c,h,a){var d,_=this.decode.DCT_DECODE,p=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=h||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(d=function(E){for(var w,x=256*E.charCodeAt(4)+E.charCodeAt(5),Q=E.length,k={width:0,height:0,numcomponents:1},R=4;R<Q;R+=2){if(R+=x,t.indexOf(E.charCodeAt(R+1))!==-1){w=256*E.charCodeAt(R+5)+E.charCodeAt(R+6),k={width:256*E.charCodeAt(R+7)+E.charCodeAt(R+8),height:w,numcomponents:E.charCodeAt(R+9)};break}x=256*E.charCodeAt(R+2)+E.charCodeAt(R+3)}return k}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}p={data:r,width:d.width,height:d.height,colorSpace:a,bitsPerComponent:8,filter:_,index:s,alias:l}}return p}}(Nn.API);var Dh,op,Dy,Ny,jy,lS=function(){var e,t,r;function s(c){var h,a,d,_,p,E,w,x,Q,k,R,P,O,G;for(this.data=c,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},E=null;;){switch(h=this.readUInt32(),Q=function(){var V,Z;for(Z=[],V=0;V<4;++V)Z.push(String.fromCharCode(this.data[this.pos++]));return Z}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(h);break;case"fcTL":E&&this.animation.frames.push(E),this.pos+=4,E={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},p=this.readUInt16(),_=this.readUInt16()||100,E.delay=1e3*p/_,E.disposeOp=this.data[this.pos++],E.blendOp=this.data[this.pos++],E.data=[];break;case"IDAT":case"fdAT":for(Q==="fdAT"&&(this.pos+=4,h-=4),c=(E!=null?E.data:void 0)||this.imgData,P=0;0<=h?P<h:P>h;0<=h?++P:--P)c.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(d=this.palette.length/3,this.transparency.indexed=this.read(h),this.transparency.indexed.length>d)throw new Error("More transparent colors than palette size");if((k=d-this.transparency.indexed.length)>0)for(O=0;0<=k?O<k:O>k;0<=k?++O:--O)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(h)[0];break;case 2:this.transparency.rgb=this.read(h)}break;case"tEXt":w=(R=this.read(h)).indexOf(0),x=String.fromCharCode.apply(String,R.slice(0,w)),this.text[x]=String.fromCharCode.apply(String,R.slice(w+1));break;case"IEND":return E&&this.animation.frames.push(E),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=(G=this.colorType)===4||G===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=h}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}s.prototype.read=function(c){var h,a;for(a=[],h=0;0<=c?h<c:h>c;0<=c?++h:--h)a.push(this.data[this.pos++]);return a},s.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},s.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},s.prototype.decodePixels=function(c){var h=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*h),d=0,_=this;if(c==null&&(c=this.imgData),c.length===0)return new Uint8Array(0);function p(E,w,x,Q){var k,R,P,O,G,V,Z,te,ce,he,Ce,fe,ee,re,be,me,Re,_e,He,Le,Je,ke=Math.ceil((_.width-E)/x),kt=Math.ceil((_.height-w)/Q),ie=_.width==ke&&_.height==kt;for(re=h*ke,fe=ie?a:new Uint8Array(re*kt),V=c.length,ee=0,R=0;ee<kt&&d<V;){switch(c[d++]){case 0:for(O=Re=0;Re<re;O=Re+=1)fe[R++]=c[d++];break;case 1:for(O=_e=0;_e<re;O=_e+=1)k=c[d++],G=O<h?0:fe[R-h],fe[R++]=(k+G)%256;break;case 2:for(O=He=0;He<re;O=He+=1)k=c[d++],P=(O-O%h)/h,be=ee&&fe[(ee-1)*re+P*h+O%h],fe[R++]=(be+k)%256;break;case 3:for(O=Le=0;Le<re;O=Le+=1)k=c[d++],P=(O-O%h)/h,G=O<h?0:fe[R-h],be=ee&&fe[(ee-1)*re+P*h+O%h],fe[R++]=(k+Math.floor((G+be)/2))%256;break;case 4:for(O=Je=0;Je<re;O=Je+=1)k=c[d++],P=(O-O%h)/h,G=O<h?0:fe[R-h],ee===0?be=me=0:(be=fe[(ee-1)*re+P*h+O%h],me=P&&fe[(ee-1)*re+(P-1)*h+O%h]),Z=G+be-me,te=Math.abs(Z-G),he=Math.abs(Z-be),Ce=Math.abs(Z-me),ce=te<=he&&te<=Ce?G:he<=Ce?be:me,fe[R++]=(k+ce)%256;break;default:throw new Error("Invalid filter algorithm: "+c[d-1])}if(!ie){var Se=((w+ee*Q)*_.width+E)*h,Qe=ee*re;for(O=0;O<ke;O+=1){for(var Ke=0;Ke<h;Ke+=1)a[Se++]=fe[Qe++];Se+=(x-1)*h}}ee++}}return c=HF(c),_.interlaceMethod==1?(p(0,0,8,8),p(4,0,8,8),p(0,4,4,8),p(2,0,4,4),p(0,2,2,4),p(1,0,2,2),p(0,1,1,2)):p(0,0,1,1),a},s.prototype.decodePalette=function(){var c,h,a,d,_,p,E,w,x;for(a=this.palette,p=this.transparency.indexed||[],_=new Uint8Array((p.length||0)+a.length),d=0,c=0,h=E=0,w=a.length;E<w;h=E+=3)_[d++]=a[h],_[d++]=a[h+1],_[d++]=a[h+2],_[d++]=(x=p[c++])!=null?x:255;return _},s.prototype.copyToImageData=function(c,h){var a,d,_,p,E,w,x,Q,k,R,P;if(d=this.colors,k=null,a=this.hasAlphaChannel,this.palette.length&&(k=(P=this._decodedPalette)!=null?P:this._decodedPalette=this.decodePalette(),d=4,a=!0),Q=(_=c.data||c).length,E=k||h,p=w=0,d===1)for(;p<Q;)x=k?4*h[p/4]:w,R=E[x++],_[p++]=R,_[p++]=R,_[p++]=R,_[p++]=a?E[x++]:255,w=x;else for(;p<Q;)x=k?4*h[p/4]:w,_[p++]=E[x++],_[p++]=E[x++],_[p++]=E[x++],_[p++]=a?E[x++]:255,w=x},s.prototype.decode=function(){var c;return c=new Uint8Array(this.width*this.height*4),this.copyToImageData(c,this.decodePixels()),c};var l=function(){if(Object.prototype.toString.call(Hn)==="[object Window]"){try{t=Hn.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return l(),e=function(c){var h;if(l()===!0)return r.width=c.width,r.height=c.height,r.clearRect(0,0,c.width,c.height),r.putImageData(c,0,0),(h=new Image).src=t.toDataURL(),h;throw new Error("This method requires a Browser with Canvas-capability.")},s.prototype.decodeFrames=function(c){var h,a,d,_,p,E,w,x;if(this.animation){for(x=[],a=p=0,E=(w=this.animation.frames).length;p<E;a=++p)h=w[a],d=c.createImageData(h.width,h.height),_=this.decodePixels(new Uint8Array(h.data)),this.copyToImageData(d,_),h.imageData=d,x.push(h.image=e(d));return x}},s.prototype.renderFrame=function(c,h){var a,d,_;return a=(d=this.animation.frames)[h],_=d[h-1],h===0&&c.clearRect(0,0,this.width,this.height),(_!=null?_.disposeOp:void 0)===1?c.clearRect(_.xOffset,_.yOffset,_.width,_.height):(_!=null?_.disposeOp:void 0)===2&&c.putImageData(_.imageData,_.xOffset,_.yOffset),a.blendOp===0&&c.clearRect(a.xOffset,a.yOffset,a.width,a.height),c.drawImage(a.image,a.xOffset,a.yOffset)},s.prototype.animate=function(c){var h,a,d,_,p,E,w=this;return a=0,E=this.animation,_=E.numFrames,d=E.frames,p=E.numPlays,(h=function(){var x,Q;if(x=a++%_,Q=d[x],w.renderFrame(c,x),_>1&&a/_<p)return w.animation._timeout=setTimeout(h,Q.delay)})()},s.prototype.stopAnimation=function(){var c;return clearTimeout((c=this.animation)!=null?c._timeout:void 0)},s.prototype.render=function(c){var h,a;return c._png&&c._png.stopAnimation(),c._png=this,c.width=this.width,c.height=this.height,h=c.getContext("2d"),this.animation?(this.decodeFrames(h),this.animate(h)):(a=h.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),h.putImageData(a,0,0))},s}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function cS(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,s=e[t++]|e[t++]<<8,l=e[t++],c=l>>7,h=1<<(7&l)+1;e[t++],e[t++];var a=null,d=null;c&&(a=t,d=h,t+=3*h);var _=!0,p=[],E=0,w=null,x=0,Q=null;for(this.width=r,this.height=s;_&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,Q=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((ee=e[t++])>=0))throw Error("Invalid block size");if(ee===0)break;t+=ee}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var k=e[t++];E=e[t++]|e[t++]<<8,w=e[t++],!(1&k)&&(w=null),x=k>>2&7,t++;break;case 254:for(;;){if(!((ee=e[t++])>=0))throw Error("Invalid block size");if(ee===0)break;t+=ee}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var R=e[t++]|e[t++]<<8,P=e[t++]|e[t++]<<8,O=e[t++]|e[t++]<<8,G=e[t++]|e[t++]<<8,V=e[t++],Z=V>>6&1,te=1<<(7&V)+1,ce=a,he=d,Ce=!1;V>>7&&(Ce=!0,ce=t,he=te,t+=3*te);var fe=t;for(t++;;){var ee;if(!((ee=e[t++])>=0))throw Error("Invalid block size");if(ee===0)break;t+=ee}p.push({x:R,y:P,width:O,height:G,has_local_palette:Ce,palette_offset:ce,palette_size:he,data_offset:fe,data_length:t-fe,transparent_index:w,interlaced:!!Z,delay:E,disposal:x});break;case 59:_=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return p.length},this.loopCount=function(){return Q},this.frameInfo=function(re){if(re<0||re>=p.length)throw new Error("Frame index out of range.");return p[re]},this.decodeAndBlitFrameBGRA=function(re,be){var me=this.frameInfo(re),Re=me.width*me.height,_e=new Uint8Array(Re);Ry(e,me.data_offset,_e,Re);var He=me.palette_offset,Le=me.transparent_index;Le===null&&(Le=256);var Je=me.width,ke=r-Je,kt=Je,ie=4*(me.y*r+me.x),Se=4*((me.y+me.height)*r+me.x),Qe=ie,Ke=4*ke;me.interlaced===!0&&(Ke+=4*r*7);for(var ot=8,dt=0,Bt=_e.length;dt<Bt;++dt){var Ge=_e[dt];if(kt===0&&(kt=Je,(Qe+=Ke)>=Se&&(Ke=4*ke+4*r*(ot-1),Qe=ie+(Je+ke)*(ot<<1),ot>>=1)),Ge===Le)Qe+=4;else{var rt=e[He+3*Ge],Qt=e[He+3*Ge+1],ht=e[He+3*Ge+2];be[Qe++]=ht,be[Qe++]=Qt,be[Qe++]=rt,be[Qe++]=255}--kt}},this.decodeAndBlitFrameRGBA=function(re,be){var me=this.frameInfo(re),Re=me.width*me.height,_e=new Uint8Array(Re);Ry(e,me.data_offset,_e,Re);var He=me.palette_offset,Le=me.transparent_index;Le===null&&(Le=256);var Je=me.width,ke=r-Je,kt=Je,ie=4*(me.y*r+me.x),Se=4*((me.y+me.height)*r+me.x),Qe=ie,Ke=4*ke;me.interlaced===!0&&(Ke+=4*r*7);for(var ot=8,dt=0,Bt=_e.length;dt<Bt;++dt){var Ge=_e[dt];if(kt===0&&(kt=Je,(Qe+=Ke)>=Se&&(Ke=4*ke+4*r*(ot-1),Qe=ie+(Je+ke)*(ot<<1),ot>>=1)),Ge===Le)Qe+=4;else{var rt=e[He+3*Ge],Qt=e[He+3*Ge+1],ht=e[He+3*Ge+2];be[Qe++]=rt,be[Qe++]=Qt,be[Qe++]=ht,be[Qe++]=255}--kt}}}function Ry(e,t,r,s){for(var l=e[t++],c=1<<l,h=c+1,a=h+1,d=l+1,_=(1<<d)-1,p=0,E=0,w=0,x=e[t++],Q=new Int32Array(4096),k=null;;){for(;p<16&&x!==0;)E|=e[t++]<<p,p+=8,x===1?x=e[t++]:--x;if(p<d)break;var R=E&_;if(E>>=d,p-=d,R!==c){if(R===h)break;for(var P=R<a?R:k,O=0,G=P;G>c;)G=Q[G]>>8,++O;var V=G;if(w+O+(P!==R?1:0)>s)return void us.log("Warning, gif stream longer than expected.");r[w++]=V;var Z=w+=O;for(P!==R&&(r[w++]=V),G=P;O--;)G=Q[G],r[--Z]=255&G,G>>=8;k!==null&&a<4096&&(Q[a++]=k<<8|V,a>=_+1&&d<12&&(++d,_=_<<1|1)),k=R}else a=h+1,_=(1<<(d=l+1))-1,k=null}return w!==s&&us.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function zm(e){var t,r,s,l,c,h=Math.floor,a=new Array(64),d=new Array(64),_=new Array(64),p=new Array(64),E=new Array(65535),w=new Array(65535),x=new Array(64),Q=new Array(64),k=[],R=0,P=7,O=new Array(64),G=new Array(64),V=new Array(64),Z=new Array(256),te=new Array(2048),ce=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],he=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Ce=[0,1,2,3,4,5,6,7,8,9,10,11],fe=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],ee=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],re=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],be=[0,1,2,3,4,5,6,7,8,9,10,11],me=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Re=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function _e(ie,Se){for(var Qe=0,Ke=0,ot=new Array,dt=1;dt<=16;dt++){for(var Bt=1;Bt<=ie[dt];Bt++)ot[Se[Ke]]=[],ot[Se[Ke]][0]=Qe,ot[Se[Ke]][1]=dt,Ke++,Qe++;Qe*=2}return ot}function He(ie){for(var Se=ie[0],Qe=ie[1]-1;Qe>=0;)Se&1<<Qe&&(R|=1<<P),Qe--,--P<0&&(R==255?(Le(255),Le(0)):Le(R),P=7,R=0)}function Le(ie){k.push(ie)}function Je(ie){Le(ie>>8&255),Le(255&ie)}function ke(ie,Se,Qe,Ke,ot){for(var dt,Bt=ot[0],Ge=ot[240],rt=function(Ht,pr){var Br,vr,Gr,rr,xr,Zr,pn,vt,at,bt,Ct=0;for(at=0;at<8;++at){Br=Ht[Ct],vr=Ht[Ct+1],Gr=Ht[Ct+2],rr=Ht[Ct+3],xr=Ht[Ct+4],Zr=Ht[Ct+5],pn=Ht[Ct+6];var jt=Br+(vt=Ht[Ct+7]),er=Br-vt,Vr=vr+pn,Sr=vr-pn,un=Gr+Zr,lr=Gr-Zr,Er=rr+xr,An=rr-xr,wn=jt+Er,_i=jt-Er,br=Vr+un,Cr=Vr-un;Ht[Ct]=wn+br,Ht[Ct+4]=wn-br;var cr=.707106781*(Cr+_i);Ht[Ct+2]=_i+cr,Ht[Ct+6]=_i-cr;var Kr=.382683433*((wn=An+lr)-(Cr=Sr+er)),hn=.5411961*wn+Kr,xn=1.306562965*Cr+Kr,Sn=.707106781*(br=lr+Sr),ji=er+Sn,tn=er-Sn;Ht[Ct+5]=tn+hn,Ht[Ct+3]=tn-hn,Ht[Ct+1]=ji+xn,Ht[Ct+7]=ji-xn,Ct+=8}for(Ct=0,at=0;at<8;++at){Br=Ht[Ct],vr=Ht[Ct+8],Gr=Ht[Ct+16],rr=Ht[Ct+24],xr=Ht[Ct+32],Zr=Ht[Ct+40],pn=Ht[Ct+48];var Wi=Br+(vt=Ht[Ct+56]),hs=Br-vt,Ln=vr+pn,nn=vr-pn,Te=Gr+Zr,Y=Gr-Zr,Ae=rr+xr,Ee=rr-xr,Ue=Wi+Ae,Xe=Wi-Ae,lt=Ln+Te,$e=Ln-Te;Ht[Ct]=Ue+lt,Ht[Ct+32]=Ue-lt;var qe=.707106781*($e+Xe);Ht[Ct+16]=Xe+qe,Ht[Ct+48]=Xe-qe;var ut=.382683433*((Ue=Ee+Y)-($e=nn+hs)),Ot=.5411961*Ue+ut,nr=1.306562965*$e+ut,zt=.707106781*(lt=Y+nn),jr=hs+zt,Hr=hs-zt;Ht[Ct+40]=Hr+Ot,Ht[Ct+24]=Hr-Ot,Ht[Ct+8]=jr+nr,Ht[Ct+56]=jr-nr,Ct++}for(at=0;at<64;++at)bt=Ht[at]*pr[at],x[at]=bt>0?bt+.5|0:bt-.5|0;return x}(ie,Se),Qt=0;Qt<64;++Qt)Q[ce[Qt]]=rt[Qt];var ht=Q[0]-Qe;Qe=Q[0],ht==0?He(Ke[0]):(He(Ke[w[dt=32767+ht]]),He(E[dt]));for(var Nt=63;Nt>0&&Q[Nt]==0;)Nt--;if(Nt==0)return He(Bt),Qe;for(var gr,Pt=1;Pt<=Nt;){for(var ze=Pt;Q[Pt]==0&&Pt<=Nt;)++Pt;var yr=Pt-ze;if(yr>=16){gr=yr>>4;for(var sr=1;sr<=gr;++sr)He(Ge);yr&=15}dt=32767+Q[Pt],He(ot[(yr<<4)+w[dt]]),He(E[dt]),Pt++}return Nt!=63&&He(Bt),Qe}function kt(ie){ie=Math.min(Math.max(ie,1),100),c!=ie&&(function(Se){for(var Qe=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Ke=0;Ke<64;Ke++){var ot=h((Qe[Ke]*Se+50)/100);ot=Math.min(Math.max(ot,1),255),a[ce[Ke]]=ot}for(var dt=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Bt=0;Bt<64;Bt++){var Ge=h((dt[Bt]*Se+50)/100);Ge=Math.min(Math.max(Ge,1),255),d[ce[Bt]]=Ge}for(var rt=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Qt=0,ht=0;ht<8;ht++)for(var Nt=0;Nt<8;Nt++)_[Qt]=1/(a[ce[Qt]]*rt[ht]*rt[Nt]*8),p[Qt]=1/(d[ce[Qt]]*rt[ht]*rt[Nt]*8),Qt++}(ie<50?Math.floor(5e3/ie):Math.floor(200-2*ie)),c=ie)}this.encode=function(ie,Se){Se&&kt(Se),k=new Array,R=0,P=7,Je(65496),Je(65504),Je(16),Le(74),Le(70),Le(73),Le(70),Le(0),Le(1),Le(1),Le(0),Je(1),Je(1),Le(0),Le(0),function(){Je(65499),Je(132),Le(0);for(var vr=0;vr<64;vr++)Le(a[vr]);Le(1);for(var Gr=0;Gr<64;Gr++)Le(d[Gr])}(),function(vr,Gr){Je(65472),Je(17),Le(8),Je(Gr),Je(vr),Le(3),Le(1),Le(17),Le(0),Le(2),Le(17),Le(1),Le(3),Le(17),Le(1)}(ie.width,ie.height),function(){Je(65476),Je(418),Le(0);for(var vr=0;vr<16;vr++)Le(he[vr+1]);for(var Gr=0;Gr<=11;Gr++)Le(Ce[Gr]);Le(16);for(var rr=0;rr<16;rr++)Le(fe[rr+1]);for(var xr=0;xr<=161;xr++)Le(ee[xr]);Le(1);for(var Zr=0;Zr<16;Zr++)Le(re[Zr+1]);for(var pn=0;pn<=11;pn++)Le(be[pn]);Le(17);for(var vt=0;vt<16;vt++)Le(me[vt+1]);for(var at=0;at<=161;at++)Le(Re[at])}(),Je(65498),Je(12),Le(3),Le(1),Le(0),Le(2),Le(17),Le(3),Le(17),Le(0),Le(63),Le(0);var Qe=0,Ke=0,ot=0;R=0,P=7,this.encode.displayName="_encode_";for(var dt,Bt,Ge,rt,Qt,ht,Nt,gr,Pt,ze=ie.data,yr=ie.width,sr=ie.height,Ht=4*yr,pr=0;pr<sr;){for(dt=0;dt<Ht;){for(Qt=Ht*pr+dt,Nt=-1,gr=0,Pt=0;Pt<64;Pt++)ht=Qt+(gr=Pt>>3)*Ht+(Nt=4*(7&Pt)),pr+gr>=sr&&(ht-=Ht*(pr+1+gr-sr)),dt+Nt>=Ht&&(ht-=dt+Nt-Ht+4),Bt=ze[ht++],Ge=ze[ht++],rt=ze[ht++],O[Pt]=(te[Bt]+te[Ge+256>>0]+te[rt+512>>0]>>16)-128,G[Pt]=(te[Bt+768>>0]+te[Ge+1024>>0]+te[rt+1280>>0]>>16)-128,V[Pt]=(te[Bt+1280>>0]+te[Ge+1536>>0]+te[rt+1792>>0]>>16)-128;Qe=ke(O,_,Qe,t,s),Ke=ke(G,p,Ke,r,l),ot=ke(V,p,ot,r,l),dt+=32}pr+=8}if(P>=0){var Br=[];Br[1]=P+1,Br[0]=(1<<P+1)-1,He(Br)}return Je(65497),new Uint8Array(k)},e=e||50,function(){for(var ie=String.fromCharCode,Se=0;Se<256;Se++)Z[Se]=ie(Se)}(),t=_e(he,Ce),r=_e(re,be),s=_e(fe,ee),l=_e(me,Re),function(){for(var ie=1,Se=2,Qe=1;Qe<=15;Qe++){for(var Ke=ie;Ke<Se;Ke++)w[32767+Ke]=Qe,E[32767+Ke]=[],E[32767+Ke][1]=Qe,E[32767+Ke][0]=Ke;for(var ot=-(Se-1);ot<=-ie;ot++)w[32767+ot]=Qe,E[32767+ot]=[],E[32767+ot][1]=Qe,E[32767+ot][0]=Se-1+ot;ie<<=1,Se<<=1}}(),function(){for(var ie=0;ie<256;ie++)te[ie]=19595*ie,te[ie+256>>0]=38470*ie,te[ie+512>>0]=7471*ie+32768,te[ie+768>>0]=-11059*ie,te[ie+1024>>0]=-21709*ie,te[ie+1280>>0]=32768*ie+8421375,te[ie+1536>>0]=-27439*ie,te[ie+1792>>0]=-5329*ie}(),kt(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Rl(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Oy(e){function t(he){if(!he)throw Error("assert :P")}function r(he,Ce,fe){for(var ee=0;4>ee;ee++)if(he[Ce+ee]!=fe.charCodeAt(ee))return!0;return!1}function s(he,Ce,fe,ee,re){for(var be=0;be<re;be++)he[Ce+be]=fe[ee+be]}function l(he,Ce,fe,ee){for(var re=0;re<ee;re++)he[Ce+re]=fe}function c(he){return new Int32Array(he)}function h(he,Ce){for(var fe=[],ee=0;ee<he;ee++)fe.push(new Ce);return fe}function a(he,Ce){var fe=[];return function ee(re,be,me){for(var Re=me[be],_e=0;_e<Re&&(re.push(me.length>be+1?[]:new Ce),!(me.length<be+1));_e++)ee(re[_e],be+1,me)}(fe,0,he),fe}var d=function(){var he=this;function Ce(b,L){for(var j=1<<L-1>>>0;b&j;)j>>>=1;return j?(b&j-1)+j:b}function fe(b,L,j,W,ae){t(!(W%j));do b[L+(W-=j)]=ae;while(0<W)}function ee(b,L,j,W,ae){if(t(2328>=ae),512>=ae)var de=c(512);else if((de=c(ae))==null)return 0;return function(ge,xe,Ie,Ne,ft,It){var Ft,pt,Ar=xe,Vt=1<<Ie,Ye=c(16),At=c(16);for(t(ft!=0),t(Ne!=null),t(ge!=null),t(0<Ie),pt=0;pt<ft;++pt){if(15<Ne[pt])return 0;++Ye[Ne[pt]]}if(Ye[0]==ft)return 0;for(At[1]=0,Ft=1;15>Ft;++Ft){if(Ye[Ft]>1<<Ft)return 0;At[Ft+1]=At[Ft]+Ye[Ft]}for(pt=0;pt<ft;++pt)Ft=Ne[pt],0<Ne[pt]&&(It[At[Ft]++]=pt);if(At[15]==1)return(Ne=new re).g=0,Ne.value=It[0],fe(ge,Ar,1,Vt,Ne),Vt;var Yt,ir=-1,Wt=Vt-1,Dr=0,kr=1,Fn=1,Nr=1<<Ie;for(pt=0,Ft=1,ft=2;Ft<=Ie;++Ft,ft<<=1){if(kr+=Fn<<=1,0>(Fn-=Ye[Ft]))return 0;for(;0<Ye[Ft];--Ye[Ft])(Ne=new re).g=Ft,Ne.value=It[pt++],fe(ge,Ar+Dr,ft,Nr,Ne),Dr=Ce(Dr,Ft)}for(Ft=Ie+1,ft=2;15>=Ft;++Ft,ft<<=1){if(kr+=Fn<<=1,0>(Fn-=Ye[Ft]))return 0;for(;0<Ye[Ft];--Ye[Ft]){if(Ne=new re,(Dr&Wt)!=ir){for(Ar+=Nr,Yt=1<<(ir=Ft)-Ie;15>ir&&!(0>=(Yt-=Ye[ir]));)++ir,Yt<<=1;Vt+=Nr=1<<(Yt=ir-Ie),ge[xe+(ir=Dr&Wt)].g=Yt+Ie,ge[xe+ir].value=Ar-xe-ir}Ne.g=Ft-Ie,Ne.value=It[pt++],fe(ge,Ar+(Dr>>Ie),ft,Nr,Ne),Dr=Ce(Dr,Ft)}}return kr!=2*At[15]-1?0:Vt}(b,L,j,W,ae,de)}function re(){this.value=this.g=0}function be(){this.value=this.g=0}function me(){this.G=h(5,re),this.H=c(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=h(is,be)}function Re(b,L,j,W){t(b!=null),t(L!=null),t(2147483648>W),b.Ca=254,b.I=0,b.b=-8,b.Ka=0,b.oa=L,b.pa=j,b.Jd=L,b.Yc=j+W,b.Zc=4<=W?j+W-4+1:j,dt(b)}function _e(b,L){for(var j=0;0<L--;)j|=Ge(b,128)<<L;return j}function He(b,L){var j=_e(b,L);return Bt(b)?-j:j}function Le(b,L,j,W){var ae,de=0;for(t(b!=null),t(L!=null),t(4294967288>W),b.Sb=W,b.Ra=0,b.u=0,b.h=0,4<W&&(W=4),ae=0;ae<W;++ae)de+=L[j+ae]<<8*ae;b.Ra=de,b.bb=W,b.oa=L,b.pa=j}function Je(b){for(;8<=b.u&&b.bb<b.Sb;)b.Ra>>>=8,b.Ra+=b.oa[b.pa+b.bb]<<so-8>>>0,++b.bb,b.u-=8;Qe(b)&&(b.h=1,b.u=0)}function ke(b,L){if(t(0<=L),!b.h&&L<=cA){var j=Se(b)&hi[L];return b.u+=L,Je(b),j}return b.h=1,b.u=0}function kt(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function ie(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Se(b){return b.Ra>>>(b.u&so-1)>>>0}function Qe(b){return t(b.bb<=b.Sb),b.h||b.bb==b.Sb&&b.u>so}function Ke(b,L){b.u=L,b.h=Qe(b)}function ot(b){b.u>=uA&&(t(b.u>=uA),Je(b))}function dt(b){t(b!=null&&b.oa!=null),b.pa<b.Zc?(b.I=(b.oa[b.pa++]|b.I<<8)>>>0,b.b+=8):(t(b!=null&&b.oa!=null),b.pa<b.Yc?(b.b+=8,b.I=b.oa[b.pa++]|b.I<<8):b.Ka?b.b=0:(b.I<<=8,b.b+=8,b.Ka=1))}function Bt(b){return _e(b,1)}function Ge(b,L){var j=b.Ca;0>b.b&&dt(b);var W=b.b,ae=j*L>>>8,de=(b.I>>>W>ae)+0;for(de?(j-=ae,b.I-=ae+1<<W>>>0):j=ae+1,W=j,ae=0;256<=W;)ae+=8,W>>=8;return W=7^ae+Fs[W],b.b-=W,b.Ca=(j<<W)-1,de}function rt(b,L,j){b[L+0]=j>>24&255,b[L+1]=j>>16&255,b[L+2]=j>>8&255,b[L+3]=j>>0&255}function Qt(b,L){return b[L+0]<<0|b[L+1]<<8}function ht(b,L){return Qt(b,L)|b[L+2]<<16}function Nt(b,L){return Qt(b,L)|Qt(b,L+2)<<16}function gr(b,L){var j=1<<L;return t(b!=null),t(0<L),b.X=c(j),b.X==null?0:(b.Mb=32-L,b.Xa=L,1)}function Pt(b,L){t(b!=null),t(L!=null),t(b.Xa==L.Xa),s(L.X,0,b.X,0,1<<L.Xa)}function ze(){this.X=[],this.Xa=this.Mb=0}function yr(b,L,j,W){t(j!=null),t(W!=null);var ae=j[0],de=W[0];return ae==0&&(ae=(b*de+L/2)/L),de==0&&(de=(L*ae+b/2)/b),0>=ae||0>=de?0:(j[0]=ae,W[0]=de,1)}function sr(b,L){return b+(1<<L)-1>>>L}function Ht(b,L){return((4278255360&b)+(4278255360&L)>>>0&4278255360)+((16711935&b)+(16711935&L)>>>0&16711935)>>>0}function pr(b,L){he[L]=function(j,W,ae,de,ge,xe,Ie){var Ne;for(Ne=0;Ne<ge;++Ne){var ft=he[b](xe[Ie+Ne-1],ae,de+Ne);xe[Ie+Ne]=Ht(j[W+Ne],ft)}}}function Br(){this.ud=this.hd=this.jd=0}function vr(b,L){return((4278124286&(b^L))>>>1)+(b&L)>>>0}function Gr(b){return 0<=b&&256>b?b:0>b?0:255<b?255:void 0}function rr(b,L){return Gr(b+(b-L+.5>>1))}function xr(b,L,j){return Math.abs(L-j)-Math.abs(b-j)}function Zr(b,L,j,W,ae,de,ge){for(W=de[ge-1],j=0;j<ae;++j)de[ge+j]=W=Ht(b[L+j],W)}function pn(b,L,j,W,ae){var de;for(de=0;de<j;++de){var ge=b[L+de],xe=ge>>8&255,Ie=16711935&(Ie=(Ie=16711935&ge)+((xe<<16)+xe));W[ae+de]=(4278255360&ge)+Ie>>>0}}function vt(b,L){L.jd=b>>0&255,L.hd=b>>8&255,L.ud=b>>16&255}function at(b,L,j,W,ae,de){var ge;for(ge=0;ge<W;++ge){var xe=L[j+ge],Ie=xe>>>8,Ne=xe,ft=255&(ft=(ft=xe>>>16)+((b.jd<<24>>24)*(Ie<<24>>24)>>>5));Ne=255&(Ne=(Ne=Ne+((b.hd<<24>>24)*(Ie<<24>>24)>>>5))+((b.ud<<24>>24)*(ft<<24>>24)>>>5)),ae[de+ge]=(4278255360&xe)+(ft<<16)+Ne}}function bt(b,L,j,W,ae){he[L]=function(de,ge,xe,Ie,Ne,ft,It,Ft,pt){for(Ie=It;Ie<Ft;++Ie)for(It=0;It<pt;++It)Ne[ft++]=ae(xe[W(de[ge++])])},he[b]=function(de,ge,xe,Ie,Ne,ft,It){var Ft=8>>de.b,pt=de.Ea,Ar=de.K[0],Vt=de.w;if(8>Ft)for(de=(1<<de.b)-1,Vt=(1<<Ft)-1;ge<xe;++ge){var Ye,At=0;for(Ye=0;Ye<pt;++Ye)Ye&de||(At=W(Ie[Ne++])),ft[It++]=ae(Ar[At&Vt]),At>>=Ft}else he["VP8LMapColor"+j](Ie,Ne,Ar,Vt,ft,It,ge,xe,pt)}}function Ct(b,L,j,W,ae){for(j=L+j;L<j;){var de=b[L++];W[ae++]=de>>16&255,W[ae++]=de>>8&255,W[ae++]=de>>0&255}}function jt(b,L,j,W,ae){for(j=L+j;L<j;){var de=b[L++];W[ae++]=de>>16&255,W[ae++]=de>>8&255,W[ae++]=de>>0&255,W[ae++]=de>>24&255}}function er(b,L,j,W,ae){for(j=L+j;L<j;){var de=(ge=b[L++])>>16&240|ge>>12&15,ge=ge>>0&240|ge>>28&15;W[ae++]=de,W[ae++]=ge}}function Vr(b,L,j,W,ae){for(j=L+j;L<j;){var de=(ge=b[L++])>>16&248|ge>>13&7,ge=ge>>5&224|ge>>3&31;W[ae++]=de,W[ae++]=ge}}function Sr(b,L,j,W,ae){for(j=L+j;L<j;){var de=b[L++];W[ae++]=de>>0&255,W[ae++]=de>>8&255,W[ae++]=de>>16&255}}function un(b,L,j,W,ae,de){if(de==0)for(j=L+j;L<j;)rt(W,((de=b[L++])[0]>>24|de[1]>>8&65280|de[2]<<8&16711680|de[3]<<24)>>>0),ae+=32;else s(W,ae,b,L,j)}function lr(b,L){he[L][0]=he[b+"0"],he[L][1]=he[b+"1"],he[L][2]=he[b+"2"],he[L][3]=he[b+"3"],he[L][4]=he[b+"4"],he[L][5]=he[b+"5"],he[L][6]=he[b+"6"],he[L][7]=he[b+"7"],he[L][8]=he[b+"8"],he[L][9]=he[b+"9"],he[L][10]=he[b+"10"],he[L][11]=he[b+"11"],he[L][12]=he[b+"12"],he[L][13]=he[b+"13"],he[L][14]=he[b+"0"],he[L][15]=he[b+"0"]}function Er(b){return b==Ui||b==PA||b==MA||b==DA}function An(){this.eb=[],this.size=this.A=this.fb=0}function wn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function _i(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new An,this.f.kb=new wn,this.sd=null}function br(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Cr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function cr(b){return alert("todo:WebPSamplerProcessPlane"),b.T}function Kr(b,L){var j=b.T,W=L.ba.f.RGBA,ae=W.eb,de=W.fb+b.ka*W.A,ge=S[L.ba.S],xe=b.y,Ie=b.O,Ne=b.f,ft=b.N,It=b.ea,Ft=b.W,pt=L.cc,Ar=L.dc,Vt=L.Mc,Ye=L.Nc,At=b.ka,Yt=b.ka+b.T,ir=b.U,Wt=ir+1>>1;for(At==0?ge(xe,Ie,null,null,Ne,ft,It,Ft,Ne,ft,It,Ft,ae,de,null,null,ir):(ge(L.ec,L.fc,xe,Ie,pt,Ar,Vt,Ye,Ne,ft,It,Ft,ae,de-W.A,ae,de,ir),++j);At+2<Yt;At+=2)pt=Ne,Ar=ft,Vt=It,Ye=Ft,ft+=b.Rc,Ft+=b.Rc,de+=2*W.A,ge(xe,(Ie+=2*b.fa)-b.fa,xe,Ie,pt,Ar,Vt,Ye,Ne,ft,It,Ft,ae,de-W.A,ae,de,ir);return Ie+=b.fa,b.j+Yt<b.o?(s(L.ec,L.fc,xe,Ie,ir),s(L.cc,L.dc,Ne,ft,Wt),s(L.Mc,L.Nc,It,Ft,Wt),j--):1&Yt||ge(xe,Ie,null,null,Ne,ft,It,Ft,Ne,ft,It,Ft,ae,de+W.A,null,null,ir),j}function hn(b,L,j){var W=b.F,ae=[b.J];if(W!=null){var de=b.U,ge=L.ba.S,xe=ge==fA||ge==MA;L=L.ba.f.RGBA;var Ie=[0],Ne=b.ka;Ie[0]=b.T,b.Kb&&(Ne==0?--Ie[0]:(--Ne,ae[0]-=b.width),b.j+b.ka+b.T==b.o&&(Ie[0]=b.o-b.j-Ne));var ft=L.eb;Ne=L.fb+Ne*L.A,b=kA(W,ae[0],b.width,de,Ie,ft,Ne+(xe?0:3),L.A),t(j==Ie),b&&Er(ge)&&ja(ft,Ne,xe,de,Ie,L.A)}return 0}function xn(b){var L=b.ma,j=L.ba.S,W=11>j,ae=j==_l||j==el||j==fA||j==QA||j==12||Er(j);if(L.memory=null,L.Ib=null,L.Jb=null,L.Nd=null,!Mi(L.Oa,b,ae?11:12))return 0;if(ae&&Er(j)&&_r(),b.da)alert("todo:use_scaling");else{if(W){if(L.Ib=cr,b.Kb){if(j=b.U+1>>1,L.memory=c(b.U+2*j),L.memory==null)return 0;L.ec=L.memory,L.fc=0,L.cc=L.ec,L.dc=L.fc+b.U,L.Mc=L.cc,L.Nc=L.dc+j,L.Ib=Kr,_r()}}else alert("todo:EmitYUV");ae&&(L.Jb=hn,W&&_t())}if(W&&!We){for(b=0;256>b;++b)Rt[b]=89858*(b-128)+De>>Ve,Zt[b]=-22014*(b-128)+De,Xt[b]=-45773*(b-128),Mt[b]=113618*(b-128)+De>>Ve;for(b=Oe;b<ct;++b)L=76283*(b-16)+De>>Ve,ur[b-Oe]=ns(L,255),qt[b-Oe]=ns(L+8>>4,15);We=1}return 1}function Sn(b){var L=b.ma,j=b.U,W=b.T;return t(!(1&b.ka)),0>=j||0>=W?0:(j=L.Ib(b,L),L.Jb!=null&&L.Jb(b,L,j),L.Dc+=j,1)}function ji(b){b.ma.memory=null}function tn(b,L,j,W){return ke(b,8)!=47?0:(L[0]=ke(b,14)+1,j[0]=ke(b,14)+1,W[0]=ke(b,1),ke(b,3)!=0?0:!b.h)}function Wi(b,L){if(4>b)return b+1;var j=b-2>>1;return(2+(1&b)<<j)+ke(L,j)+1}function hs(b,L){return 120<L?L-120:1<=(j=((j=sn[L-1])>>4)*b+(8-(15&j)))?j:1;var j}function Ln(b,L,j){var W=Se(j),ae=b[L+=255&W].g-8;return 0<ae&&(Ke(j,j.u+8),W=Se(j),L+=b[L].value,L+=W&(1<<ae)-1),Ke(j,j.u+b[L].g),b[L].value}function nn(b,L,j){return j.g+=b.g,j.value+=b.value<<L>>>0,t(8>=j.g),b.g}function Te(b,L,j){var W=b.xc;return t((L=W==0?0:b.vc[b.md*(j>>W)+(L>>W)])<b.Wb),b.Ya[L]}function Y(b,L,j,W){var ae=b.ab,de=b.c*L,ge=b.C;L=ge+L;var xe=j,Ie=W;for(W=b.Ta,j=b.Ua;0<ae--;){var Ne=b.gc[ae],ft=ge,It=L,Ft=xe,pt=Ie,Ar=(Ie=W,xe=j,Ne.Ea);switch(t(ft<It),t(It<=Ne.nc),Ne.hc){case 2:Ro(Ft,pt,(It-ft)*Ar,Ie,xe);break;case 0:var Vt=ft,Ye=It,At=Ie,Yt=xe,ir=(Nr=Ne).Ea;Vt==0&&(xo(Ft,pt,null,null,1,At,Yt),Zr(Ft,pt+1,0,0,ir-1,At,Yt+1),pt+=ir,Yt+=ir,++Vt);for(var Wt=1<<Nr.b,Dr=Wt-1,kr=sr(ir,Nr.b),Fn=Nr.K,Nr=Nr.w+(Vt>>Nr.b)*kr;Vt<Ye;){var fi=Fn,di=Nr,hr=1;for(ao(Ft,pt,At,Yt-ir,1,At,Yt);hr<ir;){var zn=(hr&~Dr)+Wt;zn>ir&&(zn=ir),(0,js[fi[di++]>>8&15])(Ft,pt+ +hr,At,Yt+hr-ir,zn-hr,At,Yt+hr),hr=zn}pt+=ir,Yt+=ir,++Vt&Dr||(Nr+=kr)}It!=Ne.nc&&s(Ie,xe-Ar,Ie,xe+(It-ft-1)*Ar,Ar);break;case 1:for(Ar=Ft,Ye=pt,ir=(Ft=Ne.Ea)-(Yt=Ft&~(At=(pt=1<<Ne.b)-1)),Vt=sr(Ft,Ne.b),Wt=Ne.K,Ne=Ne.w+(ft>>Ne.b)*Vt;ft<It;){for(Dr=Wt,kr=Ne,Fn=new Br,Nr=Ye+Yt,fi=Ye+Ft;Ye<Nr;)vt(Dr[kr++],Fn),Ss(Fn,Ar,Ye,pt,Ie,xe),Ye+=pt,xe+=pt;Ye<fi&&(vt(Dr[kr++],Fn),Ss(Fn,Ar,Ye,ir,Ie,xe),Ye+=ir,xe+=ir),++ft&At||(Ne+=Vt)}break;case 3:if(Ft==Ie&&pt==xe&&0<Ne.b){for(Ye=Ie,Ft=Ar=xe+(It-ft)*Ar-(Yt=(It-ft)*sr(Ne.Ea,Ne.b)),pt=Ie,At=xe,Vt=[],Yt=(ir=Yt)-1;0<=Yt;--Yt)Vt[Yt]=pt[At+Yt];for(Yt=ir-1;0<=Yt;--Yt)Ye[Ft+Yt]=Vt[Yt];Hi(Ne,ft,It,Ie,Ar,Ie,xe)}else Hi(Ne,ft,It,Ft,pt,Ie,xe)}xe=W,Ie=j}Ie!=j&&s(W,j,xe,Ie,de)}function Ae(b,L){var j=b.V,W=b.Ba+b.c*b.C,ae=L-b.C;if(t(L<=b.l.o),t(16>=ae),0<ae){var de=b.l,ge=b.Ta,xe=b.Ua,Ie=de.width;if(Y(b,ae,j,W),ae=xe=[xe],t((j=b.C)<(W=L)),t(de.v<de.va),W>de.o&&(W=de.o),j<de.j){var Ne=de.j-j;j=de.j,ae[0]+=Ne*Ie}if(j>=W?j=0:(ae[0]+=4*de.v,de.ka=j-de.j,de.U=de.va-de.v,de.T=W-j,j=1),j){if(xe=xe[0],11>(j=b.ca).S){var ft=j.f.RGBA,It=(W=j.S,ae=de.U,de=de.T,Ne=ft.eb,ft.A),Ft=de;for(ft=ft.fb+b.Ma*ft.A;0<Ft--;){var pt=ge,Ar=xe,Vt=ae,Ye=Ne,At=ft;switch(W){case lo:Ca(pt,Ar,Vt,Ye,At);break;case _l:ca(pt,Ar,Vt,Ye,At);break;case Ui:ca(pt,Ar,Vt,Ye,At),ja(Ye,At,0,Vt,1,0);break;case Ra:ua(pt,Ar,Vt,Ye,At);break;case el:un(pt,Ar,Vt,Ye,At,1);break;case PA:un(pt,Ar,Vt,Ye,At,1),ja(Ye,At,0,Vt,1,0);break;case fA:un(pt,Ar,Vt,Ye,At,0);break;case MA:un(pt,Ar,Vt,Ye,At,0),ja(Ye,At,1,Vt,1,0);break;case QA:Xs(pt,Ar,Vt,Ye,At);break;case DA:Xs(pt,Ar,Vt,Ye,At),LA(Ye,At,Vt,1,0);break;case Fa:as(pt,Ar,Vt,Ye,At);break;default:t(0)}xe+=Ie,ft+=It}b.Ma+=de}else alert("todo:EmitRescaledRowsYUVA");t(b.Ma<=j.height)}}b.C=L,t(b.C<=b.i)}function Ee(b){var L;if(0<b.ua)return 0;for(L=0;L<b.Wb;++L){var j=b.Ya[L].G,W=b.Ya[L].H;if(0<j[1][W[1]+0].g||0<j[2][W[2]+0].g||0<j[3][W[3]+0].g)return 0}return 1}function Ue(b,L,j,W,ae,de){if(b.Z!=0){var ge=b.qd,xe=b.rd;for(t(v[b.Z]!=null);L<j;++L)v[b.Z](ge,xe,W,ae,W,ae,de),ge=W,xe=ae,ae+=de;b.qd=ge,b.rd=xe}}function Xe(b,L){var j=b.l.ma,W=j.Z==0||j.Z==1?b.l.j:b.C;if(W=b.C<W?W:b.C,t(L<=b.l.o),L>W){var ae=b.l.width,de=j.ca,ge=j.tb+ae*W,xe=b.V,Ie=b.Ba+b.c*W,Ne=b.gc;t(b.ab==1),t(Ne[0].hc==3),oo(Ne[0],W,L,xe,Ie,de,ge),Ue(j,W,L,de,ge,ae)}b.C=b.Ma=L}function lt(b,L,j,W,ae,de,ge){var xe=b.$/W,Ie=b.$%W,Ne=b.m,ft=b.s,It=j+b.$,Ft=It;ae=j+W*ae;var pt=j+W*de,Ar=280+ft.ua,Vt=b.Pb?xe:16777216,Ye=0<ft.ua?ft.Wa:null,At=ft.wc,Yt=It<pt?Te(ft,Ie,xe):null;t(b.C<de),t(pt<=ae);var ir=!1;e:for(;;){for(;ir||It<pt;){var Wt=0;if(xe>=Vt){var Dr=It-j;t((Vt=b).Pb),Vt.wd=Vt.m,Vt.xd=Dr,0<Vt.s.ua&&Pt(Vt.s.Wa,Vt.s.vb),Vt=xe+tl}if(Ie&At||(Yt=Te(ft,Ie,xe)),t(Yt!=null),Yt.Qb&&(L[It]=Yt.qb,ir=!0),!ir)if(ot(Ne),Yt.jc){Wt=Ne,Dr=L;var kr=It,Fn=Yt.pd[Se(Wt)&is-1];t(Yt.jc),256>Fn.g?(Ke(Wt,Wt.u+Fn.g),Dr[kr]=Fn.value,Wt=0):(Ke(Wt,Wt.u+Fn.g-256),t(256<=Fn.value),Wt=Fn.value),Wt==0&&(ir=!0)}else Wt=Ln(Yt.G[0],Yt.H[0],Ne);if(Ne.h)break;if(ir||256>Wt){if(!ir)if(Yt.nd)L[It]=(Yt.qb|Wt<<8)>>>0;else{if(ot(Ne),ir=Ln(Yt.G[1],Yt.H[1],Ne),ot(Ne),Dr=Ln(Yt.G[2],Yt.H[2],Ne),kr=Ln(Yt.G[3],Yt.H[3],Ne),Ne.h)break;L[It]=(kr<<24|ir<<16|Wt<<8|Dr)>>>0}if(ir=!1,++It,++Ie>=W&&(Ie=0,++xe,ge!=null&&xe<=de&&!(xe%16)&&ge(b,xe),Ye!=null))for(;Ft<It;)Wt=L[Ft++],Ye.X[(506832829*Wt&4294967295)>>>Ye.Mb]=Wt}else if(280>Wt){if(Wt=Wi(Wt-256,Ne),Dr=Ln(Yt.G[4],Yt.H[4],Ne),ot(Ne),Dr=hs(W,Dr=Wi(Dr,Ne)),Ne.h)break;if(It-j<Dr||ae-It<Wt)break e;for(kr=0;kr<Wt;++kr)L[It+kr]=L[It+kr-Dr];for(It+=Wt,Ie+=Wt;Ie>=W;)Ie-=W,++xe,ge!=null&&xe<=de&&!(xe%16)&&ge(b,xe);if(t(It<=ae),Ie&At&&(Yt=Te(ft,Ie,xe)),Ye!=null)for(;Ft<It;)Wt=L[Ft++],Ye.X[(506832829*Wt&4294967295)>>>Ye.Mb]=Wt}else{if(!(Wt<Ar))break e;for(ir=Wt-280,t(Ye!=null);Ft<It;)Wt=L[Ft++],Ye.X[(506832829*Wt&4294967295)>>>Ye.Mb]=Wt;Wt=It,t(!(ir>>>(Dr=Ye).Xa)),L[Wt]=Dr.X[ir],ir=!0}ir||t(Ne.h==Qe(Ne))}if(b.Pb&&Ne.h&&It<ae)t(b.m.h),b.a=5,b.m=b.wd,b.$=b.xd,0<b.s.ua&&Pt(b.s.vb,b.s.Wa);else{if(Ne.h)break e;ge!=null&&ge(b,xe>de?de:xe),b.a=0,b.$=It-j}return 1}return b.a=3,0}function $e(b){t(b!=null),b.vc=null,b.yc=null,b.Ya=null;var L=b.Wa;L!=null&&(L.X=null),b.vb=null,t(b!=null)}function qe(){var b=new Xl;return b==null?null:(b.a=0,b.xb=m,lr("Predictor","VP8LPredictors"),lr("Predictor","VP8LPredictors_C"),lr("PredictorAdd","VP8LPredictorsAdd"),lr("PredictorAdd","VP8LPredictorsAdd_C"),Ro=pn,Ss=at,Ca=Ct,ca=jt,Xs=er,as=Vr,ua=Sr,he.VP8LMapColor32b=Ns,he.VP8LMapColor8b=ss,b)}function ut(b,L,j,W,ae){var de=1,ge=[b],xe=[L],Ie=W.m,Ne=W.s,ft=null,It=0;e:for(;;){if(j)for(;de&&ke(Ie,1);){var Ft=ge,pt=xe,Ar=W,Vt=1,Ye=Ar.m,At=Ar.gc[Ar.ab],Yt=ke(Ye,2);if(Ar.Oc&1<<Yt)de=0;else{switch(Ar.Oc|=1<<Yt,At.hc=Yt,At.Ea=Ft[0],At.nc=pt[0],At.K=[null],++Ar.ab,t(4>=Ar.ab),Yt){case 0:case 1:At.b=ke(Ye,3)+2,Vt=ut(sr(At.Ea,At.b),sr(At.nc,At.b),0,Ar,At.K),At.K=At.K[0];break;case 3:var ir,Wt=ke(Ye,8)+1,Dr=16<Wt?0:4<Wt?1:2<Wt?2:3;if(Ft[0]=sr(At.Ea,Dr),At.b=Dr,ir=Vt=ut(Wt,1,0,Ar,At.K)){var kr,Fn=Wt,Nr=At,fi=1<<(8>>Nr.b),di=c(fi);if(di==null)ir=0;else{var hr=Nr.K[0],zn=Nr.w;for(di[0]=Nr.K[0][0],kr=1;kr<1*Fn;++kr)di[kr]=Ht(hr[zn+kr],di[kr-1]);for(;kr<4*fi;++kr)di[kr]=0;Nr.K[0]=null,Nr.K[0]=di,ir=1}}Vt=ir;break;case 2:break;default:t(0)}de=Vt}}if(ge=ge[0],xe=xe[0],de&&ke(Ie,1)&&!(de=1<=(It=ke(Ie,4))&&11>=It)){W.a=3;break e}var li;if(li=de)t:{var ci,Un,Is,Js=W,ki=ge,ps=xe,ri=It,As=j,Ts=Js.m,Vi=Js.s,Ki=[null],Ys=1,co=0,Ci=vn[ri];r:for(;;){if(As&&ke(Ts,1)){var Us=ke(Ts,3)+2,Eo=sr(ki,Us),uo=sr(ps,Us),Fo=Eo*uo;if(!ut(Eo,uo,0,Js,Ki))break r;for(Ki=Ki[0],Vi.xc=Us,ci=0;ci<Fo;++ci){var zo=Ki[ci]>>8&65535;Ki[ci]=zo,zo>=Ys&&(Ys=zo+1)}}if(Ts.h)break r;for(Un=0;5>Un;++Un){var Yi=Gc[Un];!Un&&0<ri&&(Yi+=1<<ri),co<Yi&&(co=Yi)}var qc=h(Ys*Ci,re),lh=Ys,Fu=h(lh,me);if(Fu==null)var Wc=null;else t(65536>=lh),Wc=Fu;var rl=c(co);if(Wc==null||rl==null||qc==null){Js.a=1;break r}var Xc=qc;for(ci=Is=0;ci<Ys;++ci){var ho=Wc[ci],bl=ho.G,nl=ho.H,xl=0,Bl=1,Yl=0;for(Un=0;5>Un;++Un){Yi=Gc[Un],bl[Un]=Xc,nl[Un]=Is,!Un&&0<ri&&(Yi+=1<<ri);i:{var NA,il=Yi,Bc=Js,$l=rl,fa=Xc,$s=Is,ec=0,So=Bc.m,Su=ke(So,1);if(l($l,0,0,il),Su){var tc=ke(So,1)+1,ch=ke(So,1),Zc=ke(So,ch==0?1:8);$l[Zc]=1,tc==2&&($l[Zc=ke(So,8)]=1);var Cl=1}else{var Cc=c(19),Iu=ke(So,4)+4;if(19<Iu){Bc.a=3;var Ec=0;break i}for(NA=0;NA<Iu;++NA)Cc[dA[NA]]=ke(So,3);var Ia=void 0,El=void 0,Jc=Bc,uh=Cc,rc=il,nc=$l,Ta=0,jA=Jc.m,hh=8,fh=h(128,re);n:for(;ee(fh,0,7,uh,19);){if(ke(jA,1)){var ef=2+2*ke(jA,3);if((Ia=2+ke(jA,ef))>rc)break n}else Ia=rc;for(El=0;El<rc&&Ia--;){ot(jA);var ic=fh[0+(127&Se(jA))];Ke(jA,jA.u+ic.g);var RA=ic.value;if(16>RA)nc[El++]=RA,RA!=0&&(hh=RA);else{var Yc=RA==16,OA=RA-16,_s=Kc[OA],sc=ke(jA,Vc[OA])+_s;if(El+sc>rc)break n;for(var tf=Yc?hh:0;0<sc--;)nc[El++]=tf}}Ta=1;break n}Ta||(Jc.a=3),Cl=Ta}(Cl=Cl&&!So.h)&&(ec=ee(fa,$s,8,$l,il)),Cl&&ec!=0?Ec=ec:(Bc.a=3,Ec=0)}if(Ec==0)break r;if(Bl&&Bo[Un]==1&&(Bl=Xc[Is].g==0),xl+=Xc[Is].g,Is+=Ec,3>=Un){var Fc,$c=rl[0];for(Fc=1;Fc<Yi;++Fc)rl[Fc]>$c&&($c=rl[Fc]);Yl+=$c}}if(ho.nd=Bl,ho.Qb=0,Bl&&(ho.qb=(bl[3][nl[3]+0].value<<24|bl[1][nl[1]+0].value<<16|bl[2][nl[2]+0].value)>>>0,xl==0&&256>bl[0][nl[0]+0].value&&(ho.Qb=1,ho.qb+=bl[0][nl[0]+0].value<<8)),ho.jc=!ho.Qb&&6>Yl,ho.jc){var ac,HA=ho;for(ac=0;ac<is;++ac){var sl=ac,gA=HA.pd[sl],eu=HA.G[0][HA.H[0]+sl];256<=eu.value?(gA.g=eu.g+256,gA.value=eu.value):(gA.g=0,gA.value=0,sl>>=nn(eu,8,gA),sl>>=nn(HA.G[1][HA.H[1]+sl],16,gA),sl>>=nn(HA.G[2][HA.H[2]+sl],0,gA),nn(HA.G[3][HA.H[3]+sl],24,gA))}}}Vi.vc=Ki,Vi.Wb=Ys,Vi.Ya=Wc,Vi.yc=qc,li=1;break t}li=0}if(!(de=li)){W.a=3;break e}if(0<It){if(Ne.ua=1<<It,!gr(Ne.Wa,It)){W.a=1,de=0;break e}}else Ne.ua=0;var al=W,dh=ge,ls=xe,oc=al.s,Sc=oc.xc;if(al.c=dh,al.i=ls,oc.md=sr(dh,Sc),oc.wc=Sc==0?-1:(1<<Sc)-1,j){W.xb=u;break e}if((ft=c(ge*xe))==null){W.a=1,de=0;break e}de=(de=lt(W,ft,0,ge,xe,xe,null))&&!Ie.h;break e}return de?(ae!=null?ae[0]=ft:(t(ft==null),t(j)),W.$=0,j||$e(Ne)):$e(Ne),de}function Ot(b,L){var j=b.c*b.i,W=j+L+16*L;return t(b.c<=L),b.V=c(W),b.V==null?(b.Ta=null,b.Ua=0,b.a=1,0):(b.Ta=b.V,b.Ua=b.Ba+j+L,1)}function nr(b,L){var j=b.C,W=L-j,ae=b.V,de=b.Ba+b.c*j;for(t(L<=b.l.o);0<W;){var ge=16<W?16:W,xe=b.l.ma,Ie=b.l.width,Ne=Ie*ge,ft=xe.ca,It=xe.tb+Ie*j,Ft=b.Ta,pt=b.Ua;Y(b,ge,ae,de),Zl(Ft,pt,ft,It,Ne),Ue(xe,j,j+ge,ft,It,Ie),W-=ge,ae+=ge*b.c,j+=ge}t(j==L),b.C=b.Ma=L}function zt(){this.ub=this.yd=this.td=this.Rb=0}function jr(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Hr(){this.Fb=this.Bb=this.Cb=0,this.Zb=c(4),this.Lb=c(4)}function Tr(){this.Yb=function(){var b=[];return function L(j,W,ae){for(var de=ae[W],ge=0;ge<de&&(j.push(ae.length>W+1?[]:0),!(ae.length<W+1));ge++)L(j[ge],W+1,ae)}(b,0,[3,11]),b}()}function ln(){this.jb=c(3),this.Wc=a([4,8],Tr),this.Xc=a([4,17],Tr)}function dn(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new c(4),this.od=new c(4)}function In(){this.ld=this.La=this.dd=this.tc=0}function mn(){this.Na=this.la=0}function Bn(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Qn(){this.ad=c(384),this.Za=0,this.Ob=c(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Vn(){this.uc=this.M=this.Nb=0,this.wa=Array(new In),this.Y=0,this.ya=Array(new Qn),this.aa=0,this.l=new wi}function Ti(){this.y=c(16),this.f=c(8),this.ea=c(8)}function oi(){this.cb=this.a=0,this.sc="",this.m=new kt,this.Od=new zt,this.Kc=new jr,this.ed=new dn,this.Qa=new Hr,this.Ic=this.$c=this.Aa=0,this.D=new Vn,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=h(8,kt),this.ia=0,this.pb=h(4,Bn),this.Pa=new ln,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ti),this.Hd=0,this.rb=Array(new mn),this.sb=0,this.wa=Array(new In),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Qn),this.L=this.aa=0,this.gd=a([4,2],In),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function wi(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function ks(){var b=new oi;return b!=null&&(b.a=0,b.sc="OK",b.cb=0,b.Xb=0,os||(os=Ks)),b}function bi(b,L,j){return b.a==0&&(b.a=L,b.sc=j,b.cb=0),0}function Yn(b,L,j){return 3<=j&&b[L+0]==157&&b[L+1]==1&&b[L+2]==42}function Ya(b,L){if(b==null)return 0;if(b.a=0,b.sc="OK",L==null)return bi(b,2,"null VP8Io passed to VP8GetHeaders()");var j=L.data,W=L.w,ae=L.ha;if(4>ae)return bi(b,7,"Truncated header.");var de=j[W+0]|j[W+1]<<8|j[W+2]<<16,ge=b.Od;if(ge.Rb=!(1&de),ge.td=de>>1&7,ge.yd=de>>4&1,ge.ub=de>>5,3<ge.td)return bi(b,3,"Incorrect keyframe parameters.");if(!ge.yd)return bi(b,4,"Frame not displayable.");W+=3,ae-=3;var xe=b.Kc;if(ge.Rb){if(7>ae)return bi(b,7,"cannot parse picture header");if(!Yn(j,W,ae))return bi(b,3,"Bad code word");xe.c=16383&(j[W+4]<<8|j[W+3]),xe.Td=j[W+4]>>6,xe.i=16383&(j[W+6]<<8|j[W+5]),xe.Ud=j[W+6]>>6,W+=7,ae-=7,b.za=xe.c+15>>4,b.Ub=xe.i+15>>4,L.width=xe.c,L.height=xe.i,L.Da=0,L.j=0,L.v=0,L.va=L.width,L.o=L.height,L.da=0,L.ib=L.width,L.hb=L.height,L.U=L.width,L.T=L.height,l((de=b.Pa).jb,0,255,de.jb.length),t((de=b.Qa)!=null),de.Cb=0,de.Bb=0,de.Fb=1,l(de.Zb,0,0,de.Zb.length),l(de.Lb,0,0,de.Lb)}if(ge.ub>ae)return bi(b,7,"bad partition length");Re(de=b.m,j,W,ge.ub),W+=ge.ub,ae-=ge.ub,ge.Rb&&(xe.Ld=Bt(de),xe.Kd=Bt(de)),xe=b.Qa;var Ie,Ne=b.Pa;if(t(de!=null),t(xe!=null),xe.Cb=Bt(de),xe.Cb){if(xe.Bb=Bt(de),Bt(de)){for(xe.Fb=Bt(de),Ie=0;4>Ie;++Ie)xe.Zb[Ie]=Bt(de)?He(de,7):0;for(Ie=0;4>Ie;++Ie)xe.Lb[Ie]=Bt(de)?He(de,6):0}if(xe.Bb)for(Ie=0;3>Ie;++Ie)Ne.jb[Ie]=Bt(de)?_e(de,8):255}else xe.Bb=0;if(de.Ka)return bi(b,3,"cannot parse segment header");if((xe=b.ed).zd=Bt(de),xe.Tb=_e(de,6),xe.wb=_e(de,3),xe.Pc=Bt(de),xe.Pc&&Bt(de)){for(Ne=0;4>Ne;++Ne)Bt(de)&&(xe.vd[Ne]=He(de,6));for(Ne=0;4>Ne;++Ne)Bt(de)&&(xe.od[Ne]=He(de,6))}if(b.L=xe.Tb==0?0:xe.zd?1:2,de.Ka)return bi(b,3,"cannot parse filter header");var ft=ae;if(ae=Ie=W,W=Ie+ft,xe=ft,b.Xb=(1<<_e(b.m,2))-1,ft<3*(Ne=b.Xb))j=7;else{for(Ie+=3*Ne,xe-=3*Ne,ft=0;ft<Ne;++ft){var It=j[ae+0]|j[ae+1]<<8|j[ae+2]<<16;It>xe&&(It=xe),Re(b.Jc[+ft],j,Ie,It),Ie+=It,xe-=It,ae+=3}Re(b.Jc[+Ne],j,Ie,xe),j=Ie<W?0:5}if(j!=0)return bi(b,j,"cannot parse partitions");for(j=_e(Ie=b.m,7),ae=Bt(Ie)?He(Ie,4):0,W=Bt(Ie)?He(Ie,4):0,xe=Bt(Ie)?He(Ie,4):0,Ne=Bt(Ie)?He(Ie,4):0,Ie=Bt(Ie)?He(Ie,4):0,ft=b.Qa,It=0;4>It;++It){if(ft.Cb){var Ft=ft.Zb[It];ft.Fb||(Ft+=j)}else{if(0<It){b.pb[It]=b.pb[0];continue}Ft=j}var pt=b.pb[It];pt.Sc[0]=wl[ns(Ft+ae,127)],pt.Sc[1]=Sa[ns(Ft+0,127)],pt.Eb[0]=2*wl[ns(Ft+W,127)],pt.Eb[1]=101581*Sa[ns(Ft+xe,127)]>>16,8>pt.Eb[1]&&(pt.Eb[1]=8),pt.Qc[0]=wl[ns(Ft+Ne,117)],pt.Qc[1]=Sa[ns(Ft+Ie,127)],pt.lc=Ft+Ie}if(!ge.Rb)return bi(b,4,"Not a key frame.");for(Bt(de),ge=b.Pa,j=0;4>j;++j){for(ae=0;8>ae;++ae)for(W=0;3>W;++W)for(xe=0;11>xe;++xe)Ne=Ge(de,ds[j][ae][W][xe])?_e(de,8):mA[j][ae][W][xe],ge.Wc[j][ae].Yb[W][xe]=Ne;for(ae=0;17>ae;++ae)ge.Xc[j][ae]=ge.Wc[j][xc[ae]]}return b.kc=Bt(de),b.kc&&(b.Bd=_e(de,8)),b.cb=1}function Ks(b,L,j,W,ae,de,ge){var xe=L[ae].Yb[j];for(j=0;16>ae;++ae){if(!Ge(b,xe[j+0]))return ae;for(;!Ge(b,xe[j+1]);)if(xe=L[++ae].Yb[0],j=0,ae==16)return 16;var Ie=L[ae+1].Yb;if(Ge(b,xe[j+2])){var Ne=b,ft=0;if(Ge(Ne,(Ft=xe)[(It=j)+3]))if(Ge(Ne,Ft[It+6])){for(xe=0,It=2*(ft=Ge(Ne,Ft[It+8]))+(Ft=Ge(Ne,Ft[It+9+ft])),ft=0,Ft=pA[It];Ft[xe];++xe)ft+=ft+Ge(Ne,Ft[xe]);ft+=3+(8<<It)}else Ge(Ne,Ft[It+7])?(ft=7+2*Ge(Ne,165),ft+=Ge(Ne,145)):ft=5+Ge(Ne,159);else ft=Ge(Ne,Ft[It+4])?3+Ge(Ne,Ft[It+5]):2;xe=Ie[2]}else ft=1,xe=Ie[1];Ie=ge+Co[ae],0>(Ne=b).b&&dt(Ne);var It,Ft=Ne.b,pt=(It=Ne.Ca>>1)-(Ne.I>>Ft)>>31;--Ne.b,Ne.Ca+=pt,Ne.Ca|=1,Ne.I-=(It+1&pt)<<Ft,de[Ie]=((ft^pt)-pt)*W[(0<ae)+0]}return 16}function Gs(b){var L=b.rb[b.sb-1];L.la=0,L.Na=0,l(b.zc,0,0,b.zc.length),b.ja=0}function ia(b,L){if(b==null)return 0;if(L==null)return bi(b,2,"NULL VP8Io parameter in VP8Decode().");if(!b.cb&&!Ya(b,L))return 0;if(t(b.cb),L.ac==null||L.ac(L)){L.ob&&(b.L=0);var j=Ur[b.L];if(b.L==2?(b.yb=0,b.zb=0):(b.yb=L.v-j>>4,b.zb=L.j-j>>4,0>b.yb&&(b.yb=0),0>b.zb&&(b.zb=0)),b.Va=L.o+15+j>>4,b.Hb=L.va+15+j>>4,b.Hb>b.za&&(b.Hb=b.za),b.Va>b.Ub&&(b.Va=b.Ub),0<b.L){var W=b.ed;for(j=0;4>j;++j){var ae;if(b.Qa.Cb){var de=b.Qa.Lb[j];b.Qa.Fb||(de+=W.Tb)}else de=W.Tb;for(ae=0;1>=ae;++ae){var ge=b.gd[j][ae],xe=de;if(W.Pc&&(xe+=W.vd[0],ae&&(xe+=W.od[0])),0<(xe=0>xe?0:63<xe?63:xe)){var Ie=xe;0<W.wb&&(Ie=4<W.wb?Ie>>2:Ie>>1)>9-W.wb&&(Ie=9-W.wb),1>Ie&&(Ie=1),ge.dd=Ie,ge.tc=2*xe+Ie,ge.ld=40<=xe?2:15<=xe?1:0}else ge.tc=0;ge.La=ae}}}j=0}else bi(b,6,"Frame setup failed"),j=b.a;if(j=j==0){if(j){b.$c=0,0<b.Aa||(b.Ic=Pn);e:{j=b.Ic,W=4*(Ie=b.za);var Ne=32*Ie,ft=Ie+1,It=0<b.L?Ie*(0<b.Aa?2:1):0,Ft=(b.Aa==2?2:1)*Ie;if((ge=W+832+(ae=3*(16*j+Ur[b.L])/2*Ne)+(de=b.Fa!=null&&0<b.Fa.length?b.Kc.c*b.Kc.i:0))!=ge)j=0;else{if(ge>b.Vb){if(b.Vb=0,b.Ec=c(ge),b.Fc=0,b.Ec==null){j=bi(b,1,"no memory during frame initialization.");break e}b.Vb=ge}ge=b.Ec,xe=b.Fc,b.Ac=ge,b.Bc=xe,xe+=W,b.Gd=h(Ne,Ti),b.Hd=0,b.rb=h(ft+1,mn),b.sb=1,b.wa=It?h(It,In):null,b.Y=0,b.D.Nb=0,b.D.wa=b.wa,b.D.Y=b.Y,0<b.Aa&&(b.D.Y+=Ie),t(!0),b.oc=ge,b.pc=xe,xe+=832,b.ya=h(Ft,Qn),b.aa=0,b.D.ya=b.ya,b.D.aa=b.aa,b.Aa==2&&(b.D.aa+=Ie),b.R=16*Ie,b.B=8*Ie,Ie=(Ne=Ur[b.L])*b.R,Ne=Ne/2*b.B,b.sa=ge,b.ta=xe+Ie,b.qa=b.sa,b.ra=b.ta+16*j*b.R+Ne,b.Ha=b.qa,b.Ia=b.ra+8*j*b.B+Ne,b.$c=0,xe+=ae,b.mb=de?ge:null,b.nb=de?xe:null,t(xe+de<=b.Fc+b.Vb),Gs(b),l(b.Ac,b.Bc,0,W),j=1}}if(j){if(L.ka=0,L.y=b.sa,L.O=b.ta,L.f=b.qa,L.N=b.ra,L.ea=b.Ha,L.Vd=b.Ia,L.fa=b.R,L.Rc=b.B,L.F=null,L.J=0,!Jl){for(j=-255;255>=j;++j)JA[255+j]=0>j?-j:j;for(j=-1020;1020>=j;++j)wc[1020+j]=-128>j?-128:127<j?127:j;for(j=-112;112>=j;++j)zc[112+j]=-16>j?-16:15<j?15:j;for(j=-255;510>=j;++j)vl[255+j]=0>j?0:255<j?255:j;Jl=1}gi=$a,ZA=EA,Na=sa,fs=bs,Ea=xs,Da=nA,Oo=oA,Rs=AA,hA=WA,Ao=SA,Ho=_c,zi=_a,Pr=IA,Ii=TA,Ai=ro,Bi=no,Zi=io,Ir=Wl,g[0]=Pa,g[1]=Mo,g[2]=GA,g[3]=ml,g[4]=_o,g[5]=wo,g[6]=aA,g[7]=gt,g[8]=Ds,g[9]=Mn,ha[0]=Bs,ha[1]=Do,ha[2]=oa,ha[3]=qs,ha[4]=ys,ha[5]=iA,ha[6]=sA,i[0]=eo,i[1]=Qa,i[2]=Oi,i[3]=Qs,i[4]=Aa,i[5]=Cs,i[6]=to,j=1}else j=0}j&&(j=function(pt,Ar){for(pt.M=0;pt.M<pt.Va;++pt.M){var Vt,Ye=pt.Jc[pt.M&pt.Xb],At=pt.m,Yt=pt;for(Vt=0;Vt<Yt.za;++Vt){var ir=At,Wt=Yt,Dr=Wt.Ac,kr=Wt.Bc+4*Vt,Fn=Wt.zc,Nr=Wt.ya[Wt.aa+Vt];if(Wt.Qa.Bb?Nr.$b=Ge(ir,Wt.Pa.jb[0])?2+Ge(ir,Wt.Pa.jb[2]):Ge(ir,Wt.Pa.jb[1]):Nr.$b=0,Wt.kc&&(Nr.Ad=Ge(ir,Wt.Bd)),Nr.Za=!Ge(ir,145)+0,Nr.Za){var fi=Nr.Ob,di=0;for(Wt=0;4>Wt;++Wt){var hr,zn=Fn[0+Wt];for(hr=0;4>hr;++hr){zn=Ji[Dr[kr+hr]][zn];for(var li=bc[Ge(ir,zn[0])];0<li;)li=bc[2*li+Ge(ir,zn[li])];zn=-li,Dr[kr+hr]=zn}s(fi,di,Dr,kr,4),di+=4,Fn[0+Wt]=zn}}else zn=Ge(ir,156)?Ge(ir,128)?1:3:Ge(ir,163)?2:0,Nr.Ob[0]=zn,l(Dr,kr,zn,4),l(Fn,0,zn,4);Nr.Dd=Ge(ir,142)?Ge(ir,114)?Ge(ir,183)?1:3:2:0}if(Yt.m.Ka)return bi(pt,7,"Premature end-of-partition0 encountered.");for(;pt.ja<pt.za;++pt.ja){if(Yt=Ye,ir=(At=pt).rb[At.sb-1],Dr=At.rb[At.sb+At.ja],Vt=At.ya[At.aa+At.ja],kr=At.kc?Vt.Ad:0)ir.la=Dr.la=0,Vt.Za||(ir.Na=Dr.Na=0),Vt.Hc=0,Vt.Gc=0,Vt.ia=0;else{var ci,Un;if(ir=Dr,Dr=Yt,kr=At.Pa.Xc,Fn=At.ya[At.aa+At.ja],Nr=At.pb[Fn.$b],Wt=Fn.ad,fi=0,di=At.rb[At.sb-1],zn=hr=0,l(Wt,fi,0,384),Fn.Za)var Is=0,Js=kr[3];else{li=c(16);var ki=ir.Na+di.Na;if(ki=os(Dr,kr[1],ki,Nr.Eb,0,li,0),ir.Na=di.Na=(0<ki)+0,1<ki)gi(li,0,Wt,fi);else{var ps=li[0]+3>>3;for(li=0;256>li;li+=16)Wt[fi+li]=ps}Is=1,Js=kr[0]}var ri=15&ir.la,As=15&di.la;for(li=0;4>li;++li){var Ts=1&As;for(ps=Un=0;4>ps;++ps)ri=ri>>1|(Ts=(ki=os(Dr,Js,ki=Ts+(1&ri),Nr.Sc,Is,Wt,fi))>Is)<<7,Un=Un<<2|(3<ki?3:1<ki?2:Wt[fi+0]!=0),fi+=16;ri>>=4,As=As>>1|Ts<<7,hr=(hr<<8|Un)>>>0}for(Js=ri,Is=As>>4,ci=0;4>ci;ci+=2){for(Un=0,ri=ir.la>>4+ci,As=di.la>>4+ci,li=0;2>li;++li){for(Ts=1&As,ps=0;2>ps;++ps)ki=Ts+(1&ri),ri=ri>>1|(Ts=0<(ki=os(Dr,kr[2],ki,Nr.Qc,0,Wt,fi)))<<3,Un=Un<<2|(3<ki?3:1<ki?2:Wt[fi+0]!=0),fi+=16;ri>>=2,As=As>>1|Ts<<5}zn|=Un<<4*ci,Js|=ri<<4<<ci,Is|=(240&As)<<ci}ir.la=Js,di.la=Is,Fn.Hc=hr,Fn.Gc=zn,Fn.ia=43690&zn?0:Nr.ia,kr=!(hr|zn)}if(0<At.L&&(At.wa[At.Y+At.ja]=At.gd[Vt.$b][Vt.Za],At.wa[At.Y+At.ja].La|=!kr),Yt.Ka)return bi(pt,7,"Premature end-of-file encountered.")}if(Gs(pt),At=Ar,Yt=1,Vt=(Ye=pt).D,ir=0<Ye.L&&Ye.M>=Ye.zb&&Ye.M<=Ye.Va,Ye.Aa==0)e:{if(Vt.M=Ye.M,Vt.uc=ir,Pi(Ye,Vt),Yt=1,Vt=(Un=Ye.D).Nb,ir=(zn=Ur[Ye.L])*Ye.R,Dr=zn/2*Ye.B,li=16*Vt*Ye.R,ps=8*Vt*Ye.B,kr=Ye.sa,Fn=Ye.ta-ir+li,Nr=Ye.qa,Wt=Ye.ra-Dr+ps,fi=Ye.Ha,di=Ye.Ia-Dr+ps,As=(ri=Un.M)==0,hr=ri>=Ye.Va-1,Ye.Aa==2&&Pi(Ye,Un),Un.uc)for(Ts=(ki=Ye).D.M,t(ki.D.uc),Un=ki.yb;Un<ki.Hb;++Un){Is=Un,Js=Ts;var Vi=(Ki=(Yi=ki).D).Nb;ci=Yi.R;var Ki=Ki.wa[Ki.Y+Is],Ys=Yi.sa,co=Yi.ta+16*Vi*ci+16*Is,Ci=Ki.dd,Us=Ki.tc;if(Us!=0)if(t(3<=Us),Yi.L==1)0<Is&&Bi(Ys,co,ci,Us+4),Ki.La&&Ir(Ys,co,ci,Us),0<Js&&Ai(Ys,co,ci,Us+4),Ki.La&&Zi(Ys,co,ci,Us);else{var Eo=Yi.B,uo=Yi.qa,Fo=Yi.ra+8*Vi*Eo+8*Is,zo=Yi.Ha,Yi=Yi.Ia+8*Vi*Eo+8*Is;Vi=Ki.ld,0<Is&&(Rs(Ys,co,ci,Us+4,Ci,Vi),Ao(uo,Fo,zo,Yi,Eo,Us+4,Ci,Vi)),Ki.La&&(zi(Ys,co,ci,Us,Ci,Vi),Ii(uo,Fo,zo,Yi,Eo,Us,Ci,Vi)),0<Js&&(Oo(Ys,co,ci,Us+4,Ci,Vi),hA(uo,Fo,zo,Yi,Eo,Us+4,Ci,Vi)),Ki.La&&(Ho(Ys,co,ci,Us,Ci,Vi),Pr(uo,Fo,zo,Yi,Eo,Us,Ci,Vi))}}if(Ye.ia&&alert("todo:DitherRow"),At.put!=null){if(Un=16*ri,ri=16*(ri+1),As?(At.y=Ye.sa,At.O=Ye.ta+li,At.f=Ye.qa,At.N=Ye.ra+ps,At.ea=Ye.Ha,At.W=Ye.Ia+ps):(Un-=zn,At.y=kr,At.O=Fn,At.f=Nr,At.N=Wt,At.ea=fi,At.W=di),hr||(ri-=zn),ri>At.o&&(ri=At.o),At.F=null,At.J=null,Ye.Fa!=null&&0<Ye.Fa.length&&Un<ri&&(At.J=xi(Ye,At,Un,ri-Un),At.F=Ye.mb,At.F==null&&At.F.length==0)){Yt=bi(Ye,3,"Could not decode alpha data.");break e}Un<At.j&&(zn=At.j-Un,Un=At.j,t(!(1&zn)),At.O+=Ye.R*zn,At.N+=Ye.B*(zn>>1),At.W+=Ye.B*(zn>>1),At.F!=null&&(At.J+=At.width*zn)),Un<ri&&(At.O+=At.v,At.N+=At.v>>1,At.W+=At.v>>1,At.F!=null&&(At.J+=At.v),At.ka=Un-At.j,At.U=At.va-At.v,At.T=ri-Un,Yt=At.put(At))}Vt+1!=Ye.Ic||hr||(s(Ye.sa,Ye.ta-ir,kr,Fn+16*Ye.R,ir),s(Ye.qa,Ye.ra-Dr,Nr,Wt+8*Ye.B,Dr),s(Ye.Ha,Ye.Ia-Dr,fi,di+8*Ye.B,Dr))}if(!Yt)return bi(pt,6,"Output aborted.")}return 1}(b,L)),L.bc!=null&&L.bc(L),j&=1}return j?(b.cb=0,j):0}function gs(b,L,j,W,ae){ae=b[L+j+32*W]+(ae>>3),b[L+j+32*W]=-256&ae?0>ae?0:255:ae}function Ri(b,L,j,W,ae,de){gs(b,L,0,j,W+ae),gs(b,L,1,j,W+de),gs(b,L,2,j,W-de),gs(b,L,3,j,W-ae)}function Xi(b){return(20091*b>>16)+b}function vo(b,L,j,W){var ae,de=0,ge=c(16);for(ae=0;4>ae;++ae){var xe=b[L+0]+b[L+8],Ie=b[L+0]-b[L+8],Ne=(35468*b[L+4]>>16)-Xi(b[L+12]),ft=Xi(b[L+4])+(35468*b[L+12]>>16);ge[de+0]=xe+ft,ge[de+1]=Ie+Ne,ge[de+2]=Ie-Ne,ge[de+3]=xe-ft,de+=4,L++}for(ae=de=0;4>ae;++ae)xe=(b=ge[de+0]+4)+ge[de+8],Ie=b-ge[de+8],Ne=(35468*ge[de+4]>>16)-Xi(ge[de+12]),gs(j,W,0,0,xe+(ft=Xi(ge[de+4])+(35468*ge[de+12]>>16))),gs(j,W,1,0,Ie+Ne),gs(j,W,2,0,Ie-Ne),gs(j,W,3,0,xe-ft),de++,W+=32}function nA(b,L,j,W){var ae=b[L+0]+4,de=35468*b[L+4]>>16,ge=Xi(b[L+4]),xe=35468*b[L+1]>>16;Ri(j,W,0,ae+ge,b=Xi(b[L+1]),xe),Ri(j,W,1,ae+de,b,xe),Ri(j,W,2,ae-de,b,xe),Ri(j,W,3,ae-ge,b,xe)}function EA(b,L,j,W,ae){vo(b,L,j,W),ae&&vo(b,L+16,j,W+4)}function sa(b,L,j,W){ZA(b,L+0,j,W,1),ZA(b,L+32,j,W+128,1)}function bs(b,L,j,W){var ae;for(b=b[L+0]+4,ae=0;4>ae;++ae)for(L=0;4>L;++L)gs(j,W,L,ae,b)}function xs(b,L,j,W){b[L+0]&&fs(b,L+0,j,W),b[L+16]&&fs(b,L+16,j,W+4),b[L+32]&&fs(b,L+32,j,W+128),b[L+48]&&fs(b,L+48,j,W+128+4)}function $a(b,L,j,W){var ae,de=c(16);for(ae=0;4>ae;++ae){var ge=b[L+0+ae]+b[L+12+ae],xe=b[L+4+ae]+b[L+8+ae],Ie=b[L+4+ae]-b[L+8+ae],Ne=b[L+0+ae]-b[L+12+ae];de[0+ae]=ge+xe,de[8+ae]=ge-xe,de[4+ae]=Ne+Ie,de[12+ae]=Ne-Ie}for(ae=0;4>ae;++ae)ge=(b=de[0+4*ae]+3)+de[3+4*ae],xe=de[1+4*ae]+de[2+4*ae],Ie=de[1+4*ae]-de[2+4*ae],Ne=b-de[3+4*ae],j[W+0]=ge+xe>>3,j[W+16]=Ne+Ie>>3,j[W+32]=ge-xe>>3,j[W+48]=Ne-Ie>>3,W+=64}function aa(b,L,j){var W,ae=L-32,de=Zs,ge=255-b[ae-1];for(W=0;W<j;++W){var xe,Ie=de,Ne=ge+b[L-1];for(xe=0;xe<j;++xe)b[L+xe]=Ie[Ne+b[ae+xe]];L+=32}}function Mo(b,L){aa(b,L,4)}function Qa(b,L){aa(b,L,8)}function Do(b,L){aa(b,L,16)}function oa(b,L){var j;for(j=0;16>j;++j)s(b,L+32*j,b,L-32,16)}function qs(b,L){var j;for(j=16;0<j;--j)l(b,L,b[L-1],16),L+=32}function si(b,L,j){var W;for(W=0;16>W;++W)l(L,j+32*W,b,16)}function Bs(b,L){var j,W=16;for(j=0;16>j;++j)W+=b[L-1+32*j]+b[L+j-32];si(W>>5,b,L)}function ys(b,L){var j,W=8;for(j=0;16>j;++j)W+=b[L-1+32*j];si(W>>4,b,L)}function iA(b,L){var j,W=8;for(j=0;16>j;++j)W+=b[L+j-32];si(W>>4,b,L)}function sA(b,L){si(128,b,L)}function Cn(b,L,j){return b+2*L+j+2>>2}function GA(b,L){var j,W=L-32;for(W=new Uint8Array([Cn(b[W-1],b[W+0],b[W+1]),Cn(b[W+0],b[W+1],b[W+2]),Cn(b[W+1],b[W+2],b[W+3]),Cn(b[W+2],b[W+3],b[W+4])]),j=0;4>j;++j)s(b,L+32*j,W,0,W.length)}function ml(b,L){var j=b[L-1],W=b[L-1+32],ae=b[L-1+64],de=b[L-1+96];rt(b,L+0,16843009*Cn(b[L-1-32],j,W)),rt(b,L+32,16843009*Cn(j,W,ae)),rt(b,L+64,16843009*Cn(W,ae,de)),rt(b,L+96,16843009*Cn(ae,de,de))}function Pa(b,L){var j,W=4;for(j=0;4>j;++j)W+=b[L+j-32]+b[L-1+32*j];for(W>>=3,j=0;4>j;++j)l(b,L+32*j,W,4)}function _o(b,L){var j=b[L-1+0],W=b[L-1+32],ae=b[L-1+64],de=b[L-1-32],ge=b[L+0-32],xe=b[L+1-32],Ie=b[L+2-32],Ne=b[L+3-32];b[L+0+96]=Cn(W,ae,b[L-1+96]),b[L+1+96]=b[L+0+64]=Cn(j,W,ae),b[L+2+96]=b[L+1+64]=b[L+0+32]=Cn(de,j,W),b[L+3+96]=b[L+2+64]=b[L+1+32]=b[L+0+0]=Cn(ge,de,j),b[L+3+64]=b[L+2+32]=b[L+1+0]=Cn(xe,ge,de),b[L+3+32]=b[L+2+0]=Cn(Ie,xe,ge),b[L+3+0]=Cn(Ne,Ie,xe)}function aA(b,L){var j=b[L+1-32],W=b[L+2-32],ae=b[L+3-32],de=b[L+4-32],ge=b[L+5-32],xe=b[L+6-32],Ie=b[L+7-32];b[L+0+0]=Cn(b[L+0-32],j,W),b[L+1+0]=b[L+0+32]=Cn(j,W,ae),b[L+2+0]=b[L+1+32]=b[L+0+64]=Cn(W,ae,de),b[L+3+0]=b[L+2+32]=b[L+1+64]=b[L+0+96]=Cn(ae,de,ge),b[L+3+32]=b[L+2+64]=b[L+1+96]=Cn(de,ge,xe),b[L+3+64]=b[L+2+96]=Cn(ge,xe,Ie),b[L+3+96]=Cn(xe,Ie,Ie)}function wo(b,L){var j=b[L-1+0],W=b[L-1+32],ae=b[L-1+64],de=b[L-1-32],ge=b[L+0-32],xe=b[L+1-32],Ie=b[L+2-32],Ne=b[L+3-32];b[L+0+0]=b[L+1+64]=de+ge+1>>1,b[L+1+0]=b[L+2+64]=ge+xe+1>>1,b[L+2+0]=b[L+3+64]=xe+Ie+1>>1,b[L+3+0]=Ie+Ne+1>>1,b[L+0+96]=Cn(ae,W,j),b[L+0+64]=Cn(W,j,de),b[L+0+32]=b[L+1+96]=Cn(j,de,ge),b[L+1+32]=b[L+2+96]=Cn(de,ge,xe),b[L+2+32]=b[L+3+96]=Cn(ge,xe,Ie),b[L+3+32]=Cn(xe,Ie,Ne)}function gt(b,L){var j=b[L+0-32],W=b[L+1-32],ae=b[L+2-32],de=b[L+3-32],ge=b[L+4-32],xe=b[L+5-32],Ie=b[L+6-32],Ne=b[L+7-32];b[L+0+0]=j+W+1>>1,b[L+1+0]=b[L+0+64]=W+ae+1>>1,b[L+2+0]=b[L+1+64]=ae+de+1>>1,b[L+3+0]=b[L+2+64]=de+ge+1>>1,b[L+0+32]=Cn(j,W,ae),b[L+1+32]=b[L+0+96]=Cn(W,ae,de),b[L+2+32]=b[L+1+96]=Cn(ae,de,ge),b[L+3+32]=b[L+2+96]=Cn(de,ge,xe),b[L+3+64]=Cn(ge,xe,Ie),b[L+3+96]=Cn(xe,Ie,Ne)}function Mn(b,L){var j=b[L-1+0],W=b[L-1+32],ae=b[L-1+64],de=b[L-1+96];b[L+0+0]=j+W+1>>1,b[L+2+0]=b[L+0+32]=W+ae+1>>1,b[L+2+32]=b[L+0+64]=ae+de+1>>1,b[L+1+0]=Cn(j,W,ae),b[L+3+0]=b[L+1+32]=Cn(W,ae,de),b[L+3+32]=b[L+1+64]=Cn(ae,de,de),b[L+3+64]=b[L+2+64]=b[L+0+96]=b[L+1+96]=b[L+2+96]=b[L+3+96]=de}function Ds(b,L){var j=b[L-1+0],W=b[L-1+32],ae=b[L-1+64],de=b[L-1+96],ge=b[L-1-32],xe=b[L+0-32],Ie=b[L+1-32],Ne=b[L+2-32];b[L+0+0]=b[L+2+32]=j+ge+1>>1,b[L+0+32]=b[L+2+64]=W+j+1>>1,b[L+0+64]=b[L+2+96]=ae+W+1>>1,b[L+0+96]=de+ae+1>>1,b[L+3+0]=Cn(xe,Ie,Ne),b[L+2+0]=Cn(ge,xe,Ie),b[L+1+0]=b[L+3+32]=Cn(j,ge,xe),b[L+1+32]=b[L+3+64]=Cn(W,j,ge),b[L+1+64]=b[L+3+96]=Cn(ae,W,j),b[L+1+96]=Cn(de,ae,W)}function Oi(b,L){var j;for(j=0;8>j;++j)s(b,L+32*j,b,L-32,8)}function Qs(b,L){var j;for(j=0;8>j;++j)l(b,L,b[L-1],8),L+=32}function ya(b,L,j){var W;for(W=0;8>W;++W)l(L,j+32*W,b,8)}function eo(b,L){var j,W=8;for(j=0;8>j;++j)W+=b[L+j-32]+b[L-1+32*j];ya(W>>4,b,L)}function Cs(b,L){var j,W=4;for(j=0;8>j;++j)W+=b[L+j-32];ya(W>>3,b,L)}function Aa(b,L){var j,W=4;for(j=0;8>j;++j)W+=b[L-1+32*j];ya(W>>3,b,L)}function to(b,L){ya(128,b,L)}function va(b,L,j){var W=b[L-j],ae=b[L+0],de=3*(ae-W)+YA[1020+b[L-2*j]-b[L+j]],ge=$A[112+(de+4>>3)];b[L-j]=Zs[255+W+$A[112+(de+3>>3)]],b[L+0]=Zs[255+ae-ge]}function qA(b,L,j,W){var ae=b[L+0],de=b[L+j];return Di[255+b[L-2*j]-b[L-j]]>W||Di[255+de-ae]>W}function ts(b,L,j,W){return 4*Di[255+b[L-j]-b[L+0]]+Di[255+b[L-2*j]-b[L+j]]<=W}function FA(b,L,j,W,ae){var de=b[L-3*j],ge=b[L-2*j],xe=b[L-j],Ie=b[L+0],Ne=b[L+j],ft=b[L+2*j],It=b[L+3*j];return 4*Di[255+xe-Ie]+Di[255+ge-Ne]>W?0:Di[255+b[L-4*j]-de]<=ae&&Di[255+de-ge]<=ae&&Di[255+ge-xe]<=ae&&Di[255+It-ft]<=ae&&Di[255+ft-Ne]<=ae&&Di[255+Ne-Ie]<=ae}function ro(b,L,j,W){var ae=2*W+1;for(W=0;16>W;++W)ts(b,L+W,j,ae)&&va(b,L+W,j)}function no(b,L,j,W){var ae=2*W+1;for(W=0;16>W;++W)ts(b,L+W*j,1,ae)&&va(b,L+W*j,1)}function io(b,L,j,W){var ae;for(ae=3;0<ae;--ae)ro(b,L+=4*j,j,W)}function Wl(b,L,j,W){var ae;for(ae=3;0<ae;--ae)no(b,L+=4,j,W)}function No(b,L,j,W,ae,de,ge,xe){for(de=2*de+1;0<ae--;){if(FA(b,L,j,de,ge))if(qA(b,L,j,xe))va(b,L,j);else{var Ie=b,Ne=L,ft=j,It=Ie[Ne-2*ft],Ft=Ie[Ne-ft],pt=Ie[Ne+0],Ar=Ie[Ne+ft],Vt=Ie[Ne+2*ft],Ye=27*(Yt=YA[1020+3*(pt-Ft)+YA[1020+It-Ar]])+63>>7,At=18*Yt+63>>7,Yt=9*Yt+63>>7;Ie[Ne-3*ft]=Zs[255+Ie[Ne-3*ft]+Yt],Ie[Ne-2*ft]=Zs[255+It+At],Ie[Ne-ft]=Zs[255+Ft+Ye],Ie[Ne+0]=Zs[255+pt-Ye],Ie[Ne+ft]=Zs[255+Ar-At],Ie[Ne+2*ft]=Zs[255+Vt-Yt]}L+=W}}function vs(b,L,j,W,ae,de,ge,xe){for(de=2*de+1;0<ae--;){if(FA(b,L,j,de,ge))if(qA(b,L,j,xe))va(b,L,j);else{var Ie=b,Ne=L,ft=j,It=Ie[Ne-ft],Ft=Ie[Ne+0],pt=Ie[Ne+ft],Ar=$A[112+((Vt=3*(Ft-It))+4>>3)],Vt=$A[112+(Vt+3>>3)],Ye=Ar+1>>1;Ie[Ne-2*ft]=Zs[255+Ie[Ne-2*ft]+Ye],Ie[Ne-ft]=Zs[255+It+Vt],Ie[Ne+0]=Zs[255+Ft-Ar],Ie[Ne+ft]=Zs[255+pt-Ye]}L+=W}}function oA(b,L,j,W,ae,de){No(b,L,j,1,16,W,ae,de)}function AA(b,L,j,W,ae,de){No(b,L,1,j,16,W,ae,de)}function _c(b,L,j,W,ae,de){var ge;for(ge=3;0<ge;--ge)vs(b,L+=4*j,j,1,16,W,ae,de)}function _a(b,L,j,W,ae,de){var ge;for(ge=3;0<ge;--ge)vs(b,L+=4,1,j,16,W,ae,de)}function WA(b,L,j,W,ae,de,ge,xe){No(b,L,ae,1,8,de,ge,xe),No(j,W,ae,1,8,de,ge,xe)}function SA(b,L,j,W,ae,de,ge,xe){No(b,L,1,ae,8,de,ge,xe),No(j,W,1,ae,8,de,ge,xe)}function IA(b,L,j,W,ae,de,ge,xe){vs(b,L+4*ae,ae,1,8,de,ge,xe),vs(j,W+4*ae,ae,1,8,de,ge,xe)}function TA(b,L,j,W,ae,de,ge,xe){vs(b,L+4,1,ae,8,de,ge,xe),vs(j,W+4,1,ae,8,de,ge,xe)}function lA(){this.ba=new _i,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Cr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function UA(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function bo(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function gl(){this.ua=0,this.Wa=new ze,this.vb=new ze,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new me,this.yc=new re}function Xl(){this.xb=this.a=0,this.l=new wi,this.ca=new _i,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new ie,this.Pb=0,this.wd=new ie,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new gl,this.ab=0,this.gc=h(4,bo),this.Oc=0}function jo(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new wi,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function wa(b,L,j,W,ae,de,ge){for(b=b==null?0:b[L+0],L=0;L<ge;++L)ae[de+L]=b+j[W+L]&255,b=ae[de+L]}function XA(b,L,j,W,ae,de,ge){var xe;if(b==null)wa(null,null,j,W,ae,de,ge);else for(xe=0;xe<ge;++xe)ae[de+xe]=b[L+xe]+j[W+xe]&255}function ba(b,L,j,W,ae,de,ge){if(b==null)wa(null,null,j,W,ae,de,ge);else{var xe,Ie=b[L+0],Ne=Ie,ft=Ie;for(xe=0;xe<ge;++xe)Ne=ft+(Ie=b[L+xe])-Ne,ft=j[W+xe]+(-256&Ne?0>Ne?0:255:Ne)&255,Ne=Ie,ae[de+xe]=ft}}function xi(b,L,j,W){var ae=L.width,de=L.o;if(t(b!=null&&L!=null),0>j||0>=W||j+W>de)return null;if(!b.Cc){if(b.ga==null){var ge;if(b.ga=new jo,(ge=b.ga==null)||(ge=L.width*L.o,t(b.Gb.length==0),b.Gb=c(ge),b.Uc=0,b.Gb==null?ge=0:(b.mb=b.Gb,b.nb=b.Uc,b.rc=null,ge=1),ge=!ge),!ge){ge=b.ga;var xe=b.Fa,Ie=b.P,Ne=b.qc,ft=b.mb,It=b.nb,Ft=Ie+1,pt=Ne-1,Ar=ge.l;if(t(xe!=null&&ft!=null&&L!=null),v[0]=null,v[1]=wa,v[2]=XA,v[3]=ba,ge.ca=ft,ge.tb=It,ge.c=L.width,ge.i=L.height,t(0<ge.c&&0<ge.i),1>=Ne)L=0;else if(ge.$a=xe[Ie+0]>>0&3,ge.Z=xe[Ie+0]>>2&3,ge.Lc=xe[Ie+0]>>4&3,Ie=xe[Ie+0]>>6&3,0>ge.$a||1<ge.$a||4<=ge.Z||1<ge.Lc||Ie)L=0;else if(Ar.put=Sn,Ar.ac=xn,Ar.bc=ji,Ar.ma=ge,Ar.width=L.width,Ar.height=L.height,Ar.Da=L.Da,Ar.v=L.v,Ar.va=L.va,Ar.j=L.j,Ar.o=L.o,ge.$a)e:{t(ge.$a==1),L=qe();t:for(;;){if(L==null){L=0;break e}if(t(ge!=null),ge.mc=L,L.c=ge.c,L.i=ge.i,L.l=ge.l,L.l.ma=ge,L.l.width=ge.c,L.l.height=ge.i,L.a=0,Le(L.m,xe,Ft,pt),!ut(ge.c,ge.i,1,L,null)||(L.ab==1&&L.gc[0].hc==3&&Ee(L.s)?(ge.ic=1,xe=L.c*L.i,L.Ta=null,L.Ua=0,L.V=c(xe),L.Ba=0,L.V==null?(L.a=1,L=0):L=1):(ge.ic=0,L=Ot(L,ge.c)),!L))break t;L=1;break e}ge.mc=null,L=0}else L=pt>=ge.c*ge.i;ge=!L}if(ge)return null;b.ga.Lc!=1?b.Ga=0:W=de-j}t(b.ga!=null),t(j+W<=de);e:{if(L=(xe=b.ga).c,de=xe.l.o,xe.$a==0){if(Ft=b.rc,pt=b.Vc,Ar=b.Fa,Ie=b.P+1+j*L,Ne=b.mb,ft=b.nb+j*L,t(Ie<=b.P+b.qc),xe.Z!=0)for(t(v[xe.Z]!=null),ge=0;ge<W;++ge)v[xe.Z](Ft,pt,Ar,Ie,Ne,ft,L),Ft=Ne,pt=ft,ft+=L,Ie+=L;else for(ge=0;ge<W;++ge)s(Ne,ft,Ar,Ie,L),Ft=Ne,pt=ft,ft+=L,Ie+=L;b.rc=Ft,b.Vc=pt}else{if(t(xe.mc!=null),L=j+W,t((ge=xe.mc)!=null),t(L<=ge.i),ge.C>=L)L=1;else if(xe.ic||_t(),xe.ic){xe=ge.V,Ft=ge.Ba,pt=ge.c;var Vt=ge.i,Ye=(Ar=1,Ie=ge.$/pt,Ne=ge.$%pt,ft=ge.m,It=ge.s,ge.$),At=pt*Vt,Yt=pt*L,ir=It.wc,Wt=Ye<Yt?Te(It,Ne,Ie):null;t(Ye<=At),t(L<=Vt),t(Ee(It));t:for(;;){for(;!ft.h&&Ye<Yt;){if(Ne&ir||(Wt=Te(It,Ne,Ie)),t(Wt!=null),ot(ft),256>(Vt=Ln(Wt.G[0],Wt.H[0],ft)))xe[Ft+Ye]=Vt,++Ye,++Ne>=pt&&(Ne=0,++Ie<=L&&!(Ie%16)&&Xe(ge,Ie));else{if(!(280>Vt)){Ar=0;break t}Vt=Wi(Vt-256,ft);var Dr,kr=Ln(Wt.G[4],Wt.H[4],ft);if(ot(ft),!(Ye>=(kr=hs(pt,kr=Wi(kr,ft)))&&At-Ye>=Vt)){Ar=0;break t}for(Dr=0;Dr<Vt;++Dr)xe[Ft+Ye+Dr]=xe[Ft+Ye+Dr-kr];for(Ye+=Vt,Ne+=Vt;Ne>=pt;)Ne-=pt,++Ie<=L&&!(Ie%16)&&Xe(ge,Ie);Ye<Yt&&Ne&ir&&(Wt=Te(It,Ne,Ie))}t(ft.h==Qe(ft))}Xe(ge,Ie>L?L:Ie);break t}!Ar||ft.h&&Ye<At?(Ar=0,ge.a=ft.h?5:3):ge.$=Ye,L=Ar}else L=lt(ge,ge.V,ge.Ba,ge.c,ge.i,L,nr);if(!L){W=0;break e}}j+W>=de&&(b.Cc=1),W=1}if(!W)return null;if(b.Cc&&((W=b.ga)!=null&&(W.mc=null),b.ga=null,0<b.Ga))return alert("todo:WebPDequantizeLevels"),null}return b.nb+j*ae}function N(b,L,j,W,ae,de){for(;0<ae--;){var ge,xe=b,Ie=L+(j?1:0),Ne=b,ft=L+(j?0:3);for(ge=0;ge<W;++ge){var It=Ne[ft+4*ge];It!=255&&(It*=32897,xe[Ie+4*ge+0]=xe[Ie+4*ge+0]*It>>23,xe[Ie+4*ge+1]=xe[Ie+4*ge+1]*It>>23,xe[Ie+4*ge+2]=xe[Ie+4*ge+2]*It>>23)}L+=de}}function oe(b,L,j,W,ae){for(;0<W--;){var de;for(de=0;de<j;++de){var ge=b[L+2*de+0],xe=15&(Ne=b[L+2*de+1]),Ie=4369*xe,Ne=(240&Ne|Ne>>4)*Ie>>16;b[L+2*de+0]=(240&ge|ge>>4)*Ie>>16&240|(15&ge|ge<<4)*Ie>>16>>4&15,b[L+2*de+1]=240&Ne|xe}L+=ae}}function Me(b,L,j,W,ae,de,ge,xe){var Ie,Ne,ft=255;for(Ne=0;Ne<ae;++Ne){for(Ie=0;Ie<W;++Ie){var It=b[L+Ie];de[ge+4*Ie]=It,ft&=It}L+=j,ge+=xe}return ft!=255}function tt(b,L,j,W,ae){var de;for(de=0;de<ae;++de)j[W+de]=b[L+de]>>8}function _t(){ja=N,LA=oe,kA=Me,Zl=tt}function Jt(b,L,j){he[b]=function(W,ae,de,ge,xe,Ie,Ne,ft,It,Ft,pt,Ar,Vt,Ye,At,Yt,ir){var Wt,Dr=ir-1>>1,kr=xe[Ie+0]|Ne[ft+0]<<16,Fn=It[Ft+0]|pt[Ar+0]<<16;t(W!=null);var Nr=3*kr+Fn+131074>>2;for(L(W[ae+0],255&Nr,Nr>>16,Vt,Ye),de!=null&&(Nr=3*Fn+kr+131074>>2,L(de[ge+0],255&Nr,Nr>>16,At,Yt)),Wt=1;Wt<=Dr;++Wt){var fi=xe[Ie+Wt]|Ne[ft+Wt]<<16,di=It[Ft+Wt]|pt[Ar+Wt]<<16,hr=kr+fi+Fn+di+524296,zn=hr+2*(fi+Fn)>>3;Nr=zn+kr>>1,kr=(hr=hr+2*(kr+di)>>3)+fi>>1,L(W[ae+2*Wt-1],255&Nr,Nr>>16,Vt,Ye+(2*Wt-1)*j),L(W[ae+2*Wt-0],255&kr,kr>>16,Vt,Ye+(2*Wt-0)*j),de!=null&&(Nr=hr+Fn>>1,kr=zn+di>>1,L(de[ge+2*Wt-1],255&Nr,Nr>>16,At,Yt+(2*Wt-1)*j),L(de[ge+2*Wt+0],255&kr,kr>>16,At,Yt+(2*Wt+0)*j)),kr=fi,Fn=di}1&ir||(Nr=3*kr+Fn+131074>>2,L(W[ae+ir-1],255&Nr,Nr>>16,Vt,Ye+(ir-1)*j),de!=null&&(Nr=3*Fn+kr+131074>>2,L(de[ge+ir-1],255&Nr,Nr>>16,At,Yt+(ir-1)*j)))}}function _r(){S[lo]=M,S[_l]=q,S[Ra]=z,S[el]=J,S[fA]=se,S[QA]=pe,S[Fa]=we,S[Ui]=q,S[PA]=J,S[MA]=se,S[DA]=pe}function en(b){return b&~St?0>b?0:255:b>>wt}function En(b,L){return en((19077*b>>8)+(26149*L>>8)-14234)}function Dn(b,L,j){return en((19077*b>>8)-(6419*L>>8)-(13320*j>>8)+8708)}function Kn(b,L){return en((19077*b>>8)+(33050*L>>8)-17685)}function Wn(b,L,j,W,ae){W[ae+0]=En(b,j),W[ae+1]=Dn(b,L,j),W[ae+2]=Kn(b,L)}function pi(b,L,j,W,ae){W[ae+0]=Kn(b,L),W[ae+1]=Dn(b,L,j),W[ae+2]=En(b,j)}function mi(b,L,j,W,ae){var de=Dn(b,L,j);L=de<<3&224|Kn(b,L)>>3,W[ae+0]=248&En(b,j)|de>>5,W[ae+1]=L}function Tn(b,L,j,W,ae){var de=240&Kn(b,L)|15;W[ae+0]=240&En(b,j)|Dn(b,L,j)>>4,W[ae+1]=de}function Es(b,L,j,W,ae){W[ae+0]=255,Wn(b,L,j,W,ae+1)}function rs(b,L,j,W,ae){pi(b,L,j,W,ae),W[ae+3]=255}function Ws(b,L,j,W,ae){Wn(b,L,j,W,ae),W[ae+3]=255}function ns(b,L){return 0>b?0:b>L?L:b}function Si(b,L,j){he[b]=function(W,ae,de,ge,xe,Ie,Ne,ft,It){for(var Ft=ft+(-2&It)*j;ft!=Ft;)L(W[ae+0],de[ge+0],xe[Ie+0],Ne,ft),L(W[ae+1],de[ge+0],xe[Ie+0],Ne,ft+j),ae+=2,++ge,++Ie,ft+=2*j;1&It&&L(W[ae+0],de[ge+0],xe[Ie+0],Ne,ft)}}function yl(b,L,j){return j==0?b==0?L==0?6:5:L==0?4:0:j}function la(b,L,j,W,ae){switch(b>>>30){case 3:ZA(L,j,W,ae,0);break;case 2:Da(L,j,W,ae);break;case 1:fs(L,j,W,ae)}}function Pi(b,L){var j,W,ae=L.M,de=L.Nb,ge=b.oc,xe=b.pc+40,Ie=b.oc,Ne=b.pc+584,ft=b.oc,It=b.pc+600;for(j=0;16>j;++j)ge[xe+32*j-1]=129;for(j=0;8>j;++j)Ie[Ne+32*j-1]=129,ft[It+32*j-1]=129;for(0<ae?ge[xe-1-32]=Ie[Ne-1-32]=ft[It-1-32]=129:(l(ge,xe-32-1,127,21),l(Ie,Ne-32-1,127,9),l(ft,It-32-1,127,9)),W=0;W<b.za;++W){var Ft=L.ya[L.aa+W];if(0<W){for(j=-1;16>j;++j)s(ge,xe+32*j-4,ge,xe+32*j+12,4);for(j=-1;8>j;++j)s(Ie,Ne+32*j-4,Ie,Ne+32*j+4,4),s(ft,It+32*j-4,ft,It+32*j+4,4)}var pt=b.Gd,Ar=b.Hd+W,Vt=Ft.ad,Ye=Ft.Hc;if(0<ae&&(s(ge,xe-32,pt[Ar].y,0,16),s(Ie,Ne-32,pt[Ar].f,0,8),s(ft,It-32,pt[Ar].ea,0,8)),Ft.Za){var At=ge,Yt=xe-32+16;for(0<ae&&(W>=b.za-1?l(At,Yt,pt[Ar].y[15],4):s(At,Yt,pt[Ar+1].y,0,4)),j=0;4>j;j++)At[Yt+128+j]=At[Yt+256+j]=At[Yt+384+j]=At[Yt+0+j];for(j=0;16>j;++j,Ye<<=2)At=ge,Yt=xe+Rr[j],g[Ft.Ob[j]](At,Yt),la(Ye,Vt,16*+j,At,Yt)}else if(At=yl(W,ae,Ft.Ob[0]),ha[At](ge,xe),Ye!=0)for(j=0;16>j;++j,Ye<<=2)la(Ye,Vt,16*+j,ge,xe+Rr[j]);for(j=Ft.Gc,At=yl(W,ae,Ft.Dd),i[At](Ie,Ne),i[At](ft,It),Ye=Vt,At=Ie,Yt=Ne,255&(Ft=j>>0)&&(170&Ft?Na(Ye,256,At,Yt):Ea(Ye,256,At,Yt)),Ft=ft,Ye=It,255&(j>>=8)&&(170&j?Na(Vt,320,Ft,Ye):Ea(Vt,320,Ft,Ye)),ae<b.Ub-1&&(s(pt[Ar].y,0,ge,xe+480,16),s(pt[Ar].f,0,Ie,Ne+224,8),s(pt[Ar].ea,0,ft,It+224,8)),j=8*de*b.B,pt=b.sa,Ar=b.ta+16*W+16*de*b.R,Vt=b.qa,Ft=b.ra+8*W+j,Ye=b.Ha,At=b.Ia+8*W+j,j=0;16>j;++j)s(pt,Ar+j*b.R,ge,xe+32*j,16);for(j=0;8>j;++j)s(Vt,Ft+j*b.B,Ie,Ne+32*j,8),s(Ye,At+j*b.B,ft,It+32*j,8)}}function xa(b,L,j,W,ae,de,ge,xe,Ie){var Ne=[0],ft=[0],It=0,Ft=Ie!=null?Ie.kd:0,pt=Ie??new UA;if(b==null||12>j)return 7;pt.data=b,pt.w=L,pt.ha=j,L=[L],j=[j],pt.gb=[pt.gb];e:{var Ar=L,Vt=j,Ye=pt.gb;if(t(b!=null),t(Vt!=null),t(Ye!=null),Ye[0]=0,12<=Vt[0]&&!r(b,Ar[0],"RIFF")){if(r(b,Ar[0]+8,"WEBP")){Ye=3;break e}var At=Nt(b,Ar[0]+4);if(12>At||4294967286<At){Ye=3;break e}if(Ft&&At>Vt[0]-8){Ye=7;break e}Ye[0]=At,Ar[0]+=12,Vt[0]-=12}Ye=0}if(Ye!=0)return Ye;for(At=0<pt.gb[0],j=j[0];;){e:{var Yt=b;Vt=L,Ye=j;var ir=Ne,Wt=ft,Dr=Ar=[0];if((Nr=It=[It])[0]=0,8>Ye[0])Ye=7;else{if(!r(Yt,Vt[0],"VP8X")){if(Nt(Yt,Vt[0]+4)!=10){Ye=3;break e}if(18>Ye[0]){Ye=7;break e}var kr=Nt(Yt,Vt[0]+8),Fn=1+ht(Yt,Vt[0]+12);if(2147483648<=Fn*(Yt=1+ht(Yt,Vt[0]+15))){Ye=3;break e}Dr!=null&&(Dr[0]=kr),ir!=null&&(ir[0]=Fn),Wt!=null&&(Wt[0]=Yt),Vt[0]+=18,Ye[0]-=18,Nr[0]=1}Ye=0}}if(It=It[0],Ar=Ar[0],Ye!=0)return Ye;if(Vt=!!(2&Ar),!At&&It)return 3;if(de!=null&&(de[0]=!!(16&Ar)),ge!=null&&(ge[0]=Vt),xe!=null&&(xe[0]=0),ge=Ne[0],Ar=ft[0],It&&Vt&&Ie==null){Ye=0;break}if(4>j){Ye=7;break}if(At&&It||!At&&!It&&!r(b,L[0],"ALPH")){j=[j],pt.na=[pt.na],pt.P=[pt.P],pt.Sa=[pt.Sa];e:{kr=b,Ye=L,At=j;var Nr=pt.gb;ir=pt.na,Wt=pt.P,Dr=pt.Sa,Fn=22,t(kr!=null),t(At!=null),Yt=Ye[0];var fi=At[0];for(t(ir!=null),t(Dr!=null),ir[0]=null,Wt[0]=null,Dr[0]=0;;){if(Ye[0]=Yt,At[0]=fi,8>fi){Ye=7;break e}var di=Nt(kr,Yt+4);if(4294967286<di){Ye=3;break e}var hr=8+di+1&-2;if(Fn+=hr,0<Nr&&Fn>Nr){Ye=3;break e}if(!r(kr,Yt,"VP8 ")||!r(kr,Yt,"VP8L")){Ye=0;break e}if(fi[0]<hr){Ye=7;break e}r(kr,Yt,"ALPH")||(ir[0]=kr,Wt[0]=Yt+8,Dr[0]=di),Yt+=hr,fi-=hr}}if(j=j[0],pt.na=pt.na[0],pt.P=pt.P[0],pt.Sa=pt.Sa[0],Ye!=0)break}j=[j],pt.Ja=[pt.Ja],pt.xa=[pt.xa];e:if(Nr=b,Ye=L,At=j,ir=pt.gb[0],Wt=pt.Ja,Dr=pt.xa,kr=Ye[0],Yt=!r(Nr,kr,"VP8 "),Fn=!r(Nr,kr,"VP8L"),t(Nr!=null),t(At!=null),t(Wt!=null),t(Dr!=null),8>At[0])Ye=7;else{if(Yt||Fn){if(Nr=Nt(Nr,kr+4),12<=ir&&Nr>ir-12){Ye=3;break e}if(Ft&&Nr>At[0]-8){Ye=7;break e}Wt[0]=Nr,Ye[0]+=8,At[0]-=8,Dr[0]=Fn}else Dr[0]=5<=At[0]&&Nr[kr+0]==47&&!(Nr[kr+4]>>5),Wt[0]=At[0];Ye=0}if(j=j[0],pt.Ja=pt.Ja[0],pt.xa=pt.xa[0],L=L[0],Ye!=0)break;if(4294967286<pt.Ja)return 3;if(xe==null||Vt||(xe[0]=pt.xa?2:1),ge=[ge],Ar=[Ar],pt.xa){if(5>j){Ye=7;break}xe=ge,Ft=Ar,Vt=de,b==null||5>j?b=0:5<=j&&b[L+0]==47&&!(b[L+4]>>5)?(At=[0],Nr=[0],ir=[0],Le(Wt=new ie,b,L,j),tn(Wt,At,Nr,ir)?(xe!=null&&(xe[0]=At[0]),Ft!=null&&(Ft[0]=Nr[0]),Vt!=null&&(Vt[0]=ir[0]),b=1):b=0):b=0}else{if(10>j){Ye=7;break}xe=Ar,b==null||10>j||!Yn(b,L+3,j-3)?b=0:(Ft=b[L+0]|b[L+1]<<8|b[L+2]<<16,Vt=16383&(b[L+7]<<8|b[L+6]),b=16383&(b[L+9]<<8|b[L+8]),1&Ft||3<(Ft>>1&7)||!(Ft>>4&1)||Ft>>5>=pt.Ja||!Vt||!b?b=0:(ge&&(ge[0]=Vt),xe&&(xe[0]=b),b=1))}if(!b||(ge=ge[0],Ar=Ar[0],It&&(Ne[0]!=ge||ft[0]!=Ar)))return 3;Ie!=null&&(Ie[0]=pt,Ie.offset=L-Ie.w,t(4294967286>L-Ie.w),t(Ie.offset==Ie.ha-j));break}return Ye==0||Ye==7&&It&&Ie==null?(de!=null&&(de[0]|=pt.na!=null&&0<pt.na.length),W!=null&&(W[0]=ge),ae!=null&&(ae[0]=Ar),0):Ye}function Mi(b,L,j){var W=L.width,ae=L.height,de=0,ge=0,xe=W,Ie=ae;if(L.Da=b!=null&&0<b.Da,L.Da&&(xe=b.cd,Ie=b.bd,de=b.v,ge=b.j,11>j||(de&=-2,ge&=-2),0>de||0>ge||0>=xe||0>=Ie||de+xe>W||ge+Ie>ae))return 0;if(L.v=de,L.j=ge,L.va=de+xe,L.o=ge+Ie,L.U=xe,L.T=Ie,L.da=b!=null&&0<b.da,L.da){if(!yr(xe,Ie,j=[b.ib],de=[b.hb]))return 0;L.ib=j[0],L.hb=de[0]}return L.ob=b!=null&&b.ob,L.Kb=b==null||!b.Sd,L.da&&(L.ob=L.ib<3*W/4&&L.hb<3*ae/4,L.Kb=0),1}function Ma(b){if(b==null)return 2;if(11>b.S){var L=b.f.RGBA;L.fb+=(b.height-1)*L.A,L.A=-L.A}else L=b.f.kb,b=b.height,L.O+=(b-1)*L.fa,L.fa=-L.fa,L.N+=(b-1>>1)*L.Ab,L.Ab=-L.Ab,L.W+=(b-1>>1)*L.Db,L.Db=-L.Db,L.F!=null&&(L.J+=(b-1)*L.lb,L.lb=-L.lb);return 0}function Ba(b,L,j,W){if(W==null||0>=b||0>=L)return 2;if(j!=null){if(j.Da){var ae=j.cd,de=j.bd,ge=-2&j.v,xe=-2&j.j;if(0>ge||0>xe||0>=ae||0>=de||ge+ae>b||xe+de>L)return 2;b=ae,L=de}if(j.da){if(!yr(b,L,ae=[j.ib],de=[j.hb]))return 2;b=ae[0],L=de[0]}}W.width=b,W.height=L;e:{var Ie=W.width,Ne=W.height;if(b=W.S,0>=Ie||0>=Ne||!(b>=lo&&13>b))b=2;else{if(0>=W.Rd&&W.sd==null){ge=de=ae=L=0;var ft=(xe=Ie*jn[b])*Ne;if(11>b||(de=(Ne+1)/2*(L=(Ie+1)/2),b==12&&(ge=(ae=Ie)*Ne)),(Ne=c(ft+2*de+ge))==null){b=1;break e}W.sd=Ne,11>b?((Ie=W.f.RGBA).eb=Ne,Ie.fb=0,Ie.A=xe,Ie.size=ft):((Ie=W.f.kb).y=Ne,Ie.O=0,Ie.fa=xe,Ie.Fd=ft,Ie.f=Ne,Ie.N=0+ft,Ie.Ab=L,Ie.Cd=de,Ie.ea=Ne,Ie.W=0+ft+de,Ie.Db=L,Ie.Ed=de,b==12&&(Ie.F=Ne,Ie.J=0+ft+2*de),Ie.Tc=ge,Ie.lb=ae)}if(L=1,ae=W.S,de=W.width,ge=W.height,ae>=lo&&13>ae)if(11>ae)b=W.f.RGBA,L&=(xe=Math.abs(b.A))*(ge-1)+de<=b.size,L&=xe>=de*jn[ae],L&=b.eb!=null;else{b=W.f.kb,xe=(de+1)/2,ft=(ge+1)/2,Ie=Math.abs(b.fa),Ne=Math.abs(b.Ab);var It=Math.abs(b.Db),Ft=Math.abs(b.lb),pt=Ft*(ge-1)+de;L&=Ie*(ge-1)+de<=b.Fd,L&=Ne*(ft-1)+xe<=b.Cd,L=(L&=It*(ft-1)+xe<=b.Ed)&Ie>=de&Ne>=xe&It>=xe,L&=b.y!=null,L&=b.f!=null,L&=b.ea!=null,ae==12&&(L&=Ft>=de,L&=pt<=b.Tc,L&=b.F!=null)}else L=0;b=L?0:2}}return b!=0||j!=null&&j.fd&&(b=Ma(W)),b}var is=64,hi=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],cA=24,so=32,uA=8,Fs=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];pr("Predictor0","PredictorAdd0"),he.Predictor0=function(){return 4278190080},he.Predictor1=function(b){return b},he.Predictor2=function(b,L,j){return L[j+0]},he.Predictor3=function(b,L,j){return L[j+1]},he.Predictor4=function(b,L,j){return L[j-1]},he.Predictor5=function(b,L,j){return vr(vr(b,L[j+1]),L[j+0])},he.Predictor6=function(b,L,j){return vr(b,L[j-1])},he.Predictor7=function(b,L,j){return vr(b,L[j+0])},he.Predictor8=function(b,L,j){return vr(L[j-1],L[j+0])},he.Predictor9=function(b,L,j){return vr(L[j+0],L[j+1])},he.Predictor10=function(b,L,j){return vr(vr(b,L[j-1]),vr(L[j+0],L[j+1]))},he.Predictor11=function(b,L,j){var W=L[j+0];return 0>=xr(W>>24&255,b>>24&255,(L=L[j-1])>>24&255)+xr(W>>16&255,b>>16&255,L>>16&255)+xr(W>>8&255,b>>8&255,L>>8&255)+xr(255&W,255&b,255&L)?W:b},he.Predictor12=function(b,L,j){var W=L[j+0];return(Gr((b>>24&255)+(W>>24&255)-((L=L[j-1])>>24&255))<<24|Gr((b>>16&255)+(W>>16&255)-(L>>16&255))<<16|Gr((b>>8&255)+(W>>8&255)-(L>>8&255))<<8|Gr((255&b)+(255&W)-(255&L)))>>>0},he.Predictor13=function(b,L,j){var W=L[j-1];return(rr((b=vr(b,L[j+0]))>>24&255,W>>24&255)<<24|rr(b>>16&255,W>>16&255)<<16|rr(b>>8&255,W>>8&255)<<8|rr(b>>0&255,W>>0&255))>>>0};var xo=he.PredictorAdd0;he.PredictorAdd1=Zr,pr("Predictor2","PredictorAdd2"),pr("Predictor3","PredictorAdd3"),pr("Predictor4","PredictorAdd4"),pr("Predictor5","PredictorAdd5"),pr("Predictor6","PredictorAdd6"),pr("Predictor7","PredictorAdd7"),pr("Predictor8","PredictorAdd8"),pr("Predictor9","PredictorAdd9"),pr("Predictor10","PredictorAdd10"),pr("Predictor11","PredictorAdd11"),pr("Predictor12","PredictorAdd12"),pr("Predictor13","PredictorAdd13");var ao=he.PredictorAdd2;bt("ColorIndexInverseTransform","MapARGB","32b",function(b){return b>>8&255},function(b){return b}),bt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(b){return b},function(b){return b>>8&255});var Ro,Hi=he.ColorIndexInverseTransform,Ns=he.MapARGB,oo=he.VP8LColorIndexInverseTransformAlpha,ss=he.MapAlpha,js=he.VP8LPredictorsAdd=[];js.length=16,(he.VP8LPredictors=[]).length=16,(he.VP8LPredictorsAdd_C=[]).length=16,(he.VP8LPredictors_C=[]).length=16;var Ss,Ca,ca,Xs,as,ua,gi,ZA,Da,Na,fs,Ea,Oo,Rs,hA,Ao,Ho,zi,Pr,Ii,Ai,Bi,Zi,Ir,ja,LA,kA,Zl,JA=c(511),wc=c(2041),zc=c(225),vl=c(767),Jl=0,YA=wc,$A=zc,Zs=vl,Di=JA,lo=0,_l=1,Ra=2,el=3,fA=4,QA=5,Fa=6,Ui=7,PA=8,MA=9,DA=10,Vc=[2,3,7],Kc=[3,3,11],Gc=[280,256,256,256,40],Bo=[0,1,1,1,0],dA=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],sn=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],vn=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],tl=8,wl=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Sa=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],os=null,pA=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Co=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],bc=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],mA=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Ji=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],ds=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],xc=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ha=[],g=[],i=[],u=1,m=2,v=[],S=[];Jt("UpsampleRgbLinePair",Wn,3),Jt("UpsampleBgrLinePair",pi,3),Jt("UpsampleRgbaLinePair",Ws,4),Jt("UpsampleBgraLinePair",rs,4),Jt("UpsampleArgbLinePair",Es,4),Jt("UpsampleRgba4444LinePair",Tn,2),Jt("UpsampleRgb565LinePair",mi,2);var M=he.UpsampleRgbLinePair,z=he.UpsampleBgrLinePair,q=he.UpsampleRgbaLinePair,J=he.UpsampleBgraLinePair,se=he.UpsampleArgbLinePair,pe=he.UpsampleRgba4444LinePair,we=he.UpsampleRgb565LinePair,Ve=16,De=1<<Ve-1,Oe=-227,ct=482,wt=6,St=(256<<wt)-1,We=0,Rt=c(256),Mt=c(256),Xt=c(256),Zt=c(256),ur=c(ct-Oe),qt=c(ct-Oe);Si("YuvToRgbRow",Wn,3),Si("YuvToBgrRow",pi,3),Si("YuvToRgbaRow",Ws,4),Si("YuvToBgraRow",rs,4),Si("YuvToArgbRow",Es,4),Si("YuvToRgba4444Row",Tn,2),Si("YuvToRgb565Row",mi,2);var Rr=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Ur=[0,2,8],qr=[8,7,6,4,4,2,2,2,1,1,1,1],Pn=1;this.WebPDecodeRGBA=function(b,L,j,W,ae){var de=_l,ge=new lA,xe=new _i;ge.ba=xe,xe.S=de,xe.width=[xe.width],xe.height=[xe.height];var Ie=xe.width,Ne=xe.height,ft=new br;if(ft==null||b==null)var It=2;else t(ft!=null),It=xa(b,L,j,ft.width,ft.height,ft.Pd,ft.Qd,ft.format,null);if(It!=0?Ie=0:(Ie!=null&&(Ie[0]=ft.width[0]),Ne!=null&&(Ne[0]=ft.height[0]),Ie=1),Ie){xe.width=xe.width[0],xe.height=xe.height[0],W!=null&&(W[0]=xe.width),ae!=null&&(ae[0]=xe.height);e:{if(W=new wi,(ae=new UA).data=b,ae.w=L,ae.ha=j,ae.kd=1,L=[0],t(ae!=null),((b=xa(ae.data,ae.w,ae.ha,null,null,null,L,null,ae))==0||b==7)&&L[0]&&(b=4),(L=b)==0){if(t(ge!=null),W.data=ae.data,W.w=ae.w+ae.offset,W.ha=ae.ha-ae.offset,W.put=Sn,W.ac=xn,W.bc=ji,W.ma=ge,ae.xa){if((b=qe())==null){ge=1;break e}if(function(Ft,pt){var Ar=[0],Vt=[0],Ye=[0];t:for(;;){if(Ft==null)return 0;if(pt==null)return Ft.a=2,0;if(Ft.l=pt,Ft.a=0,Le(Ft.m,pt.data,pt.w,pt.ha),!tn(Ft.m,Ar,Vt,Ye)){Ft.a=3;break t}if(Ft.xb=m,pt.width=Ar[0],pt.height=Vt[0],!ut(Ar[0],Vt[0],1,Ft,null))break t;return 1}return t(Ft.a!=0),0}(b,W)){if(W=(L=Ba(W.width,W.height,ge.Oa,ge.ba))==0){t:{W=b;r:for(;;){if(W==null){W=0;break t}if(t(W.s.yc!=null),t(W.s.Ya!=null),t(0<W.s.Wb),t((j=W.l)!=null),t((ae=j.ma)!=null),W.xb!=0){if(W.ca=ae.ba,W.tb=ae.tb,t(W.ca!=null),!Mi(ae.Oa,j,el)){W.a=2;break r}if(!Ot(W,j.width)||j.da)break r;if((j.da||Er(W.ca.S))&&_t(),11>W.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),W.ca.f.kb.F!=null&&_t()),W.Pb&&0<W.s.ua&&W.s.vb.X==null&&!gr(W.s.vb,W.s.Wa.Xa)){W.a=1;break r}W.xb=0}if(!lt(W,W.V,W.Ba,W.c,W.i,j.o,Ae))break r;ae.Dc=W.Ma,W=1;break t}t(W.a!=0),W=0}W=!W}W&&(L=b.a)}else L=b.a}else{if((b=new ks)==null){ge=1;break e}if(b.Fa=ae.na,b.P=ae.P,b.qc=ae.Sa,Ya(b,W)){if((L=Ba(W.width,W.height,ge.Oa,ge.ba))==0){if(b.Aa=0,j=ge.Oa,t((ae=b)!=null),j!=null){if(0<(Ie=0>(Ie=j.Md)?0:100<Ie?255:255*Ie/100)){for(Ne=ft=0;4>Ne;++Ne)12>(It=ae.pb[Ne]).lc&&(It.ia=Ie*qr[0>It.lc?0:It.lc]>>3),ft|=It.ia;ft&&(alert("todo:VP8InitRandom"),ae.ia=1)}ae.Ga=j.Id,100<ae.Ga?ae.Ga=100:0>ae.Ga&&(ae.Ga=0)}ia(b,W)||(L=b.a)}}else L=b.a}L==0&&ge.Oa!=null&&ge.Oa.fd&&(L=Ma(ge.ba))}ge=L}de=ge!=0?null:11>de?xe.f.RGBA.eb:xe.f.kb.y}else de=null;return de};var jn=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function _(he,Ce){for(var fe="",ee=0;ee<4;ee++)fe+=String.fromCharCode(he[Ce++]);return fe}function p(he,Ce){return(he[Ce+0]<<0|he[Ce+1]<<8|he[Ce+2]<<16)>>>0}function E(he,Ce){return(he[Ce+0]<<0|he[Ce+1]<<8|he[Ce+2]<<16|he[Ce+3]<<24)>>>0}new d;var w=[0],x=[0],Q=[],k=new d,R=e,P=function(he,Ce){var fe={},ee=0,re=!1,be=0,me=0;if(fe.frames=[],!function(Se,Qe,Ke,ot){for(var dt=0;dt<ot;dt++)if(Se[Qe+dt]!=Ke.charCodeAt(dt))return!0;return!1}(he,Ce,"RIFF",4)){var Re,_e;for(E(he,Ce+=4),Ce+=8;Ce<he.length;){var He=_(he,Ce),Le=E(he,Ce+=4);Ce+=4;var Je=Le+(1&Le);switch(He){case"VP8 ":case"VP8L":fe.frames[ee]===void 0&&(fe.frames[ee]={}),(ie=fe.frames[ee]).src_off=re?me:Ce-8,ie.src_size=be+Le+8,ee++,re&&(re=!1,be=0,me=0);break;case"VP8X":(ie=fe.header={}).feature_flags=he[Ce];var ke=Ce+4;ie.canvas_width=1+p(he,ke),ke+=3,ie.canvas_height=1+p(he,ke),ke+=3;break;case"ALPH":re=!0,be=Je+8,me=Ce-8;break;case"ANIM":(ie=fe.header).bgcolor=E(he,Ce),ke=Ce+4,ie.loop_count=(Re=he)[(_e=ke)+0]<<0|Re[_e+1]<<8,ke+=2;break;case"ANMF":var kt,ie;(ie=fe.frames[ee]={}).offset_x=2*p(he,Ce),Ce+=3,ie.offset_y=2*p(he,Ce),Ce+=3,ie.width=1+p(he,Ce),Ce+=3,ie.height=1+p(he,Ce),Ce+=3,ie.duration=p(he,Ce),Ce+=3,kt=he[Ce++],ie.dispose=1&kt,ie.blend=kt>>1&1}He!="ANMF"&&(Ce+=Je)}return fe}}(R,0);P.response=R,P.rgbaoutput=!0,P.dataurl=!1;var O=P.header?P.header:null,G=P.frames?P.frames:null;if(O){O.loop_counter=O.loop_count,w=[O.canvas_height],x=[O.canvas_width];for(var V=0;V<G.length&&G[V].blend!=0;V++);}var Z=G[0],te=k.WebPDecodeRGBA(R,Z.src_off,Z.src_size,x,w);Z.rgba=te,Z.imgwidth=x[0],Z.imgheight=w[0];for(var ce=0;ce<x[0]*w[0]*4;ce++)Q[ce]=te[ce];return this.width=x,this.height=w,this.data=Q,this}(function(e){var t=function(){return typeof _g=="function"},r=function(w,x,Q,k){var R=4,P=h;switch(k){case e.image_compression.FAST:R=1,P=c;break;case e.image_compression.MEDIUM:R=6,P=a;break;case e.image_compression.SLOW:R=9,P=d}w=s(w,x,Q,P);var O=_g(w,{level:R});return e.__addimage__.arrayBufferToBinaryString(O)},s=function(w,x,Q,k){for(var R,P,O,G=w.length/x,V=new Uint8Array(w.length+G),Z=p(),te=0;te<G;te+=1){if(O=te*x,R=w.subarray(O,O+x),k)V.set(k(R,Q,P),O+te);else{for(var ce,he=Z.length,Ce=[];ce<he;ce+=1)Ce[ce]=Z[ce](R,Q,P);var fe=E(Ce.concat());V.set(Ce[fe],O+te)}P=R}return V},l=function(w){var x=Array.apply([],w);return x.unshift(0),x},c=function(w,x){var Q,k=[],R=w.length;k[0]=1;for(var P=0;P<R;P+=1)Q=w[P-x]||0,k[P+1]=w[P]-Q+256&255;return k},h=function(w,x,Q){var k,R=[],P=w.length;R[0]=2;for(var O=0;O<P;O+=1)k=Q&&Q[O]||0,R[O+1]=w[O]-k+256&255;return R},a=function(w,x,Q){var k,R,P=[],O=w.length;P[0]=3;for(var G=0;G<O;G+=1)k=w[G-x]||0,R=Q&&Q[G]||0,P[G+1]=w[G]+256-(k+R>>>1)&255;return P},d=function(w,x,Q){var k,R,P,O,G=[],V=w.length;G[0]=4;for(var Z=0;Z<V;Z+=1)k=w[Z-x]||0,R=Q&&Q[Z]||0,P=Q&&Q[Z-x]||0,O=_(k,R,P),G[Z+1]=w[Z]-O+256&255;return G},_=function(w,x,Q){if(w===x&&x===Q)return w;var k=Math.abs(x-Q),R=Math.abs(w-Q),P=Math.abs(w+x-Q-Q);return k<=R&&k<=P?w:R<=P?x:Q},p=function(){return[l,c,h,a,d]},E=function(w){var x=w.map(function(Q){return Q.reduce(function(k,R){return k+Math.abs(R)},0)});return x.indexOf(Math.min.apply(null,x))};e.processPNG=function(w,x,Q,k){var R,P,O,G,V,Z,te,ce,he,Ce,fe,ee,re,be,me,Re=this.decode.FLATE_DECODE,_e="";if(this.__addimage__.isArrayBuffer(w)&&(w=new Uint8Array(w)),this.__addimage__.isArrayBufferView(w)){if(w=(O=new lS(w)).imgData,P=O.bits,R=O.colorSpace,V=O.colors,[4,6].indexOf(O.colorType)!==-1){if(O.bits===8){he=(ce=O.pixelBitlength==32?new Uint32Array(O.decodePixels().buffer):O.pixelBitlength==16?new Uint16Array(O.decodePixels().buffer):new Uint8Array(O.decodePixels().buffer)).length,fe=new Uint8Array(he*O.colors),Ce=new Uint8Array(he);var He,Le=O.pixelBitlength-O.bits;for(be=0,me=0;be<he;be++){for(re=ce[be],He=0;He<Le;)fe[me++]=re>>>He&255,He+=O.bits;Ce[be]=re>>>He&255}}if(O.bits===16){he=(ce=new Uint32Array(O.decodePixels().buffer)).length,fe=new Uint8Array(he*(32/O.pixelBitlength)*O.colors),Ce=new Uint8Array(he*(32/O.pixelBitlength)),ee=O.colors>1,be=0,me=0;for(var Je=0;be<he;)re=ce[be++],fe[me++]=re>>>0&255,ee&&(fe[me++]=re>>>16&255,re=ce[be++],fe[me++]=re>>>0&255),Ce[Je++]=re>>>16&255;P=8}k!==e.image_compression.NONE&&t()?(w=r(fe,O.width*O.colors,O.colors,k),te=r(Ce,O.width,1,k)):(w=fe,te=Ce,Re=void 0)}if(O.colorType===3&&(R=this.color_spaces.INDEXED,Z=O.palette,O.transparency.indexed)){var ke=O.transparency.indexed,kt=0;for(be=0,he=ke.length;be<he;++be)kt+=ke[be];if((kt/=255)===he-1&&ke.indexOf(0)!==-1)G=[ke.indexOf(0)];else if(kt!==he){for(ce=O.decodePixels(),Ce=new Uint8Array(ce.length),be=0,he=ce.length;be<he;be++)Ce[be]=ke[ce[be]];te=r(Ce,O.width,1)}}var ie=function(Se){var Qe;switch(Se){case e.image_compression.FAST:Qe=11;break;case e.image_compression.MEDIUM:Qe=13;break;case e.image_compression.SLOW:Qe=14;break;default:Qe=12}return Qe}(k);return Re===this.decode.FLATE_DECODE&&(_e="/Predictor "+ie+" "),_e+="/Colors "+V+" /BitsPerComponent "+P+" /Columns "+O.width,(this.__addimage__.isArrayBuffer(w)||this.__addimage__.isArrayBufferView(w))&&(w=this.__addimage__.arrayBufferToBinaryString(w)),(te&&this.__addimage__.isArrayBuffer(te)||this.__addimage__.isArrayBufferView(te))&&(te=this.__addimage__.arrayBufferToBinaryString(te)),{alias:Q,data:w,index:x,filter:Re,decodeParameters:_e,transparency:G,palette:Z,sMask:te,predictor:ie,width:O.width,height:O.height,bitsPerComponent:P,colorSpace:R}}}})(Nn.API),function(e){e.processGIF89A=function(t,r,s,l){var c=new cS(t),h=c.width,a=c.height,d=[];c.decodeAndBlitFrameRGBA(0,d);var _={data:d,width:h,height:a},p=new zm(100).encode(_,100);return e.processJPEG.call(this,p,r,s,l)},e.processGIF87A=e.processGIF89A}(Nn.API),Rl.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:l,green:s,blue:r,quad:c}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Rl.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){us.log("bit decode error:"+r)}},Rl.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var s=this.bottom_up?e:this.height-1-e,l=0;l<t;l++)for(var c=this.datav.getUint8(this.pos++,!0),h=s*this.width*4+8*l*4,a=0;a<8&&8*l+a<this.width;a++){var d=this.palette[c>>7-a&1];this.data[h+4*a]=d.blue,this.data[h+4*a+1]=d.green,this.data[h+4*a+2]=d.red,this.data[h+4*a+3]=255}r!==0&&(this.pos+=4-r)}},Rl.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,l=0;l<e;l++){var c=this.datav.getUint8(this.pos++,!0),h=s*this.width*4+2*l*4,a=c>>4,d=15&c,_=this.palette[a];if(this.data[h]=_.blue,this.data[h+1]=_.green,this.data[h+2]=_.red,this.data[h+3]=255,2*l+1>=this.width)break;_=this.palette[d],this.data[h+4]=_.blue,this.data[h+4+1]=_.green,this.data[h+4+2]=_.red,this.data[h+4+3]=255}t!==0&&(this.pos+=4-t)}},Rl.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,s=0;s<this.width;s++){var l=this.datav.getUint8(this.pos++,!0),c=r*this.width*4+4*s;if(l<this.palette.length){var h=this.palette[l];this.data[c]=h.red,this.data[c+1]=h.green,this.data[c+2]=h.blue,this.data[c+3]=255}else this.data[c]=255,this.data[c+1]=255,this.data[c+2]=255,this.data[c+3]=255}e!==0&&(this.pos+=4-e)}},Rl.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,l=0;l<this.width;l++){var c=this.datav.getUint16(this.pos,!0);this.pos+=2;var h=(c&t)/t*255|0,a=(c>>5&t)/t*255|0,d=(c>>10&t)/t*255|0,_=c>>15?255:0,p=s*this.width*4+4*l;this.data[p]=d,this.data[p+1]=a,this.data[p+2]=h,this.data[p+3]=_}this.pos+=e}},Rl.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),s=this.height-1;s>=0;s--){for(var l=this.bottom_up?s:this.height-1-s,c=0;c<this.width;c++){var h=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(h&t)/t*255|0,d=(h>>5&r)/r*255|0,_=(h>>11)/t*255|0,p=l*this.width*4+4*c;this.data[p]=_,this.data[p+1]=d,this.data[p+2]=a,this.data[p+3]=255}this.pos+=e}},Rl.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var s=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),h=t*this.width*4+4*r;this.data[h]=c,this.data[h+1]=l,this.data[h+2]=s,this.data[h+3]=255}this.pos+=this.width%4}},Rl.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var s=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),h=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*r;this.data[a]=c,this.data[a+1]=l,this.data[a+2]=s,this.data[a+3]=h}},Rl.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,s,l){var c=new Rl(t,!1),h=c.width,a=c.height,d={data:c.getData(),width:h,height:a},_=new zm(100).encode(d,100);return e.processJPEG.call(this,_,r,s,l)}}(Nn.API),Oy.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,s,l){var c=new Oy(t),h=c.width,a=c.height,d={data:c.getData(),width:h,height:a},_=new zm(100).encode(d,100);return e.processJPEG.call(this,_,r,s,l)}}(Nn.API),Nn.API.processRGBA=function(e,t,r){for(var s=e.data,l=s.length,c=new Uint8Array(l/4*3),h=new Uint8Array(l/4),a=0,d=0,_=0;_<l;_+=4){var p=s[_],E=s[_+1],w=s[_+2],x=s[_+3];c[a++]=p,c[a++]=E,c[a++]=w,h[d++]=x}var Q=this.__addimage__.arrayBufferToBinaryString(c);return{alpha:this.__addimage__.arrayBufferToBinaryString(h),data:Q,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Nn.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Dh=Nn.API,op=Dh.getCharWidthsArray=function(e,t){var r,s,l=(t=t||{}).font||this.internal.getFont(),c=t.fontSize||this.internal.getFontSize(),h=t.charSpace||this.internal.getCharSpace(),a=t.widths?t.widths:l.metadata.Unicode.widths,d=a.fof?a.fof:1,_=t.kerning?t.kerning:l.metadata.Unicode.kerning,p=_.fof?_.fof:1,E=t.doKerning!==!1,w=0,x=e.length,Q=0,k=a[0]||d,R=[];for(r=0;r<x;r++)s=e.charCodeAt(r),typeof l.metadata.widthOfString=="function"?R.push((l.metadata.widthOfGlyph(l.metadata.characterToGlyph(s))+h*(1e3/c)||0)/1e3):(w=E&&qi(_[s])==="object"&&!isNaN(parseInt(_[s][Q],10))?_[s][Q]/p:0,R.push((a[s]||k)/d+w)),Q=s;return R},Dy=Dh.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),s=t.font||this.internal.getFont(),l=t.charSpace||this.internal.getCharSpace();return Dh.processArabic&&(e=Dh.processArabic(e)),typeof s.metadata.widthOfString=="function"?s.metadata.widthOfString(e,r,l)/r:op.apply(this,arguments).reduce(function(c,h){return c+h},0)},Ny=function(e,t,r,s){for(var l=[],c=0,h=e.length,a=0;c!==h&&a+t[c]<r;)a+=t[c],c++;l.push(e.slice(0,c));var d=c;for(a=0;c!==h;)a+t[c]>s&&(l.push(e.slice(d,c)),a=0,d=c),a+=t[c],c++;return d!==c&&l.push(e.slice(d,c)),l},jy=function(e,t,r){r||(r={});var s,l,c,h,a,d,_,p=[],E=[p],w=r.textIndent||0,x=0,Q=0,k=e.split(" "),R=op.apply(this,[" ",r])[0];if(d=r.lineIndent===-1?k[0].length+2:r.lineIndent||0){var P=Array(d).join(" "),O=[];k.map(function(V){(V=V.split(/\s*\n/)).length>1?O=O.concat(V.map(function(Z,te){return(te&&Z.length?`
`:"")+Z})):O.push(V[0])}),k=O,d=Dy.apply(this,[P,r])}for(c=0,h=k.length;c<h;c++){var G=0;if(s=k[c],d&&s[0]==`
`&&(s=s.substr(1),G=1),w+x+(Q=(l=op.apply(this,[s,r])).reduce(function(V,Z){return V+Z},0))>t||G){if(Q>t){for(a=Ny.apply(this,[s,l,t-(w+x),t]),p.push(a.shift()),p=[a.pop()];a.length;)E.push([a.shift()]);Q=l.slice(s.length-(p[0]?p[0].length:0)).reduce(function(V,Z){return V+Z},0)}else p=[s];E.push(p),w=Q+d,x=R}else p.push(s),w+=x+Q,x=R}return _=d?function(V,Z){return(Z?P:"")+V.join(" ")}:function(V){return V.join(" ")},E.map(_)},Dh.splitTextToSize=function(e,t,r){var s,l=(r=r||{}).fontSize||this.internal.getFontSize(),c=function(p){if(p.widths&&p.kerning)return{widths:p.widths,kerning:p.kerning};var E=this.internal.getFont(p.fontName,p.fontStyle);return E.metadata.Unicode?{widths:E.metadata.Unicode.widths||{0:1},kerning:E.metadata.Unicode.kerning||{}}:{font:E.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,r);s=Array.isArray(e)?e:String(e).split(/\r?\n/);var h=1*this.internal.scaleFactor*t/l;c.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/l:0,c.lineIndent=r.lineIndent;var a,d,_=[];for(a=0,d=s.length;a<d;a++)_=_.concat(jy.apply(this,[s[a],h,c]));return _},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},s={},l=0;l<t.length;l++)r[t[l]]="0123456789abcdef"[l],s["0123456789abcdef"[l]]=t[l];var c=function(E){return"0x"+parseInt(E,10).toString(16)},h=e.__fontmetrics__.compress=function(E){var w,x,Q,k,R=["{"];for(var P in E){if(w=E[P],isNaN(parseInt(P,10))?x="'"+P+"'":(P=parseInt(P,10),x=(x=c(P).slice(2)).slice(0,-1)+s[x.slice(-1)]),typeof w=="number")w<0?(Q=c(w).slice(3),k="-"):(Q=c(w).slice(2),k=""),Q=k+Q.slice(0,-1)+s[Q.slice(-1)];else{if(qi(w)!=="object")throw new Error("Don't know what to do with value type "+qi(w)+".");Q=h(w)}R.push(x+Q)}return R.push("}"),R.join("")},a=e.__fontmetrics__.uncompress=function(E){if(typeof E!="string")throw new Error("Invalid argument passed to uncompress.");for(var w,x,Q,k,R={},P=1,O=R,G=[],V="",Z="",te=E.length-1,ce=1;ce<te;ce+=1)(k=E[ce])=="'"?w?(Q=w.join(""),w=void 0):w=[]:w?w.push(k):k=="{"?(G.push([O,Q]),O={},Q=void 0):k=="}"?((x=G.pop())[0][x[1]]=O,Q=void 0,O=x[0]):k=="-"?P=-1:Q===void 0?r.hasOwnProperty(k)?(V+=r[k],Q=parseInt(V,16)*P,P=1,V=""):V+=k:r.hasOwnProperty(k)?(Z+=r[k],O[Q]=parseInt(Z,16)*P,P=1,Q=void 0,Z=""):Z+=k;return R},d={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},_={Unicode:{Courier:d,"Courier-Bold":d,"Courier-BoldOblique":d,"Courier-Oblique":d,Helvetica:d,"Helvetica-Bold":d,"Helvetica-BoldOblique":d,"Helvetica-Oblique":d,"Times-Roman":d,"Times-Bold":d,"Times-BoldItalic":d,"Times-Italic":d}},p={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(E){var w=E.font,x=p.Unicode[w.postScriptName];x&&(w.metadata.Unicode={},w.metadata.Unicode.widths=x.widths,w.metadata.Unicode.kerning=x.kerning);var Q=_.Unicode[w.postScriptName];Q&&(w.metadata.Unicode.encoding=Q,w.encoding=Q.codePages[0])}])}(Nn.API),function(e){var t=function(r){for(var s=r.length,l=new Uint8Array(s),c=0;c<s;c++)l[c]=r.charCodeAt(c);return l};e.API.events.push(["addFont",function(r){var s=void 0,l=r.font,c=r.instance;if(!l.isStandardFont){if(c===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+l.postScriptName+"').");if(typeof(s=c.existsFileInVFS(l.postScriptName)===!1?c.loadFile(l.postScriptName):c.getFileFromVFS(l.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+l.postScriptName+"').");(function(h,a){a=/^\x00\x01\x00\x00/.test(a)?t(a):t(zf(a)),h.metadata=e.API.TTFFont.open(a),h.metadata.Unicode=h.metadata.Unicode||{encoding:{},kerning:{},widths:[]},h.metadata.glyIdsUsed=[0]})(l,s)}}])}(Nn),function(e){function t(){return(Hn.canvg?Promise.resolve(Hn.canvg):pg(()=>import("./index.es-b76ce3d2.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}Nn.API.addSvgAsImage=function(r,s,l,c,h,a,d,_){if(isNaN(s)||isNaN(l))throw us.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(c)||isNaN(h))throw us.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var p=document.createElement("canvas");p.width=c,p.height=h;var E=p.getContext("2d");E.fillStyle="#fff",E.fillRect(0,0,p.width,p.height);var w={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},x=this;return t().then(function(Q){return Q.fromString(E,r,w)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(Q){return Q.render(w)}).then(function(){x.addImage(p.toDataURL("image/jpeg",1),s,l,c,h,d,_)})}}(),Nn.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var s=1;s<=this.internal.getNumberOfPages();s++)for(var l=0;l<this.internal.pages[s].length;l++)this.internal.pages[s][l]=this.internal.pages[s][l].replace(t,r);return this},Nn.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var s,l,c,h={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(h),d=[],_=0,p=0,E=0;function w(Q,k){var R,P=!1;for(R=0;R<Q.length;R+=1)Q[R]===k&&(P=!0);return P}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(h)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var x=a.length;for(E=0;E<x;E+=1)r[a[E]].value=r[a[E]].defaultValue,r[a[E]].explicitSet=!1}if(qi(e)==="object"){for(l in e)if(c=e[l],w(a,l)&&c!==void 0){if(r[l].type==="boolean"&&typeof c=="boolean")r[l].value=c;else if(r[l].type==="name"&&w(r[l].valueSet,c))r[l].value=c;else if(r[l].type==="integer"&&Number.isInteger(c))r[l].value=c;else if(r[l].type==="array"){for(_=0;_<c.length;_+=1)if(s=!0,c[_].length===1&&typeof c[_][0]=="number")d.push(String(c[_]-1));else if(c[_].length>1){for(p=0;p<c[_].length;p+=1)typeof c[_][p]!="number"&&(s=!1);s===!0&&d.push([c[_][0]-1,c[_][1]-1].join(" "))}r[l].value="["+d.join(" ")+"]"}else r[l].value=r[l].defaultValue;r[l].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var Q,k=[];for(Q in r)r[Q].explicitSet===!0&&(r[Q].type==="name"?k.push("/"+Q+" /"+r[Q].value):k.push("/"+Q+" "+r[Q].value));k.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+k.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var s='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',l=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),c=unescape(encodeURIComponent(s)),h=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),d=unescape(encodeURIComponent("</x:xmpmeta>")),_=c.length+h.length+a.length+l.length+d.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+_+" >>"),this.internal.write("stream"),this.internal.write(l+c+h+a+d),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(s,l){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:s,namespaceuri:l||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(Nn.API),function(e){var t=e.API,r=t.pdfEscape16=function(c,h){for(var a,d=h.metadata.Unicode.widths,_=["","0","00","000","0000"],p=[""],E=0,w=c.length;E<w;++E){if(a=h.metadata.characterToGlyph(c.charCodeAt(E)),h.metadata.glyIdsUsed.push(a),h.metadata.toUnicode[a]=c.charCodeAt(E),d.indexOf(a)==-1&&(d.push(a),d.push([parseInt(h.metadata.widthOfGlyph(a),10)])),a=="0")return p.join("");a=a.toString(16),p.push(_[4-a.length],a)}return p.join("")},s=function(c){var h,a,d,_,p,E,w;for(p=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,d=[],E=0,w=(a=Object.keys(c).sort(function(x,Q){return x-Q})).length;E<w;E++)h=a[E],d.length>=100&&(p+=`
`+d.length+` beginbfchar
`+d.join(`
`)+`
endbfchar`,d=[]),c[h]!==void 0&&c[h]!==null&&typeof c[h].toString=="function"&&(_=("0000"+c[h].toString(16)).slice(-4),h=("0000"+(+h).toString(16)).slice(-4),d.push("<"+h+"><"+_+">"));return d.length&&(p+=`
`+d.length+` beginbfchar
`+d.join(`
`)+`
endbfchar
`),p+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(c){(function(h){var a=h.font,d=h.out,_=h.newObject,p=h.putStream;if(a.metadata instanceof e.API.TTFFont&&a.encoding==="Identity-H"){for(var E=a.metadata.Unicode.widths,w=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),x="",Q=0;Q<w.length;Q++)x+=String.fromCharCode(w[Q]);var k=_();p({data:x,addLength1:!0,objectId:k}),d("endobj");var R=_();p({data:s(a.metadata.toUnicode),addLength1:!0,objectId:R}),d("endobj");var P=_();d("<<"),d("/Type /FontDescriptor"),d("/FontName /"+Rh(a.fontName)),d("/FontFile2 "+k+" 0 R"),d("/FontBBox "+e.API.PDFObject.convert(a.metadata.bbox)),d("/Flags "+a.metadata.flags),d("/StemV "+a.metadata.stemV),d("/ItalicAngle "+a.metadata.italicAngle),d("/Ascent "+a.metadata.ascender),d("/Descent "+a.metadata.decender),d("/CapHeight "+a.metadata.capHeight),d(">>"),d("endobj");var O=_();d("<<"),d("/Type /Font"),d("/BaseFont /"+Rh(a.fontName)),d("/FontDescriptor "+P+" 0 R"),d("/W "+e.API.PDFObject.convert(E)),d("/CIDToGIDMap /Identity"),d("/DW 1000"),d("/Subtype /CIDFontType2"),d("/CIDSystemInfo"),d("<<"),d("/Supplement 0"),d("/Registry (Adobe)"),d("/Ordering ("+a.encoding+")"),d(">>"),d(">>"),d("endobj"),a.objectNumber=_(),d("<<"),d("/Type /Font"),d("/Subtype /Type0"),d("/ToUnicode "+R+" 0 R"),d("/BaseFont /"+Rh(a.fontName)),d("/Encoding /"+a.encoding),d("/DescendantFonts ["+O+" 0 R]"),d(">>"),d("endobj"),a.isAlreadyPutted=!0}})(c)}]),t.events.push(["putFont",function(c){(function(h){var a=h.font,d=h.out,_=h.newObject,p=h.putStream;if(a.metadata instanceof e.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var E=a.metadata.rawData,w="",x=0;x<E.length;x++)w+=String.fromCharCode(E[x]);var Q=_();p({data:w,addLength1:!0,objectId:Q}),d("endobj");var k=_();p({data:s(a.metadata.toUnicode),addLength1:!0,objectId:k}),d("endobj");var R=_();d("<<"),d("/Descent "+a.metadata.decender),d("/CapHeight "+a.metadata.capHeight),d("/StemV "+a.metadata.stemV),d("/Type /FontDescriptor"),d("/FontFile2 "+Q+" 0 R"),d("/Flags 96"),d("/FontBBox "+e.API.PDFObject.convert(a.metadata.bbox)),d("/FontName /"+Rh(a.fontName)),d("/ItalicAngle "+a.metadata.italicAngle),d("/Ascent "+a.metadata.ascender),d(">>"),d("endobj"),a.objectNumber=_();for(var P=0;P<a.metadata.hmtx.widths.length;P++)a.metadata.hmtx.widths[P]=parseInt(a.metadata.hmtx.widths[P]*(1e3/a.metadata.head.unitsPerEm));d("<</Subtype/TrueType/Type/Font/ToUnicode "+k+" 0 R/BaseFont/"+Rh(a.fontName)+"/FontDescriptor "+R+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),d("endobj"),a.isAlreadyPutted=!0}})(c)}]);var l=function(c){var h,a=c.text||"",d=c.x,_=c.y,p=c.options||{},E=c.mutex||{},w=E.pdfEscape,x=E.activeFontKey,Q=E.fonts,k=x,R="",P=0,O="",G=Q[k].encoding;if(Q[k].encoding!=="Identity-H")return{text:a,x:d,y:_,options:p,mutex:E};for(O=a,k=x,Array.isArray(a)&&(O=a[0]),P=0;P<O.length;P+=1)Q[k].metadata.hasOwnProperty("cmap")&&(h=Q[k].metadata.cmap.unicode.codeMap[O[P].charCodeAt(0)]),h||O[P].charCodeAt(0)<256&&Q[k].metadata.hasOwnProperty("Unicode")?R+=O[P]:R+="";var V="";return parseInt(k.slice(1))<14||G==="WinAnsiEncoding"?V=w(R,k).split("").map(function(Z){return Z.charCodeAt(0).toString(16)}).join(""):G==="Identity-H"&&(V=r(R,Q[k])),E.isHex=!0,{text:V,x:d,y:_,options:p,mutex:E}};t.events.push(["postProcessText",function(c){var h=c.text||"",a=[],d={text:h,x:c.x,y:c.y,options:c.options,mutex:c.mutex};if(Array.isArray(h)){var _=0;for(_=0;_<h.length;_+=1)Array.isArray(h[_])&&h[_].length===3?a.push([l(Object.assign({},d,{text:h[_][0]})).text,h[_][1],h[_][2]]):a.push(l(Object.assign({},d,{text:h[_]})).text);c.text=a}else c.text=l(Object.assign({},d,{text:h})).text}])}(Nn),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,s){return t.call(this),this.internal.vFS[r]=s,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(Nn.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(s){var l,c,h,a,d,_,p,E=t,w=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],x=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],Q={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},k={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},R=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],P=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),O=!1,G=0;this.__bidiEngine__={};var V=function(ee){var re=ee.charCodeAt(),be=re>>8,me=k[be];return me!==void 0?E[256*me+(255&re)]:be===252||be===253?"AL":P.test(be)?"L":be===8?"R":"N"},Z=function(ee){for(var re,be=0;be<ee.length;be++){if((re=V(ee.charAt(be)))==="L")return!1;if(re==="R")return!0}return!1},te=function(ee,re,be,me){var Re,_e,He,Le,Je=re[me];switch(Je){case"L":case"R":O=!1;break;case"N":case"AN":break;case"EN":O&&(Je="AN");break;case"AL":O=!0,Je="R";break;case"WS":Je="N";break;case"CS":me<1||me+1>=re.length||(Re=be[me-1])!=="EN"&&Re!=="AN"||(_e=re[me+1])!=="EN"&&_e!=="AN"?Je="N":O&&(_e="AN"),Je=_e===Re?_e:"N";break;case"ES":Je=(Re=me>0?be[me-1]:"B")==="EN"&&me+1<re.length&&re[me+1]==="EN"?"EN":"N";break;case"ET":if(me>0&&be[me-1]==="EN"){Je="EN";break}if(O){Je="N";break}for(He=me+1,Le=re.length;He<Le&&re[He]==="ET";)He++;Je=He<Le&&re[He]==="EN"?"EN":"N";break;case"NSM":if(h&&!a){for(Le=re.length,He=me+1;He<Le&&re[He]==="NSM";)He++;if(He<Le){var ke=ee[me],kt=ke>=1425&&ke<=2303||ke===64286;if(Re=re[He],kt&&(Re==="R"||Re==="AL")){Je="R";break}}}Je=me<1||(Re=re[me-1])==="B"?"N":be[me-1];break;case"B":O=!1,l=!0,Je=G;break;case"S":c=!0,Je="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":O=!1;break;case"BN":Je="N"}return Je},ce=function(ee,re,be){var me=ee.split("");return be&&he(me,be,{hiLevel:G}),me.reverse(),re&&re.reverse(),me.join("")},he=function(ee,re,be){var me,Re,_e,He,Le,Je=-1,ke=ee.length,kt=0,ie=[],Se=G?x:w,Qe=[];for(O=!1,l=!1,c=!1,Re=0;Re<ke;Re++)Qe[Re]=V(ee[Re]);for(_e=0;_e<ke;_e++){if(Le=kt,ie[_e]=te(ee,Qe,ie,_e),me=240&(kt=Se[Le][Q[ie[_e]]]),kt&=15,re[_e]=He=Se[kt][5],me>0)if(me===16){for(Re=Je;Re<_e;Re++)re[Re]=1;Je=-1}else Je=-1;if(Se[kt][6])Je===-1&&(Je=_e);else if(Je>-1){for(Re=Je;Re<_e;Re++)re[Re]=He;Je=-1}Qe[_e]==="B"&&(re[_e]=0),be.hiLevel|=He}c&&function(Ke,ot,dt){for(var Bt=0;Bt<dt;Bt++)if(Ke[Bt]==="S"){ot[Bt]=G;for(var Ge=Bt-1;Ge>=0&&Ke[Ge]==="WS";Ge--)ot[Ge]=G}}(Qe,re,ke)},Ce=function(ee,re,be,me,Re){if(!(Re.hiLevel<ee)){if(ee===1&&G===1&&!l)return re.reverse(),void(be&&be.reverse());for(var _e,He,Le,Je,ke=re.length,kt=0;kt<ke;){if(me[kt]>=ee){for(Le=kt+1;Le<ke&&me[Le]>=ee;)Le++;for(Je=kt,He=Le-1;Je<He;Je++,He--)_e=re[Je],re[Je]=re[He],re[He]=_e,be&&(_e=be[Je],be[Je]=be[He],be[He]=_e);kt=Le}kt++}}},fe=function(ee,re,be){var me=ee.split(""),Re={hiLevel:G};return be||(be=[]),he(me,be,Re),function(_e,He,Le){if(Le.hiLevel!==0&&p)for(var Je,ke=0;ke<_e.length;ke++)He[ke]===1&&(Je=R.indexOf(_e[ke]))>=0&&(_e[ke]=R[Je+1])}(me,be,Re),Ce(2,me,re,be,Re),Ce(1,me,re,be,Re),me.join("")};return this.__bidiEngine__.doBidiReorder=function(ee,re,be){if(function(Re,_e){if(_e)for(var He=0;He<Re.length;He++)_e[He]=He;a===void 0&&(a=Z(Re)),_===void 0&&(_=Z(Re))}(ee,re),h||!d||_)if(h&&d&&a^_)G=a?1:0,ee=ce(ee,re,be);else if(!h&&d&&_)G=a?1:0,ee=fe(ee,re,be),ee=ce(ee,re);else if(!h||a||d||_){if(h&&!d&&a^_)ee=ce(ee,re),a?(G=0,ee=fe(ee,re,be)):(G=1,ee=fe(ee,re,be),ee=ce(ee,re));else if(h&&a&&!d&&_)G=1,ee=fe(ee,re,be),ee=ce(ee,re);else if(!h&&!d&&a^_){var me=p;a?(G=1,ee=fe(ee,re,be),G=0,p=!1,ee=fe(ee,re,be),p=me):(G=0,ee=fe(ee,re,be),ee=ce(ee,re),G=1,p=!1,ee=fe(ee,re,be),p=me,ee=ce(ee,re))}}else G=0,ee=fe(ee,re,be);else G=a?1:0,ee=fe(ee,re,be);return ee},this.__bidiEngine__.setOptions=function(ee){ee&&(h=ee.isInputVisual,d=ee.isOutputVisual,a=ee.isInputRtl,_=ee.isOutputRtl,p=ee.isSymmetricSwapping)},this.__bidiEngine__.setOptions(s),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(s){var l=s.text,c=(s.x,s.y,s.options||{}),h=(s.mutex,c.lang,[]);if(c.isInputVisual=typeof c.isInputVisual!="boolean"||c.isInputVisual,r.setOptions(c),Object.prototype.toString.call(l)==="[object Array]"){var a=0;for(h=[],a=0;a<l.length;a+=1)Object.prototype.toString.call(l[a])==="[object Array]"?h.push([r.doBidiReorder(l[a][0]),l[a][1],l[a][2]]):h.push([r.doBidiReorder(l[a])]);s.text=h}else s.text=r.doBidiReorder(l);r.setOptions({isInputVisual:!0})}])}(Nn),Nn.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new Eu(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new CS(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new uS(this.contents),this.head=new fS(this),this.name=new yS(this),this.cmap=new w_(this),this.toUnicode={},this.hhea=new dS(this),this.maxp=new vS(this),this.hmtx=new _S(this),this.post=new mS(this),this.os2=new pS(this),this.loca=new BS(this),this.glyf=new wS(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,s,l,c;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var h,a,d,_;for(_=[],h=0,a=(d=this.bbox).length;h<a;h++)t=d[h],_.push(Math.round(t*this.scaleFactor));return _}.call(this),this.stemV=0,this.post.exists?(s=255&(l=this.post.italic_angle),32768&(r=l>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+s)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(c=this.familyClass)===1||c===2||c===3||c===4||c===5||c===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,s){var l,c,h,a;for(h=0,c=0,a=(t=""+t).length;0<=a?c<a:c>a;c=0<=a?++c:--c)l=t.charCodeAt(c),h+=this.widthOfGlyph(this.characterToGlyph(l))+s*(1e3/r)||0;return h*(r/1e3)},e.prototype.lineHeight=function(t,r){var s;return r==null&&(r=!1),s=r?this.lineGap:0,(this.ascender+s-this.decender)/1e3*t},e}();var ql,Eu=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,s;for(s=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)s[r]=String.fromCharCode(this.readByte());return s.join("")},e.prototype.writeString=function(t){var r,s,l;for(l=[],r=0,s=t.length;0<=s?r<s:r>s;r=0<=s?++r:--r)l.push(this.writeByte(t.charCodeAt(r)));return l},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,s,l,c,h,a,d;return t=this.readByte(),r=this.readByte(),s=this.readByte(),l=this.readByte(),c=this.readByte(),h=this.readByte(),a=this.readByte(),d=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^s)+4294967296*(255^l)+16777216*(255^c)+65536*(255^h)+256*(255^a)+(255^d)+1):72057594037927940*t+281474976710656*r+1099511627776*s+4294967296*l+16777216*c+65536*h+256*a+d},e.prototype.writeLongLong=function(t){var r,s;return r=Math.floor(t/4294967296),s=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(s>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,s;for(r=[],s=0;0<=t?s<t:s>t;s=0<=t?++s:--s)r.push(this.readByte());return r},e.prototype.write=function(t){var r,s,l,c;for(c=[],s=0,l=t.length;s<l;s++)r=t[s],c.push(this.writeByte(r));return c},e}(),uS=function(){var e;function t(r){var s,l,c;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},l=0,c=this.tableCount;0<=c?l<c:l>c;l=0<=c?++l:--l)s={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[s.tag]=s}return t.prototype.encode=function(r){var s,l,c,h,a,d,_,p,E,w,x,Q,k;for(k in x=Object.keys(r).length,d=Math.log(2),E=16*Math.floor(Math.log(x)/d),h=Math.floor(E/d),p=16*x-E,(l=new Eu).writeInt(this.scalarType),l.writeShort(x),l.writeShort(E),l.writeShort(h),l.writeShort(p),c=16*x,_=l.pos+c,a=null,Q=[],r)for(w=r[k],l.writeString(k),l.writeInt(e(w)),l.writeInt(_),l.writeInt(w.length),Q=Q.concat(w),k==="head"&&(a=_),_+=w.length;_%4;)Q.push(0),_++;return l.write(Q),s=2981146554-e(l.data),l.pos=a+8,l.writeUInt32(s),l.data},e=function(r){var s,l,c,h;for(r=b_.call(r);r.length%4;)r.push(0);for(c=new Eu(r),l=0,s=0,h=r.length;s<h;s=s+=4)l+=c.readUInt32();return 4294967295&l},t}(),hS={}.hasOwnProperty,vc=function(e,t){for(var r in t)hS.call(t,r)&&(e[r]=t[r]);function s(){this.constructor=e}return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e};ql=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var fS=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return vc(t,ql),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var s;return(s=new Eu).writeInt(this.version),s.writeInt(this.revision),s.writeInt(this.checkSumAdjustment),s.writeInt(this.magicNumber),s.writeShort(this.flags),s.writeShort(this.unitsPerEm),s.writeLongLong(this.created),s.writeLongLong(this.modified),s.writeShort(this.xMin),s.writeShort(this.yMin),s.writeShort(this.xMax),s.writeShort(this.yMax),s.writeShort(this.macStyle),s.writeShort(this.lowestRecPPEM),s.writeShort(this.fontDirectionHint),s.writeShort(r),s.writeShort(this.glyphDataFormat),s.data},t}(),Hy=function(){function e(t,r){var s,l,c,h,a,d,_,p,E,w,x,Q,k,R,P,O,G;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),E=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(d=0;d<256;++d)this.codeMap[d]=t.readByte();break;case 4:for(x=t.readUInt16(),w=x/2,t.pos+=6,c=function(){var V,Z;for(Z=[],d=V=0;0<=w?V<w:V>w;d=0<=w?++V:--V)Z.push(t.readUInt16());return Z}(),t.pos+=2,k=function(){var V,Z;for(Z=[],d=V=0;0<=w?V<w:V>w;d=0<=w?++V:--V)Z.push(t.readUInt16());return Z}(),_=function(){var V,Z;for(Z=[],d=V=0;0<=w?V<w:V>w;d=0<=w?++V:--V)Z.push(t.readUInt16());return Z}(),p=function(){var V,Z;for(Z=[],d=V=0;0<=w?V<w:V>w;d=0<=w?++V:--V)Z.push(t.readUInt16());return Z}(),l=(this.length-t.pos+this.offset)/2,a=function(){var V,Z;for(Z=[],d=V=0;0<=l?V<l:V>l;d=0<=l?++V:--V)Z.push(t.readUInt16());return Z}(),d=P=0,G=c.length;P<G;d=++P)for(R=c[d],s=O=Q=k[d];Q<=R?O<=R:O>=R;s=Q<=R?++O:--O)p[d]===0?h=s+_[d]:(h=a[p[d]/2+(s-Q)-(w-d)]||0)!==0&&(h+=_[d]),this.codeMap[s]=65535&h}t.pos=E}return e.encode=function(t,r){var s,l,c,h,a,d,_,p,E,w,x,Q,k,R,P,O,G,V,Z,te,ce,he,Ce,fe,ee,re,be,me,Re,_e,He,Le,Je,ke,kt,ie,Se,Qe,Ke,ot,dt,Bt,Ge,rt,Qt,ht;switch(me=new Eu,h=Object.keys(t).sort(function(Nt,gr){return Nt-gr}),r){case"macroman":for(k=0,R=function(){var Nt=[];for(Q=0;Q<256;++Q)Nt.push(0);return Nt}(),O={0:0},c={},Re=0,Je=h.length;Re<Je;Re++)O[Ge=t[l=h[Re]]]==null&&(O[Ge]=++k),c[l]={old:t[l],new:O[t[l]]},R[l]=O[t[l]];return me.writeUInt16(1),me.writeUInt16(0),me.writeUInt32(12),me.writeUInt16(0),me.writeUInt16(262),me.writeUInt16(0),me.write(R),{charMap:c,subtable:me.data,maxGlyphID:k+1};case"unicode":for(re=[],E=[],G=0,O={},s={},P=_=null,_e=0,ke=h.length;_e<ke;_e++)O[Z=t[l=h[_e]]]==null&&(O[Z]=++G),s[l]={old:Z,new:O[Z]},a=O[Z]-l,P!=null&&a===_||(P&&E.push(P),re.push(l),_=a),P=l;for(P&&E.push(P),E.push(65535),re.push(65535),fe=2*(Ce=re.length),he=2*Math.pow(Math.log(Ce)/Math.LN2,2),w=Math.log(he/2)/Math.LN2,ce=2*Ce-he,d=[],te=[],x=[],Q=He=0,kt=re.length;He<kt;Q=++He){if(ee=re[Q],p=E[Q],ee===65535){d.push(0),te.push(0);break}if(ee-(be=s[ee].new)>=32768)for(d.push(0),te.push(2*(x.length+Ce-Q)),l=Le=ee;ee<=p?Le<=p:Le>=p;l=ee<=p?++Le:--Le)x.push(s[l].new);else d.push(be-ee),te.push(0)}for(me.writeUInt16(3),me.writeUInt16(1),me.writeUInt32(12),me.writeUInt16(4),me.writeUInt16(16+8*Ce+2*x.length),me.writeUInt16(0),me.writeUInt16(fe),me.writeUInt16(he),me.writeUInt16(w),me.writeUInt16(ce),dt=0,ie=E.length;dt<ie;dt++)l=E[dt],me.writeUInt16(l);for(me.writeUInt16(0),Bt=0,Se=re.length;Bt<Se;Bt++)l=re[Bt],me.writeUInt16(l);for(rt=0,Qe=d.length;rt<Qe;rt++)a=d[rt],me.writeUInt16(a);for(Qt=0,Ke=te.length;Qt<Ke;Qt++)V=te[Qt],me.writeUInt16(V);for(ht=0,ot=x.length;ht<ot;ht++)k=x[ht],me.writeUInt16(k);return{charMap:s,subtable:me.data,maxGlyphID:G+1}}},e}(),w_=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return vc(t,ql),t.prototype.tag="cmap",t.prototype.parse=function(r){var s,l,c;for(r.pos=this.offset,this.version=r.readUInt16(),c=r.readUInt16(),this.tables=[],this.unicode=null,l=0;0<=c?l<c:l>c;l=0<=c?++l:--l)s=new Hy(r,this.offset),this.tables.push(s),s.isUnicode&&this.unicode==null&&(this.unicode=s);return!0},t.encode=function(r,s){var l,c;return s==null&&(s="macroman"),l=Hy.encode(r,s),(c=new Eu).writeUInt16(0),c.writeUInt16(1),l.table=c.data.concat(l.subtable),l},t}(),dS=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return vc(t,ql),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t}(),pS=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return vc(t,ql),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var s,l;for(l=[],s=0;s<10;++s)l.push(r.readByte());return l}(),this.charRange=function(){var s,l;for(l=[],s=0;s<4;++s)l.push(r.readInt());return l}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var s,l;for(l=[],s=0;s<2;s=++s)l.push(r.readInt());return l}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t}(),mS=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return vc(t,ql),t.prototype.tag="post",t.prototype.parse=function(r){var s,l,c;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var h;for(l=r.readUInt16(),this.glyphNameIndex=[],h=0;0<=l?h<l:h>l;h=0<=l?++h:--h)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],c=[];r.pos<this.offset+this.length;)s=r.readByte(),c.push(this.names.push(r.readString(s)));return c;case 151552:return l=r.readUInt16(),this.offsets=r.read(l);case 196608:break;case 262144:return this.map=function(){var a,d,_;for(_=[],h=a=0,d=this.file.maxp.numGlyphs;0<=d?a<d:a>d;h=0<=d?++a:--a)_.push(r.readUInt32());return _}.call(this)}},t}(),gS=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},yS=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return vc(t,ql),t.prototype.tag="name",t.prototype.parse=function(r){var s,l,c,h,a,d,_,p,E,w,x;for(r.pos=this.offset,r.readShort(),s=r.readShort(),d=r.readShort(),l=[],h=0;0<=s?h<s:h>s;h=0<=s?++h:--h)l.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+d+r.readShort()});for(_={},h=E=0,w=l.length;E<w;h=++E)c=l[h],r.pos=c.offset,p=r.readString(c.length),a=new gS(p,c),_[x=c.nameID]==null&&(_[x]=[]),_[c.nameID].push(a);this.strings=_,this.copyright=_[0],this.fontFamily=_[1],this.fontSubfamily=_[2],this.uniqueSubfamily=_[3],this.fontName=_[4],this.version=_[5];try{this.postscriptName=_[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=_[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=_[7],this.manufacturer=_[8],this.designer=_[9],this.description=_[10],this.vendorUrl=_[11],this.designerUrl=_[12],this.license=_[13],this.licenseUrl=_[14],this.preferredFamily=_[15],this.preferredSubfamily=_[17],this.compatibleFull=_[18],this.sampleText=_[19]},t}(),vS=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return vc(t,ql),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t}(),_S=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return vc(t,ql),t.prototype.tag="hmtx",t.prototype.parse=function(r){var s,l,c,h,a,d,_;for(r.pos=this.offset,this.metrics=[],s=0,d=this.file.hhea.numberOfMetrics;0<=d?s<d:s>d;s=0<=d?++s:--s)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(c=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var p,E;for(E=[],s=p=0;0<=c?p<c:p>c;s=0<=c?++p:--p)E.push(r.readInt16());return E}(),this.widths=function(){var p,E,w,x;for(x=[],p=0,E=(w=this.metrics).length;p<E;p++)h=w[p],x.push(h.advance);return x}.call(this),l=this.widths[this.widths.length-1],_=[],s=a=0;0<=c?a<c:a>c;s=0<=c?++a:--a)_.push(this.widths.push(l));return _},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t}(),b_=[].slice,wS=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return vc(t,ql),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var s,l,c,h,a,d,_,p,E,w;return r in this.cache?this.cache[r]:(h=this.file.loca,s=this.file.contents,l=h.indexOf(r),(c=h.lengthOf(r))===0?this.cache[r]=null:(s.pos=this.offset+l,a=(d=new Eu(s.read(c))).readShort(),p=d.readShort(),w=d.readShort(),_=d.readShort(),E=d.readShort(),this.cache[r]=a===-1?new xS(d,p,w,_,E):new bS(d,a,p,w,_,E),this.cache[r]))},t.prototype.encode=function(r,s,l){var c,h,a,d,_;for(a=[],h=[],d=0,_=s.length;d<_;d++)c=r[s[d]],h.push(a.length),c&&(a=a.concat(c.encode(l)));return h.push(a.length),{table:a,offsets:h}},t}(),bS=function(){function e(t,r,s,l,c,h){this.raw=t,this.numberOfContours=r,this.xMin=s,this.yMin=l,this.xMax=c,this.yMax=h,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),xS=function(){function e(t,r,s,l,c){var h,a;for(this.raw=t,this.xMin=r,this.yMin=s,this.xMax=l,this.yMax=c,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],h=this.raw;a=h.readShort(),this.glyphOffsets.push(h.pos),this.glyphIDs.push(h.readUInt16()),32&a;)h.pos+=1&a?4:2,128&a?h.pos+=8:64&a?h.pos+=4:8&a&&(h.pos+=2)}return e.prototype.encode=function(){var t,r,s;for(r=new Eu(b_.call(this.raw.data)),t=0,s=this.glyphIDs.length;t<s;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),BS=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return vc(t,ql),t.prototype.tag="loca",t.prototype.parse=function(r){var s,l;return r.pos=this.offset,s=this.file.head.indexToLocFormat,this.offsets=s===0?function(){var c,h;for(h=[],l=0,c=this.length;l<c;l+=2)h.push(2*r.readUInt16());return h}.call(this):function(){var c,h;for(h=[],l=0,c=this.length;l<c;l+=4)h.push(r.readUInt32());return h}.call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,s){for(var l=new Uint32Array(this.offsets.length),c=0,h=0,a=0;a<l.length;++a)if(l[a]=c,h<s.length&&s[h]==a){++h,l[a]=c;var d=this.offsets[a],_=this.offsets[a+1]-d;_>0&&(c+=_)}for(var p=new Array(4*l.length),E=0;E<l.length;++E)p[4*E+3]=255&l[E],p[4*E+2]=(65280&l[E])>>8,p[4*E+1]=(16711680&l[E])>>16,p[4*E]=(4278190080&l[E])>>24;return p},t}(),CS=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,s,l,c;for(r in l=this.font.cmap.tables[0].codeMap,t={},c=this.subset)s=c[r],t[r]=l[s];return t},e.prototype.glyphsFor=function(t){var r,s,l,c,h,a,d;for(l={},h=0,a=t.length;h<a;h++)l[c=t[h]]=this.font.glyf.glyphFor(c);for(c in r=[],l)(s=l[c])!=null&&s.compound&&r.push.apply(r,s.glyphIDs);if(r.length>0)for(c in d=this.glyphsFor(r))s=d[c],l[c]=s;return l},e.prototype.encode=function(t,r){var s,l,c,h,a,d,_,p,E,w,x,Q,k,R,P;for(l in s=w_.encode(this.generateCmap(),"unicode"),h=this.glyphsFor(t),x={0:0},P=s.charMap)x[(d=P[l]).old]=d.new;for(Q in w=s.maxGlyphID,h)Q in x||(x[Q]=w++);return p=function(O){var G,V;for(G in V={},O)V[O[G]]=G;return V}(x),E=Object.keys(p).sort(function(O,G){return O-G}),k=function(){var O,G,V;for(V=[],O=0,G=E.length;O<G;O++)a=E[O],V.push(p[a]);return V}(),c=this.font.glyf.encode(h,k,x),_=this.font.loca.encode(c.offsets,k),R={cmap:this.font.cmap.raw(),glyf:c.table,loca:_,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(R["OS/2"]=this.font.os2.raw()),this.font.directory.encode(R)},e}();Nn.API.PDFObject=function(){var e;function t(){}return e=function(r,s){return(Array(s+1).join("0")+r).slice(-s)},t.convert=function(r){var s,l,c,h;if(Array.isArray(r))return"["+function(){var a,d,_;for(_=[],a=0,d=r.length;a<d;a++)s=r[a],_.push(t.convert(s));return _}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(l in c=["<<"],r)h=r[l],c.push("/"+l+" "+t.convert(h));return c.push(">>"),c.join(`
`)}return""+r},t}();const ES=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:nS,AcroFormAppearance:yn,AcroFormButton:ka,AcroFormCheckBox:Gf,AcroFormChoiceField:Wu,AcroFormComboBox:Zu,AcroFormEditBox:Vf,AcroFormListBox:Xu,AcroFormPasswordField:qf,AcroFormPushButton:Kf,AcroFormRadioButton:Ju,AcroFormTextField:bu,GState:nd,ShadingPattern:vu,TilingPattern:Gu,default:Nn,jsPDF:Nn},Symbol.toStringTag,{value:"Module"})),FS=Fw(ES);var Lp={},SS={get exports(){return Lp},set exports(e){Lp=e}};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 */var zy;function IS(){return zy||(zy=1,function(e,t){(function(r,s){e.exports=s()})(Hl,function(){/*! *****************************************************************************
		    Copyright (c) Microsoft Corporation.

		    Permission to use, copy, modify, and/or distribute this software for any
		    purpose with or without fee is hereby granted.

		    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
		    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
		    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
		    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
		    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
		    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
		    PERFORMANCE OF THIS SOFTWARE.
		    ***************************************************************************** */var r=function(F,B){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(U,T){U.__proto__=T}||function(U,T){for(var K in T)Object.prototype.hasOwnProperty.call(T,K)&&(U[K]=T[K])},r(F,B)};function s(F,B){if(typeof B!="function"&&B!==null)throw new TypeError("Class extends value "+String(B)+" is not a constructor or null");r(F,B);function U(){this.constructor=F}F.prototype=B===null?Object.create(B):(U.prototype=B.prototype,new U)}var l=function(){return l=Object.assign||function(B){for(var U,T=1,K=arguments.length;T<K;T++){U=arguments[T];for(var $ in U)Object.prototype.hasOwnProperty.call(U,$)&&(B[$]=U[$])}return B},l.apply(this,arguments)};function c(F,B,U,T){function K($){return $ instanceof U?$:new U(function(ve){ve($)})}return new(U||(U=Promise))(function($,ve){function je(mt){try{yt(T.next(mt))}catch(Ut){ve(Ut)}}function Pe(mt){try{yt(T.throw(mt))}catch(Ut){ve(Ut)}}function yt(mt){mt.done?$(mt.value):K(mt.value).then(je,Pe)}yt((T=T.apply(F,B||[])).next())})}function h(F,B){var U={label:0,sent:function(){if($[0]&1)throw $[1];return $[1]},trys:[],ops:[]},T,K,$,ve;return ve={next:je(0),throw:je(1),return:je(2)},typeof Symbol=="function"&&(ve[Symbol.iterator]=function(){return this}),ve;function je(yt){return function(mt){return Pe([yt,mt])}}function Pe(yt){if(T)throw new TypeError("Generator is already executing.");for(;U;)try{if(T=1,K&&($=yt[0]&2?K.return:yt[0]?K.throw||(($=K.return)&&$.call(K),0):K.next)&&!($=$.call(K,yt[1])).done)return $;switch(K=0,$&&(yt=[yt[0]&2,$.value]),yt[0]){case 0:case 1:$=yt;break;case 4:return U.label++,{value:yt[1],done:!1};case 5:U.label++,K=yt[1],yt=[0];continue;case 7:yt=U.ops.pop(),U.trys.pop();continue;default:if($=U.trys,!($=$.length>0&&$[$.length-1])&&(yt[0]===6||yt[0]===2)){U=0;continue}if(yt[0]===3&&(!$||yt[1]>$[0]&&yt[1]<$[3])){U.label=yt[1];break}if(yt[0]===6&&U.label<$[1]){U.label=$[1],$=yt;break}if($&&U.label<$[2]){U.label=$[2],U.ops.push(yt);break}$[2]&&U.ops.pop(),U.trys.pop();continue}yt=B.call(F,U)}catch(mt){yt=[6,mt],K=0}finally{T=$=0}if(yt[0]&5)throw yt[1];return{value:yt[0]?yt[1]:void 0,done:!0}}}function a(F,B,U){if(U||arguments.length===2)for(var T=0,K=B.length,$;T<K;T++)($||!(T in B))&&($||($=Array.prototype.slice.call(B,0,T)),$[T]=B[T]);return F.concat($||B)}for(var d=function(){function F(B,U,T,K){this.left=B,this.top=U,this.width=T,this.height=K}return F.prototype.add=function(B,U,T,K){return new F(this.left+B,this.top+U,this.width+T,this.height+K)},F.fromClientRect=function(B,U){return new F(U.left+B.windowBounds.left,U.top+B.windowBounds.top,U.width,U.height)},F.fromDOMRectList=function(B,U){var T=Array.from(U).find(function(K){return K.width!==0});return T?new F(T.left+B.windowBounds.left,T.top+B.windowBounds.top,T.width,T.height):F.EMPTY},F.EMPTY=new F(0,0,0,0),F}(),_=function(F,B){return d.fromClientRect(F,B.getBoundingClientRect())},p=function(F){var B=F.body,U=F.documentElement;if(!B||!U)throw new Error("Unable to get document size");var T=Math.max(Math.max(B.scrollWidth,U.scrollWidth),Math.max(B.offsetWidth,U.offsetWidth),Math.max(B.clientWidth,U.clientWidth)),K=Math.max(Math.max(B.scrollHeight,U.scrollHeight),Math.max(B.offsetHeight,U.offsetHeight),Math.max(B.clientHeight,U.clientHeight));return new d(0,0,T,K)},E=function(F){for(var B=[],U=0,T=F.length;U<T;){var K=F.charCodeAt(U++);if(K>=55296&&K<=56319&&U<T){var $=F.charCodeAt(U++);($&64512)===56320?B.push(((K&1023)<<10)+($&1023)+65536):(B.push(K),U--)}else B.push(K)}return B},w=function(){for(var F=[],B=0;B<arguments.length;B++)F[B]=arguments[B];if(String.fromCodePoint)return String.fromCodePoint.apply(String,F);var U=F.length;if(!U)return"";for(var T=[],K=-1,$="";++K<U;){var ve=F[K];ve<=65535?T.push(ve):(ve-=65536,T.push((ve>>10)+55296,ve%1024+56320)),(K+1===U||T.length>16384)&&($+=String.fromCharCode.apply(String,T),T.length=0)}return $},x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Q=typeof Uint8Array>"u"?[]:new Uint8Array(256),k=0;k<x.length;k++)Q[x.charCodeAt(k)]=k;for(var R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",P=typeof Uint8Array>"u"?[]:new Uint8Array(256),O=0;O<R.length;O++)P[R.charCodeAt(O)]=O;for(var G=function(F){var B=F.length*.75,U=F.length,T,K=0,$,ve,je,Pe;F[F.length-1]==="="&&(B--,F[F.length-2]==="="&&B--);var yt=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(B):new Array(B),mt=Array.isArray(yt)?yt:new Uint8Array(yt);for(T=0;T<U;T+=4)$=P[F.charCodeAt(T)],ve=P[F.charCodeAt(T+1)],je=P[F.charCodeAt(T+2)],Pe=P[F.charCodeAt(T+3)],mt[K++]=$<<2|ve>>4,mt[K++]=(ve&15)<<4|je>>2,mt[K++]=(je&3)<<6|Pe&63;return yt},V=function(F){for(var B=F.length,U=[],T=0;T<B;T+=2)U.push(F[T+1]<<8|F[T]);return U},Z=function(F){for(var B=F.length,U=[],T=0;T<B;T+=4)U.push(F[T+3]<<24|F[T+2]<<16|F[T+1]<<8|F[T]);return U},te=5,ce=6+5,he=2,Ce=ce-te,fe=65536>>te,ee=1<<te,re=ee-1,be=1024>>te,me=fe+be,Re=me,_e=32,He=Re+_e,Le=65536>>ce,Je=1<<Ce,ke=Je-1,kt=function(F,B,U){return F.slice?F.slice(B,U):new Uint16Array(Array.prototype.slice.call(F,B,U))},ie=function(F,B,U){return F.slice?F.slice(B,U):new Uint32Array(Array.prototype.slice.call(F,B,U))},Se=function(F,B){var U=G(F),T=Array.isArray(U)?Z(U):new Uint32Array(U),K=Array.isArray(U)?V(U):new Uint16Array(U),$=24,ve=kt(K,$/2,T[4]/2),je=T[5]===2?kt(K,($+T[4])/2):ie(T,Math.ceil(($+T[4])/4));return new Qe(T[0],T[1],T[2],T[3],ve,je)},Qe=function(){function F(B,U,T,K,$,ve){this.initialValue=B,this.errorValue=U,this.highStart=T,this.highValueIndex=K,this.index=$,this.data=ve}return F.prototype.get=function(B){var U;if(B>=0){if(B<55296||B>56319&&B<=65535)return U=this.index[B>>te],U=(U<<he)+(B&re),this.data[U];if(B<=65535)return U=this.index[fe+(B-55296>>te)],U=(U<<he)+(B&re),this.data[U];if(B<this.highStart)return U=He-Le+(B>>ce),U=this.index[U],U+=B>>te&ke,U=this.index[U],U=(U<<he)+(B&re),this.data[U];if(B<=1114111)return this.data[this.highValueIndex]}return this.errorValue},F}(),Ke="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ot=typeof Uint8Array>"u"?[]:new Uint8Array(256),dt=0;dt<Ke.length;dt++)ot[Ke.charCodeAt(dt)]=dt;var Bt="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",Ge=50,rt=1,Qt=2,ht=3,Nt=4,gr=5,Pt=7,ze=8,yr=9,sr=10,Ht=11,pr=12,Br=13,vr=14,Gr=15,rr=16,xr=17,Zr=18,pn=19,vt=20,at=21,bt=22,Ct=23,jt=24,er=25,Vr=26,Sr=27,un=28,lr=29,Er=30,An=31,wn=32,_i=33,br=34,Cr=35,cr=36,Kr=37,hn=38,xn=39,Sn=40,ji=41,tn=42,Wi=43,hs=[9001,65288],Ln="!",nn="×",Te="÷",Y=Se(Bt),Ae=[Er,cr],Ee=[rt,Qt,ht,gr],Ue=[sr,ze],Xe=[Sr,Vr],lt=Ee.concat(Ue),$e=[hn,xn,Sn,br,Cr],qe=[Gr,Br],ut=function(F,B){B===void 0&&(B="strict");var U=[],T=[],K=[];return F.forEach(function($,ve){var je=Y.get($);if(je>Ge?(K.push(!0),je-=Ge):K.push(!1),["normal","auto","loose"].indexOf(B)!==-1&&[8208,8211,12316,12448].indexOf($)!==-1)return T.push(ve),U.push(rr);if(je===Nt||je===Ht){if(ve===0)return T.push(ve),U.push(Er);var Pe=U[ve-1];return lt.indexOf(Pe)===-1?(T.push(T[ve-1]),U.push(Pe)):(T.push(ve),U.push(Er))}if(T.push(ve),je===An)return U.push(B==="strict"?at:Kr);if(je===tn||je===lr)return U.push(Er);if(je===Wi)return $>=131072&&$<=196605||$>=196608&&$<=262141?U.push(Kr):U.push(Er);U.push(je)}),[T,U,K]},Ot=function(F,B,U,T){var K=T[U];if(Array.isArray(F)?F.indexOf(K)!==-1:F===K)for(var $=U;$<=T.length;){$++;var ve=T[$];if(ve===B)return!0;if(ve!==sr)break}if(K===sr)for(var $=U;$>0;){$--;var je=T[$];if(Array.isArray(F)?F.indexOf(je)!==-1:F===je)for(var Pe=U;Pe<=T.length;){Pe++;var ve=T[Pe];if(ve===B)return!0;if(ve!==sr)break}if(je!==sr)break}return!1},nr=function(F,B){for(var U=F;U>=0;){var T=B[U];if(T===sr)U--;else return T}return 0},zt=function(F,B,U,T,K){if(U[T]===0)return nn;var $=T-1;if(Array.isArray(K)&&K[$]===!0)return nn;var ve=$-1,je=$+1,Pe=B[$],yt=ve>=0?B[ve]:0,mt=B[je];if(Pe===Qt&&mt===ht)return nn;if(Ee.indexOf(Pe)!==-1)return Ln;if(Ee.indexOf(mt)!==-1||Ue.indexOf(mt)!==-1)return nn;if(nr($,B)===ze)return Te;if(Y.get(F[$])===Ht||(Pe===wn||Pe===_i)&&Y.get(F[je])===Ht||Pe===Pt||mt===Pt||Pe===yr||[sr,Br,Gr].indexOf(Pe)===-1&&mt===yr||[xr,Zr,pn,jt,un].indexOf(mt)!==-1||nr($,B)===bt||Ot(Ct,bt,$,B)||Ot([xr,Zr],at,$,B)||Ot(pr,pr,$,B))return nn;if(Pe===sr)return Te;if(Pe===Ct||mt===Ct)return nn;if(mt===rr||Pe===rr)return Te;if([Br,Gr,at].indexOf(mt)!==-1||Pe===vr||yt===cr&&qe.indexOf(Pe)!==-1||Pe===un&&mt===cr||mt===vt||Ae.indexOf(mt)!==-1&&Pe===er||Ae.indexOf(Pe)!==-1&&mt===er||Pe===Sr&&[Kr,wn,_i].indexOf(mt)!==-1||[Kr,wn,_i].indexOf(Pe)!==-1&&mt===Vr||Ae.indexOf(Pe)!==-1&&Xe.indexOf(mt)!==-1||Xe.indexOf(Pe)!==-1&&Ae.indexOf(mt)!==-1||[Sr,Vr].indexOf(Pe)!==-1&&(mt===er||[bt,Gr].indexOf(mt)!==-1&&B[je+1]===er)||[bt,Gr].indexOf(Pe)!==-1&&mt===er||Pe===er&&[er,un,jt].indexOf(mt)!==-1)return nn;if([er,un,jt,xr,Zr].indexOf(mt)!==-1)for(var Ut=$;Ut>=0;){var tr=B[Ut];if(tr===er)return nn;if([un,jt].indexOf(tr)!==-1)Ut--;else break}if([Sr,Vr].indexOf(mt)!==-1)for(var Ut=[xr,Zr].indexOf(Pe)!==-1?ve:$;Ut>=0;){var tr=B[Ut];if(tr===er)return nn;if([un,jt].indexOf(tr)!==-1)Ut--;else break}if(hn===Pe&&[hn,xn,br,Cr].indexOf(mt)!==-1||[xn,br].indexOf(Pe)!==-1&&[xn,Sn].indexOf(mt)!==-1||[Sn,Cr].indexOf(Pe)!==-1&&mt===Sn||$e.indexOf(Pe)!==-1&&[vt,Vr].indexOf(mt)!==-1||$e.indexOf(mt)!==-1&&Pe===Sr||Ae.indexOf(Pe)!==-1&&Ae.indexOf(mt)!==-1||Pe===jt&&Ae.indexOf(mt)!==-1||Ae.concat(er).indexOf(Pe)!==-1&&mt===bt&&hs.indexOf(F[je])===-1||Ae.concat(er).indexOf(mt)!==-1&&Pe===Zr)return nn;if(Pe===ji&&mt===ji){for(var an=U[$],Qr=1;an>0&&(an--,B[an]===ji);)Qr++;if(Qr%2!==0)return nn}return Pe===wn&&mt===_i?nn:Te},jr=function(F,B){B||(B={lineBreak:"normal",wordBreak:"normal"});var U=ut(F,B.lineBreak),T=U[0],K=U[1],$=U[2];(B.wordBreak==="break-all"||B.wordBreak==="break-word")&&(K=K.map(function(je){return[er,Er,tn].indexOf(je)!==-1?Kr:je}));var ve=B.wordBreak==="keep-all"?$.map(function(je,Pe){return je&&F[Pe]>=19968&&F[Pe]<=40959}):void 0;return[T,K,ve]},Hr=function(){function F(B,U,T,K){this.codePoints=B,this.required=U===Ln,this.start=T,this.end=K}return F.prototype.slice=function(){return w.apply(void 0,this.codePoints.slice(this.start,this.end))},F}(),Tr=function(F,B){var U=E(F),T=jr(U,B),K=T[0],$=T[1],ve=T[2],je=U.length,Pe=0,yt=0;return{next:function(){if(yt>=je)return{done:!0,value:null};for(var mt=nn;yt<je&&(mt=zt(U,$,K,++yt,ve))===nn;);if(mt!==nn||yt===je){var Ut=new Hr(U,mt,Pe,yt);return Pe=yt,{value:Ut,done:!1}}return{done:!0,value:null}}}},ln=1<<0,dn=1<<1,In=1<<2,mn=1<<3,Bn=10,Qn=47,Vn=92,Ti=9,oi=32,wi=34,ks=61,bi=35,Yn=36,Ya=37,Ks=39,Gs=40,ia=41,gs=95,Ri=45,Xi=33,vo=60,nA=62,EA=64,sa=91,bs=93,xs=61,$a=123,aa=63,Mo=125,Qa=124,Do=126,oa=128,qs=65533,si=42,Bs=43,ys=44,iA=58,sA=59,Cn=46,GA=0,ml=8,Pa=11,_o=14,aA=31,wo=127,gt=-1,Mn=48,Ds=97,Oi=101,Qs=102,ya=117,eo=122,Cs=65,Aa=69,to=70,va=85,qA=90,ts=function(F){return F>=Mn&&F<=57},FA=function(F){return F>=55296&&F<=57343},ro=function(F){return ts(F)||F>=Cs&&F<=to||F>=Ds&&F<=Qs},no=function(F){return F>=Ds&&F<=eo},io=function(F){return F>=Cs&&F<=qA},Wl=function(F){return no(F)||io(F)},No=function(F){return F>=oa},vs=function(F){return F===Bn||F===Ti||F===oi},oA=function(F){return Wl(F)||No(F)||F===gs},AA=function(F){return oA(F)||ts(F)||F===Ri},_c=function(F){return F>=GA&&F<=ml||F===Pa||F>=_o&&F<=aA||F===wo},_a=function(F,B){return F!==Vn?!1:B!==Bn},WA=function(F,B,U){return F===Ri?oA(B)||_a(B,U):oA(F)?!0:!!(F===Vn&&_a(F,B))},SA=function(F,B,U){return F===Bs||F===Ri?ts(B)?!0:B===Cn&&ts(U):ts(F===Cn?B:F)},IA=function(F){var B=0,U=1;(F[B]===Bs||F[B]===Ri)&&(F[B]===Ri&&(U=-1),B++);for(var T=[];ts(F[B]);)T.push(F[B++]);var K=T.length?parseInt(w.apply(void 0,T),10):0;F[B]===Cn&&B++;for(var $=[];ts(F[B]);)$.push(F[B++]);var ve=$.length,je=ve?parseInt(w.apply(void 0,$),10):0;(F[B]===Aa||F[B]===Oi)&&B++;var Pe=1;(F[B]===Bs||F[B]===Ri)&&(F[B]===Ri&&(Pe=-1),B++);for(var yt=[];ts(F[B]);)yt.push(F[B++]);var mt=yt.length?parseInt(w.apply(void 0,yt),10):0;return U*(K+je*Math.pow(10,-ve))*Math.pow(10,Pe*mt)},TA={type:2},lA={type:3},UA={type:4},bo={type:13},gl={type:8},Xl={type:21},jo={type:9},wa={type:10},XA={type:11},ba={type:12},xi={type:14},N={type:23},oe={type:1},Me={type:25},tt={type:24},_t={type:26},Jt={type:27},_r={type:28},en={type:29},En={type:31},Dn={type:32},Kn=function(){function F(){this._value=[]}return F.prototype.write=function(B){this._value=this._value.concat(E(B))},F.prototype.read=function(){for(var B=[],U=this.consumeToken();U!==Dn;)B.push(U),U=this.consumeToken();return B},F.prototype.consumeToken=function(){var B=this.consumeCodePoint();switch(B){case wi:return this.consumeStringToken(wi);case bi:var U=this.peekCodePoint(0),T=this.peekCodePoint(1),K=this.peekCodePoint(2);if(AA(U)||_a(T,K)){var $=WA(U,T,K)?dn:ln,ve=this.consumeName();return{type:5,value:ve,flags:$}}break;case Yn:if(this.peekCodePoint(0)===ks)return this.consumeCodePoint(),bo;break;case Ks:return this.consumeStringToken(Ks);case Gs:return TA;case ia:return lA;case si:if(this.peekCodePoint(0)===ks)return this.consumeCodePoint(),xi;break;case Bs:if(SA(B,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(B),this.consumeNumericToken();break;case ys:return UA;case Ri:var je=B,Pe=this.peekCodePoint(0),yt=this.peekCodePoint(1);if(SA(je,Pe,yt))return this.reconsumeCodePoint(B),this.consumeNumericToken();if(WA(je,Pe,yt))return this.reconsumeCodePoint(B),this.consumeIdentLikeToken();if(Pe===Ri&&yt===nA)return this.consumeCodePoint(),this.consumeCodePoint(),tt;break;case Cn:if(SA(B,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(B),this.consumeNumericToken();break;case Qn:if(this.peekCodePoint(0)===si)for(this.consumeCodePoint();;){var mt=this.consumeCodePoint();if(mt===si&&(mt=this.consumeCodePoint(),mt===Qn))return this.consumeToken();if(mt===gt)return this.consumeToken()}break;case iA:return _t;case sA:return Jt;case vo:if(this.peekCodePoint(0)===Xi&&this.peekCodePoint(1)===Ri&&this.peekCodePoint(2)===Ri)return this.consumeCodePoint(),this.consumeCodePoint(),Me;break;case EA:var Ut=this.peekCodePoint(0),tr=this.peekCodePoint(1),an=this.peekCodePoint(2);if(WA(Ut,tr,an)){var ve=this.consumeName();return{type:7,value:ve}}break;case sa:return _r;case Vn:if(_a(B,this.peekCodePoint(0)))return this.reconsumeCodePoint(B),this.consumeIdentLikeToken();break;case bs:return en;case xs:if(this.peekCodePoint(0)===ks)return this.consumeCodePoint(),gl;break;case $a:return XA;case Mo:return ba;case ya:case va:var Qr=this.peekCodePoint(0),Jr=this.peekCodePoint(1);return Qr===Bs&&(ro(Jr)||Jr===aa)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(B),this.consumeIdentLikeToken();case Qa:if(this.peekCodePoint(0)===ks)return this.consumeCodePoint(),jo;if(this.peekCodePoint(0)===Qa)return this.consumeCodePoint(),Xl;break;case Do:if(this.peekCodePoint(0)===ks)return this.consumeCodePoint(),wa;break;case gt:return Dn}return vs(B)?(this.consumeWhiteSpace(),En):ts(B)?(this.reconsumeCodePoint(B),this.consumeNumericToken()):oA(B)?(this.reconsumeCodePoint(B),this.consumeIdentLikeToken()):{type:6,value:w(B)}},F.prototype.consumeCodePoint=function(){var B=this._value.shift();return typeof B>"u"?-1:B},F.prototype.reconsumeCodePoint=function(B){this._value.unshift(B)},F.prototype.peekCodePoint=function(B){return B>=this._value.length?-1:this._value[B]},F.prototype.consumeUnicodeRangeToken=function(){for(var B=[],U=this.consumeCodePoint();ro(U)&&B.length<6;)B.push(U),U=this.consumeCodePoint();for(var T=!1;U===aa&&B.length<6;)B.push(U),U=this.consumeCodePoint(),T=!0;if(T){var K=parseInt(w.apply(void 0,B.map(function(Pe){return Pe===aa?Mn:Pe})),16),$=parseInt(w.apply(void 0,B.map(function(Pe){return Pe===aa?to:Pe})),16);return{type:30,start:K,end:$}}var ve=parseInt(w.apply(void 0,B),16);if(this.peekCodePoint(0)===Ri&&ro(this.peekCodePoint(1))){this.consumeCodePoint(),U=this.consumeCodePoint();for(var je=[];ro(U)&&je.length<6;)je.push(U),U=this.consumeCodePoint();var $=parseInt(w.apply(void 0,je),16);return{type:30,start:ve,end:$}}else return{type:30,start:ve,end:ve}},F.prototype.consumeIdentLikeToken=function(){var B=this.consumeName();return B.toLowerCase()==="url"&&this.peekCodePoint(0)===Gs?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Gs?(this.consumeCodePoint(),{type:19,value:B}):{type:20,value:B}},F.prototype.consumeUrlToken=function(){var B=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===gt)return{type:22,value:""};var U=this.peekCodePoint(0);if(U===Ks||U===wi){var T=this.consumeStringToken(this.consumeCodePoint());return T.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===gt||this.peekCodePoint(0)===ia)?(this.consumeCodePoint(),{type:22,value:T.value}):(this.consumeBadUrlRemnants(),N)}for(;;){var K=this.consumeCodePoint();if(K===gt||K===ia)return{type:22,value:w.apply(void 0,B)};if(vs(K))return this.consumeWhiteSpace(),this.peekCodePoint(0)===gt||this.peekCodePoint(0)===ia?(this.consumeCodePoint(),{type:22,value:w.apply(void 0,B)}):(this.consumeBadUrlRemnants(),N);if(K===wi||K===Ks||K===Gs||_c(K))return this.consumeBadUrlRemnants(),N;if(K===Vn)if(_a(K,this.peekCodePoint(0)))B.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),N;else B.push(K)}},F.prototype.consumeWhiteSpace=function(){for(;vs(this.peekCodePoint(0));)this.consumeCodePoint()},F.prototype.consumeBadUrlRemnants=function(){for(;;){var B=this.consumeCodePoint();if(B===ia||B===gt)return;_a(B,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},F.prototype.consumeStringSlice=function(B){for(var U=5e4,T="";B>0;){var K=Math.min(U,B);T+=w.apply(void 0,this._value.splice(0,K)),B-=K}return this._value.shift(),T},F.prototype.consumeStringToken=function(B){var U="",T=0;do{var K=this._value[T];if(K===gt||K===void 0||K===B)return U+=this.consumeStringSlice(T),{type:0,value:U};if(K===Bn)return this._value.splice(0,T),oe;if(K===Vn){var $=this._value[T+1];$!==gt&&$!==void 0&&($===Bn?(U+=this.consumeStringSlice(T),T=-1,this._value.shift()):_a(K,$)&&(U+=this.consumeStringSlice(T),U+=w(this.consumeEscapedCodePoint()),T=-1))}T++}while(!0)},F.prototype.consumeNumber=function(){var B=[],U=In,T=this.peekCodePoint(0);for((T===Bs||T===Ri)&&B.push(this.consumeCodePoint());ts(this.peekCodePoint(0));)B.push(this.consumeCodePoint());T=this.peekCodePoint(0);var K=this.peekCodePoint(1);if(T===Cn&&ts(K))for(B.push(this.consumeCodePoint(),this.consumeCodePoint()),U=mn;ts(this.peekCodePoint(0));)B.push(this.consumeCodePoint());T=this.peekCodePoint(0),K=this.peekCodePoint(1);var $=this.peekCodePoint(2);if((T===Aa||T===Oi)&&((K===Bs||K===Ri)&&ts($)||ts(K)))for(B.push(this.consumeCodePoint(),this.consumeCodePoint()),U=mn;ts(this.peekCodePoint(0));)B.push(this.consumeCodePoint());return[IA(B),U]},F.prototype.consumeNumericToken=function(){var B=this.consumeNumber(),U=B[0],T=B[1],K=this.peekCodePoint(0),$=this.peekCodePoint(1),ve=this.peekCodePoint(2);if(WA(K,$,ve)){var je=this.consumeName();return{type:15,number:U,flags:T,unit:je}}return K===Ya?(this.consumeCodePoint(),{type:16,number:U,flags:T}):{type:17,number:U,flags:T}},F.prototype.consumeEscapedCodePoint=function(){var B=this.consumeCodePoint();if(ro(B)){for(var U=w(B);ro(this.peekCodePoint(0))&&U.length<6;)U+=w(this.consumeCodePoint());vs(this.peekCodePoint(0))&&this.consumeCodePoint();var T=parseInt(U,16);return T===0||FA(T)||T>1114111?qs:T}return B===gt?qs:B},F.prototype.consumeName=function(){for(var B="";;){var U=this.consumeCodePoint();if(AA(U))B+=w(U);else if(_a(U,this.peekCodePoint(0)))B+=w(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(U),B}},F}(),Wn=function(){function F(B){this._tokens=B}return F.create=function(B){var U=new Kn;return U.write(B),new F(U.read())},F.parseValue=function(B){return F.create(B).parseComponentValue()},F.parseValues=function(B){return F.create(B).parseComponentValues()},F.prototype.parseComponentValue=function(){for(var B=this.consumeToken();B.type===31;)B=this.consumeToken();if(B.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(B);var U=this.consumeComponentValue();do B=this.consumeToken();while(B.type===31);if(B.type===32)return U;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},F.prototype.parseComponentValues=function(){for(var B=[];;){var U=this.consumeComponentValue();if(U.type===32)return B;B.push(U),B.push()}},F.prototype.consumeComponentValue=function(){var B=this.consumeToken();switch(B.type){case 11:case 28:case 2:return this.consumeSimpleBlock(B.type);case 19:return this.consumeFunction(B)}return B},F.prototype.consumeSimpleBlock=function(B){for(var U={type:B,values:[]},T=this.consumeToken();;){if(T.type===32||yl(T,B))return U;this.reconsumeToken(T),U.values.push(this.consumeComponentValue()),T=this.consumeToken()}},F.prototype.consumeFunction=function(B){for(var U={name:B.value,values:[],type:18};;){var T=this.consumeToken();if(T.type===32||T.type===3)return U;this.reconsumeToken(T),U.values.push(this.consumeComponentValue())}},F.prototype.consumeToken=function(){var B=this._tokens.shift();return typeof B>"u"?Dn:B},F.prototype.reconsumeToken=function(B){this._tokens.unshift(B)},F}(),pi=function(F){return F.type===15},mi=function(F){return F.type===17},Tn=function(F){return F.type===20},Es=function(F){return F.type===0},rs=function(F,B){return Tn(F)&&F.value===B},Ws=function(F){return F.type!==31},ns=function(F){return F.type!==31&&F.type!==4},Si=function(F){var B=[],U=[];return F.forEach(function(T){if(T.type===4){if(U.length===0)throw new Error("Error parsing function args, zero tokens for arg");B.push(U),U=[];return}T.type!==31&&U.push(T)}),U.length&&B.push(U),B},yl=function(F,B){return B===11&&F.type===12||B===28&&F.type===29?!0:B===2&&F.type===3},la=function(F){return F.type===17||F.type===15},Pi=function(F){return F.type===16||la(F)},xa=function(F){return F.length>1?[F[0],F[1]]:[F[0]]},Mi={type:17,number:0,flags:In},Ma={type:16,number:50,flags:In},Ba={type:16,number:100,flags:In},is=function(F,B,U){var T=F[0],K=F[1];return[hi(T,B),hi(typeof K<"u"?K:T,U)]},hi=function(F,B){if(F.type===16)return F.number/100*B;if(pi(F))switch(F.unit){case"rem":case"em":return 16*F.number;case"px":default:return F.number}return F.number},cA="deg",so="grad",uA="rad",Fs="turn",xo={name:"angle",parse:function(F,B){if(B.type===15)switch(B.unit){case cA:return Math.PI*B.number/180;case so:return Math.PI/200*B.number;case uA:return B.number;case Fs:return Math.PI*2*B.number}throw new Error("Unsupported angle type")}},ao=function(F){return F.type===15&&(F.unit===cA||F.unit===so||F.unit===uA||F.unit===Fs)},Ro=function(F){var B=F.filter(Tn).map(function(U){return U.value}).join(" ");switch(B){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Mi,Mi];case"to top":case"bottom":return Hi(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Mi,Ba];case"to right":case"left":return Hi(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Ba,Ba];case"to bottom":case"top":return Hi(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Ba,Mi];case"to left":case"right":return Hi(270)}return 0},Hi=function(F){return Math.PI*F/180},Ns={name:"color",parse:function(F,B){if(B.type===18){var U=as[B.name];if(typeof U>"u")throw new Error('Attempting to parse an unsupported color function "'+B.name+'"');return U(F,B.values)}if(B.type===5){if(B.value.length===3){var T=B.value.substring(0,1),K=B.value.substring(1,2),$=B.value.substring(2,3);return js(parseInt(T+T,16),parseInt(K+K,16),parseInt($+$,16),1)}if(B.value.length===4){var T=B.value.substring(0,1),K=B.value.substring(1,2),$=B.value.substring(2,3),ve=B.value.substring(3,4);return js(parseInt(T+T,16),parseInt(K+K,16),parseInt($+$,16),parseInt(ve+ve,16)/255)}if(B.value.length===6){var T=B.value.substring(0,2),K=B.value.substring(2,4),$=B.value.substring(4,6);return js(parseInt(T,16),parseInt(K,16),parseInt($,16),1)}if(B.value.length===8){var T=B.value.substring(0,2),K=B.value.substring(2,4),$=B.value.substring(4,6),ve=B.value.substring(6,8);return js(parseInt(T,16),parseInt(K,16),parseInt($,16),parseInt(ve,16)/255)}}if(B.type===20){var je=gi[B.value.toUpperCase()];if(typeof je<"u")return je}return gi.TRANSPARENT}},oo=function(F){return(255&F)===0},ss=function(F){var B=255&F,U=255&F>>8,T=255&F>>16,K=255&F>>24;return B<255?"rgba("+K+","+T+","+U+","+B/255+")":"rgb("+K+","+T+","+U+")"},js=function(F,B,U,T){return(F<<24|B<<16|U<<8|Math.round(T*255)<<0)>>>0},Ss=function(F,B){if(F.type===17)return F.number;if(F.type===16){var U=B===3?1:255;return B===3?F.number/100*U:Math.round(F.number/100*U)}return 0},Ca=function(F,B){var U=B.filter(ns);if(U.length===3){var T=U.map(Ss),K=T[0],$=T[1],ve=T[2];return js(K,$,ve,1)}if(U.length===4){var je=U.map(Ss),K=je[0],$=je[1],ve=je[2],Pe=je[3];return js(K,$,ve,Pe)}return 0};function ca(F,B,U){return U<0&&(U+=1),U>=1&&(U-=1),U<1/6?(B-F)*U*6+F:U<1/2?B:U<2/3?(B-F)*6*(2/3-U)+F:F}var Xs=function(F,B){var U=B.filter(ns),T=U[0],K=U[1],$=U[2],ve=U[3],je=(T.type===17?Hi(T.number):xo.parse(F,T))/(Math.PI*2),Pe=Pi(K)?K.number/100:0,yt=Pi($)?$.number/100:0,mt=typeof ve<"u"&&Pi(ve)?hi(ve,1):1;if(Pe===0)return js(yt*255,yt*255,yt*255,1);var Ut=yt<=.5?yt*(Pe+1):yt+Pe-yt*Pe,tr=yt*2-Ut,an=ca(tr,Ut,je+1/3),Qr=ca(tr,Ut,je),Jr=ca(tr,Ut,je-1/3);return js(an*255,Qr*255,Jr*255,mt)},as={hsl:Xs,hsla:Xs,rgb:Ca,rgba:Ca},ua=function(F,B){return Ns.parse(F,Wn.create(B).parseComponentValue())},gi={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},ZA={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(F,B){return B.map(function(U){if(Tn(U))switch(U.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Da={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Na=function(F,B){var U=Ns.parse(F,B[0]),T=B[1];return T&&Pi(T)?{color:U,stop:T}:{color:U,stop:null}},fs=function(F,B){var U=F[0],T=F[F.length-1];U.stop===null&&(U.stop=Mi),T.stop===null&&(T.stop=Ba);for(var K=[],$=0,ve=0;ve<F.length;ve++){var je=F[ve].stop;if(je!==null){var Pe=hi(je,B);Pe>$?K.push(Pe):K.push($),$=Pe}else K.push(null)}for(var yt=null,ve=0;ve<K.length;ve++){var mt=K[ve];if(mt===null)yt===null&&(yt=ve);else if(yt!==null){for(var Ut=ve-yt,tr=K[yt-1],an=(mt-tr)/(Ut+1),Qr=1;Qr<=Ut;Qr++)K[yt+Qr-1]=an*Qr;yt=null}}return F.map(function(Jr,Xn){var gn=Jr.color;return{color:gn,stop:Math.max(Math.min(1,K[Xn]/B),0)}})},Ea=function(F,B,U){var T=B/2,K=U/2,$=hi(F[0],B)-T,ve=K-hi(F[1],U);return(Math.atan2(ve,$)+Math.PI*2)%(Math.PI*2)},Oo=function(F,B,U){var T=typeof F=="number"?F:Ea(F,B,U),K=Math.abs(B*Math.sin(T))+Math.abs(U*Math.cos(T)),$=B/2,ve=U/2,je=K/2,Pe=Math.sin(T-Math.PI/2)*je,yt=Math.cos(T-Math.PI/2)*je;return[K,$-yt,$+yt,ve-Pe,ve+Pe]},Rs=function(F,B){return Math.sqrt(F*F+B*B)},hA=function(F,B,U,T,K){var $=[[0,0],[0,B],[F,0],[F,B]];return $.reduce(function(ve,je){var Pe=je[0],yt=je[1],mt=Rs(U-Pe,T-yt);return(K?mt<ve.optimumDistance:mt>ve.optimumDistance)?{optimumCorner:je,optimumDistance:mt}:ve},{optimumDistance:K?1/0:-1/0,optimumCorner:null}).optimumCorner},Ao=function(F,B,U,T,K){var $=0,ve=0;switch(F.size){case 0:F.shape===0?$=ve=Math.min(Math.abs(B),Math.abs(B-T),Math.abs(U),Math.abs(U-K)):F.shape===1&&($=Math.min(Math.abs(B),Math.abs(B-T)),ve=Math.min(Math.abs(U),Math.abs(U-K)));break;case 2:if(F.shape===0)$=ve=Math.min(Rs(B,U),Rs(B,U-K),Rs(B-T,U),Rs(B-T,U-K));else if(F.shape===1){var je=Math.min(Math.abs(U),Math.abs(U-K))/Math.min(Math.abs(B),Math.abs(B-T)),Pe=hA(T,K,B,U,!0),yt=Pe[0],mt=Pe[1];$=Rs(yt-B,(mt-U)/je),ve=je*$}break;case 1:F.shape===0?$=ve=Math.max(Math.abs(B),Math.abs(B-T),Math.abs(U),Math.abs(U-K)):F.shape===1&&($=Math.max(Math.abs(B),Math.abs(B-T)),ve=Math.max(Math.abs(U),Math.abs(U-K)));break;case 3:if(F.shape===0)$=ve=Math.max(Rs(B,U),Rs(B,U-K),Rs(B-T,U),Rs(B-T,U-K));else if(F.shape===1){var je=Math.max(Math.abs(U),Math.abs(U-K))/Math.max(Math.abs(B),Math.abs(B-T)),Ut=hA(T,K,B,U,!1),yt=Ut[0],mt=Ut[1];$=Rs(yt-B,(mt-U)/je),ve=je*$}break}return Array.isArray(F.size)&&($=hi(F.size[0],T),ve=F.size.length===2?hi(F.size[1],K):$),[$,ve]},Ho=function(F,B){var U=Hi(180),T=[];return Si(B).forEach(function(K,$){if($===0){var ve=K[0];if(ve.type===20&&ve.value==="to"){U=Ro(K);return}else if(ao(ve)){U=xo.parse(F,ve);return}}var je=Na(F,K);T.push(je)}),{angle:U,stops:T,type:1}},zi=function(F,B){var U=Hi(180),T=[];return Si(B).forEach(function(K,$){if($===0){var ve=K[0];if(ve.type===20&&["top","left","right","bottom"].indexOf(ve.value)!==-1){U=Ro(K);return}else if(ao(ve)){U=(xo.parse(F,ve)+Hi(270))%Hi(360);return}}var je=Na(F,K);T.push(je)}),{angle:U,stops:T,type:1}},Pr=function(F,B){var U=Hi(180),T=[],K=1,$=0,ve=3,je=[];return Si(B).forEach(function(Pe,yt){var mt=Pe[0];if(yt===0){if(Tn(mt)&&mt.value==="linear"){K=1;return}else if(Tn(mt)&&mt.value==="radial"){K=2;return}}if(mt.type===18){if(mt.name==="from"){var Ut=Ns.parse(F,mt.values[0]);T.push({stop:Mi,color:Ut})}else if(mt.name==="to"){var Ut=Ns.parse(F,mt.values[0]);T.push({stop:Ba,color:Ut})}else if(mt.name==="color-stop"){var tr=mt.values.filter(ns);if(tr.length===2){var Ut=Ns.parse(F,tr[1]),an=tr[0];mi(an)&&T.push({stop:{type:16,number:an.number*100,flags:an.flags},color:Ut})}}}}),K===1?{angle:(U+Hi(180))%Hi(360),stops:T,type:K}:{size:ve,shape:$,stops:T,position:je,type:K}},Ii="closest-side",Ai="farthest-side",Bi="closest-corner",Zi="farthest-corner",Ir="circle",ja="ellipse",LA="cover",kA="contain",Zl=function(F,B){var U=0,T=3,K=[],$=[];return Si(B).forEach(function(ve,je){var Pe=!0;if(je===0){var yt=!1;Pe=ve.reduce(function(Ut,tr){if(yt)if(Tn(tr))switch(tr.value){case"center":return $.push(Ma),Ut;case"top":case"left":return $.push(Mi),Ut;case"right":case"bottom":return $.push(Ba),Ut}else(Pi(tr)||la(tr))&&$.push(tr);else if(Tn(tr))switch(tr.value){case Ir:return U=0,!1;case ja:return U=1,!1;case"at":return yt=!0,!1;case Ii:return T=0,!1;case LA:case Ai:return T=1,!1;case kA:case Bi:return T=2,!1;case Zi:return T=3,!1}else if(la(tr)||Pi(tr))return Array.isArray(T)||(T=[]),T.push(tr),!1;return Ut},Pe)}if(Pe){var mt=Na(F,ve);K.push(mt)}}),{size:T,shape:U,stops:K,position:$,type:2}},JA=function(F,B){var U=0,T=3,K=[],$=[];return Si(B).forEach(function(ve,je){var Pe=!0;if(je===0?Pe=ve.reduce(function(mt,Ut){if(Tn(Ut))switch(Ut.value){case"center":return $.push(Ma),!1;case"top":case"left":return $.push(Mi),!1;case"right":case"bottom":return $.push(Ba),!1}else if(Pi(Ut)||la(Ut))return $.push(Ut),!1;return mt},Pe):je===1&&(Pe=ve.reduce(function(mt,Ut){if(Tn(Ut))switch(Ut.value){case Ir:return U=0,!1;case ja:return U=1,!1;case kA:case Ii:return T=0,!1;case Ai:return T=1,!1;case Bi:return T=2,!1;case LA:case Zi:return T=3,!1}else if(la(Ut)||Pi(Ut))return Array.isArray(T)||(T=[]),T.push(Ut),!1;return mt},Pe)),Pe){var yt=Na(F,ve);K.push(yt)}}),{size:T,shape:U,stops:K,position:$,type:2}},wc=function(F){return F.type===1},zc=function(F){return F.type===2},vl={name:"image",parse:function(F,B){if(B.type===22){var U={url:B.value,type:0};return F.cache.addImage(B.value),U}if(B.type===18){var T=YA[B.name];if(typeof T>"u")throw new Error('Attempting to parse an unsupported image function "'+B.name+'"');return T(F,B.values)}throw new Error("Unsupported image type "+B.type)}};function Jl(F){return!(F.type===20&&F.value==="none")&&(F.type!==18||!!YA[F.name])}var YA={"linear-gradient":Ho,"-moz-linear-gradient":zi,"-ms-linear-gradient":zi,"-o-linear-gradient":zi,"-webkit-linear-gradient":zi,"radial-gradient":Zl,"-moz-radial-gradient":JA,"-ms-radial-gradient":JA,"-o-radial-gradient":JA,"-webkit-radial-gradient":JA,"-webkit-gradient":Pr},$A={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(F,B){if(B.length===0)return[];var U=B[0];return U.type===20&&U.value==="none"?[]:B.filter(function(T){return ns(T)&&Jl(T)}).map(function(T){return vl.parse(F,T)})}},Zs={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(F,B){return B.map(function(U){if(Tn(U))switch(U.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Di={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(F,B){return Si(B).map(function(U){return U.filter(Pi)}).map(xa)}},lo={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(F,B){return Si(B).map(function(U){return U.filter(Tn).map(function(T){return T.value}).join(" ")}).map(_l)}},_l=function(F){switch(F){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Ra;(function(F){F.AUTO="auto",F.CONTAIN="contain",F.COVER="cover"})(Ra||(Ra={}));var el={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(F,B){return Si(B).map(function(U){return U.filter(fA)})}},fA=function(F){return Tn(F)||Pi(F)},QA=function(F){return{name:"border-"+F+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},Fa=QA("top"),Ui=QA("right"),PA=QA("bottom"),MA=QA("left"),DA=function(F){return{name:"border-radius-"+F,initialValue:"0 0",prefix:!1,type:1,parse:function(B,U){return xa(U.filter(Pi))}}},Vc=DA("top-left"),Kc=DA("top-right"),Gc=DA("bottom-right"),Bo=DA("bottom-left"),dA=function(F){return{name:"border-"+F+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(B,U){switch(U){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},sn=dA("top"),vn=dA("right"),tl=dA("bottom"),wl=dA("left"),Sa=function(F){return{name:"border-"+F+"-width",initialValue:"0",type:0,prefix:!1,parse:function(B,U){return pi(U)?U.number:0}}},os=Sa("top"),pA=Sa("right"),Co=Sa("bottom"),bc=Sa("left"),mA={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Ji={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(F,B){switch(B){case"rtl":return 1;case"ltr":default:return 0}}},ds={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(F,B){return B.filter(Tn).reduce(function(U,T){return U|xc(T.value)},0)}},xc=function(F){switch(F){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},ha={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(F,B){switch(B){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},g={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(F,B){return B.type===20&&B.value==="normal"?0:B.type===17||B.type===15?B.number:0}},i;(function(F){F.NORMAL="normal",F.STRICT="strict"})(i||(i={}));var u={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(F,B){switch(B){case"strict":return i.STRICT;case"normal":default:return i.NORMAL}}},m={name:"line-height",initialValue:"normal",prefix:!1,type:4},v=function(F,B){return Tn(F)&&F.value==="normal"?1.2*B:F.type===17?B*F.number:Pi(F)?hi(F,B):B},S={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(F,B){return B.type===20&&B.value==="none"?null:vl.parse(F,B)}},M={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(F,B){switch(B){case"inside":return 0;case"outside":default:return 1}}},z={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(F,B){switch(B){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},q=function(F){return{name:"margin-"+F,initialValue:"0",prefix:!1,type:4}},J=q("top"),se=q("right"),pe=q("bottom"),we=q("left"),Ve={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(F,B){return B.filter(Tn).map(function(U){switch(U.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},De={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(F,B){switch(B){case"break-word":return"break-word";case"normal":default:return"normal"}}},Oe=function(F){return{name:"padding-"+F,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},ct=Oe("top"),wt=Oe("right"),St=Oe("bottom"),We=Oe("left"),Rt={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(F,B){switch(B){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},Mt={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(F,B){switch(B){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Xt={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(F,B){return B.length===1&&rs(B[0],"none")?[]:Si(B).map(function(U){for(var T={color:gi.TRANSPARENT,offsetX:Mi,offsetY:Mi,blur:Mi},K=0,$=0;$<U.length;$++){var ve=U[$];la(ve)?(K===0?T.offsetX=ve:K===1?T.offsetY=ve:T.blur=ve,K++):T.color=Ns.parse(F,ve)}return T})}},Zt={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(F,B){switch(B){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},ur={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(F,B){if(B.type===20&&B.value==="none")return null;if(B.type===18){var U=Ur[B.name];if(typeof U>"u")throw new Error('Attempting to parse an unsupported transform function "'+B.name+'"');return U(B.values)}return null}},qt=function(F){var B=F.filter(function(U){return U.type===17}).map(function(U){return U.number});return B.length===6?B:null},Rr=function(F){var B=F.filter(function(Pe){return Pe.type===17}).map(function(Pe){return Pe.number}),U=B[0],T=B[1];B[2],B[3];var K=B[4],$=B[5];B[6],B[7],B[8],B[9],B[10],B[11];var ve=B[12],je=B[13];return B[14],B[15],B.length===16?[U,T,K,$,ve,je]:null},Ur={matrix:qt,matrix3d:Rr},qr={type:16,number:50,flags:In},Pn=[qr,qr],jn={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(F,B){var U=B.filter(Pi);return U.length!==2?Pn:[U[0],U[1]]}},b={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(F,B){switch(B){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},L;(function(F){F.NORMAL="normal",F.BREAK_ALL="break-all",F.KEEP_ALL="keep-all"})(L||(L={}));for(var j={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(F,B){switch(B){case"break-all":return L.BREAK_ALL;case"keep-all":return L.KEEP_ALL;case"normal":default:return L.NORMAL}}},W={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(F,B){if(B.type===20)return{auto:!0,order:0};if(mi(B))return{auto:!1,order:B.number};throw new Error("Invalid z-index number parsed")}},ae={name:"time",parse:function(F,B){if(B.type===15)switch(B.unit.toLowerCase()){case"s":return 1e3*B.number;case"ms":return B.number}throw new Error("Unsupported time type")}},de={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(F,B){return mi(B)?B.number:1}},ge={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},xe={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(F,B){return B.filter(Tn).map(function(U){switch(U.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(U){return U!==0})}},Ie={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(F,B){var U=[],T=[];return B.forEach(function(K){switch(K.type){case 20:case 0:U.push(K.value);break;case 17:U.push(K.number.toString());break;case 4:T.push(U.join(" ")),U.length=0;break}}),U.length&&T.push(U.join(" ")),T.map(function(K){return K.indexOf(" ")===-1?K:"'"+K+"'"})}},Ne={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},ft={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(F,B){if(mi(B))return B.number;if(Tn(B))switch(B.value){case"bold":return 700;case"normal":default:return 400}return 400}},It={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(F,B){return B.filter(Tn).map(function(U){return U.value})}},Ft={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(F,B){switch(B){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},pt=function(F,B){return(F&B)!==0},Ar={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(F,B){if(B.length===0)return[];var U=B[0];return U.type===20&&U.value==="none"?[]:B}},Vt={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(F,B){if(B.length===0)return null;var U=B[0];if(U.type===20&&U.value==="none")return null;for(var T=[],K=B.filter(Ws),$=0;$<K.length;$++){var ve=K[$],je=K[$+1];if(ve.type===20){var Pe=je&&mi(je)?je.number:1;T.push({counter:ve.value,increment:Pe})}}return T}},Ye={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(F,B){if(B.length===0)return[];for(var U=[],T=B.filter(Ws),K=0;K<T.length;K++){var $=T[K],ve=T[K+1];if(Tn($)&&$.value!=="none"){var je=ve&&mi(ve)?ve.number:0;U.push({counter:$.value,reset:je})}}return U}},At={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(F,B){return B.filter(pi).map(function(U){return ae.parse(F,U)})}},Yt={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(F,B){if(B.length===0)return null;var U=B[0];if(U.type===20&&U.value==="none")return null;var T=[],K=B.filter(Es);if(K.length%2!==0)return null;for(var $=0;$<K.length;$+=2){var ve=K[$].value,je=K[$+1].value;T.push({open:ve,close:je})}return T}},ir=function(F,B,U){if(!F)return"";var T=F[Math.min(B,F.length-1)];return T?U?T.open:T.close:""},Wt={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(F,B){return B.length===1&&rs(B[0],"none")?[]:Si(B).map(function(U){for(var T={color:255,offsetX:Mi,offsetY:Mi,blur:Mi,spread:Mi,inset:!1},K=0,$=0;$<U.length;$++){var ve=U[$];rs(ve,"inset")?T.inset=!0:la(ve)?(K===0?T.offsetX=ve:K===1?T.offsetY=ve:K===2?T.blur=ve:T.spread=ve,K++):T.color=Ns.parse(F,ve)}return T})}},Dr={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(F,B){var U=[0,1,2],T=[];return B.filter(Tn).forEach(function(K){switch(K.value){case"stroke":T.push(1);break;case"fill":T.push(0);break;case"markers":T.push(2);break}}),U.forEach(function(K){T.indexOf(K)===-1&&T.push(K)}),T}},kr={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},Fn={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(F,B){return pi(B)?B.number:0}},Nr=function(){function F(B,U){var T,K;this.animationDuration=hr(B,At,U.animationDuration),this.backgroundClip=hr(B,ZA,U.backgroundClip),this.backgroundColor=hr(B,Da,U.backgroundColor),this.backgroundImage=hr(B,$A,U.backgroundImage),this.backgroundOrigin=hr(B,Zs,U.backgroundOrigin),this.backgroundPosition=hr(B,Di,U.backgroundPosition),this.backgroundRepeat=hr(B,lo,U.backgroundRepeat),this.backgroundSize=hr(B,el,U.backgroundSize),this.borderTopColor=hr(B,Fa,U.borderTopColor),this.borderRightColor=hr(B,Ui,U.borderRightColor),this.borderBottomColor=hr(B,PA,U.borderBottomColor),this.borderLeftColor=hr(B,MA,U.borderLeftColor),this.borderTopLeftRadius=hr(B,Vc,U.borderTopLeftRadius),this.borderTopRightRadius=hr(B,Kc,U.borderTopRightRadius),this.borderBottomRightRadius=hr(B,Gc,U.borderBottomRightRadius),this.borderBottomLeftRadius=hr(B,Bo,U.borderBottomLeftRadius),this.borderTopStyle=hr(B,sn,U.borderTopStyle),this.borderRightStyle=hr(B,vn,U.borderRightStyle),this.borderBottomStyle=hr(B,tl,U.borderBottomStyle),this.borderLeftStyle=hr(B,wl,U.borderLeftStyle),this.borderTopWidth=hr(B,os,U.borderTopWidth),this.borderRightWidth=hr(B,pA,U.borderRightWidth),this.borderBottomWidth=hr(B,Co,U.borderBottomWidth),this.borderLeftWidth=hr(B,bc,U.borderLeftWidth),this.boxShadow=hr(B,Wt,U.boxShadow),this.color=hr(B,mA,U.color),this.direction=hr(B,Ji,U.direction),this.display=hr(B,ds,U.display),this.float=hr(B,ha,U.cssFloat),this.fontFamily=hr(B,Ie,U.fontFamily),this.fontSize=hr(B,Ne,U.fontSize),this.fontStyle=hr(B,Ft,U.fontStyle),this.fontVariant=hr(B,It,U.fontVariant),this.fontWeight=hr(B,ft,U.fontWeight),this.letterSpacing=hr(B,g,U.letterSpacing),this.lineBreak=hr(B,u,U.lineBreak),this.lineHeight=hr(B,m,U.lineHeight),this.listStyleImage=hr(B,S,U.listStyleImage),this.listStylePosition=hr(B,M,U.listStylePosition),this.listStyleType=hr(B,z,U.listStyleType),this.marginTop=hr(B,J,U.marginTop),this.marginRight=hr(B,se,U.marginRight),this.marginBottom=hr(B,pe,U.marginBottom),this.marginLeft=hr(B,we,U.marginLeft),this.opacity=hr(B,de,U.opacity);var $=hr(B,Ve,U.overflow);this.overflowX=$[0],this.overflowY=$[$.length>1?1:0],this.overflowWrap=hr(B,De,U.overflowWrap),this.paddingTop=hr(B,ct,U.paddingTop),this.paddingRight=hr(B,wt,U.paddingRight),this.paddingBottom=hr(B,St,U.paddingBottom),this.paddingLeft=hr(B,We,U.paddingLeft),this.paintOrder=hr(B,Dr,U.paintOrder),this.position=hr(B,Mt,U.position),this.textAlign=hr(B,Rt,U.textAlign),this.textDecorationColor=hr(B,ge,(T=U.textDecorationColor)!==null&&T!==void 0?T:U.color),this.textDecorationLine=hr(B,xe,(K=U.textDecorationLine)!==null&&K!==void 0?K:U.textDecoration),this.textShadow=hr(B,Xt,U.textShadow),this.textTransform=hr(B,Zt,U.textTransform),this.transform=hr(B,ur,U.transform),this.transformOrigin=hr(B,jn,U.transformOrigin),this.visibility=hr(B,b,U.visibility),this.webkitTextStrokeColor=hr(B,kr,U.webkitTextStrokeColor),this.webkitTextStrokeWidth=hr(B,Fn,U.webkitTextStrokeWidth),this.wordBreak=hr(B,j,U.wordBreak),this.zIndex=hr(B,W,U.zIndex)}return F.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},F.prototype.isTransparent=function(){return oo(this.backgroundColor)},F.prototype.isTransformed=function(){return this.transform!==null},F.prototype.isPositioned=function(){return this.position!==0},F.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},F.prototype.isFloating=function(){return this.float!==0},F.prototype.isInlineLevel=function(){return pt(this.display,4)||pt(this.display,33554432)||pt(this.display,268435456)||pt(this.display,536870912)||pt(this.display,67108864)||pt(this.display,134217728)},F}(),fi=function(){function F(B,U){this.content=hr(B,Ar,U.content),this.quotes=hr(B,Yt,U.quotes)}return F}(),di=function(){function F(B,U){this.counterIncrement=hr(B,Vt,U.counterIncrement),this.counterReset=hr(B,Ye,U.counterReset)}return F}(),hr=function(F,B,U){var T=new Kn,K=U!==null&&typeof U<"u"?U.toString():B.initialValue;T.write(K);var $=new Wn(T.read());switch(B.type){case 2:var ve=$.parseComponentValue();return B.parse(F,Tn(ve)?ve.value:B.initialValue);case 0:return B.parse(F,$.parseComponentValue());case 1:return B.parse(F,$.parseComponentValues());case 4:return $.parseComponentValue();case 3:switch(B.format){case"angle":return xo.parse(F,$.parseComponentValue());case"color":return Ns.parse(F,$.parseComponentValue());case"image":return vl.parse(F,$.parseComponentValue());case"length":var je=$.parseComponentValue();return la(je)?je:Mi;case"length-percentage":var Pe=$.parseComponentValue();return Pi(Pe)?Pe:Mi;case"time":return ae.parse(F,$.parseComponentValue())}break}},zn="data-html2canvas-debug",li=function(F){var B=F.getAttribute(zn);switch(B){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},ci=function(F,B){var U=li(F);return U===1||B===U},Un=function(){function F(B,U){if(this.context=B,this.textNodes=[],this.elements=[],this.flags=0,ci(U,3))debugger;this.styles=new Nr(B,window.getComputedStyle(U,null)),_h(U)&&(this.styles.animationDuration.some(function(T){return T>0})&&(U.style.animationDuration="0s"),this.styles.transform!==null&&(U.style.transform="none")),this.bounds=_(this.context,U),ci(U,4)&&(this.flags|=16)}return F}(),Is="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",Js="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ki=typeof Uint8Array>"u"?[]:new Uint8Array(256),ps=0;ps<Js.length;ps++)ki[Js.charCodeAt(ps)]=ps;for(var ri=function(F){var B=F.length*.75,U=F.length,T,K=0,$,ve,je,Pe;F[F.length-1]==="="&&(B--,F[F.length-2]==="="&&B--);var yt=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(B):new Array(B),mt=Array.isArray(yt)?yt:new Uint8Array(yt);for(T=0;T<U;T+=4)$=ki[F.charCodeAt(T)],ve=ki[F.charCodeAt(T+1)],je=ki[F.charCodeAt(T+2)],Pe=ki[F.charCodeAt(T+3)],mt[K++]=$<<2|ve>>4,mt[K++]=(ve&15)<<4|je>>2,mt[K++]=(je&3)<<6|Pe&63;return yt},As=function(F){for(var B=F.length,U=[],T=0;T<B;T+=2)U.push(F[T+1]<<8|F[T]);return U},Ts=function(F){for(var B=F.length,U=[],T=0;T<B;T+=4)U.push(F[T+3]<<24|F[T+2]<<16|F[T+1]<<8|F[T]);return U},Vi=5,Ki=6+5,Ys=2,co=Ki-Vi,Ci=65536>>Vi,Us=1<<Vi,Eo=Us-1,uo=1024>>Vi,Fo=Ci+uo,zo=Fo,Yi=32,qc=zo+Yi,lh=65536>>Ki,Fu=1<<co,Wc=Fu-1,rl=function(F,B,U){return F.slice?F.slice(B,U):new Uint16Array(Array.prototype.slice.call(F,B,U))},Xc=function(F,B,U){return F.slice?F.slice(B,U):new Uint32Array(Array.prototype.slice.call(F,B,U))},ho=function(F,B){var U=ri(F),T=Array.isArray(U)?Ts(U):new Uint32Array(U),K=Array.isArray(U)?As(U):new Uint16Array(U),$=24,ve=rl(K,$/2,T[4]/2),je=T[5]===2?rl(K,($+T[4])/2):Xc(T,Math.ceil(($+T[4])/4));return new bl(T[0],T[1],T[2],T[3],ve,je)},bl=function(){function F(B,U,T,K,$,ve){this.initialValue=B,this.errorValue=U,this.highStart=T,this.highValueIndex=K,this.index=$,this.data=ve}return F.prototype.get=function(B){var U;if(B>=0){if(B<55296||B>56319&&B<=65535)return U=this.index[B>>Vi],U=(U<<Ys)+(B&Eo),this.data[U];if(B<=65535)return U=this.index[Ci+(B-55296>>Vi)],U=(U<<Ys)+(B&Eo),this.data[U];if(B<this.highStart)return U=qc-lh+(B>>Ki),U=this.index[U],U+=B>>Vi&Wc,U=this.index[U],U=(U<<Ys)+(B&Eo),this.data[U];if(B<=1114111)return this.data[this.highValueIndex]}return this.errorValue},F}(),nl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",xl=typeof Uint8Array>"u"?[]:new Uint8Array(256),Bl=0;Bl<nl.length;Bl++)xl[nl.charCodeAt(Bl)]=Bl;var Yl=1,NA=2,il=3,Bc=4,$l=5,fa=7,$s=8,ec=9,So=10,Su=11,tc=12,ch=13,Zc=14,Cl=15,Cc=function(F){for(var B=[],U=0,T=F.length;U<T;){var K=F.charCodeAt(U++);if(K>=55296&&K<=56319&&U<T){var $=F.charCodeAt(U++);($&64512)===56320?B.push(((K&1023)<<10)+($&1023)+65536):(B.push(K),U--)}else B.push(K)}return B},Iu=function(){for(var F=[],B=0;B<arguments.length;B++)F[B]=arguments[B];if(String.fromCodePoint)return String.fromCodePoint.apply(String,F);var U=F.length;if(!U)return"";for(var T=[],K=-1,$="";++K<U;){var ve=F[K];ve<=65535?T.push(ve):(ve-=65536,T.push((ve>>10)+55296,ve%1024+56320)),(K+1===U||T.length>16384)&&($+=String.fromCharCode.apply(String,T),T.length=0)}return $},Ec=ho(Is),Ia="×",El="÷",Jc=function(F){return Ec.get(F)},uh=function(F,B,U){var T=U-2,K=B[T],$=B[U-1],ve=B[U];if($===NA&&ve===il)return Ia;if($===NA||$===il||$===Bc||ve===NA||ve===il||ve===Bc)return El;if($===$s&&[$s,ec,Su,tc].indexOf(ve)!==-1||($===Su||$===ec)&&(ve===ec||ve===So)||($===tc||$===So)&&ve===So||ve===ch||ve===$l||ve===fa||$===Yl)return Ia;if($===ch&&ve===Zc){for(;K===$l;)K=B[--T];if(K===Zc)return Ia}if($===Cl&&ve===Cl){for(var je=0;K===Cl;)je++,K=B[--T];if(je%2===0)return Ia}return El},rc=function(F){var B=Cc(F),U=B.length,T=0,K=0,$=B.map(Jc);return{next:function(){if(T>=U)return{done:!0,value:null};for(var ve=Ia;T<U&&(ve=uh(B,$,++T))===Ia;);if(ve!==Ia||T===U){var je=Iu.apply(null,B.slice(K,T));return K=T,{value:je,done:!1}}return{done:!0,value:null}}}},nc=function(F){for(var B=rc(F),U=[],T;!(T=B.next()).done;)T.value&&U.push(T.value.slice());return U},Ta=function(F){var B=123;if(F.createRange){var U=F.createRange();if(U.getBoundingClientRect){var T=F.createElement("boundtest");T.style.height=B+"px",T.style.display="block",F.body.appendChild(T),U.selectNode(T);var K=U.getBoundingClientRect(),$=Math.round(K.height);if(F.body.removeChild(T),$===B)return!0}}return!1},jA=function(F){var B=F.createElement("boundtest");B.style.width="50px",B.style.display="block",B.style.fontSize="12px",B.style.letterSpacing="0px",B.style.wordSpacing="0px",F.body.appendChild(B);var U=F.createRange();B.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var T=B.firstChild,K=E(T.data).map(function(Pe){return w(Pe)}),$=0,ve={},je=K.every(function(Pe,yt){U.setStart(T,$),U.setEnd(T,$+Pe.length);var mt=U.getBoundingClientRect();$+=Pe.length;var Ut=mt.x>ve.x||mt.y>ve.y;return ve=mt,yt===0?!0:Ut});return F.body.removeChild(B),je},hh=function(){return typeof new Image().crossOrigin<"u"},fh=function(){return typeof new XMLHttpRequest().responseType=="string"},ef=function(F){var B=new Image,U=F.createElement("canvas"),T=U.getContext("2d");if(!T)return!1;B.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{T.drawImage(B,0,0),U.toDataURL()}catch{return!1}return!0},ic=function(F){return F[0]===0&&F[1]===255&&F[2]===0&&F[3]===255},RA=function(F){var B=F.createElement("canvas"),U=100;B.width=U,B.height=U;var T=B.getContext("2d");if(!T)return Promise.reject(!1);T.fillStyle="rgb(0, 255, 0)",T.fillRect(0,0,U,U);var K=new Image,$=B.toDataURL();K.src=$;var ve=Yc(U,U,0,0,K);return T.fillStyle="red",T.fillRect(0,0,U,U),OA(ve).then(function(je){T.drawImage(je,0,0);var Pe=T.getImageData(0,0,U,U).data;T.fillStyle="red",T.fillRect(0,0,U,U);var yt=F.createElement("div");return yt.style.backgroundImage="url("+$+")",yt.style.height=U+"px",ic(Pe)?OA(Yc(U,U,0,0,yt)):Promise.reject(!1)}).then(function(je){return T.drawImage(je,0,0),ic(T.getImageData(0,0,U,U).data)}).catch(function(){return!1})},Yc=function(F,B,U,T,K){var $="http://www.w3.org/2000/svg",ve=document.createElementNS($,"svg"),je=document.createElementNS($,"foreignObject");return ve.setAttributeNS(null,"width",F.toString()),ve.setAttributeNS(null,"height",B.toString()),je.setAttributeNS(null,"width","100%"),je.setAttributeNS(null,"height","100%"),je.setAttributeNS(null,"x",U.toString()),je.setAttributeNS(null,"y",T.toString()),je.setAttributeNS(null,"externalResourcesRequired","true"),ve.appendChild(je),je.appendChild(K),ve},OA=function(F){return new Promise(function(B,U){var T=new Image;T.onload=function(){return B(T)},T.onerror=U,T.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(F))})},_s={get SUPPORT_RANGE_BOUNDS(){var F=Ta(document);return Object.defineProperty(_s,"SUPPORT_RANGE_BOUNDS",{value:F}),F},get SUPPORT_WORD_BREAKING(){var F=_s.SUPPORT_RANGE_BOUNDS&&jA(document);return Object.defineProperty(_s,"SUPPORT_WORD_BREAKING",{value:F}),F},get SUPPORT_SVG_DRAWING(){var F=ef(document);return Object.defineProperty(_s,"SUPPORT_SVG_DRAWING",{value:F}),F},get SUPPORT_FOREIGNOBJECT_DRAWING(){var F=typeof Array.from=="function"&&typeof window.fetch=="function"?RA(document):Promise.resolve(!1);return Object.defineProperty(_s,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:F}),F},get SUPPORT_CORS_IMAGES(){var F=hh();return Object.defineProperty(_s,"SUPPORT_CORS_IMAGES",{value:F}),F},get SUPPORT_RESPONSE_TYPE(){var F=fh();return Object.defineProperty(_s,"SUPPORT_RESPONSE_TYPE",{value:F}),F},get SUPPORT_CORS_XHR(){var F="withCredentials"in new XMLHttpRequest;return Object.defineProperty(_s,"SUPPORT_CORS_XHR",{value:F}),F},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var F=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(_s,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:F}),F}},sc=function(){function F(B,U){this.text=B,this.bounds=U}return F}(),tf=function(F,B,U,T){var K=sl(B,U),$=[],ve=0;return K.forEach(function(je){if(U.textDecorationLine.length||je.trim().length>0)if(_s.SUPPORT_RANGE_BOUNDS){var Pe=$c(T,ve,je.length).getClientRects();if(Pe.length>1){var yt=ac(je),mt=0;yt.forEach(function(tr){$.push(new sc(tr,d.fromDOMRectList(F,$c(T,mt+ve,tr.length).getClientRects()))),mt+=tr.length})}else $.push(new sc(je,d.fromDOMRectList(F,Pe)))}else{var Ut=T.splitText(je.length);$.push(new sc(je,Fc(F,T))),T=Ut}else _s.SUPPORT_RANGE_BOUNDS||(T=T.splitText(je.length));ve+=je.length}),$},Fc=function(F,B){var U=B.ownerDocument;if(U){var T=U.createElement("html2canvaswrapper");T.appendChild(B.cloneNode(!0));var K=B.parentNode;if(K){K.replaceChild(T,B);var $=_(F,T);return T.firstChild&&K.replaceChild(T.firstChild,T),$}}return d.EMPTY},$c=function(F,B,U){var T=F.ownerDocument;if(!T)throw new Error("Node has no owner document");var K=T.createRange();return K.setStart(F,B),K.setEnd(F,B+U),K},ac=function(F){if(_s.SUPPORT_NATIVE_TEXT_SEGMENTATION){var B=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(B.segment(F)).map(function(U){return U.segment})}return nc(F)},HA=function(F,B){if(_s.SUPPORT_NATIVE_TEXT_SEGMENTATION){var U=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(U.segment(F)).map(function(T){return T.segment})}return eu(F,B)},sl=function(F,B){return B.letterSpacing!==0?ac(F):HA(F,B)},gA=[32,160,4961,65792,65793,4153,4241],eu=function(F,B){for(var U=Tr(F,{lineBreak:B.lineBreak,wordBreak:B.overflowWrap==="break-word"?"break-word":B.wordBreak}),T=[],K,$=function(){if(K.value){var ve=K.value.slice(),je=E(ve),Pe="";je.forEach(function(yt){gA.indexOf(yt)===-1?Pe+=w(yt):(Pe.length&&T.push(Pe),T.push(w(yt)),Pe="")}),Pe.length&&T.push(Pe)}};!(K=U.next()).done;)$();return T},al=function(){function F(B,U,T){this.text=dh(U.data,T.textTransform),this.textBounds=tf(B,this.text,T,U)}return F}(),dh=function(F,B){switch(B){case 1:return F.toLowerCase();case 3:return F.replace(ls,oc);case 2:return F.toUpperCase();default:return F}},ls=/(^|\s|:|-|\(|\))([a-z])/g,oc=function(F,B,U){return F.length>0?B+U.toUpperCase():F},Sc=function(F){s(B,F);function B(U,T){var K=F.call(this,U,T)||this;return K.src=T.currentSrc||T.src,K.intrinsicWidth=T.naturalWidth,K.intrinsicHeight=T.naturalHeight,K.context.cache.addImage(K.src),K}return B}(Un),Tu=function(F){s(B,F);function B(U,T){var K=F.call(this,U,T)||this;return K.canvas=T,K.intrinsicWidth=T.width,K.intrinsicHeight=T.height,K}return B}(Un),Uu=function(F){s(B,F);function B(U,T){var K=F.call(this,U,T)||this,$=new XMLSerializer,ve=_(U,T);return T.setAttribute("width",ve.width+"px"),T.setAttribute("height",ve.height+"px"),K.svg="data:image/svg+xml,"+encodeURIComponent($.serializeToString(T)),K.intrinsicWidth=T.width.baseVal.value,K.intrinsicHeight=T.height.baseVal.value,K.context.cache.addImage(K.svg),K}return B}(Un),tu=function(F){s(B,F);function B(U,T){var K=F.call(this,U,T)||this;return K.value=T.value,K}return B}(Un),ph=function(F){s(B,F);function B(U,T){var K=F.call(this,U,T)||this;return K.start=T.start,K.reversed=typeof T.reversed=="boolean"&&T.reversed===!0,K}return B}(Un),hd=[{type:15,flags:0,unit:"px",number:3}],Lu=[{type:16,flags:0,number:50}],rf=function(F){return F.width>F.height?new d(F.left+(F.width-F.height)/2,F.top,F.height,F.height):F.width<F.height?new d(F.left,F.top+(F.height-F.width)/2,F.width,F.width):F},nf=function(F){var B=F.type===Qu?new Array(F.value.length+1).join("•"):F.value;return B.length===0?F.placeholder||"":B},mh="checkbox",ku="radio",Qu="password",fd=707406591,Pu=function(F){s(B,F);function B(U,T){var K=F.call(this,U,T)||this;switch(K.type=T.type.toLowerCase(),K.checked=T.checked,K.value=nf(T),(K.type===mh||K.type===ku)&&(K.styles.backgroundColor=3739148031,K.styles.borderTopColor=K.styles.borderRightColor=K.styles.borderBottomColor=K.styles.borderLeftColor=2779096575,K.styles.borderTopWidth=K.styles.borderRightWidth=K.styles.borderBottomWidth=K.styles.borderLeftWidth=1,K.styles.borderTopStyle=K.styles.borderRightStyle=K.styles.borderBottomStyle=K.styles.borderLeftStyle=1,K.styles.backgroundClip=[0],K.styles.backgroundOrigin=[0],K.bounds=rf(K.bounds)),K.type){case mh:K.styles.borderTopRightRadius=K.styles.borderTopLeftRadius=K.styles.borderBottomRightRadius=K.styles.borderBottomLeftRadius=hd;break;case ku:K.styles.borderTopRightRadius=K.styles.borderTopLeftRadius=K.styles.borderBottomRightRadius=K.styles.borderBottomLeftRadius=Lu;break}return K}return B}(Un),dd=function(F){s(B,F);function B(U,T){var K=F.call(this,U,T)||this,$=T.options[T.selectedIndex||0];return K.value=$&&$.text||"",K}return B}(Un),gh=function(F){s(B,F);function B(U,T){var K=F.call(this,U,T)||this;return K.value=T.value,K}return B}(Un),yh=function(F){s(B,F);function B(U,T){var K=F.call(this,U,T)||this;K.src=T.src,K.width=parseInt(T.width,10)||0,K.height=parseInt(T.height,10)||0,K.backgroundColor=K.styles.backgroundColor;try{if(T.contentWindow&&T.contentWindow.document&&T.contentWindow.document.documentElement){K.tree=md(U,T.contentWindow.document.documentElement);var $=T.contentWindow.document.documentElement?ua(U,getComputedStyle(T.contentWindow.document.documentElement).backgroundColor):gi.TRANSPARENT,ve=T.contentWindow.document.body?ua(U,getComputedStyle(T.contentWindow.document.body).backgroundColor):gi.TRANSPARENT;K.backgroundColor=oo($)?oo(ve)?K.styles.backgroundColor:ve:$}}catch{}return K}return B}(Un),sf=["OL","UL","MENU"],vh=function(F,B,U,T){for(var K=B.firstChild,$=void 0;K;K=$)if($=K.nextSibling,Fl(K)&&K.data.trim().length>0)U.textNodes.push(new al(F,K,U.styles));else if(ru(K))if(_d(K)&&K.assignedNodes)K.assignedNodes().forEach(function(je){return vh(F,je,U,T)});else{var ve=pd(F,K);ve.styles.isVisible()&&(Kp(K,ve,T)?ve.flags|=4:Gp(ve.styles)&&(ve.flags|=2),sf.indexOf(K.tagName)!==-1&&(ve.flags|=8),U.elements.push(ve),K.slot,K.shadowRoot?vh(F,K.shadowRoot,ve,T):!bh(K)&&!af(K)&&!xh(K)&&vh(F,K,ve,T))}},pd=function(F,B){return Af(B)?new Sc(F,B):yd(B)?new Tu(F,B):af(B)?new Uu(F,B):qp(B)?new tu(F,B):Wp(B)?new ph(F,B):Xp(B)?new Pu(F,B):xh(B)?new dd(F,B):bh(B)?new gh(F,B):wh(B)?new yh(F,B):new Un(F,B)},md=function(F,B){var U=pd(F,B);return U.flags|=4,vh(F,B,U,U),U},Kp=function(F,B,U){return B.styles.isPositionedWithZIndex()||B.styles.opacity<1||B.styles.isTransformed()||of(F)&&U.styles.isTransparent()},Gp=function(F){return F.isPositioned()||F.isFloating()},Fl=function(F){return F.nodeType===Node.TEXT_NODE},ru=function(F){return F.nodeType===Node.ELEMENT_NODE},_h=function(F){return ru(F)&&typeof F.style<"u"&&!Sl(F)},Sl=function(F){return typeof F.className=="object"},qp=function(F){return F.tagName==="LI"},Wp=function(F){return F.tagName==="OL"},Xp=function(F){return F.tagName==="INPUT"},gd=function(F){return F.tagName==="HTML"},af=function(F){return F.tagName==="svg"},of=function(F){return F.tagName==="BODY"},yd=function(F){return F.tagName==="CANVAS"},vd=function(F){return F.tagName==="VIDEO"},Af=function(F){return F.tagName==="IMG"},wh=function(F){return F.tagName==="IFRAME"},nu=function(F){return F.tagName==="STYLE"},lf=function(F){return F.tagName==="SCRIPT"},bh=function(F){return F.tagName==="TEXTAREA"},xh=function(F){return F.tagName==="SELECT"},_d=function(F){return F.tagName==="SLOT"},iu=function(F){return F.tagName.indexOf("-")>0},wd=function(){function F(){this.counters={}}return F.prototype.getCounterValue=function(B){var U=this.counters[B];return U&&U.length?U[U.length-1]:1},F.prototype.getCounterValues=function(B){var U=this.counters[B];return U||[]},F.prototype.pop=function(B){var U=this;B.forEach(function(T){return U.counters[T].pop()})},F.prototype.parse=function(B){var U=this,T=B.counterIncrement,K=B.counterReset,$=!0;T!==null&&T.forEach(function(je){var Pe=U.counters[je.counter];Pe&&je.increment!==0&&($=!1,Pe.length||Pe.push(1),Pe[Math.max(0,Pe.length-1)]+=je.increment)});var ve=[];return $&&K.forEach(function(je){var Pe=U.counters[je.counter];ve.push(je.counter),Pe||(Pe=U.counters[je.counter]=[]),Pe.push(je.reset)}),ve},F}(),bd={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},xd={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},Zp={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},Jp={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},su=function(F,B,U,T,K,$){return F<B||F>U?Mu(F,K,$.length>0):T.integers.reduce(function(ve,je,Pe){for(;F>=je;)F-=je,ve+=T.values[Pe];return ve},"")+$},Bd=function(F,B,U,T){var K="";do U||F--,K=T(F)+K,F/=B;while(F*B>=B);return K},Ls=function(F,B,U,T,K){var $=U-B+1;return(F<0?"-":"")+(Bd(Math.abs(F),$,T,function(ve){return w(Math.floor(ve%$)+B)})+K)},Il=function(F,B,U){U===void 0&&(U=". ");var T=B.length;return Bd(Math.abs(F),T,!1,function(K){return B[Math.floor(K%T)]})+U},au=1<<0,Tl=1<<1,Ul=1<<2,ou=1<<3,Ll=function(F,B,U,T,K,$){if(F<-9999||F>9999)return Mu(F,4,K.length>0);var ve=Math.abs(F),je=K;if(ve===0)return B[0]+je;for(var Pe=0;ve>0&&Pe<=4;Pe++){var yt=ve%10;yt===0&&pt($,au)&&je!==""?je=B[yt]+je:yt>1||yt===1&&Pe===0||yt===1&&Pe===1&&pt($,Tl)||yt===1&&Pe===1&&pt($,Ul)&&F>100||yt===1&&Pe>1&&pt($,ou)?je=B[yt]+(Pe>0?U[Pe-1]:"")+je:yt===1&&Pe>0&&(je=U[Pe-1]+je),ve=Math.floor(ve/10)}return(F<0?T:"")+je},Cd="十百千萬",Ed="拾佰仟萬",cf="マイナス",uf="마이너스",Mu=function(F,B,U){var T=U?". ":"",K=U?"、":"",$=U?", ":"",ve=U?" ":"";switch(B){case 0:return"•"+ve;case 1:return"◦"+ve;case 2:return"◾"+ve;case 5:var je=Ls(F,48,57,!0,T);return je.length<4?"0"+je:je;case 4:return Il(F,"〇一二三四五六七八九",K);case 6:return su(F,1,3999,bd,3,T).toLowerCase();case 7:return su(F,1,3999,bd,3,T);case 8:return Ls(F,945,969,!1,T);case 9:return Ls(F,97,122,!1,T);case 10:return Ls(F,65,90,!1,T);case 11:return Ls(F,1632,1641,!0,T);case 12:case 49:return su(F,1,9999,xd,3,T);case 35:return su(F,1,9999,xd,3,T).toLowerCase();case 13:return Ls(F,2534,2543,!0,T);case 14:case 30:return Ls(F,6112,6121,!0,T);case 15:return Il(F,"子丑寅卯辰巳午未申酉戌亥",K);case 16:return Il(F,"甲乙丙丁戊己庚辛壬癸",K);case 17:case 48:return Ll(F,"零一二三四五六七八九",Cd,"負",K,Tl|Ul|ou);case 47:return Ll(F,"零壹貳參肆伍陸柒捌玖",Ed,"負",K,au|Tl|Ul|ou);case 42:return Ll(F,"零一二三四五六七八九",Cd,"负",K,Tl|Ul|ou);case 41:return Ll(F,"零壹贰叁肆伍陆柒捌玖",Ed,"负",K,au|Tl|Ul|ou);case 26:return Ll(F,"〇一二三四五六七八九","十百千万",cf,K,0);case 25:return Ll(F,"零壱弐参四伍六七八九","拾百千万",cf,K,au|Tl|Ul);case 31:return Ll(F,"영일이삼사오육칠팔구","십백천만",uf,$,au|Tl|Ul);case 33:return Ll(F,"零一二三四五六七八九","十百千萬",uf,$,0);case 32:return Ll(F,"零壹貳參四五六七八九","拾百千",uf,$,au|Tl|Ul);case 18:return Ls(F,2406,2415,!0,T);case 20:return su(F,1,19999,Jp,3,T);case 21:return Ls(F,2790,2799,!0,T);case 22:return Ls(F,2662,2671,!0,T);case 22:return su(F,1,10999,Zp,3,T);case 23:return Il(F,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return Il(F,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return Ls(F,3302,3311,!0,T);case 28:return Il(F,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",K);case 29:return Il(F,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",K);case 34:return Ls(F,3792,3801,!0,T);case 37:return Ls(F,6160,6169,!0,T);case 38:return Ls(F,4160,4169,!0,T);case 39:return Ls(F,2918,2927,!0,T);case 40:return Ls(F,1776,1785,!0,T);case 43:return Ls(F,3046,3055,!0,T);case 44:return Ls(F,3174,3183,!0,T);case 45:return Ls(F,3664,3673,!0,T);case 46:return Ls(F,3872,3881,!0,T);case 3:default:return Ls(F,48,57,!0,T)}},Au="data-html2canvas-ignore",Os=function(){function F(B,U,T){if(this.context=B,this.options=T,this.scrolledElements=[],this.referenceElement=U,this.counters=new wd,this.quoteDepth=0,!U.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(U.ownerDocument.documentElement,!1)}return F.prototype.toIFrame=function(B,U){var T=this,K=Fd(B,U);if(!K.contentWindow)return Promise.reject("Unable to find iframe window");var $=B.defaultView.pageXOffset,ve=B.defaultView.pageYOffset,je=K.contentWindow,Pe=je.document,yt=Ac(K).then(function(){return c(T,void 0,void 0,function(){var mt,Ut;return h(this,function(tr){switch(tr.label){case 0:return this.scrolledElements.forEach(lu),je&&(je.scrollTo(U.left,U.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(je.scrollY!==U.top||je.scrollX!==U.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(je.scrollX-U.left,je.scrollY-U.top,0,0))),mt=this.options.onclone,Ut=this.clonedReferenceElement,typeof Ut>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:Pe.fonts&&Pe.fonts.ready?[4,Pe.fonts.ready]:[3,2];case 1:tr.sent(),tr.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,Li(Pe)]:[3,4];case 3:tr.sent(),tr.label=4;case 4:return typeof mt=="function"?[2,Promise.resolve().then(function(){return mt(Pe,Ut)}).then(function(){return K})]:[2,K]}})})});return Pe.open(),Pe.write(Id(document.doctype)+"<html></html>"),kl(this.referenceElement.ownerDocument,$,ve),Pe.replaceChild(Pe.adoptNode(this.documentElement),Pe.documentElement),Pe.close(),yt},F.prototype.createElementClone=function(B){if(ci(B,2))debugger;if(yd(B))return this.createCanvasClone(B);if(vd(B))return this.createVideoClone(B);if(nu(B))return this.createStyleClone(B);var U=B.cloneNode(!1);return Af(U)&&(Af(B)&&B.currentSrc&&B.currentSrc!==B.src&&(U.src=B.currentSrc,U.srcset=""),U.loading==="lazy"&&(U.loading="eager")),iu(U)?this.createCustomElementClone(U):U},F.prototype.createCustomElementClone=function(B){var U=document.createElement("html2canvascustomelement");return Bh(B.style,U),U},F.prototype.createStyleClone=function(B){try{var U=B.sheet;if(U&&U.cssRules){var T=[].slice.call(U.cssRules,0).reduce(function($,ve){return ve&&typeof ve.cssText=="string"?$+ve.cssText:$},""),K=B.cloneNode(!1);return K.textContent=T,K}}catch($){if(this.context.logger.error("Unable to access cssRules property",$),$.name!=="SecurityError")throw $}return B.cloneNode(!1)},F.prototype.createCanvasClone=function(B){var U;if(this.options.inlineImages&&B.ownerDocument){var T=B.ownerDocument.createElement("img");try{return T.src=B.toDataURL(),T}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",B)}}var K=B.cloneNode(!1);try{K.width=B.width,K.height=B.height;var $=B.getContext("2d"),ve=K.getContext("2d");if(ve)if(!this.options.allowTaint&&$)ve.putImageData($.getImageData(0,0,B.width,B.height),0,0);else{var je=(U=B.getContext("webgl2"))!==null&&U!==void 0?U:B.getContext("webgl");if(je){var Pe=je.getContextAttributes();(Pe==null?void 0:Pe.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",B)}ve.drawImage(B,0,0)}return K}catch{this.context.logger.info("Unable to clone canvas as it is tainted",B)}return K},F.prototype.createVideoClone=function(B){var U=B.ownerDocument.createElement("canvas");U.width=B.offsetWidth,U.height=B.offsetHeight;var T=U.getContext("2d");try{return T&&(T.drawImage(B,0,0,U.width,U.height),this.options.allowTaint||T.getImageData(0,0,U.width,U.height)),U}catch{this.context.logger.info("Unable to clone video as it is tainted",B)}var K=B.ownerDocument.createElement("canvas");return K.width=B.offsetWidth,K.height=B.offsetHeight,K},F.prototype.appendChildNode=function(B,U,T){(!ru(U)||!lf(U)&&!U.hasAttribute(Au)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(U)))&&(!this.options.copyStyles||!ru(U)||!nu(U))&&B.appendChild(this.cloneNode(U,T))},F.prototype.cloneChildNodes=function(B,U,T){for(var K=this,$=B.shadowRoot?B.shadowRoot.firstChild:B.firstChild;$;$=$.nextSibling)if(ru($)&&_d($)&&typeof $.assignedNodes=="function"){var ve=$.assignedNodes();ve.length&&ve.forEach(function(je){return K.appendChildNode(U,je,T)})}else this.appendChildNode(U,$,T)},F.prototype.cloneNode=function(B,U){if(Fl(B))return document.createTextNode(B.data);if(!B.ownerDocument)return B.cloneNode(!1);var T=B.ownerDocument.defaultView;if(T&&ru(B)&&(_h(B)||Sl(B))){var K=this.createElementClone(B);K.style.transitionProperty="none";var $=T.getComputedStyle(B),ve=T.getComputedStyle(B,":before"),je=T.getComputedStyle(B,":after");this.referenceElement===B&&_h(K)&&(this.clonedReferenceElement=K),of(K)&&$p(K);var Pe=this.counters.parse(new di(this.context,$)),yt=this.resolvePseudoContent(B,K,ve,Ic.BEFORE);iu(B)&&(U=!0),vd(B)||this.cloneChildNodes(B,K,U),yt&&K.insertBefore(yt,K.firstChild);var mt=this.resolvePseudoContent(B,K,je,Ic.AFTER);return mt&&K.appendChild(mt),this.counters.pop(Pe),($&&(this.options.copyStyles||Sl(B))&&!wh(B)||U)&&Bh($,K),(B.scrollTop!==0||B.scrollLeft!==0)&&this.scrolledElements.push([K,B.scrollLeft,B.scrollTop]),(bh(B)||xh(B))&&(bh(K)||xh(K))&&(K.value=B.value),K}return B.cloneNode(!1)},F.prototype.resolvePseudoContent=function(B,U,T,K){var $=this;if(T){var ve=T.content,je=U.ownerDocument;if(!(!je||!ve||ve==="none"||ve==="-moz-alt-content"||T.display==="none")){this.counters.parse(new di(this.context,T));var Pe=new fi(this.context,T),yt=je.createElement("html2canvaspseudoelement");Bh(T,yt),Pe.content.forEach(function(Ut){if(Ut.type===0)yt.appendChild(je.createTextNode(Ut.value));else if(Ut.type===22){var tr=je.createElement("img");tr.src=Ut.value,tr.style.opacity="1",yt.appendChild(tr)}else if(Ut.type===18){if(Ut.name==="attr"){var an=Ut.values.filter(Tn);an.length&&yt.appendChild(je.createTextNode(B.getAttribute(an[0].value)||""))}else if(Ut.name==="counter"){var Qr=Ut.values.filter(ns),Jr=Qr[0],Xn=Qr[1];if(Jr&&Tn(Jr)){var gn=$.counters.getCounterValue(Jr.value),cn=Xn&&Tn(Xn)?z.parse($.context,Xn.value):3;yt.appendChild(je.createTextNode(Mu(gn,cn,!1)))}}else if(Ut.name==="counters"){var Fi=Ut.values.filter(ns),Jr=Fi[0],Zn=Fi[1],Xn=Fi[2];if(Jr&&Tn(Jr)){var Rn=$.counters.getCounterValues(Jr.value),zr=Xn&&Tn(Xn)?z.parse($.context,Xn.value):3,ai=Zn&&Zn.type===0?Zn.value:"",yi=Rn.map(function(fo){return Mu(fo,zr,!1)}).join(ai);yt.appendChild(je.createTextNode(yi))}}}else if(Ut.type===20)switch(Ut.value){case"open-quote":yt.appendChild(je.createTextNode(ir(Pe.quotes,$.quoteDepth++,!0)));break;case"close-quote":yt.appendChild(je.createTextNode(ir(Pe.quotes,--$.quoteDepth,!1)));break;default:yt.appendChild(je.createTextNode(Ut.value))}}),yt.className=ff+" "+df;var mt=K===Ic.BEFORE?" "+ff:" "+df;return Sl(U)?U.className.baseValue+=mt:U.className+=mt,yt}}},F.destroy=function(B){return B.parentNode?(B.parentNode.removeChild(B),!0):!1},F}(),Ic;(function(F){F[F.BEFORE=0]="BEFORE",F[F.AFTER=1]="AFTER"})(Ic||(Ic={}));var Fd=function(F,B){var U=F.createElement("iframe");return U.className="html2canvas-container",U.style.visibility="hidden",U.style.position="fixed",U.style.left="-10000px",U.style.top="0px",U.style.border="0",U.width=B.width.toString(),U.height=B.height.toString(),U.scrolling="no",U.setAttribute(Au,"true"),F.body.appendChild(U),U},Sd=function(F){return new Promise(function(B){if(F.complete){B();return}if(!F.src){B();return}F.onload=B,F.onerror=B})},Li=function(F){return Promise.all([].slice.call(F.images,0).map(Sd))},Ac=function(F){return new Promise(function(B,U){var T=F.contentWindow;if(!T)return U("No window assigned for iframe");var K=T.document;T.onload=F.onload=function(){T.onload=F.onload=null;var $=setInterval(function(){K.body.childNodes.length>0&&K.readyState==="complete"&&(clearInterval($),B(F))},50)}})},hf=["all","d","content"],Bh=function(F,B){for(var U=F.length-1;U>=0;U--){var T=F.item(U);hf.indexOf(T)===-1&&B.style.setProperty(T,F.getPropertyValue(T))}return B},Id=function(F){var B="";return F&&(B+="<!DOCTYPE ",F.name&&(B+=F.name),F.internalSubset&&(B+=F.internalSubset),F.publicId&&(B+='"'+F.publicId+'"'),F.systemId&&(B+='"'+F.systemId+'"'),B+=">"),B},kl=function(F,B,U){F&&F.defaultView&&(B!==F.defaultView.pageXOffset||U!==F.defaultView.pageYOffset)&&F.defaultView.scrollTo(B,U)},lu=function(F){var B=F[0],U=F[1],T=F[2];B.scrollLeft=U,B.scrollTop=T},Td=":before",Yp=":after",ff="___html2canvas___pseudoelement_before",df="___html2canvas___pseudoelement_after",Ud=`{
    content: "" !important;
    display: none !important;
}`,$p=function(F){em(F,"."+ff+Td+Ud+`
         .`+df+Yp+Ud)},em=function(F,B){var U=F.ownerDocument;if(U){var T=U.createElement("style");T.textContent=B,F.appendChild(T)}},Ld=function(){function F(){}return F.getOrigin=function(B){var U=F._link;return U?(U.href=B,U.href=U.href,U.protocol+U.hostname+U.port):"about:blank"},F.isSameOrigin=function(B){return F.getOrigin(B)===F._origin},F.setContext=function(B){F._link=B.document.createElement("a"),F._origin=F.getOrigin(B.location.href)},F._origin="about:blank",F}(),tm=function(){function F(B,U){this.context=B,this._options=U,this._cache={}}return F.prototype.addImage=function(B){var U=Promise.resolve();return this.has(B)||(mf(B)||kd(B))&&(this._cache[B]=this.loadImage(B)).catch(function(){}),U},F.prototype.match=function(B){return this._cache[B]},F.prototype.loadImage=function(B){return c(this,void 0,void 0,function(){var U,T,K,$,ve=this;return h(this,function(je){switch(je.label){case 0:return U=Ld.isSameOrigin(B),T=!pf(B)&&this._options.useCORS===!0&&_s.SUPPORT_CORS_IMAGES&&!U,K=!pf(B)&&!U&&!mf(B)&&typeof this._options.proxy=="string"&&_s.SUPPORT_CORS_XHR&&!T,!U&&this._options.allowTaint===!1&&!pf(B)&&!mf(B)&&!K&&!T?[2]:($=B,K?[4,this.proxy($)]:[3,2]);case 1:$=je.sent(),je.label=2;case 2:return this.context.logger.debug("Added image "+B.substring(0,256)),[4,new Promise(function(Pe,yt){var mt=new Image;mt.onload=function(){return Pe(mt)},mt.onerror=yt,(nm($)||T)&&(mt.crossOrigin="anonymous"),mt.src=$,mt.complete===!0&&setTimeout(function(){return Pe(mt)},500),ve._options.imageTimeout>0&&setTimeout(function(){return yt("Timed out ("+ve._options.imageTimeout+"ms) loading image")},ve._options.imageTimeout)})];case 3:return[2,je.sent()]}})})},F.prototype.has=function(B){return typeof this._cache[B]<"u"},F.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},F.prototype.proxy=function(B){var U=this,T=this._options.proxy;if(!T)throw new Error("No proxy defined");var K=B.substring(0,256);return new Promise(function($,ve){var je=_s.SUPPORT_RESPONSE_TYPE?"blob":"text",Pe=new XMLHttpRequest;Pe.onload=function(){if(Pe.status===200)if(je==="text")$(Pe.response);else{var Ut=new FileReader;Ut.addEventListener("load",function(){return $(Ut.result)},!1),Ut.addEventListener("error",function(tr){return ve(tr)},!1),Ut.readAsDataURL(Pe.response)}else ve("Failed to proxy resource "+K+" with status code "+Pe.status)},Pe.onerror=ve;var yt=T.indexOf("?")>-1?"&":"?";if(Pe.open("GET",""+T+yt+"url="+encodeURIComponent(B)+"&responseType="+je),je!=="text"&&Pe instanceof XMLHttpRequest&&(Pe.responseType=je),U._options.imageTimeout){var mt=U._options.imageTimeout;Pe.timeout=mt,Pe.ontimeout=function(){return ve("Timed out ("+mt+"ms) proxying "+K)}}Pe.send()})},F}(),rm=/^data:image\/svg\+xml/i,Ch=/^data:image\/.*;base64,/i,cu=/^data:image\/.*/i,kd=function(F){return _s.SUPPORT_SVG_DRAWING||!Qd(F)},pf=function(F){return cu.test(F)},nm=function(F){return Ch.test(F)},mf=function(F){return F.substr(0,4)==="blob"},Qd=function(F){return F.substr(-3).toLowerCase()==="svg"||rm.test(F)},rn=function(){function F(B,U){this.type=0,this.x=B,this.y=U}return F.prototype.add=function(B,U){return new F(this.x+B,this.y+U)},F}(),Tc=function(F,B,U){return new rn(F.x+(B.x-F.x)*U,F.y+(B.y-F.y)*U)},Uc=function(){function F(B,U,T,K){this.type=1,this.start=B,this.startControl=U,this.endControl=T,this.end=K}return F.prototype.subdivide=function(B,U){var T=Tc(this.start,this.startControl,B),K=Tc(this.startControl,this.endControl,B),$=Tc(this.endControl,this.end,B),ve=Tc(T,K,B),je=Tc(K,$,B),Pe=Tc(ve,je,B);return U?new F(this.start,T,ve,Pe):new F(Pe,je,$,this.end)},F.prototype.add=function(B,U){return new F(this.start.add(B,U),this.startControl.add(B,U),this.endControl.add(B,U),this.end.add(B,U))},F.prototype.reverse=function(){return new F(this.end,this.endControl,this.startControl,this.start)},F}(),Oa=function(F){return F.type===1},uu=function(){function F(B){var U=B.styles,T=B.bounds,K=is(U.borderTopLeftRadius,T.width,T.height),$=K[0],ve=K[1],je=is(U.borderTopRightRadius,T.width,T.height),Pe=je[0],yt=je[1],mt=is(U.borderBottomRightRadius,T.width,T.height),Ut=mt[0],tr=mt[1],an=is(U.borderBottomLeftRadius,T.width,T.height),Qr=an[0],Jr=an[1],Xn=[];Xn.push(($+Pe)/T.width),Xn.push((Qr+Ut)/T.width),Xn.push((ve+Jr)/T.height),Xn.push((yt+tr)/T.height);var gn=Math.max.apply(Math,Xn);gn>1&&($/=gn,ve/=gn,Pe/=gn,yt/=gn,Ut/=gn,tr/=gn,Qr/=gn,Jr/=gn);var cn=T.width-Pe,Fi=T.height-tr,Zn=T.width-Ut,Rn=T.height-Jr,zr=U.borderTopWidth,ai=U.borderRightWidth,yi=U.borderBottomWidth,On=U.borderLeftWidth,Ps=hi(U.paddingTop,B.bounds.width),fo=hi(U.paddingRight,B.bounds.width),Io=hi(U.paddingBottom,B.bounds.width),Ni=hi(U.paddingLeft,B.bounds.width);this.topLeftBorderDoubleOuterBox=$>0||ve>0?Gi(T.left+On/3,T.top+zr/3,$-On/3,ve-zr/3,Ei.TOP_LEFT):new rn(T.left+On/3,T.top+zr/3),this.topRightBorderDoubleOuterBox=$>0||ve>0?Gi(T.left+cn,T.top+zr/3,Pe-ai/3,yt-zr/3,Ei.TOP_RIGHT):new rn(T.left+T.width-ai/3,T.top+zr/3),this.bottomRightBorderDoubleOuterBox=Ut>0||tr>0?Gi(T.left+Zn,T.top+Fi,Ut-ai/3,tr-yi/3,Ei.BOTTOM_RIGHT):new rn(T.left+T.width-ai/3,T.top+T.height-yi/3),this.bottomLeftBorderDoubleOuterBox=Qr>0||Jr>0?Gi(T.left+On/3,T.top+Rn,Qr-On/3,Jr-yi/3,Ei.BOTTOM_LEFT):new rn(T.left+On/3,T.top+T.height-yi/3),this.topLeftBorderDoubleInnerBox=$>0||ve>0?Gi(T.left+On*2/3,T.top+zr*2/3,$-On*2/3,ve-zr*2/3,Ei.TOP_LEFT):new rn(T.left+On*2/3,T.top+zr*2/3),this.topRightBorderDoubleInnerBox=$>0||ve>0?Gi(T.left+cn,T.top+zr*2/3,Pe-ai*2/3,yt-zr*2/3,Ei.TOP_RIGHT):new rn(T.left+T.width-ai*2/3,T.top+zr*2/3),this.bottomRightBorderDoubleInnerBox=Ut>0||tr>0?Gi(T.left+Zn,T.top+Fi,Ut-ai*2/3,tr-yi*2/3,Ei.BOTTOM_RIGHT):new rn(T.left+T.width-ai*2/3,T.top+T.height-yi*2/3),this.bottomLeftBorderDoubleInnerBox=Qr>0||Jr>0?Gi(T.left+On*2/3,T.top+Rn,Qr-On*2/3,Jr-yi*2/3,Ei.BOTTOM_LEFT):new rn(T.left+On*2/3,T.top+T.height-yi*2/3),this.topLeftBorderStroke=$>0||ve>0?Gi(T.left+On/2,T.top+zr/2,$-On/2,ve-zr/2,Ei.TOP_LEFT):new rn(T.left+On/2,T.top+zr/2),this.topRightBorderStroke=$>0||ve>0?Gi(T.left+cn,T.top+zr/2,Pe-ai/2,yt-zr/2,Ei.TOP_RIGHT):new rn(T.left+T.width-ai/2,T.top+zr/2),this.bottomRightBorderStroke=Ut>0||tr>0?Gi(T.left+Zn,T.top+Fi,Ut-ai/2,tr-yi/2,Ei.BOTTOM_RIGHT):new rn(T.left+T.width-ai/2,T.top+T.height-yi/2),this.bottomLeftBorderStroke=Qr>0||Jr>0?Gi(T.left+On/2,T.top+Rn,Qr-On/2,Jr-yi/2,Ei.BOTTOM_LEFT):new rn(T.left+On/2,T.top+T.height-yi/2),this.topLeftBorderBox=$>0||ve>0?Gi(T.left,T.top,$,ve,Ei.TOP_LEFT):new rn(T.left,T.top),this.topRightBorderBox=Pe>0||yt>0?Gi(T.left+cn,T.top,Pe,yt,Ei.TOP_RIGHT):new rn(T.left+T.width,T.top),this.bottomRightBorderBox=Ut>0||tr>0?Gi(T.left+Zn,T.top+Fi,Ut,tr,Ei.BOTTOM_RIGHT):new rn(T.left+T.width,T.top+T.height),this.bottomLeftBorderBox=Qr>0||Jr>0?Gi(T.left,T.top+Rn,Qr,Jr,Ei.BOTTOM_LEFT):new rn(T.left,T.top+T.height),this.topLeftPaddingBox=$>0||ve>0?Gi(T.left+On,T.top+zr,Math.max(0,$-On),Math.max(0,ve-zr),Ei.TOP_LEFT):new rn(T.left+On,T.top+zr),this.topRightPaddingBox=Pe>0||yt>0?Gi(T.left+Math.min(cn,T.width-ai),T.top+zr,cn>T.width+ai?0:Math.max(0,Pe-ai),Math.max(0,yt-zr),Ei.TOP_RIGHT):new rn(T.left+T.width-ai,T.top+zr),this.bottomRightPaddingBox=Ut>0||tr>0?Gi(T.left+Math.min(Zn,T.width-On),T.top+Math.min(Fi,T.height-yi),Math.max(0,Ut-ai),Math.max(0,tr-yi),Ei.BOTTOM_RIGHT):new rn(T.left+T.width-ai,T.top+T.height-yi),this.bottomLeftPaddingBox=Qr>0||Jr>0?Gi(T.left+On,T.top+Math.min(Rn,T.height-yi),Math.max(0,Qr-On),Math.max(0,Jr-yi),Ei.BOTTOM_LEFT):new rn(T.left+On,T.top+T.height-yi),this.topLeftContentBox=$>0||ve>0?Gi(T.left+On+Ni,T.top+zr+Ps,Math.max(0,$-(On+Ni)),Math.max(0,ve-(zr+Ps)),Ei.TOP_LEFT):new rn(T.left+On+Ni,T.top+zr+Ps),this.topRightContentBox=Pe>0||yt>0?Gi(T.left+Math.min(cn,T.width+On+Ni),T.top+zr+Ps,cn>T.width+On+Ni?0:Pe-On+Ni,yt-(zr+Ps),Ei.TOP_RIGHT):new rn(T.left+T.width-(ai+fo),T.top+zr+Ps),this.bottomRightContentBox=Ut>0||tr>0?Gi(T.left+Math.min(Zn,T.width-(On+Ni)),T.top+Math.min(Fi,T.height+zr+Ps),Math.max(0,Ut-(ai+fo)),tr-(yi+Io),Ei.BOTTOM_RIGHT):new rn(T.left+T.width-(ai+fo),T.top+T.height-(yi+Io)),this.bottomLeftContentBox=Qr>0||Jr>0?Gi(T.left+On+Ni,T.top+Rn,Math.max(0,Qr-(On+Ni)),Jr-(yi+Io),Ei.BOTTOM_LEFT):new rn(T.left+On+Ni,T.top+T.height-(yi+Io))}return F}(),Ei;(function(F){F[F.TOP_LEFT=0]="TOP_LEFT",F[F.TOP_RIGHT=1]="TOP_RIGHT",F[F.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",F[F.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Ei||(Ei={}));var Gi=function(F,B,U,T,K){var $=4*((Math.sqrt(2)-1)/3),ve=U*$,je=T*$,Pe=F+U,yt=B+T;switch(K){case Ei.TOP_LEFT:return new Uc(new rn(F,yt),new rn(F,yt-je),new rn(Pe-ve,B),new rn(Pe,B));case Ei.TOP_RIGHT:return new Uc(new rn(F,B),new rn(F+ve,B),new rn(Pe,yt-je),new rn(Pe,yt));case Ei.BOTTOM_RIGHT:return new Uc(new rn(Pe,B),new rn(Pe,B+je),new rn(F+ve,yt),new rn(F,yt));case Ei.BOTTOM_LEFT:default:return new Uc(new rn(Pe,yt),new rn(Pe-ve,yt),new rn(F,B+je),new rn(F,B))}},Eh=function(F){return[F.topLeftBorderBox,F.topRightBorderBox,F.bottomRightBorderBox,F.bottomLeftBorderBox]},Pd=function(F){return[F.topLeftContentBox,F.topRightContentBox,F.bottomRightContentBox,F.bottomLeftContentBox]},Du=function(F){return[F.topLeftPaddingBox,F.topRightPaddingBox,F.bottomRightPaddingBox,F.bottomLeftPaddingBox]},im=function(){function F(B,U,T){this.offsetX=B,this.offsetY=U,this.matrix=T,this.type=0,this.target=6}return F}(),Nu=function(){function F(B,U){this.path=B,this.target=U,this.type=1}return F}(),Md=function(){function F(B){this.opacity=B,this.type=2,this.target=6}return F}(),gf=function(F){return F.type===0},Fh=function(F){return F.type===1},sm=function(F){return F.type===2},Dd=function(F,B){return F.length===B.length?F.some(function(U,T){return U===B[T]}):!1},Nd=function(F,B,U,T,K){return F.map(function($,ve){switch(ve){case 0:return $.add(B,U);case 1:return $.add(B+T,U);case 2:return $.add(B+T,U+K);case 3:return $.add(B,U+K)}return $})},ol=function(){function F(B){this.element=B,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return F}(),yf=function(){function F(B,U){if(this.container=B,this.parent=U,this.effects=[],this.curves=new uu(this.container),this.container.styles.opacity<1&&this.effects.push(new Md(this.container.styles.opacity)),this.container.styles.transform!==null){var T=this.container.bounds.left+this.container.styles.transformOrigin[0].number,K=this.container.bounds.top+this.container.styles.transformOrigin[1].number,$=this.container.styles.transform;this.effects.push(new im(T,K,$))}if(this.container.styles.overflowX!==0){var ve=Eh(this.curves),je=Du(this.curves);Dd(ve,je)?this.effects.push(new Nu(ve,6)):(this.effects.push(new Nu(ve,2)),this.effects.push(new Nu(je,4)))}}return F.prototype.getEffects=function(B){for(var U=[2,3].indexOf(this.container.styles.position)===-1,T=this.parent,K=this.effects.slice(0);T;){var $=T.effects.filter(function(Pe){return!Fh(Pe)});if(U||T.container.styles.position!==0||!T.parent){if(K.unshift.apply(K,$),U=[2,3].indexOf(T.container.styles.position)===-1,T.container.styles.overflowX!==0){var ve=Eh(T.curves),je=Du(T.curves);Dd(ve,je)||K.unshift(new Nu(je,6))}}else K.unshift.apply(K,$);T=T.parent}return K.filter(function(Pe){return pt(Pe.target,B)})},F}(),Al=function(F,B,U,T){F.container.elements.forEach(function(K){var $=pt(K.flags,4),ve=pt(K.flags,2),je=new yf(K,F);pt(K.styles.display,2048)&&T.push(je);var Pe=pt(K.flags,8)?[]:T;if($||ve){var yt=$||K.styles.isPositioned()?U:B,mt=new ol(je);if(K.styles.isPositioned()||K.styles.opacity<1||K.styles.isTransformed()){var Ut=K.styles.zIndex.order;if(Ut<0){var tr=0;yt.negativeZIndex.some(function(Qr,Jr){return Ut>Qr.element.container.styles.zIndex.order?(tr=Jr,!1):tr>0}),yt.negativeZIndex.splice(tr,0,mt)}else if(Ut>0){var an=0;yt.positiveZIndex.some(function(Qr,Jr){return Ut>=Qr.element.container.styles.zIndex.order?(an=Jr+1,!1):an>0}),yt.positiveZIndex.splice(an,0,mt)}else yt.zeroOrAutoZIndexOrTransformedOrOpacity.push(mt)}else K.styles.isFloating()?yt.nonPositionedFloats.push(mt):yt.nonPositionedInlineLevel.push(mt);Al(je,mt,$?mt:U,Pe)}else K.styles.isInlineLevel()?B.inlineLevel.push(je):B.nonInlineLevel.push(je),Al(je,B,U,Pe);pt(K.flags,8)&&vf(K,Pe)})},vf=function(F,B){for(var U=F instanceof ph?F.start:1,T=F instanceof ph?F.reversed:!1,K=0;K<B.length;K++){var $=B[K];$.container instanceof tu&&typeof $.container.value=="number"&&$.container.value!==0&&(U=$.container.value),$.listValue=Mu(U,$.container.styles.listStyleType,!0),U+=T?-1:1}},jd=function(F){var B=new yf(F,null),U=new ol(B),T=[];return Al(B,U,U,T),vf(B.container,T),U},_f=function(F,B){switch(B){case 0:return Vo(F.topLeftBorderBox,F.topLeftPaddingBox,F.topRightBorderBox,F.topRightPaddingBox);case 1:return Vo(F.topRightBorderBox,F.topRightPaddingBox,F.bottomRightBorderBox,F.bottomRightPaddingBox);case 2:return Vo(F.bottomRightBorderBox,F.bottomRightPaddingBox,F.bottomLeftBorderBox,F.bottomLeftPaddingBox);case 3:default:return Vo(F.bottomLeftBorderBox,F.bottomLeftPaddingBox,F.topLeftBorderBox,F.topLeftPaddingBox)}},Rd=function(F,B){switch(B){case 0:return Vo(F.topLeftBorderBox,F.topLeftBorderDoubleOuterBox,F.topRightBorderBox,F.topRightBorderDoubleOuterBox);case 1:return Vo(F.topRightBorderBox,F.topRightBorderDoubleOuterBox,F.bottomRightBorderBox,F.bottomRightBorderDoubleOuterBox);case 2:return Vo(F.bottomRightBorderBox,F.bottomRightBorderDoubleOuterBox,F.bottomLeftBorderBox,F.bottomLeftBorderDoubleOuterBox);case 3:default:return Vo(F.bottomLeftBorderBox,F.bottomLeftBorderDoubleOuterBox,F.topLeftBorderBox,F.topLeftBorderDoubleOuterBox)}},am=function(F,B){switch(B){case 0:return Vo(F.topLeftBorderDoubleInnerBox,F.topLeftPaddingBox,F.topRightBorderDoubleInnerBox,F.topRightPaddingBox);case 1:return Vo(F.topRightBorderDoubleInnerBox,F.topRightPaddingBox,F.bottomRightBorderDoubleInnerBox,F.bottomRightPaddingBox);case 2:return Vo(F.bottomRightBorderDoubleInnerBox,F.bottomRightPaddingBox,F.bottomLeftBorderDoubleInnerBox,F.bottomLeftPaddingBox);case 3:default:return Vo(F.bottomLeftBorderDoubleInnerBox,F.bottomLeftPaddingBox,F.topLeftBorderDoubleInnerBox,F.topLeftPaddingBox)}},om=function(F,B){switch(B){case 0:return ju(F.topLeftBorderStroke,F.topRightBorderStroke);case 1:return ju(F.topRightBorderStroke,F.bottomRightBorderStroke);case 2:return ju(F.bottomRightBorderStroke,F.bottomLeftBorderStroke);case 3:default:return ju(F.bottomLeftBorderStroke,F.topLeftBorderStroke)}},ju=function(F,B){var U=[];return Oa(F)?U.push(F.subdivide(.5,!1)):U.push(F),Oa(B)?U.push(B.subdivide(.5,!0)):U.push(B),U},Vo=function(F,B,U,T){var K=[];return Oa(F)?K.push(F.subdivide(.5,!1)):K.push(F),Oa(U)?K.push(U.subdivide(.5,!0)):K.push(U),Oa(T)?K.push(T.subdivide(.5,!0).reverse()):K.push(T),Oa(B)?K.push(B.subdivide(.5,!1).reverse()):K.push(B),K},wf=function(F){var B=F.bounds,U=F.styles;return B.add(U.borderLeftWidth,U.borderTopWidth,-(U.borderRightWidth+U.borderLeftWidth),-(U.borderTopWidth+U.borderBottomWidth))},Lc=function(F){var B=F.styles,U=F.bounds,T=hi(B.paddingLeft,U.width),K=hi(B.paddingRight,U.width),$=hi(B.paddingTop,U.width),ve=hi(B.paddingBottom,U.width);return U.add(T+B.borderLeftWidth,$+B.borderTopWidth,-(B.borderRightWidth+B.borderLeftWidth+T+K),-(B.borderTopWidth+B.borderBottomWidth+$+ve))},Od=function(F,B){return F===0?B.bounds:F===2?Lc(B):wf(B)},Sh=function(F,B){return F===0?B.bounds:F===2?Lc(B):wf(B)},hu=function(F,B,U){var T=Od(fu(F.styles.backgroundOrigin,B),F),K=Sh(fu(F.styles.backgroundClip,B),F),$=Am(fu(F.styles.backgroundSize,B),U,T),ve=$[0],je=$[1],Pe=is(fu(F.styles.backgroundPosition,B),T.width-ve,T.height-je),yt=lm(fu(F.styles.backgroundRepeat,B),Pe,$,T,K),mt=Math.round(T.left+Pe[0]),Ut=Math.round(T.top+Pe[1]);return[yt,mt,Ut,ve,je]},Ql=function(F){return Tn(F)&&F.value===Ra.AUTO},Ih=function(F){return typeof F=="number"},Am=function(F,B,U){var T=B[0],K=B[1],$=B[2],ve=F[0],je=F[1];if(!ve)return[0,0];if(Pi(ve)&&je&&Pi(je))return[hi(ve,U.width),hi(je,U.height)];var Pe=Ih($);if(Tn(ve)&&(ve.value===Ra.CONTAIN||ve.value===Ra.COVER)){if(Ih($)){var yt=U.width/U.height;return yt<$!=(ve.value===Ra.COVER)?[U.width,U.width/$]:[U.height*$,U.height]}return[U.width,U.height]}var mt=Ih(T),Ut=Ih(K),tr=mt||Ut;if(Ql(ve)&&(!je||Ql(je))){if(mt&&Ut)return[T,K];if(!Pe&&!tr)return[U.width,U.height];if(tr&&Pe){var an=mt?T:K*$,Qr=Ut?K:T/$;return[an,Qr]}var Jr=mt?T:U.width,Xn=Ut?K:U.height;return[Jr,Xn]}if(Pe){var gn=0,cn=0;return Pi(ve)?gn=hi(ve,U.width):Pi(je)&&(cn=hi(je,U.height)),Ql(ve)?gn=cn*$:(!je||Ql(je))&&(cn=gn/$),[gn,cn]}var Fi=null,Zn=null;if(Pi(ve)?Fi=hi(ve,U.width):je&&Pi(je)&&(Zn=hi(je,U.height)),Fi!==null&&(!je||Ql(je))&&(Zn=mt&&Ut?Fi/T*K:U.height),Zn!==null&&Ql(ve)&&(Fi=mt&&Ut?Zn/K*T:U.width),Fi!==null&&Zn!==null)return[Fi,Zn];throw new Error("Unable to calculate background-size for element")},fu=function(F,B){var U=F[B];return typeof U>"u"?F[0]:U},lm=function(F,B,U,T,K){var $=B[0],ve=B[1],je=U[0],Pe=U[1];switch(F){case 2:return[new rn(Math.round(T.left),Math.round(T.top+ve)),new rn(Math.round(T.left+T.width),Math.round(T.top+ve)),new rn(Math.round(T.left+T.width),Math.round(Pe+T.top+ve)),new rn(Math.round(T.left),Math.round(Pe+T.top+ve))];case 3:return[new rn(Math.round(T.left+$),Math.round(T.top)),new rn(Math.round(T.left+$+je),Math.round(T.top)),new rn(Math.round(T.left+$+je),Math.round(T.height+T.top)),new rn(Math.round(T.left+$),Math.round(T.height+T.top))];case 1:return[new rn(Math.round(T.left+$),Math.round(T.top+ve)),new rn(Math.round(T.left+$+je),Math.round(T.top+ve)),new rn(Math.round(T.left+$+je),Math.round(T.top+ve+Pe)),new rn(Math.round(T.left+$),Math.round(T.top+ve+Pe))];default:return[new rn(Math.round(K.left),Math.round(K.top)),new rn(Math.round(K.left+K.width),Math.round(K.top)),new rn(Math.round(K.left+K.width),Math.round(K.height+K.top)),new rn(Math.round(K.left),Math.round(K.height+K.top))]}},du="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",Th="Hidden Text",Hd=function(){function F(B){this._data={},this._document=B}return F.prototype.parseMetrics=function(B,U){var T=this._document.createElement("div"),K=this._document.createElement("img"),$=this._document.createElement("span"),ve=this._document.body;T.style.visibility="hidden",T.style.fontFamily=B,T.style.fontSize=U,T.style.margin="0",T.style.padding="0",T.style.whiteSpace="nowrap",ve.appendChild(T),K.src=du,K.width=1,K.height=1,K.style.margin="0",K.style.padding="0",K.style.verticalAlign="baseline",$.style.fontFamily=B,$.style.fontSize=U,$.style.margin="0",$.style.padding="0",$.appendChild(this._document.createTextNode(Th)),T.appendChild($),T.appendChild(K);var je=K.offsetTop-$.offsetTop+2;T.removeChild($),T.appendChild(this._document.createTextNode(Th)),T.style.lineHeight="normal",K.style.verticalAlign="super";var Pe=K.offsetTop-T.offsetTop+2;return ve.removeChild(T),{baseline:je,middle:Pe}},F.prototype.getMetrics=function(B,U){var T=B+" "+U;return typeof this._data[T]>"u"&&(this._data[T]=this.parseMetrics(B,U)),this._data[T]},F}(),Uh=function(){function F(B,U){this.context=B,this.options=U}return F}(),cm=1e4,lc=function(F){s(B,F);function B(U,T){var K=F.call(this,U,T)||this;return K._activeEffects=[],K.canvas=T.canvas?T.canvas:document.createElement("canvas"),K.ctx=K.canvas.getContext("2d"),T.canvas||(K.canvas.width=Math.floor(T.width*T.scale),K.canvas.height=Math.floor(T.height*T.scale),K.canvas.style.width=T.width+"px",K.canvas.style.height=T.height+"px"),K.fontMetrics=new Hd(document),K.ctx.scale(K.options.scale,K.options.scale),K.ctx.translate(-T.x,-T.y),K.ctx.textBaseline="bottom",K._activeEffects=[],K.context.logger.debug("Canvas renderer initialized ("+T.width+"x"+T.height+") with scale "+T.scale),K}return B.prototype.applyEffects=function(U){for(var T=this;this._activeEffects.length;)this.popEffect();U.forEach(function(K){return T.applyEffect(K)})},B.prototype.applyEffect=function(U){this.ctx.save(),sm(U)&&(this.ctx.globalAlpha=U.opacity),gf(U)&&(this.ctx.translate(U.offsetX,U.offsetY),this.ctx.transform(U.matrix[0],U.matrix[1],U.matrix[2],U.matrix[3],U.matrix[4],U.matrix[5]),this.ctx.translate(-U.offsetX,-U.offsetY)),Fh(U)&&(this.path(U.path),this.ctx.clip()),this._activeEffects.push(U)},B.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},B.prototype.renderStack=function(U){return c(this,void 0,void 0,function(){var T;return h(this,function(K){switch(K.label){case 0:return T=U.element.container.styles,T.isVisible()?[4,this.renderStackContent(U)]:[3,2];case 1:K.sent(),K.label=2;case 2:return[2]}})})},B.prototype.renderNode=function(U){return c(this,void 0,void 0,function(){return h(this,function(T){switch(T.label){case 0:if(pt(U.container.flags,16))debugger;return U.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(U)]:[3,3];case 1:return T.sent(),[4,this.renderNodeContent(U)];case 2:T.sent(),T.label=3;case 3:return[2]}})})},B.prototype.renderTextWithLetterSpacing=function(U,T,K){var $=this;if(T===0)this.ctx.fillText(U.text,U.bounds.left,U.bounds.top+K);else{var ve=ac(U.text);ve.reduce(function(je,Pe){return $.ctx.fillText(Pe,je,U.bounds.top+K),je+$.ctx.measureText(Pe).width},U.bounds.left)}},B.prototype.createFontStyle=function(U){var T=U.fontVariant.filter(function(ve){return ve==="normal"||ve==="small-caps"}).join(""),K=fm(U.fontFamily).join(", "),$=pi(U.fontSize)?""+U.fontSize.number+U.fontSize.unit:U.fontSize.number+"px";return[[U.fontStyle,T,U.fontWeight,$,K].join(" "),K,$]},B.prototype.renderTextNode=function(U,T){return c(this,void 0,void 0,function(){var K,$,ve,je,Pe,yt,mt,Ut,tr=this;return h(this,function(an){return K=this.createFontStyle(T),$=K[0],ve=K[1],je=K[2],this.ctx.font=$,this.ctx.direction=T.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",Pe=this.fontMetrics.getMetrics(ve,je),yt=Pe.baseline,mt=Pe.middle,Ut=T.paintOrder,U.textBounds.forEach(function(Qr){Ut.forEach(function(Jr){switch(Jr){case 0:tr.ctx.fillStyle=ss(T.color),tr.renderTextWithLetterSpacing(Qr,T.letterSpacing,yt);var Xn=T.textShadow;Xn.length&&Qr.text.trim().length&&(Xn.slice(0).reverse().forEach(function(gn){tr.ctx.shadowColor=ss(gn.color),tr.ctx.shadowOffsetX=gn.offsetX.number*tr.options.scale,tr.ctx.shadowOffsetY=gn.offsetY.number*tr.options.scale,tr.ctx.shadowBlur=gn.blur.number,tr.renderTextWithLetterSpacing(Qr,T.letterSpacing,yt)}),tr.ctx.shadowColor="",tr.ctx.shadowOffsetX=0,tr.ctx.shadowOffsetY=0,tr.ctx.shadowBlur=0),T.textDecorationLine.length&&(tr.ctx.fillStyle=ss(T.textDecorationColor||T.color),T.textDecorationLine.forEach(function(gn){switch(gn){case 1:tr.ctx.fillRect(Qr.bounds.left,Math.round(Qr.bounds.top+yt),Qr.bounds.width,1);break;case 2:tr.ctx.fillRect(Qr.bounds.left,Math.round(Qr.bounds.top),Qr.bounds.width,1);break;case 3:tr.ctx.fillRect(Qr.bounds.left,Math.ceil(Qr.bounds.top+mt),Qr.bounds.width,1);break}}));break;case 1:T.webkitTextStrokeWidth&&Qr.text.trim().length&&(tr.ctx.strokeStyle=ss(T.webkitTextStrokeColor),tr.ctx.lineWidth=T.webkitTextStrokeWidth,tr.ctx.lineJoin=window.chrome?"miter":"round",tr.ctx.strokeText(Qr.text,Qr.bounds.left,Qr.bounds.top+yt)),tr.ctx.strokeStyle="",tr.ctx.lineWidth=0,tr.ctx.lineJoin="miter";break}})}),[2]})})},B.prototype.renderReplacedElement=function(U,T,K){if(K&&U.intrinsicWidth>0&&U.intrinsicHeight>0){var $=Lc(U),ve=Du(T);this.path(ve),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(K,0,0,U.intrinsicWidth,U.intrinsicHeight,$.left,$.top,$.width,$.height),this.ctx.restore()}},B.prototype.renderNodeContent=function(U){return c(this,void 0,void 0,function(){var T,K,$,ve,je,Pe,cn,cn,yt,mt,Ut,tr,Zn,an,Qr,Rn,Jr,Xn,gn,cn,Fi,Zn,Rn;return h(this,function(zr){switch(zr.label){case 0:this.applyEffects(U.getEffects(4)),T=U.container,K=U.curves,$=T.styles,ve=0,je=T.textNodes,zr.label=1;case 1:return ve<je.length?(Pe=je[ve],[4,this.renderTextNode(Pe,$)]):[3,4];case 2:zr.sent(),zr.label=3;case 3:return ve++,[3,1];case 4:if(!(T instanceof Sc))return[3,8];zr.label=5;case 5:return zr.trys.push([5,7,,8]),[4,this.context.cache.match(T.src)];case 6:return cn=zr.sent(),this.renderReplacedElement(T,K,cn),[3,8];case 7:return zr.sent(),this.context.logger.error("Error loading image "+T.src),[3,8];case 8:if(T instanceof Tu&&this.renderReplacedElement(T,K,T.canvas),!(T instanceof Uu))return[3,12];zr.label=9;case 9:return zr.trys.push([9,11,,12]),[4,this.context.cache.match(T.svg)];case 10:return cn=zr.sent(),this.renderReplacedElement(T,K,cn),[3,12];case 11:return zr.sent(),this.context.logger.error("Error loading svg "+T.svg.substring(0,255)),[3,12];case 12:return T instanceof yh&&T.tree?(yt=new B(this.context,{scale:this.options.scale,backgroundColor:T.backgroundColor,x:0,y:0,width:T.width,height:T.height}),[4,yt.render(T.tree)]):[3,14];case 13:mt=zr.sent(),T.width&&T.height&&this.ctx.drawImage(mt,0,0,T.width,T.height,T.bounds.left,T.bounds.top,T.bounds.width,T.bounds.height),zr.label=14;case 14:if(T instanceof Pu&&(Ut=Math.min(T.bounds.width,T.bounds.height),T.type===mh?T.checked&&(this.ctx.save(),this.path([new rn(T.bounds.left+Ut*.39363,T.bounds.top+Ut*.79),new rn(T.bounds.left+Ut*.16,T.bounds.top+Ut*.5549),new rn(T.bounds.left+Ut*.27347,T.bounds.top+Ut*.44071),new rn(T.bounds.left+Ut*.39694,T.bounds.top+Ut*.5649),new rn(T.bounds.left+Ut*.72983,T.bounds.top+Ut*.23),new rn(T.bounds.left+Ut*.84,T.bounds.top+Ut*.34085),new rn(T.bounds.left+Ut*.39363,T.bounds.top+Ut*.79)]),this.ctx.fillStyle=ss(fd),this.ctx.fill(),this.ctx.restore()):T.type===ku&&T.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(T.bounds.left+Ut/2,T.bounds.top+Ut/2,Ut/4,0,Math.PI*2,!0),this.ctx.fillStyle=ss(fd),this.ctx.fill(),this.ctx.restore())),zd(T)&&T.value.length){switch(tr=this.createFontStyle($),Zn=tr[0],an=tr[1],Qr=this.fontMetrics.getMetrics(Zn,an).baseline,this.ctx.font=Zn,this.ctx.fillStyle=ss($.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=um(T.styles.textAlign),Rn=Lc(T),Jr=0,T.styles.textAlign){case 1:Jr+=Rn.width/2;break;case 2:Jr+=Rn.width;break}Xn=Rn.add(Jr,0,0,-Rn.height/2+1),this.ctx.save(),this.path([new rn(Rn.left,Rn.top),new rn(Rn.left+Rn.width,Rn.top),new rn(Rn.left+Rn.width,Rn.top+Rn.height),new rn(Rn.left,Rn.top+Rn.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new sc(T.value,Xn),$.letterSpacing,Qr),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!pt(T.styles.display,2048))return[3,20];if(T.styles.listStyleImage===null)return[3,19];if(gn=T.styles.listStyleImage,gn.type!==0)return[3,18];cn=void 0,Fi=gn.url,zr.label=15;case 15:return zr.trys.push([15,17,,18]),[4,this.context.cache.match(Fi)];case 16:return cn=zr.sent(),this.ctx.drawImage(cn,T.bounds.left-(cn.width+10),T.bounds.top),[3,18];case 17:return zr.sent(),this.context.logger.error("Error loading list-style-image "+Fi),[3,18];case 18:return[3,20];case 19:U.listValue&&T.styles.listStyleType!==-1&&(Zn=this.createFontStyle($)[0],this.ctx.font=Zn,this.ctx.fillStyle=ss($.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",Rn=new d(T.bounds.left,T.bounds.top+hi(T.styles.paddingTop,T.bounds.width),T.bounds.width,v($.lineHeight,$.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new sc(U.listValue,Rn),$.letterSpacing,v($.lineHeight,$.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),zr.label=20;case 20:return[2]}})})},B.prototype.renderStackContent=function(U){return c(this,void 0,void 0,function(){var T,K,gn,$,ve,gn,je,Pe,gn,yt,mt,gn,Ut,tr,gn,an,Qr,gn,Jr,Xn,gn;return h(this,function(cn){switch(cn.label){case 0:if(pt(U.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(U.element)];case 1:cn.sent(),T=0,K=U.negativeZIndex,cn.label=2;case 2:return T<K.length?(gn=K[T],[4,this.renderStack(gn)]):[3,5];case 3:cn.sent(),cn.label=4;case 4:return T++,[3,2];case 5:return[4,this.renderNodeContent(U.element)];case 6:cn.sent(),$=0,ve=U.nonInlineLevel,cn.label=7;case 7:return $<ve.length?(gn=ve[$],[4,this.renderNode(gn)]):[3,10];case 8:cn.sent(),cn.label=9;case 9:return $++,[3,7];case 10:je=0,Pe=U.nonPositionedFloats,cn.label=11;case 11:return je<Pe.length?(gn=Pe[je],[4,this.renderStack(gn)]):[3,14];case 12:cn.sent(),cn.label=13;case 13:return je++,[3,11];case 14:yt=0,mt=U.nonPositionedInlineLevel,cn.label=15;case 15:return yt<mt.length?(gn=mt[yt],[4,this.renderStack(gn)]):[3,18];case 16:cn.sent(),cn.label=17;case 17:return yt++,[3,15];case 18:Ut=0,tr=U.inlineLevel,cn.label=19;case 19:return Ut<tr.length?(gn=tr[Ut],[4,this.renderNode(gn)]):[3,22];case 20:cn.sent(),cn.label=21;case 21:return Ut++,[3,19];case 22:an=0,Qr=U.zeroOrAutoZIndexOrTransformedOrOpacity,cn.label=23;case 23:return an<Qr.length?(gn=Qr[an],[4,this.renderStack(gn)]):[3,26];case 24:cn.sent(),cn.label=25;case 25:return an++,[3,23];case 26:Jr=0,Xn=U.positiveZIndex,cn.label=27;case 27:return Jr<Xn.length?(gn=Xn[Jr],[4,this.renderStack(gn)]):[3,30];case 28:cn.sent(),cn.label=29;case 29:return Jr++,[3,27];case 30:return[2]}})})},B.prototype.mask=function(U){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(U.slice(0).reverse()),this.ctx.closePath()},B.prototype.path=function(U){this.ctx.beginPath(),this.formatPath(U),this.ctx.closePath()},B.prototype.formatPath=function(U){var T=this;U.forEach(function(K,$){var ve=Oa(K)?K.start:K;$===0?T.ctx.moveTo(ve.x,ve.y):T.ctx.lineTo(ve.x,ve.y),Oa(K)&&T.ctx.bezierCurveTo(K.startControl.x,K.startControl.y,K.endControl.x,K.endControl.y,K.end.x,K.end.y)})},B.prototype.renderRepeat=function(U,T,K,$){this.path(U),this.ctx.fillStyle=T,this.ctx.translate(K,$),this.ctx.fill(),this.ctx.translate(-K,-$)},B.prototype.resizeImage=function(U,T,K){var $;if(U.width===T&&U.height===K)return U;var ve=($=this.canvas.ownerDocument)!==null&&$!==void 0?$:document,je=ve.createElement("canvas");je.width=Math.max(1,T),je.height=Math.max(1,K);var Pe=je.getContext("2d");return Pe.drawImage(U,0,0,U.width,U.height,0,0,T,K),je},B.prototype.renderBackgroundImage=function(U){return c(this,void 0,void 0,function(){var T,K,$,ve,je,Pe;return h(this,function(yt){switch(yt.label){case 0:T=U.styles.backgroundImage.length-1,K=function(mt){var Ut,tr,an,Ps,La,da,Ni,Ua,yi,Qr,Ps,La,da,Ni,Ua,Jr,Xn,gn,cn,Fi,Zn,Rn,zr,ai,yi,On,Ps,fo,Io,Ni,Ua,ll,La,da,Pl,cl,o,n,A,f,y,C;return h(this,function(I){switch(I.label){case 0:if(mt.type!==0)return[3,5];Ut=void 0,tr=mt.url,I.label=1;case 1:return I.trys.push([1,3,,4]),[4,$.context.cache.match(tr)];case 2:return Ut=I.sent(),[3,4];case 3:return I.sent(),$.context.logger.error("Error loading background-image "+tr),[3,4];case 4:return Ut&&(an=hu(U,T,[Ut.width,Ut.height,Ut.width/Ut.height]),Ps=an[0],La=an[1],da=an[2],Ni=an[3],Ua=an[4],yi=$.ctx.createPattern($.resizeImage(Ut,Ni,Ua),"repeat"),$.renderRepeat(Ps,yi,La,da)),[3,6];case 5:wc(mt)?(Qr=hu(U,T,[null,null,null]),Ps=Qr[0],La=Qr[1],da=Qr[2],Ni=Qr[3],Ua=Qr[4],Jr=Oo(mt.angle,Ni,Ua),Xn=Jr[0],gn=Jr[1],cn=Jr[2],Fi=Jr[3],Zn=Jr[4],Rn=document.createElement("canvas"),Rn.width=Ni,Rn.height=Ua,zr=Rn.getContext("2d"),ai=zr.createLinearGradient(gn,Fi,cn,Zn),fs(mt.stops,Xn).forEach(function(D){return ai.addColorStop(D.stop,ss(D.color))}),zr.fillStyle=ai,zr.fillRect(0,0,Ni,Ua),Ni>0&&Ua>0&&(yi=$.ctx.createPattern(Rn,"repeat"),$.renderRepeat(Ps,yi,La,da))):zc(mt)&&(On=hu(U,T,[null,null,null]),Ps=On[0],fo=On[1],Io=On[2],Ni=On[3],Ua=On[4],ll=mt.position.length===0?[Ma]:mt.position,La=hi(ll[0],Ni),da=hi(ll[ll.length-1],Ua),Pl=Ao(mt,La,da,Ni,Ua),cl=Pl[0],o=Pl[1],cl>0&&o>0&&(n=$.ctx.createRadialGradient(fo+La,Io+da,0,fo+La,Io+da,cl),fs(mt.stops,cl*2).forEach(function(D){return n.addColorStop(D.stop,ss(D.color))}),$.path(Ps),$.ctx.fillStyle=n,cl!==o?(A=U.bounds.left+.5*U.bounds.width,f=U.bounds.top+.5*U.bounds.height,y=o/cl,C=1/y,$.ctx.save(),$.ctx.translate(A,f),$.ctx.transform(1,0,0,y,0,0),$.ctx.translate(-A,-f),$.ctx.fillRect(fo,C*(Io-f)+f,Ni,Ua*C),$.ctx.restore()):$.ctx.fill())),I.label=6;case 6:return T--,[2]}})},$=this,ve=0,je=U.styles.backgroundImage.slice(0).reverse(),yt.label=1;case 1:return ve<je.length?(Pe=je[ve],[5,K(Pe)]):[3,4];case 2:yt.sent(),yt.label=3;case 3:return ve++,[3,1];case 4:return[2]}})})},B.prototype.renderSolidBorder=function(U,T,K){return c(this,void 0,void 0,function(){return h(this,function($){return this.path(_f(K,T)),this.ctx.fillStyle=ss(U),this.ctx.fill(),[2]})})},B.prototype.renderDoubleBorder=function(U,T,K,$){return c(this,void 0,void 0,function(){var ve,je;return h(this,function(Pe){switch(Pe.label){case 0:return T<3?[4,this.renderSolidBorder(U,K,$)]:[3,2];case 1:return Pe.sent(),[2];case 2:return ve=Rd($,K),this.path(ve),this.ctx.fillStyle=ss(U),this.ctx.fill(),je=am($,K),this.path(je),this.ctx.fill(),[2]}})})},B.prototype.renderNodeBackgroundAndBorders=function(U){return c(this,void 0,void 0,function(){var T,K,$,ve,je,Pe,yt,mt,Ut=this;return h(this,function(tr){switch(tr.label){case 0:return this.applyEffects(U.getEffects(2)),T=U.container.styles,K=!oo(T.backgroundColor)||T.backgroundImage.length,$=[{style:T.borderTopStyle,color:T.borderTopColor,width:T.borderTopWidth},{style:T.borderRightStyle,color:T.borderRightColor,width:T.borderRightWidth},{style:T.borderBottomStyle,color:T.borderBottomColor,width:T.borderBottomWidth},{style:T.borderLeftStyle,color:T.borderLeftColor,width:T.borderLeftWidth}],ve=Vd(fu(T.backgroundClip,0),U.curves),K||T.boxShadow.length?(this.ctx.save(),this.path(ve),this.ctx.clip(),oo(T.backgroundColor)||(this.ctx.fillStyle=ss(T.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(U.container)]):[3,2];case 1:tr.sent(),this.ctx.restore(),T.boxShadow.slice(0).reverse().forEach(function(an){Ut.ctx.save();var Qr=Eh(U.curves),Jr=an.inset?0:cm,Xn=Nd(Qr,-Jr+(an.inset?1:-1)*an.spread.number,(an.inset?1:-1)*an.spread.number,an.spread.number*(an.inset?-2:2),an.spread.number*(an.inset?-2:2));an.inset?(Ut.path(Qr),Ut.ctx.clip(),Ut.mask(Xn)):(Ut.mask(Qr),Ut.ctx.clip(),Ut.path(Xn)),Ut.ctx.shadowOffsetX=an.offsetX.number+Jr,Ut.ctx.shadowOffsetY=an.offsetY.number,Ut.ctx.shadowColor=ss(an.color),Ut.ctx.shadowBlur=an.blur.number,Ut.ctx.fillStyle=an.inset?ss(an.color):"rgba(0,0,0,1)",Ut.ctx.fill(),Ut.ctx.restore()}),tr.label=2;case 2:je=0,Pe=0,yt=$,tr.label=3;case 3:return Pe<yt.length?(mt=yt[Pe],mt.style!==0&&!oo(mt.color)&&mt.width>0?mt.style!==2?[3,5]:[4,this.renderDashedDottedBorder(mt.color,mt.width,je,U.curves,2)]:[3,11]):[3,13];case 4:return tr.sent(),[3,11];case 5:return mt.style!==3?[3,7]:[4,this.renderDashedDottedBorder(mt.color,mt.width,je,U.curves,3)];case 6:return tr.sent(),[3,11];case 7:return mt.style!==4?[3,9]:[4,this.renderDoubleBorder(mt.color,mt.width,je,U.curves)];case 8:return tr.sent(),[3,11];case 9:return[4,this.renderSolidBorder(mt.color,je,U.curves)];case 10:tr.sent(),tr.label=11;case 11:je++,tr.label=12;case 12:return Pe++,[3,3];case 13:return[2]}})})},B.prototype.renderDashedDottedBorder=function(U,T,K,$,ve){return c(this,void 0,void 0,function(){var je,Pe,yt,mt,Ut,tr,an,Qr,Jr,Xn,gn,cn,Fi,Zn,Rn,zr,Rn,zr;return h(this,function(ai){return this.ctx.save(),je=om($,K),Pe=_f($,K),ve===2&&(this.path(Pe),this.ctx.clip()),Oa(Pe[0])?(yt=Pe[0].start.x,mt=Pe[0].start.y):(yt=Pe[0].x,mt=Pe[0].y),Oa(Pe[1])?(Ut=Pe[1].end.x,tr=Pe[1].end.y):(Ut=Pe[1].x,tr=Pe[1].y),K===0||K===2?an=Math.abs(yt-Ut):an=Math.abs(mt-tr),this.ctx.beginPath(),ve===3?this.formatPath(je):this.formatPath(Pe.slice(0,2)),Qr=T<3?T*3:T*2,Jr=T<3?T*2:T,ve===3&&(Qr=T,Jr=T),Xn=!0,an<=Qr*2?Xn=!1:an<=Qr*2+Jr?(gn=an/(2*Qr+Jr),Qr*=gn,Jr*=gn):(cn=Math.floor((an+Jr)/(Qr+Jr)),Fi=(an-cn*Qr)/(cn-1),Zn=(an-(cn+1)*Qr)/cn,Jr=Zn<=0||Math.abs(Jr-Fi)<Math.abs(Jr-Zn)?Fi:Zn),Xn&&(ve===3?this.ctx.setLineDash([0,Qr+Jr]):this.ctx.setLineDash([Qr,Jr])),ve===3?(this.ctx.lineCap="round",this.ctx.lineWidth=T):this.ctx.lineWidth=T*2+1.1,this.ctx.strokeStyle=ss(U),this.ctx.stroke(),this.ctx.setLineDash([]),ve===2&&(Oa(Pe[0])&&(Rn=Pe[3],zr=Pe[0],this.ctx.beginPath(),this.formatPath([new rn(Rn.end.x,Rn.end.y),new rn(zr.start.x,zr.start.y)]),this.ctx.stroke()),Oa(Pe[1])&&(Rn=Pe[1],zr=Pe[2],this.ctx.beginPath(),this.formatPath([new rn(Rn.end.x,Rn.end.y),new rn(zr.start.x,zr.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},B.prototype.render=function(U){return c(this,void 0,void 0,function(){var T;return h(this,function(K){switch(K.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=ss(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),T=jd(U),[4,this.renderStack(T)];case 1:return K.sent(),this.applyEffects([]),[2,this.canvas]}})})},B}(Uh),zd=function(F){return F instanceof gh||F instanceof dd?!0:F instanceof Pu&&F.type!==ku&&F.type!==mh},Vd=function(F,B){switch(F){case 0:return Eh(B);case 2:return Pd(B);case 1:default:return Du(B)}},um=function(F){switch(F){case 1:return"center";case 2:return"right";case 0:default:return"left"}},hm=["-apple-system","system-ui"],fm=function(F){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?F.filter(function(B){return hm.indexOf(B)===-1}):F},Lh=function(F){s(B,F);function B(U,T){var K=F.call(this,U,T)||this;return K.canvas=T.canvas?T.canvas:document.createElement("canvas"),K.ctx=K.canvas.getContext("2d"),K.options=T,K.canvas.width=Math.floor(T.width*T.scale),K.canvas.height=Math.floor(T.height*T.scale),K.canvas.style.width=T.width+"px",K.canvas.style.height=T.height+"px",K.ctx.scale(K.options.scale,K.options.scale),K.ctx.translate(-T.x,-T.y),K.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+T.width+"x"+T.height+" at "+T.x+","+T.y+") with scale "+T.scale),K}return B.prototype.render=function(U){return c(this,void 0,void 0,function(){var T,K;return h(this,function($){switch($.label){case 0:return T=Yc(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,U),[4,bf(T)];case 1:return K=$.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=ss(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(K,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},B}(Uh),bf=function(F){return new Promise(function(B,U){var T=new Image;T.onload=function(){B(T)},T.onerror=U,T.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(F))})},dm=function(){function F(B){var U=B.id,T=B.enabled;this.id=U,this.enabled=T,this.start=Date.now()}return F.prototype.debug=function(){for(var B=[],U=0;U<arguments.length;U++)B[U]=arguments[U];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,a([this.id,this.getTime()+"ms"],B)):this.info.apply(this,B))},F.prototype.getTime=function(){return Date.now()-this.start},F.prototype.info=function(){for(var B=[],U=0;U<arguments.length;U++)B[U]=arguments[U];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,a([this.id,this.getTime()+"ms"],B))},F.prototype.warn=function(){for(var B=[],U=0;U<arguments.length;U++)B[U]=arguments[U];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,a([this.id,this.getTime()+"ms"],B)):this.info.apply(this,B))},F.prototype.error=function(){for(var B=[],U=0;U<arguments.length;U++)B[U]=arguments[U];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,a([this.id,this.getTime()+"ms"],B)):this.info.apply(this,B))},F.instances={},F}(),xf=function(){function F(B,U){var T;this.windowBounds=U,this.instanceName="#"+F.instanceCount++,this.logger=new dm({id:this.instanceName,enabled:B.logging}),this.cache=(T=B.cache)!==null&&T!==void 0?T:new tm(this,B)}return F.instanceCount=1,F}(),Bf=function(F,B){return B===void 0&&(B={}),pu(F,B)};typeof window<"u"&&Ld.setContext(window);var pu=function(F,B){return c(void 0,void 0,void 0,function(){var U,T,K,$,ve,je,Pe,yt,mt,Ut,tr,an,Qr,Jr,Xn,gn,cn,Fi,Zn,Rn,ai,zr,ai,yi,On,Ps,fo,Io,Ni,Ua,ll,La,da,Pl,cl,o,n,A,f,y;return h(this,function(C){switch(C.label){case 0:if(!F||typeof F!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(U=F.ownerDocument,!U)throw new Error("Element is not attached to a Document");if(T=U.defaultView,!T)throw new Error("Document is not attached to a Window");return K={allowTaint:(yi=B.allowTaint)!==null&&yi!==void 0?yi:!1,imageTimeout:(On=B.imageTimeout)!==null&&On!==void 0?On:15e3,proxy:B.proxy,useCORS:(Ps=B.useCORS)!==null&&Ps!==void 0?Ps:!1},$=l({logging:(fo=B.logging)!==null&&fo!==void 0?fo:!0,cache:B.cache},K),ve={windowWidth:(Io=B.windowWidth)!==null&&Io!==void 0?Io:T.innerWidth,windowHeight:(Ni=B.windowHeight)!==null&&Ni!==void 0?Ni:T.innerHeight,scrollX:(Ua=B.scrollX)!==null&&Ua!==void 0?Ua:T.pageXOffset,scrollY:(ll=B.scrollY)!==null&&ll!==void 0?ll:T.pageYOffset},je=new d(ve.scrollX,ve.scrollY,ve.windowWidth,ve.windowHeight),Pe=new xf($,je),yt=(La=B.foreignObjectRendering)!==null&&La!==void 0?La:!1,mt={allowTaint:(da=B.allowTaint)!==null&&da!==void 0?da:!1,onclone:B.onclone,ignoreElements:B.ignoreElements,inlineImages:yt,copyStyles:yt},Pe.logger.debug("Starting document clone with size "+je.width+"x"+je.height+" scrolled to "+-je.left+","+-je.top),Ut=new Os(Pe,F,mt),tr=Ut.clonedReferenceElement,tr?[4,Ut.toIFrame(U,je)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return an=C.sent(),Qr=of(tr)||gd(tr)?p(tr.ownerDocument):_(Pe,tr),Jr=Qr.width,Xn=Qr.height,gn=Qr.left,cn=Qr.top,Fi=pm(Pe,tr,B.backgroundColor),Zn={canvas:B.canvas,backgroundColor:Fi,scale:(cl=(Pl=B.scale)!==null&&Pl!==void 0?Pl:T.devicePixelRatio)!==null&&cl!==void 0?cl:1,x:((o=B.x)!==null&&o!==void 0?o:0)+gn,y:((n=B.y)!==null&&n!==void 0?n:0)+cn,width:(A=B.width)!==null&&A!==void 0?A:Math.ceil(Jr),height:(f=B.height)!==null&&f!==void 0?f:Math.ceil(Xn)},yt?(Pe.logger.debug("Document cloned, using foreign object rendering"),ai=new Lh(Pe,Zn),[4,ai.render(tr)]):[3,3];case 2:return Rn=C.sent(),[3,5];case 3:return Pe.logger.debug("Document cloned, element located at "+gn+","+cn+" with size "+Jr+"x"+Xn+" using computed rendering"),Pe.logger.debug("Starting DOM parsing"),zr=md(Pe,tr),Fi===zr.styles.backgroundColor&&(zr.styles.backgroundColor=gi.TRANSPARENT),Pe.logger.debug("Starting renderer for element at "+Zn.x+","+Zn.y+" with size "+Zn.width+"x"+Zn.height),ai=new lc(Pe,Zn),[4,ai.render(zr)];case 4:Rn=C.sent(),C.label=5;case 5:return(!((y=B.removeContainer)!==null&&y!==void 0)||y)&&(Os.destroy(an)||Pe.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),Pe.logger.debug("Finished rendering"),[2,Rn]}})})},pm=function(F,B,U){var T=B.ownerDocument,K=T.documentElement?ua(F,getComputedStyle(T.documentElement).backgroundColor):gi.TRANSPARENT,$=T.body?ua(F,getComputedStyle(T.body).backgroundColor):gi.TRANSPARENT,ve=typeof U=="string"?ua(F,U):U===null?gi.TRANSPARENT:4294967295;return B===T.documentElement?oo(K)?oo($)?ve:$:K:ve};return Bf})}(SS)),Lp}/*!
 * html2pdf.js v0.10.1
 * Copyright (c) 2021 Erik Koopmans
 * Released under the MIT License.
 */(function(e,t){(function(s,l){e.exports=l(FS,IS())})(self,function(r,s){return function(){var l={"./src/plugin/hyperlinks.js":function(d,_,p){p.r(_),p("./node_modules/core-js/modules/web.dom-collections.for-each.js"),p("./node_modules/core-js/modules/es.string.link.js");var E=p("./src/worker.js"),w=p("./src/utils.js"),x=[],Q={toContainer:E.default.prototype.toContainer,toPdf:E.default.prototype.toPdf};E.default.prototype.toContainer=function(){return Q.toContainer.call(this).then(function(){if(this.opt.enableLinks){var P=this.prop.container,O=P.querySelectorAll("a"),G=(0,w.unitConvert)(P.getBoundingClientRect(),this.prop.pageSize.k);x=[],Array.prototype.forEach.call(O,function(V){for(var Z=V.getClientRects(),te=0;te<Z.length;te++){var ce=(0,w.unitConvert)(Z[te],this.prop.pageSize.k);ce.left-=G.left,ce.top-=G.top;var he=Math.floor(ce.top/this.prop.pageSize.inner.height)+1,Ce=this.opt.margin[0]+ce.top%this.prop.pageSize.inner.height,fe=this.opt.margin[1]+ce.left;x.push({page:he,top:Ce,left:fe,clientRect:ce,link:V})}},this)}})},E.default.prototype.toPdf=function(){return Q.toPdf.call(this).then(function(){if(this.opt.enableLinks){x.forEach(function(O){this.prop.pdf.setPage(O.page),this.prop.pdf.link(O.left,O.top,O.clientRect.width,O.clientRect.height,{url:O.link.href})},this);var P=this.prop.pdf.internal.getNumberOfPages();this.prop.pdf.setPage(P)}})}},"./src/plugin/jspdf-plugin.js":function(d,_,p){p.r(_),p("./node_modules/core-js/modules/es.symbol.js"),p("./node_modules/core-js/modules/es.symbol.description.js"),p("./node_modules/core-js/modules/es.object.to-string.js"),p("./node_modules/core-js/modules/es.symbol.iterator.js"),p("./node_modules/core-js/modules/es.array.iterator.js"),p("./node_modules/core-js/modules/es.string.iterator.js"),p("./node_modules/core-js/modules/web.dom-collections.iterator.js");var E=p("jspdf");function w(x){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?w=function(k){return typeof k}:w=function(k){return k&&typeof Symbol=="function"&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":typeof k},w(x)}E.jsPDF.getPageSize=function(x,Q,k){if(w(x)==="object"){var R=x;x=R.orientation,Q=R.unit||Q,k=R.format||k}Q=Q||"mm",k=k||"a4",x=(""+(x||"P")).toLowerCase();var P=(""+k).toLowerCase(),O={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(Q){case"pt":var G=1;break;case"mm":var G=72/25.4;break;case"cm":var G=72/2.54;break;case"in":var G=72;break;case"px":var G=72/96;break;case"pc":var G=12;break;case"em":var G=12;break;case"ex":var G=6;break;default:throw"Invalid unit: "+Q}if(O.hasOwnProperty(P))var V=O[P][1]/G,Z=O[P][0]/G;else try{var V=k[1],Z=k[0]}catch{throw new Error("Invalid format: "+k)}if(x==="p"||x==="portrait"){if(x="p",Z>V){var te=Z;Z=V,V=te}}else if(x==="l"||x==="landscape"){if(x="l",V>Z){var te=Z;Z=V,V=te}}else throw"Invalid orientation: "+x;var ce={width:Z,height:V,unit:Q,k:G};return ce},_.default=E.jsPDF},"./src/plugin/pagebreaks.js":function(d,_,p){p.r(_),p("./node_modules/core-js/modules/es.array.concat.js"),p("./node_modules/core-js/modules/es.array.slice.js"),p("./node_modules/core-js/modules/es.array.join.js"),p("./node_modules/core-js/modules/web.dom-collections.for-each.js"),p("./node_modules/core-js/modules/es.object.keys.js");var E=p("./src/worker.js"),w=p("./src/utils.js"),x={toContainer:E.default.prototype.toContainer};E.default.template.opt.pagebreak={mode:["css","legacy"],before:[],after:[],avoid:[]},E.default.prototype.toContainer=function(){return x.toContainer.call(this).then(function(){var R=this.prop.container,P=this.prop.pageSize.inner.px.height,O=[].concat(this.opt.pagebreak.mode),G={avoidAll:O.indexOf("avoid-all")!==-1,css:O.indexOf("css")!==-1,legacy:O.indexOf("legacy")!==-1},V={},Z=this;["before","after","avoid"].forEach(function(he){var Ce=G.avoidAll&&he==="avoid";V[he]=Ce?[]:[].concat(Z.opt.pagebreak[he]||[]),V[he].length>0&&(V[he]=Array.prototype.slice.call(R.querySelectorAll(V[he].join(", "))))});var te=R.querySelectorAll(".html2pdf__page-break");te=Array.prototype.slice.call(te);var ce=R.querySelectorAll("*");Array.prototype.forEach.call(ce,function(Ce){var fe={before:!1,after:G.legacy&&te.indexOf(Ce)!==-1,avoid:G.avoidAll};if(G.css){var ee=window.getComputedStyle(Ce),re=["always","page","left","right"],be=["avoid","avoid-page"];fe={before:fe.before||re.indexOf(ee.breakBefore||ee.pageBreakBefore)!==-1,after:fe.after||re.indexOf(ee.breakAfter||ee.pageBreakAfter)!==-1,avoid:fe.avoid||be.indexOf(ee.breakInside||ee.pageBreakInside)!==-1}}Object.keys(fe).forEach(function(Je){fe[Je]=fe[Je]||V[Je].indexOf(Ce)!==-1});var me=Ce.getBoundingClientRect();if(fe.avoid&&!fe.before){var Re=Math.floor(me.top/P),_e=Math.floor(me.bottom/P),He=Math.abs(me.bottom-me.top)/P;_e!==Re&&He<=1&&(fe.before=!0)}if(fe.before){var Le=(0,w.createElement)("div",{style:{display:"block",height:P-me.top%P+"px"}});Ce.parentNode.insertBefore(Le,Ce)}if(fe.after){var Le=(0,w.createElement)("div",{style:{display:"block",height:P-me.bottom%P+"px"}});Ce.parentNode.insertBefore(Le,Ce.nextSibling)}})})}},"./src/utils.js":function(d,_,p){p.r(_),p.d(_,{objType:function(){return w},createElement:function(){return x},cloneNode:function(){return Q},unitConvert:function(){return k},toPx:function(){return R}}),p("./node_modules/core-js/modules/es.number.constructor.js"),p("./node_modules/core-js/modules/es.symbol.js"),p("./node_modules/core-js/modules/es.symbol.description.js"),p("./node_modules/core-js/modules/es.object.to-string.js"),p("./node_modules/core-js/modules/es.symbol.iterator.js"),p("./node_modules/core-js/modules/es.array.iterator.js"),p("./node_modules/core-js/modules/es.string.iterator.js"),p("./node_modules/core-js/modules/web.dom-collections.iterator.js");function E(P){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?E=function(G){return typeof G}:E=function(G){return G&&typeof Symbol=="function"&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G},E(P)}var w=function(O){var G=E(O);return G==="undefined"?"undefined":G==="string"||O instanceof String?"string":G==="number"||O instanceof Number?"number":G==="function"||O instanceof Function?"function":O&&O.constructor===Array?"array":O&&O.nodeType===1?"element":G==="object"?"object":"unknown"},x=function(O,G){var V=document.createElement(O);if(G.className&&(V.className=G.className),G.innerHTML){V.innerHTML=G.innerHTML;for(var Z=V.getElementsByTagName("script"),te=Z.length;te-- >0;null)Z[te].parentNode.removeChild(Z[te])}for(var ce in G.style)V.style[ce]=G.style[ce];return V},Q=function P(O,G){for(var V=O.nodeType===3?document.createTextNode(O.nodeValue):O.cloneNode(!1),Z=O.firstChild;Z;Z=Z.nextSibling)(G===!0||Z.nodeType!==1||Z.nodeName!=="SCRIPT")&&V.appendChild(P(Z,G));return O.nodeType===1&&(O.nodeName==="CANVAS"?(V.width=O.width,V.height=O.height,V.getContext("2d").drawImage(O,0,0)):(O.nodeName==="TEXTAREA"||O.nodeName==="SELECT")&&(V.value=O.value),V.addEventListener("load",function(){V.scrollTop=O.scrollTop,V.scrollLeft=O.scrollLeft},!0)),V},k=function(O,G){if(w(O)==="number")return O*72/96/G;var V={};for(var Z in O)V[Z]=O[Z]*72/96/G;return V},R=function(O,G){return Math.floor(O*G/72*96)}},"./src/worker.js":function(d,_,p){p.r(_),p("./node_modules/core-js/modules/es.object.assign.js"),p("./node_modules/core-js/modules/es.array.map.js"),p("./node_modules/core-js/modules/es.object.keys.js"),p("./node_modules/core-js/modules/es.array.concat.js"),p("./node_modules/core-js/modules/es.object.to-string.js"),p("./node_modules/core-js/modules/es.regexp.to-string.js"),p("./node_modules/core-js/modules/es.function.name.js"),p("./node_modules/core-js/modules/web.dom-collections.for-each.js");var E=p("jspdf"),w=p("html2canvas"),x=p("./src/utils.js"),Q=p("./node_modules/es6-promise/dist/es6-promise.js"),k=p.n(Q),R=k().Promise,P=function O(G){var V=Object.assign(O.convert(R.resolve()),JSON.parse(JSON.stringify(O.template))),Z=O.convert(R.resolve(),V);return Z=Z.setProgress(1,O,1,[O]),Z=Z.set(G),Z};P.prototype=Object.create(R.prototype),P.prototype.constructor=P,P.convert=function(G,V){return G.__proto__=V||P.prototype,G},P.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],image:{type:"jpeg",quality:.95},enableLinks:!0,html2canvas:{},jsPDF:{}}},P.prototype.from=function(G,V){function Z(te){switch((0,x.objType)(te)){case"string":return"string";case"element":return te.nodeName.toLowerCase==="canvas"?"canvas":"element";default:return"unknown"}}return this.then(function(){switch(V=V||Z(G),V){case"string":return this.set({src:(0,x.createElement)("div",{innerHTML:G})});case"element":return this.set({src:G});case"canvas":return this.set({canvas:G});case"img":return this.set({img:G});default:return this.error("Unknown source type.")}})},P.prototype.to=function(G){switch(G){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},P.prototype.toContainer=function(){var G=[function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}];return this.thenList(G).then(function(){var Z={position:"fixed",overflow:"hidden",zIndex:1e3,left:0,right:0,bottom:0,top:0,backgroundColor:"rgba(0,0,0,0.8)"},te={position:"absolute",width:this.prop.pageSize.inner.width+this.prop.pageSize.unit,left:0,right:0,top:0,height:"auto",margin:"auto",backgroundColor:"white"};Z.opacity=0;var ce=(0,x.cloneNode)(this.prop.src,this.opt.html2canvas.javascriptEnabled);this.prop.overlay=(0,x.createElement)("div",{className:"html2pdf__overlay",style:Z}),this.prop.container=(0,x.createElement)("div",{className:"html2pdf__container",style:te}),this.prop.container.appendChild(ce),this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay)})},P.prototype.toCanvas=function(){var G=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(G).then(function(){var Z=Object.assign({},this.opt.html2canvas);return delete Z.onrendered,w(this.prop.container,Z)}).then(function(Z){var te=this.opt.html2canvas.onrendered||function(){};te(Z),this.prop.canvas=Z,document.body.removeChild(this.prop.overlay)})},P.prototype.toImg=function(){var G=[function(){return this.prop.canvas||this.toCanvas()}];return this.thenList(G).then(function(){var Z=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=Z})},P.prototype.toPdf=function(){var G=[function(){return this.prop.canvas||this.toCanvas()}];return this.thenList(G).then(function(){var Z=this.prop.canvas,te=this.opt,ce=Z.height,he=Math.floor(Z.width*this.prop.pageSize.inner.ratio),Ce=Math.ceil(ce/he),fe=this.prop.pageSize.inner.height,ee=document.createElement("canvas"),re=ee.getContext("2d");ee.width=Z.width,ee.height=he,this.prop.pdf=this.prop.pdf||new E.jsPDF(te.jsPDF);for(var be=0;be<Ce;be++){be===Ce-1&&ce%he!==0&&(ee.height=ce%he,fe=ee.height*this.prop.pageSize.inner.width/ee.width);var me=ee.width,Re=ee.height;re.fillStyle="white",re.fillRect(0,0,me,Re),re.drawImage(Z,0,be*he,me,Re,0,0,me,Re),be&&this.prop.pdf.addPage();var _e=ee.toDataURL("image/"+te.image.type,te.image.quality);this.prop.pdf.addImage(_e,te.image.type,te.margin[1],te.margin[0],this.prop.pageSize.inner.width,fe)}})},P.prototype.output=function(G,V,Z){return Z=Z||"pdf",Z.toLowerCase()==="img"||Z.toLowerCase()==="image"?this.outputImg(G,V):this.outputPdf(G,V)},P.prototype.outputPdf=function(G,V){var Z=[function(){return this.prop.pdf||this.toPdf()}];return this.thenList(Z).then(function(){return this.prop.pdf.output(G,V)})},P.prototype.outputImg=function(G,V){var Z=[function(){return this.prop.img||this.toImg()}];return this.thenList(Z).then(function(){switch(G){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+G+'" is not supported.'}})},P.prototype.save=function(G){var V=[function(){return this.prop.pdf||this.toPdf()}];return this.thenList(V).set(G?{filename:G}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},P.prototype.set=function(G){if((0,x.objType)(G)!=="object")return this;var V=Object.keys(G||{}).map(function(Z){switch(Z){case"margin":return this.setMargin.bind(this,G.margin);case"jsPDF":return function(){return this.opt.jsPDF=G.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,G.pageSize);default:return Z in P.template.prop?function(){this.prop[Z]=G[Z]}:function(){this.opt[Z]=G[Z]}}},this);return this.then(function(){return this.thenList(V)})},P.prototype.get=function(G,V){return this.then(function(){var te=G in P.template.prop?this.prop[G]:this.opt[G];return V?V(te):te})},P.prototype.setMargin=function(G){return this.then(function(){switch((0,x.objType)(G)){case"number":G=[G,G,G,G];case"array":if(G.length===2&&(G=[G[0],G[1],G[0],G[1]]),G.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=G}).then(this.setPageSize)},P.prototype.setPageSize=function(G){return this.then(function(){G=G||E.jsPDF.getPageSize(this.opt.jsPDF),G.hasOwnProperty("inner")||(G.inner={width:G.width-this.opt.margin[1]-this.opt.margin[3],height:G.height-this.opt.margin[0]-this.opt.margin[2]},G.inner.px={width:(0,x.toPx)(G.inner.width,G.k),height:(0,x.toPx)(G.inner.height,G.k)},G.inner.ratio=G.inner.height/G.inner.width),this.prop.pageSize=G})},P.prototype.setProgress=function(G,V,Z,te){return G!=null&&(this.progress.val=G),V!=null&&(this.progress.state=V),Z!=null&&(this.progress.n=Z),te!=null&&(this.progress.stack=te),this.progress.ratio=this.progress.val/this.progress.state,this},P.prototype.updateProgress=function(G,V,Z,te){return this.setProgress(G?this.progress.val+G:null,V||null,Z?this.progress.n+Z:null,te?this.progress.stack.concat(te):null)},P.prototype.then=function(G,V){var Z=this;return this.thenCore(G,V,function(ce,he){return Z.updateProgress(null,null,1,[ce]),R.prototype.then.call(this,function(fe){return Z.updateProgress(null,ce),fe}).then(ce,he).then(function(fe){return Z.updateProgress(1),fe})})},P.prototype.thenCore=function(G,V,Z){Z=Z||R.prototype.then;var te=this;G&&(G=G.bind(te)),V&&(V=V.bind(te));var ce=R.toString().indexOf("[native code]")!==-1&&R.name==="Promise",he=ce?te:P.convert(Object.assign({},te),R.prototype),Ce=Z.call(he,G,V);return P.convert(Ce,te.__proto__)},P.prototype.thenExternal=function(G,V){return R.prototype.then.call(this,G,V)},P.prototype.thenList=function(G){var V=this;return G.forEach(function(te){V=V.thenCore(te)}),V},P.prototype.catch=function(O){O&&(O=O.bind(this));var G=R.prototype.catch.call(this,O);return P.convert(G,this)},P.prototype.catchExternal=function(G){return R.prototype.catch.call(this,G)},P.prototype.error=function(G){return this.then(function(){throw new Error(G)})},P.prototype.using=P.prototype.set,P.prototype.saveAs=P.prototype.save,P.prototype.export=P.prototype.output,P.prototype.run=P.prototype.then,_.default=P},"./node_modules/core-js/internals/a-function.js":function(d){d.exports=function(_){if(typeof _!="function")throw TypeError(String(_)+" is not a function");return _}},"./node_modules/core-js/internals/a-possible-prototype.js":function(d,_,p){var E=p("./node_modules/core-js/internals/is-object.js");d.exports=function(w){if(!E(w)&&w!==null)throw TypeError("Can't set "+String(w)+" as a prototype");return w}},"./node_modules/core-js/internals/add-to-unscopables.js":function(d,_,p){var E=p("./node_modules/core-js/internals/well-known-symbol.js"),w=p("./node_modules/core-js/internals/object-create.js"),x=p("./node_modules/core-js/internals/object-define-property.js"),Q=E("unscopables"),k=Array.prototype;k[Q]==null&&x.f(k,Q,{configurable:!0,value:w(null)}),d.exports=function(R){k[Q][R]=!0}},"./node_modules/core-js/internals/an-object.js":function(d,_,p){var E=p("./node_modules/core-js/internals/is-object.js");d.exports=function(w){if(!E(w))throw TypeError(String(w)+" is not an object");return w}},"./node_modules/core-js/internals/array-for-each.js":function(d,_,p){var E=p("./node_modules/core-js/internals/array-iteration.js").forEach,w=p("./node_modules/core-js/internals/array-method-is-strict.js"),x=w("forEach");d.exports=x?[].forEach:function(k){return E(this,k,arguments.length>1?arguments[1]:void 0)}},"./node_modules/core-js/internals/array-includes.js":function(d,_,p){var E=p("./node_modules/core-js/internals/to-indexed-object.js"),w=p("./node_modules/core-js/internals/to-length.js"),x=p("./node_modules/core-js/internals/to-absolute-index.js"),Q=function(k){return function(R,P,O){var G=E(R),V=w(G.length),Z=x(O,V),te;if(k&&P!=P){for(;V>Z;)if(te=G[Z++],te!=te)return!0}else for(;V>Z;Z++)if((k||Z in G)&&G[Z]===P)return k||Z||0;return!k&&-1}};d.exports={includes:Q(!0),indexOf:Q(!1)}},"./node_modules/core-js/internals/array-iteration.js":function(d,_,p){var E=p("./node_modules/core-js/internals/function-bind-context.js"),w=p("./node_modules/core-js/internals/indexed-object.js"),x=p("./node_modules/core-js/internals/to-object.js"),Q=p("./node_modules/core-js/internals/to-length.js"),k=p("./node_modules/core-js/internals/array-species-create.js"),R=[].push,P=function(O){var G=O==1,V=O==2,Z=O==3,te=O==4,ce=O==6,he=O==7,Ce=O==5||ce;return function(fe,ee,re,be){for(var me=x(fe),Re=w(me),_e=E(ee,re,3),He=Q(Re.length),Le=0,Je=be||k,ke=G?Je(fe,He):V||he?Je(fe,0):void 0,kt,ie;He>Le;Le++)if((Ce||Le in Re)&&(kt=Re[Le],ie=_e(kt,Le,me),O))if(G)ke[Le]=ie;else if(ie)switch(O){case 3:return!0;case 5:return kt;case 6:return Le;case 2:R.call(ke,kt)}else switch(O){case 4:return!1;case 7:R.call(ke,kt)}return ce?-1:Z||te?te:ke}};d.exports={forEach:P(0),map:P(1),filter:P(2),some:P(3),every:P(4),find:P(5),findIndex:P(6),filterReject:P(7)}},"./node_modules/core-js/internals/array-method-has-species-support.js":function(d,_,p){var E=p("./node_modules/core-js/internals/fails.js"),w=p("./node_modules/core-js/internals/well-known-symbol.js"),x=p("./node_modules/core-js/internals/engine-v8-version.js"),Q=w("species");d.exports=function(k){return x>=51||!E(function(){var R=[],P=R.constructor={};return P[Q]=function(){return{foo:1}},R[k](Boolean).foo!==1})}},"./node_modules/core-js/internals/array-method-is-strict.js":function(d,_,p){var E=p("./node_modules/core-js/internals/fails.js");d.exports=function(w,x){var Q=[][w];return!!Q&&E(function(){Q.call(null,x||function(){throw 1},1)})}},"./node_modules/core-js/internals/array-species-constructor.js":function(d,_,p){var E=p("./node_modules/core-js/internals/is-object.js"),w=p("./node_modules/core-js/internals/is-array.js"),x=p("./node_modules/core-js/internals/well-known-symbol.js"),Q=x("species");d.exports=function(k){var R;return w(k)&&(R=k.constructor,typeof R=="function"&&(R===Array||w(R.prototype))?R=void 0:E(R)&&(R=R[Q],R===null&&(R=void 0))),R===void 0?Array:R}},"./node_modules/core-js/internals/array-species-create.js":function(d,_,p){var E=p("./node_modules/core-js/internals/array-species-constructor.js");d.exports=function(w,x){return new(E(w))(x===0?0:x)}},"./node_modules/core-js/internals/classof-raw.js":function(d){var _={}.toString;d.exports=function(p){return _.call(p).slice(8,-1)}},"./node_modules/core-js/internals/classof.js":function(d,_,p){var E=p("./node_modules/core-js/internals/to-string-tag-support.js"),w=p("./node_modules/core-js/internals/classof-raw.js"),x=p("./node_modules/core-js/internals/well-known-symbol.js"),Q=x("toStringTag"),k=w(function(){return arguments}())=="Arguments",R=function(P,O){try{return P[O]}catch{}};d.exports=E?w:function(P){var O,G,V;return P===void 0?"Undefined":P===null?"Null":typeof(G=R(O=Object(P),Q))=="string"?G:k?w(O):(V=w(O))=="Object"&&typeof O.callee=="function"?"Arguments":V}},"./node_modules/core-js/internals/copy-constructor-properties.js":function(d,_,p){var E=p("./node_modules/core-js/internals/has.js"),w=p("./node_modules/core-js/internals/own-keys.js"),x=p("./node_modules/core-js/internals/object-get-own-property-descriptor.js"),Q=p("./node_modules/core-js/internals/object-define-property.js");d.exports=function(k,R){for(var P=w(R),O=Q.f,G=x.f,V=0;V<P.length;V++){var Z=P[V];E(k,Z)||O(k,Z,G(R,Z))}}},"./node_modules/core-js/internals/correct-prototype-getter.js":function(d,_,p){var E=p("./node_modules/core-js/internals/fails.js");d.exports=!E(function(){function w(){}return w.prototype.constructor=null,Object.getPrototypeOf(new w)!==w.prototype})},"./node_modules/core-js/internals/create-html.js":function(d,_,p){var E=p("./node_modules/core-js/internals/require-object-coercible.js"),w=p("./node_modules/core-js/internals/to-string.js"),x=/"/g;d.exports=function(Q,k,R,P){var O=w(E(Q)),G="<"+k;return R!==""&&(G+=" "+R+'="'+w(P).replace(x,"&quot;")+'"'),G+">"+O+"</"+k+">"}},"./node_modules/core-js/internals/create-iterator-constructor.js":function(d,_,p){var E=p("./node_modules/core-js/internals/iterators-core.js").IteratorPrototype,w=p("./node_modules/core-js/internals/object-create.js"),x=p("./node_modules/core-js/internals/create-property-descriptor.js"),Q=p("./node_modules/core-js/internals/set-to-string-tag.js"),k=p("./node_modules/core-js/internals/iterators.js"),R=function(){return this};d.exports=function(P,O,G){var V=O+" Iterator";return P.prototype=w(E,{next:x(1,G)}),Q(P,V,!1,!0),k[V]=R,P}},"./node_modules/core-js/internals/create-non-enumerable-property.js":function(d,_,p){var E=p("./node_modules/core-js/internals/descriptors.js"),w=p("./node_modules/core-js/internals/object-define-property.js"),x=p("./node_modules/core-js/internals/create-property-descriptor.js");d.exports=E?function(Q,k,R){return w.f(Q,k,x(1,R))}:function(Q,k,R){return Q[k]=R,Q}},"./node_modules/core-js/internals/create-property-descriptor.js":function(d){d.exports=function(_,p){return{enumerable:!(_&1),configurable:!(_&2),writable:!(_&4),value:p}}},"./node_modules/core-js/internals/create-property.js":function(d,_,p){var E=p("./node_modules/core-js/internals/to-property-key.js"),w=p("./node_modules/core-js/internals/object-define-property.js"),x=p("./node_modules/core-js/internals/create-property-descriptor.js");d.exports=function(Q,k,R){var P=E(k);P in Q?w.f(Q,P,x(0,R)):Q[P]=R}},"./node_modules/core-js/internals/define-iterator.js":function(d,_,p){var E=p("./node_modules/core-js/internals/export.js"),w=p("./node_modules/core-js/internals/create-iterator-constructor.js"),x=p("./node_modules/core-js/internals/object-get-prototype-of.js"),Q=p("./node_modules/core-js/internals/object-set-prototype-of.js"),k=p("./node_modules/core-js/internals/set-to-string-tag.js"),R=p("./node_modules/core-js/internals/create-non-enumerable-property.js"),P=p("./node_modules/core-js/internals/redefine.js"),O=p("./node_modules/core-js/internals/well-known-symbol.js"),G=p("./node_modules/core-js/internals/is-pure.js"),V=p("./node_modules/core-js/internals/iterators.js"),Z=p("./node_modules/core-js/internals/iterators-core.js"),te=Z.IteratorPrototype,ce=Z.BUGGY_SAFARI_ITERATORS,he=O("iterator"),Ce="keys",fe="values",ee="entries",re=function(){return this};d.exports=function(be,me,Re,_e,He,Le,Je){w(Re,me,_e);var ke=function(rt){if(rt===He&&Ke)return Ke;if(!ce&&rt in Se)return Se[rt];switch(rt){case Ce:return function(){return new Re(this,rt)};case fe:return function(){return new Re(this,rt)};case ee:return function(){return new Re(this,rt)}}return function(){return new Re(this)}},kt=me+" Iterator",ie=!1,Se=be.prototype,Qe=Se[he]||Se["@@iterator"]||He&&Se[He],Ke=!ce&&Qe||ke(He),ot=me=="Array"&&Se.entries||Qe,dt,Bt,Ge;if(ot&&(dt=x(ot.call(new be)),te!==Object.prototype&&dt.next&&(!G&&x(dt)!==te&&(Q?Q(dt,te):typeof dt[he]!="function"&&R(dt,he,re)),k(dt,kt,!0,!0),G&&(V[kt]=re))),He==fe&&Qe&&Qe.name!==fe&&(ie=!0,Ke=function(){return Qe.call(this)}),(!G||Je)&&Se[he]!==Ke&&R(Se,he,Ke),V[me]=Ke,He)if(Bt={values:ke(fe),keys:Le?Ke:ke(Ce),entries:ke(ee)},Je)for(Ge in Bt)(ce||ie||!(Ge in Se))&&P(Se,Ge,Bt[Ge]);else E({target:me,proto:!0,forced:ce||ie},Bt);return Bt}},"./node_modules/core-js/internals/define-well-known-symbol.js":function(d,_,p){var E=p("./node_modules/core-js/internals/path.js"),w=p("./node_modules/core-js/internals/has.js"),x=p("./node_modules/core-js/internals/well-known-symbol-wrapped.js"),Q=p("./node_modules/core-js/internals/object-define-property.js").f;d.exports=function(k){var R=E.Symbol||(E.Symbol={});w(R,k)||Q(R,k,{value:x.f(k)})}},"./node_modules/core-js/internals/descriptors.js":function(d,_,p){var E=p("./node_modules/core-js/internals/fails.js");d.exports=!E(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},"./node_modules/core-js/internals/document-create-element.js":function(d,_,p){var E=p("./node_modules/core-js/internals/global.js"),w=p("./node_modules/core-js/internals/is-object.js"),x=E.document,Q=w(x)&&w(x.createElement);d.exports=function(k){return Q?x.createElement(k):{}}},"./node_modules/core-js/internals/dom-iterables.js":function(d){d.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},"./node_modules/core-js/internals/engine-user-agent.js":function(d,_,p){var E=p("./node_modules/core-js/internals/get-built-in.js");d.exports=E("navigator","userAgent")||""},"./node_modules/core-js/internals/engine-v8-version.js":function(d,_,p){var E=p("./node_modules/core-js/internals/global.js"),w=p("./node_modules/core-js/internals/engine-user-agent.js"),x=E.process,Q=E.Deno,k=x&&x.versions||Q&&Q.version,R=k&&k.v8,P,O;R?(P=R.split("."),O=P[0]<4?1:P[0]+P[1]):w&&(P=w.match(/Edge\/(\d+)/),(!P||P[1]>=74)&&(P=w.match(/Chrome\/(\d+)/),P&&(O=P[1]))),d.exports=O&&+O},"./node_modules/core-js/internals/enum-bug-keys.js":function(d){d.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"./node_modules/core-js/internals/export.js":function(d,_,p){var E=p("./node_modules/core-js/internals/global.js"),w=p("./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,x=p("./node_modules/core-js/internals/create-non-enumerable-property.js"),Q=p("./node_modules/core-js/internals/redefine.js"),k=p("./node_modules/core-js/internals/set-global.js"),R=p("./node_modules/core-js/internals/copy-constructor-properties.js"),P=p("./node_modules/core-js/internals/is-forced.js");d.exports=function(O,G){var V=O.target,Z=O.global,te=O.stat,ce,he,Ce,fe,ee,re;if(Z?he=E:te?he=E[V]||k(V,{}):he=(E[V]||{}).prototype,he)for(Ce in G){if(ee=G[Ce],O.noTargetGet?(re=w(he,Ce),fe=re&&re.value):fe=he[Ce],ce=P(Z?Ce:V+(te?".":"#")+Ce,O.forced),!ce&&fe!==void 0){if(typeof ee==typeof fe)continue;R(ee,fe)}(O.sham||fe&&fe.sham)&&x(ee,"sham",!0),Q(he,Ce,ee,O)}}},"./node_modules/core-js/internals/fails.js":function(d){d.exports=function(_){try{return!!_()}catch{return!0}}},"./node_modules/core-js/internals/function-bind-context.js":function(d,_,p){var E=p("./node_modules/core-js/internals/a-function.js");d.exports=function(w,x,Q){if(E(w),x===void 0)return w;switch(Q){case 0:return function(){return w.call(x)};case 1:return function(k){return w.call(x,k)};case 2:return function(k,R){return w.call(x,k,R)};case 3:return function(k,R,P){return w.call(x,k,R,P)}}return function(){return w.apply(x,arguments)}}},"./node_modules/core-js/internals/get-built-in.js":function(d,_,p){var E=p("./node_modules/core-js/internals/global.js"),w=function(x){return typeof x=="function"?x:void 0};d.exports=function(x,Q){return arguments.length<2?w(E[x]):E[x]&&E[x][Q]}},"./node_modules/core-js/internals/global.js":function(d){var _=function(p){return p&&p.Math==Math&&p};d.exports=_(typeof globalThis=="object"&&globalThis)||_(typeof window=="object"&&window)||_(typeof self=="object"&&self)||_(typeof Hl=="object"&&Hl)||function(){return this}()||Function("return this")()},"./node_modules/core-js/internals/has.js":function(d,_,p){var E=p("./node_modules/core-js/internals/to-object.js"),w={}.hasOwnProperty;d.exports=Object.hasOwn||function(Q,k){return w.call(E(Q),k)}},"./node_modules/core-js/internals/hidden-keys.js":function(d){d.exports={}},"./node_modules/core-js/internals/html.js":function(d,_,p){var E=p("./node_modules/core-js/internals/get-built-in.js");d.exports=E("document","documentElement")},"./node_modules/core-js/internals/ie8-dom-define.js":function(d,_,p){var E=p("./node_modules/core-js/internals/descriptors.js"),w=p("./node_modules/core-js/internals/fails.js"),x=p("./node_modules/core-js/internals/document-create-element.js");d.exports=!E&&!w(function(){return Object.defineProperty(x("div"),"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/internals/indexed-object.js":function(d,_,p){var E=p("./node_modules/core-js/internals/fails.js"),w=p("./node_modules/core-js/internals/classof-raw.js"),x="".split;d.exports=E(function(){return!Object("z").propertyIsEnumerable(0)})?function(Q){return w(Q)=="String"?x.call(Q,""):Object(Q)}:Object},"./node_modules/core-js/internals/inherit-if-required.js":function(d,_,p){var E=p("./node_modules/core-js/internals/is-object.js"),w=p("./node_modules/core-js/internals/object-set-prototype-of.js");d.exports=function(x,Q,k){var R,P;return w&&typeof(R=Q.constructor)=="function"&&R!==k&&E(P=R.prototype)&&P!==k.prototype&&w(x,P),x}},"./node_modules/core-js/internals/inspect-source.js":function(d,_,p){var E=p("./node_modules/core-js/internals/shared-store.js"),w=Function.toString;typeof E.inspectSource!="function"&&(E.inspectSource=function(x){return w.call(x)}),d.exports=E.inspectSource},"./node_modules/core-js/internals/internal-state.js":function(d,_,p){var E=p("./node_modules/core-js/internals/native-weak-map.js"),w=p("./node_modules/core-js/internals/global.js"),x=p("./node_modules/core-js/internals/is-object.js"),Q=p("./node_modules/core-js/internals/create-non-enumerable-property.js"),k=p("./node_modules/core-js/internals/has.js"),R=p("./node_modules/core-js/internals/shared-store.js"),P=p("./node_modules/core-js/internals/shared-key.js"),O=p("./node_modules/core-js/internals/hidden-keys.js"),G="Object already initialized",V=w.WeakMap,Z,te,ce,he=function(Re){return ce(Re)?te(Re):Z(Re,{})},Ce=function(Re){return function(_e){var He;if(!x(_e)||(He=te(_e)).type!==Re)throw TypeError("Incompatible receiver, "+Re+" required");return He}};if(E||R.state){var fe=R.state||(R.state=new V),ee=fe.get,re=fe.has,be=fe.set;Z=function(Re,_e){if(re.call(fe,Re))throw new TypeError(G);return _e.facade=Re,be.call(fe,Re,_e),_e},te=function(Re){return ee.call(fe,Re)||{}},ce=function(Re){return re.call(fe,Re)}}else{var me=P("state");O[me]=!0,Z=function(Re,_e){if(k(Re,me))throw new TypeError(G);return _e.facade=Re,Q(Re,me,_e),_e},te=function(Re){return k(Re,me)?Re[me]:{}},ce=function(Re){return k(Re,me)}}d.exports={set:Z,get:te,has:ce,enforce:he,getterFor:Ce}},"./node_modules/core-js/internals/is-array.js":function(d,_,p){var E=p("./node_modules/core-js/internals/classof-raw.js");d.exports=Array.isArray||function(x){return E(x)=="Array"}},"./node_modules/core-js/internals/is-forced.js":function(d,_,p){var E=p("./node_modules/core-js/internals/fails.js"),w=/#|\.prototype\./,x=function(O,G){var V=k[Q(O)];return V==P?!0:V==R?!1:typeof G=="function"?E(G):!!G},Q=x.normalize=function(O){return String(O).replace(w,".").toLowerCase()},k=x.data={},R=x.NATIVE="N",P=x.POLYFILL="P";d.exports=x},"./node_modules/core-js/internals/is-object.js":function(d){d.exports=function(_){return typeof _=="object"?_!==null:typeof _=="function"}},"./node_modules/core-js/internals/is-pure.js":function(d){d.exports=!1},"./node_modules/core-js/internals/is-symbol.js":function(d,_,p){var E=p("./node_modules/core-js/internals/get-built-in.js"),w=p("./node_modules/core-js/internals/use-symbol-as-uid.js");d.exports=w?function(x){return typeof x=="symbol"}:function(x){var Q=E("Symbol");return typeof Q=="function"&&Object(x)instanceof Q}},"./node_modules/core-js/internals/iterators-core.js":function(d,_,p){var E=p("./node_modules/core-js/internals/fails.js"),w=p("./node_modules/core-js/internals/object-get-prototype-of.js"),x=p("./node_modules/core-js/internals/create-non-enumerable-property.js"),Q=p("./node_modules/core-js/internals/has.js"),k=p("./node_modules/core-js/internals/well-known-symbol.js"),R=p("./node_modules/core-js/internals/is-pure.js"),P=k("iterator"),O=!1,G=function(){return this},V,Z,te;[].keys&&(te=[].keys(),"next"in te?(Z=w(w(te)),Z!==Object.prototype&&(V=Z)):O=!0);var ce=V==null||E(function(){var he={};return V[P].call(he)!==he});ce&&(V={}),(!R||ce)&&!Q(V,P)&&x(V,P,G),d.exports={IteratorPrototype:V,BUGGY_SAFARI_ITERATORS:O}},"./node_modules/core-js/internals/iterators.js":function(d){d.exports={}},"./node_modules/core-js/internals/native-symbol.js":function(d,_,p){var E=p("./node_modules/core-js/internals/engine-v8-version.js"),w=p("./node_modules/core-js/internals/fails.js");d.exports=!!Object.getOwnPropertySymbols&&!w(function(){var x=Symbol();return!String(x)||!(Object(x)instanceof Symbol)||!Symbol.sham&&E&&E<41})},"./node_modules/core-js/internals/native-weak-map.js":function(d,_,p){var E=p("./node_modules/core-js/internals/global.js"),w=p("./node_modules/core-js/internals/inspect-source.js"),x=E.WeakMap;d.exports=typeof x=="function"&&/native code/.test(w(x))},"./node_modules/core-js/internals/object-assign.js":function(d,_,p){var E=p("./node_modules/core-js/internals/descriptors.js"),w=p("./node_modules/core-js/internals/fails.js"),x=p("./node_modules/core-js/internals/object-keys.js"),Q=p("./node_modules/core-js/internals/object-get-own-property-symbols.js"),k=p("./node_modules/core-js/internals/object-property-is-enumerable.js"),R=p("./node_modules/core-js/internals/to-object.js"),P=p("./node_modules/core-js/internals/indexed-object.js"),O=Object.assign,G=Object.defineProperty;d.exports=!O||w(function(){if(E&&O({b:1},O(G({},"a",{enumerable:!0,get:function(){G(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var V={},Z={},te=Symbol(),ce="abcdefghijklmnopqrst";return V[te]=7,ce.split("").forEach(function(he){Z[he]=he}),O({},V)[te]!=7||x(O({},Z)).join("")!=ce})?function(Z,te){for(var ce=R(Z),he=arguments.length,Ce=1,fe=Q.f,ee=k.f;he>Ce;)for(var re=P(arguments[Ce++]),be=fe?x(re).concat(fe(re)):x(re),me=be.length,Re=0,_e;me>Re;)_e=be[Re++],(!E||ee.call(re,_e))&&(ce[_e]=re[_e]);return ce}:O},"./node_modules/core-js/internals/object-create.js":function(d,_,p){var E=p("./node_modules/core-js/internals/an-object.js"),w=p("./node_modules/core-js/internals/object-define-properties.js"),x=p("./node_modules/core-js/internals/enum-bug-keys.js"),Q=p("./node_modules/core-js/internals/hidden-keys.js"),k=p("./node_modules/core-js/internals/html.js"),R=p("./node_modules/core-js/internals/document-create-element.js"),P=p("./node_modules/core-js/internals/shared-key.js"),O=">",G="<",V="prototype",Z="script",te=P("IE_PROTO"),ce=function(){},he=function(be){return G+Z+O+be+G+"/"+Z+O},Ce=function(be){be.write(he("")),be.close();var me=be.parentWindow.Object;return be=null,me},fe=function(){var be=R("iframe"),me="java"+Z+":",Re;if(be.style)return be.style.display="none",k.appendChild(be),be.src=String(me),Re=be.contentWindow.document,Re.open(),Re.write(he("document.F=Object")),Re.close(),Re.F},ee,re=function(){try{ee=new ActiveXObject("htmlfile")}catch{}re=document.domain&&ee?Ce(ee):fe()||Ce(ee);for(var be=x.length;be--;)delete re[V][x[be]];return re()};Q[te]=!0,d.exports=Object.create||function(me,Re){var _e;return me!==null?(ce[V]=E(me),_e=new ce,ce[V]=null,_e[te]=me):_e=re(),Re===void 0?_e:w(_e,Re)}},"./node_modules/core-js/internals/object-define-properties.js":function(d,_,p){var E=p("./node_modules/core-js/internals/descriptors.js"),w=p("./node_modules/core-js/internals/object-define-property.js"),x=p("./node_modules/core-js/internals/an-object.js"),Q=p("./node_modules/core-js/internals/object-keys.js");d.exports=E?Object.defineProperties:function(R,P){x(R);for(var O=Q(P),G=O.length,V=0,Z;G>V;)w.f(R,Z=O[V++],P[Z]);return R}},"./node_modules/core-js/internals/object-define-property.js":function(d,_,p){var E=p("./node_modules/core-js/internals/descriptors.js"),w=p("./node_modules/core-js/internals/ie8-dom-define.js"),x=p("./node_modules/core-js/internals/an-object.js"),Q=p("./node_modules/core-js/internals/to-property-key.js"),k=Object.defineProperty;_.f=E?k:function(P,O,G){if(x(P),O=Q(O),x(G),w)try{return k(P,O,G)}catch{}if("get"in G||"set"in G)throw TypeError("Accessors not supported");return"value"in G&&(P[O]=G.value),P}},"./node_modules/core-js/internals/object-get-own-property-descriptor.js":function(d,_,p){var E=p("./node_modules/core-js/internals/descriptors.js"),w=p("./node_modules/core-js/internals/object-property-is-enumerable.js"),x=p("./node_modules/core-js/internals/create-property-descriptor.js"),Q=p("./node_modules/core-js/internals/to-indexed-object.js"),k=p("./node_modules/core-js/internals/to-property-key.js"),R=p("./node_modules/core-js/internals/has.js"),P=p("./node_modules/core-js/internals/ie8-dom-define.js"),O=Object.getOwnPropertyDescriptor;_.f=E?O:function(V,Z){if(V=Q(V),Z=k(Z),P)try{return O(V,Z)}catch{}if(R(V,Z))return x(!w.f.call(V,Z),V[Z])}},"./node_modules/core-js/internals/object-get-own-property-names-external.js":function(d,_,p){var E=p("./node_modules/core-js/internals/to-indexed-object.js"),w=p("./node_modules/core-js/internals/object-get-own-property-names.js").f,x={}.toString,Q=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],k=function(R){try{return w(R)}catch{return Q.slice()}};d.exports.f=function(P){return Q&&x.call(P)=="[object Window]"?k(P):w(E(P))}},"./node_modules/core-js/internals/object-get-own-property-names.js":function(d,_,p){var E=p("./node_modules/core-js/internals/object-keys-internal.js"),w=p("./node_modules/core-js/internals/enum-bug-keys.js"),x=w.concat("length","prototype");_.f=Object.getOwnPropertyNames||function(k){return E(k,x)}},"./node_modules/core-js/internals/object-get-own-property-symbols.js":function(d,_){_.f=Object.getOwnPropertySymbols},"./node_modules/core-js/internals/object-get-prototype-of.js":function(d,_,p){var E=p("./node_modules/core-js/internals/has.js"),w=p("./node_modules/core-js/internals/to-object.js"),x=p("./node_modules/core-js/internals/shared-key.js"),Q=p("./node_modules/core-js/internals/correct-prototype-getter.js"),k=x("IE_PROTO"),R=Object.prototype;d.exports=Q?Object.getPrototypeOf:function(P){return P=w(P),E(P,k)?P[k]:typeof P.constructor=="function"&&P instanceof P.constructor?P.constructor.prototype:P instanceof Object?R:null}},"./node_modules/core-js/internals/object-keys-internal.js":function(d,_,p){var E=p("./node_modules/core-js/internals/has.js"),w=p("./node_modules/core-js/internals/to-indexed-object.js"),x=p("./node_modules/core-js/internals/array-includes.js").indexOf,Q=p("./node_modules/core-js/internals/hidden-keys.js");d.exports=function(k,R){var P=w(k),O=0,G=[],V;for(V in P)!E(Q,V)&&E(P,V)&&G.push(V);for(;R.length>O;)E(P,V=R[O++])&&(~x(G,V)||G.push(V));return G}},"./node_modules/core-js/internals/object-keys.js":function(d,_,p){var E=p("./node_modules/core-js/internals/object-keys-internal.js"),w=p("./node_modules/core-js/internals/enum-bug-keys.js");d.exports=Object.keys||function(Q){return E(Q,w)}},"./node_modules/core-js/internals/object-property-is-enumerable.js":function(d,_){var p={}.propertyIsEnumerable,E=Object.getOwnPropertyDescriptor,w=E&&!p.call({1:2},1);_.f=w?function(Q){var k=E(this,Q);return!!k&&k.enumerable}:p},"./node_modules/core-js/internals/object-set-prototype-of.js":function(d,_,p){var E=p("./node_modules/core-js/internals/an-object.js"),w=p("./node_modules/core-js/internals/a-possible-prototype.js");d.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var x=!1,Q={},k;try{k=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,k.call(Q,[]),x=Q instanceof Array}catch{}return function(P,O){return E(P),w(O),x?k.call(P,O):P.__proto__=O,P}}():void 0)},"./node_modules/core-js/internals/object-to-string.js":function(d,_,p){var E=p("./node_modules/core-js/internals/to-string-tag-support.js"),w=p("./node_modules/core-js/internals/classof.js");d.exports=E?{}.toString:function(){return"[object "+w(this)+"]"}},"./node_modules/core-js/internals/ordinary-to-primitive.js":function(d,_,p){var E=p("./node_modules/core-js/internals/is-object.js");d.exports=function(w,x){var Q,k;if(x==="string"&&typeof(Q=w.toString)=="function"&&!E(k=Q.call(w))||typeof(Q=w.valueOf)=="function"&&!E(k=Q.call(w))||x!=="string"&&typeof(Q=w.toString)=="function"&&!E(k=Q.call(w)))return k;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/internals/own-keys.js":function(d,_,p){var E=p("./node_modules/core-js/internals/get-built-in.js"),w=p("./node_modules/core-js/internals/object-get-own-property-names.js"),x=p("./node_modules/core-js/internals/object-get-own-property-symbols.js"),Q=p("./node_modules/core-js/internals/an-object.js");d.exports=E("Reflect","ownKeys")||function(R){var P=w.f(Q(R)),O=x.f;return O?P.concat(O(R)):P}},"./node_modules/core-js/internals/path.js":function(d,_,p){var E=p("./node_modules/core-js/internals/global.js");d.exports=E},"./node_modules/core-js/internals/redefine.js":function(d,_,p){var E=p("./node_modules/core-js/internals/global.js"),w=p("./node_modules/core-js/internals/create-non-enumerable-property.js"),x=p("./node_modules/core-js/internals/has.js"),Q=p("./node_modules/core-js/internals/set-global.js"),k=p("./node_modules/core-js/internals/inspect-source.js"),R=p("./node_modules/core-js/internals/internal-state.js"),P=R.get,O=R.enforce,G=String(String).split("String");(d.exports=function(V,Z,te,ce){var he=ce?!!ce.unsafe:!1,Ce=ce?!!ce.enumerable:!1,fe=ce?!!ce.noTargetGet:!1,ee;if(typeof te=="function"&&(typeof Z=="string"&&!x(te,"name")&&w(te,"name",Z),ee=O(te),ee.source||(ee.source=G.join(typeof Z=="string"?Z:""))),V===E){Ce?V[Z]=te:Q(Z,te);return}else he?!fe&&V[Z]&&(Ce=!0):delete V[Z];Ce?V[Z]=te:w(V,Z,te)})(Function.prototype,"toString",function(){return typeof this=="function"&&P(this).source||k(this)})},"./node_modules/core-js/internals/regexp-flags.js":function(d,_,p){var E=p("./node_modules/core-js/internals/an-object.js");d.exports=function(){var w=E(this),x="";return w.global&&(x+="g"),w.ignoreCase&&(x+="i"),w.multiline&&(x+="m"),w.dotAll&&(x+="s"),w.unicode&&(x+="u"),w.sticky&&(x+="y"),x}},"./node_modules/core-js/internals/require-object-coercible.js":function(d){d.exports=function(_){if(_==null)throw TypeError("Can't call method on "+_);return _}},"./node_modules/core-js/internals/set-global.js":function(d,_,p){var E=p("./node_modules/core-js/internals/global.js");d.exports=function(w,x){try{Object.defineProperty(E,w,{value:x,configurable:!0,writable:!0})}catch{E[w]=x}return x}},"./node_modules/core-js/internals/set-to-string-tag.js":function(d,_,p){var E=p("./node_modules/core-js/internals/object-define-property.js").f,w=p("./node_modules/core-js/internals/has.js"),x=p("./node_modules/core-js/internals/well-known-symbol.js"),Q=x("toStringTag");d.exports=function(k,R,P){k&&!w(k=P?k:k.prototype,Q)&&E(k,Q,{configurable:!0,value:R})}},"./node_modules/core-js/internals/shared-key.js":function(d,_,p){var E=p("./node_modules/core-js/internals/shared.js"),w=p("./node_modules/core-js/internals/uid.js"),x=E("keys");d.exports=function(Q){return x[Q]||(x[Q]=w(Q))}},"./node_modules/core-js/internals/shared-store.js":function(d,_,p){var E=p("./node_modules/core-js/internals/global.js"),w=p("./node_modules/core-js/internals/set-global.js"),x="__core-js_shared__",Q=E[x]||w(x,{});d.exports=Q},"./node_modules/core-js/internals/shared.js":function(d,_,p){var E=p("./node_modules/core-js/internals/is-pure.js"),w=p("./node_modules/core-js/internals/shared-store.js");(d.exports=function(x,Q){return w[x]||(w[x]=Q!==void 0?Q:{})})("versions",[]).push({version:"3.16.0",mode:E?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},"./node_modules/core-js/internals/string-html-forced.js":function(d,_,p){var E=p("./node_modules/core-js/internals/fails.js");d.exports=function(w){return E(function(){var x=""[w]('"');return x!==x.toLowerCase()||x.split('"').length>3})}},"./node_modules/core-js/internals/string-multibyte.js":function(d,_,p){var E=p("./node_modules/core-js/internals/to-integer.js"),w=p("./node_modules/core-js/internals/to-string.js"),x=p("./node_modules/core-js/internals/require-object-coercible.js"),Q=function(k){return function(R,P){var O=w(x(R)),G=E(P),V=O.length,Z,te;return G<0||G>=V?k?"":void 0:(Z=O.charCodeAt(G),Z<55296||Z>56319||G+1===V||(te=O.charCodeAt(G+1))<56320||te>57343?k?O.charAt(G):Z:k?O.slice(G,G+2):(Z-55296<<10)+(te-56320)+65536)}};d.exports={codeAt:Q(!1),charAt:Q(!0)}},"./node_modules/core-js/internals/string-trim.js":function(d,_,p){var E=p("./node_modules/core-js/internals/require-object-coercible.js"),w=p("./node_modules/core-js/internals/to-string.js"),x=p("./node_modules/core-js/internals/whitespaces.js"),Q="["+x+"]",k=RegExp("^"+Q+Q+"*"),R=RegExp(Q+Q+"*$"),P=function(O){return function(G){var V=w(E(G));return O&1&&(V=V.replace(k,"")),O&2&&(V=V.replace(R,"")),V}};d.exports={start:P(1),end:P(2),trim:P(3)}},"./node_modules/core-js/internals/to-absolute-index.js":function(d,_,p){var E=p("./node_modules/core-js/internals/to-integer.js"),w=Math.max,x=Math.min;d.exports=function(Q,k){var R=E(Q);return R<0?w(R+k,0):x(R,k)}},"./node_modules/core-js/internals/to-indexed-object.js":function(d,_,p){var E=p("./node_modules/core-js/internals/indexed-object.js"),w=p("./node_modules/core-js/internals/require-object-coercible.js");d.exports=function(x){return E(w(x))}},"./node_modules/core-js/internals/to-integer.js":function(d){var _=Math.ceil,p=Math.floor;d.exports=function(E){return isNaN(E=+E)?0:(E>0?p:_)(E)}},"./node_modules/core-js/internals/to-length.js":function(d,_,p){var E=p("./node_modules/core-js/internals/to-integer.js"),w=Math.min;d.exports=function(x){return x>0?w(E(x),9007199254740991):0}},"./node_modules/core-js/internals/to-object.js":function(d,_,p){var E=p("./node_modules/core-js/internals/require-object-coercible.js");d.exports=function(w){return Object(E(w))}},"./node_modules/core-js/internals/to-primitive.js":function(d,_,p){var E=p("./node_modules/core-js/internals/is-object.js"),w=p("./node_modules/core-js/internals/is-symbol.js"),x=p("./node_modules/core-js/internals/ordinary-to-primitive.js"),Q=p("./node_modules/core-js/internals/well-known-symbol.js"),k=Q("toPrimitive");d.exports=function(R,P){if(!E(R)||w(R))return R;var O=R[k],G;if(O!==void 0){if(P===void 0&&(P="default"),G=O.call(R,P),!E(G)||w(G))return G;throw TypeError("Can't convert object to primitive value")}return P===void 0&&(P="number"),x(R,P)}},"./node_modules/core-js/internals/to-property-key.js":function(d,_,p){var E=p("./node_modules/core-js/internals/to-primitive.js"),w=p("./node_modules/core-js/internals/is-symbol.js");d.exports=function(x){var Q=E(x,"string");return w(Q)?Q:String(Q)}},"./node_modules/core-js/internals/to-string-tag-support.js":function(d,_,p){var E=p("./node_modules/core-js/internals/well-known-symbol.js"),w=E("toStringTag"),x={};x[w]="z",d.exports=String(x)==="[object z]"},"./node_modules/core-js/internals/to-string.js":function(d,_,p){var E=p("./node_modules/core-js/internals/is-symbol.js");d.exports=function(w){if(E(w))throw TypeError("Cannot convert a Symbol value to a string");return String(w)}},"./node_modules/core-js/internals/uid.js":function(d){var _=0,p=Math.random();d.exports=function(E){return"Symbol("+String(E===void 0?"":E)+")_"+(++_+p).toString(36)}},"./node_modules/core-js/internals/use-symbol-as-uid.js":function(d,_,p){var E=p("./node_modules/core-js/internals/native-symbol.js");d.exports=E&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},"./node_modules/core-js/internals/well-known-symbol-wrapped.js":function(d,_,p){var E=p("./node_modules/core-js/internals/well-known-symbol.js");_.f=E},"./node_modules/core-js/internals/well-known-symbol.js":function(d,_,p){var E=p("./node_modules/core-js/internals/global.js"),w=p("./node_modules/core-js/internals/shared.js"),x=p("./node_modules/core-js/internals/has.js"),Q=p("./node_modules/core-js/internals/uid.js"),k=p("./node_modules/core-js/internals/native-symbol.js"),R=p("./node_modules/core-js/internals/use-symbol-as-uid.js"),P=w("wks"),O=E.Symbol,G=R?O:O&&O.withoutSetter||Q;d.exports=function(V){return(!x(P,V)||!(k||typeof P[V]=="string"))&&(k&&x(O,V)?P[V]=O[V]:P[V]=G("Symbol."+V)),P[V]}},"./node_modules/core-js/internals/whitespaces.js":function(d){d.exports=`	
\v\f\r                　\u2028\u2029\uFEFF`},"./node_modules/core-js/modules/es.array.concat.js":function(d,_,p){var E=p("./node_modules/core-js/internals/export.js"),w=p("./node_modules/core-js/internals/fails.js"),x=p("./node_modules/core-js/internals/is-array.js"),Q=p("./node_modules/core-js/internals/is-object.js"),k=p("./node_modules/core-js/internals/to-object.js"),R=p("./node_modules/core-js/internals/to-length.js"),P=p("./node_modules/core-js/internals/create-property.js"),O=p("./node_modules/core-js/internals/array-species-create.js"),G=p("./node_modules/core-js/internals/array-method-has-species-support.js"),V=p("./node_modules/core-js/internals/well-known-symbol.js"),Z=p("./node_modules/core-js/internals/engine-v8-version.js"),te=V("isConcatSpreadable"),ce=9007199254740991,he="Maximum allowed index exceeded",Ce=Z>=51||!w(function(){var be=[];return be[te]=!1,be.concat()[0]!==be}),fe=G("concat"),ee=function(be){if(!Q(be))return!1;var me=be[te];return me!==void 0?!!me:x(be)},re=!Ce||!fe;E({target:"Array",proto:!0,forced:re},{concat:function(me){var Re=k(this),_e=O(Re,0),He=0,Le,Je,ke,kt,ie;for(Le=-1,ke=arguments.length;Le<ke;Le++)if(ie=Le===-1?Re:arguments[Le],ee(ie)){if(kt=R(ie.length),He+kt>ce)throw TypeError(he);for(Je=0;Je<kt;Je++,He++)Je in ie&&P(_e,He,ie[Je])}else{if(He>=ce)throw TypeError(he);P(_e,He++,ie)}return _e.length=He,_e}})},"./node_modules/core-js/modules/es.array.iterator.js":function(d,_,p){var E=p("./node_modules/core-js/internals/to-indexed-object.js"),w=p("./node_modules/core-js/internals/add-to-unscopables.js"),x=p("./node_modules/core-js/internals/iterators.js"),Q=p("./node_modules/core-js/internals/internal-state.js"),k=p("./node_modules/core-js/internals/define-iterator.js"),R="Array Iterator",P=Q.set,O=Q.getterFor(R);d.exports=k(Array,"Array",function(G,V){P(this,{type:R,target:E(G),index:0,kind:V})},function(){var G=O(this),V=G.target,Z=G.kind,te=G.index++;return!V||te>=V.length?(G.target=void 0,{value:void 0,done:!0}):Z=="keys"?{value:te,done:!1}:Z=="values"?{value:V[te],done:!1}:{value:[te,V[te]],done:!1}},"values"),x.Arguments=x.Array,w("keys"),w("values"),w("entries")},"./node_modules/core-js/modules/es.array.join.js":function(d,_,p){var E=p("./node_modules/core-js/internals/export.js"),w=p("./node_modules/core-js/internals/indexed-object.js"),x=p("./node_modules/core-js/internals/to-indexed-object.js"),Q=p("./node_modules/core-js/internals/array-method-is-strict.js"),k=[].join,R=w!=Object,P=Q("join",",");E({target:"Array",proto:!0,forced:R||!P},{join:function(G){return k.call(x(this),G===void 0?",":G)}})},"./node_modules/core-js/modules/es.array.map.js":function(d,_,p){var E=p("./node_modules/core-js/internals/export.js"),w=p("./node_modules/core-js/internals/array-iteration.js").map,x=p("./node_modules/core-js/internals/array-method-has-species-support.js"),Q=x("map");E({target:"Array",proto:!0,forced:!Q},{map:function(R){return w(this,R,arguments.length>1?arguments[1]:void 0)}})},"./node_modules/core-js/modules/es.array.slice.js":function(d,_,p){var E=p("./node_modules/core-js/internals/export.js"),w=p("./node_modules/core-js/internals/is-object.js"),x=p("./node_modules/core-js/internals/is-array.js"),Q=p("./node_modules/core-js/internals/to-absolute-index.js"),k=p("./node_modules/core-js/internals/to-length.js"),R=p("./node_modules/core-js/internals/to-indexed-object.js"),P=p("./node_modules/core-js/internals/create-property.js"),O=p("./node_modules/core-js/internals/well-known-symbol.js"),G=p("./node_modules/core-js/internals/array-method-has-species-support.js"),V=G("slice"),Z=O("species"),te=[].slice,ce=Math.max;E({target:"Array",proto:!0,forced:!V},{slice:function(Ce,fe){var ee=R(this),re=k(ee.length),be=Q(Ce,re),me=Q(fe===void 0?re:fe,re),Re,_e,He;if(x(ee)&&(Re=ee.constructor,typeof Re=="function"&&(Re===Array||x(Re.prototype))?Re=void 0:w(Re)&&(Re=Re[Z],Re===null&&(Re=void 0)),Re===Array||Re===void 0))return te.call(ee,be,me);for(_e=new(Re===void 0?Array:Re)(ce(me-be,0)),He=0;be<me;be++,He++)be in ee&&P(_e,He,ee[be]);return _e.length=He,_e}})},"./node_modules/core-js/modules/es.function.name.js":function(d,_,p){var E=p("./node_modules/core-js/internals/descriptors.js"),w=p("./node_modules/core-js/internals/object-define-property.js").f,x=Function.prototype,Q=x.toString,k=/^\s*function ([^ (]*)/,R="name";E&&!(R in x)&&w(x,R,{configurable:!0,get:function(){try{return Q.call(this).match(k)[1]}catch{return""}}})},"./node_modules/core-js/modules/es.number.constructor.js":function(d,_,p){var E=p("./node_modules/core-js/internals/descriptors.js"),w=p("./node_modules/core-js/internals/global.js"),x=p("./node_modules/core-js/internals/is-forced.js"),Q=p("./node_modules/core-js/internals/redefine.js"),k=p("./node_modules/core-js/internals/has.js"),R=p("./node_modules/core-js/internals/classof-raw.js"),P=p("./node_modules/core-js/internals/inherit-if-required.js"),O=p("./node_modules/core-js/internals/is-symbol.js"),G=p("./node_modules/core-js/internals/to-primitive.js"),V=p("./node_modules/core-js/internals/fails.js"),Z=p("./node_modules/core-js/internals/object-create.js"),te=p("./node_modules/core-js/internals/object-get-own-property-names.js").f,ce=p("./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,he=p("./node_modules/core-js/internals/object-define-property.js").f,Ce=p("./node_modules/core-js/internals/string-trim.js").trim,fe="Number",ee=w[fe],re=ee.prototype,be=R(Z(re))==fe,me=function(Je){if(O(Je))throw TypeError("Cannot convert a Symbol value to a number");var ke=G(Je,"number"),kt,ie,Se,Qe,Ke,ot,dt,Bt;if(typeof ke=="string"&&ke.length>2){if(ke=Ce(ke),kt=ke.charCodeAt(0),kt===43||kt===45){if(ie=ke.charCodeAt(2),ie===88||ie===120)return NaN}else if(kt===48){switch(ke.charCodeAt(1)){case 66:case 98:Se=2,Qe=49;break;case 79:case 111:Se=8,Qe=55;break;default:return+ke}for(Ke=ke.slice(2),ot=Ke.length,dt=0;dt<ot;dt++)if(Bt=Ke.charCodeAt(dt),Bt<48||Bt>Qe)return NaN;return parseInt(Ke,Se)}}return+ke};if(x(fe,!ee(" 0o1")||!ee("0b1")||ee("+0x1"))){for(var Re=function(ke){var kt=arguments.length<1?0:ke,ie=this;return ie instanceof Re&&(be?V(function(){re.valueOf.call(ie)}):R(ie)!=fe)?P(new ee(me(kt)),ie,Re):me(kt)},_e=E?te(ee):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),He=0,Le;_e.length>He;He++)k(ee,Le=_e[He])&&!k(Re,Le)&&he(Re,Le,ce(ee,Le));Re.prototype=re,re.constructor=Re,Q(w,fe,Re)}},"./node_modules/core-js/modules/es.object.assign.js":function(d,_,p){var E=p("./node_modules/core-js/internals/export.js"),w=p("./node_modules/core-js/internals/object-assign.js");E({target:"Object",stat:!0,forced:Object.assign!==w},{assign:w})},"./node_modules/core-js/modules/es.object.keys.js":function(d,_,p){var E=p("./node_modules/core-js/internals/export.js"),w=p("./node_modules/core-js/internals/to-object.js"),x=p("./node_modules/core-js/internals/object-keys.js"),Q=p("./node_modules/core-js/internals/fails.js"),k=Q(function(){x(1)});E({target:"Object",stat:!0,forced:k},{keys:function(P){return x(w(P))}})},"./node_modules/core-js/modules/es.object.to-string.js":function(d,_,p){var E=p("./node_modules/core-js/internals/to-string-tag-support.js"),w=p("./node_modules/core-js/internals/redefine.js"),x=p("./node_modules/core-js/internals/object-to-string.js");E||w(Object.prototype,"toString",x,{unsafe:!0})},"./node_modules/core-js/modules/es.regexp.to-string.js":function(d,_,p){var E=p("./node_modules/core-js/internals/redefine.js"),w=p("./node_modules/core-js/internals/an-object.js"),x=p("./node_modules/core-js/internals/to-string.js"),Q=p("./node_modules/core-js/internals/fails.js"),k=p("./node_modules/core-js/internals/regexp-flags.js"),R="toString",P=RegExp.prototype,O=P[R],G=Q(function(){return O.call({source:"a",flags:"b"})!="/a/b"}),V=O.name!=R;(G||V)&&E(RegExp.prototype,R,function(){var te=w(this),ce=x(te.source),he=te.flags,Ce=x(he===void 0&&te instanceof RegExp&&!("flags"in P)?k.call(te):he);return"/"+ce+"/"+Ce},{unsafe:!0})},"./node_modules/core-js/modules/es.string.iterator.js":function(d,_,p){var E=p("./node_modules/core-js/internals/string-multibyte.js").charAt,w=p("./node_modules/core-js/internals/to-string.js"),x=p("./node_modules/core-js/internals/internal-state.js"),Q=p("./node_modules/core-js/internals/define-iterator.js"),k="String Iterator",R=x.set,P=x.getterFor(k);Q(String,"String",function(O){R(this,{type:k,string:w(O),index:0})},function(){var G=P(this),V=G.string,Z=G.index,te;return Z>=V.length?{value:void 0,done:!0}:(te=E(V,Z),G.index+=te.length,{value:te,done:!1})})},"./node_modules/core-js/modules/es.string.link.js":function(d,_,p){var E=p("./node_modules/core-js/internals/export.js"),w=p("./node_modules/core-js/internals/create-html.js"),x=p("./node_modules/core-js/internals/string-html-forced.js");E({target:"String",proto:!0,forced:x("link")},{link:function(k){return w(this,"a","href",k)}})},"./node_modules/core-js/modules/es.symbol.description.js":function(d,_,p){var E=p("./node_modules/core-js/internals/export.js"),w=p("./node_modules/core-js/internals/descriptors.js"),x=p("./node_modules/core-js/internals/global.js"),Q=p("./node_modules/core-js/internals/has.js"),k=p("./node_modules/core-js/internals/is-object.js"),R=p("./node_modules/core-js/internals/object-define-property.js").f,P=p("./node_modules/core-js/internals/copy-constructor-properties.js"),O=x.Symbol;if(w&&typeof O=="function"&&(!("description"in O.prototype)||O().description!==void 0)){var G={},V=function(){var fe=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),ee=this instanceof V?new O(fe):fe===void 0?O():O(fe);return fe===""&&(G[ee]=!0),ee};P(V,O);var Z=V.prototype=O.prototype;Z.constructor=V;var te=Z.toString,ce=String(O("test"))=="Symbol(test)",he=/^Symbol\((.*)\)[^)]+$/;R(Z,"description",{configurable:!0,get:function(){var fe=k(this)?this.valueOf():this,ee=te.call(fe);if(Q(G,fe))return"";var re=ce?ee.slice(7,-1):ee.replace(he,"$1");return re===""?void 0:re}}),E({global:!0,forced:!0},{Symbol:V})}},"./node_modules/core-js/modules/es.symbol.iterator.js":function(d,_,p){var E=p("./node_modules/core-js/internals/define-well-known-symbol.js");E("iterator")},"./node_modules/core-js/modules/es.symbol.js":function(d,_,p){var E=p("./node_modules/core-js/internals/export.js"),w=p("./node_modules/core-js/internals/global.js"),x=p("./node_modules/core-js/internals/get-built-in.js"),Q=p("./node_modules/core-js/internals/is-pure.js"),k=p("./node_modules/core-js/internals/descriptors.js"),R=p("./node_modules/core-js/internals/native-symbol.js"),P=p("./node_modules/core-js/internals/fails.js"),O=p("./node_modules/core-js/internals/has.js"),G=p("./node_modules/core-js/internals/is-array.js"),V=p("./node_modules/core-js/internals/is-object.js"),Z=p("./node_modules/core-js/internals/is-symbol.js"),te=p("./node_modules/core-js/internals/an-object.js"),ce=p("./node_modules/core-js/internals/to-object.js"),he=p("./node_modules/core-js/internals/to-indexed-object.js"),Ce=p("./node_modules/core-js/internals/to-property-key.js"),fe=p("./node_modules/core-js/internals/to-string.js"),ee=p("./node_modules/core-js/internals/create-property-descriptor.js"),re=p("./node_modules/core-js/internals/object-create.js"),be=p("./node_modules/core-js/internals/object-keys.js"),me=p("./node_modules/core-js/internals/object-get-own-property-names.js"),Re=p("./node_modules/core-js/internals/object-get-own-property-names-external.js"),_e=p("./node_modules/core-js/internals/object-get-own-property-symbols.js"),He=p("./node_modules/core-js/internals/object-get-own-property-descriptor.js"),Le=p("./node_modules/core-js/internals/object-define-property.js"),Je=p("./node_modules/core-js/internals/object-property-is-enumerable.js"),ke=p("./node_modules/core-js/internals/create-non-enumerable-property.js"),kt=p("./node_modules/core-js/internals/redefine.js"),ie=p("./node_modules/core-js/internals/shared.js"),Se=p("./node_modules/core-js/internals/shared-key.js"),Qe=p("./node_modules/core-js/internals/hidden-keys.js"),Ke=p("./node_modules/core-js/internals/uid.js"),ot=p("./node_modules/core-js/internals/well-known-symbol.js"),dt=p("./node_modules/core-js/internals/well-known-symbol-wrapped.js"),Bt=p("./node_modules/core-js/internals/define-well-known-symbol.js"),Ge=p("./node_modules/core-js/internals/set-to-string-tag.js"),rt=p("./node_modules/core-js/internals/internal-state.js"),Qt=p("./node_modules/core-js/internals/array-iteration.js").forEach,ht=Se("hidden"),Nt="Symbol",gr="prototype",Pt=ot("toPrimitive"),ze=rt.set,yr=rt.getterFor(Nt),sr=Object[gr],Ht=w.Symbol,pr=x("JSON","stringify"),Br=He.f,vr=Le.f,Gr=Re.f,rr=Je.f,xr=ie("symbols"),Zr=ie("op-symbols"),pn=ie("string-to-symbol-registry"),vt=ie("symbol-to-string-registry"),at=ie("wks"),bt=w.QObject,Ct=!bt||!bt[gr]||!bt[gr].findChild,jt=k&&P(function(){return re(vr({},"a",{get:function(){return vr(this,"a",{value:7}).a}})).a!=7})?function(br,Cr,cr){var Kr=Br(sr,Cr);Kr&&delete sr[Cr],vr(br,Cr,cr),Kr&&br!==sr&&vr(sr,Cr,Kr)}:vr,er=function(br,Cr){var cr=xr[br]=re(Ht[gr]);return ze(cr,{type:Nt,tag:br,description:Cr}),k||(cr.description=Cr),cr},Vr=function(Cr,cr,Kr){Cr===sr&&Vr(Zr,cr,Kr),te(Cr);var hn=Ce(cr);return te(Kr),O(xr,hn)?(Kr.enumerable?(O(Cr,ht)&&Cr[ht][hn]&&(Cr[ht][hn]=!1),Kr=re(Kr,{enumerable:ee(0,!1)})):(O(Cr,ht)||vr(Cr,ht,ee(1,{})),Cr[ht][hn]=!0),jt(Cr,hn,Kr)):vr(Cr,hn,Kr)},Sr=function(Cr,cr){te(Cr);var Kr=he(cr),hn=be(Kr).concat(wn(Kr));return Qt(hn,function(xn){(!k||lr.call(Kr,xn))&&Vr(Cr,xn,Kr[xn])}),Cr},un=function(Cr,cr){return cr===void 0?re(Cr):Sr(re(Cr),cr)},lr=function(Cr){var cr=Ce(Cr),Kr=rr.call(this,cr);return this===sr&&O(xr,cr)&&!O(Zr,cr)?!1:Kr||!O(this,cr)||!O(xr,cr)||O(this,ht)&&this[ht][cr]?Kr:!0},Er=function(Cr,cr){var Kr=he(Cr),hn=Ce(cr);if(!(Kr===sr&&O(xr,hn)&&!O(Zr,hn))){var xn=Br(Kr,hn);return xn&&O(xr,hn)&&!(O(Kr,ht)&&Kr[ht][hn])&&(xn.enumerable=!0),xn}},An=function(Cr){var cr=Gr(he(Cr)),Kr=[];return Qt(cr,function(hn){!O(xr,hn)&&!O(Qe,hn)&&Kr.push(hn)}),Kr},wn=function(Cr){var cr=Cr===sr,Kr=Gr(cr?Zr:he(Cr)),hn=[];return Qt(Kr,function(xn){O(xr,xn)&&(!cr||O(sr,xn))&&hn.push(xr[xn])}),hn};if(R||(Ht=function(){if(this instanceof Ht)throw TypeError("Symbol is not a constructor");var Cr=!arguments.length||arguments[0]===void 0?void 0:fe(arguments[0]),cr=Ke(Cr),Kr=function(hn){this===sr&&Kr.call(Zr,hn),O(this,ht)&&O(this[ht],cr)&&(this[ht][cr]=!1),jt(this,cr,ee(1,hn))};return k&&Ct&&jt(sr,cr,{configurable:!0,set:Kr}),er(cr,Cr)},kt(Ht[gr],"toString",function(){return yr(this).tag}),kt(Ht,"withoutSetter",function(br){return er(Ke(br),br)}),Je.f=lr,Le.f=Vr,He.f=Er,me.f=Re.f=An,_e.f=wn,dt.f=function(br){return er(ot(br),br)},k&&(vr(Ht[gr],"description",{configurable:!0,get:function(){return yr(this).description}}),Q||kt(sr,"propertyIsEnumerable",lr,{unsafe:!0}))),E({global:!0,wrap:!0,forced:!R,sham:!R},{Symbol:Ht}),Qt(be(at),function(br){Bt(br)}),E({target:Nt,stat:!0,forced:!R},{for:function(br){var Cr=fe(br);if(O(pn,Cr))return pn[Cr];var cr=Ht(Cr);return pn[Cr]=cr,vt[cr]=Cr,cr},keyFor:function(Cr){if(!Z(Cr))throw TypeError(Cr+" is not a symbol");if(O(vt,Cr))return vt[Cr]},useSetter:function(){Ct=!0},useSimple:function(){Ct=!1}}),E({target:"Object",stat:!0,forced:!R,sham:!k},{create:un,defineProperty:Vr,defineProperties:Sr,getOwnPropertyDescriptor:Er}),E({target:"Object",stat:!0,forced:!R},{getOwnPropertyNames:An,getOwnPropertySymbols:wn}),E({target:"Object",stat:!0,forced:P(function(){_e.f(1)})},{getOwnPropertySymbols:function(Cr){return _e.f(ce(Cr))}}),pr){var _i=!R||P(function(){var br=Ht();return pr([br])!="[null]"||pr({a:br})!="{}"||pr(Object(br))!="{}"});E({target:"JSON",stat:!0,forced:_i},{stringify:function(Cr,cr,Kr){for(var hn=[Cr],xn=1,Sn;arguments.length>xn;)hn.push(arguments[xn++]);if(Sn=cr,!(!V(cr)&&Cr===void 0||Z(Cr)))return G(cr)||(cr=function(ji,tn){if(typeof Sn=="function"&&(tn=Sn.call(this,ji,tn)),!Z(tn))return tn}),hn[1]=cr,pr.apply(null,hn)}})}Ht[gr][Pt]||ke(Ht[gr],Pt,Ht[gr].valueOf),Ge(Ht,Nt),Qe[ht]=!0},"./node_modules/core-js/modules/web.dom-collections.for-each.js":function(d,_,p){var E=p("./node_modules/core-js/internals/global.js"),w=p("./node_modules/core-js/internals/dom-iterables.js"),x=p("./node_modules/core-js/internals/array-for-each.js"),Q=p("./node_modules/core-js/internals/create-non-enumerable-property.js");for(var k in w){var R=E[k],P=R&&R.prototype;if(P&&P.forEach!==x)try{Q(P,"forEach",x)}catch{P.forEach=x}}},"./node_modules/core-js/modules/web.dom-collections.iterator.js":function(d,_,p){var E=p("./node_modules/core-js/internals/global.js"),w=p("./node_modules/core-js/internals/dom-iterables.js"),x=p("./node_modules/core-js/modules/es.array.iterator.js"),Q=p("./node_modules/core-js/internals/create-non-enumerable-property.js"),k=p("./node_modules/core-js/internals/well-known-symbol.js"),R=k("iterator"),P=k("toStringTag"),O=x.values;for(var G in w){var V=E[G],Z=V&&V.prototype;if(Z){if(Z[R]!==O)try{Q(Z,R,O)}catch{Z[R]=O}if(Z[P]||Q(Z,P,G),w[G]){for(var te in x)if(Z[te]!==x[te])try{Q(Z,te,x[te])}catch{Z[te]=x[te]}}}}},"./node_modules/es6-promise/dist/es6-promise.js":function(d){/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */(function(_,p){d.exports=p()})(this,function(){function _(bt){var Ct=typeof bt;return bt!==null&&(Ct==="object"||Ct==="function")}function p(bt){return typeof bt=="function"}var E=void 0;Array.isArray?E=Array.isArray:E=function(bt){return Object.prototype.toString.call(bt)==="[object Array]"};var w=E,x=0,Q=void 0,k=void 0,R=function(Ct,jt){be[x]=Ct,be[x+1]=jt,x+=2,x===2&&(k?k(me):_e())};function P(bt){k=bt}function O(bt){R=bt}var G=typeof window<"u"?window:void 0,V=G||{},Z=V.MutationObserver||V.WebKitMutationObserver,te=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",ce=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function he(){return function(){return process.nextTick(me)}}function Ce(){return typeof Q<"u"?function(){Q(me)}:re()}function fe(){var bt=0,Ct=new Z(me),jt=document.createTextNode("");return Ct.observe(jt,{characterData:!0}),function(){jt.data=bt=++bt%2}}function ee(){var bt=new MessageChannel;return bt.port1.onmessage=me,function(){return bt.port2.postMessage(0)}}function re(){var bt=setTimeout;return function(){return bt(me,1)}}var be=new Array(1e3);function me(){for(var bt=0;bt<x;bt+=2){var Ct=be[bt],jt=be[bt+1];Ct(jt),be[bt]=void 0,be[bt+1]=void 0}x=0}function Re(){try{var bt=Function("return this")().require("vertx");return Q=bt.runOnLoop||bt.runOnContext,Ce()}catch{return re()}}var _e=void 0;te?_e=he():Z?_e=fe():ce?_e=ee():G===void 0?_e=Re():_e=re();function He(bt,Ct){var jt=this,er=new this.constructor(ke);er[Je]===void 0&&pr(er);var Vr=jt._state;if(Vr){var Sr=arguments[Vr-1];R(function(){return ze(Vr,er,Sr,jt._result)})}else gr(jt,er,bt,Ct);return er}function Le(bt){var Ct=this;if(bt&&typeof bt=="object"&&bt.constructor===Ct)return bt;var jt=new Ct(ke);return rt(jt,bt),jt}var Je=Math.random().toString(36).substring(2);function ke(){}var kt=void 0,ie=1,Se=2;function Qe(){return new TypeError("You cannot resolve a promise with itself")}function Ke(){return new TypeError("A promises callback cannot return that same promise.")}function ot(bt,Ct,jt,er){try{bt.call(Ct,jt,er)}catch(Vr){return Vr}}function dt(bt,Ct,jt){R(function(er){var Vr=!1,Sr=ot(jt,Ct,function(un){Vr||(Vr=!0,Ct!==un?rt(er,un):ht(er,un))},function(un){Vr||(Vr=!0,Nt(er,un))},"Settle: "+(er._label||" unknown promise"));!Vr&&Sr&&(Vr=!0,Nt(er,Sr))},bt)}function Bt(bt,Ct){Ct._state===ie?ht(bt,Ct._result):Ct._state===Se?Nt(bt,Ct._result):gr(Ct,void 0,function(jt){return rt(bt,jt)},function(jt){return Nt(bt,jt)})}function Ge(bt,Ct,jt){Ct.constructor===bt.constructor&&jt===He&&Ct.constructor.resolve===Le?Bt(bt,Ct):jt===void 0?ht(bt,Ct):p(jt)?dt(bt,Ct,jt):ht(bt,Ct)}function rt(bt,Ct){if(bt===Ct)Nt(bt,Qe());else if(_(Ct)){var jt=void 0;try{jt=Ct.then}catch(er){Nt(bt,er);return}Ge(bt,Ct,jt)}else ht(bt,Ct)}function Qt(bt){bt._onerror&&bt._onerror(bt._result),Pt(bt)}function ht(bt,Ct){bt._state===kt&&(bt._result=Ct,bt._state=ie,bt._subscribers.length!==0&&R(Pt,bt))}function Nt(bt,Ct){bt._state===kt&&(bt._state=Se,bt._result=Ct,R(Qt,bt))}function gr(bt,Ct,jt,er){var Vr=bt._subscribers,Sr=Vr.length;bt._onerror=null,Vr[Sr]=Ct,Vr[Sr+ie]=jt,Vr[Sr+Se]=er,Sr===0&&bt._state&&R(Pt,bt)}function Pt(bt){var Ct=bt._subscribers,jt=bt._state;if(Ct.length!==0){for(var er=void 0,Vr=void 0,Sr=bt._result,un=0;un<Ct.length;un+=3)er=Ct[un],Vr=Ct[un+jt],er?ze(jt,er,Vr,Sr):Vr(Sr);bt._subscribers.length=0}}function ze(bt,Ct,jt,er){var Vr=p(jt),Sr=void 0,un=void 0,lr=!0;if(Vr){try{Sr=jt(er)}catch(Er){lr=!1,un=Er}if(Ct===Sr){Nt(Ct,Ke());return}}else Sr=er;Ct._state!==kt||(Vr&&lr?rt(Ct,Sr):lr===!1?Nt(Ct,un):bt===ie?ht(Ct,Sr):bt===Se&&Nt(Ct,Sr))}function yr(bt,Ct){try{Ct(function(er){rt(bt,er)},function(er){Nt(bt,er)})}catch(jt){Nt(bt,jt)}}var sr=0;function Ht(){return sr++}function pr(bt){bt[Je]=sr++,bt._state=void 0,bt._result=void 0,bt._subscribers=[]}function Br(){return new Error("Array Methods must be provided an Array")}var vr=function(){function bt(Ct,jt){this._instanceConstructor=Ct,this.promise=new Ct(ke),this.promise[Je]||pr(this.promise),w(jt)?(this.length=jt.length,this._remaining=jt.length,this._result=new Array(this.length),this.length===0?ht(this.promise,this._result):(this.length=this.length||0,this._enumerate(jt),this._remaining===0&&ht(this.promise,this._result))):Nt(this.promise,Br())}return bt.prototype._enumerate=function(jt){for(var er=0;this._state===kt&&er<jt.length;er++)this._eachEntry(jt[er],er)},bt.prototype._eachEntry=function(jt,er){var Vr=this._instanceConstructor,Sr=Vr.resolve;if(Sr===Le){var un=void 0,lr=void 0,Er=!1;try{un=jt.then}catch(wn){Er=!0,lr=wn}if(un===He&&jt._state!==kt)this._settledAt(jt._state,er,jt._result);else if(typeof un!="function")this._remaining--,this._result[er]=jt;else if(Vr===vt){var An=new Vr(ke);Er?Nt(An,lr):Ge(An,jt,un),this._willSettleAt(An,er)}else this._willSettleAt(new Vr(function(wn){return wn(jt)}),er)}else this._willSettleAt(Sr(jt),er)},bt.prototype._settledAt=function(jt,er,Vr){var Sr=this.promise;Sr._state===kt&&(this._remaining--,jt===Se?Nt(Sr,Vr):this._result[er]=Vr),this._remaining===0&&ht(Sr,this._result)},bt.prototype._willSettleAt=function(jt,er){var Vr=this;gr(jt,void 0,function(Sr){return Vr._settledAt(ie,er,Sr)},function(Sr){return Vr._settledAt(Se,er,Sr)})},bt}();function Gr(bt){return new vr(this,bt).promise}function rr(bt){var Ct=this;return w(bt)?new Ct(function(jt,er){for(var Vr=bt.length,Sr=0;Sr<Vr;Sr++)Ct.resolve(bt[Sr]).then(jt,er)}):new Ct(function(jt,er){return er(new TypeError("You must pass an array to race."))})}function xr(bt){var Ct=this,jt=new Ct(ke);return Nt(jt,bt),jt}function Zr(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function pn(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var vt=function(){function bt(Ct){this[Je]=Ht(),this._result=this._state=void 0,this._subscribers=[],ke!==Ct&&(typeof Ct!="function"&&Zr(),this instanceof bt?yr(this,Ct):pn())}return bt.prototype.catch=function(jt){return this.then(null,jt)},bt.prototype.finally=function(jt){var er=this,Vr=er.constructor;return p(jt)?er.then(function(Sr){return Vr.resolve(jt()).then(function(){return Sr})},function(Sr){return Vr.resolve(jt()).then(function(){throw Sr})}):er.then(jt,jt)},bt}();vt.prototype.then=He,vt.all=Gr,vt.race=rr,vt.resolve=Le,vt.reject=xr,vt._setScheduler=P,vt._setAsap=O,vt._asap=R;function at(){var bt=void 0;if(typeof Hl<"u")bt=Hl;else if(typeof self<"u")bt=self;else try{bt=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var Ct=bt.Promise;if(Ct){var jt=null;try{jt=Object.prototype.toString.call(Ct.resolve())}catch{}if(jt==="[object Promise]"&&!Ct.cast)return}bt.Promise=vt}return vt.polyfill=at,vt.Promise=vt,vt})},html2canvas:function(d){d.exports=s},jspdf:function(d){d.exports=r}},c={};function h(d){var _=c[d];if(_!==void 0)return _.exports;var p=c[d]={exports:{}};return l[d].call(p.exports,p,p.exports,h),p.exports}(function(){h.n=function(d){var _=d&&d.__esModule?function(){return d.default}:function(){return d};return h.d(_,{a:_}),_}})(),function(){h.d=function(d,_){for(var p in _)h.o(_,p)&&!h.o(d,p)&&Object.defineProperty(d,p,{enumerable:!0,get:_[p]})}}(),function(){h.o=function(d,_){return Object.prototype.hasOwnProperty.call(d,_)}}(),function(){h.r=function(d){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(d,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(d,"__esModule",{value:!0})}}();var a={};return function(){/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/h.r(a);var d=h("./src/worker.js");h("./src/plugin/jspdf-plugin.js"),h("./src/plugin/pagebreaks.js"),h("./src/plugin/hyperlinks.js");var _=function p(E,w){var x=new p.Worker(w);return E?x.from(E).save():x};_.Worker=d.default,a.default=_}(),a=a.default,a}()})})(CF);const TS=e=>({parishname:e&1}),Vy=e=>({parishname:e[0]});function US(e){let t,r,s,l,c,h,a,d,_,p,E,w,x,Q,k,R,P,O,G,V,Z,te,ce,he,Ce,fe,ee,re,be,me,Re,_e,He;const Le=e[6].default,Je=wA(Le,e,e[5],Vy);return Q=new z1({props:{parishTitle:e[3]}}),P=new wF({props:{items:e[1],parishname:e[2]}}),ce=new z1({props:{parishTitle:e[3]}}),fe=new BF({props:{items:e[1],parishname:e[2]}}),me=new ov({}),{c(){t=Lt("div"),Je&&Je.c(),r=$t(),s=Lt("div"),l=Lt("div"),c=Lt("a"),c.textContent="Louisiana Locked Up: A Problem in Every Parish",h=Fr(`
      / `),a=Fr(e[2]),d=Fr(`
      Parish`),_=$t(),p=Lt("div"),E=Lt("h1"),E.textContent=`${e[2]} Parish`,w=$t(),x=Lt("section"),mr(Q.$$.fragment),k=$t(),R=Lt("section"),mr(P.$$.fragment),O=$t(),G=Lt("div"),V=Lt("h1"),V.textContent=`${e[2]} Parish`,Z=$t(),te=Lt("section"),mr(ce.$$.fragment),he=$t(),Ce=Lt("section"),mr(fe.$$.fragment),ee=$t(),re=Lt("div"),be=Lt("section"),mr(me.$$.fragment),ue(c,"href","#parishes"),ue(c,"class","jumpto"),ue(l,"id","breadcrumb"),ue(l,"class","svelte-4i2o49"),ue(s,"id","parish_header"),ue(s,"class","svelte-4i2o49"),ue(E,"class","parish__title svelte-4i2o49"),ue(x,"class","top svelte-4i2o49"),ue(R,"class","tabs"),ue(R,"data-html2canvas-ignore","true"),ue(p,"id","parish__container"),ue(p,"class","svelte-4i2o49"),ue(V,"class","parish__title_pdf svelte-4i2o49"),ue(te,"class","top svelte-4i2o49"),ue(Ce,"id","pdf-content"),ue(Ce,"class","alltabs svelte-4i2o49"),ue(G,"id","parish__container__pdf"),ue(G,"class","svelte-4i2o49"),ue(be,"class","about_data"),ue(re,"id","parish_footer"),ue(re,"class","svelte-4i2o49"),ue(t,"id","center"),ue(t,"class","svelte-4i2o49")},m(ke,kt){st(ke,t,kt),Je&&Je.m(t,null),it(t,r),it(t,s),it(s,l),it(l,c),it(l,h),it(l,a),it(l,d),it(t,_),it(t,p),it(p,E),it(p,w),it(p,x),fr(Q,x,null),it(p,k),it(p,R),fr(P,R,null),it(t,O),it(t,G),it(G,V),it(G,Z),it(G,te),fr(ce,te,null),it(G,he),it(G,Ce),fr(fe,Ce,null),it(t,ee),it(t,re),it(re,be),fr(me,be,null),Re=!0,_e||(He=es(c,"click",e[4]),_e=!0)},p(ke,[kt]){Je&&Je.p&&(!Re||kt&33)&&xA(Je,Le,ke,ke[5],Re?bA(Le,ke[5],kt,TS):BA(ke[5]),Vy);const ie={};kt&2&&(ie.items=ke[1]),P.$set(ie);const Se={};kt&2&&(Se.items=ke[1]),fe.$set(Se)},i(ke){Re||(Tt(Je,ke),Tt(Q.$$.fragment,ke),Tt(P.$$.fragment,ke),Tt(ce.$$.fragment,ke),Tt(fe.$$.fragment,ke),Tt(me.$$.fragment,ke),Re=!0)},o(ke){Kt(Je,ke),Kt(Q.$$.fragment,ke),Kt(P.$$.fragment,ke),Kt(ce.$$.fragment,ke),Kt(fe.$$.fragment,ke),Kt(me.$$.fragment,ke),Re=!1},d(ke){ke&&nt(t),Je&&Je.d(ke),dr(Q),dr(P),dr(ce),dr(fe),dr(me),_e=!1,He()}}}function LS(e,t,r){let{$$slots:s={},$$scope:l}=t;$h();let{params:c}=t;const h=async()=>{};let a=c.id,d=[],_=a,p=[];Wa(async()=>{window.scrollTo(0,0),h(),d=(await(await fetch("https://vera-insights-data-viz.s3.amazonaws.com/california/california.json")).json()).features,d.filter(Q=>Q.properties.NAME_condensed===a),a=="Catahoula"||a=="Iberia"?r(1,p=[{label:"Jail and Prisons",value:1,component:ry},{label:"Pretrial",value:3,component:cy},{label:"Budget",value:4,component:uy}]):r(1,p=[{label:"Jail and Prisons",value:1,component:ry},{label:"Arrests",value:2,component:yF},{label:"Pretrial",value:3,component:cy},{label:"Budget",value:4,component:uy}])});function E(){dl("/louisiana-locked-up/"),window.scrollTo({bottom:0,behavior:"smooth"})}return e.$$set=w=>{"params"in w&&r(0,c=w.params),"$$scope"in w&&r(5,l=w.$$scope)},[c,p,a,_,E,l,s]}class kS extends ii{constructor(t){super(),ni(this,t,LS,US,ti,{params:0})}}function QS(e){let t;return{c(){t=Lt("div"),t.innerHTML=`<div id="breadcrumb"><a href="/louisiana-locked-up/">Louisiana Locked Up: A Problem in Every Parish</a> / About the Data</div> 
  <h1 class="svelte-ep3o1">About the Data</h1> 
  <p>Vera collected data for Louisiana’s prisons, jails, and juvenile justice
    facilities using information published on state and local government
    websites and the U.S. Bureau of Justice Statistics 2019 Census of Jails.
    Pretrial population data was collected from reports prepared by the
    Louisiana Department of Public Safety &amp; Corrections. Prison admission data
    was collected from the Louisiana Department of Public Safety &amp; Corrections
    Briefing Book. Arrest data was collected from the FBI Uniform Crime Report
    accessed via Vera’s Arrest Trends. Budget data was collected from the U.S.
    Census Annual Survey of Public Employment &amp; Payroll.</p> 
  <section><h2 class="svelte-ep3o1">Jails</h2> 
    <p>Vera compiled data for Louisiana’s jails using information obtained from
      the U.S. Bureau of Justice Statistics <a href="https://doi.org/10.3886/ICPSR38323.v1" target="_blank">Census of Jails (2019)</a>
      and the DPS&amp;C
      <a href="https://doc.louisiana.gov/about-the-dpsc/facility-locations/" target="_blank">facilities directory</a>, which includes directly operated state prisons as well as the many
      “local facilities” (jails) the department uses to hold people that have
      received a state prison sentence. Vera used information from Incarceration
      Transparency to identify facilities that were not included in the
      aforementioned sources. Memos on the
      <a href="https://www.incarcerationtransparency.org/" target="_blank">Incarceration Transparency</a>
      website (e.g.,
      <a href="https://www.incarcerationtransparency.org/wp-content/uploads/2022/01/Claiborne-Parish-Detention-Center-Memo.pdf" target="_blank">Claiborne Parish</a>) were helpful to discern the number of facilities in a parish and
      details about their capacity and operators.</p> 
    <p>Discrepancies between these lists required follow-up research (e.g.,
      review of government agency websites, news articles, and phone calls to
      jails) to determine a facility’s current operator, capacity, address, and
      whether it operates a Transitional Work Program (TWP). For example, some
      municipal jails were not reported in the Census of Jails but were included
      in research on the Incarceration Transparency website (e.g., Westlake City
      Jail). Consequently, Vera contacted every city police department included
      in a <a href="http://www.lsp.org/links_city.html" target="_blank">directory</a> published by the Louisiana State Police to discern whether they operated
      a jail and, if so, the capacity and location of the facility.</p> 
    <p>Vera counted each facility as distinct if it had its own address. Vera
      gathered information on the capacity for correctional facilities from the
      <a href="https://lclelsac.com/wp-content/uploads/2022/04/2021-SSLCFPR-Report.pdf" target="_blank">2021 Status of State and Local Corrections Facilities and Program
        Report (SSLCFPR)</a>, which was prepared by the Louisiana Commission on Law Enforcement and
      Administration of Criminal Justice. Vera researchers used facility
      directories on the
      <a href="https://lasallecorrections.com/locations/" target="_blank">La Salle Corrections</a>
      and
      <a href="https://www.geogroup.com/Locations" target="_blank">GEO Group</a>
      websites to identify the facilities operated by these companies.</p> 
    <p>Discerning which facilities currently operate a TWP required extensive
      research because of errors in the DPS&amp;C facility directory and
      inconsistencies between the department’s most recent reports (the <a href="https://s32082.pcdn.co/wp-content/uploads/2022/06/Catalog-of-Rehabiltation-Program-2021.pdf" target="_blank">2021 Catalog of Rehabilitative Programs</a>
      and the
      <a href="https:/lclelsac.com/wp-content/uploads/2022/04/2021-SSLCFPR-Report.pdf" target="_blank">2021 Status of State and Local Corrections Facilities and Program
        Report</a>). In instances of conflicting information, Vera researchers called
      parish sheriffs to confirm whether they operate a TWP program.</p> 
    <p>Vera estimated the revenue DPS&amp;C paid to local facilities in 2021 by
      multiplying the number of people held for DPS&amp;C in November 20201, per the
      DPS&amp;C <a href="https://jlcb.legis.la.gov/Docs/2021/dec/December%202021%20RTC%20Act%20119%20of%202021%20Corrections.pdf" target="_blank">Report of the Offender Census at Local Correctional Facilities</a>, by the daily rate of $26.39 ($9,632 annually). Vera estimated revenue
      DPS&amp;C paid to local facilities for people in the TWP by multiplying this
      population in November 2021 by the daily rate of $11.25 ($4,160 annually).
      According to the December 10, 2021 DPS&amp;C report to the Joint Legislative
      Committee on the Budget, $12.25 is paid to contracted TWP providers who
      fill the available beds first with TWP participants. The other providers
      are paid a per diem of $16.39 because they do not have a contract with
      Corrections that guarantees the department will place TWP offenders with
      their program first. Vera used the lesser of these two rates because the
      researchers did not know the nature of each contract.</p> 
    <p>Vera obtained information on the U.S. Immigration and Customs Enforcement
      (ICE) population held in jails from archived copies of the agency’s
      <a href="https://www.ice.gov/detain/detention-management" target="_blank">Detention Statistics</a>
      because the DPS&amp;C
      <a href="https://jlcb.legis.la.gov/Docs/2021/dec/December%202021%20RTC%20Act%20119%20of%202021%20Corrections.pdf" target="_blank">report of the Offender Census at Local Correctional Facilities</a>
      does not include ICE statistics for the facilities that are operated by GEO
      Group under contracts with ICE. Vera computed the ICE Average Daily Population
      for the period December 4, 2021 – December 18, 2021 to estimate the ICE population
      at approximately the same time as the rest of the jail population for the parish.</p></section> 
  <section><h2 class="svelte-ep3o1">Pretrial population</h2> 
    <p>Vera collected 2021 parish-level pretrial jail population data from the
      DPS&amp;C <a href="https://jlcb.legis.la.gov/Docs/2021/dec/December%202021%20RTC%20Act%20119%20of%202021%20Corrections.pdf" target="_blank">report of the Offender Census at Local Correctional Facilities</a>. DPS&amp;C supplied these reports in memorandum to the
      <a href="https://jlcb.legis.la.gov/default_Archives2021" target="_blank">Joint Legislative Committee on the Budget (JLCB)</a> because DPS&amp;C pays local jails to hold more than half the state’s prison
      population. The report includes the operational capacity of each “local facility”
      (jail) and provides the number of people the jail holds for DPS&amp;C, the DPS&amp;C
      Transitional Work Program, U.S. Immigration and Customs Enforcement (ICE),
      “Federal Offenders” (the U.S. Marshals and Bureau of Prisons), as well as the
      number of people held “pretrial” and in “Parish” custody (meaning a jail sentence).</p> 

    <p>Pretrial data for 58 of the 64 parishes is as of November 26, 2021, which
      Vera obtained from a December 10, 2021, <a href="https://jlcb.legis.la.gov/Docs/2021/dec/December%202021%20RTC%20Act%20119%20of%202021%20Corrections.pdf" target="_blank">memo</a> to the JLCB. Vera collected data from earlier reports in 2021 for six parishes
      that did not supply pretrial data in the November report: Allen Parish (April
      2021), Cameron Parish (July 2021), Jackson Parish (May 2021), Richland Parish
      (July 2021), St. Mary Parish (July 2021), and Terrebonne Parish (July 2021).
      Although Richland and St. Mary reported November 2021 data, the pretrial populations
      in this report (four and three, respectively) were conspicuously low compared
      to values in July (21 and 127, respectively), so Vera instead used pretrial
      data from July 2021.</p> 

    <p>Nine parishes (Acadia, Beauregard, Caldwell, De Soto, Morehouse,
      Plaquemines, Pointe Coupee, Sabine, and St. Landry) indicated that their
      pretrial population was “0” in the data they supplied to DPS&amp;C in all
      their 2021 reports. This is not plausible given the number of people these
      same parishes sentenced to prison annually, and this information also
      conflicts with the pretrial population data these parishes reported in the
      last <a href="https://www.icpsr.umich.edu/web/NACJD/studies/38323/versions/V1" target="_blank">Census of Jails (2019)</a>
      conducted by the U.S. Bureau of Justice Statistics (BJS). These same parishes,
      however, reported to DPS&amp;C a sizable number of people held for the “parish”
      (i.e., jail sentences) that is consistent with the pretrial population they
      supplied to BJS in 2019. As some jail management data systems do not record
      an individual person’s sentence status, Vera assumed that these jails indicated
      all people as “parish” because it would be time consuming to make the distinction
      between Pretrial and Parish (locally sentenced) in their monthly reports to
      DPS&amp;C. For these counties, Vera assumed that 90 percent of the people denoted
      as being in parish custody were actually being held pretrial. Vera made this
      assumption because 90 percent of people, statewide, held by a local authority
      are in pretrial status according to the
      <a href="https://jlcb.legis.la.gov/Docs/2021/dec/December%202021%20RTC%20Act%20119%20of%202021%20Corrections.pdf" target="_blank">report of the Offender Census at Local Correctional Facilities</a>.</p> 

    <p>Vera accessed parish-level jail population data for the years prior to
      2020 from the BJS Census of Jails, via Vera’s Incarceration Trends
      dataset. The Census of Jails, unlike the 2021 DPS&amp;C report of the Offender
      Census at Local Correctional Facilities, does not differentiate people
      held for ICE and the United States Marshall Service (USMS) from the
      pretrial population, which jails generally include in their counts of the
      “unconvicted” (i.e., pretrial) population to BJS. Consequently,
      differences between the 2021 pretrial population and prior years may be
      partly on account of this definitional difference in the parishes that
      hold people for ICE and USMS. Note also that the pretrial population data
      is a single-day count, which was November 26, 2021, in the DPS&amp;C data and
      the last weekday in June in the Census of Jails data. Jail populations
      fluctuate daily and year-over-year differences could be an artifact of
      measuring the population on a single day.</p></section> 
  <section><h2 class="svelte-ep3o1">Prisons</h2> 
    <p>Vera sourced data on the location of state prisons from the DPS&amp;C <a href="https://doc.louisiana.gov/about-the-dpsc/facility-locations/" target="_blank">online facility directory</a>
      and the Louisiana Commission on Law Enforcement
      <a href="https://lclelsac.com/wp-content/uploads/2022/04/2021-SSLCFPR-Report.pdf" target="_blank">2021 Status of State and Local Corrections Facilities and Program
        Report</a>. Vera sourced information on state prison capacity from the BJS
      <a href="https://www.icpsr.umich.edu/web/NACJD/studies/38325/versions/V2" target="_blank">Census of State and Federal Adult Correctional Facilities (2019)</a>. Vera sourced data on facilities operated by the U.S. Bureau of Prisons
      from the bureau’s
      <a href="https://www.bop.gov/locations/list.jsp" target="_blank">website</a>.</p></section> 
  <section><h2 class="svelte-ep3o1">Prison admissions</h2> 
    <p>Vera collected parish-level prison admission data for <a href="https://s32082.pcdn.co/wp-content/uploads/2021/06/Jan-21-Full-bb.pdf" target="_blank">2019</a>,
      <a href="https://s32082.pcdn.co/wp-content/uploads/2021/10/0m-Full-Briefing-Book.pdf" target="_blank">2020</a>, and
      <a href="https://s32082.pcdn.co/wp-content/uploads/2022/09/0m-Full-Briefing-Book-July-2022-Website.pdf" target="_blank">2021</a>
      from the DPS&amp;C Briefing Book. Vera collected parish-level prison admission
      data for 1992 through 2014 from the BJS National Corrections Reporting Program
      (NCRP), accessed via Vera’s
      <a href="https://github.com/vera-institute/incarceration-trends" target="_blank">Incarceration Trends Dataset</a>.</p></section> 
  <section><h2 class="svelte-ep3o1">Juvenile justice facilities</h2> 
    <p>Vera researchers compiled information for juvenile detention centers
      (i.e., “youth jails”) using data from city and parish websites. There are
      five <a href="https://ojj.la.gov/about-ojj/administrative-functions/ojj-secure-care-facilities/" target="_blank">secure care</a>
      residential facilities (i.e., “youth prisons”) for males in the custody of
      the Louisiana Office of Juvenile Justice (OJJ). Females in OJJ custody are
      housed at Ware Youth Center, which operates under a contract with OJJ. There
      are 18 non-secure residential facilities for youth who have been adjudicated.
      These residential facilities comprise group homes, transitional living programs,
      emergency shelters, and family homes. Vera compiled information for these facilities
      through various OJJ reports, including
      <a href="https://ojj.la.gov/policies-systems/federal-laws/prea/ojj-prea-resourcesreports/" target="_blank">Prison Rape Elimination Act (PREA) Annual Reports</a>, Contract Facility Audit Reports,
      <a href="https://ojj.la.gov/wp-content/uploads/2018/10/MonitoringEffectivenessofCommunityBased-ServicesFY2017.pdf" target="_blank">Monitoring Effectiveness of Community-Based Services</a>, and
      <a href="https://ojj.la.gov/wp-content/uploads/2018/01/Act499TrendReportFY2017_-finalforwebsite-1.pdf" target="_blank">Annual Report of Youth Served.</a></p> 

    <p>Vera compiled juvenile facility capacity information from PREA reports and
      through email and phone calls to facilities. Vera verified all facility
      information through a <a href="https://webapps.dcfs.la.gov/carefacility/facility/list?parish=&amp;d-3991717-p=1" target="_blank">list of licensed</a> facilities from the Louisiana Department of Children and Family Services,
      which holds licensing authority over Louisiana juvenile facilities.</p></section> 
  <section><h2 class="svelte-ep3o1">Arrests</h2> 
    <p>Arrest data comes from the FBI Uniform Crime Report (2018) accessed via
      Vera’s <a href="https://arresttrends.vera.org/" target="_blank">Arrest Trends</a>. Vera researchers calculated arrest rates using population data from the
      U.S. Census Bureau’s
      <a href="https://data.census.gov/table?g=0400000US22$1600000&amp;y=2020&amp;d=DEC+Redistricting+Data+(PL+94-171)" target="_blank">2020 Decennial Census</a>, which provides city-level demographic data, and the Census Bureau’s
      <a href="https://www.census.gov/data/tables/time-series/demo/popest/2010s-counties-detail.html" target="_blank">County Characteristics Resident Population Estimates</a> (July 1, 2019), which provides parish-level demographic data.</p></section> 
  <section><h2 class="svelte-ep3o1">Spending</h2> 
    <p>Vera collected data on parish- and municipal-government spending from the
      U.S. Census Bureau’s <a href="https://www.census.gov/programs-surveys/apes.html" target="_blank">Annual Survey of Public Employment &amp; Payroll</a>. Vera collected 2021 data when it was available and 2017 data when 2021
      data was not available. (Vera adjusted the data to 2021 dollars using
      Consumer Price Index for all Urban Consumers data from the
      <a href="https://www.bls.gov/regions/new-england/data/consumerpriceindex_us_table.htm" target="_blank">Bureau of Labor Statistics</a> of the United States Department of Labor.) Payroll amounts represent gross
      payroll for the one-month period of March in the survey year. Gross payroll
      includes all salaries, wages, fees, commissions, bonuses, or awards. Vera researchers
      multiplied total payroll amounts by 12 to determine payroll for a one-year
      period. Payroll expenses comprise the majority, but not all, of government
      expenses and excludes costs such as supplies, materials, and contracted services.
      However, the payroll provides a representation of the allocation of budget
      resources across government functions (e.g., human services, parks, police,
      corrections, etc.).</p></section> 
  <section><h2 class="svelte-ep3o1">Demographic Data</h2> 
    <p>Demographic data to compute parish per-capita incarceration rates comes
      from Vera’s <a href="https://github.com/vera-institute/incarceration-trends">Incarceration Trends Project (ITP)</a>. The demographic data used in ITP comes from the National Cancer
      Institute’s (NCI)
      <a href="https://seer.cancer.gov/popdata/download.html" target="_blank">U.S. County Population Data, 1969-2020</a>. The source of NCI’s data is the Centers for Disease Control and
      Prevention’s (CDC) Bridged-Race Population Estimates, 1990-2020. Vera used
      population data for 2020 to compute incarceration rates for the period
      since 2020.</p> 

    <p>Vera calculated incarceration rates using parish population data from the
      U.S. census, and these rates are expressed per 10,000 parish residents.
      Although incarceration rates are conventionally expressed per 100,000,
      Vera computed parish rates per 10,000 to make these statistics more
      legible in the 50 parishes that have fewer than 100,000 residents.</p></section> 
  <section><h2 class="svelte-ep3o1">Geographic Data</h2> 
    <p>Vera collected data for the footprints of Louisiana’s historical
      plantations from an <a href="https://www.loc.gov/item/2006629768/">1853 map</a>
      of Louisiana by John La Tourrette. Vera researchers downloaded the digital
      image as a TIFF file and adjusted the image levels, contrast, and tone to aid
      in the clear identification of plots of land. The researchers then pulled the
      image into QGIS’s Georeferencer and identified 29 ground control points (GCPs).
      The researchers took the control points from a geojson file of Louisiana’s
      state outline. Vera then applied a transformation model—using the Polynomial
      2 transformation type and the Nearest Neighbor resampling method—to the points
      in order to warp the image to fit the
      <a href="https://epsg.io/4269" target="_blank">EPSG:4269</a> coordinate reference
      system (CRS). The researchers then created a new vector layer with the geometry
      type set to polygon, with the specified CRS set to EPSG:4269, and created polygons
      for each plantation on the La Tourrette map. The researchers added a unique
      identifier as an attribute to each polygon and included the landowner as another
      attribute when noted (and legible). Researchers double checked the plots against
      the georeferenced map and validated all geometries.</p> 

    <p>Vera derived the Orleans Parish buildings from a shapefile of <a href="https://archive.nyu.edu/handle/2451/43840" target="_blank">New Orleans building footprints</a>
      held by Bobst Library, New York University. Vera referenced the buildings in
      this file against a
      <a href="https://www.opso.us/ppt/presentation20101018.pdf" target="_blank">presentation of the Orleans Parish Sheriff’s Office</a>
      showing facility use in 2005, 2010, and 2012, and an
      <a href="https://www.laaclu.org/sites/default/files/field_documents/2006_Report_OPP_Katrina_Insert_0.pdf" target="_blank">ACLU map of post-Katrina facility damage</a>. Many of the buildings no longer in use by the parish (e.g. Community
      Corrections Center, Orleans Parish Prison) are still standing, and were
      therefore still in the building footprint shapefile.</p> 

    <p>State, parish, and census tract geographies come from <a href="https://www.census.gov/geographies/mapping-files/time-series/geo/carto-boundary-file.html" target="_blank">census.gov</a>. The detailed outline of Orleans Parish comes from the Stanford
      <a href="https://purl.stanford.edu/sm333bn0683" target="_blank">National Transportation Atlas Database</a>.</p></section>`,ue(t,"id","wrap"),ue(t,"class","svelte-ep3o1")},m(r,s){st(r,t,s)},p:bn,i:bn,o:bn,d(r){r&&nt(t)}}}function PS(e){return Wa(async()=>{window.scrollTo(0,0)}),[]}class MS extends ii{constructor(t){super(),ni(this,t,PS,QS,ti,{})}}function DS(e){let t;return{c(){t=Lt("header"),t.innerHTML=`<div class="rowTop svelte-9nsqyw"><div class="rowTop-container svelte-9nsqyw"><nav id="primary" class="svelte-9nsqyw"><ul class="svelte-9nsqyw"><li class="svelte-9nsqyw"><a href="https://www.vera.org/who-we-are" class="svelte-9nsqyw"><div class="textWrap svelte-9nsqyw">Who We Are
                <div class="textWrap-icon svelte-9nsqyw"></div></div></a> 
            <ul class="svelte-9nsqyw"><li class="svelte-9nsqyw"><a href="https://www.vera.org/who-we-are" class="svelte-9nsqyw"><span class="liText svelte-9nsqyw">Who We Are</span></a></li> 
              <li class="svelte-9nsqyw"><a href="https://www.vera.org/who-we-are/about-us" class="svelte-9nsqyw"><span class="liText svelte-9nsqyw">About Us</span></a></li> 
              <li class="svelte-9nsqyw"><a href="https://www.vera.org/who-we-are/message-from-the-president" class="svelte-9nsqyw"><span class="liText svelte-9nsqyw">Message from the President</span></a></li> 
              <li class="svelte-9nsqyw"><a href="https://www.vera.org/who-we-are/people" class="svelte-9nsqyw"><span class="liText svelte-9nsqyw">People</span></a></li> 
              <li class="svelte-9nsqyw"><a href="https://www.vera.org/who-we-are/locations" class="svelte-9nsqyw"><span class="liText svelte-9nsqyw">Locations</span></a></li> 
              <li class="svelte-9nsqyw"><a href="https://www.vera.org/careers" class="svelte-9nsqyw"><span class="liText svelte-9nsqyw">Careers</span></a></li> 
              <li class="svelte-9nsqyw"><a href="https://www.vera.org/who-we-are/financials" class="svelte-9nsqyw"><span class="liText svelte-9nsqyw">Financials</span></a></li> 
              <li class="svelte-9nsqyw"><a href="https://www.vera.org/contact" class="svelte-9nsqyw"><span class="liText svelte-9nsqyw">Contact Us</span></a></li></ul></li> 
          <li class="svelte-9nsqyw"><a href="https://www.vera.org/what-we-do" class="svelte-9nsqyw"><div class="textWrap svelte-9nsqyw">What We Do
                <div class="textWrap-icon svelte-9nsqyw"></div></div></a> 
            <ul class="svelte-9nsqyw"><li class="svelte-9nsqyw"><a href="https://www.vera.org/what-we-do" class="svelte-9nsqyw"><span class="liText svelte-9nsqyw">What We Do</span></a></li> 
              <li class="svelte-9nsqyw"><a href="https://www.vera.org/our-strategic-priorities" class="svelte-9nsqyw"><span class="liText svelte-9nsqyw">Strategic Priorities</span></a></li></ul></li> 
          <li class="svelte-9nsqyw"><a href="https://www.vera.org/get-involved" class="svelte-9nsqyw"><div class="textWrap svelte-9nsqyw">Get Involved
                <div class="textWrap-icon svelte-9nsqyw"></div></div></a> 
            <ul class="svelte-9nsqyw"><li class="svelte-9nsqyw"><a href="https://www.vera.org/get-involved" class="svelte-9nsqyw"><span class="liText svelte-9nsqyw">Get Involved</span></a></li> 
              <li class="svelte-9nsqyw"><a href="https://shop.vera.org/" class="svelte-9nsqyw"><span class="liText svelte-9nsqyw">The Vera Shop</span></a></li> 
              <li class="svelte-9nsqyw"><a href="https://www.vera.org/get-involved/ways-to-give" class="svelte-9nsqyw"><span class="liText svelte-9nsqyw">Ways to Give</span></a></li> 
              <li class="svelte-9nsqyw"><a href="https://www.vera.org/get-involved/partner-with-vera" class="svelte-9nsqyw"><span class="liText svelte-9nsqyw">Partner with Vera</span></a></li> 
              <li class="svelte-9nsqyw"><a href="https://www.vera.org/events" class="svelte-9nsqyw"><span class="liText svelte-9nsqyw">Events</span></a></li></ul></li></ul></nav> 
      <section class="top-nav-mobile svelte-9nsqyw"><input id="menu-toggle" type="checkbox" class="svelte-9nsqyw"/> 
        <label class="menu-button-container svelte-9nsqyw" for="menu-toggle"><div class="menu-button svelte-9nsqyw"></div></label> 
        <span class="menulabel svelte-9nsqyw">Menu</span> 
        <ul class="menu svelte-9nsqyw"><a href="https://www.vera.org/ending-mass-incarceration" class="svelte-9nsqyw"><li class="svelte-9nsqyw">Ending Mass Incarceration</li></a> 

          <a href="https://www.vera.org/investing-in-communities" class="svelte-9nsqyw"><li class="svelte-9nsqyw">Investing in Communities</li></a> 

          <a href="https://www.vera.org/solutions-research" class="svelte-9nsqyw"><li class="svelte-9nsqyw">Solutions &amp; Research</li></a> 
          <a href="https://www.vera.org/news-and-stories" class="svelte-9nsqyw"><li class="svelte-9nsqyw">News &amp; Stories</li></a></ul></section> 
      <nav class="whowhat svelte-9nsqyw"><div class="menu-center svelte-9nsqyw"><h1 class="svelte-9nsqyw"><a class="logo svelte-9nsqyw" href="https://www.vera.org">Vera Institute of Justice</a></h1></div> 
        <div class="d-md-block menu-right donate svelte-9nsqyw"><a href="https://secure.vera.org/a/donate" class="button arrow svelte-9nsqyw">Donate</a></div></nav></div></div> 
  <nav id="secondary" class="svelte-9nsqyw"><ul class="svelte-9nsqyw"><li class="svelte-9nsqyw"><a href="https://www.vera.org/ending-mass-incarceration" class="svelte-9nsqyw">Ending Mass Incarceration</a> 
        <ul class="svelte-9nsqyw"><li class="svelte-9nsqyw"><a href="https://www.vera.org/ending-mass-incarceration" class="svelte-9nsqyw"><div class="hover-arrow svelte-9nsqyw">Ending Mass Incarceration</div> 
              <span class="svelte-9nsqyw">About the problem, the history of mass incarceration, trends
                and statistics</span></a></li> 
          <li class="svelte-9nsqyw"><a href="https://www.vera.org/ending-mass-incarceration/criminalization-racial-disparities" class="svelte-9nsqyw"><div class="hover-arrow svelte-9nsqyw">Criminalization and Racial Disparities</div> 
              <span class="svelte-9nsqyw">Ending the criminalization of people of color, immigrants, and
                people experiencing poverty</span></a></li> 

          <li class="svelte-9nsqyw"><a href="https://www.vera.org/ending-mass-incarceration/reducing-incarceration" class="svelte-9nsqyw"><div class="hover-arrow svelte-9nsqyw">Reducing Incarceration</div> 
              <span class="svelte-9nsqyw">Drastically reducing the use of jails, prisons, and detention
                centers</span></a></li> 

          <li class="svelte-9nsqyw"><a href="https://www.vera.org/ending-mass-incarceration/dignity-behind-bars" class="svelte-9nsqyw"><div class="hover-arrow svelte-9nsqyw">Dignity Behind Bars</div> 
              <span class="svelte-9nsqyw">Centering dignity and minimizing the harms of criminal legal
                and immigration system involvement</span></a></li></ul></li> 
      <li class="svelte-9nsqyw"><a href="https://www.vera.org/investing-in-communities" class="svelte-9nsqyw">Investing in Communities</a></li> 
      <li class="svelte-9nsqyw"><a href="https://www.vera.org/solutions-research" class="svelte-9nsqyw">Solutions &amp; Research</a></li> 
      <li class="svelte-9nsqyw"><a href="https://www.vera.org/get-involved" class="svelte-9nsqyw">News</a> 
        <ul class="svelte-9nsqyw"><li class="svelte-9nsqyw"><a href="https://www.vera.org/news-and-stories" class="svelte-9nsqyw"><div class="hover-arrow svelte-9nsqyw">Latest News &amp; Stories</div> 
              <span class="svelte-9nsqyw">Ideas, opinions, and strategies to end mass incarceration</span></a></li> 
          <li class="svelte-9nsqyw"><a href="https://www.vera.org/media-center" class="svelte-9nsqyw"><div class="hover-arrow svelte-9nsqyw">Media Center</div> 
              <span class="svelte-9nsqyw">Press releases and media coverage</span></a></li></ul></li></ul></nav>`,ue(t,"class","header-v2 svelte-9nsqyw")},m(r,s){st(r,t,s)},p:bn,i:bn,o:bn,d(r){r&&nt(t)}}}class NS extends ii{constructor(t){super(),ni(this,t,null,DS,ti,{})}}function jS(e){let t;return{c(){t=Lt("footer"),t.innerHTML=`<div id="vera" class="svelte-1x97hmj"><div id="mobilewrap" class="svelte-1x97hmj"><div class="section svelte-1x97hmj"><div id="logo" class="svelte-1x97hmj"><a href="https://www.vera.org"><img id="logo" src="https://www.vera.org/dist/img/v2/vera-horizontal.svg" class="svelte-1x97hmj"/></a></div> 
        <p class="address svelte-1x97hmj">34 35th Street<br/>
          Suite 4-2A<br/>
          Brooklyn, NY 11232</p> 
        <p class="phone svelte-1x97hmj">212-334-1300</p></div> 
      <div class="section footer-menu svelte-1x97hmj"><ul class="svelte-1x97hmj"><li class="svelte-1x97hmj"><a href="https://www.vera.org/who-we-are/about-us" class="svelte-1x97hmj">About Us</a></li> 
          <li class="svelte-1x97hmj"><a href="https://www.vera.org/careers" class="svelte-1x97hmj">Careers</a></li> 
          <li class="svelte-1x97hmj"><a href="https://www.vera.org/events" class="svelte-1x97hmj">Events</a></li> 
          <li class="svelte-1x97hmj"><a href="https://www.vera.org/media-center" class="svelte-1x97hmj">Media</a></li> 
          <li class="svelte-1x97hmj"><a href="https://www.vera.org/contact" class="svelte-1x97hmj">Contact Us</a></li></ul></div> 
      <div class="section soc svelte-1x97hmj"><p class="keep svelte-1x97hmj">Keep up with us on social media.</p> 
        <div class="social-icons svelte-1x97hmj"><a href="https://www.twitter.com/intent/tweet?url=https%3A%2F%2Fwww.vera.org%2F&amp;amp;text=Home %20%40verainstitute" class="share-link social-share-link receives-color svelte-1x97hmj" target="_blank"><svg class="svg-inline--fa svelte-1x97hmj" aria-hidden="true" prefix="fab" data-icon="twitter" role="img" viewBox="0 0 512 512"><path fill="currentColor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg></a> 
          <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fwww.vera.org%2F&amp;caption=Home%20&amp;picture=https://www.vera.org/dist/img/social-fallback.jpg&amp;description=" class="share-link social-share-link receives-color svelte-1x97hmj" target="_blank"><svg class="svg-inline--fa svelte-1x97hmj" aria-hidden="true" prefix="fab" data-icon="facebook" role="img" viewBox="0 0 320 512"><path fill="currentColor" d="M279.14 288l14.22-92.66h-88.91v-60.13c0-25.35 12.42-50.06 52.24-50.06h40.42V6.26S260.43 0 225.36 0c-73.22 0-121.08 44.38-121.08 124.72v70.62H22.89V288h81.39v224h100.17V288z"></path></svg></a> 
          <a href="https://www.instagram.com/verainstitute/" target="_blank" class="svelte-1x97hmj"><svg class="svg-inline--fa svelte-1x97hmj" aria-hidden="true" prefix="fab" data-icon="instagram" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"></path></svg></a> 
          <a href="https://www.youtube.com/channel/UCdUfqPJeOB_bHFdx1IhR0jQ" target="_blank" class="svelte-1x97hmj"><svg class="svg-inline--fa svelte-1x97hmj" aria-hidden="true" prefix="fab" data-icon="youtube" role="img" viewBox="0 0 576 512"><path fill="currentColor" d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"></path></svg></a></div></div></div> 

    <div class="section svelte-1x97hmj"><div id="transformative" class="svelte-1x97hmj"><p>Transformative change, sent to your inbox.</p> 
        <button class="button orange arrow svelte-1x97hmj">Add your email</button></div></div></div> 
  <div id="terms" class="svelte-1x97hmj"><ul class="svelte-1x97hmj"><li class="svelte-1x97hmj">© Vera Institute of Justice. All rights reserved.</li> 
      <li class="svelte-1x97hmj"><a href="https://www.vera.org/terms-of-use" class="svelte-1x97hmj">Terms of Use</a></li> 
      <li class="svelte-1x97hmj"><a href="https://www.vera.org/gsa-advantage" class="svelte-1x97hmj">GSA Advantage</a></li></ul></div>`,ue(t,"class","svelte-1x97hmj")},m(r,s){st(r,t,s)},p:bn,i:bn,o:bn,d(r){r&&nt(t)}}}class RS extends ii{constructor(t){super(),ni(this,t,null,jS,ti,{})}}function OS(e){let t,r,s,l,c,h,a;t=new NS({});var d=e[0];function _(p){return{props:{params:p[1]}}}return d&&(l=Kh(d,_(e))),h=new RS({}),{c(){mr(t.$$.fragment),r=$t(),s=Lt("div"),l&&mr(l.$$.fragment),c=$t(),mr(h.$$.fragment),ue(s,"id","center"),ue(s,"class","svelte-17lcfot")},m(p,E){fr(t,p,E),st(p,r,E),st(p,s,E),l&&fr(l,s,null),st(p,c,E),fr(h,p,E),a=!0},p(p,[E]){const w={};if(E&2&&(w.params=p[1]),d!==(d=p[0])){if(l){Xa();const x=l;Kt(x.$$.fragment,1,0,()=>{dr(x,1)}),Za()}d?(l=Kh(d,_(p)),mr(l.$$.fragment),Tt(l.$$.fragment,1),fr(l,s,null)):l=null}else d&&l.$set(w)},i(p){a||(Tt(t.$$.fragment,p),l&&Tt(l.$$.fragment,p),Tt(h.$$.fragment,p),a=!0)},o(p){Kt(t.$$.fragment,p),l&&Kt(l.$$.fragment,p),Kt(h.$$.fragment,p),a=!1},d(p){dr(t,p),p&&nt(r),p&&nt(s),l&&dr(l),p&&nt(c),dr(h,p)}}}function HS(e,t,r){let s,l;return dl("/louisiana-locked-up/",()=>r(0,s=f1)),dl("/louisiana-locked-up/#parishes",()=>r(0,s=f1)),dl("/louisiana-locked-up/parish/:id",(c,h)=>{r(1,l=c.params),h()},()=>r(0,s=kS)),dl("/louisiana-locked-up/about-data",()=>r(0,s=MS)),dl.start(),[s,l]}class zS extends ii{constructor(t){super(),ni(this,t,HS,OS,ti,{})}}new zS({target:document.getElementById("app")});export{qi as _,Hl as c,VS as g,IS as r};
