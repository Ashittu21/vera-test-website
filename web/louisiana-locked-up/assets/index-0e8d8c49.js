(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function r(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerpolicy&&(c.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?c.credentials="include":l.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(l){if(l.ep)return;l.ep=!0;const c=r(l);fetch(l.href,c)}})();function bn(){}function F_(e,t){for(const r in t)e[r]=t[r];return e}function Oy(e){return e()}function r0(){return Object.create(null)}function eA(e){e.forEach(Oy)}function Lp(e){return typeof e=="function"}function ri(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function S_(e){return Object.keys(e).length===0}function Hy(e,...t){if(e==null)return bn;const r=e.subscribe(...t);return r.unsubscribe?()=>r.unsubscribe():r}function $r(e,t,r){e.$$.on_destroy.push(Hy(t,r))}function wA(e,t,r,s){if(e){const l=zy(e,t,r,s);return e[0](l)}}function zy(e,t,r,s){return e[1]&&s?F_(r.ctx.slice(),e[1](s(t))):r.ctx}function bA(e,t,r,s){if(e[2]&&s){const l=e[2](s(r));if(t.dirty===void 0)return l;if(typeof l=="object"){const c=[],h=Math.max(t.dirty.length,l.length);for(let a=0;a<h;a+=1)c[a]=t.dirty[a]|l[a];return c}return t.dirty|l}return t.dirty}function xA(e,t,r,s,l,c){if(l){const h=zy(t,r,s,c);e.p(h,l)}}function BA(e){if(e.ctx.length>32){const t=[],r=e.ctx.length/32;for(let s=0;s<r;s++)t[s]=-1;return t}return-1}function n0(e){return e??""}function vi(e,t,r){return e.set(r),t}function st(e,t){e.appendChild(t)}function ot(e,t,r){e.insertBefore(t,r||null)}function it(e){e.parentNode&&e.parentNode.removeChild(e)}function mc(e,t){for(let r=0;r<e.length;r+=1)e[r]&&e[r].d(t)}function kt(e){return document.createElement(e)}function Gn(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function Ir(e){return document.createTextNode(e)}function $t(){return Ir(" ")}function tA(){return Ir("")}function us(e,t,r,s){return e.addEventListener(t,r,s),()=>e.removeEventListener(t,r,s)}function ce(e,t,r){r==null?e.removeAttribute(t):e.getAttribute(t)!==r&&e.setAttribute(t,r)}function Vd(e,t,r){t in e?e[t]=typeof e[t]=="boolean"&&r===""?!0:r:ce(e,t,r)}function I_(e,t,r){e.setAttributeNS("http://www.w3.org/1999/xlink",t,r)}function T_(e){return Array.from(e.childNodes)}function ei(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function Qn(e,t,r,s){r===null?e.style.removeProperty(t):e.style.setProperty(t,r,s?"important":"")}function Vh(e,t){for(let r=0;r<e.options.length;r+=1){const s=e.options[r];if(s.__value===t){s.selected=!0;return}}e.selectedIndex=-1}function Vm(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}let Kd;function U_(){if(Kd===void 0){Kd=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{Kd=!0}}return Kd}function L_(e,t){getComputedStyle(e).position==="static"&&(e.style.position="relative");const s=kt("iframe");s.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),s.setAttribute("aria-hidden","true"),s.tabIndex=-1;const l=U_();let c;return l?(s.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",c=us(window,"message",h=>{h.source===s.contentWindow&&t()})):(s.src="about:blank",s.onload=()=>{c=us(s.contentWindow,"resize",t)}),st(e,s),()=>{(l||c&&s.contentWindow)&&c(),it(s)}}function fp(e,t,r){e.classList[r?"add":"remove"](t)}function Q_(e,t,{bubbles:r=!1,cancelable:s=!1}={}){const l=document.createEvent("CustomEvent");return l.initCustomEvent(e,r,s,t),l}function dp(e,t){return new e(t)}let qf;function Of(e){qf=e}function nd(){if(!qf)throw new Error("Function called outside component initialization");return qf}function Wa(e){nd().$$.on_mount.push(e)}function Qp(e){nd().$$.on_destroy.push(e)}function Yh(){const e=nd();return(t,r,{cancelable:s=!1}={})=>{const l=e.$$.callbacks[t];if(l){const c=Q_(t,r,{cancelable:s});return l.slice().forEach(h=>{h.call(e,c)}),!c.defaultPrevented}return!0}}function Kh(e,t){return nd().$$.context.set(e,t),t}function Yo(e){return nd().$$.context.get(e)}const Nh=[],qa=[],ap=[],Km=[],k_=Promise.resolve();let Gm=!1;function P_(){Gm||(Gm=!0,k_.then(Vy))}function xu(e){ap.push(e)}function Cg(e){Km.push(e)}const _m=new Set;let Qh=0;function Vy(){if(Qh!==0)return;const e=qf;do{try{for(;Qh<Nh.length;){const t=Nh[Qh];Qh++,Of(t),M_(t.$$)}}catch(t){throw Nh.length=0,Qh=0,t}for(Of(null),Nh.length=0,Qh=0;qa.length;)qa.pop()();for(let t=0;t<ap.length;t+=1){const r=ap[t];_m.has(r)||(_m.add(r),r())}ap.length=0}while(Nh.length);for(;Km.length;)Km.pop()();Gm=!1,_m.clear(),Of(e)}function M_(e){if(e.fragment!==null){e.update(),eA(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(xu)}}const op=new Set;let Vu;function Lo(){Vu={r:0,c:[],p:Vu}}function Qo(){Vu.r||eA(Vu.c),Vu=Vu.p}function Pt(e,t){e&&e.i&&(op.delete(e),e.i(t))}function Gt(e,t,r,s){if(e&&e.o){if(op.has(e))return;op.add(e),Vu.c.push(()=>{op.delete(e),s&&(r&&e.d(1),s())}),e.o(t)}else s&&s()}const Ky=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function Gy(e,t){e.d(1),t.delete(e.key)}function qy(e,t,r,s,l,c,h,a,d,_,p,E){let w=e.length,x=c.length,k=w;const Q={};for(;k--;)Q[e[k].key]=k;const R=[],M=new Map,O=new Map;for(k=x;k--;){const $=E(l,c,k),he=r($);let fe=h.get(he);fe?s&&fe.p($,t):(fe=_(he,$),fe.c()),M.set(he,R[k]=fe),he in Q&&O.set(he,Math.abs(k-Q[he]))}const G=new Set,K=new Set;function Z($){Pt($,1),$.m(a,p),h.set($.key,$),p=$.first,x--}for(;w&&x;){const $=R[x-1],he=e[w-1],fe=$.key,_e=he.key;$===he?(p=$.first,w--,x--):M.has(_e)?!h.has(fe)||G.has(fe)?Z($):K.has(_e)?w--:O.get(fe)>O.get(_e)?(K.add(fe),Z($)):(G.add(_e),w--):(d(he,h),w--)}for(;w--;){const $=e[w];M.has($.key)||d($,h)}for(;x;)Z(R[x-1]);return R}function Eg(e,t,r){const s=e.$$.props[t];s!==void 0&&(e.$$.bound[s]=r,r(e.$$.ctx[s]))}function yr(e){e&&e.c()}function pr(e,t,r,s){const{fragment:l,after_update:c}=e.$$;l&&l.m(t,r),s||xu(()=>{const h=e.$$.on_mount.map(Oy).filter(Lp);e.$$.on_destroy?e.$$.on_destroy.push(...h):eA(h),e.$$.on_mount=[]}),c.forEach(xu)}function mr(e,t){const r=e.$$;r.fragment!==null&&(eA(r.on_destroy),r.fragment&&r.fragment.d(t),r.on_destroy=r.fragment=null,r.ctx=[])}function D_(e,t){e.$$.dirty[0]===-1&&(Nh.push(e),P_(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function si(e,t,r,s,l,c,h,a=[-1]){const d=qf;Of(e);const _=e.$$={fragment:null,ctx:[],props:c,update:bn,not_equal:l,bound:r0(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(d?d.$$.context:[])),callbacks:r0(),dirty:a,skip_bound:!1,root:t.target||d.$$.root};h&&h(_.root);let p=!1;if(_.ctx=r?r(e,t.props||{},(E,w,...x)=>{const k=x.length?x[0]:w;return _.ctx&&l(_.ctx[E],_.ctx[E]=k)&&(!_.skip_bound&&_.bound[E]&&_.bound[E](k),p&&D_(e,E)),w}):[],_.update(),p=!0,eA(_.before_update),_.fragment=s?s(_.ctx):!1,t.target){if(t.hydrate){const E=T_(t.target);_.fragment&&_.fragment.l(E),E.forEach(it)}else _.fragment&&_.fragment.c();t.intro&&Pt(e.$$.fragment),pr(e,t.target,t.anchor,t.customElement),Vy()}Of(d)}class ai{$destroy(){mr(this,1),this.$destroy=bn}$on(t,r){if(!Lp(r))return bn;const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(r),()=>{const l=s.indexOf(r);l!==-1&&s.splice(l,1)}}$set(t){this.$$set&&!S_(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}var qm=Array.isArray||function(e){return Object.prototype.toString.call(e)=="[object Array]"},id=Jy,N_=Fg,j_=z_,R_=Wy,O_=Zy,H_=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^()])+)\\))?|\\(((?:\\\\.|[^()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function Fg(e){for(var t=[],r=0,s=0,l="",c;(c=H_.exec(e))!=null;){var h=c[0],a=c[1],d=c.index;if(l+=e.slice(s,d),s=d+h.length,a){l+=a[1];continue}l&&(t.push(l),l="");var _=c[2],p=c[3],E=c[4],w=c[5],x=c[6],k=c[7],Q=x==="+"||x==="*",R=x==="?"||x==="*",M=_||"/",O=E||w||(k?".*":"[^"+M+"]+?");t.push({name:p||r++,prefix:_||"",delimiter:M,optional:R,repeat:Q,pattern:V_(O)})}return s<e.length&&(l+=e.substr(s)),l&&t.push(l),t}function z_(e){return Wy(Fg(e))}function Wy(e){for(var t=new Array(e.length),r=0;r<e.length;r++)typeof e[r]=="object"&&(t[r]=new RegExp("^"+e[r].pattern+"$"));return function(s){for(var l="",c=s||{},h=0;h<e.length;h++){var a=e[h];if(typeof a=="string"){l+=a;continue}var d=c[a.name],_;if(d==null){if(a.optional)continue;throw new TypeError('Expected "'+a.name+'" to be defined')}if(qm(d)){if(!a.repeat)throw new TypeError('Expected "'+a.name+'" to not repeat, but received "'+d+'"');if(d.length===0){if(a.optional)continue;throw new TypeError('Expected "'+a.name+'" to not be empty')}for(var p=0;p<d.length;p++){if(_=encodeURIComponent(d[p]),!t[h].test(_))throw new TypeError('Expected all "'+a.name+'" to match "'+a.pattern+'", but received "'+_+'"');l+=(p===0?a.prefix:a.delimiter)+_}continue}if(_=encodeURIComponent(d),!t[h].test(_))throw new TypeError('Expected "'+a.name+'" to match "'+a.pattern+'", but received "'+_+'"');l+=a.prefix+_}return l}}function i0(e){return e.replace(/([.+*?=^!:${}()[\]|\/])/g,"\\$1")}function V_(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function Sg(e,t){return e.keys=t,e}function Xy(e){return e.sensitive?"":"i"}function K_(e,t){var r=e.source.match(/\((?!\?)/g);if(r)for(var s=0;s<r.length;s++)t.push({name:s,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return Sg(e,t)}function G_(e,t,r){for(var s=[],l=0;l<e.length;l++)s.push(Jy(e[l],t,r).source);var c=new RegExp("(?:"+s.join("|")+")",Xy(r));return Sg(c,t)}function q_(e,t,r){for(var s=Fg(e),l=Zy(s,r),c=0;c<s.length;c++)typeof s[c]!="string"&&t.push(s[c]);return Sg(l,t)}function Zy(e,t){t=t||{};for(var r=t.strict,s=t.end!==!1,l="",c=e[e.length-1],h=typeof c=="string"&&/\/$/.test(c),a=0;a<e.length;a++){var d=e[a];if(typeof d=="string")l+=i0(d);else{var _=i0(d.prefix),p=d.pattern;d.repeat&&(p+="(?:"+_+p+")*"),d.optional?_?p="(?:"+_+"("+p+"))?":p="("+p+")?":p=_+"("+p+")",l+=p}}return r||(l=(h?l.slice(0,-2):l)+"(?:\\/(?=$))?"),s?l+="$":l+=r&&h?"":"(?=\\/|$)",new RegExp("^"+l,Xy(t))}function Jy(e,t,r){return t=t||[],qm(t)?r||(r={}):(r=t,t=[]),e instanceof RegExp?K_(e,t):qm(e)?G_(e,t,r):q_(e,t,r)}id.parse=N_;id.compile=j_;id.tokensToFunction=R_;id.tokensToRegExp=O_;var Gh=typeof document<"u",dl=typeof window<"u",kp=typeof history<"u",W_=typeof process<"u",Wm=Gh&&document.ontouchstart?"touchstart":"click",jc=dl&&!!(window.history.location||window.location);function ga(){this.callbacks=[],this.exits=[],this.current="",this.len=0,this._decodeURLComponents=!0,this._base="",this._strict=!1,this._running=!1,this._hashbang=!1,this.clickHandler=this.clickHandler.bind(this),this._onpopstate=this._onpopstate.bind(this)}ga.prototype.configure=function(e){var t=e||{};this._window=t.window||dl&&window,this._decodeURLComponents=t.decodeURLComponents!==!1,this._popstate=t.popstate!==!1&&dl,this._click=t.click!==!1&&Gh,this._hashbang=!!t.hashbang;var r=this._window;this._popstate?r.addEventListener("popstate",this._onpopstate,!1):dl&&r.removeEventListener("popstate",this._onpopstate,!1),this._click?r.document.addEventListener(Wm,this.clickHandler,!1):Gh&&r.document.removeEventListener(Wm,this.clickHandler,!1),this._hashbang&&dl&&!kp?r.addEventListener("hashchange",this._onpopstate,!1):dl&&r.removeEventListener("hashchange",this._onpopstate,!1)};ga.prototype.base=function(e){if(arguments.length===0)return this._base;this._base=e};ga.prototype._getBase=function(){var e=this._base;if(e)return e;var t=dl&&this._window&&this._window.location;return dl&&this._hashbang&&t&&t.protocol==="file:"&&(e=t.pathname),e};ga.prototype.strict=function(e){if(arguments.length===0)return this._strict;this._strict=e};ga.prototype.start=function(e){var t=e||{};if(this.configure(t),t.dispatch!==!1){this._running=!0;var r;if(jc){var s=this._window,l=s.location;this._hashbang&&~l.hash.indexOf("#!")?r=l.hash.substr(2)+l.search:this._hashbang?r=l.search+l.hash:r=l.pathname+l.search+l.hash}this.replace(r,null,!0,t.dispatch)}};ga.prototype.stop=function(){if(this._running){this.current="",this.len=0,this._running=!1;var e=this._window;this._click&&e.document.removeEventListener(Wm,this.clickHandler,!1),dl&&e.removeEventListener("popstate",this._onpopstate,!1),dl&&e.removeEventListener("hashchange",this._onpopstate,!1)}};ga.prototype.show=function(e,t,r,s){var l=new sd(e,t,this),c=this.prevContext;return this.prevContext=l,this.current=l.path,r!==!1&&this.dispatch(l,c),l.handled!==!1&&s!==!1&&l.pushState(),l};ga.prototype.back=function(e,t){var r=this;if(this.len>0){var s=this._window;kp&&s.history.back(),this.len--}else setTimeout(e?function(){r.show(e,t)}:function(){r.show(r._getBase(),t)})};ga.prototype.redirect=function(e,t){var r=this;typeof e=="string"&&typeof t=="string"&&Pp.call(this,e,function(s){setTimeout(function(){r.replace(t)},0)}),typeof e=="string"&&typeof t>"u"&&setTimeout(function(){r.replace(e)},0)};ga.prototype.replace=function(e,t,r,s){var l=new sd(e,t,this),c=this.prevContext;return this.prevContext=l,this.current=l.path,l.init=r,l.save(),s!==!1&&this.dispatch(l,c),l};ga.prototype.dispatch=function(e,t){var r=0,s=0,l=this;function c(){var a=l.exits[s++];if(!a)return h();a(t,c)}function h(){var a=l.callbacks[r++];if(e.path!==l.current){e.handled=!1;return}if(!a)return X_.call(l,e);a(e,h)}t?c():h()};ga.prototype.exit=function(e,t){if(typeof e=="function")return this.exit("*",e);for(var r=new ad(e,null,this),s=1;s<arguments.length;++s)this.exits.push(r.middleware(arguments[s]))};ga.prototype.clickHandler=function(e){if(this._which(e)===1&&!(e.metaKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented){var t=e.target,r=e.path||(e.composedPath?e.composedPath():null);if(r){for(var s=0;s<r.length;s++)if(r[s].nodeName&&r[s].nodeName.toUpperCase()==="A"&&r[s].href){t=r[s];break}}for(;t&&t.nodeName.toUpperCase()!=="A";)t=t.parentNode;if(!(!t||t.nodeName.toUpperCase()!=="A")){var l=typeof t.href=="object"&&t.href.constructor.name==="SVGAnimatedString";if(!(t.hasAttribute("download")||t.getAttribute("rel")==="external")){var c=t.getAttribute("href");if(!(!this._hashbang&&this._samePath(t)&&(t.hash||c==="#"))&&!(c&&c.indexOf("mailto:")>-1)&&!(l?t.target.baseVal:t.target)&&!(!l&&!this.sameOrigin(t.href))){var h=l?t.href.baseVal:t.pathname+t.search+(t.hash||"");h=h[0]!=="/"?"/"+h:h,W_&&h.match(/^\/[a-zA-Z]:\//)&&(h=h.replace(/^\/[a-zA-Z]:\//,"/"));var a=h,d=this._getBase();h.indexOf(d)===0&&(h=h.substr(d.length)),this._hashbang&&(h=h.replace("#!","")),!(d&&a===h&&(!jc||this._window.location.protocol!=="file:"))&&(e.preventDefault(),this.show(a))}}}}};ga.prototype._onpopstate=function(){var e=!1;return dl?(Gh&&document.readyState==="complete"?e=!0:window.addEventListener("load",function(){setTimeout(function(){e=!0},0)}),function(r){if(e){var s=this;if(r.state){var l=r.state.path;s.replace(l,r.state)}else if(jc){var c=s._window.location;s.show(c.pathname+c.search+c.hash,void 0,void 0,!1)}}}):function(){}}();ga.prototype._which=function(e){return e=e||dl&&this._window.event,e.which==null?e.button:e.which};ga.prototype._toURL=function(e){var t=this._window;if(typeof URL=="function"&&jc)return new URL(e,t.location.toString());if(Gh){var r=t.document.createElement("a");return r.href=e,r}};ga.prototype.sameOrigin=function(e){if(!e||!jc)return!1;var t=this._toURL(e),r=this._window,s=r.location;return s.protocol===t.protocol&&s.hostname===t.hostname&&(s.port===t.port||s.port===""&&(t.port==80||t.port==443))};ga.prototype._samePath=function(e){if(!jc)return!1;var t=this._window,r=t.location;return e.pathname===r.pathname&&e.search===r.search};ga.prototype._decodeURLEncodedURIComponent=function(e){return typeof e!="string"?e:this._decodeURLComponents?decodeURIComponent(e.replace(/\+/g," ")):e};function Yy(){var e=new ga;function t(){return Pp.apply(e,arguments)}return t.callbacks=e.callbacks,t.exits=e.exits,t.base=e.base.bind(e),t.strict=e.strict.bind(e),t.start=e.start.bind(e),t.stop=e.stop.bind(e),t.show=e.show.bind(e),t.back=e.back.bind(e),t.redirect=e.redirect.bind(e),t.replace=e.replace.bind(e),t.dispatch=e.dispatch.bind(e),t.exit=e.exit.bind(e),t.configure=e.configure.bind(e),t.sameOrigin=e.sameOrigin.bind(e),t.clickHandler=e.clickHandler.bind(e),t.create=Yy,Object.defineProperty(t,"len",{get:function(){return e.len},set:function(r){e.len=r}}),Object.defineProperty(t,"current",{get:function(){return e.current},set:function(r){e.current=r}}),t.Context=sd,t.Route=ad,t}function Pp(e,t){if(typeof e=="function")return Pp.call(this,"*",e);if(typeof t=="function")for(var r=new ad(e,null,this),s=1;s<arguments.length;++s)this.callbacks.push(r.middleware(arguments[s]));else typeof e=="string"?this[typeof t=="string"?"redirect":"show"](e,t):this.start(e)}function X_(e){if(!e.handled){var t,r=this,s=r._window;r._hashbang?t=jc&&this._getBase()+s.location.hash.replace("#!",""):t=jc&&s.location.pathname+s.location.search,t!==e.canonicalPath&&(r.stop(),e.handled=!1,jc&&(s.location.href=e.canonicalPath))}}function Z_(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function sd(e,t,r){var s=this.page=r||Pp,l=s._window,c=s._hashbang,h=s._getBase();e[0]==="/"&&e.indexOf(h)!==0&&(e=h+(c?"#!":"")+e);var a=e.indexOf("?");this.canonicalPath=e;var d=new RegExp("^"+Z_(h));if(this.path=e.replace(d,"")||"/",c&&(this.path=this.path.replace("#!","")||"/"),this.title=Gh&&l.document.title,this.state=t||{},this.state.path=e,this.querystring=~a?s._decodeURLEncodedURIComponent(e.slice(a+1)):"",this.pathname=s._decodeURLEncodedURIComponent(~a?e.slice(0,a):e),this.params={},this.hash="",!c){if(!~this.path.indexOf("#"))return;var _=this.path.split("#");this.path=this.pathname=_[0],this.hash=s._decodeURLEncodedURIComponent(_[1])||"",this.querystring=this.querystring.split("#")[0]}}sd.prototype.pushState=function(){var e=this.page,t=e._window,r=e._hashbang;e.len++,kp&&t.history.pushState(this.state,this.title,r&&this.path!=="/"?"#!"+this.path:this.canonicalPath)};sd.prototype.save=function(){var e=this.page;kp&&e._window.history.replaceState(this.state,this.title,e._hashbang&&this.path!=="/"?"#!"+this.path:this.canonicalPath)};function ad(e,t,r){var s=this.page=r||Ig,l=t||{};l.strict=l.strict||s._strict,this.path=e==="*"?"(.*)":e,this.method="GET",this.regexp=id(this.path,this.keys=[],l)}ad.prototype.middleware=function(e){var t=this;return function(r,s){if(t.match(r.path,r.params))return r.routePath=t.path,e(r,s);s()}};ad.prototype.match=function(e,t){var r=this.keys,s=e.indexOf("?"),l=~s?e.slice(0,s):e,c=this.regexp.exec(decodeURIComponent(l));if(!c)return!1;delete t[0];for(var h=1,a=c.length;h<a;++h){var d=r[h-1],_=this.page._decodeURLEncodedURIComponent(c[h]);(_!==void 0||!hasOwnProperty.call(t,d.name))&&(t[d.name]=_)}return!0};var Ig=Yy(),pl=Ig,J_=Ig;pl.default=J_;var s0={},wm={},bm=34,Ff=10,xm=13;function $y(e){return new Function("d","return {"+e.map(function(t,r){return JSON.stringify(t)+": d["+r+'] || ""'}).join(",")+"}")}function Y_(e,t){var r=$y(e);return function(s,l){return t(r(s),l,e)}}function a0(e){var t=Object.create(null),r=[];return e.forEach(function(s){for(var l in s)l in t||r.push(t[l]=l)}),r}function vA(e,t){var r=e+"",s=r.length;return s<t?new Array(t-s+1).join(0)+r:r}function $_(e){return e<0?"-"+vA(-e,6):e>9999?"+"+vA(e,6):vA(e,4)}function ew(e){var t=e.getUTCHours(),r=e.getUTCMinutes(),s=e.getUTCSeconds(),l=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":$_(e.getUTCFullYear())+"-"+vA(e.getUTCMonth()+1,2)+"-"+vA(e.getUTCDate(),2)+(l?"T"+vA(t,2)+":"+vA(r,2)+":"+vA(s,2)+"."+vA(l,3)+"Z":s?"T"+vA(t,2)+":"+vA(r,2)+":"+vA(s,2)+"Z":r||t?"T"+vA(t,2)+":"+vA(r,2)+"Z":"")}function tw(e){var t=new RegExp('["'+e+`
\r]`),r=e.charCodeAt(0);function s(E,w){var x,k,Q=l(E,function(R,M){if(x)return x(R,M-1);k=R,x=w?Y_(R,w):$y(R)});return Q.columns=k||[],Q}function l(E,w){var x=[],k=E.length,Q=0,R=0,M,O=k<=0,G=!1;E.charCodeAt(k-1)===Ff&&--k,E.charCodeAt(k-1)===xm&&--k;function K(){if(O)return wm;if(G)return G=!1,s0;var $,he=Q,fe;if(E.charCodeAt(he)===bm){for(;Q++<k&&E.charCodeAt(Q)!==bm||E.charCodeAt(++Q)===bm;);return($=Q)>=k?O=!0:(fe=E.charCodeAt(Q++))===Ff?G=!0:fe===xm&&(G=!0,E.charCodeAt(Q)===Ff&&++Q),E.slice(he+1,$-1).replace(/""/g,'"')}for(;Q<k;){if((fe=E.charCodeAt($=Q++))===Ff)G=!0;else if(fe===xm)G=!0,E.charCodeAt(Q)===Ff&&++Q;else if(fe!==r)continue;return E.slice(he,$)}return O=!0,E.slice(he,k)}for(;(M=K())!==wm;){for(var Z=[];M!==s0&&M!==wm;)Z.push(M),M=K();w&&(Z=w(Z,R++))==null||x.push(Z)}return x}function c(E,w){return E.map(function(x){return w.map(function(k){return p(x[k])}).join(e)})}function h(E,w){return w==null&&(w=a0(E)),[w.map(p).join(e)].concat(c(E,w)).join(`
`)}function a(E,w){return w==null&&(w=a0(E)),c(E,w).join(`
`)}function d(E){return E.map(_).join(`
`)}function _(E){return E.map(p).join(e)}function p(E){return E==null?"":E instanceof Date?ew(E):t.test(E+="")?'"'+E.replace(/"/g,'""')+'"':E}return{parse:s,parseRows:l,format:h,formatBody:a,formatRows:d,formatRow:_,formatValue:p}}var rw=tw(","),ev=rw.parse;function nw(e){for(var t in e){var r=e[t].trim(),s,l;if(!r)r=null;else if(r==="true")r=!0;else if(r==="false")r=!1;else if(r==="NaN")r=NaN;else if(!isNaN(s=+r))r=s;else if(l=r.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))iw&&l[4]&&!l[7]&&(r=r.replace(/-/g,"/").replace(/T/," ")),r=new Date(r);else continue;e[t]=r}return e}const iw=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function sw(e){return e}function aw(e){if(e==null)return sw;var t,r,s=e.scale[0],l=e.scale[1],c=e.translate[0],h=e.translate[1];return function(a,d){d||(t=r=0);var _=2,p=a.length,E=new Array(p);for(E[0]=(t+=a[0])*s+c,E[1]=(r+=a[1])*l+h;_<p;)E[_]=a[_],++_;return E}}function ow(e,t){for(var r,s=e.length,l=s-t;l<--s;)r=e[l],e[l++]=e[s],e[s]=r}function tv(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(r){return o0(e,r)})}:o0(e,t)}function o0(e,t){var r=t.id,s=t.bbox,l=t.properties==null?{}:t.properties,c=Aw(e,t);return r==null&&s==null?{type:"Feature",properties:l,geometry:c}:s==null?{type:"Feature",id:r,properties:l,geometry:c}:{type:"Feature",id:r,bbox:s,properties:l,geometry:c}}function Aw(e,t){var r=aw(e.transform),s=e.arcs;function l(p,E){E.length&&E.pop();for(var w=s[p<0?~p:p],x=0,k=w.length;x<k;++x)E.push(r(w[x],x));p<0&&ow(E,k)}function c(p){return r(p)}function h(p){for(var E=[],w=0,x=p.length;w<x;++w)l(p[w],E);return E.length<2&&E.push(E[0]),E}function a(p){for(var E=h(p);E.length<4;)E.push(E[0]);return E}function d(p){return p.map(a)}function _(p){var E=p.type,w;switch(E){case"GeometryCollection":return{type:E,geometries:p.geometries.map(_)};case"Point":w=c(p.coordinates);break;case"MultiPoint":w=p.coordinates.map(c);break;case"LineString":w=h(p.arcs);break;case"MultiLineString":w=p.arcs.map(h);break;case"Polygon":w=d(p.arcs);break;case"MultiPolygon":w=p.arcs.map(d);break;default:return null}return{type:E,coordinates:w}}return _(t)}function lw(e,t){for(let r in e[t])document.documentElement.style.setProperty("--"+r,e[t][r])}function rv(){let e=window.matchMedia("(prefers-reduced-motion: reduce)");return!(!e||e.matches)}async function A0(e){let r=await(await fetch(e)).text();return await ev(r,nw)}async function Mc(e,t){let s=await(await fetch(e)).json();return await tv(s,t)}async function Sf(e,t){let s=await(await fetch(e)).json();return await tv(s,t)}function l0(e,t,r){let s,l=!1,c=1;for(;l==!1;)e<=t[c]?(s=r[c-1],l=!0):c++;return s||"lightgrey"}function c0(e,t){let r,s=t.length;return e=="pretrial"?r=[0,12.4,24.8,t[s-1]]:e=="admission"?r=[0,13.6,27.2,t[s-1]]:e=="over_1000_19"?r=[0,1,2]:e=="over_1000_99"?r=[0,1,2]:e=="GT_1000_beds_99"?r=[-1,0,1]:e=="GT_1000_beds_19"?r=[-1,0,1]:e=="est_doc_rev"?r=[-1,0,1]:e=="ice"?r=[-1,0,1]:e=="map_twp"?r=[-1,0,1]:e=="map_private"?r=[-1,0,1]:e=="map_prison"?r=[-1,0,1]:e=="map_all"?r=[-1,0,1]:r=[t[0],t[Math.floor(s*.33333)],t[Math.floor(s*.66666)],t[s-1]],r}const Df={light:{text:"#222",muted:"#777",pale:"#f0f0f0",background:"#fff7f0"},dark:{text:"#fff",muted:"#bbb",pale:"#333",background:"#222"},lightblue:{text:"#206095",muted:"#707070",pale:"#f0f0f0",background:"rgb(188, 207, 222)"}},u0={pretrial:["#ef4136","#b81c1f","#790f09"],admission:["#ef4136","#b81c1f","#790f09"],over_1000_19:["rgba(255,255,255,0)","rgba(255,240,0,.5)"],over_1000_99:["rgba(255,255,255,0)","rgba(255,240,0,.5)"],map_jails:["rgba(255,255,255,0)","rgba(46,29,151,.9)"],GT_1000_beds_99:["rgba(255,255,255,0)","rgba(46,29,151,.9)"],GT_1000_beds_19:["rgba(255,255,255,0)","rgba(46,29,151,.9)"],est_doc_rev:["rgba(255,255,255,0)","rgba(23,134,31,.9)"],ice:["rgba(255,255,255,0)","rgba(138,158,30,.9)"],map_prison:["rgba(255,255,255,0)","rgba(0,92,229, 0.9)"],map_private:["rgba(255,255,255,0)","rgba(143,50,161,.9)"],map_twp:["rgba(255,255,255,0)","rgba(255,158,68,0.9)"],map_all:["rgba(255,255,255,0)","rgba(0,0,0,.9)"]};function cw(e){let t;return{c(){t=kt("div"),t.innerHTML=`<p>Louisiana’s 64 parishes range from bustling cities to vast rural stretches,
    from the parks and preserves of the north to the swamps and marshes of the
    gulf. Yet, they all share one defining characteristic: a stake in the
    state’s vast network of jails, prisons, and juvenile detention facilities.</p> 

  <p>The prevalence of incarceration in Louisiana is hard to see in many places
    due to an alarming lack of transparency and data, as well as a convoluted
    carceral landscape where local jails also function as prisons. But parish-
    and state-level research by the Vera Institute of Justice brings much-needed
    clarity to this picture. Vera’s datahub provides illuminating access to
    parish-level data on arrests, pretrial detention, incarceration, and local
    spending on the criminal legal system. Together, these data points create a
    detailed—and highly damning—picture of mass incarceration in Louisiana.</p> 

  <p>It is a system of clear winners and losers, financially benefiting those
    with a stake in the system, including the state, local sheriffs, and private
    corporations. The Louisiana Department of Public Safety &amp; Corrections pays
    local jails <a href="https://house.louisiana.gov/housefiscal/DOCS_APP_BDGT_MEETINGS/DOCS_APPBudgetMeetings2022/FY%2023%20Corrections.pdf" target="_blank">$177 million</a> annually to hold more than half the people who have been sentenced to
    prison.</p> 

  <p>But the people of Louisiana are losing. If incarceration created safety,
    Louisiana would be among the safest places in the world. Instead, making
    Louisiana a safer place requires scaling back its vast incarceration system
    and reallocating funds to the <a href="https://www.brookings.edu/essay/a-new-community-safety-blueprint-how-the-federal-government-can-address-violence-and-harm-through-a-public-health-approach/" target="_blank">things that actually make communities safe</a>: jobs, housing, healthcare, good schools, and infrastructure.</p> 
  <p>Conversations around Louisiana’s high incarceration rates tend to center on
    dense population centers. But a closer look at the data collected by Vera
    tells a different story: incarceration has expanded across the state,
    especially in rural parishes.</p>`,ce(t,"id","top"),ce(t,"class","col-wide svelte-b3douq")},m(r,s){ot(r,t,s)},p:bn,i:bn,o:bn,d(r){r&&it(t)}}}class uw extends ai{constructor(t){super(),si(this,t,null,cw,ri,{})}}function hw(e){let t;return{c(){t=kt("div"),t.innerHTML=`<p class="point svelte-krasw1">The parish and state-level data collected by Vera for this project reveals
    how both the state and local governments can scale back the destructive
    influence of mass incarceration. Local and state-level government bodies in
    Louisiana should do the following:</p> 
  <ul class="svelte-krasw1"><li class="svelte-krasw1">End Louisiana’s practice of housing distinct groups of people with vastly
      different needs in the same multi-use facilities; for example, housing
      juveniles at Louisiana State Penitentiary (Angola) and housing people with
      prison sentences in pretrial detention facilities, like parish jails. The
      state should use sentencing reform, applied retroactively, to reduce the
      number of incarcerated people to fit current Department of Public Safety &amp;
      Corrections capacity.</li> 

    <li class="svelte-krasw1">Pass a data transparency bill that standardizes the data a carceral
      facility must collect and report.</li> 

    <li class="svelte-krasw1">Reduce the prison population by providing parole eligibility after 20
      years to people serving long sentences and after 25 years to those serving
      life sentences; making parole-eligibility and sentencing reforms available
      retroactively; and implementing a felony classification system to
      eliminate inconsistencies in sentencing and release.</li> 

    <li class="svelte-krasw1">Pass legislation that allows people charged with non-violent felonies and
      misdemeanors to be issued a summons in lieu of arrest, and enact
      comprehensive bail reform so that money does not determine freedom.</li> 

    <li class="svelte-krasw1">Advance civilian responses to <a href="https://www.vera.org/behavioral-health-crisis-alternatives" target="_blank">911 calls that don’t require law enforcement</a>. Removing the police from encounters that don’t require them—like
      mental health crises,
      <a href="https://www.vera.org/ending-mass-incarceration/criminalization-racial-disparities/public-safety/redefining-public-safety-initiative/stop-the-stops" target="_blank">low-level traffic violations</a>, and noise complaints—is
      <a href="https://www.brookings.edu/essay/a-new-community-safety-blueprint-how-the-federal-government-can-address-violence-and-harm-through-a-public-health-approach/" target="_blank">proven to improve safety</a>, while also reducing arrests (and thus jail admissions).</li> 

    <li class="svelte-krasw1">Enact meaningful reforms that will allow for jail decarceration, and then
      close jails and repurpose carceral facilities for non-jail, non-detention
      purposes. Reducing corrections spending and ending mass incarceration in
      Louisiana will require lowering jail capacity. This means working towards
      permanently closing jails.</li></ul>`,ce(t,"id","bottom"),ce(t,"class","col-wide svelte-krasw1")},m(r,s){ot(r,t,s)},p:bn,i:bn,o:bn,d(r){r&&it(t)}}}class fw extends ai{constructor(t){super(),si(this,t,null,hw,ri,{})}}function dw(e){let t;return{c(){t=kt("div"),t.innerHTML=`<h2>About the Data</h2> 
  <p>Vera collected data for Louisiana’s prisons, jails, and juvenile justice
    facilities using information published on state and local government
    websites and the U.S. Bureau of Justice Statistics 2019 Census of Jails.
    Vera collected pretrial population data from reports prepared by the
    Louisiana Department of Public Safety &amp; Corrections (DPS&amp;C). Vera collected
    prison admission data from the DPS&amp;C Briefing Book. Vera collected arrest
    data from the FBI Uniform Crime Report accessed via Vera’s Arrest Trends
    tool. Vera collected budget data from the U.S. Census Annual Survey of
    Public Employment &amp; Payroll.</p> 

  <span class="more"><a href="/louisiana-locked-up/about-data">More</a></span>`,ce(t,"id","about-data"),ce(t,"class","svelte-n7jwkt")},m(r,s){ot(r,t,s)},p:bn,i:bn,o:bn,d(r){r&&it(t)}}}class nv extends ai{constructor(t){super(),si(this,t,null,dw,ri,{})}}function pw(e){let t,r,s;const l=e[2].default,c=wA(l,e,e[1],null);return{c(){t=kt("section"),r=kt("div"),c&&c.c(),ce(r,"class","col-wide"),Qn(t,"color",Df[e[0]].text),Qn(t,"background-color",Df[e[0]].background)},m(h,a){ot(h,t,a),st(t,r),c&&c.m(r,null),s=!0},p(h,[a]){c&&c.p&&(!s||a&2)&&xA(c,l,h,h[1],s?bA(l,h[1],a,null):BA(h[1]),null),(!s||a&1)&&Qn(t,"color",Df[h[0]].text),(!s||a&1)&&Qn(t,"background-color",Df[h[0]].background)},i(h){s||(Pt(c,h),s=!0)},o(h){Gt(c,h),s=!1},d(h){h&&it(t),c&&c.d(h)}}}function mw(e,t,r){let{$$slots:s={},$$scope:l}=t,{theme:c=Yo("theme")}=t;return e.$$set=h=>{"theme"in h&&r(0,c=h.theme),"$$scope"in h&&r(1,l=h.$$scope)},[c,l,s]}class gw extends ai{constructor(t){super(),si(this,t,mw,pw,ri,{theme:0})}}const{window:iv}=Ky,yw=e=>({}),h0=e=>({}),vw=e=>({}),f0=e=>({});function _w(e){let t,r,s,l,c,h,a,d;xu(e[19]);const _=e[18].background,p=wA(_,e,e[17],f0),E=e[18].foreground,w=wA(E,e,e[17],h0);return{c(){t=kt("svelte-scroller-outer"),r=kt("svelte-scroller-background-container"),s=kt("svelte-scroller-background"),p&&p.c(),l=$t(),c=kt("svelte-scroller-foreground"),w&&w.c(),Vd(s,"class","svelte-3stote"),Vd(r,"class","background-container svelte-3stote"),Vd(c,"class","svelte-3stote"),Vd(t,"class","svelte-3stote"),fp(t,"splitscreen",e[0])},m(x,k){ot(x,t,k),st(t,r),st(r,s),p&&p.m(s,null),e[20](s),e[21](r),st(t,l),st(t,c),w&&w.m(c,null),e[22](c),e[23](t),h=!0,a||(d=us(iv,"resize",e[19]),a=!0)},p(x,k){p&&p.p&&(!h||k[0]&131072)&&xA(p,_,x,x[17],h?bA(_,x[17],k,vw):BA(x[17]),f0),w&&w.p&&(!h||k[0]&131072)&&xA(w,E,x,x[17],h?bA(E,x[17],k,yw):BA(x[17]),h0),(!h||k[0]&1)&&fp(t,"splitscreen",x[0])},i(x){h||(Pt(p,x),Pt(w,x),h=!0)},o(x){Gt(p,x),Gt(w,x),h=!1},d(x){x&&it(t),p&&p.d(x),e[20](null),e[21](null),w&&w.d(x),e[22](null),e[23](null),a=!1,d()}}}const cc=[];let pp;if(typeof window<"u"){const e=()=>cc.forEach(t=>t());window.addEventListener("scroll",e),window.addEventListener("resize",e)}if(typeof IntersectionObserver<"u"){const e=new Map,t=new IntersectionObserver((r,s)=>{r.forEach(l=>{const c=e.get(l.target),h=cc.indexOf(c);l.isIntersecting?h===-1&&cc.push(c):(c(),h!==-1&&cc.splice(h,1))})},{rootMargin:"400px 0px"});pp={add:({outer:r,update:s})=>{const{top:l,bottom:c}=r.getBoundingClientRect();l<window.innerHeight&&c>0&&cc.push(s),e.set(r,s),t.observe(r)},remove:({outer:r,update:s})=>{const l=cc.indexOf(s);l!==-1&&cc.splice(l,1),e.delete(r),t.unobserve(r)}}}else pp={add:({update:e})=>{cc.push(e)},remove:({update:e})=>{const t=cc.indexOf(e);t!==-1&&cc.splice(t,1)}};function ww(e,t,r){let s,l,c,{$$slots:h={},$$scope:a}=t,{top:d=0}=t,{bottom:_=1}=t,{threshold:p=.5}=t,{query:E="section"}=t,{parallax:w=!1}=t,{index:x=0}=t,{count:k=0}=t,{offset:Q=0}=t,{progress:R=0}=t,{visible:M=!1}=t,{splitscreen:O=!1}=t,{id:G=null}=t,K,Z,$,he,fe,_e=0,ue,ee,se=1;Wa(()=>{fe=$.querySelectorAll(E),r(7,k=fe.length),me();const Oe={outer:K,update:me};return pp.add(Oe),()=>pp.remove(Oe)});function Be(){if(Z){let Oe=`position: ${ue?"fixed":"absolute"}; top: 0; transform: translate(0, ${ee}px); width: ${se}px; z-index: ${1};`;r(3,Z.style.cssText=Oe,Z)}}function me(){if(!$)return;const Oe=K.getBoundingClientRect();Oe.left,se=Oe.right-Oe.left;const Mt=$.getBoundingClientRect(),ne=he.getBoundingClientRect();r(10,M=Mt.top<_e&&Mt.bottom>0);const Se=Mt.bottom-Mt.top,ke=ne.bottom-ne.top,Ke=l-s;for(r(9,R=(s-Mt.top)/(Se-Ke)),R<=0?(ee=0,ue&&(ue=!1,Be())):R>=1?(ee=w?Se-ke:Se-Ke,ue&&(ue=!1,Be())):(ee=w?Math.round(s-R*(ke-Ke)):s,ue||(ue=!0,Be())),r(6,x=0);x<fe.length;r(6,x+=1)){const at=fe[x],{top:dt}=at.getBoundingClientRect(),Bt=fe[x+1],Ge=Bt?Bt.getBoundingClientRect().top:Mt.bottom;if(r(8,Q=(c-dt)/(Ge-dt)),r(11,G=at.dataset.id?at.dataset.id:null),Ge>=c)break}}function Pe(){r(1,_e=iv.innerHeight)}function ge(Oe){qa[Oe?"unshift":"push"](()=>{he=Oe,r(5,he)})}function Qe(Oe){qa[Oe?"unshift":"push"](()=>{Z=Oe,r(3,Z)})}function Te(Oe){qa[Oe?"unshift":"push"](()=>{$=Oe,r(4,$)})}function tt(Oe){qa[Oe?"unshift":"push"](()=>{K=Oe,r(2,K)})}return e.$$set=Oe=>{"top"in Oe&&r(12,d=Oe.top),"bottom"in Oe&&r(13,_=Oe.bottom),"threshold"in Oe&&r(14,p=Oe.threshold),"query"in Oe&&r(15,E=Oe.query),"parallax"in Oe&&r(16,w=Oe.parallax),"index"in Oe&&r(6,x=Oe.index),"count"in Oe&&r(7,k=Oe.count),"offset"in Oe&&r(8,Q=Oe.offset),"progress"in Oe&&r(9,R=Oe.progress),"visible"in Oe&&r(10,M=Oe.visible),"splitscreen"in Oe&&r(0,O=Oe.splitscreen),"id"in Oe&&r(11,G=Oe.id),"$$scope"in Oe&&r(17,a=Oe.$$scope)},e.$$.update=()=>{e.$$.dirty[0]&4098&&(s=Math.round(d*_e)),e.$$.dirty[0]&8194&&(l=Math.round(_*_e)),e.$$.dirty[0]&16386&&(c=Math.round(p*_e)),e.$$.dirty[0]&94208&&me()},[O,_e,K,Z,$,he,x,k,Q,R,M,G,d,_,p,E,w,a,h,Pe,ge,Qe,Te,tt]}class bw extends ai{constructor(t){super(),si(this,t,ww,_w,ri,{top:12,bottom:13,threshold:14,query:15,parallax:16,index:6,count:7,offset:8,progress:9,visible:10,splitscreen:0,id:11},null,[-1,-1])}}var Hl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function jS(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function xw(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function s(){if(this instanceof s){var l=[null];l.push.apply(l,arguments);var c=Function.bind.apply(t,l);return new c}return t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var l=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(r,s,l.get?l:{enumerable:!0,get:function(){return e[s]}})}),r}var Xm={},Bw={get exports(){return Xm},set exports(e){Xm=e}};(function(e,t){(function(r,s){e.exports=s()})(Hl,function(){var r,s,l;function c(a,d){if(!r)r=d;else if(!s)s=d;else{var _="var sharedChunk = {}; ("+r+")(sharedChunk); ("+s+")(sharedChunk);",p={};r(p),l=d(p),typeof window<"u"&&(l.workerUrl=window.URL.createObjectURL(new Blob([_],{type:"text/javascript"})))}}c(["exports"],function(a){var d=_;function _(o,n,A,f){this.cx=3*o,this.bx=3*(A-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(f-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=n,this.p2x=A,this.p2y=f}function p(o,n,A,f){const y=new d(o,n,A,f);return function(C){return y.solve(C)}}_.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,n){if(n===void 0&&(n=1e-6),o<0)return 0;if(o>1)return 1;for(var A=o,f=0;f<8;f++){var y=this.sampleCurveX(A)-o;if(Math.abs(y)<n)return A;var C=this.sampleCurveDerivativeX(A);if(Math.abs(C)<1e-6)break;A-=y/C}var I=0,D=1;for(A=o,f=0;f<20&&(y=this.sampleCurveX(A),!(Math.abs(y-o)<n));f++)o>y?I=A:D=A,A=.5*(D-I)+I;return A},solve:function(o,n){return this.sampleCurveY(this.solveCurveX(o,n))}};const E=p(.25,.1,.25,1);function w(o,n,A){return Math.min(A,Math.max(n,o))}function x(o,n,A){const f=A-n,y=((o-n)%f+f)%f+n;return y===n?A:y}function k(o,...n){for(const A of n)for(const f in A)o[f]=A[f];return o}let Q=1;function R(o,n){o.forEach(A=>{n[A]&&(n[A]=n[A].bind(n))})}function M(o,n,A){const f={};for(const y in o)f[y]=n.call(A||this,o[y],y,o);return f}function O(o,n,A){const f={};for(const y in o)n.call(A||this,o[y],y,o)&&(f[y]=o[y]);return f}function G(o){return Array.isArray(o)?o.map(G):typeof o=="object"&&o?M(o,G):o}const K={};function Z(o){K[o]||(typeof console<"u"&&console.warn(o),K[o]=!0)}function $(o,n,A){return(A.y-o.y)*(n.x-o.x)>(n.y-o.y)*(A.x-o.x)}function he(o){let n=0;for(let A,f,y=0,C=o.length,I=C-1;y<C;I=y++)A=o[y],f=o[I],n+=(f.x-A.x)*(A.y+f.y);return n}function fe(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function _e(o){const n={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(A,f,y,C)=>{const I=y||C;return n[f]=!I||I.toLowerCase(),""}),n["max-age"]){const A=parseInt(n["max-age"],10);isNaN(A)?delete n["max-age"]:n["max-age"]=A}return n}let ue,ee,se=null;function Be(o){if(se==null){const n=o.navigator?o.navigator.userAgent:null;se=!!o.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return se}function me(o){return typeof ImageBitmap<"u"&&o instanceof ImageBitmap}const Pe={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(o){const n=requestAnimationFrame(o);return{cancel:()=>cancelAnimationFrame(n)}},getImageData(o,n=0){const A=window.document.createElement("canvas"),f=A.getContext("2d");if(!f)throw new Error("failed to create canvas 2d context");return A.width=o.width,A.height=o.height,f.drawImage(o,0,0,o.width,o.height),f.getImageData(-n,-n,o.width+2*n,o.height+2*n)},resolveURL:o=>(ue||(ue=document.createElement("a")),ue.href=o,ue.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(ee==null&&(ee=matchMedia("(prefers-reduced-motion: reduce)")),ee.matches)}};var ge=Qe;function Qe(o,n){this.x=o,this.y=n}Qe.prototype={clone:function(){return new Qe(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,n){return this.clone()._rotateAround(o,n)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var n=o.x-this.x,A=o.y-this.y;return n*n+A*A},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,n){return Math.atan2(this.x*n-this.y*o,this.x*o+this.y*n)},_matMult:function(o){var n=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=n,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var n=Math.cos(o),A=Math.sin(o),f=A*this.x+n*this.y;return this.x=n*this.x-A*this.y,this.y=f,this},_rotateAround:function(o,n){var A=Math.cos(o),f=Math.sin(o),y=n.y+f*(this.x-n.x)+A*(this.y-n.y);return this.x=n.x+A*(this.x-n.x)-f*(this.y-n.y),this.y=y,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Qe.convert=function(o){return o instanceof Qe?o:Array.isArray(o)?new Qe(o[0],o[1]):o};const Te={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},tt="mapbox-tiles";let Oe,Mt,ne=500,Se=50;function ke(){typeof caches>"u"||Oe||(Oe=caches.open(tt))}let Ke=1/0;const at={supported:!1,testSupport:function(o){!Ge&&Bt&&(rt?Ut(o):dt=o)}};let dt,Bt,Ge=!1,rt=!1;function Ut(o){const n=o.createTexture();o.bindTexture(o.TEXTURE_2D,n);try{if(o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,Bt),o.isContextLost())return;at.supported=!0}catch{}o.deleteTexture(n),Ge=!0}typeof document<"u"&&(Bt=document.createElement("img"),Bt.onload=function(){dt&&Ut(dt),dt=null,rt=!0},Bt.onerror=function(){Ge=!0,dt=null},Bt.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const ht={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(ht);class Nt extends Error{constructor(n,A,f,y){super(`AJAXError: ${A} (${n}): ${f}`),this.status=n,this.statusText=A,this.url=f,this.body=y}}const dr=fe()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href;function Lt(o,n){const A=new AbortController,f=new Request(o.url,{method:o.method||"GET",body:o.body,credentials:o.credentials,headers:o.headers,referrer:dr(),signal:A.signal});let y=!1,C=!1;return o.type==="json"&&f.headers.set("Accept","application/json"),((I,D,H)=>{if(C)return;const X=Date.now();fetch(f).then(re=>re.ok?((le,ve,Ce)=>{(o.type==="arrayBuffer"?le.arrayBuffer():o.type==="json"?le.json():le.text()).then(Fe=>{C||(ve&&Ce&&function($e,Ze,Et){if(ke(),!Oe)return;const Kt={status:Ze.status,statusText:Ze.statusText,headers:new Headers};Ze.headers.forEach((Dt,or)=>Kt.headers.set(or,Dt));const xt=_e(Ze.headers.get("Cache-Control")||"");xt["no-store"]||(xt["max-age"]&&Kt.headers.set("Expires",new Date(Et+1e3*xt["max-age"]).toUTCString()),new Date(Kt.headers.get("Expires")).getTime()-Et<42e4||function(Dt,or){if(Mt===void 0)try{new Response(new ReadableStream),Mt=!0}catch{Mt=!1}Mt?or(Dt.body):Dt.blob().then(or)}(Ze,Dt=>{const or=new Response(Dt,Kt);ke(),Oe&&Oe.then(ar=>ar.put(function(Yr){const on=Yr.indexOf("?");return on<0?Yr:Yr.slice(0,on)}($e.url),or)).catch(ar=>Z(ar.message))}))}(f,ve,Ce),y=!0,n(null,Fe,le.headers.get("Cache-Control"),le.headers.get("Expires")))}).catch(Fe=>{C||n(new Error(Fe.message))})})(re,null,X):re.blob().then(le=>n(new Nt(re.status,re.statusText,o.url,le)))).catch(re=>{re.code!==20&&n(new Error(re.message))})})(),{cancel:()=>{C=!0,y||A.abort()}}}const ze=function(o,n){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){if(fe()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,n);if(!fe()){const f=o.url.substring(0,o.url.indexOf("://"));return(Te.REGISTERED_PROTOCOLS[f]||Lt)(o,n)}}if(!(/^file:/.test(A=o.url)||/^file:/.test(dr())&&!/^\w+:/.test(A))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return Lt(o,n);if(fe()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,n,void 0,!0)}var A;return function(f,y){const C=new XMLHttpRequest;C.open(f.method||"GET",f.url,!0),f.type==="arrayBuffer"&&(C.responseType="arraybuffer");for(const I in f.headers)C.setRequestHeader(I,f.headers[I]);return f.type==="json"&&(C.responseType="text",C.setRequestHeader("Accept","application/json")),C.withCredentials=f.credentials==="include",C.onerror=()=>{y(new Error(C.statusText))},C.onload=()=>{if((C.status>=200&&C.status<300||C.status===0)&&C.response!==null){let I=C.response;if(f.type==="json")try{I=JSON.parse(C.response)}catch(D){return y(D)}y(null,I,C.getResponseHeader("Cache-Control"),C.getResponseHeader("Expires"))}else{const I=new Blob([C.response],{type:C.getResponseHeader("Content-Type")});y(new Nt(C.status,C.statusText,f.url,I))}},C.send(f.body),{cancel:()=>C.abort()}}(o,n)},gr=function(o,n){return ze(k(o,{type:"arrayBuffer"}),n)};function sr(o){const n=window.document.createElement("a");return n.href=o,n.protocol===window.document.location.protocol&&n.host===window.document.location.host}const Ht="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let fr,Br;fr=[],Br=0;const vr=function(o,n){if(at.supported&&(o.headers||(o.headers={}),o.headers.accept="image/webp,*/*"),Br>=Te.MAX_PARALLEL_IMAGE_REQUESTS){const C={requestParameters:o,callback:n,cancelled:!1,cancel(){this.cancelled=!0}};return fr.push(C),C}Br++;let A=!1;const f=()=>{if(!A)for(A=!0,Br--;fr.length&&Br<Te.MAX_PARALLEL_IMAGE_REQUESTS;){const C=fr.shift(),{requestParameters:I,callback:D,cancelled:H}=C;H||(C.cancel=vr(I,D).cancel)}},y=gr(o,(C,I,D,H)=>{f(),C?n(C):I&&function(X,re){typeof createImageBitmap=="function"?function(le,ve){const Ce=new Blob([new Uint8Array(le)],{type:"image/png"});createImageBitmap(Ce).then(Fe=>{ve(null,Fe)}).catch(Fe=>{ve(new Error(`Could not load image because of ${Fe.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(X,re):function(le,ve){const Ce=new Image;Ce.onload=()=>{ve(null,Ce),URL.revokeObjectURL(Ce.src),Ce.onload=null,window.requestAnimationFrame(()=>{Ce.src=Ht})},Ce.onerror=()=>ve(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const Fe=new Blob([new Uint8Array(le)],{type:"image/png"});Ce.src=le.byteLength?URL.createObjectURL(Fe):Ht}(X,re)}(I,(X,re)=>{X!=null?n(X):re!=null&&n(null,re,{cacheControl:D,expires:H})})});return{cancel:()=>{y.cancel(),f()}}};function Gr(o,n,A){A[o]&&A[o].indexOf(n)!==-1||(A[o]=A[o]||[],A[o].push(n))}function rr(o,n,A){if(A&&A[o]){const f=A[o].indexOf(n);f!==-1&&A[o].splice(f,1)}}class xr{constructor(n,A={}){k(this,A),this.type=n}}class Zr extends xr{constructor(n,A={}){super("error",k({error:n},A))}}class pn{on(n,A){return this._listeners=this._listeners||{},Gr(n,A,this._listeners),this}off(n,A){return rr(n,A,this._listeners),rr(n,A,this._oneTimeListeners),this}once(n,A){return this._oneTimeListeners=this._oneTimeListeners||{},Gr(n,A,this._oneTimeListeners),this}fire(n,A){typeof n=="string"&&(n=new xr(n,A||{}));const f=n.type;if(this.listens(f)){n.target=this;const y=this._listeners&&this._listeners[f]?this._listeners[f].slice():[];for(const D of y)D.call(this,n);const C=this._oneTimeListeners&&this._oneTimeListeners[f]?this._oneTimeListeners[f].slice():[];for(const D of C)rr(f,D,this._oneTimeListeners),D.call(this,n);const I=this._eventedParent;I&&(k(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),I.fire(n))}else n instanceof Zr&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,A){return this._eventedParent=n,this._eventedParentData=A,this}}var vt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1},elevationOffset:{type:"number",default:450}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class nt{constructor(n,A,f,y){this.message=(n?`${n}: `:"")+f,y&&(this.identifier=y),A!=null&&A.__line__&&(this.line=A.__line__)}}function bt(o){const n=o.value;return n?[new nt(o.key,n,"constants have been deprecated as of v8")]:[]}function Ct(o,...n){for(const A of n)for(const f in A)o[f]=A[f];return o}function jt(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function er(o){if(Array.isArray(o))return o.map(er);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const n={};for(const A in o)n[A]=er(o[A]);return n}return jt(o)}class Vr extends Error{constructor(n,A){super(A),this.message=A,this.key=n}}class Fr{constructor(n,A=[]){this.parent=n,this.bindings={};for(const[f,y]of A)this.bindings[f]=y}concat(n){return new Fr(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}const un={kind:"null"},lr={kind:"number"},Er={kind:"string"},An={kind:"boolean"},wn={kind:"color"},_i={kind:"object"},br={kind:"value"},Cr={kind:"collator"},cr={kind:"formatted"},Kr={kind:"padding"},hn={kind:"resolvedImage"};function xn(o,n){return{kind:"array",itemType:o,N:n}}function Sn(o){if(o.kind==="array"){const n=Sn(o.itemType);return typeof o.N=="number"?`array<${n}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${n}>`}return o.kind}const ji=[un,lr,Er,An,wn,cr,_i,xn(br),Kr,hn];function tn(o,n){if(n.kind==="error")return null;if(o.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!tn(o.itemType,n.itemType))&&(typeof o.N!="number"||o.N===n.N))return null}else{if(o.kind===n.kind)return null;if(o.kind==="value"){for(const A of ji)if(!tn(A,n))return null}}return`Expected ${Sn(o)} but found ${Sn(n)} instead.`}function Wi(o,n){return n.some(A=>A.kind===o.kind)}function hs(o,n){return n.some(A=>A==="null"?o===null:A==="array"?Array.isArray(o):A==="object"?o&&!Array.isArray(o)&&typeof o=="object":A===typeof o)}var Ln,nn={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Ue(o){return(o=Math.round(o))<0?0:o>255?255:o}function Y(o){return Ue(o[o.length-1]==="%"?parseFloat(o)/100*255:parseInt(o))}function Ae(o){return(n=o[o.length-1]==="%"?parseFloat(o)/100:parseFloat(o))<0?0:n>1?1:n;var n}function Ee(o,n,A){return A<0?A+=1:A>1&&(A-=1),6*A<1?o+(n-o)*A*6:2*A<1?n:3*A<2?o+(n-o)*(2/3-A)*6:o}try{Ln={}.parseCSSColor=function(o){var n,A=o.replace(/ /g,"").toLowerCase();if(A in nn)return nn[A].slice();if(A[0]==="#")return A.length===4?(n=parseInt(A.substr(1),16))>=0&&n<=4095?[(3840&n)>>4|(3840&n)>>8,240&n|(240&n)>>4,15&n|(15&n)<<4,1]:null:A.length===7&&(n=parseInt(A.substr(1),16))>=0&&n<=16777215?[(16711680&n)>>16,(65280&n)>>8,255&n,1]:null;var f=A.indexOf("("),y=A.indexOf(")");if(f!==-1&&y+1===A.length){var C=A.substr(0,f),I=A.substr(f+1,y-(f+1)).split(","),D=1;switch(C){case"rgba":if(I.length!==4)return null;D=Ae(I.pop());case"rgb":return I.length!==3?null:[Y(I[0]),Y(I[1]),Y(I[2]),D];case"hsla":if(I.length!==4)return null;D=Ae(I.pop());case"hsl":if(I.length!==3)return null;var H=(parseFloat(I[0])%360+360)%360/360,X=Ae(I[1]),re=Ae(I[2]),le=re<=.5?re*(X+1):re+X-re*X,ve=2*re-le;return[Ue(255*Ee(ve,le,H+1/3)),Ue(255*Ee(ve,le,H)),Ue(255*Ee(ve,le,H-1/3)),D];default:return null}}return null}}catch{}class Le{constructor(n,A,f,y=1){this.r=n,this.g=A,this.b=f,this.a=y}static parse(n){if(!n)return;if(n instanceof Le)return n;if(typeof n!="string")return;const A=Ln(n);return A?new Le(A[0]/255*A[3],A[1]/255*A[3],A[2]/255*A[3],A[3]):void 0}toString(){const[n,A,f,y]=this.toArray();return`rgba(${Math.round(n)},${Math.round(A)},${Math.round(f)},${y})`}toArray(){const{r:n,g:A,b:f,a:y}=this;return y===0?[0,0,0,0]:[255*n/y,255*A/y,255*f/y,y]}}Le.black=new Le(0,0,0,1),Le.white=new Le(1,1,1,1),Le.transparent=new Le(0,0,0,0),Le.red=new Le(1,0,0,1);class Xe{constructor(n,A,f){this.sensitivity=n?A?"variant":"case":A?"accent":"base",this.locale=f,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,A){return this.collator.compare(n,A)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class lt{constructor(n,A,f,y,C){this.text=n,this.image=A,this.scale=f,this.fontStack=y,this.textColor=C}}class Ye{constructor(n){this.sections=n}static fromString(n){return new Ye([new lt(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof Ye?n:Ye.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}}class qe{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof qe)return n;if(typeof n=="number")return new qe([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(const A of n)if(typeof A!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return new qe(n)}}toString(){return JSON.stringify(this.values)}}class ut{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new ut({name:n,available:!1}):null}}function Ot(o,n,A,f){return typeof o=="number"&&o>=0&&o<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof A=="number"&&A>=0&&A<=255?f===void 0||typeof f=="number"&&f>=0&&f<=1?null:`Invalid rgba value [${[o,n,A,f].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof f=="number"?[o,n,A,f]:[o,n,A]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function nr(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof Le||o instanceof Xe||o instanceof Ye||o instanceof qe||o instanceof ut)return!0;if(Array.isArray(o)){for(const n of o)if(!nr(n))return!1;return!0}if(typeof o=="object"){for(const n in o)if(!nr(o[n]))return!1;return!0}return!1}function zt(o){if(o===null)return un;if(typeof o=="string")return Er;if(typeof o=="boolean")return An;if(typeof o=="number")return lr;if(o instanceof Le)return wn;if(o instanceof Xe)return Cr;if(o instanceof Ye)return cr;if(o instanceof qe)return Kr;if(o instanceof ut)return hn;if(Array.isArray(o)){const n=o.length;let A;for(const f of o){const y=zt(f);if(A){if(A===y)continue;A=br;break}A=y}return xn(A||br,n)}return _i}function jr(o){const n=typeof o;return o===null?"":n==="string"||n==="number"||n==="boolean"?String(o):o instanceof Le||o instanceof Ye||o instanceof qe||o instanceof ut?o.toString():JSON.stringify(o)}class Hr{constructor(n,A){this.type=n,this.value=A}static parse(n,A){if(n.length!==2)return A.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!nr(n[1]))return A.error("invalid value");const f=n[1];let y=zt(f);const C=A.expectedType;return y.kind!=="array"||y.N!==0||!C||C.kind!=="array"||typeof C.N=="number"&&C.N!==0||(y=C),new Hr(y,f)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Tr{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}}const ln={string:Er,number:lr,boolean:An,object:_i};class dn{constructor(n,A){this.type=n,this.args=A}static parse(n,A){if(n.length<2)return A.error("Expected at least one argument.");let f,y=1;const C=n[0];if(C==="array"){let D,H;if(n.length>2){const X=n[1];if(typeof X!="string"||!(X in ln)||X==="object")return A.error('The item type argument of "array" must be one of string, number, boolean',1);D=ln[X],y++}else D=br;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return A.error('The length argument to "array" must be a positive integer literal',2);H=n[2],y++}f=xn(D,H)}else{if(!ln[C])throw new Error(`Types doesn't contain name = ${C}`);f=ln[C]}const I=[];for(;y<n.length;y++){const D=A.parse(n[y],y,br);if(!D)return null;I.push(D)}return new dn(f,I)}evaluate(n){for(let A=0;A<this.args.length;A++){const f=this.args[A].evaluate(n);if(!tn(this.type,zt(f)))return f;if(A===this.args.length-1)throw new Tr(`Expected value to be of type ${Sn(this.type)}, but found ${Sn(zt(f))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const In={"to-boolean":An,"to-color":wn,"to-number":lr,"to-string":Er};class mn{constructor(n,A){this.type=n,this.args=A}static parse(n,A){if(n.length<2)return A.error("Expected at least one argument.");const f=n[0];if(!In[f])throw new Error(`Can't parse ${f} as it is not part of the known types`);if((f==="to-boolean"||f==="to-string")&&n.length!==2)return A.error("Expected one argument.");const y=In[f],C=[];for(let I=1;I<n.length;I++){const D=A.parse(n[I],I,br);if(!D)return null;C.push(D)}return new mn(y,C)}evaluate(n){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(n));if(this.type.kind==="color"){let A,f;for(const y of this.args){if(A=y.evaluate(n),f=null,A instanceof Le)return A;if(typeof A=="string"){const C=n.parseColor(A);if(C)return C}else if(Array.isArray(A)&&(f=A.length<3||A.length>4?`Invalid rbga value ${JSON.stringify(A)}: expected an array containing either three or four numeric values.`:Ot(A[0],A[1],A[2],A[3]),!f))return new Le(A[0]/255,A[1]/255,A[2]/255,A[3])}throw new Tr(f||`Could not parse color from value '${typeof A=="string"?A:JSON.stringify(A)}'`)}if(this.type.kind==="padding"){let A;for(const f of this.args){A=f.evaluate(n);const y=qe.parse(A);if(y)return y}throw new Tr(`Could not parse padding from value '${typeof A=="string"?A:JSON.stringify(A)}'`)}if(this.type.kind==="number"){let A=null;for(const f of this.args){if(A=f.evaluate(n),A===null)return 0;const y=Number(A);if(!isNaN(y))return y}throw new Tr(`Could not convert ${JSON.stringify(A)} to number.`)}return this.type.kind==="formatted"?Ye.fromString(jr(this.args[0].evaluate(n))):this.type.kind==="resolvedImage"?ut.fromString(jr(this.args[0].evaluate(n))):jr(this.args[0].evaluate(n))}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const Bn=["Unknown","Point","LineString","Polygon"];class kn{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Bn[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let A=this._parseColorCache[n];return A||(A=this._parseColorCache[n]=Le.parse(n)),A}}class Vn{constructor(n,A,f,y){this.name=n,this.type=A,this._evaluate=f,this.args=y}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,A){const f=n[0],y=Vn.definitions[f];if(!y)return A.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0);const C=Array.isArray(y)?y[0]:y.type,I=Array.isArray(y)?[[y[1],y[2]]]:y.overloads,D=I.filter(([X])=>!Array.isArray(X)||X.length===n.length-1);let H=null;for(const[X,re]of D){H=new ka(A.registry,A.path,null,A.scope);const le=[];let ve=!1;for(let Ce=1;Ce<n.length;Ce++){const Fe=n[Ce],$e=Array.isArray(X)?X[Ce-1]:X.type,Ze=H.parse(Fe,1+le.length,$e);if(!Ze){ve=!0;break}le.push(Ze)}if(!ve)if(Array.isArray(X)&&X.length!==le.length)H.error(`Expected ${X.length} arguments, but found ${le.length} instead.`);else{for(let Ce=0;Ce<le.length;Ce++){const Fe=Array.isArray(X)?X[Ce]:X.type,$e=le[Ce];H.concat(Ce+1).checkSubtype(Fe,$e.type)}if(H.errors.length===0)return new Vn(f,C,re,le)}}if(D.length===1)A.errors.push(...H.errors);else{const X=(D.length?D:I).map(([le])=>{return ve=le,Array.isArray(ve)?`(${ve.map(Sn).join(", ")})`:`(${Sn(ve.type)}...)`;var ve}).join(" | "),re=[];for(let le=1;le<n.length;le++){const ve=A.parse(n[le],1+re.length);if(!ve)return null;re.push(Sn(ve.type))}A.error(`Expected arguments of type ${X}, but found (${re.join(", ")}) instead.`)}return null}static register(n,A){Vn.definitions=A;for(const f in A)n[f]=Vn}}class Ti{constructor(n,A,f){this.type=Cr,this.locale=f,this.caseSensitive=n,this.diacriticSensitive=A}static parse(n,A){if(n.length!==2)return A.error("Expected one argument.");const f=n[1];if(typeof f!="object"||Array.isArray(f))return A.error("Collator options argument must be an object.");const y=A.parse(f["case-sensitive"]!==void 0&&f["case-sensitive"],1,An);if(!y)return null;const C=A.parse(f["diacritic-sensitive"]!==void 0&&f["diacritic-sensitive"],1,An);if(!C)return null;let I=null;return f.locale&&(I=A.parse(f.locale,1,Er),!I)?null:new Ti(y,C,I)}evaluate(n){return new Xe(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}const oi=8192;function wi(o,n){o[0]=Math.min(o[0],n[0]),o[1]=Math.min(o[1],n[1]),o[2]=Math.max(o[2],n[0]),o[3]=Math.max(o[3],n[1])}function Qs(o,n){return!(o[0]<=n[0]||o[2]>=n[2]||o[1]<=n[1]||o[3]>=n[3])}function bi(o,n){const A=(180+o[0])/360,f=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,y=Math.pow(2,n.z);return[Math.round(A*y*oi),Math.round(f*y*oi)]}function Yn(o,n,A){const f=o[0]-n[0],y=o[1]-n[1],C=o[0]-A[0],I=o[1]-A[1];return f*I-C*y==0&&f*C<=0&&y*I<=0}function Za(o,n){let A=!1;for(let I=0,D=n.length;I<D;I++){const H=n[I];for(let X=0,re=H.length;X<re-1;X++){if(Yn(o,H[X],H[X+1]))return!1;(y=H[X])[1]>(f=o)[1]!=(C=H[X+1])[1]>f[1]&&f[0]<(C[0]-y[0])*(f[1]-y[1])/(C[1]-y[1])+y[0]&&(A=!A)}}var f,y,C;return A}function Ks(o,n){for(let A=0;A<n.length;A++)if(Za(o,n[A]))return!0;return!1}function Gs(o,n,A,f){const y=f[0]-A[0],C=f[1]-A[1],I=(o[0]-A[0])*C-y*(o[1]-A[1]),D=(n[0]-A[0])*C-y*(n[1]-A[1]);return I>0&&D<0||I<0&&D>0}function ia(o,n,A){for(const X of A)for(let re=0;re<X.length-1;++re)if((D=[(I=X[re+1])[0]-(C=X[re])[0],I[1]-C[1]])[0]*(H=[(y=n)[0]-(f=o)[0],y[1]-f[1]])[1]-D[1]*H[0]!=0&&Gs(f,y,C,I)&&Gs(C,I,f,y))return!0;var f,y,C,I,D,H;return!1}function gs(o,n){for(let A=0;A<o.length;++A)if(!Za(o[A],n))return!1;for(let A=0;A<o.length-1;++A)if(ia(o[A],o[A+1],n))return!1;return!0}function Ri(o,n){for(let A=0;A<n.length;A++)if(gs(o,n[A]))return!0;return!1}function Xi(o,n,A){const f=[];for(let y=0;y<o.length;y++){const C=[];for(let I=0;I<o[y].length;I++){const D=bi(o[y][I],A);wi(n,D),C.push(D)}f.push(C)}return f}function mo(o,n,A){const f=[];for(let y=0;y<o.length;y++){const C=Xi(o[y],n,A);f.push(C)}return f}function nA(o,n,A,f){if(o[0]<A[0]||o[0]>A[2]){const y=.5*f;let C=o[0]-A[0]>y?-f:A[0]-o[0]>y?f:0;C===0&&(C=o[0]-A[2]>y?-f:A[2]-o[0]>y?f:0),o[0]+=C}wi(n,o)}function EA(o,n,A,f){const y=Math.pow(2,f.z)*oi,C=[f.x*oi,f.y*oi],I=[];for(const D of o)for(const H of D){const X=[H.x+C[0],H.y+C[1]];nA(X,n,A,y),I.push(X)}return I}function sa(o,n,A,f){const y=Math.pow(2,f.z)*oi,C=[f.x*oi,f.y*oi],I=[];for(const H of o){const X=[];for(const re of H){const le=[re.x+C[0],re.y+C[1]];wi(n,le),X.push(le)}I.push(X)}if(n[2]-n[0]<=y/2){(D=n)[0]=D[1]=1/0,D[2]=D[3]=-1/0;for(const H of I)for(const X of H)nA(X,n,A,y)}var D;return I}class bs{constructor(n,A){this.type=An,this.geojson=n,this.geometries=A}static parse(n,A){if(n.length!==2)return A.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(nr(n[1])){const f=n[1];if(f.type==="FeatureCollection")for(let y=0;y<f.features.length;++y){const C=f.features[y].geometry.type;if(C==="Polygon"||C==="MultiPolygon")return new bs(f,f.features[y].geometry)}else if(f.type==="Feature"){const y=f.geometry.type;if(y==="Polygon"||y==="MultiPolygon")return new bs(f,f.geometry)}else if(f.type==="Polygon"||f.type==="MultiPolygon")return new bs(f,f)}return A.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(A,f){const y=[1/0,1/0,-1/0,-1/0],C=[1/0,1/0,-1/0,-1/0],I=A.canonicalID();if(f.type==="Polygon"){const D=Xi(f.coordinates,C,I),H=EA(A.geometry(),y,C,I);if(!Qs(y,C))return!1;for(const X of H)if(!Za(X,D))return!1}if(f.type==="MultiPolygon"){const D=mo(f.coordinates,C,I),H=EA(A.geometry(),y,C,I);if(!Qs(y,C))return!1;for(const X of H)if(!Ks(X,D))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(A,f){const y=[1/0,1/0,-1/0,-1/0],C=[1/0,1/0,-1/0,-1/0],I=A.canonicalID();if(f.type==="Polygon"){const D=Xi(f.coordinates,C,I),H=sa(A.geometry(),y,C,I);if(!Qs(y,C))return!1;for(const X of H)if(!gs(X,D))return!1}if(f.type==="MultiPolygon"){const D=mo(f.coordinates,C,I),H=sa(A.geometry(),y,C,I);if(!Qs(y,C))return!1;for(const X of H)if(!Ri(X,D))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}function xs(o){if(o instanceof Vn&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof bs)return!1;let n=!0;return o.eachChild(A=>{n&&!xs(A)&&(n=!1)}),n}function Ja(o){if(o instanceof Vn&&o.name==="feature-state")return!1;let n=!0;return o.eachChild(A=>{n&&!Ja(A)&&(n=!1)}),n}function aa(o,n){if(o instanceof Vn&&n.indexOf(o.name)>=0)return!1;let A=!0;return o.eachChild(f=>{A&&!aa(f,n)&&(A=!1)}),A}class Po{constructor(n,A){this.type=A.type,this.name=n,this.boundExpression=A}static parse(n,A){if(n.length!==2||typeof n[1]!="string")return A.error("'var' expression requires exactly one string literal argument.");const f=n[1];return A.scope.has(f)?new Po(f,A.scope.get(f)):A.error(`Unknown variable "${f}". Make sure "${f}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class ka{constructor(n,A=[],f,y=new Fr,C=[]){this.registry=n,this.path=A,this.key=A.map(I=>`[${I}]`).join(""),this.scope=y,this.errors=C,this.expectedType=f}parse(n,A,f,y,C={}){return A?this.concat(A,f,y)._parse(n,C):this._parse(n,C)}_parse(n,A){function f(y,C,I){return I==="assert"?new dn(C,[y]):I==="coerce"?new mn(C,[y]):y}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const y=n[0];if(typeof y!="string")return this.error(`Expression name must be a string, but found ${typeof y} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const C=this.registry[y];if(C){let I=C.parse(n,this);if(!I)return null;if(this.expectedType){const D=this.expectedType,H=I.type;if(D.kind!=="string"&&D.kind!=="number"&&D.kind!=="boolean"&&D.kind!=="object"&&D.kind!=="array"||H.kind!=="value")if(D.kind!=="color"&&D.kind!=="formatted"&&D.kind!=="resolvedImage"||H.kind!=="value"&&H.kind!=="string")if(D.kind!=="padding"||H.kind!=="value"&&H.kind!=="number"&&H.kind!=="array"){if(this.checkSubtype(D,H))return null}else I=f(I,D,A.typeAnnotation||"coerce");else I=f(I,D,A.typeAnnotation||"coerce");else I=f(I,D,A.typeAnnotation||"assert")}if(!(I instanceof Hr)&&I.type.kind!=="resolvedImage"&&Mo(I)){const D=new kn;try{I=new Hr(I.type,I.evaluate(D))}catch(H){return this.error(H.message),null}}return I}return this.error(`Unknown expression "${y}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,A,f){const y=typeof n=="number"?this.path.concat(n):this.path,C=f?this.scope.concat(f):this.scope;return new ka(this.registry,y,A||null,C,this.errors)}error(n,...A){const f=`${this.key}${A.map(y=>`[${y}]`).join("")}`;this.errors.push(new Vr(f,n))}checkSubtype(n,A){const f=tn(n,A);return f&&this.error(f),f}}function Mo(o){if(o instanceof Po)return Mo(o.boundExpression);if(o instanceof Vn&&o.name==="error"||o instanceof Ti||o instanceof bs)return!1;const n=o instanceof mn||o instanceof dn;let A=!0;return o.eachChild(f=>{A=n?A&&Mo(f):A&&f instanceof Hr}),!!A&&xs(o)&&aa(o,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function oa(o,n){const A=o.length-1;let f,y,C=0,I=A,D=0;for(;C<=I;)if(D=Math.floor((C+I)/2),f=o[D],y=o[D+1],f<=n){if(D===A||n<y)return D;C=D+1}else{if(!(f>n))throw new Tr("Input is not a number.");I=D-1}return 0}class qs{constructor(n,A,f){this.type=n,this.input=A,this.labels=[],this.outputs=[];for(const[y,C]of f)this.labels.push(y),this.outputs.push(C)}static parse(n,A){if(n.length-1<4)return A.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return A.error("Expected an even number of arguments.");const f=A.parse(n[1],1,lr);if(!f)return null;const y=[];let C=null;A.expectedType&&A.expectedType.kind!=="value"&&(C=A.expectedType);for(let I=1;I<n.length;I+=2){const D=I===1?-1/0:n[I],H=n[I+1],X=I,re=I+1;if(typeof D!="number")return A.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',X);if(y.length&&y[y.length-1][0]>=D)return A.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',X);const le=A.parse(H,re,C);if(!le)return null;C=C||le.type,y.push([D,le])}return new qs(C,f,y)}evaluate(n){const A=this.labels,f=this.outputs;if(A.length===1)return f[0].evaluate(n);const y=this.input.evaluate(n);if(y<=A[0])return f[0].evaluate(n);const C=A.length;return y>=A[C-1]?f[C-1].evaluate(n):f[oa(A,y)].evaluate(n)}eachChild(n){n(this.input);for(const A of this.outputs)n(A)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function ni(o,n,A){return o*(1-A)+n*A}var Bs=Object.freeze({__proto__:null,number:ni,color:function(o,n,A){return new Le(ni(o.r,n.r,A),ni(o.g,n.g,A),ni(o.b,n.b,A),ni(o.a,n.a,A))},array:function(o,n,A){return o.map((f,y)=>ni(f,n[y],A))},padding:function(o,n,A){const f=o.values,y=n.values;return new qe([ni(f[0],y[0],A),ni(f[1],y[1],A),ni(f[2],y[2],A),ni(f[3],y[3],A)])}});const ys=.95047,iA=1.08883,sA=4/29,Cn=6/29,qA=3*Cn*Cn,ml=Math.PI/180,Pa=180/Math.PI;function go(o){return o>.008856451679035631?Math.pow(o,1/3):o/qA+sA}function aA(o){return o>Cn?o*o*o:qA*(o-sA)}function yo(o){return 255*(o<=.0031308?12.92*o:1.055*Math.pow(o,1/2.4)-.055)}function gt(o){return(o/=255)<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function Mn(o){const n=gt(o.r),A=gt(o.g),f=gt(o.b),y=go((.4124564*n+.3575761*A+.1804375*f)/ys),C=go((.2126729*n+.7151522*A+.072175*f)/1);return{l:116*C-16,a:500*(y-C),b:200*(C-go((.0193339*n+.119192*A+.9503041*f)/iA)),alpha:o.a}}function Ds(o){let n=(o.l+16)/116,A=isNaN(o.a)?n:n+o.a/500,f=isNaN(o.b)?n:n-o.b/200;return n=1*aA(n),A=ys*aA(A),f=iA*aA(f),new Le(yo(3.2404542*A-1.5371385*n-.4985314*f),yo(-.969266*A+1.8760108*n+.041556*f),yo(.0556434*A-.2040259*n+1.0572252*f),o.alpha)}function Oi(o,n,A){const f=n-o;return o+A*(f>180||f<-180?f-360*Math.round(f/360):f)}const ks={forward:Mn,reverse:Ds,interpolate:function(o,n,A){return{l:ni(o.l,n.l,A),a:ni(o.a,n.a,A),b:ni(o.b,n.b,A),alpha:ni(o.alpha,n.alpha,A)}}},ya={forward:function(o){const{l:n,a:A,b:f}=Mn(o),y=Math.atan2(f,A)*Pa;return{h:y<0?y+360:y,c:Math.sqrt(A*A+f*f),l:n,alpha:o.a}},reverse:function(o){const n=o.h*ml,A=o.c;return Ds({l:o.l,a:Math.cos(n)*A,b:Math.sin(n)*A,alpha:o.alpha})},interpolate:function(o,n,A){return{h:Oi(o.h,n.h,A),c:ni(o.c,n.c,A),l:ni(o.l,n.l,A),alpha:ni(o.alpha,n.alpha,A)}}};var Ya=Object.freeze({__proto__:null,lab:ks,hcl:ya});class Cs{constructor(n,A,f,y,C){this.type=n,this.operator=A,this.interpolation=f,this.input=y,this.labels=[],this.outputs=[];for(const[I,D]of C)this.labels.push(I),this.outputs.push(D)}static interpolationFactor(n,A,f,y){let C=0;if(n.name==="exponential")C=Aa(A,n.base,f,y);else if(n.name==="linear")C=Aa(A,1,f,y);else if(n.name==="cubic-bezier"){const I=n.controlPoints;C=new d(I[0],I[1],I[2],I[3]).solve(Aa(A,1,f,y))}return C}static parse(n,A){let[f,y,C,...I]=n;if(!Array.isArray(y)||y.length===0)return A.error("Expected an interpolation type expression.",1);if(y[0]==="linear")y={name:"linear"};else if(y[0]==="exponential"){const X=y[1];if(typeof X!="number")return A.error("Exponential interpolation requires a numeric base.",1,1);y={name:"exponential",base:X}}else{if(y[0]!=="cubic-bezier")return A.error(`Unknown interpolation type ${String(y[0])}`,1,0);{const X=y.slice(1);if(X.length!==4||X.some(re=>typeof re!="number"||re<0||re>1))return A.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);y={name:"cubic-bezier",controlPoints:X}}}if(n.length-1<4)return A.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return A.error("Expected an even number of arguments.");if(C=A.parse(C,2,lr),!C)return null;const D=[];let H=null;f==="interpolate-hcl"||f==="interpolate-lab"?H=wn:A.expectedType&&A.expectedType.kind!=="value"&&(H=A.expectedType);for(let X=0;X<I.length;X+=2){const re=I[X],le=I[X+1],ve=X+3,Ce=X+4;if(typeof re!="number")return A.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ve);if(D.length&&D[D.length-1][0]>=re)return A.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ve);const Fe=A.parse(le,Ce,H);if(!Fe)return null;H=H||Fe.type,D.push([re,Fe])}return H.kind==="number"||H.kind==="color"||H.kind==="padding"||H.kind==="array"&&H.itemType.kind==="number"&&typeof H.N=="number"?new Cs(H,f,y,C,D):A.error(`Type ${Sn(H)} is not interpolatable.`)}evaluate(n){const A=this.labels,f=this.outputs;if(A.length===1)return f[0].evaluate(n);const y=this.input.evaluate(n);if(y<=A[0])return f[0].evaluate(n);const C=A.length;if(y>=A[C-1])return f[C-1].evaluate(n);const I=oa(A,y),D=Cs.interpolationFactor(this.interpolation,y,A[I],A[I+1]),H=f[I].evaluate(n),X=f[I+1].evaluate(n);return this.operator==="interpolate"?Bs[this.type.kind.toLowerCase()](H,X,D):this.operator==="interpolate-hcl"?ya.reverse(ya.interpolate(ya.forward(H),ya.forward(X),D)):ks.reverse(ks.interpolate(ks.forward(H),ks.forward(X),D))}eachChild(n){n(this.input);for(const A of this.outputs)n(A)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function Aa(o,n,A,f){const y=f-A,C=o-A;return y===0?0:n===1?C/y:(Math.pow(n,C)-1)/(Math.pow(n,y)-1)}class $a{constructor(n,A){this.type=n,this.args=A}static parse(n,A){if(n.length<2)return A.error("Expectected at least one argument.");let f=null;const y=A.expectedType;y&&y.kind!=="value"&&(f=y);const C=[];for(const D of n.slice(1)){const H=A.parse(D,1+C.length,f,void 0,{typeAnnotation:"omit"});if(!H)return null;f=f||H.type,C.push(H)}if(!f)throw new Error("No output type");const I=y&&C.some(D=>tn(y,D.type));return new $a(I?br:f,C)}evaluate(n){let A,f=null,y=0;for(const C of this.args)if(y++,f=C.evaluate(n),f&&f instanceof ut&&!f.available&&(A||(A=f.name),f=null,y===this.args.length&&(f=A)),f!==null)break;return f}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}class va{constructor(n,A){this.type=A.type,this.bindings=[].concat(n),this.result=A}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const A of this.bindings)n(A[1]);n(this.result)}static parse(n,A){if(n.length<4)return A.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const f=[];for(let C=1;C<n.length-1;C+=2){const I=n[C];if(typeof I!="string")return A.error(`Expected string, but found ${typeof I} instead.`,C);if(/[^a-zA-Z0-9_]/.test(I))return A.error("Variable names must contain only alphanumeric characters or '_'.",C);const D=A.parse(n[C+1],C+1);if(!D)return null;f.push([I,D])}const y=A.parse(n[n.length-1],n.length-1,A.expectedType,f);return y?new va(f,y):null}outputDefined(){return this.result.outputDefined()}}class WA{constructor(n,A,f){this.type=n,this.index=A,this.input=f}static parse(n,A){if(n.length!==3)return A.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const f=A.parse(n[1],1,lr),y=A.parse(n[2],2,xn(A.expectedType||br));return f&&y?new WA(y.type.itemType,f,y):null}evaluate(n){const A=this.index.evaluate(n),f=this.input.evaluate(n);if(A<0)throw new Tr(`Array index out of bounds: ${A} < 0.`);if(A>=f.length)throw new Tr(`Array index out of bounds: ${A} > ${f.length-1}.`);if(A!==Math.floor(A))throw new Tr(`Array index must be an integer, but found ${A} instead.`);return f[A]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class es{constructor(n,A){this.type=An,this.needle=n,this.haystack=A}static parse(n,A){if(n.length!==3)return A.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const f=A.parse(n[1],1,br),y=A.parse(n[2],2,br);return f&&y?Wi(f.type,[An,Er,lr,un,br])?new es(f,y):A.error(`Expected first argument to be of type boolean, string, number or null, but found ${Sn(f.type)} instead`):null}evaluate(n){const A=this.needle.evaluate(n),f=this.haystack.evaluate(n);if(!f)return!1;if(!hs(A,["boolean","string","number","null"]))throw new Tr(`Expected first argument to be of type boolean, string, number or null, but found ${Sn(zt(A))} instead.`);if(!hs(f,["string","array"]))throw new Tr(`Expected second argument to be of type array or string, but found ${Sn(zt(f))} instead.`);return f.indexOf(A)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class FA{constructor(n,A,f){this.type=lr,this.needle=n,this.haystack=A,this.fromIndex=f}static parse(n,A){if(n.length<=2||n.length>=5)return A.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const f=A.parse(n[1],1,br),y=A.parse(n[2],2,br);if(!f||!y)return null;if(!Wi(f.type,[An,Er,lr,un,br]))return A.error(`Expected first argument to be of type boolean, string, number or null, but found ${Sn(f.type)} instead`);if(n.length===4){const C=A.parse(n[3],3,lr);return C?new FA(f,y,C):null}return new FA(f,y)}evaluate(n){const A=this.needle.evaluate(n),f=this.haystack.evaluate(n);if(!hs(A,["boolean","string","number","null"]))throw new Tr(`Expected first argument to be of type boolean, string, number or null, but found ${Sn(zt(A))} instead.`);if(!hs(f,["string","array"]))throw new Tr(`Expected second argument to be of type array or string, but found ${Sn(zt(f))} instead.`);if(this.fromIndex){const y=this.fromIndex.evaluate(n);return f.indexOf(A,y)}return f.indexOf(A)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class eo{constructor(n,A,f,y,C,I){this.inputType=n,this.type=A,this.input=f,this.cases=y,this.outputs=C,this.otherwise=I}static parse(n,A){if(n.length<5)return A.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return A.error("Expected an even number of arguments.");let f,y;A.expectedType&&A.expectedType.kind!=="value"&&(y=A.expectedType);const C={},I=[];for(let X=2;X<n.length-1;X+=2){let re=n[X];const le=n[X+1];Array.isArray(re)||(re=[re]);const ve=A.concat(X);if(re.length===0)return ve.error("Expected at least one branch label.");for(const Fe of re){if(typeof Fe!="number"&&typeof Fe!="string")return ve.error("Branch labels must be numbers or strings.");if(typeof Fe=="number"&&Math.abs(Fe)>Number.MAX_SAFE_INTEGER)return ve.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Fe=="number"&&Math.floor(Fe)!==Fe)return ve.error("Numeric branch labels must be integer values.");if(f){if(ve.checkSubtype(f,zt(Fe)))return null}else f=zt(Fe);if(C[String(Fe)]!==void 0)return ve.error("Branch labels must be unique.");C[String(Fe)]=I.length}const Ce=A.parse(le,X,y);if(!Ce)return null;y=y||Ce.type,I.push(Ce)}const D=A.parse(n[1],1,br);if(!D)return null;const H=A.parse(n[n.length-1],n.length-1,y);return H?D.type.kind!=="value"&&A.concat(1).checkSubtype(f,D.type)?null:new eo(f,y,D,C,I,H):null}evaluate(n){const A=this.input.evaluate(n);return(zt(A)===this.inputType&&this.outputs[this.cases[A]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}}class to{constructor(n,A,f){this.type=n,this.branches=A,this.otherwise=f}static parse(n,A){if(n.length<4)return A.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return A.error("Expected an odd number of arguments.");let f;A.expectedType&&A.expectedType.kind!=="value"&&(f=A.expectedType);const y=[];for(let I=1;I<n.length-1;I+=2){const D=A.parse(n[I],I,An);if(!D)return null;const H=A.parse(n[I+1],I+1,f);if(!H)return null;y.push([D,H]),f=f||H.type}const C=A.parse(n[n.length-1],n.length-1,f);if(!C)return null;if(!f)throw new Error("Can't infer output type");return new to(f,y,C)}evaluate(n){for(const[A,f]of this.branches)if(A.evaluate(n))return f.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[A,f]of this.branches)n(A),n(f);n(this.otherwise)}outputDefined(){return this.branches.every(([n,A])=>A.outputDefined())&&this.otherwise.outputDefined()}}class ro{constructor(n,A,f,y){this.type=n,this.input=A,this.beginIndex=f,this.endIndex=y}static parse(n,A){if(n.length<=2||n.length>=5)return A.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const f=A.parse(n[1],1,br),y=A.parse(n[2],2,lr);if(!f||!y)return null;if(!Wi(f.type,[xn(br),Er,br]))return A.error(`Expected first argument to be of type array or string, but found ${Sn(f.type)} instead`);if(n.length===4){const C=A.parse(n[3],3,lr);return C?new ro(f.type,f,y,C):null}return new ro(f.type,f,y)}evaluate(n){const A=this.input.evaluate(n),f=this.beginIndex.evaluate(n);if(!hs(A,["string","array"]))throw new Tr(`Expected first argument to be of type array or string, but found ${Sn(zt(A))} instead.`);if(this.endIndex){const y=this.endIndex.evaluate(n);return A.slice(f,y)}return A.slice(f)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function ql(o,n){return o==="=="||o==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function Do(o,n,A,f){return f.compare(n,A)===0}function vs(o,n,A){const f=o!=="=="&&o!=="!=";return class sv{constructor(C,I,D){this.type=An,this.lhs=C,this.rhs=I,this.collator=D,this.hasUntypedArgument=C.type.kind==="value"||I.type.kind==="value"}static parse(C,I){if(C.length!==3&&C.length!==4)return I.error("Expected two or three arguments.");const D=C[0];let H=I.parse(C[1],1,br);if(!H)return null;if(!ql(D,H.type))return I.concat(1).error(`"${D}" comparisons are not supported for type '${Sn(H.type)}'.`);let X=I.parse(C[2],2,br);if(!X)return null;if(!ql(D,X.type))return I.concat(2).error(`"${D}" comparisons are not supported for type '${Sn(X.type)}'.`);if(H.type.kind!==X.type.kind&&H.type.kind!=="value"&&X.type.kind!=="value")return I.error(`Cannot compare types '${Sn(H.type)}' and '${Sn(X.type)}'.`);f&&(H.type.kind==="value"&&X.type.kind!=="value"?H=new dn(X.type,[H]):H.type.kind!=="value"&&X.type.kind==="value"&&(X=new dn(H.type,[X])));let re=null;if(C.length===4){if(H.type.kind!=="string"&&X.type.kind!=="string"&&H.type.kind!=="value"&&X.type.kind!=="value")return I.error("Cannot use collator to compare non-string types.");if(re=I.parse(C[3],3,Cr),!re)return null}return new sv(H,X,re)}evaluate(C){const I=this.lhs.evaluate(C),D=this.rhs.evaluate(C);if(f&&this.hasUntypedArgument){const H=zt(I),X=zt(D);if(H.kind!==X.kind||H.kind!=="string"&&H.kind!=="number")throw new Tr(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${H.kind}, ${X.kind}) instead.`)}if(this.collator&&!f&&this.hasUntypedArgument){const H=zt(I),X=zt(D);if(H.kind!=="string"||X.kind!=="string")return n(C,I,D)}return this.collator?A(C,I,D,this.collator.evaluate(C)):n(C,I,D)}eachChild(C){C(this.lhs),C(this.rhs),this.collator&&C(this.collator)}outputDefined(){return!0}}}const oA=vs("==",function(o,n,A){return n===A},Do),AA=vs("!=",function(o,n,A){return n!==A},function(o,n,A,f){return!Do(0,n,A,f)}),_c=vs("<",function(o,n,A){return n<A},function(o,n,A,f){return f.compare(n,A)<0}),_a=vs(">",function(o,n,A){return n>A},function(o,n,A,f){return f.compare(n,A)>0}),XA=vs("<=",function(o,n,A){return n<=A},function(o,n,A,f){return f.compare(n,A)<=0}),SA=vs(">=",function(o,n,A){return n>=A},function(o,n,A,f){return f.compare(n,A)>=0});class IA{constructor(n,A,f,y,C){this.type=Er,this.number=n,this.locale=A,this.currency=f,this.minFractionDigits=y,this.maxFractionDigits=C}static parse(n,A){if(n.length!==3)return A.error("Expected two arguments.");const f=A.parse(n[1],1,lr);if(!f)return null;const y=n[2];if(typeof y!="object"||Array.isArray(y))return A.error("NumberFormat options argument must be an object.");let C=null;if(y.locale&&(C=A.parse(y.locale,1,Er),!C))return null;let I=null;if(y.currency&&(I=A.parse(y.currency,1,Er),!I))return null;let D=null;if(y["min-fraction-digits"]&&(D=A.parse(y["min-fraction-digits"],1,lr),!D))return null;let H=null;return y["max-fraction-digits"]&&(H=A.parse(y["max-fraction-digits"],1,lr),!H)?null:new IA(f,C,I,D,H)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class TA{constructor(n){this.type=cr,this.sections=n}static parse(n,A){if(n.length<2)return A.error("Expected at least one argument.");const f=n[1];if(!Array.isArray(f)&&typeof f=="object")return A.error("First argument must be an image or text section.");const y=[];let C=!1;for(let I=1;I<=n.length-1;++I){const D=n[I];if(C&&typeof D=="object"&&!Array.isArray(D)){C=!1;let H=null;if(D["font-scale"]&&(H=A.parse(D["font-scale"],1,lr),!H))return null;let X=null;if(D["text-font"]&&(X=A.parse(D["text-font"],1,xn(Er)),!X))return null;let re=null;if(D["text-color"]&&(re=A.parse(D["text-color"],1,wn),!re))return null;const le=y[y.length-1];le.scale=H,le.font=X,le.textColor=re}else{const H=A.parse(n[I],1,br);if(!H)return null;const X=H.type.kind;if(X!=="string"&&X!=="value"&&X!=="null"&&X!=="resolvedImage")return A.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");C=!0,y.push({content:H,scale:null,font:null,textColor:null})}}return new TA(y)}evaluate(n){return new Ye(this.sections.map(A=>{const f=A.content.evaluate(n);return zt(f)===hn?new lt("",f,null,null,null):new lt(jr(f),null,A.scale?A.scale.evaluate(n):null,A.font?A.font.evaluate(n).join(","):null,A.textColor?A.textColor.evaluate(n):null)}))}eachChild(n){for(const A of this.sections)n(A.content),A.scale&&n(A.scale),A.font&&n(A.font),A.textColor&&n(A.textColor)}outputDefined(){return!1}}class lA{constructor(n){this.type=hn,this.input=n}static parse(n,A){if(n.length!==2)return A.error("Expected two arguments.");const f=A.parse(n[1],1,Er);return f?new lA(f):A.error("No image name provided.")}evaluate(n){const A=this.input.evaluate(n),f=ut.fromString(A);return f&&n.availableImages&&(f.available=n.availableImages.indexOf(A)>-1),f}eachChild(n){n(this.input)}outputDefined(){return!1}}class UA{constructor(n){this.type=lr,this.input=n}static parse(n,A){if(n.length!==2)return A.error(`Expected 1 argument, but found ${n.length-1} instead.`);const f=A.parse(n[1],1);return f?f.type.kind!=="array"&&f.type.kind!=="string"&&f.type.kind!=="value"?A.error(`Expected argument of type string or array, but found ${Sn(f.type)} instead.`):new UA(f):null}evaluate(n){const A=this.input.evaluate(n);if(typeof A=="string"||Array.isArray(A))return A.length;throw new Tr(`Expected value to be of type string or array, but found ${Sn(zt(A))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}const vo={"==":oA,"!=":AA,">":_a,"<":_c,">=":SA,"<=":XA,array:dn,at:WA,boolean:dn,case:to,coalesce:$a,collator:Ti,format:TA,image:lA,in:es,"index-of":FA,interpolate:Cs,"interpolate-hcl":Cs,"interpolate-lab":Cs,length:UA,let:va,literal:Hr,match:eo,number:dn,"number-format":IA,object:dn,slice:ro,step:qs,string:dn,"to-boolean":mn,"to-color":mn,"to-number":mn,"to-string":mn,var:Po,within:bs};function gl(o,[n,A,f,y]){n=n.evaluate(o),A=A.evaluate(o),f=f.evaluate(o);const C=y?y.evaluate(o):1,I=Ot(n,A,f,C);if(I)throw new Tr(I);return new Le(n/255*C,A/255*C,f/255*C,C)}function Wl(o,n){return o in n}function No(o,n){const A=n[o];return A===void 0?null:A}function wa(o){return{type:o}}function ZA(o){return{result:"success",value:o}}function ba(o){return{result:"error",value:o}}function xi(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function N(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function oe(o){return!!o.expression&&o.expression.interpolated}function De(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function et(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function _t(o){return o}function Jt(o,n){const A=n.type==="color",f=o.stops&&typeof o.stops[0][0]=="object",y=f||!(f||o.property!==void 0),C=o.type||(oe(n)?"exponential":"interval");if(A||n.type==="padding"){const X=A?Le.parse:qe.parse;(o=Ct({},o)).stops&&(o.stops=o.stops.map(re=>[re[0],X(re[1])])),o.default=X(o.default?o.default:n.default)}if(o.colorSpace&&o.colorSpace!=="rgb"&&!Ya[o.colorSpace])throw new Error(`Unknown color space: ${o.colorSpace}`);let I,D,H;if(C==="exponential")I=Dn;else if(C==="interval")I=En;else if(C==="categorical"){I=en,D=Object.create(null);for(const X of o.stops)D[X[0]]=X[1];H=typeof o.stops[0][0]}else{if(C!=="identity")throw new Error(`Unknown function type "${C}"`);I=Kn}if(f){const X={},re=[];for(let Ce=0;Ce<o.stops.length;Ce++){const Fe=o.stops[Ce],$e=Fe[0].zoom;X[$e]===void 0&&(X[$e]={zoom:$e,type:o.type,property:o.property,default:o.default,stops:[]},re.push($e)),X[$e].stops.push([Fe[0].value,Fe[1]])}const le=[];for(const Ce of re)le.push([X[Ce].zoom,Jt(X[Ce],n)]);const ve={name:"linear"};return{kind:"composite",interpolationType:ve,interpolationFactor:Cs.interpolationFactor.bind(void 0,ve),zoomStops:le.map(Ce=>Ce[0]),evaluate:({zoom:Ce},Fe)=>Dn({stops:le,base:o.base},n,Ce).evaluate(Ce,Fe)}}if(y){const X=C==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:X,interpolationFactor:Cs.interpolationFactor.bind(void 0,X),zoomStops:o.stops.map(re=>re[0]),evaluate:({zoom:re})=>I(o,n,re,D,H)}}return{kind:"source",evaluate(X,re){const le=re&&re.properties?re.properties[o.property]:void 0;return le===void 0?_r(o.default,n.default):I(o,n,le,D,H)}}}function _r(o,n,A){return o!==void 0?o:n!==void 0?n:A!==void 0?A:void 0}function en(o,n,A,f,y){return _r(typeof A===y?f[A]:void 0,o.default,n.default)}function En(o,n,A){if(De(A)!=="number")return _r(o.default,n.default);const f=o.stops.length;if(f===1||A<=o.stops[0][0])return o.stops[0][1];if(A>=o.stops[f-1][0])return o.stops[f-1][1];const y=oa(o.stops.map(C=>C[0]),A);return o.stops[y][1]}function Dn(o,n,A){const f=o.base!==void 0?o.base:1;if(De(A)!=="number")return _r(o.default,n.default);const y=o.stops.length;if(y===1||A<=o.stops[0][0])return o.stops[0][1];if(A>=o.stops[y-1][0])return o.stops[y-1][1];const C=oa(o.stops.map(re=>re[0]),A),I=function(re,le,ve,Ce){const Fe=Ce-ve,$e=re-ve;return Fe===0?0:le===1?$e/Fe:(Math.pow(le,$e)-1)/(Math.pow(le,Fe)-1)}(A,f,o.stops[C][0],o.stops[C+1][0]),D=o.stops[C][1],H=o.stops[C+1][1];let X=Bs[n.type]||_t;if(o.colorSpace&&o.colorSpace!=="rgb"){const re=Ya[o.colorSpace];X=(le,ve)=>re.reverse(re.interpolate(re.forward(le),re.forward(ve),I))}return typeof D.evaluate=="function"?{evaluate(...re){const le=D.evaluate.apply(void 0,re),ve=H.evaluate.apply(void 0,re);if(le!==void 0&&ve!==void 0)return X(le,ve,I)}}:X(D,H,I)}function Kn(o,n,A){switch(n.type){case"color":A=Le.parse(A);break;case"formatted":A=Ye.fromString(A.toString());break;case"resolvedImage":A=ut.fromString(A.toString());break;case"padding":A=qe.parse(A);break;default:De(A)===n.type||n.type==="enum"&&n.values[A]||(A=void 0)}return _r(A,o.default,n.default)}Vn.register(vo,{error:[{kind:"error"},[Er],(o,[n])=>{throw new Tr(n.evaluate(o))}],typeof:[Er,[br],(o,[n])=>Sn(zt(n.evaluate(o)))],"to-rgba":[xn(lr,4),[wn],(o,[n])=>n.evaluate(o).toArray()],rgb:[wn,[lr,lr,lr],gl],rgba:[wn,[lr,lr,lr,lr],gl],has:{type:An,overloads:[[[Er],(o,[n])=>Wl(n.evaluate(o),o.properties())],[[Er,_i],(o,[n,A])=>Wl(n.evaluate(o),A.evaluate(o))]]},get:{type:br,overloads:[[[Er],(o,[n])=>No(n.evaluate(o),o.properties())],[[Er,_i],(o,[n,A])=>No(n.evaluate(o),A.evaluate(o))]]},"feature-state":[br,[Er],(o,[n])=>No(n.evaluate(o),o.featureState||{})],properties:[_i,[],o=>o.properties()],"geometry-type":[Er,[],o=>o.geometryType()],id:[br,[],o=>o.id()],zoom:[lr,[],o=>o.globals.zoom],"heatmap-density":[lr,[],o=>o.globals.heatmapDensity||0],"line-progress":[lr,[],o=>o.globals.lineProgress||0],accumulated:[br,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[lr,wa(lr),(o,n)=>{let A=0;for(const f of n)A+=f.evaluate(o);return A}],"*":[lr,wa(lr),(o,n)=>{let A=1;for(const f of n)A*=f.evaluate(o);return A}],"-":{type:lr,overloads:[[[lr,lr],(o,[n,A])=>n.evaluate(o)-A.evaluate(o)],[[lr],(o,[n])=>-n.evaluate(o)]]},"/":[lr,[lr,lr],(o,[n,A])=>n.evaluate(o)/A.evaluate(o)],"%":[lr,[lr,lr],(o,[n,A])=>n.evaluate(o)%A.evaluate(o)],ln2:[lr,[],()=>Math.LN2],pi:[lr,[],()=>Math.PI],e:[lr,[],()=>Math.E],"^":[lr,[lr,lr],(o,[n,A])=>Math.pow(n.evaluate(o),A.evaluate(o))],sqrt:[lr,[lr],(o,[n])=>Math.sqrt(n.evaluate(o))],log10:[lr,[lr],(o,[n])=>Math.log(n.evaluate(o))/Math.LN10],ln:[lr,[lr],(o,[n])=>Math.log(n.evaluate(o))],log2:[lr,[lr],(o,[n])=>Math.log(n.evaluate(o))/Math.LN2],sin:[lr,[lr],(o,[n])=>Math.sin(n.evaluate(o))],cos:[lr,[lr],(o,[n])=>Math.cos(n.evaluate(o))],tan:[lr,[lr],(o,[n])=>Math.tan(n.evaluate(o))],asin:[lr,[lr],(o,[n])=>Math.asin(n.evaluate(o))],acos:[lr,[lr],(o,[n])=>Math.acos(n.evaluate(o))],atan:[lr,[lr],(o,[n])=>Math.atan(n.evaluate(o))],min:[lr,wa(lr),(o,n)=>Math.min(...n.map(A=>A.evaluate(o)))],max:[lr,wa(lr),(o,n)=>Math.max(...n.map(A=>A.evaluate(o)))],abs:[lr,[lr],(o,[n])=>Math.abs(n.evaluate(o))],round:[lr,[lr],(o,[n])=>{const A=n.evaluate(o);return A<0?-Math.round(-A):Math.round(A)}],floor:[lr,[lr],(o,[n])=>Math.floor(n.evaluate(o))],ceil:[lr,[lr],(o,[n])=>Math.ceil(n.evaluate(o))],"filter-==":[An,[Er,br],(o,[n,A])=>o.properties()[n.value]===A.value],"filter-id-==":[An,[br],(o,[n])=>o.id()===n.value],"filter-type-==":[An,[Er],(o,[n])=>o.geometryType()===n.value],"filter-<":[An,[Er,br],(o,[n,A])=>{const f=o.properties()[n.value],y=A.value;return typeof f==typeof y&&f<y}],"filter-id-<":[An,[br],(o,[n])=>{const A=o.id(),f=n.value;return typeof A==typeof f&&A<f}],"filter->":[An,[Er,br],(o,[n,A])=>{const f=o.properties()[n.value],y=A.value;return typeof f==typeof y&&f>y}],"filter-id->":[An,[br],(o,[n])=>{const A=o.id(),f=n.value;return typeof A==typeof f&&A>f}],"filter-<=":[An,[Er,br],(o,[n,A])=>{const f=o.properties()[n.value],y=A.value;return typeof f==typeof y&&f<=y}],"filter-id-<=":[An,[br],(o,[n])=>{const A=o.id(),f=n.value;return typeof A==typeof f&&A<=f}],"filter->=":[An,[Er,br],(o,[n,A])=>{const f=o.properties()[n.value],y=A.value;return typeof f==typeof y&&f>=y}],"filter-id->=":[An,[br],(o,[n])=>{const A=o.id(),f=n.value;return typeof A==typeof f&&A>=f}],"filter-has":[An,[br],(o,[n])=>n.value in o.properties()],"filter-has-id":[An,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[An,[xn(Er)],(o,[n])=>n.value.indexOf(o.geometryType())>=0],"filter-id-in":[An,[xn(br)],(o,[n])=>n.value.indexOf(o.id())>=0],"filter-in-small":[An,[Er,xn(br)],(o,[n,A])=>A.value.indexOf(o.properties()[n.value])>=0],"filter-in-large":[An,[Er,xn(br)],(o,[n,A])=>function(f,y,C,I){for(;C<=I;){const D=C+I>>1;if(y[D]===f)return!0;y[D]>f?I=D-1:C=D+1}return!1}(o.properties()[n.value],A.value,0,A.value.length-1)],all:{type:An,overloads:[[[An,An],(o,[n,A])=>n.evaluate(o)&&A.evaluate(o)],[wa(An),(o,n)=>{for(const A of n)if(!A.evaluate(o))return!1;return!0}]]},any:{type:An,overloads:[[[An,An],(o,[n,A])=>n.evaluate(o)||A.evaluate(o)],[wa(An),(o,n)=>{for(const A of n)if(A.evaluate(o))return!0;return!1}]]},"!":[An,[An],(o,[n])=>!n.evaluate(o)],"is-supported-script":[An,[Er],(o,[n])=>{const A=o.globals&&o.globals.isSupportedScript;return!A||A(n.evaluate(o))}],upcase:[Er,[Er],(o,[n])=>n.evaluate(o).toUpperCase()],downcase:[Er,[Er],(o,[n])=>n.evaluate(o).toLowerCase()],concat:[Er,wa(br),(o,n)=>n.map(A=>jr(A.evaluate(o))).join("")],"resolved-locale":[Er,[Cr],(o,[n])=>n.evaluate(o).resolvedLocale()]});class Wn{constructor(n,A){this.expression=n,this._warningHistory={},this._evaluator=new kn,this._defaultValue=A?function(f){return f.type==="color"&&et(f.default)?new Le(0,0,0,0):f.type==="color"?Le.parse(f.default)||null:f.type==="padding"?qe.parse(f.default)||null:f.default===void 0?null:f.default}(A):null,this._enumValues=A&&A.type==="enum"?A.values:null}evaluateWithoutErrorHandling(n,A,f,y,C,I){return this._evaluator.globals=n,this._evaluator.feature=A,this._evaluator.featureState=f,this._evaluator.canonical=y,this._evaluator.availableImages=C||null,this._evaluator.formattedSection=I,this.expression.evaluate(this._evaluator)}evaluate(n,A,f,y,C,I){this._evaluator.globals=n,this._evaluator.feature=A||null,this._evaluator.featureState=f||null,this._evaluator.canonical=y,this._evaluator.availableImages=C||null,this._evaluator.formattedSection=I||null;try{const D=this.expression.evaluate(this._evaluator);if(D==null||typeof D=="number"&&D!=D)return this._defaultValue;if(this._enumValues&&!(D in this._enumValues))throw new Tr(`Expected value to be one of ${Object.keys(this._enumValues).map(H=>JSON.stringify(H)).join(", ")}, but found ${JSON.stringify(D)} instead.`);return D}catch(D){return this._warningHistory[D.message]||(this._warningHistory[D.message]=!0,typeof console<"u"&&console.warn(D.message)),this._defaultValue}}}function pi(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in vo}function mi(o,n){const A=new ka(vo,[],n?function(y){const C={color:wn,string:Er,number:lr,enum:Er,boolean:An,formatted:cr,padding:Kr,resolvedImage:hn};return y.type==="array"?xn(C[y.value]||br,y.length):C[y.type]}(n):void 0),f=A.parse(o,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return f?ZA(new Wn(f,n)):ba(A.errors)}class Tn{constructor(n,A){this.kind=n,this._styleExpression=A,this.isStateDependent=n!=="constant"&&!Ja(A.expression)}evaluateWithoutErrorHandling(n,A,f,y,C,I){return this._styleExpression.evaluateWithoutErrorHandling(n,A,f,y,C,I)}evaluate(n,A,f,y,C,I){return this._styleExpression.evaluate(n,A,f,y,C,I)}}class Es{constructor(n,A,f,y){this.kind=n,this.zoomStops=f,this._styleExpression=A,this.isStateDependent=n!=="camera"&&!Ja(A.expression),this.interpolationType=y}evaluateWithoutErrorHandling(n,A,f,y,C,I){return this._styleExpression.evaluateWithoutErrorHandling(n,A,f,y,C,I)}evaluate(n,A,f,y,C,I){return this._styleExpression.evaluate(n,A,f,y,C,I)}interpolationFactor(n,A,f){return this.interpolationType?Cs.interpolationFactor(this.interpolationType,n,A,f):0}}function ts(o,n){const A=mi(o,n);if(A.result==="error")return A;const f=A.value.expression,y=xs(f);if(!y&&!xi(n))return ba([new Vr("","data expressions not supported")]);const C=aa(f,["zoom"]);if(!C&&!N(n))return ba([new Vr("","zoom expressions not supported")]);const I=rs(f);return I||C?I instanceof Vr?ba([I]):I instanceof Cs&&!oe(n)?ba([new Vr("",'"interpolate" expressions cannot be used with this property')]):ZA(I?new Es(y?"camera":"composite",A.value,I.labels,I instanceof Cs?I.interpolation:void 0):new Tn(y?"constant":"source",A.value)):ba([new Vr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Ws{constructor(n,A){this._parameters=n,this._specification=A,Ct(this,Jt(this._parameters,this._specification))}static deserialize(n){return new Ws(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function rs(o){let n=null;if(o instanceof va)n=rs(o.result);else if(o instanceof $a){for(const A of o.args)if(n=rs(A),n)break}else(o instanceof qs||o instanceof Cs)&&o.input instanceof Vn&&o.input.name==="zoom"&&(n=o);return n instanceof Vr||o.eachChild(A=>{const f=rs(A);f instanceof Vr?n=f:!n&&f?n=new Vr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&f&&n!==f&&(n=new Vr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}function Si(o){const n=o.key,A=o.value,f=o.valueSpec||{},y=o.objectElementValidators||{},C=o.style,I=o.styleSpec;let D=[];const H=De(A);if(H!=="object")return[new nt(n,A,`object expected, ${H} found`)];for(const X in A){const re=X.split(".")[0],le=f[re]||f["*"];let ve;if(y[re])ve=y[re];else if(f[re])ve=gi;else if(y["*"])ve=y["*"];else{if(!f["*"]){D.push(new nt(n,A[X],`unknown property "${X}"`));continue}ve=gi}D=D.concat(ve({key:(n&&`${n}.`)+X,value:A[X],valueSpec:le,style:C,styleSpec:I,object:A,objectKey:X},A))}for(const X in f)y[X]||f[X].required&&f[X].default===void 0&&A[X]===void 0&&D.push(new nt(n,A,`missing required property "${X}"`));return D}function yl(o){const n=o.value,A=o.valueSpec,f=o.style,y=o.styleSpec,C=o.key,I=o.arrayElementValidator||gi;if(De(n)!=="array")return[new nt(C,n,`array expected, ${De(n)} found`)];if(A.length&&n.length!==A.length)return[new nt(C,n,`array length ${A.length} expected, length ${n.length} found`)];if(A["min-length"]&&n.length<A["min-length"])return[new nt(C,n,`array length at least ${A["min-length"]} expected, length ${n.length} found`)];let D={type:A.value,values:A.values};y.$version<7&&(D.function=A.function),De(A.value)==="object"&&(D=A.value);let H=[];for(let X=0;X<n.length;X++)H=H.concat(I({array:n,arrayIndex:X,value:n[X],valueSpec:D,style:f,styleSpec:y,key:`${C}[${X}]`}));return H}function la(o){const n=o.key,A=o.value,f=o.valueSpec;let y=De(A);return y==="number"&&A!=A&&(y="NaN"),y!=="number"?[new nt(n,A,`number expected, ${y} found`)]:"minimum"in f&&A<f.minimum?[new nt(n,A,`${A} is less than the minimum value ${f.minimum}`)]:"maximum"in f&&A>f.maximum?[new nt(n,A,`${A} is greater than the maximum value ${f.maximum}`)]:[]}function Pi(o){const n=o.valueSpec,A=jt(o.value.type);let f,y,C,I={};const D=A!=="categorical"&&o.value.property===void 0,H=!D,X=De(o.value.stops)==="array"&&De(o.value.stops[0])==="array"&&De(o.value.stops[0][0])==="object",re=Si({key:o.key,value:o.value,valueSpec:o.styleSpec.function,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(Ce){if(A==="identity")return[new nt(Ce.key,Ce.value,'identity function may not have a "stops" property')];let Fe=[];const $e=Ce.value;return Fe=Fe.concat(yl({key:Ce.key,value:$e,valueSpec:Ce.valueSpec,style:Ce.style,styleSpec:Ce.styleSpec,arrayElementValidator:le})),De($e)==="array"&&$e.length===0&&Fe.push(new nt(Ce.key,$e,"array must have at least one stop")),Fe},default:function(Ce){return gi({key:Ce.key,value:Ce.value,valueSpec:n,style:Ce.style,styleSpec:Ce.styleSpec})}}});return A==="identity"&&D&&re.push(new nt(o.key,o.value,'missing required property "property"')),A==="identity"||o.value.stops||re.push(new nt(o.key,o.value,'missing required property "stops"')),A==="exponential"&&o.valueSpec.expression&&!oe(o.valueSpec)&&re.push(new nt(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(H&&!xi(o.valueSpec)?re.push(new nt(o.key,o.value,"property functions not supported")):D&&!N(o.valueSpec)&&re.push(new nt(o.key,o.value,"zoom functions not supported"))),A!=="categorical"&&!X||o.value.property!==void 0||re.push(new nt(o.key,o.value,'"property" property is required')),re;function le(Ce){let Fe=[];const $e=Ce.value,Ze=Ce.key;if(De($e)!=="array")return[new nt(Ze,$e,`array expected, ${De($e)} found`)];if($e.length!==2)return[new nt(Ze,$e,`array length 2 expected, length ${$e.length} found`)];if(X){if(De($e[0])!=="object")return[new nt(Ze,$e,`object expected, ${De($e[0])} found`)];if($e[0].zoom===void 0)return[new nt(Ze,$e,"object stop key must have zoom")];if($e[0].value===void 0)return[new nt(Ze,$e,"object stop key must have value")];if(C&&C>jt($e[0].zoom))return[new nt(Ze,$e[0].zoom,"stop zoom values must appear in ascending order")];jt($e[0].zoom)!==C&&(C=jt($e[0].zoom),y=void 0,I={}),Fe=Fe.concat(Si({key:`${Ze}[0]`,value:$e[0],valueSpec:{zoom:{}},style:Ce.style,styleSpec:Ce.styleSpec,objectElementValidators:{zoom:la,value:ve}}))}else Fe=Fe.concat(ve({key:`${Ze}[0]`,value:$e[0],valueSpec:{},style:Ce.style,styleSpec:Ce.styleSpec},$e));return pi(er($e[1]))?Fe.concat([new nt(`${Ze}[1]`,$e[1],"expressions are not allowed in function stops.")]):Fe.concat(gi({key:`${Ze}[1]`,value:$e[1],valueSpec:n,style:Ce.style,styleSpec:Ce.styleSpec}))}function ve(Ce,Fe){const $e=De(Ce.value),Ze=jt(Ce.value),Et=Ce.value!==null?Ce.value:Fe;if(f){if($e!==f)return[new nt(Ce.key,Et,`${$e} stop domain type must match previous stop domain type ${f}`)]}else f=$e;if($e!=="number"&&$e!=="string"&&$e!=="boolean")return[new nt(Ce.key,Et,"stop domain value must be a number, string, or boolean")];if($e!=="number"&&A!=="categorical"){let Kt=`number expected, ${$e} found`;return xi(n)&&A===void 0&&(Kt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new nt(Ce.key,Et,Kt)]}return A!=="categorical"||$e!=="number"||isFinite(Ze)&&Math.floor(Ze)===Ze?A!=="categorical"&&$e==="number"&&y!==void 0&&Ze<y?[new nt(Ce.key,Et,"stop domain values must appear in ascending order")]:(y=Ze,A==="categorical"&&Ze in I?[new nt(Ce.key,Et,"stop domain values must be unique")]:(I[Ze]=!0,[])):[new nt(Ce.key,Et,`integer expected, found ${Ze}`)]}}function xa(o){const n=(o.expressionContext==="property"?ts:mi)(er(o.value),o.valueSpec);if(n.result==="error")return n.value.map(f=>new nt(`${o.key}${f.key}`,o.value,f.message));const A=n.value.expression||n.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!A.outputDefined())return[new nt(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!Ja(A))return[new nt(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter"&&!Ja(A))return[new nt(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!aa(A,["zoom","feature-state"]))return[new nt(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!xs(A))return[new nt(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Mi(o){const n=o.key,A=o.value,f=o.valueSpec,y=[];return Array.isArray(f.values)?f.values.indexOf(jt(A))===-1&&y.push(new nt(n,A,`expected one of [${f.values.join(", ")}], ${JSON.stringify(A)} found`)):Object.keys(f.values).indexOf(jt(A))===-1&&y.push(new nt(n,A,`expected one of [${Object.keys(f.values).join(", ")}], ${JSON.stringify(A)} found`)),y}function Ma(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const n of o.slice(1))if(!Ma(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}const Ba={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function ns(o){if(o==null)return{filter:()=>!0,needGeometry:!1};Ma(o)||(o=no(o));const n=mi(o,Ba);if(n.result==="error")throw new Error(n.value.map(A=>`${A.key}: ${A.message}`).join(", "));return{filter:(A,f,y)=>n.value.evaluate(A,f,{},y),needGeometry:cA(o)}}function hi(o,n){return o<n?-1:o>n?1:0}function cA(o){if(!Array.isArray(o))return!1;if(o[0]==="within")return!0;for(let n=1;n<o.length;n++)if(cA(o[n]))return!0;return!1}function no(o){if(!o)return!0;const n=o[0];return o.length<=1?n!=="any":n==="=="?uA(o[1],o[2],"=="):n==="!="?io(uA(o[1],o[2],"==")):n==="<"||n===">"||n==="<="||n===">="?uA(o[1],o[2],n):n==="any"?(A=o.slice(1),["any"].concat(A.map(no))):n==="all"?["all"].concat(o.slice(1).map(no)):n==="none"?["all"].concat(o.slice(1).map(no).map(io)):n==="in"?Fs(o[1],o.slice(2)):n==="!in"?io(Fs(o[1],o.slice(2))):n==="has"?_o(o[1]):n==="!has"?io(_o(o[1])):n!=="within"||o;var A}function uA(o,n,A){switch(o){case"$type":return[`filter-type-${A}`,n];case"$id":return[`filter-id-${A}`,n];default:return[`filter-${A}`,o,n]}}function Fs(o,n){if(n.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(A=>typeof A!=typeof n[0])?["filter-in-large",o,["literal",n.sort(hi)]]:["filter-in-small",o,["literal",n]]}}function _o(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function io(o){return["!",o]}function jo(o){return Ma(er(o.value))?xa(Ct({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Hi(o)}function Hi(o){const n=o.value,A=o.key;if(De(n)!=="array")return[new nt(A,n,`array expected, ${De(n)} found`)];const f=o.styleSpec;let y,C=[];if(n.length<1)return[new nt(A,n,"filter array must have at least 1 element")];switch(C=C.concat(Mi({key:`${A}[0]`,value:n[0],valueSpec:f.filter_operator,style:o.style,styleSpec:o.styleSpec})),jt(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&jt(n[1])==="$type"&&C.push(new nt(A,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&C.push(new nt(A,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(y=De(n[1]),y!=="string"&&C.push(new nt(`${A}[1]`,n[1],`string expected, ${y} found`)));for(let I=2;I<n.length;I++)y=De(n[I]),jt(n[1])==="$type"?C=C.concat(Mi({key:`${A}[${I}]`,value:n[I],valueSpec:f.geometry_type,style:o.style,styleSpec:o.styleSpec})):y!=="string"&&y!=="number"&&y!=="boolean"&&C.push(new nt(`${A}[${I}]`,n[I],`string, number, or boolean expected, ${y} found`));break;case"any":case"all":case"none":for(let I=1;I<n.length;I++)C=C.concat(Hi({key:`${A}[${I}]`,value:n[I],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":y=De(n[1]),n.length!==2?C.push(new nt(A,n,`filter array for "${n[0]}" operator must have 2 elements`)):y!=="string"&&C.push(new nt(`${A}[1]`,n[1],`string expected, ${y} found`));break;case"within":y=De(n[1]),n.length!==2?C.push(new nt(A,n,`filter array for "${n[0]}" operator must have 2 elements`)):y!=="object"&&C.push(new nt(`${A}[1]`,n[1],`object expected, ${y} found`))}return C}function Ns(o,n){const A=o.key,f=o.style,y=o.styleSpec,C=o.value,I=o.objectKey,D=y[`${n}_${o.layerType}`];if(!D)return[];const H=I.match(/^(.*)-transition$/);if(n==="paint"&&H&&D[H[1]]&&D[H[1]].transition)return gi({key:A,value:C,valueSpec:y.transition,style:f,styleSpec:y});const X=o.valueSpec||D[I];if(!X)return[new nt(A,C,`unknown property "${I}"`)];let re;if(De(C)==="string"&&xi(X)&&!X.tokens&&(re=/^{([^}]+)}$/.exec(C)))return[new nt(A,C,`"${I}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(re[1])} }\`.`)];const le=[];return o.layerType==="symbol"&&(I==="text-field"&&f&&!f.glyphs&&le.push(new nt(A,C,'use of "text-field" requires a style "glyphs" property')),I==="text-font"&&et(er(C))&&jt(C.type)==="identity"&&le.push(new nt(A,C,'"text-font" does not support identity functions'))),le.concat(gi({key:o.key,value:C,valueSpec:X,style:f,styleSpec:y,expressionContext:"property",propertyType:n,propertyKey:I}))}function so(o){return Ns(o,"paint")}function is(o){return Ns(o,"layout")}function js(o){let n=[];const A=o.value,f=o.key,y=o.style,C=o.styleSpec;A.type||A.ref||n.push(new nt(f,A,'either "type" or "ref" is required'));let I=jt(A.type);const D=jt(A.ref);if(A.id){const H=jt(A.id);for(let X=0;X<o.arrayIndex;X++){const re=y.layers[X];jt(re.id)===H&&n.push(new nt(f,A.id,`duplicate layer id "${A.id}", previously used at line ${re.id.__line__}`))}}if("ref"in A){let H;["type","source","source-layer","filter","layout"].forEach(X=>{X in A&&n.push(new nt(f,A[X],`"${X}" is prohibited for ref layers`))}),y.layers.forEach(X=>{jt(X.id)===D&&(H=X)}),H?H.ref?n.push(new nt(f,A.ref,"ref cannot reference another ref layer")):I=jt(H.type):n.push(new nt(f,A.ref,`ref layer "${D}" not found`))}else if(I!=="background")if(A.source){const H=y.sources&&y.sources[A.source],X=H&&jt(H.type);H?X==="vector"&&I==="raster"?n.push(new nt(f,A.source,`layer "${A.id}" requires a raster source`)):X==="raster"&&I!=="raster"?n.push(new nt(f,A.source,`layer "${A.id}" requires a vector source`)):X!=="vector"||A["source-layer"]?X==="raster-dem"&&I!=="hillshade"?n.push(new nt(f,A.source,"raster-dem source can only be used with layer type 'hillshade'.")):I!=="line"||!A.paint||!A.paint["line-gradient"]||X==="geojson"&&H.lineMetrics||n.push(new nt(f,A,`layer "${A.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new nt(f,A,`layer "${A.id}" must specify a "source-layer"`)):n.push(new nt(f,A.source,`source "${A.source}" not found`))}else n.push(new nt(f,A,'missing required property "source"'));return n=n.concat(Si({key:f,value:A,valueSpec:C.layer,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{"*":()=>[],type:()=>gi({key:`${f}.type`,value:A.type,valueSpec:C.layer.type,style:o.style,styleSpec:o.styleSpec,object:A,objectKey:"type"}),filter:jo,layout:H=>Si({layer:A,key:H.key,value:H.value,style:H.style,styleSpec:H.styleSpec,objectElementValidators:{"*":X=>is(Ct({layerType:I},X))}}),paint:H=>Si({layer:A,key:H.key,value:H.value,style:H.style,styleSpec:H.styleSpec,objectElementValidators:{"*":X=>so(Ct({layerType:I},X))}})}})),n}function Ss(o){const n=o.value,A=o.key,f=De(n);return f!=="string"?[new nt(A,n,`string expected, ${f} found`)]:[]}const Ca={promoteId:function({key:o,value:n}){if(De(n)==="string")return Ss({key:o,value:n});{const A=[];for(const f in n)A.push(...Ss({key:`${o}.${f}`,value:n[f]}));return A}}};function ca(o){const n=o.value,A=o.key,f=o.styleSpec,y=o.style;if(!n.type)return[new nt(A,n,'"type" is required')];const C=jt(n.type);let I;switch(C){case"vector":case"raster":case"raster-dem":return I=Si({key:A,value:n,valueSpec:f[`source_${C.replace("-","_")}`],style:o.style,styleSpec:f,objectElementValidators:Ca}),I;case"geojson":if(I=Si({key:A,value:n,valueSpec:f.source_geojson,style:y,styleSpec:f,objectElementValidators:Ca}),n.cluster)for(const D in n.clusterProperties){const[H,X]=n.clusterProperties[D],re=typeof H=="string"?[H,["accumulated"],["get",D]]:H;I.push(...xa({key:`${A}.${D}.map`,value:X,expressionContext:"cluster-map"})),I.push(...xa({key:`${A}.${D}.reduce`,value:re,expressionContext:"cluster-reduce"}))}return I;case"video":return Si({key:A,value:n,valueSpec:f.source_video,style:y,styleSpec:f});case"image":return Si({key:A,value:n,valueSpec:f.source_image,style:y,styleSpec:f});case"canvas":return[new nt(A,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Mi({key:`${A}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:y,styleSpec:f})}}function Xs(o){const n=o.value,A=o.styleSpec,f=A.light,y=o.style;let C=[];const I=De(n);if(n===void 0)return C;if(I!=="object")return C=C.concat([new nt("light",n,`object expected, ${I} found`)]),C;for(const D in n){const H=D.match(/^(.*)-transition$/);C=C.concat(H&&f[H[1]]&&f[H[1]].transition?gi({key:D,value:n[D],valueSpec:A.transition,style:y,styleSpec:A}):f[D]?gi({key:D,value:n[D],valueSpec:f[D],style:y,styleSpec:A}):[new nt(D,n[D],`unknown property "${D}"`)])}return C}function ss(o){const n=o.value,A=o.styleSpec,f=A.terrain,y=o.style;let C=[];const I=De(n);if(n===void 0)return C;if(I!=="object")return C=C.concat([new nt("terrain",n,`object expected, ${I} found`)]),C;for(const D in n)C=C.concat(f[D]?gi({key:D,value:n[D],valueSpec:f[D],style:y,styleSpec:A}):[new nt(D,n[D],`unknown property "${D}"`)]);return C}const ua={"*":()=>[],array:yl,boolean:function(o){const n=o.value,A=o.key,f=De(n);return f!=="boolean"?[new nt(A,n,`boolean expected, ${f} found`)]:[]},number:la,color:function(o){const n=o.key,A=o.value,f=De(A);return f!=="string"?[new nt(n,A,`color expected, ${f} found`)]:Ln(A)===null?[new nt(n,A,`color expected, "${A}" found`)]:[]},constants:bt,enum:Mi,filter:jo,function:Pi,layer:js,object:Si,source:ca,light:Xs,terrain:ss,string:Ss,formatted:function(o){return Ss(o).length===0?[]:xa(o)},resolvedImage:function(o){return Ss(o).length===0?[]:xa(o)},padding:function(o){const n=o.key,A=o.value;if(De(A)==="array"){if(A.length<1||A.length>4)return[new nt(n,A,`padding requires 1 to 4 values; ${A.length} values found`)];const f={type:"number"};let y=[];for(let C=0;C<A.length;C++)y=y.concat(gi({key:`${n}[${C}]`,value:A[C],valueSpec:f}));return y}return la({key:n,value:A,valueSpec:{}})}};function gi(o){const n=o.value,A=o.valueSpec,f=o.styleSpec;return A.expression&&et(jt(n))?Pi(o):A.expression&&pi(er(n))?xa(o):A.type&&ua[A.type]?ua[A.type](o):Si(Ct({},o,{valueSpec:A.type?f[A.type]:A}))}function JA(o){const n=o.value,A=o.key,f=Ss(o);return f.length||(n.indexOf("{fontstack}")===-1&&f.push(new nt(A,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&f.push(new nt(A,n,'"glyphs" url must include a "{range}" token'))),f}function Da(o,n=vt){let A=[];return A=A.concat(gi({key:"",value:o,valueSpec:n.$root,styleSpec:n,style:o,objectElementValidators:{glyphs:JA,"*":()=>[]}})),o.constants&&(A=A.concat(bt({key:"constants",value:o.constants,style:o,styleSpec:n}))),Na(A)}function Na(o){return[].concat(o).sort((n,A)=>n.line-A.line)}function fs(o){return function(...n){return Na(o.apply(this,n))}}Da.source=fs(ca),Da.light=fs(Xs),Da.terrain=fs(ss),Da.layer=fs(js),Da.filter=fs(jo),Da.paintProperty=fs(so),Da.layoutProperty=fs(is);const Ea=Da,Ro=Ea.light,Rs=Ea.paintProperty,hA=Ea.layoutProperty;function ao(o,n){let A=!1;if(n&&n.length)for(const f of n)o.fire(new Zr(new Error(f.message))),A=!0;return A}class Oo{constructor(n,A,f){const y=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;const I=new Int32Array(this.arrayBuffer);n=I[0],this.d=(A=I[1])+2*(f=I[2]);for(let H=0;H<this.d*this.d;H++){const X=I[3+H],re=I[3+H+1];y.push(X===re?null:I.subarray(X,re))}const D=I[3+y.length+1];this.keys=I.subarray(I[3+y.length],D),this.bboxes=I.subarray(D),this.insert=this._insertReadonly}else{this.d=A+2*f;for(let I=0;I<this.d*this.d;I++)y.push([]);this.keys=[],this.bboxes=[]}this.n=A,this.extent=n,this.padding=f,this.scale=A/n,this.uid=0;const C=f/A*n;this.min=-C,this.max=n+C}insert(n,A,f,y,C){this._forEachCell(A,f,y,C,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(A),this.bboxes.push(f),this.bboxes.push(y),this.bboxes.push(C)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,A,f,y,C,I){this.cells[C].push(I)}query(n,A,f,y,C){const I=this.min,D=this.max;if(n<=I&&A<=I&&D<=f&&D<=y&&!C)return Array.prototype.slice.call(this.keys);{const H=[];return this._forEachCell(n,A,f,y,this._queryCell,H,{},C),H}}_queryCell(n,A,f,y,C,I,D,H){const X=this.cells[C];if(X!==null){const re=this.keys,le=this.bboxes;for(let ve=0;ve<X.length;ve++){const Ce=X[ve];if(D[Ce]===void 0){const Fe=4*Ce;(H?H(le[Fe+0],le[Fe+1],le[Fe+2],le[Fe+3]):n<=le[Fe+2]&&A<=le[Fe+3]&&f>=le[Fe+0]&&y>=le[Fe+1])?(D[Ce]=!0,I.push(re[Ce])):D[Ce]=!1}}}}_forEachCell(n,A,f,y,C,I,D,H){const X=this._convertToCellCoord(n),re=this._convertToCellCoord(A),le=this._convertToCellCoord(f),ve=this._convertToCellCoord(y);for(let Ce=X;Ce<=le;Ce++)for(let Fe=re;Fe<=ve;Fe++){const $e=this.d*Fe+Ce;if((!H||H(this._convertFromCellCoord(Ce),this._convertFromCellCoord(Fe),this._convertFromCellCoord(Ce+1),this._convertFromCellCoord(Fe+1)))&&C.call(this,n,A,f,y,$e,I,D,H))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const n=this.cells,A=3+this.cells.length+1+1;let f=0;for(let I=0;I<this.cells.length;I++)f+=this.cells[I].length;const y=new Int32Array(A+f+this.keys.length+this.bboxes.length);y[0]=this.extent,y[1]=this.n,y[2]=this.padding;let C=A;for(let I=0;I<n.length;I++){const D=n[I];y[3+I]=C,y.set(D,C),C+=D.length}return y[3+n.length]=C,y.set(this.keys,C),C+=this.keys.length,y[3+n.length+1]=C,y.set(this.bboxes,C),C+=this.bboxes.length,y.buffer}static serialize(n,A){const f=n.toArrayBuffer();return A&&A.push(f),{buffer:f}}static deserialize(n){return new Oo(n.buffer)}}const zi={};function Pr(o,n,A={}){if(zi[o])throw new Error(`${o} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:o,writeable:!1}),zi[o]={klass:n,omit:A.omit||[],shallow:A.shallow||[]}}Pr("Object",Object),Pr("TransferableGridIndex",Oo),Pr("Color",Le),Pr("Error",Error),Pr("AJAXError",Nt),Pr("ResolvedImage",ut),Pr("StylePropertyFunction",Ws),Pr("StyleExpression",Wn,{omit:["_evaluator"]}),Pr("ZoomDependentExpression",Es),Pr("ZoomConstantExpression",Tn),Pr("CompoundExpression",Vn,{omit:["_evaluate"]});for(const o in vo)vo[o]._classRegistryKey||Pr(`Expression_${o}`,vo[o]);function Ii(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function Ai(o,n){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob)return o;if(Ii(o)||me(o))return n&&n.push(o),o;if(ArrayBuffer.isView(o)){const A=o;return n&&n.push(A.buffer),A}if(o instanceof ImageData)return n&&n.push(o.data.buffer),o;if(Array.isArray(o)){const A=[];for(const f of o)A.push(Ai(f,n));return A}if(typeof o=="object"){const A=o.constructor,f=A._classRegistryKey;if(!f)throw new Error("can't serialize object of unregistered class");if(!zi[f])throw new Error(`${f} is not registered.`);const y=A.serialize?A.serialize(o,n):{};if(A.serialize){if(n&&y===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const C in o){if(!o.hasOwnProperty(C)||zi[f].omit.indexOf(C)>=0)continue;const I=o[C];y[C]=zi[f].shallow.indexOf(C)>=0?I:Ai(I,n)}o instanceof Error&&(y.message=o.message)}if(y.$name)throw new Error("$name property is reserved for worker serialization logic.");return f!=="Object"&&(y.$name=f),y}throw new Error("can't serialize object of type "+typeof o)}function Bi(o){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||Ii(o)||me(o)||ArrayBuffer.isView(o)||o instanceof ImageData)return o;if(Array.isArray(o))return o.map(Bi);if(typeof o=="object"){const n=o.$name||"Object";if(!zi[n])throw new Error(`can't deserialize unregistered class ${n}`);const{klass:A}=zi[n];if(!A)throw new Error(`can't deserialize unregistered class ${n}`);if(A.deserialize)return A.deserialize(o);const f=Object.create(A.prototype);for(const y of Object.keys(o)){if(y==="$name")continue;const C=o[y];f[y]=zi[n].shallow.indexOf(y)>=0?C:Bi(C)}return f}throw new Error("can't deserialize object of type "+typeof o)}class Zi{constructor(){this.first=!0}update(n,A){const f=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=f,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=f,!0):(this.lastFloorZoom>f?(this.lastIntegerZoom=f+1,this.lastIntegerZoomTime=A):this.lastFloorZoom<f&&(this.lastIntegerZoom=f,this.lastIntegerZoomTime=A),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=f,!0))}}const Sr={"Latin-1 Supplement":o=>o>=128&&o<=255,Arabic:o=>o>=1536&&o<=1791,"Arabic Supplement":o=>o>=1872&&o<=1919,"Arabic Extended-A":o=>o>=2208&&o<=2303,"Hangul Jamo":o=>o>=4352&&o<=4607,"Unified Canadian Aboriginal Syllabics":o=>o>=5120&&o<=5759,Khmer:o=>o>=6016&&o<=6143,"Unified Canadian Aboriginal Syllabics Extended":o=>o>=6320&&o<=6399,"General Punctuation":o=>o>=8192&&o<=8303,"Letterlike Symbols":o=>o>=8448&&o<=8527,"Number Forms":o=>o>=8528&&o<=8591,"Miscellaneous Technical":o=>o>=8960&&o<=9215,"Control Pictures":o=>o>=9216&&o<=9279,"Optical Character Recognition":o=>o>=9280&&o<=9311,"Enclosed Alphanumerics":o=>o>=9312&&o<=9471,"Geometric Shapes":o=>o>=9632&&o<=9727,"Miscellaneous Symbols":o=>o>=9728&&o<=9983,"Miscellaneous Symbols and Arrows":o=>o>=11008&&o<=11263,"CJK Radicals Supplement":o=>o>=11904&&o<=12031,"Kangxi Radicals":o=>o>=12032&&o<=12255,"Ideographic Description Characters":o=>o>=12272&&o<=12287,"CJK Symbols and Punctuation":o=>o>=12288&&o<=12351,Hiragana:o=>o>=12352&&o<=12447,Katakana:o=>o>=12448&&o<=12543,Bopomofo:o=>o>=12544&&o<=12591,"Hangul Compatibility Jamo":o=>o>=12592&&o<=12687,Kanbun:o=>o>=12688&&o<=12703,"Bopomofo Extended":o=>o>=12704&&o<=12735,"CJK Strokes":o=>o>=12736&&o<=12783,"Katakana Phonetic Extensions":o=>o>=12784&&o<=12799,"Enclosed CJK Letters and Months":o=>o>=12800&&o<=13055,"CJK Compatibility":o=>o>=13056&&o<=13311,"CJK Unified Ideographs Extension A":o=>o>=13312&&o<=19903,"Yijing Hexagram Symbols":o=>o>=19904&&o<=19967,"CJK Unified Ideographs":o=>o>=19968&&o<=40959,"Yi Syllables":o=>o>=40960&&o<=42127,"Yi Radicals":o=>o>=42128&&o<=42191,"Hangul Jamo Extended-A":o=>o>=43360&&o<=43391,"Hangul Syllables":o=>o>=44032&&o<=55215,"Hangul Jamo Extended-B":o=>o>=55216&&o<=55295,"Private Use Area":o=>o>=57344&&o<=63743,"CJK Compatibility Ideographs":o=>o>=63744&&o<=64255,"Arabic Presentation Forms-A":o=>o>=64336&&o<=65023,"Vertical Forms":o=>o>=65040&&o<=65055,"CJK Compatibility Forms":o=>o>=65072&&o<=65103,"Small Form Variants":o=>o>=65104&&o<=65135,"Arabic Presentation Forms-B":o=>o>=65136&&o<=65279,"Halfwidth and Fullwidth Forms":o=>o>=65280&&o<=65519};function ja(o){for(const n of o)if(Xl(n.charCodeAt(0)))return!0;return!1}function LA(o){for(const n of o)if(!QA(n.charCodeAt(0)))return!1;return!0}function QA(o){return!(Sr.Arabic(o)||Sr["Arabic Supplement"](o)||Sr["Arabic Extended-A"](o)||Sr["Arabic Presentation Forms-A"](o)||Sr["Arabic Presentation Forms-B"](o))}function Xl(o){return!(o!==746&&o!==747&&(o<4352||!(Sr["Bopomofo Extended"](o)||Sr.Bopomofo(o)||Sr["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||Sr["CJK Compatibility Ideographs"](o)||Sr["CJK Compatibility"](o)||Sr["CJK Radicals Supplement"](o)||Sr["CJK Strokes"](o)||!(!Sr["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||Sr["CJK Unified Ideographs Extension A"](o)||Sr["CJK Unified Ideographs"](o)||Sr["Enclosed CJK Letters and Months"](o)||Sr["Hangul Compatibility Jamo"](o)||Sr["Hangul Jamo Extended-A"](o)||Sr["Hangul Jamo Extended-B"](o)||Sr["Hangul Jamo"](o)||Sr["Hangul Syllables"](o)||Sr.Hiragana(o)||Sr["Ideographic Description Characters"](o)||Sr.Kanbun(o)||Sr["Kangxi Radicals"](o)||Sr["Katakana Phonetic Extensions"](o)||Sr.Katakana(o)&&o!==12540||!(!Sr["Halfwidth and Fullwidth Forms"](o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!Sr["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||Sr["Unified Canadian Aboriginal Syllabics"](o)||Sr["Unified Canadian Aboriginal Syllabics Extended"](o)||Sr["Vertical Forms"](o)||Sr["Yijing Hexagram Symbols"](o)||Sr["Yi Syllables"](o)||Sr["Yi Radicals"](o))))}function YA(o){return!(Xl(o)||function(n){return!!(Sr["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||Sr["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||Sr["Letterlike Symbols"](n)||Sr["Number Forms"](n)||Sr["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||Sr["Control Pictures"](n)&&n!==9251||Sr["Optical Character Recognition"](n)||Sr["Enclosed Alphanumerics"](n)||Sr["Geometric Shapes"](n)||Sr["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||Sr["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||Sr["CJK Symbols and Punctuation"](n)||Sr.Katakana(n)||Sr["Private Use Area"](n)||Sr["CJK Compatibility Forms"](n)||Sr["Small Form Variants"](n)||Sr["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(o))}function wc(o){return o>=1424&&o<=2303||Sr["Arabic Presentation Forms-A"](o)||Sr["Arabic Presentation Forms-B"](o)}function zc(o,n){return!(!n&&wc(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||Sr.Khmer(o))}function vl(o){for(const n of o)if(wc(n.charCodeAt(0)))return!0;return!1}const Zl="deferred",$A="loading",el="loaded";let Zs=null,Di="unavailable",oo=null;const _l=function(o){o&&typeof o=="string"&&o.indexOf("NetworkError")>-1&&(Di="error"),Zs&&Zs(o)};function Ra(){tl.fire(new xr("pluginStateChange",{pluginStatus:Di,pluginURL:oo}))}const tl=new pn,fA=function(){return Di},kA=function(){if(Di!==Zl||!oo)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Di=$A,Ra(),oo&&gr({url:oo},o=>{o?_l(o):(Di=el,Ra())})},Fa={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Di===el||Fa.applyArabicShaping!=null,isLoading:()=>Di===$A,setState(o){if(!fe())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Di=o.pluginStatus,oo=o.pluginURL},isParsed(){if(!fe())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return Fa.applyArabicShaping!=null&&Fa.processBidirectionalText!=null&&Fa.processStyledBidirectionalText!=null},getPluginURL(){if(!fe())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return oo}};class Ui{constructor(n,A){this.zoom=n,A?(this.now=A.now,this.fadeDuration=A.fadeDuration,this.zoomHistory=A.zoomHistory,this.transition=A.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Zi,this.transition={})}isSupportedScript(n){return function(A,f){for(const y of A)if(!zc(y.charCodeAt(0),f))return!1;return!0}(n,Fa.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,A=n-Math.floor(n),f=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:A+(1-A)*f}:{fromScale:.5,toScale:1,t:1-(1-f)*A}}}class PA{constructor(n,A){this.property=n,this.value=A,this.expression=function(f,y){if(et(f))return new Ws(f,y);if(pi(f)){const C=ts(f,y);if(C.result==="error")throw new Error(C.value.map(I=>`${I.key}: ${I.message}`).join(", "));return C.value}{let C=f;return y.type==="color"&&typeof f=="string"?C=Le.parse(f):y.type!=="padding"||typeof f!="number"&&!Array.isArray(f)||(C=qe.parse(f)),{kind:"constant",evaluate:()=>C}}}(A===void 0?n.specification.default:A,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,A,f){return this.property.possiblyEvaluate(this,n,A,f)}}class MA{constructor(n){this.property=n,this.value=new PA(n,void 0)}transitioned(n,A){return new Vc(this.property,this.value,A,k({},n.transition,this.transition),n.now)}untransitioned(){return new Vc(this.property,this.value,null,{},0)}}class DA{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return G(this._values[n].value.value)}setValue(n,A){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new MA(this._values[n].property)),this._values[n].value=new PA(this._values[n].property,A===null?void 0:G(A))}getTransition(n){return G(this._values[n].transition)}setTransition(n,A){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new MA(this._values[n].property)),this._values[n].transition=G(A)||void 0}serialize(){const n={};for(const A of Object.keys(this._values)){const f=this.getValue(A);f!==void 0&&(n[A]=f);const y=this.getTransition(A);y!==void 0&&(n[`${A}-transition`]=y)}return n}transitioned(n,A){const f=new Kc(this._properties);for(const y of Object.keys(this._values))f._values[y]=this._values[y].transitioned(n,A._values[y]);return f}untransitioned(){const n=new Kc(this._properties);for(const A of Object.keys(this._values))n._values[A]=this._values[A].untransitioned();return n}}class Vc{constructor(n,A,f,y,C){this.property=n,this.value=A,this.begin=C+y.delay||0,this.end=this.begin+y.duration||0,n.specification.transition&&(y.delay||y.duration)&&(this.prior=f)}possiblyEvaluate(n,A,f){const y=n.now||0,C=this.value.possiblyEvaluate(n,A,f),I=this.prior;if(I){if(y>this.end)return this.prior=null,C;if(this.value.isDataDriven())return this.prior=null,C;if(y<this.begin)return I.possiblyEvaluate(n,A,f);{const D=(y-this.begin)/(this.end-this.begin);return this.property.interpolate(I.possiblyEvaluate(n,A,f),C,function(H){if(H<=0)return 0;if(H>=1)return 1;const X=H*H,re=X*H;return 4*(H<.5?re:3*(H-X)+re-.75)}(D))}}return C}}class Kc{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,A,f){const y=new dA(this._properties);for(const C of Object.keys(this._values))y._values[C]=this._values[C].possiblyEvaluate(n,A,f);return y}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class Gc{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}getValue(n){return G(this._values[n].value)}setValue(n,A){this._values[n]=new PA(this._values[n].property,A===null?void 0:G(A))}serialize(){const n={};for(const A of Object.keys(this._values)){const f=this.getValue(A);f!==void 0&&(n[A]=f)}return n}possiblyEvaluate(n,A,f){const y=new dA(this._properties);for(const C of Object.keys(this._values))y._values[C]=this._values[C].possiblyEvaluate(n,A,f);return y}}class wo{constructor(n,A,f){this.property=n,this.value=A,this.parameters=f}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,A,f,y){return this.property.evaluate(this.value,this.parameters,n,A,f,y)}}class dA{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class sn{constructor(n){this.specification=n}possiblyEvaluate(n,A){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(A)}interpolate(n,A,f){const y=Bs[this.specification.type];return y?y(n,A,f):n}}class vn{constructor(n,A){this.specification=n,this.overrides=A}possiblyEvaluate(n,A,f,y){return new wo(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(A,null,{},f,y)}:n.expression,A)}interpolate(n,A,f){if(n.value.kind!=="constant"||A.value.kind!=="constant")return n;if(n.value.value===void 0||A.value.value===void 0)return new wo(this,{kind:"constant",value:void 0},n.parameters);const y=Bs[this.specification.type];return y?new wo(this,{kind:"constant",value:y(n.value.value,A.value.value,f)},n.parameters):n}evaluate(n,A,f,y,C,I){return n.kind==="constant"?n.value:n.evaluate(A,f,y,C,I)}}class rl extends vn{possiblyEvaluate(n,A,f,y){if(n.value===void 0)return new wo(this,{kind:"constant",value:void 0},A);if(n.expression.kind==="constant"){const C=n.expression.evaluate(A,null,{},f,y),I=n.property.specification.type==="resolvedImage"&&typeof C!="string"?C.name:C,D=this._calculate(I,I,I,A);return new wo(this,{kind:"constant",value:D},A)}if(n.expression.kind==="camera"){const C=this._calculate(n.expression.evaluate({zoom:A.zoom-1}),n.expression.evaluate({zoom:A.zoom}),n.expression.evaluate({zoom:A.zoom+1}),A);return new wo(this,{kind:"constant",value:C},A)}return new wo(this,n.expression,A)}evaluate(n,A,f,y,C,I){if(n.kind==="source"){const D=n.evaluate(A,f,y,C,I);return this._calculate(D,D,D,A)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(A.zoom)-1},f,y),n.evaluate({zoom:Math.floor(A.zoom)},f,y),n.evaluate({zoom:Math.floor(A.zoom)+1},f,y),A):n.value}_calculate(n,A,f,y){return y.zoom>y.zoomHistory.lastIntegerZoom?{from:n,to:A}:{from:f,to:A}}interpolate(n){return n}}class wl{constructor(n){this.specification=n}possiblyEvaluate(n,A,f,y){if(n.value!==void 0){if(n.expression.kind==="constant"){const C=n.expression.evaluate(A,null,{},f,y);return this._calculate(C,C,C,A)}return this._calculate(n.expression.evaluate(new Ui(Math.floor(A.zoom-1),A)),n.expression.evaluate(new Ui(Math.floor(A.zoom),A)),n.expression.evaluate(new Ui(Math.floor(A.zoom+1),A)),A)}}_calculate(n,A,f,y){return y.zoom>y.zoomHistory.lastIntegerZoom?{from:n,to:A}:{from:f,to:A}}interpolate(n){return n}}class Sa{constructor(n){this.specification=n}possiblyEvaluate(n,A,f,y){return!!n.expression.evaluate(A,null,{},f,y)}interpolate(){return!1}}class as{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const A in n){const f=n[A];f.specification.overridable&&this.overridableProperties.push(A);const y=this.defaultPropertyValues[A]=new PA(f,void 0),C=this.defaultTransitionablePropertyValues[A]=new MA(f);this.defaultTransitioningPropertyValues[A]=C.untransitioned(),this.defaultPossiblyEvaluatedValues[A]=y.possiblyEvaluate({})}}}Pr("DataDrivenProperty",vn),Pr("DataConstantProperty",sn),Pr("CrossFadedDataDrivenProperty",rl),Pr("CrossFadedProperty",wl),Pr("ColorRampProperty",Sa);const pA="-transition";class bo extends pn{constructor(n,A){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1},n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),A.layout&&(this._unevaluatedLayout=new Gc(A.layout)),A.paint)){this._transitionablePaint=new DA(A.paint);for(const f in n.paint)this.setPaintProperty(f,n.paint[f],{validate:!1});for(const f in n.layout)this.setLayoutProperty(f,n.layout[f],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new dA(A.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,A,f={}){A!=null&&this._validate(hA,`layers.${this.id}.layout.${n}`,n,A,f)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,A):this.visibility=A)}getPaintProperty(n){return n.endsWith(pA)?this._transitionablePaint.getTransition(n.slice(0,-pA.length)):this._transitionablePaint.getValue(n)}setPaintProperty(n,A,f={}){if(A!=null&&this._validate(Rs,`layers.${this.id}.paint.${n}`,n,A,f))return!1;if(n.endsWith(pA))return this._transitionablePaint.setTransition(n.slice(0,-pA.length),A||void 0),!1;{const y=this._transitionablePaint._values[n],C=y.property.specification["property-type"]==="cross-faded-data-driven",I=y.value.isDataDriven(),D=y.value;this._transitionablePaint.setValue(n,A),this._handleSpecialPaintPropertyUpdate(n);const H=this._transitionablePaint._values[n].value;return H.isDataDriven()||I||C||this._handleOverridablePaintPropertyUpdate(n,D,H)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,A,f){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,A){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,A)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,A)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),O(n,(A,f)=>!(A===void 0||f==="layout"&&!Object.keys(A).length||f==="paint"&&!Object.keys(A).length))}_validate(n,A,f,y,C={}){return(!C||C.validate!==!1)&&ao(this,n.call(Ea,{key:A,layerType:this.type,objectKey:f,value:y,styleSpec:vt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const A=this.paint.get(n);if(A instanceof wo&&xi(A.property.specification)&&(A.value.kind==="source"||A.value.kind==="composite")&&A.value.isStateDependent)return!0}return!1}}const bc={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class mA{constructor(n,A){this._structArray=n,this._pos1=A*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Ji{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,A){return n._trim(),A&&(n.isTransferred=!0,A.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const A=Object.create(this.prototype);return A.arrayBuffer=n.arrayBuffer,A.length=n.length,A.capacity=n.arrayBuffer.byteLength/A.bytesPerElement,A._refreshViews(),A}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const A=this.uint8;this._refreshViews(),A&&this.uint8.set(A)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function ds(o,n=1){let A=0,f=0;return{members:o.map(y=>{const C=bc[y.type].BYTES_PER_ELEMENT,I=A=xc(A,Math.max(n,C)),D=y.components||1;return f=Math.max(f,C),A+=C*D,{name:y.name,type:y.type,components:D,offset:I}}),size:xc(A,Math.max(f,n)),alignment:n}}function xc(o,n){return Math.ceil(o/n)*n}class ha extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,A){const f=this.length;return this.resize(f+1),this.emplace(f,n,A)}emplace(n,A,f){const y=2*n;return this.int16[y+0]=A,this.int16[y+1]=f,n}}ha.prototype.bytesPerElement=4,Pr("StructArrayLayout2i4",ha);class g extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,A,f,y){const C=this.length;return this.resize(C+1),this.emplace(C,n,A,f,y)}emplace(n,A,f,y,C){const I=4*n;return this.int16[I+0]=A,this.int16[I+1]=f,this.int16[I+2]=y,this.int16[I+3]=C,n}}g.prototype.bytesPerElement=8,Pr("StructArrayLayout4i8",g);class i extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,A,f,y,C,I){const D=this.length;return this.resize(D+1),this.emplace(D,n,A,f,y,C,I)}emplace(n,A,f,y,C,I,D){const H=6*n;return this.int16[H+0]=A,this.int16[H+1]=f,this.int16[H+2]=y,this.int16[H+3]=C,this.int16[H+4]=I,this.int16[H+5]=D,n}}i.prototype.bytesPerElement=12,Pr("StructArrayLayout2i4i12",i);class u extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,A,f,y,C,I){const D=this.length;return this.resize(D+1),this.emplace(D,n,A,f,y,C,I)}emplace(n,A,f,y,C,I,D){const H=4*n,X=8*n;return this.int16[H+0]=A,this.int16[H+1]=f,this.uint8[X+4]=y,this.uint8[X+5]=C,this.uint8[X+6]=I,this.uint8[X+7]=D,n}}u.prototype.bytesPerElement=8,Pr("StructArrayLayout2i4ub8",u);class m extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,A){const f=this.length;return this.resize(f+1),this.emplace(f,n,A)}emplace(n,A,f){const y=2*n;return this.float32[y+0]=A,this.float32[y+1]=f,n}}m.prototype.bytesPerElement=8,Pr("StructArrayLayout2f8",m);class v extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,A,f,y,C,I,D,H,X,re){const le=this.length;return this.resize(le+1),this.emplace(le,n,A,f,y,C,I,D,H,X,re)}emplace(n,A,f,y,C,I,D,H,X,re,le){const ve=10*n;return this.uint16[ve+0]=A,this.uint16[ve+1]=f,this.uint16[ve+2]=y,this.uint16[ve+3]=C,this.uint16[ve+4]=I,this.uint16[ve+5]=D,this.uint16[ve+6]=H,this.uint16[ve+7]=X,this.uint16[ve+8]=re,this.uint16[ve+9]=le,n}}v.prototype.bytesPerElement=20,Pr("StructArrayLayout10ui20",v);class S extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,A,f,y,C,I,D,H,X,re,le,ve){const Ce=this.length;return this.resize(Ce+1),this.emplace(Ce,n,A,f,y,C,I,D,H,X,re,le,ve)}emplace(n,A,f,y,C,I,D,H,X,re,le,ve,Ce){const Fe=12*n;return this.int16[Fe+0]=A,this.int16[Fe+1]=f,this.int16[Fe+2]=y,this.int16[Fe+3]=C,this.uint16[Fe+4]=I,this.uint16[Fe+5]=D,this.uint16[Fe+6]=H,this.uint16[Fe+7]=X,this.int16[Fe+8]=re,this.int16[Fe+9]=le,this.int16[Fe+10]=ve,this.int16[Fe+11]=Ce,n}}S.prototype.bytesPerElement=24,Pr("StructArrayLayout4i4ui4i24",S);class P extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,A,f){const y=this.length;return this.resize(y+1),this.emplace(y,n,A,f)}emplace(n,A,f,y){const C=3*n;return this.float32[C+0]=A,this.float32[C+1]=f,this.float32[C+2]=y,n}}P.prototype.bytesPerElement=12,Pr("StructArrayLayout3f12",P);class z extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const A=this.length;return this.resize(A+1),this.emplace(A,n)}emplace(n,A){return this.uint32[1*n+0]=A,n}}z.prototype.bytesPerElement=4,Pr("StructArrayLayout1ul4",z);class q extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,A,f,y,C,I,D,H,X){const re=this.length;return this.resize(re+1),this.emplace(re,n,A,f,y,C,I,D,H,X)}emplace(n,A,f,y,C,I,D,H,X,re){const le=10*n,ve=5*n;return this.int16[le+0]=A,this.int16[le+1]=f,this.int16[le+2]=y,this.int16[le+3]=C,this.int16[le+4]=I,this.int16[le+5]=D,this.uint32[ve+3]=H,this.uint16[le+8]=X,this.uint16[le+9]=re,n}}q.prototype.bytesPerElement=20,Pr("StructArrayLayout6i1ul2ui20",q);class J extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,A,f,y,C,I){const D=this.length;return this.resize(D+1),this.emplace(D,n,A,f,y,C,I)}emplace(n,A,f,y,C,I,D){const H=6*n;return this.int16[H+0]=A,this.int16[H+1]=f,this.int16[H+2]=y,this.int16[H+3]=C,this.int16[H+4]=I,this.int16[H+5]=D,n}}J.prototype.bytesPerElement=12,Pr("StructArrayLayout2i2i2i12",J);class ie extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,A,f,y,C){const I=this.length;return this.resize(I+1),this.emplace(I,n,A,f,y,C)}emplace(n,A,f,y,C,I){const D=4*n,H=8*n;return this.float32[D+0]=A,this.float32[D+1]=f,this.float32[D+2]=y,this.int16[H+6]=C,this.int16[H+7]=I,n}}ie.prototype.bytesPerElement=16,Pr("StructArrayLayout2f1f2i16",ie);class pe extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,A,f,y){const C=this.length;return this.resize(C+1),this.emplace(C,n,A,f,y)}emplace(n,A,f,y,C){const I=12*n,D=3*n;return this.uint8[I+0]=A,this.uint8[I+1]=f,this.float32[D+1]=y,this.float32[D+2]=C,n}}pe.prototype.bytesPerElement=12,Pr("StructArrayLayout2ub2f12",pe);class be extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,A,f){const y=this.length;return this.resize(y+1),this.emplace(y,n,A,f)}emplace(n,A,f,y){const C=3*n;return this.uint16[C+0]=A,this.uint16[C+1]=f,this.uint16[C+2]=y,n}}be.prototype.bytesPerElement=6,Pr("StructArrayLayout3ui6",be);class Ve extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,A,f,y,C,I,D,H,X,re,le,ve,Ce,Fe,$e,Ze,Et){const Kt=this.length;return this.resize(Kt+1),this.emplace(Kt,n,A,f,y,C,I,D,H,X,re,le,ve,Ce,Fe,$e,Ze,Et)}emplace(n,A,f,y,C,I,D,H,X,re,le,ve,Ce,Fe,$e,Ze,Et,Kt){const xt=24*n,Dt=12*n,or=48*n;return this.int16[xt+0]=A,this.int16[xt+1]=f,this.uint16[xt+2]=y,this.uint16[xt+3]=C,this.uint32[Dt+2]=I,this.uint32[Dt+3]=D,this.uint32[Dt+4]=H,this.uint16[xt+10]=X,this.uint16[xt+11]=re,this.uint16[xt+12]=le,this.float32[Dt+7]=ve,this.float32[Dt+8]=Ce,this.uint8[or+36]=Fe,this.uint8[or+37]=$e,this.uint8[or+38]=Ze,this.uint32[Dt+10]=Et,this.int16[xt+22]=Kt,n}}Ve.prototype.bytesPerElement=48,Pr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ve);class Ne extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,A,f,y,C,I,D,H,X,re,le,ve,Ce,Fe,$e,Ze,Et,Kt,xt,Dt,or,ar,Yr,on,Wr,Mr,Lr,Xr){const Or=this.length;return this.resize(Or+1),this.emplace(Or,n,A,f,y,C,I,D,H,X,re,le,ve,Ce,Fe,$e,Ze,Et,Kt,xt,Dt,or,ar,Yr,on,Wr,Mr,Lr,Xr)}emplace(n,A,f,y,C,I,D,H,X,re,le,ve,Ce,Fe,$e,Ze,Et,Kt,xt,Dt,or,ar,Yr,on,Wr,Mr,Lr,Xr,Or){const wr=34*n,_n=17*n;return this.int16[wr+0]=A,this.int16[wr+1]=f,this.int16[wr+2]=y,this.int16[wr+3]=C,this.int16[wr+4]=I,this.int16[wr+5]=D,this.int16[wr+6]=H,this.int16[wr+7]=X,this.uint16[wr+8]=re,this.uint16[wr+9]=le,this.uint16[wr+10]=ve,this.uint16[wr+11]=Ce,this.uint16[wr+12]=Fe,this.uint16[wr+13]=$e,this.uint16[wr+14]=Ze,this.uint16[wr+15]=Et,this.uint16[wr+16]=Kt,this.uint16[wr+17]=xt,this.uint16[wr+18]=Dt,this.uint16[wr+19]=or,this.uint16[wr+20]=ar,this.uint16[wr+21]=Yr,this.uint16[wr+22]=on,this.uint32[_n+12]=Wr,this.float32[_n+13]=Mr,this.float32[_n+14]=Lr,this.float32[_n+15]=Xr,this.float32[_n+16]=Or,n}}Ne.prototype.bytesPerElement=68,Pr("StructArrayLayout8i15ui1ul4f68",Ne);class He extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const A=this.length;return this.resize(A+1),this.emplace(A,n)}emplace(n,A){return this.float32[1*n+0]=A,n}}He.prototype.bytesPerElement=4,Pr("StructArrayLayout1f4",He);class ct extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,A,f){const y=this.length;return this.resize(y+1),this.emplace(y,n,A,f)}emplace(n,A,f,y){const C=3*n;return this.int16[C+0]=A,this.int16[C+1]=f,this.int16[C+2]=y,n}}ct.prototype.bytesPerElement=6,Pr("StructArrayLayout3i6",ct);class wt extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,A,f){const y=this.length;return this.resize(y+1),this.emplace(y,n,A,f)}emplace(n,A,f,y){const C=4*n;return this.uint32[2*n+0]=A,this.uint16[C+2]=f,this.uint16[C+3]=y,n}}wt.prototype.bytesPerElement=8,Pr("StructArrayLayout1ul2ui8",wt);class St extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,A){const f=this.length;return this.resize(f+1),this.emplace(f,n,A)}emplace(n,A,f){const y=2*n;return this.uint16[y+0]=A,this.uint16[y+1]=f,n}}St.prototype.bytesPerElement=4,Pr("StructArrayLayout2ui4",St);class We extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const A=this.length;return this.resize(A+1),this.emplace(A,n)}emplace(n,A){return this.uint16[1*n+0]=A,n}}We.prototype.bytesPerElement=2,Pr("StructArrayLayout1ui2",We);class Rt extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,A,f,y){const C=this.length;return this.resize(C+1),this.emplace(C,n,A,f,y)}emplace(n,A,f,y,C){const I=4*n;return this.float32[I+0]=A,this.float32[I+1]=f,this.float32[I+2]=y,this.float32[I+3]=C,n}}Rt.prototype.bytesPerElement=16,Pr("StructArrayLayout4f16",Rt);class Qt extends mA{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new ge(this.anchorPointX,this.anchorPointY)}}Qt.prototype.size=20;class Xt extends q{get(n){return new Qt(this,n)}}Pr("CollisionBoxArray",Xt);class Zt extends mA{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Zt.prototype.size=48;class ur extends Ve{get(n){return new Zt(this,n)}}Pr("PlacedSymbolArray",ur);class qt extends mA{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}qt.prototype.size=68;class Rr extends Ne{get(n){return new qt(this,n)}}Pr("SymbolInstanceArray",Rr);class Ur extends He{getoffsetX(n){return this.float32[1*n+0]}}Pr("GlyphOffsetArray",Ur);class qr extends ct{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}Pr("SymbolLineVertexArray",qr);class Pn extends mA{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Pn.prototype.size=8;class jn extends wt{get(n){return new Pn(this,n)}}Pr("FeatureIndexArray",jn);class b extends ha{}class L extends ha{}class j extends ha{}class W extends i{}class ae extends u{}class de extends m{}class ye extends v{}class xe extends S{}class Ie extends P{}class je extends z{}class ft extends J{}class It extends pe{}class Ft extends be{}class pt extends St{}const Ar=ds([{name:"a_pos",components:2,type:"Int16"}],4),{members:Vt}=Ar;class Je{constructor(n=[]){this.segments=n}prepareSegment(n,A,f,y){let C=this.segments[this.segments.length-1];return n>Je.MAX_VERTEX_ARRAY_LENGTH&&Z(`Max vertices per segment is ${Je.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!C||C.vertexLength+n>Je.MAX_VERTEX_ARRAY_LENGTH||C.sortKey!==y)&&(C={vertexOffset:A.length,primitiveOffset:f.length,vertexLength:0,primitiveLength:0},y!==void 0&&(C.sortKey=y),this.segments.push(C)),C}get(){return this.segments}destroy(){for(const n of this.segments)for(const A in n.vaos)n.vaos[A].destroy()}static simpleSegment(n,A,f,y){return new Je([{vertexOffset:n,primitiveOffset:A,vertexLength:f,primitiveLength:y,vaos:{},sortKey:0}])}}function At(o,n){return 256*(o=w(Math.floor(o),0,255))+w(Math.floor(n),0,255)}Je.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Pr("SegmentVector",Je);const Yt=ds([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var ir={exports:{}},Wt={exports:{}};Wt.exports=function(o,n){var A,f,y,C,I,D,H,X;for(f=o.length-(A=3&o.length),y=n,I=3432918353,D=461845907,X=0;X<f;)H=255&o.charCodeAt(X)|(255&o.charCodeAt(++X))<<8|(255&o.charCodeAt(++X))<<16|(255&o.charCodeAt(++X))<<24,++X,y=27492+(65535&(C=5*(65535&(y=(y^=H=(65535&(H=(H=(65535&H)*I+(((H>>>16)*I&65535)<<16)&4294967295)<<15|H>>>17))*D+(((H>>>16)*D&65535)<<16)&4294967295)<<13|y>>>19))+((5*(y>>>16)&65535)<<16)&4294967295))+((58964+(C>>>16)&65535)<<16);switch(H=0,A){case 3:H^=(255&o.charCodeAt(X+2))<<16;case 2:H^=(255&o.charCodeAt(X+1))<<8;case 1:y^=H=(65535&(H=(H=(65535&(H^=255&o.charCodeAt(X)))*I+(((H>>>16)*I&65535)<<16)&4294967295)<<15|H>>>17))*D+(((H>>>16)*D&65535)<<16)&4294967295}return y^=o.length,y=2246822507*(65535&(y^=y>>>16))+((2246822507*(y>>>16)&65535)<<16)&4294967295,y=3266489909*(65535&(y^=y>>>13))+((3266489909*(y>>>16)&65535)<<16)&4294967295,(y^=y>>>16)>>>0};var Dr={exports:{}};Dr.exports=function(o,n){for(var A,f=o.length,y=n^f,C=0;f>=4;)A=1540483477*(65535&(A=255&o.charCodeAt(C)|(255&o.charCodeAt(++C))<<8|(255&o.charCodeAt(++C))<<16|(255&o.charCodeAt(++C))<<24))+((1540483477*(A>>>16)&65535)<<16),y=1540483477*(65535&y)+((1540483477*(y>>>16)&65535)<<16)^(A=1540483477*(65535&(A^=A>>>24))+((1540483477*(A>>>16)&65535)<<16)),f-=4,++C;switch(f){case 3:y^=(255&o.charCodeAt(C+2))<<16;case 2:y^=(255&o.charCodeAt(C+1))<<8;case 1:y=1540483477*(65535&(y^=255&o.charCodeAt(C)))+((1540483477*(y>>>16)&65535)<<16)}return y=1540483477*(65535&(y^=y>>>13))+((1540483477*(y>>>16)&65535)<<16),(y^=y>>>15)>>>0};var Qr=Wt.exports,Fn=Dr.exports;ir.exports=Qr,ir.exports.murmur3=Qr,ir.exports.murmur2=Fn;class Nr{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,A,f,y){this.ids.push(fi(n)),this.positions.push(A,f,y)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const A=fi(n);let f=0,y=this.ids.length-1;for(;f<y;){const I=f+y>>1;this.ids[I]>=A?y=I:f=I+1}const C=[];for(;this.ids[f]===A;)C.push({index:this.positions[3*f],start:this.positions[3*f+1],end:this.positions[3*f+2]}),f++;return C}static serialize(n,A){const f=new Float64Array(n.ids),y=new Uint32Array(n.positions);return di(f,y,0,f.length-1),A&&A.push(f.buffer,y.buffer),{ids:f,positions:y}}static deserialize(n){const A=new Nr;return A.ids=n.ids,A.positions=n.positions,A.indexed=!0,A}}function fi(o){const n=+o;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:ir.exports(String(o))}function di(o,n,A,f){for(;A<f;){const y=o[A+f>>1];let C=A-1,I=f+1;for(;;){do C++;while(o[C]<y);do I--;while(o[I]>y);if(C>=I)break;hr(o,C,I),hr(n,3*C,3*I),hr(n,3*C+1,3*I+1),hr(n,3*C+2,3*I+2)}I-A<f-I?(di(o,n,A,I),A=I+1):(di(o,n,I+1,f),f=I)}}function hr(o,n,A){const f=o[n];o[n]=o[A],o[A]=f}Pr("FeaturePositionMap",Nr);class zn{constructor(n,A){this.gl=n.gl,this.location=A}}class li extends zn{constructor(n,A){super(n,A),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class ci extends zn{constructor(n,A){super(n,A),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class Un extends zn{constructor(n,A){super(n,A),this.current=Le.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const Is=new Float32Array(16);function Js(o){return[At(255*o.r,255*o.g),At(255*o.b,255*o.a)]}class Qi{constructor(n,A,f){this.value=n,this.uniformNames=A.map(y=>`u_${y}`),this.type=f}setUniform(n,A,f){n.set(f.constantOr(this.value))}getBinding(n,A,f){return this.type==="color"?new Un(n,A):new li(n,A)}}class ps{constructor(n,A){this.uniformNames=A.map(f=>`u_${f}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,A){this.pixelRatioFrom=A.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=A.tlbr,this.patternTo=n.tlbr}setUniform(n,A,f,y){const C=y==="u_pattern_to"?this.patternTo:y==="u_pattern_from"?this.patternFrom:y==="u_pixel_ratio_to"?this.pixelRatioTo:y==="u_pixel_ratio_from"?this.pixelRatioFrom:null;C&&n.set(C)}getBinding(n,A,f){return f.substr(0,9)==="u_pattern"?new ci(n,A):new li(n,A)}}class ti{constructor(n,A,f,y){this.expression=n,this.type=f,this.maxValue=0,this.paintVertexAttributes=A.map(C=>({name:`a_${C}`,type:"Float32",components:f==="color"?2:1,offset:0})),this.paintVertexArray=new y}populatePaintArray(n,A,f,y,C){const I=this.paintVertexArray.length,D=this.expression.evaluate(new Ui(0),A,{},y,[],C);this.paintVertexArray.resize(n),this._setPaintValue(I,n,D)}updatePaintArray(n,A,f,y){const C=this.expression.evaluate({zoom:0},f,y);this._setPaintValue(n,A,C)}_setPaintValue(n,A,f){if(this.type==="color"){const y=Js(f);for(let C=n;C<A;C++)this.paintVertexArray.emplace(C,y[0],y[1])}else{for(let y=n;y<A;y++)this.paintVertexArray.emplace(y,f);this.maxValue=Math.max(this.maxValue,Math.abs(f))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class os{constructor(n,A,f,y,C,I){this.expression=n,this.uniformNames=A.map(D=>`u_${D}_t`),this.type=f,this.useIntegerZoom=y,this.zoom=C,this.maxValue=0,this.paintVertexAttributes=A.map(D=>({name:`a_${D}`,type:"Float32",components:f==="color"?4:2,offset:0})),this.paintVertexArray=new I}populatePaintArray(n,A,f,y,C){const I=this.expression.evaluate(new Ui(this.zoom),A,{},y,[],C),D=this.expression.evaluate(new Ui(this.zoom+1),A,{},y,[],C),H=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(H,n,I,D)}updatePaintArray(n,A,f,y){const C=this.expression.evaluate({zoom:this.zoom},f,y),I=this.expression.evaluate({zoom:this.zoom+1},f,y);this._setPaintValue(n,A,C,I)}_setPaintValue(n,A,f,y){if(this.type==="color"){const C=Js(f),I=Js(y);for(let D=n;D<A;D++)this.paintVertexArray.emplace(D,C[0],C[1],I[0],I[1])}else{for(let C=n;C<A;C++)this.paintVertexArray.emplace(C,f,y);this.maxValue=Math.max(this.maxValue,Math.abs(f),Math.abs(y))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,A){const f=this.useIntegerZoom?Math.floor(A.zoom):A.zoom,y=w(this.expression.interpolationFactor(f,this.zoom,this.zoom+1),0,1);n.set(y)}getBinding(n,A,f){return new li(n,A)}}class Ts{constructor(n,A,f,y,C,I){this.expression=n,this.type=A,this.useIntegerZoom=f,this.zoom=y,this.layerId=I,this.zoomInPaintVertexArray=new C,this.zoomOutPaintVertexArray=new C}populatePaintArray(n,A,f){const y=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(y,n,A.patterns&&A.patterns[this.layerId],f)}updatePaintArray(n,A,f,y,C){this._setPaintValues(n,A,f.patterns&&f.patterns[this.layerId],C)}_setPaintValues(n,A,f,y){if(!y||!f)return;const{min:C,mid:I,max:D}=f,H=y[C],X=y[I],re=y[D];if(H&&X&&re)for(let le=n;le<A;le++)this.zoomInPaintVertexArray.emplace(le,X.tl[0],X.tl[1],X.br[0],X.br[1],H.tl[0],H.tl[1],H.br[0],H.br[1],X.pixelRatio,H.pixelRatio),this.zoomOutPaintVertexArray.emplace(le,X.tl[0],X.tl[1],X.br[0],X.br[1],re.tl[0],re.tl[1],re.br[0],re.br[1],X.pixelRatio,re.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,Yt.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,Yt.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Vi{constructor(n,A,f){this.binders={},this._buffers=[];const y=[];for(const C in n.paint._values){if(!f(C))continue;const I=n.paint.get(C);if(!(I instanceof wo&&xi(I.property.specification)))continue;const D=Ys(C,n.type),H=I.value,X=I.property.specification.type,re=I.property.useIntegerZoom,le=I.property.specification["property-type"],ve=le==="cross-faded"||le==="cross-faded-data-driven";if(H.kind==="constant")this.binders[C]=ve?new ps(H.value,D):new Qi(H.value,D,X),y.push(`/u_${C}`);else if(H.kind==="source"||ve){const Ce=Ao(C,X,"source");this.binders[C]=ve?new Ts(H,X,re,A,Ce,n.id):new ti(H,D,X,Ce),y.push(`/a_${C}`)}else{const Ce=Ao(C,X,"composite");this.binders[C]=new os(H,D,X,re,A,Ce),y.push(`/z_${C}`)}}this.cacheKey=y.sort().join("")}getMaxValue(n){const A=this.binders[n];return A instanceof ti||A instanceof os?A.maxValue:0}populatePaintArrays(n,A,f,y,C){for(const I in this.binders){const D=this.binders[I];(D instanceof ti||D instanceof os||D instanceof Ts)&&D.populatePaintArray(n,A,f,y,C)}}setConstantPatternPositions(n,A){for(const f in this.binders){const y=this.binders[f];y instanceof ps&&y.setConstantPatternPositions(n,A)}}updatePaintArrays(n,A,f,y,C){let I=!1;for(const D in n){const H=A.getPositions(D);for(const X of H){const re=f.feature(X.index);for(const le in this.binders){const ve=this.binders[le];if((ve instanceof ti||ve instanceof os||ve instanceof Ts)&&ve.expression.isStateDependent===!0){const Ce=y.paint.get(le);ve.expression=Ce.value,ve.updatePaintArray(X.start,X.end,re,n[D],C),I=!0}}}}return I}defines(){const n=[];for(const A in this.binders){const f=this.binders[A];(f instanceof Qi||f instanceof ps)&&n.push(...f.uniformNames.map(y=>`#define HAS_UNIFORM_${y}`))}return n}getBinderAttributes(){const n=[];for(const A in this.binders){const f=this.binders[A];if(f instanceof ti||f instanceof os)for(let y=0;y<f.paintVertexAttributes.length;y++)n.push(f.paintVertexAttributes[y].name);else if(f instanceof Ts)for(let y=0;y<Yt.members.length;y++)n.push(Yt.members[y].name)}return n}getBinderUniforms(){const n=[];for(const A in this.binders){const f=this.binders[A];if(f instanceof Qi||f instanceof ps||f instanceof os)for(const y of f.uniformNames)n.push(y)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,A){const f=[];for(const y in this.binders){const C=this.binders[y];if(C instanceof Qi||C instanceof ps||C instanceof os){for(const I of C.uniformNames)if(A[I]){const D=C.getBinding(n,A[I],I);f.push({name:I,property:y,binding:D})}}}return f}setUniforms(n,A,f,y){for(const{name:C,property:I,binding:D}of A)this.binders[I].setUniform(D,y,f.get(I),C)}updatePaintBuffers(n){this._buffers=[];for(const A in this.binders){const f=this.binders[A];if(n&&f instanceof Ts){const y=n.fromScale===2?f.zoomInPaintVertexBuffer:f.zoomOutPaintVertexBuffer;y&&this._buffers.push(y)}else(f instanceof ti||f instanceof os)&&f.paintVertexBuffer&&this._buffers.push(f.paintVertexBuffer)}}upload(n){for(const A in this.binders){const f=this.binders[A];(f instanceof ti||f instanceof os||f instanceof Ts)&&f.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const A=this.binders[n];(A instanceof ti||A instanceof os||A instanceof Ts)&&A.destroy()}}}class Ki{constructor(n,A,f=()=>!0){this.programConfigurations={};for(const y of n)this.programConfigurations[y.id]=new Vi(y,A,f);this.needsUpload=!1,this._featureMap=new Nr,this._bufferOffset=0}populatePaintArrays(n,A,f,y,C,I){for(const D in this.programConfigurations)this.programConfigurations[D].populatePaintArrays(n,A,y,C,I);A.id!==void 0&&this._featureMap.add(A.id,f,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,A,f,y){for(const C of f)this.needsUpload=this.programConfigurations[C.id].updatePaintArrays(n,this._featureMap,A,C,y)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const A in this.programConfigurations)this.programConfigurations[A].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}function Ys(o,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(`${n}-`,"").replace(/-/g,"_")]}function Ao(o,n,A){const f={color:{source:m,composite:Rt},number:{source:He,composite:m}},y=function(C){return{"line-pattern":{source:ye,composite:ye},"fill-pattern":{source:ye,composite:ye},"fill-extrusion-pattern":{source:ye,composite:ye}}[C]}(o);return y&&y[A]||f[n][A]}Pr("ConstantBinder",Qi),Pr("CrossFadedConstantBinder",ps),Pr("SourceExpressionBinder",ti),Pr("CrossFadedCompositeBinder",Ts),Pr("CompositeExpressionBinder",os),Pr("ProgramConfiguration",Vi,{omit:["_buffers"]}),Pr("ProgramConfigurationSet",Ki);var Ci=8192;const Us=Math.pow(2,14)-1,xo=-Us-1;function lo(o){const n=Ci/o.extent,A=o.loadGeometry();for(let f=0;f<A.length;f++){const y=A[f];for(let C=0;C<y.length;C++){const I=y[C],D=Math.round(I.x*n),H=Math.round(I.y*n);I.x=w(D,xo,Us),I.y=w(H,xo,Us),(D<I.x||D>I.x+1||H<I.y||H>I.y+1)&&Z("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return A}function Bo(o,n){return{type:o.type,id:o.id,properties:o.properties,geometry:n?lo(o):[]}}function Ho(o,n,A,f,y){o.emplaceBack(2*n+(f+1)/2,2*A+(y+1)/2)}class Yi{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(A=>A.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new L,this.indexArray=new Ft,this.segments=new Je,this.programConfigurations=new Ki(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(A=>A.isStateDependent()).map(A=>A.id)}populate(n,A,f){const y=this.layers[0],C=[];let I=null,D=!1;y.type==="circle"&&(I=y.layout.get("circle-sort-key"),D=!I.isConstant());for(const{feature:H,id:X,index:re,sourceLayerIndex:le}of n){const ve=this.layers[0]._featureFilter.needGeometry,Ce=Bo(H,ve);if(!this.layers[0]._featureFilter.filter(new Ui(this.zoom),Ce,f))continue;const Fe=D?I.evaluate(Ce,{},f):void 0,$e={id:X,properties:H.properties,type:H.type,sourceLayerIndex:le,index:re,geometry:ve?Ce.geometry:lo(H),patterns:{},sortKey:Fe};C.push($e)}D&&C.sort((H,X)=>H.sortKey-X.sortKey);for(const H of C){const{geometry:X,index:re,sourceLayerIndex:le}=H,ve=n[re].feature;this.addFeature(H,X,re,f),A.featureIndex.insert(ve,X,re,le,this.index)}}update(n,A,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,A,this.stateDependentLayers,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Vt),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,A,f,y){for(const C of A)for(const I of C){const D=I.x,H=I.y;if(D<0||D>=Ci||H<0||H>=Ci)continue;const X=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),re=X.vertexLength;Ho(this.layoutVertexArray,D,H,-1,-1),Ho(this.layoutVertexArray,D,H,1,-1),Ho(this.layoutVertexArray,D,H,1,1),Ho(this.layoutVertexArray,D,H,-1,1),this.indexArray.emplaceBack(re,re+1,re+2),this.indexArray.emplaceBack(re,re+3,re+2),X.vertexLength+=4,X.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,f,{},y)}}function qc(o,n){for(let A=0;A<o.length;A++)if(xl(n,o[A]))return!0;for(let A=0;A<n.length;A++)if(xl(o,n[A]))return!0;return!!nl(o,n)}function lh(o,n,A){return!!xl(o,n)||!!co(n,o,A)}function Fu(o,n){if(o.length===1)return il(n,o[0]);for(let A=0;A<n.length;A++){const f=n[A];for(let y=0;y<f.length;y++)if(xl(o,f[y]))return!0}for(let A=0;A<o.length;A++)if(il(n,o[A]))return!0;for(let A=0;A<n.length;A++)if(nl(o,n[A]))return!0;return!1}function Wc(o,n,A){if(o.length>1){if(nl(o,n))return!0;for(let f=0;f<n.length;f++)if(co(n[f],o,A))return!0}for(let f=0;f<o.length;f++)if(co(o[f],n,A))return!0;return!1}function nl(o,n){if(o.length===0||n.length===0)return!1;for(let A=0;A<o.length-1;A++){const f=o[A],y=o[A+1];for(let C=0;C<n.length-1;C++)if(Xc(f,y,n[C],n[C+1]))return!0}return!1}function Xc(o,n,A,f){return $(o,A,f)!==$(n,A,f)&&$(o,n,A)!==$(o,n,f)}function co(o,n,A){const f=A*A;if(n.length===1)return o.distSqr(n[0])<f;for(let y=1;y<n.length;y++)if(bl(o,n[y-1],n[y])<f)return!0;return!1}function bl(o,n,A){const f=n.distSqr(A);if(f===0)return o.distSqr(n);const y=((o.x-n.x)*(A.x-n.x)+(o.y-n.y)*(A.y-n.y))/f;return o.distSqr(y<0?n:y>1?A:A.sub(n)._mult(y)._add(n))}function il(o,n){let A,f,y,C=!1;for(let I=0;I<o.length;I++){A=o[I];for(let D=0,H=A.length-1;D<A.length;H=D++)f=A[D],y=A[H],f.y>n.y!=y.y>n.y&&n.x<(y.x-f.x)*(n.y-f.y)/(y.y-f.y)+f.x&&(C=!C)}return C}function xl(o,n){let A=!1;for(let f=0,y=o.length-1;f<o.length;y=f++){const C=o[f],I=o[y];C.y>n.y!=I.y>n.y&&n.x<(I.x-C.x)*(n.y-C.y)/(I.y-C.y)+C.x&&(A=!A)}return A}function Bl(o,n,A){const f=A[0],y=A[2];if(o.x<f.x&&n.x<f.x||o.x>y.x&&n.x>y.x||o.y<f.y&&n.y<f.y||o.y>y.y&&n.y>y.y)return!1;const C=$(o,n,A[0]);return C!==$(o,n,A[1])||C!==$(o,n,A[2])||C!==$(o,n,A[3])}function Jl(o,n,A){const f=n.paint.get(o).value;return f.kind==="constant"?f.value:A.programConfigurations.get(n.id).getMaxValue(o)}function NA(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function sl(o,n,A,f,y){if(!n[0]&&!n[1])return o;const C=ge.convert(n)._mult(y);A==="viewport"&&C._rotate(-f);const I=[];for(let D=0;D<o.length;D++)I.push(o[D].sub(C));return I}Pr("CircleBucket",Yi,{omit:["layers"]});const Bc=new as({"circle-sort-key":new vn(vt.layout_circle["circle-sort-key"])});var Yl={paint:new as({"circle-radius":new vn(vt.paint_circle["circle-radius"]),"circle-color":new vn(vt.paint_circle["circle-color"]),"circle-blur":new vn(vt.paint_circle["circle-blur"]),"circle-opacity":new vn(vt.paint_circle["circle-opacity"]),"circle-translate":new sn(vt.paint_circle["circle-translate"]),"circle-translate-anchor":new sn(vt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new sn(vt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new sn(vt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new vn(vt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new vn(vt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new vn(vt.paint_circle["circle-stroke-opacity"])}),layout:Bc},fa=1e-6,$s=typeof Float32Array<"u"?Float32Array:Array;function $l(){var o=new $s(9);return $s!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[5]=0,o[6]=0,o[7]=0),o[0]=1,o[4]=1,o[8]=1,o}function Co(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function Su(o,n,A){var f=n[0],y=n[1],C=n[2],I=n[3],D=n[4],H=n[5],X=n[6],re=n[7],le=n[8],ve=n[9],Ce=n[10],Fe=n[11],$e=n[12],Ze=n[13],Et=n[14],Kt=n[15],xt=A[0],Dt=A[1],or=A[2],ar=A[3];return o[0]=xt*f+Dt*D+or*le+ar*$e,o[1]=xt*y+Dt*H+or*ve+ar*Ze,o[2]=xt*C+Dt*X+or*Ce+ar*Et,o[3]=xt*I+Dt*re+or*Fe+ar*Kt,o[4]=(xt=A[4])*f+(Dt=A[5])*D+(or=A[6])*le+(ar=A[7])*$e,o[5]=xt*y+Dt*H+or*ve+ar*Ze,o[6]=xt*C+Dt*X+or*Ce+ar*Et,o[7]=xt*I+Dt*re+or*Fe+ar*Kt,o[8]=(xt=A[8])*f+(Dt=A[9])*D+(or=A[10])*le+(ar=A[11])*$e,o[9]=xt*y+Dt*H+or*ve+ar*Ze,o[10]=xt*C+Dt*X+or*Ce+ar*Et,o[11]=xt*I+Dt*re+or*Fe+ar*Kt,o[12]=(xt=A[12])*f+(Dt=A[13])*D+(or=A[14])*le+(ar=A[15])*$e,o[13]=xt*y+Dt*H+or*ve+ar*Ze,o[14]=xt*C+Dt*X+or*Ce+ar*Et,o[15]=xt*I+Dt*re+or*Fe+ar*Kt,o}Math.hypot||(Math.hypot=function(){for(var o=0,n=arguments.length;n--;)o+=arguments[n]*arguments[n];return Math.sqrt(o)});var ec,ch=Su;function Zc(){var o=new $s(3);return $s!=Float32Array&&(o[0]=0,o[1]=0,o[2]=0),o}function Cl(o,n,A){var f=new $s(3);return f[0]=o,f[1]=n,f[2]=A,f}function Cc(o,n,A){var f=n[0],y=n[1],C=n[2],I=n[3];return o[0]=A[0]*f+A[4]*y+A[8]*C+A[12]*I,o[1]=A[1]*f+A[5]*y+A[9]*C+A[13]*I,o[2]=A[2]*f+A[6]*y+A[10]*C+A[14]*I,o[3]=A[3]*f+A[7]*y+A[11]*C+A[15]*I,o}function Iu(){var o=new $s(4);return $s!=Float32Array&&(o[0]=0,o[1]=0,o[2]=0),o[3]=1,o}function Ec(o,n){const A=Cc([],[o.x,o.y,0,1],n);return new ge(A[0]/A[3],A[1]/A[3])}Zc(),ec=new $s(4),$s!=Float32Array&&(ec[0]=0,ec[1]=0,ec[2]=0,ec[3]=0),Zc(),Cl(1,0,0),Cl(0,1,0),Iu(),Iu(),$l(),function(){var o;o=new $s(2),$s!=Float32Array&&(o[0]=0,o[1]=0)}();class Ia extends Yi{}Pr("HeatmapBucket",Ia,{omit:["layers"]});var El={paint:new as({"heatmap-radius":new vn(vt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new vn(vt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new sn(vt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Sa(vt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new sn(vt.paint_heatmap["heatmap-opacity"])})};function Jc(o,{width:n,height:A},f,y){if(y){if(y instanceof Uint8ClampedArray)y=new Uint8Array(y.buffer);else if(y.length!==n*A*f)throw new RangeError(`mismatched image size. expected: ${y.length} but got: ${n*A*f}`)}else y=new Uint8Array(n*A*f);return o.width=n,o.height=A,o.data=y,o}function uh(o,{width:n,height:A},f){if(n===o.width&&A===o.height)return;const y=Jc({},{width:n,height:A},f);tc(o,y,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,n),height:Math.min(o.height,A)},f),o.width=n,o.height=A,o.data=y.data}function tc(o,n,A,f,y,C){if(y.width===0||y.height===0)return n;if(y.width>o.width||y.height>o.height||A.x>o.width-y.width||A.y>o.height-y.height)throw new RangeError("out of range source coordinates for image copy");if(y.width>n.width||y.height>n.height||f.x>n.width-y.width||f.y>n.height-y.height)throw new RangeError("out of range destination coordinates for image copy");const I=o.data,D=n.data;if(I===D)throw new Error("srcData equals dstData, so image is already copied");for(let H=0;H<y.height;H++){const X=((A.y+H)*o.width+A.x)*C,re=((f.y+H)*n.width+f.x)*C;for(let le=0;le<y.width*C;le++)D[re+le]=I[X+le]}return n}class rc{constructor(n,A){Jc(this,n,1,A)}resize(n){uh(this,n,1)}clone(){return new rc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,A,f,y,C){tc(n,A,f,y,C,1)}}class Ta{constructor(n,A){Jc(this,n,4,A)}resize(n){uh(this,n,4)}replace(n,A){A?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new Ta({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,A,f,y,C){tc(n,A,f,y,C,4)}}function jA(o){const n={},A=o.resolution||256,f=o.clips?o.clips.length:1,y=o.image||new Ta({width:A,height:f});if(Math.log(A)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${A}`);const C=(I,D,H)=>{n[o.evaluationKey]=H;const X=o.expression.evaluate(n);y.data[I+D+0]=Math.floor(255*X.r/X.a),y.data[I+D+1]=Math.floor(255*X.g/X.a),y.data[I+D+2]=Math.floor(255*X.b/X.a),y.data[I+D+3]=Math.floor(255*X.a)};if(o.clips)for(let I=0,D=0;I<f;++I,D+=4*A)for(let H=0,X=0;H<A;H++,X+=4){const re=H/(A-1),{start:le,end:ve}=o.clips[I];C(D,X,le*(1-re)+ve*re)}else for(let I=0,D=0;I<A;I++,D+=4)C(0,D,I/(A-1));return y}Pr("AlphaImage",rc),Pr("RGBAImage",Ta);var hh={paint:new as({"hillshade-illumination-direction":new sn(vt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new sn(vt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new sn(vt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new sn(vt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new sn(vt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new sn(vt.paint_hillshade["hillshade-accent-color"])})};const fh=ds([{name:"a_pos",components:2,type:"Int16"}],4),{members:$h}=fh;var nc={exports:{}};function RA(o,n,A){A=A||2;var f,y,C,I,D,H,X,re=n&&n.length,le=re?n[0]*A:o.length,ve=Yc(o,0,le,A,!0),Ce=[];if(!ve||ve.next===ve.prev)return Ce;if(re&&(ve=function($e,Ze,Et,Kt){var xt,Dt,or,ar=[];for(xt=0,Dt=Ze.length;xt<Dt;xt++)(or=Yc($e,Ze[xt]*Kt,xt<Dt-1?Ze[xt+1]*Kt:$e.length,Kt,!1))===or.next&&(or.steiner=!0),ar.push(eu(or));for(ar.sort(sc),xt=0;xt<ar.length;xt++)Et=HA(ar[xt],Et);return Et}(o,n,ve,A)),o.length>80*A){f=C=o[0],y=I=o[1];for(var Fe=A;Fe<le;Fe+=A)(D=o[Fe])<f&&(f=D),(H=o[Fe+1])<y&&(y=H),D>C&&(C=D),H>I&&(I=H);X=(X=Math.max(C-f,I-y))!==0?32767/X:0}return _s(ve,Ce,A,f,y,X,0),Ce}function Yc(o,n,A,f,y){var C,I;if(y===rf(o,n,A,f)>0)for(C=n;C<A;C+=f)I=cd(C,o[C],o[C+1],I);else for(C=A-f;C>=n;C-=f)I=cd(C,o[C],o[C+1],I);return I&&ac(I,I.next)&&(Lu(I),I=I.next),I}function OA(o,n){if(!o)return o;n||(n=o);var A,f=o;do if(A=!1,f.steiner||!ac(f,f.next)&&As(f.prev,f,f.next)!==0)f=f.next;else{if(Lu(f),(f=n=f.prev)===f.next)break;A=!0}while(A||f!==n);return n}function _s(o,n,A,f,y,C,I){if(o){!I&&C&&function(re,le,ve,Ce){var Fe=re;do Fe.z===0&&(Fe.z=gA(Fe.x,Fe.y,le,ve,Ce)),Fe.prevZ=Fe.prev,Fe.nextZ=Fe.next,Fe=Fe.next;while(Fe!==re);Fe.prevZ.nextZ=null,Fe.prevZ=null,function($e){var Ze,Et,Kt,xt,Dt,or,ar,Yr,on=1;do{for(Et=$e,$e=null,Dt=null,or=0;Et;){for(or++,Kt=Et,ar=0,Ze=0;Ze<on&&(ar++,Kt=Kt.nextZ);Ze++);for(Yr=on;ar>0||Yr>0&&Kt;)ar!==0&&(Yr===0||!Kt||Et.z<=Kt.z)?(xt=Et,Et=Et.nextZ,ar--):(xt=Kt,Kt=Kt.nextZ,Yr--),Dt?Dt.nextZ=xt:$e=xt,xt.prevZ=Dt,Dt=xt;Et=Kt}Dt.nextZ=null,on*=2}while(or>1)}(Fe)}(o,f,y,C);for(var D,H,X=o;o.prev!==o.next;)if(D=o.prev,H=o.next,C?ef(o,f,y,C):ic(o))n.push(D.i/A|0),n.push(o.i/A|0),n.push(H.i/A|0),Lu(o),o=H.next,X=H.next;else if((o=H)===X){I?I===1?_s(o=Fc(OA(o),n,A),n,A,f,y,C,2):I===2&&$c(o,n,A,f,y,C):_s(OA(o),n,A,f,y,C,1);break}}}function ic(o){var n=o.prev,A=o,f=o.next;if(As(n,A,f)>=0)return!1;for(var y=n.x,C=A.x,I=f.x,D=n.y,H=A.y,X=f.y,re=y<C?y<I?y:I:C<I?C:I,le=D<H?D<X?D:X:H<X?H:X,ve=y>C?y>I?y:I:C>I?C:I,Ce=D>H?D>X?D:X:H>X?H:X,Fe=f.next;Fe!==n;){if(Fe.x>=re&&Fe.x<=ve&&Fe.y>=le&&Fe.y<=Ce&&ol(y,D,C,H,I,X,Fe.x,Fe.y)&&As(Fe.prev,Fe,Fe.next)>=0)return!1;Fe=Fe.next}return!0}function ef(o,n,A,f){var y=o.prev,C=o,I=o.next;if(As(y,C,I)>=0)return!1;for(var D=y.x,H=C.x,X=I.x,re=y.y,le=C.y,ve=I.y,Ce=D<H?D<X?D:X:H<X?H:X,Fe=re<le?re<ve?re:ve:le<ve?le:ve,$e=D>H?D>X?D:X:H>X?H:X,Ze=re>le?re>ve?re:ve:le>ve?le:ve,Et=gA(Ce,Fe,n,A,f),Kt=gA($e,Ze,n,A,f),xt=o.prevZ,Dt=o.nextZ;xt&&xt.z>=Et&&Dt&&Dt.z<=Kt;){if(xt.x>=Ce&&xt.x<=$e&&xt.y>=Fe&&xt.y<=Ze&&xt!==y&&xt!==I&&ol(D,re,H,le,X,ve,xt.x,xt.y)&&As(xt.prev,xt,xt.next)>=0||(xt=xt.prevZ,Dt.x>=Ce&&Dt.x<=$e&&Dt.y>=Fe&&Dt.y<=Ze&&Dt!==y&&Dt!==I&&ol(D,re,H,le,X,ve,Dt.x,Dt.y)&&As(Dt.prev,Dt,Dt.next)>=0))return!1;Dt=Dt.nextZ}for(;xt&&xt.z>=Et;){if(xt.x>=Ce&&xt.x<=$e&&xt.y>=Fe&&xt.y<=Ze&&xt!==y&&xt!==I&&ol(D,re,H,le,X,ve,xt.x,xt.y)&&As(xt.prev,xt,xt.next)>=0)return!1;xt=xt.prevZ}for(;Dt&&Dt.z<=Kt;){if(Dt.x>=Ce&&Dt.x<=$e&&Dt.y>=Fe&&Dt.y<=Ze&&Dt!==y&&Dt!==I&&ol(D,re,H,le,X,ve,Dt.x,Dt.y)&&As(Dt.prev,Dt,Dt.next)>=0)return!1;Dt=Dt.nextZ}return!0}function Fc(o,n,A){var f=o;do{var y=f.prev,C=f.next.next;!ac(y,C)&&Sc(y,f,f.next,C)&&tu(y,C)&&tu(C,y)&&(n.push(y.i/A|0),n.push(f.i/A|0),n.push(C.i/A|0),Lu(f),Lu(f.next),f=o=C),f=f.next}while(f!==o);return OA(f)}function $c(o,n,A,f,y,C){var I=o;do{for(var D=I.next.next;D!==I.prev;){if(I.i!==D.i&&dh(I,D)){var H=ph(I,D);return I=OA(I,I.next),H=OA(H,H.next),_s(I,n,A,f,y,C,0),void _s(H,n,A,f,y,C,0)}D=D.next}I=I.next}while(I!==o)}function sc(o,n){return o.x-n.x}function HA(o,n){var A=function(y,C){var I,D=C,H=y.x,X=y.y,re=-1/0;do{if(X<=D.y&&X>=D.next.y&&D.next.y!==D.y){var le=D.x+(X-D.y)*(D.next.x-D.x)/(D.next.y-D.y);if(le<=H&&le>re&&(re=le,I=D.x<D.next.x?D:D.next,le===H))return I}D=D.next}while(D!==C);if(!I)return null;var ve,Ce=I,Fe=I.x,$e=I.y,Ze=1/0;D=I;do H>=D.x&&D.x>=Fe&&H!==D.x&&ol(X<$e?H:re,X,Fe,$e,X<$e?re:H,X,D.x,D.y)&&(ve=Math.abs(X-D.y)/(H-D.x),tu(D,y)&&(ve<Ze||ve===Ze&&(D.x>I.x||D.x===I.x&&al(I,D)))&&(I=D,Ze=ve)),D=D.next;while(D!==Ce);return I}(o,n);if(!A)return n;var f=ph(A,o);return OA(f,f.next),OA(A,A.next)}function al(o,n){return As(o.prev,o,n.prev)<0&&As(n.next,o,o.next)<0}function gA(o,n,A,f,y){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-A)*y|0)|o<<8))|o<<4))|o<<2))|o<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-f)*y|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function eu(o){var n=o,A=o;do(n.x<A.x||n.x===A.x&&n.y<A.y)&&(A=n),n=n.next;while(n!==o);return A}function ol(o,n,A,f,y,C,I,D){return(y-I)*(n-D)>=(o-I)*(C-D)&&(o-I)*(f-D)>=(A-I)*(n-D)&&(A-I)*(C-D)>=(y-I)*(f-D)}function dh(o,n){return o.next.i!==n.i&&o.prev.i!==n.i&&!function(A,f){var y=A;do{if(y.i!==A.i&&y.next.i!==A.i&&y.i!==f.i&&y.next.i!==f.i&&Sc(y,y.next,A,f))return!0;y=y.next}while(y!==A);return!1}(o,n)&&(tu(o,n)&&tu(n,o)&&function(A,f){var y=A,C=!1,I=(A.x+f.x)/2,D=(A.y+f.y)/2;do y.y>D!=y.next.y>D&&y.next.y!==y.y&&I<(y.next.x-y.x)*(D-y.y)/(y.next.y-y.y)+y.x&&(C=!C),y=y.next;while(y!==A);return C}(o,n)&&(As(o.prev,o,n.prev)||As(o,n.prev,n))||ac(o,n)&&As(o.prev,o,o.next)>0&&As(n.prev,n,n.next)>0)}function As(o,n,A){return(n.y-o.y)*(A.x-n.x)-(n.x-o.x)*(A.y-n.y)}function ac(o,n){return o.x===n.x&&o.y===n.y}function Sc(o,n,A,f){var y=Uu(As(o,n,A)),C=Uu(As(o,n,f)),I=Uu(As(A,f,o)),D=Uu(As(A,f,n));return y!==C&&I!==D||!(y!==0||!Tu(o,A,n))||!(C!==0||!Tu(o,f,n))||!(I!==0||!Tu(A,o,f))||!(D!==0||!Tu(A,n,f))}function Tu(o,n,A){return n.x<=Math.max(o.x,A.x)&&n.x>=Math.min(o.x,A.x)&&n.y<=Math.max(o.y,A.y)&&n.y>=Math.min(o.y,A.y)}function Uu(o){return o>0?1:o<0?-1:0}function tu(o,n){return As(o.prev,o,o.next)<0?As(o,n,o.next)>=0&&As(o,o.prev,n)>=0:As(o,n,o.prev)<0||As(o,o.next,n)<0}function ph(o,n){var A=new tf(o.i,o.x,o.y),f=new tf(n.i,n.x,n.y),y=o.next,C=n.prev;return o.next=n,n.prev=o,A.next=y,y.prev=A,f.next=A,A.prev=f,C.next=f,f.prev=C,f}function cd(o,n,A,f){var y=new tf(o,n,A);return f?(y.next=f.next,y.prev=f,f.next.prev=y,f.next=y):(y.prev=y,y.next=y),y}function Lu(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function tf(o,n,A){this.i=o,this.x=n,this.y=A,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function rf(o,n,A,f){for(var y=0,C=n,I=A-f;C<A;C+=f)y+=(o[I]-o[C])*(o[C+1]+o[I+1]),I=C;return y}function mh(o,n,A,f,y){Qu(o,n,A||0,f||o.length-1,y||ud)}function Qu(o,n,A,f,y){for(;f>A;){if(f-A>600){var C=f-A+1,I=n-A+1,D=Math.log(C),H=.5*Math.exp(2*D/3),X=.5*Math.sqrt(D*H*(C-H)/C)*(I-C/2<0?-1:1);Qu(o,n,Math.max(A,Math.floor(n-I*H/C+X)),Math.min(f,Math.floor(n+(C-I)*H/C+X)),y)}var re=o[n],le=A,ve=f;for(ku(o,A,n),y(o[f],re)>0&&ku(o,A,f);le<ve;){for(ku(o,le,ve),le++,ve--;y(o[le],re)<0;)le++;for(;y(o[ve],re)>0;)ve--}y(o[A],re)===0?ku(o,A,ve):ku(o,++ve,f),ve<=n&&(A=ve+1),n<=ve&&(f=ve-1)}}function ku(o,n,A){var f=o[n];o[n]=o[A],o[A]=f}function ud(o,n){return o<n?-1:o>n?1:0}function Pu(o,n){const A=o.length;if(A<=1)return[o];const f=[];let y,C;for(let I=0;I<A;I++){const D=he(o[I]);D!==0&&(o[I].area=Math.abs(D),C===void 0&&(C=D<0),C===D<0?(y&&f.push(y),y=[o[I]]):y.push(o[I]))}if(y&&f.push(y),n>1)for(let I=0;I<f.length;I++)f[I].length<=n||(mh(f[I],n,1,f[I].length-1,hd),f[I]=f[I].slice(0,n));return f}function hd(o,n){return n.area-o.area}function gh(o,n,A){const f=A.patternDependencies;let y=!1;for(const C of n){const I=C.paint.get(`${o}-pattern`);I.isConstant()||(y=!0);const D=I.constantOr(null);D&&(y=!0,f[D.to]=!0,f[D.from]=!0)}return y}function yh(o,n,A,f,y){const C=y.patternDependencies;for(const I of n){const D=I.paint.get(`${o}-pattern`).value;if(D.kind!=="constant"){let H=D.evaluate({zoom:f-1},A,{},y.availableImages),X=D.evaluate({zoom:f},A,{},y.availableImages),re=D.evaluate({zoom:f+1},A,{},y.availableImages);H=H&&H.name?H.name:H,X=X&&X.name?X.name:X,re=re&&re.name?re.name:re,C[H]=!0,C[X]=!0,C[re]=!0,A.patterns[I.id]={min:H,mid:X,max:re}}}return A}nc.exports=RA,nc.exports.default=RA,RA.deviation=function(o,n,A,f){var y=n&&n.length,C=Math.abs(rf(o,0,y?n[0]*A:o.length,A));if(y)for(var I=0,D=n.length;I<D;I++)C-=Math.abs(rf(o,n[I]*A,I<D-1?n[I+1]*A:o.length,A));var H=0;for(I=0;I<f.length;I+=3){var X=f[I]*A,re=f[I+1]*A,le=f[I+2]*A;H+=Math.abs((o[X]-o[le])*(o[re+1]-o[X+1])-(o[X]-o[re])*(o[le+1]-o[X+1]))}return C===0&&H===0?0:Math.abs((H-C)/C)},RA.flatten=function(o){for(var n=o[0][0].length,A={vertices:[],holes:[],dimensions:n},f=0,y=0;y<o.length;y++){for(var C=0;C<o[y].length;C++)for(var I=0;I<n;I++)A.vertices.push(o[y][C][I]);y>0&&A.holes.push(f+=o[y-1].length)}return A};class nf{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(A=>A.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new j,this.indexArray=new Ft,this.indexArray2=new pt,this.programConfigurations=new Ki(n.layers,n.zoom),this.segments=new Je,this.segments2=new Je,this.stateDependentLayerIds=this.layers.filter(A=>A.isStateDependent()).map(A=>A.id)}populate(n,A,f){this.hasPattern=gh("fill",this.layers,A);const y=this.layers[0].layout.get("fill-sort-key"),C=!y.isConstant(),I=[];for(const{feature:D,id:H,index:X,sourceLayerIndex:re}of n){const le=this.layers[0]._featureFilter.needGeometry,ve=Bo(D,le);if(!this.layers[0]._featureFilter.filter(new Ui(this.zoom),ve,f))continue;const Ce=C?y.evaluate(ve,{},f,A.availableImages):void 0,Fe={id:H,properties:D.properties,type:D.type,sourceLayerIndex:re,index:X,geometry:le?ve.geometry:lo(D),patterns:{},sortKey:Ce};I.push(Fe)}C&&I.sort((D,H)=>D.sortKey-H.sortKey);for(const D of I){const{geometry:H,index:X,sourceLayerIndex:re}=D;if(this.hasPattern){const le=yh("fill",this.layers,D,this.zoom,A);this.patternFeatures.push(le)}else this.addFeature(D,H,X,f,{});A.featureIndex.insert(n[X].feature,H,X,re,this.index)}}update(n,A,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,A,this.stateDependentLayers,f)}addFeatures(n,A,f){for(const y of this.patternFeatures)this.addFeature(y,y.geometry,y.index,A,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,$h),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,A,f,y,C){for(const I of Pu(A,500)){let D=0;for(const Ce of I)D+=Ce.length;const H=this.segments.prepareSegment(D,this.layoutVertexArray,this.indexArray),X=H.vertexLength,re=[],le=[];for(const Ce of I){if(Ce.length===0)continue;Ce!==I[0]&&le.push(re.length/2);const Fe=this.segments2.prepareSegment(Ce.length,this.layoutVertexArray,this.indexArray2),$e=Fe.vertexLength;this.layoutVertexArray.emplaceBack(Ce[0].x,Ce[0].y),this.indexArray2.emplaceBack($e+Ce.length-1,$e),re.push(Ce[0].x),re.push(Ce[0].y);for(let Ze=1;Ze<Ce.length;Ze++)this.layoutVertexArray.emplaceBack(Ce[Ze].x,Ce[Ze].y),this.indexArray2.emplaceBack($e+Ze-1,$e+Ze),re.push(Ce[Ze].x),re.push(Ce[Ze].y);Fe.vertexLength+=Ce.length,Fe.primitiveLength+=Ce.length}const ve=nc.exports(re,le);for(let Ce=0;Ce<ve.length;Ce+=3)this.indexArray.emplaceBack(X+ve[Ce],X+ve[Ce+1],X+ve[Ce+2]);H.vertexLength+=D,H.primitiveLength+=ve.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,f,C,y)}}Pr("FillBucket",nf,{omit:["layers","patternFeatures"]});const vh=new as({"fill-sort-key":new vn(vt.layout_fill["fill-sort-key"])});var fd={paint:new as({"fill-antialias":new sn(vt.paint_fill["fill-antialias"]),"fill-opacity":new vn(vt.paint_fill["fill-opacity"]),"fill-color":new vn(vt.paint_fill["fill-color"]),"fill-outline-color":new vn(vt.paint_fill["fill-outline-color"]),"fill-translate":new sn(vt.paint_fill["fill-translate"]),"fill-translate-anchor":new sn(vt.paint_fill["fill-translate-anchor"]),"fill-pattern":new rl(vt.paint_fill["fill-pattern"])}),layout:vh};const dd=ds([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Kp=ds([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Gp}=dd;var Fl={},ru=ge,_h=Sl;function Sl(o,n,A,f,y){this.properties={},this.extent=A,this.type=0,this._pbf=o,this._geometry=-1,this._keys=f,this._values=y,o.readFields(qp,this,n)}function qp(o,n,A){o==1?n.id=A.readVarint():o==2?function(f,y){for(var C=f.readVarint()+f.pos;f.pos<C;){var I=y._keys[f.readVarint()],D=y._values[f.readVarint()];y.properties[I]=D}}(A,n):o==3?n.type=A.readVarint():o==4&&(n._geometry=A.pos)}function Wp(o){for(var n,A,f=0,y=0,C=o.length,I=C-1;y<C;I=y++)f+=((A=o[I]).x-(n=o[y]).x)*(n.y+A.y);return f}Sl.types=["Unknown","Point","LineString","Polygon"],Sl.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var n,A=o.readVarint()+o.pos,f=1,y=0,C=0,I=0,D=[];o.pos<A;){if(y<=0){var H=o.readVarint();f=7&H,y=H>>3}if(y--,f===1||f===2)C+=o.readSVarint(),I+=o.readSVarint(),f===1&&(n&&D.push(n),n=[]),n.push(new ru(C,I));else{if(f!==7)throw new Error("unknown command "+f);n&&n.push(n[0].clone())}}return n&&D.push(n),D},Sl.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var n=o.readVarint()+o.pos,A=1,f=0,y=0,C=0,I=1/0,D=-1/0,H=1/0,X=-1/0;o.pos<n;){if(f<=0){var re=o.readVarint();A=7&re,f=re>>3}if(f--,A===1||A===2)(y+=o.readSVarint())<I&&(I=y),y>D&&(D=y),(C+=o.readSVarint())<H&&(H=C),C>X&&(X=C);else if(A!==7)throw new Error("unknown command "+A)}return[I,H,D,X]},Sl.prototype.toGeoJSON=function(o,n,A){var f,y,C=this.extent*Math.pow(2,A),I=this.extent*o,D=this.extent*n,H=this.loadGeometry(),X=Sl.types[this.type];function re(Ce){for(var Fe=0;Fe<Ce.length;Fe++){var $e=Ce[Fe];Ce[Fe]=[360*($e.x+I)/C-180,360/Math.PI*Math.atan(Math.exp((180-360*($e.y+D)/C)*Math.PI/180))-90]}}switch(this.type){case 1:var le=[];for(f=0;f<H.length;f++)le[f]=H[f][0];re(H=le);break;case 2:for(f=0;f<H.length;f++)re(H[f]);break;case 3:for(H=function(Ce){var Fe=Ce.length;if(Fe<=1)return[Ce];for(var $e,Ze,Et=[],Kt=0;Kt<Fe;Kt++){var xt=Wp(Ce[Kt]);xt!==0&&(Ze===void 0&&(Ze=xt<0),Ze===xt<0?($e&&Et.push($e),$e=[Ce[Kt]]):$e.push(Ce[Kt]))}return $e&&Et.push($e),Et}(H),f=0;f<H.length;f++)for(y=0;y<H[f].length;y++)re(H[f][y])}H.length===1?H=H[0]:X="Multi"+X;var ve={type:"Feature",geometry:{type:X,coordinates:H},properties:this.properties};return"id"in this&&(ve.id=this.id),ve};var Xp=_h,pd=sf;function sf(o,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(af,this,n),this.length=this._features.length}function af(o,n,A){o===15?n.version=A.readVarint():o===1?n.name=A.readString():o===5?n.extent=A.readVarint():o===2?n._features.push(A.pos):o===3?n._keys.push(A.readString()):o===4&&n._values.push(function(f){for(var y=null,C=f.readVarint()+f.pos;f.pos<C;){var I=f.readVarint()>>3;y=I===1?f.readString():I===2?f.readFloat():I===3?f.readDouble():I===4?f.readVarint64():I===5?f.readVarint():I===6?f.readSVarint():I===7?f.readBoolean():null}return y}(A))}sf.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var n=this._pbf.readVarint()+this._pbf.pos;return new Xp(this._pbf,n,this.extent,this._keys,this._values)};var md=pd;function gd(o,n,A){if(o===3){var f=new md(A,A.readVarint()+A.pos);f.length&&(n[f.name]=f)}}Fl.VectorTile=function(o,n){this.layers=o.readFields(gd,{},n)},Fl.VectorTileFeature=_h,Fl.VectorTileLayer=pd;const of=Fl.VectorTileFeature.types,wh=Math.pow(2,13);function nu(o,n,A,f,y,C,I,D){o.emplaceBack(n,A,2*Math.floor(f*wh)+I,y*wh*2,C*wh*2,Math.round(D))}class Af{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(A=>A.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new W,this.centroidVertexArray=new b,this.indexArray=new Ft,this.programConfigurations=new Ki(n.layers,n.zoom),this.segments=new Je,this.stateDependentLayerIds=this.layers.filter(A=>A.isStateDependent()).map(A=>A.id)}populate(n,A,f){this.features=[],this.hasPattern=gh("fill-extrusion",this.layers,A);for(const{feature:y,id:C,index:I,sourceLayerIndex:D}of n){const H=this.layers[0]._featureFilter.needGeometry,X=Bo(y,H);if(!this.layers[0]._featureFilter.filter(new Ui(this.zoom),X,f))continue;const re={id:C,sourceLayerIndex:D,index:I,geometry:H?X.geometry:lo(y),properties:y.properties,type:y.type,patterns:{}};this.hasPattern?this.features.push(yh("fill-extrusion",this.layers,re,this.zoom,A)):this.addFeature(re,re.geometry,I,f,{}),A.featureIndex.insert(y,re.geometry,I,D,this.index,!0)}}addFeatures(n,A,f){for(const y of this.features){const{geometry:C}=y;this.addFeature(y,C,y.index,A,f)}}update(n,A,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,A,this.stateDependentLayers,f)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Gp),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,Kp.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,A,f,y,C){const I={x:0,y:0,vertexCount:0};for(const D of Pu(A,500)){let H=0;for(const Fe of D)H+=Fe.length;let X=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const Fe of D){if(Fe.length===0||xh(Fe))continue;let $e=0;for(let Ze=0;Ze<Fe.length;Ze++){const Et=Fe[Ze];if(Ze>=1){const Kt=Fe[Ze-1];if(!bh(Et,Kt)){X.vertexLength+4>Je.MAX_VERTEX_ARRAY_LENGTH&&(X=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const xt=Et.sub(Kt)._perp()._unit(),Dt=Kt.dist(Et);$e+Dt>32768&&($e=0),nu(this.layoutVertexArray,Et.x,Et.y,xt.x,xt.y,0,0,$e),nu(this.layoutVertexArray,Et.x,Et.y,xt.x,xt.y,0,1,$e),I.x+=2*Et.x,I.y+=2*Et.y,I.vertexCount+=2,$e+=Dt,nu(this.layoutVertexArray,Kt.x,Kt.y,xt.x,xt.y,0,0,$e),nu(this.layoutVertexArray,Kt.x,Kt.y,xt.x,xt.y,0,1,$e),I.x+=2*Kt.x,I.y+=2*Kt.y,I.vertexCount+=2;const or=X.vertexLength;this.indexArray.emplaceBack(or,or+2,or+1),this.indexArray.emplaceBack(or+1,or+2,or+3),X.vertexLength+=4,X.primitiveLength+=2}}}}if(X.vertexLength+H>Je.MAX_VERTEX_ARRAY_LENGTH&&(X=this.segments.prepareSegment(H,this.layoutVertexArray,this.indexArray)),of[n.type]!=="Polygon")continue;const re=[],le=[],ve=X.vertexLength;for(const Fe of D)if(Fe.length!==0){Fe!==D[0]&&le.push(re.length/2);for(let $e=0;$e<Fe.length;$e++){const Ze=Fe[$e];nu(this.layoutVertexArray,Ze.x,Ze.y,0,0,1,1,0),I.x+=Ze.x,I.y+=Ze.y,I.vertexCount+=1,re.push(Ze.x),re.push(Ze.y)}}const Ce=nc.exports(re,le);for(let Fe=0;Fe<Ce.length;Fe+=3)this.indexArray.emplaceBack(ve+Ce[Fe],ve+Ce[Fe+2],ve+Ce[Fe+1]);X.primitiveLength+=Ce.length/3,X.vertexLength+=H}for(let D=0;D<I.vertexCount;D++)this.centroidVertexArray.emplaceBack(Math.floor(I.x/I.vertexCount),Math.floor(I.y/I.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,f,C,y)}}function bh(o,n){return o.x===n.x&&(o.x<0||o.x>Ci)||o.y===n.y&&(o.y<0||o.y>Ci)}function xh(o){return o.every(n=>n.x<0)||o.every(n=>n.x>Ci)||o.every(n=>n.y<0)||o.every(n=>n.y>Ci)}Pr("FillExtrusionBucket",Af,{omit:["layers","features"]});var yd={paint:new as({"fill-extrusion-opacity":new sn(vt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new vn(vt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new sn(vt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new sn(vt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new rl(vt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new vn(vt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new vn(vt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new sn(vt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function iu(o,n){return o.x*n.x+o.y*n.y}function vd(o,n){if(o.length===1){let A=0;const f=n[A++];let y;for(;!y||f.equals(y);)if(y=n[A++],!y)return 1/0;for(;A<n.length;A++){const C=n[A],I=o[0],D=y.sub(f),H=C.sub(f),X=I.sub(f),re=iu(D,D),le=iu(D,H),ve=iu(H,H),Ce=iu(X,D),Fe=iu(X,H),$e=re*ve-le*le,Ze=(ve*Ce-le*Fe)/$e,Et=(re*Fe-le*Ce)/$e,Kt=f.z*(1-Ze-Et)+y.z*Ze+C.z*Et;if(isFinite(Kt))return Kt}return 1/0}{let A=1/0;for(const f of n)A=Math.min(A,f.z);return A}}const _d=ds([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:wd}=_d,Zp=ds([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Jp}=Zp,su=Fl.VectorTileFeature.types,bd=Math.cos(Math.PI/180*37.5),Ls=Math.pow(2,14)/.5;class Il{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(A=>A.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(A=>{this.gradients[A.id]={}}),this.layoutVertexArray=new ae,this.layoutVertexArray2=new de,this.indexArray=new Ft,this.programConfigurations=new Ki(n.layers,n.zoom),this.segments=new Je,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(A=>A.isStateDependent()).map(A=>A.id)}populate(n,A,f){this.hasPattern=gh("line",this.layers,A);const y=this.layers[0].layout.get("line-sort-key"),C=!y.isConstant(),I=[];for(const{feature:D,id:H,index:X,sourceLayerIndex:re}of n){const le=this.layers[0]._featureFilter.needGeometry,ve=Bo(D,le);if(!this.layers[0]._featureFilter.filter(new Ui(this.zoom),ve,f))continue;const Ce=C?y.evaluate(ve,{},f):void 0,Fe={id:H,properties:D.properties,type:D.type,sourceLayerIndex:re,index:X,geometry:le?ve.geometry:lo(D),patterns:{},sortKey:Ce};I.push(Fe)}C&&I.sort((D,H)=>D.sortKey-H.sortKey);for(const D of I){const{geometry:H,index:X,sourceLayerIndex:re}=D;if(this.hasPattern){const le=yh("line",this.layers,D,this.zoom,A);this.patternFeatures.push(le)}else this.addFeature(D,H,X,f,{});A.featureIndex.insert(n[X].feature,H,X,re,this.index)}}update(n,A,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,A,this.stateDependentLayers,f)}addFeatures(n,A,f){for(const y of this.patternFeatures)this.addFeature(y,y.geometry,y.index,A,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,Jp)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,wd),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,A,f,y,C){const I=this.layers[0].layout,D=I.get("line-join").evaluate(n,{}),H=I.get("line-cap"),X=I.get("line-miter-limit"),re=I.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const le of A)this.addLine(le,n,D,H,X,re);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,f,C,y)}addLine(n,A,f,y,C,I){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Et=0;Et<n.length-1;Et++)this.totalDistance+=n[Et].dist(n[Et+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const D=su[A.type]==="Polygon";let H=n.length;for(;H>=2&&n[H-1].equals(n[H-2]);)H--;let X=0;for(;X<H-1&&n[X].equals(n[X+1]);)X++;if(H<(D?3:2))return;f==="bevel"&&(C=1.05);const re=this.overscaling<=16?122880/(512*this.overscaling):0,le=this.segments.prepareSegment(10*H,this.layoutVertexArray,this.indexArray);let ve,Ce,Fe,$e,Ze;this.e1=this.e2=-1,D&&(ve=n[H-2],Ze=n[X].sub(ve)._unit()._perp());for(let Et=X;Et<H;Et++){if(Fe=Et===H-1?D?n[X+1]:void 0:n[Et+1],Fe&&n[Et].equals(Fe))continue;Ze&&($e=Ze),ve&&(Ce=ve),ve=n[Et],Ze=Fe?Fe.sub(ve)._unit()._perp():$e,$e=$e||Ze;let Kt=$e.add(Ze);Kt.x===0&&Kt.y===0||Kt._unit();const xt=$e.x*Ze.x+$e.y*Ze.y,Dt=Kt.x*Ze.x+Kt.y*Ze.y,or=Dt!==0?1/Dt:1/0,ar=2*Math.sqrt(2-2*Dt),Yr=Dt<bd&&Ce&&Fe,on=$e.x*Ze.y-$e.y*Ze.x>0;if(Yr&&Et>X){const Lr=ve.dist(Ce);if(Lr>2*re){const Xr=ve.sub(ve.sub(Ce)._mult(re/Lr)._round());this.updateDistance(Ce,Xr),this.addCurrentVertex(Xr,$e,0,0,le),Ce=Xr}}const Wr=Ce&&Fe;let Mr=Wr?f:D?"butt":y;if(Wr&&Mr==="round"&&(or<I?Mr="miter":or<=2&&(Mr="fakeround")),Mr==="miter"&&or>C&&(Mr="bevel"),Mr==="bevel"&&(or>2&&(Mr="flipbevel"),or<C&&(Mr="miter")),Ce&&this.updateDistance(Ce,ve),Mr==="miter")Kt._mult(or),this.addCurrentVertex(ve,Kt,0,0,le);else if(Mr==="flipbevel"){if(or>100)Kt=Ze.mult(-1);else{const Lr=or*$e.add(Ze).mag()/$e.sub(Ze).mag();Kt._perp()._mult(Lr*(on?-1:1))}this.addCurrentVertex(ve,Kt,0,0,le),this.addCurrentVertex(ve,Kt.mult(-1),0,0,le)}else if(Mr==="bevel"||Mr==="fakeround"){const Lr=-Math.sqrt(or*or-1),Xr=on?Lr:0,Or=on?0:Lr;if(Ce&&this.addCurrentVertex(ve,$e,Xr,Or,le),Mr==="fakeround"){const wr=Math.round(180*ar/Math.PI/20);for(let _n=1;_n<wr;_n++){let fn=_n/wr;if(fn!==.5){const $i=fn-.5;fn+=fn*$i*(fn-1)*((1.0904+xt*(xt*(3.55645-1.43519*xt)-3.2452))*$i*$i+(.848013+xt*(.215638*xt-1.06021)))}const qn=Ze.sub($e)._mult(fn)._add($e)._unit()._mult(on?-1:1);this.addHalfVertex(ve,qn.x,qn.y,!1,on,0,le)}}Fe&&this.addCurrentVertex(ve,Ze,-Xr,-Or,le)}else if(Mr==="butt")this.addCurrentVertex(ve,Kt,0,0,le);else if(Mr==="square"){const Lr=Ce?1:-1;this.addCurrentVertex(ve,Kt,Lr,Lr,le)}else Mr==="round"&&(Ce&&(this.addCurrentVertex(ve,$e,0,0,le),this.addCurrentVertex(ve,$e,1,1,le,!0)),Fe&&(this.addCurrentVertex(ve,Ze,-1,-1,le,!0),this.addCurrentVertex(ve,Ze,0,0,le)));if(Yr&&Et<H-1){const Lr=ve.dist(Fe);if(Lr>2*re){const Xr=ve.add(Fe.sub(ve)._mult(re/Lr)._round());this.updateDistance(ve,Xr),this.addCurrentVertex(Xr,Ze,0,0,le),ve=Xr}}}}addCurrentVertex(n,A,f,y,C,I=!1){const D=A.y*y-A.x,H=-A.y-A.x*y;this.addHalfVertex(n,A.x+A.y*f,A.y-A.x*f,I,!1,f,C),this.addHalfVertex(n,D,H,I,!0,-y,C),this.distance>Ls/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(n,A,f,y,C,I))}addHalfVertex({x:n,y:A},f,y,C,I,D,H){const X=.5*(this.lineClips?this.scaledDistance*(Ls-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(C?1:0),(A<<1)+(I?1:0),Math.round(63*f)+128,Math.round(63*y)+128,1+(D===0?0:D<0?-1:1)|(63&X)<<2,X>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const re=H.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,re),H.primitiveLength++),I?this.e2=re:this.e1=re}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,A){this.distance+=n.dist(A),this.updateScaledDistance()}}Pr("LineBucket",Il,{omit:["layers","patternFeatures"]});const au=new as({"line-cap":new sn(vt.layout_line["line-cap"]),"line-join":new vn(vt.layout_line["line-join"]),"line-miter-limit":new sn(vt.layout_line["line-miter-limit"]),"line-round-limit":new sn(vt.layout_line["line-round-limit"]),"line-sort-key":new vn(vt.layout_line["line-sort-key"])});var Tl={paint:new as({"line-opacity":new vn(vt.paint_line["line-opacity"]),"line-color":new vn(vt.paint_line["line-color"]),"line-translate":new sn(vt.paint_line["line-translate"]),"line-translate-anchor":new sn(vt.paint_line["line-translate-anchor"]),"line-width":new vn(vt.paint_line["line-width"]),"line-gap-width":new vn(vt.paint_line["line-gap-width"]),"line-offset":new vn(vt.paint_line["line-offset"]),"line-blur":new vn(vt.paint_line["line-blur"]),"line-dasharray":new wl(vt.paint_line["line-dasharray"]),"line-pattern":new rl(vt.paint_line["line-pattern"]),"line-gradient":new Sa(vt.paint_line["line-gradient"])}),layout:au};const Ul=new class extends vn{possiblyEvaluate(o,n){return n=new Ui(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,zoomHistory:n.zoomHistory,transition:n.transition}),super.possiblyEvaluate(o,n)}evaluate(o,n,A,f){return n=k({},n,{zoom:Math.floor(n.zoom)}),super.evaluate(o,n,A,f)}}(Tl.paint.properties["line-width"].specification);function ou(o,n){return n>0?n+2*o:o}Ul.useIntegerZoom=!0;const Ll=ds([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),xd=ds([{name:"a_projected_pos",components:3,type:"Float32"}],4);ds([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Bd=ds([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);ds([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const lf=ds([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),cf=ds([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Mu(o,n,A){return o.sections.forEach(f=>{f.text=function(y,C,I){const D=C.layout.get("text-transform").evaluate(I,{});return D==="uppercase"?y=y.toLocaleUpperCase():D==="lowercase"&&(y=y.toLocaleLowerCase()),Fa.applyArabicShaping&&(y=Fa.applyArabicShaping(y)),y}(f.text,n,A)}),o}ds([{name:"triangle",components:3,type:"Uint16"}]),ds([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),ds([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),ds([{type:"Float32",name:"offsetX"}]),ds([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const Au={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var Os=24,Ic=Li,Cd=function(o,n,A,f,y){var C,I,D=8*y-f-1,H=(1<<D)-1,X=H>>1,re=-7,le=A?y-1:0,ve=A?-1:1,Ce=o[n+le];for(le+=ve,C=Ce&(1<<-re)-1,Ce>>=-re,re+=D;re>0;C=256*C+o[n+le],le+=ve,re-=8);for(I=C&(1<<-re)-1,C>>=-re,re+=f;re>0;I=256*I+o[n+le],le+=ve,re-=8);if(C===0)C=1-X;else{if(C===H)return I?NaN:1/0*(Ce?-1:1);I+=Math.pow(2,f),C-=X}return(Ce?-1:1)*I*Math.pow(2,C-f)},Ed=function(o,n,A,f,y,C){var I,D,H,X=8*C-y-1,re=(1<<X)-1,le=re>>1,ve=y===23?Math.pow(2,-24)-Math.pow(2,-77):0,Ce=f?0:C-1,Fe=f?1:-1,$e=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(D=isNaN(n)?1:0,I=re):(I=Math.floor(Math.log(n)/Math.LN2),n*(H=Math.pow(2,-I))<1&&(I--,H*=2),(n+=I+le>=1?ve/H:ve*Math.pow(2,1-le))*H>=2&&(I++,H/=2),I+le>=re?(D=0,I=re):I+le>=1?(D=(n*H-1)*Math.pow(2,y),I+=le):(D=n*Math.pow(2,le-1)*Math.pow(2,y),I=0));y>=8;o[A+Ce]=255&D,Ce+=Fe,D/=256,y-=8);for(I=I<<y|D,X+=y;X>0;o[A+Ce]=255&I,Ce+=Fe,I/=256,X-=8);o[A+Ce-Fe]|=128*$e};function Li(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}Li.Varint=0,Li.Fixed64=1,Li.Bytes=2,Li.Fixed32=5;var oc,uf=4294967296,Bh=1/uf,Fd=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Ql(o){return o.type===Li.Bytes?o.readVarint()+o.pos:o.pos+1}function lu(o,n,A){return A?4294967296*n+(o>>>0):4294967296*(n>>>0)+(o>>>0)}function Sd(o,n,A){var f=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));A.realloc(f);for(var y=A.pos-1;y>=o;y--)A.buf[y+f]=A.buf[y]}function Yp(o,n){for(var A=0;A<o.length;A++)n.writeVarint(o[A])}function hf(o,n){for(var A=0;A<o.length;A++)n.writeSVarint(o[A])}function ff(o,n){for(var A=0;A<o.length;A++)n.writeFloat(o[A])}function Id(o,n){for(var A=0;A<o.length;A++)n.writeDouble(o[A])}function $p(o,n){for(var A=0;A<o.length;A++)n.writeBoolean(o[A])}function em(o,n){for(var A=0;A<o.length;A++)n.writeFixed32(o[A])}function Td(o,n){for(var A=0;A<o.length;A++)n.writeSFixed32(o[A])}function tm(o,n){for(var A=0;A<o.length;A++)n.writeFixed64(o[A])}function rm(o,n){for(var A=0;A<o.length;A++)n.writeSFixed64(o[A])}function Ch(o,n){return(o[n]|o[n+1]<<8|o[n+2]<<16)+16777216*o[n+3]}function cu(o,n,A){o[A]=n,o[A+1]=n>>>8,o[A+2]=n>>>16,o[A+3]=n>>>24}function Ud(o,n){return(o[n]|o[n+1]<<8|o[n+2]<<16)+(o[n+3]<<24)}function df(o,n,A){o===1&&A.readMessage(nm,n)}function nm(o,n,A){if(o===3){const{id:f,bitmap:y,width:C,height:I,left:D,top:H,advance:X}=A.readMessage(pf,{});n.push({id:f,bitmap:new rc({width:C+6,height:I+6},y),metrics:{width:C,height:I,left:D,top:H,advance:X}})}}function pf(o,n,A){o===1?n.id=A.readVarint():o===2?n.bitmap=A.readBytes():o===3?n.width=A.readVarint():o===4?n.height=A.readVarint():o===5?n.left=A.readSVarint():o===6?n.top=A.readSVarint():o===7&&(n.advance=A.readVarint())}function Ld(o){let n=0,A=0;for(const I of o)n+=I.w*I.h,A=Math.max(A,I.w);o.sort((I,D)=>D.h-I.h);const f=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),A),h:1/0}];let y=0,C=0;for(const I of o)for(let D=f.length-1;D>=0;D--){const H=f[D];if(!(I.w>H.w||I.h>H.h)){if(I.x=H.x,I.y=H.y,C=Math.max(C,I.y+I.h),y=Math.max(y,I.x+I.w),I.w===H.w&&I.h===H.h){const X=f.pop();D<f.length&&(f[D]=X)}else I.h===H.h?(H.x+=I.w,H.w-=I.w):I.w===H.w?(H.y+=I.h,H.h-=I.h):(f.push({x:H.x+I.w,y:H.y,w:H.w-I.w,h:I.h}),H.y+=I.h,H.h-=I.h);break}}return{w:y,h:C,fill:n/(y*C)||0}}Li.prototype={destroy:function(){this.buf=null},readFields:function(o,n,A){for(A=A||this.length;this.pos<A;){var f=this.readVarint(),y=f>>3,C=this.pos;this.type=7&f,o(y,n,this),this.pos===C&&this.skip(f)}return n},readMessage:function(o,n){return this.readFields(o,n,this.readVarint()+this.pos)},readFixed32:function(){var o=Ch(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=Ud(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=Ch(this.buf,this.pos)+Ch(this.buf,this.pos+4)*uf;return this.pos+=8,o},readSFixed64:function(){var o=Ch(this.buf,this.pos)+Ud(this.buf,this.pos+4)*uf;return this.pos+=8,o},readFloat:function(){var o=Cd(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=Cd(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var n,A,f=this.buf;return n=127&(A=f[this.pos++]),A<128?n:(n|=(127&(A=f[this.pos++]))<<7,A<128?n:(n|=(127&(A=f[this.pos++]))<<14,A<128?n:(n|=(127&(A=f[this.pos++]))<<21,A<128?n:function(y,C,I){var D,H,X=I.buf;if(D=(112&(H=X[I.pos++]))>>4,H<128||(D|=(127&(H=X[I.pos++]))<<3,H<128)||(D|=(127&(H=X[I.pos++]))<<10,H<128)||(D|=(127&(H=X[I.pos++]))<<17,H<128)||(D|=(127&(H=X[I.pos++]))<<24,H<128)||(D|=(1&(H=X[I.pos++]))<<31,H<128))return lu(y,D,C);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(A=f[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var o=this.readVarint()+this.pos,n=this.pos;return this.pos=o,o-n>=12&&Fd?function(A,f,y){return Fd.decode(A.subarray(f,y))}(this.buf,n,o):function(A,f,y){for(var C="",I=f;I<y;){var D,H,X,re=A[I],le=null,ve=re>239?4:re>223?3:re>191?2:1;if(I+ve>y)break;ve===1?re<128&&(le=re):ve===2?(192&(D=A[I+1]))==128&&(le=(31&re)<<6|63&D)<=127&&(le=null):ve===3?(H=A[I+2],(192&(D=A[I+1]))==128&&(192&H)==128&&((le=(15&re)<<12|(63&D)<<6|63&H)<=2047||le>=55296&&le<=57343)&&(le=null)):ve===4&&(H=A[I+2],X=A[I+3],(192&(D=A[I+1]))==128&&(192&H)==128&&(192&X)==128&&((le=(15&re)<<18|(63&D)<<12|(63&H)<<6|63&X)<=65535||le>=1114112)&&(le=null)),le===null?(le=65533,ve=1):le>65535&&(le-=65536,C+=String.fromCharCode(le>>>10&1023|55296),le=56320|1023&le),C+=String.fromCharCode(le),I+=ve}return C}(this.buf,n,o)},readBytes:function(){var o=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,o);return this.pos=o,n},readPackedVarint:function(o,n){if(this.type!==Li.Bytes)return o.push(this.readVarint(n));var A=Ql(this);for(o=o||[];this.pos<A;)o.push(this.readVarint(n));return o},readPackedSVarint:function(o){if(this.type!==Li.Bytes)return o.push(this.readSVarint());var n=Ql(this);for(o=o||[];this.pos<n;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==Li.Bytes)return o.push(this.readBoolean());var n=Ql(this);for(o=o||[];this.pos<n;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==Li.Bytes)return o.push(this.readFloat());var n=Ql(this);for(o=o||[];this.pos<n;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==Li.Bytes)return o.push(this.readDouble());var n=Ql(this);for(o=o||[];this.pos<n;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==Li.Bytes)return o.push(this.readFixed32());var n=Ql(this);for(o=o||[];this.pos<n;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==Li.Bytes)return o.push(this.readSFixed32());var n=Ql(this);for(o=o||[];this.pos<n;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==Li.Bytes)return o.push(this.readFixed64());var n=Ql(this);for(o=o||[];this.pos<n;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==Li.Bytes)return o.push(this.readSFixed64());var n=Ql(this);for(o=o||[];this.pos<n;)o.push(this.readSFixed64());return o},skip:function(o){var n=7&o;if(n===Li.Varint)for(;this.buf[this.pos++]>127;);else if(n===Li.Bytes)this.pos=this.readVarint()+this.pos;else if(n===Li.Fixed32)this.pos+=4;else{if(n!==Li.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(o,n){this.writeVarint(o<<3|n)},realloc:function(o){for(var n=this.length||16;n<this.pos+o;)n*=2;if(n!==this.length){var A=new Uint8Array(n);A.set(this.buf),this.buf=A,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),cu(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),cu(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),cu(this.buf,-1&o,this.pos),cu(this.buf,Math.floor(o*Bh),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),cu(this.buf,-1&o,this.pos),cu(this.buf,Math.floor(o*Bh),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(n,A){var f,y;if(n>=0?(f=n%4294967296|0,y=n/4294967296|0):(y=~(-n/4294967296),4294967295^(f=~(-n%4294967296))?f=f+1|0:(f=0,y=y+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");A.realloc(10),function(C,I,D){D.buf[D.pos++]=127&C|128,C>>>=7,D.buf[D.pos++]=127&C|128,C>>>=7,D.buf[D.pos++]=127&C|128,C>>>=7,D.buf[D.pos++]=127&C|128,D.buf[D.pos]=127&(C>>>=7)}(f,0,A),function(C,I){var D=(7&C)<<4;I.buf[I.pos++]|=D|((C>>>=3)?128:0),C&&(I.buf[I.pos++]=127&C|((C>>>=7)?128:0),C&&(I.buf[I.pos++]=127&C|((C>>>=7)?128:0),C&&(I.buf[I.pos++]=127&C|((C>>>=7)?128:0),C&&(I.buf[I.pos++]=127&C|((C>>>=7)?128:0),C&&(I.buf[I.pos++]=127&C)))))}(y,A)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(Boolean(o))},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var n=this.pos;this.pos=function(f,y,C){for(var I,D,H=0;H<y.length;H++){if((I=y.charCodeAt(H))>55295&&I<57344){if(!D){I>56319||H+1===y.length?(f[C++]=239,f[C++]=191,f[C++]=189):D=I;continue}if(I<56320){f[C++]=239,f[C++]=191,f[C++]=189,D=I;continue}I=D-55296<<10|I-56320|65536,D=null}else D&&(f[C++]=239,f[C++]=191,f[C++]=189,D=null);I<128?f[C++]=I:(I<2048?f[C++]=I>>6|192:(I<65536?f[C++]=I>>12|224:(f[C++]=I>>18|240,f[C++]=I>>12&63|128),f[C++]=I>>6&63|128),f[C++]=63&I|128)}return C}(this.buf,o,this.pos);var A=this.pos-n;A>=128&&Sd(n,A,this),this.pos=n-1,this.writeVarint(A),this.pos+=A},writeFloat:function(o){this.realloc(4),Ed(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),Ed(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var n=o.length;this.writeVarint(n),this.realloc(n);for(var A=0;A<n;A++)this.buf[this.pos++]=o[A]},writeRawMessage:function(o,n){this.pos++;var A=this.pos;o(n,this);var f=this.pos-A;f>=128&&Sd(A,f,this),this.pos=A-1,this.writeVarint(f),this.pos+=f},writeMessage:function(o,n,A){this.writeTag(o,Li.Bytes),this.writeRawMessage(n,A)},writePackedVarint:function(o,n){n.length&&this.writeMessage(o,Yp,n)},writePackedSVarint:function(o,n){n.length&&this.writeMessage(o,hf,n)},writePackedBoolean:function(o,n){n.length&&this.writeMessage(o,$p,n)},writePackedFloat:function(o,n){n.length&&this.writeMessage(o,ff,n)},writePackedDouble:function(o,n){n.length&&this.writeMessage(o,Id,n)},writePackedFixed32:function(o,n){n.length&&this.writeMessage(o,em,n)},writePackedSFixed32:function(o,n){n.length&&this.writeMessage(o,Td,n)},writePackedFixed64:function(o,n){n.length&&this.writeMessage(o,tm,n)},writePackedSFixed64:function(o,n){n.length&&this.writeMessage(o,rm,n)},writeBytesField:function(o,n){this.writeTag(o,Li.Bytes),this.writeBytes(n)},writeFixed32Field:function(o,n){this.writeTag(o,Li.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(o,n){this.writeTag(o,Li.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(o,n){this.writeTag(o,Li.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(o,n){this.writeTag(o,Li.Fixed64),this.writeSFixed64(n)},writeVarintField:function(o,n){this.writeTag(o,Li.Varint),this.writeVarint(n)},writeSVarintField:function(o,n){this.writeTag(o,Li.Varint),this.writeSVarint(n)},writeStringField:function(o,n){this.writeTag(o,Li.Bytes),this.writeString(n)},writeFloatField:function(o,n){this.writeTag(o,Li.Fixed32),this.writeFloat(n)},writeDoubleField:function(o,n){this.writeTag(o,Li.Fixed64),this.writeDouble(n)},writeBooleanField:function(o,n){this.writeVarintField(o,Boolean(n))}};class rn{constructor(n,{pixelRatio:A,version:f,stretchX:y,stretchY:C,content:I}){this.paddedRect=n,this.pixelRatio=A,this.stretchX=y,this.stretchY=C,this.content=I,this.version=f}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Tc{constructor(n,A){const f={},y={};this.haveRenderCallbacks=[];const C=[];this.addImages(n,f,C),this.addImages(A,y,C);const{w:I,h:D}=Ld(C),H=new Ta({width:I||1,height:D||1});for(const X in n){const re=n[X],le=f[X].paddedRect;Ta.copy(re.data,H,{x:0,y:0},{x:le.x+1,y:le.y+1},re.data)}for(const X in A){const re=A[X],le=y[X].paddedRect,ve=le.x+1,Ce=le.y+1,Fe=re.data.width,$e=re.data.height;Ta.copy(re.data,H,{x:0,y:0},{x:ve,y:Ce},re.data),Ta.copy(re.data,H,{x:0,y:$e-1},{x:ve,y:Ce-1},{width:Fe,height:1}),Ta.copy(re.data,H,{x:0,y:0},{x:ve,y:Ce+$e},{width:Fe,height:1}),Ta.copy(re.data,H,{x:Fe-1,y:0},{x:ve-1,y:Ce},{width:1,height:$e}),Ta.copy(re.data,H,{x:0,y:0},{x:ve+Fe,y:Ce},{width:1,height:$e})}this.image=H,this.iconPositions=f,this.patternPositions=y}addImages(n,A,f){for(const y in n){const C=n[y],I={x:0,y:0,w:C.data.width+2,h:C.data.height+2};f.push(I),A[y]=new rn(I,C),C.hasRenderCallback&&this.haveRenderCallbacks.push(y)}}patchUpdatedImages(n,A){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const f in n.updatedImages)this.patchUpdatedImage(this.iconPositions[f],n.getImage(f),A),this.patchUpdatedImage(this.patternPositions[f],n.getImage(f),A)}patchUpdatedImage(n,A,f){if(!n||!A||n.version===A.version)return;n.version=A.version;const[y,C]=n.tl;f.update(A.data,void 0,{x:y,y:C})}}Pr("ImagePosition",rn),Pr("ImageAtlas",Tc),a.WritingMode=void 0,(oc=a.WritingMode||(a.WritingMode={}))[oc.none=0]="none",oc[oc.horizontal=1]="horizontal",oc[oc.vertical=2]="vertical",oc[oc.horizontalOnly=3]="horizontalOnly";const Uc=-17;class Oa{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,A){const f=new Oa;return f.scale=n||1,f.fontStack=A,f}static forImage(n){const A=new Oa;return A.imageName=n,A}}class uu{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,A){const f=new uu;for(let y=0;y<n.sections.length;y++){const C=n.sections[y];C.image?f.addImageSection(C):f.addTextSection(C,A)}return f}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=function(n){let A="";for(let f=0;f<n.length;f++){const y=n.charCodeAt(f+1)||null,C=n.charCodeAt(f-1)||null;A+=y&&YA(y)&&!Au[n[f+1]]||C&&YA(C)&&!Au[n[f-1]]||!Au[n[f]]?n[f]:Au[n[f]]}return A}(this.text)}trim(){let n=0;for(let f=0;f<this.text.length&&Gi[this.text.charCodeAt(f)];f++)n++;let A=this.text.length;for(let f=this.text.length-1;f>=0&&f>=n&&Gi[this.text.charCodeAt(f)];f--)A--;this.text=this.text.substring(n,A),this.sectionIndex=this.sectionIndex.slice(n,A)}substring(n,A){const f=new uu;return f.text=this.text.substring(n,A),f.sectionIndex=this.sectionIndex.slice(n,A),f.sections=this.sections,f}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,A)=>Math.max(n,this.sections[A].scale),0)}addTextSection(n,A){this.text+=n.text,this.sections.push(Oa.forText(n.scale,n.fontStack||A));const f=this.sections.length-1;for(let y=0;y<n.text.length;++y)this.sectionIndex.push(f)}addImageSection(n){const A=n.image?n.image.name:"";if(A.length===0)return void Z("Can't add FormattedSection with an empty image.");const f=this.getNextImageSectionCharCode();f?(this.text+=String.fromCharCode(f),this.sections.push(Oa.forImage(A)),this.sectionIndex.push(this.sections.length-1)):Z("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Ei(o,n,A,f,y,C,I,D,H,X,re,le,ve,Ce,Fe,$e){const Ze=uu.fromFeature(o,y);let Et;le===a.WritingMode.vertical&&Ze.verticalizePunctuation();const{processBidirectionalText:Kt,processStyledBidirectionalText:xt}=Fa;if(Kt&&Ze.sections.length===1){Et=[];const ar=Kt(Ze.toString(),mf(Ze,X,C,n,f,Ce,Fe));for(const Yr of ar){const on=new uu;on.text=Yr,on.sections=Ze.sections;for(let Wr=0;Wr<Yr.length;Wr++)on.sectionIndex.push(0);Et.push(on)}}else if(xt){Et=[];const ar=xt(Ze.text,Ze.sectionIndex,mf(Ze,X,C,n,f,Ce,Fe));for(const Yr of ar){const on=new uu;on.text=Yr[0],on.sectionIndex=Yr[1],on.sections=Ze.sections,Et.push(on)}}else Et=function(ar,Yr){const on=[],Wr=ar.text;let Mr=0;for(const Lr of Yr)on.push(ar.substring(Mr,Lr)),Mr=Lr;return Mr<Wr.length&&on.push(ar.substring(Mr,Wr.length)),on}(Ze,mf(Ze,X,C,n,f,Ce,Fe));const Dt=[],or={positionedLines:Dt,text:Ze.toString(),top:re[1],bottom:re[1],left:re[0],right:re[0],writingMode:le,iconsInText:!1,verticalizable:!1};return function(ar,Yr,on,Wr,Mr,Lr,Xr,Or,wr,_n,fn,qn){let $i=0,ls=Uc,ea=0,zA=0;const Ha=Or==="right"?1:Or==="left"?0:.5;let Hs=0;for(const zs of Mr){zs.trim();const Va=zs.getMaxScale(),fo=(Va-1)*Os,Fo={positionedGlyphs:[],lineOffset:0};ar.positionedLines[Hs]=Fo;const Ko=Fo.positionedGlyphs;let Go=0;if(!zs.length()){ls+=Lr,++Hs;continue}for(let ma=0;ma<zs.length();ma++){const $n=zs.getSection(ma),yA=zs.getSectionIndex(ma),Ka=zs.getCharCode(ma);let po=0,hl=null,Ml=null,Dl=null,Qc=Os;const fl=!(wr===a.WritingMode.horizontal||!fn&&!Xl(Ka)||fn&&(Gi[Ka]||(pa=Ka,Sr.Arabic(pa)||Sr["Arabic Supplement"](pa)||Sr["Arabic Extended-A"](pa)||Sr["Arabic Presentation Forms-A"](pa)||Sr["Arabic Presentation Forms-B"](pa))));if($n.imageName){const VA=Wr[$n.imageName];if(!VA)continue;Dl=$n.imageName,ar.iconsInText=ar.iconsInText||!0,Ml=VA.paddedRect;const qo=VA.displaySize;$n.scale=$n.scale*Os/qn,hl={width:qo[0],height:qo[1],left:1,top:-3,advance:fl?qo[1]:qo[0]},po=fo+(Os-qo[1]*$n.scale),Qc=hl.advance;const kc=fl?qo[0]*$n.scale-Os*Va:qo[1]*$n.scale-Os*Va;kc>0&&kc>Go&&(Go=kc)}else{const VA=on[$n.fontStack],qo=VA&&VA[Ka];if(qo&&qo.rect)Ml=qo.rect,hl=qo.metrics;else{const kc=Yr[$n.fontStack],Bf=kc&&kc[Ka];if(!Bf)continue;hl=Bf.metrics}po=(Va-$n.scale)*Os}fl?(ar.verticalizable=!0,Ko.push({glyph:Ka,imageName:Dl,x:$i,y:ls+po,vertical:fl,scale:$n.scale,fontStack:$n.fontStack,sectionIndex:yA,metrics:hl,rect:Ml}),$i+=Qc*$n.scale+_n):(Ko.push({glyph:Ka,imageName:Dl,x:$i,y:ls+po,vertical:fl,scale:$n.scale,fontStack:$n.fontStack,sectionIndex:yA,metrics:hl,rect:Ml}),$i+=hl.advance*$n.scale+_n)}Ko.length!==0&&(ea=Math.max($i-_n,ea),sm(Ko,0,Ko.length-1,Ha,Go)),$i=0;const ms=Lr*Va+Go;Fo.lineOffset=Math.max(Go,fo),ls+=ms,zA=Math.max(ms,zA),++Hs}var pa;const za=ls-Uc,{horizontalAlign:ho,verticalAlign:Vo}=Fh(Xr);(function(zs,Va,fo,Fo,Ko,Go,ms,ma,$n){const yA=(Va-fo)*Ko;let Ka=0;Ka=Go!==ms?-ma*Fo-Uc:(-Fo*$n+.5)*ms;for(const po of zs)for(const hl of po.positionedGlyphs)hl.x+=yA,hl.y+=Ka})(ar.positionedLines,Ha,ho,Vo,ea,zA,Lr,za,Mr.length),ar.top+=-Vo*za,ar.bottom=ar.top+za,ar.left+=-ho*ea,ar.right=ar.left+ea}(or,n,A,f,Et,I,D,H,le,X,ve,$e),!function(ar){for(const Yr of ar)if(Yr.positionedGlyphs.length!==0)return!1;return!0}(Dt)&&or}const Gi={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Eh={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Qd(o,n,A,f,y,C){if(n.imageName){const I=f[n.imageName];return I?I.displaySize[0]*n.scale*Os/C+y:0}{const I=A[n.fontStack],D=I&&I[o];return D?D.metrics.advance*n.scale+y:0}}function Du(o,n,A,f){const y=Math.pow(o-n,2);return f?o<n?y/2:2*y:y+Math.abs(A)*A}function im(o,n,A){let f=0;return o===10&&(f-=1e4),A&&(f+=150),o!==40&&o!==65288||(f+=50),n!==41&&n!==65289||(f+=50),f}function Nu(o,n,A,f,y,C){let I=null,D=Du(n,A,y,C);for(const H of f){const X=Du(n-H.x,A,y,C)+H.badness;X<=D&&(I=H,D=X)}return{index:o,x:n,priorBreak:I,badness:D}}function kd(o){return o?kd(o.priorBreak).concat(o.index):[]}function mf(o,n,A,f,y,C,I){if(C!=="point")return[];if(!o)return[];const D=[],H=function(ve,Ce,Fe,$e,Ze,Et){let Kt=0;for(let xt=0;xt<ve.length();xt++){const Dt=ve.getSection(xt);Kt+=Qd(ve.getCharCode(xt),Dt,$e,Ze,Ce,Et)}return Kt/Math.max(1,Math.ceil(Kt/Fe))}(o,n,A,f,y,I),X=o.text.indexOf("​")>=0;let re=0;for(let ve=0;ve<o.length();ve++){const Ce=o.getSection(ve),Fe=o.getCharCode(ve);if(Gi[Fe]||(re+=Qd(Fe,Ce,f,y,n,I)),ve<o.length()-1){const $e=!((le=Fe)<11904||!(Sr["Bopomofo Extended"](le)||Sr.Bopomofo(le)||Sr["CJK Compatibility Forms"](le)||Sr["CJK Compatibility Ideographs"](le)||Sr["CJK Compatibility"](le)||Sr["CJK Radicals Supplement"](le)||Sr["CJK Strokes"](le)||Sr["CJK Symbols and Punctuation"](le)||Sr["CJK Unified Ideographs Extension A"](le)||Sr["CJK Unified Ideographs"](le)||Sr["Enclosed CJK Letters and Months"](le)||Sr["Halfwidth and Fullwidth Forms"](le)||Sr.Hiragana(le)||Sr["Ideographic Description Characters"](le)||Sr["Kangxi Radicals"](le)||Sr["Katakana Phonetic Extensions"](le)||Sr.Katakana(le)||Sr["Vertical Forms"](le)||Sr["Yi Radicals"](le)||Sr["Yi Syllables"](le)));(Eh[Fe]||$e||Ce.imageName)&&D.push(Nu(ve+1,re,H,D,im(Fe,o.getCharCode(ve+1),$e&&X),!1))}}var le;return kd(Nu(o.length(),re,H,D,0,!0))}function Fh(o){let n=.5,A=.5;switch(o){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":A=1;break;case"top":case"top-right":case"top-left":A=0}return{horizontalAlign:n,verticalAlign:A}}function sm(o,n,A,f,y){if(!f&&!y)return;const C=o[A],I=(o[A].x+C.metrics.advance*C.scale)*f;for(let D=n;D<=A;D++)o[D].x-=I,o[D].y+=y}function Pd(o,n,A){const{horizontalAlign:f,verticalAlign:y}=Fh(A),C=n[0]-o.displaySize[0]*f,I=n[1]-o.displaySize[1]*y;return{image:o,top:I,bottom:I+o.displaySize[1],left:C,right:C+o.displaySize[0]}}function Md(o,n,A,f,y,C){const I=o.image;let D;if(I.content){const Ze=I.content,Et=I.pixelRatio||1;D=[Ze[0]/Et,Ze[1]/Et,I.displaySize[0]-Ze[2]/Et,I.displaySize[1]-Ze[3]/Et]}const H=n.left*C,X=n.right*C;let re,le,ve,Ce;A==="width"||A==="both"?(Ce=y[0]+H-f[3],le=y[0]+X+f[1]):(Ce=y[0]+(H+X-I.displaySize[0])/2,le=Ce+I.displaySize[0]);const Fe=n.top*C,$e=n.bottom*C;return A==="height"||A==="both"?(re=y[1]+Fe-f[0],ve=y[1]+$e+f[2]):(re=y[1]+(Fe+$e-I.displaySize[1])/2,ve=re+I.displaySize[1]),{image:I,top:re,right:le,bottom:ve,left:Ce,collisionPadding:D}}const Al=128;function gf(o,n){const{expression:A}=n;if(A.kind==="constant")return{kind:"constant",layoutSize:A.evaluate(new Ui(o+1))};if(A.kind==="source")return{kind:"source"};{const{zoomStops:f,interpolationType:y}=A;let C=0;for(;C<f.length&&f[C]<=o;)C++;C=Math.max(0,C-1);let I=C;for(;I<f.length&&f[I]<o+1;)I++;I=Math.min(f.length-1,I);const D=f[C],H=f[I];return A.kind==="composite"?{kind:"composite",minZoom:D,maxZoom:H,interpolationType:y}:{kind:"camera",minZoom:D,maxZoom:H,minSize:A.evaluate(new Ui(D)),maxSize:A.evaluate(new Ui(H)),interpolationType:y}}}class ll extends ge{constructor(n,A,f,y){super(n,A),this.angle=f,y!==void 0&&(this.segment=y)}clone(){return new ll(this.x,this.y,this.angle,this.segment)}}function yf(o,n,A,f,y){if(n.segment===void 0)return!0;let C=n,I=n.segment+1,D=0;for(;D>-A/2;){if(I--,I<0)return!1;D-=o[I].dist(C),C=o[I]}D+=o[I].dist(o[I+1]),I++;const H=[];let X=0;for(;D<A/2;){const re=o[I],le=o[I+1];if(!le)return!1;let ve=o[I-1].angleTo(re)-re.angleTo(le);for(ve=Math.abs((ve+3*Math.PI)%(2*Math.PI)-Math.PI),H.push({distance:D,angleDelta:ve}),X+=ve;D-H[0].distance>f;)X-=H.shift().angleDelta;if(X>y)return!1;I++,D+=re.dist(le)}return!0}function Dd(o){let n=0;for(let A=0;A<o.length-1;A++)n+=o[A].dist(o[A+1]);return n}function vf(o,n,A){return o?.6*n*A:0}function Nd(o,n){return Math.max(o?o.right-o.left:0,n?n.right-n.left:0)}function am(o,n,A,f,y,C){const I=vf(A,y,C),D=Nd(A,f)*C;let H=0;const X=Dd(o)/2;for(let re=0;re<o.length-1;re++){const le=o[re],ve=o[re+1],Ce=le.dist(ve);if(H+Ce>X){const Fe=(X-H)/Ce,$e=ni(le.x,ve.x,Fe),Ze=ni(le.y,ve.y,Fe),Et=new ll($e,Ze,ve.angleTo(le),re);return Et._round(),!I||yf(o,Et,D,I,n)?Et:void 0}H+=Ce}}function om(o,n,A,f,y,C,I,D,H){const X=vf(f,C,I),re=Nd(f,y),le=re*I,ve=o[0].x===0||o[0].x===H||o[0].y===0||o[0].y===H;return n-le<n/4&&(n=le+n/4),ju(o,ve?n/2*D%n:(re/2+2*C)*I*D%n,n,X,A,le,ve,!1,H)}function ju(o,n,A,f,y,C,I,D,H){const X=C/2,re=Dd(o);let le=0,ve=n-A,Ce=[];for(let Fe=0;Fe<o.length-1;Fe++){const $e=o[Fe],Ze=o[Fe+1],Et=$e.dist(Ze),Kt=Ze.angleTo($e);for(;ve+A<le+Et;){ve+=A;const xt=(ve-le)/Et,Dt=ni($e.x,Ze.x,xt),or=ni($e.y,Ze.y,xt);if(Dt>=0&&Dt<H&&or>=0&&or<H&&ve-X>=0&&ve+X<=re){const ar=new ll(Dt,or,Kt,Fe);ar._round(),f&&!yf(o,ar,C,f,y)||Ce.push(ar)}}le+=Et}return D||Ce.length||I||(Ce=ju(o,le/2,A,f,y,C,I,!0,H)),Ce}function zo(o,n,A,f,y){const C=[];for(let I=0;I<o.length;I++){const D=o[I];let H;for(let X=0;X<D.length-1;X++){let re=D[X],le=D[X+1];re.x<n&&le.x<n||(re.x<n?re=new ge(n,re.y+(n-re.x)/(le.x-re.x)*(le.y-re.y))._round():le.x<n&&(le=new ge(n,re.y+(n-re.x)/(le.x-re.x)*(le.y-re.y))._round()),re.y<A&&le.y<A||(re.y<A?re=new ge(re.x+(A-re.y)/(le.y-re.y)*(le.x-re.x),A)._round():le.y<A&&(le=new ge(re.x+(A-re.y)/(le.y-re.y)*(le.x-re.x),A)._round()),re.x>=f&&le.x>=f||(re.x>=f?re=new ge(f,re.y+(f-re.x)/(le.x-re.x)*(le.y-re.y))._round():le.x>=f&&(le=new ge(f,re.y+(f-re.x)/(le.x-re.x)*(le.y-re.y))._round()),re.y>=y&&le.y>=y||(re.y>=y?re=new ge(re.x+(y-re.y)/(le.y-re.y)*(le.x-re.x),y)._round():le.y>=y&&(le=new ge(re.x+(y-re.y)/(le.y-re.y)*(le.x-re.x),y)._round()),H&&re.equals(H[H.length-1])||(H=[re],C.push(H)),H.push(le)))))}}return C}function _f(o,n,A,f){const y=[],C=o.image,I=C.pixelRatio,D=C.paddedRect.w-2,H=C.paddedRect.h-2,X=o.right-o.left,re=o.bottom-o.top,le=C.stretchX||[[0,D]],ve=C.stretchY||[[0,H]],Ce=(Lr,Xr)=>Lr+Xr[1]-Xr[0],Fe=le.reduce(Ce,0),$e=ve.reduce(Ce,0),Ze=D-Fe,Et=H-$e;let Kt=0,xt=Fe,Dt=0,or=$e,ar=0,Yr=Ze,on=0,Wr=Et;if(C.content&&f){const Lr=C.content;Kt=Lc(le,0,Lr[0]),Dt=Lc(ve,0,Lr[1]),xt=Lc(le,Lr[0],Lr[2]),or=Lc(ve,Lr[1],Lr[3]),ar=Lr[0]-Kt,on=Lr[1]-Dt,Yr=Lr[2]-Lr[0]-xt,Wr=Lr[3]-Lr[1]-or}const Mr=(Lr,Xr,Or,wr)=>{const _n=Sh(Lr.stretch-Kt,xt,X,o.left),fn=hu(Lr.fixed-ar,Yr,Lr.stretch,Fe),qn=Sh(Xr.stretch-Dt,or,re,o.top),$i=hu(Xr.fixed-on,Wr,Xr.stretch,$e),ls=Sh(Or.stretch-Kt,xt,X,o.left),ea=hu(Or.fixed-ar,Yr,Or.stretch,Fe),zA=Sh(wr.stretch-Dt,or,re,o.top),Ha=hu(wr.fixed-on,Wr,wr.stretch,$e),Hs=new ge(_n,qn),pa=new ge(ls,qn),za=new ge(ls,zA),ho=new ge(_n,zA),Vo=new ge(fn/I,$i/I),zs=new ge(ea/I,Ha/I),Va=n*Math.PI/180;if(Va){const Ko=Math.sin(Va),Go=Math.cos(Va),ms=[Go,-Ko,Ko,Go];Hs._matMult(ms),pa._matMult(ms),ho._matMult(ms),za._matMult(ms)}const fo=Lr.stretch+Lr.fixed,Fo=Xr.stretch+Xr.fixed;return{tl:Hs,tr:pa,bl:ho,br:za,tex:{x:C.paddedRect.x+1+fo,y:C.paddedRect.y+1+Fo,w:Or.stretch+Or.fixed-fo,h:wr.stretch+wr.fixed-Fo},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Vo,pixelOffsetBR:zs,minFontScaleX:Yr/I/X,minFontScaleY:Wr/I/re,isSDF:A}};if(f&&(C.stretchX||C.stretchY)){const Lr=jd(le,Ze,Fe),Xr=jd(ve,Et,$e);for(let Or=0;Or<Lr.length-1;Or++){const wr=Lr[Or],_n=Lr[Or+1];for(let fn=0;fn<Xr.length-1;fn++)y.push(Mr(wr,Xr[fn],_n,Xr[fn+1]))}}else y.push(Mr({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:D+1},{fixed:0,stretch:H+1}));return y}function Lc(o,n,A){let f=0;for(const y of o)f+=Math.max(n,Math.min(A,y[1]))-Math.max(n,Math.min(A,y[0]));return f}function jd(o,n,A){const f=[{fixed:-1,stretch:0}];for(const[y,C]of o){const I=f[f.length-1];f.push({fixed:y-I.stretch,stretch:I.stretch}),f.push({fixed:y-I.stretch,stretch:I.stretch+(C-y)})}return f.push({fixed:n+1,stretch:A}),f}function Sh(o,n,A,f){return o/n*A+f}function hu(o,n,A,f){return o-n*A/f}Pr("Anchor",ll);class kl{constructor(n,A,f,y,C,I,D,H,X,re){if(this.boxStartIndex=n.length,X){let le=I.top,ve=I.bottom;const Ce=I.collisionPadding;Ce&&(le-=Ce[1],ve+=Ce[3]);let Fe=ve-le;Fe>0&&(Fe=Math.max(10,Fe),this.circleDiameter=Fe)}else{let le=I.top*D-H[0],ve=I.bottom*D+H[2],Ce=I.left*D-H[3],Fe=I.right*D+H[1];const $e=I.collisionPadding;if($e&&(Ce-=$e[0]*D,le-=$e[1]*D,Fe+=$e[2]*D,ve+=$e[3]*D),re){const Ze=new ge(Ce,le),Et=new ge(Fe,le),Kt=new ge(Ce,ve),xt=new ge(Fe,ve),Dt=re*Math.PI/180;Ze._rotate(Dt),Et._rotate(Dt),Kt._rotate(Dt),xt._rotate(Dt),Ce=Math.min(Ze.x,Et.x,Kt.x,xt.x),Fe=Math.max(Ze.x,Et.x,Kt.x,xt.x),le=Math.min(Ze.y,Et.y,Kt.y,xt.y),ve=Math.max(Ze.y,Et.y,Kt.y,xt.y)}n.emplaceBack(A.x,A.y,Ce,le,Fe,ve,f,y,C)}this.boxEndIndex=n.length}}class Ih{constructor(n=[],A=Am){if(this.data=n,this.length=this.data.length,this.compare=A,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(n){this.data.push(n),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const n=this.data[0],A=this.data.pop();return this.length--,this.length>0&&(this.data[0]=A,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:A,compare:f}=this,y=A[n];for(;n>0;){const C=n-1>>1,I=A[C];if(f(y,I)>=0)break;A[n]=I,n=C}A[n]=y}_down(n){const{data:A,compare:f}=this,y=this.length>>1,C=A[n];for(;n<y;){let I=1+(n<<1),D=A[I];const H=I+1;if(H<this.length&&f(A[H],D)<0&&(I=H,D=A[H]),f(D,C)>=0)break;A[n]=D,n=I}A[n]=C}}function Am(o,n){return o<n?-1:o>n?1:0}function fu(o,n=1,A=!1){let f=1/0,y=1/0,C=-1/0,I=-1/0;const D=o[0];for(let Ce=0;Ce<D.length;Ce++){const Fe=D[Ce];(!Ce||Fe.x<f)&&(f=Fe.x),(!Ce||Fe.y<y)&&(y=Fe.y),(!Ce||Fe.x>C)&&(C=Fe.x),(!Ce||Fe.y>I)&&(I=Fe.y)}const H=Math.min(C-f,I-y);let X=H/2;const re=new Ih([],lm);if(H===0)return new ge(f,y);for(let Ce=f;Ce<C;Ce+=H)for(let Fe=y;Fe<I;Fe+=H)re.push(new du(Ce+X,Fe+X,X,o));let le=function(Ce){let Fe=0,$e=0,Ze=0;const Et=Ce[0];for(let Kt=0,xt=Et.length,Dt=xt-1;Kt<xt;Dt=Kt++){const or=Et[Kt],ar=Et[Dt],Yr=or.x*ar.y-ar.x*or.y;$e+=(or.x+ar.x)*Yr,Ze+=(or.y+ar.y)*Yr,Fe+=3*Yr}return new du($e/Fe,Ze/Fe,0,Ce)}(o),ve=re.length;for(;re.length;){const Ce=re.pop();(Ce.d>le.d||!le.d)&&(le=Ce,A&&console.log("found best %d after %d probes",Math.round(1e4*Ce.d)/1e4,ve)),Ce.max-le.d<=n||(X=Ce.h/2,re.push(new du(Ce.p.x-X,Ce.p.y-X,X,o)),re.push(new du(Ce.p.x+X,Ce.p.y-X,X,o)),re.push(new du(Ce.p.x-X,Ce.p.y+X,X,o)),re.push(new du(Ce.p.x+X,Ce.p.y+X,X,o)),ve+=4)}return A&&(console.log(`num probes: ${ve}`),console.log(`best distance: ${le.d}`)),le.p}function lm(o,n){return n.max-o.max}function du(o,n,A,f){this.p=new ge(o,n),this.h=A,this.d=function(y,C){let I=!1,D=1/0;for(let H=0;H<C.length;H++){const X=C[H];for(let re=0,le=X.length,ve=le-1;re<le;ve=re++){const Ce=X[re],Fe=X[ve];Ce.y>y.y!=Fe.y>y.y&&y.x<(Fe.x-Ce.x)*(y.y-Ce.y)/(Fe.y-Ce.y)+Ce.x&&(I=!I),D=Math.min(D,bl(y,Ce,Fe))}}return(I?1:-1)*Math.sqrt(D)}(this.p,f),this.max=this.d+this.h*Math.SQRT2}const Th=Number.POSITIVE_INFINITY;function Rd(o,n){return n[1]!==Th?function(A,f,y){let C=0,I=0;switch(f=Math.abs(f),y=Math.abs(y),A){case"top-right":case"top-left":case"top":I=y-7;break;case"bottom-right":case"bottom-left":case"bottom":I=7-y}switch(A){case"top-right":case"bottom-right":case"right":C=-f;break;case"top-left":case"bottom-left":case"left":C=f}return[C,I]}(o,n[0],n[1]):function(A,f){let y=0,C=0;f<0&&(f=0);const I=f/Math.sqrt(2);switch(A){case"top-right":case"top-left":C=I-7;break;case"bottom-right":case"bottom-left":C=7-I;break;case"bottom":C=7-f;break;case"top":C=f-7}switch(A){case"top-right":case"bottom-right":y=-I;break;case"top-left":case"bottom-left":y=I;break;case"left":y=f;break;case"right":y=-f}return[y,C]}(o,n[0])}function Uh(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function cm(o,n,A,f,y,C,I,D,H,X,re){let le=C.textMaxSize.evaluate(n,{});le===void 0&&(le=I);const ve=o.layers[0].layout,Ce=ve.get("icon-offset").evaluate(n,{},re),Fe=Hd(A.horizontal),$e=I/24,Ze=o.tilePixelRatio*$e,Et=o.tilePixelRatio*le/24,Kt=o.tilePixelRatio*D,xt=o.tilePixelRatio*ve.get("symbol-spacing"),Dt=ve.get("text-padding")*o.tilePixelRatio,or=function(wr,_n,fn,qn=1){const $i=wr.get("icon-padding").evaluate(_n,{},fn),ls=$i&&$i.values;return[ls[0]*qn,ls[1]*qn,ls[2]*qn,ls[3]*qn]}(ve,n,re,o.tilePixelRatio),ar=ve.get("text-max-angle")/180*Math.PI,Yr=ve.get("text-rotation-alignment")!=="viewport"&&ve.get("symbol-placement")!=="point",on=ve.get("icon-rotation-alignment")==="map"&&ve.get("symbol-placement")!=="point",Wr=ve.get("symbol-placement"),Mr=xt/2,Lr=ve.get("icon-text-fit");let Xr;f&&Lr!=="none"&&(o.allowVerticalPlacement&&A.vertical&&(Xr=Md(f,A.vertical,Lr,ve.get("icon-text-fit-padding"),Ce,$e)),Fe&&(f=Md(f,Fe,Lr,ve.get("icon-text-fit-padding"),Ce,$e)));const Or=(wr,_n)=>{_n.x<0||_n.x>=Ci||_n.y<0||_n.y>=Ci||function(fn,qn,$i,ls,ea,zA,Ha,Hs,pa,za,ho,Vo,zs,Va,fo,Fo,Ko,Go,ms,ma,$n,yA,Ka,po,hl){const Ml=fn.addToLineVertexArray(qn,$i);let Dl,Qc,fl,VA,qo=0,kc=0,Bf=0,Jg=0,mm=-1,gm=-1;const Pc={};let Yg=ir.exports(""),ym=0,vm=0;if(Hs._unevaluatedLayout.getValue("text-radial-offset")===void 0?[ym,vm]=Hs.layout.get("text-offset").evaluate($n,{},po).map(Wo=>Wo*Os):(ym=Hs.layout.get("text-radial-offset").evaluate($n,{},po)*Os,vm=Th),fn.allowVerticalPlacement&&ls.vertical){const Wo=Hs.layout.get("text-rotate").evaluate($n,{},po)+90;fl=new kl(pa,qn,za,ho,Vo,ls.vertical,zs,Va,fo,Wo),Ha&&(VA=new kl(pa,qn,za,ho,Vo,Ha,Ko,Go,fo,Wo))}if(ea){const Wo=Hs.layout.get("icon-rotate").evaluate($n,{}),lc=Hs.layout.get("icon-text-fit")!=="none",Cf=_f(ea,Wo,Ka,lc),Ef=Ha?_f(Ha,Wo,Ka,lc):void 0;Qc=new kl(pa,qn,za,ho,Vo,ea,Ko,Go,!1,Wo),qo=4*Cf.length;const t0=fn.iconSizeData;let Ru=null;t0.kind==="source"?(Ru=[Al*Hs.layout.get("icon-size").evaluate($n,{})],Ru[0]>Ac&&Z(`${fn.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):t0.kind==="composite"&&(Ru=[Al*yA.compositeIconSizes[0].evaluate($n,{},po),Al*yA.compositeIconSizes[1].evaluate($n,{},po)],(Ru[0]>Ac||Ru[1]>Ac)&&Z(`${fn.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),fn.addSymbols(fn.icon,Cf,Ru,ma,ms,$n,a.WritingMode.none,qn,Ml.lineStartIndex,Ml.lineLength,-1,po),mm=fn.icon.placedSymbolArray.length-1,Ef&&(kc=4*Ef.length,fn.addSymbols(fn.icon,Ef,Ru,ma,ms,$n,a.WritingMode.vertical,qn,Ml.lineStartIndex,Ml.lineLength,-1,po),gm=fn.icon.placedSymbolArray.length-1)}const $g=Object.keys(ls.horizontal);for(const Wo of $g){const lc=ls.horizontal[Wo];if(!Dl){Yg=ir.exports(lc.text);const Ef=Hs.layout.get("text-rotate").evaluate($n,{},po);Dl=new kl(pa,qn,za,ho,Vo,lc,zs,Va,fo,Ef)}const Cf=lc.positionedLines.length===1;if(Bf+=Od(fn,qn,lc,zA,Hs,fo,$n,Fo,Ml,ls.vertical?a.WritingMode.horizontal:a.WritingMode.horizontalOnly,Cf?$g:[Wo],Pc,mm,yA,po),Cf)break}ls.vertical&&(Jg+=Od(fn,qn,ls.vertical,zA,Hs,fo,$n,Fo,Ml,a.WritingMode.vertical,["vertical"],Pc,gm,yA,po));const v_=Dl?Dl.boxStartIndex:fn.collisionBoxArray.length,__=Dl?Dl.boxEndIndex:fn.collisionBoxArray.length,w_=fl?fl.boxStartIndex:fn.collisionBoxArray.length,b_=fl?fl.boxEndIndex:fn.collisionBoxArray.length,x_=Qc?Qc.boxStartIndex:fn.collisionBoxArray.length,B_=Qc?Qc.boxEndIndex:fn.collisionBoxArray.length,C_=VA?VA.boxStartIndex:fn.collisionBoxArray.length,E_=VA?VA.boxEndIndex:fn.collisionBoxArray.length;let Nl=-1;const zd=(Wo,lc)=>Wo&&Wo.circleDiameter?Math.max(Wo.circleDiameter,lc):lc;Nl=zd(Dl,Nl),Nl=zd(fl,Nl),Nl=zd(Qc,Nl),Nl=zd(VA,Nl);const e0=Nl>-1?1:0;e0&&(Nl*=hl/Os),fn.glyphOffsetArray.length>=pu.MAX_GLYPHS&&Z("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),$n.sortKey!==void 0&&fn.addToSortKeyRanges(fn.symbolInstances.length,$n.sortKey),fn.symbolInstances.emplaceBack(qn.x,qn.y,Pc.right>=0?Pc.right:-1,Pc.center>=0?Pc.center:-1,Pc.left>=0?Pc.left:-1,Pc.vertical||-1,mm,gm,Yg,v_,__,w_,b_,x_,B_,C_,E_,za,Bf,Jg,qo,kc,e0,0,zs,ym,vm,Nl)}(o,_n,wr,A,f,y,Xr,o.layers[0],o.collisionBoxArray,n.index,n.sourceLayerIndex,o.index,Ze,[Dt,Dt,Dt,Dt],Yr,H,Kt,or,on,Ce,n,C,X,re,I)};if(Wr==="line")for(const wr of zo(n.geometry,0,0,Ci,Ci)){const _n=om(wr,xt,ar,A.vertical||Fe,f,24,Et,o.overscaling,Ci);for(const fn of _n){const qn=Fe;qn&&um(o,qn.text,Mr,fn)||Or(wr,fn)}}else if(Wr==="line-center"){for(const wr of n.geometry)if(wr.length>1){const _n=am(wr,ar,A.vertical||Fe,f,24,Et);_n&&Or(wr,_n)}}else if(n.type==="Polygon")for(const wr of Pu(n.geometry,0)){const _n=fu(wr,16);Or(wr[0],new ll(_n.x,_n.y,0))}else if(n.type==="LineString")for(const wr of n.geometry)Or(wr,new ll(wr[0].x,wr[0].y,0));else if(n.type==="Point")for(const wr of n.geometry)for(const _n of wr)Or([_n],new ll(_n.x,_n.y,0))}const Ac=32640;function Od(o,n,A,f,y,C,I,D,H,X,re,le,ve,Ce,Fe){const $e=function(Kt,xt,Dt,or,ar,Yr,on,Wr){const Mr=or.layout.get("text-rotate").evaluate(Yr,{})*Math.PI/180,Lr=[];for(const Xr of xt.positionedLines)for(const Or of Xr.positionedGlyphs){if(!Or.rect)continue;const wr=Or.rect||{};let _n=4,fn=!0,qn=1,$i=0;const ls=(ar||Wr)&&Or.vertical,ea=Or.metrics.advance*Or.scale/2;if(Wr&&xt.verticalizable){const ms=(Or.scale-1)*Os,ma=(Os-Or.metrics.width*Or.scale)/2;$i=Xr.lineOffset/2-(Or.imageName?-ma:ms)}if(Or.imageName){const ms=on[Or.imageName];fn=ms.sdf,qn=ms.pixelRatio,_n=1/qn}const zA=ar?[Or.x+ea,Or.y]:[0,0];let Ha=ar?[0,0]:[Or.x+ea+Dt[0],Or.y+Dt[1]-$i],Hs=[0,0];ls&&(Hs=Ha,Ha=[0,0]);const pa=(Or.metrics.left-_n)*Or.scale-ea+Ha[0],za=(-Or.metrics.top-_n)*Or.scale+Ha[1],ho=pa+wr.w*Or.scale/qn,Vo=za+wr.h*Or.scale/qn,zs=new ge(pa,za),Va=new ge(ho,za),fo=new ge(pa,Vo),Fo=new ge(ho,Vo);if(ls){const ms=new ge(-ea,ea-Uc),ma=-Math.PI/2,$n=12-ea,yA=new ge(22-$n,-(Or.imageName?$n:0)),Ka=new ge(...Hs);zs._rotateAround(ma,ms)._add(yA)._add(Ka),Va._rotateAround(ma,ms)._add(yA)._add(Ka),fo._rotateAround(ma,ms)._add(yA)._add(Ka),Fo._rotateAround(ma,ms)._add(yA)._add(Ka)}if(Mr){const ms=Math.sin(Mr),ma=Math.cos(Mr),$n=[ma,-ms,ms,ma];zs._matMult($n),Va._matMult($n),fo._matMult($n),Fo._matMult($n)}const Ko=new ge(0,0),Go=new ge(0,0);Lr.push({tl:zs,tr:Va,bl:fo,br:Fo,tex:wr,writingMode:xt.writingMode,glyphOffset:zA,sectionIndex:Or.sectionIndex,isSDF:fn,pixelOffsetTL:Ko,pixelOffsetBR:Go,minFontScaleX:0,minFontScaleY:0})}return Lr}(0,A,D,y,C,I,f,o.allowVerticalPlacement),Ze=o.textSizeData;let Et=null;Ze.kind==="source"?(Et=[Al*y.layout.get("text-size").evaluate(I,{})],Et[0]>Ac&&Z(`${o.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):Ze.kind==="composite"&&(Et=[Al*Ce.compositeTextSizes[0].evaluate(I,{},Fe),Al*Ce.compositeTextSizes[1].evaluate(I,{},Fe)],(Et[0]>Ac||Et[1]>Ac)&&Z(`${o.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),o.addSymbols(o.text,$e,Et,D,C,I,X,n,H.lineStartIndex,H.lineLength,ve,Fe);for(const Kt of re)le[Kt]=o.text.placedSymbolArray.length-1;return 4*$e.length}function Hd(o){for(const n in o)return o[n];return null}function um(o,n,A,f){const y=o.compareText;if(n in y){const C=y[n];for(let I=C.length-1;I>=0;I--)if(f.dist(C[I])<A)return!0}else y[n]=[];return y[n].push(f),!1}const hm=Fl.VectorTileFeature.types,fm=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Lh(o,n,A,f,y,C,I,D,H,X,re,le,ve){const Ce=D?Math.min(Ac,Math.round(D[0])):0,Fe=D?Math.min(Ac,Math.round(D[1])):0;o.emplaceBack(n,A,Math.round(32*f),Math.round(32*y),C,I,(Ce<<1)+(H?1:0),Fe,16*X,16*re,256*le,256*ve)}function wf(o,n,A){o.emplaceBack(n.x,n.y,A),o.emplaceBack(n.x,n.y,A),o.emplaceBack(n.x,n.y,A),o.emplaceBack(n.x,n.y,A)}function dm(o){for(const n of o.sections)if(vl(n.text))return!0;return!1}class bf{constructor(n){this.layoutVertexArray=new xe,this.indexArray=new Ft,this.programConfigurations=n,this.segments=new Je,this.dynamicLayoutVertexArray=new Ie,this.opacityVertexArray=new je,this.placedSymbolArray=new ur}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,A,f,y){this.isEmpty()||(f&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Ll.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,A),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,xd.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,fm,!0),this.opacityVertexBuffer.itemSize=1),(f||y)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Pr("SymbolBuffers",bf);class xf{constructor(n,A,f){this.layoutVertexArray=new n,this.layoutAttributes=A,this.indexArray=new f,this.segments=new Je,this.collisionVertexArray=new It}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,Bd.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Pr("CollisionBuffers",xf);class pu{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(I=>I.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Co([]),this.placementViewportMatrix=Co([]);const A=this.layers[0]._unevaluatedLayout._values;this.textSizeData=gf(this.zoom,A["text-size"]),this.iconSizeData=gf(this.zoom,A["icon-size"]);const f=this.layers[0].layout,y=f.get("symbol-sort-key"),C=f.get("symbol-z-order");this.canOverlap=T(f,"text-overlap","text-allow-overlap")!=="never"||T(f,"icon-overlap","icon-allow-overlap")!=="never"||f.get("text-ignore-placement")||f.get("icon-ignore-placement"),this.sortFeaturesByKey=C!=="viewport-y"&&!y.isConstant(),this.sortFeaturesByY=(C==="viewport-y"||C==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,f.get("symbol-placement")==="point"&&(this.writingModes=f.get("text-writing-mode").map(I=>a.WritingMode[I])),this.stateDependentLayerIds=this.layers.filter(I=>I.isStateDependent()).map(I=>I.id),this.sourceID=n.sourceID}createArrays(){this.text=new bf(new Ki(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new bf(new Ki(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new Ur,this.lineVertexArray=new qr,this.symbolInstances=new Rr}calculateGlyphDependencies(n,A,f,y,C){for(let I=0;I<n.length;I++)if(A[n.charCodeAt(I)]=!0,(f||y)&&C){const D=Au[n.charAt(I)];D&&(A[D.charCodeAt(0)]=!0)}}populate(n,A,f){const y=this.layers[0],C=y.layout,I=C.get("text-font"),D=C.get("text-field"),H=C.get("icon-image"),X=(D.value.kind!=="constant"||D.value.value instanceof Ye&&!D.value.value.isEmpty()||D.value.value.toString().length>0)&&(I.value.kind!=="constant"||I.value.value.length>0),re=H.value.kind!=="constant"||!!H.value.value||Object.keys(H.parameters).length>0,le=C.get("symbol-sort-key");if(this.features=[],!X&&!re)return;const ve=A.iconDependencies,Ce=A.glyphDependencies,Fe=A.availableImages,$e=new Ui(this.zoom);for(const{feature:Ze,id:Et,index:Kt,sourceLayerIndex:xt}of n){const Dt=y._featureFilter.needGeometry,or=Bo(Ze,Dt);if(!y._featureFilter.filter($e,or,f))continue;let ar,Yr;if(Dt||(or.geometry=lo(Ze)),X){const Wr=y.getValueAndResolveTokens("text-field",or,f,Fe),Mr=Ye.factory(Wr);dm(Mr)&&(this.hasRTLText=!0),(!this.hasRTLText||fA()==="unavailable"||this.hasRTLText&&Fa.isParsed())&&(ar=Mu(Mr,y,or))}if(re){const Wr=y.getValueAndResolveTokens("icon-image",or,f,Fe);Yr=Wr instanceof ut?Wr:ut.fromString(Wr)}if(!ar&&!Yr)continue;const on=this.sortFeaturesByKey?le.evaluate(or,{},f):void 0;if(this.features.push({id:Et,text:ar,icon:Yr,index:Kt,sourceLayerIndex:xt,geometry:or.geometry,properties:Ze.properties,type:hm[Ze.type],sortKey:on}),Yr&&(ve[Yr.name]=!0),ar){const Wr=I.evaluate(or,{},f).join(","),Mr=C.get("text-rotation-alignment")!=="viewport"&&C.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(a.WritingMode.vertical)>=0;for(const Lr of ar.sections)if(Lr.image)ve[Lr.image.name]=!0;else{const Xr=ja(ar.toString()),Or=Lr.fontStack||Wr,wr=Ce[Or]=Ce[Or]||{};this.calculateGlyphDependencies(Lr.text,wr,Mr,this.allowVerticalPlacement,Xr)}}}C.get("symbol-placement")==="line"&&(this.features=function(Ze){const Et={},Kt={},xt=[];let Dt=0;function or(Wr){xt.push(Ze[Wr]),Dt++}function ar(Wr,Mr,Lr){const Xr=Kt[Wr];return delete Kt[Wr],Kt[Mr]=Xr,xt[Xr].geometry[0].pop(),xt[Xr].geometry[0]=xt[Xr].geometry[0].concat(Lr[0]),Xr}function Yr(Wr,Mr,Lr){const Xr=Et[Mr];return delete Et[Mr],Et[Wr]=Xr,xt[Xr].geometry[0].shift(),xt[Xr].geometry[0]=Lr[0].concat(xt[Xr].geometry[0]),Xr}function on(Wr,Mr,Lr){const Xr=Lr?Mr[0][Mr[0].length-1]:Mr[0][0];return`${Wr}:${Xr.x}:${Xr.y}`}for(let Wr=0;Wr<Ze.length;Wr++){const Mr=Ze[Wr],Lr=Mr.geometry,Xr=Mr.text?Mr.text.toString():null;if(!Xr){or(Wr);continue}const Or=on(Xr,Lr),wr=on(Xr,Lr,!0);if(Or in Kt&&wr in Et&&Kt[Or]!==Et[wr]){const _n=Yr(Or,wr,Lr),fn=ar(Or,wr,xt[_n].geometry);delete Et[Or],delete Kt[wr],Kt[on(Xr,xt[fn].geometry,!0)]=fn,xt[_n].geometry=null}else Or in Kt?ar(Or,wr,Lr):wr in Et?Yr(Or,wr,Lr):(or(Wr),Et[Or]=Dt-1,Kt[wr]=Dt-1)}return xt.filter(Wr=>Wr.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Ze,Et)=>Ze.sortKey-Et.sortKey)}update(n,A,f){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,A,this.layers,f),this.icon.programConfigurations.updatePaintArrays(n,A,this.layers,f))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,A){const f=this.lineVertexArray.length;if(n.segment!==void 0){let y=n.dist(A[n.segment+1]),C=n.dist(A[n.segment]);const I={};for(let D=n.segment+1;D<A.length;D++)I[D]={x:A[D].x,y:A[D].y,tileUnitDistanceFromAnchor:y},D<A.length-1&&(y+=A[D+1].dist(A[D]));for(let D=n.segment||0;D>=0;D--)I[D]={x:A[D].x,y:A[D].y,tileUnitDistanceFromAnchor:C},D>0&&(C+=A[D-1].dist(A[D]));for(let D=0;D<A.length;D++){const H=I[D];this.lineVertexArray.emplaceBack(H.x,H.y,H.tileUnitDistanceFromAnchor)}}return{lineStartIndex:f,lineLength:this.lineVertexArray.length-f}}addSymbols(n,A,f,y,C,I,D,H,X,re,le,ve){const Ce=n.indexArray,Fe=n.layoutVertexArray,$e=n.segments.prepareSegment(4*A.length,Fe,Ce,this.canOverlap?I.sortKey:void 0),Ze=this.glyphOffsetArray.length,Et=$e.vertexLength,Kt=this.allowVerticalPlacement&&D===a.WritingMode.vertical?Math.PI/2:0,xt=I.text&&I.text.sections;for(let Dt=0;Dt<A.length;Dt++){const{tl:or,tr:ar,bl:Yr,br:on,tex:Wr,pixelOffsetTL:Mr,pixelOffsetBR:Lr,minFontScaleX:Xr,minFontScaleY:Or,glyphOffset:wr,isSDF:_n,sectionIndex:fn}=A[Dt],qn=$e.vertexLength,$i=wr[1];Lh(Fe,H.x,H.y,or.x,$i+or.y,Wr.x,Wr.y,f,_n,Mr.x,Mr.y,Xr,Or),Lh(Fe,H.x,H.y,ar.x,$i+ar.y,Wr.x+Wr.w,Wr.y,f,_n,Lr.x,Mr.y,Xr,Or),Lh(Fe,H.x,H.y,Yr.x,$i+Yr.y,Wr.x,Wr.y+Wr.h,f,_n,Mr.x,Lr.y,Xr,Or),Lh(Fe,H.x,H.y,on.x,$i+on.y,Wr.x+Wr.w,Wr.y+Wr.h,f,_n,Lr.x,Lr.y,Xr,Or),wf(n.dynamicLayoutVertexArray,H,Kt),Ce.emplaceBack(qn,qn+1,qn+2),Ce.emplaceBack(qn+1,qn+2,qn+3),$e.vertexLength+=4,$e.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(wr[0]),Dt!==A.length-1&&fn===A[Dt+1].sectionIndex||n.programConfigurations.populatePaintArrays(Fe.length,I,I.index,{},ve,xt&&xt[fn])}n.placedSymbolArray.emplaceBack(H.x,H.y,Ze,this.glyphOffsetArray.length-Ze,Et,X,re,H.segment,f?f[0]:0,f?f[1]:0,y[0],y[1],D,0,!1,0,le)}_addCollisionDebugVertex(n,A,f,y,C,I){return A.emplaceBack(0,0),n.emplaceBack(f.x,f.y,y,C,Math.round(I.x),Math.round(I.y))}addCollisionDebugVertices(n,A,f,y,C,I,D){const H=C.segments.prepareSegment(4,C.layoutVertexArray,C.indexArray),X=H.vertexLength,re=C.layoutVertexArray,le=C.collisionVertexArray,ve=D.anchorX,Ce=D.anchorY;this._addCollisionDebugVertex(re,le,I,ve,Ce,new ge(n,A)),this._addCollisionDebugVertex(re,le,I,ve,Ce,new ge(f,A)),this._addCollisionDebugVertex(re,le,I,ve,Ce,new ge(f,y)),this._addCollisionDebugVertex(re,le,I,ve,Ce,new ge(n,y)),H.vertexLength+=4;const Fe=C.indexArray;Fe.emplaceBack(X,X+1),Fe.emplaceBack(X+1,X+2),Fe.emplaceBack(X+2,X+3),Fe.emplaceBack(X+3,X),H.primitiveLength+=4}addDebugCollisionBoxes(n,A,f,y){for(let C=n;C<A;C++){const I=this.collisionBoxArray.get(C);this.addCollisionDebugVertices(I.x1,I.y1,I.x2,I.y2,y?this.textCollisionBox:this.iconCollisionBox,I.anchorPoint,f)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new xf(ft,lf.members,pt),this.iconCollisionBox=new xf(ft,lf.members,pt);for(let n=0;n<this.symbolInstances.length;n++){const A=this.symbolInstances.get(n);this.addDebugCollisionBoxes(A.textBoxStartIndex,A.textBoxEndIndex,A,!0),this.addDebugCollisionBoxes(A.verticalTextBoxStartIndex,A.verticalTextBoxEndIndex,A,!0),this.addDebugCollisionBoxes(A.iconBoxStartIndex,A.iconBoxEndIndex,A,!1),this.addDebugCollisionBoxes(A.verticalIconBoxStartIndex,A.verticalIconBoxEndIndex,A,!1)}}_deserializeCollisionBoxesForSymbol(n,A,f,y,C,I,D,H,X){const re={};for(let le=A;le<f;le++){const ve=n.get(le);re.textBox={x1:ve.x1,y1:ve.y1,x2:ve.x2,y2:ve.y2,anchorPointX:ve.anchorPointX,anchorPointY:ve.anchorPointY},re.textFeatureIndex=ve.featureIndex;break}for(let le=y;le<C;le++){const ve=n.get(le);re.verticalTextBox={x1:ve.x1,y1:ve.y1,x2:ve.x2,y2:ve.y2,anchorPointX:ve.anchorPointX,anchorPointY:ve.anchorPointY},re.verticalTextFeatureIndex=ve.featureIndex;break}for(let le=I;le<D;le++){const ve=n.get(le);re.iconBox={x1:ve.x1,y1:ve.y1,x2:ve.x2,y2:ve.y2,anchorPointX:ve.anchorPointX,anchorPointY:ve.anchorPointY},re.iconFeatureIndex=ve.featureIndex;break}for(let le=H;le<X;le++){const ve=n.get(le);re.verticalIconBox={x1:ve.x1,y1:ve.y1,x2:ve.x2,y2:ve.y2,anchorPointX:ve.anchorPointX,anchorPointY:ve.anchorPointY},re.verticalIconFeatureIndex=ve.featureIndex;break}return re}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let A=0;A<this.symbolInstances.length;A++){const f=this.symbolInstances.get(A);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,f.textBoxStartIndex,f.textBoxEndIndex,f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f.iconBoxStartIndex,f.iconBoxEndIndex,f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,A){const f=n.placedSymbolArray.get(A),y=f.vertexStartIndex+4*f.numGlyphs;for(let C=f.vertexStartIndex;C<y;C+=4)n.indexArray.emplaceBack(C,C+1,C+2),n.indexArray.emplaceBack(C+1,C+2,C+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const A=Math.sin(n),f=Math.cos(n),y=[],C=[],I=[];for(let D=0;D<this.symbolInstances.length;++D){I.push(D);const H=this.symbolInstances.get(D);y.push(0|Math.round(A*H.anchorX+f*H.anchorY)),C.push(H.featureIndex)}return I.sort((D,H)=>y[D]-y[H]||C[H]-C[D]),I}addToSortKeyRanges(n,A){const f=this.sortKeyRanges[this.sortKeyRanges.length-1];f&&f.sortKey===A?f.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:A,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const A of this.symbolInstanceIndexes){const f=this.symbolInstances.get(A);this.featureSortOrder.push(f.featureIndex),[f.rightJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.leftJustifiedTextSymbolIndex].forEach((y,C,I)=>{y>=0&&I.indexOf(y)===C&&this.addIndicesForPlacedSymbol(this.text,y)}),f.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,f.verticalPlacedTextSymbolIndex),f.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.placedIconSymbolIndex),f.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Pr("SymbolBucket",pu,{omit:["layers","collisionBoxArray","features","compareText"]}),pu.MAX_GLYPHS=65535,pu.addDynamicAttributes=wf;const pm=new as({"symbol-placement":new sn(vt.layout_symbol["symbol-placement"]),"symbol-spacing":new sn(vt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new sn(vt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new vn(vt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new sn(vt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new sn(vt.layout_symbol["icon-allow-overlap"]),"icon-overlap":new sn(vt.layout_symbol["icon-overlap"]),"icon-ignore-placement":new sn(vt.layout_symbol["icon-ignore-placement"]),"icon-optional":new sn(vt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new sn(vt.layout_symbol["icon-rotation-alignment"]),"icon-size":new vn(vt.layout_symbol["icon-size"]),"icon-text-fit":new sn(vt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new sn(vt.layout_symbol["icon-text-fit-padding"]),"icon-image":new vn(vt.layout_symbol["icon-image"]),"icon-rotate":new vn(vt.layout_symbol["icon-rotate"]),"icon-padding":new vn(vt.layout_symbol["icon-padding"]),"icon-keep-upright":new sn(vt.layout_symbol["icon-keep-upright"]),"icon-offset":new vn(vt.layout_symbol["icon-offset"]),"icon-anchor":new vn(vt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new sn(vt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new sn(vt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new sn(vt.layout_symbol["text-rotation-alignment"]),"text-field":new vn(vt.layout_symbol["text-field"]),"text-font":new vn(vt.layout_symbol["text-font"]),"text-size":new vn(vt.layout_symbol["text-size"]),"text-max-width":new vn(vt.layout_symbol["text-max-width"]),"text-line-height":new sn(vt.layout_symbol["text-line-height"]),"text-letter-spacing":new vn(vt.layout_symbol["text-letter-spacing"]),"text-justify":new vn(vt.layout_symbol["text-justify"]),"text-radial-offset":new vn(vt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new sn(vt.layout_symbol["text-variable-anchor"]),"text-anchor":new vn(vt.layout_symbol["text-anchor"]),"text-max-angle":new sn(vt.layout_symbol["text-max-angle"]),"text-writing-mode":new sn(vt.layout_symbol["text-writing-mode"]),"text-rotate":new vn(vt.layout_symbol["text-rotate"]),"text-padding":new sn(vt.layout_symbol["text-padding"]),"text-keep-upright":new sn(vt.layout_symbol["text-keep-upright"]),"text-transform":new vn(vt.layout_symbol["text-transform"]),"text-offset":new vn(vt.layout_symbol["text-offset"]),"text-allow-overlap":new sn(vt.layout_symbol["text-allow-overlap"]),"text-overlap":new sn(vt.layout_symbol["text-overlap"]),"text-ignore-placement":new sn(vt.layout_symbol["text-ignore-placement"]),"text-optional":new sn(vt.layout_symbol["text-optional"])});var F={paint:new as({"icon-opacity":new vn(vt.paint_symbol["icon-opacity"]),"icon-color":new vn(vt.paint_symbol["icon-color"]),"icon-halo-color":new vn(vt.paint_symbol["icon-halo-color"]),"icon-halo-width":new vn(vt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new vn(vt.paint_symbol["icon-halo-blur"]),"icon-translate":new sn(vt.paint_symbol["icon-translate"]),"icon-translate-anchor":new sn(vt.paint_symbol["icon-translate-anchor"]),"text-opacity":new vn(vt.paint_symbol["text-opacity"]),"text-color":new vn(vt.paint_symbol["text-color"],{runtimeType:wn,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new vn(vt.paint_symbol["text-halo-color"]),"text-halo-width":new vn(vt.paint_symbol["text-halo-width"]),"text-halo-blur":new vn(vt.paint_symbol["text-halo-blur"]),"text-translate":new sn(vt.paint_symbol["text-translate"]),"text-translate-anchor":new sn(vt.paint_symbol["text-translate-anchor"])}),layout:pm};class B{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:un,this.defaultValue=n}evaluate(n){if(n.formattedSection){const A=this.defaultValue.property.overrides;if(A&&A.hasOverride(n.formattedSection))return A.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Pr("FormatSectionOverride",B,{omit:["defaultValue"]});class U extends bo{constructor(n){super(n,F)}recalculate(n,A){if(super.recalculate(n,A),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const f=this.layout.get("text-writing-mode");if(f){const y=[];for(const C of f)y.indexOf(C)<0&&y.push(C);this.layout._values["text-writing-mode"]=y}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,A,f,y){const C=this.layout.get(n).evaluate(A,{},f,y),I=this._unevaluatedLayout._values[n];return I.isDataDriven()||pi(I.value)||!C?C:function(D,H){return H.replace(/{([^{}]+)}/g,(X,re)=>re in D?String(D[re]):"")}(A.properties,C)}createBucket(n){return new pu(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const n of F.paint.overridableProperties){if(!U.hasPaintOverride(this.layout,n))continue;const A=this.paint.get(n),f=new B(A),y=new Wn(f,A.property.specification);let C=null;C=A.value.kind==="constant"||A.value.kind==="source"?new Tn("source",y):new Es("composite",y,A.value.zoomStops),this.paint._values[n]=new wo(A.property,C,A.parameters)}}_handleOverridablePaintPropertyUpdate(n,A,f){return!(!this.layout||A.isDataDriven()||f.isDataDriven())&&U.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,A){const f=n.get("text-field"),y=F.paint.properties[A];let C=!1;const I=D=>{for(const H of D)if(y.overrides&&y.overrides.hasOverride(H))return void(C=!0)};if(f.value.kind==="constant"&&f.value.value instanceof Ye)I(f.value.value.sections);else if(f.value.kind==="source"){const D=X=>{C||(X instanceof Hr&&zt(X.value)===cr?I(X.value.sections):X instanceof TA?I(X.sections):X.eachChild(D))},H=f.value;H._styleExpression&&D(H._styleExpression.expression)}return C}}function T(o,n,A){let f="never";const y=o.get(n);return y?f=y:o.get(A)&&(f="always"),f}var V={paint:new as({"background-color":new sn(vt.paint_background["background-color"]),"background-pattern":new wl(vt.paint_background["background-pattern"]),"background-opacity":new sn(vt.paint_background["background-opacity"])})},te={paint:new as({"raster-opacity":new sn(vt.paint_raster["raster-opacity"]),"raster-hue-rotate":new sn(vt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new sn(vt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new sn(vt.paint_raster["raster-brightness-max"]),"raster-saturation":new sn(vt.paint_raster["raster-saturation"]),"raster-contrast":new sn(vt.paint_raster["raster-contrast"]),"raster-resampling":new sn(vt.paint_raster["raster-resampling"]),"raster-fade-duration":new sn(vt.paint_raster["raster-fade-duration"])})};class we extends bo{constructor(n){super(n,{}),this.onAdd=A=>{this.implementation.onAdd&&this.implementation.onAdd(A,A.painter.context.gl)},this.onRemove=A=>{this.implementation.onRemove&&this.implementation.onRemove(A,A.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}const Re={circle:class extends bo{constructor(o){super(o,Yl)}createBucket(o){return new Yi(o)}queryRadius(o){const n=o;return Jl("circle-radius",this,n)+Jl("circle-stroke-width",this,n)+NA(this.paint.get("circle-translate"))}queryIntersectsFeature(o,n,A,f,y,C,I,D){const H=sl(o,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),C.angle,I),X=this.paint.get("circle-radius").evaluate(n,A)+this.paint.get("circle-stroke-width").evaluate(n,A),re=this.paint.get("circle-pitch-alignment")==="map",le=re?H:function(Ce,Fe){return Ce.map($e=>Ec($e,Fe))}(H,D),ve=re?X*I:X;for(const Ce of f)for(const Fe of Ce){const $e=re?Fe:Ec(Fe,D);let Ze=ve;const Et=Cc([],[Fe.x,Fe.y,0,1],D);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Ze*=Et[3]/C.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Ze*=C.cameraToCenterDistance/Et[3]),lh(le,$e,Ze))return!0}return!1}},heatmap:class extends bo{constructor(o){super(o,El),this._updateColorRamp()}createBucket(o){return new Ia(o)}_handleSpecialPaintPropertyUpdate(o){o==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=jA({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}},hillshade:class extends bo{constructor(o){super(o,hh)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}},fill:class extends bo{constructor(o){super(o,fd)}recalculate(o,n){super.recalculate(o,n);const A=this.paint._values["fill-outline-color"];A.value.kind==="constant"&&A.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(o){return new nf(o)}queryRadius(){return NA(this.paint.get("fill-translate"))}queryIntersectsFeature(o,n,A,f,y,C,I){return Fu(sl(o,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),C.angle,I),f)}isTileClipped(){return!0}},"fill-extrusion":class extends bo{constructor(o){super(o,yd)}createBucket(o){return new Af(o)}queryRadius(){return NA(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(o,n,A,f,y,C,I,D){const H=sl(o,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),C.angle,I),X=this.paint.get("fill-extrusion-height").evaluate(n,A),re=this.paint.get("fill-extrusion-base").evaluate(n,A),le=function(Ce,Fe,$e,Ze){const Et=[];for(const Kt of Ce){const xt=[Kt.x,Kt.y,0,1];Cc(xt,xt,Fe),Et.push(new ge(xt[0]/xt[3],xt[1]/xt[3]))}return Et}(H,D),ve=function(Ce,Fe,$e,Ze){const Et=[],Kt=[],xt=Ze[8]*Fe,Dt=Ze[9]*Fe,or=Ze[10]*Fe,ar=Ze[11]*Fe,Yr=Ze[8]*$e,on=Ze[9]*$e,Wr=Ze[10]*$e,Mr=Ze[11]*$e;for(const Lr of Ce){const Xr=[],Or=[];for(const wr of Lr){const _n=wr.x,fn=wr.y,qn=Ze[0]*_n+Ze[4]*fn+Ze[12],$i=Ze[1]*_n+Ze[5]*fn+Ze[13],ls=Ze[2]*_n+Ze[6]*fn+Ze[14],ea=Ze[3]*_n+Ze[7]*fn+Ze[15],zA=ls+or,Ha=ea+ar,Hs=qn+Yr,pa=$i+on,za=ls+Wr,ho=ea+Mr,Vo=new ge((qn+xt)/Ha,($i+Dt)/Ha);Vo.z=zA/Ha,Xr.push(Vo);const zs=new ge(Hs/ho,pa/ho);zs.z=za/ho,Or.push(zs)}Et.push(Xr),Kt.push(Or)}return[Et,Kt]}(f,re,X,D);return function(Ce,Fe,$e){let Ze=1/0;Fu($e,Fe)&&(Ze=vd($e,Fe[0]));for(let Et=0;Et<Fe.length;Et++){const Kt=Fe[Et],xt=Ce[Et];for(let Dt=0;Dt<Kt.length-1;Dt++){const or=Kt[Dt],ar=[or,Kt[Dt+1],xt[Dt+1],xt[Dt],or];qc($e,ar)&&(Ze=Math.min(Ze,vd($e,ar)))}}return Ze!==1/0&&Ze}(ve[0],ve[1],le)}},line:class extends bo{constructor(o){super(o,Tl),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(o){o==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof qs,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(o,n){super.recalculate(o,n),this.paint._values["line-floorwidth"]=Ul.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,o)}createBucket(o){return new Il(o)}queryRadius(o){const n=o,A=ou(Jl("line-width",this,n),Jl("line-gap-width",this,n)),f=Jl("line-offset",this,n);return A/2+Math.abs(f)+NA(this.paint.get("line-translate"))}queryIntersectsFeature(o,n,A,f,y,C,I){const D=sl(o,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),C.angle,I),H=I/2*ou(this.paint.get("line-width").evaluate(n,A),this.paint.get("line-gap-width").evaluate(n,A)),X=this.paint.get("line-offset").evaluate(n,A);return X&&(f=function(re,le){const ve=[];for(let Ce=0;Ce<re.length;Ce++){const Fe=re[Ce],$e=[];for(let Ze=0;Ze<Fe.length;Ze++){const Et=Fe[Ze-1],Kt=Fe[Ze],xt=Fe[Ze+1],Dt=Ze===0?new ge(0,0):Kt.sub(Et)._unit()._perp(),or=Ze===Fe.length-1?new ge(0,0):xt.sub(Kt)._unit()._perp(),ar=Dt._add(or)._unit(),Yr=ar.x*or.x+ar.y*or.y;Yr!==0&&ar._mult(1/Yr),$e.push(ar._mult(le)._add(Kt))}ve.push($e)}return ve}(f,X*I)),function(re,le,ve){for(let Ce=0;Ce<le.length;Ce++){const Fe=le[Ce];if(re.length>=3){for(let $e=0;$e<Fe.length;$e++)if(xl(re,Fe[$e]))return!0}if(Wc(re,Fe,ve))return!0}return!1}(D,f,H)}isTileClipped(){return!0}},symbol:U,background:class extends bo{constructor(o){super(o,V)}},raster:class extends bo{constructor(o){super(o,te)}}};class Me{constructor(n){this._callback=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const yt=63710088e-1;class mt{constructor(n,A){if(isNaN(n)||isNaN(A))throw new Error(`Invalid LngLat object: (${n}, ${A})`);if(this.lng=+n,this.lat=+A,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new mt(x(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const A=Math.PI/180,f=this.lat*A,y=n.lat*A,C=Math.sin(f)*Math.sin(y)+Math.cos(f)*Math.cos(y)*Math.cos((n.lng-this.lng)*A);return yt*Math.acos(Math.min(C,1))}toBounds(n=0){const A=360*n/40075017,f=A/Math.cos(Math.PI/180*this.lat);return new Tt(new mt(this.lng-f,this.lat-A),new mt(this.lng+f,this.lat+A))}static convert(n){if(n instanceof mt)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new mt(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new mt(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class Tt{constructor(n,A){n&&(A?this.setSouthWest(n).setNorthEast(A):n.length===4?this.setSouthWest([n[0],n[1]]).setNorthEast([n[2],n[3]]):this.setSouthWest(n[0]).setNorthEast(n[1]))}setNorthEast(n){return this._ne=n instanceof mt?new mt(n.lng,n.lat):mt.convert(n),this}setSouthWest(n){return this._sw=n instanceof mt?new mt(n.lng,n.lat):mt.convert(n),this}extend(n){const A=this._sw,f=this._ne;let y,C;if(n instanceof mt)y=n,C=n;else{if(!(n instanceof Tt))return Array.isArray(n)?n.length===4||n.every(Array.isArray)?this.extend(Tt.convert(n)):this.extend(mt.convert(n)):this;if(y=n._sw,C=n._ne,!y||!C)return this}return A||f?(A.lng=Math.min(y.lng,A.lng),A.lat=Math.min(y.lat,A.lat),f.lng=Math.max(C.lng,f.lng),f.lat=Math.max(C.lat,f.lat)):(this._sw=new mt(y.lng,y.lat),this._ne=new mt(C.lng,C.lat)),this}getCenter(){return new mt((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new mt(this.getWest(),this.getNorth())}getSouthEast(){return new mt(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(n){const{lng:A,lat:f}=mt.convert(n);let y=this._sw.lng<=A&&A<=this._ne.lng;return this._sw.lng>this._ne.lng&&(y=this._sw.lng>=A&&A>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&y}static convert(n){return n instanceof Tt?n:n&&new Tt(n)}}const tr=2*Math.PI*yt;function an(o){return tr*Math.cos(o*Math.PI/180)}function kr(o){return(180+o)/360}function Jr(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function Xn(o,n){return o/an(n)}function gn(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}class cn{constructor(n,A,f=0){this.x=+n,this.y=+A,this.z=+f}static fromLngLat(n,A=0){const f=mt.convert(n);return new cn(kr(f.lng),Jr(f.lat),Xn(A,f.lat))}toLngLat(){return new mt(360*this.x-180,gn(this.y))}toAltitude(){return this.z*an(gn(this.y))}meterInMercatorCoordinateUnits(){return 1/tr*(n=gn(this.y),1/Math.cos(n*Math.PI/180));var n}}function Fi(o,n,A){var f=2*Math.PI*6378137/256/Math.pow(2,A);return[o*f-2*Math.PI*6378137/2,n*f-2*Math.PI*6378137/2]}class Zn{constructor(n,A,f){if(n<0||n>25||f<0||f>=Math.pow(2,n)||A<0||A>=Math.pow(2,n))throw new Error(`x=${A}, y=${f}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=A,this.y=f,this.key=ii(0,n,n,A,f)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,A,f){const y=(I=this.y,D=this.z,H=Fi(256*(C=this.x),256*(I=Math.pow(2,D)-I-1),D),X=Fi(256*(C+1),256*(I+1),D),H[0]+","+H[1]+","+X[0]+","+X[1]);var C,I,D,H,X;const re=function(le,ve,Ce){let Fe,$e="";for(let Ze=le;Ze>0;Ze--)Fe=1<<Ze-1,$e+=(ve&Fe?1:0)+(Ce&Fe?2:0);return $e}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(f==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,A>1?"@2x":"").replace(/{quadkey}/g,re).replace(/{bbox-epsg-3857}/g,y)}isChildOf(n){const A=this.z-n.z;return A>0&&n.x===this.x>>A&&n.y===this.y>>A}getTilePoint(n){const A=Math.pow(2,this.z);return new ge((n.x*A-this.x)*Ci,(n.y*A-this.y)*Ci)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Rn{constructor(n,A){this.wrap=n,this.canonical=A,this.key=ii(n,A.z,A.z,A.x,A.y)}}class zr{constructor(n,A,f,y,C){if(n<f)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${f}`);this.overscaledZ=n,this.wrap=A,this.canonical=new Zn(f,+y,+C),this.key=ii(A,n,f,y,C)}clone(){return new zr(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const A=this.canonical.z-n;return n>this.canonical.z?new zr(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new zr(n,this.wrap,n,this.canonical.x>>A,this.canonical.y>>A)}calculateScaledKey(n,A){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const f=this.canonical.z-n;return n>this.canonical.z?ii(this.wrap*+A,n,this.canonical.z,this.canonical.x,this.canonical.y):ii(this.wrap*+A,n,n,this.canonical.x>>f,this.canonical.y>>f)}isChildOf(n){if(n.wrap!==this.wrap)return!1;const A=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>A&&n.canonical.y===this.canonical.y>>A}children(n){if(this.overscaledZ>=n)return[new zr(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const A=this.canonical.z+1,f=2*this.canonical.x,y=2*this.canonical.y;return[new zr(A,this.wrap,A,f,y),new zr(A,this.wrap,A,f+1,y),new zr(A,this.wrap,A,f,y+1),new zr(A,this.wrap,A,f+1,y+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new zr(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new zr(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Rn(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new cn(n.x-this.wrap,n.y))}}function ii(o,n,A,f,y){(o*=2)<0&&(o=-1*o-1);const C=1<<A;return(C*C*o+C*y+f).toString(36)+A.toString(36)+n.toString(36)}Pr("CanonicalTileID",Zn),Pr("OverscaledTileID",zr,{omit:["posMatrix"]});class yi{constructor(n,A,f){if(this.uid=n,A.height!==A.width)throw new RangeError("DEM tiles must be square");if(f&&f!=="mapbox"&&f!=="terrarium")return void Z(`"${f}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=A.height;const y=this.dim=A.height-2;this.data=new Uint32Array(A.data.buffer),this.encoding=f||"mapbox";for(let C=0;C<y;C++)this.data[this._idx(-1,C)]=this.data[this._idx(0,C)],this.data[this._idx(y,C)]=this.data[this._idx(y-1,C)],this.data[this._idx(C,-1)]=this.data[this._idx(C,0)],this.data[this._idx(C,y)]=this.data[this._idx(C,y-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(y,-1)]=this.data[this._idx(y-1,0)],this.data[this._idx(-1,y)]=this.data[this._idx(0,y-1)],this.data[this._idx(y,y)]=this.data[this._idx(y-1,y-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let C=0;C<y;C++)for(let I=0;I<y;I++){const D=this.get(C,I);D>this.max&&(this.max=D),D<this.min&&(this.min=D)}}get(n,A){const f=new Uint8Array(this.data.buffer),y=4*this._idx(n,A);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(f[y],f[y+1],f[y+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(n,A){if(n<-1||n>=this.dim+1||A<-1||A>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(A+1)*this.stride+(n+1)}_unpackMapbox(n,A,f){return(256*n*256+256*A+f)/10-1e4}_unpackTerrarium(n,A,f){return 256*n+A+f/256-32768}getPixels(){return new Ta({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,A,f){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let y=A*this.dim,C=A*this.dim+this.dim,I=f*this.dim,D=f*this.dim+this.dim;switch(A){case-1:y=C-1;break;case 1:C=y+1}switch(f){case-1:I=D-1;break;case 1:D=I+1}const H=-A*this.dim,X=-f*this.dim;for(let re=I;re<D;re++)for(let le=y;le<C;le++)this.data[this._idx(le,re)]=n.data[this._idx(le+H,re+X)]}}Pr("DEMData",yi);class On{constructor(n){this._stringToNumber={},this._numberToString=[];for(let A=0;A<n.length;A++){const f=n[A];this._stringToNumber[f]=A,this._numberToString[A]=f}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class Ps{constructor(n,A,f,y,C){this.type="Feature",this._vectorTileFeature=n,n._z=A,n._x=f,n._y=y,this.properties=n.properties,this.id=C}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={geometry:this.geometry};for(const A in this)A!=="_geometry"&&A!=="_vectorTileFeature"&&(n[A]=this[A]);return n}}class uo{constructor(n,A){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new Oo(Ci,16,0),this.grid3D=new Oo(Ci,16,0),this.featureIndexArray=new jn,this.promoteId=A}insert(n,A,f,y,C,I){const D=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(f,y,C);const H=I?this.grid3D:this.grid;for(let X=0;X<A.length;X++){const re=A[X],le=[1/0,1/0,-1/0,-1/0];for(let ve=0;ve<re.length;ve++){const Ce=re[ve];le[0]=Math.min(le[0],Ce.x),le[1]=Math.min(le[1],Ce.y),le[2]=Math.max(le[2],Ce.x),le[3]=Math.max(le[3],Ce.y)}le[0]<Ci&&le[1]<Ci&&le[2]>=0&&le[3]>=0&&H.insert(D,le[0],le[1],le[2],le[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Fl.VectorTile(new Ic(this.rawTileData)).layers,this.sourceLayerCoder=new On(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,A,f,y){this.loadVTLayers();const C=n.params||{},I=Ci/n.tileSize/n.scale,D=ns(C.filter),H=n.queryGeometry,X=n.queryPadding*I,re=Ni(H),le=this.grid.query(re.minX-X,re.minY-X,re.maxX+X,re.maxY+X),ve=Ni(n.cameraQueryGeometry),Ce=this.grid3D.query(ve.minX-X,ve.minY-X,ve.maxX+X,ve.maxY+X,(Ze,Et,Kt,xt)=>function(Dt,or,ar,Yr,on){for(const Mr of Dt)if(or<=Mr.x&&ar<=Mr.y&&Yr>=Mr.x&&on>=Mr.y)return!0;const Wr=[new ge(or,ar),new ge(or,on),new ge(Yr,on),new ge(Yr,ar)];if(Dt.length>2){for(const Mr of Wr)if(xl(Dt,Mr))return!0}for(let Mr=0;Mr<Dt.length-1;Mr++)if(Bl(Dt[Mr],Dt[Mr+1],Wr))return!0;return!1}(n.cameraQueryGeometry,Ze-X,Et-X,Kt+X,xt+X));for(const Ze of Ce)le.push(Ze);le.sort(Ua);const Fe={};let $e;for(let Ze=0;Ze<le.length;Ze++){const Et=le[Ze];if(Et===$e)continue;$e=Et;const Kt=this.featureIndexArray.get(Et);let xt=null;this.loadMatchingFeature(Fe,Kt.bucketIndex,Kt.sourceLayerIndex,Kt.featureIndex,D,C.layers,C.availableImages,A,f,y,(Dt,or,ar)=>(xt||(xt=lo(Dt)),or.queryIntersectsFeature(H,Dt,ar,xt,this.z,n.transform,I,n.pixelPosMatrix)))}return Fe}loadMatchingFeature(n,A,f,y,C,I,D,H,X,re,le){const ve=this.bucketLayerIDs[A];if(I&&!function(Ze,Et){for(let Kt=0;Kt<Ze.length;Kt++)if(Et.indexOf(Ze[Kt])>=0)return!0;return!1}(I,ve))return;const Ce=this.sourceLayerCoder.decode(f),Fe=this.vtLayers[Ce].feature(y);if(C.needGeometry){const Ze=Bo(Fe,!0);if(!C.filter(new Ui(this.tileID.overscaledZ),Ze,this.tileID.canonical))return}else if(!C.filter(new Ui(this.tileID.overscaledZ),Fe))return;const $e=this.getId(Fe,Ce);for(let Ze=0;Ze<ve.length;Ze++){const Et=ve[Ze];if(I&&I.indexOf(Et)<0)continue;const Kt=H[Et];if(!Kt)continue;let xt={};$e&&re&&(xt=re.getState(Kt.sourceLayer||"_geojsonTileLayer",$e));const Dt=k({},X[Et]);Dt.paint=Eo(Dt.paint,Kt.paint,Fe,xt,D),Dt.layout=Eo(Dt.layout,Kt.layout,Fe,xt,D);const or=!le||le(Fe,Kt,xt);if(!or)continue;const ar=new Ps(Fe,this.z,this.x,this.y,$e);ar.layer=Dt;let Yr=n[Et];Yr===void 0&&(Yr=n[Et]=[]),Yr.push({featureIndex:y,feature:ar,intersectionZ:or})}}lookupSymbolFeatures(n,A,f,y,C,I,D,H){const X={};this.loadVTLayers();const re=ns(C);for(const le of n)this.loadMatchingFeature(X,f,y,le,re,I,D,H,A);return X}hasLayer(n){for(const A of this.bucketLayerIDs)for(const f of A)if(n===f)return!0;return!1}getId(n,A){let f=n.id;return this.promoteId&&(f=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[A]],typeof f=="boolean"&&(f=Number(f))),f}}function Eo(o,n,A,f,y){return M(o,(C,I)=>{const D=n instanceof dA?n.get(I):null;return D&&D.evaluate?D.evaluate(A,f,y):D})}function Ni(o){let n=1/0,A=1/0,f=-1/0,y=-1/0;for(const C of o)n=Math.min(n,C.x),A=Math.min(A,C.y),f=Math.max(f,C.x),y=Math.max(y,C.y);return{minX:n,minY:A,maxX:f,maxY:y}}function Ua(o,n){return n-o}var cl;Pr("FeatureIndex",uo,{omit:["rawTileData","sourceLayerCoder"]}),a.PerformanceMarkers=void 0,(cl=a.PerformanceMarkers||(a.PerformanceMarkers={})).create="create",cl.load="load",cl.fullLoad="fullLoad";let La=null,da=[];const Pl=1e3/30,ul={mark(o){performance.mark(o)},frame(o){const n=o;La!=null&&da.push(n-La),La=n},clearMetrics(){La=null,da=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const o in a.PerformanceMarkers)performance.clearMarks(a.PerformanceMarkers[o])},getPerformanceMetrics(){performance.measure("loadTime",a.PerformanceMarkers.create,a.PerformanceMarkers.load),performance.measure("fullLoadTime",a.PerformanceMarkers.create,a.PerformanceMarkers.fullLoad);const o=performance.getEntriesByName("loadTime")[0].duration,n=performance.getEntriesByName("fullLoadTime")[0].duration,A=da.length,f=1/(da.reduce((C,I)=>C+I,0)/A/1e3),y=da.filter(C=>C>Pl).reduce((C,I)=>C+(I-Pl)/Pl,0);return{loadTime:o,fullLoadTime:n,fps:f,percentDroppedFrames:y/(A+y)*100}}};a.AJAXError=Nt,a.ARRAY_TYPE=$s,a.Actor=class{constructor(o,n,A){this.target=o,this.parent=n,this.mapId=A,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},R(["receive","process"],this),this.invoker=new Me(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=fe()?o:window}send(o,n,A,f,y=!1){const C=Math.round(1e18*Math.random()).toString(36).substring(0,10);A&&(this.callbacks[C]=A);const I=Be(this.globalScope)?void 0:[];return this.target.postMessage({id:C,type:o,hasCallback:!!A,targetMapId:f,mustQueue:y,sourceMapId:this.mapId,data:Ai(n,I)},I),{cancel:()=>{A&&delete this.callbacks[C],this.target.postMessage({id:C,type:"<cancel>",targetMapId:f,sourceMapId:this.mapId})}}}receive(o){const n=o.data,A=n.id;if(A&&(!n.targetMapId||this.mapId===n.targetMapId))if(n.type==="<cancel>"){delete this.tasks[A];const f=this.cancelCallbacks[A];delete this.cancelCallbacks[A],f&&f()}else fe()||n.mustQueue?(this.tasks[A]=n,this.taskQueue.push(A),this.invoker.trigger()):this.processTask(A,n)}process(){if(!this.taskQueue.length)return;const o=this.taskQueue.shift(),n=this.tasks[o];delete this.tasks[o],this.taskQueue.length&&this.invoker.trigger(),n&&this.processTask(o,n)}processTask(o,n){if(n.type==="<response>"){const A=this.callbacks[o];delete this.callbacks[o],A&&(n.error?A(Bi(n.error)):A(null,Bi(n.data)))}else{let A=!1;const f=Be(this.globalScope)?void 0:[],y=n.hasCallback?(D,H)=>{A=!0,delete this.cancelCallbacks[o],this.target.postMessage({id:o,type:"<response>",sourceMapId:this.mapId,error:D?Ai(D):null,data:Ai(H,f)},f)}:D=>{A=!0};let C=null;const I=Bi(n.data);if(this.parent[n.type])C=this.parent[n.type](n.sourceMapId,I,y);else if(this.parent.getWorkerSource){const D=n.type.split(".");C=this.parent.getWorkerSource(n.sourceMapId,D[0],I.source)[D[1]](I,y)}else y(new Error(`Could not find function ${n.type}`));!A&&C&&C.cancel&&(this.cancelCallbacks[o]=C.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},a.AlphaImage=rc,a.CanonicalTileID=Zn,a.CollisionBoxArray=Xt,a.CollisionCircleLayoutArray=class extends ie{},a.Color=Le,a.DEMData=yi,a.DataConstantProperty=sn,a.DictionaryCoder=On,a.EXTENT=Ci,a.ErrorEvent=Zr,a.EvaluationParameters=Ui,a.Event=xr,a.Evented=pn,a.FeatureIndex=uo,a.FillBucket=nf,a.FillExtrusionBucket=Af,a.GeoJSONFeature=Ps,a.ImageAtlas=Tc,a.ImagePosition=rn,a.LineBucket=Il,a.LineStripIndexArray=class extends We{},a.LngLat=mt,a.LngLatBounds=Tt,a.MercatorCoordinate=cn,a.ONE_EM=Os,a.OverscaledTileID=zr,a.PerformanceUtils=ul,a.PosArray=b,a.Properties=as,a.QuadTriangleArray=class extends be{},a.RGBAImage=Ta,a.RasterBoundsArray=class extends g{},a.RequestPerformance=class{constructor(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let o=performance.getEntriesByName(this._marks.measure);return o.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),o=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),o}},a.ResourceType=ht,a.SegmentVector=Je,a.SymbolBucket=pu,a.Transitionable=DA,a.TriangleIndexArray=Ft,a.Uniform1f=li,a.Uniform1i=class extends zn{constructor(o,n){super(o,n),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},a.Uniform2f=class extends zn{constructor(o,n){super(o,n),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},a.Uniform3f=class extends zn{constructor(o,n){super(o,n),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},a.Uniform4f=ci,a.UniformColor=Un,a.UniformMatrix4f=class extends zn{constructor(o,n){super(o,n),this.current=Is}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let n=1;n<16;n++)if(o[n]!==this.current[n]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},a.UnwrappedTileID=Rn,a.ValidationError=nt,a.ZoomHistory=Zi,a.add=function(o,n,A){return o[0]=n[0]+A[0],o[1]=n[1]+A[1],o[2]=n[2]+A[2],o},a.addDynamicAttributes=wf,a.asyncAll=function(o,n,A){if(!o.length)return A(null,[]);let f=o.length;const y=new Array(o.length);let C=null;o.forEach((I,D)=>{n(I,(H,X)=>{H&&(C=H),y[D]=X,--f==0&&A(C,y)})})},a.bezier=p,a.bindAll=R,a.cacheEntryPossiblyAdded=function(o){Ke++,Ke>Se&&(o.getActor().send("enforceCacheSizeLimit",ne),Ke=0)},a.clamp=w,a.clearTileCache=function(o){const n=caches.delete(tt);o&&n.catch(o).then(()=>o())},a.clipLine=zo,a.clone=function(o){var n=new $s(16);return n[0]=o[0],n[1]=o[1],n[2]=o[2],n[3]=o[3],n[4]=o[4],n[5]=o[5],n[6]=o[6],n[7]=o[7],n[8]=o[8],n[9]=o[9],n[10]=o[10],n[11]=o[11],n[12]=o[12],n[13]=o[13],n[14]=o[14],n[15]=o[15],n},a.clone$1=G,a.clone$2=function(o){var n=new $s(3);return n[0]=o[0],n[1]=o[1],n[2]=o[2],n},a.collisionCircleLayout=cf,a.config=Te,a.copy=function(o,n){return o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[4]=n[4],o[5]=n[5],o[6]=n[6],o[7]=n[7],o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15],o},a.create=function(){var o=new $s(16);return $s!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},a.create$1=$l,a.createExpression=mi,a.createFilter=ns,a.createLayout=ds,a.createStyleLayer=function(o){return o.type==="custom"?new we(o):new Re[o.type](o)},a.cross=function(o,n,A){var f=n[0],y=n[1],C=n[2],I=A[0],D=A[1],H=A[2];return o[0]=y*H-C*D,o[1]=C*I-f*H,o[2]=f*D-y*I,o},a.dot=function(o,n){return o[0]*n[0]+o[1]*n[1]+o[2]*n[2]},a.dot$1=function(o,n){return o[0]*n[0]+o[1]*n[1]+o[2]*n[2]+o[3]*n[3]},a.ease=E,a.emitValidationErrors=ao,a.enforceCacheSizeLimit=function(o){ke(),Oe&&Oe.then(n=>{n.keys().then(A=>{for(let f=0;f<A.length-o;f++)n.delete(A[f])})})},a.equals=function(o,n){var A=o[0],f=o[1],y=o[2],C=o[3],I=o[4],D=o[5],H=o[6],X=o[7],re=o[8],le=o[9],ve=o[10],Ce=o[11],Fe=o[12],$e=o[13],Ze=o[14],Et=o[15],Kt=n[0],xt=n[1],Dt=n[2],or=n[3],ar=n[4],Yr=n[5],on=n[6],Wr=n[7],Mr=n[8],Lr=n[9],Xr=n[10],Or=n[11],wr=n[12],_n=n[13],fn=n[14],qn=n[15];return Math.abs(A-Kt)<=fa*Math.max(1,Math.abs(A),Math.abs(Kt))&&Math.abs(f-xt)<=fa*Math.max(1,Math.abs(f),Math.abs(xt))&&Math.abs(y-Dt)<=fa*Math.max(1,Math.abs(y),Math.abs(Dt))&&Math.abs(C-or)<=fa*Math.max(1,Math.abs(C),Math.abs(or))&&Math.abs(I-ar)<=fa*Math.max(1,Math.abs(I),Math.abs(ar))&&Math.abs(D-Yr)<=fa*Math.max(1,Math.abs(D),Math.abs(Yr))&&Math.abs(H-on)<=fa*Math.max(1,Math.abs(H),Math.abs(on))&&Math.abs(X-Wr)<=fa*Math.max(1,Math.abs(X),Math.abs(Wr))&&Math.abs(re-Mr)<=fa*Math.max(1,Math.abs(re),Math.abs(Mr))&&Math.abs(le-Lr)<=fa*Math.max(1,Math.abs(le),Math.abs(Lr))&&Math.abs(ve-Xr)<=fa*Math.max(1,Math.abs(ve),Math.abs(Xr))&&Math.abs(Ce-Or)<=fa*Math.max(1,Math.abs(Ce),Math.abs(Or))&&Math.abs(Fe-wr)<=fa*Math.max(1,Math.abs(Fe),Math.abs(wr))&&Math.abs($e-_n)<=fa*Math.max(1,Math.abs($e),Math.abs(_n))&&Math.abs(Ze-fn)<=fa*Math.max(1,Math.abs(Ze),Math.abs(fn))&&Math.abs(Et-qn)<=fa*Math.max(1,Math.abs(Et),Math.abs(qn))},a.evaluateSizeForFeature=function(o,{uSize:n,uSizeT:A},{lowerSize:f,upperSize:y}){return o.kind==="source"?f/Al:o.kind==="composite"?ni(f/Al,y/Al,A):n},a.evaluateSizeForZoom=function(o,n){let A=0,f=0;if(o.kind==="constant")f=o.layoutSize;else if(o.kind!=="source"){const{interpolationType:y,minZoom:C,maxZoom:I}=o,D=y?w(Cs.interpolationFactor(y,n,C,I),0,1):0;o.kind==="camera"?f=ni(o.minSize,o.maxSize,D):A=D}return{uSizeT:A,uSize:f}},a.evaluateVariableOffset=Rd,a.evented=tl,a.exported=Pe,a.exported$1=at,a.extend=k,a.filterObject=O,a.fromRotation=function(o,n){var A=Math.sin(n),f=Math.cos(n);return o[0]=f,o[1]=A,o[2]=0,o[3]=-A,o[4]=f,o[5]=0,o[6]=0,o[7]=0,o[8]=1,o},a.fromScaling=function(o,n){return o[0]=n[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=n[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=n[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},a.getAnchorAlignment=Fh,a.getAnchorJustification=Uh,a.getArrayBuffer=gr,a.getImage=vr,a.getJSON=function(o,n){return ze(k(o,{type:"json"}),n)},a.getOverlapMode=T,a.getRTLTextPluginStatus=fA,a.getReferrer=dr,a.getVideo=function(o,n){const A=window.document.createElement("video");A.muted=!0,A.onloadstart=function(){n(null,A)};for(let f=0;f<o.length;f++){const y=window.document.createElement("source");sr(o[f])||(A.crossOrigin="Anonymous"),y.src=o[f],A.appendChild(y)}return{cancel:()=>{}}},a.identity=Co,a.invert=function(o,n){var A=n[0],f=n[1],y=n[2],C=n[3],I=n[4],D=n[5],H=n[6],X=n[7],re=n[8],le=n[9],ve=n[10],Ce=n[11],Fe=n[12],$e=n[13],Ze=n[14],Et=n[15],Kt=A*D-f*I,xt=A*H-y*I,Dt=A*X-C*I,or=f*H-y*D,ar=f*X-C*D,Yr=y*X-C*H,on=re*$e-le*Fe,Wr=re*Ze-ve*Fe,Mr=re*Et-Ce*Fe,Lr=le*Ze-ve*$e,Xr=le*Et-Ce*$e,Or=ve*Et-Ce*Ze,wr=Kt*Or-xt*Xr+Dt*Lr+or*Mr-ar*Wr+Yr*on;return wr?(o[0]=(D*Or-H*Xr+X*Lr)*(wr=1/wr),o[1]=(y*Xr-f*Or-C*Lr)*wr,o[2]=($e*Yr-Ze*ar+Et*or)*wr,o[3]=(ve*ar-le*Yr-Ce*or)*wr,o[4]=(H*Mr-I*Or-X*Wr)*wr,o[5]=(A*Or-y*Mr+C*Wr)*wr,o[6]=(Ze*Dt-Fe*Yr-Et*xt)*wr,o[7]=(re*Yr-ve*Dt+Ce*xt)*wr,o[8]=(I*Xr-D*Mr+X*on)*wr,o[9]=(f*Mr-A*Xr-C*on)*wr,o[10]=(Fe*ar-$e*Dt+Et*Kt)*wr,o[11]=(le*Dt-re*ar-Ce*Kt)*wr,o[12]=(D*Wr-I*Lr-H*on)*wr,o[13]=(A*Lr-f*Wr+y*on)*wr,o[14]=($e*xt-Fe*or-Ze*Kt)*wr,o[15]=(re*or-le*xt+ve*Kt)*wr,o):null},a.isImageBitmap=me,a.isSafari=Be,a.isWorker=fe,a.keysDifference=function(o,n){const A=[];for(const f in o)f in n||A.push(f);return A},a.lazyLoadRTLTextPlugin=function(){Fa.isLoading()||Fa.isLoaded()||fA()!=="deferred"||kA()},a.makeRequest=ze,a.mapObject=M,a.mercatorXfromLng=kr,a.mercatorYfromLat=Jr,a.mercatorZfromAltitude=Xn,a.mul=ch,a.mul$1=function(o,n,A){return o[0]=n[0]*A[0],o[1]=n[1]*A[1],o[2]=n[2]*A[2],o[3]=n[3]*A[3],o},a.multiply=Su,a.nextPowerOfTwo=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},a.normalize=function(o,n){var A=n[0],f=n[1],y=n[2],C=A*A+f*f+y*y;return C>0&&(C=1/Math.sqrt(C)),o[0]=n[0]*C,o[1]=n[1]*C,o[2]=n[2]*C,o},a.number=ni,a.ortho=function(o,n,A,f,y,C,I){var D=1/(n-A),H=1/(f-y),X=1/(C-I);return o[0]=-2*D,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*H,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*X,o[11]=0,o[12]=(n+A)*D,o[13]=(y+f)*H,o[14]=(I+C)*X,o[15]=1,o},a.parseCacheControl=_e,a.parseGlyphPbf=function(o){return new Ic(o).readFields(df,[])},a.pbf=Ic,a.performSymbolLayout=function(o){o.bucket.createArrays(),o.bucket.tilePixelRatio=Ci/(512*o.bucket.overscaling),o.bucket.compareText={},o.bucket.iconsNeedLinear=!1;const n=o.bucket.layers[0].layout,A=o.bucket.layers[0]._unevaluatedLayout._values,f={layoutIconSize:A["icon-size"].possiblyEvaluate(new Ui(o.bucket.zoom+1),o.canonical),layoutTextSize:A["text-size"].possiblyEvaluate(new Ui(o.bucket.zoom+1),o.canonical),textMaxSize:A["text-size"].possiblyEvaluate(new Ui(18))};if(o.bucket.textSizeData.kind==="composite"){const{minZoom:H,maxZoom:X}=o.bucket.textSizeData;f.compositeTextSizes=[A["text-size"].possiblyEvaluate(new Ui(H),o.canonical),A["text-size"].possiblyEvaluate(new Ui(X),o.canonical)]}if(o.bucket.iconSizeData.kind==="composite"){const{minZoom:H,maxZoom:X}=o.bucket.iconSizeData;f.compositeIconSizes=[A["icon-size"].possiblyEvaluate(new Ui(H),o.canonical),A["icon-size"].possiblyEvaluate(new Ui(X),o.canonical)]}const y=n.get("text-line-height")*Os,C=n.get("text-rotation-alignment")!=="viewport"&&n.get("symbol-placement")!=="point",I=n.get("text-keep-upright"),D=n.get("text-size");for(const H of o.bucket.features){const X=n.get("text-font").evaluate(H,{},o.canonical).join(","),re=D.evaluate(H,{},o.canonical),le=f.layoutTextSize.evaluate(H,{},o.canonical),ve=f.layoutIconSize.evaluate(H,{},o.canonical),Ce={horizontal:{},vertical:void 0},Fe=H.text;let $e,Ze=[0,0];if(Fe){const xt=Fe.toString(),Dt=n.get("text-letter-spacing").evaluate(H,{},o.canonical)*Os,or=LA(xt)?Dt:0,ar=n.get("text-anchor").evaluate(H,{},o.canonical),Yr=n.get("text-variable-anchor");if(!Yr){const Xr=n.get("text-radial-offset").evaluate(H,{},o.canonical);Ze=Xr?Rd(ar,[Xr*Os,Th]):n.get("text-offset").evaluate(H,{},o.canonical).map(Or=>Or*Os)}let on=C?"center":n.get("text-justify").evaluate(H,{},o.canonical);const Wr=n.get("symbol-placement"),Mr=Wr==="point"?n.get("text-max-width").evaluate(H,{},o.canonical)*Os:0,Lr=()=>{o.bucket.allowVerticalPlacement&&ja(xt)&&(Ce.vertical=Ei(Fe,o.glyphMap,o.glyphPositions,o.imagePositions,X,Mr,y,ar,"left",or,Ze,a.WritingMode.vertical,!0,Wr,le,re))};if(!C&&Yr){const Xr=on==="auto"?Yr.map(wr=>Uh(wr)):[on];let Or=!1;for(let wr=0;wr<Xr.length;wr++){const _n=Xr[wr];if(!Ce.horizontal[_n])if(Or)Ce.horizontal[_n]=Ce.horizontal[0];else{const fn=Ei(Fe,o.glyphMap,o.glyphPositions,o.imagePositions,X,Mr,y,"center",_n,or,Ze,a.WritingMode.horizontal,!1,Wr,le,re);fn&&(Ce.horizontal[_n]=fn,Or=fn.positionedLines.length===1)}}Lr()}else{on==="auto"&&(on=Uh(ar));const Xr=Ei(Fe,o.glyphMap,o.glyphPositions,o.imagePositions,X,Mr,y,ar,on,or,Ze,a.WritingMode.horizontal,!1,Wr,le,re);Xr&&(Ce.horizontal[on]=Xr),Lr(),ja(xt)&&C&&I&&(Ce.vertical=Ei(Fe,o.glyphMap,o.glyphPositions,o.imagePositions,X,Mr,y,ar,on,or,Ze,a.WritingMode.vertical,!1,Wr,le,re))}}let Et=!1;if(H.icon&&H.icon.name){const xt=o.imageMap[H.icon.name];xt&&($e=Pd(o.imagePositions[H.icon.name],n.get("icon-offset").evaluate(H,{},o.canonical),n.get("icon-anchor").evaluate(H,{},o.canonical)),Et=!!xt.sdf,o.bucket.sdfIcons===void 0?o.bucket.sdfIcons=Et:o.bucket.sdfIcons!==Et&&Z("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(xt.pixelRatio!==o.bucket.pixelRatio||n.get("icon-rotate").constantOr(1)!==0)&&(o.bucket.iconsNeedLinear=!0))}const Kt=Hd(Ce.horizontal)||Ce.vertical;o.bucket.iconsInText=!!Kt&&Kt.iconsInText,(Kt||$e)&&cm(o.bucket,H,Ce,$e,o.imageMap,f,le,ve,Ze,Et,o.canonical)}o.showCollisionBoxes&&o.bucket.generateCollisionDebugBuffers()},a.perspective=function(o,n,A,f,y){var C,I=1/Math.tan(n/2);return o[0]=I/A,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=I,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,y!=null&&y!==1/0?(o[10]=(y+f)*(C=1/(f-y)),o[14]=2*y*f*C):(o[10]=-1,o[14]=-2*f),o},a.pick=function(o,n){const A={};for(let f=0;f<n.length;f++){const y=n[f];y in o&&(A[y]=o[y])}return A},a.plugin=Fa,a.pointGeometry=ge,a.polygonIntersectsPolygon=qc,a.potpack=Ld,a.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],a.register=Pr,a.registerForPluginStateChange=function(o){return o({pluginStatus:Di,pluginURL:oo}),tl.on("pluginStateChange",o),o},a.renderColorRamp=jA,a.rotateX=function(o,n,A){var f=Math.sin(A),y=Math.cos(A),C=n[4],I=n[5],D=n[6],H=n[7],X=n[8],re=n[9],le=n[10],ve=n[11];return n!==o&&(o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o[4]=C*y+X*f,o[5]=I*y+re*f,o[6]=D*y+le*f,o[7]=H*y+ve*f,o[8]=X*y-C*f,o[9]=re*y-I*f,o[10]=le*y-D*f,o[11]=ve*y-H*f,o},a.rotateZ=function(o,n,A){var f=Math.sin(A),y=Math.cos(A),C=n[0],I=n[1],D=n[2],H=n[3],X=n[4],re=n[5],le=n[6],ve=n[7];return n!==o&&(o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o[0]=C*y+X*f,o[1]=I*y+re*f,o[2]=D*y+le*f,o[3]=H*y+ve*f,o[4]=X*y-C*f,o[5]=re*y-I*f,o[6]=le*y-D*f,o[7]=ve*y-H*f,o},a.scale=function(o,n,A){var f=A[0],y=A[1],C=A[2];return o[0]=n[0]*f,o[1]=n[1]*f,o[2]=n[2]*f,o[3]=n[3]*f,o[4]=n[4]*y,o[5]=n[5]*y,o[6]=n[6]*y,o[7]=n[7]*y,o[8]=n[8]*C,o[9]=n[9]*C,o[10]=n[10]*C,o[11]=n[11]*C,o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15],o},a.scale$1=function(o,n,A){return o[0]=n[0]*A,o[1]=n[1]*A,o[2]=n[2]*A,o},a.setCacheLimits=function(o,n){ne=o,Se=n},a.setRTLTextPlugin=function(o,n,A=!1){if(Di===Zl||Di===$A||Di===el)throw new Error("setRTLTextPlugin cannot be called multiple times.");oo=Pe.resolveURL(o),Di=Zl,Zs=n,Ra(),A||kA()},a.spec=vt,a.sphericalToCartesian=function([o,n,A]){return n+=90,n*=Math.PI/180,A*=Math.PI/180,{x:o*Math.cos(n)*Math.sin(A),y:o*Math.sin(n)*Math.sin(A),z:o*Math.cos(A)}},a.sqrLen=function(o){var n=o[0],A=o[1];return n*n+A*A},a.sub=function(o,n,A){return o[0]=n[0]-A[0],o[1]=n[1]-A[1],o[2]=n[2]-A[2],o},a.toEvaluationFeature=Bo,a.transformMat3=function(o,n,A){var f=n[0],y=n[1],C=n[2];return o[0]=f*A[0]+y*A[3]+C*A[6],o[1]=f*A[1]+y*A[4]+C*A[7],o[2]=f*A[2]+y*A[5]+C*A[8],o},a.transformMat4=Cc,a.transformMat4$1=function(o,n,A){var f=n[0],y=n[1];return o[0]=A[0]*f+A[4]*y+A[12],o[1]=A[1]*f+A[5]*y+A[13],o},a.translate=function(o,n,A){var f,y,C,I,D,H,X,re,le,ve,Ce,Fe,$e=A[0],Ze=A[1],Et=A[2];return n===o?(o[12]=n[0]*$e+n[4]*Ze+n[8]*Et+n[12],o[13]=n[1]*$e+n[5]*Ze+n[9]*Et+n[13],o[14]=n[2]*$e+n[6]*Ze+n[10]*Et+n[14],o[15]=n[3]*$e+n[7]*Ze+n[11]*Et+n[15]):(y=n[1],C=n[2],I=n[3],D=n[4],H=n[5],X=n[6],re=n[7],le=n[8],ve=n[9],Ce=n[10],Fe=n[11],o[0]=f=n[0],o[1]=y,o[2]=C,o[3]=I,o[4]=D,o[5]=H,o[6]=X,o[7]=re,o[8]=le,o[9]=ve,o[10]=Ce,o[11]=Fe,o[12]=f*$e+D*Ze+le*Et+n[12],o[13]=y*$e+H*Ze+ve*Et+n[13],o[14]=C*$e+X*Ze+Ce*Et+n[14],o[15]=I*$e+re*Ze+Fe*Et+n[15]),o},a.triggerPluginCompletionEvent=_l,a.unicodeBlockLookup=Sr,a.uniqueId=function(){return Q++},a.validateCustomStyleLayer=function(o){const n=[],A=o.id;return A===void 0&&n.push({message:`layers.${A}: missing required property "id"`}),o.render===void 0&&n.push({message:`layers.${A}: missing required method "render"`}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&n.push({message:`layers.${A}: property "renderingMode" must be either "2d" or "3d"`}),n},a.validateLight=Ro,a.validateStyle=Ea,a.vectorTile=Fl,a.warnOnce=Z,a.wrap=x}),c(["./shared"],function(a){function d(Ue){const Y=typeof Ue;if(Y==="number"||Y==="boolean"||Y==="string"||Ue==null)return JSON.stringify(Ue);if(Array.isArray(Ue)){let Le="[";for(const Xe of Ue)Le+=`${d(Xe)},`;return`${Le}]`}const Ae=Object.keys(Ue).sort();let Ee="{";for(let Le=0;Le<Ae.length;Le++)Ee+=`${JSON.stringify(Ae[Le])}:${d(Ue[Ae[Le]])},`;return`${Ee}}`}function _(Ue){let Y="";for(const Ae of a.refProperties)Y+=`/${d(Ue[Ae])}`;return Y}class p{constructor(Y){this.keyCache={},Y&&this.replace(Y)}replace(Y){this._layerConfigs={},this._layers={},this.update(Y,[])}update(Y,Ae){for(const Le of Y){this._layerConfigs[Le.id]=Le;const Xe=this._layers[Le.id]=a.createStyleLayer(Le);Xe._featureFilter=a.createFilter(Xe.filter),this.keyCache[Le.id]&&delete this.keyCache[Le.id]}for(const Le of Ae)delete this.keyCache[Le],delete this._layerConfigs[Le],delete this._layers[Le];this.familiesBySource={};const Ee=function(Le,Xe){const lt={};for(let qe=0;qe<Le.length;qe++){const ut=Xe&&Xe[Le[qe].id]||_(Le[qe]);Xe&&(Xe[Le[qe].id]=ut);let Ot=lt[ut];Ot||(Ot=lt[ut]=[]),Ot.push(Le[qe])}const Ye=[];for(const qe in lt)Ye.push(lt[qe]);return Ye}(Object.values(this._layerConfigs),this.keyCache);for(const Le of Ee){const Xe=Le.map(nr=>this._layers[nr.id]),lt=Xe[0];if(lt.visibility==="none")continue;const Ye=lt.source||"";let qe=this.familiesBySource[Ye];qe||(qe=this.familiesBySource[Ye]={});const ut=lt.sourceLayer||"_geojsonTileLayer";let Ot=qe[ut];Ot||(Ot=qe[ut]=[]),Ot.push(Xe)}}}class E{constructor(Y){const Ae={},Ee=[];for(const Ye in Y){const qe=Y[Ye],ut=Ae[Ye]={};for(const Ot in qe){const nr=qe[+Ot];if(!nr||nr.bitmap.width===0||nr.bitmap.height===0)continue;const zt={x:0,y:0,w:nr.bitmap.width+2,h:nr.bitmap.height+2};Ee.push(zt),ut[Ot]={rect:zt,metrics:nr.metrics}}}const{w:Le,h:Xe}=a.potpack(Ee),lt=new a.AlphaImage({width:Le||1,height:Xe||1});for(const Ye in Y){const qe=Y[Ye];for(const ut in qe){const Ot=qe[+ut];if(!Ot||Ot.bitmap.width===0||Ot.bitmap.height===0)continue;const nr=Ae[Ye][ut].rect;a.AlphaImage.copy(Ot.bitmap,lt,{x:0,y:0},{x:nr.x+1,y:nr.y+1},Ot.bitmap)}}this.image=lt,this.positions=Ae}}a.register("GlyphAtlas",E);class w{constructor(Y){this.tileID=new a.OverscaledTileID(Y.tileID.overscaledZ,Y.tileID.wrap,Y.tileID.canonical.z,Y.tileID.canonical.x,Y.tileID.canonical.y),this.uid=Y.uid,this.zoom=Y.zoom,this.pixelRatio=Y.pixelRatio,this.tileSize=Y.tileSize,this.source=Y.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Y.showCollisionBoxes,this.collectResourceTiming=!!Y.collectResourceTiming,this.returnDependencies=!!Y.returnDependencies,this.promoteId=Y.promoteId}parse(Y,Ae,Ee,Le,Xe){this.status="parsing",this.data=Y,this.collisionBoxArray=new a.CollisionBoxArray;const lt=new a.DictionaryCoder(Object.keys(Y.layers).sort()),Ye=new a.FeatureIndex(this.tileID,this.promoteId);Ye.bucketLayerIDs=[];const qe={},ut={featureIndex:Ye,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Ee},Ot=Ae.familiesBySource[this.source];for(const mn in Ot){const Bn=Y.layers[mn];if(!Bn)continue;Bn.version===1&&a.warnOnce(`Vector tile source "${this.source}" layer "${mn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const kn=lt.encode(mn),Vn=[];for(let Ti=0;Ti<Bn.length;Ti++){const oi=Bn.feature(Ti),wi=Ye.getId(oi,mn);Vn.push({feature:oi,id:wi,index:Ti,sourceLayerIndex:kn})}for(const Ti of Ot[mn]){const oi=Ti[0];oi.source!==this.source&&a.warnOnce(`layer.source = ${oi.source} does not equal this.source = ${this.source}`),oi.minzoom&&this.zoom<Math.floor(oi.minzoom)||oi.maxzoom&&this.zoom>=oi.maxzoom||oi.visibility!=="none"&&(x(Ti,this.zoom,Ee),(qe[oi.id]=oi.createBucket({index:Ye.bucketLayerIDs.length,layers:Ti,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:kn,sourceID:this.source})).populate(Vn,ut,this.tileID.canonical),Ye.bucketLayerIDs.push(Ti.map(wi=>wi.id)))}}let nr,zt,jr,Hr;const Tr=a.mapObject(ut.glyphDependencies,mn=>Object.keys(mn).map(Number));Object.keys(Tr).length?Le.send("getGlyphs",{uid:this.uid,stacks:Tr},(mn,Bn)=>{nr||(nr=mn,zt=Bn,In.call(this))}):zt={};const ln=Object.keys(ut.iconDependencies);ln.length?Le.send("getImages",{icons:ln,source:this.source,tileID:this.tileID,type:"icons"},(mn,Bn)=>{nr||(nr=mn,jr=Bn,In.call(this))}):jr={};const dn=Object.keys(ut.patternDependencies);function In(){if(nr)return Xe(nr);if(zt&&jr&&Hr){const mn=new E(zt),Bn=new a.ImageAtlas(jr,Hr);for(const kn in qe){const Vn=qe[kn];Vn instanceof a.SymbolBucket?(x(Vn.layers,this.zoom,Ee),a.performSymbolLayout({bucket:Vn,glyphMap:zt,glyphPositions:mn.positions,imageMap:jr,imagePositions:Bn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Vn.hasPattern&&(Vn instanceof a.LineBucket||Vn instanceof a.FillBucket||Vn instanceof a.FillExtrusionBucket)&&(x(Vn.layers,this.zoom,Ee),Vn.addFeatures(ut,this.tileID.canonical,Bn.patternPositions))}this.status="done",Xe(null,{buckets:Object.values(qe).filter(kn=>!kn.isEmpty()),featureIndex:Ye,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:mn.image,imageAtlas:Bn,glyphMap:this.returnDependencies?zt:null,iconMap:this.returnDependencies?jr:null,glyphPositions:this.returnDependencies?mn.positions:null})}}dn.length?Le.send("getImages",{icons:dn,source:this.source,tileID:this.tileID,type:"patterns"},(mn,Bn)=>{nr||(nr=mn,Hr=Bn,In.call(this))}):Hr={},In.call(this)}}function x(Ue,Y,Ae){const Ee=new a.EvaluationParameters(Y);for(const Le of Ue)Le.recalculate(Ee,Ae)}function k(Ue,Y){const Ae=a.getArrayBuffer(Ue.request,(Ee,Le,Xe,lt)=>{Ee?Y(Ee):Le&&Y(null,{vectorTile:new a.vectorTile.VectorTile(new a.pbf(Le)),rawData:Le,cacheControl:Xe,expires:lt})});return()=>{Ae.cancel(),Y()}}class Q{constructor(Y,Ae,Ee,Le){this.actor=Y,this.layerIndex=Ae,this.availableImages=Ee,this.loadVectorData=Le||k,this.loading={},this.loaded={}}loadTile(Y,Ae){const Ee=Y.uid;this.loading||(this.loading={});const Le=!!(Y&&Y.request&&Y.request.collectResourceTiming)&&new a.RequestPerformance(Y.request),Xe=this.loading[Ee]=new w(Y);Xe.abort=this.loadVectorData(Y,(lt,Ye)=>{if(delete this.loading[Ee],lt||!Ye)return Xe.status="done",this.loaded[Ee]=Xe,Ae(lt);const qe=Ye.rawData,ut={};Ye.expires&&(ut.expires=Ye.expires),Ye.cacheControl&&(ut.cacheControl=Ye.cacheControl);const Ot={};if(Le){const nr=Le.finish();nr&&(Ot.resourceTiming=JSON.parse(JSON.stringify(nr)))}Xe.vectorTile=Ye.vectorTile,Xe.parse(Ye.vectorTile,this.layerIndex,this.availableImages,this.actor,(nr,zt)=>{if(nr||!zt)return Ae(nr);Ae(null,a.extend({rawTileData:qe.slice(0)},zt,ut,Ot))}),this.loaded=this.loaded||{},this.loaded[Ee]=Xe})}reloadTile(Y,Ae){const Ee=this.loaded,Le=Y.uid,Xe=this;if(Ee&&Ee[Le]){const lt=Ee[Le];lt.showCollisionBoxes=Y.showCollisionBoxes;const Ye=(qe,ut)=>{const Ot=lt.reloadCallback;Ot&&(delete lt.reloadCallback,lt.parse(lt.vectorTile,Xe.layerIndex,this.availableImages,Xe.actor,Ot)),Ae(qe,ut)};lt.status==="parsing"?lt.reloadCallback=Ye:lt.status==="done"&&(lt.vectorTile?lt.parse(lt.vectorTile,this.layerIndex,this.availableImages,this.actor,Ye):Ye())}}abortTile(Y,Ae){const Ee=this.loading,Le=Y.uid;Ee&&Ee[Le]&&Ee[Le].abort&&(Ee[Le].abort(),delete Ee[Le]),Ae()}removeTile(Y,Ae){const Ee=this.loaded,Le=Y.uid;Ee&&Ee[Le]&&delete Ee[Le],Ae()}}class R{constructor(){this.loaded={}}loadTile(Y,Ae){const{uid:Ee,encoding:Le,rawImageData:Xe}=Y,lt=a.isImageBitmap(Xe)?this.getImageData(Xe):Xe,Ye=new a.DEMData(Ee,lt,Le);this.loaded=this.loaded||{},this.loaded[Ee]=Ye,Ae(null,Ye)}getImageData(Y){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Y.width,Y.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Y.width,this.offscreenCanvas.height=Y.height,this.offscreenCanvasContext.drawImage(Y,0,0,Y.width,Y.height);const Ae=this.offscreenCanvasContext.getImageData(-1,-1,Y.width+2,Y.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new a.RGBAImage({width:Ae.width,height:Ae.height},Ae.data)}removeTile(Y){const Ae=this.loaded,Ee=Y.uid;Ae&&Ae[Ee]&&delete Ae[Ee]}}var M=function Ue(Y,Ae){var Ee,Le=Y&&Y.type;if(Le==="FeatureCollection")for(Ee=0;Ee<Y.features.length;Ee++)Ue(Y.features[Ee],Ae);else if(Le==="GeometryCollection")for(Ee=0;Ee<Y.geometries.length;Ee++)Ue(Y.geometries[Ee],Ae);else if(Le==="Feature")Ue(Y.geometry,Ae);else if(Le==="Polygon")O(Y.coordinates,Ae);else if(Le==="MultiPolygon")for(Ee=0;Ee<Y.coordinates.length;Ee++)O(Y.coordinates[Ee],Ae);return Y};function O(Ue,Y){if(Ue.length!==0){G(Ue[0],Y);for(var Ae=1;Ae<Ue.length;Ae++)G(Ue[Ae],!Y)}}function G(Ue,Y){for(var Ae=0,Ee=0,Le=0,Xe=Ue.length,lt=Xe-1;Le<Xe;lt=Le++){var Ye=(Ue[Le][0]-Ue[lt][0])*(Ue[lt][1]+Ue[Le][1]),qe=Ae+Ye;Ee+=Math.abs(Ae)>=Math.abs(Ye)?Ae-qe+Ye:Ye-qe+Ae,Ae=qe}Ae+Ee>=0!=!!Y&&Ue.reverse()}const K=a.vectorTile.VectorTileFeature.prototype.toGeoJSON;class Z{constructor(Y){this._feature=Y,this.extent=a.EXTENT,this.type=Y.type,this.properties=Y.tags,"id"in Y&&!isNaN(Y.id)&&(this.id=parseInt(Y.id,10))}loadGeometry(){if(this._feature.type===1){const Y=[];for(const Ae of this._feature.geometry)Y.push([new a.pointGeometry(Ae[0],Ae[1])]);return Y}{const Y=[];for(const Ae of this._feature.geometry){const Ee=[];for(const Le of Ae)Ee.push(new a.pointGeometry(Le[0],Le[1]));Y.push(Ee)}return Y}}toGeoJSON(Y,Ae,Ee){return K.call(this,Y,Ae,Ee)}}class ${constructor(Y){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a.EXTENT,this.length=Y.length,this._features=Y}feature(Y){return new Z(this._features[Y])}}var he={exports:{}},fe=a.pointGeometry,_e=a.vectorTile.VectorTileFeature,ue=ee;function ee(Ue,Y){this.options=Y||{},this.features=Ue,this.length=Ue.length}function se(Ue,Y){this.id=typeof Ue.id=="number"?Ue.id:void 0,this.type=Ue.type,this.rawGeometry=Ue.type===1?[Ue.geometry]:Ue.geometry,this.properties=Ue.tags,this.extent=Y||4096}ee.prototype.feature=function(Ue){return new se(this.features[Ue],this.options.extent)},se.prototype.loadGeometry=function(){var Ue=this.rawGeometry;this.geometry=[];for(var Y=0;Y<Ue.length;Y++){for(var Ae=Ue[Y],Ee=[],Le=0;Le<Ae.length;Le++)Ee.push(new fe(Ae[Le][0],Ae[Le][1]));this.geometry.push(Ee)}return this.geometry},se.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ue=this.geometry,Y=1/0,Ae=-1/0,Ee=1/0,Le=-1/0,Xe=0;Xe<Ue.length;Xe++)for(var lt=Ue[Xe],Ye=0;Ye<lt.length;Ye++){var qe=lt[Ye];Y=Math.min(Y,qe.x),Ae=Math.max(Ae,qe.x),Ee=Math.min(Ee,qe.y),Le=Math.max(Le,qe.y)}return[Y,Ee,Ae,Le]},se.prototype.toGeoJSON=_e.prototype.toGeoJSON;var Be=a.pbf,me=ue;function Pe(Ue){var Y=new Be;return function(Ae,Ee){for(var Le in Ae.layers)Ee.writeMessage(3,ge,Ae.layers[Le])}(Ue,Y),Y.finish()}function ge(Ue,Y){var Ae;Y.writeVarintField(15,Ue.version||1),Y.writeStringField(1,Ue.name||""),Y.writeVarintField(5,Ue.extent||4096);var Ee={keys:[],values:[],keycache:{},valuecache:{}};for(Ae=0;Ae<Ue.length;Ae++)Ee.feature=Ue.feature(Ae),Y.writeMessage(2,Qe,Ee);var Le=Ee.keys;for(Ae=0;Ae<Le.length;Ae++)Y.writeStringField(3,Le[Ae]);var Xe=Ee.values;for(Ae=0;Ae<Xe.length;Ae++)Y.writeMessage(4,ne,Xe[Ae])}function Qe(Ue,Y){var Ae=Ue.feature;Ae.id!==void 0&&Y.writeVarintField(1,Ae.id),Y.writeMessage(2,Te,Ue),Y.writeVarintField(3,Ae.type),Y.writeMessage(4,Mt,Ae)}function Te(Ue,Y){var Ae=Ue.feature,Ee=Ue.keys,Le=Ue.values,Xe=Ue.keycache,lt=Ue.valuecache;for(var Ye in Ae.properties){var qe=Ae.properties[Ye],ut=Xe[Ye];if(qe!==null){ut===void 0&&(Ee.push(Ye),Xe[Ye]=ut=Ee.length-1),Y.writeVarint(ut);var Ot=typeof qe;Ot!=="string"&&Ot!=="boolean"&&Ot!=="number"&&(qe=JSON.stringify(qe));var nr=Ot+":"+qe,zt=lt[nr];zt===void 0&&(Le.push(qe),lt[nr]=zt=Le.length-1),Y.writeVarint(zt)}}}function tt(Ue,Y){return(Y<<3)+(7&Ue)}function Oe(Ue){return Ue<<1^Ue>>31}function Mt(Ue,Y){for(var Ae=Ue.loadGeometry(),Ee=Ue.type,Le=0,Xe=0,lt=Ae.length,Ye=0;Ye<lt;Ye++){var qe=Ae[Ye],ut=1;Ee===1&&(ut=qe.length),Y.writeVarint(tt(1,ut));for(var Ot=Ee===3?qe.length-1:qe.length,nr=0;nr<Ot;nr++){nr===1&&Ee!==1&&Y.writeVarint(tt(2,Ot-1));var zt=qe[nr].x-Le,jr=qe[nr].y-Xe;Y.writeVarint(Oe(zt)),Y.writeVarint(Oe(jr)),Le+=zt,Xe+=jr}Ee===3&&Y.writeVarint(tt(7,1))}}function ne(Ue,Y){var Ae=typeof Ue;Ae==="string"?Y.writeStringField(1,Ue):Ae==="boolean"?Y.writeBooleanField(7,Ue):Ae==="number"&&(Ue%1!=0?Y.writeDoubleField(3,Ue):Ue<0?Y.writeSVarintField(6,Ue):Y.writeVarintField(5,Ue))}function Se(Ue,Y,Ae,Ee,Le,Xe){if(Le-Ee<=Ae)return;const lt=Ee+Le>>1;ke(Ue,Y,lt,Ee,Le,Xe%2),Se(Ue,Y,Ae,Ee,lt-1,Xe+1),Se(Ue,Y,Ae,lt+1,Le,Xe+1)}function ke(Ue,Y,Ae,Ee,Le,Xe){for(;Le>Ee;){if(Le-Ee>600){const ut=Le-Ee+1,Ot=Ae-Ee+1,nr=Math.log(ut),zt=.5*Math.exp(2*nr/3),jr=.5*Math.sqrt(nr*zt*(ut-zt)/ut)*(Ot-ut/2<0?-1:1);ke(Ue,Y,Ae,Math.max(Ee,Math.floor(Ae-Ot*zt/ut+jr)),Math.min(Le,Math.floor(Ae+(ut-Ot)*zt/ut+jr)),Xe)}const lt=Y[2*Ae+Xe];let Ye=Ee,qe=Le;for(Ke(Ue,Y,Ee,Ae),Y[2*Le+Xe]>lt&&Ke(Ue,Y,Ee,Le);Ye<qe;){for(Ke(Ue,Y,Ye,qe),Ye++,qe--;Y[2*Ye+Xe]<lt;)Ye++;for(;Y[2*qe+Xe]>lt;)qe--}Y[2*Ee+Xe]===lt?Ke(Ue,Y,Ee,qe):(qe++,Ke(Ue,Y,qe,Le)),qe<=Ae&&(Ee=qe+1),Ae<=qe&&(Le=qe-1)}}function Ke(Ue,Y,Ae,Ee){at(Ue,Ae,Ee),at(Y,2*Ae,2*Ee),at(Y,2*Ae+1,2*Ee+1)}function at(Ue,Y,Ae){const Ee=Ue[Y];Ue[Y]=Ue[Ae],Ue[Ae]=Ee}function dt(Ue,Y,Ae,Ee){const Le=Ue-Ae,Xe=Y-Ee;return Le*Le+Xe*Xe}he.exports=Pe,he.exports.fromVectorTileJs=Pe,he.exports.fromGeojsonVt=function(Ue,Y){Y=Y||{};var Ae={};for(var Ee in Ue)Ae[Ee]=new me(Ue[Ee].features,Y),Ae[Ee].name=Ee,Ae[Ee].version=Y.version,Ae[Ee].extent=Y.extent;return Pe({layers:Ae})},he.exports.GeoJSONWrapper=me;const Bt=Ue=>Ue[0],Ge=Ue=>Ue[1];class rt{constructor(Y,Ae=Bt,Ee=Ge,Le=64,Xe=Float64Array){this.nodeSize=Le,this.points=Y;const lt=Y.length<65536?Uint16Array:Uint32Array,Ye=this.ids=new lt(Y.length),qe=this.coords=new Xe(2*Y.length);for(let ut=0;ut<Y.length;ut++)Ye[ut]=ut,qe[2*ut]=Ae(Y[ut]),qe[2*ut+1]=Ee(Y[ut]);Se(Ye,qe,Le,0,Ye.length-1,0)}range(Y,Ae,Ee,Le){return function(Xe,lt,Ye,qe,ut,Ot,nr){const zt=[0,Xe.length-1,0],jr=[];let Hr,Tr;for(;zt.length;){const ln=zt.pop(),dn=zt.pop(),In=zt.pop();if(dn-In<=nr){for(let kn=In;kn<=dn;kn++)Hr=lt[2*kn],Tr=lt[2*kn+1],Hr>=Ye&&Hr<=ut&&Tr>=qe&&Tr<=Ot&&jr.push(Xe[kn]);continue}const mn=Math.floor((In+dn)/2);Hr=lt[2*mn],Tr=lt[2*mn+1],Hr>=Ye&&Hr<=ut&&Tr>=qe&&Tr<=Ot&&jr.push(Xe[mn]);const Bn=(ln+1)%2;(ln===0?Ye<=Hr:qe<=Tr)&&(zt.push(In),zt.push(mn-1),zt.push(Bn)),(ln===0?ut>=Hr:Ot>=Tr)&&(zt.push(mn+1),zt.push(dn),zt.push(Bn))}return jr}(this.ids,this.coords,Y,Ae,Ee,Le,this.nodeSize)}within(Y,Ae,Ee){return function(Le,Xe,lt,Ye,qe,ut){const Ot=[0,Le.length-1,0],nr=[],zt=qe*qe;for(;Ot.length;){const jr=Ot.pop(),Hr=Ot.pop(),Tr=Ot.pop();if(Hr-Tr<=ut){for(let Bn=Tr;Bn<=Hr;Bn++)dt(Xe[2*Bn],Xe[2*Bn+1],lt,Ye)<=zt&&nr.push(Le[Bn]);continue}const ln=Math.floor((Tr+Hr)/2),dn=Xe[2*ln],In=Xe[2*ln+1];dt(dn,In,lt,Ye)<=zt&&nr.push(Le[ln]);const mn=(jr+1)%2;(jr===0?lt-qe<=dn:Ye-qe<=In)&&(Ot.push(Tr),Ot.push(ln-1),Ot.push(mn)),(jr===0?lt+qe>=dn:Ye+qe>=In)&&(Ot.push(ln+1),Ot.push(Hr),Ot.push(mn))}return nr}(this.ids,this.coords,Y,Ae,Ee,this.nodeSize)}}const Ut={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Ue=>Ue},ht=Math.fround||(Nt=new Float32Array(1),Ue=>(Nt[0]=+Ue,Nt[0]));var Nt;class dr{constructor(Y){this.options=vr(Object.create(Ut),Y),this.trees=new Array(this.options.maxZoom+1)}load(Y){const{log:Ae,minZoom:Ee,maxZoom:Le,nodeSize:Xe}=this.options;Ae&&console.time("total time");const lt=`prepare ${Y.length} points`;Ae&&console.time(lt),this.points=Y;let Ye=[];for(let qe=0;qe<Y.length;qe++)Y[qe].geometry&&Ye.push(ze(Y[qe],qe));this.trees[Le+1]=new rt(Ye,Gr,rr,Xe,Float32Array),Ae&&console.timeEnd(lt);for(let qe=Le;qe>=Ee;qe--){const ut=+Date.now();Ye=this._cluster(Ye,qe),this.trees[qe]=new rt(Ye,Gr,rr,Xe,Float32Array),Ae&&console.log("z%d: %d clusters in %dms",qe,Ye.length,+Date.now()-ut)}return Ae&&console.timeEnd("total time"),this}getClusters(Y,Ae){let Ee=((Y[0]+180)%360+360)%360-180;const Le=Math.max(-90,Math.min(90,Y[1]));let Xe=Y[2]===180?180:((Y[2]+180)%360+360)%360-180;const lt=Math.max(-90,Math.min(90,Y[3]));if(Y[2]-Y[0]>=360)Ee=-180,Xe=180;else if(Ee>Xe){const Ot=this.getClusters([Ee,Le,180,lt],Ae),nr=this.getClusters([-180,Le,Xe,lt],Ae);return Ot.concat(nr)}const Ye=this.trees[this._limitZoom(Ae)],qe=Ye.range(Ht(Ee),fr(lt),Ht(Xe),fr(Le)),ut=[];for(const Ot of qe){const nr=Ye.points[Ot];ut.push(nr.numPoints?gr(nr):this.points[nr.index])}return ut}getChildren(Y){const Ae=this._getOriginId(Y),Ee=this._getOriginZoom(Y),Le="No cluster with the specified id.",Xe=this.trees[Ee];if(!Xe)throw new Error(Le);const lt=Xe.points[Ae];if(!lt)throw new Error(Le);const Ye=this.options.radius/(this.options.extent*Math.pow(2,Ee-1)),qe=Xe.within(lt.x,lt.y,Ye),ut=[];for(const Ot of qe){const nr=Xe.points[Ot];nr.parentId===Y&&ut.push(nr.numPoints?gr(nr):this.points[nr.index])}if(ut.length===0)throw new Error(Le);return ut}getLeaves(Y,Ae,Ee){const Le=[];return this._appendLeaves(Le,Y,Ae=Ae||10,Ee=Ee||0,0),Le}getTile(Y,Ae,Ee){const Le=this.trees[this._limitZoom(Y)],Xe=Math.pow(2,Y),{extent:lt,radius:Ye}=this.options,qe=Ye/lt,ut=(Ee-qe)/Xe,Ot=(Ee+1+qe)/Xe,nr={features:[]};return this._addTileFeatures(Le.range((Ae-qe)/Xe,ut,(Ae+1+qe)/Xe,Ot),Le.points,Ae,Ee,Xe,nr),Ae===0&&this._addTileFeatures(Le.range(1-qe/Xe,ut,1,Ot),Le.points,Xe,Ee,Xe,nr),Ae===Xe-1&&this._addTileFeatures(Le.range(0,ut,qe/Xe,Ot),Le.points,-1,Ee,Xe,nr),nr.features.length?nr:null}getClusterExpansionZoom(Y){let Ae=this._getOriginZoom(Y)-1;for(;Ae<=this.options.maxZoom;){const Ee=this.getChildren(Y);if(Ae++,Ee.length!==1)break;Y=Ee[0].properties.cluster_id}return Ae}_appendLeaves(Y,Ae,Ee,Le,Xe){const lt=this.getChildren(Ae);for(const Ye of lt){const qe=Ye.properties;if(qe&&qe.cluster?Xe+qe.point_count<=Le?Xe+=qe.point_count:Xe=this._appendLeaves(Y,qe.cluster_id,Ee,Le,Xe):Xe<Le?Xe++:Y.push(Ye),Y.length===Ee)break}return Xe}_addTileFeatures(Y,Ae,Ee,Le,Xe,lt){for(const Ye of Y){const qe=Ae[Ye],ut=qe.numPoints;let Ot,nr,zt;if(ut)Ot=sr(qe),nr=qe.x,zt=qe.y;else{const Tr=this.points[qe.index];Ot=Tr.properties,nr=Ht(Tr.geometry.coordinates[0]),zt=fr(Tr.geometry.coordinates[1])}const jr={type:1,geometry:[[Math.round(this.options.extent*(nr*Xe-Ee)),Math.round(this.options.extent*(zt*Xe-Le))]],tags:Ot};let Hr;ut?Hr=qe.id:this.options.generateId?Hr=qe.index:this.points[qe.index].id&&(Hr=this.points[qe.index].id),Hr!==void 0&&(jr.id=Hr),lt.features.push(jr)}}_limitZoom(Y){return Math.max(this.options.minZoom,Math.min(Math.floor(+Y),this.options.maxZoom+1))}_cluster(Y,Ae){const Ee=[],{radius:Le,extent:Xe,reduce:lt,minPoints:Ye}=this.options,qe=Le/(Xe*Math.pow(2,Ae));for(let ut=0;ut<Y.length;ut++){const Ot=Y[ut];if(Ot.zoom<=Ae)continue;Ot.zoom=Ae;const nr=this.trees[Ae+1],zt=nr.within(Ot.x,Ot.y,qe),jr=Ot.numPoints||1;let Hr=jr;for(const Tr of zt){const ln=nr.points[Tr];ln.zoom>Ae&&(Hr+=ln.numPoints||1)}if(Hr>jr&&Hr>=Ye){let Tr=Ot.x*jr,ln=Ot.y*jr,dn=lt&&jr>1?this._map(Ot,!0):null;const In=(ut<<5)+(Ae+1)+this.points.length;for(const mn of zt){const Bn=nr.points[mn];if(Bn.zoom<=Ae)continue;Bn.zoom=Ae;const kn=Bn.numPoints||1;Tr+=Bn.x*kn,ln+=Bn.y*kn,Bn.parentId=In,lt&&(dn||(dn=this._map(Ot,!0)),lt(dn,this._map(Bn)))}Ot.parentId=In,Ee.push(Lt(Tr/Hr,ln/Hr,In,Hr,dn))}else if(Ee.push(Ot),Hr>1)for(const Tr of zt){const ln=nr.points[Tr];ln.zoom<=Ae||(ln.zoom=Ae,Ee.push(ln))}}return Ee}_getOriginId(Y){return Y-this.points.length>>5}_getOriginZoom(Y){return(Y-this.points.length)%32}_map(Y,Ae){if(Y.numPoints)return Ae?vr({},Y.properties):Y.properties;const Ee=this.points[Y.index].properties,Le=this.options.map(Ee);return Ae&&Le===Ee?vr({},Le):Le}}function Lt(Ue,Y,Ae,Ee,Le){return{x:ht(Ue),y:ht(Y),zoom:1/0,id:Ae,parentId:-1,numPoints:Ee,properties:Le}}function ze(Ue,Y){const[Ae,Ee]=Ue.geometry.coordinates;return{x:ht(Ht(Ae)),y:ht(fr(Ee)),zoom:1/0,index:Y,parentId:-1}}function gr(Ue){return{type:"Feature",id:Ue.id,properties:sr(Ue),geometry:{type:"Point",coordinates:[(Y=Ue.x,360*(Y-.5)),Br(Ue.y)]}};var Y}function sr(Ue){const Y=Ue.numPoints,Ae=Y>=1e4?`${Math.round(Y/1e3)}k`:Y>=1e3?Math.round(Y/100)/10+"k":Y;return vr(vr({},Ue.properties),{cluster:!0,cluster_id:Ue.id,point_count:Y,point_count_abbreviated:Ae})}function Ht(Ue){return Ue/360+.5}function fr(Ue){const Y=Math.sin(Ue*Math.PI/180),Ae=.5-.25*Math.log((1+Y)/(1-Y))/Math.PI;return Ae<0?0:Ae>1?1:Ae}function Br(Ue){const Y=(180-360*Ue)*Math.PI/180;return 360*Math.atan(Math.exp(Y))/Math.PI-90}function vr(Ue,Y){for(const Ae in Y)Ue[Ae]=Y[Ae];return Ue}function Gr(Ue){return Ue.x}function rr(Ue){return Ue.y}function xr(Ue,Y,Ae,Ee){for(var Le,Xe=Ee,lt=Ae-Y>>1,Ye=Ae-Y,qe=Ue[Y],ut=Ue[Y+1],Ot=Ue[Ae],nr=Ue[Ae+1],zt=Y+3;zt<Ae;zt+=3){var jr=Zr(Ue[zt],Ue[zt+1],qe,ut,Ot,nr);if(jr>Xe)Le=zt,Xe=jr;else if(jr===Xe){var Hr=Math.abs(zt-lt);Hr<Ye&&(Le=zt,Ye=Hr)}}Xe>Ee&&(Le-Y>3&&xr(Ue,Y,Le,Ee),Ue[Le+2]=Xe,Ae-Le>3&&xr(Ue,Le,Ae,Ee))}function Zr(Ue,Y,Ae,Ee,Le,Xe){var lt=Le-Ae,Ye=Xe-Ee;if(lt!==0||Ye!==0){var qe=((Ue-Ae)*lt+(Y-Ee)*Ye)/(lt*lt+Ye*Ye);qe>1?(Ae=Le,Ee=Xe):qe>0&&(Ae+=lt*qe,Ee+=Ye*qe)}return(lt=Ue-Ae)*lt+(Ye=Y-Ee)*Ye}function pn(Ue,Y,Ae,Ee){var Le={id:Ue===void 0?null:Ue,type:Y,geometry:Ae,tags:Ee,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Xe){var lt=Xe.geometry,Ye=Xe.type;if(Ye==="Point"||Ye==="MultiPoint"||Ye==="LineString")vt(Xe,lt);else if(Ye==="Polygon"||Ye==="MultiLineString")for(var qe=0;qe<lt.length;qe++)vt(Xe,lt[qe]);else if(Ye==="MultiPolygon")for(qe=0;qe<lt.length;qe++)for(var ut=0;ut<lt[qe].length;ut++)vt(Xe,lt[qe][ut])}(Le),Le}function vt(Ue,Y){for(var Ae=0;Ae<Y.length;Ae+=3)Ue.minX=Math.min(Ue.minX,Y[Ae]),Ue.minY=Math.min(Ue.minY,Y[Ae+1]),Ue.maxX=Math.max(Ue.maxX,Y[Ae]),Ue.maxY=Math.max(Ue.maxY,Y[Ae+1])}function nt(Ue,Y,Ae,Ee){if(Y.geometry){var Le=Y.geometry.coordinates,Xe=Y.geometry.type,lt=Math.pow(Ae.tolerance/((1<<Ae.maxZoom)*Ae.extent),2),Ye=[],qe=Y.id;if(Ae.promoteId?qe=Y.properties[Ae.promoteId]:Ae.generateId&&(qe=Ee||0),Xe==="Point")bt(Le,Ye);else if(Xe==="MultiPoint")for(var ut=0;ut<Le.length;ut++)bt(Le[ut],Ye);else if(Xe==="LineString")Ct(Le,Ye,lt,!1);else if(Xe==="MultiLineString"){if(Ae.lineMetrics){for(ut=0;ut<Le.length;ut++)Ct(Le[ut],Ye=[],lt,!1),Ue.push(pn(qe,"LineString",Ye,Y.properties));return}jt(Le,Ye,lt,!1)}else if(Xe==="Polygon")jt(Le,Ye,lt,!0);else{if(Xe!=="MultiPolygon"){if(Xe==="GeometryCollection"){for(ut=0;ut<Y.geometry.geometries.length;ut++)nt(Ue,{id:qe,geometry:Y.geometry.geometries[ut],properties:Y.properties},Ae,Ee);return}throw new Error("Input data is not a valid GeoJSON object.")}for(ut=0;ut<Le.length;ut++){var Ot=[];jt(Le[ut],Ot,lt,!0),Ye.push(Ot)}}Ue.push(pn(qe,Xe,Ye,Y.properties))}}function bt(Ue,Y){Y.push(er(Ue[0])),Y.push(Vr(Ue[1])),Y.push(0)}function Ct(Ue,Y,Ae,Ee){for(var Le,Xe,lt=0,Ye=0;Ye<Ue.length;Ye++){var qe=er(Ue[Ye][0]),ut=Vr(Ue[Ye][1]);Y.push(qe),Y.push(ut),Y.push(0),Ye>0&&(lt+=Ee?(Le*ut-qe*Xe)/2:Math.sqrt(Math.pow(qe-Le,2)+Math.pow(ut-Xe,2))),Le=qe,Xe=ut}var Ot=Y.length-3;Y[2]=1,xr(Y,0,Ot,Ae),Y[Ot+2]=1,Y.size=Math.abs(lt),Y.start=0,Y.end=Y.size}function jt(Ue,Y,Ae,Ee){for(var Le=0;Le<Ue.length;Le++){var Xe=[];Ct(Ue[Le],Xe,Ae,Ee),Y.push(Xe)}}function er(Ue){return Ue/360+.5}function Vr(Ue){var Y=Math.sin(Ue*Math.PI/180),Ae=.5-.25*Math.log((1+Y)/(1-Y))/Math.PI;return Ae<0?0:Ae>1?1:Ae}function Fr(Ue,Y,Ae,Ee,Le,Xe,lt,Ye){if(Ee/=Y,Xe>=(Ae/=Y)&&lt<Ee)return Ue;if(lt<Ae||Xe>=Ee)return null;for(var qe=[],ut=0;ut<Ue.length;ut++){var Ot=Ue[ut],nr=Ot.geometry,zt=Ot.type,jr=Le===0?Ot.minX:Ot.minY,Hr=Le===0?Ot.maxX:Ot.maxY;if(jr>=Ae&&Hr<Ee)qe.push(Ot);else if(!(Hr<Ae||jr>=Ee)){var Tr=[];if(zt==="Point"||zt==="MultiPoint")un(nr,Tr,Ae,Ee,Le);else if(zt==="LineString")lr(nr,Tr,Ae,Ee,Le,!1,Ye.lineMetrics);else if(zt==="MultiLineString")An(nr,Tr,Ae,Ee,Le,!1);else if(zt==="Polygon")An(nr,Tr,Ae,Ee,Le,!0);else if(zt==="MultiPolygon")for(var ln=0;ln<nr.length;ln++){var dn=[];An(nr[ln],dn,Ae,Ee,Le,!0),dn.length&&Tr.push(dn)}if(Tr.length){if(Ye.lineMetrics&&zt==="LineString"){for(ln=0;ln<Tr.length;ln++)qe.push(pn(Ot.id,zt,Tr[ln],Ot.tags));continue}zt!=="LineString"&&zt!=="MultiLineString"||(Tr.length===1?(zt="LineString",Tr=Tr[0]):zt="MultiLineString"),zt!=="Point"&&zt!=="MultiPoint"||(zt=Tr.length===3?"Point":"MultiPoint"),qe.push(pn(Ot.id,zt,Tr,Ot.tags))}}}return qe.length?qe:null}function un(Ue,Y,Ae,Ee,Le){for(var Xe=0;Xe<Ue.length;Xe+=3){var lt=Ue[Xe+Le];lt>=Ae&&lt<=Ee&&(Y.push(Ue[Xe]),Y.push(Ue[Xe+1]),Y.push(Ue[Xe+2]))}}function lr(Ue,Y,Ae,Ee,Le,Xe,lt){for(var Ye,qe,ut=Er(Ue),Ot=Le===0?_i:br,nr=Ue.start,zt=0;zt<Ue.length-3;zt+=3){var jr=Ue[zt],Hr=Ue[zt+1],Tr=Ue[zt+2],ln=Ue[zt+3],dn=Ue[zt+4],In=Le===0?jr:Hr,mn=Le===0?ln:dn,Bn=!1;lt&&(Ye=Math.sqrt(Math.pow(jr-ln,2)+Math.pow(Hr-dn,2))),In<Ae?mn>Ae&&(qe=Ot(ut,jr,Hr,ln,dn,Ae),lt&&(ut.start=nr+Ye*qe)):In>Ee?mn<Ee&&(qe=Ot(ut,jr,Hr,ln,dn,Ee),lt&&(ut.start=nr+Ye*qe)):wn(ut,jr,Hr,Tr),mn<Ae&&In>=Ae&&(qe=Ot(ut,jr,Hr,ln,dn,Ae),Bn=!0),mn>Ee&&In<=Ee&&(qe=Ot(ut,jr,Hr,ln,dn,Ee),Bn=!0),!Xe&&Bn&&(lt&&(ut.end=nr+Ye*qe),Y.push(ut),ut=Er(Ue)),lt&&(nr+=Ye)}var kn=Ue.length-3;jr=Ue[kn],Hr=Ue[kn+1],Tr=Ue[kn+2],(In=Le===0?jr:Hr)>=Ae&&In<=Ee&&wn(ut,jr,Hr,Tr),kn=ut.length-3,Xe&&kn>=3&&(ut[kn]!==ut[0]||ut[kn+1]!==ut[1])&&wn(ut,ut[0],ut[1],ut[2]),ut.length&&Y.push(ut)}function Er(Ue){var Y=[];return Y.size=Ue.size,Y.start=Ue.start,Y.end=Ue.end,Y}function An(Ue,Y,Ae,Ee,Le,Xe){for(var lt=0;lt<Ue.length;lt++)lr(Ue[lt],Y,Ae,Ee,Le,Xe,!1)}function wn(Ue,Y,Ae,Ee){Ue.push(Y),Ue.push(Ae),Ue.push(Ee)}function _i(Ue,Y,Ae,Ee,Le,Xe){var lt=(Xe-Y)/(Ee-Y);return Ue.push(Xe),Ue.push(Ae+(Le-Ae)*lt),Ue.push(1),lt}function br(Ue,Y,Ae,Ee,Le,Xe){var lt=(Xe-Ae)/(Le-Ae);return Ue.push(Y+(Ee-Y)*lt),Ue.push(Xe),Ue.push(1),lt}function Cr(Ue,Y){for(var Ae=[],Ee=0;Ee<Ue.length;Ee++){var Le,Xe=Ue[Ee],lt=Xe.type;if(lt==="Point"||lt==="MultiPoint"||lt==="LineString")Le=cr(Xe.geometry,Y);else if(lt==="MultiLineString"||lt==="Polygon"){Le=[];for(var Ye=0;Ye<Xe.geometry.length;Ye++)Le.push(cr(Xe.geometry[Ye],Y))}else if(lt==="MultiPolygon")for(Le=[],Ye=0;Ye<Xe.geometry.length;Ye++){for(var qe=[],ut=0;ut<Xe.geometry[Ye].length;ut++)qe.push(cr(Xe.geometry[Ye][ut],Y));Le.push(qe)}Ae.push(pn(Xe.id,lt,Le,Xe.tags))}return Ae}function cr(Ue,Y){var Ae=[];Ae.size=Ue.size,Ue.start!==void 0&&(Ae.start=Ue.start,Ae.end=Ue.end);for(var Ee=0;Ee<Ue.length;Ee+=3)Ae.push(Ue[Ee]+Y,Ue[Ee+1],Ue[Ee+2]);return Ae}function Kr(Ue,Y){if(Ue.transformed)return Ue;var Ae,Ee,Le,Xe=1<<Ue.z,lt=Ue.x,Ye=Ue.y;for(Ae=0;Ae<Ue.features.length;Ae++){var qe=Ue.features[Ae],ut=qe.geometry,Ot=qe.type;if(qe.geometry=[],Ot===1)for(Ee=0;Ee<ut.length;Ee+=2)qe.geometry.push(hn(ut[Ee],ut[Ee+1],Y,Xe,lt,Ye));else for(Ee=0;Ee<ut.length;Ee++){var nr=[];for(Le=0;Le<ut[Ee].length;Le+=2)nr.push(hn(ut[Ee][Le],ut[Ee][Le+1],Y,Xe,lt,Ye));qe.geometry.push(nr)}}return Ue.transformed=!0,Ue}function hn(Ue,Y,Ae,Ee,Le,Xe){return[Math.round(Ae*(Ue*Ee-Le)),Math.round(Ae*(Y*Ee-Xe))]}function xn(Ue,Y,Ae,Ee,Le){for(var Xe=Y===Le.maxZoom?0:Le.tolerance/((1<<Y)*Le.extent),lt={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Ae,y:Ee,z:Y,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ye=0;Ye<Ue.length;Ye++){lt.numFeatures++,Sn(lt,Ue[Ye],Xe,Le);var qe=Ue[Ye].minX,ut=Ue[Ye].minY,Ot=Ue[Ye].maxX,nr=Ue[Ye].maxY;qe<lt.minX&&(lt.minX=qe),ut<lt.minY&&(lt.minY=ut),Ot>lt.maxX&&(lt.maxX=Ot),nr>lt.maxY&&(lt.maxY=nr)}return lt}function Sn(Ue,Y,Ae,Ee){var Le=Y.geometry,Xe=Y.type,lt=[];if(Xe==="Point"||Xe==="MultiPoint")for(var Ye=0;Ye<Le.length;Ye+=3)lt.push(Le[Ye]),lt.push(Le[Ye+1]),Ue.numPoints++,Ue.numSimplified++;else if(Xe==="LineString")ji(lt,Le,Ue,Ae,!1,!1);else if(Xe==="MultiLineString"||Xe==="Polygon")for(Ye=0;Ye<Le.length;Ye++)ji(lt,Le[Ye],Ue,Ae,Xe==="Polygon",Ye===0);else if(Xe==="MultiPolygon")for(var qe=0;qe<Le.length;qe++){var ut=Le[qe];for(Ye=0;Ye<ut.length;Ye++)ji(lt,ut[Ye],Ue,Ae,!0,Ye===0)}if(lt.length){var Ot=Y.tags||null;if(Xe==="LineString"&&Ee.lineMetrics){for(var nr in Ot={},Y.tags)Ot[nr]=Y.tags[nr];Ot.mapbox_clip_start=Le.start/Le.size,Ot.mapbox_clip_end=Le.end/Le.size}var zt={geometry:lt,type:Xe==="Polygon"||Xe==="MultiPolygon"?3:Xe==="LineString"||Xe==="MultiLineString"?2:1,tags:Ot};Y.id!==null&&(zt.id=Y.id),Ue.features.push(zt)}}function ji(Ue,Y,Ae,Ee,Le,Xe){var lt=Ee*Ee;if(Ee>0&&Y.size<(Le?lt:Ee))Ae.numPoints+=Y.length/3;else{for(var Ye=[],qe=0;qe<Y.length;qe+=3)(Ee===0||Y[qe+2]>lt)&&(Ae.numSimplified++,Ye.push(Y[qe]),Ye.push(Y[qe+1])),Ae.numPoints++;Le&&function(ut,Ot){for(var nr=0,zt=0,jr=ut.length,Hr=jr-2;zt<jr;Hr=zt,zt+=2)nr+=(ut[zt]-ut[Hr])*(ut[zt+1]+ut[Hr+1]);if(nr>0===Ot)for(zt=0,jr=ut.length;zt<jr/2;zt+=2){var Tr=ut[zt],ln=ut[zt+1];ut[zt]=ut[jr-2-zt],ut[zt+1]=ut[jr-1-zt],ut[jr-2-zt]=Tr,ut[jr-1-zt]=ln}}(Ye,Xe),Ue.push(Ye)}}function tn(Ue,Y){var Ae=(Y=this.options=function(Le,Xe){for(var lt in Xe)Le[lt]=Xe[lt];return Le}(Object.create(this.options),Y)).debug;if(Ae&&console.time("preprocess data"),Y.maxZoom<0||Y.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Y.promoteId&&Y.generateId)throw new Error("promoteId and generateId cannot be used together.");var Ee=function(Le,Xe){var lt=[];if(Le.type==="FeatureCollection")for(var Ye=0;Ye<Le.features.length;Ye++)nt(lt,Le.features[Ye],Xe,Ye);else nt(lt,Le.type==="Feature"?Le:{geometry:Le},Xe);return lt}(Ue,Y);this.tiles={},this.tileCoords=[],Ae&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Y.indexMaxZoom,Y.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Ee=function(Le,Xe){var lt=Xe.buffer/Xe.extent,Ye=Le,qe=Fr(Le,1,-1-lt,lt,0,-1,2,Xe),ut=Fr(Le,1,1-lt,2+lt,0,-1,2,Xe);return(qe||ut)&&(Ye=Fr(Le,1,-lt,1+lt,0,-1,2,Xe)||[],qe&&(Ye=Cr(qe,1).concat(Ye)),ut&&(Ye=Ye.concat(Cr(ut,-1)))),Ye}(Ee,Y),Ee.length&&this.splitTile(Ee,0,0,0),Ae&&(Ee.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Wi(Ue,Y,Ae){return 32*((1<<Ue)*Ae+Y)+Ue}function hs(Ue,Y){const Ae=Ue.tileID.canonical;if(!this._geoJSONIndex)return Y(null,null);const Ee=this._geoJSONIndex.getTile(Ae.z,Ae.x,Ae.y);if(!Ee)return Y(null,null);const Le=new $(Ee.features);let Xe=he.exports(Le);Xe.byteOffset===0&&Xe.byteLength===Xe.buffer.byteLength||(Xe=new Uint8Array(Xe)),Y(null,{vectorTile:Le,rawData:Xe.buffer})}tn.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},tn.prototype.splitTile=function(Ue,Y,Ae,Ee,Le,Xe,lt){for(var Ye=[Ue,Y,Ae,Ee],qe=this.options,ut=qe.debug;Ye.length;){Ee=Ye.pop(),Ae=Ye.pop(),Y=Ye.pop(),Ue=Ye.pop();var Ot=1<<Y,nr=Wi(Y,Ae,Ee),zt=this.tiles[nr];if(!zt&&(ut>1&&console.time("creation"),zt=this.tiles[nr]=xn(Ue,Y,Ae,Ee,qe),this.tileCoords.push({z:Y,x:Ae,y:Ee}),ut)){ut>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Y,Ae,Ee,zt.numFeatures,zt.numPoints,zt.numSimplified),console.timeEnd("creation"));var jr="z"+Y;this.stats[jr]=(this.stats[jr]||0)+1,this.total++}if(zt.source=Ue,Le){if(Y===qe.maxZoom||Y===Le)continue;var Hr=1<<Le-Y;if(Ae!==Math.floor(Xe/Hr)||Ee!==Math.floor(lt/Hr))continue}else if(Y===qe.indexMaxZoom||zt.numPoints<=qe.indexMaxPoints)continue;if(zt.source=null,Ue.length!==0){ut>1&&console.time("clipping");var Tr,ln,dn,In,mn,Bn,kn=.5*qe.buffer/qe.extent,Vn=.5-kn,Ti=.5+kn,oi=1+kn;Tr=ln=dn=In=null,mn=Fr(Ue,Ot,Ae-kn,Ae+Ti,0,zt.minX,zt.maxX,qe),Bn=Fr(Ue,Ot,Ae+Vn,Ae+oi,0,zt.minX,zt.maxX,qe),Ue=null,mn&&(Tr=Fr(mn,Ot,Ee-kn,Ee+Ti,1,zt.minY,zt.maxY,qe),ln=Fr(mn,Ot,Ee+Vn,Ee+oi,1,zt.minY,zt.maxY,qe),mn=null),Bn&&(dn=Fr(Bn,Ot,Ee-kn,Ee+Ti,1,zt.minY,zt.maxY,qe),In=Fr(Bn,Ot,Ee+Vn,Ee+oi,1,zt.minY,zt.maxY,qe),Bn=null),ut>1&&console.timeEnd("clipping"),Ye.push(Tr||[],Y+1,2*Ae,2*Ee),Ye.push(ln||[],Y+1,2*Ae,2*Ee+1),Ye.push(dn||[],Y+1,2*Ae+1,2*Ee),Ye.push(In||[],Y+1,2*Ae+1,2*Ee+1)}}},tn.prototype.getTile=function(Ue,Y,Ae){var Ee=this.options,Le=Ee.extent,Xe=Ee.debug;if(Ue<0||Ue>24)return null;var lt=1<<Ue,Ye=Wi(Ue,Y=(Y%lt+lt)%lt,Ae);if(this.tiles[Ye])return Kr(this.tiles[Ye],Le);Xe>1&&console.log("drilling down to z%d-%d-%d",Ue,Y,Ae);for(var qe,ut=Ue,Ot=Y,nr=Ae;!qe&&ut>0;)ut--,Ot=Math.floor(Ot/2),nr=Math.floor(nr/2),qe=this.tiles[Wi(ut,Ot,nr)];return qe&&qe.source?(Xe>1&&console.log("found parent tile z%d-%d-%d",ut,Ot,nr),Xe>1&&console.time("drilling down"),this.splitTile(qe.source,ut,Ot,nr,Ue,Y,Ae),Xe>1&&console.timeEnd("drilling down"),this.tiles[Ye]?Kr(this.tiles[Ye],Le):null):null};class Ln extends Q{constructor(Y,Ae,Ee,Le){super(Y,Ae,Ee,hs),Le&&(this.loadGeoJSON=Le)}loadData(Y,Ae){var Ee;(Ee=this._pendingRequest)===null||Ee===void 0||Ee.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const Le=!!(Y&&Y.request&&Y.request.collectResourceTiming)&&new a.RequestPerformance(Y.request);this._pendingCallback=Ae,this._pendingRequest=this.loadGeoJSON(Y,(Xe,lt)=>{if(delete this._pendingCallback,delete this._pendingRequest,Xe||!lt)return Ae(Xe);if(typeof lt!="object")return Ae(new Error(`Input data given to '${Y.source}' is not a valid GeoJSON object.`));{M(lt,!0);try{if(Y.filter){const qe=a.createExpression(Y.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(qe.result==="error")throw new Error(qe.value.map(Ot=>`${Ot.key}: ${Ot.message}`).join(", "));lt={type:"FeatureCollection",features:lt.features.filter(Ot=>qe.value.evaluate({zoom:0},Ot))}}this._geoJSONIndex=Y.cluster?new dr(function({superclusterOptions:qe,clusterProperties:ut}){if(!ut||!qe)return qe;const Ot={},nr={},zt={accumulated:null,zoom:0},jr={properties:null},Hr=Object.keys(ut);for(const Tr of Hr){const[ln,dn]=ut[Tr],In=a.createExpression(dn),mn=a.createExpression(typeof ln=="string"?[ln,["accumulated"],["get",Tr]]:ln);Ot[Tr]=In.value,nr[Tr]=mn.value}return qe.map=Tr=>{jr.properties=Tr;const ln={};for(const dn of Hr)ln[dn]=Ot[dn].evaluate(zt,jr);return ln},qe.reduce=(Tr,ln)=>{jr.properties=ln;for(const dn of Hr)zt.accumulated=Tr[dn],Tr[dn]=nr[dn].evaluate(zt,jr)},qe}(Y)).load(lt.features):function(qe,ut){return new tn(qe,ut)}(lt,Y.geojsonVtOptions)}catch(qe){return Ae(qe)}this.loaded={};const Ye={};if(Le){const qe=Le.finish();qe&&(Ye.resourceTiming={},Ye.resourceTiming[Y.source]=JSON.parse(JSON.stringify(qe)))}Ae(null,Ye)}})}reloadTile(Y,Ae){const Ee=this.loaded;return Ee&&Ee[Y.uid]?super.reloadTile(Y,Ae):this.loadTile(Y,Ae)}loadGeoJSON(Y,Ae){if(Y.request)return a.getJSON(Y.request,Ae);if(typeof Y.data=="string")try{Ae(null,JSON.parse(Y.data))}catch{Ae(new Error(`Input data given to '${Y.source}' is not a valid GeoJSON object.`))}else Ae(new Error(`Input data given to '${Y.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}}removeSource(Y,Ae){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Ae()}getClusterExpansionZoom(Y,Ae){try{Ae(null,this._geoJSONIndex.getClusterExpansionZoom(Y.clusterId))}catch(Ee){Ae(Ee)}}getClusterChildren(Y,Ae){try{Ae(null,this._geoJSONIndex.getChildren(Y.clusterId))}catch(Ee){Ae(Ee)}}getClusterLeaves(Y,Ae){try{Ae(null,this._geoJSONIndex.getLeaves(Y.clusterId,Y.limit,Y.offset))}catch(Ee){Ae(Ee)}}}class nn{constructor(Y){this.self=Y,this.actor=new a.Actor(Y,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:Q,geojson:Ln},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(Ae,Ee)=>{if(this.workerSourceTypes[Ae])throw new Error(`Worker source with name "${Ae}" already registered.`);this.workerSourceTypes[Ae]=Ee},this.self.registerRTLTextPlugin=Ae=>{if(a.plugin.isParsed())throw new Error("RTL text plugin already registered.");a.plugin.applyArabicShaping=Ae.applyArabicShaping,a.plugin.processBidirectionalText=Ae.processBidirectionalText,a.plugin.processStyledBidirectionalText=Ae.processStyledBidirectionalText}}setReferrer(Y,Ae){this.referrer=Ae}setImages(Y,Ae,Ee){this.availableImages[Y]=Ae;for(const Le in this.workerSources[Y]){const Xe=this.workerSources[Y][Le];for(const lt in Xe)Xe[lt].availableImages=Ae}Ee()}setLayers(Y,Ae,Ee){this.getLayerIndex(Y).replace(Ae),Ee()}updateLayers(Y,Ae,Ee){this.getLayerIndex(Y).update(Ae.layers,Ae.removedIds),Ee()}loadTile(Y,Ae,Ee){this.getWorkerSource(Y,Ae.type,Ae.source).loadTile(Ae,Ee)}loadDEMTile(Y,Ae,Ee){this.getDEMWorkerSource(Y,Ae.source).loadTile(Ae,Ee)}reloadTile(Y,Ae,Ee){this.getWorkerSource(Y,Ae.type,Ae.source).reloadTile(Ae,Ee)}abortTile(Y,Ae,Ee){this.getWorkerSource(Y,Ae.type,Ae.source).abortTile(Ae,Ee)}removeTile(Y,Ae,Ee){this.getWorkerSource(Y,Ae.type,Ae.source).removeTile(Ae,Ee)}removeDEMTile(Y,Ae){this.getDEMWorkerSource(Y,Ae.source).removeTile(Ae)}removeSource(Y,Ae,Ee){if(!this.workerSources[Y]||!this.workerSources[Y][Ae.type]||!this.workerSources[Y][Ae.type][Ae.source])return;const Le=this.workerSources[Y][Ae.type][Ae.source];delete this.workerSources[Y][Ae.type][Ae.source],Le.removeSource!==void 0?Le.removeSource(Ae,Ee):Ee()}loadWorkerSource(Y,Ae,Ee){try{this.self.importScripts(Ae.url),Ee()}catch(Le){Ee(Le.toString())}}syncRTLPluginState(Y,Ae,Ee){try{a.plugin.setState(Ae);const Le=a.plugin.getPluginURL();if(a.plugin.isLoaded()&&!a.plugin.isParsed()&&Le!=null){this.self.importScripts(Le);const Xe=a.plugin.isParsed();Ee(Xe?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Le}`),Xe)}}catch(Le){Ee(Le.toString())}}getAvailableImages(Y){let Ae=this.availableImages[Y];return Ae||(Ae=[]),Ae}getLayerIndex(Y){let Ae=this.layerIndexes[Y];return Ae||(Ae=this.layerIndexes[Y]=new p),Ae}getWorkerSource(Y,Ae,Ee){if(this.workerSources[Y]||(this.workerSources[Y]={}),this.workerSources[Y][Ae]||(this.workerSources[Y][Ae]={}),!this.workerSources[Y][Ae][Ee]){const Le={send:(Xe,lt,Ye)=>{this.actor.send(Xe,lt,Ye,Y)}};this.workerSources[Y][Ae][Ee]=new this.workerSourceTypes[Ae](Le,this.getLayerIndex(Y),this.getAvailableImages(Y))}return this.workerSources[Y][Ae][Ee]}getDEMWorkerSource(Y,Ae){return this.demWorkerSources[Y]||(this.demWorkerSources[Y]={}),this.demWorkerSources[Y][Ae]||(this.demWorkerSources[Y][Ae]=new R),this.demWorkerSources[Y][Ae]}enforceCacheSizeLimit(Y,Ae){a.enforceCacheSizeLimit(Ae)}}return a.isWorker()&&(self.worker=new nn(self)),nn}),c(["./shared"],function(a){var d=_;function _(g){return!function(i){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var m,v,S=new Blob([""],{type:"text/javascript"}),P=URL.createObjectURL(S);try{v=new Worker(P),m=!0}catch{m=!1}return v&&v.terminate(),URL.revokeObjectURL(P),m}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var m=document.createElement("canvas");m.width=m.height=1;var v=m.getContext("2d");if(!v)return!1;var S=v.getImageData(0,0,1,1);return S&&S.width===m.width}()?(p[u=i&&i.failIfMajorPerformanceCaveat]===void 0&&(p[u]=function(m){var v,S=function(P){var z=document.createElement("canvas"),q=Object.create(_.webGLContextAttributes);return q.failIfMajorPerformanceCaveat=P,z.getContext("webgl",q)||z.getContext("experimental-webgl",q)}(m);if(!S)return!1;try{v=S.createShader(S.VERTEX_SHADER)}catch{return!1}return!(!v||S.isContextLost())&&(S.shaderSource(v,"void main() {}"),S.compileShader(v),S.getShaderParameter(v,S.COMPILE_STATUS)===!0)}(u)),p[u]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var u}(g)}var p={};function E(g,i){if(Array.isArray(g)){if(!Array.isArray(i)||g.length!==i.length)return!1;for(let u=0;u<g.length;u++)if(!E(g[u],i[u]))return!1;return!0}if(typeof g=="object"&&g!==null&&i!==null){if(typeof i!="object"||Object.keys(g).length!==Object.keys(i).length)return!1;for(const u in g)if(!E(g[u],i[u]))return!1;return!0}return g===i}_.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class w{static testProp(i){if(!w.docStyle)return i[0];for(let u=0;u<i.length;u++)if(i[u]in w.docStyle)return i[u];return i[0]}static create(i,u,m){const v=window.document.createElement(i);return u!==void 0&&(v.className=u),m&&m.appendChild(v),v}static createNS(i,u){return window.document.createElementNS(i,u)}static disableDrag(){w.docStyle&&w.selectProp&&(w.userSelect=w.docStyle[w.selectProp],w.docStyle[w.selectProp]="none")}static enableDrag(){w.docStyle&&w.selectProp&&(w.docStyle[w.selectProp]=w.userSelect)}static setTransform(i,u){i.style[w.transformProp]=u}static addEventListener(i,u,m,v={}){i.addEventListener(u,m,"passive"in v?v:v.capture)}static removeEventListener(i,u,m,v={}){i.removeEventListener(u,m,"passive"in v?v:v.capture)}static suppressClickInternal(i){i.preventDefault(),i.stopPropagation(),window.removeEventListener("click",w.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",w.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",w.suppressClickInternal,!0)},0)}static mousePos(i,u){const m=i.getBoundingClientRect();return new a.pointGeometry(u.clientX-m.left-i.clientLeft,u.clientY-m.top-i.clientTop)}static touchPos(i,u){const m=i.getBoundingClientRect(),v=[];for(let S=0;S<u.length;S++)v.push(new a.pointGeometry(u[S].clientX-m.left-i.clientLeft,u[S].clientY-m.top-i.clientTop));return v}static mouseButton(i){return i.button}static remove(i){i.parentNode&&i.parentNode.removeChild(i)}}w.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,w.selectProp=w.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),w.transformProp=w.testProp(["transform","WebkitTransform"]);class x{constructor(i){this._transformRequestFn=i}transformRequest(i,u){return this._transformRequestFn&&this._transformRequestFn(i,u)||{url:i}}normalizeSpriteURL(i,u,m){const v=function(S){const P=S.match(k);if(!P)throw new Error(`Unable to parse URL "${S}"`);return{protocol:P[1],authority:P[2],path:P[3]||"/",params:P[4]?P[4].split("&"):[]}}(i);return v.path+=`${u}${m}`,function(S){const P=S.params.length?`?${S.params.join("&")}`:"";return`${S.protocol}://${S.authority}${S.path}${P}`}(v)}setTransformRequest(i){this._transformRequestFn=i}}const k=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;class Q{constructor(i,u,m,v){this.context=i,this.format=m,this.texture=i.gl.createTexture(),this.update(u,v)}update(i,u,m){const{width:v,height:S}=i,P=!(this.size&&this.size[0]===v&&this.size[1]===S||m),{context:z}=this,{gl:q}=z;if(this.useMipmap=Boolean(u&&u.useMipmap),q.bindTexture(q.TEXTURE_2D,this.texture),z.pixelStoreUnpackFlipY.set(!1),z.pixelStoreUnpack.set(1),z.pixelStoreUnpackPremultiplyAlpha.set(this.format===q.RGBA&&(!u||u.premultiply!==!1)),P)this.size=[v,S],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||a.isImageBitmap(i)?q.texImage2D(q.TEXTURE_2D,0,this.format,this.format,q.UNSIGNED_BYTE,i):q.texImage2D(q.TEXTURE_2D,0,this.format,v,S,0,this.format,q.UNSIGNED_BYTE,i.data);else{const{x:J,y:ie}=m||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||a.isImageBitmap(i)?q.texSubImage2D(q.TEXTURE_2D,0,J,ie,q.RGBA,q.UNSIGNED_BYTE,i):q.texSubImage2D(q.TEXTURE_2D,0,J,ie,v,S,q.RGBA,q.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&q.generateMipmap(q.TEXTURE_2D)}bind(i,u,m){const{context:v}=this,{gl:S}=v;S.bindTexture(S.TEXTURE_2D,this.texture),m!==S.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(m=S.LINEAR),i!==this.filter&&(S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MAG_FILTER,i),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MIN_FILTER,m||i),this.filter=i),u!==this.wrap&&(S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,u),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,u),this.wrap=u)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}function R(g){const{userImage:i}=g;return!!(i&&i.render&&i.render())&&(g.data.replace(new Uint8Array(i.data.buffer)),!0)}class M extends a.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:u,callback:m}of this.requestors)this._notify(u,m);this.requestors=[]}}getImage(i){return this.images[i]}addImage(i,u){if(this.images[i])throw new Error(`Image id ${i} already exist, use updateImage instead`);this._validate(i,u)&&(this.images[i]=u)}_validate(i,u){let m=!0;return this._validateStretch(u.stretchX,u.data&&u.data.width)||(this.fire(new a.ErrorEvent(new Error(`Image "${i}" has invalid "stretchX" value`))),m=!1),this._validateStretch(u.stretchY,u.data&&u.data.height)||(this.fire(new a.ErrorEvent(new Error(`Image "${i}" has invalid "stretchY" value`))),m=!1),this._validateContent(u.content,u)||(this.fire(new a.ErrorEvent(new Error(`Image "${i}" has invalid "content" value`))),m=!1),m}_validateStretch(i,u){if(!i)return!0;let m=0;for(const v of i){if(v[0]<m||v[1]<v[0]||u<v[1])return!1;m=v[1]}return!0}_validateContent(i,u){return!(i&&(i.length!==4||i[0]<0||u.data.width<i[0]||i[1]<0||u.data.height<i[1]||i[2]<0||u.data.width<i[2]||i[3]<0||u.data.height<i[3]||i[2]<i[0]||i[3]<i[1]))}updateImage(i,u){const m=this.images[i];if(m.data.width!==u.data.width||m.data.height!==u.data.height)throw new Error(`size mismatch between old image (${m.data.width}x${m.data.height}) and new image (${u.data.width}x${u.data.height}).`);u.version=m.version+1,this.images[i]=u,this.updatedImages[i]=!0}removeImage(i){const u=this.images[i];delete this.images[i],delete this.patterns[i],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i,u){let m=!0;if(!this.isLoaded())for(const v of i)this.images[v]||(m=!1);this.isLoaded()||m?this._notify(i,u):this.requestors.push({ids:i,callback:u})}_notify(i,u){const m={};for(const v of i){this.images[v]||this.fire(new a.Event("styleimagemissing",{id:v}));const S=this.images[v];S?m[v]={data:S.data.clone(),pixelRatio:S.pixelRatio,sdf:S.sdf,version:S.version,stretchX:S.stretchX,stretchY:S.stretchY,content:S.content,hasRenderCallback:Boolean(S.userImage&&S.userImage.render)}:a.warnOnce(`Image "${v}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}u(null,m)}getPixelSize(){const{width:i,height:u}=this.atlasImage;return{width:i,height:u}}getPattern(i){const u=this.patterns[i],m=this.getImage(i);if(!m)return null;if(u&&u.position.version===m.version)return u.position;if(u)u.position.version=m.version;else{const v={w:m.data.width+2,h:m.data.height+2,x:0,y:0},S=new a.ImagePosition(v,m);this.patterns[i]={bin:v,position:S}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const u=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Q(i,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const S in this.patterns)i.push(this.patterns[S].bin);const{w:u,h:m}=a.potpack(i),v=this.atlasImage;v.resize({width:u||1,height:m||1});for(const S in this.patterns){const{bin:P}=this.patterns[S],z=P.x+1,q=P.y+1,J=this.images[S].data,ie=J.width,pe=J.height;a.RGBAImage.copy(J,v,{x:0,y:0},{x:z,y:q},{width:ie,height:pe}),a.RGBAImage.copy(J,v,{x:0,y:pe-1},{x:z,y:q-1},{width:ie,height:1}),a.RGBAImage.copy(J,v,{x:0,y:0},{x:z,y:q+pe},{width:ie,height:1}),a.RGBAImage.copy(J,v,{x:ie-1,y:0},{x:z-1,y:q},{width:1,height:pe}),a.RGBAImage.copy(J,v,{x:0,y:0},{x:z+ie,y:q},{width:1,height:pe})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const u of i){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;const m=this.images[u];m||a.warnOnce(`Image with ID: "${u}" was not found`),R(m)&&this.updateImage(u,m)}}}const O=1e20;function G(g,i,u,m,v,S,P,z,q){for(let J=i;J<i+m;J++)K(g,u*S+J,S,v,P,z,q);for(let J=u;J<u+v;J++)K(g,J*S+i,1,m,P,z,q)}function K(g,i,u,m,v,S,P){S[0]=0,P[0]=-O,P[1]=O,v[0]=g[i];for(let z=1,q=0,J=0;z<m;z++){v[z]=g[i+z*u];const ie=z*z;do{const pe=S[q];J=(v[z]-v[pe]+ie-pe*pe)/(z-pe)/2}while(J<=P[q]&&--q>-1);q++,S[q]=z,P[q]=J,P[q+1]=O}for(let z=0,q=0;z<m;z++){for(;P[q+1]<z;)q++;const J=S[q],ie=z-J;g[i+z*u]=v[J]+ie*ie}}class Z{constructor(i,u){this.requestManager=i,this.localIdeographFontFamily=u,this.entries={}}setURL(i){this.url=i}getGlyphs(i,u){const m=[];for(const v in i)for(const S of i[v])m.push({stack:v,id:S});a.asyncAll(m,({stack:v,id:S},P)=>{let z=this.entries[v];z||(z=this.entries[v]={glyphs:{},requests:{},ranges:{}});let q=z.glyphs[S];if(q!==void 0)return void P(null,{stack:v,id:S,glyph:q});if(q=this._tinySDF(z,v,S),q)return z.glyphs[S]=q,void P(null,{stack:v,id:S,glyph:q});const J=Math.floor(S/256);if(256*J>65535)return void P(new Error("glyphs > 65535 not supported"));if(z.ranges[J])return void P(null,{stack:v,id:S,glyph:q});let ie=z.requests[J];ie||(ie=z.requests[J]=[],Z.loadGlyphRange(v,J,this.url,this.requestManager,(pe,be)=>{if(be){for(const Ve in be)this._doesCharSupportLocalGlyph(+Ve)||(z.glyphs[+Ve]=be[+Ve]);z.ranges[J]=!0}for(const Ve of ie)Ve(pe,be);delete z.requests[J]})),ie.push((pe,be)=>{pe?P(pe):be&&P(null,{stack:v,id:S,glyph:be[S]||null})})},(v,S)=>{if(v)u(v);else if(S){const P={};for(const{stack:z,id:q,glyph:J}of S)(P[z]||(P[z]={}))[q]=J&&{id:J.id,bitmap:J.bitmap.clone(),metrics:J.metrics};u(null,P)}})}_doesCharSupportLocalGlyph(i){return!!this.localIdeographFontFamily&&(a.unicodeBlockLookup["CJK Unified Ideographs"](i)||a.unicodeBlockLookup["Hangul Syllables"](i)||a.unicodeBlockLookup.Hiragana(i)||a.unicodeBlockLookup.Katakana(i))}_tinySDF(i,u,m){const v=this.localIdeographFontFamily;if(!v||!this._doesCharSupportLocalGlyph(m))return;let S=i.tinySDF;if(!S){let z="400";/bold/i.test(u)?z="900":/medium/i.test(u)?z="500":/light/i.test(u)&&(z="200"),S=i.tinySDF=new Z.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:v,fontWeight:z})}const P=S.draw(String.fromCharCode(m));return{id:m,bitmap:new a.AlphaImage({width:P.width||30,height:P.height||30},P.data),metrics:{width:P.glyphWidth||24,height:P.glyphHeight||24,left:P.glyphLeft||0,top:P.glyphTop-27||-8,advance:P.glyphAdvance||24}}}}Z.loadGlyphRange=function(g,i,u,m,v){const S=256*i,P=S+255,z=m.transformRequest(u.replace("{fontstack}",g).replace("{range}",`${S}-${P}`),a.ResourceType.Glyphs);a.getArrayBuffer(z,(q,J)=>{if(q)v(q);else if(J){const ie={};for(const pe of a.parseGlyphPbf(J))ie[pe.id]=pe;v(null,ie)}})},Z.TinySDF=class{constructor({fontSize:g=24,buffer:i=3,radius:u=8,cutoff:m=.25,fontFamily:v="sans-serif",fontWeight:S="normal",fontStyle:P="normal"}={}){this.buffer=i,this.cutoff=m,this.radius=u;const z=this.size=g+4*i,q=this._createCanvas(z),J=this.ctx=q.getContext("2d",{willReadFrequently:!0});J.font=`${P} ${S} ${g}px ${v}`,J.textBaseline="alphabetic",J.textAlign="left",J.fillStyle="black",this.gridOuter=new Float64Array(z*z),this.gridInner=new Float64Array(z*z),this.f=new Float64Array(z),this.z=new Float64Array(z+1),this.v=new Uint16Array(z)}_createCanvas(g){const i=document.createElement("canvas");return i.width=i.height=g,i}draw(g){const{width:i,actualBoundingBoxAscent:u,actualBoundingBoxDescent:m,actualBoundingBoxLeft:v,actualBoundingBoxRight:S}=this.ctx.measureText(g),P=Math.ceil(u),z=Math.min(this.size-this.buffer,Math.ceil(S-v)),q=Math.min(this.size-this.buffer,P+Math.ceil(m)),J=z+2*this.buffer,ie=q+2*this.buffer,pe=Math.max(J*ie,0),be=new Uint8ClampedArray(pe),Ve={data:be,width:J,height:ie,glyphWidth:z,glyphHeight:q,glyphTop:P,glyphLeft:0,glyphAdvance:i};if(z===0||q===0)return Ve;const{ctx:Ne,buffer:He,gridInner:ct,gridOuter:wt}=this;Ne.clearRect(He,He,z,q),Ne.fillText(g,He,He+P);const St=Ne.getImageData(He,He,z,q);wt.fill(O,0,pe),ct.fill(0,0,pe);for(let We=0;We<q;We++)for(let Rt=0;Rt<z;Rt++){const Qt=St.data[4*(We*z+Rt)+3]/255;if(Qt===0)continue;const Xt=(We+He)*J+Rt+He;if(Qt===1)wt[Xt]=0,ct[Xt]=O;else{const Zt=.5-Qt;wt[Xt]=Zt>0?Zt*Zt:0,ct[Xt]=Zt<0?Zt*Zt:0}}G(wt,0,0,J,ie,J,this.f,this.v,this.z),G(ct,He,He,z,q,J,this.f,this.v,this.z);for(let We=0;We<pe;We++){const Rt=Math.sqrt(wt[We])-Math.sqrt(ct[We]);be[We]=Math.round(255-255*(Rt/this.radius+this.cutoff))}return Ve}};const $=new a.Properties({anchor:new a.DataConstantProperty(a.spec.light.anchor),position:new class{constructor(){this.specification=a.spec.light.position}possiblyEvaluate(g,i){return a.sphericalToCartesian(g.expression.evaluate(i))}interpolate(g,i,u){return{x:a.number(g.x,i.x,u),y:a.number(g.y,i.y,u),z:a.number(g.z,i.z,u)}}},color:new a.DataConstantProperty(a.spec.light.color),intensity:new a.DataConstantProperty(a.spec.light.intensity)}),he="-transition";class fe extends a.Evented{constructor(i){super(),this._transitionable=new a.Transitionable($),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,u={}){if(!this._validate(a.validateLight,i,u))for(const m in i){const v=i[m];m.endsWith(he)?this._transitionable.setTransition(m.slice(0,-he.length),v):this._transitionable.setValue(m,v)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,u,m){return(!m||m.validate!==!1)&&a.emitValidationErrors(this,i.call(a.validateStyle,a.extend({value:u,style:{glyphs:!0,sprite:!0},styleSpec:a.spec})))}}class _e{constructor(i,u){this.width=i,this.height=u,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(i,u){const m=i.join(",")+String(u);return this.dashEntry[m]||(this.dashEntry[m]=this.addDash(i,u)),this.dashEntry[m]}getDashRanges(i,u,m){const v=[];let S=i.length%2==1?-i[i.length-1]*m:0,P=i[0]*m,z=!0;v.push({left:S,right:P,isDash:z,zeroLength:i[0]===0});let q=i[0];for(let J=1;J<i.length;J++){z=!z;const ie=i[J];S=q*m,q+=ie,P=q*m,v.push({left:S,right:P,isDash:z,zeroLength:ie===0})}return v}addRoundDash(i,u,m){const v=u/2;for(let S=-m;S<=m;S++){const P=this.width*(this.nextRow+m+S);let z=0,q=i[z];for(let J=0;J<this.width;J++){J/q.right>1&&(q=i[++z]);const ie=Math.abs(J-q.left),pe=Math.abs(J-q.right),be=Math.min(ie,pe);let Ve;const Ne=S/m*(v+1);if(q.isDash){const He=v-Math.abs(Ne);Ve=Math.sqrt(be*be+He*He)}else Ve=v-Math.sqrt(be*be+Ne*Ne);this.data[P+J]=Math.max(0,Math.min(255,Ve+128))}}}addRegularDash(i){for(let z=i.length-1;z>=0;--z){const q=i[z],J=i[z+1];q.zeroLength?i.splice(z,1):J&&J.isDash===q.isDash&&(J.left=q.left,i.splice(z,1))}const u=i[0],m=i[i.length-1];u.isDash===m.isDash&&(u.left=m.left-this.width,m.right=u.right+this.width);const v=this.width*this.nextRow;let S=0,P=i[S];for(let z=0;z<this.width;z++){z/P.right>1&&(P=i[++S]);const q=Math.abs(z-P.left),J=Math.abs(z-P.right),ie=Math.min(q,J);this.data[v+z]=Math.max(0,Math.min(255,(P.isDash?ie:-ie)+128))}}addDash(i,u){const m=u?7:0,v=2*m+1;if(this.nextRow+v>this.height)return a.warnOnce("LineAtlas out of space"),null;let S=0;for(let z=0;z<i.length;z++)S+=i[z];if(S!==0){const z=this.width/S,q=this.getDashRanges(i,this.width,z);u?this.addRoundDash(q,z,m):this.addRegularDash(q)}const P={y:(this.nextRow+m+.5)/this.height,height:2*m/this.height,width:S};return this.nextRow+=v,this.dirty=!0,P}bind(i){const u=i.gl;this.texture?(u.bindTexture(u.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,u.texSubImage2D(u.TEXTURE_2D,0,0,0,this.width,this.height,u.ALPHA,u.UNSIGNED_BYTE,this.data))):(this.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,this.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.ALPHA,this.width,this.height,0,u.ALPHA,u.UNSIGNED_BYTE,this.data))}}class ue{constructor(i,u){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=a.uniqueId();const m=this.workerPool.acquire(this.id);for(let v=0;v<m.length;v++){const S=new ue.Actor(m[v],u,this.id);S.name=`Worker ${v}`,this.actors.push(S)}if(!this.actors.length)throw new Error("No actors found")}broadcast(i,u,m){a.asyncAll(this.actors,(v,S)=>{v.send(i,u,S)},m=m||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(i=>{i.remove()}),this.actors=[],this.workerPool.release(this.id)}}function ee(g,i,u){const m=function(v,S){if(v)return u(v);if(S){const P=a.pick(a.extend(S,g),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);S.vector_layers&&(P.vectorLayers=S.vector_layers,P.vectorLayerIds=P.vectorLayers.map(z=>z.id)),u(null,P)}};return g.url?a.getJSON(i.transformRequest(g.url,a.ResourceType.Source),m):a.exported.frame(()=>m(null,g))}ue.Actor=a.Actor;class se{constructor(i,u,m){this.bounds=a.LngLatBounds.convert(this.validateBounds(i)),this.minzoom=u||0,this.maxzoom=m||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const u=Math.pow(2,i.z),m=Math.floor(a.mercatorXfromLng(this.bounds.getWest())*u),v=Math.floor(a.mercatorYfromLat(this.bounds.getNorth())*u),S=Math.ceil(a.mercatorXfromLng(this.bounds.getEast())*u),P=Math.ceil(a.mercatorYfromLat(this.bounds.getSouth())*u);return i.x>=m&&i.x<S&&i.y>=v&&i.y<P}}class Be extends a.Evented{constructor(i,u,m,v){if(super(),this.id=i,this.dispatcher=m,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.extend(this,a.pick(u,["url","scheme","tileSize","promoteId"])),this._options=a.extend({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(v)}load(){this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=ee(this._options,this.map._requestManager,(i,u)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),i?this.fire(new a.ErrorEvent(i)):u&&(a.extend(this,u),u.bounds&&(this.tileBounds=new se(u.bounds,this.minzoom,this.maxzoom)),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.cancel(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return a.extend({},this._options)}loadTile(i,u){const m=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),v={request:this.map._requestManager.transformRequest(m,a.ResourceType.Tile),uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function S(P,z){return delete i.request,i.aborted?u(null):P&&P.status!==404?u(P):(z&&z.resourceTiming&&(i.resourceTiming=z.resourceTiming),this.map._refreshExpiredTiles&&z&&i.setExpiryData(z),i.loadVectorData(z,this.map.painter),a.cacheEntryPossiblyAdded(this.dispatcher),u(null),void(i.reloadCallback&&(this.loadTile(i,i.reloadCallback),i.reloadCallback=null)))}v.request.collectResourceTiming=this._collectResourceTiming,i.actor&&i.state!=="expired"?i.state==="loading"?i.reloadCallback=u:i.request=i.actor.send("reloadTile",v,S.bind(this)):(i.actor=this.dispatcher.getActor(),i.request=i.actor.send("loadTile",v,S.bind(this)))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.actor&&i.actor.send("abortTile",{uid:i.uid,type:this.type,source:this.id},void 0)}unloadTile(i){i.unloadVectorData(),i.actor&&i.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class me extends a.Evented{constructor(i,u,m,v){super(),this.id=i,this.dispatcher=m,this.setEventedParent(v),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.extend({type:"raster"},u),a.extend(this,a.pick(u,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=ee(this._options,this.map._requestManager,(i,u)=>{this._tileJSONRequest=null,this._loaded=!0,i?this.fire(new a.ErrorEvent(i)):u&&(a.extend(this,u),u.bounds&&(this.tileBounds=new se(u.bounds,this.minzoom,this.maxzoom)),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return a.extend({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i,u){const m=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);i.request=a.getImage(this.map._requestManager.transformRequest(m,a.ResourceType.Tile),(v,S,P)=>{if(delete i.request,i.aborted)i.state="unloaded",u(null);else if(v)i.state="errored",u(v);else if(S){this.map._refreshExpiredTiles&&i.setExpiryData(P);const z=this.map.painter.context,q=z.gl;i.texture=this.map.painter.getTileTexture(S.width),i.texture?i.texture.update(S,{useMipmap:!0}):(i.texture=new Q(z,S,q.RGBA,{useMipmap:!0}),i.texture.bind(q.LINEAR,q.CLAMP_TO_EDGE,q.LINEAR_MIPMAP_NEAREST),z.extTextureFilterAnisotropic&&q.texParameterf(q.TEXTURE_2D,z.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,z.extTextureFilterAnisotropicMax)),i.state="loaded",a.cacheEntryPossiblyAdded(this.dispatcher),u(null)}})}abortTile(i,u){i.request&&(i.request.cancel(),delete i.request),u()}unloadTile(i,u){i.texture&&this.map.painter.saveTileTexture(i.texture),u()}hasTransition(){return!1}}let Pe;class ge extends me{constructor(i,u,m,v){super(i,u,m,v),this.type="raster-dem",this.maxzoom=22,this._options=a.extend({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(i,u){const m=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function v(S,P){S&&(i.state="errored",u(S)),P&&(i.dem=P,i.needsHillshadePrepare=!0,i.needsTerrainPrepare=!0,i.state="loaded",u(null))}i.request=a.getImage(this.map._requestManager.transformRequest(m,a.ResourceType.Tile),function(S,P){if(delete i.request,i.aborted)i.state="unloaded",u(null);else if(S)i.state="errored",u(S);else if(P){this.map._refreshExpiredTiles&&i.setExpiryData(P),delete P.cacheControl,delete P.expires;const z=a.isImageBitmap(P)&&(Pe==null&&(Pe=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),Pe)?P:a.exported.getImageData(P,1),q={uid:i.uid,coord:i.tileID,source:this.id,rawImageData:z,encoding:this.encoding};i.actor&&i.state!=="expired"||(i.actor=this.dispatcher.getActor(),i.actor.send("loadDEMTile",q,v.bind(this)))}}.bind(this)),i.neighboringTiles=this._getNeighboringTiles(i.tileID)}_getNeighboringTiles(i){const u=i.canonical,m=Math.pow(2,u.z),v=(u.x-1+m)%m,S=u.x===0?i.wrap-1:i.wrap,P=(u.x+1+m)%m,z=u.x+1===m?i.wrap+1:i.wrap,q={};return q[new a.OverscaledTileID(i.overscaledZ,S,u.z,v,u.y).key]={backfilled:!1},q[new a.OverscaledTileID(i.overscaledZ,z,u.z,P,u.y).key]={backfilled:!1},u.y>0&&(q[new a.OverscaledTileID(i.overscaledZ,S,u.z,v,u.y-1).key]={backfilled:!1},q[new a.OverscaledTileID(i.overscaledZ,i.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},q[new a.OverscaledTileID(i.overscaledZ,z,u.z,P,u.y-1).key]={backfilled:!1}),u.y+1<m&&(q[new a.OverscaledTileID(i.overscaledZ,S,u.z,v,u.y+1).key]={backfilled:!1},q[new a.OverscaledTileID(i.overscaledZ,i.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},q[new a.OverscaledTileID(i.overscaledZ,z,u.z,P,u.y+1).key]={backfilled:!1}),q}unloadTile(i){i.demTexture&&this.map.painter.saveTileTexture(i.demTexture),i.fbo&&(i.fbo.destroy(),delete i.fbo),i.dem&&delete i.dem,delete i.neighboringTiles,i.state="unloaded",i.actor&&i.actor.send("removeDEMTile",{uid:i.uid,source:this.id})}}class Qe extends a.Evented{constructor(i,u,m,v){super(),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=m.getActor(),this.setEventedParent(v),this._data=u.data,this._options=a.extend({},u),this._collectResourceTiming=u.collectResourceTiming,u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId;const S=a.EXTENT/this.tileSize;this.workerOptions=a.extend({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:(u.buffer!==void 0?u.buffer:128)*S,tolerance:(u.tolerance!==void 0?u.tolerance:.375)*S,extent:a.EXTENT,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:u.clusterMaxZoom!==void 0?u.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,u.clusterMinPoints||2),extent:a.EXTENT,radius:(u.clusterRadius||50)*S,log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(i){this.map=i,this.load()}setData(i){return this._data=i,this._updateWorkerData("content"),this}getClusterExpansionZoom(i,u){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:i,source:this.id},u),this}getClusterChildren(i,u){return this.actor.send("geojson.getClusterChildren",{clusterId:i,source:this.id},u),this}getClusterLeaves(i,u,m,v){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:i,limit:u,offset:m},v),this}_updateWorkerData(i){const u=a.extend({},this.workerOptions),m=this._data;typeof m=="string"?(u.request=this.map._requestManager.transformRequest(a.exported.resolveURL(m),a.ResourceType.Source),u.request.collectResourceTiming=this._collectResourceTiming):u.data=JSON.stringify(m),this._pendingLoads++,this.fire(new a.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,u,(v,S)=>{if(this._pendingLoads--,this._removed||S&&S.abandoned)return void this.fire(new a.Event("dataabort",{dataType:"source",sourceDataType:i}));let P=null;if(S&&S.resourceTiming&&S.resourceTiming[this.id]&&(P=S.resourceTiming[this.id].slice(0)),v)return void this.fire(new a.ErrorEvent(v));const z={dataType:"source",sourceDataType:i};this._collectResourceTiming&&P&&P.length>0&&a.extend(z,{resourceTiming:P}),this.fire(new a.Event("data",z))})}loaded(){return this._pendingLoads===0}loadTile(i,u){const m=i.actor?"reloadTile":"loadTile";i.actor=this.actor;const v={type:this.type,uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};i.request=this.actor.send(m,v,(S,P)=>(delete i.request,i.unloadVectorData(),i.aborted?u(null):S?u(S):(i.loadVectorData(P,this.map.painter,m==="reloadTile"),u(null))))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.aborted=!0}unloadTile(i){i.unloadVectorData(),this.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return a.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var Te=a.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class tt extends a.Evented{constructor(i,u,m,v){super(),this.id=i,this.dispatcher=m,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(v),this.options=u}load(i,u){this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this.url=this.options.url,a.getImage(this.map._requestManager.transformRequest(this.url,a.ResourceType.Image),(m,v)=>{this._loaded=!0,m?this.fire(new a.ErrorEvent(m)):v&&(this.image=v,i&&(this.coordinates=i),u&&u(),this._finishLoading())})}loaded(){return this._loaded}updateImage(i){return this.image&&i.url?(this.options.url=i.url,this.load(i.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}setCoordinates(i){this.coordinates=i;const u=i.map(a.MercatorCoordinate.fromLngLat);this.tileID=function(v){let S=1/0,P=1/0,z=-1/0,q=-1/0;for(const be of v)S=Math.min(S,be.x),P=Math.min(P,be.y),z=Math.max(z,be.x),q=Math.max(q,be.y);const J=Math.max(z-S,q-P),ie=Math.max(0,Math.floor(-Math.log(J)/Math.LN2)),pe=Math.pow(2,ie);return new a.CanonicalTileID(ie,Math.floor((S+z)/2*pe),Math.floor((P+q)/2*pe))}(u),this.minzoom=this.maxzoom=this.tileID.z;const m=u.map(v=>this.tileID.getTilePoint(v)._round());return this._boundsArray=new a.RasterBoundsArray,this._boundsArray.emplaceBack(m[0].x,m[0].y,0,0),this._boundsArray.emplaceBack(m[1].x,m[1].y,a.EXTENT,0),this._boundsArray.emplaceBack(m[3].x,m[3].y,0,a.EXTENT),this._boundsArray.emplaceBack(m[2].x,m[2].y,a.EXTENT,a.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const i=this.map.painter.context,u=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,Te.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Q(i,this.image,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));for(const m in this.tiles){const v=this.tiles[m];v.state!=="loaded"&&(v.state="loaded",v.texture=this.texture)}}loadTile(i,u){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={},u(null)):(i.state="errored",u(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Oe extends tt{constructor(i,u,m,v){super(i,u,m,v),this.roundZoom=!0,this.type="video",this.options=u}load(){this._loaded=!1;const i=this.options;this.urls=[];for(const u of i.urls)this.urls.push(this.map._requestManager.transformRequest(u,a.ResourceType.Source).url);a.getVideo(this.urls,(u,m)=>{this._loaded=!0,u?this.fire(new a.ErrorEvent(u)):m&&(this.video=m,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(i){if(this.video){const u=this.video.seekable;i<u.start(0)||i>u.end(0)?this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=i}}getVideo(){return this.video}onAdd(i){this.map||(this.map=i,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const i=this.map.painter.context,u=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,Te.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),u.texSubImage2D(u.TEXTURE_2D,0,0,0,u.RGBA,u.UNSIGNED_BYTE,this.video)):(this.texture=new Q(i,this.video,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));for(const m in this.tiles){const v=this.tiles[m];v.state!=="loaded"&&(v.state="loaded",v.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Mt extends tt{constructor(i,u,m,v){super(i,u,m,v),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some(S=>!Array.isArray(S)||S.length!==2||S.some(P=>typeof P!="number"))||this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${i}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${i}`,null,'missing required property "coordinates"'))),u.animate&&typeof u.animate!="boolean"&&this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${i}`,null,'optional "animate" property must be a boolean value'))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof HTMLCanvasElement||this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${i}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${i}`,null,'missing required property "canvas"'))),this.options=u,this.animate=u.animate===void 0||u.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(i){this.map=i,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let i=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,i=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,i=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const u=this.map.painter.context,m=u.gl;this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,Te.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(i||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Q(u,this.canvas,m.RGBA,{premultiply:!0});for(const v in this.tiles){const S=this.tiles[v];S.state!=="loaded"&&(S.state="loaded",S.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const i of[this.canvas.width,this.canvas.height])if(isNaN(i)||i<=0)return!0;return!1}}const ne={vector:Be,raster:me,"raster-dem":ge,geojson:Qe,video:Oe,image:tt,canvas:Mt};function Se(g,i){const u=a.create();return a.translate(u,u,[1,1,0]),a.scale(u,u,[.5*g.width,.5*g.height,1]),a.multiply(u,u,g.calculatePosMatrix(i.toUnwrapped()))}function ke(g,i,u,m,v,S){const P=function(pe,be,Ve){if(pe)for(const Ne of pe){const He=be[Ne];if(He&&He.source===Ve&&He.type==="fill-extrusion")return!0}else for(const Ne in be){const He=be[Ne];if(He.source===Ve&&He.type==="fill-extrusion")return!0}return!1}(v&&v.layers,i,g.id),z=S.maxPitchScaleFactor(),q=g.tilesIn(m,z,P);q.sort(Ke);const J=[];for(const pe of q)J.push({wrappedTileID:pe.tileID.wrapped().key,queryResults:pe.tile.queryRenderedFeatures(i,u,g._state,pe.queryGeometry,pe.cameraQueryGeometry,pe.scale,v,S,z,Se(g.transform,pe.tileID))});const ie=function(pe){const be={},Ve={};for(const Ne of pe){const He=Ne.queryResults,ct=Ne.wrappedTileID,wt=Ve[ct]=Ve[ct]||{};for(const St in He){const We=He[St],Rt=wt[St]=wt[St]||{},Qt=be[St]=be[St]||[];for(const Xt of We)Rt[Xt.featureIndex]||(Rt[Xt.featureIndex]=!0,Qt.push(Xt))}}return be}(J);for(const pe in ie)ie[pe].forEach(be=>{const Ve=be.feature,Ne=g.getFeatureState(Ve.layer["source-layer"],Ve.id);Ve.source=Ve.layer.source,Ve.layer["source-layer"]&&(Ve.sourceLayer=Ve.layer["source-layer"]),Ve.state=Ne});return ie}function Ke(g,i){const u=g.tileID,m=i.tileID;return u.overscaledZ-m.overscaledZ||u.canonical.y-m.canonical.y||u.wrap-m.wrap||u.canonical.x-m.canonical.x}class at{constructor(i,u){this.tileID=i,this.uid=a.uniqueId(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.textures=[],this.textureCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(i){const u=i+this.timeAdded;u<a.exported.now()||this.fadeEndTime&&u<this.fadeEndTime||(this.fadeEndTime=u)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(i){this.demTexture&&i.saveTileTexture(this.demTexture),this.textures.forEach(u=>i.saveTileTexture(u)),this.demTexture=null,this.textures=[],this.textureCoords={}}loadVectorData(i,u,m){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(v,S){const P={};if(!S)return P;for(const z of v){const q=z.layerIds.map(J=>S.getLayer(J)).filter(Boolean);if(q.length!==0){z.layers=q,z.stateDependentLayerIds&&(z.stateDependentLayers=z.stateDependentLayerIds.map(J=>q.filter(ie=>ie.id===J)[0]));for(const J of q)P[J.id]=z}}return P}(i.buckets,u.style),this.hasSymbolBuckets=!1;for(const v in this.buckets){const S=this.buckets[v];if(S instanceof a.SymbolBucket){if(this.hasSymbolBuckets=!0,!m)break;S.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const v in this.buckets){const S=this.buckets[v];if(S instanceof a.SymbolBucket&&S.hasRTLText){this.hasRTLText=!0,a.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const v in this.buckets){const S=this.buckets[v];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(v).queryRadius(S))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage)}else this.collisionBoxArray=new a.CollisionBoxArray}unloadVectorData(){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(i){return this.buckets[i.id]}upload(i){for(const m in this.buckets){const v=this.buckets[m];v.uploadPending()&&v.upload(i)}const u=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Q(i,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Q(i,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,u,m,v,S,P,z,q,J,ie){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:v,cameraQueryGeometry:S,scale:P,tileSize:this.tileSize,pixelPosMatrix:ie,transform:q,params:z,queryPadding:this.queryPadding*J},i,u,m):{}}querySourceFeatures(i,u){const m=this.latestFeatureIndex;if(!m||!m.rawTileData)return;const v=m.loadVTLayers(),S=u?u.sourceLayer:"",P=v._geojsonTileLayer||v[S];if(!P)return;const z=a.createFilter(u&&u.filter),{z:q,x:J,y:ie}=this.tileID.canonical,pe={z:q,x:J,y:ie};for(let be=0;be<P.length;be++){const Ve=P.feature(be);if(z.needGeometry){const ct=a.toEvaluationFeature(Ve,!0);if(!z.filter(new a.EvaluationParameters(this.tileID.overscaledZ),ct,this.tileID.canonical))continue}else if(!z.filter(new a.EvaluationParameters(this.tileID.overscaledZ),Ve))continue;const Ne=m.getId(Ve,S),He=new a.GeoJSONFeature(Ve,q,J,ie,Ne);He.tile=pe,i.push(He)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const u=this.expirationTime;if(i.cacheControl){const m=a.parseCacheControl(i.cacheControl);m["max-age"]&&(this.expirationTime=Date.now()+1e3*m["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const m=Date.now();let v=!1;if(this.expirationTime>m)v=!1;else if(u)if(this.expirationTime<u)v=!0;else{const S=this.expirationTime-u;S?this.expirationTime=m+Math.max(S,3e4):v=!0}else v=!0;v?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0)return;const m=this.latestFeatureIndex.loadVTLayers();for(const v in this.buckets){if(!u.style.hasLayer(v))continue;const S=this.buckets[v],P=S.layers[0].sourceLayer||"_geojsonTileLayer",z=m[P],q=i[P];if(!z||!q||Object.keys(q).length===0)continue;S.update(q,z,this.imageAtlas&&this.imageAtlas.patternPositions||{});const J=u&&u.style&&u.style.getLayer(v);J&&(this.queryPadding=Math.max(this.queryPadding,J.queryRadius(S)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<a.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=a.exported.now()+i}setDependencies(i,u){const m={};for(const v of u)m[v]=!0;this.dependencies[i]=m}hasDependency(i,u){for(const m of i){const v=this.dependencies[m];if(v){for(const S of u)if(v[S])return!0}}return!1}}class dt{constructor(i,u){this.max=i,this.onRemove=u,this.reset()}reset(){for(const i in this.data)for(const u of this.data[i])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(i,u,m){const v=i.wrapped().key;this.data[v]===void 0&&(this.data[v]=[]);const S={value:u,timeout:void 0};if(m!==void 0&&(S.timeout=setTimeout(()=>{this.remove(i,S)},m)),this.data[v].push(S),this.order.push(v),this.order.length>this.max){const P=this._getAndRemoveByKey(this.order[0]);P&&this.onRemove(P)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const u=this.data[i].shift();return u.timeout&&clearTimeout(u.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),u.value}getByKey(i){const u=this.data[i];return u?u[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,u){if(!this.has(i))return this;const m=i.wrapped().key,v=u===void 0?0:this.data[m].indexOf(u),S=this.data[m][v];return this.data[m].splice(v,1),S.timeout&&clearTimeout(S.timeout),this.data[m].length===0&&delete this.data[m],this.onRemove(S.value),this.order.splice(this.order.indexOf(m),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(i){const u=[];for(const m in this.data)for(const v of this.data[m])i(v.value)||u.push(v);for(const m of u)this.remove(m.value.tileID,m)}}class Bt{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,u,m){const v=String(u);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][v]=this.stateChanges[i][v]||{},a.extend(this.stateChanges[i][v],m),this.deletedStates[i]===null){this.deletedStates[i]={};for(const S in this.state[i])S!==v&&(this.deletedStates[i][S]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][v]===null){this.deletedStates[i][v]={};for(const S in this.state[i][v])m[S]||(this.deletedStates[i][v][S]=null)}else for(const S in m)this.deletedStates[i]&&this.deletedStates[i][v]&&this.deletedStates[i][v][S]===null&&delete this.deletedStates[i][v][S]}removeFeatureState(i,u,m){if(this.deletedStates[i]===null)return;const v=String(u);if(this.deletedStates[i]=this.deletedStates[i]||{},m&&u!==void 0)this.deletedStates[i][v]!==null&&(this.deletedStates[i][v]=this.deletedStates[i][v]||{},this.deletedStates[i][v][m]=null);else if(u!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][v])for(m in this.deletedStates[i][v]={},this.stateChanges[i][v])this.deletedStates[i][v][m]=null;else this.deletedStates[i][v]=null;else this.deletedStates[i]=null}getState(i,u){const m=String(u),v=a.extend({},(this.state[i]||{})[m],(this.stateChanges[i]||{})[m]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const S=this.deletedStates[i][u];if(S===null)return{};for(const P in S)delete v[P]}return v}initializeTileState(i,u){i.setFeatureState(this.state,u)}coalesceChanges(i,u){const m={};for(const v in this.stateChanges){this.state[v]=this.state[v]||{};const S={};for(const P in this.stateChanges[v])this.state[v][P]||(this.state[v][P]={}),a.extend(this.state[v][P],this.stateChanges[v][P]),S[P]=this.state[v][P];m[v]=S}for(const v in this.deletedStates){this.state[v]=this.state[v]||{};const S={};if(this.deletedStates[v]===null)for(const P in this.state[v])S[P]={},this.state[v][P]={};else for(const P in this.deletedStates[v]){if(this.deletedStates[v][P]===null)this.state[v][P]={};else for(const z of Object.keys(this.deletedStates[v][P]))delete this.state[v][P][z];S[P]=this.state[v][P]}m[v]=m[v]||{},a.extend(m[v],S)}if(this.stateChanges={},this.deletedStates={},Object.keys(m).length!==0)for(const v in i)i[v].setFeatureState(m,u)}}class Ge extends a.Evented{constructor(i,u,m){super(),this.id=i,this.dispatcher=m,this.on("data",v=>{v.dataType==="source"&&v.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&v.dataType==="source"&&v.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain))}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=function(v,S,P,z){const q=new ne[S.type](v,S,P,z);if(q.id!==v)throw new Error(`Expected Source id to be ${v} instead of ${q.id}`);return a.bindAll(["load","abort","unload","serialize","prepare"],q),q}(i,u,m,this),this._tiles={},this._cache=new dt(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Bt}onAdd(i){this.map=i,this._maxTileCacheSize=i?i._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(i)}onRemove(i){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(i)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const i in this._tiles){const u=this._tiles[i];if(u.state!=="loaded"&&u.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(i,u){return this._source.loadTile(i,u)}_unloadTile(i){if(this._source.unloadTile)return this._source.unloadTile(i,()=>{})}_abortTile(i){this._source.abortTile&&this._source.abortTile(i,()=>{}),this._source.fire(new a.Event("dataabort",{tile:i,coord:i.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const u in this._tiles){const m=this._tiles[u];m.upload(i),m.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(i=>i.tileID).sort(rt).map(i=>i.key)}getRenderableIds(i){const u=[];for(const m in this._tiles)this._isIdRenderable(m,i)&&u.push(this._tiles[m]);return i?u.sort((m,v)=>{const S=m.tileID,P=v.tileID,z=new a.pointGeometry(S.canonical.x,S.canonical.y)._rotate(this.transform.angle),q=new a.pointGeometry(P.canonical.x,P.canonical.y)._rotate(this.transform.angle);return S.overscaledZ-P.overscaledZ||q.y-z.y||q.x-z.x}).map(m=>m.tileID.key):u.map(m=>m.tileID).sort(rt).map(m=>m.key)}hasRenderableParent(i){const u=this.findLoadedParent(i,0);return!!u&&this._isIdRenderable(u.tileID.key)}_isIdRenderable(i,u){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(u||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(i,"reloading")}}_reloadTile(i,u){const m=this._tiles[i];m&&(m.state!=="loading"&&(m.state=u),this._loadTile(m,this._tileLoaded.bind(this,m,i,u)))}_tileLoaded(i,u,m,v){if(v)return i.state="errored",void(v.status!==404?this._source.fire(new a.ErrorEvent(v,{tile:i})):this.update(this.transform,this.terrain));i.timeAdded=a.exported.now(),m==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(u,i),this.getSource().type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),i.aborted||this._source.fire(new a.Event("data",{dataType:"source",tile:i,coord:i.tileID}))}_backfillDEM(i){const u=this.getRenderableIds();for(let v=0;v<u.length;v++){const S=u[v];if(i.neighboringTiles&&i.neighboringTiles[S]){const P=this.getTileByID(S);m(i,P),m(P,i)}}function m(v,S){v.needsHillshadePrepare=!0,v.needsTerrainPrepare=!0;let P=S.tileID.canonical.x-v.tileID.canonical.x;const z=S.tileID.canonical.y-v.tileID.canonical.y,q=Math.pow(2,v.tileID.canonical.z),J=S.tileID.key;P===0&&z===0||Math.abs(z)>1||(Math.abs(P)>1&&(Math.abs(P+q)===1?P+=q:Math.abs(P-q)===1&&(P-=q)),S.dem&&v.dem&&(v.dem.backfillBorder(S.dem,P,z),v.neighboringTiles&&v.neighboringTiles[J]&&(v.neighboringTiles[J].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,u,m,v){for(const S in this._tiles){let P=this._tiles[S];if(v[S]||!P.hasData()||P.tileID.overscaledZ<=u||P.tileID.overscaledZ>m)continue;let z=P.tileID;for(;P&&P.tileID.overscaledZ>u+1;){const J=P.tileID.scaledTo(P.tileID.overscaledZ-1);P=this._tiles[J.key],P&&P.hasData()&&(z=J)}let q=z;for(;q.overscaledZ>u;)if(q=q.scaledTo(q.overscaledZ-1),i[q.key]){v[z.key]=z;break}}}findLoadedParent(i,u){if(i.key in this._loadedParentTiles){const m=this._loadedParentTiles[i.key];return m&&m.tileID.overscaledZ>=u?m:null}for(let m=i.overscaledZ-1;m>=u;m--){const v=i.scaledTo(m),S=this._getLoadedTile(v);if(S)return S}}_getLoadedTile(i){const u=this._tiles[i.key];return u&&u.hasData()?u:this._cache.getByKey(i.wrapped().key)}updateCacheSize(i){const u=Math.ceil(i.width/this._source.tileSize)+1,m=Math.ceil(i.height/this._source.tileSize)+1,v=Math.floor(u*m*5),S=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,v):v;this._cache.setMaxSize(S)}handleWrapJump(i){const u=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,u){const m={};for(const v in this._tiles){const S=this._tiles[v];S.tileID=S.tileID.unwrapTo(S.tileID.wrap+u),m[S.tileID.key]=S}this._tiles=m;for(const v in this._timers)clearTimeout(this._timers[v]),delete this._timers[v];for(const v in this._tiles)this._setTileReloadTimer(v,this._tiles[v])}}update(i,u){if(this.transform=i,this.terrain=u,!this._sourceLoaded||this._paused)return;let m;this.updateCacheSize(i),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?m=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(J=>new a.OverscaledTileID(J.canonical.z,J.wrap,J.canonical.z,J.canonical.x,J.canonical.y)):(m=i.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:u}),this._source.hasTile&&(m=m.filter(J=>this._source.hasTile(J)))):m=[];const v=i.coveringZoomLevel(this._source),S=Math.max(v-Ge.maxOverzooming,this._source.minzoom),P=Math.max(v+Ge.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const J={};for(const ie of m)if(ie.canonical.z>this._source.minzoom){const pe=ie.scaledTo(ie.canonical.z-1);J[pe.key]=pe;const be=ie.scaledTo(Math.max(this._source.minzoom,Math.min(ie.canonical.z,5)));J[be.key]=be}m=m.concat(Object.values(J))}const z=this._updateRetainedTiles(m,v);if(Ut(this._source.type)){const J={},ie={},pe=Object.keys(z);for(const be of pe){const Ve=z[be],Ne=this._tiles[be];if(!Ne||Ne.fadeEndTime&&Ne.fadeEndTime<=a.exported.now())continue;const He=this.findLoadedParent(Ve,S);He&&(this._addTile(He.tileID),J[He.tileID.key]=He.tileID),ie[be]=Ve}this._retainLoadedChildren(ie,v,P,z);for(const be in J)z[be]||(this._coveredTiles[be]=!0,z[be]=J[be]);if(u){const be={},Ve={};for(const Ne of m)this._tiles[Ne.key].hasData()?be[Ne.key]=Ne:Ve[Ne.key]=Ne;for(const Ne in Ve){const He=Ve[Ne].children(this._source.maxzoom);this._tiles[He[0].key]&&this._tiles[He[1].key]&&this._tiles[He[2].key]&&this._tiles[He[3].key]&&(be[He[0].key]=z[He[0].key]=He[0],be[He[1].key]=z[He[1].key]=He[1],be[He[2].key]=z[He[2].key]=He[2],be[He[3].key]=z[He[3].key]=He[3],delete Ve[Ne])}for(const Ne in Ve){const He=this.findLoadedParent(Ve[Ne],this._source.minzoom);if(He){be[He.tileID.key]=z[He.tileID.key]=He.tileID;for(const ct in be)be[ct].isChildOf(He.tileID)&&delete be[ct]}}for(const Ne in this._tiles)be[Ne]||(this._coveredTiles[Ne]=!0)}}for(const J in z)this._tiles[J].clearFadeHold();const q=a.keysDifference(this._tiles,z);for(const J of q){const ie=this._tiles[J];ie.hasSymbolBuckets&&!ie.holdingForFade()?ie.setHoldDuration(this.map._fadeDuration):ie.hasSymbolBuckets&&!ie.symbolFadeFinished()||this._removeTile(J)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(i)}_updateRetainedTiles(i,u){const m={},v={},S=Math.max(u-Ge.maxOverzooming,this._source.minzoom),P=Math.max(u+Ge.maxUnderzooming,this._source.minzoom),z={};for(const q of i){const J=this._addTile(q);m[q.key]=q,J.hasData()||u<this._source.maxzoom&&(z[q.key]=q)}this._retainLoadedChildren(z,u,P,m);for(const q of i){let J=this._tiles[q.key];if(J.hasData())continue;if(u+1>this._source.maxzoom){const pe=q.children(this._source.maxzoom)[0],be=this.getTile(pe);if(be&&be.hasData()){m[pe.key]=pe;continue}}else{const pe=q.children(this._source.maxzoom);if(m[pe[0].key]&&m[pe[1].key]&&m[pe[2].key]&&m[pe[3].key])continue}let ie=J.wasRequested();for(let pe=q.overscaledZ-1;pe>=S;--pe){const be=q.scaledTo(pe);if(v[be.key]||(v[be.key]=!0,J=this.getTile(be),!J&&ie&&(J=this._addTile(be)),J&&(m[be.key]=be,ie=J.wasRequested(),J.hasData())))break}}return m}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const u=[];let m,v=this._tiles[i].tileID;for(;v.overscaledZ>0;){if(v.key in this._loadedParentTiles){m=this._loadedParentTiles[v.key];break}u.push(v.key);const S=v.scaledTo(v.overscaledZ-1);if(m=this._getLoadedTile(S),m)break;v=S}for(const S of u)this._loadedParentTiles[S]=m}}_addTile(i){let u=this._tiles[i.key];if(u)return u;u=this._cache.getAndRemove(i),u&&(this._setTileReloadTimer(i.key,u),u.tileID=i,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,u)));const m=u;return u||(u=new at(i,this._source.tileSize*i.overscaleFactor()),this._loadTile(u,this._tileLoaded.bind(this,u,i.key,u.state))),u.uses++,this._tiles[i.key]=u,m||this._source.fire(new a.Event("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u}_setTileReloadTimer(i,u){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const m=u.getExpiryTimeout();m&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},m))}_removeTile(i){const u=this._tiles[i];u&&(u.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),u.uses>0||(u.hasData()&&u.state!=="reloading"?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(i);this._cache.reset()}tilesIn(i,u,m){const v=[],S=this.transform;if(!S)return v;const P=m?S.getCameraQueryGeometry(i):i,z=i.map(Ne=>S.pointCoordinate(Ne,this.terrain)),q=P.map(Ne=>S.pointCoordinate(Ne,this.terrain)),J=this.getIds();let ie=1/0,pe=1/0,be=-1/0,Ve=-1/0;for(const Ne of q)ie=Math.min(ie,Ne.x),pe=Math.min(pe,Ne.y),be=Math.max(be,Ne.x),Ve=Math.max(Ve,Ne.y);for(let Ne=0;Ne<J.length;Ne++){const He=this._tiles[J[Ne]];if(He.holdingForFade())continue;const ct=He.tileID,wt=Math.pow(2,S.zoom-He.tileID.overscaledZ),St=u*He.queryPadding*a.EXTENT/He.tileSize/wt,We=[ct.getTilePoint(new a.MercatorCoordinate(ie,pe)),ct.getTilePoint(new a.MercatorCoordinate(be,Ve))];if(We[0].x-St<a.EXTENT&&We[0].y-St<a.EXTENT&&We[1].x+St>=0&&We[1].y+St>=0){const Rt=z.map(Xt=>ct.getTilePoint(Xt)),Qt=q.map(Xt=>ct.getTilePoint(Xt));v.push({tile:He,tileID:ct,queryGeometry:Rt,cameraQueryGeometry:Qt,scale:wt})}}return v}getVisibleCoordinates(i){const u=this.getRenderableIds(i).map(m=>this._tiles[m].tileID);for(const m of u)m.posMatrix=this.transform.calculatePosMatrix(m.toUnwrapped());return u}hasTransition(){if(this._source.hasTransition())return!0;if(Ut(this._source.type))for(const i in this._tiles){const u=this._tiles[i];if(u.fadeEndTime!==void 0&&u.fadeEndTime>=a.exported.now())return!0}return!1}setFeatureState(i,u,m){this._state.updateState(i=i||"_geojsonTileLayer",u,m)}removeFeatureState(i,u,m){this._state.removeFeatureState(i=i||"_geojsonTileLayer",u,m)}getFeatureState(i,u){return this._state.getState(i=i||"_geojsonTileLayer",u)}setDependencies(i,u,m){const v=this._tiles[i];v&&v.setDependencies(u,m)}reloadTilesForDependencies(i,u){for(const m in this._tiles)this._tiles[m].hasDependency(i,u)&&this._reloadTile(m,"reloading");this._cache.filter(m=>!m.hasDependency(i,u))}}function rt(g,i){const u=Math.abs(2*g.wrap)-+(g.wrap<0),m=Math.abs(2*i.wrap)-+(i.wrap<0);return g.overscaledZ-i.overscaledZ||m-u||i.canonical.y-g.canonical.y||i.canonical.x-g.canonical.x}function Ut(g){return g==="raster"||g==="image"||g==="video"}Ge.maxOverzooming=10,Ge.maxUnderzooming=3;const ht="mapboxgl_preloaded_worker_pool";class Nt{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<Nt.workerCount;)this.workers.push(new Worker(ha.workerUrl));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[ht]}numActive(){return Object.keys(this.active).length}}const dr=Math.floor(a.exported.hardwareConcurrency/2);let Lt;function ze(){return Lt||(Lt=new Nt),Lt}function gr(g,i){const u={};for(const m in g)m!=="ref"&&(u[m]=g[m]);return a.refProperties.forEach(m=>{m in i&&(u[m]=i[m])}),u}function sr(g){g=g.slice();const i=Object.create(null);for(let u=0;u<g.length;u++)i[g[u].id]=g[u];for(let u=0;u<g.length;u++)"ref"in g[u]&&(g[u]=gr(g[u],i[g[u].ref]));return g}Nt.workerCount=Math.max(Math.min(dr,6),1);const Ht={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function fr(g,i,u){u.push({command:Ht.addSource,args:[g,i[g]]})}function Br(g,i,u){i.push({command:Ht.removeSource,args:[g]}),u[g]=!0}function vr(g,i,u,m){Br(g,u,m),fr(g,i,u)}function Gr(g,i,u){let m;for(m in g[u])if(Object.prototype.hasOwnProperty.call(g[u],m)&&m!=="data"&&!E(g[u][m],i[u][m]))return!1;for(m in i[u])if(Object.prototype.hasOwnProperty.call(i[u],m)&&m!=="data"&&!E(g[u][m],i[u][m]))return!1;return!0}function rr(g,i,u,m,v,S){let P;for(P in i=i||{},g=g||{})Object.prototype.hasOwnProperty.call(g,P)&&(E(g[P],i[P])||u.push({command:S,args:[m,P,i[P],v]}));for(P in i)Object.prototype.hasOwnProperty.call(i,P)&&!Object.prototype.hasOwnProperty.call(g,P)&&(E(g[P],i[P])||u.push({command:S,args:[m,P,i[P],v]}))}function xr(g){return g.id}function Zr(g,i){return g[i.id]=i,g}class pn{constructor(i,u){this.reset(i,u)}reset(i,u){this.points=i||[],this._distances=[0];for(let m=1;m<this.points.length;m++)this._distances[m]=this._distances[m-1]+this.points[m].dist(this.points[m-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=a.clamp(i,0,1);let u=1,m=this._distances[u];const v=i*this.paddedLength+this.padding;for(;m<v&&u<this._distances.length;)m=this._distances[++u];const S=u-1,P=this._distances[S],z=m-P,q=z>0?(v-P)/z:0;return this.points[S].mult(1-q).add(this.points[u].mult(q))}}function vt(g,i){let u=!0;return g==="always"||g!=="never"&&i!=="never"||(u=!1),u}class nt{constructor(i,u,m){const v=this.boxCells=[],S=this.circleCells=[];this.xCellCount=Math.ceil(i/m),this.yCellCount=Math.ceil(u/m);for(let P=0;P<this.xCellCount*this.yCellCount;P++)v.push([]),S.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=u,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,u,m,v,S){this._forEachCell(u,m,v,S,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(u),this.bboxes.push(m),this.bboxes.push(v),this.bboxes.push(S)}insertCircle(i,u,m,v){this._forEachCell(u-v,m-v,u+v,m+v,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(u),this.circles.push(m),this.circles.push(v)}_insertBoxCell(i,u,m,v,S,P){this.boxCells[S].push(P)}_insertCircleCell(i,u,m,v,S,P){this.circleCells[S].push(P)}_query(i,u,m,v,S,P,z){if(m<0||i>this.width||v<0||u>this.height)return[];const q=[];if(i<=0&&u<=0&&this.width<=m&&this.height<=v){if(S)return[{key:null,x1:i,y1:u,x2:m,y2:v}];for(let J=0;J<this.boxKeys.length;J++)q.push({key:this.boxKeys[J],x1:this.bboxes[4*J],y1:this.bboxes[4*J+1],x2:this.bboxes[4*J+2],y2:this.bboxes[4*J+3]});for(let J=0;J<this.circleKeys.length;J++){const ie=this.circles[3*J],pe=this.circles[3*J+1],be=this.circles[3*J+2];q.push({key:this.circleKeys[J],x1:ie-be,y1:pe-be,x2:ie+be,y2:pe+be})}}else this._forEachCell(i,u,m,v,this._queryCell,q,{hitTest:S,overlapMode:P,seenUids:{box:{},circle:{}}},z);return q}query(i,u,m,v){return this._query(i,u,m,v,!1,null)}hitTest(i,u,m,v,S,P){return this._query(i,u,m,v,!0,S,P).length>0}hitTestCircle(i,u,m,v,S){const P=i-m,z=i+m,q=u-m,J=u+m;if(z<0||P>this.width||J<0||q>this.height)return!1;const ie=[];return this._forEachCell(P,q,z,J,this._queryCellCircle,ie,{hitTest:!0,overlapMode:v,circle:{x:i,y:u,radius:m},seenUids:{box:{},circle:{}}},S),ie.length>0}_queryCell(i,u,m,v,S,P,z,q){const{seenUids:J,hitTest:ie,overlapMode:pe}=z,be=this.boxCells[S];if(be!==null){const Ne=this.bboxes;for(const He of be)if(!J.box[He]){J.box[He]=!0;const ct=4*He,wt=this.boxKeys[He];if(i<=Ne[ct+2]&&u<=Ne[ct+3]&&m>=Ne[ct+0]&&v>=Ne[ct+1]&&(!q||q(wt))&&(!ie||!vt(pe,wt.overlapMode))&&(P.push({key:wt,x1:Ne[ct],y1:Ne[ct+1],x2:Ne[ct+2],y2:Ne[ct+3]}),ie))return!0}}const Ve=this.circleCells[S];if(Ve!==null){const Ne=this.circles;for(const He of Ve)if(!J.circle[He]){J.circle[He]=!0;const ct=3*He,wt=this.circleKeys[He];if(this._circleAndRectCollide(Ne[ct],Ne[ct+1],Ne[ct+2],i,u,m,v)&&(!q||q(wt))&&(!ie||!vt(pe,wt.overlapMode))){const St=Ne[ct],We=Ne[ct+1],Rt=Ne[ct+2];if(P.push({key:wt,x1:St-Rt,y1:We-Rt,x2:St+Rt,y2:We+Rt}),ie)return!0}}}return!1}_queryCellCircle(i,u,m,v,S,P,z,q){const{circle:J,seenUids:ie,overlapMode:pe}=z,be=this.boxCells[S];if(be!==null){const Ne=this.bboxes;for(const He of be)if(!ie.box[He]){ie.box[He]=!0;const ct=4*He,wt=this.boxKeys[He];if(this._circleAndRectCollide(J.x,J.y,J.radius,Ne[ct+0],Ne[ct+1],Ne[ct+2],Ne[ct+3])&&(!q||q(wt))&&!vt(pe,wt.overlapMode))return P.push(!0),!0}}const Ve=this.circleCells[S];if(Ve!==null){const Ne=this.circles;for(const He of Ve)if(!ie.circle[He]){ie.circle[He]=!0;const ct=3*He,wt=this.circleKeys[He];if(this._circlesCollide(Ne[ct],Ne[ct+1],Ne[ct+2],J.x,J.y,J.radius)&&(!q||q(wt))&&!vt(pe,wt.overlapMode))return P.push(!0),!0}}}_forEachCell(i,u,m,v,S,P,z,q){const J=this._convertToXCellCoord(i),ie=this._convertToYCellCoord(u),pe=this._convertToXCellCoord(m),be=this._convertToYCellCoord(v);for(let Ve=J;Ve<=pe;Ve++)for(let Ne=ie;Ne<=be;Ne++)if(S.call(this,i,u,m,v,this.xCellCount*Ne+Ve,P,z,q))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,u,m,v,S,P){const z=v-i,q=S-u,J=m+P;return J*J>z*z+q*q}_circleAndRectCollide(i,u,m,v,S,P,z){const q=(P-v)/2,J=Math.abs(i-(v+q));if(J>q+m)return!1;const ie=(z-S)/2,pe=Math.abs(u-(S+ie));if(pe>ie+m)return!1;if(J<=q||pe<=ie)return!0;const be=J-q,Ve=pe-ie;return be*be+Ve*Ve<=m*m}}function bt(g,i,u,m,v){const S=a.create();return i?(a.scale(S,S,[1/v,1/v,1]),u||a.rotateZ(S,S,m.angle)):a.multiply(S,m.labelPlaneMatrix,g),S}function Ct(g,i,u,m,v){if(i){const S=a.clone(g);return a.scale(S,S,[v,v,1]),u||a.rotateZ(S,S,-m.angle),S}return m.glCoordMatrix}function jt(g,i,u){let m;u?(m=[g.x,g.y,u(g.x,g.y),1],a.transformMat4(m,m,i)):(m=[g.x,g.y,0,1],Cr(m,m,i));const v=m[3];return{point:new a.pointGeometry(m[0]/v,m[1]/v),signedDistanceFromCamera:v}}function er(g,i){return .5+g/i*.5}function Vr(g,i){const u=g[0]/g[3],m=g[1]/g[3];return u>=-i[0]&&u<=i[0]&&m>=-i[1]&&m<=i[1]}function Fr(g,i,u,m,v,S,P,z,q,J){const ie=m?g.textSizeData:g.iconSizeData,pe=a.evaluateSizeForZoom(ie,u.transform.zoom),be=[256/u.width*2+1,256/u.height*2+1],Ve=m?g.text.dynamicLayoutVertexArray:g.icon.dynamicLayoutVertexArray;Ve.clear();const Ne=g.lineVertexArray,He=m?g.text.placedSymbolArray:g.icon.placedSymbolArray,ct=u.transform.width/u.transform.height;let wt=!1;for(let St=0;St<He.length;St++){const We=He.get(St);if(We.hidden||We.writingMode===a.WritingMode.vertical&&!wt){br(We.numGlyphs,Ve);continue}let Rt;if(wt=!1,J?(Rt=[We.anchorX,We.anchorY,J(We.anchorX,We.anchorY),1],a.transformMat4(Rt,Rt,i)):(Rt=[We.anchorX,We.anchorY,0,1],Cr(Rt,Rt,i)),!Vr(Rt,be)){br(We.numGlyphs,Ve);continue}const Qt=er(u.transform.cameraToCenterDistance,Rt[3]),Xt=a.evaluateSizeForFeature(ie,pe,We),Zt=P?Xt/Qt:Xt*Qt,ur=new a.pointGeometry(We.anchorX,We.anchorY),qt=jt(ur,v,J).point,Rr={},Ur=Er(We,Zt,!1,z,i,v,S,g.glyphOffsetArray,Ne,Ve,qt,ur,Rr,ct,q,J);wt=Ur.useVertical,(Ur.notEnoughRoom||wt||Ur.needsFlipping&&Er(We,Zt,!0,z,i,v,S,g.glyphOffsetArray,Ne,Ve,qt,ur,Rr,ct,q,J).notEnoughRoom)&&br(We.numGlyphs,Ve)}m?g.text.dynamicLayoutVertexBuffer.updateData(Ve):g.icon.dynamicLayoutVertexBuffer.updateData(Ve)}function un(g,i,u,m,v,S,P,z,q,J,ie,pe,be){const Ve=z.glyphStartIndex+z.numGlyphs,Ne=z.lineStartIndex,He=z.lineStartIndex+z.lineLength,ct=i.getoffsetX(z.glyphStartIndex),wt=i.getoffsetX(Ve-1),St=wn(g*ct,u,m,v,S,P,z.segment,Ne,He,q,J,ie,pe,be);if(!St)return null;const We=wn(g*wt,u,m,v,S,P,z.segment,Ne,He,q,J,ie,pe,be);return We?{first:St,last:We}:null}function lr(g,i,u,m){return g===a.WritingMode.horizontal&&Math.abs(u.y-i.y)>Math.abs(u.x-i.x)*m?{useVertical:!0}:(g===a.WritingMode.vertical?i.y<u.y:i.x>u.x)?{needsFlipping:!0}:null}function Er(g,i,u,m,v,S,P,z,q,J,ie,pe,be,Ve,Ne,He){const ct=i/24,wt=g.lineOffsetX*ct,St=g.lineOffsetY*ct;let We;if(g.numGlyphs>1){const Rt=g.glyphStartIndex+g.numGlyphs,Qt=g.lineStartIndex,Xt=g.lineStartIndex+g.lineLength,Zt=un(ct,z,wt,St,u,ie,pe,g,q,S,be,Ne,He);if(!Zt)return{notEnoughRoom:!0};const ur=jt(Zt.first.point,P,He).point,qt=jt(Zt.last.point,P,He).point;if(m&&!u){const Rr=lr(g.writingMode,ur,qt,Ve);if(Rr)return Rr}We=[Zt.first];for(let Rr=g.glyphStartIndex+1;Rr<Rt-1;Rr++)We.push(wn(ct*z.getoffsetX(Rr),wt,St,u,ie,pe,g.segment,Qt,Xt,q,S,be,Ne,He));We.push(Zt.last)}else{if(m&&!u){const Qt=jt(pe,v,He).point,Xt=g.lineStartIndex+g.segment+1,Zt=new a.pointGeometry(q.getx(Xt),q.gety(Xt)),ur=jt(Zt,v,He),qt=ur.signedDistanceFromCamera>0?ur.point:An(pe,Zt,Qt,1,v,He),Rr=lr(g.writingMode,Qt,qt,Ve);if(Rr)return Rr}const Rt=wn(ct*z.getoffsetX(g.glyphStartIndex),wt,St,u,ie,pe,g.segment,g.lineStartIndex,g.lineStartIndex+g.lineLength,q,S,be,Ne,He);if(!Rt)return{notEnoughRoom:!0};We=[Rt]}for(const Rt of We)a.addDynamicAttributes(J,Rt.point,Rt.angle);return{}}function An(g,i,u,m,v,S){const P=jt(g.add(g.sub(i)._unit()),v,S).point,z=u.sub(P);return u.add(z._mult(m/z.mag()))}function wn(g,i,u,m,v,S,P,z,q,J,ie,pe,be,Ve){const Ne=m?g-i:g+i;let He=Ne>0?1:-1,ct=0;m&&(He*=-1,ct=Math.PI),He<0&&(ct+=Math.PI);let wt=He>0?z+P:z+P+1,St=v,We=v,Rt=0,Qt=0;const Xt=Math.abs(Ne),Zt=[];for(;Rt+Qt<=Xt;){if(wt+=He,wt<z||wt>=q)return null;if(We=St,Zt.push(St),St=pe[wt],St===void 0){const qr=new a.pointGeometry(J.getx(wt),J.gety(wt)),Pn=jt(qr,ie,Ve);if(Pn.signedDistanceFromCamera>0)St=pe[wt]=Pn.point;else{const jn=wt-He;St=An(Rt===0?S:new a.pointGeometry(J.getx(jn),J.gety(jn)),qr,We,Xt-Rt+1,ie,Ve)}}Rt+=Qt,Qt=We.dist(St)}const ur=(Xt-Rt)/Qt,qt=St.sub(We),Rr=qt.mult(ur)._add(We);Rr._add(qt._unit()._perp()._mult(u*He));const Ur=ct+Math.atan2(St.y-We.y,St.x-We.x);return Zt.push(Rr),{point:Rr,angle:be?Ur:0,path:Zt}}const _i=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function br(g,i){for(let u=0;u<g;u++){const m=i.length;i.resize(m+4),i.float32.set(_i,3*m)}}function Cr(g,i,u){const m=i[0],v=i[1];return g[0]=u[0]*m+u[4]*v+u[12],g[1]=u[1]*m+u[5]*v+u[13],g[3]=u[3]*m+u[7]*v+u[15],g}const cr=100;class Kr{constructor(i,u=new nt(i.width+200,i.height+200,25),m=new nt(i.width+200,i.height+200,25)){this.transform=i,this.grid=u,this.ignoredGrid=m,this.pitchfactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+cr,this.screenBottomBoundary=i.height+cr,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(i,u,m,v,S,P){const z=this.projectAndGetPerspectiveRatio(v,i.anchorPointX,i.anchorPointY,P),q=m*z.perspectiveRatio,J=i.x1*q+z.point.x,ie=i.y1*q+z.point.y,pe=i.x2*q+z.point.x,be=i.y2*q+z.point.y;return!this.isInsideGrid(J,ie,pe,be)||u!=="always"&&this.grid.hitTest(J,ie,pe,be,u,S)||z.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[J,ie,pe,be],offscreen:this.isOffscreen(J,ie,pe,be)}}placeCollisionCircles(i,u,m,v,S,P,z,q,J,ie,pe,be,Ve,Ne){const He=[],ct=new a.pointGeometry(u.anchorX,u.anchorY),wt=jt(ct,P,Ne),St=er(this.transform.cameraToCenterDistance,wt.signedDistanceFromCamera),We=(ie?S/St:S*St)/a.ONE_EM,Rt=jt(ct,z,Ne).point,Qt=un(We,v,u.lineOffsetX*We,u.lineOffsetY*We,!1,Rt,ct,u,m,z,{},!1,Ne);let Xt=!1,Zt=!1,ur=!0;if(Qt){const qt=.5*be*St+Ve,Rr=new a.pointGeometry(-100,-100),Ur=new a.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),qr=new pn,Pn=Qt.first,jn=Qt.last;let b=[];for(let W=Pn.path.length-1;W>=1;W--)b.push(Pn.path[W]);for(let W=1;W<jn.path.length;W++)b.push(jn.path[W]);const L=2.5*qt;if(q){const W=b.map(ae=>jt(ae,q,Ne));b=W.some(ae=>ae.signedDistanceFromCamera<=0)?[]:W.map(ae=>ae.point)}let j=[];if(b.length>0){const W=b[0].clone(),ae=b[0].clone();for(let de=1;de<b.length;de++)W.x=Math.min(W.x,b[de].x),W.y=Math.min(W.y,b[de].y),ae.x=Math.max(ae.x,b[de].x),ae.y=Math.max(ae.y,b[de].y);j=W.x>=Rr.x&&ae.x<=Ur.x&&W.y>=Rr.y&&ae.y<=Ur.y?[b]:ae.x<Rr.x||W.x>Ur.x||ae.y<Rr.y||W.y>Ur.y?[]:a.clipLine([b],Rr.x,Rr.y,Ur.x,Ur.y)}for(const W of j){qr.reset(W,.25*qt);let ae=0;ae=qr.length<=.5*qt?1:Math.ceil(qr.paddedLength/L)+1;for(let de=0;de<ae;de++){const ye=de/Math.max(ae-1,1),xe=qr.lerp(ye),Ie=xe.x+cr,je=xe.y+cr;He.push(Ie,je,qt,0);const ft=Ie-qt,It=je-qt,Ft=Ie+qt,pt=je+qt;if(ur=ur&&this.isOffscreen(ft,It,Ft,pt),Zt=Zt||this.isInsideGrid(ft,It,Ft,pt),i!=="always"&&this.grid.hitTestCircle(Ie,je,qt,i,pe)&&(Xt=!0,!J))return{circles:[],offscreen:!1,collisionDetected:Xt}}}}return{circles:!J&&Xt||!Zt||St<this.perspectiveRatioCutoff?[]:He,offscreen:ur,collisionDetected:Xt}}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const u=[];let m=1/0,v=1/0,S=-1/0,P=-1/0;for(const ie of i){const pe=new a.pointGeometry(ie.x+cr,ie.y+cr);m=Math.min(m,pe.x),v=Math.min(v,pe.y),S=Math.max(S,pe.x),P=Math.max(P,pe.y),u.push(pe)}const z=this.grid.query(m,v,S,P).concat(this.ignoredGrid.query(m,v,S,P)),q={},J={};for(const ie of z){const pe=ie.key;if(q[pe.bucketInstanceId]===void 0&&(q[pe.bucketInstanceId]={}),q[pe.bucketInstanceId][pe.featureIndex])continue;const be=[new a.pointGeometry(ie.x1,ie.y1),new a.pointGeometry(ie.x2,ie.y1),new a.pointGeometry(ie.x2,ie.y2),new a.pointGeometry(ie.x1,ie.y2)];a.polygonIntersectsPolygon(u,be)&&(q[pe.bucketInstanceId][pe.featureIndex]=!0,J[pe.bucketInstanceId]===void 0&&(J[pe.bucketInstanceId]=[]),J[pe.bucketInstanceId].push(pe.featureIndex))}return J}insertCollisionBox(i,u,m,v,S,P){(m?this.ignoredGrid:this.grid).insert({bucketInstanceId:v,featureIndex:S,collisionGroupID:P,overlapMode:u},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,u,m,v,S,P){const z=m?this.ignoredGrid:this.grid,q={bucketInstanceId:v,featureIndex:S,collisionGroupID:P,overlapMode:u};for(let J=0;J<i.length;J+=4)z.insertCircle(q,i[J],i[J+1],i[J+2])}projectAndGetPerspectiveRatio(i,u,m,v){let S;return v?(S=[u,m,v(u,m),1],a.transformMat4(S,S,i)):(S=[u,m,0,1],Cr(S,S,i)),{point:new a.pointGeometry((S[0]/S[3]+1)/2*this.transform.width+cr,(-S[1]/S[3]+1)/2*this.transform.height+cr),perspectiveRatio:.5+this.transform.cameraToCenterDistance/S[3]*.5}}isOffscreen(i,u,m,v){return m<cr||i>=this.screenRightBoundary||v<cr||u>this.screenBottomBoundary}isInsideGrid(i,u,m,v){return m>=0&&i<this.gridRightBoundary&&v>=0&&u<this.gridBottomBoundary}getViewportMatrix(){const i=a.identity([]);return a.translate(i,i,[-100,-100,0]),i}}function hn(g,i,u){return i*(a.EXTENT/(g.tileSize*Math.pow(2,u-g.tileID.overscaledZ)))}class xn{constructor(i,u,m,v){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?u:-u))):v&&m?1:0,this.placed=m}isHidden(){return this.opacity===0&&!this.placed}}class Sn{constructor(i,u,m,v,S){this.text=new xn(i?i.text:null,u,m,S),this.icon=new xn(i?i.icon:null,u,v,S)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class ji{constructor(i,u,m){this.text=i,this.icon=u,this.skipFade=m}}class tn{constructor(){this.invProjMatrix=a.create(),this.viewportMatrix=a.create(),this.circles=[]}}class Wi{constructor(i,u,m,v,S){this.bucketInstanceId=i,this.featureIndex=u,this.sourceLayerIndex=m,this.bucketIndex=v,this.tileID=S}}class hs{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const u=++this.maxGroupID;this.collisionGroups[i]={ID:u,predicate:m=>m.collisionGroupID===u}}return this.collisionGroups[i]}}function Ln(g,i,u,m,v){const{horizontalAlign:S,verticalAlign:P}=a.getAnchorAlignment(g),z=-(S-.5)*i,q=-(P-.5)*u,J=a.evaluateVariableOffset(g,m);return new a.pointGeometry(z+J[0]*v,q+J[1]*v)}function nn(g,i,u,m,v,S){const{x1:P,x2:z,y1:q,y2:J,anchorPointX:ie,anchorPointY:pe}=g,be=new a.pointGeometry(i,u);return m&&be._rotate(v?S:-S),{x1:P+be.x,y1:q+be.y,x2:z+be.x,y2:J+be.y,anchorPointX:ie,anchorPointY:pe}}class Ue{constructor(i,u,m,v,S){this.transform=i.clone(),this.terrain=u,this.collisionIndex=new Kr(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=m,this.retainedQueryData={},this.collisionGroups=new hs(v),this.collisionCircleArrays={},this.prevPlacement=S,S&&(S.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(i,u,m,v){const S=m.getBucket(u),P=m.latestFeatureIndex;if(!S||!P||u.id!==S.layerIds[0])return;const z=m.collisionBoxArray,q=S.layers[0].layout,J=Math.pow(2,this.transform.zoom-m.tileID.overscaledZ),ie=m.tileSize/a.EXTENT,pe=this.transform.calculatePosMatrix(m.tileID.toUnwrapped()),be=q.get("text-pitch-alignment")==="map",Ve=q.get("text-rotation-alignment")==="map",Ne=hn(m,1,this.transform.zoom),He=bt(pe,be,Ve,this.transform,Ne);let ct=null;if(be){const St=Ct(pe,be,Ve,this.transform,Ne);ct=a.multiply([],this.transform.labelPlaneMatrix,St)}this.retainedQueryData[S.bucketInstanceId]=new Wi(S.bucketInstanceId,P,S.sourceLayerIndex,S.index,m.tileID);const wt={bucket:S,layout:q,posMatrix:pe,textLabelPlaneMatrix:He,labelToScreenMatrix:ct,scale:J,textPixelRatio:ie,holdingForFade:m.holdingForFade(),collisionBoxArray:z,partiallyEvaluatedTextSize:a.evaluateSizeForZoom(S.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(S.sourceID)};if(v)for(const St of S.sortKeyRanges){const{sortKey:We,symbolInstanceStart:Rt,symbolInstanceEnd:Qt}=St;i.push({sortKey:We,symbolInstanceStart:Rt,symbolInstanceEnd:Qt,parameters:wt})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:S.symbolInstances.length,parameters:wt})}attemptAnchorPlacement(i,u,m,v,S,P,z,q,J,ie,pe,be,Ve,Ne,He,ct){const wt=[be.textOffset0,be.textOffset1],St=Ln(i,m,v,wt,S),We=this.collisionIndex.placeCollisionBox(nn(u,St.x,St.y,P,z,this.transform.angle),pe,q,J,ie.predicate,ct);if((!He||this.collisionIndex.placeCollisionBox(nn(He,St.x,St.y,P,z,this.transform.angle),pe,q,J,ie.predicate,ct).box.length!==0)&&We.box.length>0){let Rt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[be.crossTileID]&&this.prevPlacement.placements[be.crossTileID]&&this.prevPlacement.placements[be.crossTileID].text&&(Rt=this.prevPlacement.variableOffsets[be.crossTileID].anchor),be.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[be.crossTileID]={textOffset:wt,width:m,height:v,anchor:i,textBoxScale:S,prevAnchor:Rt},this.markUsedJustification(Ve,i,be,Ne),Ve.allowVerticalPlacement&&(this.markUsedOrientation(Ve,Ne,be),this.placedOrientations[be.crossTileID]=Ne),{shift:St,placedGlyphBoxes:We}}}placeLayerBucketPart(i,u,m){const{bucket:v,layout:S,posMatrix:P,textLabelPlaneMatrix:z,labelToScreenMatrix:q,textPixelRatio:J,holdingForFade:ie,collisionBoxArray:pe,partiallyEvaluatedTextSize:be,collisionGroup:Ve}=i.parameters,Ne=S.get("text-optional"),He=S.get("icon-optional"),ct=a.getOverlapMode(S,"text-overlap","text-allow-overlap"),wt=ct==="always",St=a.getOverlapMode(S,"icon-overlap","icon-allow-overlap"),We=St==="always",Rt=S.get("text-rotation-alignment")==="map",Qt=S.get("text-pitch-alignment")==="map",Xt=S.get("icon-text-fit")!=="none",Zt=S.get("symbol-z-order")==="viewport-y",ur=wt&&(We||!v.hasIconData()||He),qt=We&&(wt||!v.hasTextData()||Ne);!v.collisionArrays&&pe&&v.deserializeCollisionBoxes(pe);const Rr=(Ur,qr)=>{if(u[Ur.crossTileID])return;if(ie)return void(this.placements[Ur.crossTileID]=new ji(!1,!1,!1));let Pn=!1,jn=!1,b=!0,L=null,j={box:null,offscreen:null},W={box:null,offscreen:null},ae=null,de=null,ye=null,xe=0,Ie=0,je=0;qr.textFeatureIndex?xe=qr.textFeatureIndex:Ur.useRuntimeCollisionCircles&&(xe=Ur.featureIndex),qr.verticalTextFeatureIndex&&(Ie=qr.verticalTextFeatureIndex);const ft=this.retainedQueryData[v.bucketInstanceId].tileID,It=this.terrain?(Vt,Je)=>this.terrain.getElevation(ft,Vt,Je):null;for(const Vt of["textBox","verticalTextBox","iconBox","verticalIconBox"]){const Je=qr[Vt];Je&&(Je.elevation=It?It(Je.anchorPointX,Je.anchorPointY):0)}const Ft=qr.textBox;if(Ft){const Vt=At=>{let Yt=a.WritingMode.horizontal;if(v.allowVerticalPlacement&&!At&&this.prevPlacement){const ir=this.prevPlacement.placedOrientations[Ur.crossTileID];ir&&(this.placedOrientations[Ur.crossTileID]=ir,Yt=ir,this.markUsedOrientation(v,Yt,Ur))}return Yt},Je=(At,Yt)=>{if(v.allowVerticalPlacement&&Ur.numVerticalGlyphVertices>0&&qr.verticalTextBox){for(const ir of v.writingModes)if(ir===a.WritingMode.vertical?(j=Yt(),W=j):j=At(),j&&j.box&&j.box.length)break}else j=At()};if(S.get("text-variable-anchor")){let At=S.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Ur.crossTileID]){const Wt=this.prevPlacement.variableOffsets[Ur.crossTileID];At.indexOf(Wt.anchor)>0&&(At=At.filter(Dr=>Dr!==Wt.anchor),At.unshift(Wt.anchor))}const Yt=(Wt,Dr,Qr)=>{const Fn=Wt.x2-Wt.x1,Nr=Wt.y2-Wt.y1,fi=Ur.textBoxScale,di=Xt&&St==="never"?Dr:null;let hr={box:[],offscreen:!1};const zn=ct!=="never"?2*At.length:At.length;for(let li=0;li<zn;++li){const ci=this.attemptAnchorPlacement(At[li%At.length],Wt,Fn,Nr,fi,Rt,Qt,J,P,Ve,li>=At.length?ct:"never",Ur,v,Qr,di,It);if(ci&&(hr=ci.placedGlyphBoxes,hr&&hr.box&&hr.box.length)){Pn=!0,L=ci.shift;break}}return hr};Je(()=>Yt(Ft,qr.iconBox,a.WritingMode.horizontal),()=>{const Wt=qr.verticalTextBox;return v.allowVerticalPlacement&&!(j&&j.box&&j.box.length)&&Ur.numVerticalGlyphVertices>0&&Wt?Yt(Wt,qr.verticalIconBox,a.WritingMode.vertical):{box:null,offscreen:null}}),j&&(Pn=j.box,b=j.offscreen);const ir=Vt(j&&j.box);if(!Pn&&this.prevPlacement){const Wt=this.prevPlacement.variableOffsets[Ur.crossTileID];Wt&&(this.variableOffsets[Ur.crossTileID]=Wt,this.markUsedJustification(v,Wt.anchor,Ur,ir))}}else{const At=(Yt,ir)=>{const Wt=this.collisionIndex.placeCollisionBox(Yt,ct,J,P,Ve.predicate,It);return Wt&&Wt.box&&Wt.box.length&&(this.markUsedOrientation(v,ir,Ur),this.placedOrientations[Ur.crossTileID]=ir),Wt};Je(()=>At(Ft,a.WritingMode.horizontal),()=>{const Yt=qr.verticalTextBox;return v.allowVerticalPlacement&&Ur.numVerticalGlyphVertices>0&&Yt?At(Yt,a.WritingMode.vertical):{box:null,offscreen:null}}),Vt(j&&j.box&&j.box.length)}}if(ae=j,Pn=ae&&ae.box&&ae.box.length>0,b=ae&&ae.offscreen,Ur.useRuntimeCollisionCircles){const Vt=v.text.placedSymbolArray.get(Ur.centerJustifiedTextSymbolIndex),Je=a.evaluateSizeForFeature(v.textSizeData,be,Vt),At=S.get("text-padding");de=this.collisionIndex.placeCollisionCircles(ct,Vt,v.lineVertexArray,v.glyphOffsetArray,Je,P,z,q,m,Qt,Ve.predicate,Ur.collisionCircleDiameter,At,It),de.circles.length&&de.collisionDetected&&!m&&a.warnOnce("Collisions detected, but collision boxes are not shown"),Pn=wt||de.circles.length>0&&!de.collisionDetected,b=b&&de.offscreen}if(qr.iconFeatureIndex&&(je=qr.iconFeatureIndex),qr.iconBox){const Vt=Je=>{const At=Xt&&L?nn(Je,L.x,L.y,Rt,Qt,this.transform.angle):Je;return this.collisionIndex.placeCollisionBox(At,St,J,P,Ve.predicate,It)};W&&W.box&&W.box.length&&qr.verticalIconBox?(ye=Vt(qr.verticalIconBox),jn=ye.box.length>0):(ye=Vt(qr.iconBox),jn=ye.box.length>0),b=b&&ye.offscreen}const pt=Ne||Ur.numHorizontalGlyphVertices===0&&Ur.numVerticalGlyphVertices===0,Ar=He||Ur.numIconVertices===0;if(pt||Ar?Ar?pt||(jn=jn&&Pn):Pn=jn&&Pn:jn=Pn=jn&&Pn,Pn&&ae&&ae.box&&this.collisionIndex.insertCollisionBox(ae.box,ct,S.get("text-ignore-placement"),v.bucketInstanceId,W&&W.box&&Ie?Ie:xe,Ve.ID),jn&&ye&&this.collisionIndex.insertCollisionBox(ye.box,St,S.get("icon-ignore-placement"),v.bucketInstanceId,je,Ve.ID),de&&(Pn&&this.collisionIndex.insertCollisionCircles(de.circles,ct,S.get("text-ignore-placement"),v.bucketInstanceId,xe,Ve.ID),m)){const Vt=v.bucketInstanceId;let Je=this.collisionCircleArrays[Vt];Je===void 0&&(Je=this.collisionCircleArrays[Vt]=new tn);for(let At=0;At<de.circles.length;At+=4)Je.circles.push(de.circles[At+0]),Je.circles.push(de.circles[At+1]),Je.circles.push(de.circles[At+2]),Je.circles.push(de.collisionDetected?1:0)}if(Ur.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(v.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Ur.crossTileID]=new ji(Pn||ur,jn||qt,b||v.justReloaded),u[Ur.crossTileID]=!0};if(Zt){if(i.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Ur=v.getSortedSymbolIndexes(this.transform.angle);for(let qr=Ur.length-1;qr>=0;--qr){const Pn=Ur[qr];Rr(v.symbolInstances.get(Pn),v.collisionArrays[Pn])}}else for(let Ur=i.symbolInstanceStart;Ur<i.symbolInstanceEnd;Ur++)Rr(v.symbolInstances.get(Ur),v.collisionArrays[Ur]);if(m&&v.bucketInstanceId in this.collisionCircleArrays){const Ur=this.collisionCircleArrays[v.bucketInstanceId];a.invert(Ur.invProjMatrix,P),Ur.viewportMatrix=this.collisionIndex.getViewportMatrix()}v.justReloaded=!1}markUsedJustification(i,u,m,v){let S;S=v===a.WritingMode.vertical?m.verticalPlacedTextSymbolIndex:{left:m.leftJustifiedTextSymbolIndex,center:m.centerJustifiedTextSymbolIndex,right:m.rightJustifiedTextSymbolIndex}[a.getAnchorJustification(u)];const P=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex,m.verticalPlacedTextSymbolIndex];for(const z of P)z>=0&&(i.text.placedSymbolArray.get(z).crossTileID=S>=0&&z!==S?0:m.crossTileID)}markUsedOrientation(i,u,m){const v=u===a.WritingMode.horizontal||u===a.WritingMode.horizontalOnly?u:0,S=u===a.WritingMode.vertical?u:0,P=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex];for(const z of P)i.text.placedSymbolArray.get(z).placedOrientation=v;m.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(m.verticalPlacedTextSymbolIndex).placedOrientation=S)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const u=this.prevPlacement;let m=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;const v=u?u.symbolFadeChange(i):1,S=u?u.opacities:{},P=u?u.variableOffsets:{},z=u?u.placedOrientations:{};for(const q in this.placements){const J=this.placements[q],ie=S[q];ie?(this.opacities[q]=new Sn(ie,v,J.text,J.icon),m=m||J.text!==ie.text.placed||J.icon!==ie.icon.placed):(this.opacities[q]=new Sn(null,v,J.text,J.icon,J.skipFade),m=m||J.text||J.icon)}for(const q in S){const J=S[q];if(!this.opacities[q]){const ie=new Sn(J,v,!1,!1);ie.isHidden()||(this.opacities[q]=ie,m=m||J.text.placed||J.icon.placed)}}for(const q in P)this.variableOffsets[q]||!this.opacities[q]||this.opacities[q].isHidden()||(this.variableOffsets[q]=P[q]);for(const q in z)this.placedOrientations[q]||!this.opacities[q]||this.opacities[q].isHidden()||(this.placedOrientations[q]=z[q]);if(u&&u.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");m?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:i)}updateLayerOpacities(i,u){const m={};for(const v of u){const S=v.getBucket(i);S&&v.latestFeatureIndex&&i.id===S.layerIds[0]&&this.updateBucketOpacities(S,m,v.collisionBoxArray)}}updateBucketOpacities(i,u,m){i.hasTextData()&&i.text.opacityVertexArray.clear(),i.hasIconData()&&i.icon.opacityVertexArray.clear(),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const v=i.layers[0].layout,S=new Sn(null,0,!1,!1,!0),P=v.get("text-allow-overlap"),z=v.get("icon-allow-overlap"),q=v.get("text-variable-anchor"),J=v.get("text-rotation-alignment")==="map",ie=v.get("text-pitch-alignment")==="map",pe=v.get("icon-text-fit")!=="none",be=new Sn(null,0,P&&(z||!i.hasIconData()||v.get("icon-optional")),z&&(P||!i.hasTextData()||v.get("text-optional")),!0);!i.collisionArrays&&m&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(m);const Ve=(Ne,He,ct)=>{for(let wt=0;wt<He/4;wt++)Ne.opacityVertexArray.emplaceBack(ct)};for(let Ne=0;Ne<i.symbolInstances.length;Ne++){const He=i.symbolInstances.get(Ne),{numHorizontalGlyphVertices:ct,numVerticalGlyphVertices:wt,crossTileID:St}=He;let We=this.opacities[St];u[St]?We=S:We||(We=be,this.opacities[St]=We),u[St]=!0;const Rt=He.numIconVertices>0,Qt=this.placedOrientations[He.crossTileID],Xt=Qt===a.WritingMode.vertical,Zt=Qt===a.WritingMode.horizontal||Qt===a.WritingMode.horizontalOnly;if(ct>0||wt>0){const ur=ut(We.text);Ve(i.text,ct,Xt?Ot:ur),Ve(i.text,wt,Zt?Ot:ur);const qt=We.text.isHidden();[He.rightJustifiedTextSymbolIndex,He.centerJustifiedTextSymbolIndex,He.leftJustifiedTextSymbolIndex].forEach(qr=>{qr>=0&&(i.text.placedSymbolArray.get(qr).hidden=qt||Xt?1:0)}),He.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(He.verticalPlacedTextSymbolIndex).hidden=qt||Zt?1:0);const Rr=this.variableOffsets[He.crossTileID];Rr&&this.markUsedJustification(i,Rr.anchor,He,Qt);const Ur=this.placedOrientations[He.crossTileID];Ur&&(this.markUsedJustification(i,"left",He,Ur),this.markUsedOrientation(i,Ur,He))}if(Rt){const ur=ut(We.icon),qt=!(pe&&He.verticalPlacedIconSymbolIndex&&Xt);He.placedIconSymbolIndex>=0&&(Ve(i.icon,He.numIconVertices,qt?ur:Ot),i.icon.placedSymbolArray.get(He.placedIconSymbolIndex).hidden=We.icon.isHidden()),He.verticalPlacedIconSymbolIndex>=0&&(Ve(i.icon,He.numVerticalIconVertices,qt?Ot:ur),i.icon.placedSymbolArray.get(He.verticalPlacedIconSymbolIndex).hidden=We.icon.isHidden())}if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const ur=i.collisionArrays[Ne];if(ur){let qt=new a.pointGeometry(0,0);if(ur.textBox||ur.verticalTextBox){let Ur=!0;if(q){const qr=this.variableOffsets[St];qr?(qt=Ln(qr.anchor,qr.width,qr.height,qr.textOffset,qr.textBoxScale),J&&qt._rotate(ie?this.transform.angle:-this.transform.angle)):Ur=!1}ur.textBox&&Y(i.textCollisionBox.collisionVertexArray,We.text.placed,!Ur||Xt,qt.x,qt.y),ur.verticalTextBox&&Y(i.textCollisionBox.collisionVertexArray,We.text.placed,!Ur||Zt,qt.x,qt.y)}const Rr=Boolean(!Zt&&ur.verticalIconBox);ur.iconBox&&Y(i.iconCollisionBox.collisionVertexArray,We.icon.placed,Rr,pe?qt.x:0,pe?qt.y:0),ur.verticalIconBox&&Y(i.iconCollisionBox.collisionVertexArray,We.icon.placed,!Rr,pe?qt.x:0,pe?qt.y:0)}}}if(i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.text.opacityVertexArray.length!==i.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${i.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${i.text.layoutVertexArray.length}) / 4`);if(i.icon.opacityVertexArray.length!==i.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${i.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${i.icon.layoutVertexArray.length}) / 4`);if(i.bucketInstanceId in this.collisionCircleArrays){const Ne=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=Ne.invProjMatrix,i.placementViewportMatrix=Ne.viewportMatrix,i.collisionCircleArray=Ne.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,u){const m=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*m>i}setStale(){this.stale=!0}}function Y(g,i,u,m,v){g.emplaceBack(i?1:0,u?1:0,m||0,v||0),g.emplaceBack(i?1:0,u?1:0,m||0,v||0),g.emplaceBack(i?1:0,u?1:0,m||0,v||0),g.emplaceBack(i?1:0,u?1:0,m||0,v||0)}const Ae=Math.pow(2,25),Ee=Math.pow(2,24),Le=Math.pow(2,17),Xe=Math.pow(2,16),lt=Math.pow(2,9),Ye=Math.pow(2,8),qe=Math.pow(2,1);function ut(g){if(g.opacity===0&&!g.placed)return 0;if(g.opacity===1&&g.placed)return 4294967295;const i=g.placed?1:0,u=Math.floor(127*g.opacity);return u*Ae+i*Ee+u*Le+i*Xe+u*lt+i*Ye+u*qe+i}const Ot=0;class nr{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&!i.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,u,m,v,S){const P=this._bucketParts;for(;this._currentTileIndex<i.length;)if(u.getBucketParts(P,v,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,S())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,P.sort((z,q)=>z.sortKey-q.sortKey));this._currentPartIndex<P.length;)if(u.placeLayerBucketPart(P[this._currentPartIndex],this._seenCrossTileIDs,m),this._currentPartIndex++,S())return!0;return!1}}class zt{constructor(i,u,m,v,S,P,z,q){this.placement=new Ue(i,u,P,z,q),this._currentPlacementIndex=m.length-1,this._forceFullPlacement=v,this._showCollisionBoxes=S,this._done=!1}isDone(){return this._done}continuePlacement(i,u,m){const v=a.exported.now(),S=()=>{const P=a.exported.now()-v;return!this._forceFullPlacement&&P>2};for(;this._currentPlacementIndex>=0;){const P=u[i[this._currentPlacementIndex]],z=this.placement.collisionIndex.transform.zoom;if(P.type==="symbol"&&(!P.minzoom||P.minzoom<=z)&&(!P.maxzoom||P.maxzoom>z)){if(this._inProgressLayer||(this._inProgressLayer=new nr(P)),this._inProgressLayer.continuePlacement(m[P.source],this.placement,this._showCollisionBoxes,P,S))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const jr=512/a.EXTENT/2;class Hr{constructor(i,u,m){this.tileID=i,this.indexedSymbolInstances={},this.bucketInstanceId=m;for(let v=0;v<u.length;v++){const S=u.get(v),P=S.key;this.indexedSymbolInstances[P]||(this.indexedSymbolInstances[P]=[]),this.indexedSymbolInstances[P].push({crossTileID:S.crossTileID,coord:this.getScaledCoordinates(S,i)})}}getScaledCoordinates(i,u){const m=jr/Math.pow(2,u.canonical.z-this.tileID.canonical.z);return{x:Math.floor((u.canonical.x*a.EXTENT+i.anchorX)*m),y:Math.floor((u.canonical.y*a.EXTENT+i.anchorY)*m)}}findMatches(i,u,m){const v=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z);for(let S=0;S<i.length;S++){const P=i.get(S);if(P.crossTileID)continue;const z=this.indexedSymbolInstances[P.key];if(!z)continue;const q=this.getScaledCoordinates(P,u);for(const J of z)if(Math.abs(J.coord.x-q.x)<=v&&Math.abs(J.coord.y-q.y)<=v&&!m[J.crossTileID]){m[J.crossTileID]=!0,P.crossTileID=J.crossTileID;break}}}}class Tr{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class ln{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const u=Math.round((i-this.lng)/360);if(u!==0)for(const m in this.indexes){const v=this.indexes[m],S={};for(const P in v){const z=v[P];z.tileID=z.tileID.unwrapTo(z.tileID.wrap+u),S[z.tileID.key]=z}this.indexes[m]=S}this.lng=i}addBucket(i,u,m){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let S=0;S<u.symbolInstances.length;S++)u.symbolInstances.get(S).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});const v=this.usedCrossTileIDs[i.overscaledZ];for(const S in this.indexes){const P=this.indexes[S];if(Number(S)>i.overscaledZ)for(const z in P){const q=P[z];q.tileID.isChildOf(i)&&q.findMatches(u.symbolInstances,i,v)}else{const z=P[i.scaledTo(Number(S)).key];z&&z.findMatches(u.symbolInstances,i,v)}}for(let S=0;S<u.symbolInstances.length;S++){const P=u.symbolInstances.get(S);P.crossTileID||(P.crossTileID=m.generate(),v[P.crossTileID]=!0)}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new Hr(i,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(i,u){for(const m in u.indexedSymbolInstances)for(const v of u.indexedSymbolInstances[m])delete this.usedCrossTileIDs[i][v.crossTileID]}removeStaleBuckets(i){let u=!1;for(const m in this.indexes){const v=this.indexes[m];for(const S in v)i[v[S].bucketInstanceId]||(this.removeBucketCrossTileIDs(m,v[S]),delete v[S],u=!0)}return u}}class dn{constructor(){this.layerIndexes={},this.crossTileIDs=new Tr,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,u,m){let v=this.layerIndexes[i.id];v===void 0&&(v=this.layerIndexes[i.id]=new ln);let S=!1;const P={};v.handleWrapJump(m);for(const z of u){const q=z.getBucket(i);q&&i.id===q.layerIds[0]&&(q.bucketInstanceId||(q.bucketInstanceId=++this.maxBucketInstanceId),v.addBucket(z.tileID,q,this.crossTileIDs)&&(S=!0),P[q.bucketInstanceId]=!0)}return v.removeStaleBuckets(P)&&(S=!0),S}pruneUnusedLayers(i){const u={};i.forEach(m=>{u[m]=!0});for(const m in this.layerIndexes)u[m]||delete this.layerIndexes[m]}}var In=a.createLayout([{name:"a_pos",type:"Int16",components:2}]);class mn extends a.Evented{constructor(i){super(),this.sourceCache=i,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.renderHistory=[],this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,this.renderHistorySize=i._cache.max,i.usedForTerrain=!0,i.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null;for(const i in this._tiles){const u=this._tiles[i];u.textures.forEach(m=>m.destroy()),u.textures=[]}}update(i,u){this.sourceCache.update(i,u),this._renderableTilesKeys=[];for(const m of i.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:u}))this._renderableTilesKeys.push(m.key),this._tiles[m.key]||(m.posMatrix=new Float64Array(16),a.ortho(m.posMatrix,0,a.EXTENT,0,a.EXTENT,0,1),this._tiles[m.key]=new at(m,this.tileSize))}removeOutdated(i){const u={};this.renderHistory=this.renderHistory.filter((m,v)=>this.renderHistory.indexOf(m)===v).slice(0,this.renderHistorySize);for(const m of this._renderableTilesKeys)u[m]=!0;for(const m of this.renderHistory)u[m]=!0;for(const m in this._tiles)u[m]||(this._tiles[m].clearTextures(i),delete this._tiles[m])}getRenderableTiles(){return this._renderableTilesKeys.map(i=>this.getTileByID(i))}getTileByID(i){return this._tiles[i]}getTerrainCoords(i){const u={};for(const m of this._renderableTilesKeys){const v=this._tiles[m].tileID;if(v.canonical.equals(i.canonical)){const S=i.clone();S.posMatrix=new Float64Array(16),a.ortho(S.posMatrix,0,a.EXTENT,0,a.EXTENT,0,1),u[m]=S}else if(v.canonical.isChildOf(i.canonical)){const S=i.clone();S.posMatrix=new Float64Array(16);const P=v.canonical.z-i.canonical.z,z=v.canonical.x-(v.canonical.x>>P<<P),q=v.canonical.y-(v.canonical.y>>P<<P),J=a.EXTENT>>P;a.ortho(S.posMatrix,0,J,0,J,0,1),a.translate(S.posMatrix,S.posMatrix,[-z*J,-q*J,0]),u[m]=S}else if(i.canonical.isChildOf(v.canonical)){const S=i.clone();S.posMatrix=new Float64Array(16);const P=i.canonical.z-v.canonical.z,z=i.canonical.x-(i.canonical.x>>P<<P),q=i.canonical.y-(i.canonical.y>>P<<P),J=a.EXTENT>>P;a.ortho(S.posMatrix,0,a.EXTENT,0,a.EXTENT,0,1),a.translate(S.posMatrix,S.posMatrix,[z*J,q*J,0]),a.scale(S.posMatrix,S.posMatrix,[1/2**P,1/2**P,0]),u[m]=S}}return u}getSourceTile(i,u){const m=this.sourceCache._source;let v=i.overscaledZ-this.deltaZoom;if(v>m.maxzoom&&(v=m.maxzoom),v<m.minzoom)return null;this._sourceTileCache[i.key]||(this._sourceTileCache[i.key]=i.scaledTo(v).key);let S=this.sourceCache.getTileByID(this._sourceTileCache[i.key]);if((!S||!S.dem)&&u)for(;v>=m.minzoom&&(!S||!S.dem);)S=this.sourceCache.getTileByID(i.scaledTo(v--).key);return S}tilesAfterTime(i=Date.now()){return Object.values(this._tiles).filter(u=>u.timeLoaded>=i)}}class Bn{constructor(i,u,m){this.style=i,this.sourceCache=new mn(u),this.options=m,this.exaggeration=typeof m.exaggeration=="number"?m.exaggeration:1,this.elevationOffset=typeof m.elevationOffset=="number"?m.elevationOffset:450,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024,this.clearRerenderCache()}getDEMElevation(i,u,m,v=a.EXTENT){if(!(u>=0&&u<v&&m>=0&&m<v))return this.elevationOffset;let S=0;const P=this.getTerrainData(i);if(P.tile&&P.tile.dem){const z=a.transformMat4$1([],[u/v*a.EXTENT,m/v*a.EXTENT],P.u_terrain_matrix),q=[z[0]*P.tile.dem.dim,z[1]*P.tile.dem.dim],J=[Math.floor(q[0]),Math.floor(q[1])],ie=P.tile.dem.get(J[0],J[1]),pe=P.tile.dem.get(J[0],J[1]+1),be=P.tile.dem.get(J[0]+1,J[1]),Ve=P.tile.dem.get(J[0]+1,J[1]+1);S=a.number(a.number(ie,pe,q[0]-J[0]),a.number(be,Ve,q[0]-J[0]),q[1]-J[1])}return S}rememberForRerender(i,u){for(const m in this.sourceCache._tiles){const v=this.sourceCache._tiles[m];(v.tileID.equals(u)||v.tileID.isChildOf(u))&&(i===this.sourceCache.sourceCache.id&&(v.timeLoaded=Date.now()),this._rerender[i]=this._rerender[i]||{},this._rerender[i][v.tileID.key]=!0)}}needsRerender(i,u){return this._rerender[i]&&this._rerender[i][u.key]}clearRerenderCache(){this._rerender={}}getElevation(i,u,m,v=a.EXTENT){return(this.getDEMElevation(i,u,m,v)+this.elevationOffset)*this.exaggeration}getTerrainData(i){if(!this._emptyDemTexture){const v=this.style.map.painter.context,S=new a.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Q(v,S,v.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Q(v,new a.RGBAImage({width:1,height:1}),v.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(v.gl.NEAREST,v.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.identity([])}const u=this.sourceCache.getSourceTile(i,!0);if(u&&u.dem&&(!u.demTexture||u.needsTerrainPrepare)){const v=this.style.map.painter.context;u.demTexture=this.style.map.painter.getTileTexture(u.dem.stride),u.demTexture?u.demTexture.update(u.dem.getPixels(),{premultiply:!1}):u.demTexture=new Q(v,u.dem.getPixels(),v.gl.RGBA,{premultiply:!1}),u.demTexture.bind(v.gl.NEAREST,v.gl.CLAMP_TO_EDGE),u.needsTerrainPrepare=!1}const m=u&&u+u.tileID.key+i.key;if(m&&!this._demMatrixCache[m]){const v=this.sourceCache.sourceCache._source.maxzoom;let S=i.canonical.z-u.tileID.canonical.z;i.overscaledZ>i.canonical.z&&(i.canonical.z>=v?S=i.canonical.z-v:a.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const P=i.canonical.x-(i.canonical.x>>S<<S),z=i.canonical.y-(i.canonical.y>>S<<S),q=a.fromScaling(new Float64Array(16),[1/(a.EXTENT<<S),1/(a.EXTENT<<S),0]);a.translate(q,q,[P*a.EXTENT,z*a.EXTENT,0]),this._demMatrixCache[i.key]={matrix:q,coord:i}}return{u_depth:2,u_terrain:3,u_terrain_dim:u&&u.dem&&u.dem.dim||1,u_terrain_matrix:m?this._demMatrixCache[i.key].matrix:this._emptyDemMatrix,u_terrain_unpack:u&&u.dem&&u.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_offset:this.elevationOffset,u_terrain_exaggeration:this.exaggeration,texture:(u&&u.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:u}}getRTTFramebuffer(){const i=this.style.map.painter;if(!this._rttFramebuffer){const u=this.sourceCache.tileSize*this.qualityFactor;this._rttFramebuffer=i.context.createFramebuffer(u,u,!0),this._rttFramebuffer.depthAttachment.set(i.context.createRenderbuffer(i.context.gl.DEPTH_COMPONENT16,u,u))}return this._rttFramebuffer}getFramebuffer(i){const u=this.style.map.painter,m=u.width/devicePixelRatio,v=u.height/devicePixelRatio;return!this._fbo||this._fbo.width===m&&this._fbo.height===v||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Q(u.context,{width:m,height:v,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Q(u.context,{width:m,height:v,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=u.context.createFramebuffer(m,v,!0),this._fbo.depthAttachment.set(u.context.createRenderbuffer(u.context.gl.DEPTH_COMPONENT16,m,v))),this._fbo.colorAttachment.set(i==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const i=this.style.map.painter.context;if(this._coordsTexture)return this._coordsTexture;const u=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let S=0,P=0;S<this._coordsTextureSize;S++)for(let z=0;z<this._coordsTextureSize;z++,P+=4)u[P+0]=255&z,u[P+1]=255&S,u[P+2]=z>>8<<4|S>>8,u[P+3]=0;const m=new a.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(u.buffer)),v=new Q(i,m,i.gl.RGBA,{premultiply:!1});return v.bind(i.gl.NEAREST,i.gl.CLAMP_TO_EDGE),this._coordsTexture=v,v}pointCoordinate(i){const u=new Uint8Array(4),m=this.style.map.painter,v=m.context,S=v.gl;v.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),S.readPixels(i.x,m.height/devicePixelRatio-i.y-1,1,1,S.RGBA,S.UNSIGNED_BYTE,u),v.bindFramebuffer.set(null);const P=u[0]+(u[2]>>4<<8),z=u[1]+((15&u[2])<<8),q=this.coordsIndex[255-u[3]],J=q&&this.sourceCache.getTileByID(q);if(!J)return null;const ie=this._coordsTextureSize,pe=(1<<J.tileID.canonical.z)*ie;return new a.MercatorCoordinate((J.tileID.canonical.x*ie+P)/pe,(J.tileID.canonical.y*ie+z)/pe,this.getElevation(J.tileID,P,z,ie))}getTerrainMesh(){if(this._mesh)return this._mesh;const i=this.style.map.painter.context,u=new a.PosArray,m=new a.TriangleIndexArray,v=this.meshSize,S=a.EXTENT/v,P=v*v;for(let z=0;z<=v;z++)for(let q=0;q<=v;q++)u.emplaceBack(q*S,z*S);for(let z=0;z<P;z+=v+1)for(let q=0;q<v;q++)m.emplaceBack(q+z,v+q+z+1,v+q+z+2),m.emplaceBack(q+z,v+q+z+2,q+z+1);return this._mesh={indexBuffer:i.createIndexBuffer(m),vertexBuffer:i.createVertexBuffer(u,In.members),segments:a.SegmentVector.simpleSegment(0,0,u.length,m.length)},this._mesh}getMinMaxElevation(i){const u=this.getTerrainData(i).tile,m={minElevation:null,maxElevation:null};return u&&u.dem&&(m.minElevation=(u.dem.min+this.elevationOffset)*this.exaggeration,m.maxElevation=(u.dem.max+this.elevationOffset)*this.exaggeration),m}}const kn=(g,i)=>a.emitValidationErrors(g,i&&i.filter(u=>u.identifier!=="source.canvas")),Vn=a.pick(Ht,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Ti=a.pick(Ht,["setCenter","setZoom","setBearing","setPitch"]),oi=function(){const g={},i=a.spec.$version;for(const u in a.spec.$root){const m=a.spec.$root[u];if(m.required){let v=null;v=u==="version"?i:m.type==="array"?[]:{},v!=null&&(g[u]=v)}}return g}();class wi extends a.Evented{constructor(i,u={}){super(),this.map=i,this.dispatcher=new ue(ze(),this),this.imageManager=new M,this.imageManager.setEventedParent(this),this.glyphManager=new Z(i._requestManager,u.localIdeographFontFamily),this.lineAtlas=new _e(256,512),this.crossTileSymbolIndex=new dn,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",a.getReferrer());const m=this;this._rtlTextPluginCallback=wi.registerForPluginStateChange(v=>{m.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:v.pluginStatus,pluginURL:v.pluginURL},(S,P)=>{if(a.triggerPluginCompletionEvent(S),P&&P.every(z=>z))for(const z in m.sourceCaches)m.sourceCaches[z].reload()})}),this.on("data",v=>{if(v.dataType!=="source"||v.sourceDataType!=="metadata")return;const S=this.sourceCaches[v.sourceId];if(!S)return;const P=S.getSource();if(P&&P.vectorLayerIds)for(const z in this._layers){const q=this._layers[z];q.source===P.id&&this._validateLayer(q)}})}loadURL(i,u={}){this.fire(new a.Event("dataloading",{dataType:"style"}));const m=typeof u.validate!="boolean"||u.validate,v=this.map._requestManager.transformRequest(i,a.ResourceType.Style);this._request=a.getJSON(v,(S,P)=>{this._request=null,S?this.fire(new a.ErrorEvent(S)):P&&this._load(P,m)})}loadJSON(i,u={}){this.fire(new a.Event("dataloading",{dataType:"style"})),this._request=a.exported.frame(()=>{this._request=null,this._load(i,u.validate!==!1)})}loadEmpty(){this.fire(new a.Event("dataloading",{dataType:"style"})),this._load(oi,!1)}_load(i,u){if(u&&kn(this,a.validateStyle(i)))return;this._loaded=!0,this.stylesheet=i;for(const v in i.sources)this.addSource(v,i.sources[v],{validate:!1});i.sprite?this._loadSprite(i.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(i.glyphs);const m=sr(this.stylesheet.layers);this._order=m.map(v=>v.id),this._layers={},this._serializedLayers={};for(let v of m)v=a.createStyleLayer(v),v.setEventedParent(this,{layer:{id:v.id}}),this._layers[v.id]=v,this._serializedLayers[v.id]=v.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new fe(this.stylesheet.light),this.setTerrain(this.stylesheet.terrain),this.fire(new a.Event("data",{dataType:"style"})),this.fire(new a.Event("style.load"))}_loadSprite(i){this._spriteRequest=function(u,m,v,S){let P,z,q;const J=v>1?"@2x":"";let ie=a.getJSON(m.transformRequest(m.normalizeSpriteURL(u,J,".json"),a.ResourceType.SpriteJSON),(Ve,Ne)=>{ie=null,q||(q=Ve,P=Ne,be())}),pe=a.getImage(m.transformRequest(m.normalizeSpriteURL(u,J,".png"),a.ResourceType.SpriteImage),(Ve,Ne)=>{pe=null,q||(q=Ve,z=Ne,be())});function be(){if(q)S(q);else if(P&&z){const Ve=a.exported.getImageData(z),Ne={};for(const He in P){const{width:ct,height:wt,x:St,y:We,sdf:Rt,pixelRatio:Qt,stretchX:Xt,stretchY:Zt,content:ur}=P[He],qt=new a.RGBAImage({width:ct,height:wt});a.RGBAImage.copy(Ve,qt,{x:St,y:We},{x:0,y:0},{width:ct,height:wt}),Ne[He]={data:qt,pixelRatio:Qt,sdf:Rt,stretchX:Xt,stretchY:Zt,content:ur}}S(null,Ne)}}return{cancel(){ie&&(ie.cancel(),ie=null),pe&&(pe.cancel(),pe=null)}}}(i,this.map._requestManager,this.map.getPixelRatio(),(u,m)=>{if(this._spriteRequest=null,u)this.fire(new a.ErrorEvent(u));else if(m)for(const v in m)this.imageManager.addImage(v,m[v]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.Event("data",{dataType:"style"}))})}_validateLayer(i){const u=this.sourceCaches[i.source];if(!u)return;const m=i.sourceLayer;if(!m)return;const v=u.getSource();(v.type==="geojson"||v.vectorLayerIds&&v.vectorLayerIds.indexOf(m)===-1)&&this.fire(new a.ErrorEvent(new Error(`Source layer "${m}" does not exist on source "${v.id}" as specified by style layer "${i.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this.sourceCaches)if(!this.sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(i){const u=[];for(const m of i){const v=this._layers[m];v.type!=="custom"&&u.push(v.serialize())}return u}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const i in this.sourceCaches)if(this.sourceCaches[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(i){if(!this._loaded)return;const u=this._changed;if(this._changed){const v=Object.keys(this._updatedLayers),S=Object.keys(this._removedLayers);(v.length||S.length)&&this._updateWorkerLayers(v,S);for(const P in this._updatedSources){const z=this._updatedSources[P];if(z==="reload")this._reloadSource(P);else{if(z!=="clear")throw new Error(`Invalid action ${z}`);this._clearSource(P)}}this._updateTilesForChangedImages();for(const P in this._updatedPaintProps)this._layers[P].updateTransitions(i);this.light.updateTransitions(i),this._resetUpdates()}const m={};for(const v in this.sourceCaches){const S=this.sourceCaches[v];m[v]=S.used,S.used=!1}for(const v of this._order){const S=this._layers[v];S.recalculate(i,this._availableImages),!S.isHidden(i.zoom)&&S.source&&(this.sourceCaches[S.source].used=!0)}for(const v in m){const S=this.sourceCaches[v];m[v]!==S.used&&S.fire(new a.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:v}))}this.light.recalculate(i),this.z=i.zoom,u&&this.fire(new a.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateWorkerLayers(i,u){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(i),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setTerrain(i){if(this._checkLoaded(),this._terrainDataCallback&&this.off("data",this._terrainDataCallback),this._terrainfreezeElevationCallback&&this.map.off("freezeElevation",this._terrainfreezeElevationCallback),i){const u=this.sourceCaches[i.source];if(!u)throw new Error(`cannot load terrain, because there exists no source with ID: ${i.source}`);this.terrain=new Bn(this,u,i),this.map.transform.updateElevation(this.terrain),this._terrainfreezeElevationCallback=m=>{m.freeze?this.map.transform.freezeElevation=!0:(this.map.transform.freezeElevation=!1,this.map.transform.recalculateZoom(this.terrain))},this._terrainDataCallback=m=>{m.tile&&(m.sourceId===i.source?(this.map.transform.updateElevation(this.terrain),this.terrain.rememberForRerender(m.sourceId,m.tile.tileID)):m.source.type==="geojson"&&this.terrain.rememberForRerender(m.sourceId,m.tile.tileID))},this.on("data",this._terrainDataCallback),this.map.on("freezeElevation",this._terrainfreezeElevationCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.map.transform.updateElevation(this.terrain);this.map.fire(new a.Event("terrain",{terrain:i}))}setState(i){if(this._checkLoaded(),kn(this,a.validateStyle(i)))return!1;(i=a.clone$1(i)).layers=sr(i.layers);const u=function(v,S){if(!v)return[{command:Ht.setStyle,args:[S]}];let P=[];try{if(!E(v.version,S.version))return[{command:Ht.setStyle,args:[S]}];E(v.center,S.center)||P.push({command:Ht.setCenter,args:[S.center]}),E(v.zoom,S.zoom)||P.push({command:Ht.setZoom,args:[S.zoom]}),E(v.bearing,S.bearing)||P.push({command:Ht.setBearing,args:[S.bearing]}),E(v.pitch,S.pitch)||P.push({command:Ht.setPitch,args:[S.pitch]}),E(v.sprite,S.sprite)||P.push({command:Ht.setSprite,args:[S.sprite]}),E(v.glyphs,S.glyphs)||P.push({command:Ht.setGlyphs,args:[S.glyphs]}),E(v.transition,S.transition)||P.push({command:Ht.setTransition,args:[S.transition]}),E(v.light,S.light)||P.push({command:Ht.setLight,args:[S.light]});const z={},q=[];(function(ie,pe,be,Ve){let Ne;for(Ne in pe=pe||{},ie=ie||{})Object.prototype.hasOwnProperty.call(ie,Ne)&&(Object.prototype.hasOwnProperty.call(pe,Ne)||Br(Ne,be,Ve));for(Ne in pe)Object.prototype.hasOwnProperty.call(pe,Ne)&&(Object.prototype.hasOwnProperty.call(ie,Ne)?E(ie[Ne],pe[Ne])||(ie[Ne].type==="geojson"&&pe[Ne].type==="geojson"&&Gr(ie,pe,Ne)?be.push({command:Ht.setGeoJSONSourceData,args:[Ne,pe[Ne].data]}):vr(Ne,pe,be,Ve)):fr(Ne,pe,be))})(v.sources,S.sources,q,z);const J=[];v.layers&&v.layers.forEach(ie=>{z[ie.source]?P.push({command:Ht.removeLayer,args:[ie.id]}):J.push(ie)}),P=P.concat(q),function(ie,pe,be){pe=pe||[];const Ve=(ie=ie||[]).map(xr),Ne=pe.map(xr),He=ie.reduce(Zr,{}),ct=pe.reduce(Zr,{}),wt=Ve.slice(),St=Object.create(null);let We,Rt,Qt,Xt,Zt,ur,qt;for(We=0,Rt=0;We<Ve.length;We++)Qt=Ve[We],Object.prototype.hasOwnProperty.call(ct,Qt)?Rt++:(be.push({command:Ht.removeLayer,args:[Qt]}),wt.splice(wt.indexOf(Qt,Rt),1));for(We=0,Rt=0;We<Ne.length;We++)Qt=Ne[Ne.length-1-We],wt[wt.length-1-We]!==Qt&&(Object.prototype.hasOwnProperty.call(He,Qt)?(be.push({command:Ht.removeLayer,args:[Qt]}),wt.splice(wt.lastIndexOf(Qt,wt.length-Rt),1)):Rt++,ur=wt[wt.length-We],be.push({command:Ht.addLayer,args:[ct[Qt],ur]}),wt.splice(wt.length-We,0,Qt),St[Qt]=!0);for(We=0;We<Ne.length;We++)if(Qt=Ne[We],Xt=He[Qt],Zt=ct[Qt],!St[Qt]&&!E(Xt,Zt))if(E(Xt.source,Zt.source)&&E(Xt["source-layer"],Zt["source-layer"])&&E(Xt.type,Zt.type)){for(qt in rr(Xt.layout,Zt.layout,be,Qt,null,Ht.setLayoutProperty),rr(Xt.paint,Zt.paint,be,Qt,null,Ht.setPaintProperty),E(Xt.filter,Zt.filter)||be.push({command:Ht.setFilter,args:[Qt,Zt.filter]}),E(Xt.minzoom,Zt.minzoom)&&E(Xt.maxzoom,Zt.maxzoom)||be.push({command:Ht.setLayerZoomRange,args:[Qt,Zt.minzoom,Zt.maxzoom]}),Xt)Object.prototype.hasOwnProperty.call(Xt,qt)&&qt!=="layout"&&qt!=="paint"&&qt!=="filter"&&qt!=="metadata"&&qt!=="minzoom"&&qt!=="maxzoom"&&(qt.indexOf("paint.")===0?rr(Xt[qt],Zt[qt],be,Qt,qt.slice(6),Ht.setPaintProperty):E(Xt[qt],Zt[qt])||be.push({command:Ht.setLayerProperty,args:[Qt,qt,Zt[qt]]}));for(qt in Zt)Object.prototype.hasOwnProperty.call(Zt,qt)&&!Object.prototype.hasOwnProperty.call(Xt,qt)&&qt!=="layout"&&qt!=="paint"&&qt!=="filter"&&qt!=="metadata"&&qt!=="minzoom"&&qt!=="maxzoom"&&(qt.indexOf("paint.")===0?rr(Xt[qt],Zt[qt],be,Qt,qt.slice(6),Ht.setPaintProperty):E(Xt[qt],Zt[qt])||be.push({command:Ht.setLayerProperty,args:[Qt,qt,Zt[qt]]}))}else be.push({command:Ht.removeLayer,args:[Qt]}),ur=wt[wt.lastIndexOf(Qt)+1],be.push({command:Ht.addLayer,args:[Zt,ur]})}(J,S.layers,P)}catch(z){console.warn("Unable to compute style diff:",z),P=[{command:Ht.setStyle,args:[S]}]}return P}(this.serialize(),i).filter(v=>!(v.command in Ti));if(u.length===0)return!1;const m=u.filter(v=>!(v.command in Vn));if(m.length>0)throw new Error(`Unimplemented: ${m.map(v=>v.command).join(", ")}.`);return u.forEach(v=>{v.command!=="setTransition"&&this[v.command].apply(this,v.args)}),this.stylesheet=i,!0}addImage(i,u){if(this.getImage(i))return this.fire(new a.ErrorEvent(new Error(`An image named "${i}" already exists.`)));this.imageManager.addImage(i,u),this._afterImageUpdated(i)}updateImage(i,u){this.imageManager.updateImage(i,u)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){if(!this.getImage(i))return this.fire(new a.ErrorEvent(new Error(`An image named "${i}" does not exist.`)));this.imageManager.removeImage(i),this._afterImageUpdated(i)}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(i,u,m={}){if(this._checkLoaded(),this.sourceCaches[i]!==void 0)throw new Error(`Source "${i}" already exists.`);if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(a.validateStyle.source,`sources.${i}`,u,null,m))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);const v=this.sourceCaches[i]=new Ge(i,u,this.dispatcher);v.style=this,v.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:v.serialize(),sourceId:i})),v.onAdd(this.map),this._changed=!0}removeSource(i){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error("There is no source with this ID");for(const m in this._layers)if(this._layers[m].source===i)return this.fire(new a.ErrorEvent(new Error(`Source "${i}" cannot be removed while layer "${m}" is using it.`)));const u=this.sourceCaches[i];delete this.sourceCaches[i],delete this._updatedSources[i],u.fire(new a.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:i})),u.setEventedParent(null),u.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(i,u){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error(`There is no source with this ID=${i}`);const m=this.sourceCaches[i].getSource();if(m.type!=="geojson")throw new Error(`geojsonSource.type is ${m.type}, which is !== 'geojson`);m.setData(u),this._changed=!0}getSource(i){return this.sourceCaches[i]&&this.sourceCaches[i].getSource()}addLayer(i,u,m={}){this._checkLoaded();const v=i.id;if(this.getLayer(v))return void this.fire(new a.ErrorEvent(new Error(`Layer "${v}" already exists on this map.`)));let S;if(i.type==="custom"){if(kn(this,a.validateCustomStyleLayer(i)))return;S=a.createStyleLayer(i)}else{if(typeof i.source=="object"&&(this.addSource(v,i.source),i=a.clone$1(i),i=a.extend(i,{source:v})),this._validate(a.validateStyle.layer,`layers.${v}`,i,{arrayIndex:-1},m))return;S=a.createStyleLayer(i),this._validateLayer(S),S.setEventedParent(this,{layer:{id:v}}),this._serializedLayers[S.id]=S.serialize()}const P=u?this._order.indexOf(u):this._order.length;if(u&&P===-1)this.fire(new a.ErrorEvent(new Error(`Cannot add layer "${v}" before non-existing layer "${u}".`)));else{if(this._order.splice(P,0,v),this._layerOrderChanged=!0,this._layers[v]=S,this._removedLayers[v]&&S.source&&S.type!=="custom"){const z=this._removedLayers[v];delete this._removedLayers[v],z.type!==S.type?this._updatedSources[S.source]="clear":(this._updatedSources[S.source]="reload",this.sourceCaches[S.source].pause())}this._updateLayer(S),S.onAdd&&S.onAdd(this.map)}}moveLayer(i,u){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new a.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===u)return;const m=this._order.indexOf(i);this._order.splice(m,1);const v=u?this._order.indexOf(u):this._order.length;u&&v===-1?this.fire(new a.ErrorEvent(new Error(`Cannot move layer "${i}" before non-existing layer "${u}".`))):(this._order.splice(v,0,i),this._layerOrderChanged=!0)}removeLayer(i){this._checkLoaded();const u=this._layers[i];if(!u)return void this.fire(new a.ErrorEvent(new Error(`Cannot remove non-existing layer "${i}".`)));u.setEventedParent(null);const m=this._order.indexOf(i);this._order.splice(m,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=u,delete this._layers[i],delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],u.onRemove&&u.onRemove(this.map)}getLayer(i){return this._layers[i]}hasLayer(i){return i in this._layers}setLayerZoomRange(i,u,m){this._checkLoaded();const v=this.getLayer(i);v?v.minzoom===u&&v.maxzoom===m||(u!=null&&(v.minzoom=u),m!=null&&(v.maxzoom=m),this._updateLayer(v)):this.fire(new a.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${i}".`)))}setFilter(i,u,m={}){this._checkLoaded();const v=this.getLayer(i);if(v){if(!E(v.filter,u))return u==null?(v.filter=void 0,void this._updateLayer(v)):void(this._validate(a.validateStyle.filter,`layers.${v.id}.filter`,u,null,m)||(v.filter=a.clone$1(u),this._updateLayer(v)))}else this.fire(new a.ErrorEvent(new Error(`Cannot filter non-existing layer "${i}".`)))}getFilter(i){return a.clone$1(this.getLayer(i).filter)}setLayoutProperty(i,u,m,v={}){this._checkLoaded();const S=this.getLayer(i);S?E(S.getLayoutProperty(u),m)||(S.setLayoutProperty(u,m,v),this._updateLayer(S)):this.fire(new a.ErrorEvent(new Error(`Cannot style non-existing layer "${i}".`)))}getLayoutProperty(i,u){const m=this.getLayer(i);if(m)return m.getLayoutProperty(u);this.fire(new a.ErrorEvent(new Error(`Cannot get style of non-existing layer "${i}".`)))}setPaintProperty(i,u,m,v={}){this._checkLoaded();const S=this.getLayer(i);S?E(S.getPaintProperty(u),m)||(S.setPaintProperty(u,m,v)&&this._updateLayer(S),this._changed=!0,this._updatedPaintProps[i]=!0):this.fire(new a.ErrorEvent(new Error(`Cannot style non-existing layer "${i}".`)))}getPaintProperty(i,u){return this.getLayer(i).getPaintProperty(u)}setFeatureState(i,u){this._checkLoaded();const m=i.source,v=i.sourceLayer,S=this.sourceCaches[m];if(S===void 0)return void this.fire(new a.ErrorEvent(new Error(`The source '${m}' does not exist in the map's style.`)));const P=S.getSource().type;P==="geojson"&&v?this.fire(new a.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):P!=="vector"||v?(i.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),S.setFeatureState(v,i.id,u)):this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(i,u){this._checkLoaded();const m=i.source,v=this.sourceCaches[m];if(v===void 0)return void this.fire(new a.ErrorEvent(new Error(`The source '${m}' does not exist in the map's style.`)));const S=v.getSource().type,P=S==="vector"?i.sourceLayer:void 0;S!=="vector"||P?u&&typeof i.id!="string"&&typeof i.id!="number"?this.fire(new a.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):v.removeFeatureState(P,i.id,u):this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(i){this._checkLoaded();const u=i.source,m=i.sourceLayer,v=this.sourceCaches[u];if(v!==void 0)return v.getSource().type!=="vector"||m?(i.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),v.getFeatureState(m,i.id)):void this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.ErrorEvent(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return a.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return a.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:a.mapObject(this.sourceCaches,i=>i.serialize()),layers:this._serializeLayers(this._order)},i=>i!==void 0)}_updateLayer(i){this._updatedLayers[i.id]=!0,i.source&&!this._updatedSources[i.source]&&this.sourceCaches[i.source].getSource().type!=="raster"&&(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(i){const u=P=>this._layers[P].type==="fill-extrusion",m={},v=[];for(let P=this._order.length-1;P>=0;P--){const z=this._order[P];if(u(z)){m[z]=P;for(const q of i){const J=q[z];if(J)for(const ie of J)v.push(ie)}}}v.sort((P,z)=>z.intersectionZ-P.intersectionZ);const S=[];for(let P=this._order.length-1;P>=0;P--){const z=this._order[P];if(u(z))for(let q=v.length-1;q>=0;q--){const J=v[q].feature;if(m[J.layer.id]<P)break;S.push(J),v.pop()}else for(const q of i){const J=q[z];if(J)for(const ie of J)S.push(ie.feature)}}return S}queryRenderedFeatures(i,u,m){u&&u.filter&&this._validate(a.validateStyle.filter,"queryRenderedFeatures.filter",u.filter,null,u);const v={};if(u&&u.layers){if(!Array.isArray(u.layers))return this.fire(new a.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const P of u.layers){const z=this._layers[P];if(!z)return this.fire(new a.ErrorEvent(new Error(`The layer '${P}' does not exist in the map's style and cannot be queried for features.`))),[];v[z.source]=!0}}const S=[];u.availableImages=this._availableImages;for(const P in this.sourceCaches)u.layers&&!v[P]||S.push(ke(this.sourceCaches[P],this._layers,this._serializedLayers,i,u,m));return this.placement&&S.push(function(P,z,q,J,ie,pe,be){const Ve={},Ne=pe.queryRenderedSymbols(J),He=[];for(const ct of Object.keys(Ne).map(Number))He.push(be[ct]);He.sort(Ke);for(const ct of He){const wt=ct.featureIndex.lookupSymbolFeatures(Ne[ct.bucketInstanceId],z,ct.bucketIndex,ct.sourceLayerIndex,ie.filter,ie.layers,ie.availableImages,P);for(const St in wt){const We=Ve[St]=Ve[St]||[],Rt=wt[St];Rt.sort((Qt,Xt)=>{const Zt=ct.featureSortOrder;if(Zt){const ur=Zt.indexOf(Qt.featureIndex);return Zt.indexOf(Xt.featureIndex)-ur}return Xt.featureIndex-Qt.featureIndex});for(const Qt of Rt)We.push(Qt)}}for(const ct in Ve)Ve[ct].forEach(wt=>{const St=wt.feature,We=q[P[ct].source].getFeatureState(St.layer["source-layer"],St.id);St.source=St.layer.source,St.layer["source-layer"]&&(St.sourceLayer=St.layer["source-layer"]),St.state=We});return Ve}(this._layers,this._serializedLayers,this.sourceCaches,i,u,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(S)}querySourceFeatures(i,u){u&&u.filter&&this._validate(a.validateStyle.filter,"querySourceFeatures.filter",u.filter,null,u);const m=this.sourceCaches[i];return m?function(v,S){const P=v.getRenderableIds().map(J=>v.getTileByID(J)),z=[],q={};for(let J=0;J<P.length;J++){const ie=P[J],pe=ie.tileID.canonical.key;q[pe]||(q[pe]=!0,ie.querySourceFeatures(z,S))}return z}(m,u):[]}addSourceType(i,u,m){return wi.getSourceType(i)?m(new Error(`A source type called "${i}" already exists.`)):(wi.setSourceType(i,u),u.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:i,url:u.workerSourceURL},m):m(null,null))}getLight(){return this.light.getLight()}setLight(i,u={}){this._checkLoaded();const m=this.light.getLight();let v=!1;for(const P in i)if(!E(i[P],m[P])){v=!0;break}if(!v)return;const S={now:a.exported.now(),transition:a.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,u),this.light.updateTransitions(S)}_validate(i,u,m,v,S={}){return(!S||S.validate!==!1)&&kn(this,i.call(a.validateStyle,a.extend({key:u,style:this.serialize(),value:m,styleSpec:a.spec},v)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),a.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const i in this._layers)this._layers[i].setEventedParent(null);for(const i in this.sourceCaches){const u=this.sourceCaches[i];u.setEventedParent(null),u.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(i){this.sourceCaches[i].clearTiles()}_reloadSource(i){this.sourceCaches[i].resume(),this.sourceCaches[i].reload()}_updateSources(i){for(const u in this.sourceCaches)this.sourceCaches[u].update(i,this.terrain)}_generateCollisionBoxes(){for(const i in this.sourceCaches)this._reloadSource(i)}_updatePlacement(i,u,m,v,S=!1){let P=!1,z=!1;const q={};for(const J of this._order){const ie=this._layers[J];if(ie.type!=="symbol")continue;if(!q[ie.source]){const be=this.sourceCaches[ie.source];q[ie.source]=be.getRenderableIds(!0).map(Ve=>be.getTileByID(Ve)).sort((Ve,Ne)=>Ne.tileID.overscaledZ-Ve.tileID.overscaledZ||(Ve.tileID.isLessThan(Ne.tileID)?-1:1))}const pe=this.crossTileSymbolIndex.addLayer(ie,q[ie.source],i.center.lng);P=P||pe}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((S=S||this._layerOrderChanged||m===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(a.exported.now(),i.zoom))&&(this.pauseablePlacement=new zt(i,this.terrain,this._order,S,u,m,v,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,q),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(a.exported.now()),z=!0),P&&this.pauseablePlacement.placement.setStale()),z||P)for(const J of this._order){const ie=this._layers[J];ie.type==="symbol"&&this.placement.updateLayerOpacities(ie,q[ie.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(a.exported.now())}_releaseSymbolFadeTiles(){for(const i in this.sourceCaches)this.sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,u,m){this.imageManager.getImages(u.icons,m),this._updateTilesForChangedImages();const v=this.sourceCaches[u.source];v&&v.setDependencies(u.tileID.key,u.type,u.icons)}getGlyphs(i,u,m){this.glyphManager.getGlyphs(u.stacks,m)}getResource(i,u,m){return a.makeRequest(u,m)}}wi.getSourceType=function(g){return ne[g]},wi.setSourceType=function(g,i){ne[g]=i},wi.registerForPluginStateChange=a.registerForPluginStateChange;var Qs="attribute vec2 a_pos;uniform mat4 u_matrix;varying vec2 v_texture_pos;varying float v_depth;void main() {v_texture_pos=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);v_depth=gl_Position.z/gl_Position.w;}";const bi={prelude:Yn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_offset;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return (elevation+u_terrain_offset)*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Yn(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Yn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Yn(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Yn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Yn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Yn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Yn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Yn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Yn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Yn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Yn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Yn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Yn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Yn(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Yn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Yn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Yn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Yn(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Yn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Yn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Yn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Yn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Yn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Yn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Yn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Yn("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Qs),terrainDepth:Yn("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Qs),terrainCoords:Yn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Qs)};function Yn(g,i){const u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,m=i.match(/attribute ([\w]+) ([\w]+)/g),v=g.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),S=i.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),P=S?S.concat(v):v,z={};return{fragmentSource:g=g.replace(u,(q,J,ie,pe,be)=>(z[be]=!0,J==="define"?`
#ifndef HAS_UNIFORM_u_${be}
varying ${ie} ${pe} ${be};
#else
uniform ${ie} ${pe} u_${be};
#endif
`:`
#ifdef HAS_UNIFORM_u_${be}
    ${ie} ${pe} ${be} = u_${be};
#endif
`)),vertexSource:i=i.replace(u,(q,J,ie,pe,be)=>{const Ve=pe==="float"?"vec2":"vec4",Ne=be.match(/color/)?"color":Ve;return z[be]?J==="define"?`
#ifndef HAS_UNIFORM_u_${be}
uniform lowp float u_${be}_t;
attribute ${ie} ${Ve} a_${be};
varying ${ie} ${pe} ${be};
#else
uniform ${ie} ${pe} u_${be};
#endif
`:Ne==="vec4"?`
#ifndef HAS_UNIFORM_u_${be}
    ${be} = a_${be};
#else
    ${ie} ${pe} ${be} = u_${be};
#endif
`:`
#ifndef HAS_UNIFORM_u_${be}
    ${be} = unpack_mix_${Ne}(a_${be}, u_${be}_t);
#else
    ${ie} ${pe} ${be} = u_${be};
#endif
`:J==="define"?`
#ifndef HAS_UNIFORM_u_${be}
uniform lowp float u_${be}_t;
attribute ${ie} ${Ve} a_${be};
#else
uniform ${ie} ${pe} u_${be};
#endif
`:Ne==="vec4"?`
#ifndef HAS_UNIFORM_u_${be}
    ${ie} ${pe} ${be} = a_${be};
#else
    ${ie} ${pe} ${be} = u_${be};
#endif
`:`
#ifndef HAS_UNIFORM_u_${be}
    ${ie} ${pe} ${be} = unpack_mix_${Ne}(a_${be}, u_${be}_t);
#else
    ${ie} ${pe} ${be} = u_${be};
#endif
`}),staticAttributes:m,staticUniforms:P}}class Za{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,u,m,v,S,P,z,q,J){this.context=i;let ie=this.boundPaintVertexBuffers.length!==v.length;for(let pe=0;!ie&&pe<v.length;pe++)this.boundPaintVertexBuffers[pe]!==v[pe]&&(ie=!0);i.extVertexArrayObject&&this.vao&&this.boundProgram===u&&this.boundLayoutVertexBuffer===m&&!ie&&this.boundIndexBuffer===S&&this.boundVertexOffset===P&&this.boundDynamicVertexBuffer===z&&this.boundDynamicVertexBuffer2===q&&this.boundDynamicVertexBuffer3===J?(i.bindVertexArrayOES.set(this.vao),z&&z.bind(),S&&S.dynamicDraw&&S.bind(),q&&q.bind(),J&&J.bind()):this.freshBind(u,m,v,S,P,z,q,J)}freshBind(i,u,m,v,S,P,z,q){let J;const ie=i.numAttributes,pe=this.context,be=pe.gl;if(pe.extVertexArrayObject)this.vao&&this.destroy(),this.vao=pe.extVertexArrayObject.createVertexArrayOES(),pe.bindVertexArrayOES.set(this.vao),J=0,this.boundProgram=i,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=m,this.boundIndexBuffer=v,this.boundVertexOffset=S,this.boundDynamicVertexBuffer=P,this.boundDynamicVertexBuffer2=z,this.boundDynamicVertexBuffer3=q;else{J=pe.currentNumAttributes||0;for(let Ve=ie;Ve<J;Ve++)be.disableVertexAttribArray(Ve)}u.enableAttributes(be,i);for(const Ve of m)Ve.enableAttributes(be,i);P&&P.enableAttributes(be,i),z&&z.enableAttributes(be,i),q&&q.enableAttributes(be,i),u.bind(),u.setVertexAttribPointers(be,i,S);for(const Ve of m)Ve.bind(),Ve.setVertexAttribPointers(be,i,S);P&&(P.bind(),P.setVertexAttribPointers(be,i,S)),v&&v.bind(),z&&(z.bind(),z.setVertexAttribPointers(be,i,S)),q&&(q.bind(),q.setVertexAttribPointers(be,i,S)),pe.currentNumAttributes=ie}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Ks(g){const i=[];for(let u=0;u<g.length;u++){if(g[u]===null)continue;const m=g[u].split(" ");i.push(m.pop())}return i}class Gs{constructor(i,u,m,v,S,P,z){const q=i.gl;this.program=q.createProgram();const J=Ks(m.staticAttributes),ie=v?v.getBinderAttributes():[],pe=J.concat(ie),be=bi.prelude.staticUniforms?Ks(bi.prelude.staticUniforms):[],Ve=m.staticUniforms?Ks(m.staticUniforms):[],Ne=v?v.getBinderUniforms():[],He=be.concat(Ve).concat(Ne),ct=[];for(const Zt of He)ct.indexOf(Zt)<0&&ct.push(Zt);const wt=v?v.defines():[];P&&wt.push("#define OVERDRAW_INSPECTOR;"),z&&wt.push("#define TERRAIN3D;");const St=wt.concat(bi.prelude.fragmentSource,m.fragmentSource).join(`
`),We=wt.concat(bi.prelude.vertexSource,m.vertexSource).join(`
`),Rt=q.createShader(q.FRAGMENT_SHADER);if(q.isContextLost())return void(this.failedToCreate=!0);q.shaderSource(Rt,St),q.compileShader(Rt),q.attachShader(this.program,Rt);const Qt=q.createShader(q.VERTEX_SHADER);if(q.isContextLost())return void(this.failedToCreate=!0);q.shaderSource(Qt,We),q.compileShader(Qt),q.attachShader(this.program,Qt),this.attributes={};const Xt={};this.numAttributes=pe.length;for(let Zt=0;Zt<this.numAttributes;Zt++)pe[Zt]&&(q.bindAttribLocation(this.program,Zt,pe[Zt]),this.attributes[pe[Zt]]=Zt);q.linkProgram(this.program),q.deleteShader(Qt),q.deleteShader(Rt);for(let Zt=0;Zt<ct.length;Zt++){const ur=ct[Zt];if(ur&&!Xt[ur]){const qt=q.getUniformLocation(this.program,ur);qt&&(Xt[ur]=qt)}}this.fixedUniforms=S(i,Xt),this.terrainUniforms=((Zt,ur)=>({u_depth:new a.Uniform1i(Zt,ur.u_depth),u_terrain:new a.Uniform1i(Zt,ur.u_terrain),u_terrain_dim:new a.Uniform1f(Zt,ur.u_terrain_dim),u_terrain_matrix:new a.UniformMatrix4f(Zt,ur.u_terrain_matrix),u_terrain_unpack:new a.Uniform4f(Zt,ur.u_terrain_unpack),u_terrain_offset:new a.Uniform1f(Zt,ur.u_terrain_offset),u_terrain_exaggeration:new a.Uniform1f(Zt,ur.u_terrain_exaggeration)}))(i,Xt),this.binderUniforms=v?v.getUniforms(i,Xt):[]}draw(i,u,m,v,S,P,z,q,J,ie,pe,be,Ve,Ne,He,ct,wt,St){const We=i.gl;if(this.failedToCreate)return;if(i.program.set(this.program),i.setDepthMode(m),i.setStencilMode(v),i.setColorMode(S),i.setCullFace(P),q){i.activeTexture.set(We.TEXTURE2),We.bindTexture(We.TEXTURE_2D,q.depthTexture),i.activeTexture.set(We.TEXTURE3),We.bindTexture(We.TEXTURE_2D,q.texture);for(const Qt in this.terrainUniforms)this.terrainUniforms[Qt].set(q[Qt])}for(const Qt in this.fixedUniforms)this.fixedUniforms[Qt].set(z[Qt]);He&&He.setUniforms(i,this.binderUniforms,Ve,{zoom:Ne});let Rt=0;switch(u){case We.LINES:Rt=2;break;case We.TRIANGLES:Rt=3;break;case We.LINE_STRIP:Rt=1}for(const Qt of be.get()){const Xt=Qt.vaos||(Qt.vaos={});(Xt[J]||(Xt[J]=new Za)).bind(i,this,ie,He?He.getPaintVertexBuffers():[],pe,Qt.vertexOffset,ct,wt,St),We.drawElements(u,Qt.primitiveLength*Rt,We.UNSIGNED_SHORT,Qt.primitiveOffset*Rt*2)}}}function ia(g,i,u){const m=1/hn(u,1,i.transform.tileZoom),v=Math.pow(2,u.tileID.overscaledZ),S=u.tileSize*Math.pow(2,i.transform.tileZoom)/v,P=S*(u.tileID.canonical.x+u.tileID.wrap*v),z=S*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[m,g.fromScale,g.toScale],u_fade:g.t,u_pixel_coord_upper:[P>>16,z>>16],u_pixel_coord_lower:[65535&P,65535&z]}}const gs=(g,i,u,m)=>{const v=i.style.light,S=v.properties.get("position"),P=[S.x,S.y,S.z],z=a.create$1();v.properties.get("anchor")==="viewport"&&a.fromRotation(z,-i.transform.angle),a.transformMat3(P,P,z);const q=v.properties.get("color");return{u_matrix:g,u_lightpos:P,u_lightintensity:v.properties.get("intensity"),u_lightcolor:[q.r,q.g,q.b],u_vertical_gradient:+u,u_opacity:m}},Ri=(g,i,u,m,v,S,P)=>a.extend(gs(g,i,u,m),ia(S,i,P),{u_height_factor:-Math.pow(2,v.overscaledZ)/P.tileSize/8}),Xi=g=>({u_matrix:g}),mo=(g,i,u,m)=>a.extend(Xi(g),ia(u,i,m)),nA=(g,i)=>({u_matrix:g,u_world:i}),EA=(g,i,u,m,v)=>a.extend(mo(g,i,u,m),{u_world:v}),sa=(g,i,u,m)=>{const v=g.transform;let S,P;if(m.paint.get("circle-pitch-alignment")==="map"){const z=hn(u,1,v.zoom);S=!0,P=[z,z]}else S=!1,P=v.pixelsToGLUnits;return{u_camera_to_center_distance:v.cameraToCenterDistance,u_scale_with_map:+(m.paint.get("circle-pitch-scale")==="map"),u_matrix:g.translatePosMatrix(i.posMatrix,u,m.paint.get("circle-translate"),m.paint.get("circle-translate-anchor")),u_pitch_with_map:+S,u_device_pixel_ratio:g.pixelRatio,u_extrude_scale:P}},bs=(g,i,u)=>{const m=hn(u,1,i.zoom),v=Math.pow(2,i.zoom-u.tileID.overscaledZ),S=u.tileID.overscaleFactor();return{u_matrix:g,u_camera_to_center_distance:i.cameraToCenterDistance,u_pixels_to_tile_units:m,u_extrude_scale:[i.pixelsToGLUnits[0]/(m*v),i.pixelsToGLUnits[1]/(m*v)],u_overscale_factor:S}},xs=(g,i,u=1)=>({u_matrix:g,u_color:i,u_overlay:0,u_overlay_scale:u}),Ja=g=>({u_matrix:g}),aa=(g,i,u,m)=>({u_matrix:g,u_extrude_scale:hn(i,1,u),u_intensity:m});function Po(g,i){const u=Math.pow(2,i.canonical.z),m=i.canonical.y;return[new a.MercatorCoordinate(0,m/u).toLngLat().lat,new a.MercatorCoordinate(0,(m+1)/u).toLngLat().lat]}const ka=(g,i,u,m)=>{const v=g.transform;return{u_matrix:Bs(g,i,u,m),u_ratio:1/hn(i,1,v.zoom),u_device_pixel_ratio:g.pixelRatio,u_units_to_pixels:[1/v.pixelsToGLUnits[0],1/v.pixelsToGLUnits[1]]}},Mo=(g,i,u,m,v)=>a.extend(ka(g,i,u,v),{u_image:0,u_image_height:m}),oa=(g,i,u,m,v)=>{const S=g.transform,P=ni(i,S);return{u_matrix:Bs(g,i,u,v),u_texsize:i.imageAtlasTexture.size,u_ratio:1/hn(i,1,S.zoom),u_device_pixel_ratio:g.pixelRatio,u_image:0,u_scale:[P,m.fromScale,m.toScale],u_fade:m.t,u_units_to_pixels:[1/S.pixelsToGLUnits[0],1/S.pixelsToGLUnits[1]]}},qs=(g,i,u,m,v,S)=>{const P=g.lineAtlas,z=ni(i,g.transform),q=u.layout.get("line-cap")==="round",J=P.getDash(m.from,q),ie=P.getDash(m.to,q),pe=J.width*v.fromScale,be=ie.width*v.toScale;return a.extend(ka(g,i,u,S),{u_patternscale_a:[z/pe,-J.height/2],u_patternscale_b:[z/be,-ie.height/2],u_sdfgamma:P.width/(256*Math.min(pe,be)*g.pixelRatio)/2,u_image:0,u_tex_y_a:J.y,u_tex_y_b:ie.y,u_mix:v.t})};function ni(g,i){return 1/hn(g,1,i.tileZoom)}function Bs(g,i,u,m){return g.translatePosMatrix(m?m.posMatrix:i.tileID.posMatrix,i,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const ys=(g,i,u,m,v)=>{return{u_matrix:g,u_tl_parent:i,u_scale_parent:u,u_buffer_scale:1,u_fade_t:m.mix,u_opacity:m.opacity*v.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:v.paint.get("raster-brightness-min"),u_brightness_high:v.paint.get("raster-brightness-max"),u_saturation_factor:(P=v.paint.get("raster-saturation"),P>0?1-1/(1.001-P):-P),u_contrast_factor:(S=v.paint.get("raster-contrast"),S>0?1/(1-S):1+S),u_spin_weights:iA(v.paint.get("raster-hue-rotate"))};var S,P};function iA(g){g*=Math.PI/180;const i=Math.sin(g),u=Math.cos(g);return[(2*u+1)/3,(-Math.sqrt(3)*i-u+1)/3,(Math.sqrt(3)*i-u+1)/3]}const sA=(g,i,u,m,v,S,P,z,q,J)=>{const ie=v.transform;return{u_is_size_zoom_constant:+(g==="constant"||g==="source"),u_is_size_feature_constant:+(g==="constant"||g==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:ie.cameraToCenterDistance,u_pitch:ie.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:ie.width/ie.height,u_fade_change:v.options.fadeDuration?v.symbolFadeChange:1,u_matrix:S,u_label_plane_matrix:P,u_coord_matrix:z,u_is_text:+q,u_pitch_with_map:+m,u_texsize:J,u_texture:0}},Cn=(g,i,u,m,v,S,P,z,q,J,ie)=>{const pe=v.transform;return a.extend(sA(g,i,u,m,v,S,P,z,q,J),{u_gamma_scale:m?Math.cos(pe._pitch)*pe.cameraToCenterDistance:1,u_device_pixel_ratio:v.pixelRatio,u_is_halo:+ie})},qA=(g,i,u,m,v,S,P,z,q,J)=>a.extend(Cn(g,i,u,m,v,S,P,z,!0,q,!0),{u_texsize_icon:J,u_texture_icon:1}),ml=(g,i,u)=>({u_matrix:g,u_opacity:i,u_color:u}),Pa=(g,i,u,m,v,S)=>a.extend(function(P,z,q,J){const ie=q.imageManager.getPattern(P.from.toString()),pe=q.imageManager.getPattern(P.to.toString()),{width:be,height:Ve}=q.imageManager.getPixelSize(),Ne=Math.pow(2,J.tileID.overscaledZ),He=J.tileSize*Math.pow(2,q.transform.tileZoom)/Ne,ct=He*(J.tileID.canonical.x+J.tileID.wrap*Ne),wt=He*J.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:ie.tl,u_pattern_br_a:ie.br,u_pattern_tl_b:pe.tl,u_pattern_br_b:pe.br,u_texsize:[be,Ve],u_mix:z.t,u_pattern_size_a:ie.displaySize,u_pattern_size_b:pe.displaySize,u_scale_a:z.fromScale,u_scale_b:z.toScale,u_tile_units_to_pixels:1/hn(J,1,q.transform.tileZoom),u_pixel_coord_upper:[ct>>16,wt>>16],u_pixel_coord_lower:[65535&ct,65535&wt]}}(m,S,u,v),{u_matrix:g,u_opacity:i}),go={fillExtrusion:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_lightpos:new a.Uniform3f(g,i.u_lightpos),u_lightintensity:new a.Uniform1f(g,i.u_lightintensity),u_lightcolor:new a.Uniform3f(g,i.u_lightcolor),u_vertical_gradient:new a.Uniform1f(g,i.u_vertical_gradient),u_opacity:new a.Uniform1f(g,i.u_opacity)}),fillExtrusionPattern:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_lightpos:new a.Uniform3f(g,i.u_lightpos),u_lightintensity:new a.Uniform1f(g,i.u_lightintensity),u_lightcolor:new a.Uniform3f(g,i.u_lightcolor),u_vertical_gradient:new a.Uniform1f(g,i.u_vertical_gradient),u_height_factor:new a.Uniform1f(g,i.u_height_factor),u_image:new a.Uniform1i(g,i.u_image),u_texsize:new a.Uniform2f(g,i.u_texsize),u_pixel_coord_upper:new a.Uniform2f(g,i.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(g,i.u_pixel_coord_lower),u_scale:new a.Uniform3f(g,i.u_scale),u_fade:new a.Uniform1f(g,i.u_fade),u_opacity:new a.Uniform1f(g,i.u_opacity)}),fill:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix)}),fillPattern:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_image:new a.Uniform1i(g,i.u_image),u_texsize:new a.Uniform2f(g,i.u_texsize),u_pixel_coord_upper:new a.Uniform2f(g,i.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(g,i.u_pixel_coord_lower),u_scale:new a.Uniform3f(g,i.u_scale),u_fade:new a.Uniform1f(g,i.u_fade)}),fillOutline:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_world:new a.Uniform2f(g,i.u_world)}),fillOutlinePattern:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_world:new a.Uniform2f(g,i.u_world),u_image:new a.Uniform1i(g,i.u_image),u_texsize:new a.Uniform2f(g,i.u_texsize),u_pixel_coord_upper:new a.Uniform2f(g,i.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(g,i.u_pixel_coord_lower),u_scale:new a.Uniform3f(g,i.u_scale),u_fade:new a.Uniform1f(g,i.u_fade)}),circle:(g,i)=>({u_camera_to_center_distance:new a.Uniform1f(g,i.u_camera_to_center_distance),u_scale_with_map:new a.Uniform1i(g,i.u_scale_with_map),u_pitch_with_map:new a.Uniform1i(g,i.u_pitch_with_map),u_extrude_scale:new a.Uniform2f(g,i.u_extrude_scale),u_device_pixel_ratio:new a.Uniform1f(g,i.u_device_pixel_ratio),u_matrix:new a.UniformMatrix4f(g,i.u_matrix)}),collisionBox:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_camera_to_center_distance:new a.Uniform1f(g,i.u_camera_to_center_distance),u_pixels_to_tile_units:new a.Uniform1f(g,i.u_pixels_to_tile_units),u_extrude_scale:new a.Uniform2f(g,i.u_extrude_scale),u_overscale_factor:new a.Uniform1f(g,i.u_overscale_factor)}),collisionCircle:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_inv_matrix:new a.UniformMatrix4f(g,i.u_inv_matrix),u_camera_to_center_distance:new a.Uniform1f(g,i.u_camera_to_center_distance),u_viewport_size:new a.Uniform2f(g,i.u_viewport_size)}),debug:(g,i)=>({u_color:new a.UniformColor(g,i.u_color),u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_overlay:new a.Uniform1i(g,i.u_overlay),u_overlay_scale:new a.Uniform1f(g,i.u_overlay_scale)}),clippingMask:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix)}),heatmap:(g,i)=>({u_extrude_scale:new a.Uniform1f(g,i.u_extrude_scale),u_intensity:new a.Uniform1f(g,i.u_intensity),u_matrix:new a.UniformMatrix4f(g,i.u_matrix)}),heatmapTexture:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_world:new a.Uniform2f(g,i.u_world),u_image:new a.Uniform1i(g,i.u_image),u_color_ramp:new a.Uniform1i(g,i.u_color_ramp),u_opacity:new a.Uniform1f(g,i.u_opacity)}),hillshade:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_image:new a.Uniform1i(g,i.u_image),u_latrange:new a.Uniform2f(g,i.u_latrange),u_light:new a.Uniform2f(g,i.u_light),u_shadow:new a.UniformColor(g,i.u_shadow),u_highlight:new a.UniformColor(g,i.u_highlight),u_accent:new a.UniformColor(g,i.u_accent)}),hillshadePrepare:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_image:new a.Uniform1i(g,i.u_image),u_dimension:new a.Uniform2f(g,i.u_dimension),u_zoom:new a.Uniform1f(g,i.u_zoom),u_unpack:new a.Uniform4f(g,i.u_unpack)}),line:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_ratio:new a.Uniform1f(g,i.u_ratio),u_device_pixel_ratio:new a.Uniform1f(g,i.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(g,i.u_units_to_pixels)}),lineGradient:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_ratio:new a.Uniform1f(g,i.u_ratio),u_device_pixel_ratio:new a.Uniform1f(g,i.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(g,i.u_units_to_pixels),u_image:new a.Uniform1i(g,i.u_image),u_image_height:new a.Uniform1f(g,i.u_image_height)}),linePattern:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_texsize:new a.Uniform2f(g,i.u_texsize),u_ratio:new a.Uniform1f(g,i.u_ratio),u_device_pixel_ratio:new a.Uniform1f(g,i.u_device_pixel_ratio),u_image:new a.Uniform1i(g,i.u_image),u_units_to_pixels:new a.Uniform2f(g,i.u_units_to_pixels),u_scale:new a.Uniform3f(g,i.u_scale),u_fade:new a.Uniform1f(g,i.u_fade)}),lineSDF:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_ratio:new a.Uniform1f(g,i.u_ratio),u_device_pixel_ratio:new a.Uniform1f(g,i.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(g,i.u_units_to_pixels),u_patternscale_a:new a.Uniform2f(g,i.u_patternscale_a),u_patternscale_b:new a.Uniform2f(g,i.u_patternscale_b),u_sdfgamma:new a.Uniform1f(g,i.u_sdfgamma),u_image:new a.Uniform1i(g,i.u_image),u_tex_y_a:new a.Uniform1f(g,i.u_tex_y_a),u_tex_y_b:new a.Uniform1f(g,i.u_tex_y_b),u_mix:new a.Uniform1f(g,i.u_mix)}),raster:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_tl_parent:new a.Uniform2f(g,i.u_tl_parent),u_scale_parent:new a.Uniform1f(g,i.u_scale_parent),u_buffer_scale:new a.Uniform1f(g,i.u_buffer_scale),u_fade_t:new a.Uniform1f(g,i.u_fade_t),u_opacity:new a.Uniform1f(g,i.u_opacity),u_image0:new a.Uniform1i(g,i.u_image0),u_image1:new a.Uniform1i(g,i.u_image1),u_brightness_low:new a.Uniform1f(g,i.u_brightness_low),u_brightness_high:new a.Uniform1f(g,i.u_brightness_high),u_saturation_factor:new a.Uniform1f(g,i.u_saturation_factor),u_contrast_factor:new a.Uniform1f(g,i.u_contrast_factor),u_spin_weights:new a.Uniform3f(g,i.u_spin_weights)}),symbolIcon:(g,i)=>({u_is_size_zoom_constant:new a.Uniform1i(g,i.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(g,i.u_is_size_feature_constant),u_size_t:new a.Uniform1f(g,i.u_size_t),u_size:new a.Uniform1f(g,i.u_size),u_camera_to_center_distance:new a.Uniform1f(g,i.u_camera_to_center_distance),u_pitch:new a.Uniform1f(g,i.u_pitch),u_rotate_symbol:new a.Uniform1i(g,i.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(g,i.u_aspect_ratio),u_fade_change:new a.Uniform1f(g,i.u_fade_change),u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(g,i.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(g,i.u_coord_matrix),u_is_text:new a.Uniform1i(g,i.u_is_text),u_pitch_with_map:new a.Uniform1i(g,i.u_pitch_with_map),u_texsize:new a.Uniform2f(g,i.u_texsize),u_texture:new a.Uniform1i(g,i.u_texture)}),symbolSDF:(g,i)=>({u_is_size_zoom_constant:new a.Uniform1i(g,i.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(g,i.u_is_size_feature_constant),u_size_t:new a.Uniform1f(g,i.u_size_t),u_size:new a.Uniform1f(g,i.u_size),u_camera_to_center_distance:new a.Uniform1f(g,i.u_camera_to_center_distance),u_pitch:new a.Uniform1f(g,i.u_pitch),u_rotate_symbol:new a.Uniform1i(g,i.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(g,i.u_aspect_ratio),u_fade_change:new a.Uniform1f(g,i.u_fade_change),u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(g,i.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(g,i.u_coord_matrix),u_is_text:new a.Uniform1i(g,i.u_is_text),u_pitch_with_map:new a.Uniform1i(g,i.u_pitch_with_map),u_texsize:new a.Uniform2f(g,i.u_texsize),u_texture:new a.Uniform1i(g,i.u_texture),u_gamma_scale:new a.Uniform1f(g,i.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(g,i.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(g,i.u_is_halo)}),symbolTextAndIcon:(g,i)=>({u_is_size_zoom_constant:new a.Uniform1i(g,i.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(g,i.u_is_size_feature_constant),u_size_t:new a.Uniform1f(g,i.u_size_t),u_size:new a.Uniform1f(g,i.u_size),u_camera_to_center_distance:new a.Uniform1f(g,i.u_camera_to_center_distance),u_pitch:new a.Uniform1f(g,i.u_pitch),u_rotate_symbol:new a.Uniform1i(g,i.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(g,i.u_aspect_ratio),u_fade_change:new a.Uniform1f(g,i.u_fade_change),u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(g,i.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(g,i.u_coord_matrix),u_is_text:new a.Uniform1i(g,i.u_is_text),u_pitch_with_map:new a.Uniform1i(g,i.u_pitch_with_map),u_texsize:new a.Uniform2f(g,i.u_texsize),u_texsize_icon:new a.Uniform2f(g,i.u_texsize_icon),u_texture:new a.Uniform1i(g,i.u_texture),u_texture_icon:new a.Uniform1i(g,i.u_texture_icon),u_gamma_scale:new a.Uniform1f(g,i.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(g,i.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(g,i.u_is_halo)}),background:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_opacity:new a.Uniform1f(g,i.u_opacity),u_color:new a.UniformColor(g,i.u_color)}),backgroundPattern:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_opacity:new a.Uniform1f(g,i.u_opacity),u_image:new a.Uniform1i(g,i.u_image),u_pattern_tl_a:new a.Uniform2f(g,i.u_pattern_tl_a),u_pattern_br_a:new a.Uniform2f(g,i.u_pattern_br_a),u_pattern_tl_b:new a.Uniform2f(g,i.u_pattern_tl_b),u_pattern_br_b:new a.Uniform2f(g,i.u_pattern_br_b),u_texsize:new a.Uniform2f(g,i.u_texsize),u_mix:new a.Uniform1f(g,i.u_mix),u_pattern_size_a:new a.Uniform2f(g,i.u_pattern_size_a),u_pattern_size_b:new a.Uniform2f(g,i.u_pattern_size_b),u_scale_a:new a.Uniform1f(g,i.u_scale_a),u_scale_b:new a.Uniform1f(g,i.u_scale_b),u_pixel_coord_upper:new a.Uniform2f(g,i.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(g,i.u_pixel_coord_lower),u_tile_units_to_pixels:new a.Uniform1f(g,i.u_tile_units_to_pixels)}),terrain:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_texture:new a.Uniform1i(g,i.u_texture)}),terrainDepth:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix)}),terrainCoords:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_texture:new a.Uniform1i(g,i.u_texture),u_terrain_coords_id:new a.Uniform1f(g,i.u_terrain_coords_id)})};class aA{constructor(i,u,m){this.context=i;const v=i.gl;this.buffer=v.createBuffer(),this.dynamicDraw=Boolean(m),this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),v.bufferData(v.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const u=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const yo={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class gt{constructor(i,u,m,v){this.length=u.length,this.attributes=m,this.itemSize=u.bytesPerElement,this.dynamicDraw=v,this.context=i;const S=i.gl;this.buffer=S.createBuffer(),i.bindVertexBuffer.set(this.buffer),S.bufferData(S.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?S.DYNAMIC_DRAW:S.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){if(i.length!==this.length)throw new Error(`Length of new data is ${i.length}, which doesn't match current length of ${this.length}`);const u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,u){for(let m=0;m<this.attributes.length;m++){const v=u.attributes[this.attributes[m].name];v!==void 0&&i.enableVertexAttribArray(v)}}setVertexAttribPointers(i,u,m){for(let v=0;v<this.attributes.length;v++){const S=this.attributes[v],P=u.attributes[S.name];P!==void 0&&i.vertexAttribPointer(P,S.components,i[yo[S.type]],!1,this.itemSize,S.offset+this.itemSize*(m||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Mn{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Ds extends Mn{getDefault(){return a.Color.transparent}set(i){const u=this.current;(i.r!==u.r||i.g!==u.g||i.b!==u.b||i.a!==u.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class Oi extends Mn{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class ks extends Mn{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class ya extends Mn{getDefault(){return[!0,!0,!0,!0]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||i[3]!==u[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class Ya extends Mn{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class Cs extends Mn{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class Aa extends Mn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const u=this.current;(i.func!==u.func||i.ref!==u.ref||i.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class $a extends Mn{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class va extends Mn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=i,this.dirty=!1}}class WA extends Mn{getDefault(){return[0,1]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class es extends Mn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=i,this.dirty=!1}}class FA extends Mn{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class eo extends Mn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.BLEND):u.disable(u.BLEND),this.current=i,this.dirty=!1}}class to extends Mn{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class ro extends Mn{getDefault(){return a.Color.transparent}set(i){const u=this.current;(i.r!==u.r||i.g!==u.g||i.b!==u.b||i.a!==u.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class ql extends Mn{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class Do extends Mn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=i,this.dirty=!1}}class vs extends Mn{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class oA extends Mn{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class AA extends Mn{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class _c extends Mn{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class _a extends Mn{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||i[3]!==u[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class XA extends Mn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class SA extends Mn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class IA extends Mn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindTexture(u.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class TA extends Mn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class lA extends Mn{getDefault(){return null}set(i){const u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class UA extends Mn{constructor(i){super(i),this.vao=i.extVertexArrayObject}getDefault(){return null}set(i){this.vao&&(i!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(i),this.current=i,this.dirty=!1)}}class vo extends Mn{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class gl extends Mn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class Wl extends Mn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class No extends Mn{constructor(i,u){super(i),this.context=i,this.parent=u}getDefault(){return null}}class wa extends No{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class ZA extends No{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class ba{constructor(i,u,m,v){this.context=i,this.width=u,this.height=m;const S=i.gl,P=this.framebuffer=S.createFramebuffer();if(this.colorAttachment=new wa(i,P),v&&(this.depthAttachment=new ZA(i,P)),S.checkFramebufferStatus(S.FRAMEBUFFER)!==S.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const i=this.context.gl,u=this.colorAttachment.get();if(u&&i.deleteTexture(u),this.depthAttachment){const m=this.depthAttachment.get();m&&i.deleteRenderbuffer(m)}i.deleteFramebuffer(this.framebuffer)}}class xi{constructor(i,u,m){this.blendFunction=i,this.blendColor=u,this.mask=m}}xi.Replace=[1,0],xi.disabled=new xi(xi.Replace,a.Color.transparent,[!1,!1,!1,!1]),xi.unblended=new xi(xi.Replace,a.Color.transparent,[!0,!0,!0,!0]),xi.alphaBlended=new xi([1,771],a.Color.transparent,[!0,!0,!0,!0]);class N{constructor(i){this.gl=i,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Ds(this),this.clearDepth=new Oi(this),this.clearStencil=new ks(this),this.colorMask=new ya(this),this.depthMask=new Ya(this),this.stencilMask=new Cs(this),this.stencilFunc=new Aa(this),this.stencilOp=new $a(this),this.stencilTest=new va(this),this.depthRange=new WA(this),this.depthTest=new es(this),this.depthFunc=new FA(this),this.blend=new eo(this),this.blendFunc=new to(this),this.blendColor=new ro(this),this.blendEquation=new ql(this),this.cullFace=new Do(this),this.cullFaceSide=new vs(this),this.frontFace=new oA(this),this.program=new AA(this),this.activeTexture=new _c(this),this.viewport=new _a(this),this.bindFramebuffer=new XA(this),this.bindRenderbuffer=new SA(this),this.bindTexture=new IA(this),this.bindVertexBuffer=new TA(this),this.bindElementBuffer=new lA(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new UA(this),this.pixelStoreUnpack=new vo(this),this.pixelStoreUnpackPremultiplyAlpha=new gl(this),this.pixelStoreUnpackFlipY=new Wl(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=i.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(i.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=i.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=i.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,u){return new aA(this,i,u)}createVertexBuffer(i,u,m){return new gt(this,i,u,m)}createRenderbuffer(i,u,m){const v=this.gl,S=v.createRenderbuffer();return this.bindRenderbuffer.set(S),v.renderbufferStorage(v.RENDERBUFFER,i,u,m),this.bindRenderbuffer.set(null),S}createFramebuffer(i,u,m){return new ba(this,i,u,m)}clear({color:i,depth:u}){const m=this.gl;let v=0;i&&(v|=m.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),u!==void 0&&(v|=m.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),m.clear(v)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){E(i.blendFunction,xi.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class oe{constructor(i,u,m){this.func=i,this.mask=u,this.range=m}}oe.ReadOnly=!1,oe.ReadWrite=!0,oe.disabled=new oe(519,oe.ReadOnly,[0,1]);const De=7680;class et{constructor(i,u,m,v,S,P){this.test=i,this.ref=u,this.mask=m,this.fail=v,this.depthFail=S,this.pass=P}}et.disabled=new et({func:519,mask:0},0,0,De,De,De);class _t{constructor(i,u,m){this.enable=i,this.mode=u,this.frontFace=m}}let Jt;function _r(g,i,u,m,v,S,P){const z=g.context,q=z.gl,J=g.useProgram("collisionBox"),ie=[];let pe=0,be=0;for(let We=0;We<m.length;We++){const Rt=m[We],Qt=i.getTile(Rt),Xt=Qt.getBucket(u);if(!Xt)continue;let Zt=Rt.posMatrix;v[0]===0&&v[1]===0||(Zt=g.translatePosMatrix(Rt.posMatrix,Qt,v,S));const ur=P?Xt.textCollisionBox:Xt.iconCollisionBox,qt=Xt.collisionCircleArray;if(qt.length>0){const Rr=a.create(),Ur=Zt;a.mul(Rr,Xt.placementInvProjMatrix,g.transform.glCoordMatrix),a.mul(Rr,Rr,Xt.placementViewportMatrix),ie.push({circleArray:qt,circleOffset:be,transform:Ur,invTransform:Rr,coord:Rt}),pe+=qt.length/4,be=pe}ur&&J.draw(z,q.LINES,oe.disabled,et.disabled,g.colorModeForRenderPass(),_t.disabled,bs(Zt,g.transform,Qt),g.style.terrain&&g.style.terrain.getTerrainData(Rt),u.id,ur.layoutVertexBuffer,ur.indexBuffer,ur.segments,null,g.transform.zoom,null,null,ur.collisionVertexBuffer)}if(!P||!ie.length)return;const Ve=g.useProgram("collisionCircle"),Ne=new a.CollisionCircleLayoutArray;Ne.resize(4*pe),Ne._trim();let He=0;for(const We of ie)for(let Rt=0;Rt<We.circleArray.length/4;Rt++){const Qt=4*Rt,Xt=We.circleArray[Qt+0],Zt=We.circleArray[Qt+1],ur=We.circleArray[Qt+2],qt=We.circleArray[Qt+3];Ne.emplace(He++,Xt,Zt,ur,qt,0),Ne.emplace(He++,Xt,Zt,ur,qt,1),Ne.emplace(He++,Xt,Zt,ur,qt,2),Ne.emplace(He++,Xt,Zt,ur,qt,3)}(!Jt||Jt.length<2*pe)&&(Jt=function(We){const Rt=2*We,Qt=new a.QuadTriangleArray;Qt.resize(Rt),Qt._trim();for(let Xt=0;Xt<Rt;Xt++){const Zt=6*Xt;Qt.uint16[Zt+0]=4*Xt+0,Qt.uint16[Zt+1]=4*Xt+1,Qt.uint16[Zt+2]=4*Xt+2,Qt.uint16[Zt+3]=4*Xt+2,Qt.uint16[Zt+4]=4*Xt+3,Qt.uint16[Zt+5]=4*Xt+0}return Qt}(pe));const ct=z.createIndexBuffer(Jt,!0),wt=z.createVertexBuffer(Ne,a.collisionCircleLayout.members,!0);for(const We of ie){const Rt={u_matrix:We.transform,u_inv_matrix:We.invTransform,u_camera_to_center_distance:(St=g.transform).cameraToCenterDistance,u_viewport_size:[St.width,St.height]};Ve.draw(z,q.TRIANGLES,oe.disabled,et.disabled,g.colorModeForRenderPass(),_t.disabled,Rt,g.style.terrain&&g.style.terrain.getTerrainData(We.coord),u.id,wt,ct,a.SegmentVector.simpleSegment(0,2*We.circleOffset,We.circleArray.length,We.circleArray.length/2),null,g.transform.zoom,null,null,null)}var St;wt.destroy(),ct.destroy()}_t.disabled=new _t(!1,1029,2305),_t.backCCW=new _t(!0,1029,2305);const en=a.identity(new Float32Array(16));function En(g,i,u,m,v,S){const{horizontalAlign:P,verticalAlign:z}=a.getAnchorAlignment(g),q=-(P-.5)*i,J=-(z-.5)*u,ie=a.evaluateVariableOffset(g,m);return new a.pointGeometry((q/v+ie[0])*S,(J/v+ie[1])*S)}function Dn(g,i,u,m,v,S,P,z,q,J,ie){const pe=g.text.placedSymbolArray,be=g.text.dynamicLayoutVertexArray,Ve=g.icon.dynamicLayoutVertexArray,Ne={};be.clear();for(let He=0;He<pe.length;He++){const ct=pe.get(He),wt=g.allowVerticalPlacement&&!ct.placedOrientation,St=ct.hidden||!ct.crossTileID||wt?null:m[ct.crossTileID];if(St){const We=new a.pointGeometry(ct.anchorX,ct.anchorY),Rt=jt(We,u?P:S,ie),Qt=er(v.cameraToCenterDistance,Rt.signedDistanceFromCamera);let Xt=a.evaluateSizeForFeature(g.textSizeData,q,ct)*Qt/a.ONE_EM;u&&(Xt*=g.tilePixelRatio/z);const{width:Zt,height:ur,anchor:qt,textOffset:Rr,textBoxScale:Ur}=St,qr=En(qt,Zt,ur,Rr,Ur,Xt),Pn=u?jt(We.add(qr),S,ie).point:Rt.point.add(i?qr.rotate(-v.angle):qr),jn=g.allowVerticalPlacement&&ct.placedOrientation===a.WritingMode.vertical?Math.PI/2:0;for(let b=0;b<ct.numGlyphs;b++)a.addDynamicAttributes(be,Pn,jn);J&&ct.associatedIconIndex>=0&&(Ne[ct.associatedIconIndex]={shiftedAnchor:Pn,angle:jn})}else br(ct.numGlyphs,be)}if(J){Ve.clear();const He=g.icon.placedSymbolArray;for(let ct=0;ct<He.length;ct++){const wt=He.get(ct);if(wt.hidden)br(wt.numGlyphs,Ve);else{const St=Ne[ct];if(St)for(let We=0;We<wt.numGlyphs;We++)a.addDynamicAttributes(Ve,St.shiftedAnchor,St.angle);else br(wt.numGlyphs,Ve)}}g.icon.dynamicLayoutVertexBuffer.updateData(Ve)}g.text.dynamicLayoutVertexBuffer.updateData(be)}function Kn(g,i,u){return u.iconsInText&&i?"symbolTextAndIcon":g?"symbolSDF":"symbolIcon"}function Wn(g,i,u,m,v,S,P,z,q,J,ie,pe){const be=g.context,Ve=be.gl,Ne=g.transform,He=z==="map",ct=q==="map",wt=z!=="viewport"&&u.layout.get("symbol-placement")!=="point",St=He&&!ct&&!wt,We=!u.layout.get("symbol-sort-key").isConstant();let Rt=!1;const Qt=g.depthModeForSublayer(0,oe.ReadOnly),Xt=u.layout.get("text-variable-anchor"),Zt=[];for(const ur of m){const qt=i.getTile(ur),Rr=qt.getBucket(u);if(!Rr)continue;const Ur=v?Rr.text:Rr.icon;if(!Ur||!Ur.segments.get().length)continue;const qr=Ur.programConfigurations.get(u.id),Pn=v||Rr.sdfIcons,jn=v?Rr.textSizeData:Rr.iconSizeData,b=ct||Ne.pitch!==0,L=g.useProgram(Kn(Pn,v,Rr),qr),j=a.evaluateSizeForZoom(jn,Ne.zoom),W=g.style.terrain&&g.style.terrain.getTerrainData(ur);let ae,de,ye,xe,Ie=[0,0],je=null;if(v){if(de=qt.glyphAtlasTexture,ye=Ve.LINEAR,ae=qt.glyphAtlasTexture.size,Rr.iconsInText){Ie=qt.imageAtlasTexture.size,je=qt.imageAtlasTexture;const Dr=jn.kind==="composite"||jn.kind==="camera";xe=b||g.options.rotating||g.options.zooming||Dr?Ve.LINEAR:Ve.NEAREST}}else{const Dr=u.layout.get("icon-size").constantOr(0)!==1||Rr.iconsNeedLinear;de=qt.imageAtlasTexture,ye=Pn||g.options.rotating||g.options.zooming||Dr||b?Ve.LINEAR:Ve.NEAREST,ae=qt.imageAtlasTexture.size}const ft=hn(qt,1,g.transform.zoom),It=bt(ur.posMatrix,ct,He,g.transform,ft),Ft=Ct(ur.posMatrix,ct,He,g.transform,ft),pt=Xt&&Rr.hasTextData(),Ar=u.layout.get("icon-text-fit")!=="none"&&pt&&Rr.hasIconData();if(wt){const Dr=g.style.terrain?(Fn,Nr)=>g.style.terrain.getElevation(ur,Fn,Nr):null,Qr=u.layout.get("text-rotation-alignment")==="map";Fr(Rr,ur.posMatrix,g,v,It,Ft,ct,J,Qr,Dr)}const Vt=g.translatePosMatrix(ur.posMatrix,qt,S,P),Je=wt||v&&Xt||Ar?en:It,At=g.translatePosMatrix(Ft,qt,S,P,!0),Yt=Pn&&u.paint.get(v?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let ir;ir=Pn?Rr.iconsInText?qA(jn.kind,j,St,ct,g,Vt,Je,At,ae,Ie):Cn(jn.kind,j,St,ct,g,Vt,Je,At,v,ae,!0):sA(jn.kind,j,St,ct,g,Vt,Je,At,v,ae);const Wt={program:L,buffers:Ur,uniformValues:ir,atlasTexture:de,atlasTextureIcon:je,atlasInterpolation:ye,atlasInterpolationIcon:xe,isSDF:Pn,hasHalo:Yt};if(We&&Rr.canOverlap){Rt=!0;const Dr=Ur.segments.get();for(const Qr of Dr)Zt.push({segments:new a.SegmentVector([Qr]),sortKey:Qr.sortKey,state:Wt,terrainData:W})}else Zt.push({segments:Ur.segments,sortKey:0,state:Wt,terrainData:W})}Rt&&Zt.sort((ur,qt)=>ur.sortKey-qt.sortKey);for(const ur of Zt){const qt=ur.state;if(be.activeTexture.set(Ve.TEXTURE0),qt.atlasTexture.bind(qt.atlasInterpolation,Ve.CLAMP_TO_EDGE),qt.atlasTextureIcon&&(be.activeTexture.set(Ve.TEXTURE1),qt.atlasTextureIcon&&qt.atlasTextureIcon.bind(qt.atlasInterpolationIcon,Ve.CLAMP_TO_EDGE)),qt.isSDF){const Rr=qt.uniformValues;qt.hasHalo&&(Rr.u_is_halo=1,pi(qt.buffers,ur.segments,u,g,qt.program,Qt,ie,pe,Rr,ur.terrainData)),Rr.u_is_halo=0}pi(qt.buffers,ur.segments,u,g,qt.program,Qt,ie,pe,qt.uniformValues,ur.terrainData)}}function pi(g,i,u,m,v,S,P,z,q,J){const ie=m.context;v.draw(ie,ie.gl.TRIANGLES,S,P,z,_t.disabled,q,J,u.id,g.layoutVertexBuffer,g.indexBuffer,i,u.paint,m.transform.zoom,g.programConfigurations.get(u.id),g.dynamicLayoutVertexBuffer,g.opacityVertexBuffer)}function mi(g,i,u,m,v,S,P){const z=g.context.gl,q=u.paint.get("fill-pattern"),J=q&&q.constantOr(1),ie=u.getCrossfadeParameters();let pe,be,Ve,Ne,He;P?(be=J&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",pe=z.LINES):(be=J?"fillPattern":"fill",pe=z.TRIANGLES);for(const ct of m){const wt=i.getTile(ct);if(J&&!wt.patternsLoaded())continue;const St=wt.getBucket(u);if(!St)continue;const We=St.programConfigurations.get(u.id),Rt=g.useProgram(be,We),Qt=g.style.terrain&&g.style.terrain.getTerrainData(ct);J&&(g.context.activeTexture.set(z.TEXTURE0),wt.imageAtlasTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE),We.updatePaintBuffers(ie));const Xt=q.constantOr(null);if(Xt&&wt.imageAtlas){const qt=wt.imageAtlas,Rr=qt.patternPositions[Xt.to.toString()],Ur=qt.patternPositions[Xt.from.toString()];Rr&&Ur&&We.setConstantPatternPositions(Rr,Ur)}const Zt=Qt?ct:null,ur=g.translatePosMatrix(Zt?Zt.posMatrix:ct.posMatrix,wt,u.paint.get("fill-translate"),u.paint.get("fill-translate-anchor"));if(P){Ne=St.indexBuffer2,He=St.segments2;const qt=[z.drawingBufferWidth,z.drawingBufferHeight];Ve=be==="fillOutlinePattern"&&J?EA(ur,g,ie,wt,qt):nA(ur,qt)}else Ne=St.indexBuffer,He=St.segments,Ve=J?mo(ur,g,ie,wt):Xi(ur);Rt.draw(g.context,pe,v,g.stencilModeForClipping(ct),S,_t.disabled,Ve,Qt,u.id,St.layoutVertexBuffer,Ne,He,u.paint,g.transform.zoom,We)}}function Tn(g,i,u,m,v,S,P){const z=g.context,q=z.gl,J=u.paint.get("fill-extrusion-pattern"),ie=J.constantOr(1),pe=u.getCrossfadeParameters(),be=u.paint.get("fill-extrusion-opacity");for(const Ve of m){const Ne=i.getTile(Ve),He=Ne.getBucket(u);if(!He)continue;const ct=g.style.terrain&&g.style.terrain.getTerrainData(Ve),wt=He.programConfigurations.get(u.id),St=g.useProgram(ie?"fillExtrusionPattern":"fillExtrusion",wt);ie&&(g.context.activeTexture.set(q.TEXTURE0),Ne.imageAtlasTexture.bind(q.LINEAR,q.CLAMP_TO_EDGE),wt.updatePaintBuffers(pe));const We=J.constantOr(null);if(We&&Ne.imageAtlas){const Zt=Ne.imageAtlas,ur=Zt.patternPositions[We.to.toString()],qt=Zt.patternPositions[We.from.toString()];ur&&qt&&wt.setConstantPatternPositions(ur,qt)}const Rt=g.translatePosMatrix(Ve.posMatrix,Ne,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),Qt=u.paint.get("fill-extrusion-vertical-gradient"),Xt=ie?Ri(Rt,g,Qt,be,Ve,pe,Ne):gs(Rt,g,Qt,be);St.draw(z,z.gl.TRIANGLES,v,S,P,_t.backCCW,Xt,ct,u.id,He.layoutVertexBuffer,He.indexBuffer,He.segments,u.paint,g.transform.zoom,wt,g.style.terrain&&He.centroidVertexBuffer)}}function Es(g,i,u,m,v,S,P){const z=g.context,q=z.gl,J=u.fbo;if(!J)return;const ie=g.useProgram("hillshade"),pe=g.style.terrain&&g.style.terrain.getTerrainData(i);z.activeTexture.set(q.TEXTURE0),q.bindTexture(q.TEXTURE_2D,J.colorAttachment.get()),ie.draw(z,q.TRIANGLES,v,S,P,_t.disabled,((be,Ve,Ne,He)=>{const ct=Ne.paint.get("hillshade-shadow-color"),wt=Ne.paint.get("hillshade-highlight-color"),St=Ne.paint.get("hillshade-accent-color");let We=Ne.paint.get("hillshade-illumination-direction")*(Math.PI/180);Ne.paint.get("hillshade-illumination-anchor")==="viewport"&&(We-=be.transform.angle);const Rt=!be.options.moving;return{u_matrix:He?He.posMatrix:be.transform.calculatePosMatrix(Ve.tileID.toUnwrapped(),Rt),u_image:0,u_latrange:Po(0,Ve.tileID),u_light:[Ne.paint.get("hillshade-exaggeration"),We],u_shadow:ct,u_highlight:wt,u_accent:St}})(g,u,m,pe?i:null),pe,m.id,g.rasterBoundsBuffer,g.quadTriangleIndexBuffer,g.rasterBoundsSegments)}function ts(g,i,u,m,v,S){const P=g.context,z=P.gl,q=i.dem;if(q&&q.data){const J=q.dim,ie=q.stride,pe=q.getPixels();if(P.activeTexture.set(z.TEXTURE1),P.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||g.getTileTexture(ie),i.demTexture){const Ve=i.demTexture;Ve.update(pe,{premultiply:!1}),Ve.bind(z.NEAREST,z.CLAMP_TO_EDGE)}else i.demTexture=new Q(P,pe,z.RGBA,{premultiply:!1}),i.demTexture.bind(z.NEAREST,z.CLAMP_TO_EDGE);P.activeTexture.set(z.TEXTURE0);let be=i.fbo;if(!be){const Ve=new Q(P,{width:J,height:J,data:null},z.RGBA);Ve.bind(z.LINEAR,z.CLAMP_TO_EDGE),be=i.fbo=P.createFramebuffer(J,J,!0),be.colorAttachment.set(Ve.texture)}P.bindFramebuffer.set(be.framebuffer),P.viewport.set([0,0,J,J]),g.useProgram("hillshadePrepare").draw(P,z.TRIANGLES,m,v,S,_t.disabled,((Ve,Ne)=>{const He=Ne.stride,ct=a.create();return a.ortho(ct,0,a.EXTENT,-a.EXTENT,0,0,1),a.translate(ct,ct,[0,-a.EXTENT,0]),{u_matrix:ct,u_image:1,u_dimension:[He,He],u_zoom:Ve.overscaledZ,u_unpack:Ne.getUnpackVector()}})(i.tileID,q),null,u.id,g.rasterBoundsBuffer,g.quadTriangleIndexBuffer,g.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function Ws(g,i,u,m,v,S){const P=m.paint.get("raster-fade-duration");if(!S&&P>0){const z=a.exported.now(),q=(z-g.timeAdded)/P,J=i?(z-i.timeAdded)/P:-1,ie=u.getSource(),pe=v.coveringZoomLevel({tileSize:ie.tileSize,roundZoom:ie.roundZoom}),be=!i||Math.abs(i.tileID.overscaledZ-pe)>Math.abs(g.tileID.overscaledZ-pe),Ve=be&&g.refreshedUponExpiration?1:a.clamp(be?q:1-J,0,1);return g.refreshedUponExpiration&&q>=1&&(g.refreshedUponExpiration=!1),i?{opacity:1,mix:1-Ve}:{opacity:Ve,mix:0}}return{opacity:1,mix:0}}const rs=new a.Color(1,0,0,1),Si=new a.Color(0,1,0,1),yl=new a.Color(0,0,1,1),la=new a.Color(1,0,1,1),Pi=new a.Color(0,1,1,1);function xa(g,i,u,m){Ma(g,0,i+u/2,g.transform.width,u,m)}function Mi(g,i,u,m){Ma(g,i-u/2,0,u,g.transform.height,m)}function Ma(g,i,u,m,v,S){const P=g.context,z=P.gl;z.enable(z.SCISSOR_TEST),z.scissor(i*g.pixelRatio,u*g.pixelRatio,m*g.pixelRatio,v*g.pixelRatio),P.clear({color:S}),z.disable(z.SCISSOR_TEST)}function Ba(g,i,u){const m=g.context,v=m.gl,S=u.posMatrix,P=g.useProgram("debug"),z=oe.disabled,q=et.disabled,J=g.colorModeForRenderPass(),ie="$debug",pe=g.style.terrain&&g.style.terrain.getTerrainData(u);m.activeTexture.set(v.TEXTURE0),g.emptyTexture.bind(v.LINEAR,v.CLAMP_TO_EDGE);const be=i.getTileByID(u.key).latestRawTileData,Ve=Math.floor((be&&be.byteLength||0)/1024),Ne=i.getTile(u).tileSize,He=512/Math.min(Ne,512)*(u.overscaledZ/g.transform.zoom)*.5;let ct=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(ct+=` => ${u.overscaledZ}`),function(wt,St){wt.initDebugOverlayCanvas();const We=wt.debugOverlayCanvas,Rt=wt.context.gl,Qt=wt.debugOverlayCanvas.getContext("2d");Qt.clearRect(0,0,We.width,We.height),Qt.shadowColor="white",Qt.shadowBlur=2,Qt.lineWidth=1.5,Qt.strokeStyle="white",Qt.textBaseline="top",Qt.font="bold 36px Open Sans, sans-serif",Qt.fillText(St,5,5),Qt.strokeText(St,5,5),wt.debugOverlayTexture.update(We),wt.debugOverlayTexture.bind(Rt.LINEAR,Rt.CLAMP_TO_EDGE)}(g,`${ct} ${Ve}kB`),P.draw(m,v.TRIANGLES,z,q,xi.alphaBlended,_t.disabled,xs(S,a.Color.transparent,He),null,ie,g.debugBuffer,g.quadTriangleIndexBuffer,g.debugSegments),P.draw(m,v.LINE_STRIP,z,q,J,_t.disabled,xs(S,a.Color.red),pe,ie,g.debugBuffer,g.tileBorderIndexBuffer,g.debugSegments)}function ns(g,i,u){const m=g.context,v=m.gl,S=g.colorModeForRenderPass(),P=new oe(v.LEQUAL,oe.ReadWrite,g.depthRangeFor3D),z=g.useProgram("terrain"),q=i.getTerrainMesh(),J=i.getTerrainData(u.tileID);m.bindFramebuffer.set(null),m.viewport.set([0,0,g.width,g.height]),m.activeTexture.set(v.TEXTURE0),v.bindTexture(v.TEXTURE_2D,i.getRTTFramebuffer().colorAttachment.get());const ie=g.transform.calculatePosMatrix(u.tileID.toUnwrapped());z.draw(m,v.TRIANGLES,P,et.disabled,S,_t.backCCW,{u_matrix:ie,u_texture:0},J,"terrain",q.vertexBuffer,q.indexBuffer,q.segments)}function hi(g,i,u,m){const v=g.context,S=u.tileSize*i.qualityFactor;u.textures[m]||(u.textures[m]=g.getTileTexture(S)||new Q(v,{width:S,height:S,data:null},v.gl.RGBA),u.textures[m].bind(v.gl.LINEAR,v.gl.CLAMP_TO_EDGE),m===0&&i.sourceCache.renderHistory.unshift(u.tileID.key));const P=i.getRTTFramebuffer();P.colorAttachment.set(u.textures[m].texture),v.bindFramebuffer.set(P.framebuffer),v.viewport.set([0,0,S,S])}class cA{constructor(i){this._coordsDescendingInv={},this._coordsDescendingInvStr={},this.painter=i,this._renderToTexture={background:!0,fill:!0,line:!0,raster:!0},this._coordsDescendingInv={},this._coordsDescendingInvStr={},this._stacks=[],this._prevType=null,this._rerender={},this._renderableTiles=i.style.terrain.sourceCache.getRenderableTiles(),this._init()}_init(){const i=this.painter.style,u=i.terrain;for(const m in i.sourceCaches){this._coordsDescendingInv[m]={};const v=i.sourceCaches[m].getVisibleCoordinates();for(const S of v){const P=u.sourceCache.getTerrainCoords(S);for(const z in P)this._coordsDescendingInv[m][z]||(this._coordsDescendingInv[m][z]=[]),this._coordsDescendingInv[m][z].push(P[z])}}for(const m of i._order){const v=i._layers[m],S=v.source;if(this._renderToTexture[v.type]&&!this._coordsDescendingInvStr[S]){this._coordsDescendingInvStr[S]={};for(const P in this._coordsDescendingInv[S])this._coordsDescendingInvStr[S][P]=this._coordsDescendingInv[S][P].map(z=>z.key).sort().join()}}return this._renderableTiles.forEach(m=>{for(const v in this._coordsDescendingInvStr){const S=this._coordsDescendingInvStr[v][m.tileID.key];S&&S!==m.textureCoords[v]&&m.clearTextures(this.painter),u.needsRerender(v,m.tileID)&&m.clearTextures(this.painter)}this._rerender[m.tileID.key]=!m.textures.length}),u.clearRerenderCache(),u.sourceCache.removeOutdated(this.painter),this}renderLayer(i){const u=i.type,m=this.painter,v=m.style._order,S=m.currentLayer,P=S+1===v.length;if(this._renderToTexture[u]&&(this._prevType&&this._renderToTexture[this._prevType]||this._stacks.push([]),this._prevType=u,this._stacks[this._stacks.length-1].push(v[S]),!P))return!0;if(this._renderToTexture[this._prevType]||u==="hillshade"||this._renderToTexture[u]&&P){this._prevType=u;const z=this._stacks.length-1,q=this._stacks[z]||[];for(const J of this._renderableTiles){if(hi(m,m.style.terrain,J,z),this._rerender[J.tileID.key]){m.context.clear({color:a.Color.transparent});for(let ie=0;ie<q.length;ie++){const pe=m.style._layers[q[ie]],be=pe.source?this._coordsDescendingInv[pe.source][J.tileID.key]:[J.tileID];m._renderTileClippingMasks(pe,be),m.renderLayer(m,m.style.sourceCaches[pe.source],pe,be),pe.source&&(J.textureCoords[pe.source]=this._coordsDescendingInvStr[pe.source][J.tileID.key])}}ns(m,m.style.terrain,J)}if(u==="hillshade"){this._stacks.push([v[S]]);for(const J of this._renderableTiles){const ie=this._coordsDescendingInv[i.source][J.tileID.key];hi(m,m.style.terrain,J,this._stacks.length-1),m.context.clear({color:a.Color.transparent}),m._renderTileClippingMasks(i,ie),m.renderLayer(m,m.style.sourceCaches[i.source],i,ie),ns(m,m.style.terrain,J)}return!0}return this._renderToTexture[u]}return!1}}const no={symbol:function(g,i,u,m,v){if(g.renderPass!=="translucent")return;const S=et.disabled,P=g.colorModeForRenderPass();u.layout.get("text-variable-anchor")&&function(z,q,J,ie,pe,be,Ve){const Ne=q.transform,He=pe==="map",ct=be==="map";for(const wt of z){const St=ie.getTile(wt),We=St.getBucket(J);if(!We||!We.text||!We.text.segments.get().length)continue;const Rt=a.evaluateSizeForZoom(We.textSizeData,Ne.zoom),Qt=hn(St,1,q.transform.zoom),Xt=bt(wt.posMatrix,ct,He,q.transform,Qt),Zt=J.layout.get("icon-text-fit")!=="none"&&We.hasIconData();if(Rt){const ur=Math.pow(2,Ne.zoom-St.tileID.overscaledZ);Dn(We,He,ct,Ve,Ne,Xt,wt.posMatrix,ur,Rt,Zt,q.style.terrain?(qt,Rr)=>q.style.terrain.getElevation(wt,qt,Rr):null)}}}(m,g,u,i,u.layout.get("text-rotation-alignment"),u.layout.get("text-pitch-alignment"),v),u.paint.get("icon-opacity").constantOr(1)!==0&&Wn(g,i,u,m,!1,u.paint.get("icon-translate"),u.paint.get("icon-translate-anchor"),u.layout.get("icon-rotation-alignment"),u.layout.get("icon-pitch-alignment"),u.layout.get("icon-keep-upright"),S,P),u.paint.get("text-opacity").constantOr(1)!==0&&Wn(g,i,u,m,!0,u.paint.get("text-translate"),u.paint.get("text-translate-anchor"),u.layout.get("text-rotation-alignment"),u.layout.get("text-pitch-alignment"),u.layout.get("text-keep-upright"),S,P),i.map.showCollisionBoxes&&(_r(g,i,u,m,u.paint.get("text-translate"),u.paint.get("text-translate-anchor"),!0),_r(g,i,u,m,u.paint.get("icon-translate"),u.paint.get("icon-translate-anchor"),!1))},circle:function(g,i,u,m){if(g.renderPass!=="translucent")return;const v=u.paint.get("circle-opacity"),S=u.paint.get("circle-stroke-width"),P=u.paint.get("circle-stroke-opacity"),z=!u.layout.get("circle-sort-key").isConstant();if(v.constantOr(1)===0&&(S.constantOr(1)===0||P.constantOr(1)===0))return;const q=g.context,J=q.gl,ie=g.depthModeForSublayer(0,oe.ReadOnly),pe=et.disabled,be=g.colorModeForRenderPass(),Ve=[];for(let Ne=0;Ne<m.length;Ne++){const He=m[Ne],ct=i.getTile(He),wt=ct.getBucket(u);if(!wt)continue;const St=wt.programConfigurations.get(u.id),We=g.useProgram("circle",St),Rt=wt.layoutVertexBuffer,Qt=wt.indexBuffer,Xt=g.style.terrain&&g.style.terrain.getTerrainData(He),Zt={programConfiguration:St,program:We,layoutVertexBuffer:Rt,indexBuffer:Qt,uniformValues:sa(g,He,ct,u),terrainData:Xt};if(z){const ur=wt.segments.get();for(const qt of ur)Ve.push({segments:new a.SegmentVector([qt]),sortKey:qt.sortKey,state:Zt})}else Ve.push({segments:wt.segments,sortKey:0,state:Zt})}z&&Ve.sort((Ne,He)=>Ne.sortKey-He.sortKey);for(const Ne of Ve){const{programConfiguration:He,program:ct,layoutVertexBuffer:wt,indexBuffer:St,uniformValues:We,terrainData:Rt}=Ne.state;ct.draw(q,J.TRIANGLES,ie,pe,be,_t.disabled,We,Rt,u.id,wt,St,Ne.segments,u.paint,g.transform.zoom,He)}},heatmap:function(g,i,u,m){if(u.paint.get("heatmap-opacity")!==0)if(g.renderPass==="offscreen"){const v=g.context,S=v.gl,P=et.disabled,z=new xi([S.ONE,S.ONE],a.Color.transparent,[!0,!0,!0,!0]);(function(q,J,ie){const pe=q.gl;q.activeTexture.set(pe.TEXTURE1),q.viewport.set([0,0,J.width/4,J.height/4]);let be=ie.heatmapFbo;if(be)pe.bindTexture(pe.TEXTURE_2D,be.colorAttachment.get()),q.bindFramebuffer.set(be.framebuffer);else{const Ve=pe.createTexture();pe.bindTexture(pe.TEXTURE_2D,Ve),pe.texParameteri(pe.TEXTURE_2D,pe.TEXTURE_WRAP_S,pe.CLAMP_TO_EDGE),pe.texParameteri(pe.TEXTURE_2D,pe.TEXTURE_WRAP_T,pe.CLAMP_TO_EDGE),pe.texParameteri(pe.TEXTURE_2D,pe.TEXTURE_MIN_FILTER,pe.LINEAR),pe.texParameteri(pe.TEXTURE_2D,pe.TEXTURE_MAG_FILTER,pe.LINEAR),be=ie.heatmapFbo=q.createFramebuffer(J.width/4,J.height/4,!1),function(Ne,He,ct,wt){const St=Ne.gl;St.texImage2D(St.TEXTURE_2D,0,St.RGBA,He.width/4,He.height/4,0,St.RGBA,Ne.extRenderToTextureHalfFloat?Ne.extTextureHalfFloat.HALF_FLOAT_OES:St.UNSIGNED_BYTE,null),wt.colorAttachment.set(ct)}(q,J,Ve,be)}})(v,g,u),v.clear({color:a.Color.transparent});for(let q=0;q<m.length;q++){const J=m[q];if(i.hasRenderableParent(J))continue;const ie=i.getTile(J),pe=ie.getBucket(u);if(!pe)continue;const be=pe.programConfigurations.get(u.id),Ve=g.useProgram("heatmap",be),{zoom:Ne}=g.transform;Ve.draw(v,S.TRIANGLES,oe.disabled,P,z,_t.disabled,aa(J.posMatrix,ie,Ne,u.paint.get("heatmap-intensity")),null,u.id,pe.layoutVertexBuffer,pe.indexBuffer,pe.segments,u.paint,g.transform.zoom,be)}v.viewport.set([0,0,g.width,g.height])}else g.renderPass==="translucent"&&(g.context.setColorMode(g.colorModeForRenderPass()),function(v,S){const P=v.context,z=P.gl,q=S.heatmapFbo;if(!q)return;P.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,q.colorAttachment.get()),P.activeTexture.set(z.TEXTURE1);let J=S.colorRampTexture;J||(J=S.colorRampTexture=new Q(P,S.colorRamp,z.RGBA)),J.bind(z.LINEAR,z.CLAMP_TO_EDGE),v.useProgram("heatmapTexture").draw(P,z.TRIANGLES,oe.disabled,et.disabled,v.colorModeForRenderPass(),_t.disabled,((ie,pe,be,Ve)=>{const Ne=a.create();a.ortho(Ne,0,ie.width,ie.height,0,0,1);const He=ie.context.gl;return{u_matrix:Ne,u_world:[He.drawingBufferWidth,He.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:pe.paint.get("heatmap-opacity")}})(v,S),null,S.id,v.viewportBuffer,v.quadTriangleIndexBuffer,v.viewportSegments,S.paint,v.transform.zoom)}(g,u))},line:function(g,i,u,m){if(g.renderPass!=="translucent")return;const v=u.paint.get("line-opacity"),S=u.paint.get("line-width");if(v.constantOr(1)===0||S.constantOr(1)===0)return;const P=g.depthModeForSublayer(0,oe.ReadOnly),z=g.colorModeForRenderPass(),q=u.paint.get("line-dasharray"),J=u.paint.get("line-pattern"),ie=J.constantOr(1),pe=u.paint.get("line-gradient"),be=u.getCrossfadeParameters(),Ve=ie?"linePattern":q?"lineSDF":pe?"lineGradient":"line",Ne=g.context,He=Ne.gl;let ct=!0;for(const wt of m){const St=i.getTile(wt);if(ie&&!St.patternsLoaded())continue;const We=St.getBucket(u);if(!We)continue;const Rt=We.programConfigurations.get(u.id),Qt=g.context.program.get(),Xt=g.useProgram(Ve,Rt),Zt=ct||Xt.program!==Qt,ur=g.style.terrain&&g.style.terrain.getTerrainData(wt),qt=J.constantOr(null);if(qt&&St.imageAtlas){const qr=St.imageAtlas,Pn=qr.patternPositions[qt.to.toString()],jn=qr.patternPositions[qt.from.toString()];Pn&&jn&&Rt.setConstantPatternPositions(Pn,jn)}const Rr=ur?wt:null,Ur=ie?oa(g,St,u,be,Rr):q?qs(g,St,u,q,be,Rr):pe?Mo(g,St,u,We.lineClipsArray.length,Rr):ka(g,St,u,Rr);if(ie)Ne.activeTexture.set(He.TEXTURE0),St.imageAtlasTexture.bind(He.LINEAR,He.CLAMP_TO_EDGE),Rt.updatePaintBuffers(be);else if(q&&(Zt||g.lineAtlas.dirty))Ne.activeTexture.set(He.TEXTURE0),g.lineAtlas.bind(Ne);else if(pe){const qr=We.gradients[u.id];let Pn=qr.texture;if(u.gradientVersion!==qr.version){let jn=256;if(u.stepInterpolant){const b=i.getSource().maxzoom,L=wt.canonical.z===b?Math.ceil(1<<g.transform.maxZoom-wt.canonical.z):1;jn=a.clamp(a.nextPowerOfTwo(We.maxLineLength/a.EXTENT*1024*L),256,Ne.maxTextureSize)}qr.gradient=a.renderColorRamp({expression:u.gradientExpression(),evaluationKey:"lineProgress",resolution:jn,image:qr.gradient||void 0,clips:We.lineClipsArray}),qr.texture?qr.texture.update(qr.gradient):qr.texture=new Q(Ne,qr.gradient,He.RGBA),qr.version=u.gradientVersion,Pn=qr.texture}Ne.activeTexture.set(He.TEXTURE0),Pn.bind(u.stepInterpolant?He.NEAREST:He.LINEAR,He.CLAMP_TO_EDGE)}Xt.draw(Ne,He.TRIANGLES,P,g.stencilModeForClipping(wt),z,_t.disabled,Ur,ur,u.id,We.layoutVertexBuffer,We.indexBuffer,We.segments,u.paint,g.transform.zoom,Rt,We.layoutVertexBuffer2),ct=!1}},fill:function(g,i,u,m){const v=u.paint.get("fill-color"),S=u.paint.get("fill-opacity");if(S.constantOr(1)===0)return;const P=g.colorModeForRenderPass(),z=u.paint.get("fill-pattern"),q=g.opaquePassEnabledForLayer()&&!z.constantOr(1)&&v.constantOr(a.Color.transparent).a===1&&S.constantOr(0)===1?"opaque":"translucent";if(g.renderPass===q){const J=g.depthModeForSublayer(1,g.renderPass==="opaque"?oe.ReadWrite:oe.ReadOnly);mi(g,i,u,m,J,P,!1)}if(g.renderPass==="translucent"&&u.paint.get("fill-antialias")){const J=g.depthModeForSublayer(u.getPaintProperty("fill-outline-color")?2:0,oe.ReadOnly);mi(g,i,u,m,J,P,!0)}},"fill-extrusion":function(g,i,u,m){const v=u.paint.get("fill-extrusion-opacity");if(v!==0&&g.renderPass==="translucent"){const S=new oe(g.context.gl.LEQUAL,oe.ReadWrite,g.depthRangeFor3D);if(v!==1||u.paint.get("fill-extrusion-pattern").constantOr(1))Tn(g,i,u,m,S,et.disabled,xi.disabled),Tn(g,i,u,m,S,g.stencilModeFor3D(),g.colorModeForRenderPass());else{const P=g.colorModeForRenderPass();Tn(g,i,u,m,S,et.disabled,P)}}},hillshade:function(g,i,u,m){if(g.renderPass!=="offscreen"&&g.renderPass!=="translucent")return;const v=g.context,S=g.depthModeForSublayer(0,oe.ReadOnly),P=g.colorModeForRenderPass(),[z,q]=g.renderPass==="translucent"?g.stencilConfigForOverlap(m):[{},m];for(const J of q){const ie=i.getTile(J);ie.needsHillshadePrepare!==void 0&&ie.needsHillshadePrepare&&g.renderPass==="offscreen"?ts(g,ie,u,S,et.disabled,P):g.renderPass==="translucent"&&Es(g,J,ie,u,S,z[J.overscaledZ],P)}v.viewport.set([0,0,g.width,g.height])},raster:function(g,i,u,m){if(g.renderPass!=="translucent"||u.paint.get("raster-opacity")===0||!m.length)return;const v=g.context,S=v.gl,P=i.getSource(),z=g.useProgram("raster"),q=g.colorModeForRenderPass(),[J,ie]=P instanceof tt?[{},m]:g.stencilConfigForOverlap(m),pe=ie[ie.length-1].overscaledZ,be=!g.options.moving;for(const Ve of ie){const Ne=g.depthModeForSublayer(Ve.overscaledZ-pe,u.paint.get("raster-opacity")===1?oe.ReadWrite:oe.ReadOnly,S.LESS),He=i.getTile(Ve);He.registerFadeDuration(u.paint.get("raster-fade-duration"));const ct=i.findLoadedParent(Ve,0),wt=Ws(He,ct,i,u,g.transform,g.style.terrain);let St,We;const Rt=u.paint.get("raster-resampling")==="nearest"?S.NEAREST:S.LINEAR;v.activeTexture.set(S.TEXTURE0),He.texture.bind(Rt,S.CLAMP_TO_EDGE,S.LINEAR_MIPMAP_NEAREST),v.activeTexture.set(S.TEXTURE1),ct?(ct.texture.bind(Rt,S.CLAMP_TO_EDGE,S.LINEAR_MIPMAP_NEAREST),St=Math.pow(2,ct.tileID.overscaledZ-He.tileID.overscaledZ),We=[He.tileID.canonical.x*St%1,He.tileID.canonical.y*St%1]):He.texture.bind(Rt,S.CLAMP_TO_EDGE,S.LINEAR_MIPMAP_NEAREST);const Qt=g.style.terrain&&g.style.terrain.getTerrainData(Ve),Xt=Qt?Ve:null,Zt=Xt?Xt.posMatrix:g.transform.calculatePosMatrix(Ve.toUnwrapped(),be),ur=ys(Zt,We||[0,0],St||1,wt,u);P instanceof tt?z.draw(v,S.TRIANGLES,Ne,et.disabled,q,_t.disabled,ur,Qt,u.id,P.boundsBuffer,g.quadTriangleIndexBuffer,P.boundsSegments):z.draw(v,S.TRIANGLES,Ne,J[Ve.overscaledZ],q,_t.disabled,ur,Qt,u.id,g.rasterBoundsBuffer,g.quadTriangleIndexBuffer,g.rasterBoundsSegments)}},background:function(g,i,u,m){const v=u.paint.get("background-color"),S=u.paint.get("background-opacity");if(S===0)return;const P=g.context,z=P.gl,q=g.transform,J=q.tileSize,ie=u.paint.get("background-pattern");if(g.isPatternMissing(ie))return;const pe=!ie&&v.a===1&&S===1&&g.opaquePassEnabledForLayer()?"opaque":"translucent";if(g.renderPass!==pe)return;const be=et.disabled,Ve=g.depthModeForSublayer(0,pe==="opaque"?oe.ReadWrite:oe.ReadOnly),Ne=g.colorModeForRenderPass(),He=g.useProgram(ie?"backgroundPattern":"background"),ct=m||q.coveringTiles({tileSize:J,terrain:g.style.terrain});ie&&(P.activeTexture.set(z.TEXTURE0),g.imageManager.bind(g.context));const wt=u.getCrossfadeParameters();for(const St of ct){const We=m?St.posMatrix:g.transform.calculatePosMatrix(St.toUnwrapped()),Rt=ie?Pa(We,S,g,ie,{tileID:St,tileSize:J},wt):ml(We,S,v),Qt=g.style.terrain&&g.style.terrain.getTerrainData(St);He.draw(P,z.TRIANGLES,Ve,be,Ne,_t.disabled,Rt,Qt,u.id,g.tileExtentBuffer,g.quadTriangleIndexBuffer,g.tileExtentSegments)}},debug:function(g,i,u){for(let m=0;m<u.length;m++)Ba(g,i,u[m])},custom:function(g,i,u){const m=g.context,v=u.implementation;if(g.renderPass==="offscreen"){const S=v.prerender;S&&(g.setCustomLayerDefaults(),m.setColorMode(g.colorModeForRenderPass()),S.call(v,m.gl,g.transform.customLayerMatrix()),m.setDirty(),g.setBaseState())}else if(g.renderPass==="translucent"){g.setCustomLayerDefaults(),m.setColorMode(g.colorModeForRenderPass()),m.setStencilMode(et.disabled);const S=v.renderingMode==="3d"?new oe(g.context.gl.LEQUAL,oe.ReadWrite,g.depthRangeFor3D):g.depthModeForSublayer(0,oe.ReadOnly);m.setDepthMode(S),v.render(m.gl,g.transform.customLayerMatrix()),m.setDirty(),g.setBaseState(),m.bindFramebuffer.set(null)}}};class uA{constructor(i,u){this.context=new N(i),this.transform=u,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.create(),renderTime:0},this.setup(),this.numSublayers=Ge.maxUnderzooming+Ge.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new dn,this.gpuTimers={}}resize(i,u,m){if(this.width=i*m,this.height=u*m,this.pixelRatio=m,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const v of this.style._order)this.style._layers[v].resize()}setup(){const i=this.context,u=new a.PosArray;u.emplaceBack(0,0),u.emplaceBack(a.EXTENT,0),u.emplaceBack(0,a.EXTENT),u.emplaceBack(a.EXTENT,a.EXTENT),this.tileExtentBuffer=i.createVertexBuffer(u,In.members),this.tileExtentSegments=a.SegmentVector.simpleSegment(0,0,4,2);const m=new a.PosArray;m.emplaceBack(0,0),m.emplaceBack(a.EXTENT,0),m.emplaceBack(0,a.EXTENT),m.emplaceBack(a.EXTENT,a.EXTENT),this.debugBuffer=i.createVertexBuffer(m,In.members),this.debugSegments=a.SegmentVector.simpleSegment(0,0,4,5);const v=new a.RasterBoundsArray;v.emplaceBack(0,0,0,0),v.emplaceBack(a.EXTENT,0,a.EXTENT,0),v.emplaceBack(0,a.EXTENT,0,a.EXTENT),v.emplaceBack(a.EXTENT,a.EXTENT,a.EXTENT,a.EXTENT),this.rasterBoundsBuffer=i.createVertexBuffer(v,Te.members),this.rasterBoundsSegments=a.SegmentVector.simpleSegment(0,0,4,2);const S=new a.PosArray;S.emplaceBack(0,0),S.emplaceBack(1,0),S.emplaceBack(0,1),S.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(S,In.members),this.viewportSegments=a.SegmentVector.simpleSegment(0,0,4,2);const P=new a.LineStripIndexArray;P.emplaceBack(0),P.emplaceBack(1),P.emplaceBack(3),P.emplaceBack(2),P.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(P);const z=new a.TriangleIndexArray;z.emplaceBack(0,1,2),z.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(z),this.emptyTexture=new Q(i,{width:1,height:1,data:new Uint8Array([0,0,0,0])},i.gl.RGBA);const q=this.context.gl;this.stencilClearMode=new et({func:q.ALWAYS,mask:0},0,255,q.ZERO,q.ZERO,q.ZERO)}clearStencil(){const i=this.context,u=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const m=a.create();a.ortho(m,0,this.width,this.height,0,0,1),a.scale(m,m,[u.drawingBufferWidth,u.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(i,u.TRIANGLES,oe.disabled,this.stencilClearMode,xi.disabled,_t.disabled,Ja(m),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(i,u){if(this.currentStencilSource===i.source||!i.isTileClipped()||!u||!u.length)return;this.currentStencilSource=i.source;const m=this.context,v=m.gl;this.nextStencilID+u.length>256&&this.clearStencil(),m.setColorMode(xi.disabled),m.setDepthMode(oe.disabled);const S=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const P of u){const z=this._tileClippingMaskIDs[P.key]=this.nextStencilID++,q=this.style.terrain&&this.style.terrain.getTerrainData(P);S.draw(m,v.TRIANGLES,oe.disabled,new et({func:v.ALWAYS,mask:0},z,255,v.KEEP,v.KEEP,v.REPLACE),xi.disabled,_t.disabled,Ja(P.posMatrix),q,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,u=this.context.gl;return new et({func:u.NOTEQUAL,mask:255},i,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(i){const u=this.context.gl;return new et({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,u.KEEP,u.KEEP,u.REPLACE)}stencilConfigForOverlap(i){const u=this.context.gl,m=i.sort((P,z)=>z.overscaledZ-P.overscaledZ),v=m[m.length-1].overscaledZ,S=m[0].overscaledZ-v+1;if(S>1){this.currentStencilSource=void 0,this.nextStencilID+S>256&&this.clearStencil();const P={};for(let z=0;z<S;z++)P[z+v]=new et({func:u.GEQUAL,mask:255},z+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=S,[P,m]}return[{[v]:et.disabled},m]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new xi([i.CONSTANT_COLOR,i.ONE],new a.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?xi.unblended:xi.alphaBlended}depthModeForSublayer(i,u,m){if(!this.opaquePassEnabledForLayer())return oe.disabled;const v=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new oe(m||this.context.gl.LEQUAL,u,[v,v])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,u){this.style=i,this.options=u,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(a.exported.now()),this.imageManager.beginFrame();const m=this.style._order,v=this.style.sourceCaches,S=this.style.terrain&&new cA(this);for(const J in v){const ie=v[J];ie.used&&ie.prepare(this.context)}const P={},z={},q={};for(const J in v){const ie=v[J];P[J]=ie.getVisibleCoordinates(),z[J]=P[J].slice().reverse(),q[J]=ie.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let J=0;J<m.length;J++)if(this.style._layers[m[J]].is3D()){this.opaquePassCutoff=J;break}if(S){this.opaquePassCutoff=0;const J=this.style.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!a.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||J.length)&&(a.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(ie,pe){const be=ie.context,Ve=be.gl,Ne=xi.unblended,He=new oe(Ve.LEQUAL,oe.ReadWrite,[0,1]),ct=pe.getTerrainMesh(),wt=pe.sourceCache.getRenderableTiles(),St=ie.useProgram("terrainDepth");be.bindFramebuffer.set(pe.getFramebuffer("depth").framebuffer),be.viewport.set([0,0,ie.width/devicePixelRatio,ie.height/devicePixelRatio]),be.clear({color:a.Color.transparent,depth:1});for(const We of wt){const Rt=pe.getTerrainData(We.tileID),Qt=ie.transform.calculatePosMatrix(We.tileID.toUnwrapped());St.draw(be,Ve.TRIANGLES,He,et.disabled,Ne,_t.backCCW,{u_matrix:Qt},Rt,"terrain",ct.vertexBuffer,ct.indexBuffer,ct.segments)}be.bindFramebuffer.set(null),be.viewport.set([0,0,ie.width,ie.height])}(this,this.style.terrain),function(ie,pe){const be=ie.context,Ve=be.gl,Ne=xi.unblended,He=new oe(Ve.LEQUAL,oe.ReadWrite,[0,1]),ct=pe.getTerrainMesh(),wt=pe.getCoordsTexture(),St=pe.sourceCache.getRenderableTiles(),We=ie.useProgram("terrainCoords");be.bindFramebuffer.set(pe.getFramebuffer("coords").framebuffer),be.viewport.set([0,0,ie.width/devicePixelRatio,ie.height/devicePixelRatio]),be.clear({color:a.Color.transparent,depth:1}),pe.coordsIndex=[];for(const Rt of St){const Qt=pe.getTerrainData(Rt.tileID);be.activeTexture.set(Ve.TEXTURE0),Ve.bindTexture(Ve.TEXTURE_2D,wt.texture);const Xt=ie.transform.calculatePosMatrix(Rt.tileID.toUnwrapped());We.draw(be,Ve.TRIANGLES,He,et.disabled,Ne,_t.backCCW,{u_matrix:Xt,u_terrain_coords_id:(255-pe.coordsIndex.length)/255,u_texture:0},Qt,"terrain",ct.vertexBuffer,ct.indexBuffer,ct.segments),pe.coordsIndex.push(Rt.tileID.key)}be.bindFramebuffer.set(null),be.viewport.set([0,0,ie.width,ie.height])}(this,this.style.terrain))}this.renderPass="offscreen";for(const J of m){const ie=this.style._layers[J];if(!ie.hasOffscreenPass()||ie.isHidden(this.transform.zoom))continue;const pe=z[ie.source];(ie.type==="custom"||pe.length)&&this.renderLayer(this,v[ie.source],ie,pe)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:u.showOverdrawInspector?a.Color.black:a.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=u.showOverdrawInspector,this.depthRangeFor3D=[0,1-(i._order.length+2)*this.numSublayers*this.depthEpsilon],!S)for(this.renderPass="opaque",this.currentLayer=m.length-1;this.currentLayer>=0;this.currentLayer--){const J=this.style._layers[m[this.currentLayer]],ie=v[J.source],pe=P[J.source];this._renderTileClippingMasks(J,pe),this.renderLayer(this,ie,J,pe)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<m.length;this.currentLayer++){const J=this.style._layers[m[this.currentLayer]],ie=v[J.source];if(S&&S.renderLayer(J))continue;const pe=(J.type==="symbol"?q:z)[J.source];this._renderTileClippingMasks(J,P[J.source]),this.renderLayer(this,ie,J,pe)}if(this.options.showTileBoundaries){let J,ie;Object.values(this.style._layers).forEach(pe=>{pe.source&&!pe.isHidden(this.transform.zoom)&&(pe.source!==(ie&&ie.id)&&(ie=this.style.sourceCaches[pe.source]),(!J||J.getSource().maxzoom<ie.getSource().maxzoom)&&(J=ie))}),J&&no.debug(this,J,J.getVisibleCoordinates())}this.options.showPadding&&function(J){const ie=J.transform.padding;xa(J,J.transform.height-(ie.top||0),3,rs),xa(J,ie.bottom||0,3,Si),Mi(J,ie.left||0,3,yl),Mi(J,J.transform.width-(ie.right||0),3,la);const pe=J.transform.centerPoint;(function(be,Ve,Ne,He){Ma(be,Ve-1,Ne-10,2,20,He),Ma(be,Ve-10,Ne-1,20,2,He)})(J,pe.x,J.transform.height-pe.y,Pi)}(this),this.context.setDefault()}renderLayer(i,u,m,v){m.isHidden(this.transform.zoom)||(m.type==="background"||m.type==="custom"||(v||[]).length)&&(this.id=m.id,this.gpuTimingStart(m),no[m.type](i,u,m,v,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(i){if(!this.options.gpuTiming)return;const u=this.context.extTimerQuery;let m=this.gpuTimers[i.id];m||(m=this.gpuTimers[i.id]={calls:0,cpuTime:0,query:u.createQueryEXT()}),m.calls++,u.beginQueryEXT(u.TIME_ELAPSED_EXT,m.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const i=this.context.extTimerQuery;i.endQueryEXT(i.TIME_ELAPSED_EXT)}collectGpuTimers(){const i=this.gpuTimers;return this.gpuTimers={},i}queryGpuTimers(i){const u={};for(const m in i){const v=i[m],S=this.context.extTimerQuery,P=S.getQueryObjectEXT(v.query,S.QUERY_RESULT_EXT)/1e6;S.deleteQueryEXT(v.query),u[m]=P}return u}translatePosMatrix(i,u,m,v,S){if(!m[0]&&!m[1])return i;const P=S?v==="map"?this.transform.angle:0:v==="viewport"?-this.transform.angle:0;if(P){const J=Math.sin(P),ie=Math.cos(P);m=[m[0]*ie-m[1]*J,m[0]*J+m[1]*ie]}const z=[S?m[0]:hn(u,m[0],this.transform.zoom),S?m[1]:hn(u,m[1],this.transform.zoom),0],q=new Float32Array(16);return a.translate(q,i,z),q}saveTileTexture(i){const u=this._tileTextures[i.size[0]];u?u.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const u=this._tileTextures[i];return u&&u.length>0?u.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;const u=this.imageManager.getPattern(i.from.toString()),m=this.imageManager.getPattern(i.to.toString());return!u||!m}useProgram(i,u){this.cache=this.cache||{};const m=i+(u?u.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.terrain?"/terrain":"");return this.cache[m]||(this.cache[m]=new Gs(this.context,i,bi[i],u,go[i],this._showOverdrawInspector,this.style.terrain)),this.cache[m]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Q(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class Fs{constructor(i,u){this.points=i,this.planes=u}static fromInvProjectionMatrix(i,u,m){const v=Math.pow(2,m),S=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(z=>{const q=1/(z=a.transformMat4([],z,i))[3]/u*v;return a.mul$1(z,z,[q,q,1/z[3],q])}),P=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(z=>{const q=a.sub([],S[z[0]],S[z[1]]),J=a.sub([],S[z[2]],S[z[1]]),ie=a.normalize([],a.cross([],q,J)),pe=-a.dot(ie,S[z[1]]);return ie.concat(pe)});return new Fs(S,P)}}class _o{constructor(i,u){this.min=i,this.max=u,this.center=a.scale$1([],a.add([],this.min,this.max),.5)}quadrant(i){const u=[i%2==0,i<2],m=a.clone$2(this.min),v=a.clone$2(this.max);for(let S=0;S<u.length;S++)m[S]=u[S]?this.min[S]:this.center[S],v[S]=u[S]?this.center[S]:this.max[S];return v[2]=this.max[2],new _o(m,v)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}intersects(i){const u=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let m=!0;for(let v=0;v<i.planes.length;v++){const S=i.planes[v];let P=0;for(let z=0;z<u.length;z++)a.dot$1(S,u[z])>=0&&P++;if(P===0)return 0;P!==u.length&&(m=!1)}if(m)return 2;for(let v=0;v<3;v++){let S=Number.MAX_VALUE,P=-Number.MAX_VALUE;for(let z=0;z<i.points.length;z++){const q=i.points[z][v]-this.min[v];S=Math.min(S,q),P=Math.max(P,q)}if(P<0||S>this.max[v]-this.min[v])return 0}return 1}}class io{constructor(i=0,u=0,m=0,v=0){if(isNaN(i)||i<0||isNaN(u)||u<0||isNaN(m)||m<0||isNaN(v)||v<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=u,this.left=m,this.right=v}interpolate(i,u,m){return u.top!=null&&i.top!=null&&(this.top=a.number(i.top,u.top,m)),u.bottom!=null&&i.bottom!=null&&(this.bottom=a.number(i.bottom,u.bottom,m)),u.left!=null&&i.left!=null&&(this.left=a.number(i.left,u.left,m)),u.right!=null&&i.right!=null&&(this.right=a.number(i.right,u.right,m)),this}getCenter(i,u){const m=a.clamp((this.left+i-this.right)/2,0,i),v=a.clamp((this.top+u-this.bottom)/2,0,u);return new a.pointGeometry(m,v)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new io(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class jo{constructor(i,u,m,v,S){this.tileSize=512,this.maxValidLatitude=85.051129,this.freezeElevation=!1,this._renderWorldCopies=S===void 0||!!S,this._minZoom=i||0,this._maxZoom=u||22,this._minPitch=m??0,this._maxPitch=v??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new a.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new io,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const i=new jo(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return i.tileSize=this.tileSize,i.latRange=this.latRange,i.width=this.width,i.height=this.height,i._center=this._center,i._elevation=this._elevation,i.zoom=this.zoom,i.angle=this.angle,i._fov=this._fov,i._pitch=this._pitch,i._unmodified=this._unmodified,i._edgeInsets=this._edgeInsets.clone(),i._calcMatrices(),i}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(i){const u=-a.wrap(i,-180,180)*Math.PI/180;var m;this.angle!==u&&(this._unmodified=!1,this.angle=u,this._calcMatrices(),this.rotationMatrix=(m=new a.ARRAY_TYPE(4),a.ARRAY_TYPE!=Float32Array&&(m[1]=0,m[2]=0),m[0]=1,m[3]=1,m),function(v,S,P){var z=S[0],q=S[1],J=S[2],ie=S[3],pe=Math.sin(P),be=Math.cos(P);v[0]=z*be+J*pe,v[1]=q*be+ie*pe,v[2]=z*-pe+J*be,v[3]=q*-pe+ie*be}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){const u=a.clamp(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==u&&(this._unmodified=!1,this._pitch=u,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=i/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(i){const u=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==u&&(this._unmodified=!1,this._zoom=u,this.scale=this.zoomScale(u),this.tileZoom=Math.floor(u),this.zoomFraction=u-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(i){i!==this._elevation&&(this._elevation=i,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,u,m){this._unmodified=!1,this._edgeInsets.interpolate(i,u,m),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){const u=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,u)}getVisibleUnwrappedCoordinates(i){const u=[new a.UnwrappedTileID(0,i)];if(this._renderWorldCopies){const m=this.pointCoordinate(new a.pointGeometry(0,0)),v=this.pointCoordinate(new a.pointGeometry(this.width,0)),S=this.pointCoordinate(new a.pointGeometry(this.width,this.height)),P=this.pointCoordinate(new a.pointGeometry(0,this.height)),z=Math.floor(Math.min(m.x,v.x,S.x,P.x)),q=Math.floor(Math.max(m.x,v.x,S.x,P.x)),J=1;for(let ie=z-J;ie<=q+J;ie++)ie!==0&&u.push(new a.UnwrappedTileID(ie,i))}return u}coveringTiles(i){var u,m;let v=this.coveringZoomLevel(i);const S=v;if(i.minzoom!==void 0&&v<i.minzoom)return[];i.maxzoom!==void 0&&v>i.maxzoom&&(v=i.maxzoom);const P=this.pointCoordinate(this.getCameraPoint()),z=a.MercatorCoordinate.fromLngLat(this.center),q=Math.pow(2,v),J=[q*P.x,q*P.y,0],ie=[q*z.x,q*z.y,0],pe=Fs.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,v);let be=i.minzoom||0;!i.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(be=v);const Ve=i.terrain?2/Math.min(this.tileSize,i.tileSize)*this.tileSize:3,Ne=We=>({aabb:new _o([We*q,0,0],[(We+1)*q,q,0]),zoom:0,x:0,y:0,wrap:We,fullyVisible:!1}),He=[],ct=[],wt=v,St=i.reparseOverscaled?S:v;if(this._renderWorldCopies)for(let We=1;We<=3;We++)He.push(Ne(-We)),He.push(Ne(We));for(He.push(Ne(0));He.length>0;){const We=He.pop(),Rt=We.x,Qt=We.y;let Xt=We.fullyVisible;if(!Xt){const qr=We.aabb.intersects(pe);if(qr===0)continue;Xt=qr===2}const Zt=i.terrain?J:ie,ur=We.aabb.distanceX(Zt),qt=We.aabb.distanceY(Zt),Rr=Math.max(Math.abs(ur),Math.abs(qt)),Ur=Ve+(1<<wt-We.zoom)-2;if(We.zoom===wt||Rr>Ur&&We.zoom>=be){const qr=wt-We.zoom,Pn=J[0]-.5-(Rt<<qr),jn=J[1]-.5-(Qt<<qr);ct.push({tileID:new a.OverscaledTileID(We.zoom===wt?St:We.zoom,We.wrap,We.zoom,Rt,Qt),distanceSq:a.sqrLen([ie[0]-.5-Rt,ie[1]-.5-Qt]),tileDistanceToCamera:Math.sqrt(Pn*Pn+jn*jn)})}else for(let qr=0;qr<4;qr++){const Pn=(Rt<<1)+qr%2,jn=(Qt<<1)+(qr>>1),b=We.zoom+1;let L=We.aabb.quadrant(qr);if(i.terrain){const j=new a.OverscaledTileID(b,We.wrap,b,Pn,jn),W=i.terrain.getMinMaxElevation(j),ae=(u=W.minElevation)!==null&&u!==void 0?u:this.elevation,de=(m=W.maxElevation)!==null&&m!==void 0?m:this.elevation;L=new _o([L.min[0],L.min[1],ae],[L.max[0],L.max[1],de])}He.push({aabb:L,zoom:b,x:Pn,y:jn,wrap:We.wrap,fullyVisible:Xt})}}return ct.sort((We,Rt)=>We.distanceSq-Rt.distanceSq).map(We=>We.tileID)}resize(i,u){this.width=i,this.height=u,this.pixelsToGLUnits=[2/i,-2/u],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){const u=a.clamp(i.lat,-this.maxValidLatitude,this.maxValidLatitude);return new a.pointGeometry(a.mercatorXfromLng(i.lng)*this.worldSize,a.mercatorYfromLat(u)*this.worldSize)}unproject(i){return new a.MercatorCoordinate(i.x/this.worldSize,i.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}updateElevation(i){this.freezeElevation||(this.elevation=i?this.getElevation(this._center,i):0)}getElevation(i,u){const m=a.MercatorCoordinate.fromLngLat(i),v=(1<<this.tileZoom)*a.EXTENT,S=m.x*v,P=m.y*v,z=Math.floor(S/a.EXTENT),q=Math.floor(P/a.EXTENT),J=new a.OverscaledTileID(this.tileZoom,0,this.tileZoom,z,q);return u.getElevation(J,S%a.EXTENT,P%a.EXTENT,a.EXTENT)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(i){const u=this.pointLocation(this.centerPoint,i),m=this.getElevation(u,i);if(!(this.elevation-m))return;const v=this.getCameraPosition(),S=a.MercatorCoordinate.fromLngLat(v.lngLat,v.altitude),P=a.MercatorCoordinate.fromLngLat(u,m),z=S.x-P.x,q=S.y-P.y,J=S.z-P.z,ie=Math.sqrt(z*z+q*q+J*J),pe=this.scaleZoom(this.cameraToCenterDistance/ie/this.tileSize);this._elevation=m,this._center=u,this.zoom=pe}setLocationAtPoint(i,u){const m=this.pointCoordinate(u),v=this.pointCoordinate(this.centerPoint),S=this.locationCoordinate(i),P=new a.MercatorCoordinate(S.x-(m.x-v.x),S.y-(m.y-v.y));this.center=this.coordinateLocation(P),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(i,u){return u?this.coordinatePoint(this.locationCoordinate(i),this.getElevation(i,u),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(i))}pointLocation(i,u){return this.coordinateLocation(this.pointCoordinate(i,u))}locationCoordinate(i){return a.MercatorCoordinate.fromLngLat(i)}coordinateLocation(i){return i&&i.toLngLat()}pointCoordinate(i,u){if(u){const be=u.pointCoordinate(i);if(be!=null)return be}const m=[i.x,i.y,0,1],v=[i.x,i.y,1,1];a.transformMat4(m,m,this.pixelMatrixInverse),a.transformMat4(v,v,this.pixelMatrixInverse);const S=m[3],P=v[3],z=m[1]/S,q=v[1]/P,J=m[2]/S,ie=v[2]/P,pe=J===ie?0:(0-J)/(ie-J);return new a.MercatorCoordinate(a.number(m[0]/S,v[0]/P,pe)/this.worldSize,a.number(z,q,pe)/this.worldSize)}coordinatePoint(i,u=0,m=this.pixelMatrix){const v=[i.x*this.worldSize,i.y*this.worldSize,u,1];return a.transformMat4(v,v,m),new a.pointGeometry(v[0]/v[3],v[1]/v[3])}getBounds(){const i=Math.max(0,this.height/2-this.getHorizon());return new a.LngLatBounds().extend(this.pointLocation(new a.pointGeometry(0,i))).extend(this.pointLocation(new a.pointGeometry(this.width,i))).extend(this.pointLocation(new a.pointGeometry(this.width,this.height))).extend(this.pointLocation(new a.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new a.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(i){i?(this.lngRange=[i.getWest(),i.getEast()],this.latRange=[i.getSouth(),i.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(i,u=!1){const m=i.key,v=u?this._alignedPosMatrixCache:this._posMatrixCache;if(v[m])return v[m];const S=i.canonical,P=this.worldSize/this.zoomScale(S.z),z=S.x+Math.pow(2,S.z)*i.wrap,q=a.identity(new Float64Array(16));return a.translate(q,q,[z*P,S.y*P,0]),a.scale(q,q,[P/a.EXTENT,P/a.EXTENT,1]),a.multiply(q,u?this.alignedProjMatrix:this.projMatrix,q),v[m]=new Float32Array(q),v[m]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let i,u,m,v,S=-90,P=90,z=-180,q=180;const J=this.size,ie=this._unmodified;if(this.latRange){const Ve=this.latRange;S=a.mercatorYfromLat(Ve[1])*this.worldSize,P=a.mercatorYfromLat(Ve[0])*this.worldSize,i=P-S<J.y?J.y/(P-S):0}if(this.lngRange){const Ve=this.lngRange;z=a.wrap(a.mercatorXfromLng(Ve[0])*this.worldSize,0,this.worldSize),q=a.wrap(a.mercatorXfromLng(Ve[1])*this.worldSize,0,this.worldSize),q<z&&(q+=this.worldSize),u=q-z<J.x?J.x/(q-z):0}const pe=this.point,be=Math.max(u||0,i||0);if(be)return this.center=this.unproject(new a.pointGeometry(u?(q+z)/2:pe.x,i?(P+S)/2:pe.y)),this.zoom+=this.scaleZoom(be),this._unmodified=ie,void(this._constraining=!1);if(this.latRange){const Ve=pe.y,Ne=J.y/2;Ve-Ne<S&&(v=S+Ne),Ve+Ne>P&&(v=P-Ne)}if(this.lngRange){const Ve=(z+q)/2,Ne=a.wrap(pe.x,Ve-this.worldSize/2,Ve+this.worldSize/2),He=J.x/2;Ne-He<z&&(m=z+He),Ne+He>q&&(m=q-He)}m===void 0&&v===void 0||(this.center=this.unproject(new a.pointGeometry(m!==void 0?m:pe.x,v!==void 0?v:pe.y)).wrap()),this._unmodified=ie,this._constraining=!1}_calcMatrices(){if(!this.height)return;const i=this.centerOffset,u=this.point.x,m=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=a.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let v=a.identity(new Float64Array(16));a.scale(v,v,[this.width/2,-this.height/2,1]),a.translate(v,v,[1,-1,0]),this.labelPlaneMatrix=v,v=a.identity(new Float64Array(16)),a.scale(v,v,[1,-1,1]),a.translate(v,v,[-1,-1,0]),a.scale(v,v,[2/this.width,2/this.height,1]),this.glCoordMatrix=v,this.cameraToSeaLevelDistance=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch);const S=Math.PI/2+this._pitch,P=this._fov*(.5+i.y/this.height),z=Math.sin(P)*this.cameraToSeaLevelDistance/Math.sin(a.clamp(Math.PI-S-P,.01,Math.PI-.01)),q=this.getHorizon(),J=2*Math.atan(q/this.cameraToCenterDistance)*(.5+i.y/(2*q)),ie=Math.sin(J)*this.cameraToSeaLevelDistance/Math.sin(a.clamp(Math.PI-S-J,.01,Math.PI-.01)),pe=Math.cos(Math.PI/2-this._pitch)*z+this.cameraToSeaLevelDistance,be=Math.cos(Math.PI/2-this._pitch)*ie+this.cameraToSeaLevelDistance,Ve=1.01*Math.min(pe,be),Ne=this.height/50;v=new Float64Array(16),a.perspective(v,this._fov,this.width/this.height,Ne,Ve),v[8]=2*-i.x/this.width,v[9]=2*i.y/this.height,a.scale(v,v,[1,-1,1]),a.translate(v,v,[0,0,-this.cameraToCenterDistance]),a.rotateX(v,v,this._pitch),a.rotateZ(v,v,this.angle),a.translate(v,v,[-u,-m,0]),this.mercatorMatrix=a.scale([],v,[this.worldSize,this.worldSize,this.worldSize]),a.scale(v,v,[1,1,this._pixelPerMeter]),this.pixelMatrix=a.multiply(new Float64Array(16),this.labelPlaneMatrix,v),a.translate(v,v,[0,0,-this.elevation]),this.projMatrix=v,this.invProjMatrix=a.invert([],v),this.pixelMatrix3D=a.multiply(new Float64Array(16),this.labelPlaneMatrix,v);const He=this.width%2/2,ct=this.height%2/2,wt=Math.cos(this.angle),St=Math.sin(this.angle),We=u-Math.round(u)+wt*He+St*ct,Rt=m-Math.round(m)+wt*ct+St*He,Qt=new Float64Array(v);if(a.translate(Qt,Qt,[We>.5?We-1:We,Rt>.5?Rt-1:Rt,0]),this.alignedProjMatrix=Qt,v=a.invert(new Float64Array(16),this.pixelMatrix),!v)throw new Error("failed to invert matrix");this.pixelMatrixInverse=v,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const i=this.pointCoordinate(new a.pointGeometry(0,0)),u=[i.x*this.worldSize,i.y*this.worldSize,0,1];return a.transformMat4(u,u,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.pointGeometry(0,i))}getCameraQueryGeometry(i){const u=this.getCameraPoint();if(i.length===1)return[i[0],u];{let m=u.x,v=u.y,S=u.x,P=u.y;for(const z of i)m=Math.min(m,z.x),v=Math.min(v,z.y),S=Math.max(S,z.x),P=Math.max(P,z.y);return[new a.pointGeometry(m,v),new a.pointGeometry(S,v),new a.pointGeometry(S,P),new a.pointGeometry(m,P),new a.pointGeometry(m,v)]}}}class Hi{constructor(i){this._hashName=i&&encodeURIComponent(i),a.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(u,m){let v=!1,S=null;const P=()=>{S=null,v&&(u(),S=setTimeout(P,300),v=!1)};return()=>(v=!0,S||P(),S)}(this._updateHashUnthrottled.bind(this))}addTo(i){return this._map=i,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(i){const u=this._map.getCenter(),m=Math.round(100*this._map.getZoom())/100,v=Math.ceil((m*Math.LN2+Math.log(512/360/.5))/Math.LN10),S=Math.pow(10,v),P=Math.round(u.lng*S)/S,z=Math.round(u.lat*S)/S,q=this._map.getBearing(),J=this._map.getPitch();let ie="";if(ie+=i?`/${P}/${z}/${m}`:`${m}/${z}/${P}`,(q||J)&&(ie+="/"+Math.round(10*q)/10),J&&(ie+=`/${Math.round(J)}`),this._hashName){const pe=this._hashName;let be=!1;const Ve=window.location.hash.slice(1).split("&").map(Ne=>{const He=Ne.split("=")[0];return He===pe?(be=!0,`${He}=${ie}`):Ne}).filter(Ne=>Ne);return be||Ve.push(`${pe}=${ie}`),`#${Ve.join("&")}`}return`#${ie}`}_getCurrentHash(){const i=window.location.hash.replace("#","");if(this._hashName){let u;return i.split("&").map(m=>m.split("=")).forEach(m=>{m[0]===this._hashName&&(u=m)}),(u&&u[1]||"").split("/")}return i.split("/")}_onHashChange(){const i=this._getCurrentHash();if(i.length>=3&&!i.some(u=>isNaN(u))){const u=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(i[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+i[2],+i[1]],zoom:+i[0],bearing:u,pitch:+(i[4]||0)}),!0}return!1}_updateHashUnthrottled(){const i=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,i)}catch{}}}const Ns={linearity:.3,easing:a.bezier(0,0,.3,1)},so=a.extend({deceleration:2500,maxSpeed:1400},Ns),is=a.extend({deceleration:20,maxSpeed:1400},Ns),js=a.extend({deceleration:1e3,maxSpeed:360},Ns),Ss=a.extend({deceleration:1e3,maxSpeed:90},Ns);class Ca{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:a.exported.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,u=a.exported.now();for(;i.length>0&&u-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const u={zoom:0,bearing:0,pitch:0,pan:new a.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:S}of this._inertiaBuffer)u.zoom+=S.zoomDelta||0,u.bearing+=S.bearingDelta||0,u.pitch+=S.pitchDelta||0,S.panDelta&&u.pan._add(S.panDelta),S.around&&(u.around=S.around),S.pinchAround&&(u.pinchAround=S.pinchAround);const m=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,v={};if(u.pan.mag()){const S=Xs(u.pan.mag(),m,a.extend({},so,i||{}));v.offset=u.pan.mult(S.amount/u.pan.mag()),v.center=this._map.transform.center,ca(v,S)}if(u.zoom){const S=Xs(u.zoom,m,is);v.zoom=this._map.transform.zoom+S.amount,ca(v,S)}if(u.bearing){const S=Xs(u.bearing,m,js);v.bearing=this._map.transform.bearing+a.clamp(S.amount,-179,179),ca(v,S)}if(u.pitch){const S=Xs(u.pitch,m,Ss);v.pitch=this._map.transform.pitch+S.amount,ca(v,S)}if(v.zoom||v.bearing){const S=u.pinchAround===void 0?u.around:u.pinchAround;v.around=S?this._map.unproject(S):this._map.getCenter()}return this.clear(),a.extend(v,{noMoveStart:!0})}}function ca(g,i){(!g.duration||g.duration<i.duration)&&(g.duration=i.duration,g.easing=i.easing)}function Xs(g,i,u){const{maxSpeed:m,linearity:v,deceleration:S}=u,P=a.clamp(g*v/(i/1e3),-m,m),z=Math.abs(P)/(S*v);return{easing:u.easing,duration:1e3*z,amount:P*(z/2)}}class ss extends a.Event{constructor(i,u,m,v={}){const S=w.mousePos(u.getCanvasContainer(),m),P=u.unproject(S);super(i,a.extend({point:S,lngLat:P,originalEvent:m},v)),this._defaultPrevented=!1,this.target=u}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class ua extends a.Event{constructor(i,u,m){const v=i==="touchend"?m.changedTouches:m.touches,S=w.touchPos(u.getCanvasContainer(),v),P=S.map(q=>u.unproject(q)),z=S.reduce((q,J,ie,pe)=>q.add(J.div(pe.length)),new a.pointGeometry(0,0));super(i,{points:S,point:z,lngLats:P,lngLat:u.unproject(z),originalEvent:m}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class gi extends a.Event{constructor(i,u,m){super(i,{originalEvent:m}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class JA{constructor(i,u){this._map=i,this._clickTolerance=u.clickTolerance}reset(){delete this._mousedownPos}wheel(i){return this._firePreventable(new gi(i.type,this._map,i))}mousedown(i,u){return this._mousedownPos=u,this._firePreventable(new ss(i.type,this._map,i))}mouseup(i){this._map.fire(new ss(i.type,this._map,i))}click(i,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||this._map.fire(new ss(i.type,this._map,i))}dblclick(i){return this._firePreventable(new ss(i.type,this._map,i))}mouseover(i){this._map.fire(new ss(i.type,this._map,i))}mouseout(i){this._map.fire(new ss(i.type,this._map,i))}touchstart(i){return this._firePreventable(new ua(i.type,this._map,i))}touchmove(i){this._map.fire(new ua(i.type,this._map,i))}touchend(i){this._map.fire(new ua(i.type,this._map,i))}touchcancel(i){this._map.fire(new ua(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Da{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(i){this._map.fire(new ss(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ss("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._ignoreContextMenu||this._map.fire(new ss(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Na{constructor(i,u){this._map=i,this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,u){this.isEnabled()&&i.shiftKey&&i.button===0&&(w.disableDrag(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(i,u){if(!this._active)return;const m=u;if(this._lastPos.equals(m)||!this._box&&m.dist(this._startPos)<this._clickTolerance)return;const v=this._startPos;this._lastPos=m,this._box||(this._box=w.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",i));const S=Math.min(v.x,m.x),P=Math.max(v.x,m.x),z=Math.min(v.y,m.y),q=Math.max(v.y,m.y);w.setTransform(this._box,`translate(${S}px,${z}px)`),this._box.style.width=P-S+"px",this._box.style.height=q-z+"px"}mouseupWindow(i,u){if(!this._active||i.button!==0)return;const m=this._startPos,v=u;if(this.reset(),w.suppressClick(),m.x!==v.x||m.y!==v.y)return this._map.fire(new a.Event("boxzoomend",{originalEvent:i})),{cameraAnimation:S=>S.fitScreenCoordinates(m,v,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(w.remove(this._box),this._box=null),w.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(i,u){return this._map.fire(new a.Event(i,{originalEvent:u}))}}function fs(g,i){if(g.length!==i.length)throw new Error(`The number of touches and points are not equal - touches ${g.length}, points ${i.length}`);const u={};for(let m=0;m<g.length;m++)u[g[m].identifier]=i[m];return u}class Ea{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(i,u,m){(this.centroid||m.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=i.timeStamp),m.length===this.numTouches&&(this.centroid=function(v){const S=new a.pointGeometry(0,0);for(const P of v)S._add(P);return S.div(v.length)}(u),this.touches=fs(m,u)))}touchmove(i,u,m){if(this.aborted||!this.centroid)return;const v=fs(m,u);for(const S in this.touches){const P=this.touches[S],z=v[S];(!z||z.dist(P)>30)&&(this.aborted=!0)}}touchend(i,u,m){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),m.length===0){const v=!this.aborted&&this.centroid;if(this.reset(),v)return v}}}class Ro{constructor(i){this.singleTap=new Ea(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(i,u,m){this.singleTap.touchstart(i,u,m)}touchmove(i,u,m){this.singleTap.touchmove(i,u,m)}touchend(i,u,m){const v=this.singleTap.touchend(i,u,m);if(v){const S=i.timeStamp-this.lastTime<500,P=!this.lastTap||this.lastTap.dist(v)<30;if(S&&P||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=v,this.count===this.numTaps)return this.reset(),v}}}class Rs{constructor(){this._zoomIn=new Ro({numTouches:1,numTaps:2}),this._zoomOut=new Ro({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,u,m){this._zoomIn.touchstart(i,u,m),this._zoomOut.touchstart(i,u,m)}touchmove(i,u,m){this._zoomIn.touchmove(i,u,m),this._zoomOut.touchmove(i,u,m)}touchend(i,u,m){const v=this._zoomIn.touchend(i,u,m),S=this._zoomOut.touchend(i,u,m);return v?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:P=>P.easeTo({duration:300,zoom:P.getZoom()+1,around:P.unproject(v)},{originalEvent:i})}):S?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:P=>P.easeTo({duration:300,zoom:P.getZoom()-1,around:P.unproject(S)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const hA={0:1,2:2};class ao{constructor(i){this.reset(),this._clickTolerance=i.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(i,u){return!1}_move(i,u){return{}}mousedown(i,u){if(this._lastPoint)return;const m=w.mouseButton(i);this._correctButton(i,m)&&(this._lastPoint=u,this._eventButton=m)}mousemoveWindow(i,u){const m=this._lastPoint;if(m){if(i.preventDefault(),function(v,S){const P=hA[S];return v.buttons===void 0||(v.buttons&P)!==P}(i,this._eventButton))this.reset();else if(this._moved||!(u.dist(m)<this._clickTolerance))return this._moved=!0,this._lastPoint=u,this._move(m,u)}}mouseupWindow(i){this._lastPoint&&w.mouseButton(i)===this._eventButton&&(this._moved&&w.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Oo extends ao{mousedown(i,u){super.mousedown(i,u),this._lastPoint&&(this._active=!0)}_correctButton(i,u){return u===0&&!i.ctrlKey}_move(i,u){return{around:u,panDelta:u.sub(i)}}}class zi extends ao{_correctButton(i,u){return u===0&&i.ctrlKey||u===2}_move(i,u){const m=.8*(u.x-i.x);if(m)return this._active=!0,{bearingDelta:m}}contextmenu(i){i.preventDefault()}}class Pr extends ao{_correctButton(i,u){return u===0&&i.ctrlKey||u===2}_move(i,u){const m=-.5*(u.y-i.y);if(m)return this._active=!0,{pitchDelta:m}}contextmenu(i){i.preventDefault()}}class Ii{constructor(i,u){this._minTouches=i.cooperativeGestures?2:1,this._clickTolerance=i.clickTolerance||1,this._map=u,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.pointGeometry(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(i,u,m){return this._calculateTransform(i,u,m)}touchmove(i,u,m){if(this._map._cooperativeGestures&&(this._minTouches===2&&m.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(i,!1,m.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(m.length<this._minTouches))return i.preventDefault(),this._calculateTransform(i,u,m)}touchend(i,u,m){this._calculateTransform(i,u,m),this._active&&m.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,u,m){m.length>0&&(this._active=!0);const v=fs(m,u),S=new a.pointGeometry(0,0),P=new a.pointGeometry(0,0);let z=0;for(const J in v){const ie=v[J],pe=this._touches[J];pe&&(S._add(ie),P._add(ie.sub(pe)),z++,v[J]=ie)}if(this._touches=v,z<this._minTouches||!P.mag())return;const q=P.div(z);return this._sum._add(q),this._sum.mag()<this._clickTolerance?void 0:{around:S.div(z),panDelta:q}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ai{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(i){}_move(i,u,m){return{}}touchstart(i,u,m){this._firstTwoTouches||m.length<2||(this._firstTwoTouches=[m[0].identifier,m[1].identifier],this._start([u[0],u[1]]))}touchmove(i,u,m){if(!this._firstTwoTouches)return;i.preventDefault();const[v,S]=this._firstTwoTouches,P=Bi(m,u,v),z=Bi(m,u,S);if(!P||!z)return;const q=this._aroundCenter?null:P.add(z).div(2);return this._move([P,z],q,i)}touchend(i,u,m){if(!this._firstTwoTouches)return;const[v,S]=this._firstTwoTouches,P=Bi(m,u,v),z=Bi(m,u,S);P&&z||(this._active&&w.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Bi(g,i,u){for(let m=0;m<g.length;m++)if(g[m].identifier===u)return i[m]}function Zi(g,i){return Math.log(g/i)/Math.LN2}class Sr extends Ai{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,u){const m=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(Zi(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Zi(this._distance,m),pinchAround:u}}}function ja(g,i){return 180*g.angleWith(i)/Math.PI}class LA extends Ai{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,u){const m=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:ja(this._vector,m),pinchAround:u}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const u=25/(Math.PI*this._minDiameter)*360,m=ja(i,this._startVector);return Math.abs(m)<u}}function QA(g){return Math.abs(g.y)>Math.abs(g.x)}class Xl extends Ai{constructor(i){super(),this._map=i}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(i,u,m){super.touchstart(i,u,m),this._currentTouchCount=m.length}_start(i){this._lastPoints=i,QA(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,u,m){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const v=i[0].sub(this._lastPoints[0]),S=i[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(v,S,m.timeStamp),this._valid?(this._lastPoints=i,this._active=!0,{pitchDelta:(v.y+S.y)/2*-.5}):void 0}gestureBeginsVertically(i,u,m){if(this._valid!==void 0)return this._valid;const v=i.mag()>=2,S=u.mag()>=2;if(!v&&!S)return;if(!v||!S)return this._firstMove===void 0&&(this._firstMove=m),m-this._firstMove<100&&void 0;const P=i.y>0==u.y>0;return QA(i)&&QA(u)&&P}}const YA={panStep:100,bearingStep:15,pitchStep:10};class wc{constructor(){const i=YA;this._panStep=i.panStep,this._bearingStep=i.bearingStep,this._pitchStep=i.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let u=0,m=0,v=0,S=0,P=0;switch(i.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:i.shiftKey?m=-1:(i.preventDefault(),S=-1);break;case 39:i.shiftKey?m=1:(i.preventDefault(),S=1);break;case 38:i.shiftKey?v=1:(i.preventDefault(),P=-1);break;case 40:i.shiftKey?v=-1:(i.preventDefault(),P=1);break;default:return}return this._rotationDisabled&&(m=0,v=0),{cameraAnimation:z=>{const q=z.getZoom();z.easeTo({duration:300,easeId:"keyboardHandler",easing:zc,zoom:u?Math.round(q)+u*(i.shiftKey?2:1):q,bearing:z.getBearing()+m*this._bearingStep,pitch:z.getPitch()+v*this._pitchStep,offset:[-S*this._panStep,-P*this._panStep],center:z.getCenter()},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function zc(g){return g*(2-g)}const vl=4.000244140625;class Zl{constructor(i,u){this._map=i,this._el=i.getCanvasContainer(),this._handler=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,a.bindAll(["_onTimeout"],this)}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=i&&i.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(i){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!this._map._metaPress)return;i.preventDefault()}let u=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const m=a.exported.now(),v=m-(this._lastWheelEventTime||0);this._lastWheelEventTime=m,u!==0&&u%vl==0?this._type="wheel":u!==0&&Math.abs(u)<4?this._type="trackpad":v>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(v*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),i.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=i,this._delta-=u,this._active||this._start(i)),i.preventDefault()}_onTimeout(i){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(i)}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const u=w.mousePos(this._el,i);this._around=a.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(u)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._map.transform;if(this._delta!==0){const z=this._type==="wheel"&&Math.abs(this._delta)>vl?this._wheelZoomRate:this._defaultZoomRate;let q=2/(1+Math.exp(-Math.abs(this._delta*z)));this._delta<0&&q!==0&&(q=1/q);const J=typeof this._targetZoom=="number"?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(J*q))),this._type==="wheel"&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const u=typeof this._targetZoom=="number"?this._targetZoom:i.zoom,m=this._startZoom,v=this._easing;let S,P=!1;if(this._type==="wheel"&&m&&v){const z=Math.min((a.exported.now()-this._lastWheelEventTime)/200,1),q=v(z);S=a.number(m,u,q),z<1?this._frameId||(this._frameId=!0):P=!0}else S=u,P=!0;return this._active=!0,P&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!P,zoomDelta:S-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let u=a.ease;if(this._prevEase){const m=this._prevEase,v=(a.exported.now()-m.start)/m.duration,S=m.easing(v+.01)-m.easing(v),P=.27/Math.sqrt(S*S+1e-4)*.01,z=Math.sqrt(.0729-P*P);u=a.bezier(P,z,.25,1)}return this._prevEase={start:a.exported.now(),duration:i,easing:u},u}reset(){this._active=!1}}class $A{constructor(i,u){this._clickZoom=i,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class el{constructor(){this.reset()}reset(){this._active=!1}dblclick(i,u){return i.preventDefault(),{cameraAnimation:m=>{m.easeTo({duration:300,zoom:m.getZoom()+(i.shiftKey?-1:1),around:m.unproject(u)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Zs{constructor(){this._tap=new Ro({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(i,u,m){this._swipePoint||(this._tapTime&&i.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?m.length>0&&(this._swipePoint=u[0],this._swipeTouch=m[0].identifier):this._tap.touchstart(i,u,m))}touchmove(i,u,m){if(this._tapTime){if(this._swipePoint){if(m[0].identifier!==this._swipeTouch)return;const v=u[0],S=v.y-this._swipePoint.y;return this._swipePoint=v,i.preventDefault(),this._active=!0,{zoomDelta:S/128}}}else this._tap.touchmove(i,u,m)}touchend(i,u,m){this._tapTime?this._swipePoint&&m.length===0&&this.reset():this._tap.touchend(i,u,m)&&(this._tapTime=i.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Di{constructor(i,u,m){this._el=i,this._mousePan=u,this._touchPan=m}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class oo{constructor(i,u,m){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=u,this._mousePitch=m}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class _l{constructor(i,u,m,v){this._el=i,this._touchZoom=u,this._touchRotate=m,this._tapDragZoom=v,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Ra=g=>g.zoom||g.drag||g.pitch||g.rotate;class tl extends a.Event{}function fA(g){return g.panDelta&&g.panDelta.mag()||g.zoomDelta||g.bearingDelta||g.pitchDelta}class kA{constructor(i,u){this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ca(i),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(u),a.bindAll(["handleEvent","handleWindowEvent"],this);const m=this._el;this._listeners=[[m,"touchstart",{passive:!0}],[m,"touchmove",{passive:!1}],[m,"touchend",void 0],[m,"touchcancel",void 0],[m,"mousedown",void 0],[m,"mousemove",void 0],[m,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[m,"mouseover",void 0],[m,"mouseout",void 0],[m,"dblclick",void 0],[m,"click",void 0],[m,"keydown",{capture:!1}],[m,"keyup",void 0],[m,"wheel",{passive:!1}],[m,"contextmenu",void 0],[window,"blur",void 0]];for(const[v,S,P]of this._listeners)w.addEventListener(v,S,v===document?this.handleWindowEvent:this.handleEvent,P)}destroy(){for(const[i,u,m]of this._listeners)w.removeEventListener(i,u,i===document?this.handleWindowEvent:this.handleEvent,m)}_addDefaultHandlers(i){const u=this._map,m=u.getCanvasContainer();this._add("mapEvent",new JA(u,i));const v=u.boxZoom=new Na(u,i);this._add("boxZoom",v);const S=new Rs,P=new el;u.doubleClickZoom=new $A(P,S),this._add("tapZoom",S),this._add("clickZoom",P);const z=new Zs;this._add("tapDragZoom",z);const q=u.touchPitch=new Xl(u);this._add("touchPitch",q);const J=new zi(i),ie=new Pr(i);u.dragRotate=new oo(i,J,ie),this._add("mouseRotate",J,["mousePitch"]),this._add("mousePitch",ie,["mouseRotate"]);const pe=new Oo(i),be=new Ii(i,u);u.dragPan=new Di(m,pe,be),this._add("mousePan",pe),this._add("touchPan",be,["touchZoom","touchRotate"]);const Ve=new LA,Ne=new Sr;u.touchZoomRotate=new _l(m,Ne,Ve,z),this._add("touchRotate",Ve,["touchPan","touchZoom"]),this._add("touchZoom",Ne,["touchPan","touchRotate"]);const He=u.scrollZoom=new Zl(u,this);this._add("scrollZoom",He,["mousePan"]);const ct=u.keyboard=new wc;this._add("keyboard",ct),this._add("blockableMapEvent",new Da(u));for(const wt of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])i.interactive&&i[wt]&&u[wt].enable(i[wt])}_add(i,u,m){this._handlers.push({handlerName:i,handler:u,allowed:m}),this._handlersById[i]=u}stop(i){if(!this._updatingCamera){for(const{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(Ra(this._eventsInProgress))||this.isZooming()}_blockedByActive(i,u,m){for(const v in i)if(v!==m&&(!u||u.indexOf(v)<0))return!0;return!1}handleWindowEvent(i){this.handleEvent(i,`${i.type}Window`)}_getMapTouches(i){const u=[];for(const m of i)this._el.contains(m.target)&&u.push(m);return u}handleEvent(i,u){if(i.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const m=i.type==="renderFrame"?void 0:i,v={needsRenderFrame:!1},S={},P={},z=i.touches,q=z?this._getMapTouches(z):void 0,J=q?w.touchPos(this._el,q):w.mousePos(this._el,i);for(const{handlerName:be,handler:Ve,allowed:Ne}of this._handlers){if(!Ve.isEnabled())continue;let He;this._blockedByActive(P,Ne,be)?Ve.reset():Ve[u||i.type]&&(He=Ve[u||i.type](i,J,q),this.mergeHandlerResult(v,S,He,be,m),He&&He.needsRenderFrame&&this._triggerRenderFrame()),(He||Ve.isActive())&&(P[be]=Ve)}const ie={};for(const be in this._previousActiveHandlers)P[be]||(ie[be]=m);this._previousActiveHandlers=P,(Object.keys(ie).length||fA(v))&&(this._changes.push([v,S,ie]),this._triggerRenderFrame()),(Object.keys(P).length||fA(v))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:pe}=v;pe&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],pe(this._map))}mergeHandlerResult(i,u,m,v,S){if(!m)return;a.extend(i,m);const P={handlerName:v,originalEvent:m.originalEvent||S};m.zoomDelta!==void 0&&(u.zoom=P),m.panDelta!==void 0&&(u.drag=P),m.pitchDelta!==void 0&&(u.pitch=P),m.bearingDelta!==void 0&&(u.rotate=P)}_applyChanges(){const i={},u={},m={};for(const[v,S,P]of this._changes)v.panDelta&&(i.panDelta=(i.panDelta||new a.pointGeometry(0,0))._add(v.panDelta)),v.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+v.zoomDelta),v.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+v.bearingDelta),v.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+v.pitchDelta),v.around!==void 0&&(i.around=v.around),v.pinchAround!==void 0&&(i.pinchAround=v.pinchAround),v.noInertia&&(i.noInertia=v.noInertia),a.extend(u,S),a.extend(m,P);this._updateMapTransform(i,u,m),this._changes=[]}_updateMapTransform(i,u,m){const v=this._map,S=v.transform,P=v.style&&v.style.terrain;if(!(fA(i)||P&&this._drag))return this._fireEvents(u,m,!0);let{panDelta:z,zoomDelta:q,bearingDelta:J,pitchDelta:ie,around:pe,pinchAround:be}=i;be!==void 0&&(pe=be),v._stop(!0),pe=pe||v.transform.centerPoint;const Ve=S.pointLocation(z?pe.sub(z):pe);J&&(S.bearing+=J),ie&&(S.pitch+=ie),q&&(S.zoom+=q),P?u.drag&&!this._drag?(this._drag={center:S.centerPoint,lngLat:S.pointLocation(pe),point:pe,handlerName:u.drag.handlerName},v.fire(new a.Event("freezeElevation",{freeze:!0}))):this._drag&&m[this._drag.handlerName]?(v.fire(new a.Event("freezeElevation",{freeze:!1})),this._drag=null):u.drag&&this._drag&&(S.center=S.pointLocation(S.centerPoint.sub(z))):S.setLocationAtPoint(Ve,pe),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(u,m,!0)}_fireEvents(i,u,m){const v=Ra(this._eventsInProgress),S=Ra(i),P={};for(const ie in i){const{originalEvent:pe}=i[ie];this._eventsInProgress[ie]||(P[`${ie}start`]=pe),this._eventsInProgress[ie]=i[ie]}!v&&S&&this._fireEvent("movestart",S.originalEvent);for(const ie in P)this._fireEvent(ie,P[ie]);S&&this._fireEvent("move",S.originalEvent);for(const ie in i){const{originalEvent:pe}=i[ie];this._fireEvent(ie,pe)}const z={};let q;for(const ie in this._eventsInProgress){const{handlerName:pe,originalEvent:be}=this._eventsInProgress[ie];this._handlersById[pe].isActive()||(delete this._eventsInProgress[ie],q=u[pe]||be,z[`${ie}end`]=q)}for(const ie in z)this._fireEvent(ie,z[ie]);const J=Ra(this._eventsInProgress);if(m&&(v||S)&&!J){this._updatingCamera=!0;const ie=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),pe=be=>be!==0&&-this._bearingSnap<be&&be<this._bearingSnap;ie?(pe(ie.bearing||this._map.getBearing())&&(ie.bearing=0),this._map.easeTo(ie,{originalEvent:q})):(this._map.fire(new a.Event("moveend",{originalEvent:q})),pe(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(i,u){this._map.fire(new a.Event(i,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{delete this._frameId,this.handleEvent(new tl("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Fa={extend:(g,...i)=>a.extend(g,...i),run(g){g()},logToElement(g,i=!1,u="log"){const m=window.document.getElementById(u);m&&(i&&(m.innerHTML=""),m.innerHTML+=`<br>${g}`)}};class Ui extends a.Evented{constructor(i,u){super(),this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=u.bearingSnap,a.bindAll(["_renderFrameCallback"],this)}getCenter(){return new a.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(i,u){return this.jumpTo({center:i},u)}panBy(i,u,m){return i=a.pointGeometry.convert(i).mult(-1),this.panTo(this.transform.center,a.extend({offset:i},u),m)}panTo(i,u,m){return this.easeTo(a.extend({center:i},u),m)}getZoom(){return this.transform.zoom}setZoom(i,u){return this.jumpTo({zoom:i},u),this}zoomTo(i,u,m){return this.easeTo(a.extend({zoom:i},u),m)}zoomIn(i,u){return this.zoomTo(this.getZoom()+1,i,u),this}zoomOut(i,u){return this.zoomTo(this.getZoom()-1,i,u),this}getBearing(){return this.transform.bearing}setBearing(i,u){return this.jumpTo({bearing:i},u),this}getPadding(){return this.transform.padding}setPadding(i,u){return this.jumpTo({padding:i},u),this}rotateTo(i,u,m){return this.easeTo(a.extend({bearing:i},u),m)}resetNorth(i,u){return this.rotateTo(0,a.extend({duration:1e3},i),u),this}resetNorthPitch(i,u){return this.easeTo(a.extend({bearing:0,pitch:0,duration:1e3},i),u),this}snapToNorth(i,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,u):this}getPitch(){return this.transform.pitch}setPitch(i,u){return this.jumpTo({pitch:i},u),this}cameraForBounds(i,u){i=a.LngLatBounds.convert(i);const m=u&&u.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),m,u)}_cameraForBoxAndBearing(i,u,m,v){const S={top:0,bottom:0,right:0,left:0};if(typeof(v=a.extend({padding:S,offset:[0,0],maxZoom:this.transform.maxZoom},v)).padding=="number"){const Qt=v.padding;v.padding={top:Qt,bottom:Qt,right:Qt,left:Qt}}v.padding=a.extend(S,v.padding);const P=this.transform,z=P.padding,q=P.project(a.LngLat.convert(i)),J=P.project(a.LngLat.convert(u)),ie=q.rotate(-m*Math.PI/180),pe=J.rotate(-m*Math.PI/180),be=new a.pointGeometry(Math.max(ie.x,pe.x),Math.max(ie.y,pe.y)),Ve=new a.pointGeometry(Math.min(ie.x,pe.x),Math.min(ie.y,pe.y)),Ne=be.sub(Ve),He=(P.width-(z.left+z.right+v.padding.left+v.padding.right))/Ne.x,ct=(P.height-(z.top+z.bottom+v.padding.top+v.padding.bottom))/Ne.y;if(ct<0||He<0)return void a.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const wt=Math.min(P.scaleZoom(P.scale*Math.min(He,ct)),v.maxZoom),St=a.pointGeometry.convert(v.offset),We=new a.pointGeometry((v.padding.left-v.padding.right)/2,(v.padding.top-v.padding.bottom)/2).rotate(m*Math.PI/180),Rt=St.add(We).mult(P.scale/P.zoomScale(wt));return{center:P.unproject(q.add(J).div(2).sub(Rt)),zoom:wt,bearing:m}}fitBounds(i,u,m){return this._fitInternal(this.cameraForBounds(i,u),u,m)}fitScreenCoordinates(i,u,m,v,S){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(a.pointGeometry.convert(i)),this.transform.pointLocation(a.pointGeometry.convert(u)),m,v),v,S)}_fitInternal(i,u,m){return i?(delete(u=a.extend(i,u)).padding,u.linear?this.easeTo(u,m):this.flyTo(u,m)):this}jumpTo(i,u){this.stop();const m=this.transform;let v=!1,S=!1,P=!1;return"zoom"in i&&m.zoom!==+i.zoom&&(v=!0,m.zoom=+i.zoom),i.center!==void 0&&(m.center=a.LngLat.convert(i.center)),"bearing"in i&&m.bearing!==+i.bearing&&(S=!0,m.bearing=+i.bearing),"pitch"in i&&m.pitch!==+i.pitch&&(P=!0,m.pitch=+i.pitch),i.padding==null||m.isPaddingEqual(i.padding)||(m.padding=i.padding),this.fire(new a.Event("movestart",u)).fire(new a.Event("move",u)),v&&this.fire(new a.Event("zoomstart",u)).fire(new a.Event("zoom",u)).fire(new a.Event("zoomend",u)),S&&this.fire(new a.Event("rotatestart",u)).fire(new a.Event("rotate",u)).fire(new a.Event("rotateend",u)),P&&this.fire(new a.Event("pitchstart",u)).fire(new a.Event("pitch",u)).fire(new a.Event("pitchend",u)),this.fire(new a.Event("moveend",u))}calculateCameraOptionsFromTo(i,u,m,v=0){const S=a.MercatorCoordinate.fromLngLat(i,u),P=a.MercatorCoordinate.fromLngLat(m,v),z=P.x-S.x,q=P.y-S.y,J=P.z-S.z,ie=Math.hypot(z,q,J);if(ie===0)throw new Error("Can't calculate camera options with same From and To");const pe=Math.hypot(z,q),be=this.transform.scaleZoom(this.transform.cameraToCenterDistance/ie/this.transform.tileSize),Ve=180*Math.atan2(z,-q)/Math.PI;let Ne=180*Math.acos(pe/ie)/Math.PI;return Ne=J<0?90-Ne:90+Ne,{center:P.toLngLat(),zoom:be,pitch:Ne,bearing:Ve}}easeTo(i,u){this._stop(!1,i.easeId),((i=a.extend({offset:[0,0],duration:500,easing:a.ease},i)).animate===!1||!i.essential&&a.exported.prefersReducedMotion)&&(i.duration=0);const m=this.transform,v=this.getZoom(),S=this.getBearing(),P=this.getPitch(),z=this.getPadding(),q="zoom"in i?+i.zoom:v,J="bearing"in i?this._normalizeBearing(i.bearing,S):S,ie="pitch"in i?+i.pitch:P,pe="padding"in i?i.padding:m.padding,be=a.pointGeometry.convert(i.offset);let Ve=m.centerPoint.add(be);const Ne=m.pointLocation(Ve),He=a.LngLat.convert(i.center||Ne);this._normalizeCenter(He);const ct=m.project(Ne),wt=m.project(He).sub(ct),St=m.zoomScale(q-v);let We,Rt;i.around&&(We=a.LngLat.convert(i.around),Rt=m.locationPoint(We));const Qt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||q!==v,this._rotating=this._rotating||S!==J,this._pitching=this._pitching||ie!==P,this._padding=!m.isPaddingEqual(pe),this._easeId=i.easeId,this._prepareEase(u,i.noMoveStart,Qt),this._ease(Xt=>{if(this._zooming&&(m.zoom=a.number(v,q,Xt)),this._rotating&&(m.bearing=a.number(S,J,Xt)),this._pitching&&(m.pitch=a.number(P,ie,Xt)),this._padding&&(m.interpolatePadding(z,pe,Xt),Ve=m.centerPoint.add(be)),We)m.setLocationAtPoint(We,Rt);else{const Zt=m.zoomScale(m.zoom-v),ur=q>v?Math.min(2,St):Math.max(.5,St),qt=Math.pow(ur,1-Xt),Rr=m.unproject(ct.add(wt.mult(Xt*qt)).mult(Zt));m.setLocationAtPoint(m.renderWorldCopies?Rr.wrap():Rr,Ve)}this._fireMoveEvents(u)},Xt=>{this._afterEase(u,Xt)},i),this}_prepareEase(i,u,m={}){this._moving=!0,this.fire(new a.Event("freezeElevation",{freeze:!0})),u||m.moving||this.fire(new a.Event("movestart",i)),this._zooming&&!m.zooming&&this.fire(new a.Event("zoomstart",i)),this._rotating&&!m.rotating&&this.fire(new a.Event("rotatestart",i)),this._pitching&&!m.pitching&&this.fire(new a.Event("pitchstart",i))}_fireMoveEvents(i){this.fire(new a.Event("move",i)),this._zooming&&this.fire(new a.Event("zoom",i)),this._rotating&&this.fire(new a.Event("rotate",i)),this._pitching&&this.fire(new a.Event("pitch",i))}_afterEase(i,u){if(this._easeId&&u&&this._easeId===u)return;delete this._easeId,this.fire(new a.Event("freezeElevation",{freeze:!1}));const m=this._zooming,v=this._rotating,S=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,m&&this.fire(new a.Event("zoomend",i)),v&&this.fire(new a.Event("rotateend",i)),S&&this.fire(new a.Event("pitchend",i)),this.fire(new a.Event("moveend",i))}flyTo(i,u){if(!i.essential&&a.exported.prefersReducedMotion){const b=a.pick(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(b,u)}this.stop(),i=a.extend({offset:[0,0],speed:1.2,curve:1.42,easing:a.ease},i);const m=this.transform,v=this.getZoom(),S=this.getBearing(),P=this.getPitch(),z=this.getPadding(),q="zoom"in i?a.clamp(+i.zoom,m.minZoom,m.maxZoom):v,J="bearing"in i?this._normalizeBearing(i.bearing,S):S,ie="pitch"in i?+i.pitch:P,pe="padding"in i?i.padding:m.padding,be=m.zoomScale(q-v),Ve=a.pointGeometry.convert(i.offset);let Ne=m.centerPoint.add(Ve);const He=m.pointLocation(Ne),ct=a.LngLat.convert(i.center||He);this._normalizeCenter(ct);const wt=m.project(He),St=m.project(ct).sub(wt);let We=i.curve;const Rt=Math.max(m.width,m.height),Qt=Rt/be,Xt=St.mag();if("minZoom"in i){const b=a.clamp(Math.min(i.minZoom,v,q),m.minZoom,m.maxZoom),L=Rt/m.zoomScale(b-v);We=Math.sqrt(L/Xt*2)}const Zt=We*We;function ur(b){const L=(Qt*Qt-Rt*Rt+(b?-1:1)*Zt*Zt*Xt*Xt)/(2*(b?Qt:Rt)*Zt*Xt);return Math.log(Math.sqrt(L*L+1)-L)}function qt(b){return(Math.exp(b)-Math.exp(-b))/2}function Rr(b){return(Math.exp(b)+Math.exp(-b))/2}const Ur=ur(0);let qr=function(b){return Rr(Ur)/Rr(Ur+We*b)},Pn=function(b){return Rt*((Rr(Ur)*(qt(L=Ur+We*b)/Rr(L))-qt(Ur))/Zt)/Xt;var L},jn=(ur(1)-Ur)/We;if(Math.abs(Xt)<1e-6||!isFinite(jn)){if(Math.abs(Rt-Qt)<1e-6)return this.easeTo(i,u);const b=Qt<Rt?-1:1;jn=Math.abs(Math.log(Qt/Rt))/We,Pn=function(){return 0},qr=function(L){return Math.exp(b*We*L)}}return i.duration="duration"in i?+i.duration:1e3*jn/("screenSpeed"in i?+i.screenSpeed/We:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0),this._zooming=!0,this._rotating=S!==J,this._pitching=ie!==P,this._padding=!m.isPaddingEqual(pe),this._prepareEase(u,!1),this._ease(b=>{const L=b*jn,j=1/qr(L);m.zoom=b===1?q:v+m.scaleZoom(j),this._rotating&&(m.bearing=a.number(S,J,b)),this._pitching&&(m.pitch=a.number(P,ie,b)),this._padding&&(m.interpolatePadding(z,pe,b),Ne=m.centerPoint.add(Ve));const W=b===1?ct:m.unproject(wt.add(St.mult(Pn(L))).mult(j));m.setLocationAtPoint(m.renderWorldCopies?W.wrap():W,Ne),this._fireMoveEvents(u)},()=>this._afterEase(u),i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,u){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const m=this._onEaseEnd;delete this._onEaseEnd,m.call(this,u)}if(!i){const m=this.handlers;m&&m.stop(!1)}return this}_ease(i,u,m){m.animate===!1||m.duration===0?(i(1),u()):(this._easeStart=a.exported.now(),this._easeOptions=m,this._onEaseFrame=i,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const i=Math.min((a.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(i)),i<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(i,u){i=a.wrap(i,-180,180);const m=Math.abs(i-u);return Math.abs(i-360-u)<m&&(i-=360),Math.abs(i+360-u)<m&&(i+=360),i}_normalizeCenter(i){const u=this.transform;if(!u.renderWorldCopies||u.lngRange)return;const m=i.lng-u.center.lng;i.lng+=m>180?-360:m<-180?360:0}}class PA{constructor(i={}){this.options=i,a.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(i){return this._map=i,this._compact=this.options&&this.options.compact,this._container=w.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=w.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=w.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){w.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(i,u){const m=this._map._getUIString(`AttributionControl.${u}`);i.title=m,i.setAttribute("aria-label",m)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(i){!i||i.sourceDataType!=="metadata"&&i.sourceDataType!=="visibility"&&i.dataType!=="style"&&i.type!=="terrain"||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map(v=>typeof v!="string"?"":v)):typeof this.options.customAttribution=="string"&&i.push(this.options.customAttribution)),this._map.style.stylesheet){const v=this._map.style.stylesheet;this.styleOwner=v.owner,this.styleId=v.id}const u=this._map.style.sourceCaches;for(const v in u){const S=u[v];if(S.used||S.usedForTerrain){const P=S.getSource();P.attribution&&i.indexOf(P.attribution)<0&&i.push(P.attribution)}}i=i.filter(v=>String(v).trim()),i.sort((v,S)=>v.length-S.length),i=i.filter((v,S)=>{for(let P=S+1;P<i.length;P++)if(i[P].indexOf(v)>=0)return!1;return!0});const m=i.join(" | ");m!==this._attribHTML&&(this._attribHTML=m,i.length?(this._innerContainer.innerHTML=m,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class MA{constructor(i={}){this.options=i,a.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(i){this._map=i,this._compact=this.options&&this.options.compact,this._container=w.create("div","maplibregl-ctrl mapboxgl-ctrl");const u=w.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://maplibre.org/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){w.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const i=this._container.children;if(i.length){const u=i[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&u.classList.add("maplibregl-compact","mapboxgl-compact"):u.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class DA{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const u=++this._id;return this._queue.push({callback:i,id:u,cancelled:!1}),u}remove(i){const u=this._currentlyRunning,m=u?this._queue.concat(u):this._queue;for(const v of m)if(v.id===i)return void(v.cancelled=!0)}run(i=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const u=this._currentlyRunning=this._queue;this._queue=[];for(const m of u)if(!m.cancelled&&(m.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const Vc={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"},Kc={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},Gc={showCompass:!0,showZoom:!0,visualizePitch:!1};class wo{constructor(i,u,m=!1){this._clickTolerance=10,this.element=u,this.mouseRotate=new zi({clickTolerance:i.dragRotate._mouseRotate._clickTolerance}),this.map=i,m&&(this.mousePitch=new Pr({clickTolerance:i.dragRotate._mousePitch._clickTolerance})),a.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),w.addEventListener(u,"mousedown",this.mousedown),w.addEventListener(u,"touchstart",this.touchstart,{passive:!1}),w.addEventListener(u,"touchmove",this.touchmove),w.addEventListener(u,"touchend",this.touchend),w.addEventListener(u,"touchcancel",this.reset)}down(i,u){this.mouseRotate.mousedown(i,u),this.mousePitch&&this.mousePitch.mousedown(i,u),w.disableDrag()}move(i,u){const m=this.map,v=this.mouseRotate.mousemoveWindow(i,u);if(v&&v.bearingDelta&&m.setBearing(m.getBearing()+v.bearingDelta),this.mousePitch){const S=this.mousePitch.mousemoveWindow(i,u);S&&S.pitchDelta&&m.setPitch(m.getPitch()+S.pitchDelta)}}off(){const i=this.element;w.removeEventListener(i,"mousedown",this.mousedown),w.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),w.removeEventListener(i,"touchmove",this.touchmove),w.removeEventListener(i,"touchend",this.touchend),w.removeEventListener(i,"touchcancel",this.reset),this.offTemp()}offTemp(){w.enableDrag(),w.removeEventListener(window,"mousemove",this.mousemove),w.removeEventListener(window,"mouseup",this.mouseup)}mousedown(i){this.down(a.extend({},i,{ctrlKey:!0,preventDefault:()=>i.preventDefault()}),w.mousePos(this.element,i)),w.addEventListener(window,"mousemove",this.mousemove),w.addEventListener(window,"mouseup",this.mouseup)}mousemove(i){this.move(i,w.mousePos(this.element,i))}mouseup(i){this.mouseRotate.mouseupWindow(i),this.mousePitch&&this.mousePitch.mouseupWindow(i),this.offTemp()}touchstart(i){i.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=w.touchPos(this.element,i.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>i.preventDefault()},this._startPos))}touchmove(i){i.targetTouches.length!==1?this.reset():(this._lastPos=w.touchPos(this.element,i.targetTouches)[0],this.move({preventDefault:()=>i.preventDefault()},this._lastPos))}touchend(i){i.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function dA(g,i,u){if(g=new a.LngLat(g.lng,g.lat),i){const m=new a.LngLat(g.lng-360,g.lat),v=new a.LngLat(g.lng+360,g.lat),S=u.locationPoint(g).distSqr(i);u.locationPoint(m).distSqr(i)<S?g=m:u.locationPoint(v).distSqr(i)<S&&(g=v)}for(;Math.abs(g.lng-u.center.lng)>180;){const m=u.locationPoint(g);if(m.x>=0&&m.y>=0&&m.x<=u.width&&m.y<=u.height)break;g.lng>u.center.lng?g.lng-=360:g.lng+=360}return g}const sn={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function vn(g,i,u){const m=g.classList;for(const v in sn)m.remove(`maplibregl-${u}-anchor-${v}`,`mapboxgl-${u}-anchor-${v}`);m.add(`maplibregl-${u}-anchor-${i}`,`mapboxgl-${u}-anchor-${i}`)}class rl extends a.Evented{constructor(i,u){if(super(),(i instanceof HTMLElement||u)&&(i=a.extend({element:i},u)),a.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment!=="auto"?i.pitchAlignment:this._rotationAlignment,i&&i.element)this._element=i.element,this._offset=a.pointGeometry.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=w.create("div"),this._element.setAttribute("aria-label","Map marker");const m=w.createNS("http://www.w3.org/2000/svg","svg"),v=41,S=27;m.setAttributeNS(null,"display","block"),m.setAttributeNS(null,"height",`${v}px`),m.setAttributeNS(null,"width",`${S}px`),m.setAttributeNS(null,"viewBox",`0 0 ${S} ${v}`);const P=w.createNS("http://www.w3.org/2000/svg","g");P.setAttributeNS(null,"stroke","none"),P.setAttributeNS(null,"stroke-width","1"),P.setAttributeNS(null,"fill","none"),P.setAttributeNS(null,"fill-rule","evenodd");const z=w.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"fill-rule","nonzero");const q=w.createNS("http://www.w3.org/2000/svg","g");q.setAttributeNS(null,"transform","translate(3.0, 29.0)"),q.setAttributeNS(null,"fill","#000000");const J=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const St of J){const We=w.createNS("http://www.w3.org/2000/svg","ellipse");We.setAttributeNS(null,"opacity","0.04"),We.setAttributeNS(null,"cx","10.5"),We.setAttributeNS(null,"cy","5.80029008"),We.setAttributeNS(null,"rx",St.rx),We.setAttributeNS(null,"ry",St.ry),q.appendChild(We)}const ie=w.createNS("http://www.w3.org/2000/svg","g");ie.setAttributeNS(null,"fill",this._color);const pe=w.createNS("http://www.w3.org/2000/svg","path");pe.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),ie.appendChild(pe);const be=w.createNS("http://www.w3.org/2000/svg","g");be.setAttributeNS(null,"opacity","0.25"),be.setAttributeNS(null,"fill","#000000");const Ve=w.createNS("http://www.w3.org/2000/svg","path");Ve.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),be.appendChild(Ve);const Ne=w.createNS("http://www.w3.org/2000/svg","g");Ne.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Ne.setAttributeNS(null,"fill","#FFFFFF");const He=w.createNS("http://www.w3.org/2000/svg","g");He.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ct=w.createNS("http://www.w3.org/2000/svg","circle");ct.setAttributeNS(null,"fill","#000000"),ct.setAttributeNS(null,"opacity","0.25"),ct.setAttributeNS(null,"cx","5.5"),ct.setAttributeNS(null,"cy","5.5"),ct.setAttributeNS(null,"r","5.4999962");const wt=w.createNS("http://www.w3.org/2000/svg","circle");wt.setAttributeNS(null,"fill","#FFFFFF"),wt.setAttributeNS(null,"cx","5.5"),wt.setAttributeNS(null,"cy","5.5"),wt.setAttributeNS(null,"r","5.4999962"),He.appendChild(ct),He.appendChild(wt),z.appendChild(q),z.appendChild(ie),z.appendChild(be),z.appendChild(Ne),z.appendChild(He),m.appendChild(z),m.setAttributeNS(null,"height",v*this._scale+"px"),m.setAttributeNS(null,"width",S*this._scale+"px"),this._element.appendChild(m),this._offset=a.pointGeometry.convert(i&&i.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",m=>{m.preventDefault()}),this._element.addEventListener("mousedown",m=>{m.preventDefault()}),vn(this._element,this._anchor,"marker"),this._popup=null}addTo(i){return this.remove(),this._map=i,i.getCanvasContainer().appendChild(this._element),i.on("move",this._update),i.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),w.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=a.LngLat.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const v=Math.sqrt(Math.pow(13.5,2)/2);i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[v,-1*(38.1-13.5+v)],"bottom-right":[-v,-1*(38.1-13.5+v)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(i){const u=i.code,m=i.charCode||i.keyCode;u!=="Space"&&u!=="Enter"&&m!==32&&m!==13||this.togglePopup()}_onMapClick(i){const u=i.originalEvent.target,m=this._element;this._popup&&(u===m||m.contains(u))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const i=this._popup;return i?(i.isOpen()?i.remove():i.addTo(this._map),this):this}_update(i){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=dA(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let u="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?u=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(u=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let m="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?m="rotateX(0deg)":this._pitchAlignment==="map"&&(m=`rotateX(${this._map.getPitch()}deg)`),i&&i.type!=="moveend"||(this._pos=this._pos.round()),w.setTransform(this._element,`${sn[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${m} ${u}`),this._map.style&&this._map.style.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const v=this._map.unproject(this._pos),S=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=v.distanceTo(this._lngLat)>20*S?"0.2":"1.0",this._opacityTimeout=null},100))}getOffset(){return this._offset}setOffset(i){return this._offset=a.pointGeometry.convert(i),this._update(),this}_onMove(i){if(!this._isDragging){const u=this._clickTolerance||this._map._clickTolerance;this._isDragging=i.point.dist(this._pointerdownPos)>=u}this._isDragging&&(this._pos=i.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.Event("dragstart"))),this.fire(new a.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.Event("dragend")),this._state="inactive"}_addDragHandler(i){this._element.contains(i.originalEvent.target)&&(i.preventDefault(),this._positionDelta=i.point.sub(this._pos).add(this._offset),this._pointerdownPos=i.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&i!=="auto"?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const wl={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Sa,as=0,pA=!1;const bo={maxWidth:100,unit:"metric"};function bc(g,i,u){const m=u&&u.maxWidth||100,v=g._container.clientHeight/2,S=g.unproject([0,v]),P=g.unproject([m,v]),z=S.distanceTo(P);if(u&&u.unit==="imperial"){const q=3.2808*z;q>5280?mA(i,m,q/5280,g._getUIString("ScaleControl.Miles")):mA(i,m,q,g._getUIString("ScaleControl.Feet"))}else u&&u.unit==="nautical"?mA(i,m,z/1852,g._getUIString("ScaleControl.NauticalMiles")):z>=1e3?mA(i,m,z/1e3,g._getUIString("ScaleControl.Kilometers")):mA(i,m,z,g._getUIString("ScaleControl.Meters"))}function mA(g,i,u,m){const v=function(S){const P=Math.pow(10,`${Math.floor(S)}`.length-1);let z=S/P;return z=z>=10?10:z>=5?5:z>=3?3:z>=2?2:z>=1?1:function(q){const J=Math.pow(10,Math.ceil(-Math.log(q)/Math.LN10));return Math.round(q*J)/J}(z),P*z}(u);g.style.width=i*(v/u)+"px",g.innerHTML=`${v}&nbsp;${m}`}const Ji={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},ds=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function xc(g){if(g){if(typeof g=="number"){const i=Math.round(Math.sqrt(.5*Math.pow(g,2)));return{center:new a.pointGeometry(0,0),top:new a.pointGeometry(0,g),"top-left":new a.pointGeometry(i,i),"top-right":new a.pointGeometry(-i,i),bottom:new a.pointGeometry(0,-g),"bottom-left":new a.pointGeometry(i,-i),"bottom-right":new a.pointGeometry(-i,-i),left:new a.pointGeometry(g,0),right:new a.pointGeometry(-g,0)}}if(g instanceof a.pointGeometry||Array.isArray(g)){const i=a.pointGeometry.convert(g);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:a.pointGeometry.convert(g.center||[0,0]),top:a.pointGeometry.convert(g.top||[0,0]),"top-left":a.pointGeometry.convert(g["top-left"]||[0,0]),"top-right":a.pointGeometry.convert(g["top-right"]||[0,0]),bottom:a.pointGeometry.convert(g.bottom||[0,0]),"bottom-left":a.pointGeometry.convert(g["bottom-left"]||[0,0]),"bottom-right":a.pointGeometry.convert(g["bottom-right"]||[0,0]),left:a.pointGeometry.convert(g.left||[0,0]),right:a.pointGeometry.convert(g.right||[0,0])}}return xc(new a.pointGeometry(0,0))}const ha={supported:d,setRTLTextPlugin:a.setRTLTextPlugin,getRTLTextPluginStatus:a.getRTLTextPluginStatus,Map:class extends Ui{constructor(g){var i;if(a.PerformanceUtils.mark(a.PerformanceMarkers.create),(g=a.extend({},Kc,g)).minZoom!=null&&g.maxZoom!=null&&g.minZoom>g.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(g.minPitch!=null&&g.maxPitch!=null&&g.minPitch>g.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(g.minPitch!=null&&g.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(g.maxPitch!=null&&g.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new jo(g.minZoom,g.maxZoom,g.minPitch,g.maxPitch,g.renderWorldCopies),{bearingSnap:g.bearingSnap}),this._interactive=g.interactive,this._cooperativeGestures=g.cooperativeGestures,this._maxTileCacheSize=g.maxTileCacheSize,this._failIfMajorPerformanceCaveat=g.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=g.preserveDrawingBuffer,this._antialias=g.antialias,this._trackResize=g.trackResize,this._bearingSnap=g.bearingSnap,this._refreshExpiredTiles=g.refreshExpiredTiles,this._fadeDuration=g.fadeDuration,this._crossSourceCollisions=g.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=g.collectResourceTiming,this._renderTaskQueue=new DA,this._controls=[],this._mapId=a.uniqueId(),this._locale=a.extend({},Vc,g.locale),this._clickTolerance=g.clickTolerance,this._pixelRatio=(i=g.pixelRatio)!==null&&i!==void 0?i:devicePixelRatio,this._requestManager=new x(g.transformRequest),typeof g.container=="string"){if(this._container=document.getElementById(g.container),!this._container)throw new Error(`Container '${g.container}' not found.`)}else{if(!(g.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=g.container}if(g.maxBounds&&this.setMaxBounds(g.maxBounds),a.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),typeof window<"u"&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new kA(this,g),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=g.hash&&new Hi(typeof g.hash=="string"&&g.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:g.center,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch}),g.bounds&&(this.resize(),this.fitBounds(g.bounds,a.extend({},g.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=g.localIdeographFontFamily,g.style&&this.setStyle(g.style,{localIdeographFontFamily:g.localIdeographFontFamily}),g.attributionControl&&this.addControl(new PA({customAttribution:g.customAttribution})),g.maplibreLogo&&this.addControl(new MA,g.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",u=>{this._update(u.dataType==="style"),this.fire(new a.Event(`${u.dataType}data`,u))}),this.on("dataloading",u=>{this.fire(new a.Event(`${u.dataType}dataloading`,u))}),this.on("dataabort",u=>{this.fire(new a.Event("sourcedataabort",u))})}_getMapId(){return this._mapId}addControl(g,i){if(i===void 0&&(i=g.getDefaultPosition?g.getDefaultPosition():"top-right"),!g||!g.onAdd)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const u=g.onAdd(this);this._controls.push(g);const m=this._controlPositions[i];return i.indexOf("bottom")!==-1?m.insertBefore(u,m.firstChild):m.appendChild(u),this}removeControl(g){if(!g||!g.onRemove)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(g);return i>-1&&this._controls.splice(i,1),g.onRemove(this),this}hasControl(g){return this._controls.indexOf(g)>-1}calculateCameraOptionsFromTo(g,i,u,m){return m==null&&this.style.terrain&&(m=this.transform.getElevation(u,this.style.terrain)),super.calculateCameraOptionsFromTo(g,i,u,m)}resize(g){const i=this._containerDimensions(),u=i[0],m=i[1];this._resizeCanvas(u,m,this.getPixelRatio()),this.transform.resize(u,m),this.painter.resize(u,m,this.getPixelRatio());const v=!this._moving;return v&&(this.stop(),this.fire(new a.Event("movestart",g)).fire(new a.Event("move",g))),this.fire(new a.Event("resize",g)),v&&this.fire(new a.Event("moveend",g)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(g){const[i,u]=this._containerDimensions();this._pixelRatio=g,this._resizeCanvas(i,u,g),this.painter.resize(i,u,g)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(g){return this.transform.setMaxBounds(a.LngLatBounds.convert(g)),this._update()}setMinZoom(g){if((g=g??-2)>=-2&&g<=this.transform.maxZoom)return this.transform.minZoom=g,this._update(),this.getZoom()<g&&this.setZoom(g),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(g){if((g=g??22)>=this.transform.minZoom)return this.transform.maxZoom=g,this._update(),this.getZoom()>g&&this.setZoom(g),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(g){if((g=g??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(g>=0&&g<=this.transform.maxPitch)return this.transform.minPitch=g,this._update(),this.getPitch()<g&&this.setPitch(g),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(g){if((g=g??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(g>=this.transform.minPitch)return this.transform.maxPitch=g,this._update(),this.getPitch()>g&&this.setPitch(g),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(g){return this.transform.renderWorldCopies=g,this._update()}project(g){return this.transform.locationPoint(a.LngLat.convert(g),this.style&&this.style.terrain)}unproject(g){return this.transform.pointLocation(a.pointGeometry.convert(g),this.style&&this.style.terrain)}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(g,i,u){if(g==="mouseenter"||g==="mouseover"){let m=!1;return{layer:i,listener:u,delegates:{mousemove:S=>{const P=this.getLayer(i)?this.queryRenderedFeatures(S.point,{layers:[i]}):[];P.length?m||(m=!0,u.call(this,new ss(g,this,S.originalEvent,{features:P}))):m=!1},mouseout:()=>{m=!1}}}}if(g==="mouseleave"||g==="mouseout"){let m=!1;return{layer:i,listener:u,delegates:{mousemove:P=>{(this.getLayer(i)?this.queryRenderedFeatures(P.point,{layers:[i]}):[]).length?m=!0:m&&(m=!1,u.call(this,new ss(g,this,P.originalEvent)))},mouseout:P=>{m&&(m=!1,u.call(this,new ss(g,this,P.originalEvent)))}}}}{const m=v=>{const S=this.getLayer(i)?this.queryRenderedFeatures(v.point,{layers:[i]}):[];S.length&&(v.features=S,u.call(this,v),delete v.features)};return{layer:i,listener:u,delegates:{[g]:m}}}}on(g,i,u){if(u===void 0)return super.on(g,i);const m=this._createDelegatedListener(g,i,u);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[g]=this._delegatedListeners[g]||[],this._delegatedListeners[g].push(m);for(const v in m.delegates)this.on(v,m.delegates[v]);return this}once(g,i,u){if(u===void 0)return super.once(g,i);const m=this._createDelegatedListener(g,i,u);for(const v in m.delegates)this.once(v,m.delegates[v]);return this}off(g,i,u){return u===void 0?super.off(g,i):(this._delegatedListeners&&this._delegatedListeners[g]&&(m=>{const v=this._delegatedListeners[g];for(let S=0;S<v.length;S++){const P=v[S];if(P.layer===i&&P.listener===u){for(const z in P.delegates)this.off(z,P.delegates[z]);return v.splice(S,1),this}}})(),this)}queryRenderedFeatures(g,i){if(!this.style)return[];let u;if(i!==void 0||g===void 0||g instanceof a.pointGeometry||Array.isArray(g)||(i=g,g=void 0),i=i||{},(g=g||[[0,0],[this.transform.width,this.transform.height]])instanceof a.pointGeometry||typeof g[0]=="number")u=[a.pointGeometry.convert(g)];else{const m=a.pointGeometry.convert(g[0]),v=a.pointGeometry.convert(g[1]);u=[m,new a.pointGeometry(v.x,m.y),v,new a.pointGeometry(m.x,v.y),m]}return this.style.queryRenderedFeatures(u,i,this.transform)}querySourceFeatures(g,i){return this.style.querySourceFeatures(g,i)}setStyle(g,i){return(i=a.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&g?(this._diffStyle(g,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(g,i))}setTransformRequest(g){return this._requestManager.setTransformRequest(g),this}_getUIString(g){const i=this._locale[g];if(i==null)throw new Error(`Missing UI string '${g}'`);return i}_updateStyle(g,i){return this.style&&(this.style.setEventedParent(null),this.style._remove()),g?(this.style=new wi(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof g=="string"?this.style.loadURL(g):this.style.loadJSON(g),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new wi(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(g,i){if(typeof g=="string"){const u=this._requestManager.transformRequest(g,a.ResourceType.Style);a.getJSON(u,(m,v)=>{m?this.fire(new a.ErrorEvent(m)):v&&this._updateDiff(v,i)})}else typeof g=="object"&&this._updateDiff(g,i)}_updateDiff(g,i){try{this.style.setState(g)&&this._update(!0)}catch(u){a.warnOnce(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(g,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():a.warnOnce("There is no style added to the map.")}addSource(g,i){return this._lazyInitEmptyStyle(),this.style.addSource(g,i),this._update(!0)}isSourceLoaded(g){const i=this.style&&this.style.sourceCaches[g];if(i!==void 0)return i.loaded();this.fire(new a.ErrorEvent(new Error(`There is no source with ID '${g}'`)))}setTerrain(g){return this.style.setTerrain(g),this}getTerrain(){return this.style.terrain&&this.style.terrain.options}areTilesLoaded(){const g=this.style&&this.style.sourceCaches;for(const i in g){const u=g[i]._tiles;for(const m in u){const v=u[m];if(v.state!=="loaded"&&v.state!=="errored")return!1}}return!0}addSourceType(g,i,u){return this._lazyInitEmptyStyle(),this.style.addSourceType(g,i,u)}removeSource(g){return this.style.removeSource(g),this._update(!0)}getSource(g){return this.style.getSource(g)}addImage(g,i,{pixelRatio:u=1,sdf:m=!1,stretchX:v,stretchY:S,content:P}={}){if(this._lazyInitEmptyStyle(),i instanceof HTMLImageElement||a.isImageBitmap(i)){const{width:z,height:q,data:J}=a.exported.getImageData(i);this.style.addImage(g,{data:new a.RGBAImage({width:z,height:q},J),pixelRatio:u,stretchX:v,stretchY:S,content:P,sdf:m,version:0})}else{if(i.width===void 0||i.height===void 0)return this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:z,height:q,data:J}=i,ie=i;this.style.addImage(g,{data:new a.RGBAImage({width:z,height:q},new Uint8Array(J)),pixelRatio:u,stretchX:v,stretchY:S,content:P,sdf:m,version:0,userImage:ie}),ie.onAdd&&ie.onAdd(this,g)}}}updateImage(g,i){const u=this.style.getImage(g);if(!u)return this.fire(new a.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const m=i instanceof HTMLImageElement||a.isImageBitmap(i)?a.exported.getImageData(i):i,{width:v,height:S,data:P}=m;if(v===void 0||S===void 0)return this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(v!==u.data.width||S!==u.data.height)return this.fire(new a.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const z=!(i instanceof HTMLImageElement||a.isImageBitmap(i));u.data.replace(P,z),this.style.updateImage(g,u)}hasImage(g){return g?!!this.style.getImage(g):(this.fire(new a.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(g){this.style.removeImage(g)}loadImage(g,i){a.getImage(this._requestManager.transformRequest(g,a.ResourceType.Image),i)}listImages(){return this.style.listImages()}addLayer(g,i){return this._lazyInitEmptyStyle(),this.style.addLayer(g,i),this._update(!0)}moveLayer(g,i){return this.style.moveLayer(g,i),this._update(!0)}removeLayer(g){return this.style.removeLayer(g),this._update(!0)}getLayer(g){return this.style.getLayer(g)}setLayerZoomRange(g,i,u){return this.style.setLayerZoomRange(g,i,u),this._update(!0)}setFilter(g,i,u={}){return this.style.setFilter(g,i,u),this._update(!0)}getFilter(g){return this.style.getFilter(g)}setPaintProperty(g,i,u,m={}){return this.style.setPaintProperty(g,i,u,m),this._update(!0)}getPaintProperty(g,i){return this.style.getPaintProperty(g,i)}setLayoutProperty(g,i,u,m={}){return this.style.setLayoutProperty(g,i,u,m),this._update(!0)}getLayoutProperty(g,i){return this.style.getLayoutProperty(g,i)}setLight(g,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(g,i),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(g,i){return this.style.setFeatureState(g,i),this._update()}removeFeatureState(g,i){return this.style.removeFeatureState(g,i),this._update()}getFeatureState(g){return this.style.getFeatureState(g)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let g=0,i=0;return this._container&&(g=this._container.clientWidth||400,i=this._container.clientHeight||300),[g,i]}_setupContainer(){const g=this._container;g.classList.add("maplibregl-map","mapboxgl-map");const i=this._canvasContainer=w.create("div","maplibregl-canvas-container mapboxgl-canvas-container",g);this._interactive&&i.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=w.create("canvas","maplibregl-canvas mapboxgl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const u=this._containerDimensions();this._resizeCanvas(u[0],u[1],this.getPixelRatio());const m=this._controlContainer=w.create("div","maplibregl-control-container mapboxgl-control-container",g),v=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(S=>{v[S]=w.create("div",`maplibregl-ctrl-${S} mapboxgl-ctrl-${S}`,m)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){const g=this._container;this._metaPress=!1,this._cooperativeGesturesScreen=w.create("div","maplibregl-cooperative-gesture-screen",g);let i="Control",u=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(u=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use ⌘ + scroll to zoom the map",i="Meta"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${u}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,document.addEventListener("keydown",m=>{m.key===i&&(this._metaPress=!0)}),document.addEventListener("keyup",m=>{m.key===i&&(this._metaPress=!1)}),this._canvasContainer.addEventListener("wheel",m=>{this._onCooperativeGesture(m,this._metaPress,1)},!1),this._canvasContainer.classList.remove("mapboxgl-touch-drag-pan","maplibregl-touch-drag-pan")}_resizeCanvas(g,i,u){this._canvas.width=u*g,this._canvas.height=u*i,this._canvas.style.width=`${g}px`,this._canvas.style.height=`${i}px`}_setupPainter(){const g=a.extend({},d.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),i=this._canvas.getContext("webgl",g)||this._canvas.getContext("experimental-webgl",g);i?(this.painter=new uA(i,this.transform),a.exported$1.testSupport(i)):this.fire(new a.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(g){g.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new a.Event("webglcontextlost",{originalEvent:g}))}_contextRestored(g){this._setupPainter(),this.resize(),this._update(),this.fire(new a.Event("webglcontextrestored",{originalEvent:g}))}_onMapScroll(g){if(g.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}_onCooperativeGesture(g,i,u){return!i&&u<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(g){return this.style?(this._styleDirty=this._styleDirty||g,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(g){return this._update(),this._renderTaskQueue.add(g)}_cancelRenderFrame(g){this._renderTaskQueue.remove(g)}_render(g){let i,u=0;const m=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(i=m.createQueryEXT(),m.beginQueryEXT(m.TIME_ELAPSED_EXT,i),u=a.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(g),this._removed)return;let v=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const P=this.transform.zoom,z=a.exported.now();this.style.zoomHistory.update(P,z);const q=new a.EvaluationParameters(P,{now:z,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),J=q.crossFadingFactor();J===1&&J===this._crossFadingFactor||(v=!0,this._crossFadingFactor=J),this.style.update(q)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.style.terrain&&this.style.terrain.sourceCache.update(this.transform,this.style.terrain),this.transform.updateElevation(this.style.terrain),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new a.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.PerformanceUtils.mark(a.PerformanceMarkers.load),this.fire(new a.Event("load"))),this.style&&(this.style.hasTransitions()||v)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const P=a.exported.now()-u;m.endQueryEXT(m.TIME_ELAPSED_EXT,i),setTimeout(()=>{const z=m.getQueryObjectEXT(i,m.QUERY_RESULT_EXT)/1e6;m.deleteQueryEXT(i),this.fire(new a.Event("gpu-timing-frame",{cpuTime:P,gpuTime:z}))},50)}if(this.listens("gpu-timing-layer")){const P=this.painter.collectGpuTimers();setTimeout(()=>{const z=this.painter.queryGpuTimers(P);this.fire(new a.Event("gpu-timing-layer",{layerTimes:z}))},50)}const S=this._sourcesDirty||this._styleDirty||this._placementDirty;return S||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.Event("idle")),!this._loaded||this._fullyLoaded||S||(this._fullyLoaded=!0,a.PerformanceUtils.mark(a.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const i of this._controls)i.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const g=this.painter.context.gl.getExtension("WEBGL_lose_context");g&&g.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),w.remove(this._canvasContainer),w.remove(this._controlContainer),this._cooperativeGestures&&w.remove(this._cooperativeGesturesScreen),this._container.classList.remove("maplibregl-map","mapboxgl-map"),a.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new a.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=a.exported.frame(g=>{a.PerformanceUtils.frame(g),this._frame=null,this._render(g)}))}_onWindowOnline(){this._update()}_onWindowResize(g){this._trackResize&&this.resize({originalEvent:g})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(g){this._showTileBoundaries!==g&&(this._showTileBoundaries=g,this._update())}get showPadding(){return!!this._showPadding}set showPadding(g){this._showPadding!==g&&(this._showPadding=g,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(g){this._showCollisionBoxes!==g&&(this._showCollisionBoxes=g,g?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(g){this._showOverdrawInspector!==g&&(this._showOverdrawInspector=g,this._update())}get repaint(){return!!this._repaint}set repaint(g){this._repaint!==g&&(this._repaint=g,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(g){this._vertices=g,this._update()}_setCacheLimits(g,i){a.setCacheLimits(g,i)}get version(){return"2.4.0"}},NavigationControl:class{constructor(g){this.options=a.extend({},Gc,g),this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(a.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",i=>this._map.zoomIn({},{originalEvent:i})),w.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",i=>this._map.zoomOut({},{originalEvent:i})),w.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(a.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",i=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:i}):this._map.resetNorth({},{originalEvent:i})}),this._compassIcon=w.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const g=this._map.getZoom(),i=g===this._map.getMaxZoom(),u=g===this._map.getMinZoom();this._zoomInButton.disabled=i,this._zoomOutButton.disabled=u,this._zoomInButton.setAttribute("aria-disabled",i.toString()),this._zoomOutButton.setAttribute("aria-disabled",u.toString())}_rotateCompassArrow(){const g=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=g}onAdd(g){return this._map=g,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new wo(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){w.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(g,i){const u=w.create("button",g,this._container);return u.type="button",u.addEventListener("click",i),u}_setButtonTitle(g,i){const u=this._map._getUIString(`NavigationControl.${i}`);g.title=u,g.setAttribute("aria-label",u)}},GeolocateControl:class extends a.Evented{constructor(g){super(),this.options=a.extend({},wl,g),a.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(g){var i;return this._map=g,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),i=this._setupUI,Sa!==void 0?i(Sa):window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(u=>{Sa=u.state!=="denied",i(Sa)}):(Sa=!!window.navigator.geolocation,i(Sa)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),w.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,as=0,pA=!1}_isOutOfMapMaxBounds(g){const i=this._map.getMaxBounds(),u=g.coords;return i&&(u.longitude<i.getWest()||u.longitude>i.getEast()||u.latitude<i.getSouth()||u.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_onSuccess(g){if(this._map){if(this._isOutOfMapMaxBounds(g))return this._setErrorState(),this.fire(new a.Event("outofmaxbounds",g)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=g,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(g),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(g),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new a.Event("geolocate",g)),this._finish()}}_updateCamera(g){const i=new a.LngLat(g.coords.longitude,g.coords.latitude),u=g.coords.accuracy,m=this._map.getBearing(),v=a.extend({bearing:m},this.options.fitBoundsOptions);this._map.fitBounds(i.toBounds(u),v,{geolocateSource:!0})}_updateMarker(g){if(g){const i=new a.LngLat(g.coords.longitude,g.coords.latitude);this._accuracyCircleMarker.setLngLat(i).addTo(this._map),this._userLocationDotMarker.setLngLat(i).addTo(this._map),this._accuracy=g.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const g=this._map._container.clientHeight/2,i=this._map.unproject([0,g]),u=this._map.unproject([1,g]),m=i.distanceTo(u),v=Math.ceil(2*this._accuracy/m);this._circleElement.style.width=`${v}px`,this._circleElement.style.height=`${v}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(g){if(this._map){if(this.options.trackUserLocation)if(g.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(g.code===3&&pA)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new a.Event("error",g)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(g){if(this._container.addEventListener("contextmenu",i=>i.preventDefault()),this._geolocateButton=w.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),w.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",g===!1){a.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i)}else{const i=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=w.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new rl(this._dotElement),this._circleElement=w.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new rl({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",i=>{i.geolocateSource||this._watchState!=="ACTIVE_LOCK"||i.originalEvent&&i.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new a.Event("trackuserlocationend")))})}trigger(){if(!this._setup)return a.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":as--,pA=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new a.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let g;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),as++,as>1?(g={maximumAge:6e5,timeout:0},pA=!0):(g=this.options.positionOptions,pA=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,g)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:PA,LogoControl:MA,ScaleControl:class{constructor(g){this.options=a.extend({},bo,g),a.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){bc(this._map,this._container,this.options)}onAdd(g){return this._map=g,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",g.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){w.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(g){this.options.unit=g,bc(this._map,this._container,this.options)}},FullscreenControl:class{constructor(g){this._fullscreen=!1,g&&g.container&&(g.container instanceof HTMLElement?this._container=g.container:a.warnOnce("Full screen control 'container' must be a DOM element.")),a.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(g){return this._map=g,this._container||(this._container=this._map.getContainer()),this._controlContainer=w.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",a.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){w.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){const g=this._fullscreenButton=w.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);w.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",g).setAttribute("aria-hidden","true"),g.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const g=this._getTitle();this._fullscreenButton.setAttribute("aria-label",g),this._fullscreenButton.title=g}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},TerrainControl:class{constructor(g){this.options=g,a.bindAll(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(g){return this._map=g,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._terrainButton=w.create("button","maplibregl-ctrl-terrain mapboxgl-ctrl-terrain",this._container),w.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){w.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._map.style.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}},Popup:class extends a.Evented{constructor(g){super(),this.options=a.extend(Object.create(Ji),g),a.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(g){return this._map&&this.remove(),this._map=g,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new a.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&w.remove(this._content),this._container&&(w.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new a.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(g){return this._lngLat=a.LngLat.convert(g),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(g){return this.setDOMContent(document.createTextNode(g))}setHTML(g){const i=document.createDocumentFragment(),u=document.createElement("body");let m;for(u.innerHTML=g;m=u.firstChild,m;)i.appendChild(m);return this.setDOMContent(i)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(g){return this.options.maxWidth=g,this._update(),this}setDOMContent(g){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=w.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(g),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(g){this._container&&this._container.classList.add(g)}removeClassName(g){this._container&&this._container.classList.remove(g)}setOffset(g){return this.options.offset=g,this._update(),this}toggleClassName(g){if(this._container)return this._container.classList.toggle(g)}_createCloseButton(){this.options.closeButton&&(this._closeButton=w.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(g){this._update(g.point)}_onMouseMove(g){this._update(g.point)}_onDrag(g){this._update(g.point)}_update(g){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=w.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=w.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(S=>this._container.classList.add(S)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=dA(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!g))return;const i=this._pos=this._trackPointer&&g?g:this._map.project(this._lngLat);let u=this.options.anchor;const m=xc(this.options.offset);if(!u){const S=this._container.offsetWidth,P=this._container.offsetHeight;let z;z=i.y+m.bottom.y<P?["top"]:i.y>this._map.transform.height-P?["bottom"]:[],i.x<S/2?z.push("left"):i.x>this._map.transform.width-S/2&&z.push("right"),u=z.length===0?"bottom":z.join("-")}const v=i.add(m[u]).round();w.setTransform(this._container,`${sn[u]} translate(${v.x}px,${v.y}px)`),vn(this._container,u,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const g=this._container.querySelector(ds);g&&g.focus()}_onClose(){this.remove()}},Marker:rl,Style:wi,LngLat:a.LngLat,LngLatBounds:a.LngLatBounds,Point:a.pointGeometry,MercatorCoordinate:a.MercatorCoordinate,Evented:a.Evented,AJAXError:a.AJAXError,config:a.config,CanvasSource:Mt,GeoJSONSource:Qe,ImageSource:tt,RasterDEMTileSource:ge,RasterTileSource:me,VectorTileSource:Be,VideoSource:Oe,prewarm:function(){ze().acquire(ht)},clearPrewarmedResources:function(){const g=Lt;g&&(g.isPreloaded()&&g.numActive()===1?(g.release(ht),Lt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get version(){return"2.4.0"},get workerCount(){return Nt.workerCount},set workerCount(g){Nt.workerCount=g},get maxParallelImageRequests(){return a.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(g){a.config.MAX_PARALLEL_IMAGE_REQUESTS=g},clearStorage(g){a.clearTileCache(g)},workerUrl:"",addProtocol(g,i){a.config.REGISTERED_PROTOCOLS[g]=i},removeProtocol(g){delete a.config.REGISTERED_PROTOCOLS[g]}};return Fa.extend(ha,{isSafari:a.isSafari,getPerformanceMetrics:a.PerformanceUtils.getPerformanceMetrics}),ha});var h=l;return h})})(Bw);const zu=Xm;const{document:Cw}=Ky;function d0(e){let t;const r=e[18].default,s=wA(r,e,e[17],null);return{c(){s&&s.c()},m(l,c){s&&s.m(l,c),t=!0},p(l,c){s&&s.p&&(!t||c&131072)&&xA(s,r,l,l[17],t?bA(r,l[17],c,null):BA(l[17]),null)},i(l){t||(Pt(s,l),t=!0)},o(l){Gt(s,l),t=!1},d(l){s&&s.d(l)}}}function Ew(e){let t,r,s,l,c=e[2]&&d0(e);return{c(){t=kt("link"),r=$t(),s=kt("div"),c&&c.c(),ce(t,"rel","stylesheet"),ce(t,"href","https://unpkg.com/maplibre-gl@2.1.9/dist/maplibre-gl.css"),ce(s,"id",e[0]),ce(s,"class","map svelte-1wo1snc")},m(h,a){st(Cw.head,t),ot(h,r,a),ot(h,s,a),c&&c.m(s,null),e[19](s),l=!0},p(h,[a]){h[2]?c?(c.p(h,a),a&4&&Pt(c,1)):(c=d0(h),c.c(),Pt(c,1),c.m(s,null)):c&&(Lo(),Gt(c,1,1,()=>{c=null}),Qo()),(!l||a&1)&&ce(s,"id",h[0])},i(h){l||(Pt(c),l=!0)},o(h){Gt(c),l=!1},d(h){it(t),h&&it(r),h&&it(s),c&&c.d(),e[19](null)}}}function Fw(e=100){return new Promise(t=>setTimeout(t,e))}function Sw(e,t,r){let{$$slots:s={},$$scope:l}=t;const c=Yh();let{map:h}=t,{id:a="map"}=t,{location:d={lng:15,lat:45,zoom:1}}=t,{style:_={version:8,sources:{},layers:[{id:"background",type:"background",paint:{"background-color":"lightgrey"}}]}}=t,{options:p={}}=t,{minzoom:E=0}=t,{maxzoom:w=24}=t,{controls:x=!1}=t,{tabbable:k=!1}=t,{zoom:Q=null}=t,{center:R=null}=t,{pitch:M=null}=t,{bearing:O=null}=t,{interactive:G=!0}=t,{attribution:K=!0}=t,Z,$={},he=!1;Kh("map",{getMap:()=>h}),d.bounds?$.bounds=d.bounds:d.lng&&d.lat&&($.center=[+d.lng,+d.lat],d.zoom&&($.zoom=+d.zoom),d.pitch&&($.pitch=+d.pitch),d.bearing&&($.bearing=+d.bearing)),K||($.attributionControl=!1),$={...$,...p},Wa(()=>{r(3,h=new zu.Map({container:Z,style:_,minZoom:E,maxZoom:w,interactive:G,...$})),x&&!Array.isArray(x)?h.addControl(new zu.NavigationControl({showCompass:!1})):Array.isArray(x)&&x!=["locate"]&&h.addControl(new zu.NavigationControl({showCompass:x.includes("compass"),visualizePitch:x.includes("pitch")})),Array.isArray(x)&&x.includes("locate")&&h.addControl(new zu.GeolocateControl),h.addControl(new zu.FullscreenControl),h.on("load",ue=>{r(4,Q=h.getZoom()),r(5,R=h.getCenter()),r(6,M=h.getPitch()),r(7,O=h.getBearing()),r(2,he=!0),!k&&document.querySelector(`#${a} canvas`)&&(document.querySelector(`#${a} canvas`).tabIndex="-1"),c("load",{event:ue})}),h.loadImage("https://vera-insights-data-viz.s3.amazonaws.com/louisiana/diag.png",function(ue,ee){if(ue)throw ue;h.addImage("pattern",ee)}),h.on("moveend",()=>{r(4,Q=h.getZoom()),r(5,R=h.getCenter()),r(6,M=h.getPitch()),r(7,O=h.getBearing())})}),Qp(async()=>{await Fw(250),h&&h.remove(),r(3,h=null)});function fe(ue){h&&h.setStyle(ue),c("style",{style:ue})}function _e(ue){qa[ue?"unshift":"push"](()=>{Z=ue,r(1,Z)})}return e.$$set=ue=>{"map"in ue&&r(3,h=ue.map),"id"in ue&&r(0,a=ue.id),"location"in ue&&r(8,d=ue.location),"style"in ue&&r(9,_=ue.style),"options"in ue&&r(10,p=ue.options),"minzoom"in ue&&r(11,E=ue.minzoom),"maxzoom"in ue&&r(12,w=ue.maxzoom),"controls"in ue&&r(13,x=ue.controls),"tabbable"in ue&&r(14,k=ue.tabbable),"zoom"in ue&&r(4,Q=ue.zoom),"center"in ue&&r(5,R=ue.center),"pitch"in ue&&r(6,M=ue.pitch),"bearing"in ue&&r(7,O=ue.bearing),"interactive"in ue&&r(15,G=ue.interactive),"attribution"in ue&&r(16,K=ue.attribution),"$$scope"in ue&&r(17,l=ue.$$scope)},e.$$.update=()=>{e.$$.dirty&512&&fe(_)},[a,Z,he,h,Q,R,M,O,d,_,p,E,w,x,k,G,K,l,s,_e]}let Tg=class extends ai{constructor(t){super(),si(this,t,Sw,Ew,ri,{map:3,id:0,location:8,style:9,options:10,minzoom:11,maxzoom:12,controls:13,tabbable:14,zoom:4,center:5,pitch:6,bearing:7,interactive:15,attribution:16})}};function p0(e){let t;const r=e[12].default,s=wA(r,e,e[11],null);return{c(){s&&s.c()},m(l,c){s&&s.m(l,c),t=!0},p(l,c){s&&s.p&&(!t||c&2048)&&xA(s,r,l,l[11],t?bA(r,l[11],c,null):BA(l[11]),null)},i(l){t||(Pt(s,l),t=!0)},o(l){Gt(s,l),t=!1},d(l){s&&s.d(l)}}}function Iw(e){let t,r,s=e[0]&&p0(e);return{c(){s&&s.c(),t=tA()},m(l,c){s&&s.m(l,c),ot(l,t,c),r=!0},p(l,[c]){l[0]?s?(s.p(l,c),c&1&&Pt(s,1)):(s=p0(l),s.c(),Pt(s,1),s.m(t.parentNode,t)):s&&(Lo(),Gt(s,1,1,()=>{s=null}),Qo())},i(l){r||(Pt(s),r=!0)},o(l){Gt(s),r=!1},d(l){s&&s.d(l),l&&it(t)}}}function Tw(e=1e3){return new Promise(t=>setTimeout(t,e))}function Uw(e,t,r){let{$$slots:s={},$$scope:l}=t,{id:c}=t,{type:h}=t,{url:a=null}=t,{props:d={}}=t,{data:_=null}=t,{layer:p=null}=t,{promoteId:E=null}=t,{minzoom:w=null}=t,{maxzoom:x=null}=t,{tilesize:k=256}=t,Q=!1;const{getMap:R}=Yo("map"),M=R();Kh("source",{source:c,layer:p,promoteId:E}),M.getSource(c)&&M.removeSource(c);async function O(){await Tw(1e3),M.isSourceLoaded(c)?r(0,Q=!0):r(0,Q=!1)}w&&(d.minzoom=w),x&&(d.maxzoom=x),p&&E?(d.promoteId={},d.promoteId[p]=E):E&&(d.promoteId=E);function G(){let he;h=="geojson"?_?he={type:h,data:_,...d}:a&&(he={type:h,data:a,...d}):h=="vector"?he={type:h,tiles:[a],...d}:h=="raster"?he={type:h,tiles:[a],tileSize:k,...d}:h=="raster-dem"&&(he={type:h,tiles:[a],tileSize:k,...d}),he&&(M.addSource(c,he),O())}G();function K(he){let fe=M.getSource(c);fe&&fe.setData(he)}function Z(he){let fe=M.getSource(c);fe&&fe.setTiles([he])}function $(he){M.getSource(c).tiles=[he],M.style.sourceCaches[c].clearTiles(),M.style.sourceCaches[c].update(M.transform),M.triggerRepaint()}return Qp(async()=>{M&&M.getSource(c)&&(M.getStyle().layers.filter(fe=>fe.source==c).forEach(fe=>{M.removeLayer(fe.id)}),M.removeSource(c))}),e.$$set=he=>{"id"in he&&r(2,c=he.id),"type"in he&&r(3,h=he.type),"url"in he&&r(4,a=he.url),"props"in he&&r(1,d=he.props),"data"in he&&r(5,_=he.data),"layer"in he&&r(6,p=he.layer),"promoteId"in he&&r(7,E=he.promoteId),"minzoom"in he&&r(8,w=he.minzoom),"maxzoom"in he&&r(9,x=he.maxzoom),"tilesize"in he&&r(10,k=he.tilesize),"$$scope"in he&&r(11,l=he.$$scope)},e.$$.update=()=>{e.$$.dirty&41&&h=="geojson"&&Q&&K(_),e.$$.dirty&25&&h=="vector"&&Q&&Z(a),e.$$.dirty&25&&h=="raster"&&Q&&$(a)},[Q,d,c,h,a,_,p,E,w,x,k,l,s]}class KA extends ai{constructor(t){super(),si(this,t,Uw,Iw,ri,{id:2,type:3,url:4,props:1,data:5,layer:6,promoteId:7,minzoom:8,maxzoom:9,tilesize:10})}}const kh=[];function Lw(e,t){return{subscribe:ui(e,t).subscribe}}function ui(e,t=bn){let r;const s=new Set;function l(a){if(ri(e,a)&&(e=a,r)){const d=!kh.length;for(const _ of s)_[1](),kh.push(_,e);if(d){for(let _=0;_<kh.length;_+=2)kh[_][0](kh[_+1]);kh.length=0}}}function c(a){l(a(e))}function h(a,d=bn){const _=[a,d];return s.add(_),s.size===1&&(r=t(l)||bn),a(e),()=>{s.delete(_),s.size===0&&(r(),r=null)}}return{set:l,update:c,subscribe:h}}function Ms(e,t,r){const s=!Array.isArray(e),l=s?[e]:e,c=t.length<2;return Lw(r,h=>{let a=!1;const d=[];let _=0,p=bn;const E=()=>{if(_)return;p();const x=t(s?d[0]:d,h);c?h(x):p=Lp(x)?x:bn},w=l.map((x,k)=>Hy(x,Q=>{d[k]=Q,_&=~(1<<k),a&&E()},()=>{_|=1<<k}));return a=!0,E(),function(){eA(w),p()}})}const Qw=e=>({hovered:e[0]&1}),m0=e=>({hovered:e[0]});function kw(e){let t;const r=e[31].default,s=wA(r,e,e[30],m0);return{c(){s&&s.c()},m(l,c){s&&s.m(l,c),t=!0},p(l,c){s&&s.p&&(!t||c[0]&1073741825)&&xA(s,r,l,l[30],t?bA(r,l[30],c,Qw):BA(l[30]),m0)},i(l){t||(Pt(s,l),t=!0)},o(l){Gt(s,l),t=!1},d(l){s&&s.d(l)}}}function Pw(e,t,r){let s,{$$slots:l={},$$scope:c}=t;const h=Yh();let{id:a}=t,{type:d}=t,{filter:_=null}=t,{layout:p={}}=t,{paint:E={}}=t,{data:w=null}=t,{colorKey:x="color"}=t,{nameKey:k=null}=t,{outlineKey:Q="outline"}=t,{valueKey:R=null}=t,{idKey:M=null}=t,{select:O=!1}=t,{clickIgnore:G=!1}=t,{clickCenter:K=!1}=t,{selected:Z=null}=t,{hover:$=!1}=t,{hovered:he=null}=t,{highlight:fe=!1}=t,{highlightKey:_e="highlighted"}=t,{highlighted:ue=[]}=t,{order:ee=null}=t,{maxzoom:se=null}=t,{minzoom:Be=null}=t,{sourceLayer:me=null}=t,{visible:Pe=!0}=t;const{source:ge,layer:Qe,promoteId:Te}=Yo("source"),{getMap:tt}=Yo("map"),Oe=tt();Kh("layer",{layer:a});const Mt=ui({id:null,feature:null,event:null});$r(e,Mt,rt=>r(33,s=rt)),Kh("hover",Mt),M=M||Te,me=me||Qe;let ne=null,Se=null,ke=[];p.visibility=Pe?"visible":"none";let Ke={id:a,type:d,source:ge,paint:E,layout:p};_&&(Ke.filter=_),me&&(Ke["source-layer"]=me),se&&(Ke.maxzoom=se),Be&&(Ke.minzoom=Be),Oe.getLayer(a)&&Oe.removeLayer(a),Oe.addLayer(Ke,ee);function at(rt,Ut=x,ht=Q){if(k||R)for(const Nt of rt)Oe.setFeatureState({source:ge,sourceLayer:me,id:Nt[M]},{color:Ut?Nt[Ut]:null,name:k?Nt[k]:null,value:R?Nt[R]:null,outline:ht?Nt[ht]:null});else for(const Nt of rt)Oe.setFeatureState({source:ge,sourceLayer:me,id:Nt[M]},{color:Nt[Ut],outline:"pink"})}function dt(rt){Oe.getLayer(a)&&Oe.setFilter(a,rt)}function Bt(rt){if(Oe.getLayer(a))for(const Ut in rt)Oe.setPaintProperty(a,Ut,rt[Ut])}function Ge(rt){Oe.getLayer(a)&&Oe.setLayoutProperty(a,"visibility",rt?"visible":"none")}return O&&Oe.on("click",a,rt=>{if(rt.features.length>0&&!G){let Ut=rt.features[0];if(r(2,Z=Ut.id),h("select",{id:Z,feature:Ut,event:rt}),ne&&Oe.setFeatureState({source:ge,sourceLayer:me,id:ne},{selected:!1}),Oe.setFeatureState({source:ge,sourceLayer:me,id:Z},{selected:!0}),K){let ht=centroid(rt.features[0].toJSON().geometry);Oe.flyTo({center:ht.geometry.coordinates})}r(27,ne=Z)}}),$&&(Oe.on("mousemove",a,rt=>{if(rt.features.length>0){he&&Oe.setFeatureState({source:ge,sourceLayer:me,id:he},{hovered:!1});let Ut=rt.features[0];r(0,he=r(28,Se=Ut.id)),Mt.set({id:he,feature:Ut,event:rt}),h("hover",s),Oe.setFeatureState({source:ge,sourceLayer:me,id:he},{hovered:!0}),Oe.getCanvas().style.cursor="pointer"}}),Oe.on("mouseleave",a,rt=>{he&&Oe.setFeatureState({source:ge,sourceLayer:me,id:he},{hovered:!1}),r(0,he=r(28,Se=null)),Mt.set({id:null,feature:null,event:rt}),h("hover",s),Oe.getCanvas().style.cursor=""})),Qp(async()=>{Oe&&Oe.getLayer(a)&&Oe.removeLayer(a)}),e.$$set=rt=>{"id"in rt&&r(6,a=rt.id),"type"in rt&&r(7,d=rt.type),"filter"in rt&&r(8,_=rt.filter),"layout"in rt&&r(4,p=rt.layout),"paint"in rt&&r(9,E=rt.paint),"data"in rt&&r(10,w=rt.data),"colorKey"in rt&&r(11,x=rt.colorKey),"nameKey"in rt&&r(12,k=rt.nameKey),"outlineKey"in rt&&r(13,Q=rt.outlineKey),"valueKey"in rt&&r(14,R=rt.valueKey),"idKey"in rt&&r(5,M=rt.idKey),"select"in rt&&r(15,O=rt.select),"clickIgnore"in rt&&r(16,G=rt.clickIgnore),"clickCenter"in rt&&r(17,K=rt.clickCenter),"selected"in rt&&r(2,Z=rt.selected),"hover"in rt&&r(18,$=rt.hover),"hovered"in rt&&r(0,he=rt.hovered),"highlight"in rt&&r(19,fe=rt.highlight),"highlightKey"in rt&&r(20,_e=rt.highlightKey),"highlighted"in rt&&r(21,ue=rt.highlighted),"order"in rt&&r(22,ee=rt.order),"maxzoom"in rt&&r(23,se=rt.maxzoom),"minzoom"in rt&&r(24,Be=rt.minzoom),"sourceLayer"in rt&&r(3,me=rt.sourceLayer),"visible"in rt&&r(25,Pe=rt.visible),"$$scope"in rt&&r(30,c=rt.$$scope)},e.$$.update=()=>{if(e.$$.dirty[0]&11264&&w&&at(w,x,Q),e.$$.dirty[0]&256&&dt(_),e.$$.dirty[0]&512&&Bt(E),e.$$.dirty[0]&33554432&&Ge(Pe),e.$$.dirty[0]&540540936&&fe&&ue!=ke){if(ke[0])for(const rt of ke){let Ut={};Ut[_e]=!1,Oe.setFeatureState({source:ge,sourceLayer:me,id:rt},Ut)}if(r(29,ke=ue),ue[0])for(const rt of ue){let Ut={};Ut[_e]=!0,Oe.setFeatureState({source:ge,sourceLayer:me,id:rt},Ut)}}e.$$.dirty[0]&134250508&&O&&Z!=ne&&(ne&&Oe.setFeatureState({source:ge,sourceLayer:me,id:ne},{selected:!1}),Z&&Oe.setFeatureState({source:ge,sourceLayer:me,id:Z},{selected:!0}),r(27,ne=Z)),e.$$.dirty[0]&268697609&&$&&he!=Se&&(Se&&Oe.setFeatureState({source:ge,sourceLayer:me,id:Se},{hovered:!1}),he&&Oe.setFeatureState({source:ge,sourceLayer:me,id:he},{hovered:!0}),r(28,Se=he))},[he,Mt,Z,me,p,M,a,d,_,E,w,x,k,Q,R,O,G,K,$,fe,_e,ue,ee,se,Be,Pe,at,ne,Se,ke,c,l]}class ko extends ai{constructor(t){super(),si(this,t,Pw,kw,ri,{id:6,type:7,filter:8,layout:4,paint:9,data:10,colorKey:11,nameKey:12,outlineKey:13,valueKey:14,idKey:5,select:15,clickIgnore:16,clickCenter:17,selected:2,hover:18,hovered:0,highlight:19,highlightKey:20,highlighted:21,order:22,maxzoom:23,minzoom:24,sourceLayer:3,visible:25,updateColors:26},null,[-1,-1])}get updateColors(){return this.$$.ctx[26]}}function Mw(e,t,r){let s,{content:l}=t;const c=new zu.Popup({closeButton:!1,closeOnClick:!1}),{getMap:h}=Yo("map"),a=h(),d=Yo("hover");$r(e,d,p=>r(2,s=p));function _(p,E){p.id?c.setLngLat(p.event.lngLat).setHTML(E||p.code).addTo(a):c.remove()}return Qp(()=>c.remove()),e.$$set=p=>{"content"in p&&r(1,l=p.content)},e.$$.update=()=>{e.$$.dirty&6&&_(s,l)},[d,l,s]}class Dw extends ai{constructor(t){super(),si(this,t,Mw,null,ri,{content:1})}}function Nw(e){let t,r,s;return{c(){t=kt("div"),t.innerHTML=`<div id="facility_size"><div class="circlelabels svelte-j3bpv"><p class="fac-size svelte-j3bpv">Facility Size</p> 
          <ul class="svelte-j3bpv"><li class="svelte-j3bpv">More than 5,000 beds</li> 
            <li class="svelte-j3bpv">1,000 - 5,000 beds</li> 
            <li class="svelte-j3bpv">Fewer than 1,000 beds</li></ul></div> 
        <svg class="legendcircles svelte-j3bpv"><line x1="50" y1="111" x2="100" y2="103" stroke="#666" stroke-width="1px"></line><line x1="50" y1="119" x2="100" y2="119" stroke="#666" stroke-width="1px"></line><line x1="50" y1="126" x2="100" y2="133" stroke="#666" stroke-width="1px"></line><circle cx="50" cy="131" r="5" fill="none" stroke="#000" stroke-width="1px"></circle><circle cx="50" cy="128" r="9" fill="none" stroke="#000" stroke-width="1px"></circle><circle cx="50" cy="124" r="13" fill="none" stroke="#000" stroke-width="1px"></circle></svg></div>`,r=$t(),s=kt("div"),s.innerHTML=`<div id="facility_size"><h4 class="facilities svelte-j3bpv">Facility Size</h4> 
        <div class="leg-item svelte-j3bpv"><div class="circsymb circlethree svelte-j3bpv"></div> 
          <div class="leg-text three svelte-j3bpv">More than 5,000 beds</div></div> 
        <div class="leg-item two svelte-j3bpv"><div class="circsymb circletwo svelte-j3bpv"></div> 
          <div class="leg-text two svelte-j3bpv">1,000 - 5,000 beds</div></div> 
        <div class="leg-item one svelte-j3bpv"><div class="circsymb circleone svelte-j3bpv"></div> 
          <div class="leg-text one svelte-j3bpv">Fewer than 1,000 beds</div></div></div>`,ce(t,"class","mobile svelte-j3bpv"),ce(s,"class","nonmobile svelte-j3bpv")},m(l,c){ot(l,t,c),ot(l,r,c),ot(l,s,c)},d(l){l&&it(t),l&&it(r),l&&it(s)}}}function jw(e){let t;return{c(){t=kt("div"),t.innerHTML=`<div class="nonmobile svelte-j3bpv"><div id="facility_size"><h4 class="facilities svelte-j3bpv">Facility Size</h4> 
          <div class="leg-item svelte-j3bpv"><div class="circsymb circlethree svelte-j3bpv"></div> 
            <div class="leg-text three svelte-j3bpv">More than 5,000 beds</div></div> 
          <div class="leg-item two svelte-j3bpv"><div class="circsymb circletwo svelte-j3bpv"></div> 
            <div class="leg-text two svelte-j3bpv">1,000 - 5,000 beds</div></div> 
          <div class="leg-item one svelte-j3bpv"><div class="circsymb circleone svelte-j3bpv"></div> 
            <div class="leg-text one svelte-j3bpv">Fewer than 1,000 beds</div></div></div></div> 
      <div id="pretrial_rate" class="svelte-j3bpv"><h4 class="choro svelte-j3bpv">Pretrial Detention Rate (2021)</h4> 
        <div id="colors" class="svelte-j3bpv"><div class="citem svelte-j3bpv"><div class="color a svelte-j3bpv"></div> 
            <div class="rank svelte-j3bpv">Below U.S. Avg.</div> 
            <div class="title svelte-j3bpv">(0-12 per 10k)</div></div> 
          <div class="citem svelte-j3bpv"><div class="color b svelte-j3bpv"></div> 
            <div class="rank svelte-j3bpv">Above U.S. Avg.</div> 
            <div class="title svelte-j3bpv">(12 – 25 per 10k)</div></div> 
          <div class="citem svelte-j3bpv"><div class="color c svelte-j3bpv"></div> 
            <div class="rank svelte-j3bpv">More than twice U.S. Avg.</div> 
            <div class="title svelte-j3bpv">(25+ per 10k)</div></div></div></div>`,ce(t,"id","multi-legend"),ce(t,"class","svelte-j3bpv")},m(r,s){ot(r,t,s)},d(r){r&&it(t)}}}function Rw(e){let t;return{c(){t=kt("div"),t.innerHTML=`<div class="nonmobile svelte-j3bpv"><div id="facility_size"><h4 class="facilities svelte-j3bpv">Facility Size</h4> 
          <div class="leg-item svelte-j3bpv"><div class="circsymb circlethree svelte-j3bpv"></div> 
            <div class="leg-text three svelte-j3bpv">More than 5,000 beds</div></div> 
          <div class="leg-item two svelte-j3bpv"><div class="circsymb circletwo svelte-j3bpv"></div> 
            <div class="leg-text two svelte-j3bpv">1,000 - 5,000 beds</div></div> 
          <div class="leg-item one svelte-j3bpv"><div class="circsymb circleone svelte-j3bpv"></div> 
            <div class="leg-text one svelte-j3bpv">Fewer than 1,000 beds</div></div></div></div> 
      <div id="type-legend" class="svelte-j3bpv"><div class="item svelte-j3bpv"><div class="swatch hold svelte-j3bpv"></div>
          Holding Cell</div> 
        <div class="item svelte-j3bpv"><div class="swatch jail svelte-j3bpv"></div>
          Jail</div> 
        <div class="item svelte-j3bpv"><div class="swatch juvenile svelte-j3bpv"></div>
          Juvenile Facility</div> 
        <div class="item svelte-j3bpv"><div class="swatch prison svelte-j3bpv"></div>
          Prison</div> 
        <div class="item svelte-j3bpv"><div class="swatch twp svelte-j3bpv"></div>
          TWP Facility</div></div>`,ce(t,"id","multi-legend"),ce(t,"class","svelte-j3bpv")},m(r,s){ot(r,t,s)},d(r){r&&it(t)}}}function Ow(e){let t,r,s;return{c(){t=kt("div"),t.innerHTML=`<div id="facility_size"><h4 class="facilities svelte-j3bpv">Facility Size</h4> 
        <div class="leg-item svelte-j3bpv"><div class="circsymb circlethree svelte-j3bpv"></div> 
          <div class="leg-text three svelte-j3bpv">More than 5,000 beds</div></div> 
        <div class="leg-item two svelte-j3bpv"><div class="circsymb circletwo svelte-j3bpv"></div> 
          <div class="leg-text two svelte-j3bpv">1,000 - 5,000 beds</div></div> 
        <div class="leg-item one svelte-j3bpv"><div class="circsymb circleone svelte-j3bpv"></div> 
          <div class="leg-text one svelte-j3bpv">Fewer than 1,000 beds</div></div></div>`,r=$t(),s=kt("div"),s.innerHTML=`<div class="item svelte-j3bpv"><div class="color square d svelte-j3bpv"></div> 
        <div class="title svelte-j3bpv">Louisiana plantations circa 1853</div></div>`,ce(t,"class","nonmobile svelte-j3bpv"),ce(s,"class","plantations-legend svelte-j3bpv")},m(l,c){ot(l,t,c),ot(l,r,c),ot(l,s,c)},d(l){l&&it(t),l&&it(r),l&&it(s)}}}function Hw(e){let t;return{c(){t=kt("div")},m(r,s){ot(r,t,s)},d(r){r&&it(t)}}}function zw(e){let t;return{c(){t=kt("div"),t.textContent="$: Estimated 2021 revenue brought into local jails from DOC",ce(t,"class","financial svelte-j3bpv")},m(r,s){ot(r,t,s)},d(r){r&&it(t)}}}function Vw(e){let t;return{c(){t=kt("div"),ce(t,"id","facility_size")},m(r,s){ot(r,t,s)},d(r){r&&it(t)}}}function Kw(e){let t;return{c(){t=kt("div"),t.innerHTML=`<h4 class="choro svelte-j3bpv">Pretrial Detention Rate (2021)</h4> 
      <div id="colors" class="svelte-j3bpv"><div class="citem svelte-j3bpv"><div class="color a svelte-j3bpv"></div> 
          <div class="rank svelte-j3bpv">Below U.S. Avg.</div> 
          <div class="title svelte-j3bpv">(0-12 per 10k)</div></div> 
        <div class="citem svelte-j3bpv"><div class="color b svelte-j3bpv"></div> 
          <div class="rank svelte-j3bpv">Above U.S. Avg.</div> 
          <div class="title svelte-j3bpv">(12 – 25 per 10k)</div></div> 
        <div class="citem svelte-j3bpv"><div class="color c svelte-j3bpv"></div> 
          <div class="rank svelte-j3bpv">More than twice U.S. Avg.</div> 
          <div class="title svelte-j3bpv">(25+ per 10k)</div></div></div>`,ce(t,"id","pretrial_rate"),ce(t,"class","svelte-j3bpv")},m(r,s){ot(r,t,s)},d(r){r&&it(t)}}}function Gw(e){let t,r,s;return{c(){t=kt("h4"),t.textContent="Prison Admission Rate (2021)",r=$t(),s=kt("div"),s.innerHTML=`<div class="citem svelte-j3bpv"><div class="color a svelte-j3bpv"></div> 
        <div class="rank svelte-j3bpv">Below U.S. Avg.</div> 
        <div class="title svelte-j3bpv">(0-13 per 10k)</div></div> 
      <div class="citem svelte-j3bpv"><div class="color b svelte-j3bpv"></div> 
        <div class="rank svelte-j3bpv">Above U.S. Avg.</div> 
        <div class="title svelte-j3bpv">(13 – 26 per 10k)</div></div> 
      <div class="citem svelte-j3bpv"><div class="color c svelte-j3bpv"></div> 
        <div class="rank svelte-j3bpv">More than twice U.S. Avg.</div> 
        <div class="title svelte-j3bpv">(26+ per 10k)</div></div>`,ce(t,"class","choro svelte-j3bpv"),ce(s,"id","colors"),ce(s,"class","svelte-j3bpv")},m(l,c){ot(l,t,c),ot(l,r,c),ot(l,s,c)},d(l){l&&it(t),l&&it(r),l&&it(s)}}}function qw(e){let t;function r(c,h){return c[0]=="map01"?Gw:c[0]=="map02"?Kw:c[0]=="map04"||c[0]=="map05"?Vw:c[0]=="map08"?zw:c[0]=="map12"?Hw:c[0]=="map13"?Ow:c[0]=="map14"?Rw:c[0]=="map15"?jw:Nw}let s=r(e),l=s(e);return{c(){t=kt("div"),l.c(),ce(t,"id","legend"),ce(t,"class","svelte-j3bpv")},m(c,h){ot(c,t,h),l.m(t,null)},p(c,[h]){s!==(s=r(c))&&(l.d(1),l=s(c),l&&(l.c(),l.m(t,null)))},i:bn,o:bn,d(c){c&&it(t),l.d()}}}function Ww(e,t,r){let{lo:s}=t;return e.$$set=l=>{"lo"in l&&r(0,s=l.lo)},[s]}class Xw extends ai{constructor(t){super(),si(this,t,Ww,qw,ri,{lo:0})}}function Zw(e){let t,r,s,l,c,h,a,d,_,p,E;return{c(){t=kt("h2"),t.textContent="Acknowledgments",r=$t(),s=kt("p"),s.textContent=`Vera would like to thank Families and Friends of Louisiana’s Incarcerated
  Children, Power Coalition for Equity and Justice, and Voice of the Experienced
  for sharing their advice, guidance, and time throughout the process of
  creating this tool.`,l=$t(),c=kt("p"),c.textContent=`Vera would like to thank the following colleagues for their support in
  providing research and invaluable advice: Connor Burruss, Sarah Omojola, Josh
  Pichon, Kimberly Dickerson, Jacob Kang-Brown, Nina Siulc, and Karen Ball.`,h=$t(),a=kt("p"),a.textContent=`Vera would like to thank the Ford Foundation, the Foundation for Louisiana,
  and the Huey and Angelina Wilson Foundation for their generous financial
  contributions that helped make this project possible.`,d=$t(),_=kt("h2"),_.textContent="Credits",p=$t(),E=kt("ul"),E.innerHTML=`<li>Design and development: Jill Hubley and Hao Lun Hung</li> 
  <li>Data analysis: Selina Ho, Sara Lanclos, and Christian Henrichson</li> 
  <li>Writing: Sam Raim, Will Snowden, Kim Mosby, PhD, and Christian Henrichson</li> 
  <li>Editing: Léon Digard</li>`,ce(E,"class","svelte-6fbqw6")},m(w,x){ot(w,t,x),ot(w,r,x),ot(w,s,x),ot(w,l,x),ot(w,c,x),ot(w,h,x),ot(w,a,x),ot(w,d,x),ot(w,_,x),ot(w,p,x),ot(w,E,x)},p:bn,i:bn,o:bn,d(w){w&&it(t),w&&it(r),w&&it(s),w&&it(l),w&&it(c),w&&it(h),w&&it(a),w&&it(d),w&&it(_),w&&it(p),w&&it(E)}}}class Jw extends ai{constructor(t){super(),si(this,t,null,Zw,ri,{})}}function Ap(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Yw(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function av(e){let t,r,s;e.length!==2?(t=Ap,r=(a,d)=>Ap(e(a),d),s=(a,d)=>e(a)-d):(t=e===Ap||e===Yw?e:$w,r=e,s=e);function l(a,d,_=0,p=a.length){if(_<p){if(t(d,d)!==0)return p;do{const E=_+p>>>1;r(a[E],d)<0?_=E+1:p=E}while(_<p)}return _}function c(a,d,_=0,p=a.length){if(_<p){if(t(d,d)!==0)return p;do{const E=_+p>>>1;r(a[E],d)<=0?_=E+1:p=E}while(_<p)}return _}function h(a,d,_=0,p=a.length){const E=l(a,d,_,p-1);return E>_&&s(a[E-1],d)>-s(a[E],d)?E-1:E}return{left:l,center:h,right:c}}function $w(){return 0}function e2(e){return e===null?NaN:+e}const t2=av(Ap),r2=t2.right;av(e2).center;const n2=r2;class Zm extends Map{constructor(t,r=a2){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[s,l]of t)this.set(s,l)}get(t){return super.get(g0(this,t))}has(t){return super.has(g0(this,t))}set(t,r){return super.set(i2(this,t),r)}delete(t){return super.delete(s2(this,t))}}function g0({_intern:e,_key:t},r){const s=t(r);return e.has(s)?e.get(s):r}function i2({_intern:e,_key:t},r){const s=t(r);return e.has(s)?e.get(s):(e.set(s,r),r)}function s2({_intern:e,_key:t},r){const s=t(r);return e.has(s)&&(r=e.get(s),e.delete(s)),r}function a2(e){return e!==null&&typeof e=="object"?e.valueOf():e}function mp(e){return e}function o2(e,...t){return Ug(e,mp,mp,t)}function A2(e,...t){return Ug(e,Array.from,mp,t)}function l2(e,t){for(let r=1,s=t.length;r<s;++r)e=e.flatMap(l=>l.pop().map(([c,h])=>[...l,c,h]));return e}function c2(e,...t){return l2(A2(e,...t),t)}function u2(e,t,...r){return Ug(e,mp,t,r)}function Ug(e,t,r,s){return function l(c,h){if(h>=s.length)return r(c);const a=new Zm,d=s[h++];let _=-1;for(const p of c){const E=d(p,++_,c),w=a.get(E);w?w.push(p):a.set(E,[p])}for(const[p,E]of a)a.set(p,l(E,h));return t(a)}(e,0)}var Jm=Math.sqrt(50),Ym=Math.sqrt(10),$m=Math.sqrt(2);function h2(e,t,r){var s,l=-1,c,h,a;if(t=+t,e=+e,r=+r,e===t&&r>0)return[e];if((s=t<e)&&(c=e,e=t,t=c),(a=ov(e,t,r))===0||!isFinite(a))return[];if(a>0){let d=Math.round(e/a),_=Math.round(t/a);for(d*a<e&&++d,_*a>t&&--_,h=new Array(c=_-d+1);++l<c;)h[l]=(d+l)*a}else{a=-a;let d=Math.round(e*a),_=Math.round(t*a);for(d/a<e&&++d,_/a>t&&--_,h=new Array(c=_-d+1);++l<c;)h[l]=(d+l)/a}return s&&h.reverse(),h}function ov(e,t,r){var s=(t-e)/Math.max(0,r),l=Math.floor(Math.log(s)/Math.LN10),c=s/Math.pow(10,l);return l>=0?(c>=Jm?10:c>=Ym?5:c>=$m?2:1)*Math.pow(10,l):-Math.pow(10,-l)/(c>=Jm?10:c>=Ym?5:c>=$m?2:1)}function f2(e,t,r){var s=Math.abs(t-e)/Math.max(0,r),l=Math.pow(10,Math.floor(Math.log(s)/Math.LN10)),c=s/l;return c>=Jm?l*=10:c>=Ym?l*=5:c>=$m&&(l*=2),t<e?-l:l}function Wf(e,t){let r;if(t===void 0)for(const s of e)s!=null&&(r<s||r===void 0&&s>=s)&&(r=s);else{let s=-1;for(let l of e)(l=t(l,++s,e))!=null&&(r<l||r===void 0&&l>=l)&&(r=l)}return r}function d2(e,t,r){e=+e,t=+t,r=(l=arguments.length)<2?(t=e,e=0,1):l<3?1:+r;for(var s=-1,l=Math.max(0,Math.ceil((t-e)/r))|0,c=new Array(l);++s<l;)c[s]=e+s*r;return c}function p2(e,t){let r=0;if(t===void 0)for(let s of e)(s=+s)&&(r+=s);else{let s=-1;for(let l of e)(l=+t(l,++s,e))&&(r+=l)}return r}function m2(e){return e}var Bm=1,Cm=2,eg=3,Gd=4,y0=1e-6;function g2(e){return"translate("+e+",0)"}function y2(e){return"translate(0,"+e+")"}function v2(e){return t=>+e(t)}function _2(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),r=>+e(r)+t}function w2(){return!this.__axis}function b2(e,t){var r=[],s=null,l=null,c=6,h=6,a=3,d=typeof window<"u"&&window.devicePixelRatio>1?0:.5,_=e===Bm||e===Gd?-1:1,p=e===Gd||e===Cm?"x":"y",E=e===Bm||e===eg?g2:y2;function w(x){var k=s??(t.ticks?t.ticks.apply(t,r):t.domain()),Q=l??(t.tickFormat?t.tickFormat.apply(t,r):m2),R=Math.max(c,0)+a,M=t.range(),O=+M[0]+d,G=+M[M.length-1]+d,K=(t.bandwidth?_2:v2)(t.copy(),d),Z=x.selection?x.selection():x,$=Z.selectAll(".domain").data([null]),he=Z.selectAll(".tick").data(k,t).order(),fe=he.exit(),_e=he.enter().append("g").attr("class","tick"),ue=he.select("line"),ee=he.select("text");$=$.merge($.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),he=he.merge(_e),ue=ue.merge(_e.append("line").attr("stroke","currentColor").attr(p+"2",_*c)),ee=ee.merge(_e.append("text").attr("fill","currentColor").attr(p,_*R).attr("dy",e===Bm?"0em":e===eg?"0.71em":"0.32em")),x!==Z&&($=$.transition(x),he=he.transition(x),ue=ue.transition(x),ee=ee.transition(x),fe=fe.transition(x).attr("opacity",y0).attr("transform",function(se){return isFinite(se=K(se))?E(se+d):this.getAttribute("transform")}),_e.attr("opacity",y0).attr("transform",function(se){var Be=this.parentNode.__axis;return E((Be&&isFinite(Be=Be(se))?Be:K(se))+d)})),fe.remove(),$.attr("d",e===Gd||e===Cm?h?"M"+_*h+","+O+"H"+d+"V"+G+"H"+_*h:"M"+d+","+O+"V"+G:h?"M"+O+","+_*h+"V"+d+"H"+G+"V"+_*h:"M"+O+","+d+"H"+G),he.attr("opacity",1).attr("transform",function(se){return E(K(se)+d)}),ue.attr(p+"2",_*c),ee.attr(p,_*R).text(Q),Z.filter(w2).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===Cm?"start":e===Gd?"end":"middle"),Z.each(function(){this.__axis=K})}return w.scale=function(x){return arguments.length?(t=x,w):t},w.ticks=function(){return r=Array.from(arguments),w},w.tickArguments=function(x){return arguments.length?(r=x==null?[]:Array.from(x),w):r.slice()},w.tickValues=function(x){return arguments.length?(s=x==null?null:Array.from(x),w):s&&s.slice()},w.tickFormat=function(x){return arguments.length?(l=x,w):l},w.tickSize=function(x){return arguments.length?(c=h=+x,w):c},w.tickSizeInner=function(x){return arguments.length?(c=+x,w):c},w.tickSizeOuter=function(x){return arguments.length?(h=+x,w):h},w.tickPadding=function(x){return arguments.length?(a=+x,w):a},w.offset=function(x){return arguments.length?(d=+x,w):d},w}function x2(e){return b2(eg,e)}var B2={value:()=>{}};function Av(){for(var e=0,t=arguments.length,r={},s;e<t;++e){if(!(s=arguments[e]+"")||s in r||/[\s.]/.test(s))throw new Error("illegal type: "+s);r[s]=[]}return new lp(r)}function lp(e){this._=e}function C2(e,t){return e.trim().split(/^|\s+/).map(function(r){var s="",l=r.indexOf(".");if(l>=0&&(s=r.slice(l+1),r=r.slice(0,l)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:s}})}lp.prototype=Av.prototype={constructor:lp,on:function(e,t){var r=this._,s=C2(e+"",r),l,c=-1,h=s.length;if(arguments.length<2){for(;++c<h;)if((l=(e=s[c]).type)&&(l=E2(r[l],e.name)))return l;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++c<h;)if(l=(e=s[c]).type)r[l]=v0(r[l],e.name,t);else if(t==null)for(l in r)r[l]=v0(r[l],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new lp(e)},call:function(e,t){if((l=arguments.length-2)>0)for(var r=new Array(l),s=0,l,c;s<l;++s)r[s]=arguments[s+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(c=this._[e],s=0,l=c.length;s<l;++s)c[s].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var s=this._[e],l=0,c=s.length;l<c;++l)s[l].value.apply(t,r)}};function E2(e,t){for(var r=0,s=e.length,l;r<s;++r)if((l=e[r]).name===t)return l.value}function v0(e,t,r){for(var s=0,l=e.length;s<l;++s)if(e[s].name===t){e[s]=B2,e=e.slice(0,s).concat(e.slice(s+1));break}return r!=null&&e.push({name:t,value:r}),e}var tg="http://www.w3.org/1999/xhtml";const _0={svg:"http://www.w3.org/2000/svg",xhtml:tg,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Mp(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),_0.hasOwnProperty(t)?{space:_0[t],local:e}:e}function F2(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===tg&&t.documentElement.namespaceURI===tg?t.createElement(e):t.createElementNS(r,e)}}function S2(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function lv(e){var t=Mp(e);return(t.local?S2:F2)(t)}function I2(){}function Lg(e){return e==null?I2:function(){return this.querySelector(e)}}function T2(e){typeof e!="function"&&(e=Lg(e));for(var t=this._groups,r=t.length,s=new Array(r),l=0;l<r;++l)for(var c=t[l],h=c.length,a=s[l]=new Array(h),d,_,p=0;p<h;++p)(d=c[p])&&(_=e.call(d,d.__data__,p,c))&&("__data__"in d&&(_.__data__=d.__data__),a[p]=_);return new $o(s,this._parents)}function cv(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function U2(){return[]}function uv(e){return e==null?U2:function(){return this.querySelectorAll(e)}}function L2(e){return function(){return cv(e.apply(this,arguments))}}function Q2(e){typeof e=="function"?e=L2(e):e=uv(e);for(var t=this._groups,r=t.length,s=[],l=[],c=0;c<r;++c)for(var h=t[c],a=h.length,d,_=0;_<a;++_)(d=h[_])&&(s.push(e.call(d,d.__data__,_,h)),l.push(d));return new $o(s,l)}function hv(e){return function(){return this.matches(e)}}function fv(e){return function(t){return t.matches(e)}}var k2=Array.prototype.find;function P2(e){return function(){return k2.call(this.children,e)}}function M2(){return this.firstElementChild}function D2(e){return this.select(e==null?M2:P2(typeof e=="function"?e:fv(e)))}var N2=Array.prototype.filter;function j2(){return Array.from(this.children)}function R2(e){return function(){return N2.call(this.children,e)}}function O2(e){return this.selectAll(e==null?j2:R2(typeof e=="function"?e:fv(e)))}function H2(e){typeof e!="function"&&(e=hv(e));for(var t=this._groups,r=t.length,s=new Array(r),l=0;l<r;++l)for(var c=t[l],h=c.length,a=s[l]=[],d,_=0;_<h;++_)(d=c[_])&&e.call(d,d.__data__,_,c)&&a.push(d);return new $o(s,this._parents)}function dv(e){return new Array(e.length)}function z2(){return new $o(this._enter||this._groups.map(dv),this._parents)}function gp(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}gp.prototype={constructor:gp,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function V2(e){return function(){return e}}function K2(e,t,r,s,l,c){for(var h=0,a,d=t.length,_=c.length;h<_;++h)(a=t[h])?(a.__data__=c[h],s[h]=a):r[h]=new gp(e,c[h]);for(;h<d;++h)(a=t[h])&&(l[h]=a)}function G2(e,t,r,s,l,c,h){var a,d,_=new Map,p=t.length,E=c.length,w=new Array(p),x;for(a=0;a<p;++a)(d=t[a])&&(w[a]=x=h.call(d,d.__data__,a,t)+"",_.has(x)?l[a]=d:_.set(x,d));for(a=0;a<E;++a)x=h.call(e,c[a],a,c)+"",(d=_.get(x))?(s[a]=d,d.__data__=c[a],_.delete(x)):r[a]=new gp(e,c[a]);for(a=0;a<p;++a)(d=t[a])&&_.get(w[a])===d&&(l[a]=d)}function q2(e){return e.__data__}function W2(e,t){if(!arguments.length)return Array.from(this,q2);var r=t?G2:K2,s=this._parents,l=this._groups;typeof e!="function"&&(e=V2(e));for(var c=l.length,h=new Array(c),a=new Array(c),d=new Array(c),_=0;_<c;++_){var p=s[_],E=l[_],w=E.length,x=X2(e.call(p,p&&p.__data__,_,s)),k=x.length,Q=a[_]=new Array(k),R=h[_]=new Array(k),M=d[_]=new Array(w);r(p,E,Q,R,M,x,t);for(var O=0,G=0,K,Z;O<k;++O)if(K=Q[O]){for(O>=G&&(G=O+1);!(Z=R[G])&&++G<k;);K._next=Z||null}}return h=new $o(h,s),h._enter=a,h._exit=d,h}function X2(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Z2(){return new $o(this._exit||this._groups.map(dv),this._parents)}function J2(e,t,r){var s=this.enter(),l=this,c=this.exit();return typeof e=="function"?(s=e(s),s&&(s=s.selection())):s=s.append(e+""),t!=null&&(l=t(l),l&&(l=l.selection())),r==null?c.remove():r(c),s&&l?s.merge(l).order():l}function Y2(e){for(var t=e.selection?e.selection():e,r=this._groups,s=t._groups,l=r.length,c=s.length,h=Math.min(l,c),a=new Array(l),d=0;d<h;++d)for(var _=r[d],p=s[d],E=_.length,w=a[d]=new Array(E),x,k=0;k<E;++k)(x=_[k]||p[k])&&(w[k]=x);for(;d<l;++d)a[d]=r[d];return new $o(a,this._parents)}function $2(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var s=e[t],l=s.length-1,c=s[l],h;--l>=0;)(h=s[l])&&(c&&h.compareDocumentPosition(c)^4&&c.parentNode.insertBefore(h,c),c=h);return this}function eb(e){e||(e=tb);function t(E,w){return E&&w?e(E.__data__,w.__data__):!E-!w}for(var r=this._groups,s=r.length,l=new Array(s),c=0;c<s;++c){for(var h=r[c],a=h.length,d=l[c]=new Array(a),_,p=0;p<a;++p)(_=h[p])&&(d[p]=_);d.sort(t)}return new $o(l,this._parents).order()}function tb(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function rb(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function nb(){return Array.from(this)}function ib(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var s=e[t],l=0,c=s.length;l<c;++l){var h=s[l];if(h)return h}return null}function sb(){let e=0;for(const t of this)++e;return e}function ab(){return!this.node()}function ob(e){for(var t=this._groups,r=0,s=t.length;r<s;++r)for(var l=t[r],c=0,h=l.length,a;c<h;++c)(a=l[c])&&e.call(a,a.__data__,c,l);return this}function Ab(e){return function(){this.removeAttribute(e)}}function lb(e){return function(){this.removeAttributeNS(e.space,e.local)}}function cb(e,t){return function(){this.setAttribute(e,t)}}function ub(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function hb(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function fb(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function db(e,t){var r=Mp(e);if(arguments.length<2){var s=this.node();return r.local?s.getAttributeNS(r.space,r.local):s.getAttribute(r)}return this.each((t==null?r.local?lb:Ab:typeof t=="function"?r.local?fb:hb:r.local?ub:cb)(r,t))}function pv(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function pb(e){return function(){this.style.removeProperty(e)}}function mb(e,t,r){return function(){this.style.setProperty(e,t,r)}}function gb(e,t,r){return function(){var s=t.apply(this,arguments);s==null?this.style.removeProperty(e):this.style.setProperty(e,s,r)}}function yb(e,t,r){return arguments.length>1?this.each((t==null?pb:typeof t=="function"?gb:mb)(e,t,r??"")):qh(this.node(),e)}function qh(e,t){return e.style.getPropertyValue(t)||pv(e).getComputedStyle(e,null).getPropertyValue(t)}function vb(e){return function(){delete this[e]}}function _b(e,t){return function(){this[e]=t}}function wb(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function bb(e,t){return arguments.length>1?this.each((t==null?vb:typeof t=="function"?wb:_b)(e,t)):this.node()[e]}function mv(e){return e.trim().split(/^|\s+/)}function Qg(e){return e.classList||new gv(e)}function gv(e){this._node=e,this._names=mv(e.getAttribute("class")||"")}gv.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function yv(e,t){for(var r=Qg(e),s=-1,l=t.length;++s<l;)r.add(t[s])}function vv(e,t){for(var r=Qg(e),s=-1,l=t.length;++s<l;)r.remove(t[s])}function xb(e){return function(){yv(this,e)}}function Bb(e){return function(){vv(this,e)}}function Cb(e,t){return function(){(t.apply(this,arguments)?yv:vv)(this,e)}}function Eb(e,t){var r=mv(e+"");if(arguments.length<2){for(var s=Qg(this.node()),l=-1,c=r.length;++l<c;)if(!s.contains(r[l]))return!1;return!0}return this.each((typeof t=="function"?Cb:t?xb:Bb)(r,t))}function Fb(){this.textContent=""}function Sb(e){return function(){this.textContent=e}}function Ib(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Tb(e){return arguments.length?this.each(e==null?Fb:(typeof e=="function"?Ib:Sb)(e)):this.node().textContent}function Ub(){this.innerHTML=""}function Lb(e){return function(){this.innerHTML=e}}function Qb(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function kb(e){return arguments.length?this.each(e==null?Ub:(typeof e=="function"?Qb:Lb)(e)):this.node().innerHTML}function Pb(){this.nextSibling&&this.parentNode.appendChild(this)}function Mb(){return this.each(Pb)}function Db(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Nb(){return this.each(Db)}function jb(e){var t=typeof e=="function"?e:lv(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Rb(){return null}function Ob(e,t){var r=typeof e=="function"?e:lv(e),s=t==null?Rb:typeof t=="function"?t:Lg(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),s.apply(this,arguments)||null)})}function Hb(){var e=this.parentNode;e&&e.removeChild(this)}function zb(){return this.each(Hb)}function Vb(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Kb(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Gb(e){return this.select(e?Kb:Vb)}function qb(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Wb(e){return function(t){e.call(this,t,this.__data__)}}function Xb(e){return e.trim().split(/^|\s+/).map(function(t){var r="",s=t.indexOf(".");return s>=0&&(r=t.slice(s+1),t=t.slice(0,s)),{type:t,name:r}})}function Zb(e){return function(){var t=this.__on;if(t){for(var r=0,s=-1,l=t.length,c;r<l;++r)c=t[r],(!e.type||c.type===e.type)&&c.name===e.name?this.removeEventListener(c.type,c.listener,c.options):t[++s]=c;++s?t.length=s:delete this.__on}}}function Jb(e,t,r){return function(){var s=this.__on,l,c=Wb(t);if(s){for(var h=0,a=s.length;h<a;++h)if((l=s[h]).type===e.type&&l.name===e.name){this.removeEventListener(l.type,l.listener,l.options),this.addEventListener(l.type,l.listener=c,l.options=r),l.value=t;return}}this.addEventListener(e.type,c,r),l={type:e.type,name:e.name,value:t,listener:c,options:r},s?s.push(l):this.__on=[l]}}function Yb(e,t,r){var s=Xb(e+""),l,c=s.length,h;if(arguments.length<2){var a=this.node().__on;if(a){for(var d=0,_=a.length,p;d<_;++d)for(l=0,p=a[d];l<c;++l)if((h=s[l]).type===p.type&&h.name===p.name)return p.value}return}for(a=t?Jb:Zb,l=0;l<c;++l)this.each(a(s[l],t,r));return this}function _v(e,t,r){var s=pv(e),l=s.CustomEvent;typeof l=="function"?l=new l(t,r):(l=s.document.createEvent("Event"),r?(l.initEvent(t,r.bubbles,r.cancelable),l.detail=r.detail):l.initEvent(t,!1,!1)),e.dispatchEvent(l)}function $b(e,t){return function(){return _v(this,e,t)}}function ex(e,t){return function(){return _v(this,e,t.apply(this,arguments))}}function tx(e,t){return this.each((typeof t=="function"?ex:$b)(e,t))}function*rx(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var s=e[t],l=0,c=s.length,h;l<c;++l)(h=s[l])&&(yield h)}var kg=[null];function $o(e,t){this._groups=e,this._parents=t}function od(){return new $o([[document.documentElement]],kg)}function nx(){return this}$o.prototype=od.prototype={constructor:$o,select:T2,selectAll:Q2,selectChild:D2,selectChildren:O2,filter:H2,data:W2,enter:z2,exit:Z2,join:J2,merge:Y2,selection:nx,order:$2,sort:eb,call:rb,nodes:nb,node:ib,size:sb,empty:ab,each:ob,attr:db,style:yb,property:bb,classed:Eb,text:Tb,html:kb,raise:Mb,lower:Nb,append:jb,insert:Ob,remove:zb,clone:Gb,datum:qb,on:Yb,dispatch:tx,[Symbol.iterator]:rx};function Ga(e){return typeof e=="string"?new $o([[document.querySelector(e)]],[document.documentElement]):new $o([[e]],kg)}function wv(e){return typeof e=="string"?new $o([document.querySelectorAll(e)],[document.documentElement]):new $o([cv(e)],kg)}function Pg(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function bv(e,t){var r=Object.create(e.prototype);for(var s in t)r[s]=t[s];return r}function Ad(){}var Xf=.7,yp=1/Xf,zh="\\s*([+-]?\\d+)\\s*",Zf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",dc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ix=/^#([0-9a-f]{3,8})$/,sx=new RegExp(`^rgb\\(${zh},${zh},${zh}\\)$`),ax=new RegExp(`^rgb\\(${dc},${dc},${dc}\\)$`),ox=new RegExp(`^rgba\\(${zh},${zh},${zh},${Zf}\\)$`),Ax=new RegExp(`^rgba\\(${dc},${dc},${dc},${Zf}\\)$`),lx=new RegExp(`^hsl\\(${Zf},${dc},${dc}\\)$`),cx=new RegExp(`^hsla\\(${Zf},${dc},${dc},${Zf}\\)$`),w0={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Pg(Ad,Yu,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:b0,formatHex:b0,formatHex8:ux,formatHsl:hx,formatRgb:x0,toString:x0});function b0(){return this.rgb().formatHex()}function ux(){return this.rgb().formatHex8()}function hx(){return xv(this).formatHsl()}function x0(){return this.rgb().formatRgb()}function Yu(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=ix.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?B0(t):r===3?new _A(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?qd(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?qd(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=sx.exec(e))?new _A(t[1],t[2],t[3],1):(t=ax.exec(e))?new _A(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=ox.exec(e))?qd(t[1],t[2],t[3],t[4]):(t=Ax.exec(e))?qd(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=lx.exec(e))?F0(t[1],t[2]/100,t[3]/100,1):(t=cx.exec(e))?F0(t[1],t[2]/100,t[3]/100,t[4]):w0.hasOwnProperty(e)?B0(w0[e]):e==="transparent"?new _A(NaN,NaN,NaN,0):null}function B0(e){return new _A(e>>16&255,e>>8&255,e&255,1)}function qd(e,t,r,s){return s<=0&&(e=t=r=NaN),new _A(e,t,r,s)}function fx(e){return e instanceof Ad||(e=Yu(e)),e?(e=e.rgb(),new _A(e.r,e.g,e.b,e.opacity)):new _A}function vp(e,t,r,s){return arguments.length===1?fx(e):new _A(e,t,r,s??1)}function _A(e,t,r,s){this.r=+e,this.g=+t,this.b=+r,this.opacity=+s}Pg(_A,vp,bv(Ad,{brighter(e){return e=e==null?yp:Math.pow(yp,e),new _A(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Xf:Math.pow(Xf,e),new _A(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new _A(qu(this.r),qu(this.g),qu(this.b),_p(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:C0,formatHex:C0,formatHex8:dx,formatRgb:E0,toString:E0}));function C0(){return`#${Ku(this.r)}${Ku(this.g)}${Ku(this.b)}`}function dx(){return`#${Ku(this.r)}${Ku(this.g)}${Ku(this.b)}${Ku((isNaN(this.opacity)?1:this.opacity)*255)}`}function E0(){const e=_p(this.opacity);return`${e===1?"rgb(":"rgba("}${qu(this.r)}, ${qu(this.g)}, ${qu(this.b)}${e===1?")":`, ${e})`}`}function _p(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function qu(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ku(e){return e=qu(e),(e<16?"0":"")+e.toString(16)}function F0(e,t,r,s){return s<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new zl(e,t,r,s)}function xv(e){if(e instanceof zl)return new zl(e.h,e.s,e.l,e.opacity);if(e instanceof Ad||(e=Yu(e)),!e)return new zl;if(e instanceof zl)return e;e=e.rgb();var t=e.r/255,r=e.g/255,s=e.b/255,l=Math.min(t,r,s),c=Math.max(t,r,s),h=NaN,a=c-l,d=(c+l)/2;return a?(t===c?h=(r-s)/a+(r<s)*6:r===c?h=(s-t)/a+2:h=(t-r)/a+4,a/=d<.5?c+l:2-c-l,h*=60):a=d>0&&d<1?0:h,new zl(h,a,d,e.opacity)}function px(e,t,r,s){return arguments.length===1?xv(e):new zl(e,t,r,s??1)}function zl(e,t,r,s){this.h=+e,this.s=+t,this.l=+r,this.opacity=+s}Pg(zl,px,bv(Ad,{brighter(e){return e=e==null?yp:Math.pow(yp,e),new zl(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Xf:Math.pow(Xf,e),new zl(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,s=r+(r<.5?r:1-r)*t,l=2*r-s;return new _A(Em(e>=240?e-240:e+120,l,s),Em(e,l,s),Em(e<120?e+240:e-120,l,s),this.opacity)},clamp(){return new zl(S0(this.h),Wd(this.s),Wd(this.l),_p(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=_p(this.opacity);return`${e===1?"hsl(":"hsla("}${S0(this.h)}, ${Wd(this.s)*100}%, ${Wd(this.l)*100}%${e===1?")":`, ${e})`}`}}));function S0(e){return e=(e||0)%360,e<0?e+360:e}function Wd(e){return Math.max(0,Math.min(1,e||0))}function Em(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const Mg=e=>()=>e;function mx(e,t){return function(r){return e+r*t}}function gx(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(s){return Math.pow(e+s*t,r)}}function yx(e){return(e=+e)==1?Bv:function(t,r){return r-t?gx(t,r,e):Mg(isNaN(t)?r:t)}}function Bv(e,t){var r=t-e;return r?mx(e,r):Mg(isNaN(e)?t:e)}const wp=function e(t){var r=yx(t);function s(l,c){var h=r((l=vp(l)).r,(c=vp(c)).r),a=r(l.g,c.g),d=r(l.b,c.b),_=Bv(l.opacity,c.opacity);return function(p){return l.r=h(p),l.g=a(p),l.b=d(p),l.opacity=_(p),l+""}}return s.gamma=e,s}(1);function vx(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,s=t.slice(),l;return function(c){for(l=0;l<r;++l)s[l]=e[l]*(1-c)+t[l]*c;return s}}function _x(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function wx(e,t){var r=t?t.length:0,s=e?Math.min(r,e.length):0,l=new Array(s),c=new Array(r),h;for(h=0;h<s;++h)l[h]=Dg(e[h],t[h]);for(;h<r;++h)c[h]=t[h];return function(a){for(h=0;h<s;++h)c[h]=l[h](a);return c}}function bx(e,t){var r=new Date;return e=+e,t=+t,function(s){return r.setTime(e*(1-s)+t*s),r}}function Ol(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function xx(e,t){var r={},s={},l;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(l in t)l in e?r[l]=Dg(e[l],t[l]):s[l]=t[l];return function(c){for(l in r)s[l]=r[l](c);return s}}var rg=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Fm=new RegExp(rg.source,"g");function Bx(e){return function(){return e}}function Cx(e){return function(t){return e(t)+""}}function Cv(e,t){var r=rg.lastIndex=Fm.lastIndex=0,s,l,c,h=-1,a=[],d=[];for(e=e+"",t=t+"";(s=rg.exec(e))&&(l=Fm.exec(t));)(c=l.index)>r&&(c=t.slice(r,c),a[h]?a[h]+=c:a[++h]=c),(s=s[0])===(l=l[0])?a[h]?a[h]+=l:a[++h]=l:(a[++h]=null,d.push({i:h,x:Ol(s,l)})),r=Fm.lastIndex;return r<t.length&&(c=t.slice(r),a[h]?a[h]+=c:a[++h]=c),a.length<2?d[0]?Cx(d[0].x):Bx(t):(t=d.length,function(_){for(var p=0,E;p<t;++p)a[(E=d[p]).i]=E.x(_);return a.join("")})}function Dg(e,t){var r=typeof t,s;return t==null||r==="boolean"?Mg(t):(r==="number"?Ol:r==="string"?(s=Yu(t))?(t=s,wp):Cv:t instanceof Yu?wp:t instanceof Date?bx:_x(t)?vx:Array.isArray(t)?wx:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?xx:Ol)(e,t)}function Ex(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}var I0=180/Math.PI,ng={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ev(e,t,r,s,l,c){var h,a,d;return(h=Math.sqrt(e*e+t*t))&&(e/=h,t/=h),(d=e*r+t*s)&&(r-=e*d,s-=t*d),(a=Math.sqrt(r*r+s*s))&&(r/=a,s/=a,d/=a),e*s<t*r&&(e=-e,t=-t,d=-d,h=-h),{translateX:l,translateY:c,rotate:Math.atan2(t,e)*I0,skewX:Math.atan(d)*I0,scaleX:h,scaleY:a}}var Xd;function Fx(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?ng:Ev(t.a,t.b,t.c,t.d,t.e,t.f)}function Sx(e){return e==null||(Xd||(Xd=document.createElementNS("http://www.w3.org/2000/svg","g")),Xd.setAttribute("transform",e),!(e=Xd.transform.baseVal.consolidate()))?ng:(e=e.matrix,Ev(e.a,e.b,e.c,e.d,e.e,e.f))}function Fv(e,t,r,s){function l(_){return _.length?_.pop()+" ":""}function c(_,p,E,w,x,k){if(_!==E||p!==w){var Q=x.push("translate(",null,t,null,r);k.push({i:Q-4,x:Ol(_,E)},{i:Q-2,x:Ol(p,w)})}else(E||w)&&x.push("translate("+E+t+w+r)}function h(_,p,E,w){_!==p?(_-p>180?p+=360:p-_>180&&(_+=360),w.push({i:E.push(l(E)+"rotate(",null,s)-2,x:Ol(_,p)})):p&&E.push(l(E)+"rotate("+p+s)}function a(_,p,E,w){_!==p?w.push({i:E.push(l(E)+"skewX(",null,s)-2,x:Ol(_,p)}):p&&E.push(l(E)+"skewX("+p+s)}function d(_,p,E,w,x,k){if(_!==E||p!==w){var Q=x.push(l(x)+"scale(",null,",",null,")");k.push({i:Q-4,x:Ol(_,E)},{i:Q-2,x:Ol(p,w)})}else(E!==1||w!==1)&&x.push(l(x)+"scale("+E+","+w+")")}return function(_,p){var E=[],w=[];return _=e(_),p=e(p),c(_.translateX,_.translateY,p.translateX,p.translateY,E,w),h(_.rotate,p.rotate,E,w),a(_.skewX,p.skewX,E,w),d(_.scaleX,_.scaleY,p.scaleX,p.scaleY,E,w),_=p=null,function(x){for(var k=-1,Q=w.length,R;++k<Q;)E[(R=w[k]).i]=R.x(x);return E.join("")}}}var Ix=Fv(Fx,"px, ","px)","deg)"),Tx=Fv(Sx,", ",")",")"),Wh=0,Nf=0,If=0,Sv=1e3,bp,jf,xp=0,$u=0,Dp=0,Jf=typeof performance=="object"&&performance.now?performance:Date,Iv=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Ng(){return $u||(Iv(Ux),$u=Jf.now()+Dp)}function Ux(){$u=0}function Bp(){this._call=this._time=this._next=null}Bp.prototype=Tv.prototype={constructor:Bp,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?Ng():+r)+(t==null?0:+t),!this._next&&jf!==this&&(jf?jf._next=this:bp=this,jf=this),this._call=e,this._time=r,ig()},stop:function(){this._call&&(this._call=null,this._time=1/0,ig())}};function Tv(e,t,r){var s=new Bp;return s.restart(e,t,r),s}function Lx(){Ng(),++Wh;for(var e=bp,t;e;)(t=$u-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Wh}function T0(){$u=(xp=Jf.now())+Dp,Wh=Nf=0;try{Lx()}finally{Wh=0,kx(),$u=0}}function Qx(){var e=Jf.now(),t=e-xp;t>Sv&&(Dp-=t,xp=e)}function kx(){for(var e,t=bp,r,s=1/0;t;)t._call?(s>t._time&&(s=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:bp=r);jf=e,ig(s)}function ig(e){if(!Wh){Nf&&(Nf=clearTimeout(Nf));var t=e-$u;t>24?(e<1/0&&(Nf=setTimeout(T0,e-Jf.now()-Dp)),If&&(If=clearInterval(If))):(If||(xp=Jf.now(),If=setInterval(Qx,Sv)),Wh=1,Iv(T0))}}function U0(e,t,r){var s=new Bp;return t=t==null?0:+t,s.restart(l=>{s.stop(),e(l+t)},t,r),s}var Px=Av("start","end","cancel","interrupt"),Mx=[],Uv=0,L0=1,sg=2,cp=3,Q0=4,ag=5,up=6;function Np(e,t,r,s,l,c){var h=e.__transition;if(!h)e.__transition={};else if(r in h)return;Dx(e,r,{name:t,index:s,group:l,on:Px,tween:Mx,time:c.time,delay:c.delay,duration:c.duration,ease:c.ease,timer:null,state:Uv})}function jg(e,t){var r=Vl(e,t);if(r.state>Uv)throw new Error("too late; already scheduled");return r}function gc(e,t){var r=Vl(e,t);if(r.state>cp)throw new Error("too late; already running");return r}function Vl(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function Dx(e,t,r){var s=e.__transition,l;s[t]=r,r.timer=Tv(c,0,r.time);function c(_){r.state=L0,r.timer.restart(h,r.delay,r.time),r.delay<=_&&h(_-r.delay)}function h(_){var p,E,w,x;if(r.state!==L0)return d();for(p in s)if(x=s[p],x.name===r.name){if(x.state===cp)return U0(h);x.state===Q0?(x.state=up,x.timer.stop(),x.on.call("interrupt",e,e.__data__,x.index,x.group),delete s[p]):+p<t&&(x.state=up,x.timer.stop(),x.on.call("cancel",e,e.__data__,x.index,x.group),delete s[p])}if(U0(function(){r.state===cp&&(r.state=Q0,r.timer.restart(a,r.delay,r.time),a(_))}),r.state=sg,r.on.call("start",e,e.__data__,r.index,r.group),r.state===sg){for(r.state=cp,l=new Array(w=r.tween.length),p=0,E=-1;p<w;++p)(x=r.tween[p].value.call(e,e.__data__,r.index,r.group))&&(l[++E]=x);l.length=E+1}}function a(_){for(var p=_<r.duration?r.ease.call(null,_/r.duration):(r.timer.restart(d),r.state=ag,1),E=-1,w=l.length;++E<w;)l[E].call(e,p);r.state===ag&&(r.on.call("end",e,e.__data__,r.index,r.group),d())}function d(){r.state=up,r.timer.stop(),delete s[t];for(var _ in s)return;delete e.__transition}}function Nx(e,t){var r=e.__transition,s,l,c=!0,h;if(r){t=t==null?null:t+"";for(h in r){if((s=r[h]).name!==t){c=!1;continue}l=s.state>sg&&s.state<ag,s.state=up,s.timer.stop(),s.on.call(l?"interrupt":"cancel",e,e.__data__,s.index,s.group),delete r[h]}c&&delete e.__transition}}function jx(e){return this.each(function(){Nx(this,e)})}function Rx(e,t){var r,s;return function(){var l=gc(this,e),c=l.tween;if(c!==r){s=r=c;for(var h=0,a=s.length;h<a;++h)if(s[h].name===t){s=s.slice(),s.splice(h,1);break}}l.tween=s}}function Ox(e,t,r){var s,l;if(typeof r!="function")throw new Error;return function(){var c=gc(this,e),h=c.tween;if(h!==s){l=(s=h).slice();for(var a={name:t,value:r},d=0,_=l.length;d<_;++d)if(l[d].name===t){l[d]=a;break}d===_&&l.push(a)}c.tween=l}}function Hx(e,t){var r=this._id;if(e+="",arguments.length<2){for(var s=Vl(this.node(),r).tween,l=0,c=s.length,h;l<c;++l)if((h=s[l]).name===e)return h.value;return null}return this.each((t==null?Rx:Ox)(r,e,t))}function Rg(e,t,r){var s=e._id;return e.each(function(){var l=gc(this,s);(l.value||(l.value={}))[t]=r.apply(this,arguments)}),function(l){return Vl(l,s).value[t]}}function Lv(e,t){var r;return(typeof t=="number"?Ol:t instanceof Yu?wp:(r=Yu(t))?(t=r,wp):Cv)(e,t)}function zx(e){return function(){this.removeAttribute(e)}}function Vx(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Kx(e,t,r){var s,l=r+"",c;return function(){var h=this.getAttribute(e);return h===l?null:h===s?c:c=t(s=h,r)}}function Gx(e,t,r){var s,l=r+"",c;return function(){var h=this.getAttributeNS(e.space,e.local);return h===l?null:h===s?c:c=t(s=h,r)}}function qx(e,t,r){var s,l,c;return function(){var h,a=r(this),d;return a==null?void this.removeAttribute(e):(h=this.getAttribute(e),d=a+"",h===d?null:h===s&&d===l?c:(l=d,c=t(s=h,a)))}}function Wx(e,t,r){var s,l,c;return function(){var h,a=r(this),d;return a==null?void this.removeAttributeNS(e.space,e.local):(h=this.getAttributeNS(e.space,e.local),d=a+"",h===d?null:h===s&&d===l?c:(l=d,c=t(s=h,a)))}}function Xx(e,t){var r=Mp(e),s=r==="transform"?Tx:Lv;return this.attrTween(e,typeof t=="function"?(r.local?Wx:qx)(r,s,Rg(this,"attr."+e,t)):t==null?(r.local?Vx:zx)(r):(r.local?Gx:Kx)(r,s,t))}function Zx(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function Jx(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function Yx(e,t){var r,s;function l(){var c=t.apply(this,arguments);return c!==s&&(r=(s=c)&&Jx(e,c)),r}return l._value=t,l}function $x(e,t){var r,s;function l(){var c=t.apply(this,arguments);return c!==s&&(r=(s=c)&&Zx(e,c)),r}return l._value=t,l}function eB(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var s=Mp(e);return this.tween(r,(s.local?Yx:$x)(s,t))}function tB(e,t){return function(){jg(this,e).delay=+t.apply(this,arguments)}}function rB(e,t){return t=+t,function(){jg(this,e).delay=t}}function nB(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?tB:rB)(t,e)):Vl(this.node(),t).delay}function iB(e,t){return function(){gc(this,e).duration=+t.apply(this,arguments)}}function sB(e,t){return t=+t,function(){gc(this,e).duration=t}}function aB(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?iB:sB)(t,e)):Vl(this.node(),t).duration}function oB(e,t){if(typeof t!="function")throw new Error;return function(){gc(this,e).ease=t}}function AB(e){var t=this._id;return arguments.length?this.each(oB(t,e)):Vl(this.node(),t).ease}function lB(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;gc(this,e).ease=r}}function cB(e){if(typeof e!="function")throw new Error;return this.each(lB(this._id,e))}function uB(e){typeof e!="function"&&(e=hv(e));for(var t=this._groups,r=t.length,s=new Array(r),l=0;l<r;++l)for(var c=t[l],h=c.length,a=s[l]=[],d,_=0;_<h;++_)(d=c[_])&&e.call(d,d.__data__,_,c)&&a.push(d);return new Rc(s,this._parents,this._name,this._id)}function hB(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,s=t.length,l=r.length,c=Math.min(s,l),h=new Array(s),a=0;a<c;++a)for(var d=t[a],_=r[a],p=d.length,E=h[a]=new Array(p),w,x=0;x<p;++x)(w=d[x]||_[x])&&(E[x]=w);for(;a<s;++a)h[a]=t[a];return new Rc(h,this._parents,this._name,this._id)}function fB(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function dB(e,t,r){var s,l,c=fB(t)?jg:gc;return function(){var h=c(this,e),a=h.on;a!==s&&(l=(s=a).copy()).on(t,r),h.on=l}}function pB(e,t){var r=this._id;return arguments.length<2?Vl(this.node(),r).on.on(e):this.each(dB(r,e,t))}function mB(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function gB(){return this.on("end.remove",mB(this._id))}function yB(e){var t=this._name,r=this._id;typeof e!="function"&&(e=Lg(e));for(var s=this._groups,l=s.length,c=new Array(l),h=0;h<l;++h)for(var a=s[h],d=a.length,_=c[h]=new Array(d),p,E,w=0;w<d;++w)(p=a[w])&&(E=e.call(p,p.__data__,w,a))&&("__data__"in p&&(E.__data__=p.__data__),_[w]=E,Np(_[w],t,r,w,_,Vl(p,r)));return new Rc(c,this._parents,t,r)}function vB(e){var t=this._name,r=this._id;typeof e!="function"&&(e=uv(e));for(var s=this._groups,l=s.length,c=[],h=[],a=0;a<l;++a)for(var d=s[a],_=d.length,p,E=0;E<_;++E)if(p=d[E]){for(var w=e.call(p,p.__data__,E,d),x,k=Vl(p,r),Q=0,R=w.length;Q<R;++Q)(x=w[Q])&&Np(x,t,r,Q,w,k);c.push(w),h.push(p)}return new Rc(c,h,t,r)}var _B=od.prototype.constructor;function wB(){return new _B(this._groups,this._parents)}function bB(e,t){var r,s,l;return function(){var c=qh(this,e),h=(this.style.removeProperty(e),qh(this,e));return c===h?null:c===r&&h===s?l:l=t(r=c,s=h)}}function Qv(e){return function(){this.style.removeProperty(e)}}function xB(e,t,r){var s,l=r+"",c;return function(){var h=qh(this,e);return h===l?null:h===s?c:c=t(s=h,r)}}function BB(e,t,r){var s,l,c;return function(){var h=qh(this,e),a=r(this),d=a+"";return a==null&&(d=a=(this.style.removeProperty(e),qh(this,e))),h===d?null:h===s&&d===l?c:(l=d,c=t(s=h,a))}}function CB(e,t){var r,s,l,c="style."+t,h="end."+c,a;return function(){var d=gc(this,e),_=d.on,p=d.value[c]==null?a||(a=Qv(t)):void 0;(_!==r||l!==p)&&(s=(r=_).copy()).on(h,l=p),d.on=s}}function EB(e,t,r){var s=(e+="")=="transform"?Ix:Lv;return t==null?this.styleTween(e,bB(e,s)).on("end.style."+e,Qv(e)):typeof t=="function"?this.styleTween(e,BB(e,s,Rg(this,"style."+e,t))).each(CB(this._id,e)):this.styleTween(e,xB(e,s,t),r).on("end.style."+e,null)}function FB(e,t,r){return function(s){this.style.setProperty(e,t.call(this,s),r)}}function SB(e,t,r){var s,l;function c(){var h=t.apply(this,arguments);return h!==l&&(s=(l=h)&&FB(e,h,r)),s}return c._value=t,c}function IB(e,t,r){var s="style."+(e+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(t==null)return this.tween(s,null);if(typeof t!="function")throw new Error;return this.tween(s,SB(e,t,r??""))}function TB(e){return function(){this.textContent=e}}function UB(e){return function(){var t=e(this);this.textContent=t??""}}function LB(e){return this.tween("text",typeof e=="function"?UB(Rg(this,"text",e)):TB(e==null?"":e+""))}function QB(e){return function(t){this.textContent=e.call(this,t)}}function kB(e){var t,r;function s(){var l=e.apply(this,arguments);return l!==r&&(t=(r=l)&&QB(l)),t}return s._value=e,s}function PB(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,kB(e))}function MB(){for(var e=this._name,t=this._id,r=kv(),s=this._groups,l=s.length,c=0;c<l;++c)for(var h=s[c],a=h.length,d,_=0;_<a;++_)if(d=h[_]){var p=Vl(d,t);Np(d,e,r,_,h,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new Rc(s,this._parents,e,r)}function DB(){var e,t,r=this,s=r._id,l=r.size();return new Promise(function(c,h){var a={value:h},d={value:function(){--l===0&&c()}};r.each(function(){var _=gc(this,s),p=_.on;p!==e&&(t=(e=p).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(d)),_.on=t}),l===0&&c()})}var NB=0;function Rc(e,t,r,s){this._groups=e,this._parents=t,this._name=r,this._id=s}function kv(){return++NB}var Dc=od.prototype;Rc.prototype={constructor:Rc,select:yB,selectAll:vB,selectChild:Dc.selectChild,selectChildren:Dc.selectChildren,filter:uB,merge:hB,selection:wB,transition:MB,call:Dc.call,nodes:Dc.nodes,node:Dc.node,size:Dc.size,empty:Dc.empty,each:Dc.each,on:pB,attr:Xx,attrTween:eB,style:EB,styleTween:IB,text:LB,textTween:PB,remove:gB,tween:Hx,delay:nB,duration:aB,ease:AB,easeVarying:cB,end:DB,[Symbol.iterator]:Dc[Symbol.iterator]};function jB(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var RB={time:null,delay:0,duration:250,ease:jB};function OB(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function HB(e){var t,r;e instanceof Rc?(t=e._id,e=e._name):(t=kv(),(r=RB).time=Ng(),e=e==null?null:e+"");for(var s=this._groups,l=s.length,c=0;c<l;++c)for(var h=s[c],a=h.length,d,_=0;_<a;++_)(d=h[_])&&Np(d,e,t,_,h,r||OB(d,t));return new Rc(s,this._parents,e,t)}od.prototype.interrupt=jx;od.prototype.transition=HB;function zB(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function VB(e,t){return fetch(e,t).then(zB)}function KB(e){return function(t,r,s){return arguments.length===2&&typeof r=="function"&&(s=r,r=void 0),VB(t,r).then(function(l){return e(l,s)})}}var GA=KB(ev);function GB(e){const t=+this._x.call(null,e),r=+this._y.call(null,e);return Pv(this.cover(t,r),t,r,e)}function Pv(e,t,r,s){if(isNaN(t)||isNaN(r))return e;var l,c=e._root,h={data:s},a=e._x0,d=e._y0,_=e._x1,p=e._y1,E,w,x,k,Q,R,M,O;if(!c)return e._root=h,e;for(;c.length;)if((Q=t>=(E=(a+_)/2))?a=E:_=E,(R=r>=(w=(d+p)/2))?d=w:p=w,l=c,!(c=c[M=R<<1|Q]))return l[M]=h,e;if(x=+e._x.call(null,c.data),k=+e._y.call(null,c.data),t===x&&r===k)return h.next=c,l?l[M]=h:e._root=h,e;do l=l?l[M]=new Array(4):e._root=new Array(4),(Q=t>=(E=(a+_)/2))?a=E:_=E,(R=r>=(w=(d+p)/2))?d=w:p=w;while((M=R<<1|Q)===(O=(k>=w)<<1|x>=E));return l[O]=c,l[M]=h,e}function qB(e){var t,r,s=e.length,l,c,h=new Array(s),a=new Array(s),d=1/0,_=1/0,p=-1/0,E=-1/0;for(r=0;r<s;++r)isNaN(l=+this._x.call(null,t=e[r]))||isNaN(c=+this._y.call(null,t))||(h[r]=l,a[r]=c,l<d&&(d=l),l>p&&(p=l),c<_&&(_=c),c>E&&(E=c));if(d>p||_>E)return this;for(this.cover(d,_).cover(p,E),r=0;r<s;++r)Pv(this,h[r],a[r],e[r]);return this}function WB(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var r=this._x0,s=this._y0,l=this._x1,c=this._y1;if(isNaN(r))l=(r=Math.floor(e))+1,c=(s=Math.floor(t))+1;else{for(var h=l-r||1,a=this._root,d,_;r>e||e>=l||s>t||t>=c;)switch(_=(t<s)<<1|e<r,d=new Array(4),d[_]=a,a=d,h*=2,_){case 0:l=r+h,c=s+h;break;case 1:r=l-h,c=s+h;break;case 2:l=r+h,s=c-h;break;case 3:r=l-h,s=c-h;break}this._root&&this._root.length&&(this._root=a)}return this._x0=r,this._y0=s,this._x1=l,this._y1=c,this}function XB(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function ZB(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Xo(e,t,r,s,l){this.node=e,this.x0=t,this.y0=r,this.x1=s,this.y1=l}function JB(e,t,r){var s,l=this._x0,c=this._y0,h,a,d,_,p=this._x1,E=this._y1,w=[],x=this._root,k,Q;for(x&&w.push(new Xo(x,l,c,p,E)),r==null?r=1/0:(l=e-r,c=t-r,p=e+r,E=t+r,r*=r);k=w.pop();)if(!(!(x=k.node)||(h=k.x0)>p||(a=k.y0)>E||(d=k.x1)<l||(_=k.y1)<c))if(x.length){var R=(h+d)/2,M=(a+_)/2;w.push(new Xo(x[3],R,M,d,_),new Xo(x[2],h,M,R,_),new Xo(x[1],R,a,d,M),new Xo(x[0],h,a,R,M)),(Q=(t>=M)<<1|e>=R)&&(k=w[w.length-1],w[w.length-1]=w[w.length-1-Q],w[w.length-1-Q]=k)}else{var O=e-+this._x.call(null,x.data),G=t-+this._y.call(null,x.data),K=O*O+G*G;if(K<r){var Z=Math.sqrt(r=K);l=e-Z,c=t-Z,p=e+Z,E=t+Z,s=x.data}}return s}function YB(e){if(isNaN(p=+this._x.call(null,e))||isNaN(E=+this._y.call(null,e)))return this;var t,r=this._root,s,l,c,h=this._x0,a=this._y0,d=this._x1,_=this._y1,p,E,w,x,k,Q,R,M;if(!r)return this;if(r.length)for(;;){if((k=p>=(w=(h+d)/2))?h=w:d=w,(Q=E>=(x=(a+_)/2))?a=x:_=x,t=r,!(r=r[R=Q<<1|k]))return this;if(!r.length)break;(t[R+1&3]||t[R+2&3]||t[R+3&3])&&(s=t,M=R)}for(;r.data!==e;)if(l=r,!(r=r.next))return this;return(c=r.next)&&delete r.next,l?(c?l.next=c:delete l.next,this):t?(c?t[R]=c:delete t[R],(r=t[0]||t[1]||t[2]||t[3])&&r===(t[3]||t[2]||t[1]||t[0])&&!r.length&&(s?s[M]=r:this._root=r),this):(this._root=c,this)}function $B(e){for(var t=0,r=e.length;t<r;++t)this.remove(e[t]);return this}function e5(){return this._root}function t5(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function r5(e){var t=[],r,s=this._root,l,c,h,a,d;for(s&&t.push(new Xo(s,this._x0,this._y0,this._x1,this._y1));r=t.pop();)if(!e(s=r.node,c=r.x0,h=r.y0,a=r.x1,d=r.y1)&&s.length){var _=(c+a)/2,p=(h+d)/2;(l=s[3])&&t.push(new Xo(l,_,p,a,d)),(l=s[2])&&t.push(new Xo(l,c,p,_,d)),(l=s[1])&&t.push(new Xo(l,_,h,a,p)),(l=s[0])&&t.push(new Xo(l,c,h,_,p))}return this}function n5(e){var t=[],r=[],s;for(this._root&&t.push(new Xo(this._root,this._x0,this._y0,this._x1,this._y1));s=t.pop();){var l=s.node;if(l.length){var c,h=s.x0,a=s.y0,d=s.x1,_=s.y1,p=(h+d)/2,E=(a+_)/2;(c=l[0])&&t.push(new Xo(c,h,a,p,E)),(c=l[1])&&t.push(new Xo(c,p,a,d,E)),(c=l[2])&&t.push(new Xo(c,h,E,p,_)),(c=l[3])&&t.push(new Xo(c,p,E,d,_))}r.push(s)}for(;s=r.pop();)e(s.node,s.x0,s.y0,s.x1,s.y1);return this}function i5(e){return e[0]}function s5(e){return arguments.length?(this._x=e,this):this._x}function a5(e){return e[1]}function o5(e){return arguments.length?(this._y=e,this):this._y}function Mv(e,t,r){var s=new Og(t??i5,r??a5,NaN,NaN,NaN,NaN);return e==null?s:s.addAll(e)}function Og(e,t,r,s,l,c){this._x=e,this._y=t,this._x0=r,this._y0=s,this._x1=l,this._y1=c,this._root=void 0}function k0(e){for(var t={data:e.data},r=t;e=e.next;)r=r.next={data:e.data};return t}var rA=Mv.prototype=Og.prototype;rA.copy=function(){var e=new Og(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,r,s;if(!t)return e;if(!t.length)return e._root=k0(t),e;for(r=[{source:t,target:e._root=new Array(4)}];t=r.pop();)for(var l=0;l<4;++l)(s=t.source[l])&&(s.length?r.push({source:s,target:t.target[l]=new Array(4)}):t.target[l]=k0(s));return e};rA.add=GB;rA.addAll=qB;rA.cover=WB;rA.data=XB;rA.extent=ZB;rA.find=JB;rA.remove=YB;rA.removeAll=$B;rA.root=e5;rA.size=t5;rA.visit=r5;rA.visitAfter=n5;rA.x=s5;rA.y=o5;function A5(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Cp(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,s=e.slice(0,r);return[s.length>1?s[0]+s.slice(2):s,+e.slice(r+1)]}function Xh(e){return e=Cp(Math.abs(e)),e?e[1]:NaN}function l5(e,t){return function(r,s){for(var l=r.length,c=[],h=0,a=e[0],d=0;l>0&&a>0&&(d+a+1>s&&(a=Math.max(1,s-d)),c.push(r.substring(l-=a,l+a)),!((d+=a+1)>s));)a=e[h=(h+1)%e.length];return c.reverse().join(t)}}function c5(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var u5=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ep(e){if(!(t=u5.exec(e)))throw new Error("invalid format: "+e);var t;return new Hg({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Ep.prototype=Hg.prototype;function Hg(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Hg.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function h5(e){e:for(var t=e.length,r=1,s=-1,l;r<t;++r)switch(e[r]){case".":s=l=r;break;case"0":s===0&&(s=r),l=r;break;default:if(!+e[r])break e;s>0&&(s=0);break}return s>0?e.slice(0,s)+e.slice(l+1):e}var Dv;function f5(e,t){var r=Cp(e,t);if(!r)return e+"";var s=r[0],l=r[1],c=l-(Dv=Math.max(-8,Math.min(8,Math.floor(l/3)))*3)+1,h=s.length;return c===h?s:c>h?s+new Array(c-h+1).join("0"):c>0?s.slice(0,c)+"."+s.slice(c):"0."+new Array(1-c).join("0")+Cp(e,Math.max(0,t+c-1))[0]}function P0(e,t){var r=Cp(e,t);if(!r)return e+"";var s=r[0],l=r[1];return l<0?"0."+new Array(-l).join("0")+s:s.length>l+1?s.slice(0,l+1)+"."+s.slice(l+1):s+new Array(l-s.length+2).join("0")}const M0={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:A5,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>P0(e*100,t),r:P0,s:f5,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function D0(e){return e}var N0=Array.prototype.map,j0=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function d5(e){var t=e.grouping===void 0||e.thousands===void 0?D0:l5(N0.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",s=e.currency===void 0?"":e.currency[1]+"",l=e.decimal===void 0?".":e.decimal+"",c=e.numerals===void 0?D0:c5(N0.call(e.numerals,String)),h=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"−":e.minus+"",d=e.nan===void 0?"NaN":e.nan+"";function _(E){E=Ep(E);var w=E.fill,x=E.align,k=E.sign,Q=E.symbol,R=E.zero,M=E.width,O=E.comma,G=E.precision,K=E.trim,Z=E.type;Z==="n"?(O=!0,Z="g"):M0[Z]||(G===void 0&&(G=12),K=!0,Z="g"),(R||w==="0"&&x==="=")&&(R=!0,w="0",x="=");var $=Q==="$"?r:Q==="#"&&/[boxX]/.test(Z)?"0"+Z.toLowerCase():"",he=Q==="$"?s:/[%p]/.test(Z)?h:"",fe=M0[Z],_e=/[defgprs%]/.test(Z);G=G===void 0?6:/[gprs]/.test(Z)?Math.max(1,Math.min(21,G)):Math.max(0,Math.min(20,G));function ue(ee){var se=$,Be=he,me,Pe,ge;if(Z==="c")Be=fe(ee)+Be,ee="";else{ee=+ee;var Qe=ee<0||1/ee<0;if(ee=isNaN(ee)?d:fe(Math.abs(ee),G),K&&(ee=h5(ee)),Qe&&+ee==0&&k!=="+"&&(Qe=!1),se=(Qe?k==="("?k:a:k==="-"||k==="("?"":k)+se,Be=(Z==="s"?j0[8+Dv/3]:"")+Be+(Qe&&k==="("?")":""),_e){for(me=-1,Pe=ee.length;++me<Pe;)if(ge=ee.charCodeAt(me),48>ge||ge>57){Be=(ge===46?l+ee.slice(me+1):ee.slice(me))+Be,ee=ee.slice(0,me);break}}}O&&!R&&(ee=t(ee,1/0));var Te=se.length+ee.length+Be.length,tt=Te<M?new Array(M-Te+1).join(w):"";switch(O&&R&&(ee=t(tt+ee,tt.length?M-Be.length:1/0),tt=""),x){case"<":ee=se+ee+Be+tt;break;case"=":ee=se+tt+ee+Be;break;case"^":ee=tt.slice(0,Te=tt.length>>1)+se+ee+Be+tt.slice(Te);break;default:ee=tt+se+ee+Be;break}return c(ee)}return ue.toString=function(){return E+""},ue}function p(E,w){var x=_((E=Ep(E),E.type="f",E)),k=Math.max(-8,Math.min(8,Math.floor(Xh(w)/3)))*3,Q=Math.pow(10,-k),R=j0[8+k/3];return function(M){return x(Q*M)+R}}return{format:_,formatPrefix:p}}var Zd,zg,Nv;p5({thousands:",",grouping:[3],currency:["$",""]});function p5(e){return Zd=d5(e),zg=Zd.format,Nv=Zd.formatPrefix,Zd}function m5(e){return Math.max(0,-Xh(Math.abs(e)))}function g5(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Xh(t)/3)))*3-Xh(Math.abs(e)))}function y5(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Xh(t)-Xh(e))+1}function v5(e){var t=0,r=e.children,s=r&&r.length;if(!s)t=1;else for(;--s>=0;)t+=r[s].value;e.value=t}function _5(){return this.eachAfter(v5)}function w5(e,t){let r=-1;for(const s of this)e.call(t,s,++r,this);return this}function b5(e,t){for(var r=this,s=[r],l,c,h=-1;r=s.pop();)if(e.call(t,r,++h,this),l=r.children)for(c=l.length-1;c>=0;--c)s.push(l[c]);return this}function x5(e,t){for(var r=this,s=[r],l=[],c,h,a,d=-1;r=s.pop();)if(l.push(r),c=r.children)for(h=0,a=c.length;h<a;++h)s.push(c[h]);for(;r=l.pop();)e.call(t,r,++d,this);return this}function B5(e,t){let r=-1;for(const s of this)if(e.call(t,s,++r,this))return s}function C5(e){return this.eachAfter(function(t){for(var r=+e(t.data)||0,s=t.children,l=s&&s.length;--l>=0;)r+=s[l].value;t.value=r})}function E5(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function F5(e){for(var t=this,r=S5(t,e),s=[t];t!==r;)t=t.parent,s.push(t);for(var l=s.length;e!==r;)s.splice(l,0,e),e=e.parent;return s}function S5(e,t){if(e===t)return e;var r=e.ancestors(),s=t.ancestors(),l=null;for(e=r.pop(),t=s.pop();e===t;)l=e,e=r.pop(),t=s.pop();return l}function I5(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function T5(){return Array.from(this)}function U5(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function L5(){var e=this,t=[];return e.each(function(r){r!==e&&t.push({source:r.parent,target:r})}),t}function*Q5(){var e=this,t,r=[e],s,l,c;do for(t=r.reverse(),r=[];e=t.pop();)if(yield e,s=e.children)for(l=0,c=s.length;l<c;++l)r.push(s[l]);while(r.length)}function Vg(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=M5)):t===void 0&&(t=P5);for(var r=new Yf(e),s,l=[r],c,h,a,d;s=l.pop();)if((h=t(s.data))&&(d=(h=Array.from(h)).length))for(s.children=h,a=d-1;a>=0;--a)l.push(c=h[a]=new Yf(h[a])),c.parent=s,c.depth=s.depth+1;return r.eachBefore(jv)}function k5(){return Vg(this).eachBefore(D5)}function P5(e){return e.children}function M5(e){return Array.isArray(e)?e[1]:null}function D5(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function jv(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function Yf(e){this.data=e,this.depth=this.height=0,this.parent=null}Yf.prototype=Vg.prototype={constructor:Yf,count:_5,each:w5,eachAfter:x5,eachBefore:b5,find:B5,sum:C5,sort:E5,path:F5,ancestors:I5,descendants:T5,leaves:U5,links:L5,copy:k5,[Symbol.iterator]:Q5};function Sm(e){return e==null?null:Rv(e)}function Rv(e){if(typeof e!="function")throw new Error;return e}function Tf(){return 0}function Uf(e){return function(){return e}}function N5(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function j5(e,t,r,s,l){for(var c=e.children,h,a=-1,d=c.length,_=e.value&&(s-t)/e.value;++a<d;)h=c[a],h.y0=r,h.y1=l,h.x0=t,h.x1=t+=h.value*_}var R5={depth:-1},R0={},Im={};function O5(e){return e.id}function H5(e){return e.parentId}function z5(){var e=O5,t=H5,r;function s(l){var c=Array.from(l),h=e,a=t,d,_,p,E,w,x,k,Q,R=new Map;if(r!=null){const M=c.map((K,Z)=>V5(r(K,Z,l))),O=M.map(O0),G=new Set(M).add("");for(const K of O)G.has(K)||(G.add(K),M.push(K),O.push(O0(K)),c.push(Im));h=(K,Z)=>M[Z],a=(K,Z)=>O[Z]}for(p=0,d=c.length;p<d;++p)_=c[p],x=c[p]=new Yf(_),(k=h(_,p,l))!=null&&(k+="")&&(Q=x.id=k,R.set(Q,R.has(Q)?R0:x)),(k=a(_,p,l))!=null&&(k+="")&&(x.parent=k);for(p=0;p<d;++p)if(x=c[p],k=x.parent){if(w=R.get(k),!w)throw new Error("missing: "+k);if(w===R0)throw new Error("ambiguous: "+k);w.children?w.children.push(x):w.children=[x],x.parent=w}else{if(E)throw new Error("multiple roots");E=x}if(!E)throw new Error("no root");if(r!=null){for(;E.data===Im&&E.children.length===1;)E=E.children[0],--d;for(let M=c.length-1;M>=0&&(x=c[M],x.data===Im);--M)x.data=null}if(E.parent=R5,E.eachBefore(function(M){M.depth=M.parent.depth+1,--d}).eachBefore(jv),E.parent=null,d>0)throw new Error("cycle");return E}return s.id=function(l){return arguments.length?(e=Sm(l),s):e},s.parentId=function(l){return arguments.length?(t=Sm(l),s):t},s.path=function(l){return arguments.length?(r=Sm(l),s):r},s}function V5(e){e=`${e}`;let t=e.length;return og(e,t-1)&&!og(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function O0(e){let t=e.length;if(t<2)return"";for(;--t>1&&!og(e,t););return e.slice(0,t)}function og(e,t){if(e[t]==="/"){let r=0;for(;t>0&&e[--t]==="\\";)++r;if(!(r&1))return!0}return!1}function K5(e,t,r,s,l){for(var c=e.children,h,a=-1,d=c.length,_=e.value&&(l-r)/e.value;++a<d;)h=c[a],h.x0=t,h.x1=s,h.y0=r,h.y1=r+=h.value*_}var G5=(1+Math.sqrt(5))/2;function q5(e,t,r,s,l,c){for(var h=[],a=t.children,d,_,p=0,E=0,w=a.length,x,k,Q=t.value,R,M,O,G,K,Z,$;p<w;){x=l-r,k=c-s;do R=a[E++].value;while(!R&&E<w);for(M=O=R,Z=Math.max(k/x,x/k)/(Q*e),$=R*R*Z,K=Math.max(O/$,$/M);E<w;++E){if(R+=_=a[E].value,_<M&&(M=_),_>O&&(O=_),$=R*R*Z,G=Math.max(O/$,$/M),G>K){R-=_;break}K=G}h.push(d={value:R,dice:x<k,children:a.slice(p,E)}),d.dice?j5(d,r,s,l,Q?s+=k*R/Q:c):K5(d,r,s,Q?r+=x*R/Q:l,c),Q-=R,p=E}return h}const W5=function e(t){function r(s,l,c,h,a){q5(t,s,l,c,h,a)}return r.ratio=function(s){return e((s=+s)>1?s:1)},r}(G5);function H0(){var e=W5,t=!1,r=1,s=1,l=[0],c=Tf,h=Tf,a=Tf,d=Tf,_=Tf;function p(w){return w.x0=w.y0=0,w.x1=r,w.y1=s,w.eachBefore(E),l=[0],t&&w.eachBefore(N5),w}function E(w){var x=l[w.depth],k=w.x0+x,Q=w.y0+x,R=w.x1-x,M=w.y1-x;R<k&&(k=R=(k+R)/2),M<Q&&(Q=M=(Q+M)/2),w.x0=k,w.y0=Q,w.x1=R,w.y1=M,w.children&&(x=l[w.depth+1]=c(w)/2,k+=_(w)-x,Q+=h(w)-x,R-=a(w)-x,M-=d(w)-x,R<k&&(k=R=(k+R)/2),M<Q&&(Q=M=(Q+M)/2),e(w,k,Q,R,M))}return p.round=function(w){return arguments.length?(t=!!w,p):t},p.size=function(w){return arguments.length?(r=+w[0],s=+w[1],p):[r,s]},p.tile=function(w){return arguments.length?(e=Rv(w),p):e},p.padding=function(w){return arguments.length?p.paddingInner(w).paddingOuter(w):p.paddingInner()},p.paddingInner=function(w){return arguments.length?(c=typeof w=="function"?w:Uf(+w),p):c},p.paddingOuter=function(w){return arguments.length?p.paddingTop(w).paddingRight(w).paddingBottom(w).paddingLeft(w):p.paddingTop()},p.paddingTop=function(w){return arguments.length?(h=typeof w=="function"?w:Uf(+w),p):h},p.paddingRight=function(w){return arguments.length?(a=typeof w=="function"?w:Uf(+w),p):a},p.paddingBottom=function(w){return arguments.length?(d=typeof w=="function"?w:Uf(+w),p):d},p.paddingLeft=function(w){return arguments.length?(_=typeof w=="function"?w:Uf(+w),p):_},p}function jp(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const z0=Symbol("implicit");function Fp(){var e=new Zm,t=[],r=[],s=z0;function l(c){let h=e.get(c);if(h===void 0){if(s!==z0)return s;e.set(c,h=t.push(c)-1)}return r[h%r.length]}return l.domain=function(c){if(!arguments.length)return t.slice();t=[],e=new Zm;for(const h of c)e.has(h)||e.set(h,t.push(h)-1);return l},l.range=function(c){return arguments.length?(r=Array.from(c),l):r.slice()},l.unknown=function(c){return arguments.length?(s=c,l):s},l.copy=function(){return Fp(t,r).unknown(s)},jp.apply(l,arguments),l}function eh(){var e=Fp().unknown(void 0),t=e.domain,r=e.range,s=0,l=1,c,h,a=!1,d=0,_=0,p=.5;delete e.unknown;function E(){var w=t().length,x=l<s,k=x?l:s,Q=x?s:l;c=(Q-k)/Math.max(1,w-d+_*2),a&&(c=Math.floor(c)),k+=(Q-k-c*(w-d))*p,h=c*(1-d),a&&(k=Math.round(k),h=Math.round(h));var R=d2(w).map(function(M){return k+c*M});return r(x?R.reverse():R)}return e.domain=function(w){return arguments.length?(t(w),E()):t()},e.range=function(w){return arguments.length?([s,l]=w,s=+s,l=+l,E()):[s,l]},e.rangeRound=function(w){return[s,l]=w,s=+s,l=+l,a=!0,E()},e.bandwidth=function(){return h},e.step=function(){return c},e.round=function(w){return arguments.length?(a=!!w,E()):a},e.padding=function(w){return arguments.length?(d=Math.min(1,_=+w),E()):d},e.paddingInner=function(w){return arguments.length?(d=Math.min(1,w),E()):d},e.paddingOuter=function(w){return arguments.length?(_=+w,E()):_},e.align=function(w){return arguments.length?(p=Math.max(0,Math.min(1,w)),E()):p},e.copy=function(){return eh(t(),[s,l]).round(a).paddingInner(d).paddingOuter(_).align(p)},jp.apply(E(),arguments)}function X5(e){return function(){return e}}function Z5(e){return+e}var V0=[0,1];function hc(e){return e}function Ag(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:X5(isNaN(t)?NaN:.5)}function J5(e,t){var r;return e>t&&(r=e,e=t,t=r),function(s){return Math.max(e,Math.min(t,s))}}function Y5(e,t,r){var s=e[0],l=e[1],c=t[0],h=t[1];return l<s?(s=Ag(l,s),c=r(h,c)):(s=Ag(s,l),c=r(c,h)),function(a){return c(s(a))}}function $5(e,t,r){var s=Math.min(e.length,t.length)-1,l=new Array(s),c=new Array(s),h=-1;for(e[s]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++h<s;)l[h]=Ag(e[h],e[h+1]),c[h]=r(t[h],t[h+1]);return function(a){var d=n2(e,a,1,s)-1;return c[d](l[d](a))}}function Ov(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Hv(){var e=V0,t=V0,r=Dg,s,l,c,h=hc,a,d,_;function p(){var w=Math.min(e.length,t.length);return h!==hc&&(h=J5(e[0],e[w-1])),a=w>2?$5:Y5,d=_=null,E}function E(w){return w==null||isNaN(w=+w)?c:(d||(d=a(e.map(s),t,r)))(s(h(w)))}return E.invert=function(w){return h(l((_||(_=a(t,e.map(s),Ol)))(w)))},E.domain=function(w){return arguments.length?(e=Array.from(w,Z5),p()):e.slice()},E.range=function(w){return arguments.length?(t=Array.from(w),p()):t.slice()},E.rangeRound=function(w){return t=Array.from(w),r=Ex,p()},E.clamp=function(w){return arguments.length?(h=w?!0:hc,p()):h!==hc},E.interpolate=function(w){return arguments.length?(r=w,p()):r},E.unknown=function(w){return arguments.length?(c=w,E):c},function(w,x){return s=w,l=x,p()}}function eC(){return Hv()(hc,hc)}function tC(e,t,r,s){var l=f2(e,t,r),c;switch(s=Ep(s??",f"),s.type){case"s":{var h=Math.max(Math.abs(e),Math.abs(t));return s.precision==null&&!isNaN(c=g5(l,h))&&(s.precision=c),Nv(s,h)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(c=y5(l,Math.max(Math.abs(e),Math.abs(t))))&&(s.precision=c-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(c=m5(l))&&(s.precision=c-(s.type==="%")*2);break}}return zg(s)}function zv(e){var t=e.domain;return e.ticks=function(r){var s=t();return h2(s[0],s[s.length-1],r??10)},e.tickFormat=function(r,s){var l=t();return tC(l[0],l[l.length-1],r??10,s)},e.nice=function(r){r==null&&(r=10);var s=t(),l=0,c=s.length-1,h=s[l],a=s[c],d,_,p=10;for(a<h&&(_=h,h=a,a=_,_=l,l=c,c=_);p-- >0;){if(_=ov(h,a,r),_===d)return s[l]=h,s[c]=a,t(s);if(_>0)h=Math.floor(h/_)*_,a=Math.ceil(a/_)*_;else if(_<0)h=Math.ceil(h*_)/_,a=Math.floor(a*_)/_;else break;d=_}return e},e}function wu(){var e=eC();return e.copy=function(){return Ov(e,wu())},jp.apply(e,arguments),zv(e)}function K0(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function rC(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function nC(e){return e<0?-e*e:e*e}function iC(e){var t=e(hc,hc),r=1;function s(){return r===1?e(hc,hc):r===.5?e(rC,nC):e(K0(r),K0(1/r))}return t.exponent=function(l){return arguments.length?(r=+l,s()):r},zv(t)}function Vv(){var e=iC(Hv());return e.copy=function(){return Ov(e,Vv()).exponent(e.exponent())},jp.apply(e,arguments),e}function sC(){return Vv.apply(null,arguments).exponent(.5)}const Tm=new Date,Um=new Date;function yc(e,t,r,s){function l(c){return e(c=arguments.length===0?new Date:new Date(+c)),c}return l.floor=c=>(e(c=new Date(+c)),c),l.ceil=c=>(e(c=new Date(c-1)),t(c,1),e(c),c),l.round=c=>{const h=l(c),a=l.ceil(c);return c-h<a-c?h:a},l.offset=(c,h)=>(t(c=new Date(+c),h==null?1:Math.floor(h)),c),l.range=(c,h,a)=>{const d=[];if(c=l.ceil(c),a=a==null?1:Math.floor(a),!(c<h)||!(a>0))return d;let _;do d.push(_=new Date(+c)),t(c,a),e(c);while(_<c&&c<h);return d},l.filter=c=>yc(h=>{if(h>=h)for(;e(h),!c(h);)h.setTime(h-1)},(h,a)=>{if(h>=h)if(a<0)for(;++a<=0;)for(;t(h,-1),!c(h););else for(;--a>=0;)for(;t(h,1),!c(h););}),r&&(l.count=(c,h)=>(Tm.setTime(+c),Um.setTime(+h),e(Tm),e(Um),Math.floor(r(Tm,Um))),l.every=c=>(c=Math.floor(c),!isFinite(c)||!(c>0)?null:c>1?l.filter(s?h=>s(h)%c===0:h=>l.count(0,h)%c===0):l)),l}const aC=1e3,Kg=aC*60,oC=Kg*60,$f=oC*24,Kv=$f*7,Gg=yc(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Kg)/$f,e=>e.getDate()-1);Gg.range;const qg=yc(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/$f,e=>e.getUTCDate()-1);qg.range;const AC=yc(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/$f,e=>Math.floor(e/$f));AC.range;function ih(e){return yc(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Kg)/Kv)}const Gv=ih(0),Sp=ih(1),lC=ih(2),cC=ih(3),Zh=ih(4),uC=ih(5),hC=ih(6);Gv.range;Sp.range;lC.range;cC.range;Zh.range;uC.range;hC.range;function sh(e){return yc(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/Kv)}const qv=sh(0),Ip=sh(1),fC=sh(2),dC=sh(3),Jh=sh(4),pC=sh(5),mC=sh(6);qv.range;Ip.range;fC.range;dC.range;Jh.range;pC.range;mC.range;const th=yc(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());th.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:yc(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});th.range;const rh=yc(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());rh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:yc(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});rh.range;function Lm(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Qm(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Lf(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function gC(e){var t=e.dateTime,r=e.date,s=e.time,l=e.periods,c=e.days,h=e.shortDays,a=e.months,d=e.shortMonths,_=Qf(l),p=kf(l),E=Qf(c),w=kf(c),x=Qf(h),k=kf(h),Q=Qf(a),R=kf(a),M=Qf(d),O=kf(d),G={a:Qe,A:Te,b:tt,B:Oe,c:null,d:J0,e:J0,f:RC,g:ZC,G:YC,H:DC,I:NC,j:jC,L:Wv,m:OC,M:HC,p:Mt,q:ne,Q:e1,s:t1,S:zC,u:VC,U:KC,V:GC,w:qC,W:WC,x:null,X:null,y:XC,Y:JC,Z:$C,"%":$0},K={a:Se,A:ke,b:Ke,B:at,c:null,d:Y0,e:Y0,f:n4,g:f4,G:p4,H:e4,I:t4,j:r4,L:Zv,m:i4,M:s4,p:dt,q:Bt,Q:e1,s:t1,S:a4,u:o4,U:A4,V:l4,w:c4,W:u4,x:null,X:null,y:h4,Y:d4,Z:m4,"%":$0},Z={a:ue,A:ee,b:se,B:Be,c:me,d:X0,e:X0,f:QC,g:W0,G:q0,H:Z0,I:Z0,j:IC,L:LC,m:SC,M:TC,p:_e,q:FC,Q:PC,s:MC,S:UC,u:bC,U:xC,V:BC,w:wC,W:CC,x:Pe,X:ge,y:W0,Y:q0,Z:EC,"%":kC};G.x=$(r,G),G.X=$(s,G),G.c=$(t,G),K.x=$(r,K),K.X=$(s,K),K.c=$(t,K);function $(Ge,rt){return function(Ut){var ht=[],Nt=-1,dr=0,Lt=Ge.length,ze,gr,sr;for(Ut instanceof Date||(Ut=new Date(+Ut));++Nt<Lt;)Ge.charCodeAt(Nt)===37&&(ht.push(Ge.slice(dr,Nt)),(gr=G0[ze=Ge.charAt(++Nt)])!=null?ze=Ge.charAt(++Nt):gr=ze==="e"?" ":"0",(sr=rt[ze])&&(ze=sr(Ut,gr)),ht.push(ze),dr=Nt+1);return ht.push(Ge.slice(dr,Nt)),ht.join("")}}function he(Ge,rt){return function(Ut){var ht=Lf(1900,void 0,1),Nt=fe(ht,Ge,Ut+="",0),dr,Lt;if(Nt!=Ut.length)return null;if("Q"in ht)return new Date(ht.Q);if("s"in ht)return new Date(ht.s*1e3+("L"in ht?ht.L:0));if(rt&&!("Z"in ht)&&(ht.Z=0),"p"in ht&&(ht.H=ht.H%12+ht.p*12),ht.m===void 0&&(ht.m="q"in ht?ht.q:0),"V"in ht){if(ht.V<1||ht.V>53)return null;"w"in ht||(ht.w=1),"Z"in ht?(dr=Qm(Lf(ht.y,0,1)),Lt=dr.getUTCDay(),dr=Lt>4||Lt===0?Ip.ceil(dr):Ip(dr),dr=qg.offset(dr,(ht.V-1)*7),ht.y=dr.getUTCFullYear(),ht.m=dr.getUTCMonth(),ht.d=dr.getUTCDate()+(ht.w+6)%7):(dr=Lm(Lf(ht.y,0,1)),Lt=dr.getDay(),dr=Lt>4||Lt===0?Sp.ceil(dr):Sp(dr),dr=Gg.offset(dr,(ht.V-1)*7),ht.y=dr.getFullYear(),ht.m=dr.getMonth(),ht.d=dr.getDate()+(ht.w+6)%7)}else("W"in ht||"U"in ht)&&("w"in ht||(ht.w="u"in ht?ht.u%7:"W"in ht?1:0),Lt="Z"in ht?Qm(Lf(ht.y,0,1)).getUTCDay():Lm(Lf(ht.y,0,1)).getDay(),ht.m=0,ht.d="W"in ht?(ht.w+6)%7+ht.W*7-(Lt+5)%7:ht.w+ht.U*7-(Lt+6)%7);return"Z"in ht?(ht.H+=ht.Z/100|0,ht.M+=ht.Z%100,Qm(ht)):Lm(ht)}}function fe(Ge,rt,Ut,ht){for(var Nt=0,dr=rt.length,Lt=Ut.length,ze,gr;Nt<dr;){if(ht>=Lt)return-1;if(ze=rt.charCodeAt(Nt++),ze===37){if(ze=rt.charAt(Nt++),gr=Z[ze in G0?rt.charAt(Nt++):ze],!gr||(ht=gr(Ge,Ut,ht))<0)return-1}else if(ze!=Ut.charCodeAt(ht++))return-1}return ht}function _e(Ge,rt,Ut){var ht=_.exec(rt.slice(Ut));return ht?(Ge.p=p.get(ht[0].toLowerCase()),Ut+ht[0].length):-1}function ue(Ge,rt,Ut){var ht=x.exec(rt.slice(Ut));return ht?(Ge.w=k.get(ht[0].toLowerCase()),Ut+ht[0].length):-1}function ee(Ge,rt,Ut){var ht=E.exec(rt.slice(Ut));return ht?(Ge.w=w.get(ht[0].toLowerCase()),Ut+ht[0].length):-1}function se(Ge,rt,Ut){var ht=M.exec(rt.slice(Ut));return ht?(Ge.m=O.get(ht[0].toLowerCase()),Ut+ht[0].length):-1}function Be(Ge,rt,Ut){var ht=Q.exec(rt.slice(Ut));return ht?(Ge.m=R.get(ht[0].toLowerCase()),Ut+ht[0].length):-1}function me(Ge,rt,Ut){return fe(Ge,t,rt,Ut)}function Pe(Ge,rt,Ut){return fe(Ge,r,rt,Ut)}function ge(Ge,rt,Ut){return fe(Ge,s,rt,Ut)}function Qe(Ge){return h[Ge.getDay()]}function Te(Ge){return c[Ge.getDay()]}function tt(Ge){return d[Ge.getMonth()]}function Oe(Ge){return a[Ge.getMonth()]}function Mt(Ge){return l[+(Ge.getHours()>=12)]}function ne(Ge){return 1+~~(Ge.getMonth()/3)}function Se(Ge){return h[Ge.getUTCDay()]}function ke(Ge){return c[Ge.getUTCDay()]}function Ke(Ge){return d[Ge.getUTCMonth()]}function at(Ge){return a[Ge.getUTCMonth()]}function dt(Ge){return l[+(Ge.getUTCHours()>=12)]}function Bt(Ge){return 1+~~(Ge.getUTCMonth()/3)}return{format:function(Ge){var rt=$(Ge+="",G);return rt.toString=function(){return Ge},rt},parse:function(Ge){var rt=he(Ge+="",!1);return rt.toString=function(){return Ge},rt},utcFormat:function(Ge){var rt=$(Ge+="",K);return rt.toString=function(){return Ge},rt},utcParse:function(Ge){var rt=he(Ge+="",!0);return rt.toString=function(){return Ge},rt}}}var G0={"-":"",_:" ",0:"0"},Xa=/^\s*\d+/,yC=/^%/,vC=/[\\^$*+?|[\]().{}]/g;function ki(e,t,r){var s=e<0?"-":"",l=(s?-e:e)+"",c=l.length;return s+(c<r?new Array(r-c+1).join(t)+l:l)}function _C(e){return e.replace(vC,"\\$&")}function Qf(e){return new RegExp("^(?:"+e.map(_C).join("|")+")","i")}function kf(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function wC(e,t,r){var s=Xa.exec(t.slice(r,r+1));return s?(e.w=+s[0],r+s[0].length):-1}function bC(e,t,r){var s=Xa.exec(t.slice(r,r+1));return s?(e.u=+s[0],r+s[0].length):-1}function xC(e,t,r){var s=Xa.exec(t.slice(r,r+2));return s?(e.U=+s[0],r+s[0].length):-1}function BC(e,t,r){var s=Xa.exec(t.slice(r,r+2));return s?(e.V=+s[0],r+s[0].length):-1}function CC(e,t,r){var s=Xa.exec(t.slice(r,r+2));return s?(e.W=+s[0],r+s[0].length):-1}function q0(e,t,r){var s=Xa.exec(t.slice(r,r+4));return s?(e.y=+s[0],r+s[0].length):-1}function W0(e,t,r){var s=Xa.exec(t.slice(r,r+2));return s?(e.y=+s[0]+(+s[0]>68?1900:2e3),r+s[0].length):-1}function EC(e,t,r){var s=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return s?(e.Z=s[1]?0:-(s[2]+(s[3]||"00")),r+s[0].length):-1}function FC(e,t,r){var s=Xa.exec(t.slice(r,r+1));return s?(e.q=s[0]*3-3,r+s[0].length):-1}function SC(e,t,r){var s=Xa.exec(t.slice(r,r+2));return s?(e.m=s[0]-1,r+s[0].length):-1}function X0(e,t,r){var s=Xa.exec(t.slice(r,r+2));return s?(e.d=+s[0],r+s[0].length):-1}function IC(e,t,r){var s=Xa.exec(t.slice(r,r+3));return s?(e.m=0,e.d=+s[0],r+s[0].length):-1}function Z0(e,t,r){var s=Xa.exec(t.slice(r,r+2));return s?(e.H=+s[0],r+s[0].length):-1}function TC(e,t,r){var s=Xa.exec(t.slice(r,r+2));return s?(e.M=+s[0],r+s[0].length):-1}function UC(e,t,r){var s=Xa.exec(t.slice(r,r+2));return s?(e.S=+s[0],r+s[0].length):-1}function LC(e,t,r){var s=Xa.exec(t.slice(r,r+3));return s?(e.L=+s[0],r+s[0].length):-1}function QC(e,t,r){var s=Xa.exec(t.slice(r,r+6));return s?(e.L=Math.floor(s[0]/1e3),r+s[0].length):-1}function kC(e,t,r){var s=yC.exec(t.slice(r,r+1));return s?r+s[0].length:-1}function PC(e,t,r){var s=Xa.exec(t.slice(r));return s?(e.Q=+s[0],r+s[0].length):-1}function MC(e,t,r){var s=Xa.exec(t.slice(r));return s?(e.s=+s[0],r+s[0].length):-1}function J0(e,t){return ki(e.getDate(),t,2)}function DC(e,t){return ki(e.getHours(),t,2)}function NC(e,t){return ki(e.getHours()%12||12,t,2)}function jC(e,t){return ki(1+Gg.count(th(e),e),t,3)}function Wv(e,t){return ki(e.getMilliseconds(),t,3)}function RC(e,t){return Wv(e,t)+"000"}function OC(e,t){return ki(e.getMonth()+1,t,2)}function HC(e,t){return ki(e.getMinutes(),t,2)}function zC(e,t){return ki(e.getSeconds(),t,2)}function VC(e){var t=e.getDay();return t===0?7:t}function KC(e,t){return ki(Gv.count(th(e)-1,e),t,2)}function Xv(e){var t=e.getDay();return t>=4||t===0?Zh(e):Zh.ceil(e)}function GC(e,t){return e=Xv(e),ki(Zh.count(th(e),e)+(th(e).getDay()===4),t,2)}function qC(e){return e.getDay()}function WC(e,t){return ki(Sp.count(th(e)-1,e),t,2)}function XC(e,t){return ki(e.getFullYear()%100,t,2)}function ZC(e,t){return e=Xv(e),ki(e.getFullYear()%100,t,2)}function JC(e,t){return ki(e.getFullYear()%1e4,t,4)}function YC(e,t){var r=e.getDay();return e=r>=4||r===0?Zh(e):Zh.ceil(e),ki(e.getFullYear()%1e4,t,4)}function $C(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ki(t/60|0,"0",2)+ki(t%60,"0",2)}function Y0(e,t){return ki(e.getUTCDate(),t,2)}function e4(e,t){return ki(e.getUTCHours(),t,2)}function t4(e,t){return ki(e.getUTCHours()%12||12,t,2)}function r4(e,t){return ki(1+qg.count(rh(e),e),t,3)}function Zv(e,t){return ki(e.getUTCMilliseconds(),t,3)}function n4(e,t){return Zv(e,t)+"000"}function i4(e,t){return ki(e.getUTCMonth()+1,t,2)}function s4(e,t){return ki(e.getUTCMinutes(),t,2)}function a4(e,t){return ki(e.getUTCSeconds(),t,2)}function o4(e){var t=e.getUTCDay();return t===0?7:t}function A4(e,t){return ki(qv.count(rh(e)-1,e),t,2)}function Jv(e){var t=e.getUTCDay();return t>=4||t===0?Jh(e):Jh.ceil(e)}function l4(e,t){return e=Jv(e),ki(Jh.count(rh(e),e)+(rh(e).getUTCDay()===4),t,2)}function c4(e){return e.getUTCDay()}function u4(e,t){return ki(Ip.count(rh(e)-1,e),t,2)}function h4(e,t){return ki(e.getUTCFullYear()%100,t,2)}function f4(e,t){return e=Jv(e),ki(e.getUTCFullYear()%100,t,2)}function d4(e,t){return ki(e.getUTCFullYear()%1e4,t,4)}function p4(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Jh(e):Jh.ceil(e),ki(e.getUTCFullYear()%1e4,t,4)}function m4(){return"+0000"}function $0(){return"%"}function e1(e){return+e}function t1(e){return Math.floor(+e/1e3)}var Ph,Rp,Wg;g4({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function g4(e){return Ph=gC(e),Rp=Ph.format,Wg=Ph.parse,Ph.utcFormat,Ph.utcParse,Ph}function Oh(e,t,r){this.k=e,this.x=t,this.y=r}Oh.prototype={constructor:Oh,scale:function(e){return e===1?this:new Oh(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Oh(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new Oh(1,0,0);Oh.prototype;function r1(e,t,r){const s=e.slice();return s[59]=t[r],s}function n1(e,t,r){const s=e.slice();return s[59]=t[r],s}function y4(e){let t,r,s;return{c(){t=kt("h1"),t.textContent="Louisiana Locked Up:",r=$t(),s=kt("h1"),s.textContent="A Problem in Every Parish",ce(t,"class","svelte-bpiw7r"),ce(s,"class","sub svelte-bpiw7r")},m(l,c){ot(l,t,c),ot(l,r,c),ot(l,s,c)},p:bn,d(l){l&&it(t),l&&it(r),l&&it(s)}}}function i1(e){let t,r,s;function l(h){e[46](h)}let c={threshold:N4,$$slots:{foreground:[M4],background:[P4]},$$scope:{ctx:e}};return e[0].map!==void 0&&(c.id=e[0].map),t=new bw({props:c}),qa.push(()=>Eg(t,"id",l)),{c(){yr(t.$$.fragment)},m(h,a){pr(t,h,a),s=!0},p(h,a){const d={};a[0]&2147483647|a[1]&15|a[2]&4&&(d.$$scope={dirty:a,ctx:h}),!r&&a[0]&1&&(r=!0,d.id=h[0].map,Cg(()=>r=!1)),t.$set(d)},i(h){s||(Pt(t.$$.fragment,h),s=!0)},o(h){Gt(t.$$.fragment,h),s=!1},d(h){mr(t,h)}}}function v4(e){let t,r;return t=new ko({props:{id:"rest-fill",type:"fill",paint:{"fill-color":"#fff","fill-opacity":.4}}}),{c(){yr(t.$$.fragment)},m(s,l){pr(t,s,l),r=!0},p:bn,i(s){r||(Pt(t.$$.fragment,s),r=!0)},o(s){Gt(t.$$.fragment,s),r=!1},d(s){mr(t,s)}}}function _4(e){let t,r;return t=new ko({props:{id:"cad-fill",idKey:"county_key",type:"fill",paint:{"fill-color":"#97DFD1","fill-opacity":e[24]}}}),{c(){yr(t.$$.fragment)},m(s,l){pr(t,s,l),r=!0},p(s,l){const c={};l[0]&16777216&&(c.paint={"fill-color":"#97DFD1","fill-opacity":s[24]}),t.$set(c)},i(s){r||(Pt(t.$$.fragment,s),r=!0)},o(s){Gt(t.$$.fragment,s),r=!1},d(s){mr(t,s)}}}function w4(e){let t,r;return t=new ko({props:{id:"sad-fill",idKey:"county_key",type:"line",paint:{"line-color":"#fff000","line-opacity":e[25],"line-width":5}}}),{c(){yr(t.$$.fragment)},m(s,l){pr(t,s,l),r=!0},p(s,l){const c={};l[0]&33554432&&(c.paint={"line-color":"#fff000","line-opacity":s[25],"line-width":5}),t.$set(c)},i(s){r||(Pt(t.$$.fragment,s),r=!0)},o(s){Gt(t.$$.fragment,s),r=!1},d(s){mr(t,s)}}}function b4(e){let t,r;return t=new ko({props:{id:"outline-line",idKey:"fips",type:"line",paint:{"line-color":"#333","line-width":1.5}}}),{c(){yr(t.$$.fragment)},m(s,l){pr(t,s,l),r=!0},p:bn,i(s){r||(Pt(t.$$.fragment,s),r=!0)},o(s){Gt(t.$$.fragment,s),r=!1},d(s){mr(t,s)}}}function x4(e){let t,r;return t=new Dw({props:{content:e[18]&&e[21]=="pretrial"?`<strong>${e[2].parish.lookup[e[18]].name}</strong><br/>
                    On ${e[40](e[2].parish.lookup[e[18]].pretrial_date)},  ${Ou(e[2].parish.lookup[e[18]].total_jail_pretrial.toFixed(0))} people (${e[2].parish.lookup[e[18]].jail_pretrial_rate.toFixed(0)} per 10,000 residents) were detained pretrial in ${e[2].parish.lookup[e[18]].name} (population ${Ou(e[2].parish.lookup[e[18]].total_pop)}).`:e[18]&&e[21]=="admission"?`<strong>${e[2].parish.lookup[e[18]].name}</strong><br/>
                    In ${e[2].parish.lookup[e[18]].year},  ${e[2].parish.lookup[e[18]].prison_adm_count} people (${e[2].parish.lookup[e[18]].prison_adm_rate.toFixed(0)} per 10,000 residents) were sent to prison from ${e[2].parish.lookup[e[18]].name} (population ${Ou(e[2].parish.lookup[e[18]].total_pop)}).`:e[18]&&e[21]=="none"||e[18]&&e[21]=="over_1000_19"||e[18]&&e[21]=="over_1000_99"?`<strong>${e[2].parish.lookup[e[18]].name}</strong>`:""}}),{c(){yr(t.$$.fragment)},m(s,l){pr(t,s,l),r=!0},p(s,l){const c={};l[0]&2359300&&(c.content=s[18]&&s[21]=="pretrial"?`<strong>${s[2].parish.lookup[s[18]].name}</strong><br/>
                    On ${s[40](s[2].parish.lookup[s[18]].pretrial_date)},  ${Ou(s[2].parish.lookup[s[18]].total_jail_pretrial.toFixed(0))} people (${s[2].parish.lookup[s[18]].jail_pretrial_rate.toFixed(0)} per 10,000 residents) were detained pretrial in ${s[2].parish.lookup[s[18]].name} (population ${Ou(s[2].parish.lookup[s[18]].total_pop)}).`:s[18]&&s[21]=="admission"?`<strong>${s[2].parish.lookup[s[18]].name}</strong><br/>
                    In ${s[2].parish.lookup[s[18]].year},  ${s[2].parish.lookup[s[18]].prison_adm_count} people (${s[2].parish.lookup[s[18]].prison_adm_rate.toFixed(0)} per 10,000 residents) were sent to prison from ${s[2].parish.lookup[s[18]].name} (population ${Ou(s[2].parish.lookup[s[18]].total_pop)}).`:s[18]&&s[21]=="none"||s[18]&&s[21]=="over_1000_19"||s[18]&&s[21]=="over_1000_99"?`<strong>${s[2].parish.lookup[s[18]].name}</strong>`:""),t.$set(c)},i(s){r||(Pt(t.$$.fragment,s),r=!0)},o(s){Gt(t.$$.fragment,s),r=!1},d(s){mr(t,s)}}}function B4(e){let t,r,s,l;return t=new ko({props:{id:"lad-fill",idKey:"code",colorKey:e[21]+"_color",outlineKey:e[21]+"_outline",data:e[1].parish.indicators,type:"fill",select:!0,selected:e[19],clickIgnore:!e[23],hover:!0,hovered:e[18],highlight:!0,highlighted:e[20],paint:{"fill-color":["case",["!=",["feature-state","color"],null],["feature-state","color"],"rgba(255, 255, 255, 0)"],"fill-opacity":1},$$slots:{default:[x4]},$$scope:{ctx:e}}}),t.$on("select",e[37]),t.$on("hover",e[39]),s=new ko({props:{id:"lad-line",type:"line",paint:{"line-color":["case",["boolean",["feature-state","hovered"],!1],"#ff9000",["boolean",["feature-state","selected"],!1],"black",["boolean",["feature-state","highlighted"],!1],"black","#fff"],"line-width":["case",["boolean",["feature-state","hovered"],!1],2,["boolean",["feature-state","selected"],!1],2,["boolean",["feature-state","highlighted"],!1],3,.5]}}}),{c(){yr(t.$$.fragment),r=$t(),yr(s.$$.fragment)},m(c,h){pr(t,c,h),ot(c,r,h),pr(s,c,h),l=!0},p(c,h){const a={};h[0]&2097152&&(a.colorKey=c[21]+"_color"),h[0]&2097152&&(a.outlineKey=c[21]+"_outline"),h[0]&2&&(a.data=c[1].parish.indicators),h[0]&524288&&(a.selected=c[19]),h[0]&8388608&&(a.clickIgnore=!c[23]),h[0]&262144&&(a.hovered=c[18]),h[0]&1048576&&(a.highlighted=c[20]),h[0]&2359300|h[2]&4&&(a.$$scope={dirty:h,ctx:c}),t.$set(a)},i(c){l||(Pt(t.$$.fragment,c),Pt(s.$$.fragment,c),l=!0)},o(c){Gt(t.$$.fragment,c),Gt(s.$$.fragment,c),l=!1},d(c){mr(t,c),c&&it(r),mr(s,c)}}}function C4(e){let t,r,s,l;return t=new ko({props:{id:"pad-fill",idKey:"geopin",type:"fill",paint:{"fill-color":"#ff3300","fill-opacity":e[26]}}}),s=new ko({props:{id:"bldg-labels",type:"symbol",paint:{"text-halo-width":.75,"text-halo-color":"#fff","text-color":"#223476","text-opacity":e[26]},layout:{"text-field":["get","name"],visibility:"visible","text-variable-anchor":["top","bottom","left","right"],"text-radial-offset":.5,"text-size":14,"text-justify":"auto","text-padding":5}}}),{c(){yr(t.$$.fragment),r=$t(),yr(s.$$.fragment)},m(c,h){pr(t,c,h),ot(c,r,h),pr(s,c,h),l=!0},p(c,h){const a={};h[0]&67108864&&(a.paint={"fill-color":"#ff3300","fill-opacity":c[26]}),t.$set(a);const d={};h[0]&67108864&&(d.paint={"text-halo-width":.75,"text-halo-color":"#fff","text-color":"#223476","text-opacity":c[26]}),s.$set(d)},i(c){l||(Pt(t.$$.fragment,c),Pt(s.$$.fragment,c),l=!0)},o(c){Gt(t.$$.fragment,c),Gt(s.$$.fragment,c),l=!1},d(c){mr(t,c),c&&it(r),mr(s,c)}}}function E4(e){let t,r,s,l;return t=new ko({props:{id:"ead-fill",idKey:"geopin",type:"fill",paint:{"fill-color":"#ff3300","fill-opacity":e[27]}}}),s=new ko({props:{id:"bldg-labels2",type:"symbol",paint:{"text-halo-width":1,"text-halo-color":"#fff","text-color":"#223476","text-opacity":e[27]},layout:{"text-field":["get","name"],visibility:"visible","text-variable-anchor":["top","bottom","left","right"],"text-radial-offset":.5,"text-size":14,"text-justify":"auto","text-padding":5}}}),{c(){yr(t.$$.fragment),r=$t(),yr(s.$$.fragment)},m(c,h){pr(t,c,h),ot(c,r,h),pr(s,c,h),l=!0},p(c,h){const a={};h[0]&134217728&&(a.paint={"fill-color":"#ff3300","fill-opacity":c[27]}),t.$set(a);const d={};h[0]&134217728&&(d.paint={"text-halo-width":1,"text-halo-color":"#fff","text-color":"#223476","text-opacity":c[27]}),s.$set(d)},i(c){l||(Pt(t.$$.fragment,c),Pt(s.$$.fragment,c),l=!0)},o(c){Gt(t.$$.fragment,c),Gt(s.$$.fragment,c),l=!1},d(c){mr(t,c),c&&it(r),mr(s,c)}}}function F4(e){let t,r;return t=new ko({props:{id:"facs",idKey:"uuid",data:e[3].facility.indicators,colorKey:e[22]+"_color",type:"circle",paint:{"circle-stroke-width":e[29],"circle-stroke-color":e[30],"circle-color":e[28],"circle-stroke-opacity":["get","GT_1000_beds_99"],"circle-radius":["step",["get","capacity"],5,100,7,500,9,1e3,11,2e3,13,5e3,10]}}}),{c(){yr(t.$$.fragment)},m(s,l){pr(t,s,l),r=!0},p(s,l){const c={};l[0]&8&&(c.data=s[3].facility.indicators),l[0]&4194304&&(c.colorKey=s[22]+"_color"),l[0]&1879048192&&(c.paint={"circle-stroke-width":s[29],"circle-stroke-color":s[30],"circle-color":s[28],"circle-stroke-opacity":["get","GT_1000_beds_99"],"circle-radius":["step",["get","capacity"],5,100,7,500,9,1e3,11,2e3,13,5e3,10]}),t.$set(c)},i(s){r||(Pt(t.$$.fragment,s),r=!0)},o(s){Gt(t.$$.fragment,s),r=!1},d(s){mr(t,s)}}}function S4(e){let t,r;return t=new ko({props:{id:"gead-labels",type:"symbol",paint:{"text-halo-width":1,"text-halo-color":"#fff","text-color":"#333a5c","text-opacity":e[33]},layout:{"text-field":["get","facility_name"],visibility:"visible","text-variable-anchor":["top","bottom","left","right"],"text-radial-offset":1.5,"text-size":10,"text-justify":"left","text-padding":5,"text-allow-overlap":!(e[36]<420)}}}),{c(){yr(t.$$.fragment)},m(s,l){pr(t,s,l),r=!0},p(s,l){const c={};l[1]&4&&(c.paint={"text-halo-width":1,"text-halo-color":"#fff","text-color":"#333a5c","text-opacity":s[33]}),t.$set(c)},i(s){r||(Pt(t.$$.fragment,s),r=!0)},o(s){Gt(t.$$.fragment,s),r=!1},d(s){mr(t,s)}}}function I4(e){let t,r;return t=new ko({props:{id:"grad-labels",type:"symbol",paint:{"text-halo-width":1,"text-halo-color":"#fff","text-color":"#333a5c","text-opacity":e[32]},layout:{"text-field":["get","facility_name"],visibility:"visible","text-anchor":"center","text-size":10,"text-justify":"left","text-padding":5,"text-allow-overlap":!(e[36]<420),"text-offset":[0,2]}}}),{c(){yr(t.$$.fragment)},m(s,l){pr(t,s,l),r=!0},p(s,l){const c={};l[1]&2&&(c.paint={"text-halo-width":1,"text-halo-color":"#fff","text-color":"#333a5c","text-opacity":s[32]}),t.$set(c)},i(s){r||(Pt(t.$$.fragment,s),r=!0)},o(s){Gt(t.$$.fragment,s),r=!1},d(s){mr(t,s)}}}function T4(e){let t,r;return t=new ko({props:{id:"glad-labels",type:"symbol",paint:{"text-halo-width":1,"text-halo-color":"#fff","text-color":"#333a5c","text-opacity":e[31]},layout:{"text-field":["get","facility_name"],visibility:"visible","text-variable-anchor":["top","bottom","left","right"],"text-radial-offset":.5,"text-size":10,"text-justify":"left","text-padding":5,"text-allow-overlap":!(e[36]<420)}}}),{c(){yr(t.$$.fragment)},m(s,l){pr(t,s,l),r=!0},p(s,l){const c={};l[1]&1&&(c.paint={"text-halo-width":1,"text-halo-color":"#fff","text-color":"#333a5c","text-opacity":s[31]}),t.$set(c)},i(s){r||(Pt(t.$$.fragment,s),r=!0)},o(s){Gt(t.$$.fragment,s),r=!1},d(s){mr(t,s)}}}function U4(e){let t,r;return t=new ko({props:{id:"gred-labels",type:"symbol",paint:{"text-halo-width":2.5,"text-halo-color":"#feffea","text-color":"#44986e","text-opacity":e[34]},layout:{"text-field":["get","rev"],visibility:"visible","text-variable-anchor":["top","bottom","left","right"],"text-radial-offset":.5,"text-size":["step",["get","est_doc_rev"],0,1,12,1e4,14,3e6,16,5e6,18,8e6,20,1e7,10],"text-justify":"left","text-padding":5}}}),{c(){yr(t.$$.fragment)},m(s,l){pr(t,s,l),r=!0},p(s,l){const c={};l[1]&8&&(c.paint={"text-halo-width":2.5,"text-halo-color":"#feffea","text-color":"#44986e","text-opacity":s[34]}),t.$set(c)},i(s){r||(Pt(t.$$.fragment,s),r=!0)},o(s){Gt(t.$$.fragment,s),r=!1},d(s){mr(t,s)}}}function L4(e){let t,r,s,l,c,h,a,d,_,p,E,w,x,k,Q,R,M,O,G,K,Z,$,he,fe;return t=new KA({props:{id:"rest",type:"geojson",data:e[7],maxzoom:24,$$slots:{default:[v4]},$$scope:{ctx:e}}}),s=new KA({props:{id:"cad",type:"geojson",data:e[6],maxzoom:22,$$slots:{default:[_4]},$$scope:{ctx:e}}}),c=new KA({props:{id:"sad",type:"geojson",data:e[5],maxzoom:22,$$slots:{default:[w4]},$$scope:{ctx:e}}}),a=new KA({props:{id:"outline",type:"geojson",data:e[11],maxzoom:22,$$slots:{default:[b4]},$$scope:{ctx:e}}}),_=new KA({props:{id:"lad",type:"geojson",data:e[4],promoteId:"AREACD",maxzoom:22,$$slots:{default:[B4]},$$scope:{ctx:e}}}),E=new KA({props:{id:"pad",type:"geojson",data:e[9],maxzoom:24,$$slots:{default:[C4]},$$scope:{ctx:e}}}),x=new KA({props:{id:"ead",type:"geojson",data:e[10],maxzoom:24,$$slots:{default:[E4]},$$scope:{ctx:e}}}),Q=new KA({props:{id:"rad",type:"geojson",data:e[12],maxzoom:22,promoteId:"uuid",$$slots:{default:[F4]},$$scope:{ctx:e}}}),M=new KA({props:{id:"gead",type:"geojson",data:e[15],maxzoom:24,$$slots:{default:[S4]},$$scope:{ctx:e}}}),G=new KA({props:{id:"grad",type:"geojson",data:e[14],maxzoom:24,$$slots:{default:[I4]},$$scope:{ctx:e}}}),Z=new KA({props:{id:"glad",type:"geojson",data:e[13],maxzoom:24,$$slots:{default:[T4]},$$scope:{ctx:e}}}),he=new KA({props:{id:"gred",type:"geojson",data:e[16],maxzoom:24,$$slots:{default:[U4]},$$scope:{ctx:e}}}),{c(){yr(t.$$.fragment),r=$t(),yr(s.$$.fragment),l=$t(),yr(c.$$.fragment),h=$t(),yr(a.$$.fragment),d=$t(),yr(_.$$.fragment),p=$t(),yr(E.$$.fragment),w=$t(),yr(x.$$.fragment),k=$t(),yr(Q.$$.fragment),R=$t(),yr(M.$$.fragment),O=$t(),yr(G.$$.fragment),K=$t(),yr(Z.$$.fragment),$=$t(),yr(he.$$.fragment)},m(_e,ue){pr(t,_e,ue),ot(_e,r,ue),pr(s,_e,ue),ot(_e,l,ue),pr(c,_e,ue),ot(_e,h,ue),pr(a,_e,ue),ot(_e,d,ue),pr(_,_e,ue),ot(_e,p,ue),pr(E,_e,ue),ot(_e,w,ue),pr(x,_e,ue),ot(_e,k,ue),pr(Q,_e,ue),ot(_e,R,ue),pr(M,_e,ue),ot(_e,O,ue),pr(G,_e,ue),ot(_e,K,ue),pr(Z,_e,ue),ot(_e,$,ue),pr(he,_e,ue),fe=!0},p(_e,ue){const ee={};ue[0]&128&&(ee.data=_e[7]),ue[2]&4&&(ee.$$scope={dirty:ue,ctx:_e}),t.$set(ee);const se={};ue[0]&64&&(se.data=_e[6]),ue[0]&16777216|ue[2]&4&&(se.$$scope={dirty:ue,ctx:_e}),s.$set(se);const Be={};ue[0]&32&&(Be.data=_e[5]),ue[0]&33554432|ue[2]&4&&(Be.$$scope={dirty:ue,ctx:_e}),c.$set(Be);const me={};ue[0]&2048&&(me.data=_e[11]),ue[2]&4&&(me.$$scope={dirty:ue,ctx:_e}),a.$set(me);const Pe={};ue[0]&16&&(Pe.data=_e[4]),ue[0]&12320774|ue[2]&4&&(Pe.$$scope={dirty:ue,ctx:_e}),_.$set(Pe);const ge={};ue[0]&512&&(ge.data=_e[9]),ue[0]&67108864|ue[2]&4&&(ge.$$scope={dirty:ue,ctx:_e}),E.$set(ge);const Qe={};ue[0]&1024&&(Qe.data=_e[10]),ue[0]&134217728|ue[2]&4&&(Qe.$$scope={dirty:ue,ctx:_e}),x.$set(Qe);const Te={};ue[0]&4096&&(Te.data=_e[12]),ue[0]&1883242504|ue[2]&4&&(Te.$$scope={dirty:ue,ctx:_e}),Q.$set(Te);const tt={};ue[0]&32768&&(tt.data=_e[15]),ue[1]&4|ue[2]&4&&(tt.$$scope={dirty:ue,ctx:_e}),M.$set(tt);const Oe={};ue[0]&16384&&(Oe.data=_e[14]),ue[1]&2|ue[2]&4&&(Oe.$$scope={dirty:ue,ctx:_e}),G.$set(Oe);const Mt={};ue[0]&8192&&(Mt.data=_e[13]),ue[1]&1|ue[2]&4&&(Mt.$$scope={dirty:ue,ctx:_e}),Z.$set(Mt);const ne={};ue[0]&65536&&(ne.data=_e[16]),ue[1]&8|ue[2]&4&&(ne.$$scope={dirty:ue,ctx:_e}),he.$set(ne)},i(_e){fe||(Pt(t.$$.fragment,_e),Pt(s.$$.fragment,_e),Pt(c.$$.fragment,_e),Pt(a.$$.fragment,_e),Pt(_.$$.fragment,_e),Pt(E.$$.fragment,_e),Pt(x.$$.fragment,_e),Pt(Q.$$.fragment,_e),Pt(M.$$.fragment,_e),Pt(G.$$.fragment,_e),Pt(Z.$$.fragment,_e),Pt(he.$$.fragment,_e),fe=!0)},o(_e){Gt(t.$$.fragment,_e),Gt(s.$$.fragment,_e),Gt(c.$$.fragment,_e),Gt(a.$$.fragment,_e),Gt(_.$$.fragment,_e),Gt(E.$$.fragment,_e),Gt(x.$$.fragment,_e),Gt(Q.$$.fragment,_e),Gt(M.$$.fragment,_e),Gt(G.$$.fragment,_e),Gt(Z.$$.fragment,_e),Gt(he.$$.fragment,_e),fe=!1},d(_e){mr(t,_e),_e&&it(r),mr(s,_e),_e&&it(l),mr(c,_e),_e&&it(h),mr(a,_e),_e&&it(d),mr(_,_e),_e&&it(p),mr(E,_e),_e&&it(w),mr(x,_e),_e&&it(k),mr(Q,_e),_e&&it(R),mr(M,_e),_e&&it(O),mr(G,_e),_e&&it(K),mr(Z,_e),_e&&it($),mr(he,_e)}}}function s1(e){let t,r,s,l,c;return r=new Tg({props:{style:e3,interactive:!1,location:{bounds:e[35].angola},$$slots:{default:[k4]},$$scope:{ctx:e}}}),{c(){t=kt("div"),yr(r.$$.fragment),s=$t(),l=kt("div"),l.innerHTML=`<div id="angola-legend-hold" class="svelte-bpiw7r"><div class="line svelte-bpiw7r"></div>
                Louisiana plantations circa 1853</div>`,ce(t,"id","angola"),ce(t,"class","svelte-bpiw7r"),ce(l,"id","angola-legend"),ce(l,"class","svelte-bpiw7r")},m(h,a){ot(h,t,a),pr(r,t,null),ot(h,s,a),ot(h,l,a),c=!0},p(h,a){const d={};a[0]&256|a[2]&4&&(d.$$scope={dirty:a,ctx:h}),r.$set(d)},i(h){c||(Pt(r.$$.fragment,h),c=!0)},o(h){Gt(r.$$.fragment,h),c=!1},d(h){h&&it(t),mr(r),h&&it(s),h&&it(l)}}}function Q4(e){let t,r;return t=new ko({props:{id:"chad-line",idKey:"county_key",type:"line",paint:{"line-color":"#97DFD1","line-opacity":.4,"line-width":3}}}),{c(){yr(t.$$.fragment)},m(s,l){pr(t,s,l),r=!0},p:bn,i(s){r||(Pt(t.$$.fragment,s),r=!0)},o(s){Gt(t.$$.fragment,s),r=!1},d(s){mr(t,s)}}}function k4(e){let t,r;return t=new KA({props:{id:"chad",type:"geojson",data:e[8],maxzoom:22,$$slots:{default:[Q4]},$$scope:{ctx:e}}}),{c(){yr(t.$$.fragment)},m(s,l){pr(t,s,l),r=!0},p(s,l){const c={};l[0]&256&&(c.data=s[8]),l[2]&4&&(c.$$scope={dirty:l,ctx:s}),t.$set(c)},i(s){r||(Pt(t.$$.fragment,s),r=!0)},o(s){Gt(t.$$.fragment,s),r=!1},d(s){mr(t,s)}}}function a1(e){let t,r,s,l,c,h=e[4].features,a=[];for(let d=0;d<h.length;d+=1)a[d]=o1(r1(e,h,d));return{c(){t=kt("div"),r=kt("select"),s=kt("option"),s.textContent="See data for each Parish.";for(let d=0;d<a.length;d+=1)a[d].c();s.__value=null,s.value=s.__value,ce(r,"class","svelte-bpiw7r"),e[19]===void 0&&xu(()=>e[44].call(r)),ce(t,"id","persistent-parish-data"),ce(t,"class","svelte-bpiw7r")},m(d,_){ot(d,t,_),st(t,r),st(r,s);for(let p=0;p<a.length;p+=1)a[p].m(r,null);Vh(r,e[19]),l||(c=[us(r,"change",e[44]),us(r,"change",e[45])],l=!0)},p(d,_){if(_[0]&16){h=d[4].features;let p;for(p=0;p<h.length;p+=1){const E=r1(d,h,p);a[p]?a[p].p(E,_):(a[p]=o1(E),a[p].c(),a[p].m(r,null))}for(;p<a.length;p+=1)a[p].d(1);a.length=h.length}_[0]&524304&&Vh(r,d[19])},d(d){d&&it(t),mc(a,d),l=!1,eA(c)}}}function o1(e){let t,r=e[59].properties.AREANM+"",s,l,c;return{c(){t=kt("option"),s=Ir(r),l=$t(),t.__value=c=e[59].properties.AREANM,t.value=t.__value},m(h,a){ot(h,t,a),st(t,s),st(t,l)},p(h,a){a[0]&16&&r!==(r=h[59].properties.AREANM+"")&&ei(s,r),a[0]&16&&c!==(c=h[59].properties.AREANM)&&(t.__value=c,t.value=t.__value)},d(h){h&&it(t)}}}function P4(e){let t,r,s,l,c,h,a,d,_,p;function E(Q){e[43](Q)}let w={style:$4,interactive:!1,location:{bounds:e[36]<420?e[35].lamobile:e[35].la},$$slots:{default:[L4]},$$scope:{ctx:e}};e[17]!==void 0&&(w.map=e[17]),l=new Tg({props:w}),qa.push(()=>Eg(l,"map",E));let x=e[0].map=="map12"&&s1(e);d=new Xw({props:{lo:e[0].map}});let k=e[0].map!=="map15"&&a1(e);return{c(){t=kt("div"),r=kt("figure"),s=kt("div"),yr(l.$$.fragment),h=$t(),x&&x.c(),a=$t(),yr(d.$$.fragment),_=$t(),k&&k.c(),ce(s,"class","col-full height-full"),ce(t,"slot","background")},m(Q,R){ot(Q,t,R),st(t,r),st(r,s),pr(l,s,null),st(s,h),x&&x.m(s,null),st(t,a),pr(d,t,null),st(t,_),k&&k.m(t,null),p=!0},p(Q,R){const M={};R[0]&2147352318|R[1]&15|R[2]&4&&(M.$$scope={dirty:R,ctx:Q}),!c&&R[0]&131072&&(c=!0,M.map=Q[17],Cg(()=>c=!1)),l.$set(M),Q[0].map=="map12"?x?(x.p(Q,R),R[0]&1&&Pt(x,1)):(x=s1(Q),x.c(),Pt(x,1),x.m(s,null)):x&&(Lo(),Gt(x,1,1,()=>{x=null}),Qo());const O={};R[0]&1&&(O.lo=Q[0].map),d.$set(O),Q[0].map!=="map15"?k?k.p(Q,R):(k=a1(Q),k.c(),k.m(t,null)):k&&(k.d(1),k=null)},i(Q){p||(Pt(l.$$.fragment,Q),Pt(x),Pt(d.$$.fragment,Q),p=!0)},o(Q){Gt(l.$$.fragment,Q),Gt(x),Gt(d.$$.fragment,Q),p=!1},d(Q){Q&&it(t),mr(l),x&&x.d(),mr(d),k&&k.d()}}}function A1(e){let t,r,s,l,c,h=e[4].features,a=[];for(let d=0;d<h.length;d+=1)a[d]=l1(n1(e,h,d));return{c(){t=kt("p"),r=kt("select"),s=kt("option"),s.textContent="Select one";for(let d=0;d<a.length;d+=1)a[d].c();s.__value=null,s.value=s.__value,ce(r,"class","svelte-bpiw7r"),e[19]===void 0&&xu(()=>e[41].call(r))},m(d,_){ot(d,t,_),st(t,r),st(r,s);for(let p=0;p<a.length;p+=1)a[p].m(r,null);Vh(r,e[19]),l||(c=[us(r,"change",e[41]),us(r,"change",e[42])],l=!0)},p(d,_){if(_[0]&16){h=d[4].features;let p;for(p=0;p<h.length;p+=1){const E=n1(d,h,p);a[p]?a[p].p(E,_):(a[p]=l1(E),a[p].c(),a[p].m(r,null))}for(;p<a.length;p+=1)a[p].d(1);a.length=h.length}_[0]&524304&&Vh(r,d[19])},d(d){d&&it(t),mc(a,d),l=!1,eA(c)}}}function l1(e){let t,r=e[59].properties.AREANM+"",s,l,c;return{c(){t=kt("option"),s=Ir(r),l=$t(),t.__value=c=e[59].properties.AREANM,t.value=t.__value},m(h,a){ot(h,t,a),st(t,s),st(t,l)},p(h,a){a[0]&16&&r!==(r=h[59].properties.AREANM+"")&&ei(s,r),a[0]&16&&c!==(c=h[59].properties.AREANM)&&(t.__value=c,t.value=t.__value)},d(h){h&&it(t)}}}function M4(e){let t,r,s,l,c,h,a,d,_,p,E,w,x,k,Q,R,M,O,G,K,Z,$,he,fe,_e,ue,ee,se,Be,me,Pe,ge,Qe,Te,tt,Oe,Mt,ne=e[4]&&A1(e);return{c(){t=kt("div"),r=kt("section"),r.innerHTML=`<div class="col-medium"><p>Louisiana now has the second highest <a href="https://bjs.ojp.gov/sites/g/files/xyckuh236/files/media/document/p21st.pdf" target="_blank" class="svelte-bpiw7r"><strong>imprisonment rate</strong></a> in the nation. Despite modest declines in the prison population, mass
            incarceration remains a problem in every parish: the prison admission
            rate is greater than the national average in 92 percent of parishes and
            more than twice the national average in 63 percent of parishes.</p></div>`,s=$t(),l=kt("section"),l.innerHTML=`<div class="col-medium"><p>Mass incarceration is not only measured by the number of people in
            prison. People arrested but not convicted—that is, people in the
            “pretrial” period—are held in local jails. The <strong>pretrial incarceration rate</strong> in Louisiana is the highest in the nation and twice the national average.
            On a local level, the pretrial incarceration rate is greater than the
            national average in 89 percent of parishes and more than twice the national
            average in 59 percent of parishes.​</p></div>`,c=$t(),h=kt("section"),h.innerHTML=`<div class="col-medium"><p>Recent history illustrates how jail capacity has increased across
            the state. In 1999, there were only <span class="enormousjails svelte-bpiw7r">five parishes</span>
            with more than 1,000 <span class="localjails svelte-bpiw7r">jail beds</span>.</p></div>`,a=$t(),d=kt("section"),d.innerHTML=`<div class="col-medium"><p>One of these was Orleans Parish, which at the time had a sprawling
            complex with more than 7,500 jail beds.</p></div>`,_=$t(),p=kt("section"),p.innerHTML=`<div class="col-medium"><p>But in 2005, the complex was destroyed by Hurricane Katrina,
            prompting a dialogue on how much the city should invest in jailing
            people. Through the efforts of community advocates, the parish ended
            the practice of holding people for the state corrections department
            and limited the new jail’s capacity to 1,250 people. By 2019,
            Orleans Parish’s pretrial population had declined by 75 percent, and
            the total jail population had dropped by more than 80 percent.</p></div>`,E=$t(),w=kt("section"),w.innerHTML=`<div class="col-medium"><p>During this time, however, sheriffs across the state added
            14,000 jail beds, and there are now <span class="enormousjails svelte-bpiw7r">13 parishes</span>
            with more than <span class="localjails svelte-bpiw7r">1,000 jail beds</span>.​</p></div>`,x=$t(),k=kt("section"),k.innerHTML=`<div class="col-medium"><p><strong><span class="localjails svelte-bpiw7r">Local jails</span></strong> operated
            by sheriffs and police departments are the foundation of Louisiana’s
            carceral infrastructure. Sheriffs operate 85 jails with a combined capacity
            of more than 29,000 beds, while municipal police departments operate
            65 jails with a total of nearly 4,800 beds. This enables the state’s
            astronomical pretrial detention rates.</p></div>`,Q=$t(),R=kt("section"),R.innerHTML=`<div class="col-medium"><p>This growth in jail capacity also means that Louisiana’s law
            enforcement agencies are uniquely invested in incarceration, as the
            state pays local jails “per diems” to hold people serving a state
            prison sentence. More than half of the 27,000 people that comprise
            Louisiana’s “prison population” are serving their sentence in a
            local jail. This arrangement costs the state less than building new
            prisons and <span class="financial svelte-bpiw7r">financially benefits</span> the sheriffs,
            while depriving incarcerated people of services like education and vocational
            training, which are more often available in prisons.</p></div>`,M=$t(),O=kt("section"),O.innerHTML=`<div class="col-medium"><p>Dozens of sheriffs also operate <strong>Transitional Work Programs (TWP)</strong>
            that hold people who are nearing the end of their prison term. These
            programs release people during the day to work in the community, but
            take about
            <a href="https://app.lla.state.la.us/publicreports.nsf/87d9ddaec96efe3a86257f94007293f3/$file/0000e78f.pdf" target="_blank" class="svelte-bpiw7r">65 percent</a> of their wages for the jail, which also receives a payment from the
            state. Several private operators have TWP contracts with the state as
            well, and 11 parishes have built an additional facility solely to provide
            TWP beds.</p></div>`,G=$t(),K=kt("section"),K.innerHTML=`<div class="col-medium"><p>In addition to the 150 jails operated by local law enforcement
            agencies, there are 11 <span class="privatejails svelte-bpiw7r">privately operated jails</span> with more than 10,000 beds combined. U.S. Immigration and Customs Enforcement
            (ICE) has contracts with the GEO Group to operate four detention facilities.
            And local sheriffs have partnerships with LaSalle Corrections and other
            private firms to operate seven additional jails, which principally hold
            people for the state but also hold people for ICE.</p></div>`,Z=$t(),$=kt("section"),$.innerHTML='<div class="col-medium"><p>Louisiana has five federal prisons and eight state <span class="prisons svelte-bpiw7r">prisons</span>.</p></div>',he=$t(),fe=kt("section"),fe.innerHTML=`<div class="col-medium"><p>One of these is the Louisiana State Penitentiary, more commonly
            called “Angola” after the plantation that once occupied the same
            site. Today, the prison’s plantation continues to produce cotton,
            sugar, corn, and other crops that were harvested during times of
            slavery—except today, incarcerated people tend the fields, an
            arrangement made possible by an exception in the 13th Amendment
            permitting slavery “as a punishment for crime.”</p></div>`,_e=$t(),ue=kt("section"),ue.innerHTML=`<div class="col-medium"><p>Looking at historical plantations next to modern-day jails and
            prisons, Louisiana’s evolution from mass enslavement to mass
            incarceration is undeniable. The state’s largest jails and prisons
            are situated squarely on the same land where Black people were
            enslaved to sustain the state’s agricultural industry. These
            facilities now use the forced labor of incarcerated people (who are
            disproportionally Black) to sustain the “corrections” industry.</p></div>`,ee=$t(),se=kt("section"),se.innerHTML=`<div class="col-medium"><p>Adding youth prisons and jails to the facilities already outlined
            shows that there are more than 230 jails and prisons across
            Louisiana. In comparison, there are only 43 universities and
            colleges in the state.</p></div>`,Be=$t(),me=kt("section"),Pe=kt("a"),ge=$t(),Qe=kt("div"),Te=kt("p"),Te.textContent=`These numbers matter: more facilities lead to more incarceration.
            The parishes with the most outsized jails often have the highest
            pretrial detention and prison incarceration rates.`,tt=$t(),Oe=kt("p"),Oe.innerHTML=`<strong>Visit your parish page to see how local policies add up to
              statewide mass incarceration. Scroll down to see Vera’s
              recommendations for tackling these issues.</strong>`,Mt=$t(),ne&&ne.c(),ce(r,"data-id","map01"),ce(l,"data-id","map02"),ce(h,"data-id","map03"),ce(d,"data-id","map04"),ce(p,"data-id","map05"),ce(w,"data-id","map06"),ce(k,"data-id","map07"),ce(R,"data-id","map08"),ce(O,"data-id","map09"),ce(K,"data-id","map10"),ce($,"data-id","map11"),ce(fe,"data-id","map12"),ce(ue,"data-id","map13"),ce(se,"data-id","map14"),ce(Pe,"id","parishes"),ce(Pe,"class","svelte-bpiw7r"),ce(Qe,"class","col-medium"),ce(me,"data-id","map15"),ce(me,"id","browseparishes"),ce(t,"slot","foreground")},m(Se,ke){ot(Se,t,ke),st(t,r),st(t,s),st(t,l),st(t,c),st(t,h),st(t,a),st(t,d),st(t,_),st(t,p),st(t,E),st(t,w),st(t,x),st(t,k),st(t,Q),st(t,R),st(t,M),st(t,O),st(t,G),st(t,K),st(t,Z),st(t,$),st(t,he),st(t,fe),st(t,_e),st(t,ue),st(t,ee),st(t,se),st(t,Be),st(t,me),st(me,Pe),st(me,ge),st(me,Qe),st(Qe,Te),st(Qe,tt),st(Qe,Oe),st(Qe,Mt),ne&&ne.m(Qe,null)},p(Se,ke){Se[4]?ne?ne.p(Se,ke):(ne=A1(Se),ne.c(),ne.m(Qe,null)):ne&&(ne.d(1),ne=null)},d(Se){Se&&it(t),ne&&ne.d()}}}function D4(e){let t,r,s,l,c,h,a,d,_,p,E,w,x,k;t=new gw({props:{$$slots:{default:[y4]},$$scope:{ctx:e}}}),s=new uw({});let Q=e[4]&&e[1].parish.indicators&&e[3].facility.indicators&&i1(e);return a=new fw({}),p=new nv({}),x=new Jw({}),{c(){yr(t.$$.fragment),r=$t(),yr(s.$$.fragment),l=$t(),Q&&Q.c(),c=$t(),h=kt("div"),yr(a.$$.fragment),d=$t(),_=kt("div"),yr(p.$$.fragment),E=$t(),w=kt("div"),yr(x.$$.fragment),ce(_,"class","col-wide"),ce(w,"class","col-wide"),ce(h,"id","bottom"),ce(h,"class","svelte-bpiw7r")},m(R,M){pr(t,R,M),ot(R,r,M),pr(s,R,M),ot(R,l,M),Q&&Q.m(R,M),ot(R,c,M),ot(R,h,M),pr(a,h,null),st(h,d),st(h,_),pr(p,_,null),st(h,E),st(h,w),pr(x,w,null),k=!0},p(R,M){const O={};M[2]&4&&(O.$$scope={dirty:M,ctx:R}),t.$set(O),R[4]&&R[1].parish.indicators&&R[3].facility.indicators?Q?(Q.p(R,M),M[0]&26&&Pt(Q,1)):(Q=i1(R),Q.c(),Pt(Q,1),Q.m(c.parentNode,c)):Q&&(Lo(),Gt(Q,1,1,()=>{Q=null}),Qo())},i(R){k||(Pt(t.$$.fragment,R),Pt(s.$$.fragment,R),Pt(Q),Pt(a.$$.fragment,R),Pt(p.$$.fragment,R),Pt(x.$$.fragment,R),k=!0)},o(R){Gt(t.$$.fragment,R),Gt(s.$$.fragment,R),Gt(Q),Gt(a.$$.fragment,R),Gt(p.$$.fragment,R),Gt(x.$$.fragment,R),k=!1},d(R){mr(t,R),R&&it(r),mr(s,R),R&&it(l),Q&&Q.d(R),R&&it(c),R&&it(h),mr(a),mr(p),mr(x)}}}let c1="light";const N4=.65,j4="./data/parishes.json",R4="./data/orleansparishtopo.json",O4="./data/clippedtopo.json",H4="./data/franklin.json",z4="./data/restUS.json",V4="./data/wfel.json",K4="./data/bldg2005topo.json",G4="./data/bldg2023topo.json",q4="./data/statetopo.json",W4="./data/facility.json",X4="./data/twp.json",Z4="./data/private.json",J4="./data/prison.json",Y4="./data/estdocrev.json",$4="https://api.maptiler.com/maps/72c3ba93-41a4-4cb7-8f43-eb0d3c5797d7/style.json?key=FauA8RpnouVUuBS6hR1V",e3="https://api.maptiler.com/maps/hybrid/style.json?key=epSI7oxRYqxkl2HpZgcr";function Ou(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")}function t3(e,t,r){pl.start({click:!1}),Kh("theme",c1),lw(Df,c1);let s=rv(),l={},c={};Wa(()=>{c={...l}});const h=["parish"],a=["facility"],d={la:[[-95.0399448042286,28.595645625527535],[-88.58723191094903,33.39651900203391]],la2:[[-94.20437521837017,29.05549858060883],[-88.64342295552318,32.92697341963069]],lamobile:[[-94.16658071248452,25.45654294508548],[-89.31523133151606,35.632898417372274]],neworleans:[[-90.20218547121677,29.832442237380768],[-89.5287512047579,30.2826563423104]],neworleansmobile:[[-90.0994909234169,29.951175901295326],[-90.08906084005827,29.97318139970902]],orleansparishjail:[[-90.09584076786747,29.95885105594476],[-90.09124436292655,29.96202846489282]],angola:[[-91.64341265873233,30.93019793919344],[-91.56290347711851,30.9865779654985]],nolajailbldg:[[-90.1026537217127,29.956812140351577],[-90.08733946304126,29.965537706523364]],nolajailbldg2:[[-90.09702702023108,29.953342990656846],[-90.08936855325291,29.974661699522763]],nola2023:[[-90.09790954793945,29.95716669715467],[-90.0920981511653,29.962729653377394]]};let _={parish:{}},p={parish:{}},E={facility:{}},w={facility:{}},x,k,Q,R,M,O,G,K,Z,$,he,fe,_e,ue=null,ee,se,Be=[],me="admission",Pe="none",ge=!1,Qe=0,Te=0,tt=0,Oe=0,Mt,ne,Se,ke=0,Ke=0,at=0,dt=0,Ge=Ga("#app").node().getBoundingClientRect().width;function rt(rr){r(19,se=rr.detail.feature.properties.AREANM),pl("/louisiana-locked-up/parish/"+se),rr.preventDefault()}function Ut(rr){pl("/louisiana-locked-up/parish/"+rr),rr.preventDefault()}function ht(rr){r(18,ee=rr.detail.id)}function Nt(rr){ue&&ue.fitBounds(rr,{animate:s,padding:30})}const dr={map:{map01:()=>{Nt(Ge<420?d.lamobile:d.la),r(21,me="admission"),r(20,Be=[]),r(23,ge=!1),r(22,Pe="none"),r(24,Qe=0),r(25,Te=0),r(26,tt=0),r(27,Oe=0),r(29,ne=0),r(28,Mt="rgba(0,0,0,0)"),r(30,Se="rgba(255,255,255,0)"),r(31,ke=0),r(32,Ke=0),r(33,at=0),r(34,dt=0)},map02:()=>{Nt(Ge<420?d.lamobile:d.la),r(21,me="pretrial"),r(20,Be=[]),r(23,ge=!1),r(22,Pe="none"),r(24,Qe=0),r(25,Te=0),r(26,tt=0),r(27,Oe=0),r(29,ne=0),r(30,Se="rgba(255,255,255,0)"),r(31,ke=0),r(32,Ke=0),r(33,at=0),r(34,dt=0)},map03:()=>{Nt(Ge<420?d.lamobile:d.la),r(20,Be=[]),r(21,me="over_1000_99"),r(23,ge=!1),r(22,Pe="GT_1000_beds_99"),r(24,Qe=0),r(25,Te=0),r(26,tt=0),r(27,Oe=0),r(28,Mt=["case",["!=",["feature-state","color"],null],["feature-state","color"],"rgba(255, 255, 255, 0)"]),r(29,ne=["get","over_1000_99"]),r(30,Se="rgba(255, 255, 255, 1)"),r(31,ke=0),r(32,Ke=0),r(33,at=0),r(34,dt=0)},map04:()=>{r(20,Be=[]),Nt(Ge<420?d.neworleansmobile:d.nolajailbldg),r(21,me="none"),r(23,ge=!1),r(22,Pe=""),r(24,Qe=0),r(25,Te=1),r(26,tt=1),r(27,Oe=0),r(28,Mt=["case",["!=",["feature-state","color"],null],["feature-state","color"],"rgba(255, 255, 255, 0)"]),r(29,ne=0),r(30,Se="rgba(255,255,255,0)"),r(31,ke=0),r(32,Ke=0),r(34,dt=0)},map05:()=>{Nt(Ge<420?d.neworleansmobile:d.nolajailbldg),r(20,Be=[]),r(21,me="none"),r(23,ge=!1),r(22,Pe=""),r(24,Qe=0),r(25,Te=1),r(26,tt=0),r(27,Oe=1),r(28,Mt=["case",["!=",["feature-state","color"],null],["feature-state","color"],"rgba(255, 255, 255, 0)"]),r(29,ne=0),r(30,Se="rgba(255,255,255,0)"),r(31,ke=0),r(32,Ke=0),r(33,at=0),r(34,dt=0)},map06:()=>{Nt(Ge<420?d.lamobile:d.la),r(20,Be=[]),r(21,me="over_1000_19"),r(23,ge=!1),r(22,Pe="GT_1000_beds_19"),r(24,Qe=0),r(25,Te=0),r(26,tt=0),r(27,Oe=0),r(28,Mt=["case",["!=",["feature-state","color"],null],["feature-state","color"],"rgba(255, 255, 255, 0)"]),r(29,ne=["get","GT_1000_beds_19"]),r(30,Se="rgba(255,255,255,1)"),r(31,ke=0),r(32,Ke=0),r(33,at=0),r(34,dt=0)},map07:()=>{Nt(Ge<420?d.lamobile:d.la),r(20,Be=[]),r(21,me="none"),r(23,ge=!1),r(22,Pe="map_jails"),r(24,Qe=0),r(25,Te=0),r(26,tt=0),r(27,Oe=0),r(28,Mt=["case",["!=",["feature-state","color"],null],["feature-state","color"],"rgba(255, 255, 255, 0)"]),r(29,ne=["get","map_jails"]),r(30,Se="rgba(255,255,255,1)"),r(31,ke=0),r(32,Ke=0),r(33,at=0),r(34,dt=0)},map08:()=>{Nt(Ge<420?d.lamobile:d.la),r(20,Be=[]),r(21,me="none"),r(23,ge=!1),r(22,Pe=""),r(24,Qe=0),r(25,Te=0),r(26,tt=0),r(27,Oe=0),r(28,Mt=["case",["!=",["feature-state","color"],null],["feature-state","color"],"rgba(255, 255, 255, 0)"]),r(29,ne=0),r(30,Se="rgba(255,255,255,0)"),r(31,ke=0),r(32,Ke=0),r(33,at=0),r(34,dt=1)},map09:()=>{Nt(Ge<420?d.lamobile:d.la),r(21,me="none"),r(20,Be=[]),r(23,ge=!1),r(22,Pe="map_twp"),r(24,Qe=0),r(25,Te=0),r(26,tt=0),r(27,Oe=0),r(28,Mt=["case",["!=",["feature-state","color"],null],["feature-state","color"],"rgba(255, 255, 255, 0)"]),r(29,ne=["get","map_twp"]),r(30,Se="rgba(255,255,255,1)"),r(31,ke=1),r(32,Ke=0),r(33,at=0),r(34,dt=0)},map10:()=>{Nt(Ge<420?d.lamobile:d.la),r(21,me="none"),r(20,Be=[]),r(23,ge=!1),r(22,Pe="map_private"),r(24,Qe=0),r(25,Te=0),r(26,tt=0),r(27,Oe=0),r(28,Mt=["case",["!=",["feature-state","color"],null],["feature-state","color"],"rgba(255, 255, 255, 0)"]),r(29,ne=["get","map_private"]),r(30,Se="rgba(255,255,255,1)"),r(31,ke=0),r(32,Ke=1),r(33,at=0),r(34,dt=0)},map11:()=>{Nt(Ge<420?d.lamobile:d.la),r(21,me="none"),r(20,Be=[]),r(23,ge=!1),r(22,Pe="map_prison"),r(24,Qe=0),r(25,Te=0),r(26,tt=0),r(27,Oe=0),r(28,Mt=["case",["!=",["feature-state","color"],null],["feature-state","color"],"rgba(255, 255, 255, 0)"]),r(29,ne=["get","map_prison"]),r(30,Se="rgba(255,255,255,1)"),r(31,ke=0),r(32,Ke=0),r(33,at=1),r(34,dt=0)},map12:()=>{Nt(d.angola),r(21,me="none"),r(20,Be=[]),r(22,Pe=""),r(23,ge=!1),r(24,Qe=1),r(25,Te=0),r(26,tt=0),r(27,Oe=0),r(29,ne=0),r(28,Mt=["case",["!=",["feature-state","color"],null],["feature-state","color"],"rgba(255, 255, 255, 0)"]),r(30,Se="rgba(255,255,255,0)"),r(31,ke=0),r(32,Ke=0),r(33,at=0),r(34,dt=0)},map13:()=>{Nt(Ge<420?d.lamobile:d.la),r(21,me="none"),r(20,Be=[]),r(22,Pe="map_all"),r(23,ge=!1),r(24,Qe=1),r(25,Te=0),r(26,tt=0),r(27,Oe=0),r(28,Mt="rgba(255,255,255,0)"),r(29,ne=.7),r(30,Se="rgba(0,0,0,1)"),r(31,ke=0),r(32,Ke=0),r(33,at=0),r(34,dt=0)},map14:()=>{Nt(Ge<420?d.lamobile:d.la),r(21,me="none"),r(20,Be=[]),r(22,Pe="map_all"),r(23,ge=!1),r(24,Qe=0),r(25,Te=0),r(26,tt=0),r(27,Oe=0),r(28,Mt=["match",["get","facility_type"],"Jail","rgba(46,29,151,.9)","Prison","rgba(0,92,229, 0.9)","Juvenile","rgba(235,65,44,.9)","TWP Facility","rgba(255,158,68,0.9)","Holding Cell","rgba(177, 188, 255, 0.9)","#ccc"]),r(29,ne=1),r(30,Se="rgba(255,255,255,1)"),r(31,ke=0),r(32,Ke=0),r(33,at=0),r(34,dt=0)},map15:()=>{Nt(Ge<420?d.lamobile:d.la),r(21,me="pretrial"),r(20,Be=[]),r(22,Pe="map_all"),r(24,Qe=0),r(25,Te=0),r(26,tt=0),r(27,Oe=0),r(28,Mt="rgba(255,255,255,0)"),r(29,ne=1),r(30,Se="rgba(255,255,255,1)"),r(31,ke=0),r(32,Ke=0),r(33,at=0),r(34,dt=0),r(23,ge=!0)}}};function Lt(rr=[]){rr.forEach(xr=>{l[xr]!=c[xr]&&(dr[xr][l[xr]]&&dr[xr][l[xr]](),c[xr]=l[xr])})}const ze=Wg("%m/%d/%y");h.forEach(rr=>{A0(`./data/data_${rr}.csv`).then(xr=>{xr.forEach(nt=>{nt.jail_pretrial_rate=+nt.jail_pretrial_rate.toFixed(1),nt.prison_adm_rate=+nt.prison_adm_rate.toFixed(1),nt.over_1000_19=+nt.over_1000_19,nt.over_1000_99=+nt.over_1000_99});let Zr=xr.map(nt=>({code:nt.code,name:nt.parish,prison_adm_count:nt.prison_adm_count,year:nt.year,prison_adm_rate:nt.prison_adm_rate,total_pop:nt.total_pop,jail_pretrial_rate:nt.jail_pretrial_rate,total_jail_pretrial:nt.total_jail_pretrial,pretrial_date:ze(nt.pretrial_date)})),pn={};Zr.forEach(nt=>{pn[nt.code]=nt}),r(2,p[rr].array=Zr,p),r(2,p[rr].lookup=pn,p);let vt=xr.map((nt,bt)=>({...Zr[bt],pretrial:nt.jail_pretrial_rate,admission:nt.prison_adm_rate,over_1000_19:nt.over_1000_19,over_1000_99:nt.over_1000_99}));rr=="parish"&&["pretrial","admission","over_1000_19","over_1000_99"].forEach(nt=>{let bt=vt.map(jt=>jt[nt]).sort((jt,er)=>jt-er),Ct=c0(nt,bt);vt.forEach((jt,er)=>vt[er][nt+"_color"]=l0(jt[nt],Ct,u0[nt]))}),r(1,_[rr].indicators=vt,_)})}),a.forEach(rr=>{A0(`./data/data_${rr}.csv`).then(xr=>{xr.forEach(nt=>{nt.capacity=+nt.capacity,nt.ice_active=+nt.ice_capacity,nt.num_facilities=+nt.num_facilities,nt.twp=+nt.twp,nt.parish_hold=+nt.parish_hold,nt.total_pop=+nt.total_pop,nt.map_twp=+nt.map_twp,nt.map_private=+nt.map_private,nt.map_prison=+nt.map_prison,nt.GT99=+nt.GT_1000_beds_99,nt.GT_1000_beds_99=+nt.GT_1000_beds_99,nt.GT_1000_beds_19=+nt.GT_1000_beds_19,nt.map_jails=+nt.map_jails,nt.ice=+nt.ice});let Zr=xr.map(nt=>({uuid:nt.uuid,name:nt.facility_name})),pn={};Zr.forEach(nt=>{pn[nt.uuid]=nt}),w[rr].array=Zr,w[rr].lookup=pn;let vt=xr.map((nt,bt)=>({...Zr[bt],map_twp:nt.map_twp,map_private:nt.map_private,map_prison:nt.map_prison,GT_1000_beds_99:nt.GT_1000_beds_99,GT_1000_beds_19:nt.GT_1000_beds_19,map_jails:nt.map_jails,map_all:1,ice:nt.ice,gt99:+nt.GT99,capacity:+nt.capacity,why:+nt.why,ind:bt}));rr=="facility"&&["map_twp","map_private","map_prison","GT_1000_beds_99","GT_1000_beds_19","map_jails","map_all"].forEach(nt=>{let bt=vt.map(jt=>jt[nt]).sort((jt,er)=>jt-er),Ct=c0(nt,bt);vt.forEach((jt,er)=>vt[er][nt+"_color"]=l0(jt[nt],Ct,u0[nt]),vt[nt+"_outline"]="#fff")}),r(3,E[rr].indicators=vt,E)})}),Mc(j4,"la").then(rr=>{rr.features.sort((xr,Zr)=>xr.properties.AREANM.localeCompare(Zr.properties.AREANM)),r(4,x=rr)}),Mc(R4,"orleansparish").then(rr=>{r(5,k=rr)}),Mc(O4,"plantations").then(rr=>{r(6,Q=rr)}),Mc(V4,"westfplantations").then(rr=>{r(8,M=rr)}),Mc(H4,"Franklin").then(rr=>{}),Mc(z4,"restUS").then(rr=>{r(7,R=rr)}),Mc(K4,"nolabldg").then(rr=>{r(9,O=rr)}),Mc(G4,"bldg2023").then(rr=>{r(10,G=rr)}),Mc(q4,"state").then(rr=>{r(11,K=rr)}),Sf(W4,"facilities").then(rr=>{rr.features.sort((xr,Zr)=>Zr.properties.capacity-xr.properties.capacity),r(12,Z=rr)}),Sf(X4,"twp").then(rr=>{r(13,$=rr)}),Sf(Z4,"private").then(rr=>{r(14,he=rr)}),Sf(J4,"prison").then(rr=>{r(15,fe=rr)}),Sf(Y4,"estdocrev").then(rr=>{rr.features.forEach(xr=>{xr.properties.est_doc_rev!==null&&(xr.properties.rev="$"+Ou(xr.properties.est_doc_rev.toFixed(0)))}),r(16,_e=rr)});const gr=Rp("%B %d, %Y");function sr(){se=Vm(this),r(19,se),r(4,x)}const Ht=()=>Ut(se);function fr(rr){ue=rr,r(17,ue)}function Br(){se=Vm(this),r(19,se),r(4,x)}const vr=()=>Ut(se);function Gr(rr){e.$$.not_equal(l.map,rr)&&(l.map=rr,r(0,l))}return e.$$.update=()=>{e.$$.dirty[0]&1&&l&&Lt(Object.keys(dr))},[l,_,p,E,x,k,Q,R,M,O,G,K,Z,$,he,fe,_e,ue,ee,se,Be,me,Pe,ge,Qe,Te,tt,Oe,Mt,ne,Se,ke,Ke,at,dt,d,Ge,rt,Ut,ht,gr,sr,Ht,fr,Br,vr,Gr]}class r3 extends ai{constructor(t){super(),si(this,t,t3,D4,ri,{},null,[-1,-1,-1])}}function n3(e){let t,r;return t=new r3({}),{c(){yr(t.$$.fragment)},m(s,l){pr(t,s,l),r=!0},p:bn,i(s){r||(Pt(t.$$.fragment,s),r=!0)},o(s){Gt(t.$$.fragment,s),r=!1},d(s){mr(t,s)}}}class u1 extends ai{constructor(t){super(),si(this,t,null,n3,ri,{})}}function h1(e,t,r){const s=e.slice();return s[21]=t[r],s}function f1(e){let t,r=e[21].county+"",s,l,c;return{c(){t=kt("option"),s=Ir(r),l=$t(),t.__value=c=e[21].county,t.value=t.__value},m(h,a){ot(h,t,a),st(t,s),st(t,l)},p(h,a){a&2&&r!==(r=h[21].county+"")&&ei(s,r),a&2&&c!==(c=h[21].county)&&(t.__value=c,t.value=t.__value)},d(h){h&&it(t)}}}function i3(e){let t,r,s,l,c,h,a,d,_,p,E,w,x,k,Q,R,M,O=e[1],G=[];for(let $=0;$<O.length;$+=1)G[$]=f1(h1(e,O,$));function K($){e[8]($)}let Z={style:Yv,interactive:!0,controls:!0,location:{bounds:e[3].la},options:{minZoom:6.5}};return e[0]!==void 0&&(Z.map=e[0]),_=new Tg({props:Z}),qa.push(()=>Eg(_,"map",K)),{c(){t=kt("div"),r=kt("div"),r.innerHTML=`<div class="dotlegend-li svelte-rfhyu8"><div class="circ jail svelte-rfhyu8"></div>
      Jail</div> 
    <div class="dotlegend-li svelte-rfhyu8"><div class="circ prison svelte-rfhyu8"></div>
      Prison</div> 
    <div class="dotlegend-li svelte-rfhyu8"><div class="circ juvenile svelte-rfhyu8"></div>
      Juvenile</div> 
    <div class="dotlegend-li svelte-rfhyu8"><div class="circ twp svelte-rfhyu8"></div>
      TWP Facility</div> 
    <div class="dotlegend-li svelte-rfhyu8"><div class="circ holding svelte-rfhyu8"></div>
      Holding Cell</div>`,s=$t(),l=kt("select"),c=kt("option"),c.textContent="Select Parish";for(let $=0;$<G.length;$+=1)G[$].c();h=$t(),a=kt("div"),d=kt("div"),yr(_.$$.fragment),E=$t(),w=kt("nav"),x=$t(),k=kt("div"),ce(r,"id","map_legend"),ce(r,"class","svelte-rfhyu8"),c.__value=null,c.value=c.__value,ce(l,"class","selectParish svelte-rfhyu8"),e[2]===void 0&&xu(()=>e[6].call(l)),ce(d,"id","map"),ce(d,"class","svelte-rfhyu8"),ce(w,"id","mapmenu"),ce(w,"class","svelte-rfhyu8"),ce(k,"id","stylemenu"),ce(k,"class","svelte-rfhyu8"),ce(a,"class","map-wrap svelte-rfhyu8"),ce(t,"id","group"),ce(t,"class","svelte-rfhyu8")},m($,he){ot($,t,he),st(t,r),st(t,s),st(t,l),st(l,c);for(let fe=0;fe<G.length;fe+=1)G[fe].m(l,null);Vh(l,e[2]),st(t,h),st(t,a),st(a,d),pr(_,d,null),st(a,E),st(a,w),st(a,x),st(a,k),Q=!0,R||(M=[us(l,"change",e[6]),us(l,"change",e[7])],R=!0)},p($,[he]){if(he&2){O=$[1];let _e;for(_e=0;_e<O.length;_e+=1){const ue=h1($,O,_e);G[_e]?G[_e].p(ue,he):(G[_e]=f1(ue),G[_e].c(),G[_e].m(l,null))}for(;_e<G.length;_e+=1)G[_e].d(1);G.length=O.length}he&6&&Vh(l,$[2]);const fe={};!p&&he&1&&(p=!0,fe.map=$[0],Cg(()=>p=!1)),_.$set(fe)},i($){Q||(Pt(_.$$.fragment,$),Q=!0)},o($){Gt(_.$$.fragment,$),Q=!1},d($){$&&it(t),mc(G,$),mr(_),R=!1,eA(M)}}}const Yv="https://api.maptiler.com/maps/72c3ba93-41a4-4cb7-8f43-eb0d3c5797d7/style.json?key=FauA8RpnouVUuBS6hR1V",s3="https://api.maptiler.com/maps/hybrid/style.json?key=epSI7oxRYqxkl2HpZgcr";function d1(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")}function a3(e,t,r){let{parishTitle:s}=t,l,c=rv(),h={},a,d,_=[],p=[],E=[],w;Wa(async()=>{const K=await GA("https://vera-insights-data-viz.s3.amazonaws.com/louisiana/la_bounding_boxes.csv");r(1,E=K);const Z=K.filter($=>$.county==s)[0];h={parish:[[+Z.xmin,+Z.ymax],[+Z.xmax,+Z.ymin]]},Q(h.parish)});const x={la:[[-95.0399448042286,28.595645625527535],[-88.58723191094903,33.39651900203391]]};function k(K){var Z=K.features[0].properties.NAME;pl(Z),Z.preventDefault()}function Q(K){l&&l.fitBounds(K,{animate:c,padding:30})}Wa(async()=>{a=await(await fetch("https://vera-insights-data-viz.s3.amazonaws.com/louisiana/louisiana_parishes.json")).json(),a.features.forEach(function(_e){_e.properties.NAME==s?_e.properties.selected=1:_e.properties.selected=0}),d=await(await fetch("https://vera-insights-data-viz.s3.amazonaws.com/louisiana/plantations.json")).json();let $=null;_=await(await fetch("https://vera-insights-data-viz.s3.amazonaws.com/louisiana/points.json")).json(),_.features.forEach(_e=>{_e.properties.capacity=="N/A"?_e.properties.capacity=_e.properties.capacity:_e.properties.capacity=+_e.properties.capacity}),p={type:"FeatureCollection",features:_.features.filter(function(_e){return _e.properties.parish==s+" Parish"})},l.on("load",function(){l.addSource("parish_incarceration_rates",{type:"geojson",data:a,generateId:!0});const _e=l.getStyle().layers;let ue;for(let me=0;me<_e.length;me++)if(_e[me].type==="symbol"){ue=_e[me].id;break}l.addLayer({id:"parishes",source:"parish_incarceration_rates",type:"fill",paint:{"fill-color":["case",["==",["get","selected"],1],"#c9e3e7",["boolean",["feature-state","hovered"],!0],"#fff7f0","rgba(255,255,255,0)"],"fill-outline-color":"#000","fill-opacity":["case",["==",["get","selected"],1],.4,["boolean",["feature-state","hover"],!1],.5,0]}},ue),l.addSource("Plantation",{type:"geojson",data:d,generateId:!0}),l.addLayer({id:"Plantation",source:"Plantation",type:"fill",layout:{visibility:"none"},paint:{"fill-color":"#97DFD1"}},ue),l.addLayer({id:"parish-outlines",source:"parish_incarceration_rates",type:"line",paint:{"line-width":1.5}},ue);var ee=new zu.Popup({closeButton:!1,closeOnClick:!1});l.on("mousemove","parishes",me=>{me.features.length>0&&($!==null&&l.setFeatureState({source:"parish_incarceration_rates",id:$},{hover:!1}),$=me.features[0].id,l.setFeatureState({source:"parish_incarceration_rates",id:$},{hover:!0})),l.getCanvas().style.cursor="pointer";var Pe=[me.lngLat.lng,me.lngLat.lat],ge=me.features[0].properties.NAME_ALT;ee.setLngLat(Pe).setHTML(ge).addTo(l)}),l.on("click","parishes",me=>{var Pe=me.features[0].properties.NAME;let ge=E.filter(Te=>Te.county==Pe)[0],Qe={parish:[[+ge.xmin,+ge.ymax],[+ge.xmax,+ge.ymin]]};k(me),Q(Qe.parish)}),l.on("mouseleave","parishes",()=>{$!==null&&l.setFeatureState({source:"parish_incarceration_rates",id:$},{hover:!1}),$=null}),l.addSource("facility_data",{type:"geojson",data:p,generateId:!0}),l.addLayer({id:"facilities",source:"facility_data",type:"circle",paint:{"circle-color":["match",["get","type"],"Jail","#223b53","Prison","#fbb03b","TWP Facility","#e55e5e","Juvenile","#3bb2d0","Holding Cell","#0cb74c","#ccc"],"circle-radius":["step",["get","capacity"],5,100,7,500,9,1e3,11,2e3,13,5e3,10]}}),l.on("mousemove","facilities",me=>{l.getCanvas().style.cursor="pointer";var Pe=[me.lngLat.lng,me.lngLat.lat];let ge;me.features[0].properties.capacity=="N/A"?ge="<strong>"+me.features[0].properties.facility_name+"</strong><br/>Type: "+me.features[0].properties.type+"<br/>Capacity: "+d1(me.features[0].properties.capacity)+"<br/>Operator: "+me.features[0].properties.operator:ge="<strong>"+me.features[0].properties.facility_name+"</strong><br/>Type: "+me.features[0].properties.type+"<br/>Capacity: "+d1(me.features[0].properties.capacity)+" beds<br/>Operator: "+me.features[0].properties.operator,ee.setLngLat(Pe).setHTML(ge).addTo(l)}),l.on("mouseleave","facilities",()=>{$=null});const Be=document.getElementById("menu").getElementsByTagName("input");for(const me of Be)me.onclick=Pe=>{console.log("layer",Pe);const ge=Pe.target.id;console.log("layerId",ge),ge=="sat"?l.setStyle(s3):ge=="streets"&&l.setStyle(Yv)}}),l.on("idle",()=>{const _e=["Plantation"];for(const ue of _e){if(document.getElementById(ue))continue;const ee=document.createElement("a");ee.id=ue,ee.href="#",ee.textContent="Show "+ue+" Layer",ee.className="",ee.onclick=function(Be){const me=this.id;Be.preventDefault(),Be.stopPropagation(),l.getLayoutProperty(me,"visibility")==="visible"?(l.setLayoutProperty(me,"visibility","none"),this.className="",this.textContent="Show Plantation Layer"):(this.className="active",this.textContent="Hide Plantation Layer",l.setLayoutProperty(me,"visibility","visible"))},document.getElementById("mapmenu").appendChild(ee)}})});function R(K){pl(K),K.preventDefault()}function M(){w=Vm(this),r(2,w),r(1,E)}const O=()=>R(w);function G(K){l=K,r(0,l)}return e.$$set=K=>{"parishTitle"in K&&r(5,s=K.parishTitle)},[l,E,w,x,R,s,M,O,G]}class o3 extends ai{constructor(t){super(),si(this,t,a3,i3,ri,{parishTitle:5})}}function A3(e){return e===0?!0:e}function mu(e){return A3(e)?Array.isArray(e)?t=>e.map(r=>typeof r!="function"?t[r]:r(t)):typeof e!="function"?t=>t[e]:e:null}function l3(e){const t={};for(const r of e){if(Object(r)!==r)throw new TypeError("iterable for fromEntries should yield objects");const{"0":s,"1":l}=r;Object.defineProperty(t,s,{configurable:!0,enumerable:!0,writable:!0,value:l})}return t}function km(e,t={}){return l3(Object.entries(e).filter(([r,s])=>s!==void 0&&t[r]===void 0))}function c3(e,t,{sort:r=!1}={}){if(!Array.isArray(e))throw new TypeError(`The first argument of calcUniques() must be an array. You passed in a ${typeof e}. If you got this error using the <LayerCake> component, consider passing a flat array to the \`flatData\` prop. More info: https://layercake.graphics/guide/#flatdata`);if(Array.isArray(t)||t===void 0||t===null)throw new TypeError("The second argument of calcUniques() must be an object with field names as keys as accessor functions as values.");const s={},l=Object.keys(t),c=l.length;let h,a,d,_,p,E,w;const x=e.length;for(h=0;h<c;h+=1){for(w=new Set,_=l[h],p=t[_],a=0;a<x;a+=1)if(E=p(e[a]),Array.isArray(E)){const Q=E.length;for(d=0;d<Q;d+=1)w.add(E[d])}else w.add(E);const k=Array.from(w);s[_]=r===!0?k.sort():k}return s}function u3(e,t){if(!Array.isArray(e))throw new TypeError(`The first argument of calcExtents() must be an array. You passed in a ${typeof e}. If you got this error using the <LayerCake> component, consider passing a flat array to the \`flatData\` prop. More info: https://layercake.graphics/guide/#flatdata`);if(Array.isArray(t)||t===void 0||t===null)throw new TypeError("The second argument of calcExtents() must be an object with field names as keys as accessor functions as values.");const r={},s=Object.keys(t),l=s.length;let c,h,a,d,_,p,E,w;const x=e.length;for(c=0;c<l;c+=1){for(d=s[c],E=t[d],_=null,p=null,h=0;h<x;h+=1)if(w=E(e[h]),Array.isArray(w)){const k=w.length;for(a=0;a<k;a+=1)w[a]!==!1&&w[a]!==void 0&&w[a]!==null&&Number.isNaN(w[a])===!1&&((_===null||w[a]<_)&&(_=w[a]),(p===null||w[a]>p)&&(p=w[a]))}else w!==!1&&w!==void 0&&w!==null&&Number.isNaN(w)===!1&&((_===null||w<_)&&(_=w),(p===null||w>p)&&(p=w));r[d]=[_,p]}return r}function h3(e){return typeof e.bandwidth=="function"||f3(Object.keys(e),["domain","range","unknown","copy"])?"ordinal":"other"}function f3(e,t){return e.length!==t.length?!1:e.every(r=>t.includes(r))}function d3(e,t,r){const s=Object.keys(r).reduce((c,h)=>{const a=h3(r[h]);return c[a]||(c[a]={}),c[a][h]=t[h],c},{ordinal:!1,other:!1});let l={};return s.ordinal&&(l=c3(e,s.ordinal)),s.other&&(l={...l,...u3(e,s.other)}),l}function p3(e=[],t){return Array.isArray(t)===!0?t.map((r,s)=>r===null?e[s]:r):e}function Jd(e){return function([r,s]){return typeof s=="function"&&(s=s(r[e])),r?p3(r[e],s):s}}const Rf={x:wu,y:wu,z:wu,r:sC};function m3(e){return e.constant?"symlog":e.base?"log":e.exponent?e.exponent()===.5?"sqrt":"pow":"other"}function p1(e){return e}function g3(e){return t=>Math.log(e*t)}function y3(e){return t=>e*Math.exp(t)}function v3(e){return t=>Math.sign(t)*Math.log1p(Math.abs(t/e))}function _3(e){return t=>Math.sign(t)*Math.expm1(Math.abs(t))*e}function Yd(e){return function(r){return r<0?-Math.pow(-r,e):Math.pow(r,e)}}function w3(e){const t=m3(e);if(t==="log"){const r=Math.sign(e.domain()[0]);return{lift:g3(r),ground:y3(r),scaleType:t}}return t==="pow"?{lift:Yd(1),ground:Yd(1/1),scaleType:t}:t==="sqrt"?{lift:Yd(.5),ground:Yd(1/.5),scaleType:t}:t==="symlog"?{lift:v3(1),ground:_3(1),scaleType:t}:{lift:p1,ground:p1,scaleType:t}}function b3(e,t){if(typeof e.range!="function")throw new Error("Scale method `range` must be a function");if(typeof e.domain!="function")throw new Error("Scale method `domain` must be a function");if(!Array.isArray(t))return e.domain();e.domain().length!==2&&console.warn("[LayerCake] The scale is expected to have a domain of length 2 to use padding. Are you sure you want to use padding? Your scale's domain is:",e.domain()),e.range().length!==2&&console.warn("[LayerCake] The scale is expected to have a range of length 2 to use padding. Are you sure you want to use padding? Your scale's range is:",e.range());const{lift:r,ground:s}=w3(e),l=e.domain()[0],c=Object.prototype.toString.call(l)==="[object Date]",[h,a]=e.domain().map(x=>r(c?x.getTime():x)),[d,_]=e.range(),p=t[0]||0,E=t[1]||0,w=(a-h)/(Math.abs(_-d)-p-E);return[h-p*w,E*w+a].map(x=>s(c?new Date(x):x))}function x3(e,t,r,s,l){let c,h;return l===!0?(c=0,h=100):(c=e==="r"?1:0,h=e==="y"?r:e==="r"?25:t),s===!0?[h,c]:[c,h]}function B3(e,t,r,s,l,c){return l?typeof l=="function"?l({width:t,height:r}):l:x3(e,t,r,s,c)}function $d(e){return function([r,s,l,c,h,a,d,_,p,E]){if(s===null)return null;const w=B3(e,d,_,a,p,E),x=r===Rf[e]?r():r.copy();return x.domain(l),(!x.interpolator||typeof x.interpolator=="function"&&x.interpolator().name.startsWith("identity"))&&x.range(w),c&&x.domain(b3(x,c)),(h===!0||typeof h=="number")&&(typeof x.nice=="function"?x.nice(typeof h=="number"?h:void 0):console.error(`[Layer Cake] You set \`${e}Nice: true\` but the ${e}Scale does not have a \`.nice\` method. Ignoring...`)),x}}function ep([e,t]){return r=>{const s=e(r);return Array.isArray(s)?s.map(l=>t(l)):t(s)}}function tp([e]){if(typeof e=="function"){if(typeof e.range=="function")return e.range();console.error("[LayerCake] Your scale doesn't have a `.range` method?")}return null}const C3=e=>({element:e[0]&4,width:e[0]&256,height:e[0]&512,aspectRatio:e[0]&1024,containerWidth:e[0]&128,containerHeight:e[0]&64}),m1=e=>({element:e[2],width:e[8],height:e[9],aspectRatio:e[10],containerWidth:e[7],containerHeight:e[6]});function g1(e){let t,r,s;const l=e[90].default,c=wA(l,e,e[89],m1);return{c(){t=kt("div"),c&&c.c(),ce(t,"class","layercake-container svelte-vhzpsp"),xu(()=>e[92].call(t)),Qn(t,"position",e[5]),Qn(t,"top",e[5]==="absolute"?"0":null),Qn(t,"right",e[5]==="absolute"?"0":null),Qn(t,"bottom",e[5]==="absolute"?"0":null),Qn(t,"left",e[5]==="absolute"?"0":null),Qn(t,"pointer-events",e[4]===!1?"none":null)},m(h,a){ot(h,t,a),c&&c.m(t,null),e[91](t),r=L_(t,e[92].bind(t)),s=!0},p(h,a){c&&c.p&&(!s||a[0]&1988|a[2]&134217728)&&xA(c,l,h,h[89],s?bA(l,h[89],a,C3):BA(h[89]),m1),a[0]&32&&Qn(t,"position",h[5]),a[0]&32&&Qn(t,"top",h[5]==="absolute"?"0":null),a[0]&32&&Qn(t,"right",h[5]==="absolute"?"0":null),a[0]&32&&Qn(t,"bottom",h[5]==="absolute"?"0":null),a[0]&32&&Qn(t,"left",h[5]==="absolute"?"0":null),a[0]&16&&Qn(t,"pointer-events",h[4]===!1?"none":null)},i(h){s||(Pt(c,h),s=!0)},o(h){Gt(c,h),s=!1},d(h){h&&it(t),c&&c.d(h),e[91](null),r()}}}function E3(e){let t,r,s=(e[3]===!0||typeof window<"u")&&g1(e);return{c(){s&&s.c(),t=tA()},m(l,c){s&&s.m(l,c),ot(l,t,c),r=!0},p(l,c){l[3]===!0||typeof window<"u"?s?(s.p(l,c),c[0]&8&&Pt(s,1)):(s=g1(l),s.c(),Pt(s,1),s.m(t.parentNode,t)):s&&(Lo(),Gt(s,1,1,()=>{s=null}),Qo())},i(l){r||(Pt(s),r=!0)},o(l){Gt(s),r=!1},d(l){s&&s.d(l),l&&it(t)}}}function F3(e,t,r){let s,l,c,h,a,d,_,p,E,w,x,k,Q,R,M,O,G,K,Z,$,he,fe,_e,ue,ee,se,Be,me,Pe,ge,Qe,Te,tt,Oe,Mt,ne,Se,ke,Ke,at,dt,{$$slots:Bt={},$$scope:Ge}=t,{ssr:rt=!1}=t,{pointerEvents:Ut=!0}=t,{position:ht="relative"}=t,{percentRange:Nt=!1}=t,{width:dr=void 0}=t,{height:Lt=void 0}=t,{containerWidth:ze=dr||100}=t,{containerHeight:gr=Lt||100}=t,{element:sr=void 0}=t,{x:Ht=void 0}=t,{y:fr=void 0}=t,{z:Br=void 0}=t,{r:vr=void 0}=t,{data:Gr=[]}=t,{xDomain:rr=void 0}=t,{yDomain:xr=void 0}=t,{zDomain:Zr=void 0}=t,{rDomain:pn=void 0}=t,{xNice:vt=!1}=t,{yNice:nt=!1}=t,{zNice:bt=!1}=t,{rNice:Ct=!1}=t,{xPadding:jt=void 0}=t,{yPadding:er=void 0}=t,{zPadding:Vr=void 0}=t,{rPadding:Fr=void 0}=t,{xScale:un=Rf.x}=t,{yScale:lr=Rf.y}=t,{zScale:Er=Rf.z}=t,{rScale:An=Rf.r}=t,{xRange:wn=void 0}=t,{yRange:_i=void 0}=t,{zRange:br=void 0}=t,{rRange:Cr=void 0}=t,{xReverse:cr=!1}=t,{yReverse:Kr=typeof lr.bandwidth!="function"}=t,{zReverse:hn=!1}=t,{rReverse:xn=!1}=t,{padding:Sn={}}=t,{extents:ji={}}=t,{flatData:tn=void 0}=t,{custom:Wi={}}=t,hs=!1;Wa(()=>{hs=!0});const Ln={},nn=ui(Nt);$r(e,nn,gt=>r(128,ke=gt));const Ue=ui(ze);$r(e,Ue,gt=>r(7,Se=gt));const Y=ui(gr);$r(e,Y,gt=>r(6,ne=gt));const Ae=ui(km(ji));$r(e,Ae,gt=>r(127,Mt=gt));const Ee=ui(Gr);$r(e,Ee,gt=>r(126,Oe=gt));const Le=ui(tn||Gr);$r(e,Le,gt=>r(125,tt=gt));const Xe=ui(Sn);$r(e,Xe,gt=>r(124,Te=gt));const lt=ui(mu(Ht));$r(e,lt,gt=>r(123,Qe=gt));const Ye=ui(mu(fr));$r(e,Ye,gt=>r(122,ge=gt));const qe=ui(mu(Br));$r(e,qe,gt=>r(121,Pe=gt));const ut=ui(mu(vr));$r(e,ut,gt=>r(120,me=gt));const Ot=ui(rr);$r(e,Ot,gt=>r(119,Be=gt));const nr=ui(xr);$r(e,nr,gt=>r(118,se=gt));const zt=ui(Zr);$r(e,zt,gt=>r(117,ee=gt));const jr=ui(pn);$r(e,jr,gt=>r(116,ue=gt));const Hr=ui(vt);$r(e,Hr,gt=>r(115,_e=gt));const Tr=ui(nt);$r(e,Tr,gt=>r(114,fe=gt));const ln=ui(bt);$r(e,ln,gt=>r(113,he=gt));const dn=ui(Ct);$r(e,dn,gt=>r(112,$=gt));const In=ui(cr);$r(e,In,gt=>r(111,Z=gt));const mn=ui(Kr);$r(e,mn,gt=>r(110,K=gt));const Bn=ui(hn);$r(e,Bn,gt=>r(109,G=gt));const kn=ui(xn);$r(e,kn,gt=>r(108,O=gt));const Vn=ui(jt);$r(e,Vn,gt=>r(107,M=gt));const Ti=ui(er);$r(e,Ti,gt=>r(106,R=gt));const oi=ui(Vr);$r(e,oi,gt=>r(105,Q=gt));const wi=ui(Fr);$r(e,wi,gt=>r(104,k=gt));const Qs=ui(wn);$r(e,Qs,gt=>r(103,x=gt));const bi=ui(_i);$r(e,bi,gt=>r(102,w=gt));const Yn=ui(br);$r(e,Yn,gt=>r(101,E=gt));const Za=ui(Cr);$r(e,Za,gt=>r(100,p=gt));const Ks=ui(un);$r(e,Ks,gt=>r(99,_=gt));const Gs=ui(lr);$r(e,Gs,gt=>r(98,d=gt));const ia=ui(Er);$r(e,ia,gt=>r(97,a=gt));const gs=ui(An);$r(e,gs,gt=>r(96,h=gt));const Ri=ui(Ln);$r(e,Ri,gt=>r(94,l=gt));const Xi=ui(Wi);$r(e,Xi,gt=>r(95,c=gt));const mo=Ms([lt,Ye,qe,ut],([gt,Mn,Ds,Oi])=>{const ks={};return gt&&(ks.x=gt),Mn&&(ks.y=Mn),Ds&&(ks.z=Ds),Oi&&(ks.r=Oi),ks}),nA=Ms([Xe,Ue,Y],([gt])=>Object.assign({top:0,right:0,bottom:0,left:0},gt)),EA=Ms([Ue,Y,nA],([gt,Mn,Ds])=>{const Oi={};return Oi.top=Ds.top,Oi.right=gt-Ds.right,Oi.bottom=Mn-Ds.bottom,Oi.left=Ds.left,Oi.width=Oi.right-Oi.left,Oi.height=Oi.bottom-Oi.top,Oi.width<=0&&hs===!0&&console.warn("[LayerCake] Target div has zero or negative width. Did you forget to set an explicit width in CSS on the container?"),Oi.height<=0&&hs===!0&&console.warn("[LayerCake] Target div has zero or negative height. Did you forget to set an explicit height in CSS on the container?"),Oi}),sa=Ms([EA],([gt])=>gt.width);$r(e,sa,gt=>r(8,Ke=gt));const bs=Ms([EA],([gt])=>gt.height);$r(e,bs,gt=>r(9,at=gt));const xs=Ms([Le,mo,Ae,Ks,Gs,gs,ia],([gt,Mn,Ds,Oi,ks,ya,Ya])=>{const Cs={x:Oi,y:ks,r:ya,z:Ya},Aa=km(Mn,Ds),$a=Object.fromEntries(Object.keys(Aa).map(va=>[va,Cs[va]]));return Object.keys(Aa).length>0?{...d3(gt,Aa,$a),...Ds}:{}}),Ja=Ms([xs,Ot],Jd("x")),aa=Ms([xs,nr],Jd("y")),Po=Ms([xs,zt],Jd("z")),ka=Ms([xs,jr],Jd("r")),Mo=Ms([Ks,xs,Ja,Vn,Hr,In,sa,bs,Qs,nn],$d("x")),oa=Ms([lt,Mo],ep),qs=Ms([Gs,xs,aa,Ti,Tr,mn,sa,bs,bi,nn],$d("y")),ni=Ms([Ye,qs],ep),Bs=Ms([ia,xs,Po,oi,ln,Bn,sa,bs,Yn,nn],$d("z")),ys=Ms([qe,Bs],ep),iA=Ms([gs,xs,ka,wi,dn,kn,sa,bs,Za,nn],$d("r")),sA=Ms([ut,iA],ep),Cn=Ms([Mo],tp),qA=Ms([qs],tp),ml=Ms([Bs],tp),Pa=Ms([iA],tp),go=Ms([sa,bs],([gt,Mn])=>gt/Mn);$r(e,go,gt=>r(10,dt=gt));function aA(gt){qa[gt?"unshift":"push"](()=>{sr=gt,r(2,sr)})}function yo(){ze=this.clientWidth,gr=this.clientHeight,r(0,ze),r(1,gr)}return e.$$set=gt=>{"ssr"in gt&&r(3,rt=gt.ssr),"pointerEvents"in gt&&r(4,Ut=gt.pointerEvents),"position"in gt&&r(5,ht=gt.position),"percentRange"in gt&&r(51,Nt=gt.percentRange),"width"in gt&&r(52,dr=gt.width),"height"in gt&&r(53,Lt=gt.height),"containerWidth"in gt&&r(0,ze=gt.containerWidth),"containerHeight"in gt&&r(1,gr=gt.containerHeight),"element"in gt&&r(2,sr=gt.element),"x"in gt&&r(54,Ht=gt.x),"y"in gt&&r(55,fr=gt.y),"z"in gt&&r(56,Br=gt.z),"r"in gt&&r(57,vr=gt.r),"data"in gt&&r(58,Gr=gt.data),"xDomain"in gt&&r(59,rr=gt.xDomain),"yDomain"in gt&&r(60,xr=gt.yDomain),"zDomain"in gt&&r(61,Zr=gt.zDomain),"rDomain"in gt&&r(62,pn=gt.rDomain),"xNice"in gt&&r(63,vt=gt.xNice),"yNice"in gt&&r(64,nt=gt.yNice),"zNice"in gt&&r(65,bt=gt.zNice),"rNice"in gt&&r(66,Ct=gt.rNice),"xPadding"in gt&&r(67,jt=gt.xPadding),"yPadding"in gt&&r(68,er=gt.yPadding),"zPadding"in gt&&r(69,Vr=gt.zPadding),"rPadding"in gt&&r(70,Fr=gt.rPadding),"xScale"in gt&&r(71,un=gt.xScale),"yScale"in gt&&r(72,lr=gt.yScale),"zScale"in gt&&r(73,Er=gt.zScale),"rScale"in gt&&r(74,An=gt.rScale),"xRange"in gt&&r(75,wn=gt.xRange),"yRange"in gt&&r(76,_i=gt.yRange),"zRange"in gt&&r(77,br=gt.zRange),"rRange"in gt&&r(78,Cr=gt.rRange),"xReverse"in gt&&r(79,cr=gt.xReverse),"yReverse"in gt&&r(80,Kr=gt.yReverse),"zReverse"in gt&&r(81,hn=gt.zReverse),"rReverse"in gt&&r(82,xn=gt.rReverse),"padding"in gt&&r(83,Sn=gt.padding),"extents"in gt&&r(84,ji=gt.extents),"flatData"in gt&&r(85,tn=gt.flatData),"custom"in gt&&r(86,Wi=gt.custom),"$$scope"in gt&&r(89,Ge=gt.$$scope)},e.$$.update=()=>{e.$$.dirty[1]&8388608&&Ht&&r(87,Ln.x=Ht,Ln),e.$$.dirty[1]&16777216&&fr&&r(87,Ln.y=fr,Ln),e.$$.dirty[1]&33554432&&Br&&r(87,Ln.z=Br,Ln),e.$$.dirty[1]&67108864&&vr&&r(87,Ln.r=vr,Ln),e.$$.dirty[1]&268435456&&rr&&r(87,Ln.xDomain=rr,Ln),e.$$.dirty[1]&536870912&&xr&&r(87,Ln.yDomain=xr,Ln),e.$$.dirty[1]&1073741824&&Zr&&r(87,Ln.zDomain=Zr,Ln),e.$$.dirty[2]&1&&pn&&r(87,Ln.rDomain=pn,Ln),e.$$.dirty[2]&8192&&wn&&r(87,Ln.xRange=wn,Ln),e.$$.dirty[2]&16384&&_i&&r(87,Ln.yRange=_i,Ln),e.$$.dirty[2]&32768&&br&&r(87,Ln.zRange=br,Ln),e.$$.dirty[2]&65536&&Cr&&r(87,Ln.rRange=Cr,Ln),e.$$.dirty[1]&1048576&&vi(nn,ke=Nt,ke),e.$$.dirty[0]&1&&vi(Ue,Se=ze,Se),e.$$.dirty[0]&2&&vi(Y,ne=gr,ne),e.$$.dirty[2]&4194304&&vi(Ae,Mt=km(ji),Mt),e.$$.dirty[1]&134217728&&vi(Ee,Oe=Gr,Oe),e.$$.dirty[1]&134217728|e.$$.dirty[2]&8388608&&vi(Le,tt=tn||Gr,tt),e.$$.dirty[2]&2097152&&vi(Xe,Te=Sn,Te),e.$$.dirty[1]&8388608&&vi(lt,Qe=mu(Ht),Qe),e.$$.dirty[1]&16777216&&vi(Ye,ge=mu(fr),ge),e.$$.dirty[1]&33554432&&vi(qe,Pe=mu(Br),Pe),e.$$.dirty[1]&67108864&&vi(ut,me=mu(vr),me),e.$$.dirty[1]&268435456&&vi(Ot,Be=rr,Be),e.$$.dirty[1]&536870912&&vi(nr,se=xr,se),e.$$.dirty[1]&1073741824&&vi(zt,ee=Zr,ee),e.$$.dirty[2]&1&&vi(jr,ue=pn,ue),e.$$.dirty[2]&2&&vi(Hr,_e=vt,_e),e.$$.dirty[2]&4&&vi(Tr,fe=nt,fe),e.$$.dirty[2]&8&&vi(ln,he=bt,he),e.$$.dirty[2]&16&&vi(dn,$=Ct,$),e.$$.dirty[2]&131072&&vi(In,Z=cr,Z),e.$$.dirty[2]&262144&&vi(mn,K=Kr,K),e.$$.dirty[2]&524288&&vi(Bn,G=hn,G),e.$$.dirty[2]&1048576&&vi(kn,O=xn,O),e.$$.dirty[2]&32&&vi(Vn,M=jt,M),e.$$.dirty[2]&64&&vi(Ti,R=er,R),e.$$.dirty[2]&128&&vi(oi,Q=Vr,Q),e.$$.dirty[2]&256&&vi(wi,k=Fr,k),e.$$.dirty[2]&8192&&vi(Qs,x=wn,x),e.$$.dirty[2]&16384&&vi(bi,w=_i,w),e.$$.dirty[2]&32768&&vi(Yn,E=br,E),e.$$.dirty[2]&65536&&vi(Za,p=Cr,p),e.$$.dirty[2]&512&&vi(Ks,_=un,_),e.$$.dirty[2]&1024&&vi(Gs,d=lr,d),e.$$.dirty[2]&2048&&vi(ia,a=Er,a),e.$$.dirty[2]&4096&&vi(gs,h=An,h),e.$$.dirty[2]&16777216&&vi(Xi,c=Wi,c),e.$$.dirty[2]&33554432&&vi(Ri,l=Ln,l),e.$$.dirty[2]&67108864&&Kh("LayerCake",s)},r(88,s={activeGetters:mo,width:sa,height:bs,percentRange:nn,aspectRatio:go,containerWidth:Ue,containerHeight:Y,x:lt,y:Ye,z:qe,r:ut,custom:Xi,data:Ee,xNice:Hr,yNice:Tr,zNice:ln,rNice:dn,xReverse:In,yReverse:mn,zReverse:Bn,rReverse:kn,xPadding:Vn,yPadding:Ti,zPadding:oi,rPadding:wi,padding:nA,flatData:Le,extents:xs,xDomain:Ja,yDomain:aa,zDomain:Po,rDomain:ka,xRange:Cn,yRange:qA,zRange:ml,rRange:Pa,config:Ri,xScale:Mo,xGet:oa,yScale:qs,yGet:ni,zScale:Bs,zGet:ys,rScale:iA,rGet:sA}),[ze,gr,sr,rt,Ut,ht,ne,Se,Ke,at,dt,nn,Ue,Y,Ae,Ee,Le,Xe,lt,Ye,qe,ut,Ot,nr,zt,jr,Hr,Tr,ln,dn,In,mn,Bn,kn,Vn,Ti,oi,wi,Qs,bi,Yn,Za,Ks,Gs,ia,gs,Ri,Xi,sa,bs,go,Nt,dr,Lt,Ht,fr,Br,vr,Gr,rr,xr,Zr,pn,vt,nt,bt,Ct,jt,er,Vr,Fr,un,lr,Er,An,wn,_i,br,Cr,cr,Kr,hn,xn,Sn,ji,tn,Wi,Ln,s,Ge,Bt,aA,yo]}class nh extends ai{constructor(t){super(),si(this,t,F3,E3,ri,{ssr:3,pointerEvents:4,position:5,percentRange:51,width:52,height:53,containerWidth:0,containerHeight:1,element:2,x:54,y:55,z:56,r:57,data:58,xDomain:59,yDomain:60,zDomain:61,rDomain:62,xNice:63,yNice:64,zNice:65,rNice:66,xPadding:67,yPadding:68,zPadding:69,rPadding:70,xScale:71,yScale:72,zScale:73,rScale:74,xRange:75,yRange:76,zRange:77,rRange:78,xReverse:79,yReverse:80,zReverse:81,rReverse:82,padding:83,extents:84,flatData:85,custom:86},null,[-1,-1,-1,-1,-1])}}const S3=e=>({element:e&1}),y1=e=>({element:e[0]});function I3(e){let t,r;const s=e[6].default,l=wA(s,e,e[5],y1);return{c(){t=kt("div"),l&&l.c(),ce(t,"class","layercake-layout-html svelte-1bu60uu"),Qn(t,"z-index",e[1]),Qn(t,"pointer-events",e[2]===!1?"none":null),Qn(t,"top",e[3].top+"px"),Qn(t,"right",e[3].right+"px"),Qn(t,"bottom",e[3].bottom+"px"),Qn(t,"left",e[3].left+"px")},m(c,h){ot(c,t,h),l&&l.m(t,null),e[7](t),r=!0},p(c,[h]){l&&l.p&&(!r||h&33)&&xA(l,s,c,c[5],r?bA(s,c[5],h,S3):BA(c[5]),y1),h&2&&Qn(t,"z-index",c[1]),h&4&&Qn(t,"pointer-events",c[2]===!1?"none":null),h&8&&Qn(t,"top",c[3].top+"px"),h&8&&Qn(t,"right",c[3].right+"px"),h&8&&Qn(t,"bottom",c[3].bottom+"px"),h&8&&Qn(t,"left",c[3].left+"px")},i(c){r||(Pt(l,c),r=!0)},o(c){Gt(l,c),r=!1},d(c){c&&it(t),l&&l.d(c),e[7](null)}}}function T3(e,t,r){let s,{$$slots:l={},$$scope:c}=t,{element:h=void 0}=t,{zIndex:a=void 0}=t,{pointerEvents:d=void 0}=t;const{padding:_}=Yo("LayerCake");$r(e,_,E=>r(3,s=E));function p(E){qa[E?"unshift":"push"](()=>{h=E,r(0,h)})}return e.$$set=E=>{"element"in E&&r(0,h=E.element),"zIndex"in E&&r(1,a=E.zIndex),"pointerEvents"in E&&r(2,d=E.pointerEvents),"$$scope"in E&&r(5,c=E.$$scope)},[h,a,d,s,_,c,l,p]}class ah extends ai{constructor(t){super(),si(this,t,T3,I3,ri,{element:0,zIndex:1,pointerEvents:2})}}const U3=e=>({element:e&1}),v1=e=>({element:e[0]}),L3=e=>({element:e&1}),_1=e=>({element:e[0]});function Q3(e){let t,r,s,l,c;const h=e[12].defs,a=wA(h,e,e[11],_1),d=e[12].default,_=wA(d,e,e[11],v1);return{c(){t=Gn("svg"),r=Gn("defs"),a&&a.c(),s=Gn("g"),_&&_.c(),ce(s,"class","layercake-layout-svg_g"),ce(s,"transform",l="translate("+e[7].left+", "+e[7].top+")"),ce(t,"class","layercake-layout-svg svelte-u84d8d"),ce(t,"viewBox",e[4]),ce(t,"width",e[5]),ce(t,"height",e[6]),Qn(t,"z-index",e[2]),Qn(t,"pointer-events",e[3]===!1?"none":null)},m(p,E){ot(p,t,E),st(t,r),a&&a.m(r,null),st(t,s),_&&_.m(s,null),e[13](s),e[14](t),c=!0},p(p,[E]){a&&a.p&&(!c||E&2049)&&xA(a,h,p,p[11],c?bA(h,p[11],E,L3):BA(p[11]),_1),_&&_.p&&(!c||E&2049)&&xA(_,d,p,p[11],c?bA(d,p[11],E,U3):BA(p[11]),v1),(!c||E&128&&l!==(l="translate("+p[7].left+", "+p[7].top+")"))&&ce(s,"transform",l),(!c||E&16)&&ce(t,"viewBox",p[4]),(!c||E&32)&&ce(t,"width",p[5]),(!c||E&64)&&ce(t,"height",p[6]),E&4&&Qn(t,"z-index",p[2]),E&8&&Qn(t,"pointer-events",p[3]===!1?"none":null)},i(p){c||(Pt(a,p),Pt(_,p),c=!0)},o(p){Gt(a,p),Gt(_,p),c=!1},d(p){p&&it(t),a&&a.d(p),_&&_.d(p),e[13](null),e[14](null)}}}function k3(e,t,r){let s,l,c,{$$slots:h={},$$scope:a}=t,{element:d=void 0}=t,{innerElement:_=void 0}=t,{zIndex:p=void 0}=t,{pointerEvents:E=void 0}=t,{viewBox:w=void 0}=t;const{containerWidth:x,containerHeight:k,padding:Q}=Yo("LayerCake");$r(e,x,O=>r(5,s=O)),$r(e,k,O=>r(6,l=O)),$r(e,Q,O=>r(7,c=O));function R(O){qa[O?"unshift":"push"](()=>{_=O,r(1,_)})}function M(O){qa[O?"unshift":"push"](()=>{d=O,r(0,d)})}return e.$$set=O=>{"element"in O&&r(0,d=O.element),"innerElement"in O&&r(1,_=O.innerElement),"zIndex"in O&&r(2,p=O.zIndex),"pointerEvents"in O&&r(3,E=O.pointerEvents),"viewBox"in O&&r(4,w=O.viewBox),"$$scope"in O&&r(11,a=O.$$scope)},[d,_,p,E,w,s,l,c,x,k,Q,a,h,R,M]}class oh extends ai{constructor(t){super(),si(this,t,k3,Q3,ri,{element:0,innerElement:1,zIndex:2,pointerEvents:3,viewBox:4})}}function w1(e,t,r){const s=e.slice();return s[18]=t[r],s[20]=r,s}function b1(e){let t,r,s,l,c,h,a;function d(...E){return e[13](e[18],...E)}function _(...E){return e[14](e[18],...E)}function p(...E){return e[15](e[18],...E)}return{c(){t=Gn("rect"),ce(t,"class","group-rect"),ce(t,"data-id",e[20]),ce(t,"x",r=e[2].range()[0]),ce(t,"y",s=e[3](e[18])),ce(t,"height",l=e[4].bandwidth()),ce(t,"width",c=e[5](e[18])),ce(t,"fill",e[0])},m(E,w){ot(E,t,w),h||(a=[us(t,"mouseover",d),us(t,"focus",_),us(t,"mousemove",p)],h=!0)},p(E,w){e=E,w&4&&r!==(r=e[2].range()[0])&&ce(t,"x",r),w&10&&s!==(s=e[3](e[18]))&&ce(t,"y",s),w&16&&l!==(l=e[4].bandwidth())&&ce(t,"height",l),w&34&&c!==(c=e[5](e[18]))&&ce(t,"width",c),w&1&&ce(t,"fill",e[0])},d(E){E&&it(t),h=!1,eA(a)}}}function P3(e){let t,r,s,l=e[1],c=[];for(let h=0;h<l.length;h+=1)c[h]=b1(w1(e,l,h));return{c(){t=Gn("g");for(let h=0;h<c.length;h+=1)c[h].c();ce(t,"class","bar-group")},m(h,a){ot(h,t,a);for(let d=0;d<c.length;d+=1)c[d].m(t,null);r||(s=[us(t,"mouseout",e[16]),us(t,"blur",e[17])],r=!0)},p(h,[a]){if(a&6207){l=h[1];let d;for(d=0;d<l.length;d+=1){const _=w1(h,l,d);c[d]?c[d].p(_,a):(c[d]=b1(_),c[d].c(),c[d].m(t,null))}for(;d<c.length;d+=1)c[d].d(1);c.length=l.length}},i:bn,o:bn,d(h){h&&it(t),mc(c,h),r=!1,eA(s)}}}function M3(e,t,r){let s,l,c,h,a;const{data:d,xGet:_,yGet:p,xScale:E,yScale:w}=Yo("LayerCake");$r(e,d,Z=>r(1,s=Z)),$r(e,_,Z=>r(5,a=Z)),$r(e,p,Z=>r(3,c=Z)),$r(e,E,Z=>r(2,l=Z)),$r(e,w,Z=>r(4,h=Z));let{fill:x="#97dfd1"}=t;const k=Yh();function Q(Z){return function(he){raise(this),he.layerX!==0&&he.layerY!==0&&k("mousemove",{e:he})}}const R=(Z,$)=>k("mousemove",{e:$,props:Z}),M=(Z,$)=>k("mousemove",{e:$,props:Z}),O=(Z,$)=>Q(),G=Z=>k("mouseout"),K=Z=>k("mouseout");return e.$$set=Z=>{"fill"in Z&&r(0,x=Z.fill)},[x,s,l,c,h,a,d,_,p,E,w,k,Q,R,M,O,G,K]}class Op extends ai{constructor(t){super(),si(this,t,M3,P3,ri,{fill:0})}}function x1(e,t,r){const s=e.slice();return s[19]=t[r],s[21]=r,s}function B1(e){let t,r;return{c(){t=Gn("line"),ce(t,"class","gridline svelte-19phsub"),ce(t,"y1",r=e[11]*-1),ce(t,"y2","0"),ce(t,"x1","0"),ce(t,"x2","0")},m(s,l){ot(s,t,l)},p(s,l){l&2048&&r!==(r=s[11]*-1)&&ce(t,"y1",r)},d(s){s&&it(t)}}}function C1(e){let t,r,s;return{c(){t=Gn("line"),ce(t,"class","tick-mark svelte-19phsub"),ce(t,"y1",0),ce(t,"y2",6),ce(t,"x1",r=e[5]||e[7]?e[8].bandwidth()/2:0),ce(t,"x2",s=e[5]||e[7]?e[8].bandwidth()/2:0)},m(l,c){ot(l,t,c)},p(l,c){c&416&&r!==(r=l[5]||l[7]?l[8].bandwidth()/2:0)&&ce(t,"x1",r),c&416&&s!==(s=l[5]||l[7]?l[8].bandwidth()/2:0)&&ce(t,"x2",s)},d(l){l&&it(t)}}}function E1(e,t){let r,s,l,c=t[4](t[19])+"",h,a,d,_,p,E=t[0]!==!1&&B1(t),w=t[1]===!0&&C1(t);return{key:e,first:null,c(){r=Gn("g"),E&&E.c(),s=tA(),w&&w.c(),l=Gn("text"),h=Ir(c),ce(l,"x",a=t[5]||t[7]?t[8].bandwidth()/2:0),ce(l,"y",t[6]),ce(l,"dx",""),ce(l,"dy",""),ce(l,"text-anchor",d=t[17](t[21])),ce(l,"class","svelte-19phsub"),ce(r,"class",_="tick tick-"+t[21]+" svelte-19phsub"),ce(r,"transform",p="translate("+t[8](t[19])+","+Math.max(...t[10])+")"),this.first=r},m(x,k){ot(x,r,k),E&&E.m(r,null),st(r,s),w&&w.m(r,null),st(r,l),st(l,h)},p(x,k){t=x,t[0]!==!1?E?E.p(t,k):(E=B1(t),E.c(),E.m(r,s)):E&&(E.d(1),E=null),t[1]===!0?w?w.p(t,k):(w=C1(t),w.c(),w.m(r,l)):w&&(w.d(1),w=null),k&528&&c!==(c=t[4](t[19])+"")&&ei(h,c),k&416&&a!==(a=t[5]||t[7]?t[8].bandwidth()/2:0)&&ce(l,"x",a),k&64&&ce(l,"y",t[6]),k&512&&d!==(d=t[17](t[21]))&&ce(l,"text-anchor",d),k&512&&_!==(_="tick tick-"+t[21]+" svelte-19phsub")&&ce(r,"class",_),k&1792&&p!==(p="translate("+t[8](t[19])+","+Math.max(...t[10])+")")&&ce(r,"transform",p)},d(x){x&&it(r),E&&E.d(),w&&w.d()}}}function F1(e){let t,r,s;return{c(){t=Gn("line"),ce(t,"class","baseline svelte-19phsub"),ce(t,"y1",r=e[11]+.5),ce(t,"y2",s=e[11]+.5),ce(t,"x1","0"),ce(t,"x2",e[12])},m(l,c){ot(l,t,c)},p(l,c){c&2048&&r!==(r=l[11]+.5)&&ce(t,"y1",r),c&2048&&s!==(s=l[11]+.5)&&ce(t,"y2",s),c&4096&&ce(t,"x2",l[12])},d(l){l&&it(t)}}}function D3(e){let t,r=[],s=new Map,l,c=e[9];const h=d=>d[19];for(let d=0;d<c.length;d+=1){let _=x1(e,c,d),p=h(_);s.set(p,r[d]=E1(p,_))}let a=e[2]===!0&&F1(e);return{c(){t=Gn("g");for(let d=0;d<r.length;d+=1)r[d].c();l=tA(),a&&a.c(),ce(t,"class","axis x-axis svelte-19phsub"),fp(t,"snapTicks",e[3])},m(d,_){ot(d,t,_);for(let p=0;p<r.length;p+=1)r[p].m(t,null);st(t,l),a&&a.m(t,null)},p(d,[_]){_&135155&&(c=d[9],r=qy(r,_,h,1,d,c,s,t,Gy,E1,l,x1)),d[2]===!0?a?a.p(d,_):(a=F1(d),a.c(),a.m(t,null)):a&&(a.d(1),a=null),_&8&&fp(t,"snapTicks",d[3])},i:bn,o:bn,d(d){d&&it(t);for(let _=0;_<r.length;_+=1)r[_].d();a&&a.d()}}}function N3(e,t,r){let s,l,c,h,a,d;const{width:_,height:p,xScale:E,yRange:w}=Yo("LayerCake");$r(e,_,$=>r(12,d=$)),$r(e,p,$=>r(11,a=$)),$r(e,E,$=>r(8,c=$)),$r(e,w,$=>r(10,h=$));let{gridlines:x=!0}=t,{tickMarks:k=!1}=t,{baseline:Q=!1}=t,{snapTicks:R=!1}=t,{formatTick:M=$=>$}=t,{ticks:O=void 0}=t,{xTick:G=0}=t,{yTick:K=16}=t;function Z($){if(R===!0){if($===0)return"start";if($===l.length-1)return"end"}return"middle"}return e.$$set=$=>{"gridlines"in $&&r(0,x=$.gridlines),"tickMarks"in $&&r(1,k=$.tickMarks),"baseline"in $&&r(2,Q=$.baseline),"snapTicks"in $&&r(3,R=$.snapTicks),"formatTick"in $&&r(4,M=$.formatTick),"ticks"in $&&r(18,O=$.ticks),"xTick"in $&&r(5,G=$.xTick),"yTick"in $&&r(6,K=$.yTick)},e.$$.update=()=>{e.$$.dirty&256&&r(7,s=typeof c.bandwidth=="function"),e.$$.dirty&262528&&r(9,l=Array.isArray(O)?O:s?c.domain():typeof O=="function"?O(c.ticks()):c.ticks(O))},[x,k,Q,R,M,G,K,s,c,l,h,a,d,_,p,E,w,Z,O]}class Oc extends ai{constructor(t){super(),si(this,t,N3,D3,ri,{gridlines:0,tickMarks:1,baseline:2,snapTicks:3,formatTick:4,ticks:18,xTick:5,yTick:6})}}function S1(e,t,r){const s=e.slice();return s[17]=t[r],s}function I1(e){let t,r,s;return{c(){t=Gn("line"),ce(t,"class","gridline svelte-df3iti"),ce(t,"x2","100%"),ce(t,"y1",r=e[4]+(e[8]?e[9].bandwidth()/2:0)),ce(t,"y2",s=e[4]+(e[8]?e[9].bandwidth()/2:0))},m(l,c){ot(l,t,c)},p(l,c){c&784&&r!==(r=l[4]+(l[8]?l[9].bandwidth()/2:0))&&ce(t,"y1",r),c&784&&s!==(s=l[4]+(l[8]?l[9].bandwidth()/2:0))&&ce(t,"y2",s)},d(l){l&&it(t)}}}function T1(e){let t,r,s,l;return{c(){t=Gn("line"),ce(t,"class","tick-mark svelte-df3iti"),ce(t,"x1","0"),ce(t,"x2",r=e[8]?-6:6),ce(t,"y1",s=e[4]+(e[8]?e[9].bandwidth()/2:0)),ce(t,"y2",l=e[4]+(e[8]?e[9].bandwidth()/2:0))},m(c,h){ot(c,t,h)},p(c,h){h&256&&r!==(r=c[8]?-6:6)&&ce(t,"x2",r),h&784&&s!==(s=c[4]+(c[8]?c[9].bandwidth()/2:0))&&ce(t,"y1",s),h&784&&l!==(l=c[4]+(c[8]?c[9].bandwidth()/2:0))&&ce(t,"y2",l)},d(c){c&&it(t)}}}function U1(e,t){let r,s,l,c=t[2](t[17])+"",h,a,d,_,p,E,w=t[0]!==!1&&I1(t),x=t[1]===!0&&T1(t);return{key:e,first:null,c(){r=Gn("g"),w&&w.c(),s=tA(),x&&x.c(),l=Gn("text"),h=Ir(c),ce(l,"x",t[3]),ce(l,"y",a=t[4]+(t[8]?t[9].bandwidth()/2:0)),ce(l,"dx",d=t[8]?-9:t[5]),ce(l,"dy",_=t[8]?4:t[6]),Qn(l,"text-anchor",t[8]?"end":t[7]),ce(l,"class","svelte-df3iti"),ce(r,"class",p="tick tick-"+t[17]+" svelte-df3iti"),ce(r,"transform",E="translate("+(t[12][0]+(t[8]?t[11].left:0))+", "+t[9](t[17])+")"),this.first=r},m(k,Q){ot(k,r,Q),w&&w.m(r,null),st(r,s),x&&x.m(r,null),st(r,l),st(l,h)},p(k,Q){t=k,t[0]!==!1?w?w.p(t,Q):(w=I1(t),w.c(),w.m(r,s)):w&&(w.d(1),w=null),t[1]===!0?x?x.p(t,Q):(x=T1(t),x.c(),x.m(r,l)):x&&(x.d(1),x=null),Q&1028&&c!==(c=t[2](t[17])+"")&&ei(h,c),Q&8&&ce(l,"x",t[3]),Q&784&&a!==(a=t[4]+(t[8]?t[9].bandwidth()/2:0))&&ce(l,"y",a),Q&288&&d!==(d=t[8]?-9:t[5])&&ce(l,"dx",d),Q&320&&_!==(_=t[8]?4:t[6])&&ce(l,"dy",_),Q&384&&Qn(l,"text-anchor",t[8]?"end":t[7]),Q&1024&&p!==(p="tick tick-"+t[17]+" svelte-df3iti")&&ce(r,"class",p),Q&7936&&E!==(E="translate("+(t[12][0]+(t[8]?t[11].left:0))+", "+t[9](t[17])+")")&&ce(r,"transform",E)},d(k){k&&it(r),w&&w.d(),x&&x.d()}}}function j3(e){let t,r=[],s=new Map,l,c=e[10];const h=a=>a[17];for(let a=0;a<c.length;a+=1){let d=S1(e,c,a),_=h(d);s.set(_,r[a]=U1(_,d))}return{c(){t=Gn("g");for(let a=0;a<r.length;a+=1)r[a].c();ce(t,"class","axis y-axis"),ce(t,"transform",l="translate("+-e[11].left+", 0)")},m(a,d){ot(a,t,d);for(let _=0;_<r.length;_+=1)r[_].m(t,null)},p(a,[d]){d&8191&&(c=a[10],r=qy(r,d,h,1,a,c,s,t,Gy,U1,null,S1)),d&2048&&l!==(l="translate("+-a[11].left+", 0)")&&ce(t,"transform",l)},i:bn,o:bn,d(a){a&&it(t);for(let d=0;d<r.length;d+=1)r[d].d()}}}function R3(e,t,r){let s,l,c,h,a;const{padding:d,xRange:_,yScale:p}=Yo("LayerCake");$r(e,d,K=>r(11,h=K)),$r(e,_,K=>r(12,a=K)),$r(e,p,K=>r(9,c=K));let{gridlines:E=!0}=t,{tickMarks:w=!1}=t,{formatTick:x=K=>K}=t,{ticks:k=4}=t,{xTick:Q=0}=t,{yTick:R=0}=t,{dxTick:M=0}=t,{dyTick:O=-4}=t,{textAnchor:G="start"}=t;return e.$$set=K=>{"gridlines"in K&&r(0,E=K.gridlines),"tickMarks"in K&&r(1,w=K.tickMarks),"formatTick"in K&&r(2,x=K.formatTick),"ticks"in K&&r(16,k=K.ticks),"xTick"in K&&r(3,Q=K.xTick),"yTick"in K&&r(4,R=K.yTick),"dxTick"in K&&r(5,M=K.dxTick),"dyTick"in K&&r(6,O=K.dyTick),"textAnchor"in K&&r(7,G=K.textAnchor)},e.$$.update=()=>{e.$$.dirty&512&&r(8,s=typeof c.bandwidth=="function"),e.$$.dirty&66304&&r(10,l=Array.isArray(k)?k:s?c.domain():typeof k=="function"?k(c.ticks()):c.ticks(k))},[E,w,x,Q,R,M,O,G,s,c,l,h,a,d,_,p,k]}class Hc extends ai{constructor(t){super(),si(this,t,R3,j3,ri,{gridlines:0,tickMarks:1,formatTick:2,ticks:16,xTick:3,yTick:4,dxTick:5,dyTick:6,textAnchor:7})}}const O3=e=>({detail:e&2}),L1=e=>({detail:e[1].detail}),H3=e=>({detail:e&1}),Q1=e=>({detail:e[0].detail});function k1(e){let t,r;const s=e[4].default,l=wA(s,e,e[3],Q1);return{c(){t=kt("div"),l&&l.c(),ce(t,"class","tooltip svelte-12op57k"),Qn(t,"top",e[0].detail.e.layerY+"px"),Qn(t,"left",e[0].detail.e.layerX-e[2]+"px")},m(c,h){ot(c,t,h),l&&l.m(t,null),r=!0},p(c,h){l&&l.p&&(!r||h&9)&&xA(l,s,c,c[3],r?bA(s,c[3],h,H3):BA(c[3]),Q1),(!r||h&1)&&Qn(t,"top",c[0].detail.e.layerY+"px"),(!r||h&5)&&Qn(t,"left",c[0].detail.e.layerX-c[2]+"px")},i(c){r||(Pt(l,c),r=!0)},o(c){Gt(l,c),r=!1},d(c){c&&it(t),l&&l.d(c)}}}function P1(e){let t,r;const s=e[4].default,l=wA(s,e,e[3],L1);return{c(){t=kt("div"),l&&l.c(),ce(t,"class","tooltip svelte-12op57k"),Qn(t,"top",e[1].detail.e.layerY+"px"),Qn(t,"left",e[1].detail.e.layerX-e[2]+"px")},m(c,h){ot(c,t,h),l&&l.m(t,null),r=!0},p(c,h){l&&l.p&&(!r||h&10)&&xA(l,s,c,c[3],r?bA(s,c[3],h,O3):BA(c[3]),L1),(!r||h&2)&&Qn(t,"top",c[1].detail.e.layerY+"px"),(!r||h&6)&&Qn(t,"left",c[1].detail.e.layerX-c[2]+"px")},i(c){r||(Pt(l,c),r=!0)},o(c){Gt(l,c),r=!1},d(c){c&&it(t),l&&l.d(c)}}}function z3(e){let t,r,s,l=e[0].detail&&k1(e),c=e[1].detail&&P1(e);return{c(){l&&l.c(),t=$t(),c&&c.c(),r=tA()},m(h,a){l&&l.m(h,a),ot(h,t,a),c&&c.m(h,a),ot(h,r,a),s=!0},p(h,[a]){h[0].detail?l?(l.p(h,a),a&1&&Pt(l,1)):(l=k1(h),l.c(),Pt(l,1),l.m(t.parentNode,t)):l&&(Lo(),Gt(l,1,1,()=>{l=null}),Qo()),h[1].detail?c?(c.p(h,a),a&2&&Pt(c,1)):(c=P1(h),c.c(),Pt(c,1),c.m(r.parentNode,r)):c&&(Lo(),Gt(c,1,1,()=>{c=null}),Qo())},i(h){s||(Pt(l),Pt(c),s=!0)},o(h){Gt(l),Gt(c),s=!1},d(h){l&&l.d(h),h&&it(t),c&&c.d(h),h&&it(r)}}}function V3(e,t,r){let{$$slots:s={},$$scope:l}=t,{evt:c={}}=t,{evt2:h={}}=t,{offset:a=50}=t;return e.$$set=d=>{"evt"in d&&r(0,c=d.evt),"evt2"in d&&r(1,h=d.evt2),"offset"in d&&r(2,a=d.offset),"$$scope"in d&&r(3,l=d.$$scope)},[c,h,a,l,s]}class ld extends ai{constructor(t){super(),si(this,t,V3,z3,ri,{evt:0,evt2:1,offset:2})}}function M1(e){const t={...e[13].props};e[14]=t}function D1(e){const t={...e[13].props};e[14]=t}function K3(e){let t,r,s,l,c,h;return t=new Oc({props:{gridlines:!0,baseline:!0,snapTicks:!0,ticks:"4"}}),s=new Hc({props:{gridlines:!1}}),c=new Op({}),c.$on("mousemove",e[8]),c.$on("mouseout",e[9]),{c(){yr(t.$$.fragment),r=$t(),yr(s.$$.fragment),l=$t(),yr(c.$$.fragment)},m(a,d){pr(t,a,d),ot(a,r,d),pr(s,a,d),ot(a,l,d),pr(c,a,d),h=!0},p:bn,i(a){h||(Pt(t.$$.fragment,a),Pt(s.$$.fragment,a),Pt(c.$$.fragment,a),h=!0)},o(a){Gt(t.$$.fragment,a),Gt(s.$$.fragment,a),Gt(c.$$.fragment,a),h=!1},d(a){mr(t,a),a&&it(r),mr(s,a),a&&it(l),mr(c,a)}}}function N1(e){let t,r;return t=new ld({props:{evt:e[4],$$slots:{default:[G3,({detail:s})=>({13:s}),({detail:s})=>s?8192:0]},$$scope:{ctx:e}}}),{c(){yr(t.$$.fragment)},m(s,l){pr(t,s,l),r=!0},p(s,l){const c={};l&16&&(c.evt=s[4]),l&40960&&(c.$$scope={dirty:l,ctx:s}),t.$set(c)},i(s){r||(Pt(t.$$.fragment,s),r=!0)},o(s){Gt(t.$$.fragment,s),r=!1},d(s){mr(t,s)}}}function G3(e){D1(e);let t,r=e[14].parish+"",s,l,c,h=(+e[14].jail_pretrial_rate).toFixed(1)+"",a,d;return{c(){t=kt("div"),s=Ir(r),l=kt("br"),c=Ir(`
                  Pretrial Rate: `),a=Ir(h),d=Ir(` per
                  10,000 residents`),ce(t,"class","row")},m(_,p){ot(_,t,p),st(t,s),st(t,l),st(t,c),st(t,a),st(t,d)},p(_,p){D1(_),p&8192&&r!==(r=_[14].parish+"")&&ei(s,r),p&8192&&h!==(h=(+_[14].jail_pretrial_rate).toFixed(1)+"")&&ei(a,h)},d(_){_&&it(t)}}}function q3(e){let t,r,s=e[5]!==!0&&N1(e);return{c(){s&&s.c(),t=tA()},m(l,c){s&&s.m(l,c),ot(l,t,c),r=!0},p(l,c){l[5]!==!0?s?(s.p(l,c),c&32&&Pt(s,1)):(s=N1(l),s.c(),Pt(s,1),s.m(t.parentNode,t)):s&&(Lo(),Gt(s,1,1,()=>{s=null}),Qo())},i(l){r||(Pt(s),r=!0)},o(l){Gt(s),r=!1},d(l){s&&s.d(l),l&&it(t)}}}function W3(e){let t,r,s,l;return t=new oh({props:{$$slots:{default:[K3]},$$scope:{ctx:e}}}),s=new ah({props:{pointerEvents:!1,$$slots:{default:[q3]},$$scope:{ctx:e}}}),{c(){yr(t.$$.fragment),r=$t(),yr(s.$$.fragment)},m(c,h){pr(t,c,h),ot(c,r,h),pr(s,c,h),l=!0},p(c,h){const a={};h&32816&&(a.$$scope={dirty:h,ctx:c}),t.$set(a);const d={};h&32816&&(d.$$scope={dirty:h,ctx:c}),s.$set(d)},i(c){l||(Pt(t.$$.fragment,c),Pt(s.$$.fragment,c),l=!0)},o(c){Gt(t.$$.fragment,c),Gt(s.$$.fragment,c),l=!1},d(c){mr(t,c),c&&it(r),mr(s,c)}}}function X3(e){let t,r,s,l,c,h;return t=new Oc({props:{gridlines:!0,baseline:!0,snapTicks:!0,ticks:"4"}}),s=new Hc({props:{gridlines:!1}}),c=new Op({}),c.$on("mousemove",e[10]),c.$on("mouseout",e[11]),{c(){yr(t.$$.fragment),r=$t(),yr(s.$$.fragment),l=$t(),yr(c.$$.fragment)},m(a,d){pr(t,a,d),ot(a,r,d),pr(s,a,d),ot(a,l,d),pr(c,a,d),h=!0},p:bn,i(a){h||(Pt(t.$$.fragment,a),Pt(s.$$.fragment,a),Pt(c.$$.fragment,a),h=!0)},o(a){Gt(t.$$.fragment,a),Gt(s.$$.fragment,a),Gt(c.$$.fragment,a),h=!1},d(a){mr(t,a),a&&it(r),mr(s,a),a&&it(l),mr(c,a)}}}function j1(e){let t,r;return t=new ld({props:{evt2:e[6],$$slots:{default:[Z3,({detail:s})=>({13:s}),({detail:s})=>s?8192:0]},$$scope:{ctx:e}}}),{c(){yr(t.$$.fragment)},m(s,l){pr(t,s,l),r=!0},p(s,l){const c={};l&64&&(c.evt2=s[6]),l&40960&&(c.$$scope={dirty:l,ctx:s}),t.$set(c)},i(s){r||(Pt(t.$$.fragment,s),r=!0)},o(s){Gt(t.$$.fragment,s),r=!1},d(s){mr(t,s)}}}function Z3(e){M1(e);let t,r=e[14].parish+"",s,l,c,h=e[14].prison_adm_rate.toFixed(1)+"",a,d;return{c(){t=kt("div"),s=Ir(r),l=kt("br"),c=Ir(`
                  Admission Rate: `),a=Ir(h),d=Ir(` per 10,000
                  residents`),ce(t,"class","row")},m(_,p){ot(_,t,p),st(t,s),st(t,l),st(t,c),st(t,a),st(t,d)},p(_,p){M1(_),p&8192&&r!==(r=_[14].parish+"")&&ei(s,r),p&8192&&h!==(h=_[14].prison_adm_rate.toFixed(1)+"")&&ei(a,h)},d(_){_&&it(t)}}}function J3(e){let t,r,s=e[7]!==!0&&j1(e);return{c(){s&&s.c(),t=tA()},m(l,c){s&&s.m(l,c),ot(l,t,c),r=!0},p(l,c){l[7]!==!0?s?(s.p(l,c),c&128&&Pt(s,1)):(s=j1(l),s.c(),Pt(s,1),s.m(t.parentNode,t)):s&&(Lo(),Gt(s,1,1,()=>{s=null}),Qo())},i(l){r||(Pt(s),r=!0)},o(l){Gt(s),r=!1},d(l){s&&s.d(l),l&&it(t)}}}function Y3(e){let t,r,s,l;return t=new oh({props:{$$slots:{default:[X3]},$$scope:{ctx:e}}}),s=new ah({props:{pointerEvents:!1,$$slots:{default:[J3]},$$scope:{ctx:e}}}),{c(){yr(t.$$.fragment),r=$t(),yr(s.$$.fragment)},m(c,h){pr(t,c,h),ot(c,r,h),pr(s,c,h),l=!0},p(c,h){const a={};h&32960&&(a.$$scope={dirty:h,ctx:c}),t.$set(a);const d={};h&32960&&(d.$$scope={dirty:h,ctx:c}),s.$set(d)},i(c){l||(Pt(t.$$.fragment,c),Pt(s.$$.fragment,c),l=!0)},o(c){Gt(t.$$.fragment,c),Gt(s.$$.fragment,c),l=!1},d(c){mr(t,c),c&&it(r),mr(s,c)}}}function $3(e){let t,r,s,l,c,h,a,d,_,p,E,w,x,k,Q,R,M,O,G,K,Z;return c=new o3({props:{parishTitle:e[0]}}),w=new nh({props:{padding:{top:0,bottom:40,left:120},x:eE,y:R1,yScale:eh().paddingInner([.15]),xDomain:[0,e[2]],data:e[1],$$slots:{default:[W3]},$$scope:{ctx:e}}}),O=new nh({props:{padding:{top:0,bottom:40,left:120},x:lg,y:R1,yScale:eh().paddingInner([.15]),xDomain:[0,e[3]],data:e[1],$$slots:{default:[Y3]},$$scope:{ctx:e}}}),{c(){t=kt("div"),r=kt("div"),r.innerHTML=`<p class="svelte-vmwqbp">Every region of Louisiana is harmed by mass incarceration: nearly every
      parish has a pretrial incarceration rate above the national average, and
      dozens of parishes send people to prison at rates above the national
      average. The prevalence of incarceration is hard to see in many places,
      owing to an alarming lack of transparency and data, as well as a
      convoluted carceral landscape where jails also function as prisons. But
      parish and state-level research by Vera aims to clarify this picture.</p>`,s=$t(),l=kt("div"),yr(c.$$.fragment),h=$t(),a=kt("div"),d=kt("div"),_=kt("h4"),_.textContent="Pretrial Incarceration Rate (2021)",p=$t(),E=kt("div"),yr(w.$$.fragment),x=$t(),k=kt("div"),Q=kt("h4"),Q.textContent="Prison Admission Rate (2021)",R=$t(),M=kt("div"),yr(O.$$.fragment),G=$t(),K=kt("p"),K.innerHTML=`State policy plays a major role in driving mass incarceration—as evidenced
    by a decrease in the state’s prison population that resulted, in part, from
    <a href="https://s32082.pcdn.co/wp-content/uploads/2022/10/2022-JRI-ANNUAL-Report-FinalREVISED102022.pdf" target="_blank">the 2017 Justice Reinvestment Package</a>. However, state-level reform alone is insufficient. Significant progress
    on justice reform requires change at the local level: arrest and pretrial
    detention are the “front door” to mass incarceration and decisions by local
    police, prosecutors, and judges dictate how many people are put behind bars
    and for how long. Local jails also play a part in state prison
    incarceration: After a
    <a href="https://www.nola.com/news/crime_police/louisiana-is-the-worlds-prison-capital/article_8feef59a-1196-5988-9128-1e8e7c9aefda.html" target="_blank">federal court ordered Louisiana to address prison overcrowding in the
      1990s</a>, many sheriffs expanded their jails, enabling them to receive revenue from
    the state for holding people sentenced to prison. As a result, many sheriffs
    are now reliant on these funds to support oversized jails. Given the role of
    local decisionmakers in dictating the use of jails and prisons, local
    governments have the power to scale back the use of incarceration and
    implement evidence-based solutions that will help Louisiana’s communities
    thrive.`,ce(r,"id","stats"),ce(r,"class","svelte-vmwqbp"),ce(l,"id","map"),ce(l,"class","svelte-vmwqbp"),ce(_,"class","svelte-vmwqbp"),ce(E,"class","chart-container svelte-vmwqbp"),ce(d,"class","barchart svelte-vmwqbp"),ce(Q,"class","svelte-vmwqbp"),ce(M,"class","chart-container svelte-vmwqbp"),ce(k,"class","barchart svelte-vmwqbp"),ce(a,"id","barcomps"),ce(a,"class","svelte-vmwqbp"),ce(K,"class","svelte-vmwqbp")},m($,he){ot($,t,he),st(t,r),st(t,s),st(t,l),pr(c,l,null),st(t,h),st(t,a),st(a,d),st(d,_),st(d,p),st(d,E),pr(w,E,null),st(a,x),st(a,k),st(k,Q),st(k,R),st(k,M),pr(O,M,null),st(t,G),st(t,K),Z=!0},p($,[he]){const fe={};he&1&&(fe.parishTitle=$[0]),c.$set(fe);const _e={};he&4&&(_e.xDomain=[0,$[2]]),he&2&&(_e.data=$[1]),he&32816&&(_e.$$scope={dirty:he,ctx:$}),w.$set(_e);const ue={};he&8&&(ue.xDomain=[0,$[3]]),he&2&&(ue.data=$[1]),he&32960&&(ue.$$scope={dirty:he,ctx:$}),O.$set(ue)},i($){Z||(Pt(c.$$.fragment,$),Pt(w.$$.fragment,$),Pt(O.$$.fragment,$),Z=!0)},o($){Gt(c.$$.fragment,$),Gt(w.$$.fragment,$),Gt(O.$$.fragment,$),Z=!1},d($){$&&it(t),mr(c),mr(w),mr(O)}}}const lg="prison_adm_rate",eE="jail_pretrial_rate",R1="parish";function tE(e,t,r){let s=[],l,c;Wa(async()=>{const Q=await GA("https://vera-louisiana-data.s3.amazonaws.com/curated_data/clearinghouse/parish_incarceration_21.csv");r(1,s=Q.filter(R=>R.parish==h+" Parish"||R.parish=="Louisiana"||R.parish=="U.S.")),s.forEach(R=>{R[lg]=+R[lg]}),r(2,l=Wf(s,R=>+R.jail_pretrial_rate)),r(3,c=Wf(s,R=>+R.prison_adm_rate))});let{parishTitle:h}=t;Wa(async()=>{window.scrollTo(0,0)});let a,d=!1,_,p=!1;const E=Q=>r(4,a=r(5,d=Q)),w=()=>r(5,d=!0),x=Q=>r(6,_=r(7,p=Q)),k=()=>r(7,p=!0);return e.$$set=Q=>{"parishTitle"in Q&&r(0,h=Q.parishTitle)},[h,s,l,c,a,d,_,p,E,w,x,k]}class O1 extends ai{constructor(t){super(),si(this,t,tE,$3,ri,{parishTitle:0})}}function H1(e,t,r){const s=e.slice();return s[17]=t[r],s[19]=r,s}function z1(e,t,r){const s=e.slice();return s[17]=t[r],s[19]=r,s}function rE(e){let t,r,s,l,c,h=Bu(e[8])+"",a,d;return{c(){t=Ir("In "),r=Ir(e[0]),s=Ir(` Parish, there is
    `),l=Ir(e[6]),c=Ir(` prison with a capacity of
    `),a=Ir(h),d=Ir(" people.")},m(_,p){ot(_,t,p),ot(_,r,p),ot(_,s,p),ot(_,l,p),ot(_,c,p),ot(_,a,p),ot(_,d,p)},p(_,p){p&1&&ei(r,_[0]),p&64&&ei(l,_[6]),p&256&&h!==(h=Bu(_[8])+"")&&ei(a,h)},d(_){_&&it(t),_&&it(r),_&&it(s),_&&it(l),_&&it(c),_&&it(a),_&&it(d)}}}function nE(e){let t,r,s,l,c,h=Bu(e[8])+"",a,d;return{c(){t=Ir("In "),r=Ir(e[0]),s=Ir(` Parish, there is
    `),l=Ir(e[6]),c=Ir(` jail with a capacity of
    `),a=Ir(h),d=Ir(" people.")},m(_,p){ot(_,t,p),ot(_,r,p),ot(_,s,p),ot(_,l,p),ot(_,c,p),ot(_,a,p),ot(_,d,p)},p(_,p){p&1&&ei(r,_[0]),p&64&&ei(l,_[6]),p&256&&h!==(h=Bu(_[8])+"")&&ei(a,h)},d(_){_&&it(t),_&&it(r),_&&it(s),_&&it(l),_&&it(c),_&&it(a),_&&it(d)}}}function iE(e){let t,r,s,l,c,h=Bu(e[8])+"",a,d;return{c(){t=Ir("In "),r=Ir(e[0]),s=Ir(` Parish, there are
    `),l=Ir(e[6]),c=Ir(` prisons and jails with a combined capacity of
    `),a=Ir(h),d=Ir(" people.")},m(_,p){ot(_,t,p),ot(_,r,p),ot(_,s,p),ot(_,l,p),ot(_,c,p),ot(_,a,p),ot(_,d,p)},p(_,p){p&1&&ei(r,_[0]),p&64&&ei(l,_[6]),p&256&&h!==(h=Bu(_[8])+"")&&ei(a,h)},d(_){_&&it(t),_&&it(r),_&&it(s),_&&it(l),_&&it(c),_&&it(a),_&&it(d)}}}function V1(e){let t,r;return{c(){t=Gn("rect"),ce(t,"x",Math.floor(e[19]/e[9])*e[10]+Math.floor(e[19]/e[9])*e[11]),ce(t,"y",e[9]*e[10]-(e[19]%e[9]*e[10]+e[19]%e[9]*e[11])),ce(t,"width",e[10]),ce(t,"height",e[10]),ce(t,"fill",r=e[12][e[17].groupIndex])},m(s,l){ot(s,t,l)},p(s,l){l&16&&r!==(r=s[12][s[17].groupIndex])&&ce(t,"fill",r)},d(s){s&&it(t)}}}function sE(e){let t,r=e[17].facility_name+"",s,l,c=Bu(e[17].capacity)+"",h,a;return{c(){t=Gn("text"),s=Ir(r),l=Ir(" ("),h=Ir(c),a=Ir(" beds)"),ce(t,"x","25"),ce(t,"y","13"),ce(t,"class","svelte-tq0yyc")},m(d,_){ot(d,t,_),st(t,s),st(t,l),st(t,h),st(t,a)},p(d,_){_&128&&r!==(r=d[17].facility_name+"")&&ei(s,r),_&128&&c!==(c=Bu(d[17].capacity)+"")&&ei(h,c)},d(d){d&&it(t)}}}function aE(e){let t,r=e[17].facility_name+"",s;return{c(){t=Gn("text"),s=Ir(r),ce(t,"x","25"),ce(t,"y","13"),ce(t,"class","svelte-tq0yyc")},m(l,c){ot(l,t,c),st(t,s)},p(l,c){c&128&&r!==(r=l[17].facility_name+"")&&ei(s,r)},d(l){l&&it(t)}}}function K1(e){let t,r;function s(h,a){return window.innerWidth<600?aE:sE}let c=s()(e);return{c(){t=Gn("g"),r=Gn("rect"),c.c(),ce(r,"width","15"),ce(r,"height","15"),ce(r,"fill",e[12][e[19]]),Qn(t,"transform","translate(0,"+e[19]*20+"px)")},m(h,a){ot(h,t,a),st(t,r),c.m(t,null)},p(h,a){c.p(h,a)},d(h){h&&it(t),c.d()}}}function oE(e){let t,r,s,l,c,h,a;function d(Q,R){return Q[6]>1?iE:Q[6]==1&&Q[7].map_jails>0?nE:rE}let _=d(e),p=_(e),E=e[4],w=[];for(let Q=0;Q<E.length;Q+=1)w[Q]=V1(z1(e,E,Q));let x=e[7],k=[];for(let Q=0;Q<x.length;Q+=1)k[Q]=K1(H1(e,x,Q));return{c(){t=kt("p"),r=Ir(`Every parish is part of the state’s vast network of jails and prisons. There
  are more than 230 jails and prisons statewide that have the capacity to lock
  up more than 70,000 adults and children.
  `),p.c(),s=$t(),l=kt("div"),c=Gn("svg");for(let Q=0;Q<w.length;Q+=1)w[Q].c();h=$t(),a=Gn("svg");for(let Q=0;Q<k.length;Q+=1)k[Q].c();ce(t,"class","break-avoid"),ce(c,"width",e[1]),ce(c,"height",e[3]),ce(a,"width",e[2]),ce(a,"height",e[5]),ce(a,"class","legend"),ce(l,"id","waffle"),ce(l,"class","svelte-tq0yyc")},m(Q,R){ot(Q,t,R),st(t,r),p.m(t,null),ot(Q,s,R),ot(Q,l,R),st(l,c);for(let M=0;M<w.length;M+=1)w[M].m(c,null);st(l,h),st(l,a);for(let M=0;M<k.length;M+=1)k[M].m(a,null)},p(Q,[R]){if(_===(_=d(Q))&&p?p.p(Q,R):(p.d(1),p=_(Q),p&&(p.c(),p.m(t,null))),R&7696){E=Q[4];let M;for(M=0;M<E.length;M+=1){const O=z1(Q,E,M);w[M]?w[M].p(O,R):(w[M]=V1(O),w[M].c(),w[M].m(c,null))}for(;M<w.length;M+=1)w[M].d(1);w.length=E.length}if(R&2&&ce(c,"width",Q[1]),R&8&&ce(c,"height",Q[3]),R&4224){x=Q[7];let M;for(M=0;M<x.length;M+=1){const O=H1(Q,x,M);k[M]?k[M].p(O,R):(k[M]=K1(O),k[M].c(),k[M].m(a,null))}for(;M<k.length;M+=1)k[M].d(1);k.length=x.length}R&4&&ce(a,"width",Q[2]),R&32&&ce(a,"height",Q[5])},i:bn,o:bn,d(Q){Q&&it(t),p.d(),Q&&it(s),Q&&it(l),mc(w,Q),mc(k,Q)}}}function Bu(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")}function AE(e,t,r){let{parishname:s}=t,c=Ga("#app").node().getBoundingClientRect().width;var h,a,d,_=10,p=15,E=0,w=1,x,k=[];c<400?x=20:x=40;let Q,R,M=[],O=0;var G=["#012A41","#038AD8","#B7E2FB","#FBE798","#FDF0BF","#F7685E","#da392f","#940A00","#59C9A2","#054830","#F9DC66","#DD2113","#24AFFF"];return Wa(async()=>{const K=await GA("https://vera-louisiana-data.s3.amazonaws.com/curated_data/clearinghouse/facilities.csv");r(7,M=K.filter(Z=>Z.parish==s+" Parish"&&Z.capacity!=="N/A")),r(6,R=M.length),r(5,Q=M.length*22),M.forEach(Z=>{Z.capacity=+Z.capacity}),r(8,O=u2(M,Z=>p2(Z,$=>$.capacity))),E=O/(x*_),M.forEach(function(Z,$){Z.capacity=+Z.capacity,Z.units=Math.floor(Z.capacity/E),r(4,k=k.concat(Array(Z.units+1).join(1).split("").map(function(){return{squareValue:E,units:Z.units,capacity:Z.capacity,groupIndex:$}})))}),r(1,h=p*x+x*w+25),r(2,a=p*x+x*w+65),r(3,d=p*_+_*w+25)}),e.$$set=K=>{"parishname"in K&&r(0,s=K.parishname)},[s,h,a,d,k,Q,R,M,O,_,p,w,G]}class lE extends ai{constructor(t){super(),si(this,t,AE,oE,ri,{parishname:0})}}function G1(e,t,r){const s=e.slice();return s[17]=t[r],s[19]=r,s}function q1(e){let t,r,s;function l(...a){return e[10](e[17],...a)}function c(...a){return e[11](e[17],...a)}function h(...a){return e[12](e[17],...a)}return{c(){t=Gn("path"),ce(t,"class","path-line svelte-d6euqo"),ce(t,"data-id",e[19]),ce(t,"d",e[2]),ce(t,"stroke",e[0])},m(a,d){ot(a,t,d),r||(s=[us(t,"mouseover",l),us(t,"focus",c),us(t,"mousemove",h)],r=!0)},p(a,d){e=a,d&4&&ce(t,"d",e[2]),d&1&&ce(t,"stroke",e[0])},d(a){a&&it(t),r=!1,eA(s)}}}function cE(e){let t,r,s,l,c,h=e[1],a=[];for(let d=0;d<h.length;d+=1)a[d]=q1(G1(e,h,d));return{c(){t=Gn("path"),r=$t(),s=Gn("g");for(let d=0;d<a.length;d+=1)a[d].c();ce(t,"class","path-line svelte-d6euqo"),ce(t,"d",e[2]),ce(t,"stroke",e[0]),ce(s,"class","line-group")},m(d,_){ot(d,t,_),ot(d,r,_),ot(d,s,_);for(let p=0;p<a.length;p+=1)a[p].m(s,null);l||(c=[us(s,"mouseout",e[13]),us(s,"blur",e[14])],l=!0)},p(d,[_]){if(_&4&&ce(t,"d",d[2]),_&1&&ce(t,"stroke",d[0]),_&199){h=d[1];let p;for(p=0;p<h.length;p+=1){const E=G1(d,h,p);a[p]?a[p].p(E,_):(a[p]=q1(E),a[p].c(),a[p].m(s,null))}for(;p<a.length;p+=1)a[p].d(1);a.length=h.length}},i:bn,o:bn,d(d){d&&it(t),d&&it(r),d&&it(s),mc(a,d),l=!1,eA(c)}}}function uE(e,t,r){let s,l,c,h;const{data:a,xGet:d,yGet:_,xScale:p,yScale:E}=Yo("LayerCake");$r(e,a,K=>r(1,h=K)),$r(e,d,K=>r(9,c=K)),$r(e,_,K=>r(8,l=K));let{stroke:w="#ab00d6"}=t;const x=Yh();function k(K){return function($){raise(this),$.layerX!==0&&$.layerY!==0&&x("mousemove",{e:$})}}const Q=(K,Z)=>x("mousemove",{e:Z,props:K}),R=(K,Z)=>x("mousemove",{e:Z,props:K}),M=(K,Z)=>k(),O=K=>x("mouseout"),G=K=>x("mouseout");return e.$$set=K=>{"stroke"in K&&r(0,w=K.stroke)},e.$$.update=()=>{e.$$.dirty&770&&r(2,s="M"+h.map(K=>c(K)+","+l(K)).join("L"))},[w,h,s,a,d,_,x,k,l,c,Q,R,M,O,G]}class $v extends ai{constructor(t){super(),si(this,t,uE,cE,ri,{stroke:0})}}const hE=e=>({x:e&10,y:e&9,found:e&8,visible:e&4,e:e&16}),W1=e=>({x:e[1](e[3])||0,y:e[0](e[3])||0,found:e[3],visible:e[2],e:e[4]});function fE(e){let t,r,s,l,c;const h=e[21].default,a=wA(h,e,e[20],W1);return{c(){t=kt("div"),r=$t(),a&&a.c(),ce(t,"class","bg svelte-n2rx0m")},m(d,_){ot(d,t,_),ot(d,r,_),a&&a.m(d,_),s=!0,l||(c=[us(t,"mousemove",e[10]),us(t,"mouseout",e[22]),us(t,"blur",e[23])],l=!0)},p(d,[_]){a&&a.p&&(!s||_&1048607)&&xA(a,h,d,d[20],s?bA(h,d[20],_,hE):BA(d[20]),W1)},i(d){s||(Pt(a,d),s=!0)},o(d){Gt(a,d),s=!1},d(d){d&&it(t),d&&it(r),a&&a.d(d),l=!1,eA(c)}}}function dE(e,t,r){let s,l,c,h,a,d,_,p,{$$slots:E={},$$scope:w}=t;const{data:x,xGet:k,yGet:Q,width:R,height:M}=Yo("LayerCake");$r(e,x,se=>r(15,h=se)),$r(e,k,se=>r(18,_=se)),$r(e,Q,se=>r(19,p=se)),$r(e,R,se=>r(17,d=se)),$r(e,M,se=>r(16,a=se));let O=!1,G={},K={},{x:Z="x"}=t,{y:$="y"}=t,{searchRadius:he=void 0}=t,{dataset:fe=void 0}=t;function _e(se){r(4,K=se);const Be=`layer${Z.toUpperCase()}`,me=`layer${$.toUpperCase()}`;r(3,G=c.find(se[Be],se[me],he)||{}),r(2,O=Object.keys(G).length>0)}const ue=()=>r(2,O=!1),ee=()=>r(2,O=!1);return e.$$set=se=>{"x"in se&&r(11,Z=se.x),"y"in se&&r(12,$=se.y),"searchRadius"in se&&r(13,he=se.searchRadius),"dataset"in se&&r(14,fe=se.dataset),"$$scope"in se&&r(20,w=se.$$scope)},e.$$.update=()=>{e.$$.dirty&788480&&r(1,s=Z==="x"?_:p),e.$$.dirty&790528&&r(0,l=$==="y"?p:_),e.$$.dirty&245763&&(c=Mv().extent([[-1,-1],[d+1,a+1]]).x(s).y(l).addAll(fe||h))},[l,s,O,G,K,x,k,Q,R,M,_e,Z,$,he,fe,h,a,d,_,p,w,E,ue,ee]}class pE extends ai{constructor(t){super(),si(this,t,dE,fE,ri,{x:11,y:12,searchRadius:13,dataset:14})}}function X1(e){const t=e[11](e[20]);e[22]=t}function Z1(e){let t,r,s,l,c=e[20][e[2].x]+"",h,a,d,_,p=e[22][2].value+"",E;return{c(){t=kt("div"),r=$t(),s=kt("div"),l=kt("div"),h=Ir(c),a=$t(),d=kt("div"),_=Ir("Total Prison Admissions: "),E=Ir(p),Qn(t,"left",e[17]+"px"),ce(t,"class","line svelte-1ll29vg"),ce(l,"class","row"),ce(d,"class","row"),ce(s,"class","tooltip svelte-1ll29vg"),Qn(s,"width",e_+"px"),Qn(s,"display",e[19]?"block":"none"),Qn(s,"top",e[4](e[22][2].value)+e[0]+"px"),Qn(s,"left",Math.min(Math.max(e[10],e[17]),e[5]-e[10])+"px")},m(w,x){ot(w,t,x),ot(w,r,x),ot(w,s,x),st(s,l),st(l,h),st(s,a),st(s,d),st(d,_),st(d,E)},p(w,x){x&131072&&Qn(t,"left",w[17]+"px"),x&1048580&&c!==(c=w[20][w[2].x]+"")&&ei(h,c),x&1048576&&p!==(p=w[22][2].value+"")&&ei(E,p),x&524288&&Qn(s,"display",w[19]?"block":"none"),x&1048593&&Qn(s,"top",w[4](w[22][2].value)+w[0]+"px"),x&131104&&Qn(s,"left",Math.min(Math.max(w[10],w[17]),w[5]-w[10])+"px")},d(w){w&&it(t),w&&it(r),w&&it(s)}}}function mE(e){X1(e);let t,r=e[19]===!0&&Z1(e);return{c(){r&&r.c(),t=tA()},m(s,l){r&&r.m(s,l),ot(s,t,l)},p(s,l){X1(s),s[19]===!0?r?r.p(s,l):(r=Z1(s),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},d(s){r&&r.d(s),s&&it(t)}}}function gE(e){let t,r;return t=new pE({props:{dataset:e[1]||e[3],y:"x",$$slots:{default:[mE,({x:s,y:l,visible:c,found:h,e:a})=>({17:s,18:l,19:c,20:h,21:a}),({x:s,y:l,visible:c,found:h,e:a})=>(s?131072:0)|(l?262144:0)|(c?524288:0)|(h?1048576:0)|(a?2097152:0)]},$$scope:{ctx:e}}}),{c(){yr(t.$$.fragment)},m(s,l){pr(t,s,l),r=!0},p(s,[l]){const c={};l&10&&(c.dataset=s[1]||s[3]),l&10092597&&(c.$$scope={dirty:l,ctx:s}),t.$set(c)},i(s){r||(Pt(t.$$.fragment,s),r=!0)},o(s){Gt(t.$$.fragment,s),r=!1},d(s){mr(t,s)}}}const e_=150;function yE(e,t,r){let s,l,c,h;const{data:a,width:d,yScale:_,config:p}=Yo("LayerCake");$r(e,a,K=>r(3,l=K)),$r(e,d,K=>r(5,h=K)),$r(e,_,K=>r(4,c=K)),$r(e,p,K=>r(2,s=K));const E=zg(","),w=K=>K.replace(/^\w/,Z=>Z.toUpperCase());let{formatTitle:x=K=>K}=t,{formatValue:k=K=>isNaN(+K)?K:E(K)}=t,{formatKey:Q=K=>w(K)}=t,{offset:R=0}=t,{dataset:M=void 0}=t;const O=e_/2;function G(K){return Object.keys(K).length===0?[]:Object.keys(K).filter($=>$!==s.x).map($=>({key:$,value:K[$]})).sort(($,he)=>he.value-$.value)}return e.$$set=K=>{"formatTitle"in K&&r(12,x=K.formatTitle),"formatValue"in K&&r(13,k=K.formatValue),"formatKey"in K&&r(14,Q=K.formatKey),"offset"in K&&r(0,R=K.offset),"dataset"in K&&r(1,M=K.dataset)},[R,M,s,l,c,h,a,d,_,p,O,G,x,k,Q]}class t_ extends ai{constructor(t){super(),si(this,t,yE,gE,ri,{formatTitle:12,formatValue:13,formatKey:14,offset:0,dataset:1})}}function vE(e){let t,r,s,l;return t=new Oc({props:{ticks:6}}),s=new Hc({props:{ticks:4}}),{c(){yr(t.$$.fragment),r=$t(),yr(s.$$.fragment)},m(c,h){pr(t,c,h),ot(c,r,h),pr(s,c,h),l=!0},i(c){l||(Pt(t.$$.fragment,c),Pt(s.$$.fragment,c),l=!0)},o(c){Gt(t.$$.fragment,c),Gt(s.$$.fragment,c),l=!1},d(c){mr(t,c),c&&it(r),mr(s,c)}}}function _E(e){let t,r,s,l;return t=new Oc({props:{ticks:3}}),s=new Hc({props:{ticks:4}}),{c(){yr(t.$$.fragment),r=$t(),yr(s.$$.fragment)},m(c,h){pr(t,c,h),ot(c,r,h),pr(s,c,h),l=!0},i(c){l||(Pt(t.$$.fragment,c),Pt(s.$$.fragment,c),l=!0)},o(c){Gt(t.$$.fragment,c),Gt(s.$$.fragment,c),l=!1},d(c){mr(t,c),c&&it(r),mr(s,c)}}}function wE(e){let t,r,s,l,c;const h=[_E,vE],a=[];function d(_,p){return window.innerWidth<500?0:1}return t=d(),r=a[t]=h[t](e),l=new $v({}),l.$on("mousemove",e[7]),l.$on("mouseout",e[8]),{c(){r.c(),s=$t(),yr(l.$$.fragment)},m(_,p){a[t].m(_,p),ot(_,s,p),pr(l,_,p),c=!0},p:bn,i(_){c||(Pt(r),Pt(l.$$.fragment,_),c=!0)},o(_){Gt(r),Gt(l.$$.fragment,_),c=!1},d(_){a[t].d(_),_&&it(s),mr(l,_)}}}function bE(e){let t,r;return t=new t_({props:{formatTitle:e[6],dataset:e[1]}}),{c(){yr(t.$$.fragment)},m(s,l){pr(t,s,l),r=!0},p(s,l){const c={};l&2&&(c.dataset=s[1]),t.$set(c)},i(s){r||(Pt(t.$$.fragment,s),r=!0)},o(s){Gt(t.$$.fragment,s),r=!1},d(s){mr(t,s)}}}function xE(e){let t,r,s,l;return t=new oh({props:{$$slots:{default:[wE]},$$scope:{ctx:e}}}),s=new ah({props:{$$slots:{default:[bE]},$$scope:{ctx:e}}}),{c(){yr(t.$$.fragment),r=$t(),yr(s.$$.fragment)},m(c,h){pr(t,c,h),ot(c,r,h),pr(s,c,h),l=!0},p(c,h){const a={};h&1072&&(a.$$scope={dirty:h,ctx:c}),t.$set(a);const d={};h&1026&&(d.$$scope={dirty:h,ctx:c}),s.$set(d)},i(c){l||(Pt(t.$$.fragment,c),Pt(s.$$.fragment,c),l=!0)},o(c){Gt(t.$$.fragment,c),Gt(s.$$.fragment,c),l=!1},d(c){mr(t,c),c&&it(r),mr(s,c)}}}function BE(e){let t,r,s,l;return t=new Oc({props:{ticks:2}}),s=new Hc({props:{ticks:4}}),{c(){yr(t.$$.fragment),r=$t(),yr(s.$$.fragment)},m(c,h){pr(t,c,h),ot(c,r,h),pr(s,c,h),l=!0},i(c){l||(Pt(t.$$.fragment,c),Pt(s.$$.fragment,c),l=!0)},o(c){Gt(t.$$.fragment,c),Gt(s.$$.fragment,c),l=!1},d(c){mr(t,c),c&&it(r),mr(s,c)}}}function CE(e){let t,r,s,l;return t=new Oc({props:{ticks:1}}),s=new Hc({props:{ticks:4}}),{c(){yr(t.$$.fragment),r=$t(),yr(s.$$.fragment)},m(c,h){pr(t,c,h),ot(c,r,h),pr(s,c,h),l=!0},i(c){l||(Pt(t.$$.fragment,c),Pt(s.$$.fragment,c),l=!0)},o(c){Gt(t.$$.fragment,c),Gt(s.$$.fragment,c),l=!1},d(c){mr(t,c),c&&it(r),mr(s,c)}}}function EE(e){let t,r,s,l,c;const h=[CE,BE],a=[];function d(_,p){return window.innerWidth<500?0:1}return t=d(),r=a[t]=h[t](e),l=new $v({}),{c(){r.c(),s=$t(),yr(l.$$.fragment)},m(_,p){a[t].m(_,p),ot(_,s,p),pr(l,_,p),c=!0},p:bn,i(_){c||(Pt(r),Pt(l.$$.fragment,_),c=!0)},o(_){Gt(r),Gt(l.$$.fragment,_),c=!1},d(_){a[t].d(_),_&&it(s),mr(l,_)}}}function FE(e){let t,r;return t=new t_({props:{formatTitle:e[6],dataset:e[2]}}),{c(){yr(t.$$.fragment)},m(s,l){pr(t,s,l),r=!0},p(s,l){const c={};l&4&&(c.dataset=s[2]),t.$set(c)},i(s){r||(Pt(t.$$.fragment,s),r=!0)},o(s){Gt(t.$$.fragment,s),r=!1},d(s){mr(t,s)}}}function SE(e){let t,r,s,l;return t=new oh({props:{$$slots:{default:[EE]},$$scope:{ctx:e}}}),s=new ah({props:{$$slots:{default:[FE]},$$scope:{ctx:e}}}),{c(){yr(t.$$.fragment),r=$t(),yr(s.$$.fragment)},m(c,h){pr(t,c,h),ot(c,r,h),pr(s,c,h),l=!0},p(c,h){const a={};h&1024&&(a.$$scope={dirty:h,ctx:c}),t.$set(a);const d={};h&1028&&(d.$$scope={dirty:h,ctx:c}),s.$set(d)},i(c){l||(Pt(t.$$.fragment,c),Pt(s.$$.fragment,c),l=!0)},o(c){Gt(t.$$.fragment,c),Gt(s.$$.fragment,c),l=!1},d(c){mr(t,c),c&&it(r),mr(s,c)}}}function IE(e){let t,r,s,l,c,h,a,d,_,p,E,w,x;return _=new nh({props:{padding:{top:8,right:10,bottom:20,left:25},x:J1,y:Hh,yNice:4,yDomain:[0,e[3]],data:e[1],$$slots:{default:[xE]},$$scope:{ctx:e}}}),w=new nh({props:{padding:{top:8,right:10,bottom:20,left:25},x:J1,y:Hh,yNice:4,yDomain:[0,e[3]],data:e[2],$$slots:{default:[SE]},$$scope:{ctx:e}}}),{c(){t=kt("div"),r=kt("h4"),s=Ir("People from "),l=Ir(e[0]),c=Ir(" Parish Sent to Prison (1992-2014, 2019-2021)"),h=$t(),a=kt("div"),d=kt("div"),yr(_.$$.fragment),p=$t(),E=kt("div"),yr(w.$$.fragment),ce(r,"class","svelte-pzfb8c"),ce(d,"class","chart-container first svelte-pzfb8c"),ce(E,"class","chart-container second svelte-pzfb8c"),ce(a,"id","container-wrap"),ce(a,"class","svelte-pzfb8c"),ce(t,"id","linechart"),ce(t,"class","svelte-pzfb8c")},m(k,Q){ot(k,t,Q),st(t,r),st(r,s),st(r,l),st(r,c),st(t,h),st(t,a),st(a,d),pr(_,d,null),st(a,p),st(a,E),pr(w,E,null),x=!0},p(k,[Q]){(!x||Q&1)&&ei(l,k[0]);const R={};Q&8&&(R.yDomain=[0,k[3]]),Q&2&&(R.data=k[1]),Q&1074&&(R.$$scope={dirty:Q,ctx:k}),_.$set(R);const M={};Q&8&&(M.yDomain=[0,k[3]]),Q&4&&(M.data=k[2]),Q&1028&&(M.$$scope={dirty:Q,ctx:k}),w.$set(M)},i(k){x||(Pt(_.$$.fragment,k),Pt(w.$$.fragment,k),x=!0)},o(k){Gt(_.$$.fragment,k),Gt(w.$$.fragment,k),x=!1},d(k){k&&it(t),mr(_),mr(w)}}}const J1="year",Hh="total_prison_adm";function TE(e,t,r){let{parishname:s}=t,l=[],c=[],h=[],a=100;console.log("window.innerWidth",window.innerWidth),Wa(async()=>{l=(await GA("https://vera-louisiana-data.s3.amazonaws.com/curated_data/clearinghouse/parish_prison_adm_trends.csv")).filter(k=>k.parish==s+" Parish"),l.forEach(function(k){k.year=+k.year,k.total_prison_adm=+k.total_prison_adm}),r(1,c=l.filter(k=>k.year<=2014)),r(2,h=l.filter(k=>k.year>=2019)),r(3,a=Wf(l,k=>k.total_prison_adm)),c.forEach(k=>{k[Hh]=+k[Hh]}),h.forEach(k=>{k[Hh]=+k[Hh]})});const d=Rp("%Y");let _,p=!1;const E=x=>r(4,_=r(5,p=x)),w=()=>r(5,p=!0);return e.$$set=x=>{"parishname"in x&&r(0,s=x.parishname)},[s,c,h,a,_,p,d,E,w]}class UE extends ai{constructor(t){super(),si(this,t,TE,IE,ri,{parishname:0})}}function Y1(e){const t={...e[37].props};e[38]=t}function LE(e){let t,r,s,l,c,h;return t=new Oc({props:{gridlines:!0,baseline:!0,snapTicks:!0,ticks:"4"}}),s=new Hc({props:{gridlines:!1}}),c=new Op({props:{fill:"#0e002c"}}),c.$on("mousemove",e[5]),c.$on("mouseout",e[6]),{c(){yr(t.$$.fragment),r=$t(),yr(s.$$.fragment),l=$t(),yr(c.$$.fragment)},m(a,d){pr(t,a,d),ot(a,r,d),pr(s,a,d),ot(a,l,d),pr(c,a,d),h=!0},p:bn,i(a){h||(Pt(t.$$.fragment,a),Pt(s.$$.fragment,a),Pt(c.$$.fragment,a),h=!0)},o(a){Gt(t.$$.fragment,a),Gt(s.$$.fragment,a),Gt(c.$$.fragment,a),h=!1},d(a){mr(t,a),a&&it(r),mr(s,a),a&&it(l),mr(c,a)}}}function $1(e){let t,r;return t=new ld({props:{evt:e[2],$$slots:{default:[QE,({detail:s})=>({37:s}),({detail:s})=>[0,s?64:0]]},$$scope:{ctx:e}}}),{c(){yr(t.$$.fragment)},m(s,l){pr(t,s,l),r=!0},p(s,l){const c={};l[0]&4&&(c.evt=s[2]),l[1]&320&&(c.$$scope={dirty:l,ctx:s}),t.$set(c)},i(s){r||(Pt(t.$$.fragment,s),r=!0)},o(s){Gt(t.$$.fragment,s),r=!1},d(s){mr(t,s)}}}function QE(e){Y1(e);let t,r=(+e[38].people).toFixed(0)+"",s,l;return{c(){t=kt("div"),s=Ir(r),l=Ir(" people"),ce(t,"class","row")},m(c,h){ot(c,t,h),st(t,s),st(t,l)},p(c,h){Y1(c),h[1]&64&&r!==(r=(+c[38].people).toFixed(0)+"")&&ei(s,r)},d(c){c&&it(t)}}}function kE(e){let t,r,s=e[3]!==!0&&$1(e);return{c(){s&&s.c(),t=tA()},m(l,c){s&&s.m(l,c),ot(l,t,c),r=!0},p(l,c){l[3]!==!0?s?(s.p(l,c),c[0]&8&&Pt(s,1)):(s=$1(l),s.c(),Pt(s,1),s.m(t.parentNode,t)):s&&(Lo(),Gt(s,1,1,()=>{s=null}),Qo())},i(l){r||(Pt(s),r=!0)},o(l){Gt(s),r=!1},d(l){s&&s.d(l),l&&it(t)}}}function PE(e){let t,r,s,l;return t=new oh({props:{$$slots:{default:[LE]},$$scope:{ctx:e}}}),s=new ah({props:{pointerEvents:!1,$$slots:{default:[kE]},$$scope:{ctx:e}}}),{c(){yr(t.$$.fragment),r=$t(),yr(s.$$.fragment)},m(c,h){pr(t,c,h),ot(c,r,h),pr(s,c,h),l=!0},p(c,h){const a={};h[0]&12|h[1]&256&&(a.$$scope={dirty:h,ctx:c}),t.$set(a);const d={};h[0]&12|h[1]&256&&(d.$$scope={dirty:h,ctx:c}),s.$set(d)},i(c){l||(Pt(t.$$.fragment,c),Pt(s.$$.fragment,c),l=!0)},o(c){Gt(t.$$.fragment,c),Gt(s.$$.fragment,c),l=!1},d(c){mr(t,c),c&&it(r),mr(s,c)}}}function ME(e){let t,r,s,l,c,h,a,d,_,p,E,w,x,k,Q,R,M,O,G;return r=new lE({props:{parishname:e[0]}}),x=new nh({props:{padding:{top:0,bottom:40,left:e[4]},x:cg,y:DE,yScale:eh().paddingInner([.15]),xDomain:[0,null],data:e[1],$$slots:{default:[PE]},$$scope:{ctx:e}}}),R=new UE({props:{parishname:e[0]}}),{c(){t=kt("div"),yr(r.$$.fragment),s=$t(),l=kt("p"),l.textContent=`Incarceration takes many forms in Louisiana and includes state prisons, parish
  jails operated by sheriffs, jails operated by private companies, municipal
  jails operated by police departments, and sheriff-operated Transitional Work
  Programs. Many of these facilities are playing roles they should not play.
  This is especially true of jails: intended to hold only pretrial detainees and
  people serving short sentences, many Louisiana jails are holding people
  serving long prison sentences. All these facilities have a financial stake in
  filling their capacity. Ending Louisiana’s reliance on incarceration
  ultimately requires reducing capacity and permanently closing facilities.`,c=$t(),h=kt("div"),a=kt("h4"),d=Ir("People held in "),_=Ir(e[0]),p=Ir(" Parish Jails, by Jurisdiction (November 26, 2021)"),E=$t(),w=kt("div"),yr(x.$$.fragment),k=$t(),Q=kt("div"),yr(R.$$.fragment),M=$t(),O=kt("div"),O.innerHTML=`<p><span class="rec svelte-1h9vuvp">Recommendation</span>: End Louisiana’s practice of housing
    distinct groups of people with vastly different needs in the same multi-use
    facilities; for example, housing juveniles at Louisiana State Penitentiary
    (Angola) and housing people with prison sentences in pretrial detention
    facilities, like parish jails. The state should use sentencing reform,
    applied retroactively, to reduce the number of incarcerated people to fit
    current Department of Public Safety &amp; Corrections capacity.</p> 
  <p><span class="rec svelte-1h9vuvp">Recommendation</span>: Pass a data transparency bill that
    standardizes the data a carceral facility must collect and report.</p> 
  <p><span class="rec svelte-1h9vuvp">Recommendation</span>: Reduce the prison population by
    providing parole eligibility after 20 years to people serving long sentences
    and after 25 years to those serving life sentences; making
    parole-eligibility and sentencing reforms available retroactively; and
    implementing a felony classification system to eliminate inconsistencies in
    sentencing and release.</p>`,ce(t,"id","waffle"),ce(l,"class","break-avoid"),ce(w,"class","chart-container svelte-1h9vuvp"),ce(h,"class","barchart svelte-1h9vuvp"),ce(Q,"id","lines"),ce(Q,"class","svelte-1h9vuvp"),ce(O,"id","recs")},m(K,Z){ot(K,t,Z),pr(r,t,null),ot(K,s,Z),ot(K,l,Z),ot(K,c,Z),ot(K,h,Z),st(h,a),st(a,d),st(a,_),st(a,p),st(h,E),st(h,w),pr(x,w,null),ot(K,k,Z),ot(K,Q,Z),pr(R,Q,null),ot(K,M,Z),ot(K,O,Z),G=!0},p(K,Z){const $={};Z[0]&1&&($.parishname=K[0]),r.$set($),(!G||Z[0]&1)&&ei(_,K[0]);const he={};Z[0]&16&&(he.padding={top:0,bottom:40,left:K[4]}),Z[0]&2&&(he.data=K[1]),Z[0]&12|Z[1]&256&&(he.$$scope={dirty:Z,ctx:K}),x.$set(he);const fe={};Z[0]&1&&(fe.parishname=K[0]),R.$set(fe)},i(K){G||(Pt(r.$$.fragment,K),Pt(x.$$.fragment,K),Pt(R.$$.fragment,K),G=!0)},o(K){Gt(r.$$.fragment,K),Gt(x.$$.fragment,K),Gt(R.$$.fragment,K),G=!1},d(K){K&&it(t),mr(r),K&&it(s),K&&it(l),K&&it(c),K&&it(h),mr(x),K&&it(k),K&&it(Q),mr(R),K&&it(M),K&&it(O)}}}const cg="people",DE="jurisdiction";function NE(e,t,r){let{parishname:s}=t,l=[],c=[];Wa(async()=>{l=(await GA("https://vera-louisiana-data.s3.amazonaws.com/curated_data/clearinghouse/parish_facilities.csv")).filter(w=>w.parish==s+" Parish"),r(1,c=[{people:+l[0].held_for_doc_dpsc_2021,jurisdiction:"State DOC"},{people:+l[0].held_for_fed_dpsc_2021,jurisdiction:"Federal"},{people:+l[0].pretrial_dpsc_2021,jurisdiction:"Pretrial"},{people:+l[0].parish_minus_pretrial_dpsc_2021,jurisdiction:"Parish"},{people:+l[0].held_for_ice_ice_2021,jurisdiction:"ICE"}]),c.sort((w,x)=>x.people-w.people),c.forEach(w=>{w[cg]=+w[cg]})});let h,a=!1,d;window.innerWidth<600?d=80:d=120;const _=E=>r(2,h=r(3,a=E)),p=()=>r(3,a=!0);return e.$$set=E=>{"parishname"in E&&r(0,s=E.parishname)},[s,c,h,a,d,_,p]}class ey extends ai{constructor(t){super(),si(this,t,NE,ME,ri,{parishname:0},null,[-1,-1])}}function ty(e,t,r){const s=e.slice();s[30]=t[r],s[37]=r;const l=s[6](s[30]);s[31]=l;const c=s[5](s[30]);s[32]=c;const h=Array.isArray(s[32])?s[32][0]:s[32];s[33]=h;const a=s[9].bandwidth?s[9].bandwidth():s[7](s[30]);s[34]=a;const d=s[10](s[30]);return s[35]=d,s}function ry(e){let t,r=e[35]+"",s,l,c;return{c(){t=Gn("text"),s=Ir(r),ce(t,"x",l=e[33]+e[34]/2),ce(t,"y",c=e[12]-e[31]-5),ce(t,"text-anchor","middle"),ce(t,"class","svelte-xn7mh7")},m(h,a){ot(h,t,a),st(t,s)},p(h,a){a[0]&1280&&r!==(r=h[35]+"")&&ei(s,r),a[0]&928&&l!==(l=h[33]+h[34]/2)&&ce(t,"x",l),a[0]&4416&&c!==(c=h[12]-h[31]-5)&&ce(t,"y",c)},d(h){h&&it(t)}}}function ny(e){let t,r,s,l,c,h,a,d,_,p;function E(...Q){return e[24](e[30],...Q)}function w(...Q){return e[25](e[30],...Q)}function x(...Q){return e[26](e[30],...Q)}let k=e[3]&&e[35]&&ry(e);return{c(){t=Gn("rect"),k&&k.c(),d=tA(),ce(t,"class","group-rect"),ce(t,"data-id",e[37]),ce(t,"data-range",r=e[11](e[30])),ce(t,"data-count",s=e[35]),ce(t,"x",l=e[33]),ce(t,"y",c=e[4](e[30])),ce(t,"width",h=e[34]),ce(t,"height",a=e[31]),ce(t,"fill",e[0]),ce(t,"stroke",e[1]),ce(t,"stroke-width",e[2])},m(Q,R){ot(Q,t,R),k&&k.m(Q,R),ot(Q,d,R),_||(p=[us(t,"mouseover",E),us(t,"focus",w),us(t,"mousemove",x)],_=!0)},p(Q,R){e=Q,R[0]&2304&&r!==(r=e[11](e[30]))&&ce(t,"data-range",r),R[0]&1280&&s!==(s=e[35])&&ce(t,"data-count",s),R[0]&288&&l!==(l=e[33])&&ce(t,"x",l),R[0]&272&&c!==(c=e[4](e[30]))&&ce(t,"y",c),R[0]&896&&h!==(h=e[34])&&ce(t,"width",h),R[0]&320&&a!==(a=e[31])&&ce(t,"height",a),R[0]&1&&ce(t,"fill",e[0]),R[0]&2&&ce(t,"stroke",e[1]),R[0]&4&&ce(t,"stroke-width",e[2]),e[3]&&e[35]?k?k.p(e,R):(k=ry(e),k.c(),k.m(d.parentNode,d)):k&&(k.d(1),k=null)},d(Q){Q&&it(t),k&&k.d(Q),Q&&it(d),_=!1,eA(p)}}}function jE(e){let t,r=e[8],s=[];for(let l=0;l<r.length;l+=1)s[l]=ny(ty(e,r,l));return{c(){t=Gn("g");for(let l=0;l<s.length;l+=1)s[l].c();ce(t,"class","column-group")},m(l,c){ot(l,t,c);for(let h=0;h<s.length;h+=1)s[h].m(t,null)},p(l,c){if(c[0]&6299647){r=l[8];let h;for(h=0;h<r.length;h+=1){const a=ty(l,r,h);s[h]?s[h].p(a,c):(s[h]=ny(a),s[h].c(),s[h].m(t,null))}for(;h<s.length;h+=1)s[h].d(1);s.length=r.length}},i:bn,o:bn,d(l){l&&it(t),mc(s,l)}}}function RE(e,t,r){let s,l,c,h,a,d,_,p,E,w;const{data:x,xGet:k,yGet:Q,x:R,yRange:M,xScale:O,y:G,height:K,zGet:Z,zScale:$,z:he}=Yo("LayerCake");$r(e,x,Qe=>r(8,d=Qe)),$r(e,k,Qe=>r(5,a=Qe)),$r(e,Q,Qe=>r(4,c=Qe)),$r(e,R,Qe=>r(11,E=Qe)),$r(e,M,Qe=>r(23,h=Qe)),$r(e,O,Qe=>r(9,_=Qe)),$r(e,G,Qe=>r(10,p=Qe)),$r(e,K,Qe=>r(12,w=Qe));let{fill:fe="royalblue"}=t,{stroke:_e="#000"}=t,{strokeWidth:ue=0}=t,{showLabels:ee=!1}=t;const se=Yh();function Be(Qe){return function(tt){raise(this),tt.layerX!==0&&tt.layerY!==0&&se("mousemove",{e:tt})}}const me=(Qe,Te)=>se("mousemove",{e:Te,props:Qe}),Pe=(Qe,Te)=>se("mousemove",{e:Te,props:Qe}),ge=(Qe,Te)=>Be();return e.$$set=Qe=>{"fill"in Qe&&r(0,fe=Qe.fill),"stroke"in Qe&&r(1,_e=Qe.stroke),"strokeWidth"in Qe&&r(2,ue=Qe.strokeWidth),"showLabels"in Qe&&r(3,ee=Qe.showLabels)},e.$$.update=()=>{e.$$.dirty[0]&32&&r(7,s=Qe=>{const Te=a(Qe);return Math.abs(Te[1]-Te[0])}),e.$$.dirty[0]&8388624&&r(6,l=Qe=>h[0]-c(Qe))},[fe,_e,ue,ee,c,a,l,s,d,_,p,E,w,x,k,Q,R,M,O,G,K,se,Be,h,me,Pe,ge]}class OE extends ai{constructor(t){super(),si(this,t,RE,jE,ri,{fill:0,stroke:1,strokeWidth:2,showLabels:3},null,[-1,-1])}}var iy={},HE={get exports(){return iy},set exports(e){iy=e}};(function(e,t){(function(r,s){s()})(Hl,function(){function r(_,p){return typeof p>"u"?p={autoBom:!1}:typeof p!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),p={autoBom:!p}),p.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(_.type)?new Blob(["\uFEFF",_],{type:_.type}):_}function s(_,p,E){var w=new XMLHttpRequest;w.open("GET",_),w.responseType="blob",w.onload=function(){d(w.response,p,E)},w.onerror=function(){console.error("could not download file")},w.send()}function l(_){var p=new XMLHttpRequest;p.open("HEAD",_,!1);try{p.send()}catch{}return 200<=p.status&&299>=p.status}function c(_){try{_.dispatchEvent(new MouseEvent("click"))}catch{var p=document.createEvent("MouseEvents");p.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),_.dispatchEvent(p)}}var h=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Hl=="object"&&Hl.global===Hl?Hl:void 0,a=h.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),d=h.saveAs||(typeof window!="object"||window!==h?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(_,p,E){var w=h.URL||h.webkitURL,x=document.createElement("a");p=p||_.name||"download",x.download=p,x.rel="noopener",typeof _=="string"?(x.href=_,x.origin===location.origin?c(x):l(x.href)?s(_,p,E):c(x,x.target="_blank")):(x.href=w.createObjectURL(_),setTimeout(function(){w.revokeObjectURL(x.href)},4e4),setTimeout(function(){c(x)},0))}:"msSaveOrOpenBlob"in navigator?function(_,p,E){if(p=p||_.name||"download",typeof _!="string")navigator.msSaveOrOpenBlob(r(_,E),p);else if(l(_))s(_,p,E);else{var w=document.createElement("a");w.href=_,w.target="_blank",setTimeout(function(){c(w)})}}:function(_,p,E,w){if(w=w||open("","_blank"),w&&(w.document.title=w.document.body.innerText="downloading..."),typeof _=="string")return s(_,p,E);var x=_.type==="application/octet-stream",k=/constructor/i.test(h.HTMLElement)||h.safari,Q=/CriOS\/[\d]+/.test(navigator.userAgent);if((Q||x&&k||a)&&typeof FileReader<"u"){var R=new FileReader;R.onloadend=function(){var G=R.result;G=Q?G:G.replace(/^data:[^;]*;/,"data:attachment/file;"),w?w.location.href=G:location=G,w=null},R.readAsDataURL(_)}else{var M=h.URL||h.webkitURL,O=M.createObjectURL(_);w?w.location=O:location.href=O,w=null,setTimeout(function(){M.revokeObjectURL(O)},4e4)}});h.saveAs=d.saveAs=d,e.exports=d})})(HE);function sy(e){const t={...e[13].props};e[14]=t}function ay(e){let t,r,s,l,c,h,a,d,_,p,E,w,x,k,Q,R,M,O,G,K,Z,$,he,fe,_e,ue,ee,se,Be,me,Pe,ge,Qe,Te,tt,Oe=e[3].total_jail_pretrial.toFixed(0)+"",Mt,ne,Se,ke,Ke=e[3].required_reduction.toFixed(0)+"",at,dt,Bt=(e[3].required_reduction_pct*100).toFixed(1)+"",Ge,rt;function Ut(gr,sr){return gr[3].required_reduction_pct>.95?VE:zE}let ht=Ut(e),Nt=ht(e);function dr(gr,sr){return gr[3].required_reduction_pct>.95?GE:KE}let Lt=dr(e),ze=Lt(e);return{c(){t=kt("div"),r=Gn("svg"),s=Gn("defs"),l=Gn("pattern"),c=Gn("image"),h=$t(),a=kt("div"),d=Gn("svg"),Nt.c(),_=Gn("text"),p=Ir("reduction required"),ze.c(),w=Gn("line"),Q=Gn("rect"),O=Gn("rect"),$=Gn("rect"),he=Gn("rect"),fe=Gn("text"),_e=Ir("pretrial population"),ue=Gn("text"),ee=Ir("reduction required"),me=$t(),Pe=kt("div"),ge=kt("p"),Qe=Ir("As of "),Te=Ir(e[5]),tt=Ir(", there were "),Mt=Ir(Oe),ne=Ir(" held pretrial in "),Se=Ir(e[0]),ke=Ir(`’s jails. The number of people held
        pretrial needs to decrease by `),at=Ir(Ke),dt=Ir(" ("),Ge=Ir(Bt),rt=Ir(` percent) to
        align with the national average.`),I_(c,"xlink:href","data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPScxMCcgaGVpZ2h0PScxMCc+CiAgPHJlY3Qgd2lkdGg9JzEwJyBoZWlnaHQ9JzEwJyBmaWxsPSd3aGl0ZScvPgogIDxwYXRoIGQ9J00tMSwxIGwyLC0yCiAgICAgICAgICAgTTAsMTAgbDEwLC0xMAogICAgICAgICAgIE05LDExIGwyLC0yJyBzdHJva2U9J2JsYWNrJyBzdHJva2Utd2lkdGg9JzMnLz4KPC9zdmc+"),ce(c,"x","0"),ce(c,"y","0"),ce(c,"width","10"),ce(c,"height","10"),ce(l,"id","diagonal-stripe-3"),ce(l,"patternUnits","userSpaceOnUse"),ce(l,"width","10"),ce(l,"height","10"),ce(r,"height","10"),ce(r,"width","10"),ce(r,"xmlns","http://www.w3.org/2000/svg"),ce(r,"version","1.1"),ce(_,"x","0"),ce(_,"y",E=e[3].reductionLine),ce(_,"fill","#000"),ce(_,"class","svelte-1xnl78g"),ce(w,"x1","140"),ce(w,"y1",x=e[3].reductionLine2),ce(w,"x2","200"),ce(w,"y2",k=e[3].reductionLine2),ce(w,"stroke","#000"),ce(w,"class","svelte-1xnl78g"),ce(Q,"width",R=e[3].parishPretrialSquareSide),ce(Q,"height",M=e[3].parishPretrialSquareSide),ce(Q,"x",e[4]),ce(Q,"y","0"),ce(Q,"fill","#0e002c"),ce(O,"width",G=e[3].parishReductionSquareSide),ce(O,"height",K=e[3].parishReductionSquareSide),ce(O,"x",e[4]),ce(O,"y",Z=e[3].parishPretrialSquareSide-e[3].parishReductionSquareSide),ce(O,"stroke-width","2"),ce(O,"stroke-dasharray","3 6"),ce(O,"stroke","#ef4136"),ce(O,"fill","url(#diagonal-stripe-3)"),ce(O,"opacity",".8"),ce($,"class","mobile_legend svelte-1xnl78g"),ce($,"width","15"),ce($,"height","15"),ce($,"x","0"),ce($,"y","210"),ce($,"fill","#0e002c"),ce(he,"class","mobile_legend svelte-1xnl78g"),ce(he,"width","15"),ce(he,"height","15"),ce(he,"x","0"),ce(he,"y","230"),ce(he,"fill","url(#diagonal-stripe-3)"),ce(he,"stroke-width","2"),ce(he,"stroke-dasharray","3,6"),ce(he,"stroke","rgb(239, 65, 54)"),ce(fe,"class","mobile_legend svelte-1xnl78g"),ce(fe,"x","20"),ce(fe,"y","222"),ce(fe,"fill","#000"),ce(ue,"class","mobile_legend svelte-1xnl78g"),ce(ue,"x","20"),ce(ue,"y","242"),ce(ue,"fill","#000"),ce(d,"height",se=e[3].svgSizeH+"px"),ce(d,"width",Be=e[3].svgSizeW+"px"),ce(ge,"class","propdescription svelte-1xnl78g"),ce(t,"id","proportion"),ce(t,"class","svelte-1xnl78g")},m(gr,sr){ot(gr,t,sr),st(t,r),st(r,s),st(s,l),st(l,c),st(t,h),st(t,a),st(a,d),Nt.m(d,null),st(d,_),st(_,p),ze.m(d,null),st(d,w),st(d,Q),st(d,O),st(d,$),st(d,he),st(d,fe),st(fe,_e),st(d,ue),st(ue,ee),st(t,me),st(t,Pe),st(Pe,ge),st(ge,Qe),st(ge,Te),st(ge,tt),st(ge,Mt),st(ge,ne),st(ge,Se),st(ge,ke),st(ge,at),st(ge,dt),st(ge,Ge),st(ge,rt)},p(gr,sr){ht===(ht=Ut(gr))&&Nt?Nt.p(gr,sr):(Nt.d(1),Nt=ht(gr),Nt&&(Nt.c(),Nt.m(d,_))),sr&8&&E!==(E=gr[3].reductionLine)&&ce(_,"y",E),Lt===(Lt=dr(gr))&&ze?ze.p(gr,sr):(ze.d(1),ze=Lt(gr),ze&&(ze.c(),ze.m(d,w))),sr&8&&x!==(x=gr[3].reductionLine2)&&ce(w,"y1",x),sr&8&&k!==(k=gr[3].reductionLine2)&&ce(w,"y2",k),sr&8&&R!==(R=gr[3].parishPretrialSquareSide)&&ce(Q,"width",R),sr&8&&M!==(M=gr[3].parishPretrialSquareSide)&&ce(Q,"height",M),sr&16&&ce(Q,"x",gr[4]),sr&8&&G!==(G=gr[3].parishReductionSquareSide)&&ce(O,"width",G),sr&8&&K!==(K=gr[3].parishReductionSquareSide)&&ce(O,"height",K),sr&16&&ce(O,"x",gr[4]),sr&8&&Z!==(Z=gr[3].parishPretrialSquareSide-gr[3].parishReductionSquareSide)&&ce(O,"y",Z),sr&8&&se!==(se=gr[3].svgSizeH+"px")&&ce(d,"height",se),sr&8&&Be!==(Be=gr[3].svgSizeW+"px")&&ce(d,"width",Be),sr&32&&ei(Te,gr[5]),sr&8&&Oe!==(Oe=gr[3].total_jail_pretrial.toFixed(0)+"")&&ei(Mt,Oe),sr&1&&ei(Se,gr[0]),sr&8&&Ke!==(Ke=gr[3].required_reduction.toFixed(0)+"")&&ei(at,Ke),sr&8&&Bt!==(Bt=(gr[3].required_reduction_pct*100).toFixed(1)+"")&&ei(Ge,Bt)},d(gr){gr&&it(t),Nt.d(),ze.d()}}}function zE(e){let t,r,s;return{c(){t=Gn("text"),r=Ir("pretrial population"),ce(t,"x","0"),ce(t,"y",s=e[3].parishPretrialLine),ce(t,"fill","#000"),ce(t,"class","svelte-1xnl78g")},m(l,c){ot(l,t,c),st(t,r)},p(l,c){c&8&&s!==(s=l[3].parishPretrialLine)&&ce(t,"y",s)},d(l){l&&it(t)}}}function VE(e){let t,r,s;return{c(){t=Gn("text"),r=Ir("pretrial population"),ce(t,"x","0"),ce(t,"y",s=e[3].parishPretrialLine+9),ce(t,"fill","#000"),ce(t,"class","svelte-1xnl78g")},m(l,c){ot(l,t,c),st(t,r)},p(l,c){c&8&&s!==(s=l[3].parishPretrialLine+9)&&ce(t,"y",s)},d(l){l&&it(t)}}}function KE(e){let t,r,s;return{c(){t=Gn("line"),ce(t,"x1","140"),ce(t,"y1",r=e[3].parishPretrialLine2),ce(t,"x2","200"),ce(t,"y2",s=e[3].parishPretrialLine2),ce(t,"stroke","#000"),ce(t,"class","svelte-1xnl78g")},m(l,c){ot(l,t,c)},p(l,c){c&8&&r!==(r=l[3].parishPretrialLine2)&&ce(t,"y1",r),c&8&&s!==(s=l[3].parishPretrialLine2)&&ce(t,"y2",s)},d(l){l&&it(t)}}}function GE(e){let t,r,s;return{c(){t=Gn("line"),ce(t,"x1","140"),ce(t,"y1",r=e[3].parishPretrialLine2+7),ce(t,"x2","200"),ce(t,"y2",s=e[3].parishPretrialLine2+7),ce(t,"stroke","#000"),ce(t,"class","svelte-1xnl78g")},m(l,c){ot(l,t,c)},p(l,c){c&8&&r!==(r=l[3].parishPretrialLine2+7)&&ce(t,"y1",r),c&8&&s!==(s=l[3].parishPretrialLine2+7)&&ce(t,"y2",s)},d(l){l&&it(t)}}}function qE(e){let t,r,s,l,c,h;return t=new OE({}),t.$on("mousemove",e[8]),t.$on("mouseout",e[9]),s=new Oc({props:{gridlines:!1,snapTicks:!0,ticks:"4"}}),c=new Hc({props:{gridlines:!0}}),{c(){yr(t.$$.fragment),r=$t(),yr(s.$$.fragment),l=$t(),yr(c.$$.fragment)},m(a,d){pr(t,a,d),ot(a,r,d),pr(s,a,d),ot(a,l,d),pr(c,a,d),h=!0},p:bn,i(a){h||(Pt(t.$$.fragment,a),Pt(s.$$.fragment,a),Pt(c.$$.fragment,a),h=!0)},o(a){Gt(t.$$.fragment,a),Gt(s.$$.fragment,a),Gt(c.$$.fragment,a),h=!1},d(a){mr(t,a),a&&it(r),mr(s,a),a&&it(l),mr(c,a)}}}function oy(e){let t,r;return t=new ld({props:{evt:e[6],$$slots:{default:[WE,({detail:s})=>({13:s}),({detail:s})=>s?8192:0]},$$scope:{ctx:e}}}),{c(){yr(t.$$.fragment)},m(s,l){pr(t,s,l),r=!0},p(s,l){const c={};l&64&&(c.evt=s[6]),l&40960&&(c.$$scope={dirty:l,ctx:s}),t.$set(c)},i(s){r||(Pt(t.$$.fragment,s),r=!0)},o(s){Gt(t.$$.fragment,s),r=!1},d(s){mr(t,s)}}}function WE(e){sy(e);let t,r=(+e[14].total_jail_pretrial).toFixed(0)+"",s,l;return{c(){t=kt("div"),s=Ir(r),l=Ir(" people"),ce(t,"class","row")},m(c,h){ot(c,t,h),st(t,s),st(t,l)},p(c,h){sy(c),h&8192&&r!==(r=(+c[14].total_jail_pretrial).toFixed(0)+"")&&ei(s,r)},d(c){c&&it(t)}}}function XE(e){let t,r,s=e[7]!==!0&&oy(e);return{c(){s&&s.c(),t=tA()},m(l,c){s&&s.m(l,c),ot(l,t,c),r=!0},p(l,c){l[7]!==!0?s?(s.p(l,c),c&128&&Pt(s,1)):(s=oy(l),s.c(),Pt(s,1),s.m(t.parentNode,t)):s&&(Lo(),Gt(s,1,1,()=>{s=null}),Qo())},i(l){r||(Pt(s),r=!0)},o(l){Gt(s),r=!1},d(l){s&&s.d(l),l&&it(t)}}}function ZE(e){let t,r,s,l;return t=new oh({props:{$$slots:{default:[qE]},$$scope:{ctx:e}}}),s=new ah({props:{pointerEvents:!1,$$slots:{default:[XE]},$$scope:{ctx:e}}}),{c(){yr(t.$$.fragment),r=$t(),yr(s.$$.fragment)},m(c,h){pr(t,c,h),ot(c,r,h),pr(s,c,h),l=!0},p(c,h){const a={};h&32960&&(a.$$scope={dirty:h,ctx:c}),t.$set(a);const d={};h&32960&&(d.$$scope={dirty:h,ctx:c}),s.$set(d)},i(c){l||(Pt(t.$$.fragment,c),Pt(s.$$.fragment,c),l=!0)},o(c){Gt(t.$$.fragment,c),Gt(s.$$.fragment,c),l=!1},d(c){mr(t,c),c&&it(r),mr(s,c)}}}function JE(e){let t,r,s,l,c,h,a,d,_,p,E,w,x,k,Q,R,M,O,G=e[3].required_reduction_pct>=0&&ay(e);return x=new nh({props:{padding:{top:0,right:0,bottom:20,left:20},x:ug,y:YE,xScale:eh().paddingInner([.05]).round(!0),xDomain:["1970","1978","1983","1988","1993","1999","2006","2013","2019","2021"],yDomain:[0,e[2]],data:e[1],$$slots:{default:[ZE]},$$scope:{ctx:e}}}),{c(){t=kt("p"),t.innerHTML=`In 2019, there were nearly 16,000 people held pretrial in Louisiana on a
  typical day—more than twice the national average per capita and more than five
  times the rate of the state with the lowest pretrial detention rate (New
  Hampshire). Louisiana law allows the state to hold people longer without trial
  or conviction than most other states, resulting in lengthy pretrial stays—<a href="https://www.laaclu.org/sites/default/files/field_documents/aclu_la_justicecantwaitreport_02102020_online.pdf" target="_blank">an average of 5.5 months</a>.`,r=$t(),G&&G.c(),s=$t(),l=kt("p"),l.innerHTML=`Money bail criminalizes poverty by requiring people accused of a crime to pay
  hundreds or even thousands of dollars to be released before trial (often to
  the profit of the private bail bond industry). <a href="https://www.laaclu.org/sites/default/files/field_documents/aclu_la_justicecantwaitreport_02102020_online.pdf" target="_blank">Median bail</a>
  in Louisiana is nearly as high as the median salary. And it’s a system that costs
  taxpayers. For example, in 2015, extracting cash bail and other conviction-related
  fines and fees
  <a href="https://www.vera.org/downloads/publications/past-due-costs-consequences-charging-for-justice-new-orleans-fact-sheet.pdf" target="_blank">cost the City of New Orleans</a> $1.9 million more in jail costs than the revenue it generated for criminal legal
  agencies.`,c=$t(),h=kt("h4"),a=Ir("Pretrial jail population in "),d=Ir(e[0]),_=Ir(" Parish (1970-2021)"),p=$t(),E=kt("div"),w=kt("div"),yr(x.$$.fragment),k=$t(),Q=kt("p"),Q.innerHTML=`<i>For complete detail on jail incarceration trends, including data for race
    and gender, see Vera’s <a href="https://trends.vera.org/" target="_blank">Incarceration Trends</a>.</i>`,R=$t(),M=kt("div"),M.innerHTML=`<p><span class="rec svelte-1xnl78g">Recommendation</span>: Pass legislation that allows people
    charged with non-violent felonies and misdemeanors to be issued a summons in
    lieu of arrest, and enact comprehensive bail reform so that money does not
    determine freedom.</p>`,ce(t,"class","break-avoid"),ce(l,"class","break-avoid"),ce(w,"class","chart-container pretrial svelte-1xnl78g"),ce(E,"id","wrap"),ce(E,"class","svelte-1xnl78g"),ce(Q,"class","note"),ce(M,"id","recs")},m(K,Z){ot(K,t,Z),ot(K,r,Z),G&&G.m(K,Z),ot(K,s,Z),ot(K,l,Z),ot(K,c,Z),ot(K,h,Z),st(h,a),st(h,d),st(h,_),ot(K,p,Z),ot(K,E,Z),st(E,w),pr(x,w,null),ot(K,k,Z),ot(K,Q,Z),ot(K,R,Z),ot(K,M,Z),O=!0},p(K,[Z]){K[3].required_reduction_pct>=0?G?G.p(K,Z):(G=ay(K),G.c(),G.m(s.parentNode,s)):G&&(G.d(1),G=null),(!O||Z&1)&&ei(d,K[0]);const $={};Z&4&&($.yDomain=[0,K[2]]),Z&2&&($.data=K[1]),Z&32960&&($.$$scope={dirty:Z,ctx:K}),x.$set($)},i(K){O||(Pt(x.$$.fragment,K),O=!0)},o(K){Gt(x.$$.fragment,K),O=!1},d(K){K&&it(t),K&&it(r),G&&G.d(K),K&&it(s),K&&it(l),K&&it(c),K&&it(h),K&&it(p),K&&it(E),mr(x),K&&it(k),K&&it(Q),K&&it(R),K&&it(M)}}}const ug="year",YE="total_jail_pretrial";function $E(e,t,r){let{parishname:s}=t,l=[],c,h=[],a=[],d,_,E=Ga("#app").node().getBoundingClientRect().width;E>400?d=200:d=0,Wa(async()=>{const R=await GA("https://vera-louisiana-data.s3.amazonaws.com/curated_data/clearinghouse/pretrial_trends.csv");R.forEach(ee=>{ee.total_jail_pretrial=+ee.total_jail_pretrial}),r(1,l=R.filter(ee=>ee.parish==s+" Parish")),r(2,c=Wf(l,ee=>ee.total_jail_pretrial));const M=await GA("https://vera-louisiana-data.s3.amazonaws.com/curated_data/clearinghouse/pretrial_infographic.csv"),G=(await GA("https://vera-louisiana-data.s3.amazonaws.com/curated_data/clearinghouse/pretrial_date.csv")).filter(ee=>ee.parish==s+" Parish")[0].pretrial_date;let Z=Wg("%m/%d/%y")(G);const $=Rp("%B %d, %Y");r(5,_=$(Z)),h=M.filter(ee=>ee.parish==s+" Parish");let fe=200*200*h[0].required_reduction_pct,_e=Math.sqrt(fe),ue=wu().domain([0,h[0].total_jail_pretrial]).range([0,200]);h.forEach(ee=>{ee.total_jail_pretrial=+ee.total_jail_pretrial,ee.required_reduction_pct=+ee.required_reduction_pct,ee.required_reduction=+ee.required_reduction,ee.parishPretrialSquareSide=ue(ee.total_jail_pretrial),ee.parishReductionSquareSide=_e,ee.svgSizeW=420,ee.svgSizeH=E>400?220:260,ee.parishPretrialLine=(ue(ee.total_jail_pretrial)-ue(ee.total_jail_pretrial)*ee.required_reduction_pct)/2,ee.parishPretrialLine2=(ue(ee.total_jail_pretrial)-ue(ee.total_jail_pretrial)*ee.required_reduction_pct)/2-4,ee.reductionLine=ue(ee.total_jail_pretrial)*ee.required_reduction_pct/2+(ue(ee.total_jail_pretrial)-ue(ee.total_jail_pretrial)*ee.required_reduction_pct),ee.reductionLine2=ue(ee.total_jail_pretrial)*ee.required_reduction_pct/2+(ue(ee.total_jail_pretrial)-ue(ee.total_jail_pretrial)*ee.required_reduction_pct)-4}),r(3,a=h[0])}),l.forEach(R=>{R[ug]=+R[ug]});let w,x=!1;const k=R=>r(6,w=r(7,x=R)),Q=()=>r(7,x=!0);return e.$$set=R=>{"parishname"in R&&r(0,s=R.parishname)},[s,l,c,a,d,_,w,x,k,Q]}class Ay extends ai{constructor(t){super(),si(this,t,$E,JE,ri,{parishname:0})}}function eF(e){let t,r,s,l,c,h,a,d,_,p,E,w;return{c(){t=kt("h4"),r=Ir("Annual "),s=Ir(e[0]),l=Ir(" Parish government payroll, by function ("),c=Ir(e[3]),h=Ir(")"),a=$t(),d=kt("div"),_=$t(),p=kt("div"),E=$t(),w=kt("div"),w.innerHTML=`<div class="legend-item criminallegal svelte-1qt8esd"><div class="marker svelte-1qt8esd"></div> 
    <div class="name">Criminal Legal Spending</div></div> 
  <div class="legend-item other svelte-1qt8esd"><div class="marker svelte-1qt8esd"></div> 
    <div class="name">All Other Spending</div></div>`,ce(d,"class","feature svelte-1qt8esd"),ce(d,"id","chart"),ce(p,"class","tooltip svelte-1qt8esd"),ce(w,"class","legend svelte-1qt8esd")},m(x,k){ot(x,t,k),st(t,r),st(t,s),st(t,l),st(t,c),st(t,h),ot(x,a,k),ot(x,d,k),e[4](d),ot(x,_,k),ot(x,p,k),e[5](p),ot(x,E,k),ot(x,w,k)},p(x,[k]){k&1&&ei(s,x[0]),k&8&&ei(c,x[3])},i:bn,o:bn,d(x){x&&it(t),x&&it(a),x&&it(d),e[4](null),x&&it(_),x&&it(p),e[5](null),x&&it(E),x&&it(w)}}}function tF(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")}function rF(e,t,r){let{parishname:s}=t,c=Ga(".tabs").node().getBoundingClientRect().width,h,a=280;c<400?h=c-20:h=c-80;let d=[],_=[],p=[],E=[],w;z5().parentId(function(M){return M.id.substring(0,M.id.lastIndexOf("."))}),H0().size([h,a]).padding(1).round(!0);let x=Ga("body").append("div").attr("class","tooltip"),k;Wa(async()=>{d=(await GA("https://vera-louisiana-data.s3.amazonaws.com/curated_data/clearinghouse/la_state_and_local_gov_employment_payroll_parish.csv")).filter(Te=>Te.parish==s&&Te.government_function!=="budget"),r(3,k=d[0].year),p=d.filter(Te=>Te.government_function=="budget.criminal.corrections"||Te.government_function=="budget.criminal.judicial_and_legal"||Te.government_function=="budget.criminal.police"),E=d.filter(Te=>Te.government_function!=="budget.criminal.corrections"&&Te.government_function!=="budget.criminal.judicial_and_legal"&&Te.government_function!=="budget.criminal.police"&&Te.government_function!=="budget.criminal.police.police_protection_other"&&Te.government_function!=="budget.criminal.police.police_protection_persons_with_power_of_arrest"&&Te.government_function!=="budget.criminal"&&Te.government_function!=="budget"),_=(await GA("https://vera-louisiana-data.s3.amazonaws.com/curated_data/clearinghouse/la_state_and_local_gov_employment_payroll_municipality.csv")).filter(Te=>Te.parish==s&&Te.government_function!=="budget");let G=c2(_,Te=>Te.name_of_government),K=[],Z=[];for(let Te=0;Te<G.length;Te++)K.push(G[Te][0]),Z.push(G[Te][1]);const $=["budget.air_transportation","budget.all_other_and_unallocable","budget.criminal.corrections","budget.criminal.judicial_and_legal","budget.criminal.police","budget.education_elementary_and_secondary_other","budget.electric_power","budget.financial_administration","budget.fire_protection_firefighters","budget.fire_protection_other","budget.gas_supply","budget.health","budget.highways","budget.hospitals","budget.housing_and_community_development","budget.libraries","budget.natural_resources","budget.other_government_administration","budget.parks_and_recreation","budget.public_welfare","budget.sea_and_inland_port_facilities","budget.sewerage","budget.solid_waste_management","budget.transit","budget.water_supply"],he=["Air Transportation","All Other & Unallocable","Corrections","Judicial and Legal","Police","Education","Electric Power","Financial Administration","Firefighters","Fire Protection Other","Gas Supply","Health","Highways","Hospitals","Housing & Community Development","Libraries","Natural Resources","Other Gov't Administration","Parks & Recreation","Public Welfare","Sea & Inland Port Facilities","Sewerage","Solid Waste Management","Transit","Water Supply"],fe=p.map(Te=>({name:he[$.indexOf(Te.government_function)],value:+Te.total_payroll_percent_of_total,payroll:+Te.total_payroll,employees:+Te.full_time_employees})),_e=E.map(Te=>({name:he[$.indexOf(Te.government_function)],value:+Te.total_payroll_percent_of_total,payroll:+Te.total_payroll,employees:+Te.full_time_employees}));for(let Te=0;Te<Z.length;Te++)Z[Te].map(tt=>({name:he[$.indexOf(tt.government_function)],value:+tt.total_payroll_percent_of_total,payroll:+tt.total_payroll,employees:+tt.full_time_employees}));var ue=a=100,ee=wu().domain([0,ue]).range([0,ue]),se=wu().domain([0,a]).range([0,a]);Fp().range(["#EF4136","#DA392F","#b6231a"]),Fp().range(["#2E1D97","#97DFD1","royalblue","#0E002C","#0A0319","navy","slateblue","#146571","#4625ae","#361694","#3d83da","#0553b3","#546a86","#6b91c0","#2d4d75"].map(function(Te){return Te=vp(Te),Te}));var Be=H0().size([ue,a]).paddingInner(0).round(!1),me={name:"Budget",children:[{name:"Criminal Legal Spending",children:fe},{name:"Other",children:_e}]},Pe=Vg(me).sum(function(Te){return Te.value?Te.value:0}).sort(function(Te,tt){return tt.height-Te.height||tt.value-Te.value});Be(Pe);var ge=Ga("#chart").append("div").attr("id","chartle"),Qe=ge.selectAll(".node").data(Pe.descendants()).enter().append("div").attr("class",function(Te){return"node level-"+Te.depth}).attr("title",function(Te){return Te.data.name?Te.data.name:"null"});Qe.style("left",function(Te){return ee(Te.x0)+"%"}).style("top",function(Te){return se(Te.y0)+"%"}).style("width",function(Te){return ee(Te.x1)-ee(Te.x0)+"%"}).style("height",function(Te){return se(Te.y1)-se(Te.y0)+"%"}).style("background-color",function(Te){for(;Te.depth>2;)Te=Te.parent;return Te.data.name=="Corrections"||Te.data.name=="Police"||Te.data.name=="Judicial and Legal"?"#ef4136":"#0E002C"}).on("mouseover",function(Te,tt){var Oe=tt.data.name+"<br/>$"+tF(tt.data.payroll)+" ("+tt.data.value.toFixed(1)+"%)";Ga(x).html(Oe).style("visibility","visible")}).on("mousemove",function(Te,tt){Ga(x).style("top",Te.pageY+"px").style("left",Te.pageX+"px")}).on("mouseout",function(Te,tt){wv("rect").attr("stroke-width",0),Ga(x).style("visibility","hidden")}),Qe.append("p").text(function(Te){return Te.data.name?Te.data.name:"---"}).attr("class",function(Te){let tt=Ga(this).node(),Oe=tt.getBoundingClientRect().width,Mt=tt.getBoundingClientRect().height,ne=tt.parentNode,Se=ne.getBoundingClientRect().width,ke=ne.getBoundingClientRect().height;return Oe>Se||Mt+14>ke?"label overflow":"label inbounds"})});function Q(M){qa[M?"unshift":"push"](()=>{w=M,r(1,w)})}function R(M){qa[M?"unshift":"push"](()=>{x=M,r(2,x)})}return e.$$set=M=>{"parishname"in M&&r(0,s=M.parishname)},[s,w,x,k,Q,R]}class nF extends ai{constructor(t){super(),si(this,t,rF,eF,ri,{parishname:0})}}function iF(e){let t,r,s,l,c,h,a;return l=new nF({props:{parishname:e[0]}}),{c(){t=kt("p"),t.innerHTML=`A large proportion of parish and municipal budgets support the criminal legal
  system. But incarceration does not guarantee safety—if it did, Louisiana would
  be one of the safest places in the world. Every dollar spent on policing and
  incarceration is money that could instead go towards cost-efficient systems
  that are <a href="https://www.brookings.edu/essay/a-new-community-safety-blueprint-how-the-federal-government-can-address-violence-and-harm-through-a-public-health-approach/" target="_blank">proven to produce safety and keep people out of jails and prisons</a>, like mental health care, education, vocational programs, and housing.`,r=$t(),s=kt("div"),yr(l.$$.fragment),c=$t(),h=kt("div"),h.innerHTML=`<p><span class="rec svelte-1lv3cy1">Recommendation</span>: Enact meaningful reforms that will
    allow for jail decarceration, and then close jails and repurpose carceral
    facilities for non-jail, non-detention purposes. Reducing corrections
    spending and ending mass incarceration in Louisiana will require lowering
    jail capacity. This means working towards permanently closing jails.</p>`,ce(t,"class","break-avoid"),ce(s,"id","treemap"),ce(s,"class","svelte-1lv3cy1"),ce(h,"id","recs"),ce(h,"class","svelte-1lv3cy1")},m(d,_){ot(d,t,_),ot(d,r,_),ot(d,s,_),pr(l,s,null),ot(d,c,_),ot(d,h,_),a=!0},p(d,[_]){const p={};_&1&&(p.parishname=d[0]),l.$set(p)},i(d){a||(Pt(l.$$.fragment,d),a=!0)},o(d){Gt(l.$$.fragment,d),a=!1},d(d){d&&it(t),d&&it(r),d&&it(s),mr(l),d&&it(c),d&&it(h)}}}function sF(e,t,r){let{parishname:s}=t;return Wa(async()=>{}),e.$$set=l=>{"parishname"in l&&r(0,s=l.parishname)},[s]}class ly extends ai{constructor(t){super(),si(this,t,sF,iF,ri,{parishname:0})}}function aF(e){let t,r,s;return{c(){t=kt("div"),r=$t(),s=kt("div"),ce(t,"id","vis"),ce(s,"class","tooltip svelte-1x80qnr")},m(l,c){ot(l,t,c),e[3](t),ot(l,r,c),ot(l,s,c),e[4](s)},p:bn,i:bn,o:bn,d(l){l&&it(t),e[3](null),l&&it(r),l&&it(s),e[4](null)}}}function oF(e,t,r){let{parishname:s}=t,l,c=[],h=Ga("body").append("div").attr("class","tooltip");Wa(async()=>{const _=await GA("https://vera-louisiana-data.s3.amazonaws.com/curated_data/clearinghouse/arrests_long.csv");_.forEach(G=>{if(G.the_value=+G.value,G.parameter=G.department.replace(/[^A-Z0-9]+/gi,""),G.metric=="black_pt2_arrests_pct")return G.segment="Pt 2 Arrests, Black (%)";if(G.metric=="black_pop_pct")return G.segment="Black Population (%)"});let p=_.filter(G=>G.parish==s+" Parish");var E=240,w=220,x={top:15,right:30,bottom:40,left:35},k=eh().range([0,E]).padding(.1),Q=wu().range([w,30]),R=x2().scale(k),M=Array.from(new Set(p.map(function(G){return G.segment})));k.domain(M),c=Array.from(o2(p,G=>G.parameter),([G,K])=>({key:G,value:K}));var O=Ga("#vis").selectAll("svg").data(c).enter().append("svg").attr("id","dept").attr("height",w+x.bottom).attr("class",function(G){return G.value[0].parameter});O.append("g").attr("transform","translate(0,"+16+")").append("text").text(G=>G.value[0].department),c.forEach(function(G,K){Q.domain([0,Wf(G.value,function($){return $.the_value})]),Ga("svg."+G.value[0].parameter).selectAll(".bar").data(G.value).enter().append("rect").attr("class","bar").attr("x",function($){return k($.segment)}).attr("width",k.bandwidth()).attr("y",function($){return Q($.the_value)}).attr("height",function($){return w-Q($.the_value)}).attr("stroke",$=>$.metric=="black_pt2_arrests_pct"?"none":"#97dfd1").attr("fill",$=>$.metric=="black_pt2_arrests_pct"?"#0e002c":"#97dfd1").on("mouseover",function($,he){var fe=he.the_value.toFixed(0)+"%";Ga(h).html(fe).style("visibility","visible")}).on("mousemove",function($,he){Ga(h).style("top",$.pageY+"px").style("left",$.pageX+"px")}).on("mouseout",function($,he){wv("rect").attr("stroke-width",0),Ga(h).style("visibility","hidden")}),Ga("svg."+G.value[0].parameter).append("g").attr("transform","translate(0,"+w+")").call(R)})});function a(_){qa[_?"unshift":"push"](()=>{l=_,r(0,l)})}function d(_){qa[_?"unshift":"push"](()=>{h=_,r(1,h)})}return e.$$set=_=>{"parishname"in _&&r(2,s=_.parishname)},[l,h,s,a,d]}class AF extends ai{constructor(t){super(),si(this,t,oF,aF,ri,{parishname:2})}}function cy(e){const t={...e[11].props};e[12]=t}function lF(e){let t,r,s,l,c,h;return t=new Oc({props:{gridlines:!0,baseline:!0,snapTicks:!0,ticks:"4"}}),s=new Hc({props:{gridlines:!1}}),c=new Op({props:{fill:"#da392f"}}),c.$on("mousemove",e[7]),c.$on("mouseout",e[8]),{c(){yr(t.$$.fragment),r=$t(),yr(s.$$.fragment),l=$t(),yr(c.$$.fragment)},m(a,d){pr(t,a,d),ot(a,r,d),pr(s,a,d),ot(a,l,d),pr(c,a,d),h=!0},p:bn,i(a){h||(Pt(t.$$.fragment,a),Pt(s.$$.fragment,a),Pt(c.$$.fragment,a),h=!0)},o(a){Gt(t.$$.fragment,a),Gt(s.$$.fragment,a),Gt(c.$$.fragment,a),h=!1},d(a){mr(t,a),a&&it(r),mr(s,a),a&&it(l),mr(c,a)}}}function uy(e){let t,r;return t=new ld({props:{evt:e[5],$$slots:{default:[cF,({detail:s})=>({11:s}),({detail:s})=>s?2048:0]},$$scope:{ctx:e}}}),{c(){yr(t.$$.fragment)},m(s,l){pr(t,s,l),r=!0},p(s,l){const c={};l&32&&(c.evt=s[5]),l&10240&&(c.$$scope={dirty:l,ctx:s}),t.$set(c)},i(s){r||(Pt(t.$$.fragment,s),r=!0)},o(s){Gt(t.$$.fragment,s),r=!1},d(s){mr(t,s)}}}function cF(e){cy(e);let t,r=e[12].department+"",s,l,c=(+e[12].pt2_arrests_pct).toFixed(0)+"",h,a;return{c(){t=kt("div"),s=Ir(r),l=Ir(": "),h=Ir(c),a=Ir("% Part 2 Arrests"),ce(t,"class","row")},m(d,_){ot(d,t,_),st(t,s),st(t,l),st(t,h),st(t,a)},p(d,_){cy(d),_&2048&&r!==(r=d[12].department+"")&&ei(s,r),_&2048&&c!==(c=(+d[12].pt2_arrests_pct).toFixed(0)+"")&&ei(h,c)},d(d){d&&it(t)}}}function uF(e){let t,r,s=e[6]!==!0&&uy(e);return{c(){s&&s.c(),t=tA()},m(l,c){s&&s.m(l,c),ot(l,t,c),r=!0},p(l,c){l[6]!==!0?s?(s.p(l,c),c&64&&Pt(s,1)):(s=uy(l),s.c(),Pt(s,1),s.m(t.parentNode,t)):s&&(Lo(),Gt(s,1,1,()=>{s=null}),Qo())},i(l){r||(Pt(s),r=!0)},o(l){Gt(s),r=!1},d(l){s&&s.d(l),l&&it(t)}}}function hF(e){let t,r,s,l;return t=new oh({props:{$$slots:{default:[lF]},$$scope:{ctx:e}}}),s=new ah({props:{pointerEvents:!1,$$slots:{default:[uF]},$$scope:{ctx:e}}}),{c(){yr(t.$$.fragment),r=$t(),yr(s.$$.fragment)},m(c,h){pr(t,c,h),ot(c,r,h),pr(s,c,h),l=!0},p(c,h){const a={};h&8288&&(a.$$scope={dirty:h,ctx:c}),t.$set(a);const d={};h&8288&&(d.$$scope={dirty:h,ctx:c}),s.$set(d)},i(c){l||(Pt(t.$$.fragment,c),Pt(s.$$.fragment,c),l=!0)},o(c){Gt(t.$$.fragment,c),Gt(s.$$.fragment,c),l=!1},d(c){mr(t,c),c&&it(r),mr(s,c)}}}function fF(e){let t,r,s,l,c,h,a,d,_,p,E,w,x,k,Q,R,M,O,G,K,Z,$,he,fe,_e,ue,ee,se,Be,me,Pe;return _=new nh({props:{padding:{top:0,bottom:40,left:230},x:hg,y:dF,yScale:eh().paddingInner([.15]),xDomain:[0,null],data:e[1],$$slots:{default:[hF]},$$scope:{ctx:e}}}),ue=new AF({props:{parishname:e[0]}}),{c(){t=kt("p"),t.textContent=`Entry into the criminal legal system begins with an arrest. The FBI classifies
  arrests as either “Part I” or “Part II.” Part I offenses include property
  crimes such as larceny (usually shoplifting or theft from a motor vehicle),
  burglary, and arson, as well as violent crimes such as aggravated assault,
  criminal homicide, rape, and robbery. Part II offenses include less serious
  offenses such as drug abuse violations, disorderly conduct, and gambling.`,r=$t(),s=kt("p"),s.textContent=`In Louisiana, 75 percent of arrests are Part II arrests. Any arrest can lead
  to cascading consequences: high bail leads to long pretrial detention, which
  leads to loss of employment, child custody, housing, and possessions. These
  consequences exacerbate trauma and harm mental health. It is therefore
  essential to consider whether these arrests are improving public safety and if
  there are better alternatives to the police in nonviolent situations.`,l=$t(),c=kt("div"),h=kt("h4"),h.textContent="Part 2 Arrests, Proportion of Total Arrests (2018)",a=$t(),d=kt("div"),yr(_.$$.fragment),p=$t(),E=kt("p"),w=Ir(`Arrests are the rare part of the Louisiana criminal legal system where data on
  race is available. The disproportionate arrest of Black people in Louisiana,
  along with a heightened focus on lower-level offenses, leads to `),x=kt("a"),x.textContent="long-term damage to communities of color and a distrust of the police",k=Ir(".  In "),Q=Ir(e[0]),R=Ir(" Parish, Black people make up "),M=Ir(e[2]),O=Ir(` percent of the
  population but `),G=Ir(e[3]),K=Ir(` percent of people arrested for Part II
  offenses, which pose little threat to public safety.`),Z=$t(),$=kt("div"),he=kt("h4"),he.textContent="Part 2 Arrests, Racial Disparity (2018)",fe=$t(),_e=kt("div"),yr(ue.$$.fragment),ee=$t(),se=kt("p"),se.textContent="Source: Arrest Trends (2018) and U.S. Census American Community Survey (2020)",Be=$t(),me=kt("div"),me.innerHTML=`<p><span class="rec svelte-1y64uy">Recommendation</span>: Advance civilian responses to
    <a href="https://www.vera.org/behavioral-health-crisis-alternatives" target="_blank">911 calls that don’t require law enforcement</a>. Removing the police from encounters that don’t require them–like mental
    health crises,
    <a href="https://www.vera.org/ending-mass-incarceration/criminalization-racial-disparities/public-safety/redefining-public-safety-initiative/stop-the-stops" target="_blank">low-level traffic violations</a>, and noise complaints–is
    <a href="https://www.brookings.edu/essay/a-new-community-safety-blueprint-how-the-federal-government-can-address-violence-and-harm-through-a-public-health-approach/" target="_blank">proven to improve safety</a>, while also reducing arrests (and thus jail admissions).</p>`,ce(t,"class","break-avoid"),ce(d,"class","chart-container svelte-1y64uy"),ce(c,"class","barchart svelte-1y64uy"),Qn(c,"height",e[4]*60+"px"),ce(x,"href","https://www.vera.org/downloads/publications/for-the-record-unjust-burden-racial-disparities.pdf"),ce(x,"target","_blank"),ce(E,"class","disparities svelte-1y64uy"),ce(_e,"id","grid"),ce(_e,"class","svelte-1y64uy"),ce($,"id","bar"),ce($,"class","svelte-1y64uy"),ce(se,"class","note"),ce(me,"id","recs")},m(ge,Qe){ot(ge,t,Qe),ot(ge,r,Qe),ot(ge,s,Qe),ot(ge,l,Qe),ot(ge,c,Qe),st(c,h),st(c,a),st(c,d),pr(_,d,null),ot(ge,p,Qe),ot(ge,E,Qe),st(E,w),st(E,x),st(E,k),st(E,Q),st(E,R),st(E,M),st(E,O),st(E,G),st(E,K),ot(ge,Z,Qe),ot(ge,$,Qe),st($,he),st($,fe),st($,_e),pr(ue,_e,null),ot(ge,ee,Qe),ot(ge,se,Qe),ot(ge,Be,Qe),ot(ge,me,Qe),Pe=!0},p(ge,[Qe]){const Te={};Qe&2&&(Te.data=ge[1]),Qe&8288&&(Te.$$scope={dirty:Qe,ctx:ge}),_.$set(Te),(!Pe||Qe&16)&&Qn(c,"height",ge[4]*60+"px"),(!Pe||Qe&1)&&ei(Q,ge[0]),(!Pe||Qe&4)&&ei(M,ge[2]),(!Pe||Qe&8)&&ei(G,ge[3]);const tt={};Qe&1&&(tt.parishname=ge[0]),ue.$set(tt)},i(ge){Pe||(Pt(_.$$.fragment,ge),Pt(ue.$$.fragment,ge),Pe=!0)},o(ge){Gt(_.$$.fragment,ge),Gt(ue.$$.fragment,ge),Pe=!1},d(ge){ge&&it(t),ge&&it(r),ge&&it(s),ge&&it(l),ge&&it(c),mr(_),ge&&it(p),ge&&it(E),ge&&it(Z),ge&&it($),mr(ue),ge&&it(ee),ge&&it(se),ge&&it(Be),ge&&it(me)}}}const hg="pt2_arrests_pct",dF="department";function pF(e,t,r){let{parishname:s}=t,l=[],c=[],h=0,a=0,d;Wa(async()=>{const x=await GA("https://vera-louisiana-data.s3.amazonaws.com/curated_data/clearinghouse/arrests.csv");x.forEach(Q=>{Q.pt2_arrests_pct=+Q.pt2_arrests_pct,Q.black_pop_pct=+Q.black_pop_pct,Q.black_pt2_arrests_pct=+Q.black_pt2_arrests_pct}),r(1,l=x.filter(Q=>Q.parish==s+" Parish")),l.sort((Q,R)=>R.pt2_arrests_pct-Q.pt2_arrests_pct),c=(await GA("https://vera-louisiana-data.s3.amazonaws.com/curated_data/clearinghouse/arrests_parish_sentence.csv")).filter(Q=>Q.parish==s+" Parish"),r(2,h=(+c[0].black_pop_pct).toFixed(0)),r(3,a=(+c[0].black_pt2_arrests_pct).toFixed(0)),r(4,d=l.length)}),l.forEach(x=>{x[hg]=+x[hg]}),Ga("body").append("div").attr("class","tooltip");let _,p=!1;const E=x=>r(5,_=r(6,p=x)),w=()=>r(6,p=!0);return e.$$set=x=>{"parishname"in x&&r(0,s=x.parishname)},[s,l,h,a,d,_,p,E,w]}class mF extends ai{constructor(t){super(),si(this,t,pF,fF,ri,{parishname:0})}}function hy(e,t,r){const s=e.slice();return s[4]=t[r],s}function fy(e,t,r){const s=e.slice();return s[4]=t[r],s}function dy(e){let t,r,s=e[4].label+"",l,c,h,a,d;return{c(){t=kt("li"),r=kt("span"),l=Ir(s),c=$t(),ce(r,"class","tabitem svelte-1mfb3zm"),ce(t,"class",h=n0(e[0]===e[4].value?"active":"")+" svelte-1mfb3zm")},m(_,p){ot(_,t,p),st(t,r),st(r,l),st(t,c),a||(d=us(r,"click",function(){Lp(e[3](e[4].value))&&e[3](e[4].value).apply(this,arguments)}),a=!0)},p(_,p){e=_,p&2&&s!==(s=e[4].label+"")&&ei(l,s),p&3&&h!==(h=n0(e[0]===e[4].value?"active":"")+" svelte-1mfb3zm")&&ce(t,"class",h)},d(_){_&&it(t),a=!1,d()}}}function py(e){let t,r,s,l;var c=e[4].component;function h(a){return{props:{parishname:a[2]}}}return c&&(r=dp(c,h(e))),{c(){t=kt("div"),r&&yr(r.$$.fragment),s=$t(),ce(t,"class","box svelte-1mfb3zm")},m(a,d){ot(a,t,d),r&&pr(r,t,null),st(t,s),l=!0},p(a,d){const _={};if(d&4&&(_.parishname=a[2]),c!==(c=a[4].component)){if(r){Lo();const p=r;Gt(p.$$.fragment,1,0,()=>{mr(p,1)}),Qo()}c?(r=dp(c,h(a)),yr(r.$$.fragment),Pt(r.$$.fragment,1),pr(r,t,s)):r=null}else c&&r.$set(_)},i(a){l||(r&&Pt(r.$$.fragment,a),l=!0)},o(a){r&&Gt(r.$$.fragment,a),l=!1},d(a){a&&it(t),r&&mr(r)}}}function my(e){let t,r,s=e[0]==e[4].value&&py(e);return{c(){s&&s.c(),t=tA()},m(l,c){s&&s.m(l,c),ot(l,t,c),r=!0},p(l,c){l[0]==l[4].value?s?(s.p(l,c),c&3&&Pt(s,1)):(s=py(l),s.c(),Pt(s,1),s.m(t.parentNode,t)):s&&(Lo(),Gt(s,1,1,()=>{s=null}),Qo())},i(l){r||(Pt(s),r=!0)},o(l){Gt(s),r=!1},d(l){s&&s.d(l),l&&it(t)}}}function gF(e){let t,r,s,l,c=e[1],h=[];for(let p=0;p<c.length;p+=1)h[p]=dy(fy(e,c,p));let a=e[1],d=[];for(let p=0;p<a.length;p+=1)d[p]=my(hy(e,a,p));const _=p=>Gt(d[p],1,1,()=>{d[p]=null});return{c(){t=kt("ul");for(let p=0;p<h.length;p+=1)h[p].c();r=$t();for(let p=0;p<d.length;p+=1)d[p].c();s=tA(),ce(t,"class","svelte-1mfb3zm")},m(p,E){ot(p,t,E);for(let w=0;w<h.length;w+=1)h[w].m(t,null);ot(p,r,E);for(let w=0;w<d.length;w+=1)d[w].m(p,E);ot(p,s,E),l=!0},p(p,[E]){if(E&11){c=p[1];let w;for(w=0;w<c.length;w+=1){const x=fy(p,c,w);h[w]?h[w].p(x,E):(h[w]=dy(x),h[w].c(),h[w].m(t,null))}for(;w<h.length;w+=1)h[w].d(1);h.length=c.length}if(E&7){a=p[1];let w;for(w=0;w<a.length;w+=1){const x=hy(p,a,w);d[w]?(d[w].p(x,E),Pt(d[w],1)):(d[w]=my(x),d[w].c(),Pt(d[w],1),d[w].m(s.parentNode,s))}for(Lo(),w=a.length;w<d.length;w+=1)_(w);Qo()}},i(p){if(!l){for(let E=0;E<a.length;E+=1)Pt(d[E]);l=!0}},o(p){d=d.filter(Boolean);for(let E=0;E<d.length;E+=1)Gt(d[E]);l=!1},d(p){p&&it(t),mc(h,p),p&&it(r),mc(d,p),p&&it(s)}}}function yF(e,t,r){let{items:s=[]}=t,{activeTabValue:l=1}=t,{parishname:c}=t;const h=a=>()=>r(0,l=a);return e.$$set=a=>{"items"in a&&r(1,s=a.items),"activeTabValue"in a&&r(0,l=a.activeTabValue),"parishname"in a&&r(2,c=a.parishname)},[l,s,c,h]}class vF extends ai{constructor(t){super(),si(this,t,yF,gF,ri,{items:1,activeTabValue:0,parishname:2})}}var gy={},_F={get exports(){return gy},set exports(e){gy=e}};const wF="modulepreload",bF=function(e){return"/"+e},yy={},fg=function(t,r,s){if(!r||r.length===0)return t();const l=document.getElementsByTagName("link");return Promise.all(r.map(c=>{if(c=bF(c),c in yy)return;yy[c]=!0;const h=c.endsWith(".css"),a=h?'[rel="stylesheet"]':"";if(!!s)for(let p=l.length-1;p>=0;p--){const E=l[p];if(E.href===c&&(!h||E.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${a}`))return;const _=document.createElement("link");if(_.rel=h?"stylesheet":wF,h||(_.as="script",_.crossOrigin=""),_.href=c,document.head.appendChild(_),h)return new Promise((p,E)=>{_.addEventListener("load",p),_.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${c}`)))})})).then(()=>t())};function qi(e){return qi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qi(e)}var Zo=Uint8Array,Jo=Uint16Array,ed=Uint32Array,Hp=new Zo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),zp=new Zo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),dg=new Zo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),r_=function(e,t){for(var r=new Jo(31),s=0;s<31;++s)r[s]=t+=1<<e[s-1];for(var l=new ed(r[30]),s=1;s<30;++s)for(var c=r[s];c<r[s+1];++c)l[c]=c-r[s]<<5|s;return[r,l]},n_=r_(Hp,2),i_=n_[0],pg=n_[1];i_[28]=258,pg[258]=28;var s_=r_(zp,0),xF=s_[0],vy=s_[1],mg=new Jo(32768);for(var ws=0;ws<32768;++ws){var gu=(ws&43690)>>>1|(ws&21845)<<1;gu=(gu&52428)>>>2|(gu&13107)<<2,gu=(gu&61680)>>>4|(gu&3855)<<4,mg[ws]=((gu&65280)>>>8|(gu&255)<<8)>>>1}var pc=function(e,t,r){for(var s=e.length,l=0,c=new Jo(t);l<s;++l)++c[e[l]-1];var h=new Jo(t);for(l=0;l<t;++l)h[l]=h[l-1]+c[l-1]<<1;var a;if(r){a=new Jo(1<<t);var d=15-t;for(l=0;l<s;++l)if(e[l])for(var _=l<<4|e[l],p=t-e[l],E=h[e[l]-1]++<<p,w=E|(1<<p)-1;E<=w;++E)a[mg[E]>>>d]=_}else for(a=new Jo(s),l=0;l<s;++l)a[l]=mg[h[e[l]-1]++]>>>15-e[l];return a},Cu=new Zo(288);for(var ws=0;ws<144;++ws)Cu[ws]=8;for(var ws=144;ws<256;++ws)Cu[ws]=9;for(var ws=256;ws<280;++ws)Cu[ws]=7;for(var ws=280;ws<288;++ws)Cu[ws]=8;var td=new Zo(32);for(var ws=0;ws<32;++ws)td[ws]=5;var BF=pc(Cu,9,0),CF=pc(Cu,9,1),EF=pc(td,5,0),FF=pc(td,5,1),Pm=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},jl=function(e,t,r){var s=t/8>>0;return(e[s]|e[s+1]<<8)>>>(t&7)&r},Mm=function(e,t){var r=t/8>>0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>>(t&7)},Xg=function(e){return(e/8>>0)+(e&7&&1)},a_=function(e,t,r){(t==null||t<0)&&(t=0),(r==null||r>e.length)&&(r=e.length);var s=new(e instanceof Jo?Jo:e instanceof ed?ed:Zo)(r-t);return s.set(e.subarray(t,r)),s},SF=function(e,t,r){var s=e.length,l=!t||r,c=!r||r.i;r||(r={}),t||(t=new Zo(s*3));var h=function(at){var dt=t.length;if(at>dt){var Bt=new Zo(Math.max(dt*2,at));Bt.set(t),t=Bt}},a=r.f||0,d=r.p||0,_=r.b||0,p=r.l,E=r.d,w=r.m,x=r.n,k=s*8;do{if(!p){r.f=a=jl(e,d,1);var Q=jl(e,d+1,3);if(d+=3,Q)if(Q==1)p=CF,E=FF,w=9,x=5;else if(Q==2){var G=jl(e,d,31)+257,K=jl(e,d+10,15)+4,Z=G+jl(e,d+5,31)+1;d+=14;for(var $=new Zo(Z),he=new Zo(19),fe=0;fe<K;++fe)he[dg[fe]]=jl(e,d+fe*3,7);d+=K*3;var _e=Pm(he),ue=(1<<_e)-1;if(!c&&d+Z*(_e+7)>k)break;for(var ee=pc(he,_e,1),fe=0;fe<Z;){var se=ee[jl(e,d,ue)];d+=se&15;var R=se>>>4;if(R<16)$[fe++]=R;else{var Be=0,me=0;for(R==16?(me=3+jl(e,d,3),d+=2,Be=$[fe-1]):R==17?(me=3+jl(e,d,7),d+=3):R==18&&(me=11+jl(e,d,127),d+=7);me--;)$[fe++]=Be}}var Pe=$.subarray(0,G),ge=$.subarray(G);w=Pm(Pe),x=Pm(ge),p=pc(Pe,w,1),E=pc(ge,x,1)}else throw"invalid block type";else{var R=Xg(d)+4,M=e[R-4]|e[R-3]<<8,O=R+M;if(O>s){if(c)throw"unexpected EOF";break}l&&h(_+M),t.set(e.subarray(R,O),_),r.b=_+=M,r.p=d=O*8;continue}if(d>k)throw"unexpected EOF"}l&&h(_+131072);for(var Qe=(1<<w)-1,Te=(1<<x)-1,tt=w+x+18;c||d+tt<k;){var Be=p[Mm(e,d)&Qe],Oe=Be>>>4;if(d+=Be&15,d>k)throw"unexpected EOF";if(!Be)throw"invalid length/literal";if(Oe<256)t[_++]=Oe;else if(Oe==256){p=null;break}else{var Mt=Oe-254;if(Oe>264){var fe=Oe-257,ne=Hp[fe];Mt=jl(e,d,(1<<ne)-1)+i_[fe],d+=ne}var Se=E[Mm(e,d)&Te],ke=Se>>>4;if(!Se)throw"invalid distance";d+=Se&15;var ge=xF[ke];if(ke>3){var ne=zp[ke];ge+=Mm(e,d)&(1<<ne)-1,d+=ne}if(d>k)throw"unexpected EOF";l&&h(_+131072);for(var Ke=_+Mt;_<Ke;_+=4)t[_]=t[_-ge],t[_+1]=t[_+1-ge],t[_+2]=t[_+2-ge],t[_+3]=t[_+3-ge];_=Ke}}r.l=p,r.p=d,r.b=_,p&&(a=1,r.m=w,r.d=E,r.n=x)}while(!a);return _==t.length?t:a_(t,0,_)},Nc=function(e,t,r){r<<=t&7;var s=t/8>>0;e[s]|=r,e[s+1]|=r>>>8},Pf=function(e,t,r){r<<=t&7;var s=t/8>>0;e[s]|=r,e[s+1]|=r>>>8,e[s+2]|=r>>>16},Dm=function(e,t){for(var r=[],s=0;s<e.length;++s)e[s]&&r.push({s,f:e[s]});var l=r.length,c=r.slice();if(!l)return[new Zo(0),0];if(l==1){var h=new Zo(r[0].s+1);return h[r[0].s]=1,[h,1]}r.sort(function(Z,$){return Z.f-$.f}),r.push({s:-1,f:25001});var a=r[0],d=r[1],_=0,p=1,E=2;for(r[0]={s:-1,f:a.f+d.f,l:a,r:d};p!=l-1;)a=r[r[_].f<r[E].f?_++:E++],d=r[_!=p&&r[_].f<r[E].f?_++:E++],r[p++]={s:-1,f:a.f+d.f,l:a,r:d};for(var w=c[0].s,s=1;s<l;++s)c[s].s>w&&(w=c[s].s);var x=new Jo(w+1),k=gg(r[p-1],x,0);if(k>t){var s=0,Q=0,R=k-t,M=1<<R;for(c.sort(function($,he){return x[he.s]-x[$.s]||$.f-he.f});s<l;++s){var O=c[s].s;if(x[O]>t)Q+=M-(1<<k-x[O]),x[O]=t;else break}for(Q>>>=R;Q>0;){var G=c[s].s;x[G]<t?Q-=1<<t-x[G]++-1:++s}for(;s>=0&&Q;--s){var K=c[s].s;x[K]==t&&(--x[K],++Q)}k=t}return[new Zo(x),k]},gg=function(e,t,r){return e.s==-1?Math.max(gg(e.l,t,r+1),gg(e.r,t,r+1)):t[e.s]=r},_y=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new Jo(++t),s=0,l=e[0],c=1,h=function(d){r[s++]=d},a=1;a<=t;++a)if(e[a]==l&&a!=t)++c;else{if(!l&&c>2){for(;c>138;c-=138)h(32754);c>2&&(h(c>10?c-11<<5|28690:c-3<<5|12305),c=0)}else if(c>3){for(h(l),--c;c>6;c-=6)h(8304);c>2&&(h(c-3<<5|8208),c=0)}for(;c--;)h(l);c=1,l=e[a]}return[r.subarray(0,s),t]},Mf=function(e,t){for(var r=0,s=0;s<t.length;++s)r+=e[s]*t[s];return r},hp=function(e,t,r){var s=r.length,l=Xg(t+2);e[l]=s&255,e[l+1]=s>>>8,e[l+2]=e[l]^255,e[l+3]=e[l+1]^255;for(var c=0;c<s;++c)e[l+c+4]=r[c];return(l+4+s)*8},wy=function(e,t,r,s,l,c,h,a,d,_,p){Nc(t,p++,r),++l[256];for(var E=Dm(l,15),w=E[0],x=E[1],k=Dm(c,15),Q=k[0],R=k[1],M=_y(w),O=M[0],G=M[1],K=_y(Q),Z=K[0],$=K[1],he=new Jo(19),fe=0;fe<O.length;++fe)he[O[fe]&31]++;for(var fe=0;fe<Z.length;++fe)he[Z[fe]&31]++;for(var _e=Dm(he,7),ue=_e[0],ee=_e[1],se=19;se>4&&!ue[dg[se-1]];--se);var Be=_+5<<3,me=Mf(l,Cu)+Mf(c,td)+h,Pe=Mf(l,w)+Mf(c,Q)+h+14+3*se+Mf(he,ue)+(2*he[16]+3*he[17]+7*he[18]);if(Be<=me&&Be<=Pe)return hp(t,p,e.subarray(d,d+_));var ge,Qe,Te,tt;if(Nc(t,p,1+(Pe<me)),p+=2,Pe<me){ge=pc(w,x,0),Qe=w,Te=pc(Q,R,0),tt=Q;var Oe=pc(ue,ee,0);Nc(t,p,G-257),Nc(t,p+5,$-1),Nc(t,p+10,se-4),p+=14;for(var fe=0;fe<se;++fe)Nc(t,p+3*fe,ue[dg[fe]]);p+=3*se;for(var Mt=[O,Z],ne=0;ne<2;++ne)for(var Se=Mt[ne],fe=0;fe<Se.length;++fe){var ke=Se[fe]&31;Nc(t,p,Oe[ke]),p+=ue[ke],ke>15&&(Nc(t,p,Se[fe]>>>5&127),p+=Se[fe]>>>12)}}else ge=BF,Qe=Cu,Te=EF,tt=td;for(var fe=0;fe<a;++fe)if(s[fe]>255){var ke=s[fe]>>>18&31;Pf(t,p,ge[ke+257]),p+=Qe[ke+257],ke>7&&(Nc(t,p,s[fe]>>>23&31),p+=Hp[ke]);var Ke=s[fe]&31;Pf(t,p,Te[Ke]),p+=tt[Ke],Ke>3&&(Pf(t,p,s[fe]>>>5&8191),p+=zp[Ke])}else Pf(t,p,ge[s[fe]]),p+=Qe[s[fe]];return Pf(t,p,ge[256]),p+Qe[256]},IF=new ed([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),TF=new Zo(0),UF=function(e,t,r,s,l,c){var h=e.length,a=new Zo(s+h+5*(1+Math.floor(h/7e3))+l),d=a.subarray(s,a.length-l),_=0;if(!t||h<8)for(var p=0;p<=h;p+=65535){var E=p+65535;E<h?_=hp(d,_,e.subarray(p,E)):(d[p]=c,_=hp(d,_,e.subarray(p,h)))}else{for(var w=IF[t-1],x=w>>>13,k=w&8191,Q=(1<<r)-1,R=new Jo(32768),M=new Jo(Q+1),O=Math.ceil(r/3),G=2*O,K=function(dr){return(e[dr]^e[dr+1]<<O^e[dr+2]<<G)&Q},Z=new ed(25e3),$=new Jo(288),he=new Jo(32),fe=0,_e=0,p=0,ue=0,ee=0,se=0;p<h;++p){var Be=K(p),me=p&32767,Pe=M[Be];if(R[me]=Pe,M[Be]=me,ee<=p){var ge=h-p;if((fe>7e3||ue>24576)&&ge>423){_=wy(e,d,0,Z,$,he,_e,ue,se,p-se,_),ue=fe=_e=0,se=p;for(var Qe=0;Qe<286;++Qe)$[Qe]=0;for(var Qe=0;Qe<30;++Qe)he[Qe]=0}var Te=2,tt=0,Oe=k,Mt=me-Pe&32767;if(ge>2&&Be==K(p-Mt))for(var ne=Math.min(x,ge)-1,Se=Math.min(32767,p),ke=Math.min(258,ge);Mt<=Se&&--Oe&&me!=Pe;){if(e[p+Te]==e[p+Te-Mt]){for(var Ke=0;Ke<ke&&e[p+Ke]==e[p+Ke-Mt];++Ke);if(Ke>Te){if(Te=Ke,tt=Mt,Ke>ne)break;for(var at=Math.min(Mt,Ke-2),dt=0,Qe=0;Qe<at;++Qe){var Bt=p-Mt+Qe+32768&32767,Ge=R[Bt],rt=Bt-Ge+32768&32767;rt>dt&&(dt=rt,Pe=Bt)}}}me=Pe,Pe=R[me],Mt+=me-Pe+32768&32767}if(tt){Z[ue++]=268435456|pg[Te]<<18|vy[tt];var Ut=pg[Te]&31,ht=vy[tt]&31;_e+=Hp[Ut]+zp[ht],++$[257+Ut],++he[ht],ee=p+Te,++fe}else Z[ue++]=e[p],++$[e[p]]}}_=wy(e,d,c,Z,$,he,_e,ue,se,p-se,_),c||(_=hp(d,_,TF))}return a_(a,0,s+Xg(_)+l)},LF=function(){var e=1,t=0;return{p:function(r){for(var s=e,l=t,c=r.length,h=0;h!=c;){for(var a=Math.min(h+5552,c);h<a;++h)s+=r[h],l+=s;s%=65521,l%=65521}e=s,t=l},d:function(){return(e>>>8<<16|(t&255)<<8|t>>>8)+((e&255)<<23)*2}}},QF=function(e,t,r,s,l){return UF(e,t.level==null?6:t.level,t.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):12+t.mem,r,s,!l)},kF=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},PF=function(e,t){var r=t.level,s=r==0?0:r<6?1:r==9?3:2;e[0]=120,e[1]=s<<6|(s?32-2*s:1)},MF=function(e){if((e[0]&15)!=8||e[0]>>>4>7||(e[0]<<8|e[1])%31)throw"invalid zlib data";if(e[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function yg(e,t){t===void 0&&(t={});var r=LF();r.p(e);var s=QF(e,t,2,4);return PF(s,t),kF(s,s.length-4,r.d()),s}function DF(e,t){return SF((MF(e),e.subarray(2,-4)),t)}var Hn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Nm(){Hn.console&&typeof Hn.console.log=="function"&&Hn.console.log.apply(Hn.console,arguments)}var cs={log:Nm,warn:function(e){Hn.console&&(typeof Hn.console.warn=="function"?Hn.console.warn.apply(Hn.console,arguments):Nm.call(null,arguments))},error:function(e){Hn.console&&(typeof Hn.console.error=="function"?Hn.console.error.apply(Hn.console,arguments):Nm(e))}};function jm(e,t,r){var s=new XMLHttpRequest;s.open("GET",e),s.responseType="blob",s.onload=function(){Hu(s.response,t,r)},s.onerror=function(){cs.error("could not download file")},s.send()}function by(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function rp(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var Hf,vg,Hu=Hn.saveAs||((typeof window>"u"?"undefined":qi(window))!=="object"||window!==Hn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var s=Hn.URL||Hn.webkitURL,l=document.createElement("a");t=t||e.name||"download",l.download=t,l.rel="noopener",typeof e=="string"?(l.href=e,l.origin!==location.origin?by(l.href)?jm(e,t,r):rp(l,l.target="_blank"):rp(l)):(l.href=s.createObjectURL(e),setTimeout(function(){s.revokeObjectURL(l.href)},4e4),setTimeout(function(){rp(l)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(by(e))jm(e,t,r);else{var s=document.createElement("a");s.href=e,s.target="_blank",setTimeout(function(){rp(s)})}else navigator.msSaveOrOpenBlob(function(l,c){return c===void 0?c={autoBom:!1}:qi(c)!=="object"&&(cs.warn("Deprecated: Expected third argument to be a object"),c={autoBom:!c}),c.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(l.type)?new Blob([String.fromCharCode(65279),l],{type:l.type}):l}(e,r),t)}:function(e,t,r,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),typeof e=="string")return jm(e,t,r);var l=e.type==="application/octet-stream",c=/constructor/i.test(Hn.HTMLElement)||Hn.safari,h=/CriOS\/[\d]+/.test(navigator.userAgent);if((h||l&&c)&&(typeof FileReader>"u"?"undefined":qi(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var p=a.result;p=h?p:p.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=p:location=p,s=null},a.readAsDataURL(e)}else{var d=Hn.URL||Hn.webkitURL,_=d.createObjectURL(e);s?s.location=_:location.href=_,s=null,setTimeout(function(){d.revokeObjectURL(_)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function o_(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],s=0;s<r.length;s++){var l=r[s].re,c=r[s].process,h=l.exec(e);h&&(t=c(h),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),d=this.g.toString(16),_=this.b.toString(16);return a.length==1&&(a="0"+a),d.length==1&&(d="0"+d),_.length==1&&(_="0"+_),"#"+a+d+_}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Rm(e,t){var r=e[0],s=e[1],l=e[2],c=e[3];r=So(r,s,l,c,t[0],7,-680876936),c=So(c,r,s,l,t[1],12,-389564586),l=So(l,c,r,s,t[2],17,606105819),s=So(s,l,c,r,t[3],22,-1044525330),r=So(r,s,l,c,t[4],7,-176418897),c=So(c,r,s,l,t[5],12,1200080426),l=So(l,c,r,s,t[6],17,-1473231341),s=So(s,l,c,r,t[7],22,-45705983),r=So(r,s,l,c,t[8],7,1770035416),c=So(c,r,s,l,t[9],12,-1958414417),l=So(l,c,r,s,t[10],17,-42063),s=So(s,l,c,r,t[11],22,-1990404162),r=So(r,s,l,c,t[12],7,1804603682),c=So(c,r,s,l,t[13],12,-40341101),l=So(l,c,r,s,t[14],17,-1502002290),r=Io(r,s=So(s,l,c,r,t[15],22,1236535329),l,c,t[1],5,-165796510),c=Io(c,r,s,l,t[6],9,-1069501632),l=Io(l,c,r,s,t[11],14,643717713),s=Io(s,l,c,r,t[0],20,-373897302),r=Io(r,s,l,c,t[5],5,-701558691),c=Io(c,r,s,l,t[10],9,38016083),l=Io(l,c,r,s,t[15],14,-660478335),s=Io(s,l,c,r,t[4],20,-405537848),r=Io(r,s,l,c,t[9],5,568446438),c=Io(c,r,s,l,t[14],9,-1019803690),l=Io(l,c,r,s,t[3],14,-187363961),s=Io(s,l,c,r,t[8],20,1163531501),r=Io(r,s,l,c,t[13],5,-1444681467),c=Io(c,r,s,l,t[2],9,-51403784),l=Io(l,c,r,s,t[7],14,1735328473),r=To(r,s=Io(s,l,c,r,t[12],20,-1926607734),l,c,t[5],4,-378558),c=To(c,r,s,l,t[8],11,-2022574463),l=To(l,c,r,s,t[11],16,1839030562),s=To(s,l,c,r,t[14],23,-35309556),r=To(r,s,l,c,t[1],4,-1530992060),c=To(c,r,s,l,t[4],11,1272893353),l=To(l,c,r,s,t[7],16,-155497632),s=To(s,l,c,r,t[10],23,-1094730640),r=To(r,s,l,c,t[13],4,681279174),c=To(c,r,s,l,t[0],11,-358537222),l=To(l,c,r,s,t[3],16,-722521979),s=To(s,l,c,r,t[6],23,76029189),r=To(r,s,l,c,t[9],4,-640364487),c=To(c,r,s,l,t[12],11,-421815835),l=To(l,c,r,s,t[15],16,530742520),r=Uo(r,s=To(s,l,c,r,t[2],23,-995338651),l,c,t[0],6,-198630844),c=Uo(c,r,s,l,t[7],10,1126891415),l=Uo(l,c,r,s,t[14],15,-1416354905),s=Uo(s,l,c,r,t[5],21,-57434055),r=Uo(r,s,l,c,t[12],6,1700485571),c=Uo(c,r,s,l,t[3],10,-1894986606),l=Uo(l,c,r,s,t[10],15,-1051523),s=Uo(s,l,c,r,t[1],21,-2054922799),r=Uo(r,s,l,c,t[8],6,1873313359),c=Uo(c,r,s,l,t[15],10,-30611744),l=Uo(l,c,r,s,t[6],15,-1560198380),s=Uo(s,l,c,r,t[13],21,1309151649),r=Uo(r,s,l,c,t[4],6,-145523070),c=Uo(c,r,s,l,t[11],10,-1120210379),l=Uo(l,c,r,s,t[2],15,718787259),s=Uo(s,l,c,r,t[9],21,-343485551),e[0]=_u(r,e[0]),e[1]=_u(s,e[1]),e[2]=_u(l,e[2]),e[3]=_u(c,e[3])}function Vp(e,t,r,s,l,c){return t=_u(_u(t,e),_u(s,c)),_u(t<<l|t>>>32-l,r)}function So(e,t,r,s,l,c,h){return Vp(t&r|~t&s,e,t,l,c,h)}function Io(e,t,r,s,l,c,h){return Vp(t&s|r&~s,e,t,l,c,h)}function To(e,t,r,s,l,c,h){return Vp(t^r^s,e,t,l,c,h)}function Uo(e,t,r,s,l,c,h){return Vp(r^(t|~s),e,t,l,c,h)}function A_(e){var t,r=e.length,s=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)Rm(s,NF(e.substring(t-64,t)));e=e.substring(t-64);var l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)l[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(l[t>>2]|=128<<(t%4<<3),t>55)for(Rm(s,l),t=0;t<16;t++)l[t]=0;return l[14]=8*r,Rm(s,l),s}function NF(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}Hf=Hn.atob.bind(Hn),vg=Hn.btoa.bind(Hn);var xy="0123456789abcdef".split("");function jF(e){for(var t="",r=0;r<4;r++)t+=xy[e>>8*r+4&15]+xy[e>>8*r&15];return t}function RF(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function _g(e){return A_(e).map(RF).join("")}var OF=function(e){for(var t=0;t<e.length;t++)e[t]=jF(e[t]);return e.join("")}(A_("hello"))!="5d41402abc4b2a76b9719d911017c592";function _u(e,t){if(OF){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function wg(e,t){var r,s,l,c;if(e!==r){for(var h=(l=e,c=1+(256/e.length>>0),new Array(c+1).join(l)),a=[],d=0;d<256;d++)a[d]=d;var _=0;for(d=0;d<256;d++){var p=a[d];_=(_+p+h.charCodeAt(d))%256,a[d]=a[_],a[_]=p}r=e,s=a}else a=s;var E=t.length,w=0,x=0,k="";for(d=0;d<E;d++)x=(x+(p=a[w=(w+1)%256]))%256,a[w]=a[x],a[x]=p,h=a[(a[w]+a[x])%256],k+=String.fromCharCode(t.charCodeAt(d)^h);return k}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var By={print:4,modify:8,copy:16,"annot-forms":32};function jh(e,t,r,s){this.v=1,this.r=2;var l=192;e.forEach(function(a){if(By.perm!==void 0)throw new Error("Invalid permission: "+a);l+=By[a]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var c=(t+this.padding).substr(0,32),h=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(c,h),this.P=-(1+(255^l)),this.encryptionKey=_g(c+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(s)).substr(0,5),this.U=wg(this.encryptionKey,this.padding)}function Rh(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,s=0;s<r;s++){var l=e.charCodeAt(s);l<33||l===35||l===37||l===40||l===41||l===47||l===60||l===62||l===91||l===93||l===123||l===125||l>126?t+="#"+("0"+l.toString(16)).slice(-2):t+=e[s]}return t}function Cy(e){if(qi(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,s,l){if(l=l||!1,typeof r!="string"||typeof s!="function"||typeof l!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var c=Math.random().toString(35);return t[r][c]=[s,!!l],c},this.unsubscribe=function(r){for(var s in t)if(t[s][r])return delete t[s][r],Object.keys(t[s]).length===0&&delete t[s],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var s=Array.prototype.slice.call(arguments,1),l=[];for(var c in t[r]){var h=t[r][c];try{h[0].apply(e,s)}catch(a){Hn.console&&cs.error("jsPDF PubSub Error",a.message,a)}h[1]&&l.push(c)}l.length&&l.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function rd(e){if(!(this instanceof rd))return new rd(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function l_(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function vu(e,t,r,s,l){if(!(this instanceof vu))return new vu(e,t,r,s,l);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,l_.call(this,s,l)}function Gu(e,t,r,s,l){if(!(this instanceof Gu))return new Gu(e,t,r,s,l);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,l_.call(this,s,l)}function Nn(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",s=arguments[1],l=arguments[2],c=arguments[3],h=[],a=1,d=16,_="S",p=null;qi(e=e||{})==="object"&&(r=e.orientation,s=e.unit||s,l=e.format||l,c=e.compress||e.compressPdf||c,(p=e.encryption||null)!==null&&(p.userPassword=p.userPassword||"",p.ownerPassword=p.ownerPassword||"",p.userPermissions=p.userPermissions||[]),a=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(d=e.floatPrecision),_=e.defaultPathOperation||"S"),h=e.filters||(c===!0?["FlateEncode"]:h),s=s||"mm",r=(""+(r||"P")).toLowerCase();var E=e.putOnlyUsedFonts||!1,w={},x={internal:{},__private__:{}};x.__private__.PubSub=Cy;var k="1.3",Q=x.__private__.getPdfVersion=function(){return k};x.__private__.setPdfVersion=function(N){k=N};var R={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};x.__private__.getPageFormats=function(){return R};var M=x.__private__.getPageFormat=function(N){return R[N]};l=l||"a4";var O={COMPAT:"compat",ADVANCED:"advanced"},G=O.COMPAT;function K(){this.saveGraphicsState(),ze(new tn(Ct,0,0,-Ct,0,ba()*Ct).toString()+" cm"),this.setFontSize(this.getFontSize()/Ct),_="n",G=O.ADVANCED}function Z(){this.restoreGraphicsState(),_="S",G=O.COMPAT}var $=x.__private__.combineFontStyleAndFontWeight=function(N,oe){if(N=="bold"&&oe=="normal"||N=="bold"&&oe==400||N=="normal"&&oe=="italic"||N=="bold"&&oe=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return oe&&(N=oe==400||oe==="normal"?N==="italic"?"italic":"normal":oe!=700&&oe!=="bold"||N!=="normal"?(oe==700?"bold":oe)+""+N:"bold"),N};x.advancedAPI=function(N){var oe=G===O.COMPAT;return oe&&K.call(this),typeof N!="function"||(N(this),oe&&Z.call(this)),this},x.compatAPI=function(N){var oe=G===O.ADVANCED;return oe&&Z.call(this),typeof N!="function"||(N(this),oe&&K.call(this)),this},x.isAdvancedAPI=function(){return G===O.ADVANCED};var he,fe=function(N){if(G!==O.ADVANCED)throw new Error(N+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},_e=x.roundToPrecision=x.__private__.roundToPrecision=function(N,oe){var De=t||oe;if(isNaN(N)||isNaN(De))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return N.toFixed(De).replace(/0+$/,"")};he=x.hpf=x.__private__.hpf=typeof d=="number"?function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.hpf");return _e(N,d)}:d==="smart"?function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.hpf");return _e(N,N>-1&&N<1?16:5)}:function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.hpf");return _e(N,16)};var ue=x.f2=x.__private__.f2=function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.f2");return _e(N,2)},ee=x.__private__.f3=function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.f3");return _e(N,3)},se=x.scale=x.__private__.scale=function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.scale");return G===O.COMPAT?N*Ct:G===O.ADVANCED?N:void 0},Be=function(N){return G===O.COMPAT?ba()-N:G===O.ADVANCED?N:void 0},me=function(N){return se(Be(N))};x.__private__.setPrecision=x.setPrecision=function(N){typeof parseInt(N,10)=="number"&&(t=parseInt(N,10))};var Pe,ge="00000000000000000000000000000000",Qe=x.__private__.getFileId=function(){return ge},Te=x.__private__.setFileId=function(N){return ge=N!==void 0&&/^[a-fA-F0-9]{32}$/.test(N)?N.toUpperCase():ge.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),p!==null&&(ys=new jh(p.userPermissions,p.userPassword,p.ownerPassword,ge)),ge};x.setFileId=function(N){return Te(N),this},x.getFileId=function(){return Qe()};var tt=x.__private__.convertDateToPDFDate=function(N){var oe=N.getTimezoneOffset(),De=oe<0?"+":"-",et=Math.floor(Math.abs(oe/60)),_t=Math.abs(oe%60),Jt=[De,ke(et),"'",ke(_t),"'"].join("");return["D:",N.getFullYear(),ke(N.getMonth()+1),ke(N.getDate()),ke(N.getHours()),ke(N.getMinutes()),ke(N.getSeconds()),Jt].join("")},Oe=x.__private__.convertPDFDateToDate=function(N){var oe=parseInt(N.substr(2,4),10),De=parseInt(N.substr(6,2),10)-1,et=parseInt(N.substr(8,2),10),_t=parseInt(N.substr(10,2),10),Jt=parseInt(N.substr(12,2),10),_r=parseInt(N.substr(14,2),10);return new Date(oe,De,et,_t,Jt,_r,0)},Mt=x.__private__.setCreationDate=function(N){var oe;if(N===void 0&&(N=new Date),N instanceof Date)oe=tt(N);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(N))throw new Error("Invalid argument passed to jsPDF.setCreationDate");oe=N}return Pe=oe},ne=x.__private__.getCreationDate=function(N){var oe=Pe;return N==="jsDate"&&(oe=Oe(Pe)),oe};x.setCreationDate=function(N){return Mt(N),this},x.getCreationDate=function(N){return ne(N)};var Se,ke=x.__private__.padd2=function(N){return("0"+parseInt(N)).slice(-2)},Ke=x.__private__.padd2Hex=function(N){return("00"+(N=N.toString())).substr(N.length)},at=0,dt=[],Bt=[],Ge=0,rt=[],Ut=[],ht=!1,Nt=Bt,dr=function(){at=0,Ge=0,Bt=[],dt=[],rt=[],Ee=Ue(),Le=Ue()};x.__private__.setCustomOutputDestination=function(N){ht=!0,Nt=N};var Lt=function(N){ht||(Nt=N)};x.__private__.resetCustomOutputDestination=function(){ht=!1,Nt=Bt};var ze=x.__private__.out=function(N){return N=N.toString(),Ge+=N.length+1,Nt.push(N),Nt},gr=x.__private__.write=function(N){return ze(arguments.length===1?N.toString():Array.prototype.join.call(arguments," "))},sr=x.__private__.getArrayBuffer=function(N){for(var oe=N.length,De=new ArrayBuffer(oe),et=new Uint8Array(De);oe--;)et[oe]=N.charCodeAt(oe);return De},Ht=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];x.__private__.getStandardFonts=function(){return Ht};var fr=e.fontSize||16;x.__private__.setFontSize=x.setFontSize=function(N){return fr=G===O.ADVANCED?N/Ct:N,this};var Br,vr=x.__private__.getFontSize=x.getFontSize=function(){return G===O.COMPAT?fr:fr*Ct},Gr=e.R2L||!1;x.__private__.setR2L=x.setR2L=function(N){return Gr=N,this},x.__private__.getR2L=x.getR2L=function(){return Gr};var rr,xr=x.__private__.setZoomMode=function(N){var oe=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(N))Br=N;else if(isNaN(N)){if(oe.indexOf(N)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+N+'" is not recognized.');Br=N}else Br=parseInt(N,10)};x.__private__.getZoomMode=function(){return Br};var Zr,pn=x.__private__.setPageMode=function(N){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(N)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+N+'" is not recognized.');rr=N};x.__private__.getPageMode=function(){return rr};var vt=x.__private__.setLayoutMode=function(N){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(N)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+N+'" is not recognized.');Zr=N};x.__private__.getLayoutMode=function(){return Zr},x.__private__.setDisplayMode=x.setDisplayMode=function(N,oe,De){return xr(N),vt(oe),pn(De),this};var nt={title:"",subject:"",author:"",keywords:"",creator:""};x.__private__.getDocumentProperty=function(N){if(Object.keys(nt).indexOf(N)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return nt[N]},x.__private__.getDocumentProperties=function(){return nt},x.__private__.setDocumentProperties=x.setProperties=x.setDocumentProperties=function(N){for(var oe in nt)nt.hasOwnProperty(oe)&&N[oe]&&(nt[oe]=N[oe]);return this},x.__private__.setDocumentProperty=function(N,oe){if(Object.keys(nt).indexOf(N)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return nt[N]=oe};var bt,Ct,jt,er,Vr,Fr={},un={},lr=[],Er={},An={},wn={},_i={},br=null,Cr=0,cr=[],Kr=new Cy(x),hn=e.hotfixes||[],xn={},Sn={},ji=[],tn=function N(oe,De,et,_t,Jt,_r){if(!(this instanceof N))return new N(oe,De,et,_t,Jt,_r);isNaN(oe)&&(oe=1),isNaN(De)&&(De=0),isNaN(et)&&(et=0),isNaN(_t)&&(_t=1),isNaN(Jt)&&(Jt=0),isNaN(_r)&&(_r=0),this._matrix=[oe,De,et,_t,Jt,_r]};Object.defineProperty(tn.prototype,"sx",{get:function(){return this._matrix[0]},set:function(N){this._matrix[0]=N}}),Object.defineProperty(tn.prototype,"shy",{get:function(){return this._matrix[1]},set:function(N){this._matrix[1]=N}}),Object.defineProperty(tn.prototype,"shx",{get:function(){return this._matrix[2]},set:function(N){this._matrix[2]=N}}),Object.defineProperty(tn.prototype,"sy",{get:function(){return this._matrix[3]},set:function(N){this._matrix[3]=N}}),Object.defineProperty(tn.prototype,"tx",{get:function(){return this._matrix[4]},set:function(N){this._matrix[4]=N}}),Object.defineProperty(tn.prototype,"ty",{get:function(){return this._matrix[5]},set:function(N){this._matrix[5]=N}}),Object.defineProperty(tn.prototype,"a",{get:function(){return this._matrix[0]},set:function(N){this._matrix[0]=N}}),Object.defineProperty(tn.prototype,"b",{get:function(){return this._matrix[1]},set:function(N){this._matrix[1]=N}}),Object.defineProperty(tn.prototype,"c",{get:function(){return this._matrix[2]},set:function(N){this._matrix[2]=N}}),Object.defineProperty(tn.prototype,"d",{get:function(){return this._matrix[3]},set:function(N){this._matrix[3]=N}}),Object.defineProperty(tn.prototype,"e",{get:function(){return this._matrix[4]},set:function(N){this._matrix[4]=N}}),Object.defineProperty(tn.prototype,"f",{get:function(){return this._matrix[5]},set:function(N){this._matrix[5]=N}}),Object.defineProperty(tn.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(tn.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(tn.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(tn.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),tn.prototype.join=function(N){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(he).join(N)},tn.prototype.multiply=function(N){var oe=N.sx*this.sx+N.shy*this.shx,De=N.sx*this.shy+N.shy*this.sy,et=N.shx*this.sx+N.sy*this.shx,_t=N.shx*this.shy+N.sy*this.sy,Jt=N.tx*this.sx+N.ty*this.shx+this.tx,_r=N.tx*this.shy+N.ty*this.sy+this.ty;return new tn(oe,De,et,_t,Jt,_r)},tn.prototype.decompose=function(){var N=this.sx,oe=this.shy,De=this.shx,et=this.sy,_t=this.tx,Jt=this.ty,_r=Math.sqrt(N*N+oe*oe),en=(N/=_r)*De+(oe/=_r)*et;De-=N*en,et-=oe*en;var En=Math.sqrt(De*De+et*et);return en/=En,N*(et/=En)<oe*(De/=En)&&(N=-N,oe=-oe,en=-en,_r=-_r),{scale:new tn(_r,0,0,En,0,0),translate:new tn(1,0,0,1,_t,Jt),rotate:new tn(N,oe,-oe,N,0,0),skew:new tn(1,0,en,1,0,0)}},tn.prototype.toString=function(N){return this.join(" ")},tn.prototype.inversed=function(){var N=this.sx,oe=this.shy,De=this.shx,et=this.sy,_t=this.tx,Jt=this.ty,_r=1/(N*et-oe*De),en=et*_r,En=-oe*_r,Dn=-De*_r,Kn=N*_r;return new tn(en,En,Dn,Kn,-en*_t-Dn*Jt,-En*_t-Kn*Jt)},tn.prototype.applyToPoint=function(N){var oe=N.x*this.sx+N.y*this.shx+this.tx,De=N.x*this.shy+N.y*this.sy+this.ty;return new lA(oe,De)},tn.prototype.applyToRectangle=function(N){var oe=this.applyToPoint(N),De=this.applyToPoint(new lA(N.x+N.w,N.y+N.h));return new UA(oe.x,oe.y,De.x-oe.x,De.y-oe.y)},tn.prototype.clone=function(){var N=this.sx,oe=this.shy,De=this.shx,et=this.sy,_t=this.tx,Jt=this.ty;return new tn(N,oe,De,et,_t,Jt)},x.Matrix=tn;var Wi=x.matrixMult=function(N,oe){return oe.multiply(N)},hs=new tn(1,0,0,1,0,0);x.unitMatrix=x.identityMatrix=hs;var Ln=function(N,oe){if(!An[N]){var De=(oe instanceof vu?"Sh":"P")+(Object.keys(Er).length+1).toString(10);oe.id=De,An[N]=De,Er[De]=oe,Kr.publish("addPattern",oe)}};x.ShadingPattern=vu,x.TilingPattern=Gu,x.addShadingPattern=function(N,oe){return fe("addShadingPattern()"),Ln(N,oe),this},x.beginTilingPattern=function(N){fe("beginTilingPattern()"),gl(N.boundingBox[0],N.boundingBox[1],N.boundingBox[2]-N.boundingBox[0],N.boundingBox[3]-N.boundingBox[1],N.matrix)},x.endTilingPattern=function(N,oe){fe("endTilingPattern()"),oe.stream=Ut[Se].join(`
`),Ln(N,oe),Kr.publish("endTilingPattern",oe),ji.pop().restore()};var nn=x.__private__.newObject=function(){var N=Ue();return Y(N,!0),N},Ue=x.__private__.newObjectDeferred=function(){return at++,dt[at]=function(){return Ge},at},Y=function(N,oe){return oe=typeof oe=="boolean"&&oe,dt[N]=Ge,oe&&ze(N+" 0 obj"),N},Ae=x.__private__.newAdditionalObject=function(){var N={objId:Ue(),content:""};return rt.push(N),N},Ee=Ue(),Le=Ue(),Xe=x.__private__.decodeColorString=function(N){var oe=N.split(" ");if(oe.length!==2||oe[1]!=="g"&&oe[1]!=="G")oe.length===5&&(oe[4]==="k"||oe[4]==="K")&&(oe=[(1-oe[0])*(1-oe[3]),(1-oe[1])*(1-oe[3]),(1-oe[2])*(1-oe[3]),"r"]);else{var De=parseFloat(oe[0]);oe=[De,De,De,"r"]}for(var et="#",_t=0;_t<3;_t++)et+=("0"+Math.floor(255*parseFloat(oe[_t])).toString(16)).slice(-2);return et},lt=x.__private__.encodeColorString=function(N){var oe;typeof N=="string"&&(N={ch1:N});var De=N.ch1,et=N.ch2,_t=N.ch3,Jt=N.ch4,_r=N.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof De=="string"&&De.charAt(0)!=="#"){var en=new o_(De);if(en.ok)De=en.toHex();else if(!/^\d*\.?\d*$/.test(De))throw new Error('Invalid color "'+De+'" passed to jsPDF.encodeColorString.')}if(typeof De=="string"&&/^#[0-9A-Fa-f]{3}$/.test(De)&&(De="#"+De[1]+De[1]+De[2]+De[2]+De[3]+De[3]),typeof De=="string"&&/^#[0-9A-Fa-f]{6}$/.test(De)){var En=parseInt(De.substr(1),16);De=En>>16&255,et=En>>8&255,_t=255&En}if(et===void 0||Jt===void 0&&De===et&&et===_t)if(typeof De=="string")oe=De+" "+_r[0];else switch(N.precision){case 2:oe=ue(De/255)+" "+_r[0];break;case 3:default:oe=ee(De/255)+" "+_r[0]}else if(Jt===void 0||qi(Jt)==="object"){if(Jt&&!isNaN(Jt.a)&&Jt.a===0)return oe=["1.","1.","1.",_r[1]].join(" ");if(typeof De=="string")oe=[De,et,_t,_r[1]].join(" ");else switch(N.precision){case 2:oe=[ue(De/255),ue(et/255),ue(_t/255),_r[1]].join(" ");break;default:case 3:oe=[ee(De/255),ee(et/255),ee(_t/255),_r[1]].join(" ")}}else if(typeof De=="string")oe=[De,et,_t,Jt,_r[2]].join(" ");else switch(N.precision){case 2:oe=[ue(De),ue(et),ue(_t),ue(Jt),_r[2]].join(" ");break;case 3:default:oe=[ee(De),ee(et),ee(_t),ee(Jt),_r[2]].join(" ")}return oe},Ye=x.__private__.getFilters=function(){return h},qe=x.__private__.putStream=function(N){var oe=(N=N||{}).data||"",De=N.filters||Ye(),et=N.alreadyAppliedFilters||[],_t=N.addLength1||!1,Jt=oe.length,_r=N.objectId,en=function(Es){return Es};if(p!==null&&_r===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");p!==null&&(en=ys.encryptor(_r,0));var En={};De===!0&&(De=["FlateEncode"]);var Dn=N.additionalKeyValues||[],Kn=(En=Nn.API.processDataByFilters!==void 0?Nn.API.processDataByFilters(oe,De):{data:oe,reverseChain:[]}).reverseChain+(Array.isArray(et)?et.join(" "):et.toString());if(En.data.length!==0&&(Dn.push({key:"Length",value:En.data.length}),_t===!0&&Dn.push({key:"Length1",value:Jt})),Kn.length!=0)if(Kn.split("/").length-1==1)Dn.push({key:"Filter",value:Kn});else{Dn.push({key:"Filter",value:"["+Kn+"]"});for(var Wn=0;Wn<Dn.length;Wn+=1)if(Dn[Wn].key==="DecodeParms"){for(var pi=[],mi=0;mi<En.reverseChain.split("/").length-1;mi+=1)pi.push("null");pi.push(Dn[Wn].value),Dn[Wn].value="["+pi.join(" ")+"]"}}ze("<<");for(var Tn=0;Tn<Dn.length;Tn++)ze("/"+Dn[Tn].key+" "+Dn[Tn].value);ze(">>"),En.data.length!==0&&(ze("stream"),ze(en(En.data)),ze("endstream"))},ut=x.__private__.putPage=function(N){var oe=N.number,De=N.data,et=N.objId,_t=N.contentsObjId;Y(et,!0),ze("<</Type /Page"),ze("/Parent "+N.rootDictionaryObjId+" 0 R"),ze("/Resources "+N.resourceDictionaryObjId+" 0 R"),ze("/MediaBox ["+parseFloat(he(N.mediaBox.bottomLeftX))+" "+parseFloat(he(N.mediaBox.bottomLeftY))+" "+he(N.mediaBox.topRightX)+" "+he(N.mediaBox.topRightY)+"]"),N.cropBox!==null&&ze("/CropBox ["+he(N.cropBox.bottomLeftX)+" "+he(N.cropBox.bottomLeftY)+" "+he(N.cropBox.topRightX)+" "+he(N.cropBox.topRightY)+"]"),N.bleedBox!==null&&ze("/BleedBox ["+he(N.bleedBox.bottomLeftX)+" "+he(N.bleedBox.bottomLeftY)+" "+he(N.bleedBox.topRightX)+" "+he(N.bleedBox.topRightY)+"]"),N.trimBox!==null&&ze("/TrimBox ["+he(N.trimBox.bottomLeftX)+" "+he(N.trimBox.bottomLeftY)+" "+he(N.trimBox.topRightX)+" "+he(N.trimBox.topRightY)+"]"),N.artBox!==null&&ze("/ArtBox ["+he(N.artBox.bottomLeftX)+" "+he(N.artBox.bottomLeftY)+" "+he(N.artBox.topRightX)+" "+he(N.artBox.topRightY)+"]"),typeof N.userUnit=="number"&&N.userUnit!==1&&ze("/UserUnit "+N.userUnit),Kr.publish("putPage",{objId:et,pageContext:cr[oe],pageNumber:oe,page:De}),ze("/Contents "+_t+" 0 R"),ze(">>"),ze("endobj");var Jt=De.join(`
`);return G===O.ADVANCED&&(Jt+=`
Q`),Y(_t,!0),qe({data:Jt,filters:Ye(),objectId:_t}),ze("endobj"),et},Ot=x.__private__.putPages=function(){var N,oe,De=[];for(N=1;N<=Cr;N++)cr[N].objId=Ue(),cr[N].contentsObjId=Ue();for(N=1;N<=Cr;N++)De.push(ut({number:N,data:Ut[N],objId:cr[N].objId,contentsObjId:cr[N].contentsObjId,mediaBox:cr[N].mediaBox,cropBox:cr[N].cropBox,bleedBox:cr[N].bleedBox,trimBox:cr[N].trimBox,artBox:cr[N].artBox,userUnit:cr[N].userUnit,rootDictionaryObjId:Ee,resourceDictionaryObjId:Le}));Y(Ee,!0),ze("<</Type /Pages");var et="/Kids [";for(oe=0;oe<Cr;oe++)et+=De[oe]+" 0 R ";ze(et+"]"),ze("/Count "+Cr),ze(">>"),ze("endobj"),Kr.publish("postPutPages")},nr=function(N){Kr.publish("putFont",{font:N,out:ze,newObject:nn,putStream:qe}),N.isAlreadyPutted!==!0&&(N.objectNumber=nn(),ze("<<"),ze("/Type /Font"),ze("/BaseFont /"+Rh(N.postScriptName)),ze("/Subtype /Type1"),typeof N.encoding=="string"&&ze("/Encoding /"+N.encoding),ze("/FirstChar 32"),ze("/LastChar 255"),ze(">>"),ze("endobj"))},zt=function(){for(var N in Fr)Fr.hasOwnProperty(N)&&(E===!1||E===!0&&w.hasOwnProperty(N))&&nr(Fr[N])},jr=function(N){N.objectNumber=nn();var oe=[];oe.push({key:"Type",value:"/XObject"}),oe.push({key:"Subtype",value:"/Form"}),oe.push({key:"BBox",value:"["+[he(N.x),he(N.y),he(N.x+N.width),he(N.y+N.height)].join(" ")+"]"}),oe.push({key:"Matrix",value:"["+N.matrix.toString()+"]"});var De=N.pages[1].join(`
`);qe({data:De,additionalKeyValues:oe,objectId:N.objectNumber}),ze("endobj")},Hr=function(){for(var N in xn)xn.hasOwnProperty(N)&&jr(xn[N])},Tr=function(N,oe){var De,et=[],_t=1/(oe-1);for(De=0;De<1;De+=_t)et.push(De);if(et.push(1),N[0].offset!=0){var Jt={offset:0,color:N[0].color};N.unshift(Jt)}if(N[N.length-1].offset!=1){var _r={offset:1,color:N[N.length-1].color};N.push(_r)}for(var en="",En=0,Dn=0;Dn<et.length;Dn++){for(De=et[Dn];De>N[En+1].offset;)En++;var Kn=N[En].offset,Wn=(De-Kn)/(N[En+1].offset-Kn),pi=N[En].color,mi=N[En+1].color;en+=Ke(Math.round((1-Wn)*pi[0]+Wn*mi[0]).toString(16))+Ke(Math.round((1-Wn)*pi[1]+Wn*mi[1]).toString(16))+Ke(Math.round((1-Wn)*pi[2]+Wn*mi[2]).toString(16))}return en.trim()},ln=function(N,oe){oe||(oe=21);var De=nn(),et=Tr(N.colors,oe),_t=[];_t.push({key:"FunctionType",value:"0"}),_t.push({key:"Domain",value:"[0.0 1.0]"}),_t.push({key:"Size",value:"["+oe+"]"}),_t.push({key:"BitsPerSample",value:"8"}),_t.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),_t.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),qe({data:et,additionalKeyValues:_t,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:De}),ze("endobj"),N.objectNumber=nn(),ze("<< /ShadingType "+N.type),ze("/ColorSpace /DeviceRGB");var Jt="/Coords ["+he(parseFloat(N.coords[0]))+" "+he(parseFloat(N.coords[1]))+" ";N.type===2?Jt+=he(parseFloat(N.coords[2]))+" "+he(parseFloat(N.coords[3])):Jt+=he(parseFloat(N.coords[2]))+" "+he(parseFloat(N.coords[3]))+" "+he(parseFloat(N.coords[4]))+" "+he(parseFloat(N.coords[5])),ze(Jt+="]"),N.matrix&&ze("/Matrix ["+N.matrix.toString()+"]"),ze("/Function "+De+" 0 R"),ze("/Extend [true true]"),ze(">>"),ze("endobj")},dn=function(N,oe){var De=Ue(),et=nn();oe.push({resourcesOid:De,objectOid:et}),N.objectNumber=et;var _t=[];_t.push({key:"Type",value:"/Pattern"}),_t.push({key:"PatternType",value:"1"}),_t.push({key:"PaintType",value:"1"}),_t.push({key:"TilingType",value:"1"}),_t.push({key:"BBox",value:"["+N.boundingBox.map(he).join(" ")+"]"}),_t.push({key:"XStep",value:he(N.xStep)}),_t.push({key:"YStep",value:he(N.yStep)}),_t.push({key:"Resources",value:De+" 0 R"}),N.matrix&&_t.push({key:"Matrix",value:"["+N.matrix.toString()+"]"}),qe({data:N.stream,additionalKeyValues:_t,objectId:N.objectNumber}),ze("endobj")},In=function(N){var oe;for(oe in Er)Er.hasOwnProperty(oe)&&(Er[oe]instanceof vu?ln(Er[oe]):Er[oe]instanceof Gu&&dn(Er[oe],N))},mn=function(N){for(var oe in N.objectNumber=nn(),ze("<<"),N)switch(oe){case"opacity":ze("/ca "+ue(N[oe]));break;case"stroke-opacity":ze("/CA "+ue(N[oe]))}ze(">>"),ze("endobj")},Bn=function(){var N;for(N in wn)wn.hasOwnProperty(N)&&mn(wn[N])},kn=function(){for(var N in ze("/XObject <<"),xn)xn.hasOwnProperty(N)&&xn[N].objectNumber>=0&&ze("/"+N+" "+xn[N].objectNumber+" 0 R");Kr.publish("putXobjectDict"),ze(">>")},Vn=function(){ys.oid=nn(),ze("<<"),ze("/Filter /Standard"),ze("/V "+ys.v),ze("/R "+ys.r),ze("/U <"+ys.toHexString(ys.U)+">"),ze("/O <"+ys.toHexString(ys.O)+">"),ze("/P "+ys.P),ze(">>"),ze("endobj")},Ti=function(){for(var N in ze("/Font <<"),Fr)Fr.hasOwnProperty(N)&&(E===!1||E===!0&&w.hasOwnProperty(N))&&ze("/"+N+" "+Fr[N].objectNumber+" 0 R");ze(">>")},oi=function(){if(Object.keys(Er).length>0){for(var N in ze("/Shading <<"),Er)Er.hasOwnProperty(N)&&Er[N]instanceof vu&&Er[N].objectNumber>=0&&ze("/"+N+" "+Er[N].objectNumber+" 0 R");Kr.publish("putShadingPatternDict"),ze(">>")}},wi=function(N){if(Object.keys(Er).length>0){for(var oe in ze("/Pattern <<"),Er)Er.hasOwnProperty(oe)&&Er[oe]instanceof x.TilingPattern&&Er[oe].objectNumber>=0&&Er[oe].objectNumber<N&&ze("/"+oe+" "+Er[oe].objectNumber+" 0 R");Kr.publish("putTilingPatternDict"),ze(">>")}},Qs=function(){if(Object.keys(wn).length>0){var N;for(N in ze("/ExtGState <<"),wn)wn.hasOwnProperty(N)&&wn[N].objectNumber>=0&&ze("/"+N+" "+wn[N].objectNumber+" 0 R");Kr.publish("putGStateDict"),ze(">>")}},bi=function(N){Y(N.resourcesOid,!0),ze("<<"),ze("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Ti(),oi(),wi(N.objectOid),Qs(),kn(),ze(">>"),ze("endobj")},Yn=function(){var N=[];zt(),Bn(),Hr(),In(N),Kr.publish("putResources"),N.forEach(bi),bi({resourcesOid:Le,objectOid:Number.MAX_SAFE_INTEGER}),Kr.publish("postPutResources")},Za=function(){Kr.publish("putAdditionalObjects");for(var N=0;N<rt.length;N++){var oe=rt[N];Y(oe.objId,!0),ze(oe.content),ze("endobj")}Kr.publish("postPutAdditionalObjects")},Ks=function(N){un[N.fontName]=un[N.fontName]||{},un[N.fontName][N.fontStyle]=N.id},Gs=function(N,oe,De,et,_t){var Jt={id:"F"+(Object.keys(Fr).length+1).toString(10),postScriptName:N,fontName:oe,fontStyle:De,encoding:et,isStandardFont:_t||!1,metadata:{}};return Kr.publish("addFont",{font:Jt,instance:this}),Fr[Jt.id]=Jt,Ks(Jt),Jt.id},ia=function(N){for(var oe=0,De=Ht.length;oe<De;oe++){var et=Gs.call(this,N[oe][0],N[oe][1],N[oe][2],Ht[oe][3],!0);E===!1&&(w[et]=!0);var _t=N[oe][0].split("-");Ks({id:et,fontName:_t[0],fontStyle:_t[1]||""})}Kr.publish("addFonts",{fonts:Fr,dictionary:un})},gs=function(N){return N.foo=function(){try{return N.apply(this,arguments)}catch(et){var oe=et.stack||"";~oe.indexOf(" at ")&&(oe=oe.split(" at ")[1]);var De="Error in function "+oe.split(`
`)[0].split("<")[0]+": "+et.message;if(!Hn.console)throw new Error(De);Hn.console.error(De,et),Hn.alert&&alert(De)}},N.foo.bar=N,N.foo},Ri=function(N,oe){var De,et,_t,Jt,_r,en,En,Dn,Kn;if(_t=(oe=oe||{}).sourceEncoding||"Unicode",_r=oe.outputEncoding,(oe.autoencode||_r)&&Fr[bt].metadata&&Fr[bt].metadata[_t]&&Fr[bt].metadata[_t].encoding&&(Jt=Fr[bt].metadata[_t].encoding,!_r&&Fr[bt].encoding&&(_r=Fr[bt].encoding),!_r&&Jt.codePages&&(_r=Jt.codePages[0]),typeof _r=="string"&&(_r=Jt[_r]),_r)){for(En=!1,en=[],De=0,et=N.length;De<et;De++)(Dn=_r[N.charCodeAt(De)])?en.push(String.fromCharCode(Dn)):en.push(N[De]),en[De].charCodeAt(0)>>8&&(En=!0);N=en.join("")}for(De=N.length;En===void 0&&De!==0;)N.charCodeAt(De-1)>>8&&(En=!0),De--;if(!En)return N;for(en=oe.noBOM?[]:[254,255],De=0,et=N.length;De<et;De++){if((Kn=(Dn=N.charCodeAt(De))>>8)>>8)throw new Error("Character at position "+De+" of string '"+N+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");en.push(Kn),en.push(Dn-(Kn<<8))}return String.fromCharCode.apply(void 0,en)},Xi=x.__private__.pdfEscape=x.pdfEscape=function(N,oe){return Ri(N,oe).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},mo=x.__private__.beginPage=function(N){Ut[++Cr]=[],cr[Cr]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(N[0]),topRightY:Number(N[1])}},sa(Cr),Lt(Ut[Se])},nA=function(N,oe){var De,et,_t;switch(r=oe||r,typeof N=="string"&&(De=M(N.toLowerCase()),Array.isArray(De)&&(et=De[0],_t=De[1])),Array.isArray(N)&&(et=N[0]*Ct,_t=N[1]*Ct),isNaN(et)&&(et=l[0],_t=l[1]),(et>14400||_t>14400)&&(cs.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),et=Math.min(14400,et),_t=Math.min(14400,_t)),l=[et,_t],r.substr(0,1)){case"l":_t>et&&(l=[_t,et]);break;case"p":et>_t&&(l=[_t,et])}mo(l),WA($a),ze(vs),SA!==0&&ze(SA+" J"),IA!==0&&ze(IA+" j"),Kr.publish("addPage",{pageNumber:Cr})},EA=function(N){N>0&&N<=Cr&&(Ut.splice(N,1),cr.splice(N,1),Cr--,Se>Cr&&(Se=Cr),this.setPage(Se))},sa=function(N){N>0&&N<=Cr&&(Se=N)},bs=x.__private__.getNumberOfPages=x.getNumberOfPages=function(){return Ut.length-1},xs=function(N,oe,De){var et,_t=void 0;return De=De||{},N=N!==void 0?N:Fr[bt].fontName,oe=oe!==void 0?oe:Fr[bt].fontStyle,et=N.toLowerCase(),un[et]!==void 0&&un[et][oe]!==void 0?_t=un[et][oe]:un[N]!==void 0&&un[N][oe]!==void 0?_t=un[N][oe]:De.disableWarning===!1&&cs.warn("Unable to look up font label for font '"+N+"', '"+oe+"'. Refer to getFontList() for available fonts."),_t||De.noFallback||(_t=un.times[oe])==null&&(_t=un.times.normal),_t},Ja=x.__private__.putInfo=function(){var N=nn(),oe=function(et){return et};for(var De in p!==null&&(oe=ys.encryptor(N,0)),ze("<<"),ze("/Producer ("+Xi(oe("jsPDF "+Nn.version))+")"),nt)nt.hasOwnProperty(De)&&nt[De]&&ze("/"+De.substr(0,1).toUpperCase()+De.substr(1)+" ("+Xi(oe(nt[De]))+")");ze("/CreationDate ("+Xi(oe(Pe))+")"),ze(">>"),ze("endobj")},aa=x.__private__.putCatalog=function(N){var oe=(N=N||{}).rootDictionaryObjId||Ee;switch(nn(),ze("<<"),ze("/Type /Catalog"),ze("/Pages "+oe+" 0 R"),Br||(Br="fullwidth"),Br){case"fullwidth":ze("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ze("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ze("/OpenAction [3 0 R /Fit]");break;case"original":ze("/OpenAction [3 0 R /XYZ null null 1]");break;default:var De=""+Br;De.substr(De.length-1)==="%"&&(Br=parseInt(Br)/100),typeof Br=="number"&&ze("/OpenAction [3 0 R /XYZ null null "+ue(Br)+"]")}switch(Zr||(Zr="continuous"),Zr){case"continuous":ze("/PageLayout /OneColumn");break;case"single":ze("/PageLayout /SinglePage");break;case"two":case"twoleft":ze("/PageLayout /TwoColumnLeft");break;case"tworight":ze("/PageLayout /TwoColumnRight")}rr&&ze("/PageMode /"+rr),Kr.publish("putCatalog"),ze(">>"),ze("endobj")},Po=x.__private__.putTrailer=function(){ze("trailer"),ze("<<"),ze("/Size "+(at+1)),ze("/Root "+at+" 0 R"),ze("/Info "+(at-1)+" 0 R"),p!==null&&ze("/Encrypt "+ys.oid+" 0 R"),ze("/ID [ <"+ge+"> <"+ge+"> ]"),ze(">>")},ka=x.__private__.putHeader=function(){ze("%PDF-"+k),ze("%ºß¬à")},Mo=x.__private__.putXRef=function(){var N="0000000000";ze("xref"),ze("0 "+(at+1)),ze("0000000000 65535 f ");for(var oe=1;oe<=at;oe++)typeof dt[oe]=="function"?ze((N+dt[oe]()).slice(-10)+" 00000 n "):dt[oe]!==void 0?ze((N+dt[oe]).slice(-10)+" 00000 n "):ze("0000000000 00000 n ")},oa=x.__private__.buildDocument=function(){dr(),Lt(Bt),Kr.publish("buildDocument"),ka(),Ot(),Za(),Yn(),p!==null&&Vn(),Ja(),aa();var N=Ge;return Mo(),Po(),ze("startxref"),ze(""+N),ze("%%EOF"),Lt(Ut[Se]),Bt.join(`
`)},qs=x.__private__.getBlob=function(N){return new Blob([sr(N)],{type:"application/pdf"})},ni=x.output=x.__private__.output=gs(function(N,oe){switch(typeof(oe=oe||{})=="string"?oe={filename:oe}:oe.filename=oe.filename||"generated.pdf",N){case void 0:return oa();case"save":x.save(oe.filename);break;case"arraybuffer":return sr(oa());case"blob":return qs(oa());case"bloburi":case"bloburl":if(Hn.URL!==void 0&&typeof Hn.URL.createObjectURL=="function")return Hn.URL&&Hn.URL.createObjectURL(qs(oa()))||void 0;cs.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var De="",et=oa();try{De=vg(et)}catch{De=vg(unescape(encodeURIComponent(et)))}return"data:application/pdf;filename="+oe.filename+";base64,"+De;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Hn)==="[object Window]"){var _t="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Jt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';oe.pdfObjectUrl&&(_t=oe.pdfObjectUrl,Jt="");var _r='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+_t+'"'+Jt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(oe)+");<\/script></body></html>",en=Hn.open();return en!==null&&en.document.write(_r),en}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Hn)==="[object Window]"){var En='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(oe.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+oe.filename+'" width="500px" height="400px" /></body></html>',Dn=Hn.open();if(Dn!==null){Dn.document.write(En);var Kn=this;Dn.document.documentElement.querySelector("#pdfViewer").onload=function(){Dn.document.title=oe.filename,Dn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Kn.output("bloburl"))}}return Dn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Hn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Wn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",oe)+'"></iframe></body></html>',pi=Hn.open();if(pi!==null&&(pi.document.write(Wn),pi.document.title=oe.filename),pi||typeof safari>"u")return pi;break;case"datauri":case"dataurl":return Hn.document.location.href=this.output("datauristring",oe);default:return null}}),Bs=function(N){return Array.isArray(hn)===!0&&hn.indexOf(N)>-1};switch(s){case"pt":Ct=1;break;case"mm":Ct=72/25.4;break;case"cm":Ct=72/2.54;break;case"in":Ct=72;break;case"px":Ct=Bs("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ct=12;break;case"ex":Ct=6;break;default:if(typeof s!="number")throw new Error("Invalid unit: "+s);Ct=s}var ys=null;Mt(),Te();var iA=function(N){return p!==null?ys.encryptor(N,0):function(oe){return oe}},sA=x.__private__.getPageInfo=x.getPageInfo=function(N){if(isNaN(N)||N%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:cr[N].objId,pageNumber:N,pageContext:cr[N]}},Cn=x.__private__.getPageInfoByObjId=function(N){if(isNaN(N)||N%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var oe in cr)if(cr[oe].objId===N)break;return sA(oe)},qA=x.__private__.getCurrentPageInfo=x.getCurrentPageInfo=function(){return{objId:cr[Se].objId,pageNumber:Se,pageContext:cr[Se]}};x.addPage=function(){return nA.apply(this,arguments),this},x.setPage=function(){return sa.apply(this,arguments),Lt.call(this,Ut[Se]),this},x.insertPage=function(N){return this.addPage(),this.movePage(Se,N),this},x.movePage=function(N,oe){var De,et;if(N>oe){De=Ut[N],et=cr[N];for(var _t=N;_t>oe;_t--)Ut[_t]=Ut[_t-1],cr[_t]=cr[_t-1];Ut[oe]=De,cr[oe]=et,this.setPage(oe)}else if(N<oe){De=Ut[N],et=cr[N];for(var Jt=N;Jt<oe;Jt++)Ut[Jt]=Ut[Jt+1],cr[Jt]=cr[Jt+1];Ut[oe]=De,cr[oe]=et,this.setPage(oe)}return this},x.deletePage=function(){return EA.apply(this,arguments),this},x.__private__.text=x.text=function(N,oe,De,et,_t){var Jt,_r,en,En,Dn,Kn,Wn,pi,mi,Tn=(et=et||{}).scope||this;if(typeof N=="number"&&typeof oe=="number"&&(typeof De=="string"||Array.isArray(De))){var Es=De;De=oe,oe=N,N=Es}if(arguments[3]instanceof tn?(fe("The transform parameter of text() with a Matrix value"),mi=_t):(en=arguments[4],En=arguments[5],qi(Wn=arguments[3])==="object"&&Wn!==null||(typeof en=="string"&&(En=en,en=null),typeof Wn=="string"&&(En=Wn,Wn=null),typeof Wn=="number"&&(en=Wn,Wn=null),et={flags:Wn,angle:en,align:En})),isNaN(oe)||isNaN(De)||N==null)throw new Error("Invalid arguments passed to jsPDF.text");if(N.length===0)return Tn;var ts="",Ws=!1,rs=typeof et.lineHeightFactor=="number"?et.lineHeightFactor:Aa,Si=Tn.internal.scaleFactor;function yl(Ii){return Ii=Ii.split("	").join(Array(et.TabLen||9).join(" ")),Xi(Ii,Wn)}function la(Ii){for(var Ai,Bi=Ii.concat(),Zi=[],Sr=Bi.length;Sr--;)typeof(Ai=Bi.shift())=="string"?Zi.push(Ai):Array.isArray(Ii)&&(Ai.length===1||Ai[1]===void 0&&Ai[2]===void 0)?Zi.push(Ai[0]):Zi.push([Ai[0],Ai[1],Ai[2]]);return Zi}function Pi(Ii,Ai){var Bi;if(typeof Ii=="string")Bi=Ai(Ii)[0];else if(Array.isArray(Ii)){for(var Zi,Sr,ja=Ii.concat(),LA=[],QA=ja.length;QA--;)typeof(Zi=ja.shift())=="string"?LA.push(Ai(Zi)[0]):Array.isArray(Zi)&&typeof Zi[0]=="string"&&(Sr=Ai(Zi[0],Zi[1],Zi[2]),LA.push([Sr[0],Sr[1],Sr[2]]));Bi=LA}return Bi}var xa=!1,Mi=!0;if(typeof N=="string")xa=!0;else if(Array.isArray(N)){var Ma=N.concat();_r=[];for(var Ba,ns=Ma.length;ns--;)(typeof(Ba=Ma.shift())!="string"||Array.isArray(Ba)&&typeof Ba[0]!="string")&&(Mi=!1);xa=Mi}if(xa===!1)throw new Error('Type of text must be string or Array. "'+N+'" is not recognized.');typeof N=="string"&&(N=N.match(/[\r?\n]/)?N.split(/\r\n|\r|\n/g):[N]);var hi=fr/Tn.internal.scaleFactor,cA=hi*(rs-1);switch(et.baseline){case"bottom":De-=cA;break;case"top":De+=hi-cA;break;case"hanging":De+=hi-2*cA;break;case"middle":De+=hi/2-cA}if((Kn=et.maxWidth||0)>0&&(typeof N=="string"?N=Tn.splitTextToSize(N,Kn):Object.prototype.toString.call(N)==="[object Array]"&&(N=N.reduce(function(Ii,Ai){return Ii.concat(Tn.splitTextToSize(Ai,Kn))},[]))),Jt={text:N,x:oe,y:De,options:et,mutex:{pdfEscape:Xi,activeFontKey:bt,fonts:Fr,activeFontSize:fr}},Kr.publish("preProcessText",Jt),N=Jt.text,en=(et=Jt.options).angle,!(mi instanceof tn)&&en&&typeof en=="number"){en*=Math.PI/180,et.rotationDirection===0&&(en=-en),G===O.ADVANCED&&(en=-en);var no=Math.cos(en),uA=Math.sin(en);mi=new tn(no,uA,-uA,no,0,0)}else en&&en instanceof tn&&(mi=en);G!==O.ADVANCED||mi||(mi=hs),(Dn=et.charSpace||_a)!==void 0&&(ts+=he(se(Dn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(pi=et.horizontalScale)!==void 0&&(ts+=he(100*pi)+` Tz
`),et.lang;var Fs=-1,_o=et.renderingMode!==void 0?et.renderingMode:et.stroke,io=Tn.internal.getCurrentPageInfo().pageContext;switch(_o){case 0:case!1:case"fill":Fs=0;break;case 1:case!0:case"stroke":Fs=1;break;case 2:case"fillThenStroke":Fs=2;break;case 3:case"invisible":Fs=3;break;case 4:case"fillAndAddForClipping":Fs=4;break;case 5:case"strokeAndAddPathForClipping":Fs=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Fs=6;break;case 7:case"addToPathForClipping":Fs=7}var jo=io.usedRenderingMode!==void 0?io.usedRenderingMode:-1;Fs!==-1?ts+=Fs+` Tr
`:jo!==-1&&(ts+=`0 Tr
`),Fs!==-1&&(io.usedRenderingMode=Fs),En=et.align||"left";var Hi,Ns=fr*rs,so=Tn.internal.pageSize.getWidth(),is=Fr[bt];Dn=et.charSpace||_a,Kn=et.maxWidth||0,Wn=Object.assign({autoencode:!0,noBOM:!0},et.flags);var js=[];if(Object.prototype.toString.call(N)==="[object Array]"){var Ss;_r=la(N),En!=="left"&&(Hi=_r.map(function(Ii){return Tn.getStringUnitWidth(Ii,{font:is,charSpace:Dn,fontSize:fr,doKerning:!1})*fr/Si}));var Ca,ca=0;if(En==="right"){oe-=Hi[0],N=[],ns=_r.length;for(var Xs=0;Xs<ns;Xs++)Xs===0?(Ca=to(oe),Ss=ro(De)):(Ca=se(ca-Hi[Xs]),Ss=-Ns),N.push([_r[Xs],Ca,Ss]),ca=Hi[Xs]}else if(En==="center"){oe-=Hi[0]/2,N=[],ns=_r.length;for(var ss=0;ss<ns;ss++)ss===0?(Ca=to(oe),Ss=ro(De)):(Ca=se((ca-Hi[ss])/2),Ss=-Ns),N.push([_r[ss],Ca,Ss]),ca=Hi[ss]}else if(En==="left"){N=[],ns=_r.length;for(var ua=0;ua<ns;ua++)N.push(_r[ua])}else{if(En!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');N=[],ns=_r.length,Kn=Kn!==0?Kn:so;for(var gi=0;gi<ns;gi++)Ss=gi===0?ro(De):-Ns,Ca=gi===0?to(oe):0,gi<ns-1?js.push(he(se((Kn-Hi[gi])/(_r[gi].split(" ").length-1)))):js.push(0),N.push([_r[gi],Ca,Ss])}}var JA=typeof et.R2L=="boolean"?et.R2L:Gr;JA===!0&&(N=Pi(N,function(Ii,Ai,Bi){return[Ii.split("").reverse().join(""),Ai,Bi]})),Jt={text:N,x:oe,y:De,options:et,mutex:{pdfEscape:Xi,activeFontKey:bt,fonts:Fr,activeFontSize:fr}},Kr.publish("postProcessText",Jt),N=Jt.text,Ws=Jt.mutex.isHex||!1;var Da=Fr[bt].encoding;Da!=="WinAnsiEncoding"&&Da!=="StandardEncoding"||(N=Pi(N,function(Ii,Ai,Bi){return[yl(Ii),Ai,Bi]})),_r=la(N),N=[];for(var Na,fs,Ea,Ro=0,Rs=1,hA=Array.isArray(_r[0])?Rs:Ro,ao="",Oo=function(Ii,Ai,Bi){var Zi="";return Bi instanceof tn?(Bi=typeof et.angle=="number"?Wi(Bi,new tn(1,0,0,1,Ii,Ai)):Wi(new tn(1,0,0,1,Ii,Ai),Bi),G===O.ADVANCED&&(Bi=Wi(new tn(1,0,0,-1,0,0),Bi)),Zi=Bi.join(" ")+` Tm
`):Zi=he(Ii)+" "+he(Ai)+` Td
`,Zi},zi=0;zi<_r.length;zi++){switch(ao="",hA){case Rs:Ea=(Ws?"<":"(")+_r[zi][0]+(Ws?">":")"),Na=parseFloat(_r[zi][1]),fs=parseFloat(_r[zi][2]);break;case Ro:Ea=(Ws?"<":"(")+_r[zi]+(Ws?">":")"),Na=to(oe),fs=ro(De)}js!==void 0&&js[zi]!==void 0&&(ao=js[zi]+` Tw
`),zi===0?N.push(ao+Oo(Na,fs,mi)+Ea):hA===Ro?N.push(ao+Ea):hA===Rs&&N.push(ao+Oo(Na,fs,mi)+Ea)}N=hA===Ro?N.join(` Tj
T* `):N.join(` Tj
`),N+=` Tj
`;var Pr=`BT
/`;return Pr+=bt+" "+fr+` Tf
`,Pr+=he(fr*rs)+` TL
`,Pr+=AA+`
`,Pr+=ts,Pr+=N,ze(Pr+="ET"),w[bt]=!0,Tn};var ml=x.__private__.clip=x.clip=function(N){return ze(N==="evenodd"?"W*":"W"),this};x.clipEvenOdd=function(){return ml("evenodd")},x.__private__.discardPath=x.discardPath=function(){return ze("n"),this};var Pa=x.__private__.isValidStyle=function(N){var oe=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(N)!==-1&&(oe=!0),oe};x.__private__.setDefaultPathOperation=x.setDefaultPathOperation=function(N){return Pa(N)&&(_=N),this};var go=x.__private__.getStyle=x.getStyle=function(N){var oe=_;switch(N){case"D":case"S":oe="S";break;case"F":oe="f";break;case"FD":case"DF":oe="B";break;case"f":case"f*":case"B":case"B*":oe=N}return oe},aA=x.close=function(){return ze("h"),this};x.stroke=function(){return ze("S"),this},x.fill=function(N){return yo("f",N),this},x.fillEvenOdd=function(N){return yo("f*",N),this},x.fillStroke=function(N){return yo("B",N),this},x.fillStrokeEvenOdd=function(N){return yo("B*",N),this};var yo=function(N,oe){qi(oe)==="object"?Ds(oe,N):ze(N)},gt=function(N){N===null||G===O.ADVANCED&&N===void 0||(N=go(N),ze(N))};function Mn(N,oe,De,et,_t){var Jt=new Gu(oe||this.boundingBox,De||this.xStep,et||this.yStep,this.gState,_t||this.matrix);Jt.stream=this.stream;var _r=N+"$$"+this.cloneIndex+++"$$";return Ln(_r,Jt),Jt}var Ds=function(N,oe){var De=An[N.key],et=Er[De];if(et instanceof vu)ze("q"),ze(Oi(oe)),et.gState&&x.setGState(et.gState),ze(N.matrix.toString()+" cm"),ze("/"+De+" sh"),ze("Q");else if(et instanceof Gu){var _t=new tn(1,0,0,-1,0,ba());N.matrix&&(_t=_t.multiply(N.matrix||hs),De=Mn.call(et,N.key,N.boundingBox,N.xStep,N.yStep,_t).id),ze("q"),ze("/Pattern cs"),ze("/"+De+" scn"),et.gState&&x.setGState(et.gState),ze(oe),ze("Q")}},Oi=function(N){switch(N){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},ks=x.moveTo=function(N,oe){return ze(he(se(N))+" "+he(me(oe))+" m"),this},ya=x.lineTo=function(N,oe){return ze(he(se(N))+" "+he(me(oe))+" l"),this},Ya=x.curveTo=function(N,oe,De,et,_t,Jt){return ze([he(se(N)),he(me(oe)),he(se(De)),he(me(et)),he(se(_t)),he(me(Jt)),"c"].join(" ")),this};x.__private__.line=x.line=function(N,oe,De,et,_t){if(isNaN(N)||isNaN(oe)||isNaN(De)||isNaN(et)||!Pa(_t))throw new Error("Invalid arguments passed to jsPDF.line");return G===O.COMPAT?this.lines([[De-N,et-oe]],N,oe,[1,1],_t||"S"):this.lines([[De-N,et-oe]],N,oe,[1,1]).stroke()},x.__private__.lines=x.lines=function(N,oe,De,et,_t,Jt){var _r,en,En,Dn,Kn,Wn,pi,mi,Tn,Es,ts,Ws;if(typeof N=="number"&&(Ws=De,De=oe,oe=N,N=Ws),et=et||[1,1],Jt=Jt||!1,isNaN(oe)||isNaN(De)||!Array.isArray(N)||!Array.isArray(et)||!Pa(_t)||typeof Jt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(ks(oe,De),_r=et[0],en=et[1],Dn=N.length,Es=oe,ts=De,En=0;En<Dn;En++)(Kn=N[En]).length===2?(Es=Kn[0]*_r+Es,ts=Kn[1]*en+ts,ya(Es,ts)):(Wn=Kn[0]*_r+Es,pi=Kn[1]*en+ts,mi=Kn[2]*_r+Es,Tn=Kn[3]*en+ts,Es=Kn[4]*_r+Es,ts=Kn[5]*en+ts,Ya(Wn,pi,mi,Tn,Es,ts));return Jt&&aA(),gt(_t),this},x.path=function(N){for(var oe=0;oe<N.length;oe++){var De=N[oe],et=De.c;switch(De.op){case"m":ks(et[0],et[1]);break;case"l":ya(et[0],et[1]);break;case"c":Ya.apply(this,et);break;case"h":aA()}}return this},x.__private__.rect=x.rect=function(N,oe,De,et,_t){if(isNaN(N)||isNaN(oe)||isNaN(De)||isNaN(et)||!Pa(_t))throw new Error("Invalid arguments passed to jsPDF.rect");return G===O.COMPAT&&(et=-et),ze([he(se(N)),he(me(oe)),he(se(De)),he(se(et)),"re"].join(" ")),gt(_t),this},x.__private__.triangle=x.triangle=function(N,oe,De,et,_t,Jt,_r){if(isNaN(N)||isNaN(oe)||isNaN(De)||isNaN(et)||isNaN(_t)||isNaN(Jt)||!Pa(_r))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[De-N,et-oe],[_t-De,Jt-et],[N-_t,oe-Jt]],N,oe,[1,1],_r,!0),this},x.__private__.roundedRect=x.roundedRect=function(N,oe,De,et,_t,Jt,_r){if(isNaN(N)||isNaN(oe)||isNaN(De)||isNaN(et)||isNaN(_t)||isNaN(Jt)||!Pa(_r))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var en=4/3*(Math.SQRT2-1);return _t=Math.min(_t,.5*De),Jt=Math.min(Jt,.5*et),this.lines([[De-2*_t,0],[_t*en,0,_t,Jt-Jt*en,_t,Jt],[0,et-2*Jt],[0,Jt*en,-_t*en,Jt,-_t,Jt],[2*_t-De,0],[-_t*en,0,-_t,-Jt*en,-_t,-Jt],[0,2*Jt-et],[0,-Jt*en,_t*en,-Jt,_t,-Jt]],N+_t,oe,[1,1],_r,!0),this},x.__private__.ellipse=x.ellipse=function(N,oe,De,et,_t){if(isNaN(N)||isNaN(oe)||isNaN(De)||isNaN(et)||!Pa(_t))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Jt=4/3*(Math.SQRT2-1)*De,_r=4/3*(Math.SQRT2-1)*et;return ks(N+De,oe),Ya(N+De,oe-_r,N+Jt,oe-et,N,oe-et),Ya(N-Jt,oe-et,N-De,oe-_r,N-De,oe),Ya(N-De,oe+_r,N-Jt,oe+et,N,oe+et),Ya(N+Jt,oe+et,N+De,oe+_r,N+De,oe),gt(_t),this},x.__private__.circle=x.circle=function(N,oe,De,et){if(isNaN(N)||isNaN(oe)||isNaN(De)||!Pa(et))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(N,oe,De,De,et)},x.setFont=function(N,oe,De){return De&&(oe=$(oe,De)),bt=xs(N,oe,{disableWarning:!1}),this};var Cs=x.__private__.getFont=x.getFont=function(){return Fr[xs.apply(x,arguments)]};x.__private__.getFontList=x.getFontList=function(){var N,oe,De={};for(N in un)if(un.hasOwnProperty(N))for(oe in De[N]=[],un[N])un[N].hasOwnProperty(oe)&&De[N].push(oe);return De},x.addFont=function(N,oe,De,et,_t){var Jt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Jt.indexOf(arguments[3])!==-1?_t=arguments[3]:arguments[3]&&Jt.indexOf(arguments[3])==-1&&(De=$(De,et)),_t=_t||"Identity-H",Gs.call(this,N,oe,De,_t)};var Aa,$a=e.lineWidth||.200025,va=x.__private__.getLineWidth=x.getLineWidth=function(){return $a},WA=x.__private__.setLineWidth=x.setLineWidth=function(N){return $a=N,ze(he(se(N))+" w"),this};x.__private__.setLineDash=Nn.API.setLineDash=Nn.API.setLineDashPattern=function(N,oe){if(N=N||[],oe=oe||0,isNaN(oe)||!Array.isArray(N))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return N=N.map(function(De){return he(se(De))}).join(" "),oe=he(se(oe)),ze("["+N+"] "+oe+" d"),this};var es=x.__private__.getLineHeight=x.getLineHeight=function(){return fr*Aa};x.__private__.getLineHeight=x.getLineHeight=function(){return fr*Aa};var FA=x.__private__.setLineHeightFactor=x.setLineHeightFactor=function(N){return typeof(N=N||1.15)=="number"&&(Aa=N),this},eo=x.__private__.getLineHeightFactor=x.getLineHeightFactor=function(){return Aa};FA(e.lineHeight);var to=x.__private__.getHorizontalCoordinate=function(N){return se(N)},ro=x.__private__.getVerticalCoordinate=function(N){return G===O.ADVANCED?N:cr[Se].mediaBox.topRightY-cr[Se].mediaBox.bottomLeftY-se(N)},ql=x.__private__.getHorizontalCoordinateString=x.getHorizontalCoordinateString=function(N){return he(to(N))},Do=x.__private__.getVerticalCoordinateString=x.getVerticalCoordinateString=function(N){return he(ro(N))},vs=e.strokeColor||"0 G";x.__private__.getStrokeColor=x.getDrawColor=function(){return Xe(vs)},x.__private__.setStrokeColor=x.setDrawColor=function(N,oe,De,et){return vs=lt({ch1:N,ch2:oe,ch3:De,ch4:et,pdfColorType:"draw",precision:2}),ze(vs),this};var oA=e.fillColor||"0 g";x.__private__.getFillColor=x.getFillColor=function(){return Xe(oA)},x.__private__.setFillColor=x.setFillColor=function(N,oe,De,et){return oA=lt({ch1:N,ch2:oe,ch3:De,ch4:et,pdfColorType:"fill",precision:2}),ze(oA),this};var AA=e.textColor||"0 g",_c=x.__private__.getTextColor=x.getTextColor=function(){return Xe(AA)};x.__private__.setTextColor=x.setTextColor=function(N,oe,De,et){return AA=lt({ch1:N,ch2:oe,ch3:De,ch4:et,pdfColorType:"text",precision:3}),this};var _a=e.charSpace,XA=x.__private__.getCharSpace=x.getCharSpace=function(){return parseFloat(_a||0)};x.__private__.setCharSpace=x.setCharSpace=function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return _a=N,this};var SA=0;x.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},x.__private__.setLineCap=x.setLineCap=function(N){var oe=x.CapJoinStyles[N];if(oe===void 0)throw new Error("Line cap style of '"+N+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return SA=oe,ze(oe+" J"),this};var IA=0;x.__private__.setLineJoin=x.setLineJoin=function(N){var oe=x.CapJoinStyles[N];if(oe===void 0)throw new Error("Line join style of '"+N+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return IA=oe,ze(oe+" j"),this},x.__private__.setLineMiterLimit=x.__private__.setMiterLimit=x.setLineMiterLimit=x.setMiterLimit=function(N){if(N=N||0,isNaN(N))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ze(he(se(N))+" M"),this},x.GState=rd,x.setGState=function(N){(N=typeof N=="string"?wn[_i[N]]:TA(null,N)).equals(br)||(ze("/"+N.id+" gs"),br=N)};var TA=function(N,oe){if(!N||!_i[N]){var De=!1;for(var et in wn)if(wn.hasOwnProperty(et)&&wn[et].equals(oe)){De=!0;break}if(De)oe=wn[et];else{var _t="GS"+(Object.keys(wn).length+1).toString(10);wn[_t]=oe,oe.id=_t}return N&&(_i[N]=oe.id),Kr.publish("addGState",oe),oe}};x.addGState=function(N,oe){return TA(N,oe),this},x.saveGraphicsState=function(){return ze("q"),lr.push({key:bt,size:fr,color:AA}),this},x.restoreGraphicsState=function(){ze("Q");var N=lr.pop();return bt=N.key,fr=N.size,AA=N.color,br=null,this},x.setCurrentTransformationMatrix=function(N){return ze(N.toString()+" cm"),this},x.comment=function(N){return ze("#"+N),this};var lA=function(N,oe){var De=N||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return De},set:function(Jt){isNaN(Jt)||(De=parseFloat(Jt))}});var et=oe||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return et},set:function(Jt){isNaN(Jt)||(et=parseFloat(Jt))}});var _t="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return _t},set:function(Jt){_t=Jt.toString()}}),this},UA=function(N,oe,De,et){lA.call(this,N,oe),this.type="rect";var _t=De||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return _t},set:function(_r){isNaN(_r)||(_t=parseFloat(_r))}});var Jt=et||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Jt},set:function(_r){isNaN(_r)||(Jt=parseFloat(_r))}}),this},vo=function(){this.page=Cr,this.currentPage=Se,this.pages=Ut.slice(0),this.pagesContext=cr.slice(0),this.x=jt,this.y=er,this.matrix=Vr,this.width=wa(Se),this.height=ba(Se),this.outputDestination=Nt,this.id="",this.objectNumber=-1};vo.prototype.restore=function(){Cr=this.page,Se=this.currentPage,cr=this.pagesContext,Ut=this.pages,jt=this.x,er=this.y,Vr=this.matrix,ZA(Se,this.width),xi(Se,this.height),Nt=this.outputDestination};var gl=function(N,oe,De,et,_t){ji.push(new vo),Cr=Se=0,Ut=[],jt=N,er=oe,Vr=_t,mo([De,et])},Wl=function(N){if(Sn[N])ji.pop().restore();else{var oe=new vo,De="Xo"+(Object.keys(xn).length+1).toString(10);oe.id=De,Sn[N]=De,xn[De]=oe,Kr.publish("addFormObject",oe),ji.pop().restore()}};for(var No in x.beginFormObject=function(N,oe,De,et,_t){return gl(N,oe,De,et,_t),this},x.endFormObject=function(N){return Wl(N),this},x.doFormObject=function(N,oe){var De=xn[Sn[N]];return ze("q"),ze(oe.toString()+" cm"),ze("/"+De.id+" Do"),ze("Q"),this},x.getFormObject=function(N){var oe=xn[Sn[N]];return{x:oe.x,y:oe.y,width:oe.width,height:oe.height,matrix:oe.matrix}},x.save=function(N,oe){return N=N||"generated.pdf",(oe=oe||{}).returnPromise=oe.returnPromise||!1,oe.returnPromise===!1?(Hu(qs(oa()),N),typeof Hu.unload=="function"&&Hn.setTimeout&&setTimeout(Hu.unload,911),this):new Promise(function(De,et){try{var _t=Hu(qs(oa()),N);typeof Hu.unload=="function"&&Hn.setTimeout&&setTimeout(Hu.unload,911),De(_t)}catch(Jt){et(Jt.message)}})},Nn.API)Nn.API.hasOwnProperty(No)&&(No==="events"&&Nn.API.events.length?function(N,oe){var De,et,_t;for(_t=oe.length-1;_t!==-1;_t--)De=oe[_t][0],et=oe[_t][1],N.subscribe.apply(N,[De].concat(typeof et=="function"?[et]:et))}(Kr,Nn.API.events):x[No]=Nn.API[No]);var wa=x.getPageWidth=function(N){return(cr[N=N||Se].mediaBox.topRightX-cr[N].mediaBox.bottomLeftX)/Ct},ZA=x.setPageWidth=function(N,oe){cr[N].mediaBox.topRightX=oe*Ct+cr[N].mediaBox.bottomLeftX},ba=x.getPageHeight=function(N){return(cr[N=N||Se].mediaBox.topRightY-cr[N].mediaBox.bottomLeftY)/Ct},xi=x.setPageHeight=function(N,oe){cr[N].mediaBox.topRightY=oe*Ct+cr[N].mediaBox.bottomLeftY};return x.internal={pdfEscape:Xi,getStyle:go,getFont:Cs,getFontSize:vr,getCharSpace:XA,getTextColor:_c,getLineHeight:es,getLineHeightFactor:eo,getLineWidth:va,write:gr,getHorizontalCoordinate:to,getVerticalCoordinate:ro,getCoordinateString:ql,getVerticalCoordinateString:Do,collections:{},newObject:nn,newAdditionalObject:Ae,newObjectDeferred:Ue,newObjectDeferredBegin:Y,getFilters:Ye,putStream:qe,events:Kr,scaleFactor:Ct,pageSize:{getWidth:function(){return wa(Se)},setWidth:function(N){ZA(Se,N)},getHeight:function(){return ba(Se)},setHeight:function(N){xi(Se,N)}},encryptionOptions:p,encryption:ys,getEncryptor:iA,output:ni,getNumberOfPages:bs,pages:Ut,out:ze,f2:ue,f3:ee,getPageInfo:sA,getPageInfoByObjId:Cn,getCurrentPageInfo:qA,getPDFVersion:Q,Point:lA,Rectangle:UA,Matrix:tn,hasHotfix:Bs},Object.defineProperty(x.internal.pageSize,"width",{get:function(){return wa(Se)},set:function(N){ZA(Se,N)},enumerable:!0,configurable:!0}),Object.defineProperty(x.internal.pageSize,"height",{get:function(){return ba(Se)},set:function(N){xi(Se,N)},enumerable:!0,configurable:!0}),ia.call(x,Ht),bt="F1",nA(l,r),Kr.publish("initialized"),x}jh.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},jh.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},jh.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},jh.prototype.processOwnerPassword=function(e,t){return wg(_g(t).substr(0,5),e)},jh.prototype.encryptor=function(e,t){var r=_g(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(s){return wg(r,s)}},rd.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||qi(e)!==qi(this))return!1;var s=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;s++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&s--;return s===0},Nn.API={events:[]},Nn.version="2.5.1";var Vs=Nn.API,Zg=1,Ah=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Mh=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Jn=function(e){return e.toFixed(2)},yu=function(e){return e.toFixed(5)};Vs.__acroform__={};var CA=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},Ey=function(e){return e*Zg},uc=function(e){var t=new u_,r=yn.internal.getHeight(e)||0,s=yn.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Jn(s)),Number(Jn(r))],t},HF=Vs.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},zF=Vs.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},VF=Vs.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},ta=Vs.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return VF(e,t-1)},ra=Vs.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return HF(e,t-1)},na=Vs.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return zF(e,t-1)},KF=Vs.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,s=t.internal.getVerticalCoordinate,l=e[0],c=e[1],h=e[2],a=e[3],d={};return d.lowerLeft_X=r(l)||0,d.lowerLeft_Y=s(c+a)||0,d.upperRight_X=r(l+h)||0,d.upperRight_Y=s(c)||0,[Number(Jn(d.lowerLeft_X)),Number(Jn(d.lowerLeft_Y)),Number(Jn(d.upperRight_X)),Number(Jn(d.upperRight_Y))]},GF=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,s=bg(e,r),l=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+l+" "+Jn(s.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC");var c=uc(e);return c.scope=e.scope,c.stream=t.join(`
`),c}},bg=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,s={text:"",fontSize:""},l=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");l=e.multiline?l.map(function(ee){return ee.split(`
`)}):l.map(function(ee){return[ee]});var c=r,h=yn.internal.getHeight(e)||0;h=h<0?-h:h;var a=yn.internal.getWidth(e)||0;a=a<0?-a:a;var d=function(ee,se,Be){if(ee+1<l.length){var me=se+" "+l[ee+1][0];return np(me,e,Be).width<=a-4}return!1};c++;e:for(;c>0;){t="",c--;var _,p,E=np("3",e,c).height,w=e.multiline?h-c:(h-E)/2,x=w+=2,k=0,Q=0,R=0;if(c<=0){t=`(...) Tj
`,t+="% Width of Text: "+np(t,e,c=12).width+", FieldWidth:"+a+`
`;break}for(var M="",O=0,G=0;G<l.length;G++)if(l.hasOwnProperty(G)){var K=!1;if(l[G].length!==1&&R!==l[G].length-1){if((E+2)*(O+2)+2>h)continue e;M+=l[G][R],K=!0,Q=G,G--}else{M=(M+=l[G][R]+" ").substr(M.length-1)==" "?M.substr(0,M.length-1):M;var Z=parseInt(G),$=d(Z,M,c),he=G>=l.length-1;if($&&!he){M+=" ",R=0;continue}if($||he){if(he)Q=Z;else if(e.multiline&&(E+2)*(O+2)+2>h)continue e}else{if(!e.multiline||(E+2)*(O+2)+2>h)continue e;Q=Z}}for(var fe="",_e=k;_e<=Q;_e++){var ue=l[_e];if(e.multiline){if(_e===Q){fe+=ue[R]+" ",R=(R+1)%ue.length;continue}if(_e===k){fe+=ue[ue.length-1]+" ";continue}}fe+=ue[0]+" "}switch(fe=fe.substr(fe.length-1)==" "?fe.substr(0,fe.length-1):fe,p=np(fe,e,c).width,e.textAlign){case"right":_=a-p-2;break;case"center":_=(a-p)/2;break;case"left":default:_=2}t+=Jn(_)+" "+Jn(x)+` Td
`,t+="("+Ah(fe)+`) Tj
`,t+=-Jn(_)+` 0 Td
`,x=-(c+2),p=0,k=K?Q:Q+1,O++,M=""}break}return s.text=t,s.fontSize=c,s},np=function(e,t,r){var s=t.scope.internal.getFont(t.fontName,t.fontStyle),l=t.scope.getStringUnitWidth(e,{font:s,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:s,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:l}},qF={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},WF=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(s){return s.type===r.type&&s.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},XF=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var s=r,l=e[r];t.internal.newObjectDeferredBegin(l.objId,!0),qi(l)==="object"&&typeof l.putStream=="function"&&l.putStream(),delete e[s]}},ZF=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Kl.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(qF)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Zg=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new h_,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var s=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var l in s)if(s.hasOwnProperty(l)){var c=s[l];c.objId=void 0,c.hasAnnotation&&WF(c,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(s,l){var c=!s;for(var h in s||(l.internal.newObjectDeferredBegin(l.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),l.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),s=s||l.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(s.hasOwnProperty(h)){var a=s[h],d=[],_=a.Rect;if(a.Rect&&(a.Rect=KF(a.Rect,l)),l.internal.newObjectDeferredBegin(a.objId,!0),a.DA=yn.createDefaultAppearanceStream(a),qi(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(d=a.getKeyValueListForStream()),a.Rect=_,a.hasAppearanceStream&&!a.appearanceStreamContent){var p=GF(a);d.push({key:"AP",value:"<</N "+p+">>"}),l.internal.acroformPlugin.xForms.push(p)}if(a.appearanceStreamContent){var E="";for(var w in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(w)){var x=a.appearanceStreamContent[w];if(E+="/"+w+" ",E+="<<",Object.keys(x).length>=1||Array.isArray(x)){for(var h in x)if(x.hasOwnProperty(h)){var k=x[h];typeof k=="function"&&(k=k.call(l,a)),E+="/"+h+" "+k+" ",l.internal.acroformPlugin.xForms.indexOf(k)>=0||l.internal.acroformPlugin.xForms.push(k)}}else typeof(k=x)=="function"&&(k=k.call(l,a)),E+="/"+h+" "+k,l.internal.acroformPlugin.xForms.indexOf(k)>=0||l.internal.acroformPlugin.xForms.push(k);E+=">>"}d.push({key:"AP",value:`<<
`+E+">>"})}l.internal.putStream({additionalKeyValues:d,objectId:a.objId}),l.internal.out("endobj")}c&&XF(l.internal.acroformPlugin.xForms,l)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},c_=Vs.__acroform__.arrayToPdfArray=function(e,t,r){var s=function(h){return h};if(Array.isArray(e)){for(var l="[",c=0;c<e.length;c++)switch(c!==0&&(l+=" "),qi(e[c])){case"boolean":case"number":case"object":l+=e[c].toString();break;case"string":e[c].substr(0,1)!=="/"?(t!==void 0&&r&&(s=r.internal.getEncryptor(t)),l+="("+Ah(s(e[c].toString()))+")"):l+=e[c].toString()}return l+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Om=function(e,t,r){var s=function(l){return l};return t!==void 0&&r&&(s=r.internal.getEncryptor(t)),(e=e||"").toString(),e="("+Ah(s(e))+")"},fc=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};fc.prototype.toString=function(){return this.objId+" 0 R"},fc.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},fc.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(c){return c!="content"&&c!="appearanceStreamContent"&&c!="scope"&&c!="objId"&&c.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var s=t[r],l=this[s];l&&(Array.isArray(l)?e.push({key:s,value:c_(l,this.objId,this.scope)}):l instanceof fc?(l.scope=this.scope,e.push({key:s,value:l.objId+" 0 R"})):typeof l!="function"&&e.push({key:s,value:l}))}return e};var u_=function(){fc.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};CA(u_,fc);var h_=function(){fc.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(s){return s};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Ah(r(e))+")"}},set:function(r){e=r}})};CA(h_,fc);var Kl=function e(){fc.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(M){if(isNaN(M))throw new Error('Invalid value "'+M+'" for attribute F supplied.');t=M}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(t,3))},set:function(M){Boolean(M)===!0?this.F=ra(t,3):this.F=na(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(M){if(isNaN(M))throw new Error('Invalid value "'+M+'" for attribute Ff supplied.');r=M}});var s=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(s.length!==0)return s},set:function(M){s=M!==void 0?M:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[0])?0:s[0]},set:function(M){s[0]=M}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[1])?0:s[1]},set:function(M){s[1]=M}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[2])?0:s[2]},set:function(M){s[2]=M}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[3])?0:s[3]},set:function(M){s[3]=M}});var l="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return l},set:function(M){switch(M){case"/Btn":case"/Tx":case"/Ch":case"/Sig":l=M;break;default:throw new Error('Invalid value "'+M+'" for attribute FT supplied.')}}});var c=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!c||c.length<1){if(this instanceof Tp)return;c="FieldObject"+e.FieldNum++}var M=function(O){return O};return this.scope&&(M=this.scope.internal.getEncryptor(this.objId)),"("+Ah(M(c))+")"},set:function(M){c=M.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return c},set:function(M){c=M}});var h="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return h},set:function(M){h=M}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(M){a=M}});var d=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return d},set:function(M){d=M}});var _=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return _===void 0?50/Zg:_},set:function(M){_=M}});var p="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return p},set:function(M){p=M}});var E="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!E||this instanceof Tp||this instanceof bu))return Om(E,this.objId,this.scope)},set:function(M){M=M.toString(),E=M}});var w=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(w)return this instanceof Qa?w:Om(w,this.objId,this.scope)},set:function(M){M=M.toString(),w=this instanceof Qa?M:M.substr(0,1)==="("?Mh(M.substr(1,M.length-2)):Mh(M)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Qa?Mh(w.substr(1,w.length-1)):w},set:function(M){M=M.toString(),w=this instanceof Qa?"/"+M:M}});var x=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(x)return x},set:function(M){this.V=M}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(x)return this instanceof Qa?x:Om(x,this.objId,this.scope)},set:function(M){M=M.toString(),x=this instanceof Qa?M:M.substr(0,1)==="("?Mh(M.substr(1,M.length-2)):Mh(M)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Qa?Mh(x.substr(1,x.length-1)):x},set:function(M){M=M.toString(),x=this instanceof Qa?"/"+M:M}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var k,Q=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return Q},set:function(M){M=Boolean(M),Q=M}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(k)return k},set:function(M){k=M}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,1))},set:function(M){Boolean(M)===!0?this.Ff=ra(this.Ff,1):this.Ff=na(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,2))},set:function(M){Boolean(M)===!0?this.Ff=ra(this.Ff,2):this.Ff=na(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,3))},set:function(M){Boolean(M)===!0?this.Ff=ra(this.Ff,3):this.Ff=na(this.Ff,3)}});var R=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(R!==null)return R},set:function(M){if([0,1,2].indexOf(M)===-1)throw new Error('Invalid value "'+M+'" for attribute Q supplied.');R=M}}),Object.defineProperty(this,"textAlign",{get:function(){var M;switch(R){case 0:default:M="left";break;case 1:M="center";break;case 2:M="right"}return M},configurable:!0,enumerable:!0,set:function(M){switch(M){case"right":case 2:R=2;break;case"center":case 1:R=1;break;case"left":case 0:default:R=0}}})};CA(Kl,fc);var Wu=function(){Kl.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return c_(t,this.objId,this.scope)},set:function(r){var s,l;l=[],typeof(s=r)=="string"&&(l=function(c,h,a){a||(a=1);for(var d,_=[];d=h.exec(c);)_.push(d[a]);return _}(s,/\((.*?)\)/g)),t=l}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,s){for(s=s||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),s!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,18))},set:function(r){Boolean(r)===!0?this.Ff=ra(this.Ff,18):this.Ff=na(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,19))},set:function(r){this.combo===!0&&(Boolean(r)===!0?this.Ff=ra(this.Ff,19):this.Ff=na(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,20))},set:function(r){Boolean(r)===!0?(this.Ff=ra(this.Ff,20),t.sort()):this.Ff=na(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,22))},set:function(r){Boolean(r)===!0?this.Ff=ra(this.Ff,22):this.Ff=na(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,23))},set:function(r){Boolean(r)===!0?this.Ff=ra(this.Ff,23):this.Ff=na(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,27))},set:function(r){Boolean(r)===!0?this.Ff=ra(this.Ff,27):this.Ff=na(this.Ff,27)}}),this.hasAppearanceStream=!1};CA(Wu,Kl);var Xu=function(){Wu.call(this),this.fontName="helvetica",this.combo=!1};CA(Xu,Wu);var Zu=function(){Xu.call(this),this.combo=!0};CA(Zu,Xu);var zf=function(){Zu.call(this),this.edit=!0};CA(zf,Zu);var Qa=function(){Kl.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,15))},set:function(r){Boolean(r)===!0?this.Ff=ra(this.Ff,15):this.Ff=na(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,16))},set:function(r){Boolean(r)===!0?this.Ff=ra(this.Ff,16):this.Ff=na(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,17))},set:function(r){Boolean(r)===!0?this.Ff=ra(this.Ff,17):this.Ff=na(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,26))},set:function(r){Boolean(r)===!0?this.Ff=ra(this.Ff,26):this.Ff=na(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(c){return c};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var s,l=[];for(s in l.push("<<"),t)l.push("/"+s+" ("+Ah(r(t[s]))+")");return l.push(">>"),l.join(`
`)}},set:function(r){qi(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};CA(Qa,Kl);var Vf=function(){Qa.call(this),this.pushButton=!0};CA(Vf,Qa);var Ju=function(){Qa.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};CA(Ju,Qa);var Tp=function(){var e,t;Kl.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(l){e=l}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(l){t=l}});var r,s={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var l=function(a){return a};this.scope&&(l=this.scope.internal.getEncryptor(this.objId));var c,h=[];for(c in h.push("<<"),s)h.push("/"+c+" ("+Ah(l(s[c]))+")");return h.push(">>"),h.join(`
`)},set:function(l){qi(l)==="object"&&(s=l)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return s.CA||""},set:function(l){typeof l=="string"&&(s.CA=l)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(l){r=l}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(l){r="/"+l}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=yn.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};CA(Tp,Kl),Ju.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},Ju.prototype.createOption=function(e){var t=new Tp;return t.Parent=this,t.optionName=e,this.Kids.push(t),JF.call(this.scope,t),t};var Kf=function(){Qa.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=yn.CheckBox.createAppearanceStream()};CA(Kf,Qa);var bu=function(){Kl.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,13))},set:function(t){Boolean(t)===!0?this.Ff=ra(this.Ff,13):this.Ff=na(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,21))},set:function(t){Boolean(t)===!0?this.Ff=ra(this.Ff,21):this.Ff=na(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,23))},set:function(t){Boolean(t)===!0?this.Ff=ra(this.Ff,23):this.Ff=na(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,24))},set:function(t){Boolean(t)===!0?this.Ff=ra(this.Ff,24):this.Ff=na(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,25))},set:function(t){Boolean(t)===!0?this.Ff=ra(this.Ff,25):this.Ff=na(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,26))},set:function(t){Boolean(t)===!0?this.Ff=ra(this.Ff,26):this.Ff=na(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};CA(bu,Kl);var Gf=function(){bu.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,14))},set:function(e){Boolean(e)===!0?this.Ff=ra(this.Ff,14):this.Ff=na(this.Ff,14)}}),this.password=!0};CA(Gf,bu);var yn={CheckBox:{createAppearanceStream:function(){return{N:{On:yn.CheckBox.YesNormal},D:{On:yn.CheckBox.YesPushDown,Off:yn.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=uc(e);t.scope=e.scope;var r=[],s=e.scope.internal.getFont(e.fontName,e.fontStyle).id,l=e.scope.__private__.encodeColorString(e.color),c=bg(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+Jn(yn.internal.getWidth(e))+" "+Jn(yn.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+s+" "+Jn(c.fontSize)+" Tf "+l),r.push("BT"),r.push(c.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=uc(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,s=e.scope.__private__.encodeColorString(e.color),l=[],c=yn.internal.getHeight(e),h=yn.internal.getWidth(e),a=bg(e,e.caption);return l.push("1 g"),l.push("0 0 "+Jn(h)+" "+Jn(c)+" re"),l.push("f"),l.push("q"),l.push("0 0 1 rg"),l.push("0 0 "+Jn(h-1)+" "+Jn(c-1)+" re"),l.push("W"),l.push("n"),l.push("0 g"),l.push("BT"),l.push("/"+r+" "+Jn(a.fontSize)+" Tf "+s),l.push(a.text),l.push("ET"),l.push("Q"),t.stream=l.join(`
`),t},OffPushDown:function(e){var t=uc(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Jn(yn.internal.getWidth(e))+" "+Jn(yn.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:yn.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=yn.RadioButton.Circle.YesNormal,t.D[e]=yn.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=uc(e);t.scope=e.scope;var r=[],s=yn.internal.getWidth(e)<=yn.internal.getHeight(e)?yn.internal.getWidth(e)/4:yn.internal.getHeight(e)/4;s=Number((.9*s).toFixed(5));var l=yn.internal.Bezier_C,c=Number((s*l).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+yu(yn.internal.getWidth(e)/2)+" "+yu(yn.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+c+" "+c+" "+s+" 0 "+s+" c"),r.push("-"+c+" "+s+" -"+s+" "+c+" -"+s+" 0 c"),r.push("-"+s+" -"+c+" -"+c+" -"+s+" 0 -"+s+" c"),r.push(c+" -"+s+" "+s+" -"+c+" "+s+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=uc(e);t.scope=e.scope;var r=[],s=yn.internal.getWidth(e)<=yn.internal.getHeight(e)?yn.internal.getWidth(e)/4:yn.internal.getHeight(e)/4;s=Number((.9*s).toFixed(5));var l=Number((2*s).toFixed(5)),c=Number((l*yn.internal.Bezier_C).toFixed(5)),h=Number((s*yn.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+yu(yn.internal.getWidth(e)/2)+" "+yu(yn.internal.getHeight(e)/2)+" cm"),r.push(l+" 0 m"),r.push(l+" "+c+" "+c+" "+l+" 0 "+l+" c"),r.push("-"+c+" "+l+" -"+l+" "+c+" -"+l+" 0 c"),r.push("-"+l+" -"+c+" -"+c+" -"+l+" 0 -"+l+" c"),r.push(c+" -"+l+" "+l+" -"+c+" "+l+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+yu(yn.internal.getWidth(e)/2)+" "+yu(yn.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+h+" "+h+" "+s+" 0 "+s+" c"),r.push("-"+h+" "+s+" -"+s+" "+h+" -"+s+" 0 c"),r.push("-"+s+" -"+h+" -"+h+" -"+s+" 0 -"+s+" c"),r.push(h+" -"+s+" "+s+" -"+h+" "+s+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=uc(e);t.scope=e.scope;var r=[],s=yn.internal.getWidth(e)<=yn.internal.getHeight(e)?yn.internal.getWidth(e)/4:yn.internal.getHeight(e)/4;s=Number((.9*s).toFixed(5));var l=Number((2*s).toFixed(5)),c=Number((l*yn.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+yu(yn.internal.getWidth(e)/2)+" "+yu(yn.internal.getHeight(e)/2)+" cm"),r.push(l+" 0 m"),r.push(l+" "+c+" "+c+" "+l+" 0 "+l+" c"),r.push("-"+c+" "+l+" -"+l+" "+c+" -"+l+" 0 c"),r.push("-"+l+" -"+c+" -"+c+" -"+l+" 0 -"+l+" c"),r.push(c+" -"+l+" "+l+" -"+c+" "+l+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:yn.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=yn.RadioButton.Cross.YesNormal,t.D[e]=yn.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=uc(e);t.scope=e.scope;var r=[],s=yn.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+Jn(yn.internal.getWidth(e)-2)+" "+Jn(yn.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Jn(s.x1.x)+" "+Jn(s.x1.y)+" m"),r.push(Jn(s.x2.x)+" "+Jn(s.x2.y)+" l"),r.push(Jn(s.x4.x)+" "+Jn(s.x4.y)+" m"),r.push(Jn(s.x3.x)+" "+Jn(s.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=uc(e);t.scope=e.scope;var r=yn.internal.calculateCross(e),s=[];return s.push("0.749023 g"),s.push("0 0 "+Jn(yn.internal.getWidth(e))+" "+Jn(yn.internal.getHeight(e))+" re"),s.push("f"),s.push("q"),s.push("1 1 "+Jn(yn.internal.getWidth(e)-2)+" "+Jn(yn.internal.getHeight(e)-2)+" re"),s.push("W"),s.push("n"),s.push(Jn(r.x1.x)+" "+Jn(r.x1.y)+" m"),s.push(Jn(r.x2.x)+" "+Jn(r.x2.y)+" l"),s.push(Jn(r.x4.x)+" "+Jn(r.x4.y)+" m"),s.push(Jn(r.x3.x)+" "+Jn(r.x3.y)+" l"),s.push("s"),s.push("Q"),t.stream=s.join(`
`),t},OffPushDown:function(e){var t=uc(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Jn(yn.internal.getWidth(e))+" "+Jn(yn.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};yn.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=yn.internal.getWidth(e),r=yn.internal.getHeight(e),s=Math.min(t,r);return{x1:{x:(t-s)/2,y:(r-s)/2+s},x2:{x:(t-s)/2+s,y:(r-s)/2},x3:{x:(t-s)/2,y:(r-s)/2},x4:{x:(t-s)/2+s,y:(r-s)/2+s}}}},yn.internal.getWidth=function(e){var t=0;return qi(e)==="object"&&(t=Ey(e.Rect[2])),t},yn.internal.getHeight=function(e){var t=0;return qi(e)==="object"&&(t=Ey(e.Rect[3])),t};var JF=Vs.addField=function(e){if(ZF(this,e),!(e instanceof Kl))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Vs.AcroFormChoiceField=Wu,Vs.AcroFormListBox=Xu,Vs.AcroFormComboBox=Zu,Vs.AcroFormEditBox=zf,Vs.AcroFormButton=Qa,Vs.AcroFormPushButton=Vf,Vs.AcroFormRadioButton=Ju,Vs.AcroFormCheckBox=Kf,Vs.AcroFormTextField=bu,Vs.AcroFormPasswordField=Gf,Vs.AcroFormAppearance=yn,Vs.AcroForm={ChoiceField:Wu,ListBox:Xu,ComboBox:Zu,EditBox:zf,Button:Qa,PushButton:Vf,RadioButton:Ju,CheckBox:Kf,TextField:bu,PasswordField:Gf,Appearance:yn},Nn.AcroForm={ChoiceField:Wu,ListBox:Xu,ComboBox:Zu,EditBox:zf,Button:Qa,PushButton:Vf,RadioButton:Ju,CheckBox:Kf,TextField:bu,PasswordField:Gf,Appearance:yn};var YF=Nn.AcroForm;function f_(e){return e.reduce(function(t,r,s){return t[r]=s,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},s=e.__addimage__.getImageFileTypeByImageData=function(ee,se){var Be,me,Pe,ge,Qe,Te=t;if((se=se||t)==="RGBA"||ee.data!==void 0&&ee.data instanceof Uint8ClampedArray&&"height"in ee&&"width"in ee)return"RGBA";if($(ee))for(Qe in r)for(Pe=r[Qe],Be=0;Be<Pe.length;Be+=1){for(ge=!0,me=0;me<Pe[Be].length;me+=1)if(Pe[Be][me]!==void 0&&Pe[Be][me]!==ee[me]){ge=!1;break}if(ge===!0){Te=Qe;break}}else for(Qe in r)for(Pe=r[Qe],Be=0;Be<Pe.length;Be+=1){for(ge=!0,me=0;me<Pe[Be].length;me+=1)if(Pe[Be][me]!==void 0&&Pe[Be][me]!==ee.charCodeAt(me)){ge=!1;break}if(ge===!0){Te=Qe;break}}return Te===t&&se!==t&&(Te=se),Te},l=function ee(se){for(var Be=this.internal.write,me=this.internal.putStream,Pe=(0,this.internal.getFilters)();Pe.indexOf("FlateEncode")!==-1;)Pe.splice(Pe.indexOf("FlateEncode"),1);se.objectId=this.internal.newObject();var ge=[];if(ge.push({key:"Type",value:"/XObject"}),ge.push({key:"Subtype",value:"/Image"}),ge.push({key:"Width",value:se.width}),ge.push({key:"Height",value:se.height}),se.colorSpace===R.INDEXED?ge.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(se.palette.length/3-1)+" "+("sMask"in se&&se.sMask!==void 0?se.objectId+2:se.objectId+1)+" 0 R]"}):(ge.push({key:"ColorSpace",value:"/"+se.colorSpace}),se.colorSpace===R.DEVICE_CMYK&&ge.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ge.push({key:"BitsPerComponent",value:se.bitsPerComponent}),"decodeParameters"in se&&se.decodeParameters!==void 0&&ge.push({key:"DecodeParms",value:"<<"+se.decodeParameters+">>"}),"transparency"in se&&Array.isArray(se.transparency)){for(var Qe="",Te=0,tt=se.transparency.length;Te<tt;Te++)Qe+=se.transparency[Te]+" "+se.transparency[Te]+" ";ge.push({key:"Mask",value:"["+Qe+"]"})}se.sMask!==void 0&&ge.push({key:"SMask",value:se.objectId+1+" 0 R"});var Oe=se.filter!==void 0?["/"+se.filter]:void 0;if(me({data:se.data,additionalKeyValues:ge,alreadyAppliedFilters:Oe,objectId:se.objectId}),Be("endobj"),"sMask"in se&&se.sMask!==void 0){var Mt="/Predictor "+se.predictor+" /Colors 1 /BitsPerComponent "+se.bitsPerComponent+" /Columns "+se.width,ne={width:se.width,height:se.height,colorSpace:"DeviceGray",bitsPerComponent:se.bitsPerComponent,decodeParameters:Mt,data:se.sMask};"filter"in se&&(ne.filter=se.filter),ee.call(this,ne)}if(se.colorSpace===R.INDEXED){var Se=this.internal.newObject();me({data:fe(new Uint8Array(se.palette)),objectId:Se}),Be("endobj")}},c=function(){var ee=this.internal.collections.addImage_images;for(var se in ee)l.call(this,ee[se])},h=function(){var ee,se=this.internal.collections.addImage_images,Be=this.internal.write;for(var me in se)Be("/I"+(ee=se[me]).index,ee.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",c),this.internal.events.subscribe("putXobjectDict",h))},d=function(){var ee=this.internal.collections.addImage_images;return a.call(this),ee},_=function(){return Object.keys(this.internal.collections.addImage_images).length},p=function(ee){return typeof e["process"+ee.toUpperCase()]=="function"},E=function(ee){return qi(ee)==="object"&&ee.nodeType===1},w=function(ee,se){if(ee.nodeName==="IMG"&&ee.hasAttribute("src")){var Be=""+ee.getAttribute("src");if(Be.indexOf("data:image/")===0)return Hf(unescape(Be).split("base64,").pop());var me=e.loadFile(Be,!0);if(me!==void 0)return me}if(ee.nodeName==="CANVAS"){if(ee.width===0||ee.height===0)throw new Error("Given canvas must have data. Canvas width: "+ee.width+", height: "+ee.height);var Pe;switch(se){case"PNG":Pe="image/png";break;case"WEBP":Pe="image/webp";break;case"JPEG":case"JPG":default:Pe="image/jpeg"}return Hf(ee.toDataURL(Pe,1).split("base64,").pop())}},x=function(ee){var se=this.internal.collections.addImage_images;if(se){for(var Be in se)if(ee===se[Be].alias)return se[Be]}},k=function(ee,se,Be){return ee||se||(ee=-96,se=-96),ee<0&&(ee=-1*Be.width*72/ee/this.internal.scaleFactor),se<0&&(se=-1*Be.height*72/se/this.internal.scaleFactor),ee===0&&(ee=se*Be.width/Be.height),se===0&&(se=ee*Be.height/Be.width),[ee,se]},Q=function(ee,se,Be,me,Pe,ge){var Qe=k.call(this,Be,me,Pe),Te=this.internal.getCoordinateString,tt=this.internal.getVerticalCoordinateString,Oe=d.call(this);if(Be=Qe[0],me=Qe[1],Oe[Pe.index]=Pe,ge){ge*=Math.PI/180;var Mt=Math.cos(ge),ne=Math.sin(ge),Se=function(Ke){return Ke.toFixed(4)},ke=[Se(Mt),Se(ne),Se(-1*ne),Se(Mt),0,0,"cm"]}this.internal.write("q"),ge?(this.internal.write([1,"0","0",1,Te(ee),tt(se+me),"cm"].join(" ")),this.internal.write(ke.join(" ")),this.internal.write([Te(Be),"0","0",Te(me),"0","0","cm"].join(" "))):this.internal.write([Te(Be),"0","0",Te(me),Te(ee),tt(se+me),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Pe.index+" Do"),this.internal.write("Q")},R=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var M=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},O=e.__addimage__.sHashCode=function(ee){var se,Be,me=0;if(typeof ee=="string")for(Be=ee.length,se=0;se<Be;se++)me=(me<<5)-me+ee.charCodeAt(se),me|=0;else if($(ee))for(Be=ee.byteLength/2,se=0;se<Be;se++)me=(me<<5)-me+ee[se],me|=0;return me},G=e.__addimage__.validateStringAsBase64=function(ee){(ee=ee||"").toString().trim();var se=!0;return ee.length===0&&(se=!1),ee.length%4!=0&&(se=!1),/^[A-Za-z0-9+/]+$/.test(ee.substr(0,ee.length-2))===!1&&(se=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(ee.substr(-2))===!1&&(se=!1),se},K=e.__addimage__.extractImageFromDataUrl=function(ee){var se=(ee=ee||"").split("base64,"),Be=null;if(se.length===2){var me=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(se[0]);Array.isArray(me)&&(Be={mimeType:me[1],charset:me[2],data:se[1]})}return Be},Z=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(ee){return Z()&&ee instanceof ArrayBuffer};var $=e.__addimage__.isArrayBufferView=function(ee){return Z()&&typeof Uint32Array<"u"&&(ee instanceof Int8Array||ee instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&ee instanceof Uint8ClampedArray||ee instanceof Int16Array||ee instanceof Uint16Array||ee instanceof Int32Array||ee instanceof Uint32Array||ee instanceof Float32Array||ee instanceof Float64Array)},he=e.__addimage__.binaryStringToUint8Array=function(ee){for(var se=ee.length,Be=new Uint8Array(se),me=0;me<se;me++)Be[me]=ee.charCodeAt(me);return Be},fe=e.__addimage__.arrayBufferToBinaryString=function(ee){for(var se="",Be=$(ee)?ee:new Uint8Array(ee),me=0;me<Be.length;me+=8192)se+=String.fromCharCode.apply(null,Be.subarray(me,me+8192));return se};e.addImage=function(){var ee,se,Be,me,Pe,ge,Qe,Te,tt;if(typeof arguments[1]=="number"?(se=t,Be=arguments[1],me=arguments[2],Pe=arguments[3],ge=arguments[4],Qe=arguments[5],Te=arguments[6],tt=arguments[7]):(se=arguments[1],Be=arguments[2],me=arguments[3],Pe=arguments[4],ge=arguments[5],Qe=arguments[6],Te=arguments[7],tt=arguments[8]),qi(ee=arguments[0])==="object"&&!E(ee)&&"imageData"in ee){var Oe=ee;ee=Oe.imageData,se=Oe.format||se||t,Be=Oe.x||Be||0,me=Oe.y||me||0,Pe=Oe.w||Oe.width||Pe,ge=Oe.h||Oe.height||ge,Qe=Oe.alias||Qe,Te=Oe.compression||Te,tt=Oe.rotation||Oe.angle||tt}var Mt=this.internal.getFilters();if(Te===void 0&&Mt.indexOf("FlateEncode")!==-1&&(Te="SLOW"),isNaN(Be)||isNaN(me))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var ne=_e.call(this,ee,se,Qe,Te);return Q.call(this,Be,me,Pe,ge,ne,tt),this};var _e=function(ee,se,Be,me){var Pe,ge,Qe;if(typeof ee=="string"&&s(ee)===t){ee=unescape(ee);var Te=ue(ee,!1);(Te!==""||(Te=e.loadFile(ee,!0))!==void 0)&&(ee=Te)}if(E(ee)&&(ee=w(ee,se)),se=s(ee,se),!p(se))throw new Error("addImage does not support files of type '"+se+"', please ensure that a plugin for '"+se+"' support is added.");if(((Qe=Be)==null||Qe.length===0)&&(Be=function(tt){return typeof tt=="string"||$(tt)?O(tt):$(tt.data)?O(tt.data):null}(ee)),(Pe=x.call(this,Be))||(Z()&&(ee instanceof Uint8Array||se==="RGBA"||(ge=ee,ee=he(ee))),Pe=this["process"+se.toUpperCase()](ee,_.call(this),Be,function(tt){return tt&&typeof tt=="string"&&(tt=tt.toUpperCase()),tt in e.image_compression?tt:M.NONE}(me),ge)),!Pe)throw new Error("An unknown error occurred whilst processing the image.");return Pe},ue=e.__addimage__.convertBase64ToBinaryString=function(ee,se){var Be;se=typeof se!="boolean"||se;var me,Pe="";if(typeof ee=="string"){me=(Be=K(ee))!==null?Be.data:ee;try{Pe=Hf(me)}catch(ge){if(se)throw G(me)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ge.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Pe};e.getImageProperties=function(ee){var se,Be,me="";if(E(ee)&&(ee=w(ee)),typeof ee=="string"&&s(ee)===t&&((me=ue(ee,!1))===""&&(me=e.loadFile(ee)||""),ee=me),Be=s(ee),!p(Be))throw new Error("addImage does not support files of type '"+Be+"', please ensure that a plugin for '"+Be+"' support is added.");if(!Z()||ee instanceof Uint8Array||(ee=he(ee)),!(se=this["process"+Be.toUpperCase()](ee)))throw new Error("An unknown error occurred whilst processing the image");return se.fileType=Be,se}})(Nn.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};Nn.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var s,l,c,h=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,d=this.internal.getPageInfoByObjId(r.objId),_=r.pageContext.annotations,p=!1,E=0;E<_.length&&!p;E++)switch((s=_[E]).type){case"link":(t(s.options.url)||t(s.options.pageNumber))&&(p=!0);break;case"reference":case"text":case"freetext":p=!0}if(p!=0){this.internal.write("/Annots [");for(var w=0;w<_.length;w++){s=_[w];var x=this.internal.pdfEscape,k=this.internal.getEncryptor(r.objId);switch(s.type){case"reference":this.internal.write(" "+s.object.objId+" 0 R ");break;case"text":var Q=this.internal.newAdditionalObject(),R=this.internal.newAdditionalObject(),M=this.internal.getEncryptor(Q.objId),O=s.title||"Note";c="<</Type /Annot /Subtype /Text "+(l="/Rect ["+h(s.bounds.x)+" "+a(s.bounds.y+s.bounds.h)+" "+h(s.bounds.x+s.bounds.w)+" "+a(s.bounds.y)+"] ")+"/Contents ("+x(M(s.contents))+")",c+=" /Popup "+R.objId+" 0 R",c+=" /P "+d.objId+" 0 R",c+=" /T ("+x(M(O))+") >>",Q.content=c;var G=Q.objId+" 0 R";c="<</Type /Annot /Subtype /Popup "+(l="/Rect ["+h(s.bounds.x+30)+" "+a(s.bounds.y+s.bounds.h)+" "+h(s.bounds.x+s.bounds.w+30)+" "+a(s.bounds.y)+"] ")+" /Parent "+G,s.open&&(c+=" /Open true"),c+=" >>",R.content=c,this.internal.write(Q.objId,"0 R",R.objId,"0 R");break;case"freetext":l="/Rect ["+h(s.bounds.x)+" "+a(s.bounds.y)+" "+h(s.bounds.x+s.bounds.w)+" "+a(s.bounds.y+s.bounds.h)+"] ";var K=s.color||"#000000";c="<</Type /Annot /Subtype /FreeText "+l+"/Contents ("+x(k(s.contents))+")",c+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+K+")",c+=" /Border [0 0 0]",c+=" >>",this.internal.write(c);break;case"link":if(s.options.name){var Z=this.annotations._nameMap[s.options.name];s.options.pageNumber=Z.page,s.options.top=Z.y}else s.options.top||(s.options.top=0);if(l="/Rect ["+s.finalBounds.x+" "+s.finalBounds.y+" "+s.finalBounds.w+" "+s.finalBounds.h+"] ",c="",s.options.url)c="<</Type /Annot /Subtype /Link "+l+"/Border [0 0 0] /A <</S /URI /URI ("+x(k(s.options.url))+") >>";else if(s.options.pageNumber)switch(c="<</Type /Annot /Subtype /Link "+l+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(s.options.pageNumber).objId+" 0 R",s.options.magFactor=s.options.magFactor||"XYZ",s.options.magFactor){case"Fit":c+=" /Fit]";break;case"FitH":c+=" /FitH "+s.options.top+"]";break;case"FitV":s.options.left=s.options.left||0,c+=" /FitV "+s.options.left+"]";break;case"XYZ":default:var $=a(s.options.top);s.options.left=s.options.left||0,s.options.zoom===void 0&&(s.options.zoom=0),c+=" /XYZ "+s.options.left+" "+$+" "+s.options.zoom+"]"}c!=""&&(c+=" >>",this.internal.write(c))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var s=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":s.pageContext.annotations.push(r)}},e.link=function(r,s,l,c,h){var a=this.internal.getCurrentPageInfo(),d=this.internal.getCoordinateString,_=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:d(r),y:_(s),w:d(r+l),h:_(s+c)},options:h,type:"link"})},e.textWithLink=function(r,s,l,c){var h,a,d=this.getTextWidth(r),_=this.internal.getLineHeight()/this.internal.scaleFactor;if(c.maxWidth!==void 0){a=c.maxWidth;var p=this.splitTextToSize(r,a).length;h=Math.ceil(_*p)}else a=d,h=_;return this.text(r,s,l,c),l+=.2*_,c.align==="center"&&(s-=d/2),c.align==="right"&&(s-=d),this.link(s,l-_,a,h,c),d},e.getTextWidth=function(r){var s=this.internal.getFontSize();return this.getStringUnitWidth(r)*s/this.internal.scaleFactor}}(Nn.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},s={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},l=[1570,1571,1573,1575];e.__arabicParser__={};var c=e.__arabicParser__.isInArabicSubstitutionA=function(Q){return t[Q.charCodeAt(0)]!==void 0},h=e.__arabicParser__.isArabicLetter=function(Q){return typeof Q=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(Q)},a=e.__arabicParser__.isArabicEndLetter=function(Q){return h(Q)&&c(Q)&&t[Q.charCodeAt(0)].length<=2},d=e.__arabicParser__.isArabicAlfLetter=function(Q){return h(Q)&&l.indexOf(Q.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(Q){return h(Q)&&c(Q)&&t[Q.charCodeAt(0)].length>=1};var _=e.__arabicParser__.arabicLetterHasFinalForm=function(Q){return h(Q)&&c(Q)&&t[Q.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(Q){return h(Q)&&c(Q)&&t[Q.charCodeAt(0)].length>=3};var p=e.__arabicParser__.arabicLetterHasMedialForm=function(Q){return h(Q)&&c(Q)&&t[Q.charCodeAt(0)].length==4},E=e.__arabicParser__.resolveLigatures=function(Q){var R=0,M=r,O="",G=0;for(R=0;R<Q.length;R+=1)M[Q.charCodeAt(R)]!==void 0?(G++,typeof(M=M[Q.charCodeAt(R)])=="number"&&(O+=String.fromCharCode(M),M=r,G=0),R===Q.length-1&&(M=r,O+=Q.charAt(R-(G-1)),R-=G-1,G=0)):(M=r,O+=Q.charAt(R-G),R-=G,G=0);return O};e.__arabicParser__.isArabicDiacritic=function(Q){return Q!==void 0&&s[Q.charCodeAt(0)]!==void 0};var w=e.__arabicParser__.getCorrectForm=function(Q,R,M){return h(Q)?c(Q)===!1?-1:!_(Q)||!h(R)&&!h(M)||!h(M)&&a(R)||a(Q)&&!h(R)||a(Q)&&d(R)||a(Q)&&a(R)?0:p(Q)&&h(R)&&!a(R)&&h(M)&&_(M)?3:a(Q)||!h(M)?1:2:-1},x=function(Q){var R=0,M=0,O=0,G="",K="",Z="",$=(Q=Q||"").split("\\s+"),he=[];for(R=0;R<$.length;R+=1){for(he.push(""),M=0;M<$[R].length;M+=1)G=$[R][M],K=$[R][M-1],Z=$[R][M+1],h(G)?(O=w(G,K,Z),he[R]+=O!==-1?String.fromCharCode(t[G.charCodeAt(0)][O]):G):he[R]+=G;he[R]=E(he[R])}return he.join(" ")},k=e.__arabicParser__.processArabic=e.processArabic=function(){var Q,R=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,M=[];if(Array.isArray(R)){var O=0;for(M=[],O=0;O<R.length;O+=1)Array.isArray(R[O])?M.push([x(R[O][0]),R[O][1],R[O][2]]):M.push([x(R[O])]);Q=M}else Q=x(R);return typeof arguments[0]=="string"?Q:(arguments[0].text=Q,arguments[0])};e.events.push(["preProcessText",k])}(Nn.API),Nn.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(a){r=a}});var s=150;Object.defineProperty(this,"width",{get:function(){return s},set:function(a){s=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=s+1)}});var l=300;Object.defineProperty(this,"height",{get:function(){return l},set:function(a){l=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=l+1)}});var c=[];Object.defineProperty(this,"childNodes",{get:function(){return c},set:function(a){c=a}});var h={};Object.defineProperty(this,"style",{get:function(){return h},set:function(a){h=a}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,s){var l;if((r=r||"2d")!=="2d")return null;for(l in s)this.pdf.context2d.hasOwnProperty(l)&&(this.pdf.context2d[l]=s[l]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Nn.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,s=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),l.call(this))},l=function(){this.internal.__cell__.lastCell=new c,this.internal.__cell__.pages=1},c=function(){var d=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return d},set:function(Q){d=Q}});var _=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return _},set:function(Q){_=Q}});var p=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return p},set:function(Q){p=Q}});var E=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return E},set:function(Q){E=Q}});var w=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return w},set:function(Q){w=Q}});var x=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return x},set:function(Q){x=Q}});var k=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return k},set:function(Q){k=Q}}),this};c.prototype.clone=function(){return new c(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},c.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(d){return s.call(this),this.internal.__cell__.headerFunction=typeof d=="function"?d:void 0,this},e.getTextDimensions=function(d,_){s.call(this);var p=(_=_||{}).fontSize||this.getFontSize(),E=_.font||this.getFont(),w=_.scaleFactor||this.internal.scaleFactor,x=0,k=0,Q=0,R=this;if(!Array.isArray(d)&&typeof d!="string"){if(typeof d!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");d=String(d)}var M=_.maxWidth;M>0?typeof d=="string"?d=this.splitTextToSize(d,M):Object.prototype.toString.call(d)==="[object Array]"&&(d=d.reduce(function(G,K){return G.concat(R.splitTextToSize(K,M))},[])):d=Array.isArray(d)?d:[d];for(var O=0;O<d.length;O++)x<(Q=this.getStringUnitWidth(d[O],{font:E})*p)&&(x=Q);return x!==0&&(k=d.length),{w:x/=w,h:Math.max((k*p*this.getLineHeightFactor()-p*(this.getLineHeightFactor()-1))/w,0)}},e.cellAddPage=function(){s.call(this),this.addPage();var d=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new c(d.left,d.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var h=e.cell=function(){var d;d=arguments[0]instanceof c?arguments[0]:new c(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),s.call(this);var _=this.internal.__cell__.lastCell,p=this.internal.__cell__.padding,E=this.internal.__cell__.margins||t,w=this.internal.__cell__.tableHeaderRow,x=this.internal.__cell__.printHeaders;return _.lineNumber!==void 0&&(_.lineNumber===d.lineNumber?(d.x=(_.x||0)+(_.width||0),d.y=_.y||0):_.y+_.height+d.height+E.bottom>this.getPageHeight()?(this.cellAddPage(),d.y=E.top,x&&w&&(this.printHeaderRow(d.lineNumber,!0),d.y+=w[0].height)):d.y=_.y+_.height||d.y),d.text[0]!==void 0&&(this.rect(d.x,d.y,d.width,d.height,r===!0?"FD":void 0),d.align==="right"?this.text(d.text,d.x+d.width-p,d.y+p,{align:"right",baseline:"top"}):d.align==="center"?this.text(d.text,d.x+d.width/2,d.y+p,{align:"center",baseline:"top",maxWidth:d.width-p-p}):this.text(d.text,d.x+p,d.y+p,{align:"left",baseline:"top",maxWidth:d.width-p-p})),this.internal.__cell__.lastCell=d,this};e.table=function(d,_,p,E,w){if(s.call(this),!p)throw new Error("No data for PDF table.");var x,k,Q,R,M=[],O=[],G=[],K={},Z={},$=[],he=[],fe=(w=w||{}).autoSize||!1,_e=w.printHeaders!==!1,ue=w.css&&w.css["font-size"]!==void 0?16*w.css["font-size"]:w.fontSize||12,ee=w.margins||Object.assign({width:this.getPageWidth()},t),se=typeof w.padding=="number"?w.padding:3,Be=w.headerBackgroundColor||"#c8c8c8",me=w.headerTextColor||"#000";if(l.call(this),this.internal.__cell__.printHeaders=_e,this.internal.__cell__.margins=ee,this.internal.__cell__.table_font_size=ue,this.internal.__cell__.padding=se,this.internal.__cell__.headerBackgroundColor=Be,this.internal.__cell__.headerTextColor=me,this.setFontSize(ue),E==null)O=M=Object.keys(p[0]),G=M.map(function(){return"left"});else if(Array.isArray(E)&&qi(E[0])==="object")for(M=E.map(function(Oe){return Oe.name}),O=E.map(function(Oe){return Oe.prompt||Oe.name||""}),G=E.map(function(Oe){return Oe.align||"left"}),x=0;x<E.length;x+=1)Z[E[x].name]=E[x].width*(19.049976/25.4);else Array.isArray(E)&&typeof E[0]=="string"&&(O=M=E,G=M.map(function(){return"left"}));if(fe||Array.isArray(E)&&typeof E[0]=="string")for(x=0;x<M.length;x+=1){for(K[R=M[x]]=p.map(function(Oe){return Oe[R]}),this.setFont(void 0,"bold"),$.push(this.getTextDimensions(O[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),k=K[R],this.setFont(void 0,"normal"),Q=0;Q<k.length;Q+=1)$.push(this.getTextDimensions(k[Q],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);Z[R]=Math.max.apply(null,$)+se+se,$=[]}if(_e){var Pe={};for(x=0;x<M.length;x+=1)Pe[M[x]]={},Pe[M[x]].text=O[x],Pe[M[x]].align=G[x];var ge=a.call(this,Pe,Z);he=M.map(function(Oe){return new c(d,_,Z[Oe],ge,Pe[Oe].text,void 0,Pe[Oe].align)}),this.setTableHeaderRow(he),this.printHeaderRow(1,!1)}var Qe=E.reduce(function(Oe,Mt){return Oe[Mt.name]=Mt.align,Oe},{});for(x=0;x<p.length;x+=1){"rowStart"in w&&w.rowStart instanceof Function&&w.rowStart({row:x,data:p[x]},this);var Te=a.call(this,p[x],Z);for(Q=0;Q<M.length;Q+=1){var tt=p[x][M[Q]];"cellStart"in w&&w.cellStart instanceof Function&&w.cellStart({row:x,col:Q,data:tt},this),h.call(this,new c(d,_,Z[M[Q]],Te,tt,x+2,Qe[M[Q]]))}}return this.internal.__cell__.table_x=d,this.internal.__cell__.table_y=_,this};var a=function(d,_){var p=this.internal.__cell__.padding,E=this.internal.__cell__.table_font_size,w=this.internal.scaleFactor;return Object.keys(d).map(function(x){var k=d[x];return this.splitTextToSize(k.hasOwnProperty("text")?k.text:k,_[x]-p-p)},this).map(function(x){return this.getLineHeightFactor()*x.length*E/w+p+p},this).reduce(function(x,k){return Math.max(x,k)},0)};e.setTableHeaderRow=function(d){s.call(this),this.internal.__cell__.tableHeaderRow=d},e.printHeaderRow=function(d,_){if(s.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var p;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var E=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new c(E[0],E[1],E[2],E[3],void 0,-1)}this.setFont(void 0,"bold");for(var w=[],x=0;x<this.internal.__cell__.tableHeaderRow.length;x+=1){p=this.internal.__cell__.tableHeaderRow[x].clone(),_&&(p.y=this.internal.__cell__.margins.top||0,w.push(p)),p.lineNumber=d;var k=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),h.call(this,p),this.setTextColor(k)}w.length>0&&this.setTableHeaderRow(w),this.setFont(void 0,"normal"),r=!1}}(Nn.API);var d_={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},p_=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],xg=f_(p_),m_=[100,200,300,400,500,600,700,800,900],$F=f_(m_);function Bg(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(c){return d_[c=c||"normal"]?c:"normal"}(e.style),s=function(c){if(!c)return 400;if(typeof c=="number")return c>=100&&c<=900&&c%100==0?c:400;if(/^\d00$/.test(c))return parseInt(c);switch(c){case"bold":return 700;case"normal":default:return 400}}(e.weight),l=function(c){return typeof xg[c=c||"normal"]=="number"?c:"normal"}(e.stretch);return{family:t,style:r,weight:s,stretch:l,src:e.src||[],ref:e.ref||{name:t,style:[l,r,s].join(" ")}}}function Fy(e,t,r,s){var l;for(l=r;l>=0&&l<t.length;l+=s)if(e[t[l]])return e[t[l]];for(l=r;l>=0&&l<t.length;l-=s)if(e[t[l]])return e[t[l]]}var eS={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Sy={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Iy(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function tS(e,t,r){for(var s=(r=r||{}).defaultFontFamily||"times",l=Object.assign({},eS,r.genericFontFamilies||{}),c=null,h=null,a=0;a<t.length;++a)if(l[(c=Bg(t[a])).family]&&(c.family=l[c.family]),e.hasOwnProperty(c.family)){h=e[c.family];break}if(!(h=h||e[s]))throw new Error("Could not find a font-family for the rule '"+Iy(c)+"' and default family '"+s+"'.");if(h=function(d,_){if(_[d])return _[d];var p=xg[d],E=p<=xg.normal?-1:1,w=Fy(_,p_,p,E);if(!w)throw new Error("Could not find a matching font-stretch value for "+d);return w}(c.stretch,h),h=function(d,_){if(_[d])return _[d];for(var p=d_[d],E=0;E<p.length;++E)if(_[p[E]])return _[p[E]];throw new Error("Could not find a matching font-style for "+d)}(c.style,h),!(h=function(d,_){if(_[d])return _[d];if(d===400&&_[500])return _[500];if(d===500&&_[400])return _[400];var p=$F[d],E=Fy(_,m_,p,d<400?-1:1);if(!E)throw new Error("Could not find a matching font-weight for value "+d);return E}(c.weight,h)))throw new Error("Failed to resolve a font for the rule '"+Iy(c)+"'.");return h}function Ty(e){return e.trimLeft()}function rS(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function nS(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var ip,Uy,Ly,Hm=["times"];(function(e){var t,r,s,l,c,h,a,d,_,p=function(ne){return ne=ne||{},this.isStrokeTransparent=ne.isStrokeTransparent||!1,this.strokeOpacity=ne.strokeOpacity||1,this.strokeStyle=ne.strokeStyle||"#000000",this.fillStyle=ne.fillStyle||"#000000",this.isFillTransparent=ne.isFillTransparent||!1,this.fillOpacity=ne.fillOpacity||1,this.font=ne.font||"10px sans-serif",this.textBaseline=ne.textBaseline||"alphabetic",this.textAlign=ne.textAlign||"left",this.lineWidth=ne.lineWidth||1,this.lineJoin=ne.lineJoin||"miter",this.lineCap=ne.lineCap||"butt",this.path=ne.path||[],this.transform=ne.transform!==void 0?ne.transform.clone():new d,this.globalCompositeOperation=ne.globalCompositeOperation||"normal",this.globalAlpha=ne.globalAlpha||1,this.clip_path=ne.clip_path||[],this.currentPoint=ne.currentPoint||new h,this.miterLimit=ne.miterLimit||10,this.lastPoint=ne.lastPoint||new h,this.lineDashOffset=ne.lineDashOffset||0,this.lineDash=ne.lineDash||[],this.margin=ne.margin||[0,0,0,0],this.prevPageLastElemOffset=ne.prevPageLastElemOffset||0,this.ignoreClearRect=typeof ne.ignoreClearRect!="boolean"||ne.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new E(this),t=this.internal.f2,r=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,l=this.internal.getHorizontalCoordinate,c=this.internal.getVerticalCoordinate,h=this.internal.Point,a=this.internal.Rectangle,d=this.internal.Matrix,_=new p}]);var E=function(ne){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Se=ne;Object.defineProperty(this,"pdf",{get:function(){return Se}});var ke=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return ke},set:function(Lt){ke=Boolean(Lt)}});var Ke=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Ke},set:function(Lt){Ke=Boolean(Lt)}});var at=0;Object.defineProperty(this,"posX",{get:function(){return at},set:function(Lt){isNaN(Lt)||(at=Lt)}});var dt=0;Object.defineProperty(this,"posY",{get:function(){return dt},set:function(Lt){isNaN(Lt)||(dt=Lt)}}),Object.defineProperty(this,"margin",{get:function(){return _.margin},set:function(Lt){var ze;typeof Lt=="number"?ze=[Lt,Lt,Lt,Lt]:((ze=new Array(4))[0]=Lt[0],ze[1]=Lt.length>=2?Lt[1]:ze[0],ze[2]=Lt.length>=3?Lt[2]:ze[0],ze[3]=Lt.length>=4?Lt[3]:ze[1]),_.margin=ze}});var Bt=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Bt},set:function(Lt){Bt=Lt}});var Ge=0;Object.defineProperty(this,"lastBreak",{get:function(){return Ge},set:function(Lt){Ge=Lt}});var rt=[];Object.defineProperty(this,"pageBreaks",{get:function(){return rt},set:function(Lt){rt=Lt}}),Object.defineProperty(this,"ctx",{get:function(){return _},set:function(Lt){Lt instanceof p&&(_=Lt)}}),Object.defineProperty(this,"path",{get:function(){return _.path},set:function(Lt){_.path=Lt}});var Ut=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ut},set:function(Lt){Ut=Lt}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Lt){var ze;ze=w(Lt),this.ctx.fillStyle=ze.style,this.ctx.isFillTransparent=ze.a===0,this.ctx.fillOpacity=ze.a,this.pdf.setFillColor(ze.r,ze.g,ze.b,{a:ze.a}),this.pdf.setTextColor(ze.r,ze.g,ze.b,{a:ze.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Lt){var ze=w(Lt);this.ctx.strokeStyle=ze.style,this.ctx.isStrokeTransparent=ze.a===0,this.ctx.strokeOpacity=ze.a,ze.a===0?this.pdf.setDrawColor(255,255,255):(ze.a,this.pdf.setDrawColor(ze.r,ze.g,ze.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Lt){["butt","round","square"].indexOf(Lt)!==-1&&(this.ctx.lineCap=Lt,this.pdf.setLineCap(Lt))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Lt){isNaN(Lt)||(this.ctx.lineWidth=Lt,this.pdf.setLineWidth(Lt))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Lt){["bevel","round","miter"].indexOf(Lt)!==-1&&(this.ctx.lineJoin=Lt,this.pdf.setLineJoin(Lt))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Lt){isNaN(Lt)||(this.ctx.miterLimit=Lt,this.pdf.setMiterLimit(Lt))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Lt){this.ctx.textBaseline=Lt}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Lt){["right","end","center","left","start"].indexOf(Lt)!==-1&&(this.ctx.textAlign=Lt)}});var ht=null;function Nt(Lt,ze){if(ht===null){var gr=function(sr){var Ht=[];return Object.keys(sr).forEach(function(fr){sr[fr].forEach(function(Br){var vr=null;switch(Br){case"bold":vr={family:fr,weight:"bold"};break;case"italic":vr={family:fr,style:"italic"};break;case"bolditalic":vr={family:fr,weight:"bold",style:"italic"};break;case"":case"normal":vr={family:fr}}vr!==null&&(vr.ref={name:fr,style:Br},Ht.push(vr))})}),Ht}(Lt.getFontList());ht=function(sr){for(var Ht={},fr=0;fr<sr.length;++fr){var Br=Bg(sr[fr]),vr=Br.family,Gr=Br.stretch,rr=Br.style,xr=Br.weight;Ht[vr]=Ht[vr]||{},Ht[vr][Gr]=Ht[vr][Gr]||{},Ht[vr][Gr][rr]=Ht[vr][Gr][rr]||{},Ht[vr][Gr][rr][xr]=Br}return Ht}(gr.concat(ze))}return ht}var dr=null;Object.defineProperty(this,"fontFaces",{get:function(){return dr},set:function(Lt){ht=null,dr=Lt}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Lt){var ze;if(this.ctx.font=Lt,(ze=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Lt))!==null){var gr=ze[1],sr=(ze[2],ze[3]),Ht=ze[4],fr=(ze[5],ze[6]),Br=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ht)[2];Ht=Math.floor(Br==="px"?parseFloat(Ht)*this.pdf.internal.scaleFactor:Br==="em"?parseFloat(Ht)*this.pdf.getFontSize():parseFloat(Ht)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ht);var vr=function(nt){var bt,Ct,jt=[],er=nt.trim();if(er==="")return Hm;if(er in Sy)return[Sy[er]];for(;er!=="";){switch(Ct=null,bt=(er=Ty(er)).charAt(0)){case'"':case"'":Ct=rS(er.substring(1),bt);break;default:Ct=nS(er)}if(Ct===null||(jt.push(Ct[0]),(er=Ty(Ct[1]))!==""&&er.charAt(0)!==","))return Hm;er=er.replace(/^,/,"")}return jt}(fr);if(this.fontFaces){var Gr=tS(Nt(this.pdf,this.fontFaces),vr.map(function(nt){return{family:nt,stretch:"normal",weight:sr,style:gr}}));this.pdf.setFont(Gr.ref.name,Gr.ref.style)}else{var rr="";(sr==="bold"||parseInt(sr,10)>=700||gr==="bold")&&(rr="bold"),gr==="italic"&&(rr+="italic"),rr.length===0&&(rr="normal");for(var xr="",Zr={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},pn=0;pn<vr.length;pn++){if(this.pdf.internal.getFont(vr[pn],rr,{noFallback:!0,disableWarning:!0})!==void 0){xr=vr[pn];break}if(rr==="bolditalic"&&this.pdf.internal.getFont(vr[pn],"bold",{noFallback:!0,disableWarning:!0})!==void 0)xr=vr[pn],rr="bold";else if(this.pdf.internal.getFont(vr[pn],"normal",{noFallback:!0,disableWarning:!0})!==void 0){xr=vr[pn],rr="normal";break}}if(xr===""){for(var vt=0;vt<vr.length;vt++)if(Zr[vr[vt]]){xr=Zr[vr[vt]];break}}xr=xr===""?"Times":xr,this.pdf.setFont(xr,rr)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Lt){this.ctx.globalCompositeOperation=Lt}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Lt){this.ctx.globalAlpha=Lt}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Lt){this.ctx.lineDashOffset=Lt,Mt.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Lt){this.ctx.lineDash=Lt,Mt.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Lt){this.ctx.ignoreClearRect=Boolean(Lt)}})};E.prototype.setLineDash=function(ne){this.lineDash=ne},E.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},E.prototype.fill=function(){K.call(this,"fill",!1)},E.prototype.stroke=function(){K.call(this,"stroke",!1)},E.prototype.beginPath=function(){this.path=[{type:"begin"}]},E.prototype.moveTo=function(ne,Se){if(isNaN(ne)||isNaN(Se))throw cs.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var ke=this.ctx.transform.applyToPoint(new h(ne,Se));this.path.push({type:"mt",x:ke.x,y:ke.y}),this.ctx.lastPoint=new h(ne,Se)},E.prototype.closePath=function(){var ne=new h(0,0),Se=0;for(Se=this.path.length-1;Se!==-1;Se--)if(this.path[Se].type==="begin"&&qi(this.path[Se+1])==="object"&&typeof this.path[Se+1].x=="number"){ne=new h(this.path[Se+1].x,this.path[Se+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new h(ne.x,ne.y)},E.prototype.lineTo=function(ne,Se){if(isNaN(ne)||isNaN(Se))throw cs.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var ke=this.ctx.transform.applyToPoint(new h(ne,Se));this.path.push({type:"lt",x:ke.x,y:ke.y}),this.ctx.lastPoint=new h(ke.x,ke.y)},E.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),K.call(this,null,!0)},E.prototype.quadraticCurveTo=function(ne,Se,ke,Ke){if(isNaN(ke)||isNaN(Ke)||isNaN(ne)||isNaN(Se))throw cs.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var at=this.ctx.transform.applyToPoint(new h(ke,Ke)),dt=this.ctx.transform.applyToPoint(new h(ne,Se));this.path.push({type:"qct",x1:dt.x,y1:dt.y,x:at.x,y:at.y}),this.ctx.lastPoint=new h(at.x,at.y)},E.prototype.bezierCurveTo=function(ne,Se,ke,Ke,at,dt){if(isNaN(at)||isNaN(dt)||isNaN(ne)||isNaN(Se)||isNaN(ke)||isNaN(Ke))throw cs.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Bt=this.ctx.transform.applyToPoint(new h(at,dt)),Ge=this.ctx.transform.applyToPoint(new h(ne,Se)),rt=this.ctx.transform.applyToPoint(new h(ke,Ke));this.path.push({type:"bct",x1:Ge.x,y1:Ge.y,x2:rt.x,y2:rt.y,x:Bt.x,y:Bt.y}),this.ctx.lastPoint=new h(Bt.x,Bt.y)},E.prototype.arc=function(ne,Se,ke,Ke,at,dt){if(isNaN(ne)||isNaN(Se)||isNaN(ke)||isNaN(Ke)||isNaN(at))throw cs.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(dt=Boolean(dt),!this.ctx.transform.isIdentity){var Bt=this.ctx.transform.applyToPoint(new h(ne,Se));ne=Bt.x,Se=Bt.y;var Ge=this.ctx.transform.applyToPoint(new h(0,ke)),rt=this.ctx.transform.applyToPoint(new h(0,0));ke=Math.sqrt(Math.pow(Ge.x-rt.x,2)+Math.pow(Ge.y-rt.y,2))}Math.abs(at-Ke)>=2*Math.PI&&(Ke=0,at=2*Math.PI),this.path.push({type:"arc",x:ne,y:Se,radius:ke,startAngle:Ke,endAngle:at,counterclockwise:dt})},E.prototype.arcTo=function(ne,Se,ke,Ke,at){throw new Error("arcTo not implemented.")},E.prototype.rect=function(ne,Se,ke,Ke){if(isNaN(ne)||isNaN(Se)||isNaN(ke)||isNaN(Ke))throw cs.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(ne,Se),this.lineTo(ne+ke,Se),this.lineTo(ne+ke,Se+Ke),this.lineTo(ne,Se+Ke),this.lineTo(ne,Se),this.lineTo(ne+ke,Se),this.lineTo(ne,Se)},E.prototype.fillRect=function(ne,Se,ke,Ke){if(isNaN(ne)||isNaN(Se)||isNaN(ke)||isNaN(Ke))throw cs.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!x.call(this)){var at={};this.lineCap!=="butt"&&(at.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(at.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(ne,Se,ke,Ke),this.fill(),at.hasOwnProperty("lineCap")&&(this.lineCap=at.lineCap),at.hasOwnProperty("lineJoin")&&(this.lineJoin=at.lineJoin)}},E.prototype.strokeRect=function(ne,Se,ke,Ke){if(isNaN(ne)||isNaN(Se)||isNaN(ke)||isNaN(Ke))throw cs.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");k.call(this)||(this.beginPath(),this.rect(ne,Se,ke,Ke),this.stroke())},E.prototype.clearRect=function(ne,Se,ke,Ke){if(isNaN(ne)||isNaN(Se)||isNaN(ke)||isNaN(Ke))throw cs.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(ne,Se,ke,Ke))},E.prototype.save=function(ne){ne=typeof ne!="boolean"||ne;for(var Se=this.pdf.internal.getCurrentPageInfo().pageNumber,ke=0;ke<this.pdf.internal.getNumberOfPages();ke++)this.pdf.setPage(ke+1),this.pdf.internal.out("q");if(this.pdf.setPage(Se),ne){this.ctx.fontSize=this.pdf.internal.getFontSize();var Ke=new p(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Ke}},E.prototype.restore=function(ne){ne=typeof ne!="boolean"||ne;for(var Se=this.pdf.internal.getCurrentPageInfo().pageNumber,ke=0;ke<this.pdf.internal.getNumberOfPages();ke++)this.pdf.setPage(ke+1),this.pdf.internal.out("Q");this.pdf.setPage(Se),ne&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},E.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var w=function(ne){var Se,ke,Ke,at;if(ne.isCanvasGradient===!0&&(ne=ne.getColor()),!ne)return{r:0,g:0,b:0,a:0,style:ne};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(ne))Se=0,ke=0,Ke=0,at=0;else{var dt=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(ne);if(dt!==null)Se=parseInt(dt[1]),ke=parseInt(dt[2]),Ke=parseInt(dt[3]),at=1;else if((dt=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(ne))!==null)Se=parseInt(dt[1]),ke=parseInt(dt[2]),Ke=parseInt(dt[3]),at=parseFloat(dt[4]);else{if(at=1,typeof ne=="string"&&ne.charAt(0)!=="#"){var Bt=new o_(ne);ne=Bt.ok?Bt.toHex():"#000000"}ne.length===4?(Se=ne.substring(1,2),Se+=Se,ke=ne.substring(2,3),ke+=ke,Ke=ne.substring(3,4),Ke+=Ke):(Se=ne.substring(1,3),ke=ne.substring(3,5),Ke=ne.substring(5,7)),Se=parseInt(Se,16),ke=parseInt(ke,16),Ke=parseInt(Ke,16)}}return{r:Se,g:ke,b:Ke,a:at,style:ne}},x=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},k=function(){return Boolean(this.ctx.isStrokeTransparent||this.globalAlpha==0)};E.prototype.fillText=function(ne,Se,ke,Ke){if(isNaN(Se)||isNaN(ke)||typeof ne!="string")throw cs.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Ke=isNaN(Ke)?void 0:Ke,!x.call(this)){var at=Te(this.ctx.transform.rotation),dt=this.ctx.transform.scaleX;se.call(this,{text:ne,x:Se,y:ke,scale:dt,angle:at,align:this.textAlign,maxWidth:Ke})}},E.prototype.strokeText=function(ne,Se,ke,Ke){if(isNaN(Se)||isNaN(ke)||typeof ne!="string")throw cs.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!k.call(this)){Ke=isNaN(Ke)?void 0:Ke;var at=Te(this.ctx.transform.rotation),dt=this.ctx.transform.scaleX;se.call(this,{text:ne,x:Se,y:ke,scale:dt,renderingMode:"stroke",angle:at,align:this.textAlign,maxWidth:Ke})}},E.prototype.measureText=function(ne){if(typeof ne!="string")throw cs.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Se=this.pdf,ke=this.pdf.internal.scaleFactor,Ke=Se.internal.getFontSize(),at=Se.getStringUnitWidth(ne)*Ke/Se.internal.scaleFactor,dt=function(Bt){var Ge=(Bt=Bt||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Ge}}),this};return new dt({width:at*=Math.round(96*ke/72*1e4)/1e4})},E.prototype.scale=function(ne,Se){if(isNaN(ne)||isNaN(Se))throw cs.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var ke=new d(ne,0,0,Se,0,0);this.ctx.transform=this.ctx.transform.multiply(ke)},E.prototype.rotate=function(ne){if(isNaN(ne))throw cs.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Se=new d(Math.cos(ne),Math.sin(ne),-Math.sin(ne),Math.cos(ne),0,0);this.ctx.transform=this.ctx.transform.multiply(Se)},E.prototype.translate=function(ne,Se){if(isNaN(ne)||isNaN(Se))throw cs.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var ke=new d(1,0,0,1,ne,Se);this.ctx.transform=this.ctx.transform.multiply(ke)},E.prototype.transform=function(ne,Se,ke,Ke,at,dt){if(isNaN(ne)||isNaN(Se)||isNaN(ke)||isNaN(Ke)||isNaN(at)||isNaN(dt))throw cs.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Bt=new d(ne,Se,ke,Ke,at,dt);this.ctx.transform=this.ctx.transform.multiply(Bt)},E.prototype.setTransform=function(ne,Se,ke,Ke,at,dt){ne=isNaN(ne)?1:ne,Se=isNaN(Se)?0:Se,ke=isNaN(ke)?0:ke,Ke=isNaN(Ke)?1:Ke,at=isNaN(at)?0:at,dt=isNaN(dt)?0:dt,this.ctx.transform=new d(ne,Se,ke,Ke,at,dt)};var Q=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};E.prototype.drawImage=function(ne,Se,ke,Ke,at,dt,Bt,Ge,rt){var Ut=this.pdf.getImageProperties(ne),ht=1,Nt=1,dr=1,Lt=1;Ke!==void 0&&Ge!==void 0&&(dr=Ge/Ke,Lt=rt/at,ht=Ut.width/Ke*Ge/Ke,Nt=Ut.height/at*rt/at),dt===void 0&&(dt=Se,Bt=ke,Se=0,ke=0),Ke!==void 0&&Ge===void 0&&(Ge=Ke,rt=at),Ke===void 0&&Ge===void 0&&(Ge=Ut.width,rt=Ut.height);for(var ze,gr=this.ctx.transform.decompose(),sr=Te(gr.rotate.shx),Ht=new d,fr=(Ht=(Ht=(Ht=Ht.multiply(gr.translate)).multiply(gr.skew)).multiply(gr.scale)).applyToRectangle(new a(dt-Se*dr,Bt-ke*Lt,Ke*ht,at*Nt)),Br=R.call(this,fr),vr=[],Gr=0;Gr<Br.length;Gr+=1)vr.indexOf(Br[Gr])===-1&&vr.push(Br[Gr]);if(G(vr),this.autoPaging)for(var rr=vr[0],xr=vr[vr.length-1],Zr=rr;Zr<xr+1;Zr++){this.pdf.setPage(Zr);var pn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],vt=Zr===1?this.posY+this.margin[0]:this.margin[0],nt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],bt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ct=Zr===1?0:nt+(Zr-2)*bt;if(this.ctx.clip_path.length!==0){var jt=this.path;ze=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=O(ze,this.posX+this.margin[3],-Ct+vt+this.ctx.prevPageLastElemOffset),Z.call(this,"fill",!0),this.path=jt}var er=JSON.parse(JSON.stringify(fr));er=O([er],this.posX+this.margin[3],-Ct+vt+this.ctx.prevPageLastElemOffset)[0];var Vr=(Zr>rr||Zr<xr)&&Q.call(this);Vr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],pn,bt,null).clip().discardPath()),this.pdf.addImage(ne,"JPEG",er.x,er.y,er.w,er.h,null,null,sr),Vr&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(ne,"JPEG",fr.x,fr.y,fr.w,fr.h,null,null,sr)};var R=function(ne,Se,ke){var Ke=[];Se=Se||this.pdf.internal.pageSize.width,ke=ke||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var at=this.posY+this.ctx.prevPageLastElemOffset;switch(ne.type){default:case"mt":case"lt":Ke.push(Math.floor((ne.y+at)/ke)+1);break;case"arc":Ke.push(Math.floor((ne.y+at-ne.radius)/ke)+1),Ke.push(Math.floor((ne.y+at+ne.radius)/ke)+1);break;case"qct":var dt=tt(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ne.x1,ne.y1,ne.x,ne.y);Ke.push(Math.floor((dt.y+at)/ke)+1),Ke.push(Math.floor((dt.y+dt.h+at)/ke)+1);break;case"bct":var Bt=Oe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,ne.x1,ne.y1,ne.x2,ne.y2,ne.x,ne.y);Ke.push(Math.floor((Bt.y+at)/ke)+1),Ke.push(Math.floor((Bt.y+Bt.h+at)/ke)+1);break;case"rect":Ke.push(Math.floor((ne.y+at)/ke)+1),Ke.push(Math.floor((ne.y+ne.h+at)/ke)+1)}for(var Ge=0;Ge<Ke.length;Ge+=1)for(;this.pdf.internal.getNumberOfPages()<Ke[Ge];)M.call(this);return Ke},M=function(){var ne=this.fillStyle,Se=this.strokeStyle,ke=this.font,Ke=this.lineCap,at=this.lineWidth,dt=this.lineJoin;this.pdf.addPage(),this.fillStyle=ne,this.strokeStyle=Se,this.font=ke,this.lineCap=Ke,this.lineWidth=at,this.lineJoin=dt},O=function(ne,Se,ke){for(var Ke=0;Ke<ne.length;Ke++)switch(ne[Ke].type){case"bct":ne[Ke].x2+=Se,ne[Ke].y2+=ke;case"qct":ne[Ke].x1+=Se,ne[Ke].y1+=ke;case"mt":case"lt":case"arc":default:ne[Ke].x+=Se,ne[Ke].y+=ke}return ne},G=function(ne){return ne.sort(function(Se,ke){return Se-ke})},K=function(ne,Se){for(var ke,Ke,at=this.fillStyle,dt=this.strokeStyle,Bt=this.lineCap,Ge=this.lineWidth,rt=Math.abs(Ge*this.ctx.transform.scaleX),Ut=this.lineJoin,ht=JSON.parse(JSON.stringify(this.path)),Nt=JSON.parse(JSON.stringify(this.path)),dr=[],Lt=0;Lt<Nt.length;Lt++)if(Nt[Lt].x!==void 0)for(var ze=R.call(this,Nt[Lt]),gr=0;gr<ze.length;gr+=1)dr.indexOf(ze[gr])===-1&&dr.push(ze[gr]);for(var sr=0;sr<dr.length;sr++)for(;this.pdf.internal.getNumberOfPages()<dr[sr];)M.call(this);if(G(dr),this.autoPaging)for(var Ht=dr[0],fr=dr[dr.length-1],Br=Ht;Br<fr+1;Br++){this.pdf.setPage(Br),this.fillStyle=at,this.strokeStyle=dt,this.lineCap=Bt,this.lineWidth=rt,this.lineJoin=Ut;var vr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Gr=Br===1?this.posY+this.margin[0]:this.margin[0],rr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],xr=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Zr=Br===1?0:rr+(Br-2)*xr;if(this.ctx.clip_path.length!==0){var pn=this.path;ke=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=O(ke,this.posX+this.margin[3],-Zr+Gr+this.ctx.prevPageLastElemOffset),Z.call(this,ne,!0),this.path=pn}if(Ke=JSON.parse(JSON.stringify(ht)),this.path=O(Ke,this.posX+this.margin[3],-Zr+Gr+this.ctx.prevPageLastElemOffset),Se===!1||Br===0){var vt=(Br>Ht||Br<fr)&&Q.call(this);vt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],vr,xr,null).clip().discardPath()),Z.call(this,ne,Se),vt&&this.pdf.restoreGraphicsState()}this.lineWidth=Ge}else this.lineWidth=rt,Z.call(this,ne,Se),this.lineWidth=Ge;this.path=ht},Z=function(ne,Se){if((ne!=="stroke"||Se||!k.call(this))&&(ne==="stroke"||Se||!x.call(this))){for(var ke,Ke,at=[],dt=this.path,Bt=0;Bt<dt.length;Bt++){var Ge=dt[Bt];switch(Ge.type){case"begin":at.push({begin:!0});break;case"close":at.push({close:!0});break;case"mt":at.push({start:Ge,deltas:[],abs:[]});break;case"lt":var rt=at.length;if(dt[Bt-1]&&!isNaN(dt[Bt-1].x)&&(ke=[Ge.x-dt[Bt-1].x,Ge.y-dt[Bt-1].y],rt>0)){for(;rt>=0;rt--)if(at[rt-1].close!==!0&&at[rt-1].begin!==!0){at[rt-1].deltas.push(ke),at[rt-1].abs.push(Ge);break}}break;case"bct":ke=[Ge.x1-dt[Bt-1].x,Ge.y1-dt[Bt-1].y,Ge.x2-dt[Bt-1].x,Ge.y2-dt[Bt-1].y,Ge.x-dt[Bt-1].x,Ge.y-dt[Bt-1].y],at[at.length-1].deltas.push(ke);break;case"qct":var Ut=dt[Bt-1].x+2/3*(Ge.x1-dt[Bt-1].x),ht=dt[Bt-1].y+2/3*(Ge.y1-dt[Bt-1].y),Nt=Ge.x+2/3*(Ge.x1-Ge.x),dr=Ge.y+2/3*(Ge.y1-Ge.y),Lt=Ge.x,ze=Ge.y;ke=[Ut-dt[Bt-1].x,ht-dt[Bt-1].y,Nt-dt[Bt-1].x,dr-dt[Bt-1].y,Lt-dt[Bt-1].x,ze-dt[Bt-1].y],at[at.length-1].deltas.push(ke);break;case"arc":at.push({deltas:[],abs:[],arc:!0}),Array.isArray(at[at.length-1].abs)&&at[at.length-1].abs.push(Ge)}}Ke=Se?null:ne==="stroke"?"stroke":"fill";for(var gr=!1,sr=0;sr<at.length;sr++)if(at[sr].arc)for(var Ht=at[sr].abs,fr=0;fr<Ht.length;fr++){var Br=Ht[fr];Br.type==="arc"?fe.call(this,Br.x,Br.y,Br.radius,Br.startAngle,Br.endAngle,Br.counterclockwise,void 0,Se,!gr):Be.call(this,Br.x,Br.y),gr=!0}else if(at[sr].close===!0)this.pdf.internal.out("h"),gr=!1;else if(at[sr].begin!==!0){var vr=at[sr].start.x,Gr=at[sr].start.y;me.call(this,at[sr].deltas,vr,Gr),gr=!0}Ke&&_e.call(this,Ke),Se&&ue.call(this)}},$=function(ne){var Se=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,ke=Se*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return ne-ke;case"top":return ne+Se-ke;case"hanging":return ne+Se-2*ke;case"middle":return ne+Se/2-ke;case"ideographic":return ne;case"alphabetic":default:return ne}},he=function(ne){return ne+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};E.prototype.createLinearGradient=function(){var ne=function(){};return ne.colorStops=[],ne.addColorStop=function(Se,ke){this.colorStops.push([Se,ke])},ne.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},ne.isCanvasGradient=!0,ne},E.prototype.createPattern=function(){return this.createLinearGradient()},E.prototype.createRadialGradient=function(){return this.createLinearGradient()};var fe=function(ne,Se,ke,Ke,at,dt,Bt,Ge,rt){for(var Ut=ge.call(this,ke,Ke,at,dt),ht=0;ht<Ut.length;ht++){var Nt=Ut[ht];ht===0&&(rt?ee.call(this,Nt.x1+ne,Nt.y1+Se):Be.call(this,Nt.x1+ne,Nt.y1+Se)),Pe.call(this,ne,Se,Nt.x2,Nt.y2,Nt.x3,Nt.y3,Nt.x4,Nt.y4)}Ge?ue.call(this):_e.call(this,Bt)},_e=function(ne){switch(ne){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},ue=function(){this.pdf.clip(),this.pdf.discardPath()},ee=function(ne,Se){this.pdf.internal.out(r(ne)+" "+s(Se)+" m")},se=function(ne){var Se;switch(ne.align){case"right":case"end":Se="right";break;case"center":Se="center";break;case"left":case"start":default:Se="left"}var ke=this.pdf.getTextDimensions(ne.text),Ke=$.call(this,ne.y),at=he.call(this,Ke)-ke.h,dt=this.ctx.transform.applyToPoint(new h(ne.x,Ke)),Bt=this.ctx.transform.decompose(),Ge=new d;Ge=(Ge=(Ge=Ge.multiply(Bt.translate)).multiply(Bt.skew)).multiply(Bt.scale);for(var rt,Ut,ht,Nt=this.ctx.transform.applyToRectangle(new a(ne.x,Ke,ke.w,ke.h)),dr=Ge.applyToRectangle(new a(ne.x,at,ke.w,ke.h)),Lt=R.call(this,dr),ze=[],gr=0;gr<Lt.length;gr+=1)ze.indexOf(Lt[gr])===-1&&ze.push(Lt[gr]);if(G(ze),this.autoPaging)for(var sr=ze[0],Ht=ze[ze.length-1],fr=sr;fr<Ht+1;fr++){this.pdf.setPage(fr);var Br=fr===1?this.posY+this.margin[0]:this.margin[0],vr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Gr=this.pdf.internal.pageSize.height-this.margin[2],rr=Gr-this.margin[0],xr=this.pdf.internal.pageSize.width-this.margin[1],Zr=xr-this.margin[3],pn=fr===1?0:vr+(fr-2)*rr;if(this.ctx.clip_path.length!==0){var vt=this.path;rt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=O(rt,this.posX+this.margin[3],-1*pn+Br),Z.call(this,"fill",!0),this.path=vt}var nt=O([JSON.parse(JSON.stringify(dr))],this.posX+this.margin[3],-pn+Br+this.ctx.prevPageLastElemOffset)[0];ne.scale>=.01&&(Ut=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ut*ne.scale),ht=this.lineWidth,this.lineWidth=ht*ne.scale);var bt=this.autoPaging!=="text";if(bt||nt.y+nt.h<=Gr){if(bt||nt.y>=Br&&nt.x<=xr){var Ct=bt?ne.text:this.pdf.splitTextToSize(ne.text,ne.maxWidth||xr-nt.x)[0],jt=O([JSON.parse(JSON.stringify(Nt))],this.posX+this.margin[3],-pn+Br+this.ctx.prevPageLastElemOffset)[0],er=bt&&(fr>sr||fr<Ht)&&Q.call(this);er&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Zr,rr,null).clip().discardPath()),this.pdf.text(Ct,jt.x,jt.y,{angle:ne.angle,align:Se,renderingMode:ne.renderingMode}),er&&this.pdf.restoreGraphicsState()}}else nt.y<Gr&&(this.ctx.prevPageLastElemOffset+=Gr-nt.y);ne.scale>=.01&&(this.pdf.setFontSize(Ut),this.lineWidth=ht)}else ne.scale>=.01&&(Ut=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ut*ne.scale),ht=this.lineWidth,this.lineWidth=ht*ne.scale),this.pdf.text(ne.text,dt.x+this.posX,dt.y+this.posY,{angle:ne.angle,align:Se,renderingMode:ne.renderingMode,maxWidth:ne.maxWidth}),ne.scale>=.01&&(this.pdf.setFontSize(Ut),this.lineWidth=ht)},Be=function(ne,Se,ke,Ke){ke=ke||0,Ke=Ke||0,this.pdf.internal.out(r(ne+ke)+" "+s(Se+Ke)+" l")},me=function(ne,Se,ke){return this.pdf.lines(ne,Se,ke,null,null)},Pe=function(ne,Se,ke,Ke,at,dt,Bt,Ge){this.pdf.internal.out([t(l(ke+ne)),t(c(Ke+Se)),t(l(at+ne)),t(c(dt+Se)),t(l(Bt+ne)),t(c(Ge+Se)),"c"].join(" "))},ge=function(ne,Se,ke,Ke){for(var at=2*Math.PI,dt=Math.PI/2;Se>ke;)Se-=at;var Bt=Math.abs(ke-Se);Bt<at&&Ke&&(Bt=at-Bt);for(var Ge=[],rt=Ke?-1:1,Ut=Se;Bt>1e-5;){var ht=Ut+rt*Math.min(Bt,dt);Ge.push(Qe.call(this,ne,Ut,ht)),Bt-=Math.abs(ht-Ut),Ut=ht}return Ge},Qe=function(ne,Se,ke){var Ke=(ke-Se)/2,at=ne*Math.cos(Ke),dt=ne*Math.sin(Ke),Bt=at,Ge=-dt,rt=Bt*Bt+Ge*Ge,Ut=rt+Bt*at+Ge*dt,ht=4/3*(Math.sqrt(2*rt*Ut)-Ut)/(Bt*dt-Ge*at),Nt=Bt-ht*Ge,dr=Ge+ht*Bt,Lt=Nt,ze=-dr,gr=Ke+Se,sr=Math.cos(gr),Ht=Math.sin(gr);return{x1:ne*Math.cos(Se),y1:ne*Math.sin(Se),x2:Nt*sr-dr*Ht,y2:Nt*Ht+dr*sr,x3:Lt*sr-ze*Ht,y3:Lt*Ht+ze*sr,x4:ne*Math.cos(ke),y4:ne*Math.sin(ke)}},Te=function(ne){return 180*ne/Math.PI},tt=function(ne,Se,ke,Ke,at,dt){var Bt=ne+.5*(ke-ne),Ge=Se+.5*(Ke-Se),rt=at+.5*(ke-at),Ut=dt+.5*(Ke-dt),ht=Math.min(ne,at,Bt,rt),Nt=Math.max(ne,at,Bt,rt),dr=Math.min(Se,dt,Ge,Ut),Lt=Math.max(Se,dt,Ge,Ut);return new a(ht,dr,Nt-ht,Lt-dr)},Oe=function(ne,Se,ke,Ke,at,dt,Bt,Ge){var rt,Ut,ht,Nt,dr,Lt,ze,gr,sr,Ht,fr,Br,vr,Gr,rr=ke-ne,xr=Ke-Se,Zr=at-ke,pn=dt-Ke,vt=Bt-at,nt=Ge-dt;for(Ut=0;Ut<41;Ut++)sr=(ze=(ht=ne+(rt=Ut/40)*rr)+rt*((dr=ke+rt*Zr)-ht))+rt*(dr+rt*(at+rt*vt-dr)-ze),Ht=(gr=(Nt=Se+rt*xr)+rt*((Lt=Ke+rt*pn)-Nt))+rt*(Lt+rt*(dt+rt*nt-Lt)-gr),Ut==0?(fr=sr,Br=Ht,vr=sr,Gr=Ht):(fr=Math.min(fr,sr),Br=Math.min(Br,Ht),vr=Math.max(vr,sr),Gr=Math.max(Gr,Ht));return new a(Math.round(fr),Math.round(Br),Math.round(vr-fr),Math.round(Gr-Br))},Mt=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var ne,Se,ke=(ne=this.ctx.lineDash,Se=this.ctx.lineDashOffset,JSON.stringify({lineDash:ne,lineDashOffset:Se}));this.prevLineDash!==ke&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=ke)}}})(Nn.API),function(e){var t=function(c){var h,a,d,_,p,E,w,x,k,Q;for(a=[],d=0,_=(c+=h="\0\0\0\0".slice(c.length%4||4)).length;_>d;d+=4)(p=(c.charCodeAt(d)<<24)+(c.charCodeAt(d+1)<<16)+(c.charCodeAt(d+2)<<8)+c.charCodeAt(d+3))!==0?(E=(p=((p=((p=((p=(p-(Q=p%85))/85)-(k=p%85))/85)-(x=p%85))/85)-(w=p%85))/85)%85,a.push(E+33,w+33,x+33,k+33,Q+33)):a.push(122);return function(R,M){for(var O=M;O>0;O--)R.pop()}(a,h.length),String.fromCharCode.apply(String,a)+"~>"},r=function(c){var h,a,d,_,p,E=String,w="length",x=255,k="charCodeAt",Q="slice",R="replace";for(c[Q](-2),c=c[Q](0,-2)[R](/\s/g,"")[R]("z","!!!!!"),d=[],_=0,p=(c+=h="uuuuu"[Q](c[w]%5||5))[w];p>_;_+=5)a=52200625*(c[k](_)-33)+614125*(c[k](_+1)-33)+7225*(c[k](_+2)-33)+85*(c[k](_+3)-33)+(c[k](_+4)-33),d.push(x&a>>24,x&a>>16,x&a>>8,x&a);return function(M,O){for(var G=O;G>0;G--)M.pop()}(d,h[w]),E.fromCharCode.apply(E,d)},s=function(c){var h=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((c=c.replace(/\s/g,"")).indexOf(">")!==-1&&(c=c.substr(0,c.indexOf(">"))),c.length%2&&(c+="0"),h.test(c)===!1)return"";for(var a="",d=0;d<c.length;d+=2)a+=String.fromCharCode("0x"+(c[d]+c[d+1]));return a},l=function(c){for(var h=new Uint8Array(c.length),a=c.length;a--;)h[a]=c.charCodeAt(a);return c=(h=yg(h)).reduce(function(d,_){return d+String.fromCharCode(_)},"")};e.processDataByFilters=function(c,h){var a=0,d=c||"",_=[];for(typeof(h=h||[])=="string"&&(h=[h]),a=0;a<h.length;a+=1)switch(h[a]){case"ASCII85Decode":case"/ASCII85Decode":d=r(d),_.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":d=t(d),_.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":d=s(d),_.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":d=d.split("").map(function(p){return("0"+p.charCodeAt().toString(16)).slice(-2)}).join("")+">",_.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":d=l(d),_.push("/FlateDecode");break;default:throw new Error('The filter: "'+h[a]+'" is not implemented')}return{data:d,reverseChain:_.reverse().join(" ")}}}(Nn.API),function(e){e.loadFile=function(t,r,s){return function(l,c,h){c=c!==!1,h=typeof h=="function"?h:function(){};var a=void 0;try{a=function(d,_,p){var E=new XMLHttpRequest,w=0,x=function(k){var Q=k.length,R=[],M=String.fromCharCode;for(w=0;w<Q;w+=1)R.push(M(255&k.charCodeAt(w)));return R.join("")};if(E.open("GET",d,!_),E.overrideMimeType("text/plain; charset=x-user-defined"),_===!1&&(E.onload=function(){E.status===200?p(x(this.responseText)):p(void 0)}),E.send(null),_&&E.status===200)return x(E.responseText)}(l,c,h)}catch{}return a}(t,r,s)},e.loadImageFile=e.loadFile}(Nn.API),function(e){function t(){return(Hn.html2canvas?Promise.resolve(Hn.html2canvas):fg(()=>import("./html2canvas-dce546f9.js").then(h=>h.h),[])).catch(function(h){return Promise.reject(new Error("Could not load html2canvas: "+h))}).then(function(h){return h.default?h.default:h})}function r(){return(Hn.DOMPurify?Promise.resolve(Hn.DOMPurify):fg(()=>import("./purify.es-1ffe5759.js"),[])).catch(function(h){return Promise.reject(new Error("Could not load dompurify: "+h))}).then(function(h){return h.default?h.default:h})}var s=function(h){var a=qi(h);return a==="undefined"?"undefined":a==="string"||h instanceof String?"string":a==="number"||h instanceof Number?"number":a==="function"||h instanceof Function?"function":h&&h.constructor===Array?"array":h&&h.nodeType===1?"element":a==="object"?"object":"unknown"},l=function(h,a){var d=document.createElement(h);for(var _ in a.className&&(d.className=a.className),a.innerHTML&&a.dompurify&&(d.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)d.style[_]=a.style[_];return d},c=function h(a){var d=Object.assign(h.convert(Promise.resolve()),JSON.parse(JSON.stringify(h.template))),_=h.convert(Promise.resolve(),d);return _=(_=_.setProgress(1,h,1,[h])).set(a)};(c.prototype=Object.create(Promise.prototype)).constructor=c,c.convert=function(h,a){return h.__proto__=a||c.prototype,h},c.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},c.prototype.from=function(h,a){return this.then(function(){switch(a=a||function(d){switch(s(d)){case"string":return"string";case"element":return d.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(h)){case"string":return this.then(r).then(function(d){return this.set({src:l("div",{innerHTML:h,dompurify:d})})});case"element":return this.set({src:h});case"canvas":return this.set({canvas:h});case"img":return this.set({img:h});default:return this.error("Unknown source type.")}})},c.prototype.to=function(h){switch(h){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},c.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var h={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function d(_,p){for(var E=_.nodeType===3?document.createTextNode(_.nodeValue):_.cloneNode(!1),w=_.firstChild;w;w=w.nextSibling)p!==!0&&w.nodeType===1&&w.nodeName==="SCRIPT"||E.appendChild(d(w,p));return _.nodeType===1&&(_.nodeName==="CANVAS"?(E.width=_.width,E.height=_.height,E.getContext("2d").drawImage(_,0,0)):_.nodeName!=="TEXTAREA"&&_.nodeName!=="SELECT"||(E.value=_.value),E.addEventListener("load",function(){E.scrollTop=_.scrollTop,E.scrollLeft=_.scrollLeft},!0)),E}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(h.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=l("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=l("div",{className:"html2pdf__container",style:h}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(l("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},c.prototype.toCanvas=function(){var h=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(h).then(t).then(function(a){var d=Object.assign({},this.opt.html2canvas);return delete d.onrendered,a(this.prop.container,d)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},c.prototype.toContext2d=function(){var h=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(h).then(t).then(function(a){var d=this.opt.jsPDF,_=this.opt.fontFaces,p=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,E=Object.assign({async:!0,allowTaint:!0,scale:p,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete E.onrendered,d.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,d.context2d.posX=this.opt.x,d.context2d.posY=this.opt.y,d.context2d.margin=this.opt.margin,d.context2d.fontFaces=_,_)for(var w=0;w<_.length;++w){var x=_[w],k=x.src.find(function(Q){return Q.format==="truetype"});k&&d.addFont(k.url,x.ref.name,x.ref.style)}return E.windowHeight=E.windowHeight||0,E.windowHeight=E.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):E.windowHeight,d.context2d.save(!0),a(this.prop.container,E)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},c.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var h=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=h})},c.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},c.prototype.output=function(h,a,d){return(d=d||"pdf").toLowerCase()==="img"||d.toLowerCase()==="image"?this.outputImg(h,a):this.outputPdf(h,a)},c.prototype.outputPdf=function(h,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(h,a)})},c.prototype.outputImg=function(h){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(h){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+h+'" is not supported.'}})},c.prototype.save=function(h){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(h?{filename:h}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},c.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},c.prototype.set=function(h){if(s(h)!=="object")return this;var a=Object.keys(h||{}).map(function(d){if(d in c.template.prop)return function(){this.prop[d]=h[d]};switch(d){case"margin":return this.setMargin.bind(this,h.margin);case"jsPDF":return function(){return this.opt.jsPDF=h.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,h.pageSize);default:return function(){this.opt[d]=h[d]}}},this);return this.then(function(){return this.thenList(a)})},c.prototype.get=function(h,a){return this.then(function(){var d=h in c.template.prop?this.prop[h]:this.opt[h];return a?a(d):d})},c.prototype.setMargin=function(h){return this.then(function(){switch(s(h)){case"number":h=[h,h,h,h];case"array":if(h.length===2&&(h=[h[0],h[1],h[0],h[1]]),h.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=h}).then(this.setPageSize)},c.prototype.setPageSize=function(h){function a(d,_){return Math.floor(d*_/72*96)}return this.then(function(){(h=h||Nn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(h.inner={width:h.width-this.opt.margin[1]-this.opt.margin[3],height:h.height-this.opt.margin[0]-this.opt.margin[2]},h.inner.px={width:a(h.inner.width,h.k),height:a(h.inner.height,h.k)},h.inner.ratio=h.inner.height/h.inner.width),this.prop.pageSize=h})},c.prototype.setProgress=function(h,a,d,_){return h!=null&&(this.progress.val=h),a!=null&&(this.progress.state=a),d!=null&&(this.progress.n=d),_!=null&&(this.progress.stack=_),this.progress.ratio=this.progress.val/this.progress.state,this},c.prototype.updateProgress=function(h,a,d,_){return this.setProgress(h?this.progress.val+h:null,a||null,d?this.progress.n+d:null,_?this.progress.stack.concat(_):null)},c.prototype.then=function(h,a){var d=this;return this.thenCore(h,a,function(_,p){return d.updateProgress(null,null,1,[_]),Promise.prototype.then.call(this,function(E){return d.updateProgress(null,_),E}).then(_,p).then(function(E){return d.updateProgress(1),E})})},c.prototype.thenCore=function(h,a,d){d=d||Promise.prototype.then,h&&(h=h.bind(this)),a&&(a=a.bind(this));var _=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:c.convert(Object.assign({},this),Promise.prototype),p=d.call(_,h,a);return c.convert(p,this.__proto__)},c.prototype.thenExternal=function(h,a){return Promise.prototype.then.call(this,h,a)},c.prototype.thenList=function(h){var a=this;return h.forEach(function(d){a=a.thenCore(d)}),a},c.prototype.catch=function(h){h&&(h=h.bind(this));var a=Promise.prototype.catch.call(this,h);return c.convert(a,this)},c.prototype.catchExternal=function(h){return Promise.prototype.catch.call(this,h)},c.prototype.error=function(h){return this.then(function(){throw new Error(h)})},c.prototype.using=c.prototype.set,c.prototype.saveAs=c.prototype.save,c.prototype.export=c.prototype.output,c.prototype.run=c.prototype.then,Nn.getPageSize=function(h,a,d){if(qi(h)==="object"){var _=h;h=_.orientation,a=_.unit||a,d=_.format||d}a=a||"mm",d=d||"a4",h=(""+(h||"P")).toLowerCase();var p,E=(""+d).toLowerCase(),w={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":p=1;break;case"mm":p=72/25.4;break;case"cm":p=72/2.54;break;case"in":p=72;break;case"px":p=.75;break;case"pc":case"em":p=12;break;case"ex":p=6;break;default:throw"Invalid unit: "+a}var x,k=0,Q=0;if(w.hasOwnProperty(E))k=w[E][1]/p,Q=w[E][0]/p;else try{k=d[1],Q=d[0]}catch{throw new Error("Invalid format: "+d)}if(h==="p"||h==="portrait")h="p",Q>k&&(x=Q,Q=k,k=x);else{if(h!=="l"&&h!=="landscape")throw"Invalid orientation: "+h;h="l",k>Q&&(x=Q,Q=k,k=x)}return{width:Q,height:k,unit:a,k:p,orientation:h}},e.html=function(h,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(Bg):null;var d=new c(a);return a.worker?d:d.from(h).doCallback()}}(Nn.API),Nn.API.addJS=function(e){return Ly=e,this.internal.events.subscribe("postPutResources",function(){ip=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(ip+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Uy=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Ly+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){ip!==void 0&&Uy!==void 0&&this.internal.out("/Names <</JavaScript "+ip+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,s=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var l=r.outline.render().split(/\r\n/),c=0;c<l.length;c++){var h=l[c],a=s.exec(h);if(a!=null){var d=a[1];r.internal.newObjectDeferredBegin(d,!1)}r.internal.write(h)}if(this.outline.createNamedDestinations){var _=this.internal.pages.length,p=[];for(c=0;c<_;c++){var E=r.internal.newObject();p.push(E);var w=r.internal.getPageInfo(c+1);r.internal.write("<< /D["+w.objId+" 0 R /XYZ null null null]>> endobj")}var x=r.internal.newObject();for(r.internal.write("<< /Names [ "),c=0;c<p.length;c++)r.internal.write("(page_"+(c+1)+")"+p[c]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+x+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(s,l,c){var h={title:l,options:c,children:[]};return s==null&&(s=this.root),s.children.push(h),h},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(s){s.id=r.internal.newObjectDeferred();for(var l=0;l<s.children.length;l++)this.genIds_r(s.children[l])},r.outline.renderRoot=function(s){this.objStart(s),this.line("/Type /Outlines"),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1]))),this.line("/Count "+this.count_r({count:0},s)),this.objEnd()},r.outline.renderItems=function(s){for(var l=this.ctx.pdf.internal.getVerticalCoordinateString,c=0;c<s.children.length;c++){var h=s.children[c];this.objStart(h),this.line("/Title "+this.makeString(h.title)),this.line("/Parent "+this.makeRef(s)),c>0&&this.line("/Prev "+this.makeRef(s.children[c-1])),c<s.children.length-1&&this.line("/Next "+this.makeRef(s.children[c+1])),h.children.length>0&&(this.line("/First "+this.makeRef(h.children[0])),this.line("/Last "+this.makeRef(h.children[h.children.length-1])));var a=this.count=this.count_r({count:0},h);if(a>0&&this.line("/Count "+a),h.options&&h.options.pageNumber){var d=r.internal.getPageInfo(h.options.pageNumber);this.line("/Dest ["+d.objId+" 0 R /XYZ 0 "+l(0)+" 0]")}this.objEnd()}for(var _=0;_<s.children.length;_++)this.renderItems(s.children[_])},r.outline.line=function(s){this.ctx.val+=s+`\r
`},r.outline.makeRef=function(s){return s.id+" 0 R"},r.outline.makeString=function(s){return"("+r.internal.pdfEscape(s)+")"},r.outline.objStart=function(s){this.ctx.val+=`\r
`+s.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(s,l){for(var c=0;c<l.children.length;c++)s.count++,this.count_r(s,l.children[c]);return s.count}}])}(Nn.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,s,l,c,h,a){var d,_=this.decode.DCT_DECODE,p=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=h||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(d=function(E){for(var w,x=256*E.charCodeAt(4)+E.charCodeAt(5),k=E.length,Q={width:0,height:0,numcomponents:1},R=4;R<k;R+=2){if(R+=x,t.indexOf(E.charCodeAt(R+1))!==-1){w=256*E.charCodeAt(R+5)+E.charCodeAt(R+6),Q={width:256*E.charCodeAt(R+7)+E.charCodeAt(R+8),height:w,numcomponents:E.charCodeAt(R+9)};break}x=256*E.charCodeAt(R+2)+E.charCodeAt(R+3)}return Q}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}p={data:r,width:d.width,height:d.height,colorSpace:a,bitsPerComponent:8,filter:_,index:s,alias:l}}return p}}(Nn.API);var Dh,sp,Qy,ky,Py,iS=function(){var e,t,r;function s(c){var h,a,d,_,p,E,w,x,k,Q,R,M,O,G;for(this.data=c,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},E=null;;){switch(h=this.readUInt32(),k=function(){var K,Z;for(Z=[],K=0;K<4;++K)Z.push(String.fromCharCode(this.data[this.pos++]));return Z}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(h);break;case"fcTL":E&&this.animation.frames.push(E),this.pos+=4,E={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},p=this.readUInt16(),_=this.readUInt16()||100,E.delay=1e3*p/_,E.disposeOp=this.data[this.pos++],E.blendOp=this.data[this.pos++],E.data=[];break;case"IDAT":case"fdAT":for(k==="fdAT"&&(this.pos+=4,h-=4),c=(E!=null?E.data:void 0)||this.imgData,M=0;0<=h?M<h:M>h;0<=h?++M:--M)c.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(d=this.palette.length/3,this.transparency.indexed=this.read(h),this.transparency.indexed.length>d)throw new Error("More transparent colors than palette size");if((Q=d-this.transparency.indexed.length)>0)for(O=0;0<=Q?O<Q:O>Q;0<=Q?++O:--O)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(h)[0];break;case 2:this.transparency.rgb=this.read(h)}break;case"tEXt":w=(R=this.read(h)).indexOf(0),x=String.fromCharCode.apply(String,R.slice(0,w)),this.text[x]=String.fromCharCode.apply(String,R.slice(w+1));break;case"IEND":return E&&this.animation.frames.push(E),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=(G=this.colorType)===4||G===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=h}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}s.prototype.read=function(c){var h,a;for(a=[],h=0;0<=c?h<c:h>c;0<=c?++h:--h)a.push(this.data[this.pos++]);return a},s.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},s.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},s.prototype.decodePixels=function(c){var h=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*h),d=0,_=this;if(c==null&&(c=this.imgData),c.length===0)return new Uint8Array(0);function p(E,w,x,k){var Q,R,M,O,G,K,Z,$,he,fe,_e,ue,ee,se,Be,me,Pe,ge,Qe,Te,tt,Oe=Math.ceil((_.width-E)/x),Mt=Math.ceil((_.height-w)/k),ne=_.width==Oe&&_.height==Mt;for(se=h*Oe,ue=ne?a:new Uint8Array(se*Mt),K=c.length,ee=0,R=0;ee<Mt&&d<K;){switch(c[d++]){case 0:for(O=Pe=0;Pe<se;O=Pe+=1)ue[R++]=c[d++];break;case 1:for(O=ge=0;ge<se;O=ge+=1)Q=c[d++],G=O<h?0:ue[R-h],ue[R++]=(Q+G)%256;break;case 2:for(O=Qe=0;Qe<se;O=Qe+=1)Q=c[d++],M=(O-O%h)/h,Be=ee&&ue[(ee-1)*se+M*h+O%h],ue[R++]=(Be+Q)%256;break;case 3:for(O=Te=0;Te<se;O=Te+=1)Q=c[d++],M=(O-O%h)/h,G=O<h?0:ue[R-h],Be=ee&&ue[(ee-1)*se+M*h+O%h],ue[R++]=(Q+Math.floor((G+Be)/2))%256;break;case 4:for(O=tt=0;tt<se;O=tt+=1)Q=c[d++],M=(O-O%h)/h,G=O<h?0:ue[R-h],ee===0?Be=me=0:(Be=ue[(ee-1)*se+M*h+O%h],me=M&&ue[(ee-1)*se+(M-1)*h+O%h]),Z=G+Be-me,$=Math.abs(Z-G),fe=Math.abs(Z-Be),_e=Math.abs(Z-me),he=$<=fe&&$<=_e?G:fe<=_e?Be:me,ue[R++]=(Q+he)%256;break;default:throw new Error("Invalid filter algorithm: "+c[d-1])}if(!ne){var Se=((w+ee*k)*_.width+E)*h,ke=ee*se;for(O=0;O<Oe;O+=1){for(var Ke=0;Ke<h;Ke+=1)a[Se++]=ue[ke++];Se+=(x-1)*h}}ee++}}return c=DF(c),_.interlaceMethod==1?(p(0,0,8,8),p(4,0,8,8),p(0,4,4,8),p(2,0,4,4),p(0,2,2,4),p(1,0,2,2),p(0,1,1,2)):p(0,0,1,1),a},s.prototype.decodePalette=function(){var c,h,a,d,_,p,E,w,x;for(a=this.palette,p=this.transparency.indexed||[],_=new Uint8Array((p.length||0)+a.length),d=0,c=0,h=E=0,w=a.length;E<w;h=E+=3)_[d++]=a[h],_[d++]=a[h+1],_[d++]=a[h+2],_[d++]=(x=p[c++])!=null?x:255;return _},s.prototype.copyToImageData=function(c,h){var a,d,_,p,E,w,x,k,Q,R,M;if(d=this.colors,Q=null,a=this.hasAlphaChannel,this.palette.length&&(Q=(M=this._decodedPalette)!=null?M:this._decodedPalette=this.decodePalette(),d=4,a=!0),k=(_=c.data||c).length,E=Q||h,p=w=0,d===1)for(;p<k;)x=Q?4*h[p/4]:w,R=E[x++],_[p++]=R,_[p++]=R,_[p++]=R,_[p++]=a?E[x++]:255,w=x;else for(;p<k;)x=Q?4*h[p/4]:w,_[p++]=E[x++],_[p++]=E[x++],_[p++]=E[x++],_[p++]=a?E[x++]:255,w=x},s.prototype.decode=function(){var c;return c=new Uint8Array(this.width*this.height*4),this.copyToImageData(c,this.decodePixels()),c};var l=function(){if(Object.prototype.toString.call(Hn)==="[object Window]"){try{t=Hn.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return l(),e=function(c){var h;if(l()===!0)return r.width=c.width,r.height=c.height,r.clearRect(0,0,c.width,c.height),r.putImageData(c,0,0),(h=new Image).src=t.toDataURL(),h;throw new Error("This method requires a Browser with Canvas-capability.")},s.prototype.decodeFrames=function(c){var h,a,d,_,p,E,w,x;if(this.animation){for(x=[],a=p=0,E=(w=this.animation.frames).length;p<E;a=++p)h=w[a],d=c.createImageData(h.width,h.height),_=this.decodePixels(new Uint8Array(h.data)),this.copyToImageData(d,_),h.imageData=d,x.push(h.image=e(d));return x}},s.prototype.renderFrame=function(c,h){var a,d,_;return a=(d=this.animation.frames)[h],_=d[h-1],h===0&&c.clearRect(0,0,this.width,this.height),(_!=null?_.disposeOp:void 0)===1?c.clearRect(_.xOffset,_.yOffset,_.width,_.height):(_!=null?_.disposeOp:void 0)===2&&c.putImageData(_.imageData,_.xOffset,_.yOffset),a.blendOp===0&&c.clearRect(a.xOffset,a.yOffset,a.width,a.height),c.drawImage(a.image,a.xOffset,a.yOffset)},s.prototype.animate=function(c){var h,a,d,_,p,E,w=this;return a=0,E=this.animation,_=E.numFrames,d=E.frames,p=E.numPlays,(h=function(){var x,k;if(x=a++%_,k=d[x],w.renderFrame(c,x),_>1&&a/_<p)return w.animation._timeout=setTimeout(h,k.delay)})()},s.prototype.stopAnimation=function(){var c;return clearTimeout((c=this.animation)!=null?c._timeout:void 0)},s.prototype.render=function(c){var h,a;return c._png&&c._png.stopAnimation(),c._png=this,c.width=this.width,c.height=this.height,h=c.getContext("2d"),this.animation?(this.decodeFrames(h),this.animate(h)):(a=h.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),h.putImageData(a,0,0))},s}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function sS(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,s=e[t++]|e[t++]<<8,l=e[t++],c=l>>7,h=1<<(7&l)+1;e[t++],e[t++];var a=null,d=null;c&&(a=t,d=h,t+=3*h);var _=!0,p=[],E=0,w=null,x=0,k=null;for(this.width=r,this.height=s;_&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,k=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((ee=e[t++])>=0))throw Error("Invalid block size");if(ee===0)break;t+=ee}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var Q=e[t++];E=e[t++]|e[t++]<<8,w=e[t++],!(1&Q)&&(w=null),x=Q>>2&7,t++;break;case 254:for(;;){if(!((ee=e[t++])>=0))throw Error("Invalid block size");if(ee===0)break;t+=ee}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var R=e[t++]|e[t++]<<8,M=e[t++]|e[t++]<<8,O=e[t++]|e[t++]<<8,G=e[t++]|e[t++]<<8,K=e[t++],Z=K>>6&1,$=1<<(7&K)+1,he=a,fe=d,_e=!1;K>>7&&(_e=!0,he=t,fe=$,t+=3*$);var ue=t;for(t++;;){var ee;if(!((ee=e[t++])>=0))throw Error("Invalid block size");if(ee===0)break;t+=ee}p.push({x:R,y:M,width:O,height:G,has_local_palette:_e,palette_offset:he,palette_size:fe,data_offset:ue,data_length:t-ue,transparent_index:w,interlaced:!!Z,delay:E,disposal:x});break;case 59:_=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return p.length},this.loopCount=function(){return k},this.frameInfo=function(se){if(se<0||se>=p.length)throw new Error("Frame index out of range.");return p[se]},this.decodeAndBlitFrameBGRA=function(se,Be){var me=this.frameInfo(se),Pe=me.width*me.height,ge=new Uint8Array(Pe);My(e,me.data_offset,ge,Pe);var Qe=me.palette_offset,Te=me.transparent_index;Te===null&&(Te=256);var tt=me.width,Oe=r-tt,Mt=tt,ne=4*(me.y*r+me.x),Se=4*((me.y+me.height)*r+me.x),ke=ne,Ke=4*Oe;me.interlaced===!0&&(Ke+=4*r*7);for(var at=8,dt=0,Bt=ge.length;dt<Bt;++dt){var Ge=ge[dt];if(Mt===0&&(Mt=tt,(ke+=Ke)>=Se&&(Ke=4*Oe+4*r*(at-1),ke=ne+(tt+Oe)*(at<<1),at>>=1)),Ge===Te)ke+=4;else{var rt=e[Qe+3*Ge],Ut=e[Qe+3*Ge+1],ht=e[Qe+3*Ge+2];Be[ke++]=ht,Be[ke++]=Ut,Be[ke++]=rt,Be[ke++]=255}--Mt}},this.decodeAndBlitFrameRGBA=function(se,Be){var me=this.frameInfo(se),Pe=me.width*me.height,ge=new Uint8Array(Pe);My(e,me.data_offset,ge,Pe);var Qe=me.palette_offset,Te=me.transparent_index;Te===null&&(Te=256);var tt=me.width,Oe=r-tt,Mt=tt,ne=4*(me.y*r+me.x),Se=4*((me.y+me.height)*r+me.x),ke=ne,Ke=4*Oe;me.interlaced===!0&&(Ke+=4*r*7);for(var at=8,dt=0,Bt=ge.length;dt<Bt;++dt){var Ge=ge[dt];if(Mt===0&&(Mt=tt,(ke+=Ke)>=Se&&(Ke=4*Oe+4*r*(at-1),ke=ne+(tt+Oe)*(at<<1),at>>=1)),Ge===Te)ke+=4;else{var rt=e[Qe+3*Ge],Ut=e[Qe+3*Ge+1],ht=e[Qe+3*Ge+2];Be[ke++]=rt,Be[ke++]=Ut,Be[ke++]=ht,Be[ke++]=255}--Mt}}}function My(e,t,r,s){for(var l=e[t++],c=1<<l,h=c+1,a=h+1,d=l+1,_=(1<<d)-1,p=0,E=0,w=0,x=e[t++],k=new Int32Array(4096),Q=null;;){for(;p<16&&x!==0;)E|=e[t++]<<p,p+=8,x===1?x=e[t++]:--x;if(p<d)break;var R=E&_;if(E>>=d,p-=d,R!==c){if(R===h)break;for(var M=R<a?R:Q,O=0,G=M;G>c;)G=k[G]>>8,++O;var K=G;if(w+O+(M!==R?1:0)>s)return void cs.log("Warning, gif stream longer than expected.");r[w++]=K;var Z=w+=O;for(M!==R&&(r[w++]=K),G=M;O--;)G=k[G],r[--Z]=255&G,G>>=8;Q!==null&&a<4096&&(k[a++]=Q<<8|K,a>=_+1&&d<12&&(++d,_=_<<1|1)),Q=R}else a=h+1,_=(1<<(d=l+1))-1,Q=null}return w!==s&&cs.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function zm(e){var t,r,s,l,c,h=Math.floor,a=new Array(64),d=new Array(64),_=new Array(64),p=new Array(64),E=new Array(65535),w=new Array(65535),x=new Array(64),k=new Array(64),Q=[],R=0,M=7,O=new Array(64),G=new Array(64),K=new Array(64),Z=new Array(256),$=new Array(2048),he=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],fe=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],_e=[0,1,2,3,4,5,6,7,8,9,10,11],ue=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],ee=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],se=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Be=[0,1,2,3,4,5,6,7,8,9,10,11],me=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Pe=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ge(ne,Se){for(var ke=0,Ke=0,at=new Array,dt=1;dt<=16;dt++){for(var Bt=1;Bt<=ne[dt];Bt++)at[Se[Ke]]=[],at[Se[Ke]][0]=ke,at[Se[Ke]][1]=dt,Ke++,ke++;ke*=2}return at}function Qe(ne){for(var Se=ne[0],ke=ne[1]-1;ke>=0;)Se&1<<ke&&(R|=1<<M),ke--,--M<0&&(R==255?(Te(255),Te(0)):Te(R),M=7,R=0)}function Te(ne){Q.push(ne)}function tt(ne){Te(ne>>8&255),Te(255&ne)}function Oe(ne,Se,ke,Ke,at){for(var dt,Bt=at[0],Ge=at[240],rt=function(Ht,fr){var Br,vr,Gr,rr,xr,Zr,pn,vt,nt,bt,Ct=0;for(nt=0;nt<8;++nt){Br=Ht[Ct],vr=Ht[Ct+1],Gr=Ht[Ct+2],rr=Ht[Ct+3],xr=Ht[Ct+4],Zr=Ht[Ct+5],pn=Ht[Ct+6];var jt=Br+(vt=Ht[Ct+7]),er=Br-vt,Vr=vr+pn,Fr=vr-pn,un=Gr+Zr,lr=Gr-Zr,Er=rr+xr,An=rr-xr,wn=jt+Er,_i=jt-Er,br=Vr+un,Cr=Vr-un;Ht[Ct]=wn+br,Ht[Ct+4]=wn-br;var cr=.707106781*(Cr+_i);Ht[Ct+2]=_i+cr,Ht[Ct+6]=_i-cr;var Kr=.382683433*((wn=An+lr)-(Cr=Fr+er)),hn=.5411961*wn+Kr,xn=1.306562965*Cr+Kr,Sn=.707106781*(br=lr+Fr),ji=er+Sn,tn=er-Sn;Ht[Ct+5]=tn+hn,Ht[Ct+3]=tn-hn,Ht[Ct+1]=ji+xn,Ht[Ct+7]=ji-xn,Ct+=8}for(Ct=0,nt=0;nt<8;++nt){Br=Ht[Ct],vr=Ht[Ct+8],Gr=Ht[Ct+16],rr=Ht[Ct+24],xr=Ht[Ct+32],Zr=Ht[Ct+40],pn=Ht[Ct+48];var Wi=Br+(vt=Ht[Ct+56]),hs=Br-vt,Ln=vr+pn,nn=vr-pn,Ue=Gr+Zr,Y=Gr-Zr,Ae=rr+xr,Ee=rr-xr,Le=Wi+Ae,Xe=Wi-Ae,lt=Ln+Ue,Ye=Ln-Ue;Ht[Ct]=Le+lt,Ht[Ct+32]=Le-lt;var qe=.707106781*(Ye+Xe);Ht[Ct+16]=Xe+qe,Ht[Ct+48]=Xe-qe;var ut=.382683433*((Le=Ee+Y)-(Ye=nn+hs)),Ot=.5411961*Le+ut,nr=1.306562965*Ye+ut,zt=.707106781*(lt=Y+nn),jr=hs+zt,Hr=hs-zt;Ht[Ct+40]=Hr+Ot,Ht[Ct+24]=Hr-Ot,Ht[Ct+8]=jr+nr,Ht[Ct+56]=jr-nr,Ct++}for(nt=0;nt<64;++nt)bt=Ht[nt]*fr[nt],x[nt]=bt>0?bt+.5|0:bt-.5|0;return x}(ne,Se),Ut=0;Ut<64;++Ut)k[he[Ut]]=rt[Ut];var ht=k[0]-ke;ke=k[0],ht==0?Qe(Ke[0]):(Qe(Ke[w[dt=32767+ht]]),Qe(E[dt]));for(var Nt=63;Nt>0&&k[Nt]==0;)Nt--;if(Nt==0)return Qe(Bt),ke;for(var dr,Lt=1;Lt<=Nt;){for(var ze=Lt;k[Lt]==0&&Lt<=Nt;)++Lt;var gr=Lt-ze;if(gr>=16){dr=gr>>4;for(var sr=1;sr<=dr;++sr)Qe(Ge);gr&=15}dt=32767+k[Lt],Qe(at[(gr<<4)+w[dt]]),Qe(E[dt]),Lt++}return Nt!=63&&Qe(Bt),ke}function Mt(ne){ne=Math.min(Math.max(ne,1),100),c!=ne&&(function(Se){for(var ke=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Ke=0;Ke<64;Ke++){var at=h((ke[Ke]*Se+50)/100);at=Math.min(Math.max(at,1),255),a[he[Ke]]=at}for(var dt=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Bt=0;Bt<64;Bt++){var Ge=h((dt[Bt]*Se+50)/100);Ge=Math.min(Math.max(Ge,1),255),d[he[Bt]]=Ge}for(var rt=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ut=0,ht=0;ht<8;ht++)for(var Nt=0;Nt<8;Nt++)_[Ut]=1/(a[he[Ut]]*rt[ht]*rt[Nt]*8),p[Ut]=1/(d[he[Ut]]*rt[ht]*rt[Nt]*8),Ut++}(ne<50?Math.floor(5e3/ne):Math.floor(200-2*ne)),c=ne)}this.encode=function(ne,Se){Se&&Mt(Se),Q=new Array,R=0,M=7,tt(65496),tt(65504),tt(16),Te(74),Te(70),Te(73),Te(70),Te(0),Te(1),Te(1),Te(0),tt(1),tt(1),Te(0),Te(0),function(){tt(65499),tt(132),Te(0);for(var vr=0;vr<64;vr++)Te(a[vr]);Te(1);for(var Gr=0;Gr<64;Gr++)Te(d[Gr])}(),function(vr,Gr){tt(65472),tt(17),Te(8),tt(Gr),tt(vr),Te(3),Te(1),Te(17),Te(0),Te(2),Te(17),Te(1),Te(3),Te(17),Te(1)}(ne.width,ne.height),function(){tt(65476),tt(418),Te(0);for(var vr=0;vr<16;vr++)Te(fe[vr+1]);for(var Gr=0;Gr<=11;Gr++)Te(_e[Gr]);Te(16);for(var rr=0;rr<16;rr++)Te(ue[rr+1]);for(var xr=0;xr<=161;xr++)Te(ee[xr]);Te(1);for(var Zr=0;Zr<16;Zr++)Te(se[Zr+1]);for(var pn=0;pn<=11;pn++)Te(Be[pn]);Te(17);for(var vt=0;vt<16;vt++)Te(me[vt+1]);for(var nt=0;nt<=161;nt++)Te(Pe[nt])}(),tt(65498),tt(12),Te(3),Te(1),Te(0),Te(2),Te(17),Te(3),Te(17),Te(0),Te(63),Te(0);var ke=0,Ke=0,at=0;R=0,M=7,this.encode.displayName="_encode_";for(var dt,Bt,Ge,rt,Ut,ht,Nt,dr,Lt,ze=ne.data,gr=ne.width,sr=ne.height,Ht=4*gr,fr=0;fr<sr;){for(dt=0;dt<Ht;){for(Ut=Ht*fr+dt,Nt=-1,dr=0,Lt=0;Lt<64;Lt++)ht=Ut+(dr=Lt>>3)*Ht+(Nt=4*(7&Lt)),fr+dr>=sr&&(ht-=Ht*(fr+1+dr-sr)),dt+Nt>=Ht&&(ht-=dt+Nt-Ht+4),Bt=ze[ht++],Ge=ze[ht++],rt=ze[ht++],O[Lt]=($[Bt]+$[Ge+256>>0]+$[rt+512>>0]>>16)-128,G[Lt]=($[Bt+768>>0]+$[Ge+1024>>0]+$[rt+1280>>0]>>16)-128,K[Lt]=($[Bt+1280>>0]+$[Ge+1536>>0]+$[rt+1792>>0]>>16)-128;ke=Oe(O,_,ke,t,s),Ke=Oe(G,p,Ke,r,l),at=Oe(K,p,at,r,l),dt+=32}fr+=8}if(M>=0){var Br=[];Br[1]=M+1,Br[0]=(1<<M+1)-1,Qe(Br)}return tt(65497),new Uint8Array(Q)},e=e||50,function(){for(var ne=String.fromCharCode,Se=0;Se<256;Se++)Z[Se]=ne(Se)}(),t=ge(fe,_e),r=ge(se,Be),s=ge(ue,ee),l=ge(me,Pe),function(){for(var ne=1,Se=2,ke=1;ke<=15;ke++){for(var Ke=ne;Ke<Se;Ke++)w[32767+Ke]=ke,E[32767+Ke]=[],E[32767+Ke][1]=ke,E[32767+Ke][0]=Ke;for(var at=-(Se-1);at<=-ne;at++)w[32767+at]=ke,E[32767+at]=[],E[32767+at][1]=ke,E[32767+at][0]=Se-1+at;ne<<=1,Se<<=1}}(),function(){for(var ne=0;ne<256;ne++)$[ne]=19595*ne,$[ne+256>>0]=38470*ne,$[ne+512>>0]=7471*ne+32768,$[ne+768>>0]=-11059*ne,$[ne+1024>>0]=-21709*ne,$[ne+1280>>0]=32768*ne+8421375,$[ne+1536>>0]=-27439*ne,$[ne+1792>>0]=-5329*ne}(),Mt(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Rl(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Dy(e){function t(fe){if(!fe)throw Error("assert :P")}function r(fe,_e,ue){for(var ee=0;4>ee;ee++)if(fe[_e+ee]!=ue.charCodeAt(ee))return!0;return!1}function s(fe,_e,ue,ee,se){for(var Be=0;Be<se;Be++)fe[_e+Be]=ue[ee+Be]}function l(fe,_e,ue,ee){for(var se=0;se<ee;se++)fe[_e+se]=ue}function c(fe){return new Int32Array(fe)}function h(fe,_e){for(var ue=[],ee=0;ee<fe;ee++)ue.push(new _e);return ue}function a(fe,_e){var ue=[];return function ee(se,Be,me){for(var Pe=me[Be],ge=0;ge<Pe&&(se.push(me.length>Be+1?[]:new _e),!(me.length<Be+1));ge++)ee(se[ge],Be+1,me)}(ue,0,fe),ue}var d=function(){var fe=this;function _e(b,L){for(var j=1<<L-1>>>0;b&j;)j>>>=1;return j?(b&j-1)+j:b}function ue(b,L,j,W,ae){t(!(W%j));do b[L+(W-=j)]=ae;while(0<W)}function ee(b,L,j,W,ae){if(t(2328>=ae),512>=ae)var de=c(512);else if((de=c(ae))==null)return 0;return function(ye,xe,Ie,je,ft,It){var Ft,pt,Ar=xe,Vt=1<<Ie,Je=c(16),At=c(16);for(t(ft!=0),t(je!=null),t(ye!=null),t(0<Ie),pt=0;pt<ft;++pt){if(15<je[pt])return 0;++Je[je[pt]]}if(Je[0]==ft)return 0;for(At[1]=0,Ft=1;15>Ft;++Ft){if(Je[Ft]>1<<Ft)return 0;At[Ft+1]=At[Ft]+Je[Ft]}for(pt=0;pt<ft;++pt)Ft=je[pt],0<je[pt]&&(It[At[Ft]++]=pt);if(At[15]==1)return(je=new se).g=0,je.value=It[0],ue(ye,Ar,1,Vt,je),Vt;var Yt,ir=-1,Wt=Vt-1,Dr=0,Qr=1,Fn=1,Nr=1<<Ie;for(pt=0,Ft=1,ft=2;Ft<=Ie;++Ft,ft<<=1){if(Qr+=Fn<<=1,0>(Fn-=Je[Ft]))return 0;for(;0<Je[Ft];--Je[Ft])(je=new se).g=Ft,je.value=It[pt++],ue(ye,Ar+Dr,ft,Nr,je),Dr=_e(Dr,Ft)}for(Ft=Ie+1,ft=2;15>=Ft;++Ft,ft<<=1){if(Qr+=Fn<<=1,0>(Fn-=Je[Ft]))return 0;for(;0<Je[Ft];--Je[Ft]){if(je=new se,(Dr&Wt)!=ir){for(Ar+=Nr,Yt=1<<(ir=Ft)-Ie;15>ir&&!(0>=(Yt-=Je[ir]));)++ir,Yt<<=1;Vt+=Nr=1<<(Yt=ir-Ie),ye[xe+(ir=Dr&Wt)].g=Yt+Ie,ye[xe+ir].value=Ar-xe-ir}je.g=Ft-Ie,je.value=It[pt++],ue(ye,Ar+(Dr>>Ie),ft,Nr,je),Dr=_e(Dr,Ft)}}return Qr!=2*At[15]-1?0:Vt}(b,L,j,W,ae,de)}function se(){this.value=this.g=0}function Be(){this.value=this.g=0}function me(){this.G=h(5,se),this.H=c(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=h(ns,Be)}function Pe(b,L,j,W){t(b!=null),t(L!=null),t(2147483648>W),b.Ca=254,b.I=0,b.b=-8,b.Ka=0,b.oa=L,b.pa=j,b.Jd=L,b.Yc=j+W,b.Zc=4<=W?j+W-4+1:j,dt(b)}function ge(b,L){for(var j=0;0<L--;)j|=Ge(b,128)<<L;return j}function Qe(b,L){var j=ge(b,L);return Bt(b)?-j:j}function Te(b,L,j,W){var ae,de=0;for(t(b!=null),t(L!=null),t(4294967288>W),b.Sb=W,b.Ra=0,b.u=0,b.h=0,4<W&&(W=4),ae=0;ae<W;++ae)de+=L[j+ae]<<8*ae;b.Ra=de,b.bb=W,b.oa=L,b.pa=j}function tt(b){for(;8<=b.u&&b.bb<b.Sb;)b.Ra>>>=8,b.Ra+=b.oa[b.pa+b.bb]<<no-8>>>0,++b.bb,b.u-=8;ke(b)&&(b.h=1,b.u=0)}function Oe(b,L){if(t(0<=L),!b.h&&L<=cA){var j=Se(b)&hi[L];return b.u+=L,tt(b),j}return b.h=1,b.u=0}function Mt(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function ne(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Se(b){return b.Ra>>>(b.u&no-1)>>>0}function ke(b){return t(b.bb<=b.Sb),b.h||b.bb==b.Sb&&b.u>no}function Ke(b,L){b.u=L,b.h=ke(b)}function at(b){b.u>=uA&&(t(b.u>=uA),tt(b))}function dt(b){t(b!=null&&b.oa!=null),b.pa<b.Zc?(b.I=(b.oa[b.pa++]|b.I<<8)>>>0,b.b+=8):(t(b!=null&&b.oa!=null),b.pa<b.Yc?(b.b+=8,b.I=b.oa[b.pa++]|b.I<<8):b.Ka?b.b=0:(b.I<<=8,b.b+=8,b.Ka=1))}function Bt(b){return ge(b,1)}function Ge(b,L){var j=b.Ca;0>b.b&&dt(b);var W=b.b,ae=j*L>>>8,de=(b.I>>>W>ae)+0;for(de?(j-=ae,b.I-=ae+1<<W>>>0):j=ae+1,W=j,ae=0;256<=W;)ae+=8,W>>=8;return W=7^ae+Fs[W],b.b-=W,b.Ca=(j<<W)-1,de}function rt(b,L,j){b[L+0]=j>>24&255,b[L+1]=j>>16&255,b[L+2]=j>>8&255,b[L+3]=j>>0&255}function Ut(b,L){return b[L+0]<<0|b[L+1]<<8}function ht(b,L){return Ut(b,L)|b[L+2]<<16}function Nt(b,L){return Ut(b,L)|Ut(b,L+2)<<16}function dr(b,L){var j=1<<L;return t(b!=null),t(0<L),b.X=c(j),b.X==null?0:(b.Mb=32-L,b.Xa=L,1)}function Lt(b,L){t(b!=null),t(L!=null),t(b.Xa==L.Xa),s(L.X,0,b.X,0,1<<L.Xa)}function ze(){this.X=[],this.Xa=this.Mb=0}function gr(b,L,j,W){t(j!=null),t(W!=null);var ae=j[0],de=W[0];return ae==0&&(ae=(b*de+L/2)/L),de==0&&(de=(L*ae+b/2)/b),0>=ae||0>=de?0:(j[0]=ae,W[0]=de,1)}function sr(b,L){return b+(1<<L)-1>>>L}function Ht(b,L){return((4278255360&b)+(4278255360&L)>>>0&4278255360)+((16711935&b)+(16711935&L)>>>0&16711935)>>>0}function fr(b,L){fe[L]=function(j,W,ae,de,ye,xe,Ie){var je;for(je=0;je<ye;++je){var ft=fe[b](xe[Ie+je-1],ae,de+je);xe[Ie+je]=Ht(j[W+je],ft)}}}function Br(){this.ud=this.hd=this.jd=0}function vr(b,L){return((4278124286&(b^L))>>>1)+(b&L)>>>0}function Gr(b){return 0<=b&&256>b?b:0>b?0:255<b?255:void 0}function rr(b,L){return Gr(b+(b-L+.5>>1))}function xr(b,L,j){return Math.abs(L-j)-Math.abs(b-j)}function Zr(b,L,j,W,ae,de,ye){for(W=de[ye-1],j=0;j<ae;++j)de[ye+j]=W=Ht(b[L+j],W)}function pn(b,L,j,W,ae){var de;for(de=0;de<j;++de){var ye=b[L+de],xe=ye>>8&255,Ie=16711935&(Ie=(Ie=16711935&ye)+((xe<<16)+xe));W[ae+de]=(4278255360&ye)+Ie>>>0}}function vt(b,L){L.jd=b>>0&255,L.hd=b>>8&255,L.ud=b>>16&255}function nt(b,L,j,W,ae,de){var ye;for(ye=0;ye<W;++ye){var xe=L[j+ye],Ie=xe>>>8,je=xe,ft=255&(ft=(ft=xe>>>16)+((b.jd<<24>>24)*(Ie<<24>>24)>>>5));je=255&(je=(je=je+((b.hd<<24>>24)*(Ie<<24>>24)>>>5))+((b.ud<<24>>24)*(ft<<24>>24)>>>5)),ae[de+ye]=(4278255360&xe)+(ft<<16)+je}}function bt(b,L,j,W,ae){fe[L]=function(de,ye,xe,Ie,je,ft,It,Ft,pt){for(Ie=It;Ie<Ft;++Ie)for(It=0;It<pt;++It)je[ft++]=ae(xe[W(de[ye++])])},fe[b]=function(de,ye,xe,Ie,je,ft,It){var Ft=8>>de.b,pt=de.Ea,Ar=de.K[0],Vt=de.w;if(8>Ft)for(de=(1<<de.b)-1,Vt=(1<<Ft)-1;ye<xe;++ye){var Je,At=0;for(Je=0;Je<pt;++Je)Je&de||(At=W(Ie[je++])),ft[It++]=ae(Ar[At&Vt]),At>>=Ft}else fe["VP8LMapColor"+j](Ie,je,Ar,Vt,ft,It,ye,xe,pt)}}function Ct(b,L,j,W,ae){for(j=L+j;L<j;){var de=b[L++];W[ae++]=de>>16&255,W[ae++]=de>>8&255,W[ae++]=de>>0&255}}function jt(b,L,j,W,ae){for(j=L+j;L<j;){var de=b[L++];W[ae++]=de>>16&255,W[ae++]=de>>8&255,W[ae++]=de>>0&255,W[ae++]=de>>24&255}}function er(b,L,j,W,ae){for(j=L+j;L<j;){var de=(ye=b[L++])>>16&240|ye>>12&15,ye=ye>>0&240|ye>>28&15;W[ae++]=de,W[ae++]=ye}}function Vr(b,L,j,W,ae){for(j=L+j;L<j;){var de=(ye=b[L++])>>16&248|ye>>13&7,ye=ye>>5&224|ye>>3&31;W[ae++]=de,W[ae++]=ye}}function Fr(b,L,j,W,ae){for(j=L+j;L<j;){var de=b[L++];W[ae++]=de>>0&255,W[ae++]=de>>8&255,W[ae++]=de>>16&255}}function un(b,L,j,W,ae,de){if(de==0)for(j=L+j;L<j;)rt(W,((de=b[L++])[0]>>24|de[1]>>8&65280|de[2]<<8&16711680|de[3]<<24)>>>0),ae+=32;else s(W,ae,b,L,j)}function lr(b,L){fe[L][0]=fe[b+"0"],fe[L][1]=fe[b+"1"],fe[L][2]=fe[b+"2"],fe[L][3]=fe[b+"3"],fe[L][4]=fe[b+"4"],fe[L][5]=fe[b+"5"],fe[L][6]=fe[b+"6"],fe[L][7]=fe[b+"7"],fe[L][8]=fe[b+"8"],fe[L][9]=fe[b+"9"],fe[L][10]=fe[b+"10"],fe[L][11]=fe[b+"11"],fe[L][12]=fe[b+"12"],fe[L][13]=fe[b+"13"],fe[L][14]=fe[b+"0"],fe[L][15]=fe[b+"0"]}function Er(b){return b==Ui||b==PA||b==MA||b==DA}function An(){this.eb=[],this.size=this.A=this.fb=0}function wn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function _i(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new An,this.f.kb=new wn,this.sd=null}function br(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Cr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function cr(b){return alert("todo:WebPSamplerProcessPlane"),b.T}function Kr(b,L){var j=b.T,W=L.ba.f.RGBA,ae=W.eb,de=W.fb+b.ka*W.A,ye=S[L.ba.S],xe=b.y,Ie=b.O,je=b.f,ft=b.N,It=b.ea,Ft=b.W,pt=L.cc,Ar=L.dc,Vt=L.Mc,Je=L.Nc,At=b.ka,Yt=b.ka+b.T,ir=b.U,Wt=ir+1>>1;for(At==0?ye(xe,Ie,null,null,je,ft,It,Ft,je,ft,It,Ft,ae,de,null,null,ir):(ye(L.ec,L.fc,xe,Ie,pt,Ar,Vt,Je,je,ft,It,Ft,ae,de-W.A,ae,de,ir),++j);At+2<Yt;At+=2)pt=je,Ar=ft,Vt=It,Je=Ft,ft+=b.Rc,Ft+=b.Rc,de+=2*W.A,ye(xe,(Ie+=2*b.fa)-b.fa,xe,Ie,pt,Ar,Vt,Je,je,ft,It,Ft,ae,de-W.A,ae,de,ir);return Ie+=b.fa,b.j+Yt<b.o?(s(L.ec,L.fc,xe,Ie,ir),s(L.cc,L.dc,je,ft,Wt),s(L.Mc,L.Nc,It,Ft,Wt),j--):1&Yt||ye(xe,Ie,null,null,je,ft,It,Ft,je,ft,It,Ft,ae,de+W.A,null,null,ir),j}function hn(b,L,j){var W=b.F,ae=[b.J];if(W!=null){var de=b.U,ye=L.ba.S,xe=ye==fA||ye==MA;L=L.ba.f.RGBA;var Ie=[0],je=b.ka;Ie[0]=b.T,b.Kb&&(je==0?--Ie[0]:(--je,ae[0]-=b.width),b.j+b.ka+b.T==b.o&&(Ie[0]=b.o-b.j-je));var ft=L.eb;je=L.fb+je*L.A,b=QA(W,ae[0],b.width,de,Ie,ft,je+(xe?0:3),L.A),t(j==Ie),b&&Er(ye)&&ja(ft,je,xe,de,Ie,L.A)}return 0}function xn(b){var L=b.ma,j=L.ba.S,W=11>j,ae=j==_l||j==tl||j==fA||j==kA||j==12||Er(j);if(L.memory=null,L.Ib=null,L.Jb=null,L.Nd=null,!Mi(L.Oa,b,ae?11:12))return 0;if(ae&&Er(j)&&_r(),b.da)alert("todo:use_scaling");else{if(W){if(L.Ib=cr,b.Kb){if(j=b.U+1>>1,L.memory=c(b.U+2*j),L.memory==null)return 0;L.ec=L.memory,L.fc=0,L.cc=L.ec,L.dc=L.fc+b.U,L.Mc=L.cc,L.Nc=L.dc+j,L.Ib=Kr,_r()}}else alert("todo:EmitYUV");ae&&(L.Jb=hn,W&&_t())}if(W&&!We){for(b=0;256>b;++b)Rt[b]=89858*(b-128)+Ne>>Ve,Zt[b]=-22014*(b-128)+Ne,Xt[b]=-45773*(b-128),Qt[b]=113618*(b-128)+Ne>>Ve;for(b=He;b<ct;++b)L=76283*(b-16)+Ne>>Ve,ur[b-He]=rs(L,255),qt[b-He]=rs(L+8>>4,15);We=1}return 1}function Sn(b){var L=b.ma,j=b.U,W=b.T;return t(!(1&b.ka)),0>=j||0>=W?0:(j=L.Ib(b,L),L.Jb!=null&&L.Jb(b,L,j),L.Dc+=j,1)}function ji(b){b.ma.memory=null}function tn(b,L,j,W){return Oe(b,8)!=47?0:(L[0]=Oe(b,14)+1,j[0]=Oe(b,14)+1,W[0]=Oe(b,1),Oe(b,3)!=0?0:!b.h)}function Wi(b,L){if(4>b)return b+1;var j=b-2>>1;return(2+(1&b)<<j)+Oe(L,j)+1}function hs(b,L){return 120<L?L-120:1<=(j=((j=sn[L-1])>>4)*b+(8-(15&j)))?j:1;var j}function Ln(b,L,j){var W=Se(j),ae=b[L+=255&W].g-8;return 0<ae&&(Ke(j,j.u+8),W=Se(j),L+=b[L].value,L+=W&(1<<ae)-1),Ke(j,j.u+b[L].g),b[L].value}function nn(b,L,j){return j.g+=b.g,j.value+=b.value<<L>>>0,t(8>=j.g),b.g}function Ue(b,L,j){var W=b.xc;return t((L=W==0?0:b.vc[b.md*(j>>W)+(L>>W)])<b.Wb),b.Ya[L]}function Y(b,L,j,W){var ae=b.ab,de=b.c*L,ye=b.C;L=ye+L;var xe=j,Ie=W;for(W=b.Ta,j=b.Ua;0<ae--;){var je=b.gc[ae],ft=ye,It=L,Ft=xe,pt=Ie,Ar=(Ie=W,xe=j,je.Ea);switch(t(ft<It),t(It<=je.nc),je.hc){case 2:jo(Ft,pt,(It-ft)*Ar,Ie,xe);break;case 0:var Vt=ft,Je=It,At=Ie,Yt=xe,ir=(Nr=je).Ea;Vt==0&&(_o(Ft,pt,null,null,1,At,Yt),Zr(Ft,pt+1,0,0,ir-1,At,Yt+1),pt+=ir,Yt+=ir,++Vt);for(var Wt=1<<Nr.b,Dr=Wt-1,Qr=sr(ir,Nr.b),Fn=Nr.K,Nr=Nr.w+(Vt>>Nr.b)*Qr;Vt<Je;){var fi=Fn,di=Nr,hr=1;for(io(Ft,pt,At,Yt-ir,1,At,Yt);hr<ir;){var zn=(hr&~Dr)+Wt;zn>ir&&(zn=ir),(0,js[fi[di++]>>8&15])(Ft,pt+ +hr,At,Yt+hr-ir,zn-hr,At,Yt+hr),hr=zn}pt+=ir,Yt+=ir,++Vt&Dr||(Nr+=Qr)}It!=je.nc&&s(Ie,xe-Ar,Ie,xe+(It-ft-1)*Ar,Ar);break;case 1:for(Ar=Ft,Je=pt,ir=(Ft=je.Ea)-(Yt=Ft&~(At=(pt=1<<je.b)-1)),Vt=sr(Ft,je.b),Wt=je.K,je=je.w+(ft>>je.b)*Vt;ft<It;){for(Dr=Wt,Qr=je,Fn=new Br,Nr=Je+Yt,fi=Je+Ft;Je<Nr;)vt(Dr[Qr++],Fn),Ss(Fn,Ar,Je,pt,Ie,xe),Je+=pt,xe+=pt;Je<fi&&(vt(Dr[Qr++],Fn),Ss(Fn,Ar,Je,ir,Ie,xe),Je+=ir,xe+=ir),++ft&At||(je+=Vt)}break;case 3:if(Ft==Ie&&pt==xe&&0<je.b){for(Je=Ie,Ft=Ar=xe+(It-ft)*Ar-(Yt=(It-ft)*sr(je.Ea,je.b)),pt=Ie,At=xe,Vt=[],Yt=(ir=Yt)-1;0<=Yt;--Yt)Vt[Yt]=pt[At+Yt];for(Yt=ir-1;0<=Yt;--Yt)Je[Ft+Yt]=Vt[Yt];Hi(je,ft,It,Ie,Ar,Ie,xe)}else Hi(je,ft,It,Ft,pt,Ie,xe)}xe=W,Ie=j}Ie!=j&&s(W,j,xe,Ie,de)}function Ae(b,L){var j=b.V,W=b.Ba+b.c*b.C,ae=L-b.C;if(t(L<=b.l.o),t(16>=ae),0<ae){var de=b.l,ye=b.Ta,xe=b.Ua,Ie=de.width;if(Y(b,ae,j,W),ae=xe=[xe],t((j=b.C)<(W=L)),t(de.v<de.va),W>de.o&&(W=de.o),j<de.j){var je=de.j-j;j=de.j,ae[0]+=je*Ie}if(j>=W?j=0:(ae[0]+=4*de.v,de.ka=j-de.j,de.U=de.va-de.v,de.T=W-j,j=1),j){if(xe=xe[0],11>(j=b.ca).S){var ft=j.f.RGBA,It=(W=j.S,ae=de.U,de=de.T,je=ft.eb,ft.A),Ft=de;for(ft=ft.fb+b.Ma*ft.A;0<Ft--;){var pt=ye,Ar=xe,Vt=ae,Je=je,At=ft;switch(W){case oo:Ca(pt,Ar,Vt,Je,At);break;case _l:ca(pt,Ar,Vt,Je,At);break;case Ui:ca(pt,Ar,Vt,Je,At),ja(Je,At,0,Vt,1,0);break;case Ra:ua(pt,Ar,Vt,Je,At);break;case tl:un(pt,Ar,Vt,Je,At,1);break;case PA:un(pt,Ar,Vt,Je,At,1),ja(Je,At,0,Vt,1,0);break;case fA:un(pt,Ar,Vt,Je,At,0);break;case MA:un(pt,Ar,Vt,Je,At,0),ja(Je,At,1,Vt,1,0);break;case kA:Xs(pt,Ar,Vt,Je,At);break;case DA:Xs(pt,Ar,Vt,Je,At),LA(Je,At,Vt,1,0);break;case Fa:ss(pt,Ar,Vt,Je,At);break;default:t(0)}xe+=Ie,ft+=It}b.Ma+=de}else alert("todo:EmitRescaledRowsYUVA");t(b.Ma<=j.height)}}b.C=L,t(b.C<=b.i)}function Ee(b){var L;if(0<b.ua)return 0;for(L=0;L<b.Wb;++L){var j=b.Ya[L].G,W=b.Ya[L].H;if(0<j[1][W[1]+0].g||0<j[2][W[2]+0].g||0<j[3][W[3]+0].g)return 0}return 1}function Le(b,L,j,W,ae,de){if(b.Z!=0){var ye=b.qd,xe=b.rd;for(t(v[b.Z]!=null);L<j;++L)v[b.Z](ye,xe,W,ae,W,ae,de),ye=W,xe=ae,ae+=de;b.qd=ye,b.rd=xe}}function Xe(b,L){var j=b.l.ma,W=j.Z==0||j.Z==1?b.l.j:b.C;if(W=b.C<W?W:b.C,t(L<=b.l.o),L>W){var ae=b.l.width,de=j.ca,ye=j.tb+ae*W,xe=b.V,Ie=b.Ba+b.c*W,je=b.gc;t(b.ab==1),t(je[0].hc==3),so(je[0],W,L,xe,Ie,de,ye),Le(j,W,L,de,ye,ae)}b.C=b.Ma=L}function lt(b,L,j,W,ae,de,ye){var xe=b.$/W,Ie=b.$%W,je=b.m,ft=b.s,It=j+b.$,Ft=It;ae=j+W*ae;var pt=j+W*de,Ar=280+ft.ua,Vt=b.Pb?xe:16777216,Je=0<ft.ua?ft.Wa:null,At=ft.wc,Yt=It<pt?Ue(ft,Ie,xe):null;t(b.C<de),t(pt<=ae);var ir=!1;e:for(;;){for(;ir||It<pt;){var Wt=0;if(xe>=Vt){var Dr=It-j;t((Vt=b).Pb),Vt.wd=Vt.m,Vt.xd=Dr,0<Vt.s.ua&&Lt(Vt.s.Wa,Vt.s.vb),Vt=xe+rl}if(Ie&At||(Yt=Ue(ft,Ie,xe)),t(Yt!=null),Yt.Qb&&(L[It]=Yt.qb,ir=!0),!ir)if(at(je),Yt.jc){Wt=je,Dr=L;var Qr=It,Fn=Yt.pd[Se(Wt)&ns-1];t(Yt.jc),256>Fn.g?(Ke(Wt,Wt.u+Fn.g),Dr[Qr]=Fn.value,Wt=0):(Ke(Wt,Wt.u+Fn.g-256),t(256<=Fn.value),Wt=Fn.value),Wt==0&&(ir=!0)}else Wt=Ln(Yt.G[0],Yt.H[0],je);if(je.h)break;if(ir||256>Wt){if(!ir)if(Yt.nd)L[It]=(Yt.qb|Wt<<8)>>>0;else{if(at(je),ir=Ln(Yt.G[1],Yt.H[1],je),at(je),Dr=Ln(Yt.G[2],Yt.H[2],je),Qr=Ln(Yt.G[3],Yt.H[3],je),je.h)break;L[It]=(Qr<<24|ir<<16|Wt<<8|Dr)>>>0}if(ir=!1,++It,++Ie>=W&&(Ie=0,++xe,ye!=null&&xe<=de&&!(xe%16)&&ye(b,xe),Je!=null))for(;Ft<It;)Wt=L[Ft++],Je.X[(506832829*Wt&4294967295)>>>Je.Mb]=Wt}else if(280>Wt){if(Wt=Wi(Wt-256,je),Dr=Ln(Yt.G[4],Yt.H[4],je),at(je),Dr=hs(W,Dr=Wi(Dr,je)),je.h)break;if(It-j<Dr||ae-It<Wt)break e;for(Qr=0;Qr<Wt;++Qr)L[It+Qr]=L[It+Qr-Dr];for(It+=Wt,Ie+=Wt;Ie>=W;)Ie-=W,++xe,ye!=null&&xe<=de&&!(xe%16)&&ye(b,xe);if(t(It<=ae),Ie&At&&(Yt=Ue(ft,Ie,xe)),Je!=null)for(;Ft<It;)Wt=L[Ft++],Je.X[(506832829*Wt&4294967295)>>>Je.Mb]=Wt}else{if(!(Wt<Ar))break e;for(ir=Wt-280,t(Je!=null);Ft<It;)Wt=L[Ft++],Je.X[(506832829*Wt&4294967295)>>>Je.Mb]=Wt;Wt=It,t(!(ir>>>(Dr=Je).Xa)),L[Wt]=Dr.X[ir],ir=!0}ir||t(je.h==ke(je))}if(b.Pb&&je.h&&It<ae)t(b.m.h),b.a=5,b.m=b.wd,b.$=b.xd,0<b.s.ua&&Lt(b.s.vb,b.s.Wa);else{if(je.h)break e;ye!=null&&ye(b,xe>de?de:xe),b.a=0,b.$=It-j}return 1}return b.a=3,0}function Ye(b){t(b!=null),b.vc=null,b.yc=null,b.Ya=null;var L=b.Wa;L!=null&&(L.X=null),b.vb=null,t(b!=null)}function qe(){var b=new Wl;return b==null?null:(b.a=0,b.xb=m,lr("Predictor","VP8LPredictors"),lr("Predictor","VP8LPredictors_C"),lr("PredictorAdd","VP8LPredictorsAdd"),lr("PredictorAdd","VP8LPredictorsAdd_C"),jo=pn,Ss=nt,Ca=Ct,ca=jt,Xs=er,ss=Vr,ua=Fr,fe.VP8LMapColor32b=Ns,fe.VP8LMapColor8b=is,b)}function ut(b,L,j,W,ae){var de=1,ye=[b],xe=[L],Ie=W.m,je=W.s,ft=null,It=0;e:for(;;){if(j)for(;de&&Oe(Ie,1);){var Ft=ye,pt=xe,Ar=W,Vt=1,Je=Ar.m,At=Ar.gc[Ar.ab],Yt=Oe(Je,2);if(Ar.Oc&1<<Yt)de=0;else{switch(Ar.Oc|=1<<Yt,At.hc=Yt,At.Ea=Ft[0],At.nc=pt[0],At.K=[null],++Ar.ab,t(4>=Ar.ab),Yt){case 0:case 1:At.b=Oe(Je,3)+2,Vt=ut(sr(At.Ea,At.b),sr(At.nc,At.b),0,Ar,At.K),At.K=At.K[0];break;case 3:var ir,Wt=Oe(Je,8)+1,Dr=16<Wt?0:4<Wt?1:2<Wt?2:3;if(Ft[0]=sr(At.Ea,Dr),At.b=Dr,ir=Vt=ut(Wt,1,0,Ar,At.K)){var Qr,Fn=Wt,Nr=At,fi=1<<(8>>Nr.b),di=c(fi);if(di==null)ir=0;else{var hr=Nr.K[0],zn=Nr.w;for(di[0]=Nr.K[0][0],Qr=1;Qr<1*Fn;++Qr)di[Qr]=Ht(hr[zn+Qr],di[Qr-1]);for(;Qr<4*fi;++Qr)di[Qr]=0;Nr.K[0]=null,Nr.K[0]=di,ir=1}}Vt=ir;break;case 2:break;default:t(0)}de=Vt}}if(ye=ye[0],xe=xe[0],de&&Oe(Ie,1)&&!(de=1<=(It=Oe(Ie,4))&&11>=It)){W.a=3;break e}var li;if(li=de)t:{var ci,Un,Is,Js=W,Qi=ye,ps=xe,ti=It,os=j,Ts=Js.m,Vi=Js.s,Ki=[null],Ys=1,Ao=0,Ci=vn[ti];r:for(;;){if(os&&Oe(Ts,1)){var Us=Oe(Ts,3)+2,xo=sr(Qi,Us),lo=sr(ps,Us),Bo=xo*lo;if(!ut(xo,lo,0,Js,Ki))break r;for(Ki=Ki[0],Vi.xc=Us,ci=0;ci<Bo;++ci){var Ho=Ki[ci]>>8&65535;Ki[ci]=Ho,Ho>=Ys&&(Ys=Ho+1)}}if(Ts.h)break r;for(Un=0;5>Un;++Un){var Yi=Gc[Un];!Un&&0<ti&&(Yi+=1<<ti),Ao<Yi&&(Ao=Yi)}var qc=h(Ys*Ci,se),lh=Ys,Fu=h(lh,me);if(Fu==null)var Wc=null;else t(65536>=lh),Wc=Fu;var nl=c(Ao);if(Wc==null||nl==null||qc==null){Js.a=1;break r}var Xc=qc;for(ci=Is=0;ci<Ys;++ci){var co=Wc[ci],bl=co.G,il=co.H,xl=0,Bl=1,Jl=0;for(Un=0;5>Un;++Un){Yi=Gc[Un],bl[Un]=Xc,il[Un]=Is,!Un&&0<ti&&(Yi+=1<<ti);i:{var NA,sl=Yi,Bc=Js,Yl=nl,fa=Xc,$s=Is,$l=0,Co=Bc.m,Su=Oe(Co,1);if(l(Yl,0,0,sl),Su){var ec=Oe(Co,1)+1,ch=Oe(Co,1),Zc=Oe(Co,ch==0?1:8);Yl[Zc]=1,ec==2&&(Yl[Zc=Oe(Co,8)]=1);var Cl=1}else{var Cc=c(19),Iu=Oe(Co,4)+4;if(19<Iu){Bc.a=3;var Ec=0;break i}for(NA=0;NA<Iu;++NA)Cc[dA[NA]]=Oe(Co,3);var Ia=void 0,El=void 0,Jc=Bc,uh=Cc,tc=sl,rc=Yl,Ta=0,jA=Jc.m,hh=8,fh=h(128,se);n:for(;ee(fh,0,7,uh,19);){if(Oe(jA,1)){var $h=2+2*Oe(jA,3);if((Ia=2+Oe(jA,$h))>tc)break n}else Ia=tc;for(El=0;El<tc&&Ia--;){at(jA);var nc=fh[0+(127&Se(jA))];Ke(jA,jA.u+nc.g);var RA=nc.value;if(16>RA)rc[El++]=RA,RA!=0&&(hh=RA);else{var Yc=RA==16,OA=RA-16,_s=Kc[OA],ic=Oe(jA,Vc[OA])+_s;if(El+ic>tc)break n;for(var ef=Yc?hh:0;0<ic--;)rc[El++]=ef}}Ta=1;break n}Ta||(Jc.a=3),Cl=Ta}(Cl=Cl&&!Co.h)&&($l=ee(fa,$s,8,Yl,sl)),Cl&&$l!=0?Ec=$l:(Bc.a=3,Ec=0)}if(Ec==0)break r;if(Bl&&wo[Un]==1&&(Bl=Xc[Is].g==0),xl+=Xc[Is].g,Is+=Ec,3>=Un){var Fc,$c=nl[0];for(Fc=1;Fc<Yi;++Fc)nl[Fc]>$c&&($c=nl[Fc]);Jl+=$c}}if(co.nd=Bl,co.Qb=0,Bl&&(co.qb=(bl[3][il[3]+0].value<<24|bl[1][il[1]+0].value<<16|bl[2][il[2]+0].value)>>>0,xl==0&&256>bl[0][il[0]+0].value&&(co.Qb=1,co.qb+=bl[0][il[0]+0].value<<8)),co.jc=!co.Qb&&6>Jl,co.jc){var sc,HA=co;for(sc=0;sc<ns;++sc){var al=sc,gA=HA.pd[al],eu=HA.G[0][HA.H[0]+al];256<=eu.value?(gA.g=eu.g+256,gA.value=eu.value):(gA.g=0,gA.value=0,al>>=nn(eu,8,gA),al>>=nn(HA.G[1][HA.H[1]+al],16,gA),al>>=nn(HA.G[2][HA.H[2]+al],0,gA),nn(HA.G[3][HA.H[3]+al],24,gA))}}}Vi.vc=Ki,Vi.Wb=Ys,Vi.Ya=Wc,Vi.yc=qc,li=1;break t}li=0}if(!(de=li)){W.a=3;break e}if(0<It){if(je.ua=1<<It,!dr(je.Wa,It)){W.a=1,de=0;break e}}else je.ua=0;var ol=W,dh=ye,As=xe,ac=ol.s,Sc=ac.xc;if(ol.c=dh,ol.i=As,ac.md=sr(dh,Sc),ac.wc=Sc==0?-1:(1<<Sc)-1,j){W.xb=u;break e}if((ft=c(ye*xe))==null){W.a=1,de=0;break e}de=(de=lt(W,ft,0,ye,xe,xe,null))&&!Ie.h;break e}return de?(ae!=null?ae[0]=ft:(t(ft==null),t(j)),W.$=0,j||Ye(je)):Ye(je),de}function Ot(b,L){var j=b.c*b.i,W=j+L+16*L;return t(b.c<=L),b.V=c(W),b.V==null?(b.Ta=null,b.Ua=0,b.a=1,0):(b.Ta=b.V,b.Ua=b.Ba+j+L,1)}function nr(b,L){var j=b.C,W=L-j,ae=b.V,de=b.Ba+b.c*j;for(t(L<=b.l.o);0<W;){var ye=16<W?16:W,xe=b.l.ma,Ie=b.l.width,je=Ie*ye,ft=xe.ca,It=xe.tb+Ie*j,Ft=b.Ta,pt=b.Ua;Y(b,ye,ae,de),Xl(Ft,pt,ft,It,je),Le(xe,j,j+ye,ft,It,Ie),W-=ye,ae+=ye*b.c,j+=ye}t(j==L),b.C=b.Ma=L}function zt(){this.ub=this.yd=this.td=this.Rb=0}function jr(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Hr(){this.Fb=this.Bb=this.Cb=0,this.Zb=c(4),this.Lb=c(4)}function Tr(){this.Yb=function(){var b=[];return function L(j,W,ae){for(var de=ae[W],ye=0;ye<de&&(j.push(ae.length>W+1?[]:0),!(ae.length<W+1));ye++)L(j[ye],W+1,ae)}(b,0,[3,11]),b}()}function ln(){this.jb=c(3),this.Wc=a([4,8],Tr),this.Xc=a([4,17],Tr)}function dn(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new c(4),this.od=new c(4)}function In(){this.ld=this.La=this.dd=this.tc=0}function mn(){this.Na=this.la=0}function Bn(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function kn(){this.ad=c(384),this.Za=0,this.Ob=c(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Vn(){this.uc=this.M=this.Nb=0,this.wa=Array(new In),this.Y=0,this.ya=Array(new kn),this.aa=0,this.l=new wi}function Ti(){this.y=c(16),this.f=c(8),this.ea=c(8)}function oi(){this.cb=this.a=0,this.sc="",this.m=new Mt,this.Od=new zt,this.Kc=new jr,this.ed=new dn,this.Qa=new Hr,this.Ic=this.$c=this.Aa=0,this.D=new Vn,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=h(8,Mt),this.ia=0,this.pb=h(4,Bn),this.Pa=new ln,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ti),this.Hd=0,this.rb=Array(new mn),this.sb=0,this.wa=Array(new In),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new kn),this.L=this.aa=0,this.gd=a([4,2],In),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function wi(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Qs(){var b=new oi;return b!=null&&(b.a=0,b.sc="OK",b.cb=0,b.Xb=0,as||(as=Ks)),b}function bi(b,L,j){return b.a==0&&(b.a=L,b.sc=j,b.cb=0),0}function Yn(b,L,j){return 3<=j&&b[L+0]==157&&b[L+1]==1&&b[L+2]==42}function Za(b,L){if(b==null)return 0;if(b.a=0,b.sc="OK",L==null)return bi(b,2,"null VP8Io passed to VP8GetHeaders()");var j=L.data,W=L.w,ae=L.ha;if(4>ae)return bi(b,7,"Truncated header.");var de=j[W+0]|j[W+1]<<8|j[W+2]<<16,ye=b.Od;if(ye.Rb=!(1&de),ye.td=de>>1&7,ye.yd=de>>4&1,ye.ub=de>>5,3<ye.td)return bi(b,3,"Incorrect keyframe parameters.");if(!ye.yd)return bi(b,4,"Frame not displayable.");W+=3,ae-=3;var xe=b.Kc;if(ye.Rb){if(7>ae)return bi(b,7,"cannot parse picture header");if(!Yn(j,W,ae))return bi(b,3,"Bad code word");xe.c=16383&(j[W+4]<<8|j[W+3]),xe.Td=j[W+4]>>6,xe.i=16383&(j[W+6]<<8|j[W+5]),xe.Ud=j[W+6]>>6,W+=7,ae-=7,b.za=xe.c+15>>4,b.Ub=xe.i+15>>4,L.width=xe.c,L.height=xe.i,L.Da=0,L.j=0,L.v=0,L.va=L.width,L.o=L.height,L.da=0,L.ib=L.width,L.hb=L.height,L.U=L.width,L.T=L.height,l((de=b.Pa).jb,0,255,de.jb.length),t((de=b.Qa)!=null),de.Cb=0,de.Bb=0,de.Fb=1,l(de.Zb,0,0,de.Zb.length),l(de.Lb,0,0,de.Lb)}if(ye.ub>ae)return bi(b,7,"bad partition length");Pe(de=b.m,j,W,ye.ub),W+=ye.ub,ae-=ye.ub,ye.Rb&&(xe.Ld=Bt(de),xe.Kd=Bt(de)),xe=b.Qa;var Ie,je=b.Pa;if(t(de!=null),t(xe!=null),xe.Cb=Bt(de),xe.Cb){if(xe.Bb=Bt(de),Bt(de)){for(xe.Fb=Bt(de),Ie=0;4>Ie;++Ie)xe.Zb[Ie]=Bt(de)?Qe(de,7):0;for(Ie=0;4>Ie;++Ie)xe.Lb[Ie]=Bt(de)?Qe(de,6):0}if(xe.Bb)for(Ie=0;3>Ie;++Ie)je.jb[Ie]=Bt(de)?ge(de,8):255}else xe.Bb=0;if(de.Ka)return bi(b,3,"cannot parse segment header");if((xe=b.ed).zd=Bt(de),xe.Tb=ge(de,6),xe.wb=ge(de,3),xe.Pc=Bt(de),xe.Pc&&Bt(de)){for(je=0;4>je;++je)Bt(de)&&(xe.vd[je]=Qe(de,6));for(je=0;4>je;++je)Bt(de)&&(xe.od[je]=Qe(de,6))}if(b.L=xe.Tb==0?0:xe.zd?1:2,de.Ka)return bi(b,3,"cannot parse filter header");var ft=ae;if(ae=Ie=W,W=Ie+ft,xe=ft,b.Xb=(1<<ge(b.m,2))-1,ft<3*(je=b.Xb))j=7;else{for(Ie+=3*je,xe-=3*je,ft=0;ft<je;++ft){var It=j[ae+0]|j[ae+1]<<8|j[ae+2]<<16;It>xe&&(It=xe),Pe(b.Jc[+ft],j,Ie,It),Ie+=It,xe-=It,ae+=3}Pe(b.Jc[+je],j,Ie,xe),j=Ie<W?0:5}if(j!=0)return bi(b,j,"cannot parse partitions");for(j=ge(Ie=b.m,7),ae=Bt(Ie)?Qe(Ie,4):0,W=Bt(Ie)?Qe(Ie,4):0,xe=Bt(Ie)?Qe(Ie,4):0,je=Bt(Ie)?Qe(Ie,4):0,Ie=Bt(Ie)?Qe(Ie,4):0,ft=b.Qa,It=0;4>It;++It){if(ft.Cb){var Ft=ft.Zb[It];ft.Fb||(Ft+=j)}else{if(0<It){b.pb[It]=b.pb[0];continue}Ft=j}var pt=b.pb[It];pt.Sc[0]=wl[rs(Ft+ae,127)],pt.Sc[1]=Sa[rs(Ft+0,127)],pt.Eb[0]=2*wl[rs(Ft+W,127)],pt.Eb[1]=101581*Sa[rs(Ft+xe,127)]>>16,8>pt.Eb[1]&&(pt.Eb[1]=8),pt.Qc[0]=wl[rs(Ft+je,117)],pt.Qc[1]=Sa[rs(Ft+Ie,127)],pt.lc=Ft+Ie}if(!ye.Rb)return bi(b,4,"Not a key frame.");for(Bt(de),ye=b.Pa,j=0;4>j;++j){for(ae=0;8>ae;++ae)for(W=0;3>W;++W)for(xe=0;11>xe;++xe)je=Ge(de,ds[j][ae][W][xe])?ge(de,8):mA[j][ae][W][xe],ye.Wc[j][ae].Yb[W][xe]=je;for(ae=0;17>ae;++ae)ye.Xc[j][ae]=ye.Wc[j][xc[ae]]}return b.kc=Bt(de),b.kc&&(b.Bd=ge(de,8)),b.cb=1}function Ks(b,L,j,W,ae,de,ye){var xe=L[ae].Yb[j];for(j=0;16>ae;++ae){if(!Ge(b,xe[j+0]))return ae;for(;!Ge(b,xe[j+1]);)if(xe=L[++ae].Yb[0],j=0,ae==16)return 16;var Ie=L[ae+1].Yb;if(Ge(b,xe[j+2])){var je=b,ft=0;if(Ge(je,(Ft=xe)[(It=j)+3]))if(Ge(je,Ft[It+6])){for(xe=0,It=2*(ft=Ge(je,Ft[It+8]))+(Ft=Ge(je,Ft[It+9+ft])),ft=0,Ft=pA[It];Ft[xe];++xe)ft+=ft+Ge(je,Ft[xe]);ft+=3+(8<<It)}else Ge(je,Ft[It+7])?(ft=7+2*Ge(je,165),ft+=Ge(je,145)):ft=5+Ge(je,159);else ft=Ge(je,Ft[It+4])?3+Ge(je,Ft[It+5]):2;xe=Ie[2]}else ft=1,xe=Ie[1];Ie=ye+bo[ae],0>(je=b).b&&dt(je);var It,Ft=je.b,pt=(It=je.Ca>>1)-(je.I>>Ft)>>31;--je.b,je.Ca+=pt,je.Ca|=1,je.I-=(It+1&pt)<<Ft,de[Ie]=((ft^pt)-pt)*W[(0<ae)+0]}return 16}function Gs(b){var L=b.rb[b.sb-1];L.la=0,L.Na=0,l(b.zc,0,0,b.zc.length),b.ja=0}function ia(b,L){if(b==null)return 0;if(L==null)return bi(b,2,"NULL VP8Io parameter in VP8Decode().");if(!b.cb&&!Za(b,L))return 0;if(t(b.cb),L.ac==null||L.ac(L)){L.ob&&(b.L=0);var j=Ur[b.L];if(b.L==2?(b.yb=0,b.zb=0):(b.yb=L.v-j>>4,b.zb=L.j-j>>4,0>b.yb&&(b.yb=0),0>b.zb&&(b.zb=0)),b.Va=L.o+15+j>>4,b.Hb=L.va+15+j>>4,b.Hb>b.za&&(b.Hb=b.za),b.Va>b.Ub&&(b.Va=b.Ub),0<b.L){var W=b.ed;for(j=0;4>j;++j){var ae;if(b.Qa.Cb){var de=b.Qa.Lb[j];b.Qa.Fb||(de+=W.Tb)}else de=W.Tb;for(ae=0;1>=ae;++ae){var ye=b.gd[j][ae],xe=de;if(W.Pc&&(xe+=W.vd[0],ae&&(xe+=W.od[0])),0<(xe=0>xe?0:63<xe?63:xe)){var Ie=xe;0<W.wb&&(Ie=4<W.wb?Ie>>2:Ie>>1)>9-W.wb&&(Ie=9-W.wb),1>Ie&&(Ie=1),ye.dd=Ie,ye.tc=2*xe+Ie,ye.ld=40<=xe?2:15<=xe?1:0}else ye.tc=0;ye.La=ae}}}j=0}else bi(b,6,"Frame setup failed"),j=b.a;if(j=j==0){if(j){b.$c=0,0<b.Aa||(b.Ic=Pn);e:{j=b.Ic,W=4*(Ie=b.za);var je=32*Ie,ft=Ie+1,It=0<b.L?Ie*(0<b.Aa?2:1):0,Ft=(b.Aa==2?2:1)*Ie;if((ye=W+832+(ae=3*(16*j+Ur[b.L])/2*je)+(de=b.Fa!=null&&0<b.Fa.length?b.Kc.c*b.Kc.i:0))!=ye)j=0;else{if(ye>b.Vb){if(b.Vb=0,b.Ec=c(ye),b.Fc=0,b.Ec==null){j=bi(b,1,"no memory during frame initialization.");break e}b.Vb=ye}ye=b.Ec,xe=b.Fc,b.Ac=ye,b.Bc=xe,xe+=W,b.Gd=h(je,Ti),b.Hd=0,b.rb=h(ft+1,mn),b.sb=1,b.wa=It?h(It,In):null,b.Y=0,b.D.Nb=0,b.D.wa=b.wa,b.D.Y=b.Y,0<b.Aa&&(b.D.Y+=Ie),t(!0),b.oc=ye,b.pc=xe,xe+=832,b.ya=h(Ft,kn),b.aa=0,b.D.ya=b.ya,b.D.aa=b.aa,b.Aa==2&&(b.D.aa+=Ie),b.R=16*Ie,b.B=8*Ie,Ie=(je=Ur[b.L])*b.R,je=je/2*b.B,b.sa=ye,b.ta=xe+Ie,b.qa=b.sa,b.ra=b.ta+16*j*b.R+je,b.Ha=b.qa,b.Ia=b.ra+8*j*b.B+je,b.$c=0,xe+=ae,b.mb=de?ye:null,b.nb=de?xe:null,t(xe+de<=b.Fc+b.Vb),Gs(b),l(b.Ac,b.Bc,0,W),j=1}}if(j){if(L.ka=0,L.y=b.sa,L.O=b.ta,L.f=b.qa,L.N=b.ra,L.ea=b.Ha,L.Vd=b.Ia,L.fa=b.R,L.Rc=b.B,L.F=null,L.J=0,!Zl){for(j=-255;255>=j;++j)YA[255+j]=0>j?-j:j;for(j=-1020;1020>=j;++j)wc[1020+j]=-128>j?-128:127<j?127:j;for(j=-112;112>=j;++j)zc[112+j]=-16>j?-16:15<j?15:j;for(j=-255;510>=j;++j)vl[255+j]=0>j?0:255<j?255:j;Zl=1}gi=Ja,JA=EA,Na=sa,fs=bs,Ea=xs,Da=nA,Ro=oA,Rs=AA,hA=XA,ao=SA,Oo=_c,zi=_a,Pr=IA,Ii=TA,Ai=eo,Bi=to,Zi=ro,Sr=ql,g[0]=Pa,g[1]=Po,g[2]=qA,g[3]=ml,g[4]=go,g[5]=yo,g[6]=aA,g[7]=gt,g[8]=Ds,g[9]=Mn,ha[0]=Bs,ha[1]=Mo,ha[2]=oa,ha[3]=qs,ha[4]=ys,ha[5]=iA,ha[6]=sA,i[0]=Ya,i[1]=ka,i[2]=Oi,i[3]=ks,i[4]=Aa,i[5]=Cs,i[6]=$a,j=1}else j=0}j&&(j=function(pt,Ar){for(pt.M=0;pt.M<pt.Va;++pt.M){var Vt,Je=pt.Jc[pt.M&pt.Xb],At=pt.m,Yt=pt;for(Vt=0;Vt<Yt.za;++Vt){var ir=At,Wt=Yt,Dr=Wt.Ac,Qr=Wt.Bc+4*Vt,Fn=Wt.zc,Nr=Wt.ya[Wt.aa+Vt];if(Wt.Qa.Bb?Nr.$b=Ge(ir,Wt.Pa.jb[0])?2+Ge(ir,Wt.Pa.jb[2]):Ge(ir,Wt.Pa.jb[1]):Nr.$b=0,Wt.kc&&(Nr.Ad=Ge(ir,Wt.Bd)),Nr.Za=!Ge(ir,145)+0,Nr.Za){var fi=Nr.Ob,di=0;for(Wt=0;4>Wt;++Wt){var hr,zn=Fn[0+Wt];for(hr=0;4>hr;++hr){zn=Ji[Dr[Qr+hr]][zn];for(var li=bc[Ge(ir,zn[0])];0<li;)li=bc[2*li+Ge(ir,zn[li])];zn=-li,Dr[Qr+hr]=zn}s(fi,di,Dr,Qr,4),di+=4,Fn[0+Wt]=zn}}else zn=Ge(ir,156)?Ge(ir,128)?1:3:Ge(ir,163)?2:0,Nr.Ob[0]=zn,l(Dr,Qr,zn,4),l(Fn,0,zn,4);Nr.Dd=Ge(ir,142)?Ge(ir,114)?Ge(ir,183)?1:3:2:0}if(Yt.m.Ka)return bi(pt,7,"Premature end-of-partition0 encountered.");for(;pt.ja<pt.za;++pt.ja){if(Yt=Je,ir=(At=pt).rb[At.sb-1],Dr=At.rb[At.sb+At.ja],Vt=At.ya[At.aa+At.ja],Qr=At.kc?Vt.Ad:0)ir.la=Dr.la=0,Vt.Za||(ir.Na=Dr.Na=0),Vt.Hc=0,Vt.Gc=0,Vt.ia=0;else{var ci,Un;if(ir=Dr,Dr=Yt,Qr=At.Pa.Xc,Fn=At.ya[At.aa+At.ja],Nr=At.pb[Fn.$b],Wt=Fn.ad,fi=0,di=At.rb[At.sb-1],zn=hr=0,l(Wt,fi,0,384),Fn.Za)var Is=0,Js=Qr[3];else{li=c(16);var Qi=ir.Na+di.Na;if(Qi=as(Dr,Qr[1],Qi,Nr.Eb,0,li,0),ir.Na=di.Na=(0<Qi)+0,1<Qi)gi(li,0,Wt,fi);else{var ps=li[0]+3>>3;for(li=0;256>li;li+=16)Wt[fi+li]=ps}Is=1,Js=Qr[0]}var ti=15&ir.la,os=15&di.la;for(li=0;4>li;++li){var Ts=1&os;for(ps=Un=0;4>ps;++ps)ti=ti>>1|(Ts=(Qi=as(Dr,Js,Qi=Ts+(1&ti),Nr.Sc,Is,Wt,fi))>Is)<<7,Un=Un<<2|(3<Qi?3:1<Qi?2:Wt[fi+0]!=0),fi+=16;ti>>=4,os=os>>1|Ts<<7,hr=(hr<<8|Un)>>>0}for(Js=ti,Is=os>>4,ci=0;4>ci;ci+=2){for(Un=0,ti=ir.la>>4+ci,os=di.la>>4+ci,li=0;2>li;++li){for(Ts=1&os,ps=0;2>ps;++ps)Qi=Ts+(1&ti),ti=ti>>1|(Ts=0<(Qi=as(Dr,Qr[2],Qi,Nr.Qc,0,Wt,fi)))<<3,Un=Un<<2|(3<Qi?3:1<Qi?2:Wt[fi+0]!=0),fi+=16;ti>>=2,os=os>>1|Ts<<5}zn|=Un<<4*ci,Js|=ti<<4<<ci,Is|=(240&os)<<ci}ir.la=Js,di.la=Is,Fn.Hc=hr,Fn.Gc=zn,Fn.ia=43690&zn?0:Nr.ia,Qr=!(hr|zn)}if(0<At.L&&(At.wa[At.Y+At.ja]=At.gd[Vt.$b][Vt.Za],At.wa[At.Y+At.ja].La|=!Qr),Yt.Ka)return bi(pt,7,"Premature end-of-file encountered.")}if(Gs(pt),At=Ar,Yt=1,Vt=(Je=pt).D,ir=0<Je.L&&Je.M>=Je.zb&&Je.M<=Je.Va,Je.Aa==0)e:{if(Vt.M=Je.M,Vt.uc=ir,Pi(Je,Vt),Yt=1,Vt=(Un=Je.D).Nb,ir=(zn=Ur[Je.L])*Je.R,Dr=zn/2*Je.B,li=16*Vt*Je.R,ps=8*Vt*Je.B,Qr=Je.sa,Fn=Je.ta-ir+li,Nr=Je.qa,Wt=Je.ra-Dr+ps,fi=Je.Ha,di=Je.Ia-Dr+ps,os=(ti=Un.M)==0,hr=ti>=Je.Va-1,Je.Aa==2&&Pi(Je,Un),Un.uc)for(Ts=(Qi=Je).D.M,t(Qi.D.uc),Un=Qi.yb;Un<Qi.Hb;++Un){Is=Un,Js=Ts;var Vi=(Ki=(Yi=Qi).D).Nb;ci=Yi.R;var Ki=Ki.wa[Ki.Y+Is],Ys=Yi.sa,Ao=Yi.ta+16*Vi*ci+16*Is,Ci=Ki.dd,Us=Ki.tc;if(Us!=0)if(t(3<=Us),Yi.L==1)0<Is&&Bi(Ys,Ao,ci,Us+4),Ki.La&&Sr(Ys,Ao,ci,Us),0<Js&&Ai(Ys,Ao,ci,Us+4),Ki.La&&Zi(Ys,Ao,ci,Us);else{var xo=Yi.B,lo=Yi.qa,Bo=Yi.ra+8*Vi*xo+8*Is,Ho=Yi.Ha,Yi=Yi.Ia+8*Vi*xo+8*Is;Vi=Ki.ld,0<Is&&(Rs(Ys,Ao,ci,Us+4,Ci,Vi),ao(lo,Bo,Ho,Yi,xo,Us+4,Ci,Vi)),Ki.La&&(zi(Ys,Ao,ci,Us,Ci,Vi),Ii(lo,Bo,Ho,Yi,xo,Us,Ci,Vi)),0<Js&&(Ro(Ys,Ao,ci,Us+4,Ci,Vi),hA(lo,Bo,Ho,Yi,xo,Us+4,Ci,Vi)),Ki.La&&(Oo(Ys,Ao,ci,Us,Ci,Vi),Pr(lo,Bo,Ho,Yi,xo,Us,Ci,Vi))}}if(Je.ia&&alert("todo:DitherRow"),At.put!=null){if(Un=16*ti,ti=16*(ti+1),os?(At.y=Je.sa,At.O=Je.ta+li,At.f=Je.qa,At.N=Je.ra+ps,At.ea=Je.Ha,At.W=Je.Ia+ps):(Un-=zn,At.y=Qr,At.O=Fn,At.f=Nr,At.N=Wt,At.ea=fi,At.W=di),hr||(ti-=zn),ti>At.o&&(ti=At.o),At.F=null,At.J=null,Je.Fa!=null&&0<Je.Fa.length&&Un<ti&&(At.J=xi(Je,At,Un,ti-Un),At.F=Je.mb,At.F==null&&At.F.length==0)){Yt=bi(Je,3,"Could not decode alpha data.");break e}Un<At.j&&(zn=At.j-Un,Un=At.j,t(!(1&zn)),At.O+=Je.R*zn,At.N+=Je.B*(zn>>1),At.W+=Je.B*(zn>>1),At.F!=null&&(At.J+=At.width*zn)),Un<ti&&(At.O+=At.v,At.N+=At.v>>1,At.W+=At.v>>1,At.F!=null&&(At.J+=At.v),At.ka=Un-At.j,At.U=At.va-At.v,At.T=ti-Un,Yt=At.put(At))}Vt+1!=Je.Ic||hr||(s(Je.sa,Je.ta-ir,Qr,Fn+16*Je.R,ir),s(Je.qa,Je.ra-Dr,Nr,Wt+8*Je.B,Dr),s(Je.Ha,Je.Ia-Dr,fi,di+8*Je.B,Dr))}if(!Yt)return bi(pt,6,"Output aborted.")}return 1}(b,L)),L.bc!=null&&L.bc(L),j&=1}return j?(b.cb=0,j):0}function gs(b,L,j,W,ae){ae=b[L+j+32*W]+(ae>>3),b[L+j+32*W]=-256&ae?0>ae?0:255:ae}function Ri(b,L,j,W,ae,de){gs(b,L,0,j,W+ae),gs(b,L,1,j,W+de),gs(b,L,2,j,W-de),gs(b,L,3,j,W-ae)}function Xi(b){return(20091*b>>16)+b}function mo(b,L,j,W){var ae,de=0,ye=c(16);for(ae=0;4>ae;++ae){var xe=b[L+0]+b[L+8],Ie=b[L+0]-b[L+8],je=(35468*b[L+4]>>16)-Xi(b[L+12]),ft=Xi(b[L+4])+(35468*b[L+12]>>16);ye[de+0]=xe+ft,ye[de+1]=Ie+je,ye[de+2]=Ie-je,ye[de+3]=xe-ft,de+=4,L++}for(ae=de=0;4>ae;++ae)xe=(b=ye[de+0]+4)+ye[de+8],Ie=b-ye[de+8],je=(35468*ye[de+4]>>16)-Xi(ye[de+12]),gs(j,W,0,0,xe+(ft=Xi(ye[de+4])+(35468*ye[de+12]>>16))),gs(j,W,1,0,Ie+je),gs(j,W,2,0,Ie-je),gs(j,W,3,0,xe-ft),de++,W+=32}function nA(b,L,j,W){var ae=b[L+0]+4,de=35468*b[L+4]>>16,ye=Xi(b[L+4]),xe=35468*b[L+1]>>16;Ri(j,W,0,ae+ye,b=Xi(b[L+1]),xe),Ri(j,W,1,ae+de,b,xe),Ri(j,W,2,ae-de,b,xe),Ri(j,W,3,ae-ye,b,xe)}function EA(b,L,j,W,ae){mo(b,L,j,W),ae&&mo(b,L+16,j,W+4)}function sa(b,L,j,W){JA(b,L+0,j,W,1),JA(b,L+32,j,W+128,1)}function bs(b,L,j,W){var ae;for(b=b[L+0]+4,ae=0;4>ae;++ae)for(L=0;4>L;++L)gs(j,W,L,ae,b)}function xs(b,L,j,W){b[L+0]&&fs(b,L+0,j,W),b[L+16]&&fs(b,L+16,j,W+4),b[L+32]&&fs(b,L+32,j,W+128),b[L+48]&&fs(b,L+48,j,W+128+4)}function Ja(b,L,j,W){var ae,de=c(16);for(ae=0;4>ae;++ae){var ye=b[L+0+ae]+b[L+12+ae],xe=b[L+4+ae]+b[L+8+ae],Ie=b[L+4+ae]-b[L+8+ae],je=b[L+0+ae]-b[L+12+ae];de[0+ae]=ye+xe,de[8+ae]=ye-xe,de[4+ae]=je+Ie,de[12+ae]=je-Ie}for(ae=0;4>ae;++ae)ye=(b=de[0+4*ae]+3)+de[3+4*ae],xe=de[1+4*ae]+de[2+4*ae],Ie=de[1+4*ae]-de[2+4*ae],je=b-de[3+4*ae],j[W+0]=ye+xe>>3,j[W+16]=je+Ie>>3,j[W+32]=ye-xe>>3,j[W+48]=je-Ie>>3,W+=64}function aa(b,L,j){var W,ae=L-32,de=Zs,ye=255-b[ae-1];for(W=0;W<j;++W){var xe,Ie=de,je=ye+b[L-1];for(xe=0;xe<j;++xe)b[L+xe]=Ie[je+b[ae+xe]];L+=32}}function Po(b,L){aa(b,L,4)}function ka(b,L){aa(b,L,8)}function Mo(b,L){aa(b,L,16)}function oa(b,L){var j;for(j=0;16>j;++j)s(b,L+32*j,b,L-32,16)}function qs(b,L){var j;for(j=16;0<j;--j)l(b,L,b[L-1],16),L+=32}function ni(b,L,j){var W;for(W=0;16>W;++W)l(L,j+32*W,b,16)}function Bs(b,L){var j,W=16;for(j=0;16>j;++j)W+=b[L-1+32*j]+b[L+j-32];ni(W>>5,b,L)}function ys(b,L){var j,W=8;for(j=0;16>j;++j)W+=b[L-1+32*j];ni(W>>4,b,L)}function iA(b,L){var j,W=8;for(j=0;16>j;++j)W+=b[L+j-32];ni(W>>4,b,L)}function sA(b,L){ni(128,b,L)}function Cn(b,L,j){return b+2*L+j+2>>2}function qA(b,L){var j,W=L-32;for(W=new Uint8Array([Cn(b[W-1],b[W+0],b[W+1]),Cn(b[W+0],b[W+1],b[W+2]),Cn(b[W+1],b[W+2],b[W+3]),Cn(b[W+2],b[W+3],b[W+4])]),j=0;4>j;++j)s(b,L+32*j,W,0,W.length)}function ml(b,L){var j=b[L-1],W=b[L-1+32],ae=b[L-1+64],de=b[L-1+96];rt(b,L+0,16843009*Cn(b[L-1-32],j,W)),rt(b,L+32,16843009*Cn(j,W,ae)),rt(b,L+64,16843009*Cn(W,ae,de)),rt(b,L+96,16843009*Cn(ae,de,de))}function Pa(b,L){var j,W=4;for(j=0;4>j;++j)W+=b[L+j-32]+b[L-1+32*j];for(W>>=3,j=0;4>j;++j)l(b,L+32*j,W,4)}function go(b,L){var j=b[L-1+0],W=b[L-1+32],ae=b[L-1+64],de=b[L-1-32],ye=b[L+0-32],xe=b[L+1-32],Ie=b[L+2-32],je=b[L+3-32];b[L+0+96]=Cn(W,ae,b[L-1+96]),b[L+1+96]=b[L+0+64]=Cn(j,W,ae),b[L+2+96]=b[L+1+64]=b[L+0+32]=Cn(de,j,W),b[L+3+96]=b[L+2+64]=b[L+1+32]=b[L+0+0]=Cn(ye,de,j),b[L+3+64]=b[L+2+32]=b[L+1+0]=Cn(xe,ye,de),b[L+3+32]=b[L+2+0]=Cn(Ie,xe,ye),b[L+3+0]=Cn(je,Ie,xe)}function aA(b,L){var j=b[L+1-32],W=b[L+2-32],ae=b[L+3-32],de=b[L+4-32],ye=b[L+5-32],xe=b[L+6-32],Ie=b[L+7-32];b[L+0+0]=Cn(b[L+0-32],j,W),b[L+1+0]=b[L+0+32]=Cn(j,W,ae),b[L+2+0]=b[L+1+32]=b[L+0+64]=Cn(W,ae,de),b[L+3+0]=b[L+2+32]=b[L+1+64]=b[L+0+96]=Cn(ae,de,ye),b[L+3+32]=b[L+2+64]=b[L+1+96]=Cn(de,ye,xe),b[L+3+64]=b[L+2+96]=Cn(ye,xe,Ie),b[L+3+96]=Cn(xe,Ie,Ie)}function yo(b,L){var j=b[L-1+0],W=b[L-1+32],ae=b[L-1+64],de=b[L-1-32],ye=b[L+0-32],xe=b[L+1-32],Ie=b[L+2-32],je=b[L+3-32];b[L+0+0]=b[L+1+64]=de+ye+1>>1,b[L+1+0]=b[L+2+64]=ye+xe+1>>1,b[L+2+0]=b[L+3+64]=xe+Ie+1>>1,b[L+3+0]=Ie+je+1>>1,b[L+0+96]=Cn(ae,W,j),b[L+0+64]=Cn(W,j,de),b[L+0+32]=b[L+1+96]=Cn(j,de,ye),b[L+1+32]=b[L+2+96]=Cn(de,ye,xe),b[L+2+32]=b[L+3+96]=Cn(ye,xe,Ie),b[L+3+32]=Cn(xe,Ie,je)}function gt(b,L){var j=b[L+0-32],W=b[L+1-32],ae=b[L+2-32],de=b[L+3-32],ye=b[L+4-32],xe=b[L+5-32],Ie=b[L+6-32],je=b[L+7-32];b[L+0+0]=j+W+1>>1,b[L+1+0]=b[L+0+64]=W+ae+1>>1,b[L+2+0]=b[L+1+64]=ae+de+1>>1,b[L+3+0]=b[L+2+64]=de+ye+1>>1,b[L+0+32]=Cn(j,W,ae),b[L+1+32]=b[L+0+96]=Cn(W,ae,de),b[L+2+32]=b[L+1+96]=Cn(ae,de,ye),b[L+3+32]=b[L+2+96]=Cn(de,ye,xe),b[L+3+64]=Cn(ye,xe,Ie),b[L+3+96]=Cn(xe,Ie,je)}function Mn(b,L){var j=b[L-1+0],W=b[L-1+32],ae=b[L-1+64],de=b[L-1+96];b[L+0+0]=j+W+1>>1,b[L+2+0]=b[L+0+32]=W+ae+1>>1,b[L+2+32]=b[L+0+64]=ae+de+1>>1,b[L+1+0]=Cn(j,W,ae),b[L+3+0]=b[L+1+32]=Cn(W,ae,de),b[L+3+32]=b[L+1+64]=Cn(ae,de,de),b[L+3+64]=b[L+2+64]=b[L+0+96]=b[L+1+96]=b[L+2+96]=b[L+3+96]=de}function Ds(b,L){var j=b[L-1+0],W=b[L-1+32],ae=b[L-1+64],de=b[L-1+96],ye=b[L-1-32],xe=b[L+0-32],Ie=b[L+1-32],je=b[L+2-32];b[L+0+0]=b[L+2+32]=j+ye+1>>1,b[L+0+32]=b[L+2+64]=W+j+1>>1,b[L+0+64]=b[L+2+96]=ae+W+1>>1,b[L+0+96]=de+ae+1>>1,b[L+3+0]=Cn(xe,Ie,je),b[L+2+0]=Cn(ye,xe,Ie),b[L+1+0]=b[L+3+32]=Cn(j,ye,xe),b[L+1+32]=b[L+3+64]=Cn(W,j,ye),b[L+1+64]=b[L+3+96]=Cn(ae,W,j),b[L+1+96]=Cn(de,ae,W)}function Oi(b,L){var j;for(j=0;8>j;++j)s(b,L+32*j,b,L-32,8)}function ks(b,L){var j;for(j=0;8>j;++j)l(b,L,b[L-1],8),L+=32}function ya(b,L,j){var W;for(W=0;8>W;++W)l(L,j+32*W,b,8)}function Ya(b,L){var j,W=8;for(j=0;8>j;++j)W+=b[L+j-32]+b[L-1+32*j];ya(W>>4,b,L)}function Cs(b,L){var j,W=4;for(j=0;8>j;++j)W+=b[L+j-32];ya(W>>3,b,L)}function Aa(b,L){var j,W=4;for(j=0;8>j;++j)W+=b[L-1+32*j];ya(W>>3,b,L)}function $a(b,L){ya(128,b,L)}function va(b,L,j){var W=b[L-j],ae=b[L+0],de=3*(ae-W)+$A[1020+b[L-2*j]-b[L+j]],ye=el[112+(de+4>>3)];b[L-j]=Zs[255+W+el[112+(de+3>>3)]],b[L+0]=Zs[255+ae-ye]}function WA(b,L,j,W){var ae=b[L+0],de=b[L+j];return Di[255+b[L-2*j]-b[L-j]]>W||Di[255+de-ae]>W}function es(b,L,j,W){return 4*Di[255+b[L-j]-b[L+0]]+Di[255+b[L-2*j]-b[L+j]]<=W}function FA(b,L,j,W,ae){var de=b[L-3*j],ye=b[L-2*j],xe=b[L-j],Ie=b[L+0],je=b[L+j],ft=b[L+2*j],It=b[L+3*j];return 4*Di[255+xe-Ie]+Di[255+ye-je]>W?0:Di[255+b[L-4*j]-de]<=ae&&Di[255+de-ye]<=ae&&Di[255+ye-xe]<=ae&&Di[255+It-ft]<=ae&&Di[255+ft-je]<=ae&&Di[255+je-Ie]<=ae}function eo(b,L,j,W){var ae=2*W+1;for(W=0;16>W;++W)es(b,L+W,j,ae)&&va(b,L+W,j)}function to(b,L,j,W){var ae=2*W+1;for(W=0;16>W;++W)es(b,L+W*j,1,ae)&&va(b,L+W*j,1)}function ro(b,L,j,W){var ae;for(ae=3;0<ae;--ae)eo(b,L+=4*j,j,W)}function ql(b,L,j,W){var ae;for(ae=3;0<ae;--ae)to(b,L+=4,j,W)}function Do(b,L,j,W,ae,de,ye,xe){for(de=2*de+1;0<ae--;){if(FA(b,L,j,de,ye))if(WA(b,L,j,xe))va(b,L,j);else{var Ie=b,je=L,ft=j,It=Ie[je-2*ft],Ft=Ie[je-ft],pt=Ie[je+0],Ar=Ie[je+ft],Vt=Ie[je+2*ft],Je=27*(Yt=$A[1020+3*(pt-Ft)+$A[1020+It-Ar]])+63>>7,At=18*Yt+63>>7,Yt=9*Yt+63>>7;Ie[je-3*ft]=Zs[255+Ie[je-3*ft]+Yt],Ie[je-2*ft]=Zs[255+It+At],Ie[je-ft]=Zs[255+Ft+Je],Ie[je+0]=Zs[255+pt-Je],Ie[je+ft]=Zs[255+Ar-At],Ie[je+2*ft]=Zs[255+Vt-Yt]}L+=W}}function vs(b,L,j,W,ae,de,ye,xe){for(de=2*de+1;0<ae--;){if(FA(b,L,j,de,ye))if(WA(b,L,j,xe))va(b,L,j);else{var Ie=b,je=L,ft=j,It=Ie[je-ft],Ft=Ie[je+0],pt=Ie[je+ft],Ar=el[112+((Vt=3*(Ft-It))+4>>3)],Vt=el[112+(Vt+3>>3)],Je=Ar+1>>1;Ie[je-2*ft]=Zs[255+Ie[je-2*ft]+Je],Ie[je-ft]=Zs[255+It+Vt],Ie[je+0]=Zs[255+Ft-Ar],Ie[je+ft]=Zs[255+pt-Je]}L+=W}}function oA(b,L,j,W,ae,de){Do(b,L,j,1,16,W,ae,de)}function AA(b,L,j,W,ae,de){Do(b,L,1,j,16,W,ae,de)}function _c(b,L,j,W,ae,de){var ye;for(ye=3;0<ye;--ye)vs(b,L+=4*j,j,1,16,W,ae,de)}function _a(b,L,j,W,ae,de){var ye;for(ye=3;0<ye;--ye)vs(b,L+=4,1,j,16,W,ae,de)}function XA(b,L,j,W,ae,de,ye,xe){Do(b,L,ae,1,8,de,ye,xe),Do(j,W,ae,1,8,de,ye,xe)}function SA(b,L,j,W,ae,de,ye,xe){Do(b,L,1,ae,8,de,ye,xe),Do(j,W,1,ae,8,de,ye,xe)}function IA(b,L,j,W,ae,de,ye,xe){vs(b,L+4*ae,ae,1,8,de,ye,xe),vs(j,W+4*ae,ae,1,8,de,ye,xe)}function TA(b,L,j,W,ae,de,ye,xe){vs(b,L+4,1,ae,8,de,ye,xe),vs(j,W+4,1,ae,8,de,ye,xe)}function lA(){this.ba=new _i,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Cr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function UA(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function vo(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function gl(){this.ua=0,this.Wa=new ze,this.vb=new ze,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new me,this.yc=new se}function Wl(){this.xb=this.a=0,this.l=new wi,this.ca=new _i,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new ne,this.Pb=0,this.wd=new ne,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new gl,this.ab=0,this.gc=h(4,vo),this.Oc=0}function No(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new wi,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function wa(b,L,j,W,ae,de,ye){for(b=b==null?0:b[L+0],L=0;L<ye;++L)ae[de+L]=b+j[W+L]&255,b=ae[de+L]}function ZA(b,L,j,W,ae,de,ye){var xe;if(b==null)wa(null,null,j,W,ae,de,ye);else for(xe=0;xe<ye;++xe)ae[de+xe]=b[L+xe]+j[W+xe]&255}function ba(b,L,j,W,ae,de,ye){if(b==null)wa(null,null,j,W,ae,de,ye);else{var xe,Ie=b[L+0],je=Ie,ft=Ie;for(xe=0;xe<ye;++xe)je=ft+(Ie=b[L+xe])-je,ft=j[W+xe]+(-256&je?0>je?0:255:je)&255,je=Ie,ae[de+xe]=ft}}function xi(b,L,j,W){var ae=L.width,de=L.o;if(t(b!=null&&L!=null),0>j||0>=W||j+W>de)return null;if(!b.Cc){if(b.ga==null){var ye;if(b.ga=new No,(ye=b.ga==null)||(ye=L.width*L.o,t(b.Gb.length==0),b.Gb=c(ye),b.Uc=0,b.Gb==null?ye=0:(b.mb=b.Gb,b.nb=b.Uc,b.rc=null,ye=1),ye=!ye),!ye){ye=b.ga;var xe=b.Fa,Ie=b.P,je=b.qc,ft=b.mb,It=b.nb,Ft=Ie+1,pt=je-1,Ar=ye.l;if(t(xe!=null&&ft!=null&&L!=null),v[0]=null,v[1]=wa,v[2]=ZA,v[3]=ba,ye.ca=ft,ye.tb=It,ye.c=L.width,ye.i=L.height,t(0<ye.c&&0<ye.i),1>=je)L=0;else if(ye.$a=xe[Ie+0]>>0&3,ye.Z=xe[Ie+0]>>2&3,ye.Lc=xe[Ie+0]>>4&3,Ie=xe[Ie+0]>>6&3,0>ye.$a||1<ye.$a||4<=ye.Z||1<ye.Lc||Ie)L=0;else if(Ar.put=Sn,Ar.ac=xn,Ar.bc=ji,Ar.ma=ye,Ar.width=L.width,Ar.height=L.height,Ar.Da=L.Da,Ar.v=L.v,Ar.va=L.va,Ar.j=L.j,Ar.o=L.o,ye.$a)e:{t(ye.$a==1),L=qe();t:for(;;){if(L==null){L=0;break e}if(t(ye!=null),ye.mc=L,L.c=ye.c,L.i=ye.i,L.l=ye.l,L.l.ma=ye,L.l.width=ye.c,L.l.height=ye.i,L.a=0,Te(L.m,xe,Ft,pt),!ut(ye.c,ye.i,1,L,null)||(L.ab==1&&L.gc[0].hc==3&&Ee(L.s)?(ye.ic=1,xe=L.c*L.i,L.Ta=null,L.Ua=0,L.V=c(xe),L.Ba=0,L.V==null?(L.a=1,L=0):L=1):(ye.ic=0,L=Ot(L,ye.c)),!L))break t;L=1;break e}ye.mc=null,L=0}else L=pt>=ye.c*ye.i;ye=!L}if(ye)return null;b.ga.Lc!=1?b.Ga=0:W=de-j}t(b.ga!=null),t(j+W<=de);e:{if(L=(xe=b.ga).c,de=xe.l.o,xe.$a==0){if(Ft=b.rc,pt=b.Vc,Ar=b.Fa,Ie=b.P+1+j*L,je=b.mb,ft=b.nb+j*L,t(Ie<=b.P+b.qc),xe.Z!=0)for(t(v[xe.Z]!=null),ye=0;ye<W;++ye)v[xe.Z](Ft,pt,Ar,Ie,je,ft,L),Ft=je,pt=ft,ft+=L,Ie+=L;else for(ye=0;ye<W;++ye)s(je,ft,Ar,Ie,L),Ft=je,pt=ft,ft+=L,Ie+=L;b.rc=Ft,b.Vc=pt}else{if(t(xe.mc!=null),L=j+W,t((ye=xe.mc)!=null),t(L<=ye.i),ye.C>=L)L=1;else if(xe.ic||_t(),xe.ic){xe=ye.V,Ft=ye.Ba,pt=ye.c;var Vt=ye.i,Je=(Ar=1,Ie=ye.$/pt,je=ye.$%pt,ft=ye.m,It=ye.s,ye.$),At=pt*Vt,Yt=pt*L,ir=It.wc,Wt=Je<Yt?Ue(It,je,Ie):null;t(Je<=At),t(L<=Vt),t(Ee(It));t:for(;;){for(;!ft.h&&Je<Yt;){if(je&ir||(Wt=Ue(It,je,Ie)),t(Wt!=null),at(ft),256>(Vt=Ln(Wt.G[0],Wt.H[0],ft)))xe[Ft+Je]=Vt,++Je,++je>=pt&&(je=0,++Ie<=L&&!(Ie%16)&&Xe(ye,Ie));else{if(!(280>Vt)){Ar=0;break t}Vt=Wi(Vt-256,ft);var Dr,Qr=Ln(Wt.G[4],Wt.H[4],ft);if(at(ft),!(Je>=(Qr=hs(pt,Qr=Wi(Qr,ft)))&&At-Je>=Vt)){Ar=0;break t}for(Dr=0;Dr<Vt;++Dr)xe[Ft+Je+Dr]=xe[Ft+Je+Dr-Qr];for(Je+=Vt,je+=Vt;je>=pt;)je-=pt,++Ie<=L&&!(Ie%16)&&Xe(ye,Ie);Je<Yt&&je&ir&&(Wt=Ue(It,je,Ie))}t(ft.h==ke(ft))}Xe(ye,Ie>L?L:Ie);break t}!Ar||ft.h&&Je<At?(Ar=0,ye.a=ft.h?5:3):ye.$=Je,L=Ar}else L=lt(ye,ye.V,ye.Ba,ye.c,ye.i,L,nr);if(!L){W=0;break e}}j+W>=de&&(b.Cc=1),W=1}if(!W)return null;if(b.Cc&&((W=b.ga)!=null&&(W.mc=null),b.ga=null,0<b.Ga))return alert("todo:WebPDequantizeLevels"),null}return b.nb+j*ae}function N(b,L,j,W,ae,de){for(;0<ae--;){var ye,xe=b,Ie=L+(j?1:0),je=b,ft=L+(j?0:3);for(ye=0;ye<W;++ye){var It=je[ft+4*ye];It!=255&&(It*=32897,xe[Ie+4*ye+0]=xe[Ie+4*ye+0]*It>>23,xe[Ie+4*ye+1]=xe[Ie+4*ye+1]*It>>23,xe[Ie+4*ye+2]=xe[Ie+4*ye+2]*It>>23)}L+=de}}function oe(b,L,j,W,ae){for(;0<W--;){var de;for(de=0;de<j;++de){var ye=b[L+2*de+0],xe=15&(je=b[L+2*de+1]),Ie=4369*xe,je=(240&je|je>>4)*Ie>>16;b[L+2*de+0]=(240&ye|ye>>4)*Ie>>16&240|(15&ye|ye<<4)*Ie>>16>>4&15,b[L+2*de+1]=240&je|xe}L+=ae}}function De(b,L,j,W,ae,de,ye,xe){var Ie,je,ft=255;for(je=0;je<ae;++je){for(Ie=0;Ie<W;++Ie){var It=b[L+Ie];de[ye+4*Ie]=It,ft&=It}L+=j,ye+=xe}return ft!=255}function et(b,L,j,W,ae){var de;for(de=0;de<ae;++de)j[W+de]=b[L+de]>>8}function _t(){ja=N,LA=oe,QA=De,Xl=et}function Jt(b,L,j){fe[b]=function(W,ae,de,ye,xe,Ie,je,ft,It,Ft,pt,Ar,Vt,Je,At,Yt,ir){var Wt,Dr=ir-1>>1,Qr=xe[Ie+0]|je[ft+0]<<16,Fn=It[Ft+0]|pt[Ar+0]<<16;t(W!=null);var Nr=3*Qr+Fn+131074>>2;for(L(W[ae+0],255&Nr,Nr>>16,Vt,Je),de!=null&&(Nr=3*Fn+Qr+131074>>2,L(de[ye+0],255&Nr,Nr>>16,At,Yt)),Wt=1;Wt<=Dr;++Wt){var fi=xe[Ie+Wt]|je[ft+Wt]<<16,di=It[Ft+Wt]|pt[Ar+Wt]<<16,hr=Qr+fi+Fn+di+524296,zn=hr+2*(fi+Fn)>>3;Nr=zn+Qr>>1,Qr=(hr=hr+2*(Qr+di)>>3)+fi>>1,L(W[ae+2*Wt-1],255&Nr,Nr>>16,Vt,Je+(2*Wt-1)*j),L(W[ae+2*Wt-0],255&Qr,Qr>>16,Vt,Je+(2*Wt-0)*j),de!=null&&(Nr=hr+Fn>>1,Qr=zn+di>>1,L(de[ye+2*Wt-1],255&Nr,Nr>>16,At,Yt+(2*Wt-1)*j),L(de[ye+2*Wt+0],255&Qr,Qr>>16,At,Yt+(2*Wt+0)*j)),Qr=fi,Fn=di}1&ir||(Nr=3*Qr+Fn+131074>>2,L(W[ae+ir-1],255&Nr,Nr>>16,Vt,Je+(ir-1)*j),de!=null&&(Nr=3*Fn+Qr+131074>>2,L(de[ye+ir-1],255&Nr,Nr>>16,At,Yt+(ir-1)*j)))}}function _r(){S[oo]=P,S[_l]=q,S[Ra]=z,S[tl]=J,S[fA]=ie,S[kA]=pe,S[Fa]=be,S[Ui]=q,S[PA]=J,S[MA]=ie,S[DA]=pe}function en(b){return b&~St?0>b?0:255:b>>wt}function En(b,L){return en((19077*b>>8)+(26149*L>>8)-14234)}function Dn(b,L,j){return en((19077*b>>8)-(6419*L>>8)-(13320*j>>8)+8708)}function Kn(b,L){return en((19077*b>>8)+(33050*L>>8)-17685)}function Wn(b,L,j,W,ae){W[ae+0]=En(b,j),W[ae+1]=Dn(b,L,j),W[ae+2]=Kn(b,L)}function pi(b,L,j,W,ae){W[ae+0]=Kn(b,L),W[ae+1]=Dn(b,L,j),W[ae+2]=En(b,j)}function mi(b,L,j,W,ae){var de=Dn(b,L,j);L=de<<3&224|Kn(b,L)>>3,W[ae+0]=248&En(b,j)|de>>5,W[ae+1]=L}function Tn(b,L,j,W,ae){var de=240&Kn(b,L)|15;W[ae+0]=240&En(b,j)|Dn(b,L,j)>>4,W[ae+1]=de}function Es(b,L,j,W,ae){W[ae+0]=255,Wn(b,L,j,W,ae+1)}function ts(b,L,j,W,ae){pi(b,L,j,W,ae),W[ae+3]=255}function Ws(b,L,j,W,ae){Wn(b,L,j,W,ae),W[ae+3]=255}function rs(b,L){return 0>b?0:b>L?L:b}function Si(b,L,j){fe[b]=function(W,ae,de,ye,xe,Ie,je,ft,It){for(var Ft=ft+(-2&It)*j;ft!=Ft;)L(W[ae+0],de[ye+0],xe[Ie+0],je,ft),L(W[ae+1],de[ye+0],xe[Ie+0],je,ft+j),ae+=2,++ye,++Ie,ft+=2*j;1&It&&L(W[ae+0],de[ye+0],xe[Ie+0],je,ft)}}function yl(b,L,j){return j==0?b==0?L==0?6:5:L==0?4:0:j}function la(b,L,j,W,ae){switch(b>>>30){case 3:JA(L,j,W,ae,0);break;case 2:Da(L,j,W,ae);break;case 1:fs(L,j,W,ae)}}function Pi(b,L){var j,W,ae=L.M,de=L.Nb,ye=b.oc,xe=b.pc+40,Ie=b.oc,je=b.pc+584,ft=b.oc,It=b.pc+600;for(j=0;16>j;++j)ye[xe+32*j-1]=129;for(j=0;8>j;++j)Ie[je+32*j-1]=129,ft[It+32*j-1]=129;for(0<ae?ye[xe-1-32]=Ie[je-1-32]=ft[It-1-32]=129:(l(ye,xe-32-1,127,21),l(Ie,je-32-1,127,9),l(ft,It-32-1,127,9)),W=0;W<b.za;++W){var Ft=L.ya[L.aa+W];if(0<W){for(j=-1;16>j;++j)s(ye,xe+32*j-4,ye,xe+32*j+12,4);for(j=-1;8>j;++j)s(Ie,je+32*j-4,Ie,je+32*j+4,4),s(ft,It+32*j-4,ft,It+32*j+4,4)}var pt=b.Gd,Ar=b.Hd+W,Vt=Ft.ad,Je=Ft.Hc;if(0<ae&&(s(ye,xe-32,pt[Ar].y,0,16),s(Ie,je-32,pt[Ar].f,0,8),s(ft,It-32,pt[Ar].ea,0,8)),Ft.Za){var At=ye,Yt=xe-32+16;for(0<ae&&(W>=b.za-1?l(At,Yt,pt[Ar].y[15],4):s(At,Yt,pt[Ar+1].y,0,4)),j=0;4>j;j++)At[Yt+128+j]=At[Yt+256+j]=At[Yt+384+j]=At[Yt+0+j];for(j=0;16>j;++j,Je<<=2)At=ye,Yt=xe+Rr[j],g[Ft.Ob[j]](At,Yt),la(Je,Vt,16*+j,At,Yt)}else if(At=yl(W,ae,Ft.Ob[0]),ha[At](ye,xe),Je!=0)for(j=0;16>j;++j,Je<<=2)la(Je,Vt,16*+j,ye,xe+Rr[j]);for(j=Ft.Gc,At=yl(W,ae,Ft.Dd),i[At](Ie,je),i[At](ft,It),Je=Vt,At=Ie,Yt=je,255&(Ft=j>>0)&&(170&Ft?Na(Je,256,At,Yt):Ea(Je,256,At,Yt)),Ft=ft,Je=It,255&(j>>=8)&&(170&j?Na(Vt,320,Ft,Je):Ea(Vt,320,Ft,Je)),ae<b.Ub-1&&(s(pt[Ar].y,0,ye,xe+480,16),s(pt[Ar].f,0,Ie,je+224,8),s(pt[Ar].ea,0,ft,It+224,8)),j=8*de*b.B,pt=b.sa,Ar=b.ta+16*W+16*de*b.R,Vt=b.qa,Ft=b.ra+8*W+j,Je=b.Ha,At=b.Ia+8*W+j,j=0;16>j;++j)s(pt,Ar+j*b.R,ye,xe+32*j,16);for(j=0;8>j;++j)s(Vt,Ft+j*b.B,Ie,je+32*j,8),s(Je,At+j*b.B,ft,It+32*j,8)}}function xa(b,L,j,W,ae,de,ye,xe,Ie){var je=[0],ft=[0],It=0,Ft=Ie!=null?Ie.kd:0,pt=Ie??new UA;if(b==null||12>j)return 7;pt.data=b,pt.w=L,pt.ha=j,L=[L],j=[j],pt.gb=[pt.gb];e:{var Ar=L,Vt=j,Je=pt.gb;if(t(b!=null),t(Vt!=null),t(Je!=null),Je[0]=0,12<=Vt[0]&&!r(b,Ar[0],"RIFF")){if(r(b,Ar[0]+8,"WEBP")){Je=3;break e}var At=Nt(b,Ar[0]+4);if(12>At||4294967286<At){Je=3;break e}if(Ft&&At>Vt[0]-8){Je=7;break e}Je[0]=At,Ar[0]+=12,Vt[0]-=12}Je=0}if(Je!=0)return Je;for(At=0<pt.gb[0],j=j[0];;){e:{var Yt=b;Vt=L,Je=j;var ir=je,Wt=ft,Dr=Ar=[0];if((Nr=It=[It])[0]=0,8>Je[0])Je=7;else{if(!r(Yt,Vt[0],"VP8X")){if(Nt(Yt,Vt[0]+4)!=10){Je=3;break e}if(18>Je[0]){Je=7;break e}var Qr=Nt(Yt,Vt[0]+8),Fn=1+ht(Yt,Vt[0]+12);if(2147483648<=Fn*(Yt=1+ht(Yt,Vt[0]+15))){Je=3;break e}Dr!=null&&(Dr[0]=Qr),ir!=null&&(ir[0]=Fn),Wt!=null&&(Wt[0]=Yt),Vt[0]+=18,Je[0]-=18,Nr[0]=1}Je=0}}if(It=It[0],Ar=Ar[0],Je!=0)return Je;if(Vt=!!(2&Ar),!At&&It)return 3;if(de!=null&&(de[0]=!!(16&Ar)),ye!=null&&(ye[0]=Vt),xe!=null&&(xe[0]=0),ye=je[0],Ar=ft[0],It&&Vt&&Ie==null){Je=0;break}if(4>j){Je=7;break}if(At&&It||!At&&!It&&!r(b,L[0],"ALPH")){j=[j],pt.na=[pt.na],pt.P=[pt.P],pt.Sa=[pt.Sa];e:{Qr=b,Je=L,At=j;var Nr=pt.gb;ir=pt.na,Wt=pt.P,Dr=pt.Sa,Fn=22,t(Qr!=null),t(At!=null),Yt=Je[0];var fi=At[0];for(t(ir!=null),t(Dr!=null),ir[0]=null,Wt[0]=null,Dr[0]=0;;){if(Je[0]=Yt,At[0]=fi,8>fi){Je=7;break e}var di=Nt(Qr,Yt+4);if(4294967286<di){Je=3;break e}var hr=8+di+1&-2;if(Fn+=hr,0<Nr&&Fn>Nr){Je=3;break e}if(!r(Qr,Yt,"VP8 ")||!r(Qr,Yt,"VP8L")){Je=0;break e}if(fi[0]<hr){Je=7;break e}r(Qr,Yt,"ALPH")||(ir[0]=Qr,Wt[0]=Yt+8,Dr[0]=di),Yt+=hr,fi-=hr}}if(j=j[0],pt.na=pt.na[0],pt.P=pt.P[0],pt.Sa=pt.Sa[0],Je!=0)break}j=[j],pt.Ja=[pt.Ja],pt.xa=[pt.xa];e:if(Nr=b,Je=L,At=j,ir=pt.gb[0],Wt=pt.Ja,Dr=pt.xa,Qr=Je[0],Yt=!r(Nr,Qr,"VP8 "),Fn=!r(Nr,Qr,"VP8L"),t(Nr!=null),t(At!=null),t(Wt!=null),t(Dr!=null),8>At[0])Je=7;else{if(Yt||Fn){if(Nr=Nt(Nr,Qr+4),12<=ir&&Nr>ir-12){Je=3;break e}if(Ft&&Nr>At[0]-8){Je=7;break e}Wt[0]=Nr,Je[0]+=8,At[0]-=8,Dr[0]=Fn}else Dr[0]=5<=At[0]&&Nr[Qr+0]==47&&!(Nr[Qr+4]>>5),Wt[0]=At[0];Je=0}if(j=j[0],pt.Ja=pt.Ja[0],pt.xa=pt.xa[0],L=L[0],Je!=0)break;if(4294967286<pt.Ja)return 3;if(xe==null||Vt||(xe[0]=pt.xa?2:1),ye=[ye],Ar=[Ar],pt.xa){if(5>j){Je=7;break}xe=ye,Ft=Ar,Vt=de,b==null||5>j?b=0:5<=j&&b[L+0]==47&&!(b[L+4]>>5)?(At=[0],Nr=[0],ir=[0],Te(Wt=new ne,b,L,j),tn(Wt,At,Nr,ir)?(xe!=null&&(xe[0]=At[0]),Ft!=null&&(Ft[0]=Nr[0]),Vt!=null&&(Vt[0]=ir[0]),b=1):b=0):b=0}else{if(10>j){Je=7;break}xe=Ar,b==null||10>j||!Yn(b,L+3,j-3)?b=0:(Ft=b[L+0]|b[L+1]<<8|b[L+2]<<16,Vt=16383&(b[L+7]<<8|b[L+6]),b=16383&(b[L+9]<<8|b[L+8]),1&Ft||3<(Ft>>1&7)||!(Ft>>4&1)||Ft>>5>=pt.Ja||!Vt||!b?b=0:(ye&&(ye[0]=Vt),xe&&(xe[0]=b),b=1))}if(!b||(ye=ye[0],Ar=Ar[0],It&&(je[0]!=ye||ft[0]!=Ar)))return 3;Ie!=null&&(Ie[0]=pt,Ie.offset=L-Ie.w,t(4294967286>L-Ie.w),t(Ie.offset==Ie.ha-j));break}return Je==0||Je==7&&It&&Ie==null?(de!=null&&(de[0]|=pt.na!=null&&0<pt.na.length),W!=null&&(W[0]=ye),ae!=null&&(ae[0]=Ar),0):Je}function Mi(b,L,j){var W=L.width,ae=L.height,de=0,ye=0,xe=W,Ie=ae;if(L.Da=b!=null&&0<b.Da,L.Da&&(xe=b.cd,Ie=b.bd,de=b.v,ye=b.j,11>j||(de&=-2,ye&=-2),0>de||0>ye||0>=xe||0>=Ie||de+xe>W||ye+Ie>ae))return 0;if(L.v=de,L.j=ye,L.va=de+xe,L.o=ye+Ie,L.U=xe,L.T=Ie,L.da=b!=null&&0<b.da,L.da){if(!gr(xe,Ie,j=[b.ib],de=[b.hb]))return 0;L.ib=j[0],L.hb=de[0]}return L.ob=b!=null&&b.ob,L.Kb=b==null||!b.Sd,L.da&&(L.ob=L.ib<3*W/4&&L.hb<3*ae/4,L.Kb=0),1}function Ma(b){if(b==null)return 2;if(11>b.S){var L=b.f.RGBA;L.fb+=(b.height-1)*L.A,L.A=-L.A}else L=b.f.kb,b=b.height,L.O+=(b-1)*L.fa,L.fa=-L.fa,L.N+=(b-1>>1)*L.Ab,L.Ab=-L.Ab,L.W+=(b-1>>1)*L.Db,L.Db=-L.Db,L.F!=null&&(L.J+=(b-1)*L.lb,L.lb=-L.lb);return 0}function Ba(b,L,j,W){if(W==null||0>=b||0>=L)return 2;if(j!=null){if(j.Da){var ae=j.cd,de=j.bd,ye=-2&j.v,xe=-2&j.j;if(0>ye||0>xe||0>=ae||0>=de||ye+ae>b||xe+de>L)return 2;b=ae,L=de}if(j.da){if(!gr(b,L,ae=[j.ib],de=[j.hb]))return 2;b=ae[0],L=de[0]}}W.width=b,W.height=L;e:{var Ie=W.width,je=W.height;if(b=W.S,0>=Ie||0>=je||!(b>=oo&&13>b))b=2;else{if(0>=W.Rd&&W.sd==null){ye=de=ae=L=0;var ft=(xe=Ie*jn[b])*je;if(11>b||(de=(je+1)/2*(L=(Ie+1)/2),b==12&&(ye=(ae=Ie)*je)),(je=c(ft+2*de+ye))==null){b=1;break e}W.sd=je,11>b?((Ie=W.f.RGBA).eb=je,Ie.fb=0,Ie.A=xe,Ie.size=ft):((Ie=W.f.kb).y=je,Ie.O=0,Ie.fa=xe,Ie.Fd=ft,Ie.f=je,Ie.N=0+ft,Ie.Ab=L,Ie.Cd=de,Ie.ea=je,Ie.W=0+ft+de,Ie.Db=L,Ie.Ed=de,b==12&&(Ie.F=je,Ie.J=0+ft+2*de),Ie.Tc=ye,Ie.lb=ae)}if(L=1,ae=W.S,de=W.width,ye=W.height,ae>=oo&&13>ae)if(11>ae)b=W.f.RGBA,L&=(xe=Math.abs(b.A))*(ye-1)+de<=b.size,L&=xe>=de*jn[ae],L&=b.eb!=null;else{b=W.f.kb,xe=(de+1)/2,ft=(ye+1)/2,Ie=Math.abs(b.fa),je=Math.abs(b.Ab);var It=Math.abs(b.Db),Ft=Math.abs(b.lb),pt=Ft*(ye-1)+de;L&=Ie*(ye-1)+de<=b.Fd,L&=je*(ft-1)+xe<=b.Cd,L=(L&=It*(ft-1)+xe<=b.Ed)&Ie>=de&je>=xe&It>=xe,L&=b.y!=null,L&=b.f!=null,L&=b.ea!=null,ae==12&&(L&=Ft>=de,L&=pt<=b.Tc,L&=b.F!=null)}else L=0;b=L?0:2}}return b!=0||j!=null&&j.fd&&(b=Ma(W)),b}var ns=64,hi=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],cA=24,no=32,uA=8,Fs=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];fr("Predictor0","PredictorAdd0"),fe.Predictor0=function(){return 4278190080},fe.Predictor1=function(b){return b},fe.Predictor2=function(b,L,j){return L[j+0]},fe.Predictor3=function(b,L,j){return L[j+1]},fe.Predictor4=function(b,L,j){return L[j-1]},fe.Predictor5=function(b,L,j){return vr(vr(b,L[j+1]),L[j+0])},fe.Predictor6=function(b,L,j){return vr(b,L[j-1])},fe.Predictor7=function(b,L,j){return vr(b,L[j+0])},fe.Predictor8=function(b,L,j){return vr(L[j-1],L[j+0])},fe.Predictor9=function(b,L,j){return vr(L[j+0],L[j+1])},fe.Predictor10=function(b,L,j){return vr(vr(b,L[j-1]),vr(L[j+0],L[j+1]))},fe.Predictor11=function(b,L,j){var W=L[j+0];return 0>=xr(W>>24&255,b>>24&255,(L=L[j-1])>>24&255)+xr(W>>16&255,b>>16&255,L>>16&255)+xr(W>>8&255,b>>8&255,L>>8&255)+xr(255&W,255&b,255&L)?W:b},fe.Predictor12=function(b,L,j){var W=L[j+0];return(Gr((b>>24&255)+(W>>24&255)-((L=L[j-1])>>24&255))<<24|Gr((b>>16&255)+(W>>16&255)-(L>>16&255))<<16|Gr((b>>8&255)+(W>>8&255)-(L>>8&255))<<8|Gr((255&b)+(255&W)-(255&L)))>>>0},fe.Predictor13=function(b,L,j){var W=L[j-1];return(rr((b=vr(b,L[j+0]))>>24&255,W>>24&255)<<24|rr(b>>16&255,W>>16&255)<<16|rr(b>>8&255,W>>8&255)<<8|rr(b>>0&255,W>>0&255))>>>0};var _o=fe.PredictorAdd0;fe.PredictorAdd1=Zr,fr("Predictor2","PredictorAdd2"),fr("Predictor3","PredictorAdd3"),fr("Predictor4","PredictorAdd4"),fr("Predictor5","PredictorAdd5"),fr("Predictor6","PredictorAdd6"),fr("Predictor7","PredictorAdd7"),fr("Predictor8","PredictorAdd8"),fr("Predictor9","PredictorAdd9"),fr("Predictor10","PredictorAdd10"),fr("Predictor11","PredictorAdd11"),fr("Predictor12","PredictorAdd12"),fr("Predictor13","PredictorAdd13");var io=fe.PredictorAdd2;bt("ColorIndexInverseTransform","MapARGB","32b",function(b){return b>>8&255},function(b){return b}),bt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(b){return b},function(b){return b>>8&255});var jo,Hi=fe.ColorIndexInverseTransform,Ns=fe.MapARGB,so=fe.VP8LColorIndexInverseTransformAlpha,is=fe.MapAlpha,js=fe.VP8LPredictorsAdd=[];js.length=16,(fe.VP8LPredictors=[]).length=16,(fe.VP8LPredictorsAdd_C=[]).length=16,(fe.VP8LPredictors_C=[]).length=16;var Ss,Ca,ca,Xs,ss,ua,gi,JA,Da,Na,fs,Ea,Ro,Rs,hA,ao,Oo,zi,Pr,Ii,Ai,Bi,Zi,Sr,ja,LA,QA,Xl,YA=c(511),wc=c(2041),zc=c(225),vl=c(767),Zl=0,$A=wc,el=zc,Zs=vl,Di=YA,oo=0,_l=1,Ra=2,tl=3,fA=4,kA=5,Fa=6,Ui=7,PA=8,MA=9,DA=10,Vc=[2,3,7],Kc=[3,3,11],Gc=[280,256,256,256,40],wo=[0,1,1,1,0],dA=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],sn=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],vn=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],rl=8,wl=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Sa=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],as=null,pA=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],bo=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],bc=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],mA=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Ji=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],ds=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],xc=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ha=[],g=[],i=[],u=1,m=2,v=[],S=[];Jt("UpsampleRgbLinePair",Wn,3),Jt("UpsampleBgrLinePair",pi,3),Jt("UpsampleRgbaLinePair",Ws,4),Jt("UpsampleBgraLinePair",ts,4),Jt("UpsampleArgbLinePair",Es,4),Jt("UpsampleRgba4444LinePair",Tn,2),Jt("UpsampleRgb565LinePair",mi,2);var P=fe.UpsampleRgbLinePair,z=fe.UpsampleBgrLinePair,q=fe.UpsampleRgbaLinePair,J=fe.UpsampleBgraLinePair,ie=fe.UpsampleArgbLinePair,pe=fe.UpsampleRgba4444LinePair,be=fe.UpsampleRgb565LinePair,Ve=16,Ne=1<<Ve-1,He=-227,ct=482,wt=6,St=(256<<wt)-1,We=0,Rt=c(256),Qt=c(256),Xt=c(256),Zt=c(256),ur=c(ct-He),qt=c(ct-He);Si("YuvToRgbRow",Wn,3),Si("YuvToBgrRow",pi,3),Si("YuvToRgbaRow",Ws,4),Si("YuvToBgraRow",ts,4),Si("YuvToArgbRow",Es,4),Si("YuvToRgba4444Row",Tn,2),Si("YuvToRgb565Row",mi,2);var Rr=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Ur=[0,2,8],qr=[8,7,6,4,4,2,2,2,1,1,1,1],Pn=1;this.WebPDecodeRGBA=function(b,L,j,W,ae){var de=_l,ye=new lA,xe=new _i;ye.ba=xe,xe.S=de,xe.width=[xe.width],xe.height=[xe.height];var Ie=xe.width,je=xe.height,ft=new br;if(ft==null||b==null)var It=2;else t(ft!=null),It=xa(b,L,j,ft.width,ft.height,ft.Pd,ft.Qd,ft.format,null);if(It!=0?Ie=0:(Ie!=null&&(Ie[0]=ft.width[0]),je!=null&&(je[0]=ft.height[0]),Ie=1),Ie){xe.width=xe.width[0],xe.height=xe.height[0],W!=null&&(W[0]=xe.width),ae!=null&&(ae[0]=xe.height);e:{if(W=new wi,(ae=new UA).data=b,ae.w=L,ae.ha=j,ae.kd=1,L=[0],t(ae!=null),((b=xa(ae.data,ae.w,ae.ha,null,null,null,L,null,ae))==0||b==7)&&L[0]&&(b=4),(L=b)==0){if(t(ye!=null),W.data=ae.data,W.w=ae.w+ae.offset,W.ha=ae.ha-ae.offset,W.put=Sn,W.ac=xn,W.bc=ji,W.ma=ye,ae.xa){if((b=qe())==null){ye=1;break e}if(function(Ft,pt){var Ar=[0],Vt=[0],Je=[0];t:for(;;){if(Ft==null)return 0;if(pt==null)return Ft.a=2,0;if(Ft.l=pt,Ft.a=0,Te(Ft.m,pt.data,pt.w,pt.ha),!tn(Ft.m,Ar,Vt,Je)){Ft.a=3;break t}if(Ft.xb=m,pt.width=Ar[0],pt.height=Vt[0],!ut(Ar[0],Vt[0],1,Ft,null))break t;return 1}return t(Ft.a!=0),0}(b,W)){if(W=(L=Ba(W.width,W.height,ye.Oa,ye.ba))==0){t:{W=b;r:for(;;){if(W==null){W=0;break t}if(t(W.s.yc!=null),t(W.s.Ya!=null),t(0<W.s.Wb),t((j=W.l)!=null),t((ae=j.ma)!=null),W.xb!=0){if(W.ca=ae.ba,W.tb=ae.tb,t(W.ca!=null),!Mi(ae.Oa,j,tl)){W.a=2;break r}if(!Ot(W,j.width)||j.da)break r;if((j.da||Er(W.ca.S))&&_t(),11>W.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),W.ca.f.kb.F!=null&&_t()),W.Pb&&0<W.s.ua&&W.s.vb.X==null&&!dr(W.s.vb,W.s.Wa.Xa)){W.a=1;break r}W.xb=0}if(!lt(W,W.V,W.Ba,W.c,W.i,j.o,Ae))break r;ae.Dc=W.Ma,W=1;break t}t(W.a!=0),W=0}W=!W}W&&(L=b.a)}else L=b.a}else{if((b=new Qs)==null){ye=1;break e}if(b.Fa=ae.na,b.P=ae.P,b.qc=ae.Sa,Za(b,W)){if((L=Ba(W.width,W.height,ye.Oa,ye.ba))==0){if(b.Aa=0,j=ye.Oa,t((ae=b)!=null),j!=null){if(0<(Ie=0>(Ie=j.Md)?0:100<Ie?255:255*Ie/100)){for(je=ft=0;4>je;++je)12>(It=ae.pb[je]).lc&&(It.ia=Ie*qr[0>It.lc?0:It.lc]>>3),ft|=It.ia;ft&&(alert("todo:VP8InitRandom"),ae.ia=1)}ae.Ga=j.Id,100<ae.Ga?ae.Ga=100:0>ae.Ga&&(ae.Ga=0)}ia(b,W)||(L=b.a)}}else L=b.a}L==0&&ye.Oa!=null&&ye.Oa.fd&&(L=Ma(ye.ba))}ye=L}de=ye!=0?null:11>de?xe.f.RGBA.eb:xe.f.kb.y}else de=null;return de};var jn=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function _(fe,_e){for(var ue="",ee=0;ee<4;ee++)ue+=String.fromCharCode(fe[_e++]);return ue}function p(fe,_e){return(fe[_e+0]<<0|fe[_e+1]<<8|fe[_e+2]<<16)>>>0}function E(fe,_e){return(fe[_e+0]<<0|fe[_e+1]<<8|fe[_e+2]<<16|fe[_e+3]<<24)>>>0}new d;var w=[0],x=[0],k=[],Q=new d,R=e,M=function(fe,_e){var ue={},ee=0,se=!1,Be=0,me=0;if(ue.frames=[],!function(Se,ke,Ke,at){for(var dt=0;dt<at;dt++)if(Se[ke+dt]!=Ke.charCodeAt(dt))return!0;return!1}(fe,_e,"RIFF",4)){var Pe,ge;for(E(fe,_e+=4),_e+=8;_e<fe.length;){var Qe=_(fe,_e),Te=E(fe,_e+=4);_e+=4;var tt=Te+(1&Te);switch(Qe){case"VP8 ":case"VP8L":ue.frames[ee]===void 0&&(ue.frames[ee]={}),(ne=ue.frames[ee]).src_off=se?me:_e-8,ne.src_size=Be+Te+8,ee++,se&&(se=!1,Be=0,me=0);break;case"VP8X":(ne=ue.header={}).feature_flags=fe[_e];var Oe=_e+4;ne.canvas_width=1+p(fe,Oe),Oe+=3,ne.canvas_height=1+p(fe,Oe),Oe+=3;break;case"ALPH":se=!0,Be=tt+8,me=_e-8;break;case"ANIM":(ne=ue.header).bgcolor=E(fe,_e),Oe=_e+4,ne.loop_count=(Pe=fe)[(ge=Oe)+0]<<0|Pe[ge+1]<<8,Oe+=2;break;case"ANMF":var Mt,ne;(ne=ue.frames[ee]={}).offset_x=2*p(fe,_e),_e+=3,ne.offset_y=2*p(fe,_e),_e+=3,ne.width=1+p(fe,_e),_e+=3,ne.height=1+p(fe,_e),_e+=3,ne.duration=p(fe,_e),_e+=3,Mt=fe[_e++],ne.dispose=1&Mt,ne.blend=Mt>>1&1}Qe!="ANMF"&&(_e+=tt)}return ue}}(R,0);M.response=R,M.rgbaoutput=!0,M.dataurl=!1;var O=M.header?M.header:null,G=M.frames?M.frames:null;if(O){O.loop_counter=O.loop_count,w=[O.canvas_height],x=[O.canvas_width];for(var K=0;K<G.length&&G[K].blend!=0;K++);}var Z=G[0],$=Q.WebPDecodeRGBA(R,Z.src_off,Z.src_size,x,w);Z.rgba=$,Z.imgwidth=x[0],Z.imgheight=w[0];for(var he=0;he<x[0]*w[0]*4;he++)k[he]=$[he];return this.width=x,this.height=w,this.data=k,this}(function(e){var t=function(){return typeof yg=="function"},r=function(w,x,k,Q){var R=4,M=h;switch(Q){case e.image_compression.FAST:R=1,M=c;break;case e.image_compression.MEDIUM:R=6,M=a;break;case e.image_compression.SLOW:R=9,M=d}w=s(w,x,k,M);var O=yg(w,{level:R});return e.__addimage__.arrayBufferToBinaryString(O)},s=function(w,x,k,Q){for(var R,M,O,G=w.length/x,K=new Uint8Array(w.length+G),Z=p(),$=0;$<G;$+=1){if(O=$*x,R=w.subarray(O,O+x),Q)K.set(Q(R,k,M),O+$);else{for(var he,fe=Z.length,_e=[];he<fe;he+=1)_e[he]=Z[he](R,k,M);var ue=E(_e.concat());K.set(_e[ue],O+$)}M=R}return K},l=function(w){var x=Array.apply([],w);return x.unshift(0),x},c=function(w,x){var k,Q=[],R=w.length;Q[0]=1;for(var M=0;M<R;M+=1)k=w[M-x]||0,Q[M+1]=w[M]-k+256&255;return Q},h=function(w,x,k){var Q,R=[],M=w.length;R[0]=2;for(var O=0;O<M;O+=1)Q=k&&k[O]||0,R[O+1]=w[O]-Q+256&255;return R},a=function(w,x,k){var Q,R,M=[],O=w.length;M[0]=3;for(var G=0;G<O;G+=1)Q=w[G-x]||0,R=k&&k[G]||0,M[G+1]=w[G]+256-(Q+R>>>1)&255;return M},d=function(w,x,k){var Q,R,M,O,G=[],K=w.length;G[0]=4;for(var Z=0;Z<K;Z+=1)Q=w[Z-x]||0,R=k&&k[Z]||0,M=k&&k[Z-x]||0,O=_(Q,R,M),G[Z+1]=w[Z]-O+256&255;return G},_=function(w,x,k){if(w===x&&x===k)return w;var Q=Math.abs(x-k),R=Math.abs(w-k),M=Math.abs(w+x-k-k);return Q<=R&&Q<=M?w:R<=M?x:k},p=function(){return[l,c,h,a,d]},E=function(w){var x=w.map(function(k){return k.reduce(function(Q,R){return Q+Math.abs(R)},0)});return x.indexOf(Math.min.apply(null,x))};e.processPNG=function(w,x,k,Q){var R,M,O,G,K,Z,$,he,fe,_e,ue,ee,se,Be,me,Pe=this.decode.FLATE_DECODE,ge="";if(this.__addimage__.isArrayBuffer(w)&&(w=new Uint8Array(w)),this.__addimage__.isArrayBufferView(w)){if(w=(O=new iS(w)).imgData,M=O.bits,R=O.colorSpace,K=O.colors,[4,6].indexOf(O.colorType)!==-1){if(O.bits===8){fe=(he=O.pixelBitlength==32?new Uint32Array(O.decodePixels().buffer):O.pixelBitlength==16?new Uint16Array(O.decodePixels().buffer):new Uint8Array(O.decodePixels().buffer)).length,ue=new Uint8Array(fe*O.colors),_e=new Uint8Array(fe);var Qe,Te=O.pixelBitlength-O.bits;for(Be=0,me=0;Be<fe;Be++){for(se=he[Be],Qe=0;Qe<Te;)ue[me++]=se>>>Qe&255,Qe+=O.bits;_e[Be]=se>>>Qe&255}}if(O.bits===16){fe=(he=new Uint32Array(O.decodePixels().buffer)).length,ue=new Uint8Array(fe*(32/O.pixelBitlength)*O.colors),_e=new Uint8Array(fe*(32/O.pixelBitlength)),ee=O.colors>1,Be=0,me=0;for(var tt=0;Be<fe;)se=he[Be++],ue[me++]=se>>>0&255,ee&&(ue[me++]=se>>>16&255,se=he[Be++],ue[me++]=se>>>0&255),_e[tt++]=se>>>16&255;M=8}Q!==e.image_compression.NONE&&t()?(w=r(ue,O.width*O.colors,O.colors,Q),$=r(_e,O.width,1,Q)):(w=ue,$=_e,Pe=void 0)}if(O.colorType===3&&(R=this.color_spaces.INDEXED,Z=O.palette,O.transparency.indexed)){var Oe=O.transparency.indexed,Mt=0;for(Be=0,fe=Oe.length;Be<fe;++Be)Mt+=Oe[Be];if((Mt/=255)===fe-1&&Oe.indexOf(0)!==-1)G=[Oe.indexOf(0)];else if(Mt!==fe){for(he=O.decodePixels(),_e=new Uint8Array(he.length),Be=0,fe=he.length;Be<fe;Be++)_e[Be]=Oe[he[Be]];$=r(_e,O.width,1)}}var ne=function(Se){var ke;switch(Se){case e.image_compression.FAST:ke=11;break;case e.image_compression.MEDIUM:ke=13;break;case e.image_compression.SLOW:ke=14;break;default:ke=12}return ke}(Q);return Pe===this.decode.FLATE_DECODE&&(ge="/Predictor "+ne+" "),ge+="/Colors "+K+" /BitsPerComponent "+M+" /Columns "+O.width,(this.__addimage__.isArrayBuffer(w)||this.__addimage__.isArrayBufferView(w))&&(w=this.__addimage__.arrayBufferToBinaryString(w)),($&&this.__addimage__.isArrayBuffer($)||this.__addimage__.isArrayBufferView($))&&($=this.__addimage__.arrayBufferToBinaryString($)),{alias:k,data:w,index:x,filter:Pe,decodeParameters:ge,transparency:G,palette:Z,sMask:$,predictor:ne,width:O.width,height:O.height,bitsPerComponent:M,colorSpace:R}}}})(Nn.API),function(e){e.processGIF89A=function(t,r,s,l){var c=new sS(t),h=c.width,a=c.height,d=[];c.decodeAndBlitFrameRGBA(0,d);var _={data:d,width:h,height:a},p=new zm(100).encode(_,100);return e.processJPEG.call(this,p,r,s,l)},e.processGIF87A=e.processGIF89A}(Nn.API),Rl.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:l,green:s,blue:r,quad:c}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Rl.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){cs.log("bit decode error:"+r)}},Rl.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var s=this.bottom_up?e:this.height-1-e,l=0;l<t;l++)for(var c=this.datav.getUint8(this.pos++,!0),h=s*this.width*4+8*l*4,a=0;a<8&&8*l+a<this.width;a++){var d=this.palette[c>>7-a&1];this.data[h+4*a]=d.blue,this.data[h+4*a+1]=d.green,this.data[h+4*a+2]=d.red,this.data[h+4*a+3]=255}r!==0&&(this.pos+=4-r)}},Rl.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,l=0;l<e;l++){var c=this.datav.getUint8(this.pos++,!0),h=s*this.width*4+2*l*4,a=c>>4,d=15&c,_=this.palette[a];if(this.data[h]=_.blue,this.data[h+1]=_.green,this.data[h+2]=_.red,this.data[h+3]=255,2*l+1>=this.width)break;_=this.palette[d],this.data[h+4]=_.blue,this.data[h+4+1]=_.green,this.data[h+4+2]=_.red,this.data[h+4+3]=255}t!==0&&(this.pos+=4-t)}},Rl.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,s=0;s<this.width;s++){var l=this.datav.getUint8(this.pos++,!0),c=r*this.width*4+4*s;if(l<this.palette.length){var h=this.palette[l];this.data[c]=h.red,this.data[c+1]=h.green,this.data[c+2]=h.blue,this.data[c+3]=255}else this.data[c]=255,this.data[c+1]=255,this.data[c+2]=255,this.data[c+3]=255}e!==0&&(this.pos+=4-e)}},Rl.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,l=0;l<this.width;l++){var c=this.datav.getUint16(this.pos,!0);this.pos+=2;var h=(c&t)/t*255|0,a=(c>>5&t)/t*255|0,d=(c>>10&t)/t*255|0,_=c>>15?255:0,p=s*this.width*4+4*l;this.data[p]=d,this.data[p+1]=a,this.data[p+2]=h,this.data[p+3]=_}this.pos+=e}},Rl.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),s=this.height-1;s>=0;s--){for(var l=this.bottom_up?s:this.height-1-s,c=0;c<this.width;c++){var h=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(h&t)/t*255|0,d=(h>>5&r)/r*255|0,_=(h>>11)/t*255|0,p=l*this.width*4+4*c;this.data[p]=_,this.data[p+1]=d,this.data[p+2]=a,this.data[p+3]=255}this.pos+=e}},Rl.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var s=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),h=t*this.width*4+4*r;this.data[h]=c,this.data[h+1]=l,this.data[h+2]=s,this.data[h+3]=255}this.pos+=this.width%4}},Rl.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var s=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),h=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*r;this.data[a]=c,this.data[a+1]=l,this.data[a+2]=s,this.data[a+3]=h}},Rl.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,s,l){var c=new Rl(t,!1),h=c.width,a=c.height,d={data:c.getData(),width:h,height:a},_=new zm(100).encode(d,100);return e.processJPEG.call(this,_,r,s,l)}}(Nn.API),Dy.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,s,l){var c=new Dy(t),h=c.width,a=c.height,d={data:c.getData(),width:h,height:a},_=new zm(100).encode(d,100);return e.processJPEG.call(this,_,r,s,l)}}(Nn.API),Nn.API.processRGBA=function(e,t,r){for(var s=e.data,l=s.length,c=new Uint8Array(l/4*3),h=new Uint8Array(l/4),a=0,d=0,_=0;_<l;_+=4){var p=s[_],E=s[_+1],w=s[_+2],x=s[_+3];c[a++]=p,c[a++]=E,c[a++]=w,h[d++]=x}var k=this.__addimage__.arrayBufferToBinaryString(c);return{alpha:this.__addimage__.arrayBufferToBinaryString(h),data:k,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Nn.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Dh=Nn.API,sp=Dh.getCharWidthsArray=function(e,t){var r,s,l=(t=t||{}).font||this.internal.getFont(),c=t.fontSize||this.internal.getFontSize(),h=t.charSpace||this.internal.getCharSpace(),a=t.widths?t.widths:l.metadata.Unicode.widths,d=a.fof?a.fof:1,_=t.kerning?t.kerning:l.metadata.Unicode.kerning,p=_.fof?_.fof:1,E=t.doKerning!==!1,w=0,x=e.length,k=0,Q=a[0]||d,R=[];for(r=0;r<x;r++)s=e.charCodeAt(r),typeof l.metadata.widthOfString=="function"?R.push((l.metadata.widthOfGlyph(l.metadata.characterToGlyph(s))+h*(1e3/c)||0)/1e3):(w=E&&qi(_[s])==="object"&&!isNaN(parseInt(_[s][k],10))?_[s][k]/p:0,R.push((a[s]||Q)/d+w)),k=s;return R},Qy=Dh.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),s=t.font||this.internal.getFont(),l=t.charSpace||this.internal.getCharSpace();return Dh.processArabic&&(e=Dh.processArabic(e)),typeof s.metadata.widthOfString=="function"?s.metadata.widthOfString(e,r,l)/r:sp.apply(this,arguments).reduce(function(c,h){return c+h},0)},ky=function(e,t,r,s){for(var l=[],c=0,h=e.length,a=0;c!==h&&a+t[c]<r;)a+=t[c],c++;l.push(e.slice(0,c));var d=c;for(a=0;c!==h;)a+t[c]>s&&(l.push(e.slice(d,c)),a=0,d=c),a+=t[c],c++;return d!==c&&l.push(e.slice(d,c)),l},Py=function(e,t,r){r||(r={});var s,l,c,h,a,d,_,p=[],E=[p],w=r.textIndent||0,x=0,k=0,Q=e.split(" "),R=sp.apply(this,[" ",r])[0];if(d=r.lineIndent===-1?Q[0].length+2:r.lineIndent||0){var M=Array(d).join(" "),O=[];Q.map(function(K){(K=K.split(/\s*\n/)).length>1?O=O.concat(K.map(function(Z,$){return($&&Z.length?`
`:"")+Z})):O.push(K[0])}),Q=O,d=Qy.apply(this,[M,r])}for(c=0,h=Q.length;c<h;c++){var G=0;if(s=Q[c],d&&s[0]==`
`&&(s=s.substr(1),G=1),w+x+(k=(l=sp.apply(this,[s,r])).reduce(function(K,Z){return K+Z},0))>t||G){if(k>t){for(a=ky.apply(this,[s,l,t-(w+x),t]),p.push(a.shift()),p=[a.pop()];a.length;)E.push([a.shift()]);k=l.slice(s.length-(p[0]?p[0].length:0)).reduce(function(K,Z){return K+Z},0)}else p=[s];E.push(p),w=k+d,x=R}else p.push(s),w+=x+k,x=R}return _=d?function(K,Z){return(Z?M:"")+K.join(" ")}:function(K){return K.join(" ")},E.map(_)},Dh.splitTextToSize=function(e,t,r){var s,l=(r=r||{}).fontSize||this.internal.getFontSize(),c=function(p){if(p.widths&&p.kerning)return{widths:p.widths,kerning:p.kerning};var E=this.internal.getFont(p.fontName,p.fontStyle);return E.metadata.Unicode?{widths:E.metadata.Unicode.widths||{0:1},kerning:E.metadata.Unicode.kerning||{}}:{font:E.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,r);s=Array.isArray(e)?e:String(e).split(/\r?\n/);var h=1*this.internal.scaleFactor*t/l;c.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/l:0,c.lineIndent=r.lineIndent;var a,d,_=[];for(a=0,d=s.length;a<d;a++)_=_.concat(Py.apply(this,[s[a],h,c]));return _},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},s={},l=0;l<t.length;l++)r[t[l]]="0123456789abcdef"[l],s["0123456789abcdef"[l]]=t[l];var c=function(E){return"0x"+parseInt(E,10).toString(16)},h=e.__fontmetrics__.compress=function(E){var w,x,k,Q,R=["{"];for(var M in E){if(w=E[M],isNaN(parseInt(M,10))?x="'"+M+"'":(M=parseInt(M,10),x=(x=c(M).slice(2)).slice(0,-1)+s[x.slice(-1)]),typeof w=="number")w<0?(k=c(w).slice(3),Q="-"):(k=c(w).slice(2),Q=""),k=Q+k.slice(0,-1)+s[k.slice(-1)];else{if(qi(w)!=="object")throw new Error("Don't know what to do with value type "+qi(w)+".");k=h(w)}R.push(x+k)}return R.push("}"),R.join("")},a=e.__fontmetrics__.uncompress=function(E){if(typeof E!="string")throw new Error("Invalid argument passed to uncompress.");for(var w,x,k,Q,R={},M=1,O=R,G=[],K="",Z="",$=E.length-1,he=1;he<$;he+=1)(Q=E[he])=="'"?w?(k=w.join(""),w=void 0):w=[]:w?w.push(Q):Q=="{"?(G.push([O,k]),O={},k=void 0):Q=="}"?((x=G.pop())[0][x[1]]=O,k=void 0,O=x[0]):Q=="-"?M=-1:k===void 0?r.hasOwnProperty(Q)?(K+=r[Q],k=parseInt(K,16)*M,M=1,K=""):K+=Q:r.hasOwnProperty(Q)?(Z+=r[Q],O[k]=parseInt(Z,16)*M,M=1,k=void 0,Z=""):Z+=Q;return R},d={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},_={Unicode:{Courier:d,"Courier-Bold":d,"Courier-BoldOblique":d,"Courier-Oblique":d,Helvetica:d,"Helvetica-Bold":d,"Helvetica-BoldOblique":d,"Helvetica-Oblique":d,"Times-Roman":d,"Times-Bold":d,"Times-BoldItalic":d,"Times-Italic":d}},p={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(E){var w=E.font,x=p.Unicode[w.postScriptName];x&&(w.metadata.Unicode={},w.metadata.Unicode.widths=x.widths,w.metadata.Unicode.kerning=x.kerning);var k=_.Unicode[w.postScriptName];k&&(w.metadata.Unicode.encoding=k,w.encoding=k.codePages[0])}])}(Nn.API),function(e){var t=function(r){for(var s=r.length,l=new Uint8Array(s),c=0;c<s;c++)l[c]=r.charCodeAt(c);return l};e.API.events.push(["addFont",function(r){var s=void 0,l=r.font,c=r.instance;if(!l.isStandardFont){if(c===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+l.postScriptName+"').");if(typeof(s=c.existsFileInVFS(l.postScriptName)===!1?c.loadFile(l.postScriptName):c.getFileFromVFS(l.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+l.postScriptName+"').");(function(h,a){a=/^\x00\x01\x00\x00/.test(a)?t(a):t(Hf(a)),h.metadata=e.API.TTFFont.open(a),h.metadata.Unicode=h.metadata.Unicode||{encoding:{},kerning:{},widths:[]},h.metadata.glyIdsUsed=[0]})(l,s)}}])}(Nn),function(e){function t(){return(Hn.canvg?Promise.resolve(Hn.canvg):fg(()=>import("./index.es-978bb271.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}Nn.API.addSvgAsImage=function(r,s,l,c,h,a,d,_){if(isNaN(s)||isNaN(l))throw cs.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(c)||isNaN(h))throw cs.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var p=document.createElement("canvas");p.width=c,p.height=h;var E=p.getContext("2d");E.fillStyle="#fff",E.fillRect(0,0,p.width,p.height);var w={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},x=this;return t().then(function(k){return k.fromString(E,r,w)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(k){return k.render(w)}).then(function(){x.addImage(p.toDataURL("image/jpeg",1),s,l,c,h,d,_)})}}(),Nn.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var s=1;s<=this.internal.getNumberOfPages();s++)for(var l=0;l<this.internal.pages[s].length;l++)this.internal.pages[s][l]=this.internal.pages[s][l].replace(t,r);return this},Nn.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var s,l,c,h={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(h),d=[],_=0,p=0,E=0;function w(k,Q){var R,M=!1;for(R=0;R<k.length;R+=1)k[R]===Q&&(M=!0);return M}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(h)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var x=a.length;for(E=0;E<x;E+=1)r[a[E]].value=r[a[E]].defaultValue,r[a[E]].explicitSet=!1}if(qi(e)==="object"){for(l in e)if(c=e[l],w(a,l)&&c!==void 0){if(r[l].type==="boolean"&&typeof c=="boolean")r[l].value=c;else if(r[l].type==="name"&&w(r[l].valueSet,c))r[l].value=c;else if(r[l].type==="integer"&&Number.isInteger(c))r[l].value=c;else if(r[l].type==="array"){for(_=0;_<c.length;_+=1)if(s=!0,c[_].length===1&&typeof c[_][0]=="number")d.push(String(c[_]-1));else if(c[_].length>1){for(p=0;p<c[_].length;p+=1)typeof c[_][p]!="number"&&(s=!1);s===!0&&d.push([c[_][0]-1,c[_][1]-1].join(" "))}r[l].value="["+d.join(" ")+"]"}else r[l].value=r[l].defaultValue;r[l].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var k,Q=[];for(k in r)r[k].explicitSet===!0&&(r[k].type==="name"?Q.push("/"+k+" /"+r[k].value):Q.push("/"+k+" "+r[k].value));Q.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+Q.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var s='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',l=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),c=unescape(encodeURIComponent(s)),h=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),d=unescape(encodeURIComponent("</x:xmpmeta>")),_=c.length+h.length+a.length+l.length+d.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+_+" >>"),this.internal.write("stream"),this.internal.write(l+c+h+a+d),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(s,l){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:s,namespaceuri:l||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(Nn.API),function(e){var t=e.API,r=t.pdfEscape16=function(c,h){for(var a,d=h.metadata.Unicode.widths,_=["","0","00","000","0000"],p=[""],E=0,w=c.length;E<w;++E){if(a=h.metadata.characterToGlyph(c.charCodeAt(E)),h.metadata.glyIdsUsed.push(a),h.metadata.toUnicode[a]=c.charCodeAt(E),d.indexOf(a)==-1&&(d.push(a),d.push([parseInt(h.metadata.widthOfGlyph(a),10)])),a=="0")return p.join("");a=a.toString(16),p.push(_[4-a.length],a)}return p.join("")},s=function(c){var h,a,d,_,p,E,w;for(p=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,d=[],E=0,w=(a=Object.keys(c).sort(function(x,k){return x-k})).length;E<w;E++)h=a[E],d.length>=100&&(p+=`
`+d.length+` beginbfchar
`+d.join(`
`)+`
endbfchar`,d=[]),c[h]!==void 0&&c[h]!==null&&typeof c[h].toString=="function"&&(_=("0000"+c[h].toString(16)).slice(-4),h=("0000"+(+h).toString(16)).slice(-4),d.push("<"+h+"><"+_+">"));return d.length&&(p+=`
`+d.length+` beginbfchar
`+d.join(`
`)+`
endbfchar
`),p+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(c){(function(h){var a=h.font,d=h.out,_=h.newObject,p=h.putStream;if(a.metadata instanceof e.API.TTFFont&&a.encoding==="Identity-H"){for(var E=a.metadata.Unicode.widths,w=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),x="",k=0;k<w.length;k++)x+=String.fromCharCode(w[k]);var Q=_();p({data:x,addLength1:!0,objectId:Q}),d("endobj");var R=_();p({data:s(a.metadata.toUnicode),addLength1:!0,objectId:R}),d("endobj");var M=_();d("<<"),d("/Type /FontDescriptor"),d("/FontName /"+Rh(a.fontName)),d("/FontFile2 "+Q+" 0 R"),d("/FontBBox "+e.API.PDFObject.convert(a.metadata.bbox)),d("/Flags "+a.metadata.flags),d("/StemV "+a.metadata.stemV),d("/ItalicAngle "+a.metadata.italicAngle),d("/Ascent "+a.metadata.ascender),d("/Descent "+a.metadata.decender),d("/CapHeight "+a.metadata.capHeight),d(">>"),d("endobj");var O=_();d("<<"),d("/Type /Font"),d("/BaseFont /"+Rh(a.fontName)),d("/FontDescriptor "+M+" 0 R"),d("/W "+e.API.PDFObject.convert(E)),d("/CIDToGIDMap /Identity"),d("/DW 1000"),d("/Subtype /CIDFontType2"),d("/CIDSystemInfo"),d("<<"),d("/Supplement 0"),d("/Registry (Adobe)"),d("/Ordering ("+a.encoding+")"),d(">>"),d(">>"),d("endobj"),a.objectNumber=_(),d("<<"),d("/Type /Font"),d("/Subtype /Type0"),d("/ToUnicode "+R+" 0 R"),d("/BaseFont /"+Rh(a.fontName)),d("/Encoding /"+a.encoding),d("/DescendantFonts ["+O+" 0 R]"),d(">>"),d("endobj"),a.isAlreadyPutted=!0}})(c)}]),t.events.push(["putFont",function(c){(function(h){var a=h.font,d=h.out,_=h.newObject,p=h.putStream;if(a.metadata instanceof e.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var E=a.metadata.rawData,w="",x=0;x<E.length;x++)w+=String.fromCharCode(E[x]);var k=_();p({data:w,addLength1:!0,objectId:k}),d("endobj");var Q=_();p({data:s(a.metadata.toUnicode),addLength1:!0,objectId:Q}),d("endobj");var R=_();d("<<"),d("/Descent "+a.metadata.decender),d("/CapHeight "+a.metadata.capHeight),d("/StemV "+a.metadata.stemV),d("/Type /FontDescriptor"),d("/FontFile2 "+k+" 0 R"),d("/Flags 96"),d("/FontBBox "+e.API.PDFObject.convert(a.metadata.bbox)),d("/FontName /"+Rh(a.fontName)),d("/ItalicAngle "+a.metadata.italicAngle),d("/Ascent "+a.metadata.ascender),d(">>"),d("endobj"),a.objectNumber=_();for(var M=0;M<a.metadata.hmtx.widths.length;M++)a.metadata.hmtx.widths[M]=parseInt(a.metadata.hmtx.widths[M]*(1e3/a.metadata.head.unitsPerEm));d("<</Subtype/TrueType/Type/Font/ToUnicode "+Q+" 0 R/BaseFont/"+Rh(a.fontName)+"/FontDescriptor "+R+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),d("endobj"),a.isAlreadyPutted=!0}})(c)}]);var l=function(c){var h,a=c.text||"",d=c.x,_=c.y,p=c.options||{},E=c.mutex||{},w=E.pdfEscape,x=E.activeFontKey,k=E.fonts,Q=x,R="",M=0,O="",G=k[Q].encoding;if(k[Q].encoding!=="Identity-H")return{text:a,x:d,y:_,options:p,mutex:E};for(O=a,Q=x,Array.isArray(a)&&(O=a[0]),M=0;M<O.length;M+=1)k[Q].metadata.hasOwnProperty("cmap")&&(h=k[Q].metadata.cmap.unicode.codeMap[O[M].charCodeAt(0)]),h||O[M].charCodeAt(0)<256&&k[Q].metadata.hasOwnProperty("Unicode")?R+=O[M]:R+="";var K="";return parseInt(Q.slice(1))<14||G==="WinAnsiEncoding"?K=w(R,Q).split("").map(function(Z){return Z.charCodeAt(0).toString(16)}).join(""):G==="Identity-H"&&(K=r(R,k[Q])),E.isHex=!0,{text:K,x:d,y:_,options:p,mutex:E}};t.events.push(["postProcessText",function(c){var h=c.text||"",a=[],d={text:h,x:c.x,y:c.y,options:c.options,mutex:c.mutex};if(Array.isArray(h)){var _=0;for(_=0;_<h.length;_+=1)Array.isArray(h[_])&&h[_].length===3?a.push([l(Object.assign({},d,{text:h[_][0]})).text,h[_][1],h[_][2]]):a.push(l(Object.assign({},d,{text:h[_]})).text);c.text=a}else c.text=l(Object.assign({},d,{text:h})).text}])}(Nn),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,s){return t.call(this),this.internal.vFS[r]=s,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(Nn.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(s){var l,c,h,a,d,_,p,E=t,w=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],x=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],k={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},Q={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},R=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],M=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),O=!1,G=0;this.__bidiEngine__={};var K=function(ee){var se=ee.charCodeAt(),Be=se>>8,me=Q[Be];return me!==void 0?E[256*me+(255&se)]:Be===252||Be===253?"AL":M.test(Be)?"L":Be===8?"R":"N"},Z=function(ee){for(var se,Be=0;Be<ee.length;Be++){if((se=K(ee.charAt(Be)))==="L")return!1;if(se==="R")return!0}return!1},$=function(ee,se,Be,me){var Pe,ge,Qe,Te,tt=se[me];switch(tt){case"L":case"R":O=!1;break;case"N":case"AN":break;case"EN":O&&(tt="AN");break;case"AL":O=!0,tt="R";break;case"WS":tt="N";break;case"CS":me<1||me+1>=se.length||(Pe=Be[me-1])!=="EN"&&Pe!=="AN"||(ge=se[me+1])!=="EN"&&ge!=="AN"?tt="N":O&&(ge="AN"),tt=ge===Pe?ge:"N";break;case"ES":tt=(Pe=me>0?Be[me-1]:"B")==="EN"&&me+1<se.length&&se[me+1]==="EN"?"EN":"N";break;case"ET":if(me>0&&Be[me-1]==="EN"){tt="EN";break}if(O){tt="N";break}for(Qe=me+1,Te=se.length;Qe<Te&&se[Qe]==="ET";)Qe++;tt=Qe<Te&&se[Qe]==="EN"?"EN":"N";break;case"NSM":if(h&&!a){for(Te=se.length,Qe=me+1;Qe<Te&&se[Qe]==="NSM";)Qe++;if(Qe<Te){var Oe=ee[me],Mt=Oe>=1425&&Oe<=2303||Oe===64286;if(Pe=se[Qe],Mt&&(Pe==="R"||Pe==="AL")){tt="R";break}}}tt=me<1||(Pe=se[me-1])==="B"?"N":Be[me-1];break;case"B":O=!1,l=!0,tt=G;break;case"S":c=!0,tt="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":O=!1;break;case"BN":tt="N"}return tt},he=function(ee,se,Be){var me=ee.split("");return Be&&fe(me,Be,{hiLevel:G}),me.reverse(),se&&se.reverse(),me.join("")},fe=function(ee,se,Be){var me,Pe,ge,Qe,Te,tt=-1,Oe=ee.length,Mt=0,ne=[],Se=G?x:w,ke=[];for(O=!1,l=!1,c=!1,Pe=0;Pe<Oe;Pe++)ke[Pe]=K(ee[Pe]);for(ge=0;ge<Oe;ge++){if(Te=Mt,ne[ge]=$(ee,ke,ne,ge),me=240&(Mt=Se[Te][k[ne[ge]]]),Mt&=15,se[ge]=Qe=Se[Mt][5],me>0)if(me===16){for(Pe=tt;Pe<ge;Pe++)se[Pe]=1;tt=-1}else tt=-1;if(Se[Mt][6])tt===-1&&(tt=ge);else if(tt>-1){for(Pe=tt;Pe<ge;Pe++)se[Pe]=Qe;tt=-1}ke[ge]==="B"&&(se[ge]=0),Be.hiLevel|=Qe}c&&function(Ke,at,dt){for(var Bt=0;Bt<dt;Bt++)if(Ke[Bt]==="S"){at[Bt]=G;for(var Ge=Bt-1;Ge>=0&&Ke[Ge]==="WS";Ge--)at[Ge]=G}}(ke,se,Oe)},_e=function(ee,se,Be,me,Pe){if(!(Pe.hiLevel<ee)){if(ee===1&&G===1&&!l)return se.reverse(),void(Be&&Be.reverse());for(var ge,Qe,Te,tt,Oe=se.length,Mt=0;Mt<Oe;){if(me[Mt]>=ee){for(Te=Mt+1;Te<Oe&&me[Te]>=ee;)Te++;for(tt=Mt,Qe=Te-1;tt<Qe;tt++,Qe--)ge=se[tt],se[tt]=se[Qe],se[Qe]=ge,Be&&(ge=Be[tt],Be[tt]=Be[Qe],Be[Qe]=ge);Mt=Te}Mt++}}},ue=function(ee,se,Be){var me=ee.split(""),Pe={hiLevel:G};return Be||(Be=[]),fe(me,Be,Pe),function(ge,Qe,Te){if(Te.hiLevel!==0&&p)for(var tt,Oe=0;Oe<ge.length;Oe++)Qe[Oe]===1&&(tt=R.indexOf(ge[Oe]))>=0&&(ge[Oe]=R[tt+1])}(me,Be,Pe),_e(2,me,se,Be,Pe),_e(1,me,se,Be,Pe),me.join("")};return this.__bidiEngine__.doBidiReorder=function(ee,se,Be){if(function(Pe,ge){if(ge)for(var Qe=0;Qe<Pe.length;Qe++)ge[Qe]=Qe;a===void 0&&(a=Z(Pe)),_===void 0&&(_=Z(Pe))}(ee,se),h||!d||_)if(h&&d&&a^_)G=a?1:0,ee=he(ee,se,Be);else if(!h&&d&&_)G=a?1:0,ee=ue(ee,se,Be),ee=he(ee,se);else if(!h||a||d||_){if(h&&!d&&a^_)ee=he(ee,se),a?(G=0,ee=ue(ee,se,Be)):(G=1,ee=ue(ee,se,Be),ee=he(ee,se));else if(h&&a&&!d&&_)G=1,ee=ue(ee,se,Be),ee=he(ee,se);else if(!h&&!d&&a^_){var me=p;a?(G=1,ee=ue(ee,se,Be),G=0,p=!1,ee=ue(ee,se,Be),p=me):(G=0,ee=ue(ee,se,Be),ee=he(ee,se),G=1,p=!1,ee=ue(ee,se,Be),p=me,ee=he(ee,se))}}else G=0,ee=ue(ee,se,Be);else G=a?1:0,ee=ue(ee,se,Be);return ee},this.__bidiEngine__.setOptions=function(ee){ee&&(h=ee.isInputVisual,d=ee.isOutputVisual,a=ee.isInputRtl,_=ee.isOutputRtl,p=ee.isSymmetricSwapping)},this.__bidiEngine__.setOptions(s),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(s){var l=s.text,c=(s.x,s.y,s.options||{}),h=(s.mutex,c.lang,[]);if(c.isInputVisual=typeof c.isInputVisual!="boolean"||c.isInputVisual,r.setOptions(c),Object.prototype.toString.call(l)==="[object Array]"){var a=0;for(h=[],a=0;a<l.length;a+=1)Object.prototype.toString.call(l[a])==="[object Array]"?h.push([r.doBidiReorder(l[a][0]),l[a][1],l[a][2]]):h.push([r.doBidiReorder(l[a])]);s.text=h}else s.text=r.doBidiReorder(l);r.setOptions({isInputVisual:!0})}])}(Nn),Nn.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new Eu(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new _S(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new aS(this.contents),this.head=new AS(this),this.name=new fS(this),this.cmap=new g_(this),this.toUnicode={},this.hhea=new lS(this),this.maxp=new dS(this),this.hmtx=new pS(this),this.post=new uS(this),this.os2=new cS(this),this.loca=new vS(this),this.glyf=new mS(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,s,l,c;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var h,a,d,_;for(_=[],h=0,a=(d=this.bbox).length;h<a;h++)t=d[h],_.push(Math.round(t*this.scaleFactor));return _}.call(this),this.stemV=0,this.post.exists?(s=255&(l=this.post.italic_angle),32768&(r=l>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+s)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(c=this.familyClass)===1||c===2||c===3||c===4||c===5||c===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,s){var l,c,h,a;for(h=0,c=0,a=(t=""+t).length;0<=a?c<a:c>a;c=0<=a?++c:--c)l=t.charCodeAt(c),h+=this.widthOfGlyph(this.characterToGlyph(l))+s*(1e3/r)||0;return h*(r/1e3)},e.prototype.lineHeight=function(t,r){var s;return r==null&&(r=!1),s=r?this.lineGap:0,(this.ascender+s-this.decender)/1e3*t},e}();var Gl,Eu=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,s;for(s=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)s[r]=String.fromCharCode(this.readByte());return s.join("")},e.prototype.writeString=function(t){var r,s,l;for(l=[],r=0,s=t.length;0<=s?r<s:r>s;r=0<=s?++r:--r)l.push(this.writeByte(t.charCodeAt(r)));return l},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,s,l,c,h,a,d;return t=this.readByte(),r=this.readByte(),s=this.readByte(),l=this.readByte(),c=this.readByte(),h=this.readByte(),a=this.readByte(),d=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^s)+4294967296*(255^l)+16777216*(255^c)+65536*(255^h)+256*(255^a)+(255^d)+1):72057594037927940*t+281474976710656*r+1099511627776*s+4294967296*l+16777216*c+65536*h+256*a+d},e.prototype.writeLongLong=function(t){var r,s;return r=Math.floor(t/4294967296),s=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(s>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,s;for(r=[],s=0;0<=t?s<t:s>t;s=0<=t?++s:--s)r.push(this.readByte());return r},e.prototype.write=function(t){var r,s,l,c;for(c=[],s=0,l=t.length;s<l;s++)r=t[s],c.push(this.writeByte(r));return c},e}(),aS=function(){var e;function t(r){var s,l,c;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},l=0,c=this.tableCount;0<=c?l<c:l>c;l=0<=c?++l:--l)s={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[s.tag]=s}return t.prototype.encode=function(r){var s,l,c,h,a,d,_,p,E,w,x,k,Q;for(Q in x=Object.keys(r).length,d=Math.log(2),E=16*Math.floor(Math.log(x)/d),h=Math.floor(E/d),p=16*x-E,(l=new Eu).writeInt(this.scalarType),l.writeShort(x),l.writeShort(E),l.writeShort(h),l.writeShort(p),c=16*x,_=l.pos+c,a=null,k=[],r)for(w=r[Q],l.writeString(Q),l.writeInt(e(w)),l.writeInt(_),l.writeInt(w.length),k=k.concat(w),Q==="head"&&(a=_),_+=w.length;_%4;)k.push(0),_++;return l.write(k),s=2981146554-e(l.data),l.pos=a+8,l.writeUInt32(s),l.data},e=function(r){var s,l,c,h;for(r=y_.call(r);r.length%4;)r.push(0);for(c=new Eu(r),l=0,s=0,h=r.length;s<h;s=s+=4)l+=c.readUInt32();return 4294967295&l},t}(),oS={}.hasOwnProperty,vc=function(e,t){for(var r in t)oS.call(t,r)&&(e[r]=t[r]);function s(){this.constructor=e}return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e};Gl=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var AS=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return vc(t,Gl),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var s;return(s=new Eu).writeInt(this.version),s.writeInt(this.revision),s.writeInt(this.checkSumAdjustment),s.writeInt(this.magicNumber),s.writeShort(this.flags),s.writeShort(this.unitsPerEm),s.writeLongLong(this.created),s.writeLongLong(this.modified),s.writeShort(this.xMin),s.writeShort(this.yMin),s.writeShort(this.xMax),s.writeShort(this.yMax),s.writeShort(this.macStyle),s.writeShort(this.lowestRecPPEM),s.writeShort(this.fontDirectionHint),s.writeShort(r),s.writeShort(this.glyphDataFormat),s.data},t}(),Ny=function(){function e(t,r){var s,l,c,h,a,d,_,p,E,w,x,k,Q,R,M,O,G;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),E=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(d=0;d<256;++d)this.codeMap[d]=t.readByte();break;case 4:for(x=t.readUInt16(),w=x/2,t.pos+=6,c=function(){var K,Z;for(Z=[],d=K=0;0<=w?K<w:K>w;d=0<=w?++K:--K)Z.push(t.readUInt16());return Z}(),t.pos+=2,Q=function(){var K,Z;for(Z=[],d=K=0;0<=w?K<w:K>w;d=0<=w?++K:--K)Z.push(t.readUInt16());return Z}(),_=function(){var K,Z;for(Z=[],d=K=0;0<=w?K<w:K>w;d=0<=w?++K:--K)Z.push(t.readUInt16());return Z}(),p=function(){var K,Z;for(Z=[],d=K=0;0<=w?K<w:K>w;d=0<=w?++K:--K)Z.push(t.readUInt16());return Z}(),l=(this.length-t.pos+this.offset)/2,a=function(){var K,Z;for(Z=[],d=K=0;0<=l?K<l:K>l;d=0<=l?++K:--K)Z.push(t.readUInt16());return Z}(),d=M=0,G=c.length;M<G;d=++M)for(R=c[d],s=O=k=Q[d];k<=R?O<=R:O>=R;s=k<=R?++O:--O)p[d]===0?h=s+_[d]:(h=a[p[d]/2+(s-k)-(w-d)]||0)!==0&&(h+=_[d]),this.codeMap[s]=65535&h}t.pos=E}return e.encode=function(t,r){var s,l,c,h,a,d,_,p,E,w,x,k,Q,R,M,O,G,K,Z,$,he,fe,_e,ue,ee,se,Be,me,Pe,ge,Qe,Te,tt,Oe,Mt,ne,Se,ke,Ke,at,dt,Bt,Ge,rt,Ut,ht;switch(me=new Eu,h=Object.keys(t).sort(function(Nt,dr){return Nt-dr}),r){case"macroman":for(Q=0,R=function(){var Nt=[];for(k=0;k<256;++k)Nt.push(0);return Nt}(),O={0:0},c={},Pe=0,tt=h.length;Pe<tt;Pe++)O[Ge=t[l=h[Pe]]]==null&&(O[Ge]=++Q),c[l]={old:t[l],new:O[t[l]]},R[l]=O[t[l]];return me.writeUInt16(1),me.writeUInt16(0),me.writeUInt32(12),me.writeUInt16(0),me.writeUInt16(262),me.writeUInt16(0),me.write(R),{charMap:c,subtable:me.data,maxGlyphID:Q+1};case"unicode":for(se=[],E=[],G=0,O={},s={},M=_=null,ge=0,Oe=h.length;ge<Oe;ge++)O[Z=t[l=h[ge]]]==null&&(O[Z]=++G),s[l]={old:Z,new:O[Z]},a=O[Z]-l,M!=null&&a===_||(M&&E.push(M),se.push(l),_=a),M=l;for(M&&E.push(M),E.push(65535),se.push(65535),ue=2*(_e=se.length),fe=2*Math.pow(Math.log(_e)/Math.LN2,2),w=Math.log(fe/2)/Math.LN2,he=2*_e-fe,d=[],$=[],x=[],k=Qe=0,Mt=se.length;Qe<Mt;k=++Qe){if(ee=se[k],p=E[k],ee===65535){d.push(0),$.push(0);break}if(ee-(Be=s[ee].new)>=32768)for(d.push(0),$.push(2*(x.length+_e-k)),l=Te=ee;ee<=p?Te<=p:Te>=p;l=ee<=p?++Te:--Te)x.push(s[l].new);else d.push(Be-ee),$.push(0)}for(me.writeUInt16(3),me.writeUInt16(1),me.writeUInt32(12),me.writeUInt16(4),me.writeUInt16(16+8*_e+2*x.length),me.writeUInt16(0),me.writeUInt16(ue),me.writeUInt16(fe),me.writeUInt16(w),me.writeUInt16(he),dt=0,ne=E.length;dt<ne;dt++)l=E[dt],me.writeUInt16(l);for(me.writeUInt16(0),Bt=0,Se=se.length;Bt<Se;Bt++)l=se[Bt],me.writeUInt16(l);for(rt=0,ke=d.length;rt<ke;rt++)a=d[rt],me.writeUInt16(a);for(Ut=0,Ke=$.length;Ut<Ke;Ut++)K=$[Ut],me.writeUInt16(K);for(ht=0,at=x.length;ht<at;ht++)Q=x[ht],me.writeUInt16(Q);return{charMap:s,subtable:me.data,maxGlyphID:G+1}}},e}(),g_=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return vc(t,Gl),t.prototype.tag="cmap",t.prototype.parse=function(r){var s,l,c;for(r.pos=this.offset,this.version=r.readUInt16(),c=r.readUInt16(),this.tables=[],this.unicode=null,l=0;0<=c?l<c:l>c;l=0<=c?++l:--l)s=new Ny(r,this.offset),this.tables.push(s),s.isUnicode&&this.unicode==null&&(this.unicode=s);return!0},t.encode=function(r,s){var l,c;return s==null&&(s="macroman"),l=Ny.encode(r,s),(c=new Eu).writeUInt16(0),c.writeUInt16(1),l.table=c.data.concat(l.subtable),l},t}(),lS=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return vc(t,Gl),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t}(),cS=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return vc(t,Gl),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var s,l;for(l=[],s=0;s<10;++s)l.push(r.readByte());return l}(),this.charRange=function(){var s,l;for(l=[],s=0;s<4;++s)l.push(r.readInt());return l}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var s,l;for(l=[],s=0;s<2;s=++s)l.push(r.readInt());return l}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t}(),uS=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return vc(t,Gl),t.prototype.tag="post",t.prototype.parse=function(r){var s,l,c;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var h;for(l=r.readUInt16(),this.glyphNameIndex=[],h=0;0<=l?h<l:h>l;h=0<=l?++h:--h)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],c=[];r.pos<this.offset+this.length;)s=r.readByte(),c.push(this.names.push(r.readString(s)));return c;case 151552:return l=r.readUInt16(),this.offsets=r.read(l);case 196608:break;case 262144:return this.map=function(){var a,d,_;for(_=[],h=a=0,d=this.file.maxp.numGlyphs;0<=d?a<d:a>d;h=0<=d?++a:--a)_.push(r.readUInt32());return _}.call(this)}},t}(),hS=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},fS=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return vc(t,Gl),t.prototype.tag="name",t.prototype.parse=function(r){var s,l,c,h,a,d,_,p,E,w,x;for(r.pos=this.offset,r.readShort(),s=r.readShort(),d=r.readShort(),l=[],h=0;0<=s?h<s:h>s;h=0<=s?++h:--h)l.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+d+r.readShort()});for(_={},h=E=0,w=l.length;E<w;h=++E)c=l[h],r.pos=c.offset,p=r.readString(c.length),a=new hS(p,c),_[x=c.nameID]==null&&(_[x]=[]),_[c.nameID].push(a);this.strings=_,this.copyright=_[0],this.fontFamily=_[1],this.fontSubfamily=_[2],this.uniqueSubfamily=_[3],this.fontName=_[4],this.version=_[5];try{this.postscriptName=_[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=_[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=_[7],this.manufacturer=_[8],this.designer=_[9],this.description=_[10],this.vendorUrl=_[11],this.designerUrl=_[12],this.license=_[13],this.licenseUrl=_[14],this.preferredFamily=_[15],this.preferredSubfamily=_[17],this.compatibleFull=_[18],this.sampleText=_[19]},t}(),dS=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return vc(t,Gl),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t}(),pS=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return vc(t,Gl),t.prototype.tag="hmtx",t.prototype.parse=function(r){var s,l,c,h,a,d,_;for(r.pos=this.offset,this.metrics=[],s=0,d=this.file.hhea.numberOfMetrics;0<=d?s<d:s>d;s=0<=d?++s:--s)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(c=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var p,E;for(E=[],s=p=0;0<=c?p<c:p>c;s=0<=c?++p:--p)E.push(r.readInt16());return E}(),this.widths=function(){var p,E,w,x;for(x=[],p=0,E=(w=this.metrics).length;p<E;p++)h=w[p],x.push(h.advance);return x}.call(this),l=this.widths[this.widths.length-1],_=[],s=a=0;0<=c?a<c:a>c;s=0<=c?++a:--a)_.push(this.widths.push(l));return _},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t}(),y_=[].slice,mS=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return vc(t,Gl),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var s,l,c,h,a,d,_,p,E,w;return r in this.cache?this.cache[r]:(h=this.file.loca,s=this.file.contents,l=h.indexOf(r),(c=h.lengthOf(r))===0?this.cache[r]=null:(s.pos=this.offset+l,a=(d=new Eu(s.read(c))).readShort(),p=d.readShort(),w=d.readShort(),_=d.readShort(),E=d.readShort(),this.cache[r]=a===-1?new yS(d,p,w,_,E):new gS(d,a,p,w,_,E),this.cache[r]))},t.prototype.encode=function(r,s,l){var c,h,a,d,_;for(a=[],h=[],d=0,_=s.length;d<_;d++)c=r[s[d]],h.push(a.length),c&&(a=a.concat(c.encode(l)));return h.push(a.length),{table:a,offsets:h}},t}(),gS=function(){function e(t,r,s,l,c,h){this.raw=t,this.numberOfContours=r,this.xMin=s,this.yMin=l,this.xMax=c,this.yMax=h,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),yS=function(){function e(t,r,s,l,c){var h,a;for(this.raw=t,this.xMin=r,this.yMin=s,this.xMax=l,this.yMax=c,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],h=this.raw;a=h.readShort(),this.glyphOffsets.push(h.pos),this.glyphIDs.push(h.readUInt16()),32&a;)h.pos+=1&a?4:2,128&a?h.pos+=8:64&a?h.pos+=4:8&a&&(h.pos+=2)}return e.prototype.encode=function(){var t,r,s;for(r=new Eu(y_.call(this.raw.data)),t=0,s=this.glyphIDs.length;t<s;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),vS=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return vc(t,Gl),t.prototype.tag="loca",t.prototype.parse=function(r){var s,l;return r.pos=this.offset,s=this.file.head.indexToLocFormat,this.offsets=s===0?function(){var c,h;for(h=[],l=0,c=this.length;l<c;l+=2)h.push(2*r.readUInt16());return h}.call(this):function(){var c,h;for(h=[],l=0,c=this.length;l<c;l+=4)h.push(r.readUInt32());return h}.call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,s){for(var l=new Uint32Array(this.offsets.length),c=0,h=0,a=0;a<l.length;++a)if(l[a]=c,h<s.length&&s[h]==a){++h,l[a]=c;var d=this.offsets[a],_=this.offsets[a+1]-d;_>0&&(c+=_)}for(var p=new Array(4*l.length),E=0;E<l.length;++E)p[4*E+3]=255&l[E],p[4*E+2]=(65280&l[E])>>8,p[4*E+1]=(16711680&l[E])>>16,p[4*E]=(4278190080&l[E])>>24;return p},t}(),_S=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,s,l,c;for(r in l=this.font.cmap.tables[0].codeMap,t={},c=this.subset)s=c[r],t[r]=l[s];return t},e.prototype.glyphsFor=function(t){var r,s,l,c,h,a,d;for(l={},h=0,a=t.length;h<a;h++)l[c=t[h]]=this.font.glyf.glyphFor(c);for(c in r=[],l)(s=l[c])!=null&&s.compound&&r.push.apply(r,s.glyphIDs);if(r.length>0)for(c in d=this.glyphsFor(r))s=d[c],l[c]=s;return l},e.prototype.encode=function(t,r){var s,l,c,h,a,d,_,p,E,w,x,k,Q,R,M;for(l in s=g_.encode(this.generateCmap(),"unicode"),h=this.glyphsFor(t),x={0:0},M=s.charMap)x[(d=M[l]).old]=d.new;for(k in w=s.maxGlyphID,h)k in x||(x[k]=w++);return p=function(O){var G,K;for(G in K={},O)K[O[G]]=G;return K}(x),E=Object.keys(p).sort(function(O,G){return O-G}),Q=function(){var O,G,K;for(K=[],O=0,G=E.length;O<G;O++)a=E[O],K.push(p[a]);return K}(),c=this.font.glyf.encode(h,Q,x),_=this.font.loca.encode(c.offsets,Q),R={cmap:this.font.cmap.raw(),glyf:c.table,loca:_,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(R["OS/2"]=this.font.os2.raw()),this.font.directory.encode(R)},e}();Nn.API.PDFObject=function(){var e;function t(){}return e=function(r,s){return(Array(s+1).join("0")+r).slice(-s)},t.convert=function(r){var s,l,c,h;if(Array.isArray(r))return"["+function(){var a,d,_;for(_=[],a=0,d=r.length;a<d;a++)s=r[a],_.push(t.convert(s));return _}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(l in c=["<<"],r)h=r[l],c.push("/"+l+" "+t.convert(h));return c.push(">>"),c.join(`
`)}return""+r},t}();const wS=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:YF,AcroFormAppearance:yn,AcroFormButton:Qa,AcroFormCheckBox:Kf,AcroFormChoiceField:Wu,AcroFormComboBox:Zu,AcroFormEditBox:zf,AcroFormListBox:Xu,AcroFormPasswordField:Gf,AcroFormPushButton:Vf,AcroFormRadioButton:Ju,AcroFormTextField:bu,GState:rd,ShadingPattern:vu,TilingPattern:Gu,default:Nn,jsPDF:Nn},Symbol.toStringTag,{value:"Module"})),bS=xw(wS);var Up={},xS={get exports(){return Up},set exports(e){Up=e}};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 */var jy;function BS(){return jy||(jy=1,function(e,t){(function(r,s){e.exports=s()})(Hl,function(){/*! *****************************************************************************
		    Copyright (c) Microsoft Corporation.

		    Permission to use, copy, modify, and/or distribute this software for any
		    purpose with or without fee is hereby granted.

		    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
		    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
		    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
		    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
		    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
		    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
		    PERFORMANCE OF THIS SOFTWARE.
		    ***************************************************************************** */var r=function(F,B){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(U,T){U.__proto__=T}||function(U,T){for(var V in T)Object.prototype.hasOwnProperty.call(T,V)&&(U[V]=T[V])},r(F,B)};function s(F,B){if(typeof B!="function"&&B!==null)throw new TypeError("Class extends value "+String(B)+" is not a constructor or null");r(F,B);function U(){this.constructor=F}F.prototype=B===null?Object.create(B):(U.prototype=B.prototype,new U)}var l=function(){return l=Object.assign||function(B){for(var U,T=1,V=arguments.length;T<V;T++){U=arguments[T];for(var te in U)Object.prototype.hasOwnProperty.call(U,te)&&(B[te]=U[te])}return B},l.apply(this,arguments)};function c(F,B,U,T){function V(te){return te instanceof U?te:new U(function(we){we(te)})}return new(U||(U=Promise))(function(te,we){function Re(mt){try{yt(T.next(mt))}catch(Tt){we(Tt)}}function Me(mt){try{yt(T.throw(mt))}catch(Tt){we(Tt)}}function yt(mt){mt.done?te(mt.value):V(mt.value).then(Re,Me)}yt((T=T.apply(F,B||[])).next())})}function h(F,B){var U={label:0,sent:function(){if(te[0]&1)throw te[1];return te[1]},trys:[],ops:[]},T,V,te,we;return we={next:Re(0),throw:Re(1),return:Re(2)},typeof Symbol=="function"&&(we[Symbol.iterator]=function(){return this}),we;function Re(yt){return function(mt){return Me([yt,mt])}}function Me(yt){if(T)throw new TypeError("Generator is already executing.");for(;U;)try{if(T=1,V&&(te=yt[0]&2?V.return:yt[0]?V.throw||((te=V.return)&&te.call(V),0):V.next)&&!(te=te.call(V,yt[1])).done)return te;switch(V=0,te&&(yt=[yt[0]&2,te.value]),yt[0]){case 0:case 1:te=yt;break;case 4:return U.label++,{value:yt[1],done:!1};case 5:U.label++,V=yt[1],yt=[0];continue;case 7:yt=U.ops.pop(),U.trys.pop();continue;default:if(te=U.trys,!(te=te.length>0&&te[te.length-1])&&(yt[0]===6||yt[0]===2)){U=0;continue}if(yt[0]===3&&(!te||yt[1]>te[0]&&yt[1]<te[3])){U.label=yt[1];break}if(yt[0]===6&&U.label<te[1]){U.label=te[1],te=yt;break}if(te&&U.label<te[2]){U.label=te[2],U.ops.push(yt);break}te[2]&&U.ops.pop(),U.trys.pop();continue}yt=B.call(F,U)}catch(mt){yt=[6,mt],V=0}finally{T=te=0}if(yt[0]&5)throw yt[1];return{value:yt[0]?yt[1]:void 0,done:!0}}}function a(F,B,U){if(U||arguments.length===2)for(var T=0,V=B.length,te;T<V;T++)(te||!(T in B))&&(te||(te=Array.prototype.slice.call(B,0,T)),te[T]=B[T]);return F.concat(te||B)}for(var d=function(){function F(B,U,T,V){this.left=B,this.top=U,this.width=T,this.height=V}return F.prototype.add=function(B,U,T,V){return new F(this.left+B,this.top+U,this.width+T,this.height+V)},F.fromClientRect=function(B,U){return new F(U.left+B.windowBounds.left,U.top+B.windowBounds.top,U.width,U.height)},F.fromDOMRectList=function(B,U){var T=Array.from(U).find(function(V){return V.width!==0});return T?new F(T.left+B.windowBounds.left,T.top+B.windowBounds.top,T.width,T.height):F.EMPTY},F.EMPTY=new F(0,0,0,0),F}(),_=function(F,B){return d.fromClientRect(F,B.getBoundingClientRect())},p=function(F){var B=F.body,U=F.documentElement;if(!B||!U)throw new Error("Unable to get document size");var T=Math.max(Math.max(B.scrollWidth,U.scrollWidth),Math.max(B.offsetWidth,U.offsetWidth),Math.max(B.clientWidth,U.clientWidth)),V=Math.max(Math.max(B.scrollHeight,U.scrollHeight),Math.max(B.offsetHeight,U.offsetHeight),Math.max(B.clientHeight,U.clientHeight));return new d(0,0,T,V)},E=function(F){for(var B=[],U=0,T=F.length;U<T;){var V=F.charCodeAt(U++);if(V>=55296&&V<=56319&&U<T){var te=F.charCodeAt(U++);(te&64512)===56320?B.push(((V&1023)<<10)+(te&1023)+65536):(B.push(V),U--)}else B.push(V)}return B},w=function(){for(var F=[],B=0;B<arguments.length;B++)F[B]=arguments[B];if(String.fromCodePoint)return String.fromCodePoint.apply(String,F);var U=F.length;if(!U)return"";for(var T=[],V=-1,te="";++V<U;){var we=F[V];we<=65535?T.push(we):(we-=65536,T.push((we>>10)+55296,we%1024+56320)),(V+1===U||T.length>16384)&&(te+=String.fromCharCode.apply(String,T),T.length=0)}return te},x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",k=typeof Uint8Array>"u"?[]:new Uint8Array(256),Q=0;Q<x.length;Q++)k[x.charCodeAt(Q)]=Q;for(var R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",M=typeof Uint8Array>"u"?[]:new Uint8Array(256),O=0;O<R.length;O++)M[R.charCodeAt(O)]=O;for(var G=function(F){var B=F.length*.75,U=F.length,T,V=0,te,we,Re,Me;F[F.length-1]==="="&&(B--,F[F.length-2]==="="&&B--);var yt=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(B):new Array(B),mt=Array.isArray(yt)?yt:new Uint8Array(yt);for(T=0;T<U;T+=4)te=M[F.charCodeAt(T)],we=M[F.charCodeAt(T+1)],Re=M[F.charCodeAt(T+2)],Me=M[F.charCodeAt(T+3)],mt[V++]=te<<2|we>>4,mt[V++]=(we&15)<<4|Re>>2,mt[V++]=(Re&3)<<6|Me&63;return yt},K=function(F){for(var B=F.length,U=[],T=0;T<B;T+=2)U.push(F[T+1]<<8|F[T]);return U},Z=function(F){for(var B=F.length,U=[],T=0;T<B;T+=4)U.push(F[T+3]<<24|F[T+2]<<16|F[T+1]<<8|F[T]);return U},$=5,he=6+5,fe=2,_e=he-$,ue=65536>>$,ee=1<<$,se=ee-1,Be=1024>>$,me=ue+Be,Pe=me,ge=32,Qe=Pe+ge,Te=65536>>he,tt=1<<_e,Oe=tt-1,Mt=function(F,B,U){return F.slice?F.slice(B,U):new Uint16Array(Array.prototype.slice.call(F,B,U))},ne=function(F,B,U){return F.slice?F.slice(B,U):new Uint32Array(Array.prototype.slice.call(F,B,U))},Se=function(F,B){var U=G(F),T=Array.isArray(U)?Z(U):new Uint32Array(U),V=Array.isArray(U)?K(U):new Uint16Array(U),te=24,we=Mt(V,te/2,T[4]/2),Re=T[5]===2?Mt(V,(te+T[4])/2):ne(T,Math.ceil((te+T[4])/4));return new ke(T[0],T[1],T[2],T[3],we,Re)},ke=function(){function F(B,U,T,V,te,we){this.initialValue=B,this.errorValue=U,this.highStart=T,this.highValueIndex=V,this.index=te,this.data=we}return F.prototype.get=function(B){var U;if(B>=0){if(B<55296||B>56319&&B<=65535)return U=this.index[B>>$],U=(U<<fe)+(B&se),this.data[U];if(B<=65535)return U=this.index[ue+(B-55296>>$)],U=(U<<fe)+(B&se),this.data[U];if(B<this.highStart)return U=Qe-Te+(B>>he),U=this.index[U],U+=B>>$&Oe,U=this.index[U],U=(U<<fe)+(B&se),this.data[U];if(B<=1114111)return this.data[this.highValueIndex]}return this.errorValue},F}(),Ke="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",at=typeof Uint8Array>"u"?[]:new Uint8Array(256),dt=0;dt<Ke.length;dt++)at[Ke.charCodeAt(dt)]=dt;var Bt="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",Ge=50,rt=1,Ut=2,ht=3,Nt=4,dr=5,Lt=7,ze=8,gr=9,sr=10,Ht=11,fr=12,Br=13,vr=14,Gr=15,rr=16,xr=17,Zr=18,pn=19,vt=20,nt=21,bt=22,Ct=23,jt=24,er=25,Vr=26,Fr=27,un=28,lr=29,Er=30,An=31,wn=32,_i=33,br=34,Cr=35,cr=36,Kr=37,hn=38,xn=39,Sn=40,ji=41,tn=42,Wi=43,hs=[9001,65288],Ln="!",nn="×",Ue="÷",Y=Se(Bt),Ae=[Er,cr],Ee=[rt,Ut,ht,dr],Le=[sr,ze],Xe=[Fr,Vr],lt=Ee.concat(Le),Ye=[hn,xn,Sn,br,Cr],qe=[Gr,Br],ut=function(F,B){B===void 0&&(B="strict");var U=[],T=[],V=[];return F.forEach(function(te,we){var Re=Y.get(te);if(Re>Ge?(V.push(!0),Re-=Ge):V.push(!1),["normal","auto","loose"].indexOf(B)!==-1&&[8208,8211,12316,12448].indexOf(te)!==-1)return T.push(we),U.push(rr);if(Re===Nt||Re===Ht){if(we===0)return T.push(we),U.push(Er);var Me=U[we-1];return lt.indexOf(Me)===-1?(T.push(T[we-1]),U.push(Me)):(T.push(we),U.push(Er))}if(T.push(we),Re===An)return U.push(B==="strict"?nt:Kr);if(Re===tn||Re===lr)return U.push(Er);if(Re===Wi)return te>=131072&&te<=196605||te>=196608&&te<=262141?U.push(Kr):U.push(Er);U.push(Re)}),[T,U,V]},Ot=function(F,B,U,T){var V=T[U];if(Array.isArray(F)?F.indexOf(V)!==-1:F===V)for(var te=U;te<=T.length;){te++;var we=T[te];if(we===B)return!0;if(we!==sr)break}if(V===sr)for(var te=U;te>0;){te--;var Re=T[te];if(Array.isArray(F)?F.indexOf(Re)!==-1:F===Re)for(var Me=U;Me<=T.length;){Me++;var we=T[Me];if(we===B)return!0;if(we!==sr)break}if(Re!==sr)break}return!1},nr=function(F,B){for(var U=F;U>=0;){var T=B[U];if(T===sr)U--;else return T}return 0},zt=function(F,B,U,T,V){if(U[T]===0)return nn;var te=T-1;if(Array.isArray(V)&&V[te]===!0)return nn;var we=te-1,Re=te+1,Me=B[te],yt=we>=0?B[we]:0,mt=B[Re];if(Me===Ut&&mt===ht)return nn;if(Ee.indexOf(Me)!==-1)return Ln;if(Ee.indexOf(mt)!==-1||Le.indexOf(mt)!==-1)return nn;if(nr(te,B)===ze)return Ue;if(Y.get(F[te])===Ht||(Me===wn||Me===_i)&&Y.get(F[Re])===Ht||Me===Lt||mt===Lt||Me===gr||[sr,Br,Gr].indexOf(Me)===-1&&mt===gr||[xr,Zr,pn,jt,un].indexOf(mt)!==-1||nr(te,B)===bt||Ot(Ct,bt,te,B)||Ot([xr,Zr],nt,te,B)||Ot(fr,fr,te,B))return nn;if(Me===sr)return Ue;if(Me===Ct||mt===Ct)return nn;if(mt===rr||Me===rr)return Ue;if([Br,Gr,nt].indexOf(mt)!==-1||Me===vr||yt===cr&&qe.indexOf(Me)!==-1||Me===un&&mt===cr||mt===vt||Ae.indexOf(mt)!==-1&&Me===er||Ae.indexOf(Me)!==-1&&mt===er||Me===Fr&&[Kr,wn,_i].indexOf(mt)!==-1||[Kr,wn,_i].indexOf(Me)!==-1&&mt===Vr||Ae.indexOf(Me)!==-1&&Xe.indexOf(mt)!==-1||Xe.indexOf(Me)!==-1&&Ae.indexOf(mt)!==-1||[Fr,Vr].indexOf(Me)!==-1&&(mt===er||[bt,Gr].indexOf(mt)!==-1&&B[Re+1]===er)||[bt,Gr].indexOf(Me)!==-1&&mt===er||Me===er&&[er,un,jt].indexOf(mt)!==-1)return nn;if([er,un,jt,xr,Zr].indexOf(mt)!==-1)for(var Tt=te;Tt>=0;){var tr=B[Tt];if(tr===er)return nn;if([un,jt].indexOf(tr)!==-1)Tt--;else break}if([Fr,Vr].indexOf(mt)!==-1)for(var Tt=[xr,Zr].indexOf(Me)!==-1?we:te;Tt>=0;){var tr=B[Tt];if(tr===er)return nn;if([un,jt].indexOf(tr)!==-1)Tt--;else break}if(hn===Me&&[hn,xn,br,Cr].indexOf(mt)!==-1||[xn,br].indexOf(Me)!==-1&&[xn,Sn].indexOf(mt)!==-1||[Sn,Cr].indexOf(Me)!==-1&&mt===Sn||Ye.indexOf(Me)!==-1&&[vt,Vr].indexOf(mt)!==-1||Ye.indexOf(mt)!==-1&&Me===Fr||Ae.indexOf(Me)!==-1&&Ae.indexOf(mt)!==-1||Me===jt&&Ae.indexOf(mt)!==-1||Ae.concat(er).indexOf(Me)!==-1&&mt===bt&&hs.indexOf(F[Re])===-1||Ae.concat(er).indexOf(mt)!==-1&&Me===Zr)return nn;if(Me===ji&&mt===ji){for(var an=U[te],kr=1;an>0&&(an--,B[an]===ji);)kr++;if(kr%2!==0)return nn}return Me===wn&&mt===_i?nn:Ue},jr=function(F,B){B||(B={lineBreak:"normal",wordBreak:"normal"});var U=ut(F,B.lineBreak),T=U[0],V=U[1],te=U[2];(B.wordBreak==="break-all"||B.wordBreak==="break-word")&&(V=V.map(function(Re){return[er,Er,tn].indexOf(Re)!==-1?Kr:Re}));var we=B.wordBreak==="keep-all"?te.map(function(Re,Me){return Re&&F[Me]>=19968&&F[Me]<=40959}):void 0;return[T,V,we]},Hr=function(){function F(B,U,T,V){this.codePoints=B,this.required=U===Ln,this.start=T,this.end=V}return F.prototype.slice=function(){return w.apply(void 0,this.codePoints.slice(this.start,this.end))},F}(),Tr=function(F,B){var U=E(F),T=jr(U,B),V=T[0],te=T[1],we=T[2],Re=U.length,Me=0,yt=0;return{next:function(){if(yt>=Re)return{done:!0,value:null};for(var mt=nn;yt<Re&&(mt=zt(U,te,V,++yt,we))===nn;);if(mt!==nn||yt===Re){var Tt=new Hr(U,mt,Me,yt);return Me=yt,{value:Tt,done:!1}}return{done:!0,value:null}}}},ln=1<<0,dn=1<<1,In=1<<2,mn=1<<3,Bn=10,kn=47,Vn=92,Ti=9,oi=32,wi=34,Qs=61,bi=35,Yn=36,Za=37,Ks=39,Gs=40,ia=41,gs=95,Ri=45,Xi=33,mo=60,nA=62,EA=64,sa=91,bs=93,xs=61,Ja=123,aa=63,Po=125,ka=124,Mo=126,oa=128,qs=65533,ni=42,Bs=43,ys=44,iA=58,sA=59,Cn=46,qA=0,ml=8,Pa=11,go=14,aA=31,yo=127,gt=-1,Mn=48,Ds=97,Oi=101,ks=102,ya=117,Ya=122,Cs=65,Aa=69,$a=70,va=85,WA=90,es=function(F){return F>=Mn&&F<=57},FA=function(F){return F>=55296&&F<=57343},eo=function(F){return es(F)||F>=Cs&&F<=$a||F>=Ds&&F<=ks},to=function(F){return F>=Ds&&F<=Ya},ro=function(F){return F>=Cs&&F<=WA},ql=function(F){return to(F)||ro(F)},Do=function(F){return F>=oa},vs=function(F){return F===Bn||F===Ti||F===oi},oA=function(F){return ql(F)||Do(F)||F===gs},AA=function(F){return oA(F)||es(F)||F===Ri},_c=function(F){return F>=qA&&F<=ml||F===Pa||F>=go&&F<=aA||F===yo},_a=function(F,B){return F!==Vn?!1:B!==Bn},XA=function(F,B,U){return F===Ri?oA(B)||_a(B,U):oA(F)?!0:!!(F===Vn&&_a(F,B))},SA=function(F,B,U){return F===Bs||F===Ri?es(B)?!0:B===Cn&&es(U):es(F===Cn?B:F)},IA=function(F){var B=0,U=1;(F[B]===Bs||F[B]===Ri)&&(F[B]===Ri&&(U=-1),B++);for(var T=[];es(F[B]);)T.push(F[B++]);var V=T.length?parseInt(w.apply(void 0,T),10):0;F[B]===Cn&&B++;for(var te=[];es(F[B]);)te.push(F[B++]);var we=te.length,Re=we?parseInt(w.apply(void 0,te),10):0;(F[B]===Aa||F[B]===Oi)&&B++;var Me=1;(F[B]===Bs||F[B]===Ri)&&(F[B]===Ri&&(Me=-1),B++);for(var yt=[];es(F[B]);)yt.push(F[B++]);var mt=yt.length?parseInt(w.apply(void 0,yt),10):0;return U*(V+Re*Math.pow(10,-we))*Math.pow(10,Me*mt)},TA={type:2},lA={type:3},UA={type:4},vo={type:13},gl={type:8},Wl={type:21},No={type:9},wa={type:10},ZA={type:11},ba={type:12},xi={type:14},N={type:23},oe={type:1},De={type:25},et={type:24},_t={type:26},Jt={type:27},_r={type:28},en={type:29},En={type:31},Dn={type:32},Kn=function(){function F(){this._value=[]}return F.prototype.write=function(B){this._value=this._value.concat(E(B))},F.prototype.read=function(){for(var B=[],U=this.consumeToken();U!==Dn;)B.push(U),U=this.consumeToken();return B},F.prototype.consumeToken=function(){var B=this.consumeCodePoint();switch(B){case wi:return this.consumeStringToken(wi);case bi:var U=this.peekCodePoint(0),T=this.peekCodePoint(1),V=this.peekCodePoint(2);if(AA(U)||_a(T,V)){var te=XA(U,T,V)?dn:ln,we=this.consumeName();return{type:5,value:we,flags:te}}break;case Yn:if(this.peekCodePoint(0)===Qs)return this.consumeCodePoint(),vo;break;case Ks:return this.consumeStringToken(Ks);case Gs:return TA;case ia:return lA;case ni:if(this.peekCodePoint(0)===Qs)return this.consumeCodePoint(),xi;break;case Bs:if(SA(B,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(B),this.consumeNumericToken();break;case ys:return UA;case Ri:var Re=B,Me=this.peekCodePoint(0),yt=this.peekCodePoint(1);if(SA(Re,Me,yt))return this.reconsumeCodePoint(B),this.consumeNumericToken();if(XA(Re,Me,yt))return this.reconsumeCodePoint(B),this.consumeIdentLikeToken();if(Me===Ri&&yt===nA)return this.consumeCodePoint(),this.consumeCodePoint(),et;break;case Cn:if(SA(B,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(B),this.consumeNumericToken();break;case kn:if(this.peekCodePoint(0)===ni)for(this.consumeCodePoint();;){var mt=this.consumeCodePoint();if(mt===ni&&(mt=this.consumeCodePoint(),mt===kn))return this.consumeToken();if(mt===gt)return this.consumeToken()}break;case iA:return _t;case sA:return Jt;case mo:if(this.peekCodePoint(0)===Xi&&this.peekCodePoint(1)===Ri&&this.peekCodePoint(2)===Ri)return this.consumeCodePoint(),this.consumeCodePoint(),De;break;case EA:var Tt=this.peekCodePoint(0),tr=this.peekCodePoint(1),an=this.peekCodePoint(2);if(XA(Tt,tr,an)){var we=this.consumeName();return{type:7,value:we}}break;case sa:return _r;case Vn:if(_a(B,this.peekCodePoint(0)))return this.reconsumeCodePoint(B),this.consumeIdentLikeToken();break;case bs:return en;case xs:if(this.peekCodePoint(0)===Qs)return this.consumeCodePoint(),gl;break;case Ja:return ZA;case Po:return ba;case ya:case va:var kr=this.peekCodePoint(0),Jr=this.peekCodePoint(1);return kr===Bs&&(eo(Jr)||Jr===aa)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(B),this.consumeIdentLikeToken();case ka:if(this.peekCodePoint(0)===Qs)return this.consumeCodePoint(),No;if(this.peekCodePoint(0)===ka)return this.consumeCodePoint(),Wl;break;case Mo:if(this.peekCodePoint(0)===Qs)return this.consumeCodePoint(),wa;break;case gt:return Dn}return vs(B)?(this.consumeWhiteSpace(),En):es(B)?(this.reconsumeCodePoint(B),this.consumeNumericToken()):oA(B)?(this.reconsumeCodePoint(B),this.consumeIdentLikeToken()):{type:6,value:w(B)}},F.prototype.consumeCodePoint=function(){var B=this._value.shift();return typeof B>"u"?-1:B},F.prototype.reconsumeCodePoint=function(B){this._value.unshift(B)},F.prototype.peekCodePoint=function(B){return B>=this._value.length?-1:this._value[B]},F.prototype.consumeUnicodeRangeToken=function(){for(var B=[],U=this.consumeCodePoint();eo(U)&&B.length<6;)B.push(U),U=this.consumeCodePoint();for(var T=!1;U===aa&&B.length<6;)B.push(U),U=this.consumeCodePoint(),T=!0;if(T){var V=parseInt(w.apply(void 0,B.map(function(Me){return Me===aa?Mn:Me})),16),te=parseInt(w.apply(void 0,B.map(function(Me){return Me===aa?$a:Me})),16);return{type:30,start:V,end:te}}var we=parseInt(w.apply(void 0,B),16);if(this.peekCodePoint(0)===Ri&&eo(this.peekCodePoint(1))){this.consumeCodePoint(),U=this.consumeCodePoint();for(var Re=[];eo(U)&&Re.length<6;)Re.push(U),U=this.consumeCodePoint();var te=parseInt(w.apply(void 0,Re),16);return{type:30,start:we,end:te}}else return{type:30,start:we,end:we}},F.prototype.consumeIdentLikeToken=function(){var B=this.consumeName();return B.toLowerCase()==="url"&&this.peekCodePoint(0)===Gs?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Gs?(this.consumeCodePoint(),{type:19,value:B}):{type:20,value:B}},F.prototype.consumeUrlToken=function(){var B=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===gt)return{type:22,value:""};var U=this.peekCodePoint(0);if(U===Ks||U===wi){var T=this.consumeStringToken(this.consumeCodePoint());return T.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===gt||this.peekCodePoint(0)===ia)?(this.consumeCodePoint(),{type:22,value:T.value}):(this.consumeBadUrlRemnants(),N)}for(;;){var V=this.consumeCodePoint();if(V===gt||V===ia)return{type:22,value:w.apply(void 0,B)};if(vs(V))return this.consumeWhiteSpace(),this.peekCodePoint(0)===gt||this.peekCodePoint(0)===ia?(this.consumeCodePoint(),{type:22,value:w.apply(void 0,B)}):(this.consumeBadUrlRemnants(),N);if(V===wi||V===Ks||V===Gs||_c(V))return this.consumeBadUrlRemnants(),N;if(V===Vn)if(_a(V,this.peekCodePoint(0)))B.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),N;else B.push(V)}},F.prototype.consumeWhiteSpace=function(){for(;vs(this.peekCodePoint(0));)this.consumeCodePoint()},F.prototype.consumeBadUrlRemnants=function(){for(;;){var B=this.consumeCodePoint();if(B===ia||B===gt)return;_a(B,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},F.prototype.consumeStringSlice=function(B){for(var U=5e4,T="";B>0;){var V=Math.min(U,B);T+=w.apply(void 0,this._value.splice(0,V)),B-=V}return this._value.shift(),T},F.prototype.consumeStringToken=function(B){var U="",T=0;do{var V=this._value[T];if(V===gt||V===void 0||V===B)return U+=this.consumeStringSlice(T),{type:0,value:U};if(V===Bn)return this._value.splice(0,T),oe;if(V===Vn){var te=this._value[T+1];te!==gt&&te!==void 0&&(te===Bn?(U+=this.consumeStringSlice(T),T=-1,this._value.shift()):_a(V,te)&&(U+=this.consumeStringSlice(T),U+=w(this.consumeEscapedCodePoint()),T=-1))}T++}while(!0)},F.prototype.consumeNumber=function(){var B=[],U=In,T=this.peekCodePoint(0);for((T===Bs||T===Ri)&&B.push(this.consumeCodePoint());es(this.peekCodePoint(0));)B.push(this.consumeCodePoint());T=this.peekCodePoint(0);var V=this.peekCodePoint(1);if(T===Cn&&es(V))for(B.push(this.consumeCodePoint(),this.consumeCodePoint()),U=mn;es(this.peekCodePoint(0));)B.push(this.consumeCodePoint());T=this.peekCodePoint(0),V=this.peekCodePoint(1);var te=this.peekCodePoint(2);if((T===Aa||T===Oi)&&((V===Bs||V===Ri)&&es(te)||es(V)))for(B.push(this.consumeCodePoint(),this.consumeCodePoint()),U=mn;es(this.peekCodePoint(0));)B.push(this.consumeCodePoint());return[IA(B),U]},F.prototype.consumeNumericToken=function(){var B=this.consumeNumber(),U=B[0],T=B[1],V=this.peekCodePoint(0),te=this.peekCodePoint(1),we=this.peekCodePoint(2);if(XA(V,te,we)){var Re=this.consumeName();return{type:15,number:U,flags:T,unit:Re}}return V===Za?(this.consumeCodePoint(),{type:16,number:U,flags:T}):{type:17,number:U,flags:T}},F.prototype.consumeEscapedCodePoint=function(){var B=this.consumeCodePoint();if(eo(B)){for(var U=w(B);eo(this.peekCodePoint(0))&&U.length<6;)U+=w(this.consumeCodePoint());vs(this.peekCodePoint(0))&&this.consumeCodePoint();var T=parseInt(U,16);return T===0||FA(T)||T>1114111?qs:T}return B===gt?qs:B},F.prototype.consumeName=function(){for(var B="";;){var U=this.consumeCodePoint();if(AA(U))B+=w(U);else if(_a(U,this.peekCodePoint(0)))B+=w(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(U),B}},F}(),Wn=function(){function F(B){this._tokens=B}return F.create=function(B){var U=new Kn;return U.write(B),new F(U.read())},F.parseValue=function(B){return F.create(B).parseComponentValue()},F.parseValues=function(B){return F.create(B).parseComponentValues()},F.prototype.parseComponentValue=function(){for(var B=this.consumeToken();B.type===31;)B=this.consumeToken();if(B.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(B);var U=this.consumeComponentValue();do B=this.consumeToken();while(B.type===31);if(B.type===32)return U;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},F.prototype.parseComponentValues=function(){for(var B=[];;){var U=this.consumeComponentValue();if(U.type===32)return B;B.push(U),B.push()}},F.prototype.consumeComponentValue=function(){var B=this.consumeToken();switch(B.type){case 11:case 28:case 2:return this.consumeSimpleBlock(B.type);case 19:return this.consumeFunction(B)}return B},F.prototype.consumeSimpleBlock=function(B){for(var U={type:B,values:[]},T=this.consumeToken();;){if(T.type===32||yl(T,B))return U;this.reconsumeToken(T),U.values.push(this.consumeComponentValue()),T=this.consumeToken()}},F.prototype.consumeFunction=function(B){for(var U={name:B.value,values:[],type:18};;){var T=this.consumeToken();if(T.type===32||T.type===3)return U;this.reconsumeToken(T),U.values.push(this.consumeComponentValue())}},F.prototype.consumeToken=function(){var B=this._tokens.shift();return typeof B>"u"?Dn:B},F.prototype.reconsumeToken=function(B){this._tokens.unshift(B)},F}(),pi=function(F){return F.type===15},mi=function(F){return F.type===17},Tn=function(F){return F.type===20},Es=function(F){return F.type===0},ts=function(F,B){return Tn(F)&&F.value===B},Ws=function(F){return F.type!==31},rs=function(F){return F.type!==31&&F.type!==4},Si=function(F){var B=[],U=[];return F.forEach(function(T){if(T.type===4){if(U.length===0)throw new Error("Error parsing function args, zero tokens for arg");B.push(U),U=[];return}T.type!==31&&U.push(T)}),U.length&&B.push(U),B},yl=function(F,B){return B===11&&F.type===12||B===28&&F.type===29?!0:B===2&&F.type===3},la=function(F){return F.type===17||F.type===15},Pi=function(F){return F.type===16||la(F)},xa=function(F){return F.length>1?[F[0],F[1]]:[F[0]]},Mi={type:17,number:0,flags:In},Ma={type:16,number:50,flags:In},Ba={type:16,number:100,flags:In},ns=function(F,B,U){var T=F[0],V=F[1];return[hi(T,B),hi(typeof V<"u"?V:T,U)]},hi=function(F,B){if(F.type===16)return F.number/100*B;if(pi(F))switch(F.unit){case"rem":case"em":return 16*F.number;case"px":default:return F.number}return F.number},cA="deg",no="grad",uA="rad",Fs="turn",_o={name:"angle",parse:function(F,B){if(B.type===15)switch(B.unit){case cA:return Math.PI*B.number/180;case no:return Math.PI/200*B.number;case uA:return B.number;case Fs:return Math.PI*2*B.number}throw new Error("Unsupported angle type")}},io=function(F){return F.type===15&&(F.unit===cA||F.unit===no||F.unit===uA||F.unit===Fs)},jo=function(F){var B=F.filter(Tn).map(function(U){return U.value}).join(" ");switch(B){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Mi,Mi];case"to top":case"bottom":return Hi(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Mi,Ba];case"to right":case"left":return Hi(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Ba,Ba];case"to bottom":case"top":return Hi(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Ba,Mi];case"to left":case"right":return Hi(270)}return 0},Hi=function(F){return Math.PI*F/180},Ns={name:"color",parse:function(F,B){if(B.type===18){var U=ss[B.name];if(typeof U>"u")throw new Error('Attempting to parse an unsupported color function "'+B.name+'"');return U(F,B.values)}if(B.type===5){if(B.value.length===3){var T=B.value.substring(0,1),V=B.value.substring(1,2),te=B.value.substring(2,3);return js(parseInt(T+T,16),parseInt(V+V,16),parseInt(te+te,16),1)}if(B.value.length===4){var T=B.value.substring(0,1),V=B.value.substring(1,2),te=B.value.substring(2,3),we=B.value.substring(3,4);return js(parseInt(T+T,16),parseInt(V+V,16),parseInt(te+te,16),parseInt(we+we,16)/255)}if(B.value.length===6){var T=B.value.substring(0,2),V=B.value.substring(2,4),te=B.value.substring(4,6);return js(parseInt(T,16),parseInt(V,16),parseInt(te,16),1)}if(B.value.length===8){var T=B.value.substring(0,2),V=B.value.substring(2,4),te=B.value.substring(4,6),we=B.value.substring(6,8);return js(parseInt(T,16),parseInt(V,16),parseInt(te,16),parseInt(we,16)/255)}}if(B.type===20){var Re=gi[B.value.toUpperCase()];if(typeof Re<"u")return Re}return gi.TRANSPARENT}},so=function(F){return(255&F)===0},is=function(F){var B=255&F,U=255&F>>8,T=255&F>>16,V=255&F>>24;return B<255?"rgba("+V+","+T+","+U+","+B/255+")":"rgb("+V+","+T+","+U+")"},js=function(F,B,U,T){return(F<<24|B<<16|U<<8|Math.round(T*255)<<0)>>>0},Ss=function(F,B){if(F.type===17)return F.number;if(F.type===16){var U=B===3?1:255;return B===3?F.number/100*U:Math.round(F.number/100*U)}return 0},Ca=function(F,B){var U=B.filter(rs);if(U.length===3){var T=U.map(Ss),V=T[0],te=T[1],we=T[2];return js(V,te,we,1)}if(U.length===4){var Re=U.map(Ss),V=Re[0],te=Re[1],we=Re[2],Me=Re[3];return js(V,te,we,Me)}return 0};function ca(F,B,U){return U<0&&(U+=1),U>=1&&(U-=1),U<1/6?(B-F)*U*6+F:U<1/2?B:U<2/3?(B-F)*6*(2/3-U)+F:F}var Xs=function(F,B){var U=B.filter(rs),T=U[0],V=U[1],te=U[2],we=U[3],Re=(T.type===17?Hi(T.number):_o.parse(F,T))/(Math.PI*2),Me=Pi(V)?V.number/100:0,yt=Pi(te)?te.number/100:0,mt=typeof we<"u"&&Pi(we)?hi(we,1):1;if(Me===0)return js(yt*255,yt*255,yt*255,1);var Tt=yt<=.5?yt*(Me+1):yt+Me-yt*Me,tr=yt*2-Tt,an=ca(tr,Tt,Re+1/3),kr=ca(tr,Tt,Re),Jr=ca(tr,Tt,Re-1/3);return js(an*255,kr*255,Jr*255,mt)},ss={hsl:Xs,hsla:Xs,rgb:Ca,rgba:Ca},ua=function(F,B){return Ns.parse(F,Wn.create(B).parseComponentValue())},gi={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},JA={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(F,B){return B.map(function(U){if(Tn(U))switch(U.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Da={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Na=function(F,B){var U=Ns.parse(F,B[0]),T=B[1];return T&&Pi(T)?{color:U,stop:T}:{color:U,stop:null}},fs=function(F,B){var U=F[0],T=F[F.length-1];U.stop===null&&(U.stop=Mi),T.stop===null&&(T.stop=Ba);for(var V=[],te=0,we=0;we<F.length;we++){var Re=F[we].stop;if(Re!==null){var Me=hi(Re,B);Me>te?V.push(Me):V.push(te),te=Me}else V.push(null)}for(var yt=null,we=0;we<V.length;we++){var mt=V[we];if(mt===null)yt===null&&(yt=we);else if(yt!==null){for(var Tt=we-yt,tr=V[yt-1],an=(mt-tr)/(Tt+1),kr=1;kr<=Tt;kr++)V[yt+kr-1]=an*kr;yt=null}}return F.map(function(Jr,Xn){var gn=Jr.color;return{color:gn,stop:Math.max(Math.min(1,V[Xn]/B),0)}})},Ea=function(F,B,U){var T=B/2,V=U/2,te=hi(F[0],B)-T,we=V-hi(F[1],U);return(Math.atan2(we,te)+Math.PI*2)%(Math.PI*2)},Ro=function(F,B,U){var T=typeof F=="number"?F:Ea(F,B,U),V=Math.abs(B*Math.sin(T))+Math.abs(U*Math.cos(T)),te=B/2,we=U/2,Re=V/2,Me=Math.sin(T-Math.PI/2)*Re,yt=Math.cos(T-Math.PI/2)*Re;return[V,te-yt,te+yt,we-Me,we+Me]},Rs=function(F,B){return Math.sqrt(F*F+B*B)},hA=function(F,B,U,T,V){var te=[[0,0],[0,B],[F,0],[F,B]];return te.reduce(function(we,Re){var Me=Re[0],yt=Re[1],mt=Rs(U-Me,T-yt);return(V?mt<we.optimumDistance:mt>we.optimumDistance)?{optimumCorner:Re,optimumDistance:mt}:we},{optimumDistance:V?1/0:-1/0,optimumCorner:null}).optimumCorner},ao=function(F,B,U,T,V){var te=0,we=0;switch(F.size){case 0:F.shape===0?te=we=Math.min(Math.abs(B),Math.abs(B-T),Math.abs(U),Math.abs(U-V)):F.shape===1&&(te=Math.min(Math.abs(B),Math.abs(B-T)),we=Math.min(Math.abs(U),Math.abs(U-V)));break;case 2:if(F.shape===0)te=we=Math.min(Rs(B,U),Rs(B,U-V),Rs(B-T,U),Rs(B-T,U-V));else if(F.shape===1){var Re=Math.min(Math.abs(U),Math.abs(U-V))/Math.min(Math.abs(B),Math.abs(B-T)),Me=hA(T,V,B,U,!0),yt=Me[0],mt=Me[1];te=Rs(yt-B,(mt-U)/Re),we=Re*te}break;case 1:F.shape===0?te=we=Math.max(Math.abs(B),Math.abs(B-T),Math.abs(U),Math.abs(U-V)):F.shape===1&&(te=Math.max(Math.abs(B),Math.abs(B-T)),we=Math.max(Math.abs(U),Math.abs(U-V)));break;case 3:if(F.shape===0)te=we=Math.max(Rs(B,U),Rs(B,U-V),Rs(B-T,U),Rs(B-T,U-V));else if(F.shape===1){var Re=Math.max(Math.abs(U),Math.abs(U-V))/Math.max(Math.abs(B),Math.abs(B-T)),Tt=hA(T,V,B,U,!1),yt=Tt[0],mt=Tt[1];te=Rs(yt-B,(mt-U)/Re),we=Re*te}break}return Array.isArray(F.size)&&(te=hi(F.size[0],T),we=F.size.length===2?hi(F.size[1],V):te),[te,we]},Oo=function(F,B){var U=Hi(180),T=[];return Si(B).forEach(function(V,te){if(te===0){var we=V[0];if(we.type===20&&we.value==="to"){U=jo(V);return}else if(io(we)){U=_o.parse(F,we);return}}var Re=Na(F,V);T.push(Re)}),{angle:U,stops:T,type:1}},zi=function(F,B){var U=Hi(180),T=[];return Si(B).forEach(function(V,te){if(te===0){var we=V[0];if(we.type===20&&["top","left","right","bottom"].indexOf(we.value)!==-1){U=jo(V);return}else if(io(we)){U=(_o.parse(F,we)+Hi(270))%Hi(360);return}}var Re=Na(F,V);T.push(Re)}),{angle:U,stops:T,type:1}},Pr=function(F,B){var U=Hi(180),T=[],V=1,te=0,we=3,Re=[];return Si(B).forEach(function(Me,yt){var mt=Me[0];if(yt===0){if(Tn(mt)&&mt.value==="linear"){V=1;return}else if(Tn(mt)&&mt.value==="radial"){V=2;return}}if(mt.type===18){if(mt.name==="from"){var Tt=Ns.parse(F,mt.values[0]);T.push({stop:Mi,color:Tt})}else if(mt.name==="to"){var Tt=Ns.parse(F,mt.values[0]);T.push({stop:Ba,color:Tt})}else if(mt.name==="color-stop"){var tr=mt.values.filter(rs);if(tr.length===2){var Tt=Ns.parse(F,tr[1]),an=tr[0];mi(an)&&T.push({stop:{type:16,number:an.number*100,flags:an.flags},color:Tt})}}}}),V===1?{angle:(U+Hi(180))%Hi(360),stops:T,type:V}:{size:we,shape:te,stops:T,position:Re,type:V}},Ii="closest-side",Ai="farthest-side",Bi="closest-corner",Zi="farthest-corner",Sr="circle",ja="ellipse",LA="cover",QA="contain",Xl=function(F,B){var U=0,T=3,V=[],te=[];return Si(B).forEach(function(we,Re){var Me=!0;if(Re===0){var yt=!1;Me=we.reduce(function(Tt,tr){if(yt)if(Tn(tr))switch(tr.value){case"center":return te.push(Ma),Tt;case"top":case"left":return te.push(Mi),Tt;case"right":case"bottom":return te.push(Ba),Tt}else(Pi(tr)||la(tr))&&te.push(tr);else if(Tn(tr))switch(tr.value){case Sr:return U=0,!1;case ja:return U=1,!1;case"at":return yt=!0,!1;case Ii:return T=0,!1;case LA:case Ai:return T=1,!1;case QA:case Bi:return T=2,!1;case Zi:return T=3,!1}else if(la(tr)||Pi(tr))return Array.isArray(T)||(T=[]),T.push(tr),!1;return Tt},Me)}if(Me){var mt=Na(F,we);V.push(mt)}}),{size:T,shape:U,stops:V,position:te,type:2}},YA=function(F,B){var U=0,T=3,V=[],te=[];return Si(B).forEach(function(we,Re){var Me=!0;if(Re===0?Me=we.reduce(function(mt,Tt){if(Tn(Tt))switch(Tt.value){case"center":return te.push(Ma),!1;case"top":case"left":return te.push(Mi),!1;case"right":case"bottom":return te.push(Ba),!1}else if(Pi(Tt)||la(Tt))return te.push(Tt),!1;return mt},Me):Re===1&&(Me=we.reduce(function(mt,Tt){if(Tn(Tt))switch(Tt.value){case Sr:return U=0,!1;case ja:return U=1,!1;case QA:case Ii:return T=0,!1;case Ai:return T=1,!1;case Bi:return T=2,!1;case LA:case Zi:return T=3,!1}else if(la(Tt)||Pi(Tt))return Array.isArray(T)||(T=[]),T.push(Tt),!1;return mt},Me)),Me){var yt=Na(F,we);V.push(yt)}}),{size:T,shape:U,stops:V,position:te,type:2}},wc=function(F){return F.type===1},zc=function(F){return F.type===2},vl={name:"image",parse:function(F,B){if(B.type===22){var U={url:B.value,type:0};return F.cache.addImage(B.value),U}if(B.type===18){var T=$A[B.name];if(typeof T>"u")throw new Error('Attempting to parse an unsupported image function "'+B.name+'"');return T(F,B.values)}throw new Error("Unsupported image type "+B.type)}};function Zl(F){return!(F.type===20&&F.value==="none")&&(F.type!==18||!!$A[F.name])}var $A={"linear-gradient":Oo,"-moz-linear-gradient":zi,"-ms-linear-gradient":zi,"-o-linear-gradient":zi,"-webkit-linear-gradient":zi,"radial-gradient":Xl,"-moz-radial-gradient":YA,"-ms-radial-gradient":YA,"-o-radial-gradient":YA,"-webkit-radial-gradient":YA,"-webkit-gradient":Pr},el={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(F,B){if(B.length===0)return[];var U=B[0];return U.type===20&&U.value==="none"?[]:B.filter(function(T){return rs(T)&&Zl(T)}).map(function(T){return vl.parse(F,T)})}},Zs={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(F,B){return B.map(function(U){if(Tn(U))switch(U.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Di={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(F,B){return Si(B).map(function(U){return U.filter(Pi)}).map(xa)}},oo={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(F,B){return Si(B).map(function(U){return U.filter(Tn).map(function(T){return T.value}).join(" ")}).map(_l)}},_l=function(F){switch(F){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Ra;(function(F){F.AUTO="auto",F.CONTAIN="contain",F.COVER="cover"})(Ra||(Ra={}));var tl={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(F,B){return Si(B).map(function(U){return U.filter(fA)})}},fA=function(F){return Tn(F)||Pi(F)},kA=function(F){return{name:"border-"+F+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},Fa=kA("top"),Ui=kA("right"),PA=kA("bottom"),MA=kA("left"),DA=function(F){return{name:"border-radius-"+F,initialValue:"0 0",prefix:!1,type:1,parse:function(B,U){return xa(U.filter(Pi))}}},Vc=DA("top-left"),Kc=DA("top-right"),Gc=DA("bottom-right"),wo=DA("bottom-left"),dA=function(F){return{name:"border-"+F+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(B,U){switch(U){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},sn=dA("top"),vn=dA("right"),rl=dA("bottom"),wl=dA("left"),Sa=function(F){return{name:"border-"+F+"-width",initialValue:"0",type:0,prefix:!1,parse:function(B,U){return pi(U)?U.number:0}}},as=Sa("top"),pA=Sa("right"),bo=Sa("bottom"),bc=Sa("left"),mA={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Ji={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(F,B){switch(B){case"rtl":return 1;case"ltr":default:return 0}}},ds={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(F,B){return B.filter(Tn).reduce(function(U,T){return U|xc(T.value)},0)}},xc=function(F){switch(F){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},ha={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(F,B){switch(B){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},g={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(F,B){return B.type===20&&B.value==="normal"?0:B.type===17||B.type===15?B.number:0}},i;(function(F){F.NORMAL="normal",F.STRICT="strict"})(i||(i={}));var u={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(F,B){switch(B){case"strict":return i.STRICT;case"normal":default:return i.NORMAL}}},m={name:"line-height",initialValue:"normal",prefix:!1,type:4},v=function(F,B){return Tn(F)&&F.value==="normal"?1.2*B:F.type===17?B*F.number:Pi(F)?hi(F,B):B},S={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(F,B){return B.type===20&&B.value==="none"?null:vl.parse(F,B)}},P={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(F,B){switch(B){case"inside":return 0;case"outside":default:return 1}}},z={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(F,B){switch(B){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},q=function(F){return{name:"margin-"+F,initialValue:"0",prefix:!1,type:4}},J=q("top"),ie=q("right"),pe=q("bottom"),be=q("left"),Ve={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(F,B){return B.filter(Tn).map(function(U){switch(U.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},Ne={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(F,B){switch(B){case"break-word":return"break-word";case"normal":default:return"normal"}}},He=function(F){return{name:"padding-"+F,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},ct=He("top"),wt=He("right"),St=He("bottom"),We=He("left"),Rt={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(F,B){switch(B){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},Qt={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(F,B){switch(B){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Xt={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(F,B){return B.length===1&&ts(B[0],"none")?[]:Si(B).map(function(U){for(var T={color:gi.TRANSPARENT,offsetX:Mi,offsetY:Mi,blur:Mi},V=0,te=0;te<U.length;te++){var we=U[te];la(we)?(V===0?T.offsetX=we:V===1?T.offsetY=we:T.blur=we,V++):T.color=Ns.parse(F,we)}return T})}},Zt={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(F,B){switch(B){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},ur={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(F,B){if(B.type===20&&B.value==="none")return null;if(B.type===18){var U=Ur[B.name];if(typeof U>"u")throw new Error('Attempting to parse an unsupported transform function "'+B.name+'"');return U(B.values)}return null}},qt=function(F){var B=F.filter(function(U){return U.type===17}).map(function(U){return U.number});return B.length===6?B:null},Rr=function(F){var B=F.filter(function(Me){return Me.type===17}).map(function(Me){return Me.number}),U=B[0],T=B[1];B[2],B[3];var V=B[4],te=B[5];B[6],B[7],B[8],B[9],B[10],B[11];var we=B[12],Re=B[13];return B[14],B[15],B.length===16?[U,T,V,te,we,Re]:null},Ur={matrix:qt,matrix3d:Rr},qr={type:16,number:50,flags:In},Pn=[qr,qr],jn={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(F,B){var U=B.filter(Pi);return U.length!==2?Pn:[U[0],U[1]]}},b={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(F,B){switch(B){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},L;(function(F){F.NORMAL="normal",F.BREAK_ALL="break-all",F.KEEP_ALL="keep-all"})(L||(L={}));for(var j={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(F,B){switch(B){case"break-all":return L.BREAK_ALL;case"keep-all":return L.KEEP_ALL;case"normal":default:return L.NORMAL}}},W={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(F,B){if(B.type===20)return{auto:!0,order:0};if(mi(B))return{auto:!1,order:B.number};throw new Error("Invalid z-index number parsed")}},ae={name:"time",parse:function(F,B){if(B.type===15)switch(B.unit.toLowerCase()){case"s":return 1e3*B.number;case"ms":return B.number}throw new Error("Unsupported time type")}},de={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(F,B){return mi(B)?B.number:1}},ye={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},xe={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(F,B){return B.filter(Tn).map(function(U){switch(U.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(U){return U!==0})}},Ie={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(F,B){var U=[],T=[];return B.forEach(function(V){switch(V.type){case 20:case 0:U.push(V.value);break;case 17:U.push(V.number.toString());break;case 4:T.push(U.join(" ")),U.length=0;break}}),U.length&&T.push(U.join(" ")),T.map(function(V){return V.indexOf(" ")===-1?V:"'"+V+"'"})}},je={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},ft={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(F,B){if(mi(B))return B.number;if(Tn(B))switch(B.value){case"bold":return 700;case"normal":default:return 400}return 400}},It={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(F,B){return B.filter(Tn).map(function(U){return U.value})}},Ft={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(F,B){switch(B){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},pt=function(F,B){return(F&B)!==0},Ar={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(F,B){if(B.length===0)return[];var U=B[0];return U.type===20&&U.value==="none"?[]:B}},Vt={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(F,B){if(B.length===0)return null;var U=B[0];if(U.type===20&&U.value==="none")return null;for(var T=[],V=B.filter(Ws),te=0;te<V.length;te++){var we=V[te],Re=V[te+1];if(we.type===20){var Me=Re&&mi(Re)?Re.number:1;T.push({counter:we.value,increment:Me})}}return T}},Je={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(F,B){if(B.length===0)return[];for(var U=[],T=B.filter(Ws),V=0;V<T.length;V++){var te=T[V],we=T[V+1];if(Tn(te)&&te.value!=="none"){var Re=we&&mi(we)?we.number:0;U.push({counter:te.value,reset:Re})}}return U}},At={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(F,B){return B.filter(pi).map(function(U){return ae.parse(F,U)})}},Yt={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(F,B){if(B.length===0)return null;var U=B[0];if(U.type===20&&U.value==="none")return null;var T=[],V=B.filter(Es);if(V.length%2!==0)return null;for(var te=0;te<V.length;te+=2){var we=V[te].value,Re=V[te+1].value;T.push({open:we,close:Re})}return T}},ir=function(F,B,U){if(!F)return"";var T=F[Math.min(B,F.length-1)];return T?U?T.open:T.close:""},Wt={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(F,B){return B.length===1&&ts(B[0],"none")?[]:Si(B).map(function(U){for(var T={color:255,offsetX:Mi,offsetY:Mi,blur:Mi,spread:Mi,inset:!1},V=0,te=0;te<U.length;te++){var we=U[te];ts(we,"inset")?T.inset=!0:la(we)?(V===0?T.offsetX=we:V===1?T.offsetY=we:V===2?T.blur=we:T.spread=we,V++):T.color=Ns.parse(F,we)}return T})}},Dr={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(F,B){var U=[0,1,2],T=[];return B.filter(Tn).forEach(function(V){switch(V.value){case"stroke":T.push(1);break;case"fill":T.push(0);break;case"markers":T.push(2);break}}),U.forEach(function(V){T.indexOf(V)===-1&&T.push(V)}),T}},Qr={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},Fn={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(F,B){return pi(B)?B.number:0}},Nr=function(){function F(B,U){var T,V;this.animationDuration=hr(B,At,U.animationDuration),this.backgroundClip=hr(B,JA,U.backgroundClip),this.backgroundColor=hr(B,Da,U.backgroundColor),this.backgroundImage=hr(B,el,U.backgroundImage),this.backgroundOrigin=hr(B,Zs,U.backgroundOrigin),this.backgroundPosition=hr(B,Di,U.backgroundPosition),this.backgroundRepeat=hr(B,oo,U.backgroundRepeat),this.backgroundSize=hr(B,tl,U.backgroundSize),this.borderTopColor=hr(B,Fa,U.borderTopColor),this.borderRightColor=hr(B,Ui,U.borderRightColor),this.borderBottomColor=hr(B,PA,U.borderBottomColor),this.borderLeftColor=hr(B,MA,U.borderLeftColor),this.borderTopLeftRadius=hr(B,Vc,U.borderTopLeftRadius),this.borderTopRightRadius=hr(B,Kc,U.borderTopRightRadius),this.borderBottomRightRadius=hr(B,Gc,U.borderBottomRightRadius),this.borderBottomLeftRadius=hr(B,wo,U.borderBottomLeftRadius),this.borderTopStyle=hr(B,sn,U.borderTopStyle),this.borderRightStyle=hr(B,vn,U.borderRightStyle),this.borderBottomStyle=hr(B,rl,U.borderBottomStyle),this.borderLeftStyle=hr(B,wl,U.borderLeftStyle),this.borderTopWidth=hr(B,as,U.borderTopWidth),this.borderRightWidth=hr(B,pA,U.borderRightWidth),this.borderBottomWidth=hr(B,bo,U.borderBottomWidth),this.borderLeftWidth=hr(B,bc,U.borderLeftWidth),this.boxShadow=hr(B,Wt,U.boxShadow),this.color=hr(B,mA,U.color),this.direction=hr(B,Ji,U.direction),this.display=hr(B,ds,U.display),this.float=hr(B,ha,U.cssFloat),this.fontFamily=hr(B,Ie,U.fontFamily),this.fontSize=hr(B,je,U.fontSize),this.fontStyle=hr(B,Ft,U.fontStyle),this.fontVariant=hr(B,It,U.fontVariant),this.fontWeight=hr(B,ft,U.fontWeight),this.letterSpacing=hr(B,g,U.letterSpacing),this.lineBreak=hr(B,u,U.lineBreak),this.lineHeight=hr(B,m,U.lineHeight),this.listStyleImage=hr(B,S,U.listStyleImage),this.listStylePosition=hr(B,P,U.listStylePosition),this.listStyleType=hr(B,z,U.listStyleType),this.marginTop=hr(B,J,U.marginTop),this.marginRight=hr(B,ie,U.marginRight),this.marginBottom=hr(B,pe,U.marginBottom),this.marginLeft=hr(B,be,U.marginLeft),this.opacity=hr(B,de,U.opacity);var te=hr(B,Ve,U.overflow);this.overflowX=te[0],this.overflowY=te[te.length>1?1:0],this.overflowWrap=hr(B,Ne,U.overflowWrap),this.paddingTop=hr(B,ct,U.paddingTop),this.paddingRight=hr(B,wt,U.paddingRight),this.paddingBottom=hr(B,St,U.paddingBottom),this.paddingLeft=hr(B,We,U.paddingLeft),this.paintOrder=hr(B,Dr,U.paintOrder),this.position=hr(B,Qt,U.position),this.textAlign=hr(B,Rt,U.textAlign),this.textDecorationColor=hr(B,ye,(T=U.textDecorationColor)!==null&&T!==void 0?T:U.color),this.textDecorationLine=hr(B,xe,(V=U.textDecorationLine)!==null&&V!==void 0?V:U.textDecoration),this.textShadow=hr(B,Xt,U.textShadow),this.textTransform=hr(B,Zt,U.textTransform),this.transform=hr(B,ur,U.transform),this.transformOrigin=hr(B,jn,U.transformOrigin),this.visibility=hr(B,b,U.visibility),this.webkitTextStrokeColor=hr(B,Qr,U.webkitTextStrokeColor),this.webkitTextStrokeWidth=hr(B,Fn,U.webkitTextStrokeWidth),this.wordBreak=hr(B,j,U.wordBreak),this.zIndex=hr(B,W,U.zIndex)}return F.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},F.prototype.isTransparent=function(){return so(this.backgroundColor)},F.prototype.isTransformed=function(){return this.transform!==null},F.prototype.isPositioned=function(){return this.position!==0},F.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},F.prototype.isFloating=function(){return this.float!==0},F.prototype.isInlineLevel=function(){return pt(this.display,4)||pt(this.display,33554432)||pt(this.display,268435456)||pt(this.display,536870912)||pt(this.display,67108864)||pt(this.display,134217728)},F}(),fi=function(){function F(B,U){this.content=hr(B,Ar,U.content),this.quotes=hr(B,Yt,U.quotes)}return F}(),di=function(){function F(B,U){this.counterIncrement=hr(B,Vt,U.counterIncrement),this.counterReset=hr(B,Je,U.counterReset)}return F}(),hr=function(F,B,U){var T=new Kn,V=U!==null&&typeof U<"u"?U.toString():B.initialValue;T.write(V);var te=new Wn(T.read());switch(B.type){case 2:var we=te.parseComponentValue();return B.parse(F,Tn(we)?we.value:B.initialValue);case 0:return B.parse(F,te.parseComponentValue());case 1:return B.parse(F,te.parseComponentValues());case 4:return te.parseComponentValue();case 3:switch(B.format){case"angle":return _o.parse(F,te.parseComponentValue());case"color":return Ns.parse(F,te.parseComponentValue());case"image":return vl.parse(F,te.parseComponentValue());case"length":var Re=te.parseComponentValue();return la(Re)?Re:Mi;case"length-percentage":var Me=te.parseComponentValue();return Pi(Me)?Me:Mi;case"time":return ae.parse(F,te.parseComponentValue())}break}},zn="data-html2canvas-debug",li=function(F){var B=F.getAttribute(zn);switch(B){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},ci=function(F,B){var U=li(F);return U===1||B===U},Un=function(){function F(B,U){if(this.context=B,this.textNodes=[],this.elements=[],this.flags=0,ci(U,3))debugger;this.styles=new Nr(B,window.getComputedStyle(U,null)),_h(U)&&(this.styles.animationDuration.some(function(T){return T>0})&&(U.style.animationDuration="0s"),this.styles.transform!==null&&(U.style.transform="none")),this.bounds=_(this.context,U),ci(U,4)&&(this.flags|=16)}return F}(),Is="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",Js="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Qi=typeof Uint8Array>"u"?[]:new Uint8Array(256),ps=0;ps<Js.length;ps++)Qi[Js.charCodeAt(ps)]=ps;for(var ti=function(F){var B=F.length*.75,U=F.length,T,V=0,te,we,Re,Me;F[F.length-1]==="="&&(B--,F[F.length-2]==="="&&B--);var yt=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(B):new Array(B),mt=Array.isArray(yt)?yt:new Uint8Array(yt);for(T=0;T<U;T+=4)te=Qi[F.charCodeAt(T)],we=Qi[F.charCodeAt(T+1)],Re=Qi[F.charCodeAt(T+2)],Me=Qi[F.charCodeAt(T+3)],mt[V++]=te<<2|we>>4,mt[V++]=(we&15)<<4|Re>>2,mt[V++]=(Re&3)<<6|Me&63;return yt},os=function(F){for(var B=F.length,U=[],T=0;T<B;T+=2)U.push(F[T+1]<<8|F[T]);return U},Ts=function(F){for(var B=F.length,U=[],T=0;T<B;T+=4)U.push(F[T+3]<<24|F[T+2]<<16|F[T+1]<<8|F[T]);return U},Vi=5,Ki=6+5,Ys=2,Ao=Ki-Vi,Ci=65536>>Vi,Us=1<<Vi,xo=Us-1,lo=1024>>Vi,Bo=Ci+lo,Ho=Bo,Yi=32,qc=Ho+Yi,lh=65536>>Ki,Fu=1<<Ao,Wc=Fu-1,nl=function(F,B,U){return F.slice?F.slice(B,U):new Uint16Array(Array.prototype.slice.call(F,B,U))},Xc=function(F,B,U){return F.slice?F.slice(B,U):new Uint32Array(Array.prototype.slice.call(F,B,U))},co=function(F,B){var U=ti(F),T=Array.isArray(U)?Ts(U):new Uint32Array(U),V=Array.isArray(U)?os(U):new Uint16Array(U),te=24,we=nl(V,te/2,T[4]/2),Re=T[5]===2?nl(V,(te+T[4])/2):Xc(T,Math.ceil((te+T[4])/4));return new bl(T[0],T[1],T[2],T[3],we,Re)},bl=function(){function F(B,U,T,V,te,we){this.initialValue=B,this.errorValue=U,this.highStart=T,this.highValueIndex=V,this.index=te,this.data=we}return F.prototype.get=function(B){var U;if(B>=0){if(B<55296||B>56319&&B<=65535)return U=this.index[B>>Vi],U=(U<<Ys)+(B&xo),this.data[U];if(B<=65535)return U=this.index[Ci+(B-55296>>Vi)],U=(U<<Ys)+(B&xo),this.data[U];if(B<this.highStart)return U=qc-lh+(B>>Ki),U=this.index[U],U+=B>>Vi&Wc,U=this.index[U],U=(U<<Ys)+(B&xo),this.data[U];if(B<=1114111)return this.data[this.highValueIndex]}return this.errorValue},F}(),il="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",xl=typeof Uint8Array>"u"?[]:new Uint8Array(256),Bl=0;Bl<il.length;Bl++)xl[il.charCodeAt(Bl)]=Bl;var Jl=1,NA=2,sl=3,Bc=4,Yl=5,fa=7,$s=8,$l=9,Co=10,Su=11,ec=12,ch=13,Zc=14,Cl=15,Cc=function(F){for(var B=[],U=0,T=F.length;U<T;){var V=F.charCodeAt(U++);if(V>=55296&&V<=56319&&U<T){var te=F.charCodeAt(U++);(te&64512)===56320?B.push(((V&1023)<<10)+(te&1023)+65536):(B.push(V),U--)}else B.push(V)}return B},Iu=function(){for(var F=[],B=0;B<arguments.length;B++)F[B]=arguments[B];if(String.fromCodePoint)return String.fromCodePoint.apply(String,F);var U=F.length;if(!U)return"";for(var T=[],V=-1,te="";++V<U;){var we=F[V];we<=65535?T.push(we):(we-=65536,T.push((we>>10)+55296,we%1024+56320)),(V+1===U||T.length>16384)&&(te+=String.fromCharCode.apply(String,T),T.length=0)}return te},Ec=co(Is),Ia="×",El="÷",Jc=function(F){return Ec.get(F)},uh=function(F,B,U){var T=U-2,V=B[T],te=B[U-1],we=B[U];if(te===NA&&we===sl)return Ia;if(te===NA||te===sl||te===Bc||we===NA||we===sl||we===Bc)return El;if(te===$s&&[$s,$l,Su,ec].indexOf(we)!==-1||(te===Su||te===$l)&&(we===$l||we===Co)||(te===ec||te===Co)&&we===Co||we===ch||we===Yl||we===fa||te===Jl)return Ia;if(te===ch&&we===Zc){for(;V===Yl;)V=B[--T];if(V===Zc)return Ia}if(te===Cl&&we===Cl){for(var Re=0;V===Cl;)Re++,V=B[--T];if(Re%2===0)return Ia}return El},tc=function(F){var B=Cc(F),U=B.length,T=0,V=0,te=B.map(Jc);return{next:function(){if(T>=U)return{done:!0,value:null};for(var we=Ia;T<U&&(we=uh(B,te,++T))===Ia;);if(we!==Ia||T===U){var Re=Iu.apply(null,B.slice(V,T));return V=T,{value:Re,done:!1}}return{done:!0,value:null}}}},rc=function(F){for(var B=tc(F),U=[],T;!(T=B.next()).done;)T.value&&U.push(T.value.slice());return U},Ta=function(F){var B=123;if(F.createRange){var U=F.createRange();if(U.getBoundingClientRect){var T=F.createElement("boundtest");T.style.height=B+"px",T.style.display="block",F.body.appendChild(T),U.selectNode(T);var V=U.getBoundingClientRect(),te=Math.round(V.height);if(F.body.removeChild(T),te===B)return!0}}return!1},jA=function(F){var B=F.createElement("boundtest");B.style.width="50px",B.style.display="block",B.style.fontSize="12px",B.style.letterSpacing="0px",B.style.wordSpacing="0px",F.body.appendChild(B);var U=F.createRange();B.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var T=B.firstChild,V=E(T.data).map(function(Me){return w(Me)}),te=0,we={},Re=V.every(function(Me,yt){U.setStart(T,te),U.setEnd(T,te+Me.length);var mt=U.getBoundingClientRect();te+=Me.length;var Tt=mt.x>we.x||mt.y>we.y;return we=mt,yt===0?!0:Tt});return F.body.removeChild(B),Re},hh=function(){return typeof new Image().crossOrigin<"u"},fh=function(){return typeof new XMLHttpRequest().responseType=="string"},$h=function(F){var B=new Image,U=F.createElement("canvas"),T=U.getContext("2d");if(!T)return!1;B.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{T.drawImage(B,0,0),U.toDataURL()}catch{return!1}return!0},nc=function(F){return F[0]===0&&F[1]===255&&F[2]===0&&F[3]===255},RA=function(F){var B=F.createElement("canvas"),U=100;B.width=U,B.height=U;var T=B.getContext("2d");if(!T)return Promise.reject(!1);T.fillStyle="rgb(0, 255, 0)",T.fillRect(0,0,U,U);var V=new Image,te=B.toDataURL();V.src=te;var we=Yc(U,U,0,0,V);return T.fillStyle="red",T.fillRect(0,0,U,U),OA(we).then(function(Re){T.drawImage(Re,0,0);var Me=T.getImageData(0,0,U,U).data;T.fillStyle="red",T.fillRect(0,0,U,U);var yt=F.createElement("div");return yt.style.backgroundImage="url("+te+")",yt.style.height=U+"px",nc(Me)?OA(Yc(U,U,0,0,yt)):Promise.reject(!1)}).then(function(Re){return T.drawImage(Re,0,0),nc(T.getImageData(0,0,U,U).data)}).catch(function(){return!1})},Yc=function(F,B,U,T,V){var te="http://www.w3.org/2000/svg",we=document.createElementNS(te,"svg"),Re=document.createElementNS(te,"foreignObject");return we.setAttributeNS(null,"width",F.toString()),we.setAttributeNS(null,"height",B.toString()),Re.setAttributeNS(null,"width","100%"),Re.setAttributeNS(null,"height","100%"),Re.setAttributeNS(null,"x",U.toString()),Re.setAttributeNS(null,"y",T.toString()),Re.setAttributeNS(null,"externalResourcesRequired","true"),we.appendChild(Re),Re.appendChild(V),we},OA=function(F){return new Promise(function(B,U){var T=new Image;T.onload=function(){return B(T)},T.onerror=U,T.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(F))})},_s={get SUPPORT_RANGE_BOUNDS(){var F=Ta(document);return Object.defineProperty(_s,"SUPPORT_RANGE_BOUNDS",{value:F}),F},get SUPPORT_WORD_BREAKING(){var F=_s.SUPPORT_RANGE_BOUNDS&&jA(document);return Object.defineProperty(_s,"SUPPORT_WORD_BREAKING",{value:F}),F},get SUPPORT_SVG_DRAWING(){var F=$h(document);return Object.defineProperty(_s,"SUPPORT_SVG_DRAWING",{value:F}),F},get SUPPORT_FOREIGNOBJECT_DRAWING(){var F=typeof Array.from=="function"&&typeof window.fetch=="function"?RA(document):Promise.resolve(!1);return Object.defineProperty(_s,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:F}),F},get SUPPORT_CORS_IMAGES(){var F=hh();return Object.defineProperty(_s,"SUPPORT_CORS_IMAGES",{value:F}),F},get SUPPORT_RESPONSE_TYPE(){var F=fh();return Object.defineProperty(_s,"SUPPORT_RESPONSE_TYPE",{value:F}),F},get SUPPORT_CORS_XHR(){var F="withCredentials"in new XMLHttpRequest;return Object.defineProperty(_s,"SUPPORT_CORS_XHR",{value:F}),F},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var F=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(_s,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:F}),F}},ic=function(){function F(B,U){this.text=B,this.bounds=U}return F}(),ef=function(F,B,U,T){var V=al(B,U),te=[],we=0;return V.forEach(function(Re){if(U.textDecorationLine.length||Re.trim().length>0)if(_s.SUPPORT_RANGE_BOUNDS){var Me=$c(T,we,Re.length).getClientRects();if(Me.length>1){var yt=sc(Re),mt=0;yt.forEach(function(tr){te.push(new ic(tr,d.fromDOMRectList(F,$c(T,mt+we,tr.length).getClientRects()))),mt+=tr.length})}else te.push(new ic(Re,d.fromDOMRectList(F,Me)))}else{var Tt=T.splitText(Re.length);te.push(new ic(Re,Fc(F,T))),T=Tt}else _s.SUPPORT_RANGE_BOUNDS||(T=T.splitText(Re.length));we+=Re.length}),te},Fc=function(F,B){var U=B.ownerDocument;if(U){var T=U.createElement("html2canvaswrapper");T.appendChild(B.cloneNode(!0));var V=B.parentNode;if(V){V.replaceChild(T,B);var te=_(F,T);return T.firstChild&&V.replaceChild(T.firstChild,T),te}}return d.EMPTY},$c=function(F,B,U){var T=F.ownerDocument;if(!T)throw new Error("Node has no owner document");var V=T.createRange();return V.setStart(F,B),V.setEnd(F,B+U),V},sc=function(F){if(_s.SUPPORT_NATIVE_TEXT_SEGMENTATION){var B=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(B.segment(F)).map(function(U){return U.segment})}return rc(F)},HA=function(F,B){if(_s.SUPPORT_NATIVE_TEXT_SEGMENTATION){var U=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(U.segment(F)).map(function(T){return T.segment})}return eu(F,B)},al=function(F,B){return B.letterSpacing!==0?sc(F):HA(F,B)},gA=[32,160,4961,65792,65793,4153,4241],eu=function(F,B){for(var U=Tr(F,{lineBreak:B.lineBreak,wordBreak:B.overflowWrap==="break-word"?"break-word":B.wordBreak}),T=[],V,te=function(){if(V.value){var we=V.value.slice(),Re=E(we),Me="";Re.forEach(function(yt){gA.indexOf(yt)===-1?Me+=w(yt):(Me.length&&T.push(Me),T.push(w(yt)),Me="")}),Me.length&&T.push(Me)}};!(V=U.next()).done;)te();return T},ol=function(){function F(B,U,T){this.text=dh(U.data,T.textTransform),this.textBounds=ef(B,this.text,T,U)}return F}(),dh=function(F,B){switch(B){case 1:return F.toLowerCase();case 3:return F.replace(As,ac);case 2:return F.toUpperCase();default:return F}},As=/(^|\s|:|-|\(|\))([a-z])/g,ac=function(F,B,U){return F.length>0?B+U.toUpperCase():F},Sc=function(F){s(B,F);function B(U,T){var V=F.call(this,U,T)||this;return V.src=T.currentSrc||T.src,V.intrinsicWidth=T.naturalWidth,V.intrinsicHeight=T.naturalHeight,V.context.cache.addImage(V.src),V}return B}(Un),Tu=function(F){s(B,F);function B(U,T){var V=F.call(this,U,T)||this;return V.canvas=T,V.intrinsicWidth=T.width,V.intrinsicHeight=T.height,V}return B}(Un),Uu=function(F){s(B,F);function B(U,T){var V=F.call(this,U,T)||this,te=new XMLSerializer,we=_(U,T);return T.setAttribute("width",we.width+"px"),T.setAttribute("height",we.height+"px"),V.svg="data:image/svg+xml,"+encodeURIComponent(te.serializeToString(T)),V.intrinsicWidth=T.width.baseVal.value,V.intrinsicHeight=T.height.baseVal.value,V.context.cache.addImage(V.svg),V}return B}(Un),tu=function(F){s(B,F);function B(U,T){var V=F.call(this,U,T)||this;return V.value=T.value,V}return B}(Un),ph=function(F){s(B,F);function B(U,T){var V=F.call(this,U,T)||this;return V.start=T.start,V.reversed=typeof T.reversed=="boolean"&&T.reversed===!0,V}return B}(Un),cd=[{type:15,flags:0,unit:"px",number:3}],Lu=[{type:16,flags:0,number:50}],tf=function(F){return F.width>F.height?new d(F.left+(F.width-F.height)/2,F.top,F.height,F.height):F.width<F.height?new d(F.left,F.top+(F.height-F.width)/2,F.width,F.width):F},rf=function(F){var B=F.type===ku?new Array(F.value.length+1).join("•"):F.value;return B.length===0?F.placeholder||"":B},mh="checkbox",Qu="radio",ku="password",ud=707406591,Pu=function(F){s(B,F);function B(U,T){var V=F.call(this,U,T)||this;switch(V.type=T.type.toLowerCase(),V.checked=T.checked,V.value=rf(T),(V.type===mh||V.type===Qu)&&(V.styles.backgroundColor=3739148031,V.styles.borderTopColor=V.styles.borderRightColor=V.styles.borderBottomColor=V.styles.borderLeftColor=2779096575,V.styles.borderTopWidth=V.styles.borderRightWidth=V.styles.borderBottomWidth=V.styles.borderLeftWidth=1,V.styles.borderTopStyle=V.styles.borderRightStyle=V.styles.borderBottomStyle=V.styles.borderLeftStyle=1,V.styles.backgroundClip=[0],V.styles.backgroundOrigin=[0],V.bounds=tf(V.bounds)),V.type){case mh:V.styles.borderTopRightRadius=V.styles.borderTopLeftRadius=V.styles.borderBottomRightRadius=V.styles.borderBottomLeftRadius=cd;break;case Qu:V.styles.borderTopRightRadius=V.styles.borderTopLeftRadius=V.styles.borderBottomRightRadius=V.styles.borderBottomLeftRadius=Lu;break}return V}return B}(Un),hd=function(F){s(B,F);function B(U,T){var V=F.call(this,U,T)||this,te=T.options[T.selectedIndex||0];return V.value=te&&te.text||"",V}return B}(Un),gh=function(F){s(B,F);function B(U,T){var V=F.call(this,U,T)||this;return V.value=T.value,V}return B}(Un),yh=function(F){s(B,F);function B(U,T){var V=F.call(this,U,T)||this;V.src=T.src,V.width=parseInt(T.width,10)||0,V.height=parseInt(T.height,10)||0,V.backgroundColor=V.styles.backgroundColor;try{if(T.contentWindow&&T.contentWindow.document&&T.contentWindow.document.documentElement){V.tree=dd(U,T.contentWindow.document.documentElement);var te=T.contentWindow.document.documentElement?ua(U,getComputedStyle(T.contentWindow.document.documentElement).backgroundColor):gi.TRANSPARENT,we=T.contentWindow.document.body?ua(U,getComputedStyle(T.contentWindow.document.body).backgroundColor):gi.TRANSPARENT;V.backgroundColor=so(te)?so(we)?V.styles.backgroundColor:we:te}}catch{}return V}return B}(Un),nf=["OL","UL","MENU"],vh=function(F,B,U,T){for(var V=B.firstChild,te=void 0;V;V=te)if(te=V.nextSibling,Fl(V)&&V.data.trim().length>0)U.textNodes.push(new ol(F,V,U.styles));else if(ru(V))if(yd(V)&&V.assignedNodes)V.assignedNodes().forEach(function(Re){return vh(F,Re,U,T)});else{var we=fd(F,V);we.styles.isVisible()&&(Kp(V,we,T)?we.flags|=4:Gp(we.styles)&&(we.flags|=2),nf.indexOf(V.tagName)!==-1&&(we.flags|=8),U.elements.push(we),V.slot,V.shadowRoot?vh(F,V.shadowRoot,we,T):!bh(V)&&!sf(V)&&!xh(V)&&vh(F,V,we,T))}},fd=function(F,B){return of(B)?new Sc(F,B):md(B)?new Tu(F,B):sf(B)?new Uu(F,B):qp(B)?new tu(F,B):Wp(B)?new ph(F,B):Xp(B)?new Pu(F,B):xh(B)?new hd(F,B):bh(B)?new gh(F,B):wh(B)?new yh(F,B):new Un(F,B)},dd=function(F,B){var U=fd(F,B);return U.flags|=4,vh(F,B,U,U),U},Kp=function(F,B,U){return B.styles.isPositionedWithZIndex()||B.styles.opacity<1||B.styles.isTransformed()||af(F)&&U.styles.isTransparent()},Gp=function(F){return F.isPositioned()||F.isFloating()},Fl=function(F){return F.nodeType===Node.TEXT_NODE},ru=function(F){return F.nodeType===Node.ELEMENT_NODE},_h=function(F){return ru(F)&&typeof F.style<"u"&&!Sl(F)},Sl=function(F){return typeof F.className=="object"},qp=function(F){return F.tagName==="LI"},Wp=function(F){return F.tagName==="OL"},Xp=function(F){return F.tagName==="INPUT"},pd=function(F){return F.tagName==="HTML"},sf=function(F){return F.tagName==="svg"},af=function(F){return F.tagName==="BODY"},md=function(F){return F.tagName==="CANVAS"},gd=function(F){return F.tagName==="VIDEO"},of=function(F){return F.tagName==="IMG"},wh=function(F){return F.tagName==="IFRAME"},nu=function(F){return F.tagName==="STYLE"},Af=function(F){return F.tagName==="SCRIPT"},bh=function(F){return F.tagName==="TEXTAREA"},xh=function(F){return F.tagName==="SELECT"},yd=function(F){return F.tagName==="SLOT"},iu=function(F){return F.tagName.indexOf("-")>0},vd=function(){function F(){this.counters={}}return F.prototype.getCounterValue=function(B){var U=this.counters[B];return U&&U.length?U[U.length-1]:1},F.prototype.getCounterValues=function(B){var U=this.counters[B];return U||[]},F.prototype.pop=function(B){var U=this;B.forEach(function(T){return U.counters[T].pop()})},F.prototype.parse=function(B){var U=this,T=B.counterIncrement,V=B.counterReset,te=!0;T!==null&&T.forEach(function(Re){var Me=U.counters[Re.counter];Me&&Re.increment!==0&&(te=!1,Me.length||Me.push(1),Me[Math.max(0,Me.length-1)]+=Re.increment)});var we=[];return te&&V.forEach(function(Re){var Me=U.counters[Re.counter];we.push(Re.counter),Me||(Me=U.counters[Re.counter]=[]),Me.push(Re.reset)}),we},F}(),_d={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},wd={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},Zp={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},Jp={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},su=function(F,B,U,T,V,te){return F<B||F>U?Mu(F,V,te.length>0):T.integers.reduce(function(we,Re,Me){for(;F>=Re;)F-=Re,we+=T.values[Me];return we},"")+te},bd=function(F,B,U,T){var V="";do U||F--,V=T(F)+V,F/=B;while(F*B>=B);return V},Ls=function(F,B,U,T,V){var te=U-B+1;return(F<0?"-":"")+(bd(Math.abs(F),te,T,function(we){return w(Math.floor(we%te)+B)})+V)},Il=function(F,B,U){U===void 0&&(U=". ");var T=B.length;return bd(Math.abs(F),T,!1,function(V){return B[Math.floor(V%T)]})+U},au=1<<0,Tl=1<<1,Ul=1<<2,ou=1<<3,Ll=function(F,B,U,T,V,te){if(F<-9999||F>9999)return Mu(F,4,V.length>0);var we=Math.abs(F),Re=V;if(we===0)return B[0]+Re;for(var Me=0;we>0&&Me<=4;Me++){var yt=we%10;yt===0&&pt(te,au)&&Re!==""?Re=B[yt]+Re:yt>1||yt===1&&Me===0||yt===1&&Me===1&&pt(te,Tl)||yt===1&&Me===1&&pt(te,Ul)&&F>100||yt===1&&Me>1&&pt(te,ou)?Re=B[yt]+(Me>0?U[Me-1]:"")+Re:yt===1&&Me>0&&(Re=U[Me-1]+Re),we=Math.floor(we/10)}return(F<0?T:"")+Re},xd="十百千萬",Bd="拾佰仟萬",lf="マイナス",cf="마이너스",Mu=function(F,B,U){var T=U?". ":"",V=U?"、":"",te=U?", ":"",we=U?" ":"";switch(B){case 0:return"•"+we;case 1:return"◦"+we;case 2:return"◾"+we;case 5:var Re=Ls(F,48,57,!0,T);return Re.length<4?"0"+Re:Re;case 4:return Il(F,"〇一二三四五六七八九",V);case 6:return su(F,1,3999,_d,3,T).toLowerCase();case 7:return su(F,1,3999,_d,3,T);case 8:return Ls(F,945,969,!1,T);case 9:return Ls(F,97,122,!1,T);case 10:return Ls(F,65,90,!1,T);case 11:return Ls(F,1632,1641,!0,T);case 12:case 49:return su(F,1,9999,wd,3,T);case 35:return su(F,1,9999,wd,3,T).toLowerCase();case 13:return Ls(F,2534,2543,!0,T);case 14:case 30:return Ls(F,6112,6121,!0,T);case 15:return Il(F,"子丑寅卯辰巳午未申酉戌亥",V);case 16:return Il(F,"甲乙丙丁戊己庚辛壬癸",V);case 17:case 48:return Ll(F,"零一二三四五六七八九",xd,"負",V,Tl|Ul|ou);case 47:return Ll(F,"零壹貳參肆伍陸柒捌玖",Bd,"負",V,au|Tl|Ul|ou);case 42:return Ll(F,"零一二三四五六七八九",xd,"负",V,Tl|Ul|ou);case 41:return Ll(F,"零壹贰叁肆伍陆柒捌玖",Bd,"负",V,au|Tl|Ul|ou);case 26:return Ll(F,"〇一二三四五六七八九","十百千万",lf,V,0);case 25:return Ll(F,"零壱弐参四伍六七八九","拾百千万",lf,V,au|Tl|Ul);case 31:return Ll(F,"영일이삼사오육칠팔구","십백천만",cf,te,au|Tl|Ul);case 33:return Ll(F,"零一二三四五六七八九","十百千萬",cf,te,0);case 32:return Ll(F,"零壹貳參四五六七八九","拾百千",cf,te,au|Tl|Ul);case 18:return Ls(F,2406,2415,!0,T);case 20:return su(F,1,19999,Jp,3,T);case 21:return Ls(F,2790,2799,!0,T);case 22:return Ls(F,2662,2671,!0,T);case 22:return su(F,1,10999,Zp,3,T);case 23:return Il(F,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return Il(F,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return Ls(F,3302,3311,!0,T);case 28:return Il(F,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",V);case 29:return Il(F,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",V);case 34:return Ls(F,3792,3801,!0,T);case 37:return Ls(F,6160,6169,!0,T);case 38:return Ls(F,4160,4169,!0,T);case 39:return Ls(F,2918,2927,!0,T);case 40:return Ls(F,1776,1785,!0,T);case 43:return Ls(F,3046,3055,!0,T);case 44:return Ls(F,3174,3183,!0,T);case 45:return Ls(F,3664,3673,!0,T);case 46:return Ls(F,3872,3881,!0,T);case 3:default:return Ls(F,48,57,!0,T)}},Au="data-html2canvas-ignore",Os=function(){function F(B,U,T){if(this.context=B,this.options=T,this.scrolledElements=[],this.referenceElement=U,this.counters=new vd,this.quoteDepth=0,!U.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(U.ownerDocument.documentElement,!1)}return F.prototype.toIFrame=function(B,U){var T=this,V=Cd(B,U);if(!V.contentWindow)return Promise.reject("Unable to find iframe window");var te=B.defaultView.pageXOffset,we=B.defaultView.pageYOffset,Re=V.contentWindow,Me=Re.document,yt=oc(V).then(function(){return c(T,void 0,void 0,function(){var mt,Tt;return h(this,function(tr){switch(tr.label){case 0:return this.scrolledElements.forEach(lu),Re&&(Re.scrollTo(U.left,U.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(Re.scrollY!==U.top||Re.scrollX!==U.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(Re.scrollX-U.left,Re.scrollY-U.top,0,0))),mt=this.options.onclone,Tt=this.clonedReferenceElement,typeof Tt>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:Me.fonts&&Me.fonts.ready?[4,Me.fonts.ready]:[3,2];case 1:tr.sent(),tr.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,Li(Me)]:[3,4];case 3:tr.sent(),tr.label=4;case 4:return typeof mt=="function"?[2,Promise.resolve().then(function(){return mt(Me,Tt)}).then(function(){return V})]:[2,V]}})})});return Me.open(),Me.write(Fd(document.doctype)+"<html></html>"),Ql(this.referenceElement.ownerDocument,te,we),Me.replaceChild(Me.adoptNode(this.documentElement),Me.documentElement),Me.close(),yt},F.prototype.createElementClone=function(B){if(ci(B,2))debugger;if(md(B))return this.createCanvasClone(B);if(gd(B))return this.createVideoClone(B);if(nu(B))return this.createStyleClone(B);var U=B.cloneNode(!1);return of(U)&&(of(B)&&B.currentSrc&&B.currentSrc!==B.src&&(U.src=B.currentSrc,U.srcset=""),U.loading==="lazy"&&(U.loading="eager")),iu(U)?this.createCustomElementClone(U):U},F.prototype.createCustomElementClone=function(B){var U=document.createElement("html2canvascustomelement");return Bh(B.style,U),U},F.prototype.createStyleClone=function(B){try{var U=B.sheet;if(U&&U.cssRules){var T=[].slice.call(U.cssRules,0).reduce(function(te,we){return we&&typeof we.cssText=="string"?te+we.cssText:te},""),V=B.cloneNode(!1);return V.textContent=T,V}}catch(te){if(this.context.logger.error("Unable to access cssRules property",te),te.name!=="SecurityError")throw te}return B.cloneNode(!1)},F.prototype.createCanvasClone=function(B){var U;if(this.options.inlineImages&&B.ownerDocument){var T=B.ownerDocument.createElement("img");try{return T.src=B.toDataURL(),T}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",B)}}var V=B.cloneNode(!1);try{V.width=B.width,V.height=B.height;var te=B.getContext("2d"),we=V.getContext("2d");if(we)if(!this.options.allowTaint&&te)we.putImageData(te.getImageData(0,0,B.width,B.height),0,0);else{var Re=(U=B.getContext("webgl2"))!==null&&U!==void 0?U:B.getContext("webgl");if(Re){var Me=Re.getContextAttributes();(Me==null?void 0:Me.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",B)}we.drawImage(B,0,0)}return V}catch{this.context.logger.info("Unable to clone canvas as it is tainted",B)}return V},F.prototype.createVideoClone=function(B){var U=B.ownerDocument.createElement("canvas");U.width=B.offsetWidth,U.height=B.offsetHeight;var T=U.getContext("2d");try{return T&&(T.drawImage(B,0,0,U.width,U.height),this.options.allowTaint||T.getImageData(0,0,U.width,U.height)),U}catch{this.context.logger.info("Unable to clone video as it is tainted",B)}var V=B.ownerDocument.createElement("canvas");return V.width=B.offsetWidth,V.height=B.offsetHeight,V},F.prototype.appendChildNode=function(B,U,T){(!ru(U)||!Af(U)&&!U.hasAttribute(Au)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(U)))&&(!this.options.copyStyles||!ru(U)||!nu(U))&&B.appendChild(this.cloneNode(U,T))},F.prototype.cloneChildNodes=function(B,U,T){for(var V=this,te=B.shadowRoot?B.shadowRoot.firstChild:B.firstChild;te;te=te.nextSibling)if(ru(te)&&yd(te)&&typeof te.assignedNodes=="function"){var we=te.assignedNodes();we.length&&we.forEach(function(Re){return V.appendChildNode(U,Re,T)})}else this.appendChildNode(U,te,T)},F.prototype.cloneNode=function(B,U){if(Fl(B))return document.createTextNode(B.data);if(!B.ownerDocument)return B.cloneNode(!1);var T=B.ownerDocument.defaultView;if(T&&ru(B)&&(_h(B)||Sl(B))){var V=this.createElementClone(B);V.style.transitionProperty="none";var te=T.getComputedStyle(B),we=T.getComputedStyle(B,":before"),Re=T.getComputedStyle(B,":after");this.referenceElement===B&&_h(V)&&(this.clonedReferenceElement=V),af(V)&&$p(V);var Me=this.counters.parse(new di(this.context,te)),yt=this.resolvePseudoContent(B,V,we,Ic.BEFORE);iu(B)&&(U=!0),gd(B)||this.cloneChildNodes(B,V,U),yt&&V.insertBefore(yt,V.firstChild);var mt=this.resolvePseudoContent(B,V,Re,Ic.AFTER);return mt&&V.appendChild(mt),this.counters.pop(Me),(te&&(this.options.copyStyles||Sl(B))&&!wh(B)||U)&&Bh(te,V),(B.scrollTop!==0||B.scrollLeft!==0)&&this.scrolledElements.push([V,B.scrollLeft,B.scrollTop]),(bh(B)||xh(B))&&(bh(V)||xh(V))&&(V.value=B.value),V}return B.cloneNode(!1)},F.prototype.resolvePseudoContent=function(B,U,T,V){var te=this;if(T){var we=T.content,Re=U.ownerDocument;if(!(!Re||!we||we==="none"||we==="-moz-alt-content"||T.display==="none")){this.counters.parse(new di(this.context,T));var Me=new fi(this.context,T),yt=Re.createElement("html2canvaspseudoelement");Bh(T,yt),Me.content.forEach(function(Tt){if(Tt.type===0)yt.appendChild(Re.createTextNode(Tt.value));else if(Tt.type===22){var tr=Re.createElement("img");tr.src=Tt.value,tr.style.opacity="1",yt.appendChild(tr)}else if(Tt.type===18){if(Tt.name==="attr"){var an=Tt.values.filter(Tn);an.length&&yt.appendChild(Re.createTextNode(B.getAttribute(an[0].value)||""))}else if(Tt.name==="counter"){var kr=Tt.values.filter(rs),Jr=kr[0],Xn=kr[1];if(Jr&&Tn(Jr)){var gn=te.counters.getCounterValue(Jr.value),cn=Xn&&Tn(Xn)?z.parse(te.context,Xn.value):3;yt.appendChild(Re.createTextNode(Mu(gn,cn,!1)))}}else if(Tt.name==="counters"){var Fi=Tt.values.filter(rs),Jr=Fi[0],Zn=Fi[1],Xn=Fi[2];if(Jr&&Tn(Jr)){var Rn=te.counters.getCounterValues(Jr.value),zr=Xn&&Tn(Xn)?z.parse(te.context,Xn.value):3,ii=Zn&&Zn.type===0?Zn.value:"",yi=Rn.map(function(uo){return Mu(uo,zr,!1)}).join(ii);yt.appendChild(Re.createTextNode(yi))}}}else if(Tt.type===20)switch(Tt.value){case"open-quote":yt.appendChild(Re.createTextNode(ir(Me.quotes,te.quoteDepth++,!0)));break;case"close-quote":yt.appendChild(Re.createTextNode(ir(Me.quotes,--te.quoteDepth,!1)));break;default:yt.appendChild(Re.createTextNode(Tt.value))}}),yt.className=hf+" "+ff;var mt=V===Ic.BEFORE?" "+hf:" "+ff;return Sl(U)?U.className.baseValue+=mt:U.className+=mt,yt}}},F.destroy=function(B){return B.parentNode?(B.parentNode.removeChild(B),!0):!1},F}(),Ic;(function(F){F[F.BEFORE=0]="BEFORE",F[F.AFTER=1]="AFTER"})(Ic||(Ic={}));var Cd=function(F,B){var U=F.createElement("iframe");return U.className="html2canvas-container",U.style.visibility="hidden",U.style.position="fixed",U.style.left="-10000px",U.style.top="0px",U.style.border="0",U.width=B.width.toString(),U.height=B.height.toString(),U.scrolling="no",U.setAttribute(Au,"true"),F.body.appendChild(U),U},Ed=function(F){return new Promise(function(B){if(F.complete){B();return}if(!F.src){B();return}F.onload=B,F.onerror=B})},Li=function(F){return Promise.all([].slice.call(F.images,0).map(Ed))},oc=function(F){return new Promise(function(B,U){var T=F.contentWindow;if(!T)return U("No window assigned for iframe");var V=T.document;T.onload=F.onload=function(){T.onload=F.onload=null;var te=setInterval(function(){V.body.childNodes.length>0&&V.readyState==="complete"&&(clearInterval(te),B(F))},50)}})},uf=["all","d","content"],Bh=function(F,B){for(var U=F.length-1;U>=0;U--){var T=F.item(U);uf.indexOf(T)===-1&&B.style.setProperty(T,F.getPropertyValue(T))}return B},Fd=function(F){var B="";return F&&(B+="<!DOCTYPE ",F.name&&(B+=F.name),F.internalSubset&&(B+=F.internalSubset),F.publicId&&(B+='"'+F.publicId+'"'),F.systemId&&(B+='"'+F.systemId+'"'),B+=">"),B},Ql=function(F,B,U){F&&F.defaultView&&(B!==F.defaultView.pageXOffset||U!==F.defaultView.pageYOffset)&&F.defaultView.scrollTo(B,U)},lu=function(F){var B=F[0],U=F[1],T=F[2];B.scrollLeft=U,B.scrollTop=T},Sd=":before",Yp=":after",hf="___html2canvas___pseudoelement_before",ff="___html2canvas___pseudoelement_after",Id=`{
    content: "" !important;
    display: none !important;
}`,$p=function(F){em(F,"."+hf+Sd+Id+`
         .`+ff+Yp+Id)},em=function(F,B){var U=F.ownerDocument;if(U){var T=U.createElement("style");T.textContent=B,F.appendChild(T)}},Td=function(){function F(){}return F.getOrigin=function(B){var U=F._link;return U?(U.href=B,U.href=U.href,U.protocol+U.hostname+U.port):"about:blank"},F.isSameOrigin=function(B){return F.getOrigin(B)===F._origin},F.setContext=function(B){F._link=B.document.createElement("a"),F._origin=F.getOrigin(B.location.href)},F._origin="about:blank",F}(),tm=function(){function F(B,U){this.context=B,this._options=U,this._cache={}}return F.prototype.addImage=function(B){var U=Promise.resolve();return this.has(B)||(pf(B)||Ud(B))&&(this._cache[B]=this.loadImage(B)).catch(function(){}),U},F.prototype.match=function(B){return this._cache[B]},F.prototype.loadImage=function(B){return c(this,void 0,void 0,function(){var U,T,V,te,we=this;return h(this,function(Re){switch(Re.label){case 0:return U=Td.isSameOrigin(B),T=!df(B)&&this._options.useCORS===!0&&_s.SUPPORT_CORS_IMAGES&&!U,V=!df(B)&&!U&&!pf(B)&&typeof this._options.proxy=="string"&&_s.SUPPORT_CORS_XHR&&!T,!U&&this._options.allowTaint===!1&&!df(B)&&!pf(B)&&!V&&!T?[2]:(te=B,V?[4,this.proxy(te)]:[3,2]);case 1:te=Re.sent(),Re.label=2;case 2:return this.context.logger.debug("Added image "+B.substring(0,256)),[4,new Promise(function(Me,yt){var mt=new Image;mt.onload=function(){return Me(mt)},mt.onerror=yt,(nm(te)||T)&&(mt.crossOrigin="anonymous"),mt.src=te,mt.complete===!0&&setTimeout(function(){return Me(mt)},500),we._options.imageTimeout>0&&setTimeout(function(){return yt("Timed out ("+we._options.imageTimeout+"ms) loading image")},we._options.imageTimeout)})];case 3:return[2,Re.sent()]}})})},F.prototype.has=function(B){return typeof this._cache[B]<"u"},F.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},F.prototype.proxy=function(B){var U=this,T=this._options.proxy;if(!T)throw new Error("No proxy defined");var V=B.substring(0,256);return new Promise(function(te,we){var Re=_s.SUPPORT_RESPONSE_TYPE?"blob":"text",Me=new XMLHttpRequest;Me.onload=function(){if(Me.status===200)if(Re==="text")te(Me.response);else{var Tt=new FileReader;Tt.addEventListener("load",function(){return te(Tt.result)},!1),Tt.addEventListener("error",function(tr){return we(tr)},!1),Tt.readAsDataURL(Me.response)}else we("Failed to proxy resource "+V+" with status code "+Me.status)},Me.onerror=we;var yt=T.indexOf("?")>-1?"&":"?";if(Me.open("GET",""+T+yt+"url="+encodeURIComponent(B)+"&responseType="+Re),Re!=="text"&&Me instanceof XMLHttpRequest&&(Me.responseType=Re),U._options.imageTimeout){var mt=U._options.imageTimeout;Me.timeout=mt,Me.ontimeout=function(){return we("Timed out ("+mt+"ms) proxying "+V)}}Me.send()})},F}(),rm=/^data:image\/svg\+xml/i,Ch=/^data:image\/.*;base64,/i,cu=/^data:image\/.*/i,Ud=function(F){return _s.SUPPORT_SVG_DRAWING||!Ld(F)},df=function(F){return cu.test(F)},nm=function(F){return Ch.test(F)},pf=function(F){return F.substr(0,4)==="blob"},Ld=function(F){return F.substr(-3).toLowerCase()==="svg"||rm.test(F)},rn=function(){function F(B,U){this.type=0,this.x=B,this.y=U}return F.prototype.add=function(B,U){return new F(this.x+B,this.y+U)},F}(),Tc=function(F,B,U){return new rn(F.x+(B.x-F.x)*U,F.y+(B.y-F.y)*U)},Uc=function(){function F(B,U,T,V){this.type=1,this.start=B,this.startControl=U,this.endControl=T,this.end=V}return F.prototype.subdivide=function(B,U){var T=Tc(this.start,this.startControl,B),V=Tc(this.startControl,this.endControl,B),te=Tc(this.endControl,this.end,B),we=Tc(T,V,B),Re=Tc(V,te,B),Me=Tc(we,Re,B);return U?new F(this.start,T,we,Me):new F(Me,Re,te,this.end)},F.prototype.add=function(B,U){return new F(this.start.add(B,U),this.startControl.add(B,U),this.endControl.add(B,U),this.end.add(B,U))},F.prototype.reverse=function(){return new F(this.end,this.endControl,this.startControl,this.start)},F}(),Oa=function(F){return F.type===1},uu=function(){function F(B){var U=B.styles,T=B.bounds,V=ns(U.borderTopLeftRadius,T.width,T.height),te=V[0],we=V[1],Re=ns(U.borderTopRightRadius,T.width,T.height),Me=Re[0],yt=Re[1],mt=ns(U.borderBottomRightRadius,T.width,T.height),Tt=mt[0],tr=mt[1],an=ns(U.borderBottomLeftRadius,T.width,T.height),kr=an[0],Jr=an[1],Xn=[];Xn.push((te+Me)/T.width),Xn.push((kr+Tt)/T.width),Xn.push((we+Jr)/T.height),Xn.push((yt+tr)/T.height);var gn=Math.max.apply(Math,Xn);gn>1&&(te/=gn,we/=gn,Me/=gn,yt/=gn,Tt/=gn,tr/=gn,kr/=gn,Jr/=gn);var cn=T.width-Me,Fi=T.height-tr,Zn=T.width-Tt,Rn=T.height-Jr,zr=U.borderTopWidth,ii=U.borderRightWidth,yi=U.borderBottomWidth,On=U.borderLeftWidth,Ps=hi(U.paddingTop,B.bounds.width),uo=hi(U.paddingRight,B.bounds.width),Eo=hi(U.paddingBottom,B.bounds.width),Ni=hi(U.paddingLeft,B.bounds.width);this.topLeftBorderDoubleOuterBox=te>0||we>0?Gi(T.left+On/3,T.top+zr/3,te-On/3,we-zr/3,Ei.TOP_LEFT):new rn(T.left+On/3,T.top+zr/3),this.topRightBorderDoubleOuterBox=te>0||we>0?Gi(T.left+cn,T.top+zr/3,Me-ii/3,yt-zr/3,Ei.TOP_RIGHT):new rn(T.left+T.width-ii/3,T.top+zr/3),this.bottomRightBorderDoubleOuterBox=Tt>0||tr>0?Gi(T.left+Zn,T.top+Fi,Tt-ii/3,tr-yi/3,Ei.BOTTOM_RIGHT):new rn(T.left+T.width-ii/3,T.top+T.height-yi/3),this.bottomLeftBorderDoubleOuterBox=kr>0||Jr>0?Gi(T.left+On/3,T.top+Rn,kr-On/3,Jr-yi/3,Ei.BOTTOM_LEFT):new rn(T.left+On/3,T.top+T.height-yi/3),this.topLeftBorderDoubleInnerBox=te>0||we>0?Gi(T.left+On*2/3,T.top+zr*2/3,te-On*2/3,we-zr*2/3,Ei.TOP_LEFT):new rn(T.left+On*2/3,T.top+zr*2/3),this.topRightBorderDoubleInnerBox=te>0||we>0?Gi(T.left+cn,T.top+zr*2/3,Me-ii*2/3,yt-zr*2/3,Ei.TOP_RIGHT):new rn(T.left+T.width-ii*2/3,T.top+zr*2/3),this.bottomRightBorderDoubleInnerBox=Tt>0||tr>0?Gi(T.left+Zn,T.top+Fi,Tt-ii*2/3,tr-yi*2/3,Ei.BOTTOM_RIGHT):new rn(T.left+T.width-ii*2/3,T.top+T.height-yi*2/3),this.bottomLeftBorderDoubleInnerBox=kr>0||Jr>0?Gi(T.left+On*2/3,T.top+Rn,kr-On*2/3,Jr-yi*2/3,Ei.BOTTOM_LEFT):new rn(T.left+On*2/3,T.top+T.height-yi*2/3),this.topLeftBorderStroke=te>0||we>0?Gi(T.left+On/2,T.top+zr/2,te-On/2,we-zr/2,Ei.TOP_LEFT):new rn(T.left+On/2,T.top+zr/2),this.topRightBorderStroke=te>0||we>0?Gi(T.left+cn,T.top+zr/2,Me-ii/2,yt-zr/2,Ei.TOP_RIGHT):new rn(T.left+T.width-ii/2,T.top+zr/2),this.bottomRightBorderStroke=Tt>0||tr>0?Gi(T.left+Zn,T.top+Fi,Tt-ii/2,tr-yi/2,Ei.BOTTOM_RIGHT):new rn(T.left+T.width-ii/2,T.top+T.height-yi/2),this.bottomLeftBorderStroke=kr>0||Jr>0?Gi(T.left+On/2,T.top+Rn,kr-On/2,Jr-yi/2,Ei.BOTTOM_LEFT):new rn(T.left+On/2,T.top+T.height-yi/2),this.topLeftBorderBox=te>0||we>0?Gi(T.left,T.top,te,we,Ei.TOP_LEFT):new rn(T.left,T.top),this.topRightBorderBox=Me>0||yt>0?Gi(T.left+cn,T.top,Me,yt,Ei.TOP_RIGHT):new rn(T.left+T.width,T.top),this.bottomRightBorderBox=Tt>0||tr>0?Gi(T.left+Zn,T.top+Fi,Tt,tr,Ei.BOTTOM_RIGHT):new rn(T.left+T.width,T.top+T.height),this.bottomLeftBorderBox=kr>0||Jr>0?Gi(T.left,T.top+Rn,kr,Jr,Ei.BOTTOM_LEFT):new rn(T.left,T.top+T.height),this.topLeftPaddingBox=te>0||we>0?Gi(T.left+On,T.top+zr,Math.max(0,te-On),Math.max(0,we-zr),Ei.TOP_LEFT):new rn(T.left+On,T.top+zr),this.topRightPaddingBox=Me>0||yt>0?Gi(T.left+Math.min(cn,T.width-ii),T.top+zr,cn>T.width+ii?0:Math.max(0,Me-ii),Math.max(0,yt-zr),Ei.TOP_RIGHT):new rn(T.left+T.width-ii,T.top+zr),this.bottomRightPaddingBox=Tt>0||tr>0?Gi(T.left+Math.min(Zn,T.width-On),T.top+Math.min(Fi,T.height-yi),Math.max(0,Tt-ii),Math.max(0,tr-yi),Ei.BOTTOM_RIGHT):new rn(T.left+T.width-ii,T.top+T.height-yi),this.bottomLeftPaddingBox=kr>0||Jr>0?Gi(T.left+On,T.top+Math.min(Rn,T.height-yi),Math.max(0,kr-On),Math.max(0,Jr-yi),Ei.BOTTOM_LEFT):new rn(T.left+On,T.top+T.height-yi),this.topLeftContentBox=te>0||we>0?Gi(T.left+On+Ni,T.top+zr+Ps,Math.max(0,te-(On+Ni)),Math.max(0,we-(zr+Ps)),Ei.TOP_LEFT):new rn(T.left+On+Ni,T.top+zr+Ps),this.topRightContentBox=Me>0||yt>0?Gi(T.left+Math.min(cn,T.width+On+Ni),T.top+zr+Ps,cn>T.width+On+Ni?0:Me-On+Ni,yt-(zr+Ps),Ei.TOP_RIGHT):new rn(T.left+T.width-(ii+uo),T.top+zr+Ps),this.bottomRightContentBox=Tt>0||tr>0?Gi(T.left+Math.min(Zn,T.width-(On+Ni)),T.top+Math.min(Fi,T.height+zr+Ps),Math.max(0,Tt-(ii+uo)),tr-(yi+Eo),Ei.BOTTOM_RIGHT):new rn(T.left+T.width-(ii+uo),T.top+T.height-(yi+Eo)),this.bottomLeftContentBox=kr>0||Jr>0?Gi(T.left+On+Ni,T.top+Rn,Math.max(0,kr-(On+Ni)),Jr-(yi+Eo),Ei.BOTTOM_LEFT):new rn(T.left+On+Ni,T.top+T.height-(yi+Eo))}return F}(),Ei;(function(F){F[F.TOP_LEFT=0]="TOP_LEFT",F[F.TOP_RIGHT=1]="TOP_RIGHT",F[F.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",F[F.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Ei||(Ei={}));var Gi=function(F,B,U,T,V){var te=4*((Math.sqrt(2)-1)/3),we=U*te,Re=T*te,Me=F+U,yt=B+T;switch(V){case Ei.TOP_LEFT:return new Uc(new rn(F,yt),new rn(F,yt-Re),new rn(Me-we,B),new rn(Me,B));case Ei.TOP_RIGHT:return new Uc(new rn(F,B),new rn(F+we,B),new rn(Me,yt-Re),new rn(Me,yt));case Ei.BOTTOM_RIGHT:return new Uc(new rn(Me,B),new rn(Me,B+Re),new rn(F+we,yt),new rn(F,yt));case Ei.BOTTOM_LEFT:default:return new Uc(new rn(Me,yt),new rn(Me-we,yt),new rn(F,B+Re),new rn(F,B))}},Eh=function(F){return[F.topLeftBorderBox,F.topRightBorderBox,F.bottomRightBorderBox,F.bottomLeftBorderBox]},Qd=function(F){return[F.topLeftContentBox,F.topRightContentBox,F.bottomRightContentBox,F.bottomLeftContentBox]},Du=function(F){return[F.topLeftPaddingBox,F.topRightPaddingBox,F.bottomRightPaddingBox,F.bottomLeftPaddingBox]},im=function(){function F(B,U,T){this.offsetX=B,this.offsetY=U,this.matrix=T,this.type=0,this.target=6}return F}(),Nu=function(){function F(B,U){this.path=B,this.target=U,this.type=1}return F}(),kd=function(){function F(B){this.opacity=B,this.type=2,this.target=6}return F}(),mf=function(F){return F.type===0},Fh=function(F){return F.type===1},sm=function(F){return F.type===2},Pd=function(F,B){return F.length===B.length?F.some(function(U,T){return U===B[T]}):!1},Md=function(F,B,U,T,V){return F.map(function(te,we){switch(we){case 0:return te.add(B,U);case 1:return te.add(B+T,U);case 2:return te.add(B+T,U+V);case 3:return te.add(B,U+V)}return te})},Al=function(){function F(B){this.element=B,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return F}(),gf=function(){function F(B,U){if(this.container=B,this.parent=U,this.effects=[],this.curves=new uu(this.container),this.container.styles.opacity<1&&this.effects.push(new kd(this.container.styles.opacity)),this.container.styles.transform!==null){var T=this.container.bounds.left+this.container.styles.transformOrigin[0].number,V=this.container.bounds.top+this.container.styles.transformOrigin[1].number,te=this.container.styles.transform;this.effects.push(new im(T,V,te))}if(this.container.styles.overflowX!==0){var we=Eh(this.curves),Re=Du(this.curves);Pd(we,Re)?this.effects.push(new Nu(we,6)):(this.effects.push(new Nu(we,2)),this.effects.push(new Nu(Re,4)))}}return F.prototype.getEffects=function(B){for(var U=[2,3].indexOf(this.container.styles.position)===-1,T=this.parent,V=this.effects.slice(0);T;){var te=T.effects.filter(function(Me){return!Fh(Me)});if(U||T.container.styles.position!==0||!T.parent){if(V.unshift.apply(V,te),U=[2,3].indexOf(T.container.styles.position)===-1,T.container.styles.overflowX!==0){var we=Eh(T.curves),Re=Du(T.curves);Pd(we,Re)||V.unshift(new Nu(Re,6))}}else V.unshift.apply(V,te);T=T.parent}return V.filter(function(Me){return pt(Me.target,B)})},F}(),ll=function(F,B,U,T){F.container.elements.forEach(function(V){var te=pt(V.flags,4),we=pt(V.flags,2),Re=new gf(V,F);pt(V.styles.display,2048)&&T.push(Re);var Me=pt(V.flags,8)?[]:T;if(te||we){var yt=te||V.styles.isPositioned()?U:B,mt=new Al(Re);if(V.styles.isPositioned()||V.styles.opacity<1||V.styles.isTransformed()){var Tt=V.styles.zIndex.order;if(Tt<0){var tr=0;yt.negativeZIndex.some(function(kr,Jr){return Tt>kr.element.container.styles.zIndex.order?(tr=Jr,!1):tr>0}),yt.negativeZIndex.splice(tr,0,mt)}else if(Tt>0){var an=0;yt.positiveZIndex.some(function(kr,Jr){return Tt>=kr.element.container.styles.zIndex.order?(an=Jr+1,!1):an>0}),yt.positiveZIndex.splice(an,0,mt)}else yt.zeroOrAutoZIndexOrTransformedOrOpacity.push(mt)}else V.styles.isFloating()?yt.nonPositionedFloats.push(mt):yt.nonPositionedInlineLevel.push(mt);ll(Re,mt,te?mt:U,Me)}else V.styles.isInlineLevel()?B.inlineLevel.push(Re):B.nonInlineLevel.push(Re),ll(Re,B,U,Me);pt(V.flags,8)&&yf(V,Me)})},yf=function(F,B){for(var U=F instanceof ph?F.start:1,T=F instanceof ph?F.reversed:!1,V=0;V<B.length;V++){var te=B[V];te.container instanceof tu&&typeof te.container.value=="number"&&te.container.value!==0&&(U=te.container.value),te.listValue=Mu(U,te.container.styles.listStyleType,!0),U+=T?-1:1}},Dd=function(F){var B=new gf(F,null),U=new Al(B),T=[];return ll(B,U,U,T),yf(B.container,T),U},vf=function(F,B){switch(B){case 0:return zo(F.topLeftBorderBox,F.topLeftPaddingBox,F.topRightBorderBox,F.topRightPaddingBox);case 1:return zo(F.topRightBorderBox,F.topRightPaddingBox,F.bottomRightBorderBox,F.bottomRightPaddingBox);case 2:return zo(F.bottomRightBorderBox,F.bottomRightPaddingBox,F.bottomLeftBorderBox,F.bottomLeftPaddingBox);case 3:default:return zo(F.bottomLeftBorderBox,F.bottomLeftPaddingBox,F.topLeftBorderBox,F.topLeftPaddingBox)}},Nd=function(F,B){switch(B){case 0:return zo(F.topLeftBorderBox,F.topLeftBorderDoubleOuterBox,F.topRightBorderBox,F.topRightBorderDoubleOuterBox);case 1:return zo(F.topRightBorderBox,F.topRightBorderDoubleOuterBox,F.bottomRightBorderBox,F.bottomRightBorderDoubleOuterBox);case 2:return zo(F.bottomRightBorderBox,F.bottomRightBorderDoubleOuterBox,F.bottomLeftBorderBox,F.bottomLeftBorderDoubleOuterBox);case 3:default:return zo(F.bottomLeftBorderBox,F.bottomLeftBorderDoubleOuterBox,F.topLeftBorderBox,F.topLeftBorderDoubleOuterBox)}},am=function(F,B){switch(B){case 0:return zo(F.topLeftBorderDoubleInnerBox,F.topLeftPaddingBox,F.topRightBorderDoubleInnerBox,F.topRightPaddingBox);case 1:return zo(F.topRightBorderDoubleInnerBox,F.topRightPaddingBox,F.bottomRightBorderDoubleInnerBox,F.bottomRightPaddingBox);case 2:return zo(F.bottomRightBorderDoubleInnerBox,F.bottomRightPaddingBox,F.bottomLeftBorderDoubleInnerBox,F.bottomLeftPaddingBox);case 3:default:return zo(F.bottomLeftBorderDoubleInnerBox,F.bottomLeftPaddingBox,F.topLeftBorderDoubleInnerBox,F.topLeftPaddingBox)}},om=function(F,B){switch(B){case 0:return ju(F.topLeftBorderStroke,F.topRightBorderStroke);case 1:return ju(F.topRightBorderStroke,F.bottomRightBorderStroke);case 2:return ju(F.bottomRightBorderStroke,F.bottomLeftBorderStroke);case 3:default:return ju(F.bottomLeftBorderStroke,F.topLeftBorderStroke)}},ju=function(F,B){var U=[];return Oa(F)?U.push(F.subdivide(.5,!1)):U.push(F),Oa(B)?U.push(B.subdivide(.5,!0)):U.push(B),U},zo=function(F,B,U,T){var V=[];return Oa(F)?V.push(F.subdivide(.5,!1)):V.push(F),Oa(U)?V.push(U.subdivide(.5,!0)):V.push(U),Oa(T)?V.push(T.subdivide(.5,!0).reverse()):V.push(T),Oa(B)?V.push(B.subdivide(.5,!1).reverse()):V.push(B),V},_f=function(F){var B=F.bounds,U=F.styles;return B.add(U.borderLeftWidth,U.borderTopWidth,-(U.borderRightWidth+U.borderLeftWidth),-(U.borderTopWidth+U.borderBottomWidth))},Lc=function(F){var B=F.styles,U=F.bounds,T=hi(B.paddingLeft,U.width),V=hi(B.paddingRight,U.width),te=hi(B.paddingTop,U.width),we=hi(B.paddingBottom,U.width);return U.add(T+B.borderLeftWidth,te+B.borderTopWidth,-(B.borderRightWidth+B.borderLeftWidth+T+V),-(B.borderTopWidth+B.borderBottomWidth+te+we))},jd=function(F,B){return F===0?B.bounds:F===2?Lc(B):_f(B)},Sh=function(F,B){return F===0?B.bounds:F===2?Lc(B):_f(B)},hu=function(F,B,U){var T=jd(fu(F.styles.backgroundOrigin,B),F),V=Sh(fu(F.styles.backgroundClip,B),F),te=Am(fu(F.styles.backgroundSize,B),U,T),we=te[0],Re=te[1],Me=ns(fu(F.styles.backgroundPosition,B),T.width-we,T.height-Re),yt=lm(fu(F.styles.backgroundRepeat,B),Me,te,T,V),mt=Math.round(T.left+Me[0]),Tt=Math.round(T.top+Me[1]);return[yt,mt,Tt,we,Re]},kl=function(F){return Tn(F)&&F.value===Ra.AUTO},Ih=function(F){return typeof F=="number"},Am=function(F,B,U){var T=B[0],V=B[1],te=B[2],we=F[0],Re=F[1];if(!we)return[0,0];if(Pi(we)&&Re&&Pi(Re))return[hi(we,U.width),hi(Re,U.height)];var Me=Ih(te);if(Tn(we)&&(we.value===Ra.CONTAIN||we.value===Ra.COVER)){if(Ih(te)){var yt=U.width/U.height;return yt<te!=(we.value===Ra.COVER)?[U.width,U.width/te]:[U.height*te,U.height]}return[U.width,U.height]}var mt=Ih(T),Tt=Ih(V),tr=mt||Tt;if(kl(we)&&(!Re||kl(Re))){if(mt&&Tt)return[T,V];if(!Me&&!tr)return[U.width,U.height];if(tr&&Me){var an=mt?T:V*te,kr=Tt?V:T/te;return[an,kr]}var Jr=mt?T:U.width,Xn=Tt?V:U.height;return[Jr,Xn]}if(Me){var gn=0,cn=0;return Pi(we)?gn=hi(we,U.width):Pi(Re)&&(cn=hi(Re,U.height)),kl(we)?gn=cn*te:(!Re||kl(Re))&&(cn=gn/te),[gn,cn]}var Fi=null,Zn=null;if(Pi(we)?Fi=hi(we,U.width):Re&&Pi(Re)&&(Zn=hi(Re,U.height)),Fi!==null&&(!Re||kl(Re))&&(Zn=mt&&Tt?Fi/T*V:U.height),Zn!==null&&kl(we)&&(Fi=mt&&Tt?Zn/V*T:U.width),Fi!==null&&Zn!==null)return[Fi,Zn];throw new Error("Unable to calculate background-size for element")},fu=function(F,B){var U=F[B];return typeof U>"u"?F[0]:U},lm=function(F,B,U,T,V){var te=B[0],we=B[1],Re=U[0],Me=U[1];switch(F){case 2:return[new rn(Math.round(T.left),Math.round(T.top+we)),new rn(Math.round(T.left+T.width),Math.round(T.top+we)),new rn(Math.round(T.left+T.width),Math.round(Me+T.top+we)),new rn(Math.round(T.left),Math.round(Me+T.top+we))];case 3:return[new rn(Math.round(T.left+te),Math.round(T.top)),new rn(Math.round(T.left+te+Re),Math.round(T.top)),new rn(Math.round(T.left+te+Re),Math.round(T.height+T.top)),new rn(Math.round(T.left+te),Math.round(T.height+T.top))];case 1:return[new rn(Math.round(T.left+te),Math.round(T.top+we)),new rn(Math.round(T.left+te+Re),Math.round(T.top+we)),new rn(Math.round(T.left+te+Re),Math.round(T.top+we+Me)),new rn(Math.round(T.left+te),Math.round(T.top+we+Me))];default:return[new rn(Math.round(V.left),Math.round(V.top)),new rn(Math.round(V.left+V.width),Math.round(V.top)),new rn(Math.round(V.left+V.width),Math.round(V.height+V.top)),new rn(Math.round(V.left),Math.round(V.height+V.top))]}},du="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",Th="Hidden Text",Rd=function(){function F(B){this._data={},this._document=B}return F.prototype.parseMetrics=function(B,U){var T=this._document.createElement("div"),V=this._document.createElement("img"),te=this._document.createElement("span"),we=this._document.body;T.style.visibility="hidden",T.style.fontFamily=B,T.style.fontSize=U,T.style.margin="0",T.style.padding="0",T.style.whiteSpace="nowrap",we.appendChild(T),V.src=du,V.width=1,V.height=1,V.style.margin="0",V.style.padding="0",V.style.verticalAlign="baseline",te.style.fontFamily=B,te.style.fontSize=U,te.style.margin="0",te.style.padding="0",te.appendChild(this._document.createTextNode(Th)),T.appendChild(te),T.appendChild(V);var Re=V.offsetTop-te.offsetTop+2;T.removeChild(te),T.appendChild(this._document.createTextNode(Th)),T.style.lineHeight="normal",V.style.verticalAlign="super";var Me=V.offsetTop-T.offsetTop+2;return we.removeChild(T),{baseline:Re,middle:Me}},F.prototype.getMetrics=function(B,U){var T=B+" "+U;return typeof this._data[T]>"u"&&(this._data[T]=this.parseMetrics(B,U)),this._data[T]},F}(),Uh=function(){function F(B,U){this.context=B,this.options=U}return F}(),cm=1e4,Ac=function(F){s(B,F);function B(U,T){var V=F.call(this,U,T)||this;return V._activeEffects=[],V.canvas=T.canvas?T.canvas:document.createElement("canvas"),V.ctx=V.canvas.getContext("2d"),T.canvas||(V.canvas.width=Math.floor(T.width*T.scale),V.canvas.height=Math.floor(T.height*T.scale),V.canvas.style.width=T.width+"px",V.canvas.style.height=T.height+"px"),V.fontMetrics=new Rd(document),V.ctx.scale(V.options.scale,V.options.scale),V.ctx.translate(-T.x,-T.y),V.ctx.textBaseline="bottom",V._activeEffects=[],V.context.logger.debug("Canvas renderer initialized ("+T.width+"x"+T.height+") with scale "+T.scale),V}return B.prototype.applyEffects=function(U){for(var T=this;this._activeEffects.length;)this.popEffect();U.forEach(function(V){return T.applyEffect(V)})},B.prototype.applyEffect=function(U){this.ctx.save(),sm(U)&&(this.ctx.globalAlpha=U.opacity),mf(U)&&(this.ctx.translate(U.offsetX,U.offsetY),this.ctx.transform(U.matrix[0],U.matrix[1],U.matrix[2],U.matrix[3],U.matrix[4],U.matrix[5]),this.ctx.translate(-U.offsetX,-U.offsetY)),Fh(U)&&(this.path(U.path),this.ctx.clip()),this._activeEffects.push(U)},B.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},B.prototype.renderStack=function(U){return c(this,void 0,void 0,function(){var T;return h(this,function(V){switch(V.label){case 0:return T=U.element.container.styles,T.isVisible()?[4,this.renderStackContent(U)]:[3,2];case 1:V.sent(),V.label=2;case 2:return[2]}})})},B.prototype.renderNode=function(U){return c(this,void 0,void 0,function(){return h(this,function(T){switch(T.label){case 0:if(pt(U.container.flags,16))debugger;return U.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(U)]:[3,3];case 1:return T.sent(),[4,this.renderNodeContent(U)];case 2:T.sent(),T.label=3;case 3:return[2]}})})},B.prototype.renderTextWithLetterSpacing=function(U,T,V){var te=this;if(T===0)this.ctx.fillText(U.text,U.bounds.left,U.bounds.top+V);else{var we=sc(U.text);we.reduce(function(Re,Me){return te.ctx.fillText(Me,Re,U.bounds.top+V),Re+te.ctx.measureText(Me).width},U.bounds.left)}},B.prototype.createFontStyle=function(U){var T=U.fontVariant.filter(function(we){return we==="normal"||we==="small-caps"}).join(""),V=fm(U.fontFamily).join(", "),te=pi(U.fontSize)?""+U.fontSize.number+U.fontSize.unit:U.fontSize.number+"px";return[[U.fontStyle,T,U.fontWeight,te,V].join(" "),V,te]},B.prototype.renderTextNode=function(U,T){return c(this,void 0,void 0,function(){var V,te,we,Re,Me,yt,mt,Tt,tr=this;return h(this,function(an){return V=this.createFontStyle(T),te=V[0],we=V[1],Re=V[2],this.ctx.font=te,this.ctx.direction=T.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",Me=this.fontMetrics.getMetrics(we,Re),yt=Me.baseline,mt=Me.middle,Tt=T.paintOrder,U.textBounds.forEach(function(kr){Tt.forEach(function(Jr){switch(Jr){case 0:tr.ctx.fillStyle=is(T.color),tr.renderTextWithLetterSpacing(kr,T.letterSpacing,yt);var Xn=T.textShadow;Xn.length&&kr.text.trim().length&&(Xn.slice(0).reverse().forEach(function(gn){tr.ctx.shadowColor=is(gn.color),tr.ctx.shadowOffsetX=gn.offsetX.number*tr.options.scale,tr.ctx.shadowOffsetY=gn.offsetY.number*tr.options.scale,tr.ctx.shadowBlur=gn.blur.number,tr.renderTextWithLetterSpacing(kr,T.letterSpacing,yt)}),tr.ctx.shadowColor="",tr.ctx.shadowOffsetX=0,tr.ctx.shadowOffsetY=0,tr.ctx.shadowBlur=0),T.textDecorationLine.length&&(tr.ctx.fillStyle=is(T.textDecorationColor||T.color),T.textDecorationLine.forEach(function(gn){switch(gn){case 1:tr.ctx.fillRect(kr.bounds.left,Math.round(kr.bounds.top+yt),kr.bounds.width,1);break;case 2:tr.ctx.fillRect(kr.bounds.left,Math.round(kr.bounds.top),kr.bounds.width,1);break;case 3:tr.ctx.fillRect(kr.bounds.left,Math.ceil(kr.bounds.top+mt),kr.bounds.width,1);break}}));break;case 1:T.webkitTextStrokeWidth&&kr.text.trim().length&&(tr.ctx.strokeStyle=is(T.webkitTextStrokeColor),tr.ctx.lineWidth=T.webkitTextStrokeWidth,tr.ctx.lineJoin=window.chrome?"miter":"round",tr.ctx.strokeText(kr.text,kr.bounds.left,kr.bounds.top+yt)),tr.ctx.strokeStyle="",tr.ctx.lineWidth=0,tr.ctx.lineJoin="miter";break}})}),[2]})})},B.prototype.renderReplacedElement=function(U,T,V){if(V&&U.intrinsicWidth>0&&U.intrinsicHeight>0){var te=Lc(U),we=Du(T);this.path(we),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(V,0,0,U.intrinsicWidth,U.intrinsicHeight,te.left,te.top,te.width,te.height),this.ctx.restore()}},B.prototype.renderNodeContent=function(U){return c(this,void 0,void 0,function(){var T,V,te,we,Re,Me,cn,cn,yt,mt,Tt,tr,Zn,an,kr,Rn,Jr,Xn,gn,cn,Fi,Zn,Rn;return h(this,function(zr){switch(zr.label){case 0:this.applyEffects(U.getEffects(4)),T=U.container,V=U.curves,te=T.styles,we=0,Re=T.textNodes,zr.label=1;case 1:return we<Re.length?(Me=Re[we],[4,this.renderTextNode(Me,te)]):[3,4];case 2:zr.sent(),zr.label=3;case 3:return we++,[3,1];case 4:if(!(T instanceof Sc))return[3,8];zr.label=5;case 5:return zr.trys.push([5,7,,8]),[4,this.context.cache.match(T.src)];case 6:return cn=zr.sent(),this.renderReplacedElement(T,V,cn),[3,8];case 7:return zr.sent(),this.context.logger.error("Error loading image "+T.src),[3,8];case 8:if(T instanceof Tu&&this.renderReplacedElement(T,V,T.canvas),!(T instanceof Uu))return[3,12];zr.label=9;case 9:return zr.trys.push([9,11,,12]),[4,this.context.cache.match(T.svg)];case 10:return cn=zr.sent(),this.renderReplacedElement(T,V,cn),[3,12];case 11:return zr.sent(),this.context.logger.error("Error loading svg "+T.svg.substring(0,255)),[3,12];case 12:return T instanceof yh&&T.tree?(yt=new B(this.context,{scale:this.options.scale,backgroundColor:T.backgroundColor,x:0,y:0,width:T.width,height:T.height}),[4,yt.render(T.tree)]):[3,14];case 13:mt=zr.sent(),T.width&&T.height&&this.ctx.drawImage(mt,0,0,T.width,T.height,T.bounds.left,T.bounds.top,T.bounds.width,T.bounds.height),zr.label=14;case 14:if(T instanceof Pu&&(Tt=Math.min(T.bounds.width,T.bounds.height),T.type===mh?T.checked&&(this.ctx.save(),this.path([new rn(T.bounds.left+Tt*.39363,T.bounds.top+Tt*.79),new rn(T.bounds.left+Tt*.16,T.bounds.top+Tt*.5549),new rn(T.bounds.left+Tt*.27347,T.bounds.top+Tt*.44071),new rn(T.bounds.left+Tt*.39694,T.bounds.top+Tt*.5649),new rn(T.bounds.left+Tt*.72983,T.bounds.top+Tt*.23),new rn(T.bounds.left+Tt*.84,T.bounds.top+Tt*.34085),new rn(T.bounds.left+Tt*.39363,T.bounds.top+Tt*.79)]),this.ctx.fillStyle=is(ud),this.ctx.fill(),this.ctx.restore()):T.type===Qu&&T.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(T.bounds.left+Tt/2,T.bounds.top+Tt/2,Tt/4,0,Math.PI*2,!0),this.ctx.fillStyle=is(ud),this.ctx.fill(),this.ctx.restore())),Od(T)&&T.value.length){switch(tr=this.createFontStyle(te),Zn=tr[0],an=tr[1],kr=this.fontMetrics.getMetrics(Zn,an).baseline,this.ctx.font=Zn,this.ctx.fillStyle=is(te.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=um(T.styles.textAlign),Rn=Lc(T),Jr=0,T.styles.textAlign){case 1:Jr+=Rn.width/2;break;case 2:Jr+=Rn.width;break}Xn=Rn.add(Jr,0,0,-Rn.height/2+1),this.ctx.save(),this.path([new rn(Rn.left,Rn.top),new rn(Rn.left+Rn.width,Rn.top),new rn(Rn.left+Rn.width,Rn.top+Rn.height),new rn(Rn.left,Rn.top+Rn.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new ic(T.value,Xn),te.letterSpacing,kr),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!pt(T.styles.display,2048))return[3,20];if(T.styles.listStyleImage===null)return[3,19];if(gn=T.styles.listStyleImage,gn.type!==0)return[3,18];cn=void 0,Fi=gn.url,zr.label=15;case 15:return zr.trys.push([15,17,,18]),[4,this.context.cache.match(Fi)];case 16:return cn=zr.sent(),this.ctx.drawImage(cn,T.bounds.left-(cn.width+10),T.bounds.top),[3,18];case 17:return zr.sent(),this.context.logger.error("Error loading list-style-image "+Fi),[3,18];case 18:return[3,20];case 19:U.listValue&&T.styles.listStyleType!==-1&&(Zn=this.createFontStyle(te)[0],this.ctx.font=Zn,this.ctx.fillStyle=is(te.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",Rn=new d(T.bounds.left,T.bounds.top+hi(T.styles.paddingTop,T.bounds.width),T.bounds.width,v(te.lineHeight,te.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new ic(U.listValue,Rn),te.letterSpacing,v(te.lineHeight,te.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),zr.label=20;case 20:return[2]}})})},B.prototype.renderStackContent=function(U){return c(this,void 0,void 0,function(){var T,V,gn,te,we,gn,Re,Me,gn,yt,mt,gn,Tt,tr,gn,an,kr,gn,Jr,Xn,gn;return h(this,function(cn){switch(cn.label){case 0:if(pt(U.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(U.element)];case 1:cn.sent(),T=0,V=U.negativeZIndex,cn.label=2;case 2:return T<V.length?(gn=V[T],[4,this.renderStack(gn)]):[3,5];case 3:cn.sent(),cn.label=4;case 4:return T++,[3,2];case 5:return[4,this.renderNodeContent(U.element)];case 6:cn.sent(),te=0,we=U.nonInlineLevel,cn.label=7;case 7:return te<we.length?(gn=we[te],[4,this.renderNode(gn)]):[3,10];case 8:cn.sent(),cn.label=9;case 9:return te++,[3,7];case 10:Re=0,Me=U.nonPositionedFloats,cn.label=11;case 11:return Re<Me.length?(gn=Me[Re],[4,this.renderStack(gn)]):[3,14];case 12:cn.sent(),cn.label=13;case 13:return Re++,[3,11];case 14:yt=0,mt=U.nonPositionedInlineLevel,cn.label=15;case 15:return yt<mt.length?(gn=mt[yt],[4,this.renderStack(gn)]):[3,18];case 16:cn.sent(),cn.label=17;case 17:return yt++,[3,15];case 18:Tt=0,tr=U.inlineLevel,cn.label=19;case 19:return Tt<tr.length?(gn=tr[Tt],[4,this.renderNode(gn)]):[3,22];case 20:cn.sent(),cn.label=21;case 21:return Tt++,[3,19];case 22:an=0,kr=U.zeroOrAutoZIndexOrTransformedOrOpacity,cn.label=23;case 23:return an<kr.length?(gn=kr[an],[4,this.renderStack(gn)]):[3,26];case 24:cn.sent(),cn.label=25;case 25:return an++,[3,23];case 26:Jr=0,Xn=U.positiveZIndex,cn.label=27;case 27:return Jr<Xn.length?(gn=Xn[Jr],[4,this.renderStack(gn)]):[3,30];case 28:cn.sent(),cn.label=29;case 29:return Jr++,[3,27];case 30:return[2]}})})},B.prototype.mask=function(U){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(U.slice(0).reverse()),this.ctx.closePath()},B.prototype.path=function(U){this.ctx.beginPath(),this.formatPath(U),this.ctx.closePath()},B.prototype.formatPath=function(U){var T=this;U.forEach(function(V,te){var we=Oa(V)?V.start:V;te===0?T.ctx.moveTo(we.x,we.y):T.ctx.lineTo(we.x,we.y),Oa(V)&&T.ctx.bezierCurveTo(V.startControl.x,V.startControl.y,V.endControl.x,V.endControl.y,V.end.x,V.end.y)})},B.prototype.renderRepeat=function(U,T,V,te){this.path(U),this.ctx.fillStyle=T,this.ctx.translate(V,te),this.ctx.fill(),this.ctx.translate(-V,-te)},B.prototype.resizeImage=function(U,T,V){var te;if(U.width===T&&U.height===V)return U;var we=(te=this.canvas.ownerDocument)!==null&&te!==void 0?te:document,Re=we.createElement("canvas");Re.width=Math.max(1,T),Re.height=Math.max(1,V);var Me=Re.getContext("2d");return Me.drawImage(U,0,0,U.width,U.height,0,0,T,V),Re},B.prototype.renderBackgroundImage=function(U){return c(this,void 0,void 0,function(){var T,V,te,we,Re,Me;return h(this,function(yt){switch(yt.label){case 0:T=U.styles.backgroundImage.length-1,V=function(mt){var Tt,tr,an,Ps,La,da,Ni,Ua,yi,kr,Ps,La,da,Ni,Ua,Jr,Xn,gn,cn,Fi,Zn,Rn,zr,ii,yi,On,Ps,uo,Eo,Ni,Ua,cl,La,da,Pl,ul,o,n,A,f,y,C;return h(this,function(I){switch(I.label){case 0:if(mt.type!==0)return[3,5];Tt=void 0,tr=mt.url,I.label=1;case 1:return I.trys.push([1,3,,4]),[4,te.context.cache.match(tr)];case 2:return Tt=I.sent(),[3,4];case 3:return I.sent(),te.context.logger.error("Error loading background-image "+tr),[3,4];case 4:return Tt&&(an=hu(U,T,[Tt.width,Tt.height,Tt.width/Tt.height]),Ps=an[0],La=an[1],da=an[2],Ni=an[3],Ua=an[4],yi=te.ctx.createPattern(te.resizeImage(Tt,Ni,Ua),"repeat"),te.renderRepeat(Ps,yi,La,da)),[3,6];case 5:wc(mt)?(kr=hu(U,T,[null,null,null]),Ps=kr[0],La=kr[1],da=kr[2],Ni=kr[3],Ua=kr[4],Jr=Ro(mt.angle,Ni,Ua),Xn=Jr[0],gn=Jr[1],cn=Jr[2],Fi=Jr[3],Zn=Jr[4],Rn=document.createElement("canvas"),Rn.width=Ni,Rn.height=Ua,zr=Rn.getContext("2d"),ii=zr.createLinearGradient(gn,Fi,cn,Zn),fs(mt.stops,Xn).forEach(function(D){return ii.addColorStop(D.stop,is(D.color))}),zr.fillStyle=ii,zr.fillRect(0,0,Ni,Ua),Ni>0&&Ua>0&&(yi=te.ctx.createPattern(Rn,"repeat"),te.renderRepeat(Ps,yi,La,da))):zc(mt)&&(On=hu(U,T,[null,null,null]),Ps=On[0],uo=On[1],Eo=On[2],Ni=On[3],Ua=On[4],cl=mt.position.length===0?[Ma]:mt.position,La=hi(cl[0],Ni),da=hi(cl[cl.length-1],Ua),Pl=ao(mt,La,da,Ni,Ua),ul=Pl[0],o=Pl[1],ul>0&&o>0&&(n=te.ctx.createRadialGradient(uo+La,Eo+da,0,uo+La,Eo+da,ul),fs(mt.stops,ul*2).forEach(function(D){return n.addColorStop(D.stop,is(D.color))}),te.path(Ps),te.ctx.fillStyle=n,ul!==o?(A=U.bounds.left+.5*U.bounds.width,f=U.bounds.top+.5*U.bounds.height,y=o/ul,C=1/y,te.ctx.save(),te.ctx.translate(A,f),te.ctx.transform(1,0,0,y,0,0),te.ctx.translate(-A,-f),te.ctx.fillRect(uo,C*(Eo-f)+f,Ni,Ua*C),te.ctx.restore()):te.ctx.fill())),I.label=6;case 6:return T--,[2]}})},te=this,we=0,Re=U.styles.backgroundImage.slice(0).reverse(),yt.label=1;case 1:return we<Re.length?(Me=Re[we],[5,V(Me)]):[3,4];case 2:yt.sent(),yt.label=3;case 3:return we++,[3,1];case 4:return[2]}})})},B.prototype.renderSolidBorder=function(U,T,V){return c(this,void 0,void 0,function(){return h(this,function(te){return this.path(vf(V,T)),this.ctx.fillStyle=is(U),this.ctx.fill(),[2]})})},B.prototype.renderDoubleBorder=function(U,T,V,te){return c(this,void 0,void 0,function(){var we,Re;return h(this,function(Me){switch(Me.label){case 0:return T<3?[4,this.renderSolidBorder(U,V,te)]:[3,2];case 1:return Me.sent(),[2];case 2:return we=Nd(te,V),this.path(we),this.ctx.fillStyle=is(U),this.ctx.fill(),Re=am(te,V),this.path(Re),this.ctx.fill(),[2]}})})},B.prototype.renderNodeBackgroundAndBorders=function(U){return c(this,void 0,void 0,function(){var T,V,te,we,Re,Me,yt,mt,Tt=this;return h(this,function(tr){switch(tr.label){case 0:return this.applyEffects(U.getEffects(2)),T=U.container.styles,V=!so(T.backgroundColor)||T.backgroundImage.length,te=[{style:T.borderTopStyle,color:T.borderTopColor,width:T.borderTopWidth},{style:T.borderRightStyle,color:T.borderRightColor,width:T.borderRightWidth},{style:T.borderBottomStyle,color:T.borderBottomColor,width:T.borderBottomWidth},{style:T.borderLeftStyle,color:T.borderLeftColor,width:T.borderLeftWidth}],we=Hd(fu(T.backgroundClip,0),U.curves),V||T.boxShadow.length?(this.ctx.save(),this.path(we),this.ctx.clip(),so(T.backgroundColor)||(this.ctx.fillStyle=is(T.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(U.container)]):[3,2];case 1:tr.sent(),this.ctx.restore(),T.boxShadow.slice(0).reverse().forEach(function(an){Tt.ctx.save();var kr=Eh(U.curves),Jr=an.inset?0:cm,Xn=Md(kr,-Jr+(an.inset?1:-1)*an.spread.number,(an.inset?1:-1)*an.spread.number,an.spread.number*(an.inset?-2:2),an.spread.number*(an.inset?-2:2));an.inset?(Tt.path(kr),Tt.ctx.clip(),Tt.mask(Xn)):(Tt.mask(kr),Tt.ctx.clip(),Tt.path(Xn)),Tt.ctx.shadowOffsetX=an.offsetX.number+Jr,Tt.ctx.shadowOffsetY=an.offsetY.number,Tt.ctx.shadowColor=is(an.color),Tt.ctx.shadowBlur=an.blur.number,Tt.ctx.fillStyle=an.inset?is(an.color):"rgba(0,0,0,1)",Tt.ctx.fill(),Tt.ctx.restore()}),tr.label=2;case 2:Re=0,Me=0,yt=te,tr.label=3;case 3:return Me<yt.length?(mt=yt[Me],mt.style!==0&&!so(mt.color)&&mt.width>0?mt.style!==2?[3,5]:[4,this.renderDashedDottedBorder(mt.color,mt.width,Re,U.curves,2)]:[3,11]):[3,13];case 4:return tr.sent(),[3,11];case 5:return mt.style!==3?[3,7]:[4,this.renderDashedDottedBorder(mt.color,mt.width,Re,U.curves,3)];case 6:return tr.sent(),[3,11];case 7:return mt.style!==4?[3,9]:[4,this.renderDoubleBorder(mt.color,mt.width,Re,U.curves)];case 8:return tr.sent(),[3,11];case 9:return[4,this.renderSolidBorder(mt.color,Re,U.curves)];case 10:tr.sent(),tr.label=11;case 11:Re++,tr.label=12;case 12:return Me++,[3,3];case 13:return[2]}})})},B.prototype.renderDashedDottedBorder=function(U,T,V,te,we){return c(this,void 0,void 0,function(){var Re,Me,yt,mt,Tt,tr,an,kr,Jr,Xn,gn,cn,Fi,Zn,Rn,zr,Rn,zr;return h(this,function(ii){return this.ctx.save(),Re=om(te,V),Me=vf(te,V),we===2&&(this.path(Me),this.ctx.clip()),Oa(Me[0])?(yt=Me[0].start.x,mt=Me[0].start.y):(yt=Me[0].x,mt=Me[0].y),Oa(Me[1])?(Tt=Me[1].end.x,tr=Me[1].end.y):(Tt=Me[1].x,tr=Me[1].y),V===0||V===2?an=Math.abs(yt-Tt):an=Math.abs(mt-tr),this.ctx.beginPath(),we===3?this.formatPath(Re):this.formatPath(Me.slice(0,2)),kr=T<3?T*3:T*2,Jr=T<3?T*2:T,we===3&&(kr=T,Jr=T),Xn=!0,an<=kr*2?Xn=!1:an<=kr*2+Jr?(gn=an/(2*kr+Jr),kr*=gn,Jr*=gn):(cn=Math.floor((an+Jr)/(kr+Jr)),Fi=(an-cn*kr)/(cn-1),Zn=(an-(cn+1)*kr)/cn,Jr=Zn<=0||Math.abs(Jr-Fi)<Math.abs(Jr-Zn)?Fi:Zn),Xn&&(we===3?this.ctx.setLineDash([0,kr+Jr]):this.ctx.setLineDash([kr,Jr])),we===3?(this.ctx.lineCap="round",this.ctx.lineWidth=T):this.ctx.lineWidth=T*2+1.1,this.ctx.strokeStyle=is(U),this.ctx.stroke(),this.ctx.setLineDash([]),we===2&&(Oa(Me[0])&&(Rn=Me[3],zr=Me[0],this.ctx.beginPath(),this.formatPath([new rn(Rn.end.x,Rn.end.y),new rn(zr.start.x,zr.start.y)]),this.ctx.stroke()),Oa(Me[1])&&(Rn=Me[1],zr=Me[2],this.ctx.beginPath(),this.formatPath([new rn(Rn.end.x,Rn.end.y),new rn(zr.start.x,zr.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},B.prototype.render=function(U){return c(this,void 0,void 0,function(){var T;return h(this,function(V){switch(V.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=is(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),T=Dd(U),[4,this.renderStack(T)];case 1:return V.sent(),this.applyEffects([]),[2,this.canvas]}})})},B}(Uh),Od=function(F){return F instanceof gh||F instanceof hd?!0:F instanceof Pu&&F.type!==Qu&&F.type!==mh},Hd=function(F,B){switch(F){case 0:return Eh(B);case 2:return Qd(B);case 1:default:return Du(B)}},um=function(F){switch(F){case 1:return"center";case 2:return"right";case 0:default:return"left"}},hm=["-apple-system","system-ui"],fm=function(F){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?F.filter(function(B){return hm.indexOf(B)===-1}):F},Lh=function(F){s(B,F);function B(U,T){var V=F.call(this,U,T)||this;return V.canvas=T.canvas?T.canvas:document.createElement("canvas"),V.ctx=V.canvas.getContext("2d"),V.options=T,V.canvas.width=Math.floor(T.width*T.scale),V.canvas.height=Math.floor(T.height*T.scale),V.canvas.style.width=T.width+"px",V.canvas.style.height=T.height+"px",V.ctx.scale(V.options.scale,V.options.scale),V.ctx.translate(-T.x,-T.y),V.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+T.width+"x"+T.height+" at "+T.x+","+T.y+") with scale "+T.scale),V}return B.prototype.render=function(U){return c(this,void 0,void 0,function(){var T,V;return h(this,function(te){switch(te.label){case 0:return T=Yc(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,U),[4,wf(T)];case 1:return V=te.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=is(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(V,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},B}(Uh),wf=function(F){return new Promise(function(B,U){var T=new Image;T.onload=function(){B(T)},T.onerror=U,T.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(F))})},dm=function(){function F(B){var U=B.id,T=B.enabled;this.id=U,this.enabled=T,this.start=Date.now()}return F.prototype.debug=function(){for(var B=[],U=0;U<arguments.length;U++)B[U]=arguments[U];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,a([this.id,this.getTime()+"ms"],B)):this.info.apply(this,B))},F.prototype.getTime=function(){return Date.now()-this.start},F.prototype.info=function(){for(var B=[],U=0;U<arguments.length;U++)B[U]=arguments[U];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,a([this.id,this.getTime()+"ms"],B))},F.prototype.warn=function(){for(var B=[],U=0;U<arguments.length;U++)B[U]=arguments[U];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,a([this.id,this.getTime()+"ms"],B)):this.info.apply(this,B))},F.prototype.error=function(){for(var B=[],U=0;U<arguments.length;U++)B[U]=arguments[U];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,a([this.id,this.getTime()+"ms"],B)):this.info.apply(this,B))},F.instances={},F}(),bf=function(){function F(B,U){var T;this.windowBounds=U,this.instanceName="#"+F.instanceCount++,this.logger=new dm({id:this.instanceName,enabled:B.logging}),this.cache=(T=B.cache)!==null&&T!==void 0?T:new tm(this,B)}return F.instanceCount=1,F}(),xf=function(F,B){return B===void 0&&(B={}),pu(F,B)};typeof window<"u"&&Td.setContext(window);var pu=function(F,B){return c(void 0,void 0,void 0,function(){var U,T,V,te,we,Re,Me,yt,mt,Tt,tr,an,kr,Jr,Xn,gn,cn,Fi,Zn,Rn,ii,zr,ii,yi,On,Ps,uo,Eo,Ni,Ua,cl,La,da,Pl,ul,o,n,A,f,y;return h(this,function(C){switch(C.label){case 0:if(!F||typeof F!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(U=F.ownerDocument,!U)throw new Error("Element is not attached to a Document");if(T=U.defaultView,!T)throw new Error("Document is not attached to a Window");return V={allowTaint:(yi=B.allowTaint)!==null&&yi!==void 0?yi:!1,imageTimeout:(On=B.imageTimeout)!==null&&On!==void 0?On:15e3,proxy:B.proxy,useCORS:(Ps=B.useCORS)!==null&&Ps!==void 0?Ps:!1},te=l({logging:(uo=B.logging)!==null&&uo!==void 0?uo:!0,cache:B.cache},V),we={windowWidth:(Eo=B.windowWidth)!==null&&Eo!==void 0?Eo:T.innerWidth,windowHeight:(Ni=B.windowHeight)!==null&&Ni!==void 0?Ni:T.innerHeight,scrollX:(Ua=B.scrollX)!==null&&Ua!==void 0?Ua:T.pageXOffset,scrollY:(cl=B.scrollY)!==null&&cl!==void 0?cl:T.pageYOffset},Re=new d(we.scrollX,we.scrollY,we.windowWidth,we.windowHeight),Me=new bf(te,Re),yt=(La=B.foreignObjectRendering)!==null&&La!==void 0?La:!1,mt={allowTaint:(da=B.allowTaint)!==null&&da!==void 0?da:!1,onclone:B.onclone,ignoreElements:B.ignoreElements,inlineImages:yt,copyStyles:yt},Me.logger.debug("Starting document clone with size "+Re.width+"x"+Re.height+" scrolled to "+-Re.left+","+-Re.top),Tt=new Os(Me,F,mt),tr=Tt.clonedReferenceElement,tr?[4,Tt.toIFrame(U,Re)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return an=C.sent(),kr=af(tr)||pd(tr)?p(tr.ownerDocument):_(Me,tr),Jr=kr.width,Xn=kr.height,gn=kr.left,cn=kr.top,Fi=pm(Me,tr,B.backgroundColor),Zn={canvas:B.canvas,backgroundColor:Fi,scale:(ul=(Pl=B.scale)!==null&&Pl!==void 0?Pl:T.devicePixelRatio)!==null&&ul!==void 0?ul:1,x:((o=B.x)!==null&&o!==void 0?o:0)+gn,y:((n=B.y)!==null&&n!==void 0?n:0)+cn,width:(A=B.width)!==null&&A!==void 0?A:Math.ceil(Jr),height:(f=B.height)!==null&&f!==void 0?f:Math.ceil(Xn)},yt?(Me.logger.debug("Document cloned, using foreign object rendering"),ii=new Lh(Me,Zn),[4,ii.render(tr)]):[3,3];case 2:return Rn=C.sent(),[3,5];case 3:return Me.logger.debug("Document cloned, element located at "+gn+","+cn+" with size "+Jr+"x"+Xn+" using computed rendering"),Me.logger.debug("Starting DOM parsing"),zr=dd(Me,tr),Fi===zr.styles.backgroundColor&&(zr.styles.backgroundColor=gi.TRANSPARENT),Me.logger.debug("Starting renderer for element at "+Zn.x+","+Zn.y+" with size "+Zn.width+"x"+Zn.height),ii=new Ac(Me,Zn),[4,ii.render(zr)];case 4:Rn=C.sent(),C.label=5;case 5:return(!((y=B.removeContainer)!==null&&y!==void 0)||y)&&(Os.destroy(an)||Me.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),Me.logger.debug("Finished rendering"),[2,Rn]}})})},pm=function(F,B,U){var T=B.ownerDocument,V=T.documentElement?ua(F,getComputedStyle(T.documentElement).backgroundColor):gi.TRANSPARENT,te=T.body?ua(F,getComputedStyle(T.body).backgroundColor):gi.TRANSPARENT,we=typeof U=="string"?ua(F,U):U===null?gi.TRANSPARENT:4294967295;return B===T.documentElement?so(V)?so(te)?we:te:V:we};return xf})}(xS)),Up}/*!
 * html2pdf.js v0.10.1
 * Copyright (c) 2021 Erik Koopmans
 * Released under the MIT License.
 */(function(e,t){(function(s,l){e.exports=l(bS,BS())})(self,function(r,s){return function(){var l={"./src/plugin/hyperlinks.js":function(d,_,p){p.r(_),p("./node_modules/core-js/modules/web.dom-collections.for-each.js"),p("./node_modules/core-js/modules/es.string.link.js");var E=p("./src/worker.js"),w=p("./src/utils.js"),x=[],k={toContainer:E.default.prototype.toContainer,toPdf:E.default.prototype.toPdf};E.default.prototype.toContainer=function(){return k.toContainer.call(this).then(function(){if(this.opt.enableLinks){var M=this.prop.container,O=M.querySelectorAll("a"),G=(0,w.unitConvert)(M.getBoundingClientRect(),this.prop.pageSize.k);x=[],Array.prototype.forEach.call(O,function(K){for(var Z=K.getClientRects(),$=0;$<Z.length;$++){var he=(0,w.unitConvert)(Z[$],this.prop.pageSize.k);he.left-=G.left,he.top-=G.top;var fe=Math.floor(he.top/this.prop.pageSize.inner.height)+1,_e=this.opt.margin[0]+he.top%this.prop.pageSize.inner.height,ue=this.opt.margin[1]+he.left;x.push({page:fe,top:_e,left:ue,clientRect:he,link:K})}},this)}})},E.default.prototype.toPdf=function(){return k.toPdf.call(this).then(function(){if(this.opt.enableLinks){x.forEach(function(O){this.prop.pdf.setPage(O.page),this.prop.pdf.link(O.left,O.top,O.clientRect.width,O.clientRect.height,{url:O.link.href})},this);var M=this.prop.pdf.internal.getNumberOfPages();this.prop.pdf.setPage(M)}})}},"./src/plugin/jspdf-plugin.js":function(d,_,p){p.r(_),p("./node_modules/core-js/modules/es.symbol.js"),p("./node_modules/core-js/modules/es.symbol.description.js"),p("./node_modules/core-js/modules/es.object.to-string.js"),p("./node_modules/core-js/modules/es.symbol.iterator.js"),p("./node_modules/core-js/modules/es.array.iterator.js"),p("./node_modules/core-js/modules/es.string.iterator.js"),p("./node_modules/core-js/modules/web.dom-collections.iterator.js");var E=p("jspdf");function w(x){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?w=function(Q){return typeof Q}:w=function(Q){return Q&&typeof Symbol=="function"&&Q.constructor===Symbol&&Q!==Symbol.prototype?"symbol":typeof Q},w(x)}E.jsPDF.getPageSize=function(x,k,Q){if(w(x)==="object"){var R=x;x=R.orientation,k=R.unit||k,Q=R.format||Q}k=k||"mm",Q=Q||"a4",x=(""+(x||"P")).toLowerCase();var M=(""+Q).toLowerCase(),O={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(k){case"pt":var G=1;break;case"mm":var G=72/25.4;break;case"cm":var G=72/2.54;break;case"in":var G=72;break;case"px":var G=72/96;break;case"pc":var G=12;break;case"em":var G=12;break;case"ex":var G=6;break;default:throw"Invalid unit: "+k}if(O.hasOwnProperty(M))var K=O[M][1]/G,Z=O[M][0]/G;else try{var K=Q[1],Z=Q[0]}catch{throw new Error("Invalid format: "+Q)}if(x==="p"||x==="portrait"){if(x="p",Z>K){var $=Z;Z=K,K=$}}else if(x==="l"||x==="landscape"){if(x="l",K>Z){var $=Z;Z=K,K=$}}else throw"Invalid orientation: "+x;var he={width:Z,height:K,unit:k,k:G};return he},_.default=E.jsPDF},"./src/plugin/pagebreaks.js":function(d,_,p){p.r(_),p("./node_modules/core-js/modules/es.array.concat.js"),p("./node_modules/core-js/modules/es.array.slice.js"),p("./node_modules/core-js/modules/es.array.join.js"),p("./node_modules/core-js/modules/web.dom-collections.for-each.js"),p("./node_modules/core-js/modules/es.object.keys.js");var E=p("./src/worker.js"),w=p("./src/utils.js"),x={toContainer:E.default.prototype.toContainer};E.default.template.opt.pagebreak={mode:["css","legacy"],before:[],after:[],avoid:[]},E.default.prototype.toContainer=function(){return x.toContainer.call(this).then(function(){var R=this.prop.container,M=this.prop.pageSize.inner.px.height,O=[].concat(this.opt.pagebreak.mode),G={avoidAll:O.indexOf("avoid-all")!==-1,css:O.indexOf("css")!==-1,legacy:O.indexOf("legacy")!==-1},K={},Z=this;["before","after","avoid"].forEach(function(fe){var _e=G.avoidAll&&fe==="avoid";K[fe]=_e?[]:[].concat(Z.opt.pagebreak[fe]||[]),K[fe].length>0&&(K[fe]=Array.prototype.slice.call(R.querySelectorAll(K[fe].join(", "))))});var $=R.querySelectorAll(".html2pdf__page-break");$=Array.prototype.slice.call($);var he=R.querySelectorAll("*");Array.prototype.forEach.call(he,function(_e){var ue={before:!1,after:G.legacy&&$.indexOf(_e)!==-1,avoid:G.avoidAll};if(G.css){var ee=window.getComputedStyle(_e),se=["always","page","left","right"],Be=["avoid","avoid-page"];ue={before:ue.before||se.indexOf(ee.breakBefore||ee.pageBreakBefore)!==-1,after:ue.after||se.indexOf(ee.breakAfter||ee.pageBreakAfter)!==-1,avoid:ue.avoid||Be.indexOf(ee.breakInside||ee.pageBreakInside)!==-1}}Object.keys(ue).forEach(function(tt){ue[tt]=ue[tt]||K[tt].indexOf(_e)!==-1});var me=_e.getBoundingClientRect();if(ue.avoid&&!ue.before){var Pe=Math.floor(me.top/M),ge=Math.floor(me.bottom/M),Qe=Math.abs(me.bottom-me.top)/M;ge!==Pe&&Qe<=1&&(ue.before=!0)}if(ue.before){var Te=(0,w.createElement)("div",{style:{display:"block",height:M-me.top%M+"px"}});_e.parentNode.insertBefore(Te,_e)}if(ue.after){var Te=(0,w.createElement)("div",{style:{display:"block",height:M-me.bottom%M+"px"}});_e.parentNode.insertBefore(Te,_e.nextSibling)}})})}},"./src/utils.js":function(d,_,p){p.r(_),p.d(_,{objType:function(){return w},createElement:function(){return x},cloneNode:function(){return k},unitConvert:function(){return Q},toPx:function(){return R}}),p("./node_modules/core-js/modules/es.number.constructor.js"),p("./node_modules/core-js/modules/es.symbol.js"),p("./node_modules/core-js/modules/es.symbol.description.js"),p("./node_modules/core-js/modules/es.object.to-string.js"),p("./node_modules/core-js/modules/es.symbol.iterator.js"),p("./node_modules/core-js/modules/es.array.iterator.js"),p("./node_modules/core-js/modules/es.string.iterator.js"),p("./node_modules/core-js/modules/web.dom-collections.iterator.js");function E(M){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?E=function(G){return typeof G}:E=function(G){return G&&typeof Symbol=="function"&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G},E(M)}var w=function(O){var G=E(O);return G==="undefined"?"undefined":G==="string"||O instanceof String?"string":G==="number"||O instanceof Number?"number":G==="function"||O instanceof Function?"function":O&&O.constructor===Array?"array":O&&O.nodeType===1?"element":G==="object"?"object":"unknown"},x=function(O,G){var K=document.createElement(O);if(G.className&&(K.className=G.className),G.innerHTML){K.innerHTML=G.innerHTML;for(var Z=K.getElementsByTagName("script"),$=Z.length;$-- >0;null)Z[$].parentNode.removeChild(Z[$])}for(var he in G.style)K.style[he]=G.style[he];return K},k=function M(O,G){for(var K=O.nodeType===3?document.createTextNode(O.nodeValue):O.cloneNode(!1),Z=O.firstChild;Z;Z=Z.nextSibling)(G===!0||Z.nodeType!==1||Z.nodeName!=="SCRIPT")&&K.appendChild(M(Z,G));return O.nodeType===1&&(O.nodeName==="CANVAS"?(K.width=O.width,K.height=O.height,K.getContext("2d").drawImage(O,0,0)):(O.nodeName==="TEXTAREA"||O.nodeName==="SELECT")&&(K.value=O.value),K.addEventListener("load",function(){K.scrollTop=O.scrollTop,K.scrollLeft=O.scrollLeft},!0)),K},Q=function(O,G){if(w(O)==="number")return O*72/96/G;var K={};for(var Z in O)K[Z]=O[Z]*72/96/G;return K},R=function(O,G){return Math.floor(O*G/72*96)}},"./src/worker.js":function(d,_,p){p.r(_),p("./node_modules/core-js/modules/es.object.assign.js"),p("./node_modules/core-js/modules/es.array.map.js"),p("./node_modules/core-js/modules/es.object.keys.js"),p("./node_modules/core-js/modules/es.array.concat.js"),p("./node_modules/core-js/modules/es.object.to-string.js"),p("./node_modules/core-js/modules/es.regexp.to-string.js"),p("./node_modules/core-js/modules/es.function.name.js"),p("./node_modules/core-js/modules/web.dom-collections.for-each.js");var E=p("jspdf"),w=p("html2canvas"),x=p("./src/utils.js"),k=p("./node_modules/es6-promise/dist/es6-promise.js"),Q=p.n(k),R=Q().Promise,M=function O(G){var K=Object.assign(O.convert(R.resolve()),JSON.parse(JSON.stringify(O.template))),Z=O.convert(R.resolve(),K);return Z=Z.setProgress(1,O,1,[O]),Z=Z.set(G),Z};M.prototype=Object.create(R.prototype),M.prototype.constructor=M,M.convert=function(G,K){return G.__proto__=K||M.prototype,G},M.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],image:{type:"jpeg",quality:.95},enableLinks:!0,html2canvas:{},jsPDF:{}}},M.prototype.from=function(G,K){function Z($){switch((0,x.objType)($)){case"string":return"string";case"element":return $.nodeName.toLowerCase==="canvas"?"canvas":"element";default:return"unknown"}}return this.then(function(){switch(K=K||Z(G),K){case"string":return this.set({src:(0,x.createElement)("div",{innerHTML:G})});case"element":return this.set({src:G});case"canvas":return this.set({canvas:G});case"img":return this.set({img:G});default:return this.error("Unknown source type.")}})},M.prototype.to=function(G){switch(G){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},M.prototype.toContainer=function(){var G=[function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}];return this.thenList(G).then(function(){var Z={position:"fixed",overflow:"hidden",zIndex:1e3,left:0,right:0,bottom:0,top:0,backgroundColor:"rgba(0,0,0,0.8)"},$={position:"absolute",width:this.prop.pageSize.inner.width+this.prop.pageSize.unit,left:0,right:0,top:0,height:"auto",margin:"auto",backgroundColor:"white"};Z.opacity=0;var he=(0,x.cloneNode)(this.prop.src,this.opt.html2canvas.javascriptEnabled);this.prop.overlay=(0,x.createElement)("div",{className:"html2pdf__overlay",style:Z}),this.prop.container=(0,x.createElement)("div",{className:"html2pdf__container",style:$}),this.prop.container.appendChild(he),this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay)})},M.prototype.toCanvas=function(){var G=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(G).then(function(){var Z=Object.assign({},this.opt.html2canvas);return delete Z.onrendered,w(this.prop.container,Z)}).then(function(Z){var $=this.opt.html2canvas.onrendered||function(){};$(Z),this.prop.canvas=Z,document.body.removeChild(this.prop.overlay)})},M.prototype.toImg=function(){var G=[function(){return this.prop.canvas||this.toCanvas()}];return this.thenList(G).then(function(){var Z=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=Z})},M.prototype.toPdf=function(){var G=[function(){return this.prop.canvas||this.toCanvas()}];return this.thenList(G).then(function(){var Z=this.prop.canvas,$=this.opt,he=Z.height,fe=Math.floor(Z.width*this.prop.pageSize.inner.ratio),_e=Math.ceil(he/fe),ue=this.prop.pageSize.inner.height,ee=document.createElement("canvas"),se=ee.getContext("2d");ee.width=Z.width,ee.height=fe,this.prop.pdf=this.prop.pdf||new E.jsPDF($.jsPDF);for(var Be=0;Be<_e;Be++){Be===_e-1&&he%fe!==0&&(ee.height=he%fe,ue=ee.height*this.prop.pageSize.inner.width/ee.width);var me=ee.width,Pe=ee.height;se.fillStyle="white",se.fillRect(0,0,me,Pe),se.drawImage(Z,0,Be*fe,me,Pe,0,0,me,Pe),Be&&this.prop.pdf.addPage();var ge=ee.toDataURL("image/"+$.image.type,$.image.quality);this.prop.pdf.addImage(ge,$.image.type,$.margin[1],$.margin[0],this.prop.pageSize.inner.width,ue)}})},M.prototype.output=function(G,K,Z){return Z=Z||"pdf",Z.toLowerCase()==="img"||Z.toLowerCase()==="image"?this.outputImg(G,K):this.outputPdf(G,K)},M.prototype.outputPdf=function(G,K){var Z=[function(){return this.prop.pdf||this.toPdf()}];return this.thenList(Z).then(function(){return this.prop.pdf.output(G,K)})},M.prototype.outputImg=function(G,K){var Z=[function(){return this.prop.img||this.toImg()}];return this.thenList(Z).then(function(){switch(G){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+G+'" is not supported.'}})},M.prototype.save=function(G){var K=[function(){return this.prop.pdf||this.toPdf()}];return this.thenList(K).set(G?{filename:G}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},M.prototype.set=function(G){if((0,x.objType)(G)!=="object")return this;var K=Object.keys(G||{}).map(function(Z){switch(Z){case"margin":return this.setMargin.bind(this,G.margin);case"jsPDF":return function(){return this.opt.jsPDF=G.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,G.pageSize);default:return Z in M.template.prop?function(){this.prop[Z]=G[Z]}:function(){this.opt[Z]=G[Z]}}},this);return this.then(function(){return this.thenList(K)})},M.prototype.get=function(G,K){return this.then(function(){var $=G in M.template.prop?this.prop[G]:this.opt[G];return K?K($):$})},M.prototype.setMargin=function(G){return this.then(function(){switch((0,x.objType)(G)){case"number":G=[G,G,G,G];case"array":if(G.length===2&&(G=[G[0],G[1],G[0],G[1]]),G.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=G}).then(this.setPageSize)},M.prototype.setPageSize=function(G){return this.then(function(){G=G||E.jsPDF.getPageSize(this.opt.jsPDF),G.hasOwnProperty("inner")||(G.inner={width:G.width-this.opt.margin[1]-this.opt.margin[3],height:G.height-this.opt.margin[0]-this.opt.margin[2]},G.inner.px={width:(0,x.toPx)(G.inner.width,G.k),height:(0,x.toPx)(G.inner.height,G.k)},G.inner.ratio=G.inner.height/G.inner.width),this.prop.pageSize=G})},M.prototype.setProgress=function(G,K,Z,$){return G!=null&&(this.progress.val=G),K!=null&&(this.progress.state=K),Z!=null&&(this.progress.n=Z),$!=null&&(this.progress.stack=$),this.progress.ratio=this.progress.val/this.progress.state,this},M.prototype.updateProgress=function(G,K,Z,$){return this.setProgress(G?this.progress.val+G:null,K||null,Z?this.progress.n+Z:null,$?this.progress.stack.concat($):null)},M.prototype.then=function(G,K){var Z=this;return this.thenCore(G,K,function(he,fe){return Z.updateProgress(null,null,1,[he]),R.prototype.then.call(this,function(ue){return Z.updateProgress(null,he),ue}).then(he,fe).then(function(ue){return Z.updateProgress(1),ue})})},M.prototype.thenCore=function(G,K,Z){Z=Z||R.prototype.then;var $=this;G&&(G=G.bind($)),K&&(K=K.bind($));var he=R.toString().indexOf("[native code]")!==-1&&R.name==="Promise",fe=he?$:M.convert(Object.assign({},$),R.prototype),_e=Z.call(fe,G,K);return M.convert(_e,$.__proto__)},M.prototype.thenExternal=function(G,K){return R.prototype.then.call(this,G,K)},M.prototype.thenList=function(G){var K=this;return G.forEach(function($){K=K.thenCore($)}),K},M.prototype.catch=function(O){O&&(O=O.bind(this));var G=R.prototype.catch.call(this,O);return M.convert(G,this)},M.prototype.catchExternal=function(G){return R.prototype.catch.call(this,G)},M.prototype.error=function(G){return this.then(function(){throw new Error(G)})},M.prototype.using=M.prototype.set,M.prototype.saveAs=M.prototype.save,M.prototype.export=M.prototype.output,M.prototype.run=M.prototype.then,_.default=M},"./node_modules/core-js/internals/a-function.js":function(d){d.exports=function(_){if(typeof _!="function")throw TypeError(String(_)+" is not a function");return _}},"./node_modules/core-js/internals/a-possible-prototype.js":function(d,_,p){var E=p("./node_modules/core-js/internals/is-object.js");d.exports=function(w){if(!E(w)&&w!==null)throw TypeError("Can't set "+String(w)+" as a prototype");return w}},"./node_modules/core-js/internals/add-to-unscopables.js":function(d,_,p){var E=p("./node_modules/core-js/internals/well-known-symbol.js"),w=p("./node_modules/core-js/internals/object-create.js"),x=p("./node_modules/core-js/internals/object-define-property.js"),k=E("unscopables"),Q=Array.prototype;Q[k]==null&&x.f(Q,k,{configurable:!0,value:w(null)}),d.exports=function(R){Q[k][R]=!0}},"./node_modules/core-js/internals/an-object.js":function(d,_,p){var E=p("./node_modules/core-js/internals/is-object.js");d.exports=function(w){if(!E(w))throw TypeError(String(w)+" is not an object");return w}},"./node_modules/core-js/internals/array-for-each.js":function(d,_,p){var E=p("./node_modules/core-js/internals/array-iteration.js").forEach,w=p("./node_modules/core-js/internals/array-method-is-strict.js"),x=w("forEach");d.exports=x?[].forEach:function(Q){return E(this,Q,arguments.length>1?arguments[1]:void 0)}},"./node_modules/core-js/internals/array-includes.js":function(d,_,p){var E=p("./node_modules/core-js/internals/to-indexed-object.js"),w=p("./node_modules/core-js/internals/to-length.js"),x=p("./node_modules/core-js/internals/to-absolute-index.js"),k=function(Q){return function(R,M,O){var G=E(R),K=w(G.length),Z=x(O,K),$;if(Q&&M!=M){for(;K>Z;)if($=G[Z++],$!=$)return!0}else for(;K>Z;Z++)if((Q||Z in G)&&G[Z]===M)return Q||Z||0;return!Q&&-1}};d.exports={includes:k(!0),indexOf:k(!1)}},"./node_modules/core-js/internals/array-iteration.js":function(d,_,p){var E=p("./node_modules/core-js/internals/function-bind-context.js"),w=p("./node_modules/core-js/internals/indexed-object.js"),x=p("./node_modules/core-js/internals/to-object.js"),k=p("./node_modules/core-js/internals/to-length.js"),Q=p("./node_modules/core-js/internals/array-species-create.js"),R=[].push,M=function(O){var G=O==1,K=O==2,Z=O==3,$=O==4,he=O==6,fe=O==7,_e=O==5||he;return function(ue,ee,se,Be){for(var me=x(ue),Pe=w(me),ge=E(ee,se,3),Qe=k(Pe.length),Te=0,tt=Be||Q,Oe=G?tt(ue,Qe):K||fe?tt(ue,0):void 0,Mt,ne;Qe>Te;Te++)if((_e||Te in Pe)&&(Mt=Pe[Te],ne=ge(Mt,Te,me),O))if(G)Oe[Te]=ne;else if(ne)switch(O){case 3:return!0;case 5:return Mt;case 6:return Te;case 2:R.call(Oe,Mt)}else switch(O){case 4:return!1;case 7:R.call(Oe,Mt)}return he?-1:Z||$?$:Oe}};d.exports={forEach:M(0),map:M(1),filter:M(2),some:M(3),every:M(4),find:M(5),findIndex:M(6),filterReject:M(7)}},"./node_modules/core-js/internals/array-method-has-species-support.js":function(d,_,p){var E=p("./node_modules/core-js/internals/fails.js"),w=p("./node_modules/core-js/internals/well-known-symbol.js"),x=p("./node_modules/core-js/internals/engine-v8-version.js"),k=w("species");d.exports=function(Q){return x>=51||!E(function(){var R=[],M=R.constructor={};return M[k]=function(){return{foo:1}},R[Q](Boolean).foo!==1})}},"./node_modules/core-js/internals/array-method-is-strict.js":function(d,_,p){var E=p("./node_modules/core-js/internals/fails.js");d.exports=function(w,x){var k=[][w];return!!k&&E(function(){k.call(null,x||function(){throw 1},1)})}},"./node_modules/core-js/internals/array-species-constructor.js":function(d,_,p){var E=p("./node_modules/core-js/internals/is-object.js"),w=p("./node_modules/core-js/internals/is-array.js"),x=p("./node_modules/core-js/internals/well-known-symbol.js"),k=x("species");d.exports=function(Q){var R;return w(Q)&&(R=Q.constructor,typeof R=="function"&&(R===Array||w(R.prototype))?R=void 0:E(R)&&(R=R[k],R===null&&(R=void 0))),R===void 0?Array:R}},"./node_modules/core-js/internals/array-species-create.js":function(d,_,p){var E=p("./node_modules/core-js/internals/array-species-constructor.js");d.exports=function(w,x){return new(E(w))(x===0?0:x)}},"./node_modules/core-js/internals/classof-raw.js":function(d){var _={}.toString;d.exports=function(p){return _.call(p).slice(8,-1)}},"./node_modules/core-js/internals/classof.js":function(d,_,p){var E=p("./node_modules/core-js/internals/to-string-tag-support.js"),w=p("./node_modules/core-js/internals/classof-raw.js"),x=p("./node_modules/core-js/internals/well-known-symbol.js"),k=x("toStringTag"),Q=w(function(){return arguments}())=="Arguments",R=function(M,O){try{return M[O]}catch{}};d.exports=E?w:function(M){var O,G,K;return M===void 0?"Undefined":M===null?"Null":typeof(G=R(O=Object(M),k))=="string"?G:Q?w(O):(K=w(O))=="Object"&&typeof O.callee=="function"?"Arguments":K}},"./node_modules/core-js/internals/copy-constructor-properties.js":function(d,_,p){var E=p("./node_modules/core-js/internals/has.js"),w=p("./node_modules/core-js/internals/own-keys.js"),x=p("./node_modules/core-js/internals/object-get-own-property-descriptor.js"),k=p("./node_modules/core-js/internals/object-define-property.js");d.exports=function(Q,R){for(var M=w(R),O=k.f,G=x.f,K=0;K<M.length;K++){var Z=M[K];E(Q,Z)||O(Q,Z,G(R,Z))}}},"./node_modules/core-js/internals/correct-prototype-getter.js":function(d,_,p){var E=p("./node_modules/core-js/internals/fails.js");d.exports=!E(function(){function w(){}return w.prototype.constructor=null,Object.getPrototypeOf(new w)!==w.prototype})},"./node_modules/core-js/internals/create-html.js":function(d,_,p){var E=p("./node_modules/core-js/internals/require-object-coercible.js"),w=p("./node_modules/core-js/internals/to-string.js"),x=/"/g;d.exports=function(k,Q,R,M){var O=w(E(k)),G="<"+Q;return R!==""&&(G+=" "+R+'="'+w(M).replace(x,"&quot;")+'"'),G+">"+O+"</"+Q+">"}},"./node_modules/core-js/internals/create-iterator-constructor.js":function(d,_,p){var E=p("./node_modules/core-js/internals/iterators-core.js").IteratorPrototype,w=p("./node_modules/core-js/internals/object-create.js"),x=p("./node_modules/core-js/internals/create-property-descriptor.js"),k=p("./node_modules/core-js/internals/set-to-string-tag.js"),Q=p("./node_modules/core-js/internals/iterators.js"),R=function(){return this};d.exports=function(M,O,G){var K=O+" Iterator";return M.prototype=w(E,{next:x(1,G)}),k(M,K,!1,!0),Q[K]=R,M}},"./node_modules/core-js/internals/create-non-enumerable-property.js":function(d,_,p){var E=p("./node_modules/core-js/internals/descriptors.js"),w=p("./node_modules/core-js/internals/object-define-property.js"),x=p("./node_modules/core-js/internals/create-property-descriptor.js");d.exports=E?function(k,Q,R){return w.f(k,Q,x(1,R))}:function(k,Q,R){return k[Q]=R,k}},"./node_modules/core-js/internals/create-property-descriptor.js":function(d){d.exports=function(_,p){return{enumerable:!(_&1),configurable:!(_&2),writable:!(_&4),value:p}}},"./node_modules/core-js/internals/create-property.js":function(d,_,p){var E=p("./node_modules/core-js/internals/to-property-key.js"),w=p("./node_modules/core-js/internals/object-define-property.js"),x=p("./node_modules/core-js/internals/create-property-descriptor.js");d.exports=function(k,Q,R){var M=E(Q);M in k?w.f(k,M,x(0,R)):k[M]=R}},"./node_modules/core-js/internals/define-iterator.js":function(d,_,p){var E=p("./node_modules/core-js/internals/export.js"),w=p("./node_modules/core-js/internals/create-iterator-constructor.js"),x=p("./node_modules/core-js/internals/object-get-prototype-of.js"),k=p("./node_modules/core-js/internals/object-set-prototype-of.js"),Q=p("./node_modules/core-js/internals/set-to-string-tag.js"),R=p("./node_modules/core-js/internals/create-non-enumerable-property.js"),M=p("./node_modules/core-js/internals/redefine.js"),O=p("./node_modules/core-js/internals/well-known-symbol.js"),G=p("./node_modules/core-js/internals/is-pure.js"),K=p("./node_modules/core-js/internals/iterators.js"),Z=p("./node_modules/core-js/internals/iterators-core.js"),$=Z.IteratorPrototype,he=Z.BUGGY_SAFARI_ITERATORS,fe=O("iterator"),_e="keys",ue="values",ee="entries",se=function(){return this};d.exports=function(Be,me,Pe,ge,Qe,Te,tt){w(Pe,me,ge);var Oe=function(rt){if(rt===Qe&&Ke)return Ke;if(!he&&rt in Se)return Se[rt];switch(rt){case _e:return function(){return new Pe(this,rt)};case ue:return function(){return new Pe(this,rt)};case ee:return function(){return new Pe(this,rt)}}return function(){return new Pe(this)}},Mt=me+" Iterator",ne=!1,Se=Be.prototype,ke=Se[fe]||Se["@@iterator"]||Qe&&Se[Qe],Ke=!he&&ke||Oe(Qe),at=me=="Array"&&Se.entries||ke,dt,Bt,Ge;if(at&&(dt=x(at.call(new Be)),$!==Object.prototype&&dt.next&&(!G&&x(dt)!==$&&(k?k(dt,$):typeof dt[fe]!="function"&&R(dt,fe,se)),Q(dt,Mt,!0,!0),G&&(K[Mt]=se))),Qe==ue&&ke&&ke.name!==ue&&(ne=!0,Ke=function(){return ke.call(this)}),(!G||tt)&&Se[fe]!==Ke&&R(Se,fe,Ke),K[me]=Ke,Qe)if(Bt={values:Oe(ue),keys:Te?Ke:Oe(_e),entries:Oe(ee)},tt)for(Ge in Bt)(he||ne||!(Ge in Se))&&M(Se,Ge,Bt[Ge]);else E({target:me,proto:!0,forced:he||ne},Bt);return Bt}},"./node_modules/core-js/internals/define-well-known-symbol.js":function(d,_,p){var E=p("./node_modules/core-js/internals/path.js"),w=p("./node_modules/core-js/internals/has.js"),x=p("./node_modules/core-js/internals/well-known-symbol-wrapped.js"),k=p("./node_modules/core-js/internals/object-define-property.js").f;d.exports=function(Q){var R=E.Symbol||(E.Symbol={});w(R,Q)||k(R,Q,{value:x.f(Q)})}},"./node_modules/core-js/internals/descriptors.js":function(d,_,p){var E=p("./node_modules/core-js/internals/fails.js");d.exports=!E(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},"./node_modules/core-js/internals/document-create-element.js":function(d,_,p){var E=p("./node_modules/core-js/internals/global.js"),w=p("./node_modules/core-js/internals/is-object.js"),x=E.document,k=w(x)&&w(x.createElement);d.exports=function(Q){return k?x.createElement(Q):{}}},"./node_modules/core-js/internals/dom-iterables.js":function(d){d.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},"./node_modules/core-js/internals/engine-user-agent.js":function(d,_,p){var E=p("./node_modules/core-js/internals/get-built-in.js");d.exports=E("navigator","userAgent")||""},"./node_modules/core-js/internals/engine-v8-version.js":function(d,_,p){var E=p("./node_modules/core-js/internals/global.js"),w=p("./node_modules/core-js/internals/engine-user-agent.js"),x=E.process,k=E.Deno,Q=x&&x.versions||k&&k.version,R=Q&&Q.v8,M,O;R?(M=R.split("."),O=M[0]<4?1:M[0]+M[1]):w&&(M=w.match(/Edge\/(\d+)/),(!M||M[1]>=74)&&(M=w.match(/Chrome\/(\d+)/),M&&(O=M[1]))),d.exports=O&&+O},"./node_modules/core-js/internals/enum-bug-keys.js":function(d){d.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"./node_modules/core-js/internals/export.js":function(d,_,p){var E=p("./node_modules/core-js/internals/global.js"),w=p("./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,x=p("./node_modules/core-js/internals/create-non-enumerable-property.js"),k=p("./node_modules/core-js/internals/redefine.js"),Q=p("./node_modules/core-js/internals/set-global.js"),R=p("./node_modules/core-js/internals/copy-constructor-properties.js"),M=p("./node_modules/core-js/internals/is-forced.js");d.exports=function(O,G){var K=O.target,Z=O.global,$=O.stat,he,fe,_e,ue,ee,se;if(Z?fe=E:$?fe=E[K]||Q(K,{}):fe=(E[K]||{}).prototype,fe)for(_e in G){if(ee=G[_e],O.noTargetGet?(se=w(fe,_e),ue=se&&se.value):ue=fe[_e],he=M(Z?_e:K+($?".":"#")+_e,O.forced),!he&&ue!==void 0){if(typeof ee==typeof ue)continue;R(ee,ue)}(O.sham||ue&&ue.sham)&&x(ee,"sham",!0),k(fe,_e,ee,O)}}},"./node_modules/core-js/internals/fails.js":function(d){d.exports=function(_){try{return!!_()}catch{return!0}}},"./node_modules/core-js/internals/function-bind-context.js":function(d,_,p){var E=p("./node_modules/core-js/internals/a-function.js");d.exports=function(w,x,k){if(E(w),x===void 0)return w;switch(k){case 0:return function(){return w.call(x)};case 1:return function(Q){return w.call(x,Q)};case 2:return function(Q,R){return w.call(x,Q,R)};case 3:return function(Q,R,M){return w.call(x,Q,R,M)}}return function(){return w.apply(x,arguments)}}},"./node_modules/core-js/internals/get-built-in.js":function(d,_,p){var E=p("./node_modules/core-js/internals/global.js"),w=function(x){return typeof x=="function"?x:void 0};d.exports=function(x,k){return arguments.length<2?w(E[x]):E[x]&&E[x][k]}},"./node_modules/core-js/internals/global.js":function(d){var _=function(p){return p&&p.Math==Math&&p};d.exports=_(typeof globalThis=="object"&&globalThis)||_(typeof window=="object"&&window)||_(typeof self=="object"&&self)||_(typeof Hl=="object"&&Hl)||function(){return this}()||Function("return this")()},"./node_modules/core-js/internals/has.js":function(d,_,p){var E=p("./node_modules/core-js/internals/to-object.js"),w={}.hasOwnProperty;d.exports=Object.hasOwn||function(k,Q){return w.call(E(k),Q)}},"./node_modules/core-js/internals/hidden-keys.js":function(d){d.exports={}},"./node_modules/core-js/internals/html.js":function(d,_,p){var E=p("./node_modules/core-js/internals/get-built-in.js");d.exports=E("document","documentElement")},"./node_modules/core-js/internals/ie8-dom-define.js":function(d,_,p){var E=p("./node_modules/core-js/internals/descriptors.js"),w=p("./node_modules/core-js/internals/fails.js"),x=p("./node_modules/core-js/internals/document-create-element.js");d.exports=!E&&!w(function(){return Object.defineProperty(x("div"),"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/internals/indexed-object.js":function(d,_,p){var E=p("./node_modules/core-js/internals/fails.js"),w=p("./node_modules/core-js/internals/classof-raw.js"),x="".split;d.exports=E(function(){return!Object("z").propertyIsEnumerable(0)})?function(k){return w(k)=="String"?x.call(k,""):Object(k)}:Object},"./node_modules/core-js/internals/inherit-if-required.js":function(d,_,p){var E=p("./node_modules/core-js/internals/is-object.js"),w=p("./node_modules/core-js/internals/object-set-prototype-of.js");d.exports=function(x,k,Q){var R,M;return w&&typeof(R=k.constructor)=="function"&&R!==Q&&E(M=R.prototype)&&M!==Q.prototype&&w(x,M),x}},"./node_modules/core-js/internals/inspect-source.js":function(d,_,p){var E=p("./node_modules/core-js/internals/shared-store.js"),w=Function.toString;typeof E.inspectSource!="function"&&(E.inspectSource=function(x){return w.call(x)}),d.exports=E.inspectSource},"./node_modules/core-js/internals/internal-state.js":function(d,_,p){var E=p("./node_modules/core-js/internals/native-weak-map.js"),w=p("./node_modules/core-js/internals/global.js"),x=p("./node_modules/core-js/internals/is-object.js"),k=p("./node_modules/core-js/internals/create-non-enumerable-property.js"),Q=p("./node_modules/core-js/internals/has.js"),R=p("./node_modules/core-js/internals/shared-store.js"),M=p("./node_modules/core-js/internals/shared-key.js"),O=p("./node_modules/core-js/internals/hidden-keys.js"),G="Object already initialized",K=w.WeakMap,Z,$,he,fe=function(Pe){return he(Pe)?$(Pe):Z(Pe,{})},_e=function(Pe){return function(ge){var Qe;if(!x(ge)||(Qe=$(ge)).type!==Pe)throw TypeError("Incompatible receiver, "+Pe+" required");return Qe}};if(E||R.state){var ue=R.state||(R.state=new K),ee=ue.get,se=ue.has,Be=ue.set;Z=function(Pe,ge){if(se.call(ue,Pe))throw new TypeError(G);return ge.facade=Pe,Be.call(ue,Pe,ge),ge},$=function(Pe){return ee.call(ue,Pe)||{}},he=function(Pe){return se.call(ue,Pe)}}else{var me=M("state");O[me]=!0,Z=function(Pe,ge){if(Q(Pe,me))throw new TypeError(G);return ge.facade=Pe,k(Pe,me,ge),ge},$=function(Pe){return Q(Pe,me)?Pe[me]:{}},he=function(Pe){return Q(Pe,me)}}d.exports={set:Z,get:$,has:he,enforce:fe,getterFor:_e}},"./node_modules/core-js/internals/is-array.js":function(d,_,p){var E=p("./node_modules/core-js/internals/classof-raw.js");d.exports=Array.isArray||function(x){return E(x)=="Array"}},"./node_modules/core-js/internals/is-forced.js":function(d,_,p){var E=p("./node_modules/core-js/internals/fails.js"),w=/#|\.prototype\./,x=function(O,G){var K=Q[k(O)];return K==M?!0:K==R?!1:typeof G=="function"?E(G):!!G},k=x.normalize=function(O){return String(O).replace(w,".").toLowerCase()},Q=x.data={},R=x.NATIVE="N",M=x.POLYFILL="P";d.exports=x},"./node_modules/core-js/internals/is-object.js":function(d){d.exports=function(_){return typeof _=="object"?_!==null:typeof _=="function"}},"./node_modules/core-js/internals/is-pure.js":function(d){d.exports=!1},"./node_modules/core-js/internals/is-symbol.js":function(d,_,p){var E=p("./node_modules/core-js/internals/get-built-in.js"),w=p("./node_modules/core-js/internals/use-symbol-as-uid.js");d.exports=w?function(x){return typeof x=="symbol"}:function(x){var k=E("Symbol");return typeof k=="function"&&Object(x)instanceof k}},"./node_modules/core-js/internals/iterators-core.js":function(d,_,p){var E=p("./node_modules/core-js/internals/fails.js"),w=p("./node_modules/core-js/internals/object-get-prototype-of.js"),x=p("./node_modules/core-js/internals/create-non-enumerable-property.js"),k=p("./node_modules/core-js/internals/has.js"),Q=p("./node_modules/core-js/internals/well-known-symbol.js"),R=p("./node_modules/core-js/internals/is-pure.js"),M=Q("iterator"),O=!1,G=function(){return this},K,Z,$;[].keys&&($=[].keys(),"next"in $?(Z=w(w($)),Z!==Object.prototype&&(K=Z)):O=!0);var he=K==null||E(function(){var fe={};return K[M].call(fe)!==fe});he&&(K={}),(!R||he)&&!k(K,M)&&x(K,M,G),d.exports={IteratorPrototype:K,BUGGY_SAFARI_ITERATORS:O}},"./node_modules/core-js/internals/iterators.js":function(d){d.exports={}},"./node_modules/core-js/internals/native-symbol.js":function(d,_,p){var E=p("./node_modules/core-js/internals/engine-v8-version.js"),w=p("./node_modules/core-js/internals/fails.js");d.exports=!!Object.getOwnPropertySymbols&&!w(function(){var x=Symbol();return!String(x)||!(Object(x)instanceof Symbol)||!Symbol.sham&&E&&E<41})},"./node_modules/core-js/internals/native-weak-map.js":function(d,_,p){var E=p("./node_modules/core-js/internals/global.js"),w=p("./node_modules/core-js/internals/inspect-source.js"),x=E.WeakMap;d.exports=typeof x=="function"&&/native code/.test(w(x))},"./node_modules/core-js/internals/object-assign.js":function(d,_,p){var E=p("./node_modules/core-js/internals/descriptors.js"),w=p("./node_modules/core-js/internals/fails.js"),x=p("./node_modules/core-js/internals/object-keys.js"),k=p("./node_modules/core-js/internals/object-get-own-property-symbols.js"),Q=p("./node_modules/core-js/internals/object-property-is-enumerable.js"),R=p("./node_modules/core-js/internals/to-object.js"),M=p("./node_modules/core-js/internals/indexed-object.js"),O=Object.assign,G=Object.defineProperty;d.exports=!O||w(function(){if(E&&O({b:1},O(G({},"a",{enumerable:!0,get:function(){G(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var K={},Z={},$=Symbol(),he="abcdefghijklmnopqrst";return K[$]=7,he.split("").forEach(function(fe){Z[fe]=fe}),O({},K)[$]!=7||x(O({},Z)).join("")!=he})?function(Z,$){for(var he=R(Z),fe=arguments.length,_e=1,ue=k.f,ee=Q.f;fe>_e;)for(var se=M(arguments[_e++]),Be=ue?x(se).concat(ue(se)):x(se),me=Be.length,Pe=0,ge;me>Pe;)ge=Be[Pe++],(!E||ee.call(se,ge))&&(he[ge]=se[ge]);return he}:O},"./node_modules/core-js/internals/object-create.js":function(d,_,p){var E=p("./node_modules/core-js/internals/an-object.js"),w=p("./node_modules/core-js/internals/object-define-properties.js"),x=p("./node_modules/core-js/internals/enum-bug-keys.js"),k=p("./node_modules/core-js/internals/hidden-keys.js"),Q=p("./node_modules/core-js/internals/html.js"),R=p("./node_modules/core-js/internals/document-create-element.js"),M=p("./node_modules/core-js/internals/shared-key.js"),O=">",G="<",K="prototype",Z="script",$=M("IE_PROTO"),he=function(){},fe=function(Be){return G+Z+O+Be+G+"/"+Z+O},_e=function(Be){Be.write(fe("")),Be.close();var me=Be.parentWindow.Object;return Be=null,me},ue=function(){var Be=R("iframe"),me="java"+Z+":",Pe;if(Be.style)return Be.style.display="none",Q.appendChild(Be),Be.src=String(me),Pe=Be.contentWindow.document,Pe.open(),Pe.write(fe("document.F=Object")),Pe.close(),Pe.F},ee,se=function(){try{ee=new ActiveXObject("htmlfile")}catch{}se=document.domain&&ee?_e(ee):ue()||_e(ee);for(var Be=x.length;Be--;)delete se[K][x[Be]];return se()};k[$]=!0,d.exports=Object.create||function(me,Pe){var ge;return me!==null?(he[K]=E(me),ge=new he,he[K]=null,ge[$]=me):ge=se(),Pe===void 0?ge:w(ge,Pe)}},"./node_modules/core-js/internals/object-define-properties.js":function(d,_,p){var E=p("./node_modules/core-js/internals/descriptors.js"),w=p("./node_modules/core-js/internals/object-define-property.js"),x=p("./node_modules/core-js/internals/an-object.js"),k=p("./node_modules/core-js/internals/object-keys.js");d.exports=E?Object.defineProperties:function(R,M){x(R);for(var O=k(M),G=O.length,K=0,Z;G>K;)w.f(R,Z=O[K++],M[Z]);return R}},"./node_modules/core-js/internals/object-define-property.js":function(d,_,p){var E=p("./node_modules/core-js/internals/descriptors.js"),w=p("./node_modules/core-js/internals/ie8-dom-define.js"),x=p("./node_modules/core-js/internals/an-object.js"),k=p("./node_modules/core-js/internals/to-property-key.js"),Q=Object.defineProperty;_.f=E?Q:function(M,O,G){if(x(M),O=k(O),x(G),w)try{return Q(M,O,G)}catch{}if("get"in G||"set"in G)throw TypeError("Accessors not supported");return"value"in G&&(M[O]=G.value),M}},"./node_modules/core-js/internals/object-get-own-property-descriptor.js":function(d,_,p){var E=p("./node_modules/core-js/internals/descriptors.js"),w=p("./node_modules/core-js/internals/object-property-is-enumerable.js"),x=p("./node_modules/core-js/internals/create-property-descriptor.js"),k=p("./node_modules/core-js/internals/to-indexed-object.js"),Q=p("./node_modules/core-js/internals/to-property-key.js"),R=p("./node_modules/core-js/internals/has.js"),M=p("./node_modules/core-js/internals/ie8-dom-define.js"),O=Object.getOwnPropertyDescriptor;_.f=E?O:function(K,Z){if(K=k(K),Z=Q(Z),M)try{return O(K,Z)}catch{}if(R(K,Z))return x(!w.f.call(K,Z),K[Z])}},"./node_modules/core-js/internals/object-get-own-property-names-external.js":function(d,_,p){var E=p("./node_modules/core-js/internals/to-indexed-object.js"),w=p("./node_modules/core-js/internals/object-get-own-property-names.js").f,x={}.toString,k=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Q=function(R){try{return w(R)}catch{return k.slice()}};d.exports.f=function(M){return k&&x.call(M)=="[object Window]"?Q(M):w(E(M))}},"./node_modules/core-js/internals/object-get-own-property-names.js":function(d,_,p){var E=p("./node_modules/core-js/internals/object-keys-internal.js"),w=p("./node_modules/core-js/internals/enum-bug-keys.js"),x=w.concat("length","prototype");_.f=Object.getOwnPropertyNames||function(Q){return E(Q,x)}},"./node_modules/core-js/internals/object-get-own-property-symbols.js":function(d,_){_.f=Object.getOwnPropertySymbols},"./node_modules/core-js/internals/object-get-prototype-of.js":function(d,_,p){var E=p("./node_modules/core-js/internals/has.js"),w=p("./node_modules/core-js/internals/to-object.js"),x=p("./node_modules/core-js/internals/shared-key.js"),k=p("./node_modules/core-js/internals/correct-prototype-getter.js"),Q=x("IE_PROTO"),R=Object.prototype;d.exports=k?Object.getPrototypeOf:function(M){return M=w(M),E(M,Q)?M[Q]:typeof M.constructor=="function"&&M instanceof M.constructor?M.constructor.prototype:M instanceof Object?R:null}},"./node_modules/core-js/internals/object-keys-internal.js":function(d,_,p){var E=p("./node_modules/core-js/internals/has.js"),w=p("./node_modules/core-js/internals/to-indexed-object.js"),x=p("./node_modules/core-js/internals/array-includes.js").indexOf,k=p("./node_modules/core-js/internals/hidden-keys.js");d.exports=function(Q,R){var M=w(Q),O=0,G=[],K;for(K in M)!E(k,K)&&E(M,K)&&G.push(K);for(;R.length>O;)E(M,K=R[O++])&&(~x(G,K)||G.push(K));return G}},"./node_modules/core-js/internals/object-keys.js":function(d,_,p){var E=p("./node_modules/core-js/internals/object-keys-internal.js"),w=p("./node_modules/core-js/internals/enum-bug-keys.js");d.exports=Object.keys||function(k){return E(k,w)}},"./node_modules/core-js/internals/object-property-is-enumerable.js":function(d,_){var p={}.propertyIsEnumerable,E=Object.getOwnPropertyDescriptor,w=E&&!p.call({1:2},1);_.f=w?function(k){var Q=E(this,k);return!!Q&&Q.enumerable}:p},"./node_modules/core-js/internals/object-set-prototype-of.js":function(d,_,p){var E=p("./node_modules/core-js/internals/an-object.js"),w=p("./node_modules/core-js/internals/a-possible-prototype.js");d.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var x=!1,k={},Q;try{Q=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,Q.call(k,[]),x=k instanceof Array}catch{}return function(M,O){return E(M),w(O),x?Q.call(M,O):M.__proto__=O,M}}():void 0)},"./node_modules/core-js/internals/object-to-string.js":function(d,_,p){var E=p("./node_modules/core-js/internals/to-string-tag-support.js"),w=p("./node_modules/core-js/internals/classof.js");d.exports=E?{}.toString:function(){return"[object "+w(this)+"]"}},"./node_modules/core-js/internals/ordinary-to-primitive.js":function(d,_,p){var E=p("./node_modules/core-js/internals/is-object.js");d.exports=function(w,x){var k,Q;if(x==="string"&&typeof(k=w.toString)=="function"&&!E(Q=k.call(w))||typeof(k=w.valueOf)=="function"&&!E(Q=k.call(w))||x!=="string"&&typeof(k=w.toString)=="function"&&!E(Q=k.call(w)))return Q;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/internals/own-keys.js":function(d,_,p){var E=p("./node_modules/core-js/internals/get-built-in.js"),w=p("./node_modules/core-js/internals/object-get-own-property-names.js"),x=p("./node_modules/core-js/internals/object-get-own-property-symbols.js"),k=p("./node_modules/core-js/internals/an-object.js");d.exports=E("Reflect","ownKeys")||function(R){var M=w.f(k(R)),O=x.f;return O?M.concat(O(R)):M}},"./node_modules/core-js/internals/path.js":function(d,_,p){var E=p("./node_modules/core-js/internals/global.js");d.exports=E},"./node_modules/core-js/internals/redefine.js":function(d,_,p){var E=p("./node_modules/core-js/internals/global.js"),w=p("./node_modules/core-js/internals/create-non-enumerable-property.js"),x=p("./node_modules/core-js/internals/has.js"),k=p("./node_modules/core-js/internals/set-global.js"),Q=p("./node_modules/core-js/internals/inspect-source.js"),R=p("./node_modules/core-js/internals/internal-state.js"),M=R.get,O=R.enforce,G=String(String).split("String");(d.exports=function(K,Z,$,he){var fe=he?!!he.unsafe:!1,_e=he?!!he.enumerable:!1,ue=he?!!he.noTargetGet:!1,ee;if(typeof $=="function"&&(typeof Z=="string"&&!x($,"name")&&w($,"name",Z),ee=O($),ee.source||(ee.source=G.join(typeof Z=="string"?Z:""))),K===E){_e?K[Z]=$:k(Z,$);return}else fe?!ue&&K[Z]&&(_e=!0):delete K[Z];_e?K[Z]=$:w(K,Z,$)})(Function.prototype,"toString",function(){return typeof this=="function"&&M(this).source||Q(this)})},"./node_modules/core-js/internals/regexp-flags.js":function(d,_,p){var E=p("./node_modules/core-js/internals/an-object.js");d.exports=function(){var w=E(this),x="";return w.global&&(x+="g"),w.ignoreCase&&(x+="i"),w.multiline&&(x+="m"),w.dotAll&&(x+="s"),w.unicode&&(x+="u"),w.sticky&&(x+="y"),x}},"./node_modules/core-js/internals/require-object-coercible.js":function(d){d.exports=function(_){if(_==null)throw TypeError("Can't call method on "+_);return _}},"./node_modules/core-js/internals/set-global.js":function(d,_,p){var E=p("./node_modules/core-js/internals/global.js");d.exports=function(w,x){try{Object.defineProperty(E,w,{value:x,configurable:!0,writable:!0})}catch{E[w]=x}return x}},"./node_modules/core-js/internals/set-to-string-tag.js":function(d,_,p){var E=p("./node_modules/core-js/internals/object-define-property.js").f,w=p("./node_modules/core-js/internals/has.js"),x=p("./node_modules/core-js/internals/well-known-symbol.js"),k=x("toStringTag");d.exports=function(Q,R,M){Q&&!w(Q=M?Q:Q.prototype,k)&&E(Q,k,{configurable:!0,value:R})}},"./node_modules/core-js/internals/shared-key.js":function(d,_,p){var E=p("./node_modules/core-js/internals/shared.js"),w=p("./node_modules/core-js/internals/uid.js"),x=E("keys");d.exports=function(k){return x[k]||(x[k]=w(k))}},"./node_modules/core-js/internals/shared-store.js":function(d,_,p){var E=p("./node_modules/core-js/internals/global.js"),w=p("./node_modules/core-js/internals/set-global.js"),x="__core-js_shared__",k=E[x]||w(x,{});d.exports=k},"./node_modules/core-js/internals/shared.js":function(d,_,p){var E=p("./node_modules/core-js/internals/is-pure.js"),w=p("./node_modules/core-js/internals/shared-store.js");(d.exports=function(x,k){return w[x]||(w[x]=k!==void 0?k:{})})("versions",[]).push({version:"3.16.0",mode:E?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},"./node_modules/core-js/internals/string-html-forced.js":function(d,_,p){var E=p("./node_modules/core-js/internals/fails.js");d.exports=function(w){return E(function(){var x=""[w]('"');return x!==x.toLowerCase()||x.split('"').length>3})}},"./node_modules/core-js/internals/string-multibyte.js":function(d,_,p){var E=p("./node_modules/core-js/internals/to-integer.js"),w=p("./node_modules/core-js/internals/to-string.js"),x=p("./node_modules/core-js/internals/require-object-coercible.js"),k=function(Q){return function(R,M){var O=w(x(R)),G=E(M),K=O.length,Z,$;return G<0||G>=K?Q?"":void 0:(Z=O.charCodeAt(G),Z<55296||Z>56319||G+1===K||($=O.charCodeAt(G+1))<56320||$>57343?Q?O.charAt(G):Z:Q?O.slice(G,G+2):(Z-55296<<10)+($-56320)+65536)}};d.exports={codeAt:k(!1),charAt:k(!0)}},"./node_modules/core-js/internals/string-trim.js":function(d,_,p){var E=p("./node_modules/core-js/internals/require-object-coercible.js"),w=p("./node_modules/core-js/internals/to-string.js"),x=p("./node_modules/core-js/internals/whitespaces.js"),k="["+x+"]",Q=RegExp("^"+k+k+"*"),R=RegExp(k+k+"*$"),M=function(O){return function(G){var K=w(E(G));return O&1&&(K=K.replace(Q,"")),O&2&&(K=K.replace(R,"")),K}};d.exports={start:M(1),end:M(2),trim:M(3)}},"./node_modules/core-js/internals/to-absolute-index.js":function(d,_,p){var E=p("./node_modules/core-js/internals/to-integer.js"),w=Math.max,x=Math.min;d.exports=function(k,Q){var R=E(k);return R<0?w(R+Q,0):x(R,Q)}},"./node_modules/core-js/internals/to-indexed-object.js":function(d,_,p){var E=p("./node_modules/core-js/internals/indexed-object.js"),w=p("./node_modules/core-js/internals/require-object-coercible.js");d.exports=function(x){return E(w(x))}},"./node_modules/core-js/internals/to-integer.js":function(d){var _=Math.ceil,p=Math.floor;d.exports=function(E){return isNaN(E=+E)?0:(E>0?p:_)(E)}},"./node_modules/core-js/internals/to-length.js":function(d,_,p){var E=p("./node_modules/core-js/internals/to-integer.js"),w=Math.min;d.exports=function(x){return x>0?w(E(x),9007199254740991):0}},"./node_modules/core-js/internals/to-object.js":function(d,_,p){var E=p("./node_modules/core-js/internals/require-object-coercible.js");d.exports=function(w){return Object(E(w))}},"./node_modules/core-js/internals/to-primitive.js":function(d,_,p){var E=p("./node_modules/core-js/internals/is-object.js"),w=p("./node_modules/core-js/internals/is-symbol.js"),x=p("./node_modules/core-js/internals/ordinary-to-primitive.js"),k=p("./node_modules/core-js/internals/well-known-symbol.js"),Q=k("toPrimitive");d.exports=function(R,M){if(!E(R)||w(R))return R;var O=R[Q],G;if(O!==void 0){if(M===void 0&&(M="default"),G=O.call(R,M),!E(G)||w(G))return G;throw TypeError("Can't convert object to primitive value")}return M===void 0&&(M="number"),x(R,M)}},"./node_modules/core-js/internals/to-property-key.js":function(d,_,p){var E=p("./node_modules/core-js/internals/to-primitive.js"),w=p("./node_modules/core-js/internals/is-symbol.js");d.exports=function(x){var k=E(x,"string");return w(k)?k:String(k)}},"./node_modules/core-js/internals/to-string-tag-support.js":function(d,_,p){var E=p("./node_modules/core-js/internals/well-known-symbol.js"),w=E("toStringTag"),x={};x[w]="z",d.exports=String(x)==="[object z]"},"./node_modules/core-js/internals/to-string.js":function(d,_,p){var E=p("./node_modules/core-js/internals/is-symbol.js");d.exports=function(w){if(E(w))throw TypeError("Cannot convert a Symbol value to a string");return String(w)}},"./node_modules/core-js/internals/uid.js":function(d){var _=0,p=Math.random();d.exports=function(E){return"Symbol("+String(E===void 0?"":E)+")_"+(++_+p).toString(36)}},"./node_modules/core-js/internals/use-symbol-as-uid.js":function(d,_,p){var E=p("./node_modules/core-js/internals/native-symbol.js");d.exports=E&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},"./node_modules/core-js/internals/well-known-symbol-wrapped.js":function(d,_,p){var E=p("./node_modules/core-js/internals/well-known-symbol.js");_.f=E},"./node_modules/core-js/internals/well-known-symbol.js":function(d,_,p){var E=p("./node_modules/core-js/internals/global.js"),w=p("./node_modules/core-js/internals/shared.js"),x=p("./node_modules/core-js/internals/has.js"),k=p("./node_modules/core-js/internals/uid.js"),Q=p("./node_modules/core-js/internals/native-symbol.js"),R=p("./node_modules/core-js/internals/use-symbol-as-uid.js"),M=w("wks"),O=E.Symbol,G=R?O:O&&O.withoutSetter||k;d.exports=function(K){return(!x(M,K)||!(Q||typeof M[K]=="string"))&&(Q&&x(O,K)?M[K]=O[K]:M[K]=G("Symbol."+K)),M[K]}},"./node_modules/core-js/internals/whitespaces.js":function(d){d.exports=`	
\v\f\r                　\u2028\u2029\uFEFF`},"./node_modules/core-js/modules/es.array.concat.js":function(d,_,p){var E=p("./node_modules/core-js/internals/export.js"),w=p("./node_modules/core-js/internals/fails.js"),x=p("./node_modules/core-js/internals/is-array.js"),k=p("./node_modules/core-js/internals/is-object.js"),Q=p("./node_modules/core-js/internals/to-object.js"),R=p("./node_modules/core-js/internals/to-length.js"),M=p("./node_modules/core-js/internals/create-property.js"),O=p("./node_modules/core-js/internals/array-species-create.js"),G=p("./node_modules/core-js/internals/array-method-has-species-support.js"),K=p("./node_modules/core-js/internals/well-known-symbol.js"),Z=p("./node_modules/core-js/internals/engine-v8-version.js"),$=K("isConcatSpreadable"),he=9007199254740991,fe="Maximum allowed index exceeded",_e=Z>=51||!w(function(){var Be=[];return Be[$]=!1,Be.concat()[0]!==Be}),ue=G("concat"),ee=function(Be){if(!k(Be))return!1;var me=Be[$];return me!==void 0?!!me:x(Be)},se=!_e||!ue;E({target:"Array",proto:!0,forced:se},{concat:function(me){var Pe=Q(this),ge=O(Pe,0),Qe=0,Te,tt,Oe,Mt,ne;for(Te=-1,Oe=arguments.length;Te<Oe;Te++)if(ne=Te===-1?Pe:arguments[Te],ee(ne)){if(Mt=R(ne.length),Qe+Mt>he)throw TypeError(fe);for(tt=0;tt<Mt;tt++,Qe++)tt in ne&&M(ge,Qe,ne[tt])}else{if(Qe>=he)throw TypeError(fe);M(ge,Qe++,ne)}return ge.length=Qe,ge}})},"./node_modules/core-js/modules/es.array.iterator.js":function(d,_,p){var E=p("./node_modules/core-js/internals/to-indexed-object.js"),w=p("./node_modules/core-js/internals/add-to-unscopables.js"),x=p("./node_modules/core-js/internals/iterators.js"),k=p("./node_modules/core-js/internals/internal-state.js"),Q=p("./node_modules/core-js/internals/define-iterator.js"),R="Array Iterator",M=k.set,O=k.getterFor(R);d.exports=Q(Array,"Array",function(G,K){M(this,{type:R,target:E(G),index:0,kind:K})},function(){var G=O(this),K=G.target,Z=G.kind,$=G.index++;return!K||$>=K.length?(G.target=void 0,{value:void 0,done:!0}):Z=="keys"?{value:$,done:!1}:Z=="values"?{value:K[$],done:!1}:{value:[$,K[$]],done:!1}},"values"),x.Arguments=x.Array,w("keys"),w("values"),w("entries")},"./node_modules/core-js/modules/es.array.join.js":function(d,_,p){var E=p("./node_modules/core-js/internals/export.js"),w=p("./node_modules/core-js/internals/indexed-object.js"),x=p("./node_modules/core-js/internals/to-indexed-object.js"),k=p("./node_modules/core-js/internals/array-method-is-strict.js"),Q=[].join,R=w!=Object,M=k("join",",");E({target:"Array",proto:!0,forced:R||!M},{join:function(G){return Q.call(x(this),G===void 0?",":G)}})},"./node_modules/core-js/modules/es.array.map.js":function(d,_,p){var E=p("./node_modules/core-js/internals/export.js"),w=p("./node_modules/core-js/internals/array-iteration.js").map,x=p("./node_modules/core-js/internals/array-method-has-species-support.js"),k=x("map");E({target:"Array",proto:!0,forced:!k},{map:function(R){return w(this,R,arguments.length>1?arguments[1]:void 0)}})},"./node_modules/core-js/modules/es.array.slice.js":function(d,_,p){var E=p("./node_modules/core-js/internals/export.js"),w=p("./node_modules/core-js/internals/is-object.js"),x=p("./node_modules/core-js/internals/is-array.js"),k=p("./node_modules/core-js/internals/to-absolute-index.js"),Q=p("./node_modules/core-js/internals/to-length.js"),R=p("./node_modules/core-js/internals/to-indexed-object.js"),M=p("./node_modules/core-js/internals/create-property.js"),O=p("./node_modules/core-js/internals/well-known-symbol.js"),G=p("./node_modules/core-js/internals/array-method-has-species-support.js"),K=G("slice"),Z=O("species"),$=[].slice,he=Math.max;E({target:"Array",proto:!0,forced:!K},{slice:function(_e,ue){var ee=R(this),se=Q(ee.length),Be=k(_e,se),me=k(ue===void 0?se:ue,se),Pe,ge,Qe;if(x(ee)&&(Pe=ee.constructor,typeof Pe=="function"&&(Pe===Array||x(Pe.prototype))?Pe=void 0:w(Pe)&&(Pe=Pe[Z],Pe===null&&(Pe=void 0)),Pe===Array||Pe===void 0))return $.call(ee,Be,me);for(ge=new(Pe===void 0?Array:Pe)(he(me-Be,0)),Qe=0;Be<me;Be++,Qe++)Be in ee&&M(ge,Qe,ee[Be]);return ge.length=Qe,ge}})},"./node_modules/core-js/modules/es.function.name.js":function(d,_,p){var E=p("./node_modules/core-js/internals/descriptors.js"),w=p("./node_modules/core-js/internals/object-define-property.js").f,x=Function.prototype,k=x.toString,Q=/^\s*function ([^ (]*)/,R="name";E&&!(R in x)&&w(x,R,{configurable:!0,get:function(){try{return k.call(this).match(Q)[1]}catch{return""}}})},"./node_modules/core-js/modules/es.number.constructor.js":function(d,_,p){var E=p("./node_modules/core-js/internals/descriptors.js"),w=p("./node_modules/core-js/internals/global.js"),x=p("./node_modules/core-js/internals/is-forced.js"),k=p("./node_modules/core-js/internals/redefine.js"),Q=p("./node_modules/core-js/internals/has.js"),R=p("./node_modules/core-js/internals/classof-raw.js"),M=p("./node_modules/core-js/internals/inherit-if-required.js"),O=p("./node_modules/core-js/internals/is-symbol.js"),G=p("./node_modules/core-js/internals/to-primitive.js"),K=p("./node_modules/core-js/internals/fails.js"),Z=p("./node_modules/core-js/internals/object-create.js"),$=p("./node_modules/core-js/internals/object-get-own-property-names.js").f,he=p("./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,fe=p("./node_modules/core-js/internals/object-define-property.js").f,_e=p("./node_modules/core-js/internals/string-trim.js").trim,ue="Number",ee=w[ue],se=ee.prototype,Be=R(Z(se))==ue,me=function(tt){if(O(tt))throw TypeError("Cannot convert a Symbol value to a number");var Oe=G(tt,"number"),Mt,ne,Se,ke,Ke,at,dt,Bt;if(typeof Oe=="string"&&Oe.length>2){if(Oe=_e(Oe),Mt=Oe.charCodeAt(0),Mt===43||Mt===45){if(ne=Oe.charCodeAt(2),ne===88||ne===120)return NaN}else if(Mt===48){switch(Oe.charCodeAt(1)){case 66:case 98:Se=2,ke=49;break;case 79:case 111:Se=8,ke=55;break;default:return+Oe}for(Ke=Oe.slice(2),at=Ke.length,dt=0;dt<at;dt++)if(Bt=Ke.charCodeAt(dt),Bt<48||Bt>ke)return NaN;return parseInt(Ke,Se)}}return+Oe};if(x(ue,!ee(" 0o1")||!ee("0b1")||ee("+0x1"))){for(var Pe=function(Oe){var Mt=arguments.length<1?0:Oe,ne=this;return ne instanceof Pe&&(Be?K(function(){se.valueOf.call(ne)}):R(ne)!=ue)?M(new ee(me(Mt)),ne,Pe):me(Mt)},ge=E?$(ee):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),Qe=0,Te;ge.length>Qe;Qe++)Q(ee,Te=ge[Qe])&&!Q(Pe,Te)&&fe(Pe,Te,he(ee,Te));Pe.prototype=se,se.constructor=Pe,k(w,ue,Pe)}},"./node_modules/core-js/modules/es.object.assign.js":function(d,_,p){var E=p("./node_modules/core-js/internals/export.js"),w=p("./node_modules/core-js/internals/object-assign.js");E({target:"Object",stat:!0,forced:Object.assign!==w},{assign:w})},"./node_modules/core-js/modules/es.object.keys.js":function(d,_,p){var E=p("./node_modules/core-js/internals/export.js"),w=p("./node_modules/core-js/internals/to-object.js"),x=p("./node_modules/core-js/internals/object-keys.js"),k=p("./node_modules/core-js/internals/fails.js"),Q=k(function(){x(1)});E({target:"Object",stat:!0,forced:Q},{keys:function(M){return x(w(M))}})},"./node_modules/core-js/modules/es.object.to-string.js":function(d,_,p){var E=p("./node_modules/core-js/internals/to-string-tag-support.js"),w=p("./node_modules/core-js/internals/redefine.js"),x=p("./node_modules/core-js/internals/object-to-string.js");E||w(Object.prototype,"toString",x,{unsafe:!0})},"./node_modules/core-js/modules/es.regexp.to-string.js":function(d,_,p){var E=p("./node_modules/core-js/internals/redefine.js"),w=p("./node_modules/core-js/internals/an-object.js"),x=p("./node_modules/core-js/internals/to-string.js"),k=p("./node_modules/core-js/internals/fails.js"),Q=p("./node_modules/core-js/internals/regexp-flags.js"),R="toString",M=RegExp.prototype,O=M[R],G=k(function(){return O.call({source:"a",flags:"b"})!="/a/b"}),K=O.name!=R;(G||K)&&E(RegExp.prototype,R,function(){var $=w(this),he=x($.source),fe=$.flags,_e=x(fe===void 0&&$ instanceof RegExp&&!("flags"in M)?Q.call($):fe);return"/"+he+"/"+_e},{unsafe:!0})},"./node_modules/core-js/modules/es.string.iterator.js":function(d,_,p){var E=p("./node_modules/core-js/internals/string-multibyte.js").charAt,w=p("./node_modules/core-js/internals/to-string.js"),x=p("./node_modules/core-js/internals/internal-state.js"),k=p("./node_modules/core-js/internals/define-iterator.js"),Q="String Iterator",R=x.set,M=x.getterFor(Q);k(String,"String",function(O){R(this,{type:Q,string:w(O),index:0})},function(){var G=M(this),K=G.string,Z=G.index,$;return Z>=K.length?{value:void 0,done:!0}:($=E(K,Z),G.index+=$.length,{value:$,done:!1})})},"./node_modules/core-js/modules/es.string.link.js":function(d,_,p){var E=p("./node_modules/core-js/internals/export.js"),w=p("./node_modules/core-js/internals/create-html.js"),x=p("./node_modules/core-js/internals/string-html-forced.js");E({target:"String",proto:!0,forced:x("link")},{link:function(Q){return w(this,"a","href",Q)}})},"./node_modules/core-js/modules/es.symbol.description.js":function(d,_,p){var E=p("./node_modules/core-js/internals/export.js"),w=p("./node_modules/core-js/internals/descriptors.js"),x=p("./node_modules/core-js/internals/global.js"),k=p("./node_modules/core-js/internals/has.js"),Q=p("./node_modules/core-js/internals/is-object.js"),R=p("./node_modules/core-js/internals/object-define-property.js").f,M=p("./node_modules/core-js/internals/copy-constructor-properties.js"),O=x.Symbol;if(w&&typeof O=="function"&&(!("description"in O.prototype)||O().description!==void 0)){var G={},K=function(){var ue=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),ee=this instanceof K?new O(ue):ue===void 0?O():O(ue);return ue===""&&(G[ee]=!0),ee};M(K,O);var Z=K.prototype=O.prototype;Z.constructor=K;var $=Z.toString,he=String(O("test"))=="Symbol(test)",fe=/^Symbol\((.*)\)[^)]+$/;R(Z,"description",{configurable:!0,get:function(){var ue=Q(this)?this.valueOf():this,ee=$.call(ue);if(k(G,ue))return"";var se=he?ee.slice(7,-1):ee.replace(fe,"$1");return se===""?void 0:se}}),E({global:!0,forced:!0},{Symbol:K})}},"./node_modules/core-js/modules/es.symbol.iterator.js":function(d,_,p){var E=p("./node_modules/core-js/internals/define-well-known-symbol.js");E("iterator")},"./node_modules/core-js/modules/es.symbol.js":function(d,_,p){var E=p("./node_modules/core-js/internals/export.js"),w=p("./node_modules/core-js/internals/global.js"),x=p("./node_modules/core-js/internals/get-built-in.js"),k=p("./node_modules/core-js/internals/is-pure.js"),Q=p("./node_modules/core-js/internals/descriptors.js"),R=p("./node_modules/core-js/internals/native-symbol.js"),M=p("./node_modules/core-js/internals/fails.js"),O=p("./node_modules/core-js/internals/has.js"),G=p("./node_modules/core-js/internals/is-array.js"),K=p("./node_modules/core-js/internals/is-object.js"),Z=p("./node_modules/core-js/internals/is-symbol.js"),$=p("./node_modules/core-js/internals/an-object.js"),he=p("./node_modules/core-js/internals/to-object.js"),fe=p("./node_modules/core-js/internals/to-indexed-object.js"),_e=p("./node_modules/core-js/internals/to-property-key.js"),ue=p("./node_modules/core-js/internals/to-string.js"),ee=p("./node_modules/core-js/internals/create-property-descriptor.js"),se=p("./node_modules/core-js/internals/object-create.js"),Be=p("./node_modules/core-js/internals/object-keys.js"),me=p("./node_modules/core-js/internals/object-get-own-property-names.js"),Pe=p("./node_modules/core-js/internals/object-get-own-property-names-external.js"),ge=p("./node_modules/core-js/internals/object-get-own-property-symbols.js"),Qe=p("./node_modules/core-js/internals/object-get-own-property-descriptor.js"),Te=p("./node_modules/core-js/internals/object-define-property.js"),tt=p("./node_modules/core-js/internals/object-property-is-enumerable.js"),Oe=p("./node_modules/core-js/internals/create-non-enumerable-property.js"),Mt=p("./node_modules/core-js/internals/redefine.js"),ne=p("./node_modules/core-js/internals/shared.js"),Se=p("./node_modules/core-js/internals/shared-key.js"),ke=p("./node_modules/core-js/internals/hidden-keys.js"),Ke=p("./node_modules/core-js/internals/uid.js"),at=p("./node_modules/core-js/internals/well-known-symbol.js"),dt=p("./node_modules/core-js/internals/well-known-symbol-wrapped.js"),Bt=p("./node_modules/core-js/internals/define-well-known-symbol.js"),Ge=p("./node_modules/core-js/internals/set-to-string-tag.js"),rt=p("./node_modules/core-js/internals/internal-state.js"),Ut=p("./node_modules/core-js/internals/array-iteration.js").forEach,ht=Se("hidden"),Nt="Symbol",dr="prototype",Lt=at("toPrimitive"),ze=rt.set,gr=rt.getterFor(Nt),sr=Object[dr],Ht=w.Symbol,fr=x("JSON","stringify"),Br=Qe.f,vr=Te.f,Gr=Pe.f,rr=tt.f,xr=ne("symbols"),Zr=ne("op-symbols"),pn=ne("string-to-symbol-registry"),vt=ne("symbol-to-string-registry"),nt=ne("wks"),bt=w.QObject,Ct=!bt||!bt[dr]||!bt[dr].findChild,jt=Q&&M(function(){return se(vr({},"a",{get:function(){return vr(this,"a",{value:7}).a}})).a!=7})?function(br,Cr,cr){var Kr=Br(sr,Cr);Kr&&delete sr[Cr],vr(br,Cr,cr),Kr&&br!==sr&&vr(sr,Cr,Kr)}:vr,er=function(br,Cr){var cr=xr[br]=se(Ht[dr]);return ze(cr,{type:Nt,tag:br,description:Cr}),Q||(cr.description=Cr),cr},Vr=function(Cr,cr,Kr){Cr===sr&&Vr(Zr,cr,Kr),$(Cr);var hn=_e(cr);return $(Kr),O(xr,hn)?(Kr.enumerable?(O(Cr,ht)&&Cr[ht][hn]&&(Cr[ht][hn]=!1),Kr=se(Kr,{enumerable:ee(0,!1)})):(O(Cr,ht)||vr(Cr,ht,ee(1,{})),Cr[ht][hn]=!0),jt(Cr,hn,Kr)):vr(Cr,hn,Kr)},Fr=function(Cr,cr){$(Cr);var Kr=fe(cr),hn=Be(Kr).concat(wn(Kr));return Ut(hn,function(xn){(!Q||lr.call(Kr,xn))&&Vr(Cr,xn,Kr[xn])}),Cr},un=function(Cr,cr){return cr===void 0?se(Cr):Fr(se(Cr),cr)},lr=function(Cr){var cr=_e(Cr),Kr=rr.call(this,cr);return this===sr&&O(xr,cr)&&!O(Zr,cr)?!1:Kr||!O(this,cr)||!O(xr,cr)||O(this,ht)&&this[ht][cr]?Kr:!0},Er=function(Cr,cr){var Kr=fe(Cr),hn=_e(cr);if(!(Kr===sr&&O(xr,hn)&&!O(Zr,hn))){var xn=Br(Kr,hn);return xn&&O(xr,hn)&&!(O(Kr,ht)&&Kr[ht][hn])&&(xn.enumerable=!0),xn}},An=function(Cr){var cr=Gr(fe(Cr)),Kr=[];return Ut(cr,function(hn){!O(xr,hn)&&!O(ke,hn)&&Kr.push(hn)}),Kr},wn=function(Cr){var cr=Cr===sr,Kr=Gr(cr?Zr:fe(Cr)),hn=[];return Ut(Kr,function(xn){O(xr,xn)&&(!cr||O(sr,xn))&&hn.push(xr[xn])}),hn};if(R||(Ht=function(){if(this instanceof Ht)throw TypeError("Symbol is not a constructor");var Cr=!arguments.length||arguments[0]===void 0?void 0:ue(arguments[0]),cr=Ke(Cr),Kr=function(hn){this===sr&&Kr.call(Zr,hn),O(this,ht)&&O(this[ht],cr)&&(this[ht][cr]=!1),jt(this,cr,ee(1,hn))};return Q&&Ct&&jt(sr,cr,{configurable:!0,set:Kr}),er(cr,Cr)},Mt(Ht[dr],"toString",function(){return gr(this).tag}),Mt(Ht,"withoutSetter",function(br){return er(Ke(br),br)}),tt.f=lr,Te.f=Vr,Qe.f=Er,me.f=Pe.f=An,ge.f=wn,dt.f=function(br){return er(at(br),br)},Q&&(vr(Ht[dr],"description",{configurable:!0,get:function(){return gr(this).description}}),k||Mt(sr,"propertyIsEnumerable",lr,{unsafe:!0}))),E({global:!0,wrap:!0,forced:!R,sham:!R},{Symbol:Ht}),Ut(Be(nt),function(br){Bt(br)}),E({target:Nt,stat:!0,forced:!R},{for:function(br){var Cr=ue(br);if(O(pn,Cr))return pn[Cr];var cr=Ht(Cr);return pn[Cr]=cr,vt[cr]=Cr,cr},keyFor:function(Cr){if(!Z(Cr))throw TypeError(Cr+" is not a symbol");if(O(vt,Cr))return vt[Cr]},useSetter:function(){Ct=!0},useSimple:function(){Ct=!1}}),E({target:"Object",stat:!0,forced:!R,sham:!Q},{create:un,defineProperty:Vr,defineProperties:Fr,getOwnPropertyDescriptor:Er}),E({target:"Object",stat:!0,forced:!R},{getOwnPropertyNames:An,getOwnPropertySymbols:wn}),E({target:"Object",stat:!0,forced:M(function(){ge.f(1)})},{getOwnPropertySymbols:function(Cr){return ge.f(he(Cr))}}),fr){var _i=!R||M(function(){var br=Ht();return fr([br])!="[null]"||fr({a:br})!="{}"||fr(Object(br))!="{}"});E({target:"JSON",stat:!0,forced:_i},{stringify:function(Cr,cr,Kr){for(var hn=[Cr],xn=1,Sn;arguments.length>xn;)hn.push(arguments[xn++]);if(Sn=cr,!(!K(cr)&&Cr===void 0||Z(Cr)))return G(cr)||(cr=function(ji,tn){if(typeof Sn=="function"&&(tn=Sn.call(this,ji,tn)),!Z(tn))return tn}),hn[1]=cr,fr.apply(null,hn)}})}Ht[dr][Lt]||Oe(Ht[dr],Lt,Ht[dr].valueOf),Ge(Ht,Nt),ke[ht]=!0},"./node_modules/core-js/modules/web.dom-collections.for-each.js":function(d,_,p){var E=p("./node_modules/core-js/internals/global.js"),w=p("./node_modules/core-js/internals/dom-iterables.js"),x=p("./node_modules/core-js/internals/array-for-each.js"),k=p("./node_modules/core-js/internals/create-non-enumerable-property.js");for(var Q in w){var R=E[Q],M=R&&R.prototype;if(M&&M.forEach!==x)try{k(M,"forEach",x)}catch{M.forEach=x}}},"./node_modules/core-js/modules/web.dom-collections.iterator.js":function(d,_,p){var E=p("./node_modules/core-js/internals/global.js"),w=p("./node_modules/core-js/internals/dom-iterables.js"),x=p("./node_modules/core-js/modules/es.array.iterator.js"),k=p("./node_modules/core-js/internals/create-non-enumerable-property.js"),Q=p("./node_modules/core-js/internals/well-known-symbol.js"),R=Q("iterator"),M=Q("toStringTag"),O=x.values;for(var G in w){var K=E[G],Z=K&&K.prototype;if(Z){if(Z[R]!==O)try{k(Z,R,O)}catch{Z[R]=O}if(Z[M]||k(Z,M,G),w[G]){for(var $ in x)if(Z[$]!==x[$])try{k(Z,$,x[$])}catch{Z[$]=x[$]}}}}},"./node_modules/es6-promise/dist/es6-promise.js":function(d){/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */(function(_,p){d.exports=p()})(this,function(){function _(bt){var Ct=typeof bt;return bt!==null&&(Ct==="object"||Ct==="function")}function p(bt){return typeof bt=="function"}var E=void 0;Array.isArray?E=Array.isArray:E=function(bt){return Object.prototype.toString.call(bt)==="[object Array]"};var w=E,x=0,k=void 0,Q=void 0,R=function(Ct,jt){Be[x]=Ct,Be[x+1]=jt,x+=2,x===2&&(Q?Q(me):ge())};function M(bt){Q=bt}function O(bt){R=bt}var G=typeof window<"u"?window:void 0,K=G||{},Z=K.MutationObserver||K.WebKitMutationObserver,$=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",he=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function fe(){return function(){return process.nextTick(me)}}function _e(){return typeof k<"u"?function(){k(me)}:se()}function ue(){var bt=0,Ct=new Z(me),jt=document.createTextNode("");return Ct.observe(jt,{characterData:!0}),function(){jt.data=bt=++bt%2}}function ee(){var bt=new MessageChannel;return bt.port1.onmessage=me,function(){return bt.port2.postMessage(0)}}function se(){var bt=setTimeout;return function(){return bt(me,1)}}var Be=new Array(1e3);function me(){for(var bt=0;bt<x;bt+=2){var Ct=Be[bt],jt=Be[bt+1];Ct(jt),Be[bt]=void 0,Be[bt+1]=void 0}x=0}function Pe(){try{var bt=Function("return this")().require("vertx");return k=bt.runOnLoop||bt.runOnContext,_e()}catch{return se()}}var ge=void 0;$?ge=fe():Z?ge=ue():he?ge=ee():G===void 0?ge=Pe():ge=se();function Qe(bt,Ct){var jt=this,er=new this.constructor(Oe);er[tt]===void 0&&fr(er);var Vr=jt._state;if(Vr){var Fr=arguments[Vr-1];R(function(){return ze(Vr,er,Fr,jt._result)})}else dr(jt,er,bt,Ct);return er}function Te(bt){var Ct=this;if(bt&&typeof bt=="object"&&bt.constructor===Ct)return bt;var jt=new Ct(Oe);return rt(jt,bt),jt}var tt=Math.random().toString(36).substring(2);function Oe(){}var Mt=void 0,ne=1,Se=2;function ke(){return new TypeError("You cannot resolve a promise with itself")}function Ke(){return new TypeError("A promises callback cannot return that same promise.")}function at(bt,Ct,jt,er){try{bt.call(Ct,jt,er)}catch(Vr){return Vr}}function dt(bt,Ct,jt){R(function(er){var Vr=!1,Fr=at(jt,Ct,function(un){Vr||(Vr=!0,Ct!==un?rt(er,un):ht(er,un))},function(un){Vr||(Vr=!0,Nt(er,un))},"Settle: "+(er._label||" unknown promise"));!Vr&&Fr&&(Vr=!0,Nt(er,Fr))},bt)}function Bt(bt,Ct){Ct._state===ne?ht(bt,Ct._result):Ct._state===Se?Nt(bt,Ct._result):dr(Ct,void 0,function(jt){return rt(bt,jt)},function(jt){return Nt(bt,jt)})}function Ge(bt,Ct,jt){Ct.constructor===bt.constructor&&jt===Qe&&Ct.constructor.resolve===Te?Bt(bt,Ct):jt===void 0?ht(bt,Ct):p(jt)?dt(bt,Ct,jt):ht(bt,Ct)}function rt(bt,Ct){if(bt===Ct)Nt(bt,ke());else if(_(Ct)){var jt=void 0;try{jt=Ct.then}catch(er){Nt(bt,er);return}Ge(bt,Ct,jt)}else ht(bt,Ct)}function Ut(bt){bt._onerror&&bt._onerror(bt._result),Lt(bt)}function ht(bt,Ct){bt._state===Mt&&(bt._result=Ct,bt._state=ne,bt._subscribers.length!==0&&R(Lt,bt))}function Nt(bt,Ct){bt._state===Mt&&(bt._state=Se,bt._result=Ct,R(Ut,bt))}function dr(bt,Ct,jt,er){var Vr=bt._subscribers,Fr=Vr.length;bt._onerror=null,Vr[Fr]=Ct,Vr[Fr+ne]=jt,Vr[Fr+Se]=er,Fr===0&&bt._state&&R(Lt,bt)}function Lt(bt){var Ct=bt._subscribers,jt=bt._state;if(Ct.length!==0){for(var er=void 0,Vr=void 0,Fr=bt._result,un=0;un<Ct.length;un+=3)er=Ct[un],Vr=Ct[un+jt],er?ze(jt,er,Vr,Fr):Vr(Fr);bt._subscribers.length=0}}function ze(bt,Ct,jt,er){var Vr=p(jt),Fr=void 0,un=void 0,lr=!0;if(Vr){try{Fr=jt(er)}catch(Er){lr=!1,un=Er}if(Ct===Fr){Nt(Ct,Ke());return}}else Fr=er;Ct._state!==Mt||(Vr&&lr?rt(Ct,Fr):lr===!1?Nt(Ct,un):bt===ne?ht(Ct,Fr):bt===Se&&Nt(Ct,Fr))}function gr(bt,Ct){try{Ct(function(er){rt(bt,er)},function(er){Nt(bt,er)})}catch(jt){Nt(bt,jt)}}var sr=0;function Ht(){return sr++}function fr(bt){bt[tt]=sr++,bt._state=void 0,bt._result=void 0,bt._subscribers=[]}function Br(){return new Error("Array Methods must be provided an Array")}var vr=function(){function bt(Ct,jt){this._instanceConstructor=Ct,this.promise=new Ct(Oe),this.promise[tt]||fr(this.promise),w(jt)?(this.length=jt.length,this._remaining=jt.length,this._result=new Array(this.length),this.length===0?ht(this.promise,this._result):(this.length=this.length||0,this._enumerate(jt),this._remaining===0&&ht(this.promise,this._result))):Nt(this.promise,Br())}return bt.prototype._enumerate=function(jt){for(var er=0;this._state===Mt&&er<jt.length;er++)this._eachEntry(jt[er],er)},bt.prototype._eachEntry=function(jt,er){var Vr=this._instanceConstructor,Fr=Vr.resolve;if(Fr===Te){var un=void 0,lr=void 0,Er=!1;try{un=jt.then}catch(wn){Er=!0,lr=wn}if(un===Qe&&jt._state!==Mt)this._settledAt(jt._state,er,jt._result);else if(typeof un!="function")this._remaining--,this._result[er]=jt;else if(Vr===vt){var An=new Vr(Oe);Er?Nt(An,lr):Ge(An,jt,un),this._willSettleAt(An,er)}else this._willSettleAt(new Vr(function(wn){return wn(jt)}),er)}else this._willSettleAt(Fr(jt),er)},bt.prototype._settledAt=function(jt,er,Vr){var Fr=this.promise;Fr._state===Mt&&(this._remaining--,jt===Se?Nt(Fr,Vr):this._result[er]=Vr),this._remaining===0&&ht(Fr,this._result)},bt.prototype._willSettleAt=function(jt,er){var Vr=this;dr(jt,void 0,function(Fr){return Vr._settledAt(ne,er,Fr)},function(Fr){return Vr._settledAt(Se,er,Fr)})},bt}();function Gr(bt){return new vr(this,bt).promise}function rr(bt){var Ct=this;return w(bt)?new Ct(function(jt,er){for(var Vr=bt.length,Fr=0;Fr<Vr;Fr++)Ct.resolve(bt[Fr]).then(jt,er)}):new Ct(function(jt,er){return er(new TypeError("You must pass an array to race."))})}function xr(bt){var Ct=this,jt=new Ct(Oe);return Nt(jt,bt),jt}function Zr(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function pn(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var vt=function(){function bt(Ct){this[tt]=Ht(),this._result=this._state=void 0,this._subscribers=[],Oe!==Ct&&(typeof Ct!="function"&&Zr(),this instanceof bt?gr(this,Ct):pn())}return bt.prototype.catch=function(jt){return this.then(null,jt)},bt.prototype.finally=function(jt){var er=this,Vr=er.constructor;return p(jt)?er.then(function(Fr){return Vr.resolve(jt()).then(function(){return Fr})},function(Fr){return Vr.resolve(jt()).then(function(){throw Fr})}):er.then(jt,jt)},bt}();vt.prototype.then=Qe,vt.all=Gr,vt.race=rr,vt.resolve=Te,vt.reject=xr,vt._setScheduler=M,vt._setAsap=O,vt._asap=R;function nt(){var bt=void 0;if(typeof Hl<"u")bt=Hl;else if(typeof self<"u")bt=self;else try{bt=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var Ct=bt.Promise;if(Ct){var jt=null;try{jt=Object.prototype.toString.call(Ct.resolve())}catch{}if(jt==="[object Promise]"&&!Ct.cast)return}bt.Promise=vt}return vt.polyfill=nt,vt.Promise=vt,vt})},html2canvas:function(d){d.exports=s},jspdf:function(d){d.exports=r}},c={};function h(d){var _=c[d];if(_!==void 0)return _.exports;var p=c[d]={exports:{}};return l[d].call(p.exports,p,p.exports,h),p.exports}(function(){h.n=function(d){var _=d&&d.__esModule?function(){return d.default}:function(){return d};return h.d(_,{a:_}),_}})(),function(){h.d=function(d,_){for(var p in _)h.o(_,p)&&!h.o(d,p)&&Object.defineProperty(d,p,{enumerable:!0,get:_[p]})}}(),function(){h.o=function(d,_){return Object.prototype.hasOwnProperty.call(d,_)}}(),function(){h.r=function(d){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(d,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(d,"__esModule",{value:!0})}}();var a={};return function(){/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/h.r(a);var d=h("./src/worker.js");h("./src/plugin/jspdf-plugin.js"),h("./src/plugin/pagebreaks.js"),h("./src/plugin/hyperlinks.js");var _=function p(E,w){var x=new p.Worker(w);return E?x.from(E).save():x};_.Worker=d.default,a.default=_}(),a=a.default,a}()})})(_F);const CS=e=>({parishname:e&1}),Ry=e=>({parishname:e[0]});function ES(e){let t,r,s,l,c,h,a,d,_,p,E,w,x,k,Q,R,M,O,G,K,Z,$,he,fe,_e,ue,ee,se,Be,me;const Pe=e[6].default,ge=wA(Pe,e,e[5],Ry);return k=new O1({props:{parishTitle:e[3]}}),M=new vF({props:{items:e[1],parishname:e[2]}}),he=new O1({props:{parishTitle:e[3]}}),ee=new nv({}),{c(){t=kt("div"),ge&&ge.c(),r=$t(),s=kt("div"),l=kt("div"),c=kt("a"),c.textContent="Louisiana Locked Up: A Problem in Every Parish",h=Ir(`
      / `),a=Ir(e[2]),d=Ir(`
      Parish`),_=$t(),p=kt("div"),E=kt("h1"),E.textContent=`${e[2]} Parish`,w=$t(),x=kt("section"),yr(k.$$.fragment),Q=$t(),R=kt("section"),yr(M.$$.fragment),O=$t(),G=kt("div"),K=kt("h1"),K.textContent=`${e[2]} Parish`,Z=$t(),$=kt("section"),yr(he.$$.fragment),fe=$t(),_e=kt("div"),ue=kt("section"),yr(ee.$$.fragment),ce(c,"href","#parishes"),ce(c,"class","jumpto"),ce(l,"id","breadcrumb"),ce(l,"class","svelte-4i2o49"),ce(s,"id","parish_header"),ce(s,"class","svelte-4i2o49"),ce(E,"class","parish__title svelte-4i2o49"),ce(x,"class","top svelte-4i2o49"),ce(R,"class","tabs"),ce(R,"data-html2canvas-ignore","true"),ce(p,"id","parish__container"),ce(p,"class","svelte-4i2o49"),ce(K,"class","parish__title_pdf svelte-4i2o49"),ce($,"class","top svelte-4i2o49"),ce(G,"id","parish__container__pdf"),ce(G,"class","svelte-4i2o49"),ce(ue,"class","about_data"),ce(_e,"id","parish_footer"),ce(_e,"class","svelte-4i2o49"),ce(t,"id","center"),ce(t,"class","svelte-4i2o49")},m(Qe,Te){ot(Qe,t,Te),ge&&ge.m(t,null),st(t,r),st(t,s),st(s,l),st(l,c),st(l,h),st(l,a),st(l,d),st(t,_),st(t,p),st(p,E),st(p,w),st(p,x),pr(k,x,null),st(p,Q),st(p,R),pr(M,R,null),st(t,O),st(t,G),st(G,K),st(G,Z),st(G,$),pr(he,$,null),st(t,fe),st(t,_e),st(_e,ue),pr(ee,ue,null),se=!0,Be||(me=us(c,"click",e[4]),Be=!0)},p(Qe,[Te]){ge&&ge.p&&(!se||Te&33)&&xA(ge,Pe,Qe,Qe[5],se?bA(Pe,Qe[5],Te,CS):BA(Qe[5]),Ry);const tt={};Te&2&&(tt.items=Qe[1]),M.$set(tt)},i(Qe){se||(Pt(ge,Qe),Pt(k.$$.fragment,Qe),Pt(M.$$.fragment,Qe),Pt(he.$$.fragment,Qe),Pt(ee.$$.fragment,Qe),se=!0)},o(Qe){Gt(ge,Qe),Gt(k.$$.fragment,Qe),Gt(M.$$.fragment,Qe),Gt(he.$$.fragment,Qe),Gt(ee.$$.fragment,Qe),se=!1},d(Qe){Qe&&it(t),ge&&ge.d(Qe),mr(k),mr(M),mr(he),mr(ee),Be=!1,me()}}}function FS(e,t,r){let{$$slots:s={},$$scope:l}=t;Yh();let{params:c}=t;const h=async()=>{};let a=c.id,d=[],_=a,p=[];Wa(async()=>{window.scrollTo(0,0),h(),d=(await(await fetch("https://vera-insights-data-viz.s3.amazonaws.com/california/california.json")).json()).features,d.filter(k=>k.properties.NAME_condensed===a),a=="Catahoula"||a=="Iberia"||a=="Grant"?r(1,p=[{label:"Jail and Prisons",value:1,component:ey},{label:"Pretrial",value:3,component:Ay},{label:"Budget",value:4,component:ly}]):r(1,p=[{label:"Jail and Prisons",value:1,component:ey},{label:"Arrests",value:2,component:mF},{label:"Pretrial",value:3,component:Ay},{label:"Budget",value:4,component:ly}])});function E(){pl("/louisiana-locked-up/"),window.scrollTo({bottom:0,behavior:"smooth"})}return e.$$set=w=>{"params"in w&&r(0,c=w.params),"$$scope"in w&&r(5,l=w.$$scope)},[c,p,a,_,E,l,s]}class SS extends ai{constructor(t){super(),si(this,t,FS,ES,ri,{params:0})}}function IS(e){let t;return{c(){t=kt("div"),t.innerHTML=`<div id="breadcrumb"><a href="/louisiana-locked-up/">Louisiana Locked Up: A Problem in Every Parish</a> / About the Data</div> 
  <h1 class="svelte-ep3o1">About the Data</h1> 
  <p>Vera collected data for Louisiana’s prisons, jails, and juvenile justice
    facilities using information published on state and local government
    websites and the U.S. Bureau of Justice Statistics 2019 Census of Jails.
    Vera collected pretrial population data from reports prepared by the
    Louisiana Department of Public Safety &amp; Corrections (DPS&amp;C). Vera collected
    prison admission data from the DPS&amp;C Briefing Book. Vera collected arrest
    data from the FBI Uniform Crime Report accessed via Vera’s Arrest Trends
    tool. Vera collected budget data from the U.S. Census Annual Survey of
    Public Employment &amp; Payroll</p> 
  <section><h2 class="svelte-ep3o1">Jails</h2> 
    <p>Vera compiled data for Louisiana’s jails using information obtained from
      the U.S. Bureau of Justice Statistics <a href="https://www.icpsr.umich.edu/web/NACJD/studies/38323/versions/V1" target="_blank">Census of Jails (2019)</a>
      and the DPS&amp;C
      <a href="https://doc.louisiana.gov/about-the-dpsc/facility-locations/" target="_blank">facilities directory</a>, which includes directly operated state prisons as well as the many
      “local facilities” (jails) the department uses to hold people that have
      received a state prison sentence. Vera used information from
      <a href="https://www.incarcerationtransparency.org/" target="_blank">Incarceration Transparency</a>
      to identify facilities that were not included in the aforementioned sources.
      Memos on the Incarceration Transparency website (e.g.,
      <a href="https://www.incarcerationtransparency.org/wp-content/uploads/2022/01/Claiborne-Parish-Detention-Center-Memo.pdf" target="_blank">Claiborne Parish</a>) were helpful to discern the number of facilities in a parish and
      details about their capacity and operators.</p> 

    <p>Discrepancies between these lists required follow-up research (e.g.,
      review of government agency websites, news articles, and phone calls to
      jails) to determine a facility’s current operator, capacity, address, and
      whether it operates a Transitional Work Program (TWP). For example, some
      municipal jails were not reported in the Census of Jails but were included
      in research on the Incarceration Transparency website (e.g., Westlake City
      Jail). Consequently, Vera contacted every city police department included
      in a <a href="http://www.lsp.org/links_city.html" target="_blank">directory</a> published by the Louisiana State Police to discern whether they operated
      a jail and, if so, the capacity and location of the facility.</p> 

    <p>Vera counted each facility as distinct if it had its own address. Vera
      gathered information on the capacity for correctional facilities from the
      <a href="https://lclelsac.com/wp-content/uploads/2022/04/2021-SSLCFPR-Report.pdf" target="_blank">2021 Status of State and Local Corrections Facilities and Program
        Report (SSLCFPR)</a>, which was prepared by the Louisiana Commission on Law Enforcement and
      Administration of Criminal Justice. Vera researchers used facility
      directories on the
      <a href="https://lasallecorrections.com/locations/" target="_blank">La Salle Corrections</a>
      and
      <a href="https://www.geogroup.com/Locations" target="_blank">GEO Group</a>
      websites to identify the facilities operated by these companies.</p> 

    <p>Discerning which facilities currently operate a TWP required extensive
      research because of errors in the DPS&amp;C facility directory and
      inconsistencies between the department’s most recent reports (the <a href="https://s32082.pcdn.co/wp-content/uploads/2022/06/Catalog-of-Rehabiltation-Program-2021.pdf" target="_blank">2021 Catalog of Rehabilitative Programs</a>
      and the
      <a href="https://lclelsac.com/wp-content/uploads/2022/04/2021-SSLCFPR-Report.pdf" target="_blank">2021 Status of State and Local Corrections Facilities and Program
        Report</a>). In instances of conflicting information, Vera researchers called
      parish sheriffs to confirm whether they operate a TWP program.</p> 

    <p>Vera estimated the revenue DPS&amp;C paid to local facilities in 2021 by
      multiplying the number of people held for DPS&amp;C in November 20201, per the
      DPS&amp;C <a href="https://jlcb.legis.la.gov/Docs/2021/dec/December%202021%20RTC%20Act%20119%20of%202021%20Corrections.pdf" target="_blank">Report of the Offender Census at Local Correctional Facilities</a>, by the daily rate of $26.39 ($9,632 annually). Vera estimated revenue
      DPS&amp;C paid to local facilities for people in the TWP by multiplying this
      population in November 2021 by the daily rate of $11.25 ($4,160 annually).
      According to the December 10, 2021 DPS&amp;C report to the Joint Legislative
      Committee on the Budget, $12.25 is paid to contracted TWP providers who
      fill the available beds first with TWP participants. The other providers
      are paid a per diem of $16.39 because they do not have a contract with
      Corrections that guarantees the department will place TWP offenders with
      their program first. Vera used the lesser of these two rates because the
      researchers did not know the nature of each contract.</p> 

    <p>Vera obtained information on the U.S. Immigration and Customs Enforcement
      (ICE) population held in jails from archived copies of the agency’s
      <a href="https://www.ice.gov/detain/detention-management" target="_blank">Detention Statistics</a>
      because the DPS&amp;C
      <a href="https://jlcb.legis.la.gov/Docs/2021/dec/December%202021%20RTC%20Act%20119%20of%202021%20Corrections.pdf" target="_blank">report of the Offender Census at Local Correctional Facilities</a> does not include ICE statistics for the facilities that are operated by GEO
      Group under contracts with ICE. Vera computed the ICE Average Daily Population
      for the period December 4, 2021 – December 18, 2021 to estimate the ICE population
      at approximately the same time as the rest of the jail population for the parish.</p></section> 
  <section><h2 class="svelte-ep3o1">Pretrial population</h2> 
    <p>Vera collected 2021 parish-level pretrial jail population data from the
      DPS&amp;C <a href="https://jlcb.legis.la.gov/Docs/2021/dec/December%202021%20RTC%20Act%20119%20of%202021%20Corrections.pdf" target="_blank">report of the Offender Census at Local Correctional Facilities</a>. DPS&amp;C supplied these reports in memorandum to the
      <a href="https://jlcb.legis.la.gov/default_Archives2021" target="_blank">Joint Legislative Committee on the Budget (JLCB)</a> because DPS&amp;C pays local jails to hold more than half the state’s prison
      population. The report includes the operational capacity of each “local facility”
      (jail) and provides the number of people the jail holds for DPS&amp;C, the DPS&amp;C
      Transitional Work Program, U.S. Immigration and Customs Enforcement (ICE),
      “Federal Offenders” (the U.S. Marshals and Bureau of Prisons), as well as the
      number of people held “pretrial” and in “Parish” custody (meaning a jail sentence).</p> 

    <p>Pretrial data for 58 of the 64 parishes is as of November 26, 2021, which
      Vera obtained from a December 10, 2021, <a href="https://jlcb.legis.la.gov/Docs/2021/dec/December%202021%20RTC%20Act%20119%20of%202021%20Corrections.pdf" target="_blank">memo</a> to the JLCB. Vera collected data from earlier reports in 2021 for six parishes
      that did not supply pretrial data in the November report: Allen Parish (April
      2021), Cameron Parish (July 2021), Jackson Parish (May 2021), Richland Parish
      (July 2021), St. Mary Parish (July 2021), and Terrebonne Parish (July 2021).
      Although Richland and St. Mary reported November 2021 data, the pretrial populations
      in this report (four and three, respectively) were conspicuously low compared
      to values in July (21 and 127, respectively), so Vera instead used pretrial
      data from July 2021.</p> 

    <p>Nine parishes (Acadia, Beauregard, Caldwell, De Soto, Morehouse,
      Plaquemines, Pointe Coupee, Sabine, and St. Landry) indicated that their
      pretrial population was “0” in the data they supplied to DPS&amp;C in all
      their 2021 reports. This is not plausible given the number of people these
      same parishes sentenced to prison annually, and this information also
      conflicts with the pretrial population data these parishes reported in the
      last <a href="https://www.icpsr.umich.edu/web/NACJD/studies/38323/versions/V1" target="_blank">Census of Jails (2019)</a>
      conducted by the U.S. Bureau of Justice Statistics (BJS). These same parishes,
      however, reported to DPS&amp;C a sizable number of people held for the “parish”
      (i.e., jail sentences) that is consistent with the pretrial population they
      supplied to BJS in 2019. As some jail management data systems do not record
      an individual person’s sentence status, Vera assumed that these jails indicated
      all people as “parish” because it would be time consuming to make the distinction
      between Pretrial and Parish (locally sentenced) in their monthly reports to
      DPS&amp;C. For these counties, Vera assumed that 90 percent of the people denoted
      as being in parish custody were actually being held pretrial. Vera made this
      assumption because 90 percent of people, statewide, held by a local authority
      are in pretrial status according to the
      <a href="https://jlcb.legis.la.gov/Docs/2021/dec/December%202021%20RTC%20Act%20119%20of%202021%20Corrections.pdf" target="_blank">report of the Offender Census at Local Correctional Facilities</a>.</p> 

    <p>Vera accessed parish-level jail population data for the years prior to
      2020 from the BJS Census of Jails, via Vera’s Incarceration Trends
      dataset. The Census of Jails, unlike the 2021 DPS&amp;C report of the Offender
      Census at Local Correctional Facilities, does not differentiate people
      held for ICE and the United States Marshall Service (USMS) from the
      pretrial population, which jails generally include in their counts of the
      “unconvicted” (i.e., pretrial) population to BJS. Consequently,
      differences between the 2021 pretrial population and prior years may be
      partly on account of this definitional difference in the parishes that
      hold people for ICE and USMS. Note also that the pretrial population data
      is a single-day count, which was November 26, 2021, in the DPS&amp;C data and
      the last weekday in June in the Census of Jails data. Jail populations
      fluctuate daily and year-over-year differences could be an artifact of
      measuring the population on a single day.</p></section> 
  <section><h2 class="svelte-ep3o1">Prisons</h2> 
    <p>Vera sourced data on the location of state prisons from the DPS&amp;C <a href="https://doc.louisiana.gov/about-the-dpsc/facility-locations/" target="_blank">online facility directory</a>
      and the Louisiana Commission on Law Enforcement
      <a href="https://lclelsac.com/wp-content/uploads/2022/04/2021-SSLCFPR-Report.pdf" target="_blank">2021 Status of State and Local Corrections Facilities and Program
        Report</a>. Vera sourced information on state prison capacity from the BJS
      <a href="https://www.icpsr.umich.edu/web/NACJD/studies/38325/versions/V2" target="_blank">Census of State and Federal Adult Correctional Facilities (2019)</a>. Vera sourced data on facilities operated by the U.S. Bureau of Prisons
      from the bureau’s
      <a href="https://www.bop.gov/locations/list.jsp" target="_blank">website</a>.</p></section> 
  <section><h2 class="svelte-ep3o1">Prison admissions</h2> 
    <p>Vera collected parish-level prison admission data for <a href="https://s32082.pcdn.co/wp-content/uploads/2021/06/Jan-21-Full-bb.pdf" target="_blank">2019</a>,
      <a href="https://s32082.pcdn.co/wp-content/uploads/2021/10/0m-Full-Briefing-Book.pdf" target="_blank">2020</a>, and
      <a href="https://s32082.pcdn.co/wp-content/uploads/2022/09/0m-Full-Briefing-Book-July-2022-Website.pdf" target="_blank">2021</a>
      from the DPS&amp;C Briefing Book. Vera collected parish-level prison admission
      data for 1992 through 2014 from the BJS National Corrections Reporting Program
      (NCRP), accessed via Vera’s
      <a href="https://github.com/vera-institute/incarceration-trends" target="_blank">Incarceration Trends Dataset</a>.</p></section> 
  <section><h2 class="svelte-ep3o1">Juvenile justice facilities</h2> 
    <p>Vera researchers compiled information for juvenile detention centers
      (i.e., “youth jails”) using data from city and parish websites. There are
      five <a href="https://ojj.la.gov/about-ojj/administrative-functions/ojj-secure-care-facilities/" target="_blank">secure care</a>
      residential facilities (i.e., “youth prisons”) for males in the custody of
      the Louisiana Office of Juvenile Justice (OJJ). Females in OJJ custody are
      housed at Ware Youth Center, which operates under a contract with OJJ. There
      are 18 non-secure residential facilities for youth who have been adjudicated.
      These residential facilities comprise group homes, transitional living programs,
      emergency shelters, and family homes. Vera compiled information for these facilities
      through various OJJ reports, including
      <a href="https://ojj.la.gov/policies-systems/federal-laws/prea/ojj-prea-resourcesreports/" target="_blank">Prison Rape Elimination Act (PREA) Annual Reports</a>, Contract Facility Audit Reports,
      <a href="https://ojj.la.gov/wp-content/uploads/2018/10/MonitoringEffectivenessofCommunityBased-ServicesFY2017.pdf" target="_blank">Monitoring Effectiveness of Community-Based Services</a>, and
      <a href="https://ojj.la.gov/wp-content/uploads/2018/01/Act499TrendReportFY2017_-finalforwebsite-1.pdf" target="_blank">Annual Report of Youth Served</a>.</p> 

    <p>Vera compiled juvenile facility capacity information from PREA reports and
      through email and phone calls to facilities. Vera verified all facility
      information through a <a href="https://webapps.dcfs.la.gov/carefacility/facility/list?parish=&amp;d-3991717-p=1" target="_blank">list of licensed facilities</a> from the Louisiana Department of Children and Family Services, which holds
      licensing authority over Louisiana juvenile facilities.</p></section> 
  <section><h2 class="svelte-ep3o1">Arrests</h2> 
    <p>Arrest data comes from the FBI Uniform Crime Report (2018) accessed via
      Vera’s <a href="https://arresttrends.vera.org/" target="_blank">Arrest Trends</a>. Vera researchers calculated arrest rates using population data from the
      U.S. Census Bureau’s
      <a href="https://data.census.gov/table?g=040XX00US22$1600000&amp;y=2020&amp;d=DEC+Redistricting+Data+(PL+94-171)" target="_blank">2020 Decennial Census</a>, which provides city-level demographic data, and the Census Bureau’s
      <a href="https://www.census.gov/data/tables/time-series/demo/popest/2010s-counties-detail.html" target="_blank">County Characteristics Resident Population Estimates</a> (July 1, 2019), which provides parish-level demographic data.</p></section> 
  <section><h2 class="svelte-ep3o1">Spending</h2> 
    <p>Vera collected data on parish- and municipal-government spending from the
      U.S. Census Bureau’s <a href="https://www.census.gov/programs-surveys/apes.html" target="_blank">Annual Survey of Public Employment &amp; Payroll</a>. Vera collected 2021 data when it was available and 2017 data when 2021
      data was not available. (Vera adjusted the data to 2021 dollars using
      Consumer Price Index for all Urban Consumers data from the
      <a href="https://www.bls.gov/regions/new-england/data/consumerpriceindex_us_table.htm" target="_blank">Bureau of Labor Statistics</a> of the United States Department of Labor.) Payroll amounts represent gross
      payroll for the one-month period of March in the survey year. Gross payroll
      includes all salaries, wages, fees, commissions, bonuses, or awards. Vera researchers
      multiplied total payroll amounts by 12 to determine payroll for a one-year
      period. Payroll expenses comprise the majority, but not all, of government
      expenses and excludes costs such as supplies, materials, and contracted services.
      However, the payroll provides a representation of the allocation of budget
      resources across government functions (e.g., human services, parks, police,
      corrections, etc.).</p></section> 
  <section><h2 class="svelte-ep3o1">Demographic Data</h2> 
    <p>Demographic data to compute parish per-capita incarceration rates comes
      from Vera’s <a href="https://github.com/vera-institute/incarceration-trends" target="_blank">Incarceration Trends Project (ITP)</a>. The demographic data used in ITP comes from the National Cancer
      Institute’s (NCI)
      <a href="https://seer.cancer.gov/popdata/download.html" target="_blank">U.S. County Population Data, 1969-2020</a>. The source of NCI’s data is the Centers for Disease Control and
      Prevention’s (CDC)
      <a href="https://wonder.cdc.gov/bridged-race-population.html" target="_blank">Bridged-Race Population Estimates, 1990-2020</a>. Vera used population data for 2020 to compute incarceration rates for
      the period since 2020.</p> 

    <p>Vera calculated incarceration rates using parish population data from the
      U.S. census, and these rates are expressed per 10,000 parish residents.
      Although incarceration rates are conventionally expressed per 100,000,
      Vera computed parish rates per 10,000 to make these statistics more
      legible in the 50 parishes that have fewer than 100,000 residents.</p></section> 
  <section><h2 class="svelte-ep3o1">Geographic Data</h2> 
    <p>Vera collected data for the footprints of Louisiana’s historical
      plantations from an <a href="https://www.loc.gov/item/2006629768/" target="_blank">1853 map</a>
      of Louisiana by John La Tourrette. Vera researchers downloaded the digital
      image as a TIFF file and adjusted the image levels, contrast, and tone to aid
      in the clear identification of plots of land. The researchers then pulled the
      image into QGIS’s Georeferencer and identified 29 ground control points (GCPs).
      The researchers took the control points from a geojson file of Louisiana’s
      state outline. Vera then applied a transformation model—using the Polynomial
      2 transformation type and the Nearest Neighbor resampling method—to the points
      in order to warp the image to fit the
      <a href="https://epsg.io/4269" target="_blank">EPSG:4269</a> coordinate reference
      system (CRS). The researchers then created a new vector layer with the geometry
      type set to polygon, with the specified CRS set to EPSG:4269, and created polygons
      for each plantation on the La Tourrette map. The researchers added a unique
      identifier as an attribute to each polygon and included the landowner as another
      attribute when noted (and legible). Researchers double checked the plots against
      the georeferenced map and validated all geometries.</p> 

    <p>Vera derived the Orleans Parish buildings from a shapefile of <a href="https://archive.nyu.edu/handle/2451/43840" target="_blank">New Orleans building footprints</a>
      held by Bobst Library, New York University. Vera referenced the buildings in
      this file against a
      <a href="https://www.opso.us/ppt/presentation20101018.pdf" target="_blank">presentation of the Orleans Parish Sheriff’s Office</a>
      showing facility use in 2005, 2010, and 2012, and an
      <a href="https://www.laaclu.org/sites/default/files/field_documents/2006_Report_OPP_Katrina_Insert_0.pdf" target="_blank">ACLU map of post-Katrina facility damage</a>. Many of the buildings no longer in use by the parish (e.g. Community
      Corrections Center, Orleans Parish Prison) are still standing, and were
      therefore still in the building footprint shapefile.</p> 

    <p>State, parish, and census tract geographies come from <a href="https://www.census.gov/geographies/mapping-files/time-series/geo/carto-boundary-file.html" target="_blank">census.gov</a>. The detailed outline of Orleans Parish comes from the Stanford
      <a href="https://purl.stanford.edu/sm333bn0683" target="_blank">National Transportation Atlas Database</a>.</p></section>`,ce(t,"id","wrap"),ce(t,"class","svelte-ep3o1")},m(r,s){ot(r,t,s)},p:bn,i:bn,o:bn,d(r){r&&it(t)}}}function TS(e){return Wa(async()=>{window.scrollTo(0,0)}),[]}class US extends ai{constructor(t){super(),si(this,t,TS,IS,ri,{})}}function LS(e){let t;return{c(){t=kt("header"),t.innerHTML=`<div class="rowTop svelte-9nsqyw"><div class="rowTop-container svelte-9nsqyw"><nav id="primary" class="svelte-9nsqyw"><ul class="svelte-9nsqyw"><li class="svelte-9nsqyw"><a href="https://www.vera.org/who-we-are" class="svelte-9nsqyw"><div class="textWrap svelte-9nsqyw">Who We Are
                <div class="textWrap-icon svelte-9nsqyw"></div></div></a> 
            <ul class="svelte-9nsqyw"><li class="svelte-9nsqyw"><a href="https://www.vera.org/who-we-are" class="svelte-9nsqyw"><span class="liText svelte-9nsqyw">Who We Are</span></a></li> 
              <li class="svelte-9nsqyw"><a href="https://www.vera.org/who-we-are/about-us" class="svelte-9nsqyw"><span class="liText svelte-9nsqyw">About Us</span></a></li> 
              <li class="svelte-9nsqyw"><a href="https://www.vera.org/who-we-are/message-from-the-president" class="svelte-9nsqyw"><span class="liText svelte-9nsqyw">Message from the President</span></a></li> 
              <li class="svelte-9nsqyw"><a href="https://www.vera.org/who-we-are/people" class="svelte-9nsqyw"><span class="liText svelte-9nsqyw">People</span></a></li> 
              <li class="svelte-9nsqyw"><a href="https://www.vera.org/who-we-are/locations" class="svelte-9nsqyw"><span class="liText svelte-9nsqyw">Locations</span></a></li> 
              <li class="svelte-9nsqyw"><a href="https://www.vera.org/careers" class="svelte-9nsqyw"><span class="liText svelte-9nsqyw">Careers</span></a></li> 
              <li class="svelte-9nsqyw"><a href="https://www.vera.org/who-we-are/financials" class="svelte-9nsqyw"><span class="liText svelte-9nsqyw">Financials</span></a></li> 
              <li class="svelte-9nsqyw"><a href="https://www.vera.org/contact" class="svelte-9nsqyw"><span class="liText svelte-9nsqyw">Contact Us</span></a></li></ul></li> 
          <li class="svelte-9nsqyw"><a href="https://www.vera.org/what-we-do" class="svelte-9nsqyw"><div class="textWrap svelte-9nsqyw">What We Do
                <div class="textWrap-icon svelte-9nsqyw"></div></div></a> 
            <ul class="svelte-9nsqyw"><li class="svelte-9nsqyw"><a href="https://www.vera.org/what-we-do" class="svelte-9nsqyw"><span class="liText svelte-9nsqyw">What We Do</span></a></li> 
              <li class="svelte-9nsqyw"><a href="https://www.vera.org/our-strategic-priorities" class="svelte-9nsqyw"><span class="liText svelte-9nsqyw">Strategic Priorities</span></a></li></ul></li> 
          <li class="svelte-9nsqyw"><a href="https://www.vera.org/get-involved" class="svelte-9nsqyw"><div class="textWrap svelte-9nsqyw">Get Involved
                <div class="textWrap-icon svelte-9nsqyw"></div></div></a> 
            <ul class="svelte-9nsqyw"><li class="svelte-9nsqyw"><a href="https://www.vera.org/get-involved" class="svelte-9nsqyw"><span class="liText svelte-9nsqyw">Get Involved</span></a></li> 
              <li class="svelte-9nsqyw"><a href="https://shop.vera.org/" class="svelte-9nsqyw"><span class="liText svelte-9nsqyw">The Vera Shop</span></a></li> 
              <li class="svelte-9nsqyw"><a href="https://www.vera.org/get-involved/ways-to-give" class="svelte-9nsqyw"><span class="liText svelte-9nsqyw">Ways to Give</span></a></li> 
              <li class="svelte-9nsqyw"><a href="https://www.vera.org/get-involved/partner-with-vera" class="svelte-9nsqyw"><span class="liText svelte-9nsqyw">Partner with Vera</span></a></li> 
              <li class="svelte-9nsqyw"><a href="https://www.vera.org/events" class="svelte-9nsqyw"><span class="liText svelte-9nsqyw">Events</span></a></li></ul></li></ul></nav> 
      <section class="top-nav-mobile svelte-9nsqyw"><input id="menu-toggle" type="checkbox" class="svelte-9nsqyw"/> 
        <label class="menu-button-container svelte-9nsqyw" for="menu-toggle"><div class="menu-button svelte-9nsqyw"></div></label> 
        <span class="menulabel svelte-9nsqyw">Menu</span> 
        <ul class="menu svelte-9nsqyw"><a href="https://www.vera.org/ending-mass-incarceration" class="svelte-9nsqyw"><li class="svelte-9nsqyw">Ending Mass Incarceration</li></a> 

          <a href="https://www.vera.org/investing-in-communities" class="svelte-9nsqyw"><li class="svelte-9nsqyw">Investing in Communities</li></a> 

          <a href="https://www.vera.org/solutions-research" class="svelte-9nsqyw"><li class="svelte-9nsqyw">Solutions &amp; Research</li></a> 
          <a href="https://www.vera.org/news-and-stories" class="svelte-9nsqyw"><li class="svelte-9nsqyw">News &amp; Stories</li></a></ul></section> 
      <nav class="whowhat svelte-9nsqyw"><div class="menu-center svelte-9nsqyw"><h1 class="svelte-9nsqyw"><a class="logo svelte-9nsqyw" href="https://www.vera.org">Vera Institute of Justice</a></h1></div> 
        <div class="d-md-block menu-right donate svelte-9nsqyw"><a href="https://secure.vera.org/a/donate" class="button arrow svelte-9nsqyw">Donate</a></div></nav></div></div> 
  <nav id="secondary" class="svelte-9nsqyw"><ul class="svelte-9nsqyw"><li class="svelte-9nsqyw"><a href="https://www.vera.org/ending-mass-incarceration" class="svelte-9nsqyw">Ending Mass Incarceration</a> 
        <ul class="svelte-9nsqyw"><li class="svelte-9nsqyw"><a href="https://www.vera.org/ending-mass-incarceration" class="svelte-9nsqyw"><div class="hover-arrow svelte-9nsqyw">Ending Mass Incarceration</div> 
              <span class="svelte-9nsqyw">About the problem, the history of mass incarceration, trends
                and statistics</span></a></li> 
          <li class="svelte-9nsqyw"><a href="https://www.vera.org/ending-mass-incarceration/criminalization-racial-disparities" class="svelte-9nsqyw"><div class="hover-arrow svelte-9nsqyw">Criminalization and Racial Disparities</div> 
              <span class="svelte-9nsqyw">Ending the criminalization of people of color, immigrants, and
                people experiencing poverty</span></a></li> 

          <li class="svelte-9nsqyw"><a href="https://www.vera.org/ending-mass-incarceration/reducing-incarceration" class="svelte-9nsqyw"><div class="hover-arrow svelte-9nsqyw">Reducing Incarceration</div> 
              <span class="svelte-9nsqyw">Drastically reducing the use of jails, prisons, and detention
                centers</span></a></li> 

          <li class="svelte-9nsqyw"><a href="https://www.vera.org/ending-mass-incarceration/dignity-behind-bars" class="svelte-9nsqyw"><div class="hover-arrow svelte-9nsqyw">Dignity Behind Bars</div> 
              <span class="svelte-9nsqyw">Centering dignity and minimizing the harms of criminal legal
                and immigration system involvement</span></a></li></ul></li> 
      <li class="svelte-9nsqyw"><a href="https://www.vera.org/investing-in-communities" class="svelte-9nsqyw">Investing in Communities</a></li> 
      <li class="svelte-9nsqyw"><a href="https://www.vera.org/solutions-research" class="svelte-9nsqyw">Solutions &amp; Research</a></li> 
      <li class="svelte-9nsqyw"><a href="https://www.vera.org/get-involved" class="svelte-9nsqyw">News</a> 
        <ul class="svelte-9nsqyw"><li class="svelte-9nsqyw"><a href="https://www.vera.org/news-and-stories" class="svelte-9nsqyw"><div class="hover-arrow svelte-9nsqyw">Latest News &amp; Stories</div> 
              <span class="svelte-9nsqyw">Ideas, opinions, and strategies to end mass incarceration</span></a></li> 
          <li class="svelte-9nsqyw"><a href="https://www.vera.org/media-center" class="svelte-9nsqyw"><div class="hover-arrow svelte-9nsqyw">Media Center</div> 
              <span class="svelte-9nsqyw">Press releases and media coverage</span></a></li></ul></li></ul></nav>`,ce(t,"class","header-v2 svelte-9nsqyw")},m(r,s){ot(r,t,s)},p:bn,i:bn,o:bn,d(r){r&&it(t)}}}class QS extends ai{constructor(t){super(),si(this,t,null,LS,ri,{})}}function kS(e){let t;return{c(){t=kt("footer"),t.innerHTML=`<div id="vera" class="svelte-1x97hmj"><div id="mobilewrap" class="svelte-1x97hmj"><div class="section svelte-1x97hmj"><div id="logo" class="svelte-1x97hmj"><a href="https://www.vera.org"><img id="logo" src="https://www.vera.org/dist/img/v2/vera-horizontal.svg" class="svelte-1x97hmj"/></a></div> 
        <p class="address svelte-1x97hmj">34 35th Street<br/>
          Suite 4-2A<br/>
          Brooklyn, NY 11232</p> 
        <p class="phone svelte-1x97hmj">212-334-1300</p></div> 
      <div class="section footer-menu svelte-1x97hmj"><ul class="svelte-1x97hmj"><li class="svelte-1x97hmj"><a href="https://www.vera.org/who-we-are/about-us" class="svelte-1x97hmj">About Us</a></li> 
          <li class="svelte-1x97hmj"><a href="https://www.vera.org/careers" class="svelte-1x97hmj">Careers</a></li> 
          <li class="svelte-1x97hmj"><a href="https://www.vera.org/events" class="svelte-1x97hmj">Events</a></li> 
          <li class="svelte-1x97hmj"><a href="https://www.vera.org/media-center" class="svelte-1x97hmj">Media</a></li> 
          <li class="svelte-1x97hmj"><a href="https://www.vera.org/contact" class="svelte-1x97hmj">Contact Us</a></li></ul></div> 
      <div class="section soc svelte-1x97hmj"><p class="keep svelte-1x97hmj">Keep up with us on social media.</p> 
        <div class="social-icons svelte-1x97hmj"><a href="https://www.twitter.com/intent/tweet?url=https%3A%2F%2Fwww.vera.org%2F&amp;amp;text=Home %20%40verainstitute" class="share-link social-share-link receives-color svelte-1x97hmj" target="_blank"><svg class="svg-inline--fa svelte-1x97hmj" aria-hidden="true" prefix="fab" data-icon="twitter" role="img" viewBox="0 0 512 512"><path fill="currentColor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg></a> 
          <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fwww.vera.org%2F&amp;caption=Home%20&amp;picture=https://www.vera.org/dist/img/social-fallback.jpg&amp;description=" class="share-link social-share-link receives-color svelte-1x97hmj" target="_blank"><svg class="svg-inline--fa svelte-1x97hmj" aria-hidden="true" prefix="fab" data-icon="facebook" role="img" viewBox="0 0 320 512"><path fill="currentColor" d="M279.14 288l14.22-92.66h-88.91v-60.13c0-25.35 12.42-50.06 52.24-50.06h40.42V6.26S260.43 0 225.36 0c-73.22 0-121.08 44.38-121.08 124.72v70.62H22.89V288h81.39v224h100.17V288z"></path></svg></a> 
          <a href="https://www.instagram.com/verainstitute/" target="_blank" class="svelte-1x97hmj"><svg class="svg-inline--fa svelte-1x97hmj" aria-hidden="true" prefix="fab" data-icon="instagram" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"></path></svg></a> 
          <a href="https://www.youtube.com/channel/UCdUfqPJeOB_bHFdx1IhR0jQ" target="_blank" class="svelte-1x97hmj"><svg class="svg-inline--fa svelte-1x97hmj" aria-hidden="true" prefix="fab" data-icon="youtube" role="img" viewBox="0 0 576 512"><path fill="currentColor" d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"></path></svg></a></div></div></div> 

    <div class="section svelte-1x97hmj"><div id="transformative" class="svelte-1x97hmj"><p>Transformative change, sent to your inbox.</p> 
        <button class="button orange arrow svelte-1x97hmj">Add your email</button></div></div></div> 
  <div id="terms" class="svelte-1x97hmj"><ul class="svelte-1x97hmj"><li class="svelte-1x97hmj">© Vera Institute of Justice. All rights reserved.</li> 
      <li class="svelte-1x97hmj"><a href="https://www.vera.org/terms-of-use" class="svelte-1x97hmj">Terms of Use</a></li> 
      <li class="svelte-1x97hmj"><a href="https://www.vera.org/gsa-advantage" class="svelte-1x97hmj">GSA Advantage</a></li></ul></div>`,ce(t,"class","svelte-1x97hmj")},m(r,s){ot(r,t,s)},p:bn,i:bn,o:bn,d(r){r&&it(t)}}}class PS extends ai{constructor(t){super(),si(this,t,null,kS,ri,{})}}function MS(e){let t,r,s,l,c,h,a;t=new QS({});var d=e[0];function _(p){return{props:{params:p[1]}}}return d&&(l=dp(d,_(e))),h=new PS({}),{c(){yr(t.$$.fragment),r=$t(),s=kt("div"),l&&yr(l.$$.fragment),c=$t(),yr(h.$$.fragment),ce(s,"id","center"),ce(s,"class","svelte-17lcfot")},m(p,E){pr(t,p,E),ot(p,r,E),ot(p,s,E),l&&pr(l,s,null),ot(p,c,E),pr(h,p,E),a=!0},p(p,[E]){const w={};if(E&2&&(w.params=p[1]),d!==(d=p[0])){if(l){Lo();const x=l;Gt(x.$$.fragment,1,0,()=>{mr(x,1)}),Qo()}d?(l=dp(d,_(p)),yr(l.$$.fragment),Pt(l.$$.fragment,1),pr(l,s,null)):l=null}else d&&l.$set(w)},i(p){a||(Pt(t.$$.fragment,p),l&&Pt(l.$$.fragment,p),Pt(h.$$.fragment,p),a=!0)},o(p){Gt(t.$$.fragment,p),l&&Gt(l.$$.fragment,p),Gt(h.$$.fragment,p),a=!1},d(p){mr(t,p),p&&it(r),p&&it(s),l&&mr(l),p&&it(c),mr(h,p)}}}function DS(e,t,r){let s,l;return pl("/louisiana-locked-up/",()=>r(0,s=u1)),pl("/louisiana-locked-up/#parishes",()=>r(0,s=u1)),pl("/louisiana-locked-up/parish/:id",(c,h)=>{r(1,l=c.params),h()},()=>r(0,s=SS)),pl("/louisiana-locked-up/about-data",()=>r(0,s=US)),pl.start(),[s,l]}class NS extends ai{constructor(t){super(),si(this,t,DS,MS,ri,{})}}new NS({target:document.getElementById("app")});export{qi as _,Hl as c,jS as g,BS as r};
