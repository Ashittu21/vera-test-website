(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&s(h)}).observe(document,{childList:!0,subtree:!0});function r(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerpolicy&&(c.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?c.credentials="include":l.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(l){if(l.ep)return;l.ep=!0;const c=r(l);fetch(l.href,c)}})();function bn(){}function F_(e,t){for(const r in t)e[r]=t[r];return e}function zy(e){return e()}function n0(){return Object.create(null)}function tA(e){e.forEach(zy)}function id(e){return typeof e=="function"}function ei(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function S_(e){return Object.keys(e).length===0}function Hy(e,...t){if(e==null)return bn;const r=e.subscribe(...t);return r.unsubscribe?()=>r.unsubscribe():r}function $r(e,t,r){e.$$.on_destroy.push(Hy(t,r))}function wA(e,t,r,s){if(e){const l=Vy(e,t,r,s);return e[0](l)}}function Vy(e,t,r,s){return e[1]&&s?F_(r.ctx.slice(),e[1](s(t))):r.ctx}function bA(e,t,r,s){if(e[2]&&s){const l=e[2](s(r));if(t.dirty===void 0)return l;if(typeof l=="object"){const c=[],h=Math.max(t.dirty.length,l.length);for(let a=0;a<h;a+=1)c[a]=t.dirty[a]|l[a];return c}return t.dirty|l}return t.dirty}function xA(e,t,r,s,l,c){if(l){const h=Vy(t,r,s,c);e.p(h,l)}}function BA(e){if(e.ctx.length>32){const t=[],r=e.ctx.length/32;for(let s=0;s<r;s++)t[s]=-1;return t}return-1}function i0(e){return e??""}function vi(e,t,r){return e.set(r),t}function it(e,t){e.appendChild(t)}function At(e,t,r){e.insertBefore(t,r||null)}function at(e){e.parentNode&&e.parentNode.removeChild(e)}function Hl(e,t){for(let r=0;r<e.length;r+=1)e[r]&&e[r].d(t)}function Lt(e){return document.createElement(e)}function qn(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function Pr(e){return document.createTextNode(e)}function $t(){return Pr(" ")}function yo(){return Pr("")}function es(e,t,r,s){return e.addEventListener(t,r,s),()=>e.removeEventListener(t,r,s)}function ue(e,t,r){r==null?e.removeAttribute(t):e.getAttribute(t)!==r&&e.setAttribute(t,r)}function Gd(e,t,r){t in e?e[t]=typeof e[t]=="boolean"&&r===""?!0:r:ue(e,t,r)}function I_(e,t,r){e.setAttributeNS("http://www.w3.org/1999/xlink",t,r)}function T_(e){return Array.from(e.childNodes)}function ai(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function Qn(e,t,r,s){r===null?e.style.removeProperty(t):e.style.setProperty(t,r,s?"important":"")}function Vh(e,t){for(let r=0;r<e.options.length;r+=1){const s=e.options[r];if(s.__value===t){s.selected=!0;return}}e.selectedIndex=-1}function Vm(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}let qd;function U_(){if(qd===void 0){qd=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{qd=!0}}return qd}function L_(e,t){getComputedStyle(e).position==="static"&&(e.style.position="relative");const s=Lt("iframe");s.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),s.setAttribute("aria-hidden","true"),s.tabIndex=-1;const l=U_();let c;return l?(s.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",c=es(window,"message",h=>{h.source===s.contentWindow&&t()})):(s.src="about:blank",s.onload=()=>{c=es(s.contentWindow,"resize",t)}),it(e,s),()=>{(l||c&&s.contentWindow)&&c(),at(s)}}function pp(e,t,r){e.classList[r?"add":"remove"](t)}function Q_(e,t,{bubbles:r=!1,cancelable:s=!1}={}){const l=document.createEvent("CustomEvent");return l.initCustomEvent(e,r,s,t),l}function Kh(e,t){return new e(t)}let Wf;function zf(e){Wf=e}function sd(){if(!Wf)throw new Error("Function called outside component initialization");return Wf}function Wa(e){sd().$$.on_mount.push(e)}function Qp(e){sd().$$.on_destroy.push(e)}function $h(){const e=sd();return(t,r,{cancelable:s=!1}={})=>{const l=e.$$.callbacks[t];if(l){const c=Q_(t,r,{cancelable:s});return l.slice().forEach(h=>{h.call(e,c)}),!c.defaultPrevented}return!0}}function Gh(e,t){return sd().$$.context.set(e,t),t}function $o(e){return sd().$$.context.get(e)}const Nh=[],qa=[],Ap=[],Km=[],P_=Promise.resolve();let Gm=!1;function k_(){Gm||(Gm=!0,P_.then(Ky))}function wu(e){Ap.push(e)}function Eg(e){Km.push(e)}const _m=new Set;let Qh=0;function Ky(){if(Qh!==0)return;const e=Wf;do{try{for(;Qh<Nh.length;){const t=Nh[Qh];Qh++,zf(t),M_(t.$$)}}catch(t){throw Nh.length=0,Qh=0,t}for(zf(null),Nh.length=0,Qh=0;qa.length;)qa.pop()();for(let t=0;t<Ap.length;t+=1){const r=Ap[t];_m.has(r)||(_m.add(r),r())}Ap.length=0}while(Nh.length);for(;Km.length;)Km.pop()();Gm=!1,_m.clear(),zf(e)}function M_(e){if(e.fragment!==null){e.update(),tA(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(wu)}}const lp=new Set;let zu;function Xa(){zu={r:0,c:[],p:zu}}function Za(){zu.r||tA(zu.c),zu=zu.p}function Mt(e,t){e&&e.i&&(lp.delete(e),e.i(t))}function Gt(e,t,r,s){if(e&&e.o){if(lp.has(e))return;lp.add(e),zu.c.push(()=>{lp.delete(e),s&&(r&&e.d(1),s())}),e.o(t)}else s&&s()}const Gy=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function qy(e,t){e.d(1),t.delete(e.key)}function Wy(e,t,r,s,l,c,h,a,d,_,p,E){let w=e.length,x=c.length,Q=w;const P={};for(;Q--;)P[e[Q].key]=Q;const R=[],k=new Map,O=new Map;for(Q=x;Q--;){const $=E(l,c,Q),fe=r($);let Ae=h.get(fe);Ae?s&&Ae.p($,t):(Ae=_(fe,$),Ae.c()),k.set(fe,R[Q]=Ae),fe in P&&O.set(fe,Math.abs(Q-P[fe]))}const G=new Set,K=new Set;function Z($){Mt($,1),$.m(a,p),h.set($.key,$),p=$.first,x--}for(;w&&x;){const $=R[x-1],fe=e[w-1],Ae=$.key,ge=fe.key;$===fe?(p=$.first,w--,x--):k.has(ge)?!h.has(Ae)||G.has(Ae)?Z($):K.has(ge)?w--:O.get(Ae)>O.get(ge)?(K.add(Ae),Z($)):(G.add(ge),w--):(d(fe,h),w--)}for(;w--;){const $=e[w];k.has($.key)||d($,h)}for(;x;)Z(R[x-1]);return R}function Fg(e,t,r){const s=e.$$.props[t];s!==void 0&&(e.$$.bound[s]=r,r(e.$$.ctx[s]))}function yr(e){e&&e.c()}function mr(e,t,r,s){const{fragment:l,after_update:c}=e.$$;l&&l.m(t,r),s||wu(()=>{const h=e.$$.on_mount.map(zy).filter(id);e.$$.on_destroy?e.$$.on_destroy.push(...h):tA(h),e.$$.on_mount=[]}),c.forEach(wu)}function gr(e,t){const r=e.$$;r.fragment!==null&&(tA(r.on_destroy),r.fragment&&r.fragment.d(t),r.on_destroy=r.fragment=null,r.ctx=[])}function D_(e,t){e.$$.dirty[0]===-1&&(Nh.push(e),k_(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ri(e,t,r,s,l,c,h,a=[-1]){const d=Wf;zf(e);const _=e.$$={fragment:null,ctx:[],props:c,update:bn,not_equal:l,bound:n0(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(d?d.$$.context:[])),callbacks:n0(),dirty:a,skip_bound:!1,root:t.target||d.$$.root};h&&h(_.root);let p=!1;if(_.ctx=r?r(e,t.props||{},(E,w,...x)=>{const Q=x.length?x[0]:w;return _.ctx&&l(_.ctx[E],_.ctx[E]=Q)&&(!_.skip_bound&&_.bound[E]&&_.bound[E](Q),p&&D_(e,E)),w}):[],_.update(),p=!0,tA(_.before_update),_.fragment=s?s(_.ctx):!1,t.target){if(t.hydrate){const E=T_(t.target);_.fragment&&_.fragment.l(E),E.forEach(at)}else _.fragment&&_.fragment.c();t.intro&&Mt(e.$$.fragment),mr(e,t.target,t.anchor,t.customElement),Ky()}zf(d)}class ni{$destroy(){gr(this,1),this.$destroy=bn}$on(t,r){if(!id(r))return bn;const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(r),()=>{const l=s.indexOf(r);l!==-1&&s.splice(l,1)}}$set(t){this.$$set&&!S_(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}var qm=Array.isArray||function(e){return Object.prototype.toString.call(e)=="[object Array]"},ad=Yy,N_=Sg,j_=H_,R_=Xy,O_=Jy,z_=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^()])+)\\))?|\\(((?:\\\\.|[^()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function Sg(e){for(var t=[],r=0,s=0,l="",c;(c=z_.exec(e))!=null;){var h=c[0],a=c[1],d=c.index;if(l+=e.slice(s,d),s=d+h.length,a){l+=a[1];continue}l&&(t.push(l),l="");var _=c[2],p=c[3],E=c[4],w=c[5],x=c[6],Q=c[7],P=x==="+"||x==="*",R=x==="?"||x==="*",k=_||"/",O=E||w||(Q?".*":"[^"+k+"]+?");t.push({name:p||r++,prefix:_||"",delimiter:k,optional:R,repeat:P,pattern:V_(O)})}return s<e.length&&(l+=e.substr(s)),l&&t.push(l),t}function H_(e){return Xy(Sg(e))}function Xy(e){for(var t=new Array(e.length),r=0;r<e.length;r++)typeof e[r]=="object"&&(t[r]=new RegExp("^"+e[r].pattern+"$"));return function(s){for(var l="",c=s||{},h=0;h<e.length;h++){var a=e[h];if(typeof a=="string"){l+=a;continue}var d=c[a.name],_;if(d==null){if(a.optional)continue;throw new TypeError('Expected "'+a.name+'" to be defined')}if(qm(d)){if(!a.repeat)throw new TypeError('Expected "'+a.name+'" to not repeat, but received "'+d+'"');if(d.length===0){if(a.optional)continue;throw new TypeError('Expected "'+a.name+'" to not be empty')}for(var p=0;p<d.length;p++){if(_=encodeURIComponent(d[p]),!t[h].test(_))throw new TypeError('Expected all "'+a.name+'" to match "'+a.pattern+'", but received "'+_+'"');l+=(p===0?a.prefix:a.delimiter)+_}continue}if(_=encodeURIComponent(d),!t[h].test(_))throw new TypeError('Expected "'+a.name+'" to match "'+a.pattern+'", but received "'+_+'"');l+=a.prefix+_}return l}}function s0(e){return e.replace(/([.+*?=^!:${}()[\]|\/])/g,"\\$1")}function V_(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function Ig(e,t){return e.keys=t,e}function Zy(e){return e.sensitive?"":"i"}function K_(e,t){var r=e.source.match(/\((?!\?)/g);if(r)for(var s=0;s<r.length;s++)t.push({name:s,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return Ig(e,t)}function G_(e,t,r){for(var s=[],l=0;l<e.length;l++)s.push(Yy(e[l],t,r).source);var c=new RegExp("(?:"+s.join("|")+")",Zy(r));return Ig(c,t)}function q_(e,t,r){for(var s=Sg(e),l=Jy(s,r),c=0;c<s.length;c++)typeof s[c]!="string"&&t.push(s[c]);return Ig(l,t)}function Jy(e,t){t=t||{};for(var r=t.strict,s=t.end!==!1,l="",c=e[e.length-1],h=typeof c=="string"&&/\/$/.test(c),a=0;a<e.length;a++){var d=e[a];if(typeof d=="string")l+=s0(d);else{var _=s0(d.prefix),p=d.pattern;d.repeat&&(p+="(?:"+_+p+")*"),d.optional?_?p="(?:"+_+"("+p+"))?":p="("+p+")?":p=_+"("+p+")",l+=p}}return r||(l=(h?l.slice(0,-2):l)+"(?:\\/(?=$))?"),s?l+="$":l+=r&&h?"":"(?=\\/|$)",new RegExp("^"+l,Zy(t))}function Yy(e,t,r){return t=t||[],qm(t)?r||(r={}):(r=t,t=[]),e instanceof RegExp?K_(e,t):qm(e)?G_(e,t,r):q_(e,t,r)}ad.parse=N_;ad.compile=j_;ad.tokensToFunction=R_;ad.tokensToRegExp=O_;var qh=typeof document<"u",fl=typeof window<"u",Pp=typeof history<"u",W_=typeof process<"u",Wm=qh&&document.ontouchstart?"touchstart":"click",jc=fl&&!!(window.history.location||window.location);function ga(){this.callbacks=[],this.exits=[],this.current="",this.len=0,this._decodeURLComponents=!0,this._base="",this._strict=!1,this._running=!1,this._hashbang=!1,this.clickHandler=this.clickHandler.bind(this),this._onpopstate=this._onpopstate.bind(this)}ga.prototype.configure=function(e){var t=e||{};this._window=t.window||fl&&window,this._decodeURLComponents=t.decodeURLComponents!==!1,this._popstate=t.popstate!==!1&&fl,this._click=t.click!==!1&&qh,this._hashbang=!!t.hashbang;var r=this._window;this._popstate?r.addEventListener("popstate",this._onpopstate,!1):fl&&r.removeEventListener("popstate",this._onpopstate,!1),this._click?r.document.addEventListener(Wm,this.clickHandler,!1):qh&&r.document.removeEventListener(Wm,this.clickHandler,!1),this._hashbang&&fl&&!Pp?r.addEventListener("hashchange",this._onpopstate,!1):fl&&r.removeEventListener("hashchange",this._onpopstate,!1)};ga.prototype.base=function(e){if(arguments.length===0)return this._base;this._base=e};ga.prototype._getBase=function(){var e=this._base;if(e)return e;var t=fl&&this._window&&this._window.location;return fl&&this._hashbang&&t&&t.protocol==="file:"&&(e=t.pathname),e};ga.prototype.strict=function(e){if(arguments.length===0)return this._strict;this._strict=e};ga.prototype.start=function(e){var t=e||{};if(this.configure(t),t.dispatch!==!1){this._running=!0;var r;if(jc){var s=this._window,l=s.location;this._hashbang&&~l.hash.indexOf("#!")?r=l.hash.substr(2)+l.search:this._hashbang?r=l.search+l.hash:r=l.pathname+l.search+l.hash}this.replace(r,null,!0,t.dispatch)}};ga.prototype.stop=function(){if(this._running){this.current="",this.len=0,this._running=!1;var e=this._window;this._click&&e.document.removeEventListener(Wm,this.clickHandler,!1),fl&&e.removeEventListener("popstate",this._onpopstate,!1),fl&&e.removeEventListener("hashchange",this._onpopstate,!1)}};ga.prototype.show=function(e,t,r,s){var l=new od(e,t,this),c=this.prevContext;return this.prevContext=l,this.current=l.path,r!==!1&&this.dispatch(l,c),l.handled!==!1&&s!==!1&&l.pushState(),l};ga.prototype.back=function(e,t){var r=this;if(this.len>0){var s=this._window;Pp&&s.history.back(),this.len--}else setTimeout(e?function(){r.show(e,t)}:function(){r.show(r._getBase(),t)})};ga.prototype.redirect=function(e,t){var r=this;typeof e=="string"&&typeof t=="string"&&kp.call(this,e,function(s){setTimeout(function(){r.replace(t)},0)}),typeof e=="string"&&typeof t>"u"&&setTimeout(function(){r.replace(e)},0)};ga.prototype.replace=function(e,t,r,s){var l=new od(e,t,this),c=this.prevContext;return this.prevContext=l,this.current=l.path,l.init=r,l.save(),s!==!1&&this.dispatch(l,c),l};ga.prototype.dispatch=function(e,t){var r=0,s=0,l=this;function c(){var a=l.exits[s++];if(!a)return h();a(t,c)}function h(){var a=l.callbacks[r++];if(e.path!==l.current){e.handled=!1;return}if(!a)return X_.call(l,e);a(e,h)}t?c():h()};ga.prototype.exit=function(e,t){if(typeof e=="function")return this.exit("*",e);for(var r=new Ad(e,null,this),s=1;s<arguments.length;++s)this.exits.push(r.middleware(arguments[s]))};ga.prototype.clickHandler=function(e){if(this._which(e)===1&&!(e.metaKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented){var t=e.target,r=e.path||(e.composedPath?e.composedPath():null);if(r){for(var s=0;s<r.length;s++)if(r[s].nodeName&&r[s].nodeName.toUpperCase()==="A"&&r[s].href){t=r[s];break}}for(;t&&t.nodeName.toUpperCase()!=="A";)t=t.parentNode;if(!(!t||t.nodeName.toUpperCase()!=="A")){var l=typeof t.href=="object"&&t.href.constructor.name==="SVGAnimatedString";if(!(t.hasAttribute("download")||t.getAttribute("rel")==="external")){var c=t.getAttribute("href");if(!(!this._hashbang&&this._samePath(t)&&(t.hash||c==="#"))&&!(c&&c.indexOf("mailto:")>-1)&&!(l?t.target.baseVal:t.target)&&!(!l&&!this.sameOrigin(t.href))){var h=l?t.href.baseVal:t.pathname+t.search+(t.hash||"");h=h[0]!=="/"?"/"+h:h,W_&&h.match(/^\/[a-zA-Z]:\//)&&(h=h.replace(/^\/[a-zA-Z]:\//,"/"));var a=h,d=this._getBase();h.indexOf(d)===0&&(h=h.substr(d.length)),this._hashbang&&(h=h.replace("#!","")),!(d&&a===h&&(!jc||this._window.location.protocol!=="file:"))&&(e.preventDefault(),this.show(a))}}}}};ga.prototype._onpopstate=function(){var e=!1;return fl?(qh&&document.readyState==="complete"?e=!0:window.addEventListener("load",function(){setTimeout(function(){e=!0},0)}),function(r){if(e){var s=this;if(r.state){var l=r.state.path;s.replace(l,r.state)}else if(jc){var c=s._window.location;s.show(c.pathname+c.search+c.hash,void 0,void 0,!1)}}}):function(){}}();ga.prototype._which=function(e){return e=e||fl&&this._window.event,e.which==null?e.button:e.which};ga.prototype._toURL=function(e){var t=this._window;if(typeof URL=="function"&&jc)return new URL(e,t.location.toString());if(qh){var r=t.document.createElement("a");return r.href=e,r}};ga.prototype.sameOrigin=function(e){if(!e||!jc)return!1;var t=this._toURL(e),r=this._window,s=r.location;return s.protocol===t.protocol&&s.hostname===t.hostname&&(s.port===t.port||s.port===""&&(t.port==80||t.port==443))};ga.prototype._samePath=function(e){if(!jc)return!1;var t=this._window,r=t.location;return e.pathname===r.pathname&&e.search===r.search};ga.prototype._decodeURLEncodedURIComponent=function(e){return typeof e!="string"?e:this._decodeURLComponents?decodeURIComponent(e.replace(/\+/g," ")):e};function $y(){var e=new ga;function t(){return kp.apply(e,arguments)}return t.callbacks=e.callbacks,t.exits=e.exits,t.base=e.base.bind(e),t.strict=e.strict.bind(e),t.start=e.start.bind(e),t.stop=e.stop.bind(e),t.show=e.show.bind(e),t.back=e.back.bind(e),t.redirect=e.redirect.bind(e),t.replace=e.replace.bind(e),t.dispatch=e.dispatch.bind(e),t.exit=e.exit.bind(e),t.configure=e.configure.bind(e),t.sameOrigin=e.sameOrigin.bind(e),t.clickHandler=e.clickHandler.bind(e),t.create=$y,Object.defineProperty(t,"len",{get:function(){return e.len},set:function(r){e.len=r}}),Object.defineProperty(t,"current",{get:function(){return e.current},set:function(r){e.current=r}}),t.Context=od,t.Route=Ad,t}function kp(e,t){if(typeof e=="function")return kp.call(this,"*",e);if(typeof t=="function")for(var r=new Ad(e,null,this),s=1;s<arguments.length;++s)this.callbacks.push(r.middleware(arguments[s]));else typeof e=="string"?this[typeof t=="string"?"redirect":"show"](e,t):this.start(e)}function X_(e){if(!e.handled){var t,r=this,s=r._window;r._hashbang?t=jc&&this._getBase()+s.location.hash.replace("#!",""):t=jc&&s.location.pathname+s.location.search,t!==e.canonicalPath&&(r.stop(),e.handled=!1,jc&&(s.location.href=e.canonicalPath))}}function Z_(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function od(e,t,r){var s=this.page=r||kp,l=s._window,c=s._hashbang,h=s._getBase();e[0]==="/"&&e.indexOf(h)!==0&&(e=h+(c?"#!":"")+e);var a=e.indexOf("?");this.canonicalPath=e;var d=new RegExp("^"+Z_(h));if(this.path=e.replace(d,"")||"/",c&&(this.path=this.path.replace("#!","")||"/"),this.title=qh&&l.document.title,this.state=t||{},this.state.path=e,this.querystring=~a?s._decodeURLEncodedURIComponent(e.slice(a+1)):"",this.pathname=s._decodeURLEncodedURIComponent(~a?e.slice(0,a):e),this.params={},this.hash="",!c){if(!~this.path.indexOf("#"))return;var _=this.path.split("#");this.path=this.pathname=_[0],this.hash=s._decodeURLEncodedURIComponent(_[1])||"",this.querystring=this.querystring.split("#")[0]}}od.prototype.pushState=function(){var e=this.page,t=e._window,r=e._hashbang;e.len++,Pp&&t.history.pushState(this.state,this.title,r&&this.path!=="/"?"#!"+this.path:this.canonicalPath)};od.prototype.save=function(){var e=this.page;Pp&&e._window.history.replaceState(this.state,this.title,e._hashbang&&this.path!=="/"?"#!"+this.path:this.canonicalPath)};function Ad(e,t,r){var s=this.page=r||Tg,l=t||{};l.strict=l.strict||s._strict,this.path=e==="*"?"(.*)":e,this.method="GET",this.regexp=ad(this.path,this.keys=[],l)}Ad.prototype.middleware=function(e){var t=this;return function(r,s){if(t.match(r.path,r.params))return r.routePath=t.path,e(r,s);s()}};Ad.prototype.match=function(e,t){var r=this.keys,s=e.indexOf("?"),l=~s?e.slice(0,s):e,c=this.regexp.exec(decodeURIComponent(l));if(!c)return!1;delete t[0];for(var h=1,a=c.length;h<a;++h){var d=r[h-1],_=this.page._decodeURLEncodedURIComponent(c[h]);(_!==void 0||!hasOwnProperty.call(t,d.name))&&(t[d.name]=_)}return!0};var Tg=$y(),hc=Tg,J_=Tg;hc.default=J_;var a0={},wm={},bm=34,Sf=10,xm=13;function ev(e){return new Function("d","return {"+e.map(function(t,r){return JSON.stringify(t)+": d["+r+'] || ""'}).join(",")+"}")}function Y_(e,t){var r=ev(e);return function(s,l){return t(r(s),l,e)}}function o0(e){var t=Object.create(null),r=[];return e.forEach(function(s){for(var l in s)l in t||r.push(t[l]=l)}),r}function vA(e,t){var r=e+"",s=r.length;return s<t?new Array(t-s+1).join(0)+r:r}function $_(e){return e<0?"-"+vA(-e,6):e>9999?"+"+vA(e,6):vA(e,4)}function ew(e){var t=e.getUTCHours(),r=e.getUTCMinutes(),s=e.getUTCSeconds(),l=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":$_(e.getUTCFullYear())+"-"+vA(e.getUTCMonth()+1,2)+"-"+vA(e.getUTCDate(),2)+(l?"T"+vA(t,2)+":"+vA(r,2)+":"+vA(s,2)+"."+vA(l,3)+"Z":s?"T"+vA(t,2)+":"+vA(r,2)+":"+vA(s,2)+"Z":r||t?"T"+vA(t,2)+":"+vA(r,2)+"Z":"")}function tw(e){var t=new RegExp('["'+e+`
\r]`),r=e.charCodeAt(0);function s(E,w){var x,Q,P=l(E,function(R,k){if(x)return x(R,k-1);Q=R,x=w?Y_(R,w):ev(R)});return P.columns=Q||[],P}function l(E,w){var x=[],Q=E.length,P=0,R=0,k,O=Q<=0,G=!1;E.charCodeAt(Q-1)===Sf&&--Q,E.charCodeAt(Q-1)===xm&&--Q;function K(){if(O)return wm;if(G)return G=!1,a0;var $,fe=P,Ae;if(E.charCodeAt(fe)===bm){for(;P++<Q&&E.charCodeAt(P)!==bm||E.charCodeAt(++P)===bm;);return($=P)>=Q?O=!0:(Ae=E.charCodeAt(P++))===Sf?G=!0:Ae===xm&&(G=!0,E.charCodeAt(P)===Sf&&++P),E.slice(fe+1,$-1).replace(/""/g,'"')}for(;P<Q;){if((Ae=E.charCodeAt($=P++))===Sf)G=!0;else if(Ae===xm)G=!0,E.charCodeAt(P)===Sf&&++P;else if(Ae!==r)continue;return E.slice(fe,$)}return O=!0,E.slice(fe,Q)}for(;(k=K())!==wm;){for(var Z=[];k!==a0&&k!==wm;)Z.push(k),k=K();w&&(Z=w(Z,R++))==null||x.push(Z)}return x}function c(E,w){return E.map(function(x){return w.map(function(Q){return p(x[Q])}).join(e)})}function h(E,w){return w==null&&(w=o0(E)),[w.map(p).join(e)].concat(c(E,w)).join(`
`)}function a(E,w){return w==null&&(w=o0(E)),c(E,w).join(`
`)}function d(E){return E.map(_).join(`
`)}function _(E){return E.map(p).join(e)}function p(E){return E==null?"":E instanceof Date?ew(E):t.test(E+="")?'"'+E.replace(/"/g,'""')+'"':E}return{parse:s,parseRows:l,format:h,formatBody:a,formatRows:d,formatRow:_,formatValue:p}}var rw=tw(","),tv=rw.parse;function nw(e){for(var t in e){var r=e[t].trim(),s,l;if(!r)r=null;else if(r==="true")r=!0;else if(r==="false")r=!1;else if(r==="NaN")r=NaN;else if(!isNaN(s=+r))r=s;else if(l=r.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))iw&&l[4]&&!l[7]&&(r=r.replace(/-/g,"/").replace(/T/," ")),r=new Date(r);else continue;e[t]=r}return e}const iw=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function sw(e){return e}function aw(e){if(e==null)return sw;var t,r,s=e.scale[0],l=e.scale[1],c=e.translate[0],h=e.translate[1];return function(a,d){d||(t=r=0);var _=2,p=a.length,E=new Array(p);for(E[0]=(t+=a[0])*s+c,E[1]=(r+=a[1])*l+h;_<p;)E[_]=a[_],++_;return E}}function ow(e,t){for(var r,s=e.length,l=s-t;l<--s;)r=e[l],e[l++]=e[s],e[s]=r}function rv(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(r){return A0(e,r)})}:A0(e,t)}function A0(e,t){var r=t.id,s=t.bbox,l=t.properties==null?{}:t.properties,c=Aw(e,t);return r==null&&s==null?{type:"Feature",properties:l,geometry:c}:s==null?{type:"Feature",id:r,properties:l,geometry:c}:{type:"Feature",id:r,bbox:s,properties:l,geometry:c}}function Aw(e,t){var r=aw(e.transform),s=e.arcs;function l(p,E){E.length&&E.pop();for(var w=s[p<0?~p:p],x=0,Q=w.length;x<Q;++x)E.push(r(w[x],x));p<0&&ow(E,Q)}function c(p){return r(p)}function h(p){for(var E=[],w=0,x=p.length;w<x;++w)l(p[w],E);return E.length<2&&E.push(E[0]),E}function a(p){for(var E=h(p);E.length<4;)E.push(E[0]);return E}function d(p){return p.map(a)}function _(p){var E=p.type,w;switch(E){case"GeometryCollection":return{type:E,geometries:p.geometries.map(_)};case"Point":w=c(p.coordinates);break;case"MultiPoint":w=p.coordinates.map(c);break;case"LineString":w=h(p.arcs);break;case"MultiLineString":w=p.arcs.map(h);break;case"Polygon":w=d(p.arcs);break;case"MultiPolygon":w=p.arcs.map(d);break;default:return null}return{type:E,coordinates:w}}return _(t)}function lw(e,t){for(let r in e[t])document.documentElement.style.setProperty("--"+r,e[t][r])}function nv(){let e=window.matchMedia("(prefers-reduced-motion: reduce)");return!(!e||e.matches)}async function l0(e){let r=await(await fetch(e)).text();return await tv(r,nw)}async function Mc(e,t){let s=await(await fetch(e)).json();return await rv(s,t)}async function If(e,t){let s=await(await fetch(e)).json();return await rv(s,t)}function c0(e,t,r){let s,l=!1,c=1;for(;l==!1;)e<=t[c]?(s=r[c-1],l=!0):c++;return s||"lightgrey"}function u0(e,t){let r,s=t.length;return e=="pretrial"?r=[0,12.4,24.8,t[s-1]]:e=="admission"?r=[0,13.6,27.2,t[s-1]]:e=="over_1000_19"?r=[0,1,2]:e=="over_1000_99"?r=[0,1,2]:e=="GT_1000_beds_99"?r=[-1,0,1]:e=="GT_1000_beds_19"?r=[-1,0,1]:e=="est_doc_rev"?r=[-1,0,1]:e=="ice"?r=[-1,0,1]:e=="map_twp"?r=[-1,0,1]:e=="map_private"?r=[-1,0,1]:e=="map_prison"?r=[-1,0,1]:e=="map_all"?r=[-1,0,1]:r=[t[0],t[Math.floor(s*.33333)],t[Math.floor(s*.66666)],t[s-1]],r}const Nf={light:{text:"#222",muted:"#777",pale:"#f0f0f0",background:"#fff7f0"},dark:{text:"#fff",muted:"#bbb",pale:"#333",background:"#222"},lightblue:{text:"#206095",muted:"#707070",pale:"#f0f0f0",background:"rgb(188, 207, 222)"}},h0={pretrial:["#ef4136","#b81c1f","#790f09"],admission:["#ef4136","#b81c1f","#790f09"],over_1000_19:["rgba(255,255,255,0)","rgba(255,240,0,.5)"],over_1000_99:["rgba(255,255,255,0)","rgba(255,240,0,.5)"],map_jails:["rgba(255,255,255,0)","rgba(46,29,151,.9)"],GT_1000_beds_99:["rgba(255,255,255,0)","rgba(46,29,151,.9)"],GT_1000_beds_19:["rgba(255,255,255,0)","rgba(46,29,151,.9)"],est_doc_rev:["rgba(255,255,255,0)","rgba(23,134,31,.9)"],ice:["rgba(255,255,255,0)","rgba(138,158,30,.9)"],map_prison:["rgba(255,255,255,0)","rgba(0,92,229, 0.9)"],map_private:["rgba(255,255,255,0)","rgba(143,50,161,.9)"],map_twp:["rgba(255,255,255,0)","rgba(255,158,68,0.9)"],map_all:["rgba(255,255,255,0)","rgba(0,0,0,.9)"]};function cw(e){let t;return{c(){t=Lt("div"),t.innerHTML=`<p>Louisiana’s 64 parishes range from bustling cities to vast rural stretches,
    from the parks and preserves of the north to the swamps and marshes of the
    gulf. Yet, they all share one defining characteristic: a stake in the
    state’s vast network of jails, prisons, and juvenile detention facilities.</p> 

  <p>The prevalence of incarceration in Louisiana is hard to see in many places
    due to an alarming lack of transparency and data, as well as a convoluted
    carceral landscape where local jails also function as prisons. But parish-
    and state-level research by the Vera Institute of Justice brings much-needed
    clarity to this picture. Vera’s datahub provides illuminating access to
    parish-level data on arrests, pretrial detention, incarceration, and local
    spending on the criminal legal system. Together, these data points create a
    detailed—and highly damning—picture of mass incarceration in Louisiana.</p> 

  <p>It is a system of clear winners and losers, financially benefiting those
    with a stake in the system, including the state, local sheriffs, and private
    corporations. The Louisiana Department of Public Safety &amp; Corrections pays
    local jails <a href="https://house.louisiana.gov/housefiscal/DOCS_APP_BDGT_MEETINGS/DOCS_APPBudgetMeetings2022/FY%2023%20Corrections.pdf" target="_blank">$177 million</a> annually to hold more than half the people who have been sentenced to
    prison.</p> 

  <p>But the people of Louisiana are losing. If incarceration created safety,
    Louisiana would be among the safest places in the world. Instead, making
    Louisiana a safer place requires scaling back its vast incarceration system
    and reallocating funds to the <a href="https://www.brookings.edu/essay/a-new-community-safety-blueprint-how-the-federal-government-can-address-violence-and-harm-through-a-public-health-approach/" target="_blank">things that actually make communities safe</a>: jobs, housing, healthcare, good schools, and infrastructure.</p> 
  <p>Conversations around Louisiana’s high incarceration rates tend to center on
    dense population centers. But a closer look at the data collected by Vera
    tells a different story: incarceration has expanded across the state,
    especially in rural parishes.</p>`,ue(t,"id","top"),ue(t,"class","col-wide svelte-b3douq")},m(r,s){At(r,t,s)},p:bn,i:bn,o:bn,d(r){r&&at(t)}}}class uw extends ni{constructor(t){super(),ri(this,t,null,cw,ei,{})}}function hw(e){let t;return{c(){t=Lt("div"),t.innerHTML=`<p class="point svelte-krasw1">The parish and state-level data collected by Vera for this project reveals
    how both the state and local governments can scale back the destructive
    influence of mass incarceration. Local and state-level government bodies in
    Louisiana should do the following:</p> 
  <ul class="svelte-krasw1"><li class="svelte-krasw1">End Louisiana’s practice of housing distinct groups of people with vastly
      different needs in the same multi-use facilities; for example, housing
      juveniles at Louisiana State Penitentiary (Angola) and housing people with
      prison sentences in pretrial detention facilities, like parish jails. The
      state should use sentencing reform, applied retroactively, to reduce the
      number of incarcerated people to fit current Department of Public Safety &amp;
      Corrections capacity.</li> 

    <li class="svelte-krasw1">Pass a data transparency bill that standardizes the data a carceral
      facility must collect and report.</li> 

    <li class="svelte-krasw1">Reduce the prison population by providing parole eligibility after 20
      years to people serving long sentences and after 25 years to those serving
      life sentences; making parole-eligibility and sentencing reforms available
      retroactively; and implementing a felony classification system to
      eliminate inconsistencies in sentencing and release.</li> 

    <li class="svelte-krasw1">Pass legislation that allows people charged with non-violent felonies and
      misdemeanors to be issued a summons in lieu of arrest, and enact
      comprehensive bail reform so that money does not determine freedom.</li> 

    <li class="svelte-krasw1">Advance civilian responses to <a href="https://www.vera.org/behavioral-health-crisis-alternatives" target="_blank">911 calls that don’t require law enforcement</a>. Removing the police from encounters that don’t require them—like
      mental health crises,
      <a href="https://www.vera.org/ending-mass-incarceration/criminalization-racial-disparities/public-safety/redefining-public-safety-initiative/stop-the-stops" target="_blank">low-level traffic violations</a>, and noise complaints—is
      <a href="https://www.brookings.edu/essay/a-new-community-safety-blueprint-how-the-federal-government-can-address-violence-and-harm-through-a-public-health-approach/" target="_blank">proven to improve safety</a>, while also reducing arrests (and thus jail admissions).</li> 

    <li class="svelte-krasw1">Enact meaningful reforms that will allow for jail decarceration, and then
      close jails and repurpose carceral facilities for non-jail, non-detention
      purposes. Reducing corrections spending and ending mass incarceration in
      Louisiana will require lowering jail capacity. This means working towards
      permanently closing jails.</li></ul>`,ue(t,"id","bottom"),ue(t,"class","col-wide svelte-krasw1")},m(r,s){At(r,t,s)},p:bn,i:bn,o:bn,d(r){r&&at(t)}}}class fw extends ni{constructor(t){super(),ri(this,t,null,hw,ei,{})}}function dw(e){let t;return{c(){t=Lt("div"),t.innerHTML=`<h2>About the Data</h2> 
  <p>Vera collected data for Louisiana’s prisons, jails, and juvenile justice
    facilities using information published on state and local government
    websites and the U.S. Bureau of Justice Statistics 2019 Census of Jails.
    Vera collected pretrial population data from reports prepared by the
    Louisiana Department of Public Safety &amp; Corrections (DPS&amp;C). Vera collected
    prison admission data from the DPS&amp;C Briefing Book. Vera collected arrest
    data from the FBI Uniform Crime Report accessed via Vera’s Arrest Trends
    tool. Vera collected budget data from the U.S. Census Annual Survey of
    Public Employment &amp; Payroll.</p> 

  <span class="more"><a href="/louisiana-locked-up/data">More</a></span>`,ue(t,"id","about-data"),ue(t,"class","svelte-u7rjb0")},m(r,s){At(r,t,s)},p:bn,i:bn,o:bn,d(r){r&&at(t)}}}class iv extends ni{constructor(t){super(),ri(this,t,null,dw,ei,{})}}function pw(e){let t,r,s;const l=e[2].default,c=wA(l,e,e[1],null);return{c(){t=Lt("section"),r=Lt("div"),c&&c.c(),ue(r,"class","col-wide"),Qn(t,"color",Nf[e[0]].text),Qn(t,"background-color",Nf[e[0]].background)},m(h,a){At(h,t,a),it(t,r),c&&c.m(r,null),s=!0},p(h,[a]){c&&c.p&&(!s||a&2)&&xA(c,l,h,h[1],s?bA(l,h[1],a,null):BA(h[1]),null),(!s||a&1)&&Qn(t,"color",Nf[h[0]].text),(!s||a&1)&&Qn(t,"background-color",Nf[h[0]].background)},i(h){s||(Mt(c,h),s=!0)},o(h){Gt(c,h),s=!1},d(h){h&&at(t),c&&c.d(h)}}}function mw(e,t,r){let{$$slots:s={},$$scope:l}=t,{theme:c=$o("theme")}=t;return e.$$set=h=>{"theme"in h&&r(0,c=h.theme),"$$scope"in h&&r(1,l=h.$$scope)},[c,l,s]}class gw extends ni{constructor(t){super(),ri(this,t,mw,pw,ei,{theme:0})}}const{window:sv}=Gy,yw=e=>({}),f0=e=>({}),vw=e=>({}),d0=e=>({});function _w(e){let t,r,s,l,c,h,a,d;wu(e[19]);const _=e[18].background,p=wA(_,e,e[17],d0),E=e[18].foreground,w=wA(E,e,e[17],f0);return{c(){t=Lt("svelte-scroller-outer"),r=Lt("svelte-scroller-background-container"),s=Lt("svelte-scroller-background"),p&&p.c(),l=$t(),c=Lt("svelte-scroller-foreground"),w&&w.c(),Gd(s,"class","svelte-3stote"),Gd(r,"class","background-container svelte-3stote"),Gd(c,"class","svelte-3stote"),Gd(t,"class","svelte-3stote"),pp(t,"splitscreen",e[0])},m(x,Q){At(x,t,Q),it(t,r),it(r,s),p&&p.m(s,null),e[20](s),e[21](r),it(t,l),it(t,c),w&&w.m(c,null),e[22](c),e[23](t),h=!0,a||(d=es(sv,"resize",e[19]),a=!0)},p(x,Q){p&&p.p&&(!h||Q[0]&131072)&&xA(p,_,x,x[17],h?bA(_,x[17],Q,vw):BA(x[17]),d0),w&&w.p&&(!h||Q[0]&131072)&&xA(w,E,x,x[17],h?bA(E,x[17],Q,yw):BA(x[17]),f0),(!h||Q[0]&1)&&pp(t,"splitscreen",x[0])},i(x){h||(Mt(p,x),Mt(w,x),h=!0)},o(x){Gt(p,x),Gt(w,x),h=!1},d(x){x&&at(t),p&&p.d(x),e[20](null),e[21](null),w&&w.d(x),e[22](null),e[23](null),a=!1,d()}}}const cc=[];let mp;if(typeof window<"u"){const e=()=>cc.forEach(t=>t());window.addEventListener("scroll",e),window.addEventListener("resize",e)}if(typeof IntersectionObserver<"u"){const e=new Map,t=new IntersectionObserver((r,s)=>{r.forEach(l=>{const c=e.get(l.target),h=cc.indexOf(c);l.isIntersecting?h===-1&&cc.push(c):(c(),h!==-1&&cc.splice(h,1))})},{rootMargin:"400px 0px"});mp={add:({outer:r,update:s})=>{const{top:l,bottom:c}=r.getBoundingClientRect();l<window.innerHeight&&c>0&&cc.push(s),e.set(r,s),t.observe(r)},remove:({outer:r,update:s})=>{const l=cc.indexOf(s);l!==-1&&cc.splice(l,1),e.delete(r),t.unobserve(r)}}}else mp={add:({update:e})=>{cc.push(e)},remove:({update:e})=>{const t=cc.indexOf(e);t!==-1&&cc.splice(t,1)}};function ww(e,t,r){let s,l,c,{$$slots:h={},$$scope:a}=t,{top:d=0}=t,{bottom:_=1}=t,{threshold:p=.5}=t,{query:E="section"}=t,{parallax:w=!1}=t,{index:x=0}=t,{count:Q=0}=t,{offset:P=0}=t,{progress:R=0}=t,{visible:k=!1}=t,{splitscreen:O=!1}=t,{id:G=null}=t,K,Z,$,fe,Ae,ge=0,he,ee,ne=1;Wa(()=>{Ae=$.querySelectorAll(E),r(7,Q=Ae.length),ve();const je={outer:K,update:ve};return mp.add(je),()=>mp.remove(je)});function xe(){if(Z){let je=`position: ${he?"fixed":"absolute"}; top: 0; transform: translate(0, ${ee}px); width: ${ne}px; z-index: ${1};`;r(3,Z.style.cssText=je,Z)}}function ve(){if(!$)return;const je=K.getBoundingClientRect();je.left,ne=je.right-je.left;const St=$.getBoundingClientRect(),te=fe.getBoundingClientRect();r(10,k=St.top<ge&&St.bottom>0);const Fe=St.bottom-St.top,Qe=te.bottom-te.top,Ve=l-s;for(r(9,R=(s-St.top)/(Fe-Ve)),R<=0?(ee=0,he&&(he=!1,xe())):R>=1?(ee=w?Fe-Qe:Fe-Ve,he&&(he=!1,xe())):(ee=w?Math.round(s-R*(Qe-Ve)):s,he||(he=!0,xe())),r(6,x=0);x<Ae.length;r(6,x+=1)){const st=Ae[x],{top:dt}=st.getBoundingClientRect(),Bt=Ae[x+1],Ge=Bt?Bt.getBoundingClientRect().top:St.bottom;if(r(8,P=(c-dt)/(Ge-dt)),r(11,G=st.dataset.id?st.dataset.id:null),Ge>=c)break}}function ze(){r(1,ge=sv.innerHeight)}function Le(je){qa[je?"unshift":"push"](()=>{fe=je,r(5,fe)})}function Ke(je){qa[je?"unshift":"push"](()=>{Z=je,r(3,Z)})}function Ue(je){qa[je?"unshift":"push"](()=>{$=je,r(4,$)})}function rt(je){qa[je?"unshift":"push"](()=>{K=je,r(2,K)})}return e.$$set=je=>{"top"in je&&r(12,d=je.top),"bottom"in je&&r(13,_=je.bottom),"threshold"in je&&r(14,p=je.threshold),"query"in je&&r(15,E=je.query),"parallax"in je&&r(16,w=je.parallax),"index"in je&&r(6,x=je.index),"count"in je&&r(7,Q=je.count),"offset"in je&&r(8,P=je.offset),"progress"in je&&r(9,R=je.progress),"visible"in je&&r(10,k=je.visible),"splitscreen"in je&&r(0,O=je.splitscreen),"id"in je&&r(11,G=je.id),"$$scope"in je&&r(17,a=je.$$scope)},e.$$.update=()=>{e.$$.dirty[0]&4098&&(s=Math.round(d*ge)),e.$$.dirty[0]&8194&&(l=Math.round(_*ge)),e.$$.dirty[0]&16386&&(c=Math.round(p*ge)),e.$$.dirty[0]&94208&&ve()},[O,ge,K,Z,$,fe,x,Q,P,R,k,G,d,_,p,E,w,a,h,ze,Le,Ke,Ue,rt]}class bw extends ni{constructor(t){super(),ri(this,t,ww,_w,ei,{top:12,bottom:13,threshold:14,query:15,parallax:16,index:6,count:7,offset:8,progress:9,visible:10,splitscreen:0,id:11},null,[-1,-1])}}var Ol=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xw(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Bw(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function s(){if(this instanceof s){var l=[null];l.push.apply(l,arguments);var c=Function.bind.apply(t,l);return new c}return t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(s){var l=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(r,s,l.get?l:{enumerable:!0,get:function(){return e[s]}})}),r}var Xm={},Cw={get exports(){return Xm},set exports(e){Xm=e}};(function(e,t){(function(r,s){e.exports=s()})(Ol,function(){var r,s,l;function c(a,d){if(!r)r=d;else if(!s)s=d;else{var _="var sharedChunk = {}; ("+r+")(sharedChunk); ("+s+")(sharedChunk);",p={};r(p),l=d(p),typeof window<"u"&&(l.workerUrl=window.URL.createObjectURL(new Blob([_],{type:"text/javascript"})))}}c(["exports"],function(a){var d=_;function _(o,n,A,f){this.cx=3*o,this.bx=3*(A-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(f-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=n,this.p2x=A,this.p2y=f}function p(o,n,A,f){const y=new d(o,n,A,f);return function(C){return y.solve(C)}}_.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,n){if(n===void 0&&(n=1e-6),o<0)return 0;if(o>1)return 1;for(var A=o,f=0;f<8;f++){var y=this.sampleCurveX(A)-o;if(Math.abs(y)<n)return A;var C=this.sampleCurveDerivativeX(A);if(Math.abs(C)<1e-6)break;A-=y/C}var I=0,D=1;for(A=o,f=0;f<20&&(y=this.sampleCurveX(A),!(Math.abs(y-o)<n));f++)o>y?I=A:D=A,A=.5*(D-I)+I;return A},solve:function(o,n){return this.sampleCurveY(this.solveCurveX(o,n))}};const E=p(.25,.1,.25,1);function w(o,n,A){return Math.min(A,Math.max(n,o))}function x(o,n,A){const f=A-n,y=((o-n)%f+f)%f+n;return y===n?A:y}function Q(o,...n){for(const A of n)for(const f in A)o[f]=A[f];return o}let P=1;function R(o,n){o.forEach(A=>{n[A]&&(n[A]=n[A].bind(n))})}function k(o,n,A){const f={};for(const y in o)f[y]=n.call(A||this,o[y],y,o);return f}function O(o,n,A){const f={};for(const y in o)n.call(A||this,o[y],y,o)&&(f[y]=o[y]);return f}function G(o){return Array.isArray(o)?o.map(G):typeof o=="object"&&o?k(o,G):o}const K={};function Z(o){K[o]||(typeof console<"u"&&console.warn(o),K[o]=!0)}function $(o,n,A){return(A.y-o.y)*(n.x-o.x)>(n.y-o.y)*(A.x-o.x)}function fe(o){let n=0;for(let A,f,y=0,C=o.length,I=C-1;y<C;I=y++)A=o[y],f=o[I],n+=(f.x-A.x)*(A.y+f.y);return n}function Ae(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function ge(o){const n={};if(o.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(A,f,y,C)=>{const I=y||C;return n[f]=!I||I.toLowerCase(),""}),n["max-age"]){const A=parseInt(n["max-age"],10);isNaN(A)?delete n["max-age"]:n["max-age"]=A}return n}let he,ee,ne=null;function xe(o){if(ne==null){const n=o.navigator?o.navigator.userAgent:null;ne=!!o.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return ne}function ve(o){return typeof ImageBitmap<"u"&&o instanceof ImageBitmap}const ze={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(o){const n=requestAnimationFrame(o);return{cancel:()=>cancelAnimationFrame(n)}},getImageData(o,n=0){const A=window.document.createElement("canvas"),f=A.getContext("2d");if(!f)throw new Error("failed to create canvas 2d context");return A.width=o.width,A.height=o.height,f.drawImage(o,0,0,o.width,o.height),f.getImageData(-n,-n,o.width+2*n,o.height+2*n)},resolveURL:o=>(he||(he=document.createElement("a")),he.href=o,he.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(ee==null&&(ee=matchMedia("(prefers-reduced-motion: reduce)")),ee.matches)}};var Le=Ke;function Ke(o,n){this.x=o,this.y=n}Ke.prototype={clone:function(){return new Ke(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,n){return this.clone()._rotateAround(o,n)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var n=o.x-this.x,A=o.y-this.y;return n*n+A*A},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,n){return Math.atan2(this.x*n-this.y*o,this.x*o+this.y*n)},_matMult:function(o){var n=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=n,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var n=Math.cos(o),A=Math.sin(o),f=A*this.x+n*this.y;return this.x=n*this.x-A*this.y,this.y=f,this},_rotateAround:function(o,n){var A=Math.cos(o),f=Math.sin(o),y=n.y+f*(this.x-n.x)+A*(this.y-n.y);return this.x=n.x+A*(this.x-n.x)-f*(this.y-n.y),this.y=y,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Ke.convert=function(o){return o instanceof Ke?o:Array.isArray(o)?new Ke(o[0],o[1]):o};const Ue={MAX_PARALLEL_IMAGE_REQUESTS:16,REGISTERED_PROTOCOLS:{}},rt="mapbox-tiles";let je,St,te=500,Fe=50;function Qe(){typeof caches>"u"||je||(je=caches.open(rt))}let Ve=1/0;const st={supported:!1,testSupport:function(o){!Ge&&Bt&&(tt?Qt(o):dt=o)}};let dt,Bt,Ge=!1,tt=!1;function Qt(o){const n=o.createTexture();o.bindTexture(o.TEXTURE_2D,n);try{if(o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,Bt),o.isContextLost())return;st.supported=!0}catch{}o.deleteTexture(n),Ge=!0}typeof document<"u"&&(Bt=document.createElement("img"),Bt.onload=function(){dt&&Qt(dt),dt=null,tt=!0},Bt.onerror=function(){Ge=!0,dt=null},Bt.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const ht={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(ht);class Nt extends Error{constructor(n,A,f,y){super(`AJAXError: ${A} (${n}): ${f}`),this.status=n,this.statusText=A,this.url=f,this.body=y}}const dr=Ae()?()=>self.worker&&self.worker.referrer:()=>(window.location.protocol==="blob:"?window.parent:window).location.href;function Pt(o,n){const A=new AbortController,f=new Request(o.url,{method:o.method||"GET",body:o.body,credentials:o.credentials,headers:o.headers,referrer:dr(),signal:A.signal});let y=!1,C=!1;return o.type==="json"&&f.headers.set("Accept","application/json"),((I,D,z)=>{if(C)return;const X=Date.now();fetch(f).then(ie=>ie.ok?((ce,ye,Be)=>{(o.type==="arrayBuffer"?ce.arrayBuffer():o.type==="json"?ce.json():ce.text()).then(Ee=>{C||(ye&&Be&&function($e,Ze,Et){if(Qe(),!je)return;const Kt={status:Ze.status,statusText:Ze.statusText,headers:new Headers};Ze.headers.forEach((Dt,or)=>Kt.headers.set(or,Dt));const xt=ge(Ze.headers.get("Cache-Control")||"");xt["no-store"]||(xt["max-age"]&&Kt.headers.set("Expires",new Date(Et+1e3*xt["max-age"]).toUTCString()),new Date(Kt.headers.get("Expires")).getTime()-Et<42e4||function(Dt,or){if(St===void 0)try{new Response(new ReadableStream),St=!0}catch{St=!1}St?or(Dt.body):Dt.blob().then(or)}(Ze,Dt=>{const or=new Response(Dt,Kt);Qe(),je&&je.then(ar=>ar.put(function(Yr){const on=Yr.indexOf("?");return on<0?Yr:Yr.slice(0,on)}($e.url),or)).catch(ar=>Z(ar.message))}))}(f,ye,Be),y=!0,n(null,Ee,ce.headers.get("Cache-Control"),ce.headers.get("Expires")))}).catch(Ee=>{C||n(new Error(Ee.message))})})(ie,null,X):ie.blob().then(ce=>n(new Nt(ie.status,ie.statusText,o.url,ce)))).catch(ie=>{ie.code!==20&&n(new Error(ie.message))})})(),{cancel:()=>{C=!0,y||A.abort()}}}const Oe=function(o,n){if(/:\/\//.test(o.url)&&!/^https?:|^file:/.test(o.url)){if(Ae()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,n);if(!Ae()){const f=o.url.substring(0,o.url.indexOf("://"));return(Ue.REGISTERED_PROTOCOLS[f]||Pt)(o,n)}}if(!(/^file:/.test(A=o.url)||/^file:/.test(dr())&&!/^\w+:/.test(A))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return Pt(o,n);if(Ae()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",o,n,void 0,!0)}var A;return function(f,y){const C=new XMLHttpRequest;C.open(f.method||"GET",f.url,!0),f.type==="arrayBuffer"&&(C.responseType="arraybuffer");for(const I in f.headers)C.setRequestHeader(I,f.headers[I]);return f.type==="json"&&(C.responseType="text",C.setRequestHeader("Accept","application/json")),C.withCredentials=f.credentials==="include",C.onerror=()=>{y(new Error(C.statusText))},C.onload=()=>{if((C.status>=200&&C.status<300||C.status===0)&&C.response!==null){let I=C.response;if(f.type==="json")try{I=JSON.parse(C.response)}catch(D){return y(D)}y(null,I,C.getResponseHeader("Cache-Control"),C.getResponseHeader("Expires"))}else{const I=new Blob([C.response],{type:C.getResponseHeader("Content-Type")});y(new Nt(C.status,C.statusText,f.url,I))}},C.send(f.body),{cancel:()=>C.abort()}}(o,n)},pr=function(o,n){return Oe(Q(o,{type:"arrayBuffer"}),n)};function sr(o){const n=window.document.createElement("a");return n.href=o,n.protocol===window.document.location.protocol&&n.host===window.document.location.host}const zt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let fr,Br;fr=[],Br=0;const vr=function(o,n){if(st.supported&&(o.headers||(o.headers={}),o.headers.accept="image/webp,*/*"),Br>=Ue.MAX_PARALLEL_IMAGE_REQUESTS){const C={requestParameters:o,callback:n,cancelled:!1,cancel(){this.cancelled=!0}};return fr.push(C),C}Br++;let A=!1;const f=()=>{if(!A)for(A=!0,Br--;fr.length&&Br<Ue.MAX_PARALLEL_IMAGE_REQUESTS;){const C=fr.shift(),{requestParameters:I,callback:D,cancelled:z}=C;z||(C.cancel=vr(I,D).cancel)}},y=pr(o,(C,I,D,z)=>{f(),C?n(C):I&&function(X,ie){typeof createImageBitmap=="function"?function(ce,ye){const Be=new Blob([new Uint8Array(ce)],{type:"image/png"});createImageBitmap(Be).then(Ee=>{ye(null,Ee)}).catch(Ee=>{ye(new Error(`Could not load image because of ${Ee.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(X,ie):function(ce,ye){const Be=new Image;Be.onload=()=>{ye(null,Be),URL.revokeObjectURL(Be.src),Be.onload=null,window.requestAnimationFrame(()=>{Be.src=zt})},Be.onerror=()=>ye(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const Ee=new Blob([new Uint8Array(ce)],{type:"image/png"});Be.src=ce.byteLength?URL.createObjectURL(Ee):zt}(X,ie)}(I,(X,ie)=>{X!=null?n(X):ie!=null&&n(null,ie,{cacheControl:D,expires:z})})});return{cancel:()=>{y.cancel(),f()}}};function Gr(o,n,A){A[o]&&A[o].indexOf(n)!==-1||(A[o]=A[o]||[],A[o].push(n))}function rr(o,n,A){if(A&&A[o]){const f=A[o].indexOf(n);f!==-1&&A[o].splice(f,1)}}class xr{constructor(n,A={}){Q(this,A),this.type=n}}class Zr extends xr{constructor(n,A={}){super("error",Q({error:n},A))}}class pn{on(n,A){return this._listeners=this._listeners||{},Gr(n,A,this._listeners),this}off(n,A){return rr(n,A,this._listeners),rr(n,A,this._oneTimeListeners),this}once(n,A){return this._oneTimeListeners=this._oneTimeListeners||{},Gr(n,A,this._oneTimeListeners),this}fire(n,A){typeof n=="string"&&(n=new xr(n,A||{}));const f=n.type;if(this.listens(f)){n.target=this;const y=this._listeners&&this._listeners[f]?this._listeners[f].slice():[];for(const D of y)D.call(this,n);const C=this._oneTimeListeners&&this._oneTimeListeners[f]?this._oneTimeListeners[f].slice():[];for(const D of C)rr(f,D,this._oneTimeListeners),D.call(this,n);const I=this._eventedParent;I&&(Q(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),I.fire(n))}else n instanceof Zr&&console.error(n.error);return this}listens(n){return this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n)}setEventedParent(n,A){return this._eventedParent=n,this._eventedParentData=A,this}}var vt={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1},elevationOffset:{type:"number",default:450}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};class nt{constructor(n,A,f,y){this.message=(n?`${n}: `:"")+f,y&&(this.identifier=y),A!=null&&A.__line__&&(this.line=A.__line__)}}function bt(o){const n=o.value;return n?[new nt(o.key,n,"constants have been deprecated as of v8")]:[]}function Ct(o,...n){for(const A of n)for(const f in A)o[f]=A[f];return o}function jt(o){return o instanceof Number||o instanceof String||o instanceof Boolean?o.valueOf():o}function er(o){if(Array.isArray(o))return o.map(er);if(o instanceof Object&&!(o instanceof Number||o instanceof String||o instanceof Boolean)){const n={};for(const A in o)n[A]=er(o[A]);return n}return jt(o)}class Vr extends Error{constructor(n,A){super(A),this.message=A,this.key=n}}class Fr{constructor(n,A=[]){this.parent=n,this.bindings={};for(const[f,y]of A)this.bindings[f]=y}concat(n){return new Fr(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}const un={kind:"null"},lr={kind:"number"},Er={kind:"string"},An={kind:"boolean"},wn={kind:"color"},_i={kind:"object"},br={kind:"value"},Cr={kind:"collator"},cr={kind:"formatted"},Kr={kind:"padding"},hn={kind:"resolvedImage"};function xn(o,n){return{kind:"array",itemType:o,N:n}}function Sn(o){if(o.kind==="array"){const n=Sn(o.itemType);return typeof o.N=="number"?`array<${n}, ${o.N}>`:o.itemType.kind==="value"?"array":`array<${n}>`}return o.kind}const ji=[un,lr,Er,An,wn,cr,_i,xn(br),Kr,hn];function tn(o,n){if(n.kind==="error")return null;if(o.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!tn(o.itemType,n.itemType))&&(typeof o.N!="number"||o.N===n.N))return null}else{if(o.kind===n.kind)return null;if(o.kind==="value"){for(const A of ji)if(!tn(A,n))return null}}return`Expected ${Sn(o)} but found ${Sn(n)} instead.`}function Wi(o,n){return n.some(A=>A.kind===o.kind)}function hs(o,n){return n.some(A=>A==="null"?o===null:A==="array"?Array.isArray(o):A==="object"?o&&!Array.isArray(o)&&typeof o=="object":A===typeof o)}var Ln,nn={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Ie(o){return(o=Math.round(o))<0?0:o>255?255:o}function Y(o){return Ie(o[o.length-1]==="%"?parseFloat(o)/100*255:parseInt(o))}function le(o){return(n=o[o.length-1]==="%"?parseFloat(o)/100:parseFloat(o))<0?0:n>1?1:n;var n}function Ce(o,n,A){return A<0?A+=1:A>1&&(A-=1),6*A<1?o+(n-o)*A*6:2*A<1?n:3*A<2?o+(n-o)*(2/3-A)*6:o}try{Ln={}.parseCSSColor=function(o){var n,A=o.replace(/ /g,"").toLowerCase();if(A in nn)return nn[A].slice();if(A[0]==="#")return A.length===4?(n=parseInt(A.substr(1),16))>=0&&n<=4095?[(3840&n)>>4|(3840&n)>>8,240&n|(240&n)>>4,15&n|(15&n)<<4,1]:null:A.length===7&&(n=parseInt(A.substr(1),16))>=0&&n<=16777215?[(16711680&n)>>16,(65280&n)>>8,255&n,1]:null;var f=A.indexOf("("),y=A.indexOf(")");if(f!==-1&&y+1===A.length){var C=A.substr(0,f),I=A.substr(f+1,y-(f+1)).split(","),D=1;switch(C){case"rgba":if(I.length!==4)return null;D=le(I.pop());case"rgb":return I.length!==3?null:[Y(I[0]),Y(I[1]),Y(I[2]),D];case"hsla":if(I.length!==4)return null;D=le(I.pop());case"hsl":if(I.length!==3)return null;var z=(parseFloat(I[0])%360+360)%360/360,X=le(I[1]),ie=le(I[2]),ce=ie<=.5?ie*(X+1):ie+X-ie*X,ye=2*ie-ce;return[Ie(255*Ce(ye,ce,z+1/3)),Ie(255*Ce(ye,ce,z)),Ie(255*Ce(ye,ce,z-1/3)),D];default:return null}}return null}}catch{}class Te{constructor(n,A,f,y=1){this.r=n,this.g=A,this.b=f,this.a=y}static parse(n){if(!n)return;if(n instanceof Te)return n;if(typeof n!="string")return;const A=Ln(n);return A?new Te(A[0]/255*A[3],A[1]/255*A[3],A[2]/255*A[3],A[3]):void 0}toString(){const[n,A,f,y]=this.toArray();return`rgba(${Math.round(n)},${Math.round(A)},${Math.round(f)},${y})`}toArray(){const{r:n,g:A,b:f,a:y}=this;return y===0?[0,0,0,0]:[255*n/y,255*A/y,255*f/y,y]}}Te.black=new Te(0,0,0,1),Te.white=new Te(1,1,1,1),Te.transparent=new Te(0,0,0,0),Te.red=new Te(1,0,0,1);class Xe{constructor(n,A,f){this.sensitivity=n?A?"variant":"case":A?"accent":"base",this.locale=f,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,A){return this.collator.compare(n,A)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class lt{constructor(n,A,f,y,C){this.text=n,this.image=A,this.scale=f,this.fontStack=y,this.textColor=C}}class Ye{constructor(n){this.sections=n}static fromString(n){return new Ye([new lt(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof Ye?n:Ye.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}}class qe{constructor(n){this.values=n.slice()}static parse(n){if(n instanceof qe)return n;if(typeof n=="number")return new qe([n,n,n,n]);if(Array.isArray(n)&&!(n.length<1||n.length>4)){for(const A of n)if(typeof A!="number")return;switch(n.length){case 1:n=[n[0],n[0],n[0],n[0]];break;case 2:n=[n[0],n[1],n[0],n[1]];break;case 3:n=[n[0],n[1],n[2],n[1]]}return new qe(n)}}toString(){return JSON.stringify(this.values)}}class ut{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new ut({name:n,available:!1}):null}}function Ot(o,n,A,f){return typeof o=="number"&&o>=0&&o<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof A=="number"&&A>=0&&A<=255?f===void 0||typeof f=="number"&&f>=0&&f<=1?null:`Invalid rgba value [${[o,n,A,f].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof f=="number"?[o,n,A,f]:[o,n,A]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function nr(o){if(o===null||typeof o=="string"||typeof o=="boolean"||typeof o=="number"||o instanceof Te||o instanceof Xe||o instanceof Ye||o instanceof qe||o instanceof ut)return!0;if(Array.isArray(o)){for(const n of o)if(!nr(n))return!1;return!0}if(typeof o=="object"){for(const n in o)if(!nr(o[n]))return!1;return!0}return!1}function Ht(o){if(o===null)return un;if(typeof o=="string")return Er;if(typeof o=="boolean")return An;if(typeof o=="number")return lr;if(o instanceof Te)return wn;if(o instanceof Xe)return Cr;if(o instanceof Ye)return cr;if(o instanceof qe)return Kr;if(o instanceof ut)return hn;if(Array.isArray(o)){const n=o.length;let A;for(const f of o){const y=Ht(f);if(A){if(A===y)continue;A=br;break}A=y}return xn(A||br,n)}return _i}function jr(o){const n=typeof o;return o===null?"":n==="string"||n==="number"||n==="boolean"?String(o):o instanceof Te||o instanceof Ye||o instanceof qe||o instanceof ut?o.toString():JSON.stringify(o)}class zr{constructor(n,A){this.type=n,this.value=A}static parse(n,A){if(n.length!==2)return A.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!nr(n[1]))return A.error("invalid value");const f=n[1];let y=Ht(f);const C=A.expectedType;return y.kind!=="array"||y.N!==0||!C||C.kind!=="array"||typeof C.N=="number"&&C.N!==0||(y=C),new zr(y,f)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Ir{constructor(n){this.name="ExpressionEvaluationError",this.message=n}toJSON(){return this.message}}const ln={string:Er,number:lr,boolean:An,object:_i};class dn{constructor(n,A){this.type=n,this.args=A}static parse(n,A){if(n.length<2)return A.error("Expected at least one argument.");let f,y=1;const C=n[0];if(C==="array"){let D,z;if(n.length>2){const X=n[1];if(typeof X!="string"||!(X in ln)||X==="object")return A.error('The item type argument of "array" must be one of string, number, boolean',1);D=ln[X],y++}else D=br;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return A.error('The length argument to "array" must be a positive integer literal',2);z=n[2],y++}f=xn(D,z)}else{if(!ln[C])throw new Error(`Types doesn't contain name = ${C}`);f=ln[C]}const I=[];for(;y<n.length;y++){const D=A.parse(n[y],y,br);if(!D)return null;I.push(D)}return new dn(f,I)}evaluate(n){for(let A=0;A<this.args.length;A++){const f=this.args[A].evaluate(n);if(!tn(this.type,Ht(f)))return f;if(A===this.args.length-1)throw new Ir(`Expected value to be of type ${Sn(this.type)}, but found ${Sn(Ht(f))} instead.`)}throw new Error}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const In={"to-boolean":An,"to-color":wn,"to-number":lr,"to-string":Er};class mn{constructor(n,A){this.type=n,this.args=A}static parse(n,A){if(n.length<2)return A.error("Expected at least one argument.");const f=n[0];if(!In[f])throw new Error(`Can't parse ${f} as it is not part of the known types`);if((f==="to-boolean"||f==="to-string")&&n.length!==2)return A.error("Expected one argument.");const y=In[f],C=[];for(let I=1;I<n.length;I++){const D=A.parse(n[I],I,br);if(!D)return null;C.push(D)}return new mn(y,C)}evaluate(n){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(n));if(this.type.kind==="color"){let A,f;for(const y of this.args){if(A=y.evaluate(n),f=null,A instanceof Te)return A;if(typeof A=="string"){const C=n.parseColor(A);if(C)return C}else if(Array.isArray(A)&&(f=A.length<3||A.length>4?`Invalid rbga value ${JSON.stringify(A)}: expected an array containing either three or four numeric values.`:Ot(A[0],A[1],A[2],A[3]),!f))return new Te(A[0]/255,A[1]/255,A[2]/255,A[3])}throw new Ir(f||`Could not parse color from value '${typeof A=="string"?A:JSON.stringify(A)}'`)}if(this.type.kind==="padding"){let A;for(const f of this.args){A=f.evaluate(n);const y=qe.parse(A);if(y)return y}throw new Ir(`Could not parse padding from value '${typeof A=="string"?A:JSON.stringify(A)}'`)}if(this.type.kind==="number"){let A=null;for(const f of this.args){if(A=f.evaluate(n),A===null)return 0;const y=Number(A);if(!isNaN(y))return y}throw new Ir(`Could not convert ${JSON.stringify(A)} to number.`)}return this.type.kind==="formatted"?Ye.fromString(jr(this.args[0].evaluate(n))):this.type.kind==="resolvedImage"?ut.fromString(jr(this.args[0].evaluate(n))):jr(this.args[0].evaluate(n))}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}const Bn=["Unknown","Point","LineString","Polygon"];class Pn{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Bn[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(n){let A=this._parseColorCache[n];return A||(A=this._parseColorCache[n]=Te.parse(n)),A}}class Vn{constructor(n,A,f,y){this.name=n,this.type=A,this._evaluate=f,this.args=y}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}static parse(n,A){const f=n[0],y=Vn.definitions[f];if(!y)return A.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0);const C=Array.isArray(y)?y[0]:y.type,I=Array.isArray(y)?[[y[1],y[2]]]:y.overloads,D=I.filter(([X])=>!Array.isArray(X)||X.length===n.length-1);let z=null;for(const[X,ie]of D){z=new ka(A.registry,A.path,null,A.scope);const ce=[];let ye=!1;for(let Be=1;Be<n.length;Be++){const Ee=n[Be],$e=Array.isArray(X)?X[Be-1]:X.type,Ze=z.parse(Ee,1+ce.length,$e);if(!Ze){ye=!0;break}ce.push(Ze)}if(!ye)if(Array.isArray(X)&&X.length!==ce.length)z.error(`Expected ${X.length} arguments, but found ${ce.length} instead.`);else{for(let Be=0;Be<ce.length;Be++){const Ee=Array.isArray(X)?X[Be]:X.type,$e=ce[Be];z.concat(Be+1).checkSubtype(Ee,$e.type)}if(z.errors.length===0)return new Vn(f,C,ie,ce)}}if(D.length===1)A.errors.push(...z.errors);else{const X=(D.length?D:I).map(([ce])=>{return ye=ce,Array.isArray(ye)?`(${ye.map(Sn).join(", ")})`:`(${Sn(ye.type)}...)`;var ye}).join(" | "),ie=[];for(let ce=1;ce<n.length;ce++){const ye=A.parse(n[ce],1+ie.length);if(!ye)return null;ie.push(Sn(ye.type))}A.error(`Expected arguments of type ${X}, but found (${ie.join(", ")}) instead.`)}return null}static register(n,A){Vn.definitions=A;for(const f in A)n[f]=Vn}}class Ti{constructor(n,A,f){this.type=Cr,this.locale=f,this.caseSensitive=n,this.diacriticSensitive=A}static parse(n,A){if(n.length!==2)return A.error("Expected one argument.");const f=n[1];if(typeof f!="object"||Array.isArray(f))return A.error("Collator options argument must be an object.");const y=A.parse(f["case-sensitive"]!==void 0&&f["case-sensitive"],1,An);if(!y)return null;const C=A.parse(f["diacritic-sensitive"]!==void 0&&f["diacritic-sensitive"],1,An);if(!C)return null;let I=null;return f.locale&&(I=A.parse(f.locale,1,Er),!I)?null:new Ti(y,C,I)}evaluate(n){return new Xe(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}}const oi=8192;function wi(o,n){o[0]=Math.min(o[0],n[0]),o[1]=Math.min(o[1],n[1]),o[2]=Math.max(o[2],n[0]),o[3]=Math.max(o[3],n[1])}function Qs(o,n){return!(o[0]<=n[0]||o[2]>=n[2]||o[1]<=n[1]||o[3]>=n[3])}function bi(o,n){const A=(180+o[0])/360,f=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o[1]*Math.PI/360)))/360,y=Math.pow(2,n.z);return[Math.round(A*y*oi),Math.round(f*y*oi)]}function Yn(o,n,A){const f=o[0]-n[0],y=o[1]-n[1],C=o[0]-A[0],I=o[1]-A[1];return f*I-C*y==0&&f*C<=0&&y*I<=0}function Ya(o,n){let A=!1;for(let I=0,D=n.length;I<D;I++){const z=n[I];for(let X=0,ie=z.length;X<ie-1;X++){if(Yn(o,z[X],z[X+1]))return!1;(y=z[X])[1]>(f=o)[1]!=(C=z[X+1])[1]>f[1]&&f[0]<(C[0]-y[0])*(f[1]-y[1])/(C[1]-y[1])+y[0]&&(A=!A)}}var f,y,C;return A}function Ks(o,n){for(let A=0;A<n.length;A++)if(Ya(o,n[A]))return!0;return!1}function Gs(o,n,A,f){const y=f[0]-A[0],C=f[1]-A[1],I=(o[0]-A[0])*C-y*(o[1]-A[1]),D=(n[0]-A[0])*C-y*(n[1]-A[1]);return I>0&&D<0||I<0&&D>0}function ia(o,n,A){for(const X of A)for(let ie=0;ie<X.length-1;++ie)if((D=[(I=X[ie+1])[0]-(C=X[ie])[0],I[1]-C[1]])[0]*(z=[(y=n)[0]-(f=o)[0],y[1]-f[1]])[1]-D[1]*z[0]!=0&&Gs(f,y,C,I)&&Gs(C,I,f,y))return!0;var f,y,C,I,D,z;return!1}function gs(o,n){for(let A=0;A<o.length;++A)if(!Ya(o[A],n))return!1;for(let A=0;A<o.length-1;++A)if(ia(o[A],o[A+1],n))return!1;return!0}function Ri(o,n){for(let A=0;A<n.length;A++)if(gs(o,n[A]))return!0;return!1}function Xi(o,n,A){const f=[];for(let y=0;y<o.length;y++){const C=[];for(let I=0;I<o[y].length;I++){const D=bi(o[y][I],A);wi(n,D),C.push(D)}f.push(C)}return f}function vo(o,n,A){const f=[];for(let y=0;y<o.length;y++){const C=Xi(o[y],n,A);f.push(C)}return f}function nA(o,n,A,f){if(o[0]<A[0]||o[0]>A[2]){const y=.5*f;let C=o[0]-A[0]>y?-f:A[0]-o[0]>y?f:0;C===0&&(C=o[0]-A[2]>y?-f:A[2]-o[0]>y?f:0),o[0]+=C}wi(n,o)}function EA(o,n,A,f){const y=Math.pow(2,f.z)*oi,C=[f.x*oi,f.y*oi],I=[];for(const D of o)for(const z of D){const X=[z.x+C[0],z.y+C[1]];nA(X,n,A,y),I.push(X)}return I}function sa(o,n,A,f){const y=Math.pow(2,f.z)*oi,C=[f.x*oi,f.y*oi],I=[];for(const z of o){const X=[];for(const ie of z){const ce=[ie.x+C[0],ie.y+C[1]];wi(n,ce),X.push(ce)}I.push(X)}if(n[2]-n[0]<=y/2){(D=n)[0]=D[1]=1/0,D[2]=D[3]=-1/0;for(const z of I)for(const X of z)nA(X,n,A,y)}var D;return I}class bs{constructor(n,A){this.type=An,this.geojson=n,this.geometries=A}static parse(n,A){if(n.length!==2)return A.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(nr(n[1])){const f=n[1];if(f.type==="FeatureCollection")for(let y=0;y<f.features.length;++y){const C=f.features[y].geometry.type;if(C==="Polygon"||C==="MultiPolygon")return new bs(f,f.features[y].geometry)}else if(f.type==="Feature"){const y=f.geometry.type;if(y==="Polygon"||y==="MultiPolygon")return new bs(f,f.geometry)}else if(f.type==="Polygon"||f.type==="MultiPolygon")return new bs(f,f)}return A.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(A,f){const y=[1/0,1/0,-1/0,-1/0],C=[1/0,1/0,-1/0,-1/0],I=A.canonicalID();if(f.type==="Polygon"){const D=Xi(f.coordinates,C,I),z=EA(A.geometry(),y,C,I);if(!Qs(y,C))return!1;for(const X of z)if(!Ya(X,D))return!1}if(f.type==="MultiPolygon"){const D=vo(f.coordinates,C,I),z=EA(A.geometry(),y,C,I);if(!Qs(y,C))return!1;for(const X of z)if(!Ks(X,D))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(A,f){const y=[1/0,1/0,-1/0,-1/0],C=[1/0,1/0,-1/0,-1/0],I=A.canonicalID();if(f.type==="Polygon"){const D=Xi(f.coordinates,C,I),z=sa(A.geometry(),y,C,I);if(!Qs(y,C))return!1;for(const X of z)if(!gs(X,D))return!1}if(f.type==="MultiPolygon"){const D=vo(f.coordinates,C,I),z=sa(A.geometry(),y,C,I);if(!Qs(y,C))return!1;for(const X of z)if(!Ri(X,D))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}function xs(o){if(o instanceof Vn&&(o.name==="get"&&o.args.length===1||o.name==="feature-state"||o.name==="has"&&o.args.length===1||o.name==="properties"||o.name==="geometry-type"||o.name==="id"||/^filter-/.test(o.name))||o instanceof bs)return!1;let n=!0;return o.eachChild(A=>{n&&!xs(A)&&(n=!1)}),n}function $a(o){if(o instanceof Vn&&o.name==="feature-state")return!1;let n=!0;return o.eachChild(A=>{n&&!$a(A)&&(n=!1)}),n}function aa(o,n){if(o instanceof Vn&&n.indexOf(o.name)>=0)return!1;let A=!0;return o.eachChild(f=>{A&&!aa(f,n)&&(A=!1)}),A}class Mo{constructor(n,A){this.type=A.type,this.name=n,this.boundExpression=A}static parse(n,A){if(n.length!==2||typeof n[1]!="string")return A.error("'var' expression requires exactly one string literal argument.");const f=n[1];return A.scope.has(f)?new Mo(f,A.scope.get(f)):A.error(`Unknown variable "${f}". Make sure "${f}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}}class ka{constructor(n,A=[],f,y=new Fr,C=[]){this.registry=n,this.path=A,this.key=A.map(I=>`[${I}]`).join(""),this.scope=y,this.errors=C,this.expectedType=f}parse(n,A,f,y,C={}){return A?this.concat(A,f,y)._parse(n,C):this._parse(n,C)}_parse(n,A){function f(y,C,I){return I==="assert"?new dn(C,[y]):I==="coerce"?new mn(C,[y]):y}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const y=n[0];if(typeof y!="string")return this.error(`Expression name must be a string, but found ${typeof y} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const C=this.registry[y];if(C){let I=C.parse(n,this);if(!I)return null;if(this.expectedType){const D=this.expectedType,z=I.type;if(D.kind!=="string"&&D.kind!=="number"&&D.kind!=="boolean"&&D.kind!=="object"&&D.kind!=="array"||z.kind!=="value")if(D.kind!=="color"&&D.kind!=="formatted"&&D.kind!=="resolvedImage"||z.kind!=="value"&&z.kind!=="string")if(D.kind!=="padding"||z.kind!=="value"&&z.kind!=="number"&&z.kind!=="array"){if(this.checkSubtype(D,z))return null}else I=f(I,D,A.typeAnnotation||"coerce");else I=f(I,D,A.typeAnnotation||"coerce");else I=f(I,D,A.typeAnnotation||"assert")}if(!(I instanceof zr)&&I.type.kind!=="resolvedImage"&&Do(I)){const D=new Pn;try{I=new zr(I.type,I.evaluate(D))}catch(z){return this.error(z.message),null}}return I}return this.error(`Unknown expression "${y}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,A,f){const y=typeof n=="number"?this.path.concat(n):this.path,C=f?this.scope.concat(f):this.scope;return new ka(this.registry,y,A||null,C,this.errors)}error(n,...A){const f=`${this.key}${A.map(y=>`[${y}]`).join("")}`;this.errors.push(new Vr(f,n))}checkSubtype(n,A){const f=tn(n,A);return f&&this.error(f),f}}function Do(o){if(o instanceof Mo)return Do(o.boundExpression);if(o instanceof Vn&&o.name==="error"||o instanceof Ti||o instanceof bs)return!1;const n=o instanceof mn||o instanceof dn;let A=!0;return o.eachChild(f=>{A=n?A&&Do(f):A&&f instanceof zr}),!!A&&xs(o)&&aa(o,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function oa(o,n){const A=o.length-1;let f,y,C=0,I=A,D=0;for(;C<=I;)if(D=Math.floor((C+I)/2),f=o[D],y=o[D+1],f<=n){if(D===A||n<y)return D;C=D+1}else{if(!(f>n))throw new Ir("Input is not a number.");I=D-1}return 0}class qs{constructor(n,A,f){this.type=n,this.input=A,this.labels=[],this.outputs=[];for(const[y,C]of f)this.labels.push(y),this.outputs.push(C)}static parse(n,A){if(n.length-1<4)return A.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return A.error("Expected an even number of arguments.");const f=A.parse(n[1],1,lr);if(!f)return null;const y=[];let C=null;A.expectedType&&A.expectedType.kind!=="value"&&(C=A.expectedType);for(let I=1;I<n.length;I+=2){const D=I===1?-1/0:n[I],z=n[I+1],X=I,ie=I+1;if(typeof D!="number")return A.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',X);if(y.length&&y[y.length-1][0]>=D)return A.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',X);const ce=A.parse(z,ie,C);if(!ce)return null;C=C||ce.type,y.push([D,ce])}return new qs(C,f,y)}evaluate(n){const A=this.labels,f=this.outputs;if(A.length===1)return f[0].evaluate(n);const y=this.input.evaluate(n);if(y<=A[0])return f[0].evaluate(n);const C=A.length;return y>=A[C-1]?f[C-1].evaluate(n):f[oa(A,y)].evaluate(n)}eachChild(n){n(this.input);for(const A of this.outputs)n(A)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function ii(o,n,A){return o*(1-A)+n*A}var Bs=Object.freeze({__proto__:null,number:ii,color:function(o,n,A){return new Te(ii(o.r,n.r,A),ii(o.g,n.g,A),ii(o.b,n.b,A),ii(o.a,n.a,A))},array:function(o,n,A){return o.map((f,y)=>ii(f,n[y],A))},padding:function(o,n,A){const f=o.values,y=n.values;return new qe([ii(f[0],y[0],A),ii(f[1],y[1],A),ii(f[2],y[2],A),ii(f[3],y[3],A)])}});const ys=.95047,iA=1.08883,sA=4/29,Cn=6/29,GA=3*Cn*Cn,pl=Math.PI/180,Ma=180/Math.PI;function _o(o){return o>.008856451679035631?Math.pow(o,1/3):o/GA+sA}function aA(o){return o>Cn?o*o*o:GA*(o-sA)}function wo(o){return 255*(o<=.0031308?12.92*o:1.055*Math.pow(o,1/2.4)-.055)}function gt(o){return(o/=255)<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4)}function Mn(o){const n=gt(o.r),A=gt(o.g),f=gt(o.b),y=_o((.4124564*n+.3575761*A+.1804375*f)/ys),C=_o((.2126729*n+.7151522*A+.072175*f)/1);return{l:116*C-16,a:500*(y-C),b:200*(C-_o((.0193339*n+.119192*A+.9503041*f)/iA)),alpha:o.a}}function Ds(o){let n=(o.l+16)/116,A=isNaN(o.a)?n:n+o.a/500,f=isNaN(o.b)?n:n-o.b/200;return n=1*aA(n),A=ys*aA(A),f=iA*aA(f),new Te(wo(3.2404542*A-1.5371385*n-.4985314*f),wo(-.969266*A+1.8760108*n+.041556*f),wo(.0556434*A-.2040259*n+1.0572252*f),o.alpha)}function Oi(o,n,A){const f=n-o;return o+A*(f>180||f<-180?f-360*Math.round(f/360):f)}const Ps={forward:Mn,reverse:Ds,interpolate:function(o,n,A){return{l:ii(o.l,n.l,A),a:ii(o.a,n.a,A),b:ii(o.b,n.b,A),alpha:ii(o.alpha,n.alpha,A)}}},ya={forward:function(o){const{l:n,a:A,b:f}=Mn(o),y=Math.atan2(f,A)*Ma;return{h:y<0?y+360:y,c:Math.sqrt(A*A+f*f),l:n,alpha:o.a}},reverse:function(o){const n=o.h*pl,A=o.c;return Ds({l:o.l,a:Math.cos(n)*A,b:Math.sin(n)*A,alpha:o.alpha})},interpolate:function(o,n,A){return{h:Oi(o.h,n.h,A),c:ii(o.c,n.c,A),l:ii(o.l,n.l,A),alpha:ii(o.alpha,n.alpha,A)}}};var eo=Object.freeze({__proto__:null,lab:Ps,hcl:ya});class Cs{constructor(n,A,f,y,C){this.type=n,this.operator=A,this.interpolation=f,this.input=y,this.labels=[],this.outputs=[];for(const[I,D]of C)this.labels.push(I),this.outputs.push(D)}static interpolationFactor(n,A,f,y){let C=0;if(n.name==="exponential")C=Aa(A,n.base,f,y);else if(n.name==="linear")C=Aa(A,1,f,y);else if(n.name==="cubic-bezier"){const I=n.controlPoints;C=new d(I[0],I[1],I[2],I[3]).solve(Aa(A,1,f,y))}return C}static parse(n,A){let[f,y,C,...I]=n;if(!Array.isArray(y)||y.length===0)return A.error("Expected an interpolation type expression.",1);if(y[0]==="linear")y={name:"linear"};else if(y[0]==="exponential"){const X=y[1];if(typeof X!="number")return A.error("Exponential interpolation requires a numeric base.",1,1);y={name:"exponential",base:X}}else{if(y[0]!=="cubic-bezier")return A.error(`Unknown interpolation type ${String(y[0])}`,1,0);{const X=y.slice(1);if(X.length!==4||X.some(ie=>typeof ie!="number"||ie<0||ie>1))return A.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);y={name:"cubic-bezier",controlPoints:X}}}if(n.length-1<4)return A.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return A.error("Expected an even number of arguments.");if(C=A.parse(C,2,lr),!C)return null;const D=[];let z=null;f==="interpolate-hcl"||f==="interpolate-lab"?z=wn:A.expectedType&&A.expectedType.kind!=="value"&&(z=A.expectedType);for(let X=0;X<I.length;X+=2){const ie=I[X],ce=I[X+1],ye=X+3,Be=X+4;if(typeof ie!="number")return A.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ye);if(D.length&&D[D.length-1][0]>=ie)return A.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ye);const Ee=A.parse(ce,Be,z);if(!Ee)return null;z=z||Ee.type,D.push([ie,Ee])}return z.kind==="number"||z.kind==="color"||z.kind==="padding"||z.kind==="array"&&z.itemType.kind==="number"&&typeof z.N=="number"?new Cs(z,f,y,C,D):A.error(`Type ${Sn(z)} is not interpolatable.`)}evaluate(n){const A=this.labels,f=this.outputs;if(A.length===1)return f[0].evaluate(n);const y=this.input.evaluate(n);if(y<=A[0])return f[0].evaluate(n);const C=A.length;if(y>=A[C-1])return f[C-1].evaluate(n);const I=oa(A,y),D=Cs.interpolationFactor(this.interpolation,y,A[I],A[I+1]),z=f[I].evaluate(n),X=f[I+1].evaluate(n);return this.operator==="interpolate"?Bs[this.type.kind.toLowerCase()](z,X,D):this.operator==="interpolate-hcl"?ya.reverse(ya.interpolate(ya.forward(z),ya.forward(X),D)):Ps.reverse(Ps.interpolate(Ps.forward(z),Ps.forward(X),D))}eachChild(n){n(this.input);for(const A of this.outputs)n(A)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}}function Aa(o,n,A,f){const y=f-A,C=o-A;return y===0?0:n===1?C/y:(Math.pow(n,C)-1)/(Math.pow(n,y)-1)}class to{constructor(n,A){this.type=n,this.args=A}static parse(n,A){if(n.length<2)return A.error("Expectected at least one argument.");let f=null;const y=A.expectedType;y&&y.kind!=="value"&&(f=y);const C=[];for(const D of n.slice(1)){const z=A.parse(D,1+C.length,f,void 0,{typeAnnotation:"omit"});if(!z)return null;f=f||z.type,C.push(z)}if(!f)throw new Error("No output type");const I=y&&C.some(D=>tn(y,D.type));return new to(I?br:f,C)}evaluate(n){let A,f=null,y=0;for(const C of this.args)if(y++,f=C.evaluate(n),f&&f instanceof ut&&!f.available&&(A||(A=f.name),f=null,y===this.args.length&&(f=A)),f!==null)break;return f}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}}class va{constructor(n,A){this.type=A.type,this.bindings=[].concat(n),this.result=A}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const A of this.bindings)n(A[1]);n(this.result)}static parse(n,A){if(n.length<4)return A.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const f=[];for(let C=1;C<n.length-1;C+=2){const I=n[C];if(typeof I!="string")return A.error(`Expected string, but found ${typeof I} instead.`,C);if(/[^a-zA-Z0-9_]/.test(I))return A.error("Variable names must contain only alphanumeric characters or '_'.",C);const D=A.parse(n[C+1],C+1);if(!D)return null;f.push([I,D])}const y=A.parse(n[n.length-1],n.length-1,A.expectedType,f);return y?new va(f,y):null}outputDefined(){return this.result.outputDefined()}}class qA{constructor(n,A,f){this.type=n,this.index=A,this.input=f}static parse(n,A){if(n.length!==3)return A.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const f=A.parse(n[1],1,lr),y=A.parse(n[2],2,xn(A.expectedType||br));return f&&y?new qA(y.type.itemType,f,y):null}evaluate(n){const A=this.index.evaluate(n),f=this.input.evaluate(n);if(A<0)throw new Ir(`Array index out of bounds: ${A} < 0.`);if(A>=f.length)throw new Ir(`Array index out of bounds: ${A} > ${f.length-1}.`);if(A!==Math.floor(A))throw new Ir(`Array index must be an integer, but found ${A} instead.`);return f[A]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}}class ts{constructor(n,A){this.type=An,this.needle=n,this.haystack=A}static parse(n,A){if(n.length!==3)return A.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const f=A.parse(n[1],1,br),y=A.parse(n[2],2,br);return f&&y?Wi(f.type,[An,Er,lr,un,br])?new ts(f,y):A.error(`Expected first argument to be of type boolean, string, number or null, but found ${Sn(f.type)} instead`):null}evaluate(n){const A=this.needle.evaluate(n),f=this.haystack.evaluate(n);if(!f)return!1;if(!hs(A,["boolean","string","number","null"]))throw new Ir(`Expected first argument to be of type boolean, string, number or null, but found ${Sn(Ht(A))} instead.`);if(!hs(f,["string","array"]))throw new Ir(`Expected second argument to be of type array or string, but found ${Sn(Ht(f))} instead.`);return f.indexOf(A)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}}class FA{constructor(n,A,f){this.type=lr,this.needle=n,this.haystack=A,this.fromIndex=f}static parse(n,A){if(n.length<=2||n.length>=5)return A.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const f=A.parse(n[1],1,br),y=A.parse(n[2],2,br);if(!f||!y)return null;if(!Wi(f.type,[An,Er,lr,un,br]))return A.error(`Expected first argument to be of type boolean, string, number or null, but found ${Sn(f.type)} instead`);if(n.length===4){const C=A.parse(n[3],3,lr);return C?new FA(f,y,C):null}return new FA(f,y)}evaluate(n){const A=this.needle.evaluate(n),f=this.haystack.evaluate(n);if(!hs(A,["boolean","string","number","null"]))throw new Ir(`Expected first argument to be of type boolean, string, number or null, but found ${Sn(Ht(A))} instead.`);if(!hs(f,["string","array"]))throw new Ir(`Expected second argument to be of type array or string, but found ${Sn(Ht(f))} instead.`);if(this.fromIndex){const y=this.fromIndex.evaluate(n);return f.indexOf(A,y)}return f.indexOf(A)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}}class ro{constructor(n,A,f,y,C,I){this.inputType=n,this.type=A,this.input=f,this.cases=y,this.outputs=C,this.otherwise=I}static parse(n,A){if(n.length<5)return A.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return A.error("Expected an even number of arguments.");let f,y;A.expectedType&&A.expectedType.kind!=="value"&&(y=A.expectedType);const C={},I=[];for(let X=2;X<n.length-1;X+=2){let ie=n[X];const ce=n[X+1];Array.isArray(ie)||(ie=[ie]);const ye=A.concat(X);if(ie.length===0)return ye.error("Expected at least one branch label.");for(const Ee of ie){if(typeof Ee!="number"&&typeof Ee!="string")return ye.error("Branch labels must be numbers or strings.");if(typeof Ee=="number"&&Math.abs(Ee)>Number.MAX_SAFE_INTEGER)return ye.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Ee=="number"&&Math.floor(Ee)!==Ee)return ye.error("Numeric branch labels must be integer values.");if(f){if(ye.checkSubtype(f,Ht(Ee)))return null}else f=Ht(Ee);if(C[String(Ee)]!==void 0)return ye.error("Branch labels must be unique.");C[String(Ee)]=I.length}const Be=A.parse(ce,X,y);if(!Be)return null;y=y||Be.type,I.push(Be)}const D=A.parse(n[1],1,br);if(!D)return null;const z=A.parse(n[n.length-1],n.length-1,y);return z?D.type.kind!=="value"&&A.concat(1).checkSubtype(f,D.type)?null:new ro(f,y,D,C,I,z):null}evaluate(n){const A=this.input.evaluate(n);return(Ht(A)===this.inputType&&this.outputs[this.cases[A]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}}class no{constructor(n,A,f){this.type=n,this.branches=A,this.otherwise=f}static parse(n,A){if(n.length<4)return A.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return A.error("Expected an odd number of arguments.");let f;A.expectedType&&A.expectedType.kind!=="value"&&(f=A.expectedType);const y=[];for(let I=1;I<n.length-1;I+=2){const D=A.parse(n[I],I,An);if(!D)return null;const z=A.parse(n[I+1],I+1,f);if(!z)return null;y.push([D,z]),f=f||z.type}const C=A.parse(n[n.length-1],n.length-1,f);if(!C)return null;if(!f)throw new Error("Can't infer output type");return new no(f,y,C)}evaluate(n){for(const[A,f]of this.branches)if(A.evaluate(n))return f.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[A,f]of this.branches)n(A),n(f);n(this.otherwise)}outputDefined(){return this.branches.every(([n,A])=>A.outputDefined())&&this.otherwise.outputDefined()}}class io{constructor(n,A,f,y){this.type=n,this.input=A,this.beginIndex=f,this.endIndex=y}static parse(n,A){if(n.length<=2||n.length>=5)return A.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const f=A.parse(n[1],1,br),y=A.parse(n[2],2,lr);if(!f||!y)return null;if(!Wi(f.type,[xn(br),Er,br]))return A.error(`Expected first argument to be of type array or string, but found ${Sn(f.type)} instead`);if(n.length===4){const C=A.parse(n[3],3,lr);return C?new io(f.type,f,y,C):null}return new io(f.type,f,y)}evaluate(n){const A=this.input.evaluate(n),f=this.beginIndex.evaluate(n);if(!hs(A,["string","array"]))throw new Ir(`Expected first argument to be of type array or string, but found ${Sn(Ht(A))} instead.`);if(this.endIndex){const y=this.endIndex.evaluate(n);return A.slice(f,y)}return A.slice(f)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}}function ql(o,n){return o==="=="||o==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function No(o,n,A,f){return f.compare(n,A)===0}function vs(o,n,A){const f=o!=="=="&&o!=="!=";return class av{constructor(C,I,D){this.type=An,this.lhs=C,this.rhs=I,this.collator=D,this.hasUntypedArgument=C.type.kind==="value"||I.type.kind==="value"}static parse(C,I){if(C.length!==3&&C.length!==4)return I.error("Expected two or three arguments.");const D=C[0];let z=I.parse(C[1],1,br);if(!z)return null;if(!ql(D,z.type))return I.concat(1).error(`"${D}" comparisons are not supported for type '${Sn(z.type)}'.`);let X=I.parse(C[2],2,br);if(!X)return null;if(!ql(D,X.type))return I.concat(2).error(`"${D}" comparisons are not supported for type '${Sn(X.type)}'.`);if(z.type.kind!==X.type.kind&&z.type.kind!=="value"&&X.type.kind!=="value")return I.error(`Cannot compare types '${Sn(z.type)}' and '${Sn(X.type)}'.`);f&&(z.type.kind==="value"&&X.type.kind!=="value"?z=new dn(X.type,[z]):z.type.kind!=="value"&&X.type.kind==="value"&&(X=new dn(z.type,[X])));let ie=null;if(C.length===4){if(z.type.kind!=="string"&&X.type.kind!=="string"&&z.type.kind!=="value"&&X.type.kind!=="value")return I.error("Cannot use collator to compare non-string types.");if(ie=I.parse(C[3],3,Cr),!ie)return null}return new av(z,X,ie)}evaluate(C){const I=this.lhs.evaluate(C),D=this.rhs.evaluate(C);if(f&&this.hasUntypedArgument){const z=Ht(I),X=Ht(D);if(z.kind!==X.kind||z.kind!=="string"&&z.kind!=="number")throw new Ir(`Expected arguments for "${o}" to be (string, string) or (number, number), but found (${z.kind}, ${X.kind}) instead.`)}if(this.collator&&!f&&this.hasUntypedArgument){const z=Ht(I),X=Ht(D);if(z.kind!=="string"||X.kind!=="string")return n(C,I,D)}return this.collator?A(C,I,D,this.collator.evaluate(C)):n(C,I,D)}eachChild(C){C(this.lhs),C(this.rhs),this.collator&&C(this.collator)}outputDefined(){return!0}}}const oA=vs("==",function(o,n,A){return n===A},No),AA=vs("!=",function(o,n,A){return n!==A},function(o,n,A,f){return!No(0,n,A,f)}),_c=vs("<",function(o,n,A){return n<A},function(o,n,A,f){return f.compare(n,A)<0}),_a=vs(">",function(o,n,A){return n>A},function(o,n,A,f){return f.compare(n,A)>0}),WA=vs("<=",function(o,n,A){return n<=A},function(o,n,A,f){return f.compare(n,A)<=0}),SA=vs(">=",function(o,n,A){return n>=A},function(o,n,A,f){return f.compare(n,A)>=0});class IA{constructor(n,A,f,y,C){this.type=Er,this.number=n,this.locale=A,this.currency=f,this.minFractionDigits=y,this.maxFractionDigits=C}static parse(n,A){if(n.length!==3)return A.error("Expected two arguments.");const f=A.parse(n[1],1,lr);if(!f)return null;const y=n[2];if(typeof y!="object"||Array.isArray(y))return A.error("NumberFormat options argument must be an object.");let C=null;if(y.locale&&(C=A.parse(y.locale,1,Er),!C))return null;let I=null;if(y.currency&&(I=A.parse(y.currency,1,Er),!I))return null;let D=null;if(y["min-fraction-digits"]&&(D=A.parse(y["min-fraction-digits"],1,lr),!D))return null;let z=null;return y["max-fraction-digits"]&&(z=A.parse(y["max-fraction-digits"],1,lr),!z)?null:new IA(f,C,I,D,z)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}}class TA{constructor(n){this.type=cr,this.sections=n}static parse(n,A){if(n.length<2)return A.error("Expected at least one argument.");const f=n[1];if(!Array.isArray(f)&&typeof f=="object")return A.error("First argument must be an image or text section.");const y=[];let C=!1;for(let I=1;I<=n.length-1;++I){const D=n[I];if(C&&typeof D=="object"&&!Array.isArray(D)){C=!1;let z=null;if(D["font-scale"]&&(z=A.parse(D["font-scale"],1,lr),!z))return null;let X=null;if(D["text-font"]&&(X=A.parse(D["text-font"],1,xn(Er)),!X))return null;let ie=null;if(D["text-color"]&&(ie=A.parse(D["text-color"],1,wn),!ie))return null;const ce=y[y.length-1];ce.scale=z,ce.font=X,ce.textColor=ie}else{const z=A.parse(n[I],1,br);if(!z)return null;const X=z.type.kind;if(X!=="string"&&X!=="value"&&X!=="null"&&X!=="resolvedImage")return A.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");C=!0,y.push({content:z,scale:null,font:null,textColor:null})}}return new TA(y)}evaluate(n){return new Ye(this.sections.map(A=>{const f=A.content.evaluate(n);return Ht(f)===hn?new lt("",f,null,null,null):new lt(jr(f),null,A.scale?A.scale.evaluate(n):null,A.font?A.font.evaluate(n).join(","):null,A.textColor?A.textColor.evaluate(n):null)}))}eachChild(n){for(const A of this.sections)n(A.content),A.scale&&n(A.scale),A.font&&n(A.font),A.textColor&&n(A.textColor)}outputDefined(){return!1}}class lA{constructor(n){this.type=hn,this.input=n}static parse(n,A){if(n.length!==2)return A.error("Expected two arguments.");const f=A.parse(n[1],1,Er);return f?new lA(f):A.error("No image name provided.")}evaluate(n){const A=this.input.evaluate(n),f=ut.fromString(A);return f&&n.availableImages&&(f.available=n.availableImages.indexOf(A)>-1),f}eachChild(n){n(this.input)}outputDefined(){return!1}}class UA{constructor(n){this.type=lr,this.input=n}static parse(n,A){if(n.length!==2)return A.error(`Expected 1 argument, but found ${n.length-1} instead.`);const f=A.parse(n[1],1);return f?f.type.kind!=="array"&&f.type.kind!=="string"&&f.type.kind!=="value"?A.error(`Expected argument of type string or array, but found ${Sn(f.type)} instead.`):new UA(f):null}evaluate(n){const A=this.input.evaluate(n);if(typeof A=="string"||Array.isArray(A))return A.length;throw new Ir(`Expected value to be of type string or array, but found ${Sn(Ht(A))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}}const bo={"==":oA,"!=":AA,">":_a,"<":_c,">=":SA,"<=":WA,array:dn,at:qA,boolean:dn,case:no,coalesce:to,collator:Ti,format:TA,image:lA,in:ts,"index-of":FA,interpolate:Cs,"interpolate-hcl":Cs,"interpolate-lab":Cs,length:UA,let:va,literal:zr,match:ro,number:dn,"number-format":IA,object:dn,slice:io,step:qs,string:dn,"to-boolean":mn,"to-color":mn,"to-number":mn,"to-string":mn,var:Mo,within:bs};function ml(o,[n,A,f,y]){n=n.evaluate(o),A=A.evaluate(o),f=f.evaluate(o);const C=y?y.evaluate(o):1,I=Ot(n,A,f,C);if(I)throw new Ir(I);return new Te(n/255*C,A/255*C,f/255*C,C)}function Wl(o,n){return o in n}function jo(o,n){const A=n[o];return A===void 0?null:A}function wa(o){return{type:o}}function XA(o){return{result:"success",value:o}}function ba(o){return{result:"error",value:o}}function xi(o){return o["property-type"]==="data-driven"||o["property-type"]==="cross-faded-data-driven"}function N(o){return!!o.expression&&o.expression.parameters.indexOf("zoom")>-1}function oe(o){return!!o.expression&&o.expression.interpolated}function ke(o){return o instanceof Number?"number":o instanceof String?"string":o instanceof Boolean?"boolean":Array.isArray(o)?"array":o===null?"null":typeof o}function et(o){return typeof o=="object"&&o!==null&&!Array.isArray(o)}function _t(o){return o}function Jt(o,n){const A=n.type==="color",f=o.stops&&typeof o.stops[0][0]=="object",y=f||!(f||o.property!==void 0),C=o.type||(oe(n)?"exponential":"interval");if(A||n.type==="padding"){const X=A?Te.parse:qe.parse;(o=Ct({},o)).stops&&(o.stops=o.stops.map(ie=>[ie[0],X(ie[1])])),o.default=X(o.default?o.default:n.default)}if(o.colorSpace&&o.colorSpace!=="rgb"&&!eo[o.colorSpace])throw new Error(`Unknown color space: ${o.colorSpace}`);let I,D,z;if(C==="exponential")I=Dn;else if(C==="interval")I=En;else if(C==="categorical"){I=en,D=Object.create(null);for(const X of o.stops)D[X[0]]=X[1];z=typeof o.stops[0][0]}else{if(C!=="identity")throw new Error(`Unknown function type "${C}"`);I=Kn}if(f){const X={},ie=[];for(let Be=0;Be<o.stops.length;Be++){const Ee=o.stops[Be],$e=Ee[0].zoom;X[$e]===void 0&&(X[$e]={zoom:$e,type:o.type,property:o.property,default:o.default,stops:[]},ie.push($e)),X[$e].stops.push([Ee[0].value,Ee[1]])}const ce=[];for(const Be of ie)ce.push([X[Be].zoom,Jt(X[Be],n)]);const ye={name:"linear"};return{kind:"composite",interpolationType:ye,interpolationFactor:Cs.interpolationFactor.bind(void 0,ye),zoomStops:ce.map(Be=>Be[0]),evaluate:({zoom:Be},Ee)=>Dn({stops:ce,base:o.base},n,Be).evaluate(Be,Ee)}}if(y){const X=C==="exponential"?{name:"exponential",base:o.base!==void 0?o.base:1}:null;return{kind:"camera",interpolationType:X,interpolationFactor:Cs.interpolationFactor.bind(void 0,X),zoomStops:o.stops.map(ie=>ie[0]),evaluate:({zoom:ie})=>I(o,n,ie,D,z)}}return{kind:"source",evaluate(X,ie){const ce=ie&&ie.properties?ie.properties[o.property]:void 0;return ce===void 0?_r(o.default,n.default):I(o,n,ce,D,z)}}}function _r(o,n,A){return o!==void 0?o:n!==void 0?n:A!==void 0?A:void 0}function en(o,n,A,f,y){return _r(typeof A===y?f[A]:void 0,o.default,n.default)}function En(o,n,A){if(ke(A)!=="number")return _r(o.default,n.default);const f=o.stops.length;if(f===1||A<=o.stops[0][0])return o.stops[0][1];if(A>=o.stops[f-1][0])return o.stops[f-1][1];const y=oa(o.stops.map(C=>C[0]),A);return o.stops[y][1]}function Dn(o,n,A){const f=o.base!==void 0?o.base:1;if(ke(A)!=="number")return _r(o.default,n.default);const y=o.stops.length;if(y===1||A<=o.stops[0][0])return o.stops[0][1];if(A>=o.stops[y-1][0])return o.stops[y-1][1];const C=oa(o.stops.map(ie=>ie[0]),A),I=function(ie,ce,ye,Be){const Ee=Be-ye,$e=ie-ye;return Ee===0?0:ce===1?$e/Ee:(Math.pow(ce,$e)-1)/(Math.pow(ce,Ee)-1)}(A,f,o.stops[C][0],o.stops[C+1][0]),D=o.stops[C][1],z=o.stops[C+1][1];let X=Bs[n.type]||_t;if(o.colorSpace&&o.colorSpace!=="rgb"){const ie=eo[o.colorSpace];X=(ce,ye)=>ie.reverse(ie.interpolate(ie.forward(ce),ie.forward(ye),I))}return typeof D.evaluate=="function"?{evaluate(...ie){const ce=D.evaluate.apply(void 0,ie),ye=z.evaluate.apply(void 0,ie);if(ce!==void 0&&ye!==void 0)return X(ce,ye,I)}}:X(D,z,I)}function Kn(o,n,A){switch(n.type){case"color":A=Te.parse(A);break;case"formatted":A=Ye.fromString(A.toString());break;case"resolvedImage":A=ut.fromString(A.toString());break;case"padding":A=qe.parse(A);break;default:ke(A)===n.type||n.type==="enum"&&n.values[A]||(A=void 0)}return _r(A,o.default,n.default)}Vn.register(bo,{error:[{kind:"error"},[Er],(o,[n])=>{throw new Ir(n.evaluate(o))}],typeof:[Er,[br],(o,[n])=>Sn(Ht(n.evaluate(o)))],"to-rgba":[xn(lr,4),[wn],(o,[n])=>n.evaluate(o).toArray()],rgb:[wn,[lr,lr,lr],ml],rgba:[wn,[lr,lr,lr,lr],ml],has:{type:An,overloads:[[[Er],(o,[n])=>Wl(n.evaluate(o),o.properties())],[[Er,_i],(o,[n,A])=>Wl(n.evaluate(o),A.evaluate(o))]]},get:{type:br,overloads:[[[Er],(o,[n])=>jo(n.evaluate(o),o.properties())],[[Er,_i],(o,[n,A])=>jo(n.evaluate(o),A.evaluate(o))]]},"feature-state":[br,[Er],(o,[n])=>jo(n.evaluate(o),o.featureState||{})],properties:[_i,[],o=>o.properties()],"geometry-type":[Er,[],o=>o.geometryType()],id:[br,[],o=>o.id()],zoom:[lr,[],o=>o.globals.zoom],"heatmap-density":[lr,[],o=>o.globals.heatmapDensity||0],"line-progress":[lr,[],o=>o.globals.lineProgress||0],accumulated:[br,[],o=>o.globals.accumulated===void 0?null:o.globals.accumulated],"+":[lr,wa(lr),(o,n)=>{let A=0;for(const f of n)A+=f.evaluate(o);return A}],"*":[lr,wa(lr),(o,n)=>{let A=1;for(const f of n)A*=f.evaluate(o);return A}],"-":{type:lr,overloads:[[[lr,lr],(o,[n,A])=>n.evaluate(o)-A.evaluate(o)],[[lr],(o,[n])=>-n.evaluate(o)]]},"/":[lr,[lr,lr],(o,[n,A])=>n.evaluate(o)/A.evaluate(o)],"%":[lr,[lr,lr],(o,[n,A])=>n.evaluate(o)%A.evaluate(o)],ln2:[lr,[],()=>Math.LN2],pi:[lr,[],()=>Math.PI],e:[lr,[],()=>Math.E],"^":[lr,[lr,lr],(o,[n,A])=>Math.pow(n.evaluate(o),A.evaluate(o))],sqrt:[lr,[lr],(o,[n])=>Math.sqrt(n.evaluate(o))],log10:[lr,[lr],(o,[n])=>Math.log(n.evaluate(o))/Math.LN10],ln:[lr,[lr],(o,[n])=>Math.log(n.evaluate(o))],log2:[lr,[lr],(o,[n])=>Math.log(n.evaluate(o))/Math.LN2],sin:[lr,[lr],(o,[n])=>Math.sin(n.evaluate(o))],cos:[lr,[lr],(o,[n])=>Math.cos(n.evaluate(o))],tan:[lr,[lr],(o,[n])=>Math.tan(n.evaluate(o))],asin:[lr,[lr],(o,[n])=>Math.asin(n.evaluate(o))],acos:[lr,[lr],(o,[n])=>Math.acos(n.evaluate(o))],atan:[lr,[lr],(o,[n])=>Math.atan(n.evaluate(o))],min:[lr,wa(lr),(o,n)=>Math.min(...n.map(A=>A.evaluate(o)))],max:[lr,wa(lr),(o,n)=>Math.max(...n.map(A=>A.evaluate(o)))],abs:[lr,[lr],(o,[n])=>Math.abs(n.evaluate(o))],round:[lr,[lr],(o,[n])=>{const A=n.evaluate(o);return A<0?-Math.round(-A):Math.round(A)}],floor:[lr,[lr],(o,[n])=>Math.floor(n.evaluate(o))],ceil:[lr,[lr],(o,[n])=>Math.ceil(n.evaluate(o))],"filter-==":[An,[Er,br],(o,[n,A])=>o.properties()[n.value]===A.value],"filter-id-==":[An,[br],(o,[n])=>o.id()===n.value],"filter-type-==":[An,[Er],(o,[n])=>o.geometryType()===n.value],"filter-<":[An,[Er,br],(o,[n,A])=>{const f=o.properties()[n.value],y=A.value;return typeof f==typeof y&&f<y}],"filter-id-<":[An,[br],(o,[n])=>{const A=o.id(),f=n.value;return typeof A==typeof f&&A<f}],"filter->":[An,[Er,br],(o,[n,A])=>{const f=o.properties()[n.value],y=A.value;return typeof f==typeof y&&f>y}],"filter-id->":[An,[br],(o,[n])=>{const A=o.id(),f=n.value;return typeof A==typeof f&&A>f}],"filter-<=":[An,[Er,br],(o,[n,A])=>{const f=o.properties()[n.value],y=A.value;return typeof f==typeof y&&f<=y}],"filter-id-<=":[An,[br],(o,[n])=>{const A=o.id(),f=n.value;return typeof A==typeof f&&A<=f}],"filter->=":[An,[Er,br],(o,[n,A])=>{const f=o.properties()[n.value],y=A.value;return typeof f==typeof y&&f>=y}],"filter-id->=":[An,[br],(o,[n])=>{const A=o.id(),f=n.value;return typeof A==typeof f&&A>=f}],"filter-has":[An,[br],(o,[n])=>n.value in o.properties()],"filter-has-id":[An,[],o=>o.id()!==null&&o.id()!==void 0],"filter-type-in":[An,[xn(Er)],(o,[n])=>n.value.indexOf(o.geometryType())>=0],"filter-id-in":[An,[xn(br)],(o,[n])=>n.value.indexOf(o.id())>=0],"filter-in-small":[An,[Er,xn(br)],(o,[n,A])=>A.value.indexOf(o.properties()[n.value])>=0],"filter-in-large":[An,[Er,xn(br)],(o,[n,A])=>function(f,y,C,I){for(;C<=I;){const D=C+I>>1;if(y[D]===f)return!0;y[D]>f?I=D-1:C=D+1}return!1}(o.properties()[n.value],A.value,0,A.value.length-1)],all:{type:An,overloads:[[[An,An],(o,[n,A])=>n.evaluate(o)&&A.evaluate(o)],[wa(An),(o,n)=>{for(const A of n)if(!A.evaluate(o))return!1;return!0}]]},any:{type:An,overloads:[[[An,An],(o,[n,A])=>n.evaluate(o)||A.evaluate(o)],[wa(An),(o,n)=>{for(const A of n)if(A.evaluate(o))return!0;return!1}]]},"!":[An,[An],(o,[n])=>!n.evaluate(o)],"is-supported-script":[An,[Er],(o,[n])=>{const A=o.globals&&o.globals.isSupportedScript;return!A||A(n.evaluate(o))}],upcase:[Er,[Er],(o,[n])=>n.evaluate(o).toUpperCase()],downcase:[Er,[Er],(o,[n])=>n.evaluate(o).toLowerCase()],concat:[Er,wa(br),(o,n)=>n.map(A=>jr(A.evaluate(o))).join("")],"resolved-locale":[Er,[Cr],(o,[n])=>n.evaluate(o).resolvedLocale()]});class Wn{constructor(n,A){this.expression=n,this._warningHistory={},this._evaluator=new Pn,this._defaultValue=A?function(f){return f.type==="color"&&et(f.default)?new Te(0,0,0,0):f.type==="color"?Te.parse(f.default)||null:f.type==="padding"?qe.parse(f.default)||null:f.default===void 0?null:f.default}(A):null,this._enumValues=A&&A.type==="enum"?A.values:null}evaluateWithoutErrorHandling(n,A,f,y,C,I){return this._evaluator.globals=n,this._evaluator.feature=A,this._evaluator.featureState=f,this._evaluator.canonical=y,this._evaluator.availableImages=C||null,this._evaluator.formattedSection=I,this.expression.evaluate(this._evaluator)}evaluate(n,A,f,y,C,I){this._evaluator.globals=n,this._evaluator.feature=A||null,this._evaluator.featureState=f||null,this._evaluator.canonical=y,this._evaluator.availableImages=C||null,this._evaluator.formattedSection=I||null;try{const D=this.expression.evaluate(this._evaluator);if(D==null||typeof D=="number"&&D!=D)return this._defaultValue;if(this._enumValues&&!(D in this._enumValues))throw new Ir(`Expected value to be one of ${Object.keys(this._enumValues).map(z=>JSON.stringify(z)).join(", ")}, but found ${JSON.stringify(D)} instead.`);return D}catch(D){return this._warningHistory[D.message]||(this._warningHistory[D.message]=!0,typeof console<"u"&&console.warn(D.message)),this._defaultValue}}}function pi(o){return Array.isArray(o)&&o.length>0&&typeof o[0]=="string"&&o[0]in bo}function mi(o,n){const A=new ka(bo,[],n?function(y){const C={color:wn,string:Er,number:lr,enum:Er,boolean:An,formatted:cr,padding:Kr,resolvedImage:hn};return y.type==="array"?xn(C[y.value]||br,y.length):C[y.type]}(n):void 0),f=A.parse(o,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return f?XA(new Wn(f,n)):ba(A.errors)}class Tn{constructor(n,A){this.kind=n,this._styleExpression=A,this.isStateDependent=n!=="constant"&&!$a(A.expression)}evaluateWithoutErrorHandling(n,A,f,y,C,I){return this._styleExpression.evaluateWithoutErrorHandling(n,A,f,y,C,I)}evaluate(n,A,f,y,C,I){return this._styleExpression.evaluate(n,A,f,y,C,I)}}class Es{constructor(n,A,f,y){this.kind=n,this.zoomStops=f,this._styleExpression=A,this.isStateDependent=n!=="camera"&&!$a(A.expression),this.interpolationType=y}evaluateWithoutErrorHandling(n,A,f,y,C,I){return this._styleExpression.evaluateWithoutErrorHandling(n,A,f,y,C,I)}evaluate(n,A,f,y,C,I){return this._styleExpression.evaluate(n,A,f,y,C,I)}interpolationFactor(n,A,f){return this.interpolationType?Cs.interpolationFactor(this.interpolationType,n,A,f):0}}function rs(o,n){const A=mi(o,n);if(A.result==="error")return A;const f=A.value.expression,y=xs(f);if(!y&&!xi(n))return ba([new Vr("","data expressions not supported")]);const C=aa(f,["zoom"]);if(!C&&!N(n))return ba([new Vr("","zoom expressions not supported")]);const I=ns(f);return I||C?I instanceof Vr?ba([I]):I instanceof Cs&&!oe(n)?ba([new Vr("",'"interpolate" expressions cannot be used with this property')]):XA(I?new Es(y?"camera":"composite",A.value,I.labels,I instanceof Cs?I.interpolation:void 0):new Tn(y?"constant":"source",A.value)):ba([new Vr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Ws{constructor(n,A){this._parameters=n,this._specification=A,Ct(this,Jt(this._parameters,this._specification))}static deserialize(n){return new Ws(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function ns(o){let n=null;if(o instanceof va)n=ns(o.result);else if(o instanceof to){for(const A of o.args)if(n=ns(A),n)break}else(o instanceof qs||o instanceof Cs)&&o.input instanceof Vn&&o.input.name==="zoom"&&(n=o);return n instanceof Vr||o.eachChild(A=>{const f=ns(A);f instanceof Vr?n=f:!n&&f?n=new Vr("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&f&&n!==f&&(n=new Vr("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}function Si(o){const n=o.key,A=o.value,f=o.valueSpec||{},y=o.objectElementValidators||{},C=o.style,I=o.styleSpec;let D=[];const z=ke(A);if(z!=="object")return[new nt(n,A,`object expected, ${z} found`)];for(const X in A){const ie=X.split(".")[0],ce=f[ie]||f["*"];let ye;if(y[ie])ye=y[ie];else if(f[ie])ye=gi;else if(y["*"])ye=y["*"];else{if(!f["*"]){D.push(new nt(n,A[X],`unknown property "${X}"`));continue}ye=gi}D=D.concat(ye({key:(n&&`${n}.`)+X,value:A[X],valueSpec:ce,style:C,styleSpec:I,object:A,objectKey:X},A))}for(const X in f)y[X]||f[X].required&&f[X].default===void 0&&A[X]===void 0&&D.push(new nt(n,A,`missing required property "${X}"`));return D}function gl(o){const n=o.value,A=o.valueSpec,f=o.style,y=o.styleSpec,C=o.key,I=o.arrayElementValidator||gi;if(ke(n)!=="array")return[new nt(C,n,`array expected, ${ke(n)} found`)];if(A.length&&n.length!==A.length)return[new nt(C,n,`array length ${A.length} expected, length ${n.length} found`)];if(A["min-length"]&&n.length<A["min-length"])return[new nt(C,n,`array length at least ${A["min-length"]} expected, length ${n.length} found`)];let D={type:A.value,values:A.values};y.$version<7&&(D.function=A.function),ke(A.value)==="object"&&(D=A.value);let z=[];for(let X=0;X<n.length;X++)z=z.concat(I({array:n,arrayIndex:X,value:n[X],valueSpec:D,style:f,styleSpec:y,key:`${C}[${X}]`}));return z}function la(o){const n=o.key,A=o.value,f=o.valueSpec;let y=ke(A);return y==="number"&&A!=A&&(y="NaN"),y!=="number"?[new nt(n,A,`number expected, ${y} found`)]:"minimum"in f&&A<f.minimum?[new nt(n,A,`${A} is less than the minimum value ${f.minimum}`)]:"maximum"in f&&A>f.maximum?[new nt(n,A,`${A} is greater than the maximum value ${f.maximum}`)]:[]}function ki(o){const n=o.valueSpec,A=jt(o.value.type);let f,y,C,I={};const D=A!=="categorical"&&o.value.property===void 0,z=!D,X=ke(o.value.stops)==="array"&&ke(o.value.stops[0])==="array"&&ke(o.value.stops[0][0])==="object",ie=Si({key:o.key,value:o.value,valueSpec:o.styleSpec.function,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{stops:function(Be){if(A==="identity")return[new nt(Be.key,Be.value,'identity function may not have a "stops" property')];let Ee=[];const $e=Be.value;return Ee=Ee.concat(gl({key:Be.key,value:$e,valueSpec:Be.valueSpec,style:Be.style,styleSpec:Be.styleSpec,arrayElementValidator:ce})),ke($e)==="array"&&$e.length===0&&Ee.push(new nt(Be.key,$e,"array must have at least one stop")),Ee},default:function(Be){return gi({key:Be.key,value:Be.value,valueSpec:n,style:Be.style,styleSpec:Be.styleSpec})}}});return A==="identity"&&D&&ie.push(new nt(o.key,o.value,'missing required property "property"')),A==="identity"||o.value.stops||ie.push(new nt(o.key,o.value,'missing required property "stops"')),A==="exponential"&&o.valueSpec.expression&&!oe(o.valueSpec)&&ie.push(new nt(o.key,o.value,"exponential functions not supported")),o.styleSpec.$version>=8&&(z&&!xi(o.valueSpec)?ie.push(new nt(o.key,o.value,"property functions not supported")):D&&!N(o.valueSpec)&&ie.push(new nt(o.key,o.value,"zoom functions not supported"))),A!=="categorical"&&!X||o.value.property!==void 0||ie.push(new nt(o.key,o.value,'"property" property is required')),ie;function ce(Be){let Ee=[];const $e=Be.value,Ze=Be.key;if(ke($e)!=="array")return[new nt(Ze,$e,`array expected, ${ke($e)} found`)];if($e.length!==2)return[new nt(Ze,$e,`array length 2 expected, length ${$e.length} found`)];if(X){if(ke($e[0])!=="object")return[new nt(Ze,$e,`object expected, ${ke($e[0])} found`)];if($e[0].zoom===void 0)return[new nt(Ze,$e,"object stop key must have zoom")];if($e[0].value===void 0)return[new nt(Ze,$e,"object stop key must have value")];if(C&&C>jt($e[0].zoom))return[new nt(Ze,$e[0].zoom,"stop zoom values must appear in ascending order")];jt($e[0].zoom)!==C&&(C=jt($e[0].zoom),y=void 0,I={}),Ee=Ee.concat(Si({key:`${Ze}[0]`,value:$e[0],valueSpec:{zoom:{}},style:Be.style,styleSpec:Be.styleSpec,objectElementValidators:{zoom:la,value:ye}}))}else Ee=Ee.concat(ye({key:`${Ze}[0]`,value:$e[0],valueSpec:{},style:Be.style,styleSpec:Be.styleSpec},$e));return pi(er($e[1]))?Ee.concat([new nt(`${Ze}[1]`,$e[1],"expressions are not allowed in function stops.")]):Ee.concat(gi({key:`${Ze}[1]`,value:$e[1],valueSpec:n,style:Be.style,styleSpec:Be.styleSpec}))}function ye(Be,Ee){const $e=ke(Be.value),Ze=jt(Be.value),Et=Be.value!==null?Be.value:Ee;if(f){if($e!==f)return[new nt(Be.key,Et,`${$e} stop domain type must match previous stop domain type ${f}`)]}else f=$e;if($e!=="number"&&$e!=="string"&&$e!=="boolean")return[new nt(Be.key,Et,"stop domain value must be a number, string, or boolean")];if($e!=="number"&&A!=="categorical"){let Kt=`number expected, ${$e} found`;return xi(n)&&A===void 0&&(Kt+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new nt(Be.key,Et,Kt)]}return A!=="categorical"||$e!=="number"||isFinite(Ze)&&Math.floor(Ze)===Ze?A!=="categorical"&&$e==="number"&&y!==void 0&&Ze<y?[new nt(Be.key,Et,"stop domain values must appear in ascending order")]:(y=Ze,A==="categorical"&&Ze in I?[new nt(Be.key,Et,"stop domain values must be unique")]:(I[Ze]=!0,[])):[new nt(Be.key,Et,`integer expected, found ${Ze}`)]}}function xa(o){const n=(o.expressionContext==="property"?rs:mi)(er(o.value),o.valueSpec);if(n.result==="error")return n.value.map(f=>new nt(`${o.key}${f.key}`,o.value,f.message));const A=n.value.expression||n.value._styleExpression.expression;if(o.expressionContext==="property"&&o.propertyKey==="text-font"&&!A.outputDefined())return[new nt(o.key,o.value,`Invalid data expression for "${o.propertyKey}". Output values must be contained as literals within the expression.`)];if(o.expressionContext==="property"&&o.propertyType==="layout"&&!$a(A))return[new nt(o.key,o.value,'"feature-state" data expressions are not supported with layout properties.')];if(o.expressionContext==="filter"&&!$a(A))return[new nt(o.key,o.value,'"feature-state" data expressions are not supported with filters.')];if(o.expressionContext&&o.expressionContext.indexOf("cluster")===0){if(!aa(A,["zoom","feature-state"]))return[new nt(o.key,o.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(o.expressionContext==="cluster-initial"&&!xs(A))return[new nt(o.key,o.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Mi(o){const n=o.key,A=o.value,f=o.valueSpec,y=[];return Array.isArray(f.values)?f.values.indexOf(jt(A))===-1&&y.push(new nt(n,A,`expected one of [${f.values.join(", ")}], ${JSON.stringify(A)} found`)):Object.keys(f.values).indexOf(jt(A))===-1&&y.push(new nt(n,A,`expected one of [${Object.keys(f.values).join(", ")}], ${JSON.stringify(A)} found`)),y}function Da(o){if(o===!0||o===!1)return!0;if(!Array.isArray(o)||o.length===0)return!1;switch(o[0]){case"has":return o.length>=2&&o[1]!=="$id"&&o[1]!=="$type";case"in":return o.length>=3&&(typeof o[1]!="string"||Array.isArray(o[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return o.length!==3||Array.isArray(o[1])||Array.isArray(o[2]);case"any":case"all":for(const n of o.slice(1))if(!Da(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}const Ba={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function is(o){if(o==null)return{filter:()=>!0,needGeometry:!1};Da(o)||(o=so(o));const n=mi(o,Ba);if(n.result==="error")throw new Error(n.value.map(A=>`${A.key}: ${A.message}`).join(", "));return{filter:(A,f,y)=>n.value.evaluate(A,f,{},y),needGeometry:cA(o)}}function hi(o,n){return o<n?-1:o>n?1:0}function cA(o){if(!Array.isArray(o))return!1;if(o[0]==="within")return!0;for(let n=1;n<o.length;n++)if(cA(o[n]))return!0;return!1}function so(o){if(!o)return!0;const n=o[0];return o.length<=1?n!=="any":n==="=="?uA(o[1],o[2],"=="):n==="!="?ao(uA(o[1],o[2],"==")):n==="<"||n===">"||n==="<="||n===">="?uA(o[1],o[2],n):n==="any"?(A=o.slice(1),["any"].concat(A.map(so))):n==="all"?["all"].concat(o.slice(1).map(so)):n==="none"?["all"].concat(o.slice(1).map(so).map(ao)):n==="in"?Fs(o[1],o.slice(2)):n==="!in"?ao(Fs(o[1],o.slice(2))):n==="has"?xo(o[1]):n==="!has"?ao(xo(o[1])):n!=="within"||o;var A}function uA(o,n,A){switch(o){case"$type":return[`filter-type-${A}`,n];case"$id":return[`filter-id-${A}`,n];default:return[`filter-${A}`,o,n]}}function Fs(o,n){if(n.length===0)return!1;switch(o){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(A=>typeof A!=typeof n[0])?["filter-in-large",o,["literal",n.sort(hi)]]:["filter-in-small",o,["literal",n]]}}function xo(o){switch(o){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",o]}}function ao(o){return["!",o]}function Ro(o){return Da(er(o.value))?xa(Ct({},o,{expressionContext:"filter",valueSpec:{value:"boolean"}})):zi(o)}function zi(o){const n=o.value,A=o.key;if(ke(n)!=="array")return[new nt(A,n,`array expected, ${ke(n)} found`)];const f=o.styleSpec;let y,C=[];if(n.length<1)return[new nt(A,n,"filter array must have at least 1 element")];switch(C=C.concat(Mi({key:`${A}[0]`,value:n[0],valueSpec:f.filter_operator,style:o.style,styleSpec:o.styleSpec})),jt(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&jt(n[1])==="$type"&&C.push(new nt(A,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&C.push(new nt(A,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(y=ke(n[1]),y!=="string"&&C.push(new nt(`${A}[1]`,n[1],`string expected, ${y} found`)));for(let I=2;I<n.length;I++)y=ke(n[I]),jt(n[1])==="$type"?C=C.concat(Mi({key:`${A}[${I}]`,value:n[I],valueSpec:f.geometry_type,style:o.style,styleSpec:o.styleSpec})):y!=="string"&&y!=="number"&&y!=="boolean"&&C.push(new nt(`${A}[${I}]`,n[I],`string, number, or boolean expected, ${y} found`));break;case"any":case"all":case"none":for(let I=1;I<n.length;I++)C=C.concat(zi({key:`${A}[${I}]`,value:n[I],style:o.style,styleSpec:o.styleSpec}));break;case"has":case"!has":y=ke(n[1]),n.length!==2?C.push(new nt(A,n,`filter array for "${n[0]}" operator must have 2 elements`)):y!=="string"&&C.push(new nt(`${A}[1]`,n[1],`string expected, ${y} found`));break;case"within":y=ke(n[1]),n.length!==2?C.push(new nt(A,n,`filter array for "${n[0]}" operator must have 2 elements`)):y!=="object"&&C.push(new nt(`${A}[1]`,n[1],`object expected, ${y} found`))}return C}function Ns(o,n){const A=o.key,f=o.style,y=o.styleSpec,C=o.value,I=o.objectKey,D=y[`${n}_${o.layerType}`];if(!D)return[];const z=I.match(/^(.*)-transition$/);if(n==="paint"&&z&&D[z[1]]&&D[z[1]].transition)return gi({key:A,value:C,valueSpec:y.transition,style:f,styleSpec:y});const X=o.valueSpec||D[I];if(!X)return[new nt(A,C,`unknown property "${I}"`)];let ie;if(ke(C)==="string"&&xi(X)&&!X.tokens&&(ie=/^{([^}]+)}$/.exec(C)))return[new nt(A,C,`"${I}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(ie[1])} }\`.`)];const ce=[];return o.layerType==="symbol"&&(I==="text-field"&&f&&!f.glyphs&&ce.push(new nt(A,C,'use of "text-field" requires a style "glyphs" property')),I==="text-font"&&et(er(C))&&jt(C.type)==="identity"&&ce.push(new nt(A,C,'"text-font" does not support identity functions'))),ce.concat(gi({key:o.key,value:C,valueSpec:X,style:f,styleSpec:y,expressionContext:"property",propertyType:n,propertyKey:I}))}function oo(o){return Ns(o,"paint")}function ss(o){return Ns(o,"layout")}function js(o){let n=[];const A=o.value,f=o.key,y=o.style,C=o.styleSpec;A.type||A.ref||n.push(new nt(f,A,'either "type" or "ref" is required'));let I=jt(A.type);const D=jt(A.ref);if(A.id){const z=jt(A.id);for(let X=0;X<o.arrayIndex;X++){const ie=y.layers[X];jt(ie.id)===z&&n.push(new nt(f,A.id,`duplicate layer id "${A.id}", previously used at line ${ie.id.__line__}`))}}if("ref"in A){let z;["type","source","source-layer","filter","layout"].forEach(X=>{X in A&&n.push(new nt(f,A[X],`"${X}" is prohibited for ref layers`))}),y.layers.forEach(X=>{jt(X.id)===D&&(z=X)}),z?z.ref?n.push(new nt(f,A.ref,"ref cannot reference another ref layer")):I=jt(z.type):n.push(new nt(f,A.ref,`ref layer "${D}" not found`))}else if(I!=="background")if(A.source){const z=y.sources&&y.sources[A.source],X=z&&jt(z.type);z?X==="vector"&&I==="raster"?n.push(new nt(f,A.source,`layer "${A.id}" requires a raster source`)):X==="raster"&&I!=="raster"?n.push(new nt(f,A.source,`layer "${A.id}" requires a vector source`)):X!=="vector"||A["source-layer"]?X==="raster-dem"&&I!=="hillshade"?n.push(new nt(f,A.source,"raster-dem source can only be used with layer type 'hillshade'.")):I!=="line"||!A.paint||!A.paint["line-gradient"]||X==="geojson"&&z.lineMetrics||n.push(new nt(f,A,`layer "${A.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new nt(f,A,`layer "${A.id}" must specify a "source-layer"`)):n.push(new nt(f,A.source,`source "${A.source}" not found`))}else n.push(new nt(f,A,'missing required property "source"'));return n=n.concat(Si({key:f,value:A,valueSpec:C.layer,style:o.style,styleSpec:o.styleSpec,objectElementValidators:{"*":()=>[],type:()=>gi({key:`${f}.type`,value:A.type,valueSpec:C.layer.type,style:o.style,styleSpec:o.styleSpec,object:A,objectKey:"type"}),filter:Ro,layout:z=>Si({layer:A,key:z.key,value:z.value,style:z.style,styleSpec:z.styleSpec,objectElementValidators:{"*":X=>ss(Ct({layerType:I},X))}}),paint:z=>Si({layer:A,key:z.key,value:z.value,style:z.style,styleSpec:z.styleSpec,objectElementValidators:{"*":X=>oo(Ct({layerType:I},X))}})}})),n}function Ss(o){const n=o.value,A=o.key,f=ke(n);return f!=="string"?[new nt(A,n,`string expected, ${f} found`)]:[]}const Ca={promoteId:function({key:o,value:n}){if(ke(n)==="string")return Ss({key:o,value:n});{const A=[];for(const f in n)A.push(...Ss({key:`${o}.${f}`,value:n[f]}));return A}}};function ca(o){const n=o.value,A=o.key,f=o.styleSpec,y=o.style;if(!n.type)return[new nt(A,n,'"type" is required')];const C=jt(n.type);let I;switch(C){case"vector":case"raster":case"raster-dem":return I=Si({key:A,value:n,valueSpec:f[`source_${C.replace("-","_")}`],style:o.style,styleSpec:f,objectElementValidators:Ca}),I;case"geojson":if(I=Si({key:A,value:n,valueSpec:f.source_geojson,style:y,styleSpec:f,objectElementValidators:Ca}),n.cluster)for(const D in n.clusterProperties){const[z,X]=n.clusterProperties[D],ie=typeof z=="string"?[z,["accumulated"],["get",D]]:z;I.push(...xa({key:`${A}.${D}.map`,value:X,expressionContext:"cluster-map"})),I.push(...xa({key:`${A}.${D}.reduce`,value:ie,expressionContext:"cluster-reduce"}))}return I;case"video":return Si({key:A,value:n,valueSpec:f.source_video,style:y,styleSpec:f});case"image":return Si({key:A,value:n,valueSpec:f.source_image,style:y,styleSpec:f});case"canvas":return[new nt(A,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Mi({key:`${A}.type`,value:n.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:y,styleSpec:f})}}function Xs(o){const n=o.value,A=o.styleSpec,f=A.light,y=o.style;let C=[];const I=ke(n);if(n===void 0)return C;if(I!=="object")return C=C.concat([new nt("light",n,`object expected, ${I} found`)]),C;for(const D in n){const z=D.match(/^(.*)-transition$/);C=C.concat(z&&f[z[1]]&&f[z[1]].transition?gi({key:D,value:n[D],valueSpec:A.transition,style:y,styleSpec:A}):f[D]?gi({key:D,value:n[D],valueSpec:f[D],style:y,styleSpec:A}):[new nt(D,n[D],`unknown property "${D}"`)])}return C}function as(o){const n=o.value,A=o.styleSpec,f=A.terrain,y=o.style;let C=[];const I=ke(n);if(n===void 0)return C;if(I!=="object")return C=C.concat([new nt("terrain",n,`object expected, ${I} found`)]),C;for(const D in n)C=C.concat(f[D]?gi({key:D,value:n[D],valueSpec:f[D],style:y,styleSpec:A}):[new nt(D,n[D],`unknown property "${D}"`)]);return C}const ua={"*":()=>[],array:gl,boolean:function(o){const n=o.value,A=o.key,f=ke(n);return f!=="boolean"?[new nt(A,n,`boolean expected, ${f} found`)]:[]},number:la,color:function(o){const n=o.key,A=o.value,f=ke(A);return f!=="string"?[new nt(n,A,`color expected, ${f} found`)]:Ln(A)===null?[new nt(n,A,`color expected, "${A}" found`)]:[]},constants:bt,enum:Mi,filter:Ro,function:ki,layer:js,object:Si,source:ca,light:Xs,terrain:as,string:Ss,formatted:function(o){return Ss(o).length===0?[]:xa(o)},resolvedImage:function(o){return Ss(o).length===0?[]:xa(o)},padding:function(o){const n=o.key,A=o.value;if(ke(A)==="array"){if(A.length<1||A.length>4)return[new nt(n,A,`padding requires 1 to 4 values; ${A.length} values found`)];const f={type:"number"};let y=[];for(let C=0;C<A.length;C++)y=y.concat(gi({key:`${n}[${C}]`,value:A[C],valueSpec:f}));return y}return la({key:n,value:A,valueSpec:{}})}};function gi(o){const n=o.value,A=o.valueSpec,f=o.styleSpec;return A.expression&&et(jt(n))?ki(o):A.expression&&pi(er(n))?xa(o):A.type&&ua[A.type]?ua[A.type](o):Si(Ct({},o,{valueSpec:A.type?f[A.type]:A}))}function ZA(o){const n=o.value,A=o.key,f=Ss(o);return f.length||(n.indexOf("{fontstack}")===-1&&f.push(new nt(A,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&f.push(new nt(A,n,'"glyphs" url must include a "{range}" token'))),f}function Na(o,n=vt){let A=[];return A=A.concat(gi({key:"",value:o,valueSpec:n.$root,styleSpec:n,style:o,objectElementValidators:{glyphs:ZA,"*":()=>[]}})),o.constants&&(A=A.concat(bt({key:"constants",value:o.constants,style:o,styleSpec:n}))),ja(A)}function ja(o){return[].concat(o).sort((n,A)=>n.line-A.line)}function fs(o){return function(...n){return ja(o.apply(this,n))}}Na.source=fs(ca),Na.light=fs(Xs),Na.terrain=fs(as),Na.layer=fs(js),Na.filter=fs(Ro),Na.paintProperty=fs(oo),Na.layoutProperty=fs(ss);const Ea=Na,Oo=Ea.light,Rs=Ea.paintProperty,hA=Ea.layoutProperty;function Ao(o,n){let A=!1;if(n&&n.length)for(const f of n)o.fire(new Zr(new Error(f.message))),A=!0;return A}class zo{constructor(n,A,f){const y=this.cells=[];if(n instanceof ArrayBuffer){this.arrayBuffer=n;const I=new Int32Array(this.arrayBuffer);n=I[0],this.d=(A=I[1])+2*(f=I[2]);for(let z=0;z<this.d*this.d;z++){const X=I[3+z],ie=I[3+z+1];y.push(X===ie?null:I.subarray(X,ie))}const D=I[3+y.length+1];this.keys=I.subarray(I[3+y.length],D),this.bboxes=I.subarray(D),this.insert=this._insertReadonly}else{this.d=A+2*f;for(let I=0;I<this.d*this.d;I++)y.push([]);this.keys=[],this.bboxes=[]}this.n=A,this.extent=n,this.padding=f,this.scale=A/n,this.uid=0;const C=f/A*n;this.min=-C,this.max=n+C}insert(n,A,f,y,C){this._forEachCell(A,f,y,C,this._insertCell,this.uid++,void 0,void 0),this.keys.push(n),this.bboxes.push(A),this.bboxes.push(f),this.bboxes.push(y),this.bboxes.push(C)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(n,A,f,y,C,I){this.cells[C].push(I)}query(n,A,f,y,C){const I=this.min,D=this.max;if(n<=I&&A<=I&&D<=f&&D<=y&&!C)return Array.prototype.slice.call(this.keys);{const z=[];return this._forEachCell(n,A,f,y,this._queryCell,z,{},C),z}}_queryCell(n,A,f,y,C,I,D,z){const X=this.cells[C];if(X!==null){const ie=this.keys,ce=this.bboxes;for(let ye=0;ye<X.length;ye++){const Be=X[ye];if(D[Be]===void 0){const Ee=4*Be;(z?z(ce[Ee+0],ce[Ee+1],ce[Ee+2],ce[Ee+3]):n<=ce[Ee+2]&&A<=ce[Ee+3]&&f>=ce[Ee+0]&&y>=ce[Ee+1])?(D[Be]=!0,I.push(ie[Be])):D[Be]=!1}}}}_forEachCell(n,A,f,y,C,I,D,z){const X=this._convertToCellCoord(n),ie=this._convertToCellCoord(A),ce=this._convertToCellCoord(f),ye=this._convertToCellCoord(y);for(let Be=X;Be<=ce;Be++)for(let Ee=ie;Ee<=ye;Ee++){const $e=this.d*Ee+Be;if((!z||z(this._convertFromCellCoord(Be),this._convertFromCellCoord(Ee),this._convertFromCellCoord(Be+1),this._convertFromCellCoord(Ee+1)))&&C.call(this,n,A,f,y,$e,I,D,z))return}}_convertFromCellCoord(n){return(n-this.padding)/this.scale}_convertToCellCoord(n){return Math.max(0,Math.min(this.d-1,Math.floor(n*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const n=this.cells,A=3+this.cells.length+1+1;let f=0;for(let I=0;I<this.cells.length;I++)f+=this.cells[I].length;const y=new Int32Array(A+f+this.keys.length+this.bboxes.length);y[0]=this.extent,y[1]=this.n,y[2]=this.padding;let C=A;for(let I=0;I<n.length;I++){const D=n[I];y[3+I]=C,y.set(D,C),C+=D.length}return y[3+n.length]=C,y.set(this.keys,C),C+=this.keys.length,y[3+n.length+1]=C,y.set(this.bboxes,C),C+=this.bboxes.length,y.buffer}static serialize(n,A){const f=n.toArrayBuffer();return A&&A.push(f),{buffer:f}}static deserialize(n){return new zo(n.buffer)}}const Hi={};function kr(o,n,A={}){if(Hi[o])throw new Error(`${o} is already registered.`);Object.defineProperty(n,"_classRegistryKey",{value:o,writeable:!1}),Hi[o]={klass:n,omit:A.omit||[],shallow:A.shallow||[]}}kr("Object",Object),kr("TransferableGridIndex",zo),kr("Color",Te),kr("Error",Error),kr("AJAXError",Nt),kr("ResolvedImage",ut),kr("StylePropertyFunction",Ws),kr("StyleExpression",Wn,{omit:["_evaluator"]}),kr("ZoomDependentExpression",Es),kr("ZoomConstantExpression",Tn),kr("CompoundExpression",Vn,{omit:["_evaluate"]});for(const o in bo)bo[o]._classRegistryKey||kr(`Expression_${o}`,bo[o]);function Ii(o){return o&&typeof ArrayBuffer<"u"&&(o instanceof ArrayBuffer||o.constructor&&o.constructor.name==="ArrayBuffer")}function Ai(o,n){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob)return o;if(Ii(o)||ve(o))return n&&n.push(o),o;if(ArrayBuffer.isView(o)){const A=o;return n&&n.push(A.buffer),A}if(o instanceof ImageData)return n&&n.push(o.data.buffer),o;if(Array.isArray(o)){const A=[];for(const f of o)A.push(Ai(f,n));return A}if(typeof o=="object"){const A=o.constructor,f=A._classRegistryKey;if(!f)throw new Error("can't serialize object of unregistered class");if(!Hi[f])throw new Error(`${f} is not registered.`);const y=A.serialize?A.serialize(o,n):{};if(A.serialize){if(n&&y===n[n.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const C in o){if(!o.hasOwnProperty(C)||Hi[f].omit.indexOf(C)>=0)continue;const I=o[C];y[C]=Hi[f].shallow.indexOf(C)>=0?I:Ai(I,n)}o instanceof Error&&(y.message=o.message)}if(y.$name)throw new Error("$name property is reserved for worker serialization logic.");return f!=="Object"&&(y.$name=f),y}throw new Error("can't serialize object of type "+typeof o)}function Bi(o){if(o==null||typeof o=="boolean"||typeof o=="number"||typeof o=="string"||o instanceof Boolean||o instanceof Number||o instanceof String||o instanceof Date||o instanceof RegExp||o instanceof Blob||Ii(o)||ve(o)||ArrayBuffer.isView(o)||o instanceof ImageData)return o;if(Array.isArray(o))return o.map(Bi);if(typeof o=="object"){const n=o.$name||"Object";if(!Hi[n])throw new Error(`can't deserialize unregistered class ${n}`);const{klass:A}=Hi[n];if(!A)throw new Error(`can't deserialize unregistered class ${n}`);if(A.deserialize)return A.deserialize(o);const f=Object.create(A.prototype);for(const y of Object.keys(o)){if(y==="$name")continue;const C=o[y];f[y]=Hi[n].shallow.indexOf(y)>=0?C:Bi(C)}return f}throw new Error("can't deserialize object of type "+typeof o)}class Zi{constructor(){this.first=!0}update(n,A){const f=Math.floor(n);return this.first?(this.first=!1,this.lastIntegerZoom=f,this.lastIntegerZoomTime=0,this.lastZoom=n,this.lastFloorZoom=f,!0):(this.lastFloorZoom>f?(this.lastIntegerZoom=f+1,this.lastIntegerZoomTime=A):this.lastFloorZoom<f&&(this.lastIntegerZoom=f,this.lastIntegerZoomTime=A),n!==this.lastZoom&&(this.lastZoom=n,this.lastFloorZoom=f,!0))}}const Sr={"Latin-1 Supplement":o=>o>=128&&o<=255,Arabic:o=>o>=1536&&o<=1791,"Arabic Supplement":o=>o>=1872&&o<=1919,"Arabic Extended-A":o=>o>=2208&&o<=2303,"Hangul Jamo":o=>o>=4352&&o<=4607,"Unified Canadian Aboriginal Syllabics":o=>o>=5120&&o<=5759,Khmer:o=>o>=6016&&o<=6143,"Unified Canadian Aboriginal Syllabics Extended":o=>o>=6320&&o<=6399,"General Punctuation":o=>o>=8192&&o<=8303,"Letterlike Symbols":o=>o>=8448&&o<=8527,"Number Forms":o=>o>=8528&&o<=8591,"Miscellaneous Technical":o=>o>=8960&&o<=9215,"Control Pictures":o=>o>=9216&&o<=9279,"Optical Character Recognition":o=>o>=9280&&o<=9311,"Enclosed Alphanumerics":o=>o>=9312&&o<=9471,"Geometric Shapes":o=>o>=9632&&o<=9727,"Miscellaneous Symbols":o=>o>=9728&&o<=9983,"Miscellaneous Symbols and Arrows":o=>o>=11008&&o<=11263,"CJK Radicals Supplement":o=>o>=11904&&o<=12031,"Kangxi Radicals":o=>o>=12032&&o<=12255,"Ideographic Description Characters":o=>o>=12272&&o<=12287,"CJK Symbols and Punctuation":o=>o>=12288&&o<=12351,Hiragana:o=>o>=12352&&o<=12447,Katakana:o=>o>=12448&&o<=12543,Bopomofo:o=>o>=12544&&o<=12591,"Hangul Compatibility Jamo":o=>o>=12592&&o<=12687,Kanbun:o=>o>=12688&&o<=12703,"Bopomofo Extended":o=>o>=12704&&o<=12735,"CJK Strokes":o=>o>=12736&&o<=12783,"Katakana Phonetic Extensions":o=>o>=12784&&o<=12799,"Enclosed CJK Letters and Months":o=>o>=12800&&o<=13055,"CJK Compatibility":o=>o>=13056&&o<=13311,"CJK Unified Ideographs Extension A":o=>o>=13312&&o<=19903,"Yijing Hexagram Symbols":o=>o>=19904&&o<=19967,"CJK Unified Ideographs":o=>o>=19968&&o<=40959,"Yi Syllables":o=>o>=40960&&o<=42127,"Yi Radicals":o=>o>=42128&&o<=42191,"Hangul Jamo Extended-A":o=>o>=43360&&o<=43391,"Hangul Syllables":o=>o>=44032&&o<=55215,"Hangul Jamo Extended-B":o=>o>=55216&&o<=55295,"Private Use Area":o=>o>=57344&&o<=63743,"CJK Compatibility Ideographs":o=>o>=63744&&o<=64255,"Arabic Presentation Forms-A":o=>o>=64336&&o<=65023,"Vertical Forms":o=>o>=65040&&o<=65055,"CJK Compatibility Forms":o=>o>=65072&&o<=65103,"Small Form Variants":o=>o>=65104&&o<=65135,"Arabic Presentation Forms-B":o=>o>=65136&&o<=65279,"Halfwidth and Fullwidth Forms":o=>o>=65280&&o<=65519};function Ra(o){for(const n of o)if(Xl(n.charCodeAt(0)))return!0;return!1}function LA(o){for(const n of o)if(!QA(n.charCodeAt(0)))return!1;return!0}function QA(o){return!(Sr.Arabic(o)||Sr["Arabic Supplement"](o)||Sr["Arabic Extended-A"](o)||Sr["Arabic Presentation Forms-A"](o)||Sr["Arabic Presentation Forms-B"](o))}function Xl(o){return!(o!==746&&o!==747&&(o<4352||!(Sr["Bopomofo Extended"](o)||Sr.Bopomofo(o)||Sr["CJK Compatibility Forms"](o)&&!(o>=65097&&o<=65103)||Sr["CJK Compatibility Ideographs"](o)||Sr["CJK Compatibility"](o)||Sr["CJK Radicals Supplement"](o)||Sr["CJK Strokes"](o)||!(!Sr["CJK Symbols and Punctuation"](o)||o>=12296&&o<=12305||o>=12308&&o<=12319||o===12336)||Sr["CJK Unified Ideographs Extension A"](o)||Sr["CJK Unified Ideographs"](o)||Sr["Enclosed CJK Letters and Months"](o)||Sr["Hangul Compatibility Jamo"](o)||Sr["Hangul Jamo Extended-A"](o)||Sr["Hangul Jamo Extended-B"](o)||Sr["Hangul Jamo"](o)||Sr["Hangul Syllables"](o)||Sr.Hiragana(o)||Sr["Ideographic Description Characters"](o)||Sr.Kanbun(o)||Sr["Kangxi Radicals"](o)||Sr["Katakana Phonetic Extensions"](o)||Sr.Katakana(o)&&o!==12540||!(!Sr["Halfwidth and Fullwidth Forms"](o)||o===65288||o===65289||o===65293||o>=65306&&o<=65310||o===65339||o===65341||o===65343||o>=65371&&o<=65503||o===65507||o>=65512&&o<=65519)||!(!Sr["Small Form Variants"](o)||o>=65112&&o<=65118||o>=65123&&o<=65126)||Sr["Unified Canadian Aboriginal Syllabics"](o)||Sr["Unified Canadian Aboriginal Syllabics Extended"](o)||Sr["Vertical Forms"](o)||Sr["Yijing Hexagram Symbols"](o)||Sr["Yi Syllables"](o)||Sr["Yi Radicals"](o))))}function JA(o){return!(Xl(o)||function(n){return!!(Sr["Latin-1 Supplement"](n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||Sr["General Punctuation"](n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||Sr["Letterlike Symbols"](n)||Sr["Number Forms"](n)||Sr["Miscellaneous Technical"](n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||Sr["Control Pictures"](n)&&n!==9251||Sr["Optical Character Recognition"](n)||Sr["Enclosed Alphanumerics"](n)||Sr["Geometric Shapes"](n)||Sr["Miscellaneous Symbols"](n)&&!(n>=9754&&n<=9759)||Sr["Miscellaneous Symbols and Arrows"](n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||Sr["CJK Symbols and Punctuation"](n)||Sr.Katakana(n)||Sr["Private Use Area"](n)||Sr["CJK Compatibility Forms"](n)||Sr["Small Form Variants"](n)||Sr["Halfwidth and Fullwidth Forms"](n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(o))}function wc(o){return o>=1424&&o<=2303||Sr["Arabic Presentation Forms-A"](o)||Sr["Arabic Presentation Forms-B"](o)}function Oc(o,n){return!(!n&&wc(o)||o>=2304&&o<=3583||o>=3840&&o<=4255||Sr.Khmer(o))}function yl(o){for(const n of o)if(wc(n.charCodeAt(0)))return!0;return!1}const Zl="deferred",YA="loading",$A="loaded";let Zs=null,Di="unavailable",lo=null;const vl=function(o){o&&typeof o=="string"&&o.indexOf("NetworkError")>-1&&(Di="error"),Zs&&Zs(o)};function Oa(){el.fire(new xr("pluginStateChange",{pluginStatus:Di,pluginURL:lo}))}const el=new pn,fA=function(){return Di},PA=function(){if(Di!==Zl||!lo)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Di=YA,Oa(),lo&&pr({url:lo},o=>{o?vl(o):(Di=$A,Oa())})},Fa={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>Di===$A||Fa.applyArabicShaping!=null,isLoading:()=>Di===YA,setState(o){if(!Ae())throw new Error("Cannot set the state of the rtl-text-plugin when not in the web-worker context");Di=o.pluginStatus,lo=o.pluginURL},isParsed(){if(!Ae())throw new Error("rtl-text-plugin is only parsed on the worker-threads");return Fa.applyArabicShaping!=null&&Fa.processBidirectionalText!=null&&Fa.processStyledBidirectionalText!=null},getPluginURL(){if(!Ae())throw new Error("rtl-text-plugin url can only be queried from the worker threads");return lo}};class Ui{constructor(n,A){this.zoom=n,A?(this.now=A.now,this.fadeDuration=A.fadeDuration,this.zoomHistory=A.zoomHistory,this.transition=A.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Zi,this.transition={})}isSupportedScript(n){return function(A,f){for(const y of A)if(!Oc(y.charCodeAt(0),f))return!1;return!0}(n,Fa.isLoaded())}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const n=this.zoom,A=n-Math.floor(n),f=this.crossFadingFactor();return n>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:A+(1-A)*f}:{fromScale:.5,toScale:1,t:1-(1-f)*A}}}class kA{constructor(n,A){this.property=n,this.value=A,this.expression=function(f,y){if(et(f))return new Ws(f,y);if(pi(f)){const C=rs(f,y);if(C.result==="error")throw new Error(C.value.map(I=>`${I.key}: ${I.message}`).join(", "));return C.value}{let C=f;return y.type==="color"&&typeof f=="string"?C=Te.parse(f):y.type!=="padding"||typeof f!="number"&&!Array.isArray(f)||(C=qe.parse(f)),{kind:"constant",evaluate:()=>C}}}(A===void 0?n.specification.default:A,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,A,f){return this.property.possiblyEvaluate(this,n,A,f)}}class MA{constructor(n){this.property=n,this.value=new kA(n,void 0)}transitioned(n,A){return new zc(this.property,this.value,A,Q({},n.transition,this.transition),n.now)}untransitioned(){return new zc(this.property,this.value,null,{},0)}}class DA{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return G(this._values[n].value.value)}setValue(n,A){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new MA(this._values[n].property)),this._values[n].value=new kA(this._values[n].property,A===null?void 0:G(A))}getTransition(n){return G(this._values[n].transition)}setTransition(n,A){Object.prototype.hasOwnProperty.call(this._values,n)||(this._values[n]=new MA(this._values[n].property)),this._values[n].transition=G(A)||void 0}serialize(){const n={};for(const A of Object.keys(this._values)){const f=this.getValue(A);f!==void 0&&(n[A]=f);const y=this.getTransition(A);y!==void 0&&(n[`${A}-transition`]=y)}return n}transitioned(n,A){const f=new Hc(this._properties);for(const y of Object.keys(this._values))f._values[y]=this._values[y].transitioned(n,A._values[y]);return f}untransitioned(){const n=new Hc(this._properties);for(const A of Object.keys(this._values))n._values[A]=this._values[A].untransitioned();return n}}class zc{constructor(n,A,f,y,C){this.property=n,this.value=A,this.begin=C+y.delay||0,this.end=this.begin+y.duration||0,n.specification.transition&&(y.delay||y.duration)&&(this.prior=f)}possiblyEvaluate(n,A,f){const y=n.now||0,C=this.value.possiblyEvaluate(n,A,f),I=this.prior;if(I){if(y>this.end)return this.prior=null,C;if(this.value.isDataDriven())return this.prior=null,C;if(y<this.begin)return I.possiblyEvaluate(n,A,f);{const D=(y-this.begin)/(this.end-this.begin);return this.property.interpolate(I.possiblyEvaluate(n,A,f),C,function(z){if(z<=0)return 0;if(z>=1)return 1;const X=z*z,ie=X*z;return 4*(z<.5?ie:3*(z-X)+ie-.75)}(D))}}return C}}class Hc{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,A,f){const y=new dA(this._properties);for(const C of Object.keys(this._values))y._values[C]=this._values[C].possiblyEvaluate(n,A,f);return y}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class Vc{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}getValue(n){return G(this._values[n].value)}setValue(n,A){this._values[n]=new kA(this._values[n].property,A===null?void 0:G(A))}serialize(){const n={};for(const A of Object.keys(this._values)){const f=this.getValue(A);f!==void 0&&(n[A]=f)}return n}possiblyEvaluate(n,A,f){const y=new dA(this._properties);for(const C of Object.keys(this._values))y._values[C]=this._values[C].possiblyEvaluate(n,A,f);return y}}class Bo{constructor(n,A,f){this.property=n,this.value=A,this.parameters=f}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,A,f,y){return this.property.evaluate(this.value,this.parameters,n,A,f,y)}}class dA{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class sn{constructor(n){this.specification=n}possiblyEvaluate(n,A){if(n.isDataDriven())throw new Error("Value should not be data driven");return n.expression.evaluate(A)}interpolate(n,A,f){const y=Bs[this.specification.type];return y?y(n,A,f):n}}class vn{constructor(n,A){this.specification=n,this.overrides=A}possiblyEvaluate(n,A,f,y){return new Bo(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(A,null,{},f,y)}:n.expression,A)}interpolate(n,A,f){if(n.value.kind!=="constant"||A.value.kind!=="constant")return n;if(n.value.value===void 0||A.value.value===void 0)return new Bo(this,{kind:"constant",value:void 0},n.parameters);const y=Bs[this.specification.type];return y?new Bo(this,{kind:"constant",value:y(n.value.value,A.value.value,f)},n.parameters):n}evaluate(n,A,f,y,C,I){return n.kind==="constant"?n.value:n.evaluate(A,f,y,C,I)}}class tl extends vn{possiblyEvaluate(n,A,f,y){if(n.value===void 0)return new Bo(this,{kind:"constant",value:void 0},A);if(n.expression.kind==="constant"){const C=n.expression.evaluate(A,null,{},f,y),I=n.property.specification.type==="resolvedImage"&&typeof C!="string"?C.name:C,D=this._calculate(I,I,I,A);return new Bo(this,{kind:"constant",value:D},A)}if(n.expression.kind==="camera"){const C=this._calculate(n.expression.evaluate({zoom:A.zoom-1}),n.expression.evaluate({zoom:A.zoom}),n.expression.evaluate({zoom:A.zoom+1}),A);return new Bo(this,{kind:"constant",value:C},A)}return new Bo(this,n.expression,A)}evaluate(n,A,f,y,C,I){if(n.kind==="source"){const D=n.evaluate(A,f,y,C,I);return this._calculate(D,D,D,A)}return n.kind==="composite"?this._calculate(n.evaluate({zoom:Math.floor(A.zoom)-1},f,y),n.evaluate({zoom:Math.floor(A.zoom)},f,y),n.evaluate({zoom:Math.floor(A.zoom)+1},f,y),A):n.value}_calculate(n,A,f,y){return y.zoom>y.zoomHistory.lastIntegerZoom?{from:n,to:A}:{from:f,to:A}}interpolate(n){return n}}class _l{constructor(n){this.specification=n}possiblyEvaluate(n,A,f,y){if(n.value!==void 0){if(n.expression.kind==="constant"){const C=n.expression.evaluate(A,null,{},f,y);return this._calculate(C,C,C,A)}return this._calculate(n.expression.evaluate(new Ui(Math.floor(A.zoom-1),A)),n.expression.evaluate(new Ui(Math.floor(A.zoom),A)),n.expression.evaluate(new Ui(Math.floor(A.zoom+1),A)),A)}}_calculate(n,A,f,y){return y.zoom>y.zoomHistory.lastIntegerZoom?{from:n,to:A}:{from:f,to:A}}interpolate(n){return n}}class Sa{constructor(n){this.specification=n}possiblyEvaluate(n,A,f,y){return!!n.expression.evaluate(A,null,{},f,y)}interpolate(){return!1}}class os{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const A in n){const f=n[A];f.specification.overridable&&this.overridableProperties.push(A);const y=this.defaultPropertyValues[A]=new kA(f,void 0),C=this.defaultTransitionablePropertyValues[A]=new MA(f);this.defaultTransitioningPropertyValues[A]=C.untransitioned(),this.defaultPossiblyEvaluatedValues[A]=y.possiblyEvaluate({})}}}kr("DataDrivenProperty",vn),kr("DataConstantProperty",sn),kr("CrossFadedDataDrivenProperty",tl),kr("CrossFadedProperty",_l),kr("ColorRampProperty",Sa);const pA="-transition";class Co extends pn{constructor(n,A){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1},n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),A.layout&&(this._unevaluatedLayout=new Vc(A.layout)),A.paint)){this._transitionablePaint=new DA(A.paint);for(const f in n.paint)this.setPaintProperty(f,n.paint[f],{validate:!1});for(const f in n.layout)this.setLayoutProperty(f,n.layout[f],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new dA(A.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,A,f={}){A!=null&&this._validate(hA,`layers.${this.id}.layout.${n}`,n,A,f)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,A):this.visibility=A)}getPaintProperty(n){return n.endsWith(pA)?this._transitionablePaint.getTransition(n.slice(0,-pA.length)):this._transitionablePaint.getValue(n)}setPaintProperty(n,A,f={}){if(A!=null&&this._validate(Rs,`layers.${this.id}.paint.${n}`,n,A,f))return!1;if(n.endsWith(pA))return this._transitionablePaint.setTransition(n.slice(0,-pA.length),A||void 0),!1;{const y=this._transitionablePaint._values[n],C=y.property.specification["property-type"]==="cross-faded-data-driven",I=y.value.isDataDriven(),D=y.value;this._transitionablePaint.setValue(n,A),this._handleSpecialPaintPropertyUpdate(n);const z=this._transitionablePaint._values[n].value;return z.isDataDriven()||I||C||this._handleOverridablePaintPropertyUpdate(n,D,z)}}_handleSpecialPaintPropertyUpdate(n){}_handleOverridablePaintPropertyUpdate(n,A,f){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,A){n.getCrossfadeParameters&&(this._crossfadeParameters=n.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,A)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,A)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),O(n,(A,f)=>!(A===void 0||f==="layout"&&!Object.keys(A).length||f==="paint"&&!Object.keys(A).length))}_validate(n,A,f,y,C={}){return(!C||C.validate!==!1)&&Ao(this,n.call(Ea,{key:A,layerType:this.type,objectKey:f,value:y,styleSpec:vt,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const A=this.paint.get(n);if(A instanceof Bo&&xi(A.property.specification)&&(A.value.kind==="source"||A.value.kind==="composite")&&A.value.isStateDependent)return!0}return!1}}const bc={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class mA{constructor(n,A){this._structArray=n,this._pos1=A*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Ji{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,A){return n._trim(),A&&(n.isTransferred=!0,A.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const A=Object.create(this.prototype);return A.arrayBuffer=n.arrayBuffer,A.length=n.length,A.capacity=n.arrayBuffer.byteLength/A.bytesPerElement,A._refreshViews(),A}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const A=this.uint8;this._refreshViews(),A&&this.uint8.set(A)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function ds(o,n=1){let A=0,f=0;return{members:o.map(y=>{const C=bc[y.type].BYTES_PER_ELEMENT,I=A=xc(A,Math.max(n,C)),D=y.components||1;return f=Math.max(f,C),A+=C*D,{name:y.name,type:y.type,components:D,offset:I}}),size:xc(A,Math.max(f,n)),alignment:n}}function xc(o,n){return Math.ceil(o/n)*n}class ha extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,A){const f=this.length;return this.resize(f+1),this.emplace(f,n,A)}emplace(n,A,f){const y=2*n;return this.int16[y+0]=A,this.int16[y+1]=f,n}}ha.prototype.bytesPerElement=4,kr("StructArrayLayout2i4",ha);class g extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,A,f,y){const C=this.length;return this.resize(C+1),this.emplace(C,n,A,f,y)}emplace(n,A,f,y,C){const I=4*n;return this.int16[I+0]=A,this.int16[I+1]=f,this.int16[I+2]=y,this.int16[I+3]=C,n}}g.prototype.bytesPerElement=8,kr("StructArrayLayout4i8",g);class i extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,A,f,y,C,I){const D=this.length;return this.resize(D+1),this.emplace(D,n,A,f,y,C,I)}emplace(n,A,f,y,C,I,D){const z=6*n;return this.int16[z+0]=A,this.int16[z+1]=f,this.int16[z+2]=y,this.int16[z+3]=C,this.int16[z+4]=I,this.int16[z+5]=D,n}}i.prototype.bytesPerElement=12,kr("StructArrayLayout2i4i12",i);class u extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,A,f,y,C,I){const D=this.length;return this.resize(D+1),this.emplace(D,n,A,f,y,C,I)}emplace(n,A,f,y,C,I,D){const z=4*n,X=8*n;return this.int16[z+0]=A,this.int16[z+1]=f,this.uint8[X+4]=y,this.uint8[X+5]=C,this.uint8[X+6]=I,this.uint8[X+7]=D,n}}u.prototype.bytesPerElement=8,kr("StructArrayLayout2i4ub8",u);class m extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,A){const f=this.length;return this.resize(f+1),this.emplace(f,n,A)}emplace(n,A,f){const y=2*n;return this.float32[y+0]=A,this.float32[y+1]=f,n}}m.prototype.bytesPerElement=8,kr("StructArrayLayout2f8",m);class v extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,A,f,y,C,I,D,z,X,ie){const ce=this.length;return this.resize(ce+1),this.emplace(ce,n,A,f,y,C,I,D,z,X,ie)}emplace(n,A,f,y,C,I,D,z,X,ie,ce){const ye=10*n;return this.uint16[ye+0]=A,this.uint16[ye+1]=f,this.uint16[ye+2]=y,this.uint16[ye+3]=C,this.uint16[ye+4]=I,this.uint16[ye+5]=D,this.uint16[ye+6]=z,this.uint16[ye+7]=X,this.uint16[ye+8]=ie,this.uint16[ye+9]=ce,n}}v.prototype.bytesPerElement=20,kr("StructArrayLayout10ui20",v);class S extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,A,f,y,C,I,D,z,X,ie,ce,ye){const Be=this.length;return this.resize(Be+1),this.emplace(Be,n,A,f,y,C,I,D,z,X,ie,ce,ye)}emplace(n,A,f,y,C,I,D,z,X,ie,ce,ye,Be){const Ee=12*n;return this.int16[Ee+0]=A,this.int16[Ee+1]=f,this.int16[Ee+2]=y,this.int16[Ee+3]=C,this.uint16[Ee+4]=I,this.uint16[Ee+5]=D,this.uint16[Ee+6]=z,this.uint16[Ee+7]=X,this.int16[Ee+8]=ie,this.int16[Ee+9]=ce,this.int16[Ee+10]=ye,this.int16[Ee+11]=Be,n}}S.prototype.bytesPerElement=24,kr("StructArrayLayout4i4ui4i24",S);class M extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,A,f){const y=this.length;return this.resize(y+1),this.emplace(y,n,A,f)}emplace(n,A,f,y){const C=3*n;return this.float32[C+0]=A,this.float32[C+1]=f,this.float32[C+2]=y,n}}M.prototype.bytesPerElement=12,kr("StructArrayLayout3f12",M);class H extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const A=this.length;return this.resize(A+1),this.emplace(A,n)}emplace(n,A){return this.uint32[1*n+0]=A,n}}H.prototype.bytesPerElement=4,kr("StructArrayLayout1ul4",H);class q extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,A,f,y,C,I,D,z,X){const ie=this.length;return this.resize(ie+1),this.emplace(ie,n,A,f,y,C,I,D,z,X)}emplace(n,A,f,y,C,I,D,z,X,ie){const ce=10*n,ye=5*n;return this.int16[ce+0]=A,this.int16[ce+1]=f,this.int16[ce+2]=y,this.int16[ce+3]=C,this.int16[ce+4]=I,this.int16[ce+5]=D,this.uint32[ye+3]=z,this.uint16[ce+8]=X,this.uint16[ce+9]=ie,n}}q.prototype.bytesPerElement=20,kr("StructArrayLayout6i1ul2ui20",q);class J extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,A,f,y,C,I){const D=this.length;return this.resize(D+1),this.emplace(D,n,A,f,y,C,I)}emplace(n,A,f,y,C,I,D){const z=6*n;return this.int16[z+0]=A,this.int16[z+1]=f,this.int16[z+2]=y,this.int16[z+3]=C,this.int16[z+4]=I,this.int16[z+5]=D,n}}J.prototype.bytesPerElement=12,kr("StructArrayLayout2i2i2i12",J);class se extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,A,f,y,C){const I=this.length;return this.resize(I+1),this.emplace(I,n,A,f,y,C)}emplace(n,A,f,y,C,I){const D=4*n,z=8*n;return this.float32[D+0]=A,this.float32[D+1]=f,this.float32[D+2]=y,this.int16[z+6]=C,this.int16[z+7]=I,n}}se.prototype.bytesPerElement=16,kr("StructArrayLayout2f1f2i16",se);class pe extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,A,f,y){const C=this.length;return this.resize(C+1),this.emplace(C,n,A,f,y)}emplace(n,A,f,y,C){const I=12*n,D=3*n;return this.uint8[I+0]=A,this.uint8[I+1]=f,this.float32[D+1]=y,this.float32[D+2]=C,n}}pe.prototype.bytesPerElement=12,kr("StructArrayLayout2ub2f12",pe);class we extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,A,f){const y=this.length;return this.resize(y+1),this.emplace(y,n,A,f)}emplace(n,A,f,y){const C=3*n;return this.uint16[C+0]=A,this.uint16[C+1]=f,this.uint16[C+2]=y,n}}we.prototype.bytesPerElement=6,kr("StructArrayLayout3ui6",we);class He extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,A,f,y,C,I,D,z,X,ie,ce,ye,Be,Ee,$e,Ze,Et){const Kt=this.length;return this.resize(Kt+1),this.emplace(Kt,n,A,f,y,C,I,D,z,X,ie,ce,ye,Be,Ee,$e,Ze,Et)}emplace(n,A,f,y,C,I,D,z,X,ie,ce,ye,Be,Ee,$e,Ze,Et,Kt){const xt=24*n,Dt=12*n,or=48*n;return this.int16[xt+0]=A,this.int16[xt+1]=f,this.uint16[xt+2]=y,this.uint16[xt+3]=C,this.uint32[Dt+2]=I,this.uint32[Dt+3]=D,this.uint32[Dt+4]=z,this.uint16[xt+10]=X,this.uint16[xt+11]=ie,this.uint16[xt+12]=ce,this.float32[Dt+7]=ye,this.float32[Dt+8]=Be,this.uint8[or+36]=Ee,this.uint8[or+37]=$e,this.uint8[or+38]=Ze,this.uint32[Dt+10]=Et,this.int16[xt+22]=Kt,n}}He.prototype.bytesPerElement=48,kr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",He);class Me extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,A,f,y,C,I,D,z,X,ie,ce,ye,Be,Ee,$e,Ze,Et,Kt,xt,Dt,or,ar,Yr,on,Wr,Mr,Ur,Xr){const Or=this.length;return this.resize(Or+1),this.emplace(Or,n,A,f,y,C,I,D,z,X,ie,ce,ye,Be,Ee,$e,Ze,Et,Kt,xt,Dt,or,ar,Yr,on,Wr,Mr,Ur,Xr)}emplace(n,A,f,y,C,I,D,z,X,ie,ce,ye,Be,Ee,$e,Ze,Et,Kt,xt,Dt,or,ar,Yr,on,Wr,Mr,Ur,Xr,Or){const wr=34*n,_n=17*n;return this.int16[wr+0]=A,this.int16[wr+1]=f,this.int16[wr+2]=y,this.int16[wr+3]=C,this.int16[wr+4]=I,this.int16[wr+5]=D,this.int16[wr+6]=z,this.int16[wr+7]=X,this.uint16[wr+8]=ie,this.uint16[wr+9]=ce,this.uint16[wr+10]=ye,this.uint16[wr+11]=Be,this.uint16[wr+12]=Ee,this.uint16[wr+13]=$e,this.uint16[wr+14]=Ze,this.uint16[wr+15]=Et,this.uint16[wr+16]=Kt,this.uint16[wr+17]=xt,this.uint16[wr+18]=Dt,this.uint16[wr+19]=or,this.uint16[wr+20]=ar,this.uint16[wr+21]=Yr,this.uint16[wr+22]=on,this.uint32[_n+12]=Wr,this.float32[_n+13]=Mr,this.float32[_n+14]=Ur,this.float32[_n+15]=Xr,this.float32[_n+16]=Or,n}}Me.prototype.bytesPerElement=68,kr("StructArrayLayout8i15ui1ul4f68",Me);class Re extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const A=this.length;return this.resize(A+1),this.emplace(A,n)}emplace(n,A){return this.float32[1*n+0]=A,n}}Re.prototype.bytesPerElement=4,kr("StructArrayLayout1f4",Re);class ct extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,A,f){const y=this.length;return this.resize(y+1),this.emplace(y,n,A,f)}emplace(n,A,f,y){const C=3*n;return this.int16[C+0]=A,this.int16[C+1]=f,this.int16[C+2]=y,n}}ct.prototype.bytesPerElement=6,kr("StructArrayLayout3i6",ct);class wt extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,A,f){const y=this.length;return this.resize(y+1),this.emplace(y,n,A,f)}emplace(n,A,f,y){const C=4*n;return this.uint32[2*n+0]=A,this.uint16[C+2]=f,this.uint16[C+3]=y,n}}wt.prototype.bytesPerElement=8,kr("StructArrayLayout1ul2ui8",wt);class It extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,A){const f=this.length;return this.resize(f+1),this.emplace(f,n,A)}emplace(n,A,f){const y=2*n;return this.uint16[y+0]=A,this.uint16[y+1]=f,n}}It.prototype.bytesPerElement=4,kr("StructArrayLayout2ui4",It);class We extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const A=this.length;return this.resize(A+1),this.emplace(A,n)}emplace(n,A){return this.uint16[1*n+0]=A,n}}We.prototype.bytesPerElement=2,kr("StructArrayLayout1ui2",We);class Rt extends Ji{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,A,f,y){const C=this.length;return this.resize(C+1),this.emplace(C,n,A,f,y)}emplace(n,A,f,y,C){const I=4*n;return this.float32[I+0]=A,this.float32[I+1]=f,this.float32[I+2]=y,this.float32[I+3]=C,n}}Rt.prototype.bytesPerElement=16,kr("StructArrayLayout4f16",Rt);class kt extends mA{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new Le(this.anchorPointX,this.anchorPointY)}}kt.prototype.size=20;class Xt extends q{get(n){return new kt(this,n)}}kr("CollisionBoxArray",Xt);class Zt extends mA{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(n){this._structArray.uint8[this._pos1+37]=n}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(n){this._structArray.uint8[this._pos1+38]=n}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(n){this._structArray.uint32[this._pos4+10]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Zt.prototype.size=48;class ur extends He{get(n){return new Zt(this,n)}}kr("PlacedSymbolArray",ur);class qt extends mA{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(n){this._structArray.uint32[this._pos4+12]=n}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get textOffset0(){return this._structArray.float32[this._pos4+14]}get textOffset1(){return this._structArray.float32[this._pos4+15]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+16]}}qt.prototype.size=68;class Rr extends Me{get(n){return new qt(this,n)}}kr("SymbolInstanceArray",Rr);class Tr extends Re{getoffsetX(n){return this.float32[1*n+0]}}kr("GlyphOffsetArray",Tr);class qr extends ct{getx(n){return this.int16[3*n+0]}gety(n){return this.int16[3*n+1]}gettileUnitDistanceFromAnchor(n){return this.int16[3*n+2]}}kr("SymbolLineVertexArray",qr);class kn extends mA{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}kn.prototype.size=8;class jn extends wt{get(n){return new kn(this,n)}}kr("FeatureIndexArray",jn);class b extends ha{}class L extends ha{}class j extends ha{}class W extends i{}class ae extends u{}class de extends m{}class me extends v{}class be extends S{}class Se extends M{}class De extends H{}class ft extends J{}class Tt extends pe{}class Ft extends we{}class pt extends It{}const Ar=ds([{name:"a_pos",components:2,type:"Int16"}],4),{members:Vt}=Ar;class Je{constructor(n=[]){this.segments=n}prepareSegment(n,A,f,y){let C=this.segments[this.segments.length-1];return n>Je.MAX_VERTEX_ARRAY_LENGTH&&Z(`Max vertices per segment is ${Je.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!C||C.vertexLength+n>Je.MAX_VERTEX_ARRAY_LENGTH||C.sortKey!==y)&&(C={vertexOffset:A.length,primitiveOffset:f.length,vertexLength:0,primitiveLength:0},y!==void 0&&(C.sortKey=y),this.segments.push(C)),C}get(){return this.segments}destroy(){for(const n of this.segments)for(const A in n.vaos)n.vaos[A].destroy()}static simpleSegment(n,A,f,y){return new Je([{vertexOffset:n,primitiveOffset:A,vertexLength:f,primitiveLength:y,vaos:{},sortKey:0}])}}function ot(o,n){return 256*(o=w(Math.floor(o),0,255))+w(Math.floor(n),0,255)}Je.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,kr("SegmentVector",Je);const Yt=ds([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var ir={exports:{}},Wt={exports:{}};Wt.exports=function(o,n){var A,f,y,C,I,D,z,X;for(f=o.length-(A=3&o.length),y=n,I=3432918353,D=461845907,X=0;X<f;)z=255&o.charCodeAt(X)|(255&o.charCodeAt(++X))<<8|(255&o.charCodeAt(++X))<<16|(255&o.charCodeAt(++X))<<24,++X,y=27492+(65535&(C=5*(65535&(y=(y^=z=(65535&(z=(z=(65535&z)*I+(((z>>>16)*I&65535)<<16)&4294967295)<<15|z>>>17))*D+(((z>>>16)*D&65535)<<16)&4294967295)<<13|y>>>19))+((5*(y>>>16)&65535)<<16)&4294967295))+((58964+(C>>>16)&65535)<<16);switch(z=0,A){case 3:z^=(255&o.charCodeAt(X+2))<<16;case 2:z^=(255&o.charCodeAt(X+1))<<8;case 1:y^=z=(65535&(z=(z=(65535&(z^=255&o.charCodeAt(X)))*I+(((z>>>16)*I&65535)<<16)&4294967295)<<15|z>>>17))*D+(((z>>>16)*D&65535)<<16)&4294967295}return y^=o.length,y=2246822507*(65535&(y^=y>>>16))+((2246822507*(y>>>16)&65535)<<16)&4294967295,y=3266489909*(65535&(y^=y>>>13))+((3266489909*(y>>>16)&65535)<<16)&4294967295,(y^=y>>>16)>>>0};var Dr={exports:{}};Dr.exports=function(o,n){for(var A,f=o.length,y=n^f,C=0;f>=4;)A=1540483477*(65535&(A=255&o.charCodeAt(C)|(255&o.charCodeAt(++C))<<8|(255&o.charCodeAt(++C))<<16|(255&o.charCodeAt(++C))<<24))+((1540483477*(A>>>16)&65535)<<16),y=1540483477*(65535&y)+((1540483477*(y>>>16)&65535)<<16)^(A=1540483477*(65535&(A^=A>>>24))+((1540483477*(A>>>16)&65535)<<16)),f-=4,++C;switch(f){case 3:y^=(255&o.charCodeAt(C+2))<<16;case 2:y^=(255&o.charCodeAt(C+1))<<8;case 1:y=1540483477*(65535&(y^=255&o.charCodeAt(C)))+((1540483477*(y>>>16)&65535)<<16)}return y=1540483477*(65535&(y^=y>>>13))+((1540483477*(y>>>16)&65535)<<16),(y^=y>>>15)>>>0};var Lr=Wt.exports,Fn=Dr.exports;ir.exports=Lr,ir.exports.murmur3=Lr,ir.exports.murmur2=Fn;class Nr{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,A,f,y){this.ids.push(fi(n)),this.positions.push(A,f,y)}getPositions(n){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const A=fi(n);let f=0,y=this.ids.length-1;for(;f<y;){const I=f+y>>1;this.ids[I]>=A?y=I:f=I+1}const C=[];for(;this.ids[f]===A;)C.push({index:this.positions[3*f],start:this.positions[3*f+1],end:this.positions[3*f+2]}),f++;return C}static serialize(n,A){const f=new Float64Array(n.ids),y=new Uint32Array(n.positions);return di(f,y,0,f.length-1),A&&A.push(f.buffer,y.buffer),{ids:f,positions:y}}static deserialize(n){const A=new Nr;return A.ids=n.ids,A.positions=n.positions,A.indexed=!0,A}}function fi(o){const n=+o;return!isNaN(n)&&n<=Number.MAX_SAFE_INTEGER?n:ir.exports(String(o))}function di(o,n,A,f){for(;A<f;){const y=o[A+f>>1];let C=A-1,I=f+1;for(;;){do C++;while(o[C]<y);do I--;while(o[I]>y);if(C>=I)break;hr(o,C,I),hr(n,3*C,3*I),hr(n,3*C+1,3*I+1),hr(n,3*C+2,3*I+2)}I-A<f-I?(di(o,n,A,I),A=I+1):(di(o,n,I+1,f),f=I)}}function hr(o,n,A){const f=o[n];o[n]=o[A],o[A]=f}kr("FeaturePositionMap",Nr);class Hn{constructor(n,A){this.gl=n.gl,this.location=A}}class li extends Hn{constructor(n,A){super(n,A),this.current=0}set(n){this.current!==n&&(this.current=n,this.gl.uniform1f(this.location,n))}}class ci extends Hn{constructor(n,A){super(n,A),this.current=[0,0,0,0]}set(n){n[0]===this.current[0]&&n[1]===this.current[1]&&n[2]===this.current[2]&&n[3]===this.current[3]||(this.current=n,this.gl.uniform4f(this.location,n[0],n[1],n[2],n[3]))}}class Un extends Hn{constructor(n,A){super(n,A),this.current=Te.transparent}set(n){n.r===this.current.r&&n.g===this.current.g&&n.b===this.current.b&&n.a===this.current.a||(this.current=n,this.gl.uniform4f(this.location,n.r,n.g,n.b,n.a))}}const Is=new Float32Array(16);function Js(o){return[ot(255*o.r,255*o.g),ot(255*o.b,255*o.a)]}class Qi{constructor(n,A,f){this.value=n,this.uniformNames=A.map(y=>`u_${y}`),this.type=f}setUniform(n,A,f){n.set(f.constantOr(this.value))}getBinding(n,A,f){return this.type==="color"?new Un(n,A):new li(n,A)}}class ps{constructor(n,A){this.uniformNames=A.map(f=>`u_${f}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(n,A){this.pixelRatioFrom=A.pixelRatio,this.pixelRatioTo=n.pixelRatio,this.patternFrom=A.tlbr,this.patternTo=n.tlbr}setUniform(n,A,f,y){const C=y==="u_pattern_to"?this.patternTo:y==="u_pattern_from"?this.patternFrom:y==="u_pixel_ratio_to"?this.pixelRatioTo:y==="u_pixel_ratio_from"?this.pixelRatioFrom:null;C&&n.set(C)}getBinding(n,A,f){return f.substr(0,9)==="u_pattern"?new ci(n,A):new li(n,A)}}class ti{constructor(n,A,f,y){this.expression=n,this.type=f,this.maxValue=0,this.paintVertexAttributes=A.map(C=>({name:`a_${C}`,type:"Float32",components:f==="color"?2:1,offset:0})),this.paintVertexArray=new y}populatePaintArray(n,A,f,y,C){const I=this.paintVertexArray.length,D=this.expression.evaluate(new Ui(0),A,{},y,[],C);this.paintVertexArray.resize(n),this._setPaintValue(I,n,D)}updatePaintArray(n,A,f,y){const C=this.expression.evaluate({zoom:0},f,y);this._setPaintValue(n,A,C)}_setPaintValue(n,A,f){if(this.type==="color"){const y=Js(f);for(let C=n;C<A;C++)this.paintVertexArray.emplace(C,y[0],y[1])}else{for(let y=n;y<A;y++)this.paintVertexArray.emplace(y,f);this.maxValue=Math.max(this.maxValue,Math.abs(f))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class As{constructor(n,A,f,y,C,I){this.expression=n,this.uniformNames=A.map(D=>`u_${D}_t`),this.type=f,this.useIntegerZoom=y,this.zoom=C,this.maxValue=0,this.paintVertexAttributes=A.map(D=>({name:`a_${D}`,type:"Float32",components:f==="color"?4:2,offset:0})),this.paintVertexArray=new I}populatePaintArray(n,A,f,y,C){const I=this.expression.evaluate(new Ui(this.zoom),A,{},y,[],C),D=this.expression.evaluate(new Ui(this.zoom+1),A,{},y,[],C),z=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(z,n,I,D)}updatePaintArray(n,A,f,y){const C=this.expression.evaluate({zoom:this.zoom},f,y),I=this.expression.evaluate({zoom:this.zoom+1},f,y);this._setPaintValue(n,A,C,I)}_setPaintValue(n,A,f,y){if(this.type==="color"){const C=Js(f),I=Js(y);for(let D=n;D<A;D++)this.paintVertexArray.emplace(D,C[0],C[1],I[0],I[1])}else{for(let C=n;C<A;C++)this.paintVertexArray.emplace(C,f,y);this.maxValue=Math.max(this.maxValue,Math.abs(f),Math.abs(y))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,A){const f=this.useIntegerZoom?Math.floor(A.zoom):A.zoom,y=w(this.expression.interpolationFactor(f,this.zoom,this.zoom+1),0,1);n.set(y)}getBinding(n,A,f){return new li(n,A)}}class Ts{constructor(n,A,f,y,C,I){this.expression=n,this.type=A,this.useIntegerZoom=f,this.zoom=y,this.layerId=I,this.zoomInPaintVertexArray=new C,this.zoomOutPaintVertexArray=new C}populatePaintArray(n,A,f){const y=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(n),this.zoomOutPaintVertexArray.resize(n),this._setPaintValues(y,n,A.patterns&&A.patterns[this.layerId],f)}updatePaintArray(n,A,f,y,C){this._setPaintValues(n,A,f.patterns&&f.patterns[this.layerId],C)}_setPaintValues(n,A,f,y){if(!y||!f)return;const{min:C,mid:I,max:D}=f,z=y[C],X=y[I],ie=y[D];if(z&&X&&ie)for(let ce=n;ce<A;ce++)this.zoomInPaintVertexArray.emplace(ce,X.tl[0],X.tl[1],X.br[0],X.br[1],z.tl[0],z.tl[1],z.br[0],z.br[1],X.pixelRatio,z.pixelRatio),this.zoomOutPaintVertexArray.emplace(ce,X.tl[0],X.tl[1],X.br[0],X.br[1],ie.tl[0],ie.tl[1],ie.br[0],ie.br[1],X.pixelRatio,ie.pixelRatio)}upload(n){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=n.createVertexBuffer(this.zoomInPaintVertexArray,Yt.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=n.createVertexBuffer(this.zoomOutPaintVertexArray,Yt.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Vi{constructor(n,A,f){this.binders={},this._buffers=[];const y=[];for(const C in n.paint._values){if(!f(C))continue;const I=n.paint.get(C);if(!(I instanceof Bo&&xi(I.property.specification)))continue;const D=Ys(C,n.type),z=I.value,X=I.property.specification.type,ie=I.property.useIntegerZoom,ce=I.property.specification["property-type"],ye=ce==="cross-faded"||ce==="cross-faded-data-driven";if(z.kind==="constant")this.binders[C]=ye?new ps(z.value,D):new Qi(z.value,D,X),y.push(`/u_${C}`);else if(z.kind==="source"||ye){const Be=co(C,X,"source");this.binders[C]=ye?new Ts(z,X,ie,A,Be,n.id):new ti(z,D,X,Be),y.push(`/a_${C}`)}else{const Be=co(C,X,"composite");this.binders[C]=new As(z,D,X,ie,A,Be),y.push(`/z_${C}`)}}this.cacheKey=y.sort().join("")}getMaxValue(n){const A=this.binders[n];return A instanceof ti||A instanceof As?A.maxValue:0}populatePaintArrays(n,A,f,y,C){for(const I in this.binders){const D=this.binders[I];(D instanceof ti||D instanceof As||D instanceof Ts)&&D.populatePaintArray(n,A,f,y,C)}}setConstantPatternPositions(n,A){for(const f in this.binders){const y=this.binders[f];y instanceof ps&&y.setConstantPatternPositions(n,A)}}updatePaintArrays(n,A,f,y,C){let I=!1;for(const D in n){const z=A.getPositions(D);for(const X of z){const ie=f.feature(X.index);for(const ce in this.binders){const ye=this.binders[ce];if((ye instanceof ti||ye instanceof As||ye instanceof Ts)&&ye.expression.isStateDependent===!0){const Be=y.paint.get(ce);ye.expression=Be.value,ye.updatePaintArray(X.start,X.end,ie,n[D],C),I=!0}}}}return I}defines(){const n=[];for(const A in this.binders){const f=this.binders[A];(f instanceof Qi||f instanceof ps)&&n.push(...f.uniformNames.map(y=>`#define HAS_UNIFORM_${y}`))}return n}getBinderAttributes(){const n=[];for(const A in this.binders){const f=this.binders[A];if(f instanceof ti||f instanceof As)for(let y=0;y<f.paintVertexAttributes.length;y++)n.push(f.paintVertexAttributes[y].name);else if(f instanceof Ts)for(let y=0;y<Yt.members.length;y++)n.push(Yt.members[y].name)}return n}getBinderUniforms(){const n=[];for(const A in this.binders){const f=this.binders[A];if(f instanceof Qi||f instanceof ps||f instanceof As)for(const y of f.uniformNames)n.push(y)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n,A){const f=[];for(const y in this.binders){const C=this.binders[y];if(C instanceof Qi||C instanceof ps||C instanceof As){for(const I of C.uniformNames)if(A[I]){const D=C.getBinding(n,A[I],I);f.push({name:I,property:y,binding:D})}}}return f}setUniforms(n,A,f,y){for(const{name:C,property:I,binding:D}of A)this.binders[I].setUniform(D,y,f.get(I),C)}updatePaintBuffers(n){this._buffers=[];for(const A in this.binders){const f=this.binders[A];if(n&&f instanceof Ts){const y=n.fromScale===2?f.zoomInPaintVertexBuffer:f.zoomOutPaintVertexBuffer;y&&this._buffers.push(y)}else(f instanceof ti||f instanceof As)&&f.paintVertexBuffer&&this._buffers.push(f.paintVertexBuffer)}}upload(n){for(const A in this.binders){const f=this.binders[A];(f instanceof ti||f instanceof As||f instanceof Ts)&&f.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const A=this.binders[n];(A instanceof ti||A instanceof As||A instanceof Ts)&&A.destroy()}}}class Ki{constructor(n,A,f=()=>!0){this.programConfigurations={};for(const y of n)this.programConfigurations[y.id]=new Vi(y,A,f);this.needsUpload=!1,this._featureMap=new Nr,this._bufferOffset=0}populatePaintArrays(n,A,f,y,C,I){for(const D in this.programConfigurations)this.programConfigurations[D].populatePaintArrays(n,A,y,C,I);A.id!==void 0&&this._featureMap.add(A.id,f,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,A,f,y){for(const C of f)this.needsUpload=this.programConfigurations[C.id].updatePaintArrays(n,this._featureMap,A,C,y)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const A in this.programConfigurations)this.programConfigurations[A].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}function Ys(o,n){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[o]||[o.replace(`${n}-`,"").replace(/-/g,"_")]}function co(o,n,A){const f={color:{source:m,composite:Rt},number:{source:Re,composite:m}},y=function(C){return{"line-pattern":{source:me,composite:me},"fill-pattern":{source:me,composite:me},"fill-extrusion-pattern":{source:me,composite:me}}[C]}(o);return y&&y[A]||f[n][A]}kr("ConstantBinder",Qi),kr("CrossFadedConstantBinder",ps),kr("SourceExpressionBinder",ti),kr("CrossFadedCompositeBinder",Ts),kr("CompositeExpressionBinder",As),kr("ProgramConfiguration",Vi,{omit:["_buffers"]}),kr("ProgramConfigurationSet",Ki);var Ci=8192;const Us=Math.pow(2,14)-1,Eo=-Us-1;function uo(o){const n=Ci/o.extent,A=o.loadGeometry();for(let f=0;f<A.length;f++){const y=A[f];for(let C=0;C<y.length;C++){const I=y[C],D=Math.round(I.x*n),z=Math.round(I.y*n);I.x=w(D,Eo,Us),I.y=w(z,Eo,Us),(D<I.x||D>I.x+1||z<I.y||z>I.y+1)&&Z("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return A}function Fo(o,n){return{type:o.type,id:o.id,properties:o.properties,geometry:n?uo(o):[]}}function Ho(o,n,A,f,y){o.emplaceBack(2*n+(f+1)/2,2*A+(y+1)/2)}class Yi{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(A=>A.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new L,this.indexArray=new Ft,this.segments=new Je,this.programConfigurations=new Ki(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(A=>A.isStateDependent()).map(A=>A.id)}populate(n,A,f){const y=this.layers[0],C=[];let I=null,D=!1;y.type==="circle"&&(I=y.layout.get("circle-sort-key"),D=!I.isConstant());for(const{feature:z,id:X,index:ie,sourceLayerIndex:ce}of n){const ye=this.layers[0]._featureFilter.needGeometry,Be=Fo(z,ye);if(!this.layers[0]._featureFilter.filter(new Ui(this.zoom),Be,f))continue;const Ee=D?I.evaluate(Be,{},f):void 0,$e={id:X,properties:z.properties,type:z.type,sourceLayerIndex:ce,index:ie,geometry:ye?Be.geometry:uo(z),patterns:{},sortKey:Ee};C.push($e)}D&&C.sort((z,X)=>z.sortKey-X.sortKey);for(const z of C){const{geometry:X,index:ie,sourceLayerIndex:ce}=z,ye=n[ie].feature;this.addFeature(z,X,ie,f),A.featureIndex.insert(ye,X,ie,ce,this.index)}}update(n,A,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,A,this.stateDependentLayers,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Vt),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,A,f,y){for(const C of A)for(const I of C){const D=I.x,z=I.y;if(D<0||D>=Ci||z<0||z>=Ci)continue;const X=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),ie=X.vertexLength;Ho(this.layoutVertexArray,D,z,-1,-1),Ho(this.layoutVertexArray,D,z,1,-1),Ho(this.layoutVertexArray,D,z,1,1),Ho(this.layoutVertexArray,D,z,-1,1),this.indexArray.emplaceBack(ie,ie+1,ie+2),this.indexArray.emplaceBack(ie,ie+3,ie+2),X.vertexLength+=4,X.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,f,{},y)}}function Kc(o,n){for(let A=0;A<o.length;A++)if(bl(n,o[A]))return!0;for(let A=0;A<n.length;A++)if(bl(o,n[A]))return!0;return!!rl(o,n)}function lh(o,n,A){return!!bl(o,n)||!!ho(n,o,A)}function Cu(o,n){if(o.length===1)return nl(n,o[0]);for(let A=0;A<n.length;A++){const f=n[A];for(let y=0;y<f.length;y++)if(bl(o,f[y]))return!0}for(let A=0;A<o.length;A++)if(nl(n,o[A]))return!0;for(let A=0;A<n.length;A++)if(rl(o,n[A]))return!0;return!1}function Gc(o,n,A){if(o.length>1){if(rl(o,n))return!0;for(let f=0;f<n.length;f++)if(ho(n[f],o,A))return!0}for(let f=0;f<o.length;f++)if(ho(o[f],n,A))return!0;return!1}function rl(o,n){if(o.length===0||n.length===0)return!1;for(let A=0;A<o.length-1;A++){const f=o[A],y=o[A+1];for(let C=0;C<n.length-1;C++)if(qc(f,y,n[C],n[C+1]))return!0}return!1}function qc(o,n,A,f){return $(o,A,f)!==$(n,A,f)&&$(o,n,A)!==$(o,n,f)}function ho(o,n,A){const f=A*A;if(n.length===1)return o.distSqr(n[0])<f;for(let y=1;y<n.length;y++)if(wl(o,n[y-1],n[y])<f)return!0;return!1}function wl(o,n,A){const f=n.distSqr(A);if(f===0)return o.distSqr(n);const y=((o.x-n.x)*(A.x-n.x)+(o.y-n.y)*(A.y-n.y))/f;return o.distSqr(y<0?n:y>1?A:A.sub(n)._mult(y)._add(n))}function nl(o,n){let A,f,y,C=!1;for(let I=0;I<o.length;I++){A=o[I];for(let D=0,z=A.length-1;D<A.length;z=D++)f=A[D],y=A[z],f.y>n.y!=y.y>n.y&&n.x<(y.x-f.x)*(n.y-f.y)/(y.y-f.y)+f.x&&(C=!C)}return C}function bl(o,n){let A=!1;for(let f=0,y=o.length-1;f<o.length;y=f++){const C=o[f],I=o[y];C.y>n.y!=I.y>n.y&&n.x<(I.x-C.x)*(n.y-C.y)/(I.y-C.y)+C.x&&(A=!A)}return A}function xl(o,n,A){const f=A[0],y=A[2];if(o.x<f.x&&n.x<f.x||o.x>y.x&&n.x>y.x||o.y<f.y&&n.y<f.y||o.y>y.y&&n.y>y.y)return!1;const C=$(o,n,A[0]);return C!==$(o,n,A[1])||C!==$(o,n,A[2])||C!==$(o,n,A[3])}function Jl(o,n,A){const f=n.paint.get(o).value;return f.kind==="constant"?f.value:A.programConfigurations.get(n.id).getMaxValue(o)}function NA(o){return Math.sqrt(o[0]*o[0]+o[1]*o[1])}function il(o,n,A,f,y){if(!n[0]&&!n[1])return o;const C=Le.convert(n)._mult(y);A==="viewport"&&C._rotate(-f);const I=[];for(let D=0;D<o.length;D++)I.push(o[D].sub(C));return I}kr("CircleBucket",Yi,{omit:["layers"]});const Bc=new os({"circle-sort-key":new vn(vt.layout_circle["circle-sort-key"])});var Yl={paint:new os({"circle-radius":new vn(vt.paint_circle["circle-radius"]),"circle-color":new vn(vt.paint_circle["circle-color"]),"circle-blur":new vn(vt.paint_circle["circle-blur"]),"circle-opacity":new vn(vt.paint_circle["circle-opacity"]),"circle-translate":new sn(vt.paint_circle["circle-translate"]),"circle-translate-anchor":new sn(vt.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new sn(vt.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new sn(vt.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new vn(vt.paint_circle["circle-stroke-width"]),"circle-stroke-color":new vn(vt.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new vn(vt.paint_circle["circle-stroke-opacity"])}),layout:Bc},fa=1e-6,$s=typeof Float32Array<"u"?Float32Array:Array;function $l(){var o=new $s(9);return $s!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[5]=0,o[6]=0,o[7]=0),o[0]=1,o[4]=1,o[8]=1,o}function So(o){return o[0]=1,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=1,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=1,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o}function Eu(o,n,A){var f=n[0],y=n[1],C=n[2],I=n[3],D=n[4],z=n[5],X=n[6],ie=n[7],ce=n[8],ye=n[9],Be=n[10],Ee=n[11],$e=n[12],Ze=n[13],Et=n[14],Kt=n[15],xt=A[0],Dt=A[1],or=A[2],ar=A[3];return o[0]=xt*f+Dt*D+or*ce+ar*$e,o[1]=xt*y+Dt*z+or*ye+ar*Ze,o[2]=xt*C+Dt*X+or*Be+ar*Et,o[3]=xt*I+Dt*ie+or*Ee+ar*Kt,o[4]=(xt=A[4])*f+(Dt=A[5])*D+(or=A[6])*ce+(ar=A[7])*$e,o[5]=xt*y+Dt*z+or*ye+ar*Ze,o[6]=xt*C+Dt*X+or*Be+ar*Et,o[7]=xt*I+Dt*ie+or*Ee+ar*Kt,o[8]=(xt=A[8])*f+(Dt=A[9])*D+(or=A[10])*ce+(ar=A[11])*$e,o[9]=xt*y+Dt*z+or*ye+ar*Ze,o[10]=xt*C+Dt*X+or*Be+ar*Et,o[11]=xt*I+Dt*ie+or*Ee+ar*Kt,o[12]=(xt=A[12])*f+(Dt=A[13])*D+(or=A[14])*ce+(ar=A[15])*$e,o[13]=xt*y+Dt*z+or*ye+ar*Ze,o[14]=xt*C+Dt*X+or*Be+ar*Et,o[15]=xt*I+Dt*ie+or*Ee+ar*Kt,o}Math.hypot||(Math.hypot=function(){for(var o=0,n=arguments.length;n--;)o+=arguments[n]*arguments[n];return Math.sqrt(o)});var ec,ch=Eu;function Wc(){var o=new $s(3);return $s!=Float32Array&&(o[0]=0,o[1]=0,o[2]=0),o}function Bl(o,n,A){var f=new $s(3);return f[0]=o,f[1]=n,f[2]=A,f}function Cc(o,n,A){var f=n[0],y=n[1],C=n[2],I=n[3];return o[0]=A[0]*f+A[4]*y+A[8]*C+A[12]*I,o[1]=A[1]*f+A[5]*y+A[9]*C+A[13]*I,o[2]=A[2]*f+A[6]*y+A[10]*C+A[14]*I,o[3]=A[3]*f+A[7]*y+A[11]*C+A[15]*I,o}function Fu(){var o=new $s(4);return $s!=Float32Array&&(o[0]=0,o[1]=0,o[2]=0),o[3]=1,o}function Ec(o,n){const A=Cc([],[o.x,o.y,0,1],n);return new Le(A[0]/A[3],A[1]/A[3])}Wc(),ec=new $s(4),$s!=Float32Array&&(ec[0]=0,ec[1]=0,ec[2]=0,ec[3]=0),Wc(),Bl(1,0,0),Bl(0,1,0),Fu(),Fu(),$l(),function(){var o;o=new $s(2),$s!=Float32Array&&(o[0]=0,o[1]=0)}();class Ia extends Yi{}kr("HeatmapBucket",Ia,{omit:["layers"]});var Cl={paint:new os({"heatmap-radius":new vn(vt.paint_heatmap["heatmap-radius"]),"heatmap-weight":new vn(vt.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new sn(vt.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Sa(vt.paint_heatmap["heatmap-color"]),"heatmap-opacity":new sn(vt.paint_heatmap["heatmap-opacity"])})};function Xc(o,{width:n,height:A},f,y){if(y){if(y instanceof Uint8ClampedArray)y=new Uint8Array(y.buffer);else if(y.length!==n*A*f)throw new RangeError(`mismatched image size. expected: ${y.length} but got: ${n*A*f}`)}else y=new Uint8Array(n*A*f);return o.width=n,o.height=A,o.data=y,o}function uh(o,{width:n,height:A},f){if(n===o.width&&A===o.height)return;const y=Xc({},{width:n,height:A},f);tc(o,y,{x:0,y:0},{x:0,y:0},{width:Math.min(o.width,n),height:Math.min(o.height,A)},f),o.width=n,o.height=A,o.data=y.data}function tc(o,n,A,f,y,C){if(y.width===0||y.height===0)return n;if(y.width>o.width||y.height>o.height||A.x>o.width-y.width||A.y>o.height-y.height)throw new RangeError("out of range source coordinates for image copy");if(y.width>n.width||y.height>n.height||f.x>n.width-y.width||f.y>n.height-y.height)throw new RangeError("out of range destination coordinates for image copy");const I=o.data,D=n.data;if(I===D)throw new Error("srcData equals dstData, so image is already copied");for(let z=0;z<y.height;z++){const X=((A.y+z)*o.width+A.x)*C,ie=((f.y+z)*n.width+f.x)*C;for(let ce=0;ce<y.width*C;ce++)D[ie+ce]=I[X+ce]}return n}class rc{constructor(n,A){Xc(this,n,1,A)}resize(n){uh(this,n,1)}clone(){return new rc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,A,f,y,C){tc(n,A,f,y,C,1)}}class Ta{constructor(n,A){Xc(this,n,4,A)}resize(n){uh(this,n,4)}replace(n,A){A?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new Ta({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,A,f,y,C){tc(n,A,f,y,C,4)}}function jA(o){const n={},A=o.resolution||256,f=o.clips?o.clips.length:1,y=o.image||new Ta({width:A,height:f});if(Math.log(A)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${A}`);const C=(I,D,z)=>{n[o.evaluationKey]=z;const X=o.expression.evaluate(n);y.data[I+D+0]=Math.floor(255*X.r/X.a),y.data[I+D+1]=Math.floor(255*X.g/X.a),y.data[I+D+2]=Math.floor(255*X.b/X.a),y.data[I+D+3]=Math.floor(255*X.a)};if(o.clips)for(let I=0,D=0;I<f;++I,D+=4*A)for(let z=0,X=0;z<A;z++,X+=4){const ie=z/(A-1),{start:ce,end:ye}=o.clips[I];C(D,X,ce*(1-ie)+ye*ie)}else for(let I=0,D=0;I<A;I++,D+=4)C(0,D,I/(A-1));return y}kr("AlphaImage",rc),kr("RGBAImage",Ta);var hh={paint:new os({"hillshade-illumination-direction":new sn(vt.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new sn(vt.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new sn(vt.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new sn(vt.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new sn(vt.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new sn(vt.paint_hillshade["hillshade-accent-color"])})};const fh=ds([{name:"a_pos",components:2,type:"Int16"}],4),{members:ef}=fh;var nc={exports:{}};function RA(o,n,A){A=A||2;var f,y,C,I,D,z,X,ie=n&&n.length,ce=ie?n[0]*A:o.length,ye=Zc(o,0,ce,A,!0),Be=[];if(!ye||ye.next===ye.prev)return Be;if(ie&&(ye=function($e,Ze,Et,Kt){var xt,Dt,or,ar=[];for(xt=0,Dt=Ze.length;xt<Dt;xt++)(or=Zc($e,Ze[xt]*Kt,xt<Dt-1?Ze[xt+1]*Kt:$e.length,Kt,!1))===or.next&&(or.steiner=!0),ar.push(Yc(or));for(ar.sort(sc),xt=0;xt<ar.length;xt++)Et=zA(ar[xt],Et);return Et}(o,n,ye,A)),o.length>80*A){f=C=o[0],y=I=o[1];for(var Ee=A;Ee<ce;Ee+=A)(D=o[Ee])<f&&(f=D),(z=o[Ee+1])<y&&(y=z),D>C&&(C=D),z>I&&(I=z);X=(X=Math.max(C-f,I-y))!==0?32767/X:0}return _s(ye,Be,A,f,y,X,0),Be}function Zc(o,n,A,f,y){var C,I;if(y===nf(o,n,A,f)>0)for(C=n;C<A;C+=f)I=hd(C,o[C],o[C+1],I);else for(C=A-f;C>=n;C-=f)I=hd(C,o[C],o[C+1],I);return I&&ac(I,I.next)&&(Tu(I),I=I.next),I}function OA(o,n){if(!o)return o;n||(n=o);var A,f=o;do if(A=!1,f.steiner||!ac(f,f.next)&&ls(f.prev,f,f.next)!==0)f=f.next;else{if(Tu(f),(f=n=f.prev)===f.next)break;A=!0}while(A||f!==n);return n}function _s(o,n,A,f,y,C,I){if(o){!I&&C&&function(ie,ce,ye,Be){var Ee=ie;do Ee.z===0&&(Ee.z=gA(Ee.x,Ee.y,ce,ye,Be)),Ee.prevZ=Ee.prev,Ee.nextZ=Ee.next,Ee=Ee.next;while(Ee!==ie);Ee.prevZ.nextZ=null,Ee.prevZ=null,function($e){var Ze,Et,Kt,xt,Dt,or,ar,Yr,on=1;do{for(Et=$e,$e=null,Dt=null,or=0;Et;){for(or++,Kt=Et,ar=0,Ze=0;Ze<on&&(ar++,Kt=Kt.nextZ);Ze++);for(Yr=on;ar>0||Yr>0&&Kt;)ar!==0&&(Yr===0||!Kt||Et.z<=Kt.z)?(xt=Et,Et=Et.nextZ,ar--):(xt=Kt,Kt=Kt.nextZ,Yr--),Dt?Dt.nextZ=xt:$e=xt,xt.prevZ=Dt,Dt=xt;Et=Kt}Dt.nextZ=null,on*=2}while(or>1)}(Ee)}(o,f,y,C);for(var D,z,X=o;o.prev!==o.next;)if(D=o.prev,z=o.next,C?tf(o,f,y,C):ic(o))n.push(D.i/A|0),n.push(o.i/A|0),n.push(z.i/A|0),Tu(o),o=z.next,X=z.next;else if((o=z)===X){I?I===1?_s(o=Fc(OA(o),n,A),n,A,f,y,C,2):I===2&&Jc(o,n,A,f,y,C):_s(OA(o),n,A,f,y,C,1);break}}}function ic(o){var n=o.prev,A=o,f=o.next;if(ls(n,A,f)>=0)return!1;for(var y=n.x,C=A.x,I=f.x,D=n.y,z=A.y,X=f.y,ie=y<C?y<I?y:I:C<I?C:I,ce=D<z?D<X?D:X:z<X?z:X,ye=y>C?y>I?y:I:C>I?C:I,Be=D>z?D>X?D:X:z>X?z:X,Ee=f.next;Ee!==n;){if(Ee.x>=ie&&Ee.x<=ye&&Ee.y>=ce&&Ee.y<=Be&&al(y,D,C,z,I,X,Ee.x,Ee.y)&&ls(Ee.prev,Ee,Ee.next)>=0)return!1;Ee=Ee.next}return!0}function tf(o,n,A,f){var y=o.prev,C=o,I=o.next;if(ls(y,C,I)>=0)return!1;for(var D=y.x,z=C.x,X=I.x,ie=y.y,ce=C.y,ye=I.y,Be=D<z?D<X?D:X:z<X?z:X,Ee=ie<ce?ie<ye?ie:ye:ce<ye?ce:ye,$e=D>z?D>X?D:X:z>X?z:X,Ze=ie>ce?ie>ye?ie:ye:ce>ye?ce:ye,Et=gA(Be,Ee,n,A,f),Kt=gA($e,Ze,n,A,f),xt=o.prevZ,Dt=o.nextZ;xt&&xt.z>=Et&&Dt&&Dt.z<=Kt;){if(xt.x>=Be&&xt.x<=$e&&xt.y>=Ee&&xt.y<=Ze&&xt!==y&&xt!==I&&al(D,ie,z,ce,X,ye,xt.x,xt.y)&&ls(xt.prev,xt,xt.next)>=0||(xt=xt.prevZ,Dt.x>=Be&&Dt.x<=$e&&Dt.y>=Ee&&Dt.y<=Ze&&Dt!==y&&Dt!==I&&al(D,ie,z,ce,X,ye,Dt.x,Dt.y)&&ls(Dt.prev,Dt,Dt.next)>=0))return!1;Dt=Dt.nextZ}for(;xt&&xt.z>=Et;){if(xt.x>=Be&&xt.x<=$e&&xt.y>=Ee&&xt.y<=Ze&&xt!==y&&xt!==I&&al(D,ie,z,ce,X,ye,xt.x,xt.y)&&ls(xt.prev,xt,xt.next)>=0)return!1;xt=xt.prevZ}for(;Dt&&Dt.z<=Kt;){if(Dt.x>=Be&&Dt.x<=$e&&Dt.y>=Ee&&Dt.y<=Ze&&Dt!==y&&Dt!==I&&al(D,ie,z,ce,X,ye,Dt.x,Dt.y)&&ls(Dt.prev,Dt,Dt.next)>=0)return!1;Dt=Dt.nextZ}return!0}function Fc(o,n,A){var f=o;do{var y=f.prev,C=f.next.next;!ac(y,C)&&Sc(y,f,f.next,C)&&$c(y,C)&&$c(C,y)&&(n.push(y.i/A|0),n.push(f.i/A|0),n.push(C.i/A|0),Tu(f),Tu(f.next),f=o=C),f=f.next}while(f!==o);return OA(f)}function Jc(o,n,A,f,y,C){var I=o;do{for(var D=I.next.next;D!==I.prev;){if(I.i!==D.i&&dh(I,D)){var z=ph(I,D);return I=OA(I,I.next),z=OA(z,z.next),_s(I,n,A,f,y,C,0),void _s(z,n,A,f,y,C,0)}D=D.next}I=I.next}while(I!==o)}function sc(o,n){return o.x-n.x}function zA(o,n){var A=function(y,C){var I,D=C,z=y.x,X=y.y,ie=-1/0;do{if(X<=D.y&&X>=D.next.y&&D.next.y!==D.y){var ce=D.x+(X-D.y)*(D.next.x-D.x)/(D.next.y-D.y);if(ce<=z&&ce>ie&&(ie=ce,I=D.x<D.next.x?D:D.next,ce===z))return I}D=D.next}while(D!==C);if(!I)return null;var ye,Be=I,Ee=I.x,$e=I.y,Ze=1/0;D=I;do z>=D.x&&D.x>=Ee&&z!==D.x&&al(X<$e?z:ie,X,Ee,$e,X<$e?ie:z,X,D.x,D.y)&&(ye=Math.abs(X-D.y)/(z-D.x),$c(D,y)&&(ye<Ze||ye===Ze&&(D.x>I.x||D.x===I.x&&sl(I,D)))&&(I=D,Ze=ye)),D=D.next;while(D!==Be);return I}(o,n);if(!A)return n;var f=ph(A,o);return OA(f,f.next),OA(A,A.next)}function sl(o,n){return ls(o.prev,o,n.prev)<0&&ls(n.next,o,o.next)<0}function gA(o,n,A,f,y){return(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-A)*y|0)|o<<8))|o<<4))|o<<2))|o<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-f)*y|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function Yc(o){var n=o,A=o;do(n.x<A.x||n.x===A.x&&n.y<A.y)&&(A=n),n=n.next;while(n!==o);return A}function al(o,n,A,f,y,C,I,D){return(y-I)*(n-D)>=(o-I)*(C-D)&&(o-I)*(f-D)>=(A-I)*(n-D)&&(A-I)*(C-D)>=(y-I)*(f-D)}function dh(o,n){return o.next.i!==n.i&&o.prev.i!==n.i&&!function(A,f){var y=A;do{if(y.i!==A.i&&y.next.i!==A.i&&y.i!==f.i&&y.next.i!==f.i&&Sc(y,y.next,A,f))return!0;y=y.next}while(y!==A);return!1}(o,n)&&($c(o,n)&&$c(n,o)&&function(A,f){var y=A,C=!1,I=(A.x+f.x)/2,D=(A.y+f.y)/2;do y.y>D!=y.next.y>D&&y.next.y!==y.y&&I<(y.next.x-y.x)*(D-y.y)/(y.next.y-y.y)+y.x&&(C=!C),y=y.next;while(y!==A);return C}(o,n)&&(ls(o.prev,o,n.prev)||ls(o,n.prev,n))||ac(o,n)&&ls(o.prev,o,o.next)>0&&ls(n.prev,n,n.next)>0)}function ls(o,n,A){return(n.y-o.y)*(A.x-n.x)-(n.x-o.x)*(A.y-n.y)}function ac(o,n){return o.x===n.x&&o.y===n.y}function Sc(o,n,A,f){var y=Iu(ls(o,n,A)),C=Iu(ls(o,n,f)),I=Iu(ls(A,f,o)),D=Iu(ls(A,f,n));return y!==C&&I!==D||!(y!==0||!Su(o,A,n))||!(C!==0||!Su(o,f,n))||!(I!==0||!Su(A,o,f))||!(D!==0||!Su(A,n,f))}function Su(o,n,A){return n.x<=Math.max(o.x,A.x)&&n.x>=Math.min(o.x,A.x)&&n.y<=Math.max(o.y,A.y)&&n.y>=Math.min(o.y,A.y)}function Iu(o){return o>0?1:o<0?-1:0}function $c(o,n){return ls(o.prev,o,o.next)<0?ls(o,n,o.next)>=0&&ls(o,o.prev,n)>=0:ls(o,n,o.prev)<0||ls(o,o.next,n)<0}function ph(o,n){var A=new rf(o.i,o.x,o.y),f=new rf(n.i,n.x,n.y),y=o.next,C=n.prev;return o.next=n,n.prev=o,A.next=y,y.prev=A,f.next=A,A.prev=f,C.next=f,f.prev=C,f}function hd(o,n,A,f){var y=new rf(o,n,A);return f?(y.next=f.next,y.prev=f,f.next.prev=y,f.next=y):(y.prev=y,y.next=y),y}function Tu(o){o.next.prev=o.prev,o.prev.next=o.next,o.prevZ&&(o.prevZ.nextZ=o.nextZ),o.nextZ&&(o.nextZ.prevZ=o.prevZ)}function rf(o,n,A){this.i=o,this.x=n,this.y=A,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function nf(o,n,A,f){for(var y=0,C=n,I=A-f;C<A;C+=f)y+=(o[I]-o[C])*(o[C+1]+o[I+1]),I=C;return y}function mh(o,n,A,f,y){Uu(o,n,A||0,f||o.length-1,y||fd)}function Uu(o,n,A,f,y){for(;f>A;){if(f-A>600){var C=f-A+1,I=n-A+1,D=Math.log(C),z=.5*Math.exp(2*D/3),X=.5*Math.sqrt(D*z*(C-z)/C)*(I-C/2<0?-1:1);Uu(o,n,Math.max(A,Math.floor(n-I*z/C+X)),Math.min(f,Math.floor(n+(C-I)*z/C+X)),y)}var ie=o[n],ce=A,ye=f;for(Lu(o,A,n),y(o[f],ie)>0&&Lu(o,A,f);ce<ye;){for(Lu(o,ce,ye),ce++,ye--;y(o[ce],ie)<0;)ce++;for(;y(o[ye],ie)>0;)ye--}y(o[A],ie)===0?Lu(o,A,ye):Lu(o,++ye,f),ye<=n&&(A=ye+1),n<=ye&&(f=ye-1)}}function Lu(o,n,A){var f=o[n];o[n]=o[A],o[A]=f}function fd(o,n){return o<n?-1:o>n?1:0}function Qu(o,n){const A=o.length;if(A<=1)return[o];const f=[];let y,C;for(let I=0;I<A;I++){const D=fe(o[I]);D!==0&&(o[I].area=Math.abs(D),C===void 0&&(C=D<0),C===D<0?(y&&f.push(y),y=[o[I]]):y.push(o[I]))}if(y&&f.push(y),n>1)for(let I=0;I<f.length;I++)f[I].length<=n||(mh(f[I],n,1,f[I].length-1,dd),f[I]=f[I].slice(0,n));return f}function dd(o,n){return n.area-o.area}function gh(o,n,A){const f=A.patternDependencies;let y=!1;for(const C of n){const I=C.paint.get(`${o}-pattern`);I.isConstant()||(y=!0);const D=I.constantOr(null);D&&(y=!0,f[D.to]=!0,f[D.from]=!0)}return y}function yh(o,n,A,f,y){const C=y.patternDependencies;for(const I of n){const D=I.paint.get(`${o}-pattern`).value;if(D.kind!=="constant"){let z=D.evaluate({zoom:f-1},A,{},y.availableImages),X=D.evaluate({zoom:f},A,{},y.availableImages),ie=D.evaluate({zoom:f+1},A,{},y.availableImages);z=z&&z.name?z.name:z,X=X&&X.name?X.name:X,ie=ie&&ie.name?ie.name:ie,C[z]=!0,C[X]=!0,C[ie]=!0,A.patterns[I.id]={min:z,mid:X,max:ie}}}return A}nc.exports=RA,nc.exports.default=RA,RA.deviation=function(o,n,A,f){var y=n&&n.length,C=Math.abs(nf(o,0,y?n[0]*A:o.length,A));if(y)for(var I=0,D=n.length;I<D;I++)C-=Math.abs(nf(o,n[I]*A,I<D-1?n[I+1]*A:o.length,A));var z=0;for(I=0;I<f.length;I+=3){var X=f[I]*A,ie=f[I+1]*A,ce=f[I+2]*A;z+=Math.abs((o[X]-o[ce])*(o[ie+1]-o[X+1])-(o[X]-o[ie])*(o[ce+1]-o[X+1]))}return C===0&&z===0?0:Math.abs((z-C)/C)},RA.flatten=function(o){for(var n=o[0][0].length,A={vertices:[],holes:[],dimensions:n},f=0,y=0;y<o.length;y++){for(var C=0;C<o[y].length;C++)for(var I=0;I<n;I++)A.vertices.push(o[y][C][I]);y>0&&A.holes.push(f+=o[y-1].length)}return A};class sf{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(A=>A.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new j,this.indexArray=new Ft,this.indexArray2=new pt,this.programConfigurations=new Ki(n.layers,n.zoom),this.segments=new Je,this.segments2=new Je,this.stateDependentLayerIds=this.layers.filter(A=>A.isStateDependent()).map(A=>A.id)}populate(n,A,f){this.hasPattern=gh("fill",this.layers,A);const y=this.layers[0].layout.get("fill-sort-key"),C=!y.isConstant(),I=[];for(const{feature:D,id:z,index:X,sourceLayerIndex:ie}of n){const ce=this.layers[0]._featureFilter.needGeometry,ye=Fo(D,ce);if(!this.layers[0]._featureFilter.filter(new Ui(this.zoom),ye,f))continue;const Be=C?y.evaluate(ye,{},f,A.availableImages):void 0,Ee={id:z,properties:D.properties,type:D.type,sourceLayerIndex:ie,index:X,geometry:ce?ye.geometry:uo(D),patterns:{},sortKey:Be};I.push(Ee)}C&&I.sort((D,z)=>D.sortKey-z.sortKey);for(const D of I){const{geometry:z,index:X,sourceLayerIndex:ie}=D;if(this.hasPattern){const ce=yh("fill",this.layers,D,this.zoom,A);this.patternFeatures.push(ce)}else this.addFeature(D,z,X,f,{});A.featureIndex.insert(n[X].feature,z,X,ie,this.index)}}update(n,A,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,A,this.stateDependentLayers,f)}addFeatures(n,A,f){for(const y of this.patternFeatures)this.addFeature(y,y.geometry,y.index,A,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,ef),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,A,f,y,C){for(const I of Qu(A,500)){let D=0;for(const Be of I)D+=Be.length;const z=this.segments.prepareSegment(D,this.layoutVertexArray,this.indexArray),X=z.vertexLength,ie=[],ce=[];for(const Be of I){if(Be.length===0)continue;Be!==I[0]&&ce.push(ie.length/2);const Ee=this.segments2.prepareSegment(Be.length,this.layoutVertexArray,this.indexArray2),$e=Ee.vertexLength;this.layoutVertexArray.emplaceBack(Be[0].x,Be[0].y),this.indexArray2.emplaceBack($e+Be.length-1,$e),ie.push(Be[0].x),ie.push(Be[0].y);for(let Ze=1;Ze<Be.length;Ze++)this.layoutVertexArray.emplaceBack(Be[Ze].x,Be[Ze].y),this.indexArray2.emplaceBack($e+Ze-1,$e+Ze),ie.push(Be[Ze].x),ie.push(Be[Ze].y);Ee.vertexLength+=Be.length,Ee.primitiveLength+=Be.length}const ye=nc.exports(ie,ce);for(let Be=0;Be<ye.length;Be+=3)this.indexArray.emplaceBack(X+ye[Be],X+ye[Be+1],X+ye[Be+2]);z.vertexLength+=D,z.primitiveLength+=ye.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,f,C,y)}}kr("FillBucket",sf,{omit:["layers","patternFeatures"]});const vh=new os({"fill-sort-key":new vn(vt.layout_fill["fill-sort-key"])});var pd={paint:new os({"fill-antialias":new sn(vt.paint_fill["fill-antialias"]),"fill-opacity":new vn(vt.paint_fill["fill-opacity"]),"fill-color":new vn(vt.paint_fill["fill-color"]),"fill-outline-color":new vn(vt.paint_fill["fill-outline-color"]),"fill-translate":new sn(vt.paint_fill["fill-translate"]),"fill-translate-anchor":new sn(vt.paint_fill["fill-translate-anchor"]),"fill-pattern":new tl(vt.paint_fill["fill-pattern"])}),layout:vh};const md=ds([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Kp=ds([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Gp}=md;var El={},eu=Le,_h=Fl;function Fl(o,n,A,f,y){this.properties={},this.extent=A,this.type=0,this._pbf=o,this._geometry=-1,this._keys=f,this._values=y,o.readFields(qp,this,n)}function qp(o,n,A){o==1?n.id=A.readVarint():o==2?function(f,y){for(var C=f.readVarint()+f.pos;f.pos<C;){var I=y._keys[f.readVarint()],D=y._values[f.readVarint()];y.properties[I]=D}}(A,n):o==3?n.type=A.readVarint():o==4&&(n._geometry=A.pos)}function Wp(o){for(var n,A,f=0,y=0,C=o.length,I=C-1;y<C;I=y++)f+=((A=o[I]).x-(n=o[y]).x)*(n.y+A.y);return f}Fl.types=["Unknown","Point","LineString","Polygon"],Fl.prototype.loadGeometry=function(){var o=this._pbf;o.pos=this._geometry;for(var n,A=o.readVarint()+o.pos,f=1,y=0,C=0,I=0,D=[];o.pos<A;){if(y<=0){var z=o.readVarint();f=7&z,y=z>>3}if(y--,f===1||f===2)C+=o.readSVarint(),I+=o.readSVarint(),f===1&&(n&&D.push(n),n=[]),n.push(new eu(C,I));else{if(f!==7)throw new Error("unknown command "+f);n&&n.push(n[0].clone())}}return n&&D.push(n),D},Fl.prototype.bbox=function(){var o=this._pbf;o.pos=this._geometry;for(var n=o.readVarint()+o.pos,A=1,f=0,y=0,C=0,I=1/0,D=-1/0,z=1/0,X=-1/0;o.pos<n;){if(f<=0){var ie=o.readVarint();A=7&ie,f=ie>>3}if(f--,A===1||A===2)(y+=o.readSVarint())<I&&(I=y),y>D&&(D=y),(C+=o.readSVarint())<z&&(z=C),C>X&&(X=C);else if(A!==7)throw new Error("unknown command "+A)}return[I,z,D,X]},Fl.prototype.toGeoJSON=function(o,n,A){var f,y,C=this.extent*Math.pow(2,A),I=this.extent*o,D=this.extent*n,z=this.loadGeometry(),X=Fl.types[this.type];function ie(Be){for(var Ee=0;Ee<Be.length;Ee++){var $e=Be[Ee];Be[Ee]=[360*($e.x+I)/C-180,360/Math.PI*Math.atan(Math.exp((180-360*($e.y+D)/C)*Math.PI/180))-90]}}switch(this.type){case 1:var ce=[];for(f=0;f<z.length;f++)ce[f]=z[f][0];ie(z=ce);break;case 2:for(f=0;f<z.length;f++)ie(z[f]);break;case 3:for(z=function(Be){var Ee=Be.length;if(Ee<=1)return[Be];for(var $e,Ze,Et=[],Kt=0;Kt<Ee;Kt++){var xt=Wp(Be[Kt]);xt!==0&&(Ze===void 0&&(Ze=xt<0),Ze===xt<0?($e&&Et.push($e),$e=[Be[Kt]]):$e.push(Be[Kt]))}return $e&&Et.push($e),Et}(z),f=0;f<z.length;f++)for(y=0;y<z[f].length;y++)ie(z[f][y])}z.length===1?z=z[0]:X="Multi"+X;var ye={type:"Feature",geometry:{type:X,coordinates:z},properties:this.properties};return"id"in this&&(ye.id=this.id),ye};var Xp=_h,gd=af;function af(o,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=o,this._keys=[],this._values=[],this._features=[],o.readFields(of,this,n),this.length=this._features.length}function of(o,n,A){o===15?n.version=A.readVarint():o===1?n.name=A.readString():o===5?n.extent=A.readVarint():o===2?n._features.push(A.pos):o===3?n._keys.push(A.readString()):o===4&&n._values.push(function(f){for(var y=null,C=f.readVarint()+f.pos;f.pos<C;){var I=f.readVarint()>>3;y=I===1?f.readString():I===2?f.readFloat():I===3?f.readDouble():I===4?f.readVarint64():I===5?f.readVarint():I===6?f.readSVarint():I===7?f.readBoolean():null}return y}(A))}af.prototype.feature=function(o){if(o<0||o>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[o];var n=this._pbf.readVarint()+this._pbf.pos;return new Xp(this._pbf,n,this.extent,this._keys,this._values)};var yd=gd;function vd(o,n,A){if(o===3){var f=new yd(A,A.readVarint()+A.pos);f.length&&(n[f.name]=f)}}El.VectorTile=function(o,n){this.layers=o.readFields(vd,{},n)},El.VectorTileFeature=_h,El.VectorTileLayer=gd;const Af=El.VectorTileFeature.types,wh=Math.pow(2,13);function tu(o,n,A,f,y,C,I,D){o.emplaceBack(n,A,2*Math.floor(f*wh)+I,y*wh*2,C*wh*2,Math.round(D))}class lf{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(A=>A.id),this.index=n.index,this.hasPattern=!1,this.layoutVertexArray=new W,this.centroidVertexArray=new b,this.indexArray=new Ft,this.programConfigurations=new Ki(n.layers,n.zoom),this.segments=new Je,this.stateDependentLayerIds=this.layers.filter(A=>A.isStateDependent()).map(A=>A.id)}populate(n,A,f){this.features=[],this.hasPattern=gh("fill-extrusion",this.layers,A);for(const{feature:y,id:C,index:I,sourceLayerIndex:D}of n){const z=this.layers[0]._featureFilter.needGeometry,X=Fo(y,z);if(!this.layers[0]._featureFilter.filter(new Ui(this.zoom),X,f))continue;const ie={id:C,sourceLayerIndex:D,index:I,geometry:z?X.geometry:uo(y),properties:y.properties,type:y.type,patterns:{}};this.hasPattern?this.features.push(yh("fill-extrusion",this.layers,ie,this.zoom,A)):this.addFeature(ie,ie.geometry,I,f,{}),A.featureIndex.insert(y,ie.geometry,I,D,this.index,!0)}}addFeatures(n,A,f){for(const y of this.features){const{geometry:C}=y;this.addFeature(y,C,y.index,A,f)}}update(n,A,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,A,this.stateDependentLayers,f)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Gp),this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,Kp.members,!0),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(n,A,f,y,C){const I={x:0,y:0,vertexCount:0};for(const D of Qu(A,500)){let z=0;for(const Ee of D)z+=Ee.length;let X=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const Ee of D){if(Ee.length===0||xh(Ee))continue;let $e=0;for(let Ze=0;Ze<Ee.length;Ze++){const Et=Ee[Ze];if(Ze>=1){const Kt=Ee[Ze-1];if(!bh(Et,Kt)){X.vertexLength+4>Je.MAX_VERTEX_ARRAY_LENGTH&&(X=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const xt=Et.sub(Kt)._perp()._unit(),Dt=Kt.dist(Et);$e+Dt>32768&&($e=0),tu(this.layoutVertexArray,Et.x,Et.y,xt.x,xt.y,0,0,$e),tu(this.layoutVertexArray,Et.x,Et.y,xt.x,xt.y,0,1,$e),I.x+=2*Et.x,I.y+=2*Et.y,I.vertexCount+=2,$e+=Dt,tu(this.layoutVertexArray,Kt.x,Kt.y,xt.x,xt.y,0,0,$e),tu(this.layoutVertexArray,Kt.x,Kt.y,xt.x,xt.y,0,1,$e),I.x+=2*Kt.x,I.y+=2*Kt.y,I.vertexCount+=2;const or=X.vertexLength;this.indexArray.emplaceBack(or,or+2,or+1),this.indexArray.emplaceBack(or+1,or+2,or+3),X.vertexLength+=4,X.primitiveLength+=2}}}}if(X.vertexLength+z>Je.MAX_VERTEX_ARRAY_LENGTH&&(X=this.segments.prepareSegment(z,this.layoutVertexArray,this.indexArray)),Af[n.type]!=="Polygon")continue;const ie=[],ce=[],ye=X.vertexLength;for(const Ee of D)if(Ee.length!==0){Ee!==D[0]&&ce.push(ie.length/2);for(let $e=0;$e<Ee.length;$e++){const Ze=Ee[$e];tu(this.layoutVertexArray,Ze.x,Ze.y,0,0,1,1,0),I.x+=Ze.x,I.y+=Ze.y,I.vertexCount+=1,ie.push(Ze.x),ie.push(Ze.y)}}const Be=nc.exports(ie,ce);for(let Ee=0;Ee<Be.length;Ee+=3)this.indexArray.emplaceBack(ye+Be[Ee],ye+Be[Ee+2],ye+Be[Ee+1]);X.primitiveLength+=Be.length/3,X.vertexLength+=z}for(let D=0;D<I.vertexCount;D++)this.centroidVertexArray.emplaceBack(Math.floor(I.x/I.vertexCount),Math.floor(I.y/I.vertexCount));this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,f,C,y)}}function bh(o,n){return o.x===n.x&&(o.x<0||o.x>Ci)||o.y===n.y&&(o.y<0||o.y>Ci)}function xh(o){return o.every(n=>n.x<0)||o.every(n=>n.x>Ci)||o.every(n=>n.y<0)||o.every(n=>n.y>Ci)}kr("FillExtrusionBucket",lf,{omit:["layers","features"]});var _d={paint:new os({"fill-extrusion-opacity":new sn(vt["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new vn(vt["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new sn(vt["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new sn(vt["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new tl(vt["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new vn(vt["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new vn(vt["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new sn(vt["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})};function ru(o,n){return o.x*n.x+o.y*n.y}function wd(o,n){if(o.length===1){let A=0;const f=n[A++];let y;for(;!y||f.equals(y);)if(y=n[A++],!y)return 1/0;for(;A<n.length;A++){const C=n[A],I=o[0],D=y.sub(f),z=C.sub(f),X=I.sub(f),ie=ru(D,D),ce=ru(D,z),ye=ru(z,z),Be=ru(X,D),Ee=ru(X,z),$e=ie*ye-ce*ce,Ze=(ye*Be-ce*Ee)/$e,Et=(ie*Ee-ce*Be)/$e,Kt=f.z*(1-Ze-Et)+y.z*Ze+C.z*Et;if(isFinite(Kt))return Kt}return 1/0}{let A=1/0;for(const f of n)A=Math.min(A,f.z);return A}}const bd=ds([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:xd}=bd,Zp=ds([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Jp}=Zp,nu=El.VectorTileFeature.types,Bd=Math.cos(Math.PI/180*37.5),Ls=Math.pow(2,14)/.5;class Sl{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(A=>A.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(A=>{this.gradients[A.id]={}}),this.layoutVertexArray=new ae,this.layoutVertexArray2=new de,this.indexArray=new Ft,this.programConfigurations=new Ki(n.layers,n.zoom),this.segments=new Je,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(A=>A.isStateDependent()).map(A=>A.id)}populate(n,A,f){this.hasPattern=gh("line",this.layers,A);const y=this.layers[0].layout.get("line-sort-key"),C=!y.isConstant(),I=[];for(const{feature:D,id:z,index:X,sourceLayerIndex:ie}of n){const ce=this.layers[0]._featureFilter.needGeometry,ye=Fo(D,ce);if(!this.layers[0]._featureFilter.filter(new Ui(this.zoom),ye,f))continue;const Be=C?y.evaluate(ye,{},f):void 0,Ee={id:z,properties:D.properties,type:D.type,sourceLayerIndex:ie,index:X,geometry:ce?ye.geometry:uo(D),patterns:{},sortKey:Be};I.push(Ee)}C&&I.sort((D,z)=>D.sortKey-z.sortKey);for(const D of I){const{geometry:z,index:X,sourceLayerIndex:ie}=D;if(this.hasPattern){const ce=yh("line",this.layers,D,this.zoom,A);this.patternFeatures.push(ce)}else this.addFeature(D,z,X,f,{});A.featureIndex.insert(n[X].feature,z,X,ie,this.index)}}update(n,A,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,A,this.stateDependentLayers,f)}addFeatures(n,A,f){for(const y of this.patternFeatures)this.addFeature(y,y.geometry,y.index,A,f)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,Jp)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,xd),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(n.properties,"mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,A,f,y,C){const I=this.layers[0].layout,D=I.get("line-join").evaluate(n,{}),z=I.get("line-cap"),X=I.get("line-miter-limit"),ie=I.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const ce of A)this.addLine(ce,n,D,z,X,ie);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,f,C,y)}addLine(n,A,f,y,C,I){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Et=0;Et<n.length-1;Et++)this.totalDistance+=n[Et].dist(n[Et+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const D=nu[A.type]==="Polygon";let z=n.length;for(;z>=2&&n[z-1].equals(n[z-2]);)z--;let X=0;for(;X<z-1&&n[X].equals(n[X+1]);)X++;if(z<(D?3:2))return;f==="bevel"&&(C=1.05);const ie=this.overscaling<=16?122880/(512*this.overscaling):0,ce=this.segments.prepareSegment(10*z,this.layoutVertexArray,this.indexArray);let ye,Be,Ee,$e,Ze;this.e1=this.e2=-1,D&&(ye=n[z-2],Ze=n[X].sub(ye)._unit()._perp());for(let Et=X;Et<z;Et++){if(Ee=Et===z-1?D?n[X+1]:void 0:n[Et+1],Ee&&n[Et].equals(Ee))continue;Ze&&($e=Ze),ye&&(Be=ye),ye=n[Et],Ze=Ee?Ee.sub(ye)._unit()._perp():$e,$e=$e||Ze;let Kt=$e.add(Ze);Kt.x===0&&Kt.y===0||Kt._unit();const xt=$e.x*Ze.x+$e.y*Ze.y,Dt=Kt.x*Ze.x+Kt.y*Ze.y,or=Dt!==0?1/Dt:1/0,ar=2*Math.sqrt(2-2*Dt),Yr=Dt<Bd&&Be&&Ee,on=$e.x*Ze.y-$e.y*Ze.x>0;if(Yr&&Et>X){const Ur=ye.dist(Be);if(Ur>2*ie){const Xr=ye.sub(ye.sub(Be)._mult(ie/Ur)._round());this.updateDistance(Be,Xr),this.addCurrentVertex(Xr,$e,0,0,ce),Be=Xr}}const Wr=Be&&Ee;let Mr=Wr?f:D?"butt":y;if(Wr&&Mr==="round"&&(or<I?Mr="miter":or<=2&&(Mr="fakeround")),Mr==="miter"&&or>C&&(Mr="bevel"),Mr==="bevel"&&(or>2&&(Mr="flipbevel"),or<C&&(Mr="miter")),Be&&this.updateDistance(Be,ye),Mr==="miter")Kt._mult(or),this.addCurrentVertex(ye,Kt,0,0,ce);else if(Mr==="flipbevel"){if(or>100)Kt=Ze.mult(-1);else{const Ur=or*$e.add(Ze).mag()/$e.sub(Ze).mag();Kt._perp()._mult(Ur*(on?-1:1))}this.addCurrentVertex(ye,Kt,0,0,ce),this.addCurrentVertex(ye,Kt.mult(-1),0,0,ce)}else if(Mr==="bevel"||Mr==="fakeround"){const Ur=-Math.sqrt(or*or-1),Xr=on?Ur:0,Or=on?0:Ur;if(Be&&this.addCurrentVertex(ye,$e,Xr,Or,ce),Mr==="fakeround"){const wr=Math.round(180*ar/Math.PI/20);for(let _n=1;_n<wr;_n++){let fn=_n/wr;if(fn!==.5){const $i=fn-.5;fn+=fn*$i*(fn-1)*((1.0904+xt*(xt*(3.55645-1.43519*xt)-3.2452))*$i*$i+(.848013+xt*(.215638*xt-1.06021)))}const Gn=Ze.sub($e)._mult(fn)._add($e)._unit()._mult(on?-1:1);this.addHalfVertex(ye,Gn.x,Gn.y,!1,on,0,ce)}}Ee&&this.addCurrentVertex(ye,Ze,-Xr,-Or,ce)}else if(Mr==="butt")this.addCurrentVertex(ye,Kt,0,0,ce);else if(Mr==="square"){const Ur=Be?1:-1;this.addCurrentVertex(ye,Kt,Ur,Ur,ce)}else Mr==="round"&&(Be&&(this.addCurrentVertex(ye,$e,0,0,ce),this.addCurrentVertex(ye,$e,1,1,ce,!0)),Ee&&(this.addCurrentVertex(ye,Ze,-1,-1,ce,!0),this.addCurrentVertex(ye,Ze,0,0,ce)));if(Yr&&Et<z-1){const Ur=ye.dist(Ee);if(Ur>2*ie){const Xr=ye.add(Ee.sub(ye)._mult(ie/Ur)._round());this.updateDistance(ye,Xr),this.addCurrentVertex(Xr,Ze,0,0,ce),ye=Xr}}}}addCurrentVertex(n,A,f,y,C,I=!1){const D=A.y*y-A.x,z=-A.y-A.x*y;this.addHalfVertex(n,A.x+A.y*f,A.y-A.x*f,I,!1,f,C),this.addHalfVertex(n,D,z,I,!0,-y,C),this.distance>Ls/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(n,A,f,y,C,I))}addHalfVertex({x:n,y:A},f,y,C,I,D,z){const X=.5*(this.lineClips?this.scaledDistance*(Ls-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((n<<1)+(C?1:0),(A<<1)+(I?1:0),Math.round(63*f)+128,Math.round(63*y)+128,1+(D===0?0:D<0?-1:1)|(63&X)<<2,X>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const ie=z.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,ie),z.primitiveLength++),I?this.e2=ie:this.e1=ie}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(n,A){this.distance+=n.dist(A),this.updateScaledDistance()}}kr("LineBucket",Sl,{omit:["layers","patternFeatures"]});const iu=new os({"line-cap":new sn(vt.layout_line["line-cap"]),"line-join":new vn(vt.layout_line["line-join"]),"line-miter-limit":new sn(vt.layout_line["line-miter-limit"]),"line-round-limit":new sn(vt.layout_line["line-round-limit"]),"line-sort-key":new vn(vt.layout_line["line-sort-key"])});var Il={paint:new os({"line-opacity":new vn(vt.paint_line["line-opacity"]),"line-color":new vn(vt.paint_line["line-color"]),"line-translate":new sn(vt.paint_line["line-translate"]),"line-translate-anchor":new sn(vt.paint_line["line-translate-anchor"]),"line-width":new vn(vt.paint_line["line-width"]),"line-gap-width":new vn(vt.paint_line["line-gap-width"]),"line-offset":new vn(vt.paint_line["line-offset"]),"line-blur":new vn(vt.paint_line["line-blur"]),"line-dasharray":new _l(vt.paint_line["line-dasharray"]),"line-pattern":new tl(vt.paint_line["line-pattern"]),"line-gradient":new Sa(vt.paint_line["line-gradient"])}),layout:iu};const Tl=new class extends vn{possiblyEvaluate(o,n){return n=new Ui(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,zoomHistory:n.zoomHistory,transition:n.transition}),super.possiblyEvaluate(o,n)}evaluate(o,n,A,f){return n=Q({},n,{zoom:Math.floor(n.zoom)}),super.evaluate(o,n,A,f)}}(Il.paint.properties["line-width"].specification);function su(o,n){return n>0?n+2*o:o}Tl.useIntegerZoom=!0;const Ul=ds([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Cd=ds([{name:"a_projected_pos",components:3,type:"Float32"}],4);ds([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Ed=ds([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);ds([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const cf=ds([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),uf=ds([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Pu(o,n,A){return o.sections.forEach(f=>{f.text=function(y,C,I){const D=C.layout.get("text-transform").evaluate(I,{});return D==="uppercase"?y=y.toLocaleUpperCase():D==="lowercase"&&(y=y.toLocaleLowerCase()),Fa.applyArabicShaping&&(y=Fa.applyArabicShaping(y)),y}(f.text,n,A)}),o}ds([{name:"triangle",components:3,type:"Uint16"}]),ds([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),ds([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),ds([{type:"Float32",name:"offsetX"}]),ds([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);const au={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var Os=24,Ic=Li,Fd=function(o,n,A,f,y){var C,I,D=8*y-f-1,z=(1<<D)-1,X=z>>1,ie=-7,ce=A?y-1:0,ye=A?-1:1,Be=o[n+ce];for(ce+=ye,C=Be&(1<<-ie)-1,Be>>=-ie,ie+=D;ie>0;C=256*C+o[n+ce],ce+=ye,ie-=8);for(I=C&(1<<-ie)-1,C>>=-ie,ie+=f;ie>0;I=256*I+o[n+ce],ce+=ye,ie-=8);if(C===0)C=1-X;else{if(C===z)return I?NaN:1/0*(Be?-1:1);I+=Math.pow(2,f),C-=X}return(Be?-1:1)*I*Math.pow(2,C-f)},Sd=function(o,n,A,f,y,C){var I,D,z,X=8*C-y-1,ie=(1<<X)-1,ce=ie>>1,ye=y===23?Math.pow(2,-24)-Math.pow(2,-77):0,Be=f?0:C-1,Ee=f?1:-1,$e=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(D=isNaN(n)?1:0,I=ie):(I=Math.floor(Math.log(n)/Math.LN2),n*(z=Math.pow(2,-I))<1&&(I--,z*=2),(n+=I+ce>=1?ye/z:ye*Math.pow(2,1-ce))*z>=2&&(I++,z/=2),I+ce>=ie?(D=0,I=ie):I+ce>=1?(D=(n*z-1)*Math.pow(2,y),I+=ce):(D=n*Math.pow(2,ce-1)*Math.pow(2,y),I=0));y>=8;o[A+Be]=255&D,Be+=Ee,D/=256,y-=8);for(I=I<<y|D,X+=y;X>0;o[A+Be]=255&I,Be+=Ee,I/=256,X-=8);o[A+Be-Ee]|=128*$e};function Li(o){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(o)?o:new Uint8Array(o||0),this.pos=0,this.type=0,this.length=this.buf.length}Li.Varint=0,Li.Fixed64=1,Li.Bytes=2,Li.Fixed32=5;var oc,hf=4294967296,Bh=1/hf,Id=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Ll(o){return o.type===Li.Bytes?o.readVarint()+o.pos:o.pos+1}function ou(o,n,A){return A?4294967296*n+(o>>>0):4294967296*(n>>>0)+(o>>>0)}function Td(o,n,A){var f=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));A.realloc(f);for(var y=A.pos-1;y>=o;y--)A.buf[y+f]=A.buf[y]}function Yp(o,n){for(var A=0;A<o.length;A++)n.writeVarint(o[A])}function ff(o,n){for(var A=0;A<o.length;A++)n.writeSVarint(o[A])}function df(o,n){for(var A=0;A<o.length;A++)n.writeFloat(o[A])}function Ud(o,n){for(var A=0;A<o.length;A++)n.writeDouble(o[A])}function $p(o,n){for(var A=0;A<o.length;A++)n.writeBoolean(o[A])}function em(o,n){for(var A=0;A<o.length;A++)n.writeFixed32(o[A])}function Ld(o,n){for(var A=0;A<o.length;A++)n.writeSFixed32(o[A])}function tm(o,n){for(var A=0;A<o.length;A++)n.writeFixed64(o[A])}function rm(o,n){for(var A=0;A<o.length;A++)n.writeSFixed64(o[A])}function Ch(o,n){return(o[n]|o[n+1]<<8|o[n+2]<<16)+16777216*o[n+3]}function Au(o,n,A){o[A]=n,o[A+1]=n>>>8,o[A+2]=n>>>16,o[A+3]=n>>>24}function Qd(o,n){return(o[n]|o[n+1]<<8|o[n+2]<<16)+(o[n+3]<<24)}function pf(o,n,A){o===1&&A.readMessage(nm,n)}function nm(o,n,A){if(o===3){const{id:f,bitmap:y,width:C,height:I,left:D,top:z,advance:X}=A.readMessage(mf,{});n.push({id:f,bitmap:new rc({width:C+6,height:I+6},y),metrics:{width:C,height:I,left:D,top:z,advance:X}})}}function mf(o,n,A){o===1?n.id=A.readVarint():o===2?n.bitmap=A.readBytes():o===3?n.width=A.readVarint():o===4?n.height=A.readVarint():o===5?n.left=A.readSVarint():o===6?n.top=A.readSVarint():o===7&&(n.advance=A.readVarint())}function Pd(o){let n=0,A=0;for(const I of o)n+=I.w*I.h,A=Math.max(A,I.w);o.sort((I,D)=>D.h-I.h);const f=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),A),h:1/0}];let y=0,C=0;for(const I of o)for(let D=f.length-1;D>=0;D--){const z=f[D];if(!(I.w>z.w||I.h>z.h)){if(I.x=z.x,I.y=z.y,C=Math.max(C,I.y+I.h),y=Math.max(y,I.x+I.w),I.w===z.w&&I.h===z.h){const X=f.pop();D<f.length&&(f[D]=X)}else I.h===z.h?(z.x+=I.w,z.w-=I.w):I.w===z.w?(z.y+=I.h,z.h-=I.h):(f.push({x:z.x+I.w,y:z.y,w:z.w-I.w,h:I.h}),z.y+=I.h,z.h-=I.h);break}}return{w:y,h:C,fill:n/(y*C)||0}}Li.prototype={destroy:function(){this.buf=null},readFields:function(o,n,A){for(A=A||this.length;this.pos<A;){var f=this.readVarint(),y=f>>3,C=this.pos;this.type=7&f,o(y,n,this),this.pos===C&&this.skip(f)}return n},readMessage:function(o,n){return this.readFields(o,n,this.readVarint()+this.pos)},readFixed32:function(){var o=Ch(this.buf,this.pos);return this.pos+=4,o},readSFixed32:function(){var o=Qd(this.buf,this.pos);return this.pos+=4,o},readFixed64:function(){var o=Ch(this.buf,this.pos)+Ch(this.buf,this.pos+4)*hf;return this.pos+=8,o},readSFixed64:function(){var o=Ch(this.buf,this.pos)+Qd(this.buf,this.pos+4)*hf;return this.pos+=8,o},readFloat:function(){var o=Fd(this.buf,this.pos,!0,23,4);return this.pos+=4,o},readDouble:function(){var o=Fd(this.buf,this.pos,!0,52,8);return this.pos+=8,o},readVarint:function(o){var n,A,f=this.buf;return n=127&(A=f[this.pos++]),A<128?n:(n|=(127&(A=f[this.pos++]))<<7,A<128?n:(n|=(127&(A=f[this.pos++]))<<14,A<128?n:(n|=(127&(A=f[this.pos++]))<<21,A<128?n:function(y,C,I){var D,z,X=I.buf;if(D=(112&(z=X[I.pos++]))>>4,z<128||(D|=(127&(z=X[I.pos++]))<<3,z<128)||(D|=(127&(z=X[I.pos++]))<<10,z<128)||(D|=(127&(z=X[I.pos++]))<<17,z<128)||(D|=(127&(z=X[I.pos++]))<<24,z<128)||(D|=(1&(z=X[I.pos++]))<<31,z<128))return ou(y,D,C);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(A=f[this.pos]))<<28,o,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var o=this.readVarint();return o%2==1?(o+1)/-2:o/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var o=this.readVarint()+this.pos,n=this.pos;return this.pos=o,o-n>=12&&Id?function(A,f,y){return Id.decode(A.subarray(f,y))}(this.buf,n,o):function(A,f,y){for(var C="",I=f;I<y;){var D,z,X,ie=A[I],ce=null,ye=ie>239?4:ie>223?3:ie>191?2:1;if(I+ye>y)break;ye===1?ie<128&&(ce=ie):ye===2?(192&(D=A[I+1]))==128&&(ce=(31&ie)<<6|63&D)<=127&&(ce=null):ye===3?(z=A[I+2],(192&(D=A[I+1]))==128&&(192&z)==128&&((ce=(15&ie)<<12|(63&D)<<6|63&z)<=2047||ce>=55296&&ce<=57343)&&(ce=null)):ye===4&&(z=A[I+2],X=A[I+3],(192&(D=A[I+1]))==128&&(192&z)==128&&(192&X)==128&&((ce=(15&ie)<<18|(63&D)<<12|(63&z)<<6|63&X)<=65535||ce>=1114112)&&(ce=null)),ce===null?(ce=65533,ye=1):ce>65535&&(ce-=65536,C+=String.fromCharCode(ce>>>10&1023|55296),ce=56320|1023&ce),C+=String.fromCharCode(ce),I+=ye}return C}(this.buf,n,o)},readBytes:function(){var o=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,o);return this.pos=o,n},readPackedVarint:function(o,n){if(this.type!==Li.Bytes)return o.push(this.readVarint(n));var A=Ll(this);for(o=o||[];this.pos<A;)o.push(this.readVarint(n));return o},readPackedSVarint:function(o){if(this.type!==Li.Bytes)return o.push(this.readSVarint());var n=Ll(this);for(o=o||[];this.pos<n;)o.push(this.readSVarint());return o},readPackedBoolean:function(o){if(this.type!==Li.Bytes)return o.push(this.readBoolean());var n=Ll(this);for(o=o||[];this.pos<n;)o.push(this.readBoolean());return o},readPackedFloat:function(o){if(this.type!==Li.Bytes)return o.push(this.readFloat());var n=Ll(this);for(o=o||[];this.pos<n;)o.push(this.readFloat());return o},readPackedDouble:function(o){if(this.type!==Li.Bytes)return o.push(this.readDouble());var n=Ll(this);for(o=o||[];this.pos<n;)o.push(this.readDouble());return o},readPackedFixed32:function(o){if(this.type!==Li.Bytes)return o.push(this.readFixed32());var n=Ll(this);for(o=o||[];this.pos<n;)o.push(this.readFixed32());return o},readPackedSFixed32:function(o){if(this.type!==Li.Bytes)return o.push(this.readSFixed32());var n=Ll(this);for(o=o||[];this.pos<n;)o.push(this.readSFixed32());return o},readPackedFixed64:function(o){if(this.type!==Li.Bytes)return o.push(this.readFixed64());var n=Ll(this);for(o=o||[];this.pos<n;)o.push(this.readFixed64());return o},readPackedSFixed64:function(o){if(this.type!==Li.Bytes)return o.push(this.readSFixed64());var n=Ll(this);for(o=o||[];this.pos<n;)o.push(this.readSFixed64());return o},skip:function(o){var n=7&o;if(n===Li.Varint)for(;this.buf[this.pos++]>127;);else if(n===Li.Bytes)this.pos=this.readVarint()+this.pos;else if(n===Li.Fixed32)this.pos+=4;else{if(n!==Li.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(o,n){this.writeVarint(o<<3|n)},realloc:function(o){for(var n=this.length||16;n<this.pos+o;)n*=2;if(n!==this.length){var A=new Uint8Array(n);A.set(this.buf),this.buf=A,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(o){this.realloc(4),Au(this.buf,o,this.pos),this.pos+=4},writeSFixed32:function(o){this.realloc(4),Au(this.buf,o,this.pos),this.pos+=4},writeFixed64:function(o){this.realloc(8),Au(this.buf,-1&o,this.pos),Au(this.buf,Math.floor(o*Bh),this.pos+4),this.pos+=8},writeSFixed64:function(o){this.realloc(8),Au(this.buf,-1&o,this.pos),Au(this.buf,Math.floor(o*Bh),this.pos+4),this.pos+=8},writeVarint:function(o){(o=+o||0)>268435455||o<0?function(n,A){var f,y;if(n>=0?(f=n%4294967296|0,y=n/4294967296|0):(y=~(-n/4294967296),4294967295^(f=~(-n%4294967296))?f=f+1|0:(f=0,y=y+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");A.realloc(10),function(C,I,D){D.buf[D.pos++]=127&C|128,C>>>=7,D.buf[D.pos++]=127&C|128,C>>>=7,D.buf[D.pos++]=127&C|128,C>>>=7,D.buf[D.pos++]=127&C|128,D.buf[D.pos]=127&(C>>>=7)}(f,0,A),function(C,I){var D=(7&C)<<4;I.buf[I.pos++]|=D|((C>>>=3)?128:0),C&&(I.buf[I.pos++]=127&C|((C>>>=7)?128:0),C&&(I.buf[I.pos++]=127&C|((C>>>=7)?128:0),C&&(I.buf[I.pos++]=127&C|((C>>>=7)?128:0),C&&(I.buf[I.pos++]=127&C|((C>>>=7)?128:0),C&&(I.buf[I.pos++]=127&C)))))}(y,A)}(o,this):(this.realloc(4),this.buf[this.pos++]=127&o|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=127&(o>>>=7)|(o>127?128:0),o<=127||(this.buf[this.pos++]=o>>>7&127))))},writeSVarint:function(o){this.writeVarint(o<0?2*-o-1:2*o)},writeBoolean:function(o){this.writeVarint(Boolean(o))},writeString:function(o){o=String(o),this.realloc(4*o.length),this.pos++;var n=this.pos;this.pos=function(f,y,C){for(var I,D,z=0;z<y.length;z++){if((I=y.charCodeAt(z))>55295&&I<57344){if(!D){I>56319||z+1===y.length?(f[C++]=239,f[C++]=191,f[C++]=189):D=I;continue}if(I<56320){f[C++]=239,f[C++]=191,f[C++]=189,D=I;continue}I=D-55296<<10|I-56320|65536,D=null}else D&&(f[C++]=239,f[C++]=191,f[C++]=189,D=null);I<128?f[C++]=I:(I<2048?f[C++]=I>>6|192:(I<65536?f[C++]=I>>12|224:(f[C++]=I>>18|240,f[C++]=I>>12&63|128),f[C++]=I>>6&63|128),f[C++]=63&I|128)}return C}(this.buf,o,this.pos);var A=this.pos-n;A>=128&&Td(n,A,this),this.pos=n-1,this.writeVarint(A),this.pos+=A},writeFloat:function(o){this.realloc(4),Sd(this.buf,o,this.pos,!0,23,4),this.pos+=4},writeDouble:function(o){this.realloc(8),Sd(this.buf,o,this.pos,!0,52,8),this.pos+=8},writeBytes:function(o){var n=o.length;this.writeVarint(n),this.realloc(n);for(var A=0;A<n;A++)this.buf[this.pos++]=o[A]},writeRawMessage:function(o,n){this.pos++;var A=this.pos;o(n,this);var f=this.pos-A;f>=128&&Td(A,f,this),this.pos=A-1,this.writeVarint(f),this.pos+=f},writeMessage:function(o,n,A){this.writeTag(o,Li.Bytes),this.writeRawMessage(n,A)},writePackedVarint:function(o,n){n.length&&this.writeMessage(o,Yp,n)},writePackedSVarint:function(o,n){n.length&&this.writeMessage(o,ff,n)},writePackedBoolean:function(o,n){n.length&&this.writeMessage(o,$p,n)},writePackedFloat:function(o,n){n.length&&this.writeMessage(o,df,n)},writePackedDouble:function(o,n){n.length&&this.writeMessage(o,Ud,n)},writePackedFixed32:function(o,n){n.length&&this.writeMessage(o,em,n)},writePackedSFixed32:function(o,n){n.length&&this.writeMessage(o,Ld,n)},writePackedFixed64:function(o,n){n.length&&this.writeMessage(o,tm,n)},writePackedSFixed64:function(o,n){n.length&&this.writeMessage(o,rm,n)},writeBytesField:function(o,n){this.writeTag(o,Li.Bytes),this.writeBytes(n)},writeFixed32Field:function(o,n){this.writeTag(o,Li.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(o,n){this.writeTag(o,Li.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(o,n){this.writeTag(o,Li.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(o,n){this.writeTag(o,Li.Fixed64),this.writeSFixed64(n)},writeVarintField:function(o,n){this.writeTag(o,Li.Varint),this.writeVarint(n)},writeSVarintField:function(o,n){this.writeTag(o,Li.Varint),this.writeSVarint(n)},writeStringField:function(o,n){this.writeTag(o,Li.Bytes),this.writeString(n)},writeFloatField:function(o,n){this.writeTag(o,Li.Fixed32),this.writeFloat(n)},writeDoubleField:function(o,n){this.writeTag(o,Li.Fixed64),this.writeDouble(n)},writeBooleanField:function(o,n){this.writeVarintField(o,Boolean(n))}};class rn{constructor(n,{pixelRatio:A,version:f,stretchX:y,stretchY:C,content:I}){this.paddedRect=n,this.pixelRatio=A,this.stretchX=y,this.stretchY=C,this.content=I,this.version=f}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Tc{constructor(n,A){const f={},y={};this.haveRenderCallbacks=[];const C=[];this.addImages(n,f,C),this.addImages(A,y,C);const{w:I,h:D}=Pd(C),z=new Ta({width:I||1,height:D||1});for(const X in n){const ie=n[X],ce=f[X].paddedRect;Ta.copy(ie.data,z,{x:0,y:0},{x:ce.x+1,y:ce.y+1},ie.data)}for(const X in A){const ie=A[X],ce=y[X].paddedRect,ye=ce.x+1,Be=ce.y+1,Ee=ie.data.width,$e=ie.data.height;Ta.copy(ie.data,z,{x:0,y:0},{x:ye,y:Be},ie.data),Ta.copy(ie.data,z,{x:0,y:$e-1},{x:ye,y:Be-1},{width:Ee,height:1}),Ta.copy(ie.data,z,{x:0,y:0},{x:ye,y:Be+$e},{width:Ee,height:1}),Ta.copy(ie.data,z,{x:Ee-1,y:0},{x:ye-1,y:Be},{width:1,height:$e}),Ta.copy(ie.data,z,{x:0,y:0},{x:ye+Ee,y:Be},{width:1,height:$e})}this.image=z,this.iconPositions=f,this.patternPositions=y}addImages(n,A,f){for(const y in n){const C=n[y],I={x:0,y:0,w:C.data.width+2,h:C.data.height+2};f.push(I),A[y]=new rn(I,C),C.hasRenderCallback&&this.haveRenderCallbacks.push(y)}}patchUpdatedImages(n,A){n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const f in n.updatedImages)this.patchUpdatedImage(this.iconPositions[f],n.getImage(f),A),this.patchUpdatedImage(this.patternPositions[f],n.getImage(f),A)}patchUpdatedImage(n,A,f){if(!n||!A||n.version===A.version)return;n.version=A.version;const[y,C]=n.tl;f.update(A.data,void 0,{x:y,y:C})}}kr("ImagePosition",rn),kr("ImageAtlas",Tc),a.WritingMode=void 0,(oc=a.WritingMode||(a.WritingMode={}))[oc.none=0]="none",oc[oc.horizontal=1]="horizontal",oc[oc.vertical=2]="vertical",oc[oc.horizontalOnly=3]="horizontalOnly";const Uc=-17;class za{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,A){const f=new za;return f.scale=n||1,f.fontStack=A,f}static forImage(n){const A=new za;return A.imageName=n,A}}class lu{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,A){const f=new lu;for(let y=0;y<n.sections.length;y++){const C=n.sections[y];C.image?f.addImageSection(C):f.addTextSection(C,A)}return f}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(){this.text=function(n){let A="";for(let f=0;f<n.length;f++){const y=n.charCodeAt(f+1)||null,C=n.charCodeAt(f-1)||null;A+=y&&JA(y)&&!au[n[f+1]]||C&&JA(C)&&!au[n[f-1]]||!au[n[f]]?n[f]:au[n[f]]}return A}(this.text)}trim(){let n=0;for(let f=0;f<this.text.length&&Gi[this.text.charCodeAt(f)];f++)n++;let A=this.text.length;for(let f=this.text.length-1;f>=0&&f>=n&&Gi[this.text.charCodeAt(f)];f--)A--;this.text=this.text.substring(n,A),this.sectionIndex=this.sectionIndex.slice(n,A)}substring(n,A){const f=new lu;return f.text=this.text.substring(n,A),f.sectionIndex=this.sectionIndex.slice(n,A),f.sections=this.sections,f}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,A)=>Math.max(n,this.sections[A].scale),0)}addTextSection(n,A){this.text+=n.text,this.sections.push(za.forText(n.scale,n.fontStack||A));const f=this.sections.length-1;for(let y=0;y<n.text.length;++y)this.sectionIndex.push(f)}addImageSection(n){const A=n.image?n.image.name:"";if(A.length===0)return void Z("Can't add FormattedSection with an empty image.");const f=this.getNextImageSectionCharCode();f?(this.text+=String.fromCharCode(f),this.sections.push(za.forImage(A)),this.sectionIndex.push(this.sections.length-1)):Z("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Ei(o,n,A,f,y,C,I,D,z,X,ie,ce,ye,Be,Ee,$e){const Ze=lu.fromFeature(o,y);let Et;ce===a.WritingMode.vertical&&Ze.verticalizePunctuation();const{processBidirectionalText:Kt,processStyledBidirectionalText:xt}=Fa;if(Kt&&Ze.sections.length===1){Et=[];const ar=Kt(Ze.toString(),gf(Ze,X,C,n,f,Be,Ee));for(const Yr of ar){const on=new lu;on.text=Yr,on.sections=Ze.sections;for(let Wr=0;Wr<Yr.length;Wr++)on.sectionIndex.push(0);Et.push(on)}}else if(xt){Et=[];const ar=xt(Ze.text,Ze.sectionIndex,gf(Ze,X,C,n,f,Be,Ee));for(const Yr of ar){const on=new lu;on.text=Yr[0],on.sectionIndex=Yr[1],on.sections=Ze.sections,Et.push(on)}}else Et=function(ar,Yr){const on=[],Wr=ar.text;let Mr=0;for(const Ur of Yr)on.push(ar.substring(Mr,Ur)),Mr=Ur;return Mr<Wr.length&&on.push(ar.substring(Mr,Wr.length)),on}(Ze,gf(Ze,X,C,n,f,Be,Ee));const Dt=[],or={positionedLines:Dt,text:Ze.toString(),top:ie[1],bottom:ie[1],left:ie[0],right:ie[0],writingMode:ce,iconsInText:!1,verticalizable:!1};return function(ar,Yr,on,Wr,Mr,Ur,Xr,Or,wr,_n,fn,Gn){let $i=0,cs=Uc,ea=0,HA=0;const Ha=Or==="right"?1:Or==="left"?0:.5;let zs=0;for(const Hs of Mr){Hs.trim();const Ka=Hs.getMaxScale(),mo=(Ka-1)*Os,To={positionedGlyphs:[],lineOffset:0};ar.positionedLines[zs]=To;const Go=To.positionedGlyphs;let qo=0;if(!Hs.length()){cs+=Ur,++zs;continue}for(let ma=0;ma<Hs.length();ma++){const $n=Hs.getSection(ma),yA=Hs.getSectionIndex(ma),Ga=Hs.getCharCode(ma);let go=0,ul=null,kl=null,Ml=null,Qc=Os;const hl=!(wr===a.WritingMode.horizontal||!fn&&!Xl(Ga)||fn&&(Gi[Ga]||(pa=Ga,Sr.Arabic(pa)||Sr["Arabic Supplement"](pa)||Sr["Arabic Extended-A"](pa)||Sr["Arabic Presentation Forms-A"](pa)||Sr["Arabic Presentation Forms-B"](pa))));if($n.imageName){const VA=Wr[$n.imageName];if(!VA)continue;Ml=$n.imageName,ar.iconsInText=ar.iconsInText||!0,kl=VA.paddedRect;const Wo=VA.displaySize;$n.scale=$n.scale*Os/Gn,ul={width:Wo[0],height:Wo[1],left:1,top:-3,advance:hl?Wo[1]:Wo[0]},go=mo+(Os-Wo[1]*$n.scale),Qc=ul.advance;const Pc=hl?Wo[0]*$n.scale-Os*Ka:Wo[1]*$n.scale-Os*Ka;Pc>0&&Pc>qo&&(qo=Pc)}else{const VA=on[$n.fontStack],Wo=VA&&VA[Ga];if(Wo&&Wo.rect)kl=Wo.rect,ul=Wo.metrics;else{const Pc=Yr[$n.fontStack],Cf=Pc&&Pc[Ga];if(!Cf)continue;ul=Cf.metrics}go=(Ka-$n.scale)*Os}hl?(ar.verticalizable=!0,Go.push({glyph:Ga,imageName:Ml,x:$i,y:cs+go,vertical:hl,scale:$n.scale,fontStack:$n.fontStack,sectionIndex:yA,metrics:ul,rect:kl}),$i+=Qc*$n.scale+_n):(Go.push({glyph:Ga,imageName:Ml,x:$i,y:cs+go,vertical:hl,scale:$n.scale,fontStack:$n.fontStack,sectionIndex:yA,metrics:ul,rect:kl}),$i+=ul.advance*$n.scale+_n)}Go.length!==0&&(ea=Math.max($i-_n,ea),sm(Go,0,Go.length-1,Ha,qo)),$i=0;const ms=Ur*Ka+qo;To.lineOffset=Math.max(qo,mo),cs+=ms,HA=Math.max(ms,HA),++zs}var pa;const Va=cs-Uc,{horizontalAlign:po,verticalAlign:Ko}=Fh(Xr);(function(Hs,Ka,mo,To,Go,qo,ms,ma,$n){const yA=(Ka-mo)*Go;let Ga=0;Ga=qo!==ms?-ma*To-Uc:(-To*$n+.5)*ms;for(const go of Hs)for(const ul of go.positionedGlyphs)ul.x+=yA,ul.y+=Ga})(ar.positionedLines,Ha,po,Ko,ea,HA,Ur,Va,Mr.length),ar.top+=-Ko*Va,ar.bottom=ar.top+Va,ar.left+=-po*ea,ar.right=ar.left+ea}(or,n,A,f,Et,I,D,z,ce,X,ye,$e),!function(ar){for(const Yr of ar)if(Yr.positionedGlyphs.length!==0)return!1;return!0}(Dt)&&or}const Gi={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Eh={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function kd(o,n,A,f,y,C){if(n.imageName){const I=f[n.imageName];return I?I.displaySize[0]*n.scale*Os/C+y:0}{const I=A[n.fontStack],D=I&&I[o];return D?D.metrics.advance*n.scale+y:0}}function ku(o,n,A,f){const y=Math.pow(o-n,2);return f?o<n?y/2:2*y:y+Math.abs(A)*A}function im(o,n,A){let f=0;return o===10&&(f-=1e4),A&&(f+=150),o!==40&&o!==65288||(f+=50),n!==41&&n!==65289||(f+=50),f}function Mu(o,n,A,f,y,C){let I=null,D=ku(n,A,y,C);for(const z of f){const X=ku(n-z.x,A,y,C)+z.badness;X<=D&&(I=z,D=X)}return{index:o,x:n,priorBreak:I,badness:D}}function Md(o){return o?Md(o.priorBreak).concat(o.index):[]}function gf(o,n,A,f,y,C,I){if(C!=="point")return[];if(!o)return[];const D=[],z=function(ye,Be,Ee,$e,Ze,Et){let Kt=0;for(let xt=0;xt<ye.length();xt++){const Dt=ye.getSection(xt);Kt+=kd(ye.getCharCode(xt),Dt,$e,Ze,Be,Et)}return Kt/Math.max(1,Math.ceil(Kt/Ee))}(o,n,A,f,y,I),X=o.text.indexOf("​")>=0;let ie=0;for(let ye=0;ye<o.length();ye++){const Be=o.getSection(ye),Ee=o.getCharCode(ye);if(Gi[Ee]||(ie+=kd(Ee,Be,f,y,n,I)),ye<o.length()-1){const $e=!((ce=Ee)<11904||!(Sr["Bopomofo Extended"](ce)||Sr.Bopomofo(ce)||Sr["CJK Compatibility Forms"](ce)||Sr["CJK Compatibility Ideographs"](ce)||Sr["CJK Compatibility"](ce)||Sr["CJK Radicals Supplement"](ce)||Sr["CJK Strokes"](ce)||Sr["CJK Symbols and Punctuation"](ce)||Sr["CJK Unified Ideographs Extension A"](ce)||Sr["CJK Unified Ideographs"](ce)||Sr["Enclosed CJK Letters and Months"](ce)||Sr["Halfwidth and Fullwidth Forms"](ce)||Sr.Hiragana(ce)||Sr["Ideographic Description Characters"](ce)||Sr["Kangxi Radicals"](ce)||Sr["Katakana Phonetic Extensions"](ce)||Sr.Katakana(ce)||Sr["Vertical Forms"](ce)||Sr["Yi Radicals"](ce)||Sr["Yi Syllables"](ce)));(Eh[Ee]||$e||Be.imageName)&&D.push(Mu(ye+1,ie,z,D,im(Ee,o.getCharCode(ye+1),$e&&X),!1))}}var ce;return Md(Mu(o.length(),ie,z,D,0,!0))}function Fh(o){let n=.5,A=.5;switch(o){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(o){case"bottom":case"bottom-right":case"bottom-left":A=1;break;case"top":case"top-right":case"top-left":A=0}return{horizontalAlign:n,verticalAlign:A}}function sm(o,n,A,f,y){if(!f&&!y)return;const C=o[A],I=(o[A].x+C.metrics.advance*C.scale)*f;for(let D=n;D<=A;D++)o[D].x-=I,o[D].y+=y}function Dd(o,n,A){const{horizontalAlign:f,verticalAlign:y}=Fh(A),C=n[0]-o.displaySize[0]*f,I=n[1]-o.displaySize[1]*y;return{image:o,top:I,bottom:I+o.displaySize[1],left:C,right:C+o.displaySize[0]}}function Nd(o,n,A,f,y,C){const I=o.image;let D;if(I.content){const Ze=I.content,Et=I.pixelRatio||1;D=[Ze[0]/Et,Ze[1]/Et,I.displaySize[0]-Ze[2]/Et,I.displaySize[1]-Ze[3]/Et]}const z=n.left*C,X=n.right*C;let ie,ce,ye,Be;A==="width"||A==="both"?(Be=y[0]+z-f[3],ce=y[0]+X+f[1]):(Be=y[0]+(z+X-I.displaySize[0])/2,ce=Be+I.displaySize[0]);const Ee=n.top*C,$e=n.bottom*C;return A==="height"||A==="both"?(ie=y[1]+Ee-f[0],ye=y[1]+$e+f[2]):(ie=y[1]+(Ee+$e-I.displaySize[1])/2,ye=ie+I.displaySize[1]),{image:I,top:ie,right:ce,bottom:ye,left:Be,collisionPadding:D}}const ol=128;function yf(o,n){const{expression:A}=n;if(A.kind==="constant")return{kind:"constant",layoutSize:A.evaluate(new Ui(o+1))};if(A.kind==="source")return{kind:"source"};{const{zoomStops:f,interpolationType:y}=A;let C=0;for(;C<f.length&&f[C]<=o;)C++;C=Math.max(0,C-1);let I=C;for(;I<f.length&&f[I]<o+1;)I++;I=Math.min(f.length-1,I);const D=f[C],z=f[I];return A.kind==="composite"?{kind:"composite",minZoom:D,maxZoom:z,interpolationType:y}:{kind:"camera",minZoom:D,maxZoom:z,minSize:A.evaluate(new Ui(D)),maxSize:A.evaluate(new Ui(z)),interpolationType:y}}}class Al extends Le{constructor(n,A,f,y){super(n,A),this.angle=f,y!==void 0&&(this.segment=y)}clone(){return new Al(this.x,this.y,this.angle,this.segment)}}function vf(o,n,A,f,y){if(n.segment===void 0)return!0;let C=n,I=n.segment+1,D=0;for(;D>-A/2;){if(I--,I<0)return!1;D-=o[I].dist(C),C=o[I]}D+=o[I].dist(o[I+1]),I++;const z=[];let X=0;for(;D<A/2;){const ie=o[I],ce=o[I+1];if(!ce)return!1;let ye=o[I-1].angleTo(ie)-ie.angleTo(ce);for(ye=Math.abs((ye+3*Math.PI)%(2*Math.PI)-Math.PI),z.push({distance:D,angleDelta:ye}),X+=ye;D-z[0].distance>f;)X-=z.shift().angleDelta;if(X>y)return!1;I++,D+=ie.dist(ce)}return!0}function jd(o){let n=0;for(let A=0;A<o.length-1;A++)n+=o[A].dist(o[A+1]);return n}function _f(o,n,A){return o?.6*n*A:0}function Rd(o,n){return Math.max(o?o.right-o.left:0,n?n.right-n.left:0)}function am(o,n,A,f,y,C){const I=_f(A,y,C),D=Rd(A,f)*C;let z=0;const X=jd(o)/2;for(let ie=0;ie<o.length-1;ie++){const ce=o[ie],ye=o[ie+1],Be=ce.dist(ye);if(z+Be>X){const Ee=(X-z)/Be,$e=ii(ce.x,ye.x,Ee),Ze=ii(ce.y,ye.y,Ee),Et=new Al($e,Ze,ye.angleTo(ce),ie);return Et._round(),!I||vf(o,Et,D,I,n)?Et:void 0}z+=Be}}function om(o,n,A,f,y,C,I,D,z){const X=_f(f,C,I),ie=Rd(f,y),ce=ie*I,ye=o[0].x===0||o[0].x===z||o[0].y===0||o[0].y===z;return n-ce<n/4&&(n=ce+n/4),Du(o,ye?n/2*D%n:(ie/2+2*C)*I*D%n,n,X,A,ce,ye,!1,z)}function Du(o,n,A,f,y,C,I,D,z){const X=C/2,ie=jd(o);let ce=0,ye=n-A,Be=[];for(let Ee=0;Ee<o.length-1;Ee++){const $e=o[Ee],Ze=o[Ee+1],Et=$e.dist(Ze),Kt=Ze.angleTo($e);for(;ye+A<ce+Et;){ye+=A;const xt=(ye-ce)/Et,Dt=ii($e.x,Ze.x,xt),or=ii($e.y,Ze.y,xt);if(Dt>=0&&Dt<z&&or>=0&&or<z&&ye-X>=0&&ye+X<=ie){const ar=new Al(Dt,or,Kt,Ee);ar._round(),f&&!vf(o,ar,C,f,y)||Be.push(ar)}}ce+=Et}return D||Be.length||I||(Be=Du(o,ce/2,A,f,y,C,I,!0,z)),Be}function Vo(o,n,A,f,y){const C=[];for(let I=0;I<o.length;I++){const D=o[I];let z;for(let X=0;X<D.length-1;X++){let ie=D[X],ce=D[X+1];ie.x<n&&ce.x<n||(ie.x<n?ie=new Le(n,ie.y+(n-ie.x)/(ce.x-ie.x)*(ce.y-ie.y))._round():ce.x<n&&(ce=new Le(n,ie.y+(n-ie.x)/(ce.x-ie.x)*(ce.y-ie.y))._round()),ie.y<A&&ce.y<A||(ie.y<A?ie=new Le(ie.x+(A-ie.y)/(ce.y-ie.y)*(ce.x-ie.x),A)._round():ce.y<A&&(ce=new Le(ie.x+(A-ie.y)/(ce.y-ie.y)*(ce.x-ie.x),A)._round()),ie.x>=f&&ce.x>=f||(ie.x>=f?ie=new Le(f,ie.y+(f-ie.x)/(ce.x-ie.x)*(ce.y-ie.y))._round():ce.x>=f&&(ce=new Le(f,ie.y+(f-ie.x)/(ce.x-ie.x)*(ce.y-ie.y))._round()),ie.y>=y&&ce.y>=y||(ie.y>=y?ie=new Le(ie.x+(y-ie.y)/(ce.y-ie.y)*(ce.x-ie.x),y)._round():ce.y>=y&&(ce=new Le(ie.x+(y-ie.y)/(ce.y-ie.y)*(ce.x-ie.x),y)._round()),z&&ie.equals(z[z.length-1])||(z=[ie],C.push(z)),z.push(ce)))))}}return C}function wf(o,n,A,f){const y=[],C=o.image,I=C.pixelRatio,D=C.paddedRect.w-2,z=C.paddedRect.h-2,X=o.right-o.left,ie=o.bottom-o.top,ce=C.stretchX||[[0,D]],ye=C.stretchY||[[0,z]],Be=(Ur,Xr)=>Ur+Xr[1]-Xr[0],Ee=ce.reduce(Be,0),$e=ye.reduce(Be,0),Ze=D-Ee,Et=z-$e;let Kt=0,xt=Ee,Dt=0,or=$e,ar=0,Yr=Ze,on=0,Wr=Et;if(C.content&&f){const Ur=C.content;Kt=Lc(ce,0,Ur[0]),Dt=Lc(ye,0,Ur[1]),xt=Lc(ce,Ur[0],Ur[2]),or=Lc(ye,Ur[1],Ur[3]),ar=Ur[0]-Kt,on=Ur[1]-Dt,Yr=Ur[2]-Ur[0]-xt,Wr=Ur[3]-Ur[1]-or}const Mr=(Ur,Xr,Or,wr)=>{const _n=Sh(Ur.stretch-Kt,xt,X,o.left),fn=cu(Ur.fixed-ar,Yr,Ur.stretch,Ee),Gn=Sh(Xr.stretch-Dt,or,ie,o.top),$i=cu(Xr.fixed-on,Wr,Xr.stretch,$e),cs=Sh(Or.stretch-Kt,xt,X,o.left),ea=cu(Or.fixed-ar,Yr,Or.stretch,Ee),HA=Sh(wr.stretch-Dt,or,ie,o.top),Ha=cu(wr.fixed-on,Wr,wr.stretch,$e),zs=new Le(_n,Gn),pa=new Le(cs,Gn),Va=new Le(cs,HA),po=new Le(_n,HA),Ko=new Le(fn/I,$i/I),Hs=new Le(ea/I,Ha/I),Ka=n*Math.PI/180;if(Ka){const Go=Math.sin(Ka),qo=Math.cos(Ka),ms=[qo,-Go,Go,qo];zs._matMult(ms),pa._matMult(ms),po._matMult(ms),Va._matMult(ms)}const mo=Ur.stretch+Ur.fixed,To=Xr.stretch+Xr.fixed;return{tl:zs,tr:pa,bl:po,br:Va,tex:{x:C.paddedRect.x+1+mo,y:C.paddedRect.y+1+To,w:Or.stretch+Or.fixed-mo,h:wr.stretch+wr.fixed-To},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Ko,pixelOffsetBR:Hs,minFontScaleX:Yr/I/X,minFontScaleY:Wr/I/ie,isSDF:A}};if(f&&(C.stretchX||C.stretchY)){const Ur=Od(ce,Ze,Ee),Xr=Od(ye,Et,$e);for(let Or=0;Or<Ur.length-1;Or++){const wr=Ur[Or],_n=Ur[Or+1];for(let fn=0;fn<Xr.length-1;fn++)y.push(Mr(wr,Xr[fn],_n,Xr[fn+1]))}}else y.push(Mr({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:D+1},{fixed:0,stretch:z+1}));return y}function Lc(o,n,A){let f=0;for(const y of o)f+=Math.max(n,Math.min(A,y[1]))-Math.max(n,Math.min(A,y[0]));return f}function Od(o,n,A){const f=[{fixed:-1,stretch:0}];for(const[y,C]of o){const I=f[f.length-1];f.push({fixed:y-I.stretch,stretch:I.stretch}),f.push({fixed:y-I.stretch,stretch:I.stretch+(C-y)})}return f.push({fixed:n+1,stretch:A}),f}function Sh(o,n,A,f){return o/n*A+f}function cu(o,n,A,f){return o-n*A/f}kr("Anchor",Al);class Ql{constructor(n,A,f,y,C,I,D,z,X,ie){if(this.boxStartIndex=n.length,X){let ce=I.top,ye=I.bottom;const Be=I.collisionPadding;Be&&(ce-=Be[1],ye+=Be[3]);let Ee=ye-ce;Ee>0&&(Ee=Math.max(10,Ee),this.circleDiameter=Ee)}else{let ce=I.top*D-z[0],ye=I.bottom*D+z[2],Be=I.left*D-z[3],Ee=I.right*D+z[1];const $e=I.collisionPadding;if($e&&(Be-=$e[0]*D,ce-=$e[1]*D,Ee+=$e[2]*D,ye+=$e[3]*D),ie){const Ze=new Le(Be,ce),Et=new Le(Ee,ce),Kt=new Le(Be,ye),xt=new Le(Ee,ye),Dt=ie*Math.PI/180;Ze._rotate(Dt),Et._rotate(Dt),Kt._rotate(Dt),xt._rotate(Dt),Be=Math.min(Ze.x,Et.x,Kt.x,xt.x),Ee=Math.max(Ze.x,Et.x,Kt.x,xt.x),ce=Math.min(Ze.y,Et.y,Kt.y,xt.y),ye=Math.max(Ze.y,Et.y,Kt.y,xt.y)}n.emplaceBack(A.x,A.y,Be,ce,Ee,ye,f,y,C)}this.boxEndIndex=n.length}}class Ih{constructor(n=[],A=Am){if(this.data=n,this.length=this.data.length,this.compare=A,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(n){this.data.push(n),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const n=this.data[0],A=this.data.pop();return this.length--,this.length>0&&(this.data[0]=A,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:A,compare:f}=this,y=A[n];for(;n>0;){const C=n-1>>1,I=A[C];if(f(y,I)>=0)break;A[n]=I,n=C}A[n]=y}_down(n){const{data:A,compare:f}=this,y=this.length>>1,C=A[n];for(;n<y;){let I=1+(n<<1),D=A[I];const z=I+1;if(z<this.length&&f(A[z],D)<0&&(I=z,D=A[z]),f(D,C)>=0)break;A[n]=D,n=I}A[n]=C}}function Am(o,n){return o<n?-1:o>n?1:0}function uu(o,n=1,A=!1){let f=1/0,y=1/0,C=-1/0,I=-1/0;const D=o[0];for(let Be=0;Be<D.length;Be++){const Ee=D[Be];(!Be||Ee.x<f)&&(f=Ee.x),(!Be||Ee.y<y)&&(y=Ee.y),(!Be||Ee.x>C)&&(C=Ee.x),(!Be||Ee.y>I)&&(I=Ee.y)}const z=Math.min(C-f,I-y);let X=z/2;const ie=new Ih([],lm);if(z===0)return new Le(f,y);for(let Be=f;Be<C;Be+=z)for(let Ee=y;Ee<I;Ee+=z)ie.push(new hu(Be+X,Ee+X,X,o));let ce=function(Be){let Ee=0,$e=0,Ze=0;const Et=Be[0];for(let Kt=0,xt=Et.length,Dt=xt-1;Kt<xt;Dt=Kt++){const or=Et[Kt],ar=Et[Dt],Yr=or.x*ar.y-ar.x*or.y;$e+=(or.x+ar.x)*Yr,Ze+=(or.y+ar.y)*Yr,Ee+=3*Yr}return new hu($e/Ee,Ze/Ee,0,Be)}(o),ye=ie.length;for(;ie.length;){const Be=ie.pop();(Be.d>ce.d||!ce.d)&&(ce=Be,A&&console.log("found best %d after %d probes",Math.round(1e4*Be.d)/1e4,ye)),Be.max-ce.d<=n||(X=Be.h/2,ie.push(new hu(Be.p.x-X,Be.p.y-X,X,o)),ie.push(new hu(Be.p.x+X,Be.p.y-X,X,o)),ie.push(new hu(Be.p.x-X,Be.p.y+X,X,o)),ie.push(new hu(Be.p.x+X,Be.p.y+X,X,o)),ye+=4)}return A&&(console.log(`num probes: ${ye}`),console.log(`best distance: ${ce.d}`)),ce.p}function lm(o,n){return n.max-o.max}function hu(o,n,A,f){this.p=new Le(o,n),this.h=A,this.d=function(y,C){let I=!1,D=1/0;for(let z=0;z<C.length;z++){const X=C[z];for(let ie=0,ce=X.length,ye=ce-1;ie<ce;ye=ie++){const Be=X[ie],Ee=X[ye];Be.y>y.y!=Ee.y>y.y&&y.x<(Ee.x-Be.x)*(y.y-Be.y)/(Ee.y-Be.y)+Be.x&&(I=!I),D=Math.min(D,wl(y,Be,Ee))}}return(I?1:-1)*Math.sqrt(D)}(this.p,f),this.max=this.d+this.h*Math.SQRT2}const Th=Number.POSITIVE_INFINITY;function zd(o,n){return n[1]!==Th?function(A,f,y){let C=0,I=0;switch(f=Math.abs(f),y=Math.abs(y),A){case"top-right":case"top-left":case"top":I=y-7;break;case"bottom-right":case"bottom-left":case"bottom":I=7-y}switch(A){case"top-right":case"bottom-right":case"right":C=-f;break;case"top-left":case"bottom-left":case"left":C=f}return[C,I]}(o,n[0],n[1]):function(A,f){let y=0,C=0;f<0&&(f=0);const I=f/Math.sqrt(2);switch(A){case"top-right":case"top-left":C=I-7;break;case"bottom-right":case"bottom-left":C=7-I;break;case"bottom":C=7-f;break;case"top":C=f-7}switch(A){case"top-right":case"bottom-right":y=-I;break;case"top-left":case"bottom-left":y=I;break;case"left":y=f;break;case"right":y=-f}return[y,C]}(o,n[0])}function Uh(o){switch(o){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function cm(o,n,A,f,y,C,I,D,z,X,ie){let ce=C.textMaxSize.evaluate(n,{});ce===void 0&&(ce=I);const ye=o.layers[0].layout,Be=ye.get("icon-offset").evaluate(n,{},ie),Ee=Vd(A.horizontal),$e=I/24,Ze=o.tilePixelRatio*$e,Et=o.tilePixelRatio*ce/24,Kt=o.tilePixelRatio*D,xt=o.tilePixelRatio*ye.get("symbol-spacing"),Dt=ye.get("text-padding")*o.tilePixelRatio,or=function(wr,_n,fn,Gn=1){const $i=wr.get("icon-padding").evaluate(_n,{},fn),cs=$i&&$i.values;return[cs[0]*Gn,cs[1]*Gn,cs[2]*Gn,cs[3]*Gn]}(ye,n,ie,o.tilePixelRatio),ar=ye.get("text-max-angle")/180*Math.PI,Yr=ye.get("text-rotation-alignment")!=="viewport"&&ye.get("symbol-placement")!=="point",on=ye.get("icon-rotation-alignment")==="map"&&ye.get("symbol-placement")!=="point",Wr=ye.get("symbol-placement"),Mr=xt/2,Ur=ye.get("icon-text-fit");let Xr;f&&Ur!=="none"&&(o.allowVerticalPlacement&&A.vertical&&(Xr=Nd(f,A.vertical,Ur,ye.get("icon-text-fit-padding"),Be,$e)),Ee&&(f=Nd(f,Ee,Ur,ye.get("icon-text-fit-padding"),Be,$e)));const Or=(wr,_n)=>{_n.x<0||_n.x>=Ci||_n.y<0||_n.y>=Ci||function(fn,Gn,$i,cs,ea,HA,Ha,zs,pa,Va,po,Ko,Hs,Ka,mo,To,Go,qo,ms,ma,$n,yA,Ga,go,ul){const kl=fn.addToLineVertexArray(Gn,$i);let Ml,Qc,hl,VA,Wo=0,Pc=0,Cf=0,Yg=0,mm=-1,gm=-1;const kc={};let $g=ir.exports(""),ym=0,vm=0;if(zs._unevaluatedLayout.getValue("text-radial-offset")===void 0?[ym,vm]=zs.layout.get("text-offset").evaluate($n,{},go).map(Xo=>Xo*Os):(ym=zs.layout.get("text-radial-offset").evaluate($n,{},go)*Os,vm=Th),fn.allowVerticalPlacement&&cs.vertical){const Xo=zs.layout.get("text-rotate").evaluate($n,{},go)+90;hl=new Ql(pa,Gn,Va,po,Ko,cs.vertical,Hs,Ka,mo,Xo),Ha&&(VA=new Ql(pa,Gn,Va,po,Ko,Ha,Go,qo,mo,Xo))}if(ea){const Xo=zs.layout.get("icon-rotate").evaluate($n,{}),lc=zs.layout.get("icon-text-fit")!=="none",Ef=wf(ea,Xo,Ga,lc),Ff=Ha?wf(Ha,Xo,Ga,lc):void 0;Qc=new Ql(pa,Gn,Va,po,Ko,ea,Go,qo,!1,Xo),Wo=4*Ef.length;const r0=fn.iconSizeData;let Nu=null;r0.kind==="source"?(Nu=[ol*zs.layout.get("icon-size").evaluate($n,{})],Nu[0]>Ac&&Z(`${fn.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):r0.kind==="composite"&&(Nu=[ol*yA.compositeIconSizes[0].evaluate($n,{},go),ol*yA.compositeIconSizes[1].evaluate($n,{},go)],(Nu[0]>Ac||Nu[1]>Ac)&&Z(`${fn.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),fn.addSymbols(fn.icon,Ef,Nu,ma,ms,$n,a.WritingMode.none,Gn,kl.lineStartIndex,kl.lineLength,-1,go),mm=fn.icon.placedSymbolArray.length-1,Ff&&(Pc=4*Ff.length,fn.addSymbols(fn.icon,Ff,Nu,ma,ms,$n,a.WritingMode.vertical,Gn,kl.lineStartIndex,kl.lineLength,-1,go),gm=fn.icon.placedSymbolArray.length-1)}const e0=Object.keys(cs.horizontal);for(const Xo of e0){const lc=cs.horizontal[Xo];if(!Ml){$g=ir.exports(lc.text);const Ff=zs.layout.get("text-rotate").evaluate($n,{},go);Ml=new Ql(pa,Gn,Va,po,Ko,lc,Hs,Ka,mo,Ff)}const Ef=lc.positionedLines.length===1;if(Cf+=Hd(fn,Gn,lc,HA,zs,mo,$n,To,kl,cs.vertical?a.WritingMode.horizontal:a.WritingMode.horizontalOnly,Ef?e0:[Xo],kc,mm,yA,go),Ef)break}cs.vertical&&(Yg+=Hd(fn,Gn,cs.vertical,HA,zs,mo,$n,To,kl,a.WritingMode.vertical,["vertical"],kc,gm,yA,go));const v_=Ml?Ml.boxStartIndex:fn.collisionBoxArray.length,__=Ml?Ml.boxEndIndex:fn.collisionBoxArray.length,w_=hl?hl.boxStartIndex:fn.collisionBoxArray.length,b_=hl?hl.boxEndIndex:fn.collisionBoxArray.length,x_=Qc?Qc.boxStartIndex:fn.collisionBoxArray.length,B_=Qc?Qc.boxEndIndex:fn.collisionBoxArray.length,C_=VA?VA.boxStartIndex:fn.collisionBoxArray.length,E_=VA?VA.boxEndIndex:fn.collisionBoxArray.length;let Dl=-1;const Kd=(Xo,lc)=>Xo&&Xo.circleDiameter?Math.max(Xo.circleDiameter,lc):lc;Dl=Kd(Ml,Dl),Dl=Kd(hl,Dl),Dl=Kd(Qc,Dl),Dl=Kd(VA,Dl);const t0=Dl>-1?1:0;t0&&(Dl*=ul/Os),fn.glyphOffsetArray.length>=fu.MAX_GLYPHS&&Z("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),$n.sortKey!==void 0&&fn.addToSortKeyRanges(fn.symbolInstances.length,$n.sortKey),fn.symbolInstances.emplaceBack(Gn.x,Gn.y,kc.right>=0?kc.right:-1,kc.center>=0?kc.center:-1,kc.left>=0?kc.left:-1,kc.vertical||-1,mm,gm,$g,v_,__,w_,b_,x_,B_,C_,E_,Va,Cf,Yg,Wo,Pc,t0,0,Hs,ym,vm,Dl)}(o,_n,wr,A,f,y,Xr,o.layers[0],o.collisionBoxArray,n.index,n.sourceLayerIndex,o.index,Ze,[Dt,Dt,Dt,Dt],Yr,z,Kt,or,on,Be,n,C,X,ie,I)};if(Wr==="line")for(const wr of Vo(n.geometry,0,0,Ci,Ci)){const _n=om(wr,xt,ar,A.vertical||Ee,f,24,Et,o.overscaling,Ci);for(const fn of _n){const Gn=Ee;Gn&&um(o,Gn.text,Mr,fn)||Or(wr,fn)}}else if(Wr==="line-center"){for(const wr of n.geometry)if(wr.length>1){const _n=am(wr,ar,A.vertical||Ee,f,24,Et);_n&&Or(wr,_n)}}else if(n.type==="Polygon")for(const wr of Qu(n.geometry,0)){const _n=uu(wr,16);Or(wr[0],new Al(_n.x,_n.y,0))}else if(n.type==="LineString")for(const wr of n.geometry)Or(wr,new Al(wr[0].x,wr[0].y,0));else if(n.type==="Point")for(const wr of n.geometry)for(const _n of wr)Or([_n],new Al(_n.x,_n.y,0))}const Ac=32640;function Hd(o,n,A,f,y,C,I,D,z,X,ie,ce,ye,Be,Ee){const $e=function(Kt,xt,Dt,or,ar,Yr,on,Wr){const Mr=or.layout.get("text-rotate").evaluate(Yr,{})*Math.PI/180,Ur=[];for(const Xr of xt.positionedLines)for(const Or of Xr.positionedGlyphs){if(!Or.rect)continue;const wr=Or.rect||{};let _n=4,fn=!0,Gn=1,$i=0;const cs=(ar||Wr)&&Or.vertical,ea=Or.metrics.advance*Or.scale/2;if(Wr&&xt.verticalizable){const ms=(Or.scale-1)*Os,ma=(Os-Or.metrics.width*Or.scale)/2;$i=Xr.lineOffset/2-(Or.imageName?-ma:ms)}if(Or.imageName){const ms=on[Or.imageName];fn=ms.sdf,Gn=ms.pixelRatio,_n=1/Gn}const HA=ar?[Or.x+ea,Or.y]:[0,0];let Ha=ar?[0,0]:[Or.x+ea+Dt[0],Or.y+Dt[1]-$i],zs=[0,0];cs&&(zs=Ha,Ha=[0,0]);const pa=(Or.metrics.left-_n)*Or.scale-ea+Ha[0],Va=(-Or.metrics.top-_n)*Or.scale+Ha[1],po=pa+wr.w*Or.scale/Gn,Ko=Va+wr.h*Or.scale/Gn,Hs=new Le(pa,Va),Ka=new Le(po,Va),mo=new Le(pa,Ko),To=new Le(po,Ko);if(cs){const ms=new Le(-ea,ea-Uc),ma=-Math.PI/2,$n=12-ea,yA=new Le(22-$n,-(Or.imageName?$n:0)),Ga=new Le(...zs);Hs._rotateAround(ma,ms)._add(yA)._add(Ga),Ka._rotateAround(ma,ms)._add(yA)._add(Ga),mo._rotateAround(ma,ms)._add(yA)._add(Ga),To._rotateAround(ma,ms)._add(yA)._add(Ga)}if(Mr){const ms=Math.sin(Mr),ma=Math.cos(Mr),$n=[ma,-ms,ms,ma];Hs._matMult($n),Ka._matMult($n),mo._matMult($n),To._matMult($n)}const Go=new Le(0,0),qo=new Le(0,0);Ur.push({tl:Hs,tr:Ka,bl:mo,br:To,tex:wr,writingMode:xt.writingMode,glyphOffset:HA,sectionIndex:Or.sectionIndex,isSDF:fn,pixelOffsetTL:Go,pixelOffsetBR:qo,minFontScaleX:0,minFontScaleY:0})}return Ur}(0,A,D,y,C,I,f,o.allowVerticalPlacement),Ze=o.textSizeData;let Et=null;Ze.kind==="source"?(Et=[ol*y.layout.get("text-size").evaluate(I,{})],Et[0]>Ac&&Z(`${o.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):Ze.kind==="composite"&&(Et=[ol*Be.compositeTextSizes[0].evaluate(I,{},Ee),ol*Be.compositeTextSizes[1].evaluate(I,{},Ee)],(Et[0]>Ac||Et[1]>Ac)&&Z(`${o.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),o.addSymbols(o.text,$e,Et,D,C,I,X,n,z.lineStartIndex,z.lineLength,ye,Ee);for(const Kt of ie)ce[Kt]=o.text.placedSymbolArray.length-1;return 4*$e.length}function Vd(o){for(const n in o)return o[n];return null}function um(o,n,A,f){const y=o.compareText;if(n in y){const C=y[n];for(let I=C.length-1;I>=0;I--)if(f.dist(C[I])<A)return!0}else y[n]=[];return y[n].push(f),!1}const hm=El.VectorTileFeature.types,fm=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Lh(o,n,A,f,y,C,I,D,z,X,ie,ce,ye){const Be=D?Math.min(Ac,Math.round(D[0])):0,Ee=D?Math.min(Ac,Math.round(D[1])):0;o.emplaceBack(n,A,Math.round(32*f),Math.round(32*y),C,I,(Be<<1)+(z?1:0),Ee,16*X,16*ie,256*ce,256*ye)}function bf(o,n,A){o.emplaceBack(n.x,n.y,A),o.emplaceBack(n.x,n.y,A),o.emplaceBack(n.x,n.y,A),o.emplaceBack(n.x,n.y,A)}function dm(o){for(const n of o.sections)if(yl(n.text))return!0;return!1}class xf{constructor(n){this.layoutVertexArray=new be,this.indexArray=new Ft,this.programConfigurations=n,this.segments=new Je,this.dynamicLayoutVertexArray=new Se,this.opacityVertexArray=new De,this.placedSymbolArray=new ur}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,A,f,y){this.isEmpty()||(f&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,Ul.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,A),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,Cd.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,fm,!0),this.opacityVertexBuffer.itemSize=1),(f||y)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}kr("SymbolBuffers",xf);class Bf{constructor(n,A,f){this.layoutVertexArray=new n,this.layoutAttributes=A,this.indexArray=new f,this.segments=new Je,this.collisionVertexArray=new Tt}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,Ed.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}kr("CollisionBuffers",Bf);class fu{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(I=>I.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=So([]),this.placementViewportMatrix=So([]);const A=this.layers[0]._unevaluatedLayout._values;this.textSizeData=yf(this.zoom,A["text-size"]),this.iconSizeData=yf(this.zoom,A["icon-size"]);const f=this.layers[0].layout,y=f.get("symbol-sort-key"),C=f.get("symbol-z-order");this.canOverlap=T(f,"text-overlap","text-allow-overlap")!=="never"||T(f,"icon-overlap","icon-allow-overlap")!=="never"||f.get("text-ignore-placement")||f.get("icon-ignore-placement"),this.sortFeaturesByKey=C!=="viewport-y"&&!y.isConstant(),this.sortFeaturesByY=(C==="viewport-y"||C==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,f.get("symbol-placement")==="point"&&(this.writingModes=f.get("text-writing-mode").map(I=>a.WritingMode[I])),this.stateDependentLayerIds=this.layers.filter(I=>I.isStateDependent()).map(I=>I.id),this.sourceID=n.sourceID}createArrays(){this.text=new xf(new Ki(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new xf(new Ki(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new Tr,this.lineVertexArray=new qr,this.symbolInstances=new Rr}calculateGlyphDependencies(n,A,f,y,C){for(let I=0;I<n.length;I++)if(A[n.charCodeAt(I)]=!0,(f||y)&&C){const D=au[n.charAt(I)];D&&(A[D.charCodeAt(0)]=!0)}}populate(n,A,f){const y=this.layers[0],C=y.layout,I=C.get("text-font"),D=C.get("text-field"),z=C.get("icon-image"),X=(D.value.kind!=="constant"||D.value.value instanceof Ye&&!D.value.value.isEmpty()||D.value.value.toString().length>0)&&(I.value.kind!=="constant"||I.value.value.length>0),ie=z.value.kind!=="constant"||!!z.value.value||Object.keys(z.parameters).length>0,ce=C.get("symbol-sort-key");if(this.features=[],!X&&!ie)return;const ye=A.iconDependencies,Be=A.glyphDependencies,Ee=A.availableImages,$e=new Ui(this.zoom);for(const{feature:Ze,id:Et,index:Kt,sourceLayerIndex:xt}of n){const Dt=y._featureFilter.needGeometry,or=Fo(Ze,Dt);if(!y._featureFilter.filter($e,or,f))continue;let ar,Yr;if(Dt||(or.geometry=uo(Ze)),X){const Wr=y.getValueAndResolveTokens("text-field",or,f,Ee),Mr=Ye.factory(Wr);dm(Mr)&&(this.hasRTLText=!0),(!this.hasRTLText||fA()==="unavailable"||this.hasRTLText&&Fa.isParsed())&&(ar=Pu(Mr,y,or))}if(ie){const Wr=y.getValueAndResolveTokens("icon-image",or,f,Ee);Yr=Wr instanceof ut?Wr:ut.fromString(Wr)}if(!ar&&!Yr)continue;const on=this.sortFeaturesByKey?ce.evaluate(or,{},f):void 0;if(this.features.push({id:Et,text:ar,icon:Yr,index:Kt,sourceLayerIndex:xt,geometry:or.geometry,properties:Ze.properties,type:hm[Ze.type],sortKey:on}),Yr&&(ye[Yr.name]=!0),ar){const Wr=I.evaluate(or,{},f).join(","),Mr=C.get("text-rotation-alignment")!=="viewport"&&C.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(a.WritingMode.vertical)>=0;for(const Ur of ar.sections)if(Ur.image)ye[Ur.image.name]=!0;else{const Xr=Ra(ar.toString()),Or=Ur.fontStack||Wr,wr=Be[Or]=Be[Or]||{};this.calculateGlyphDependencies(Ur.text,wr,Mr,this.allowVerticalPlacement,Xr)}}}C.get("symbol-placement")==="line"&&(this.features=function(Ze){const Et={},Kt={},xt=[];let Dt=0;function or(Wr){xt.push(Ze[Wr]),Dt++}function ar(Wr,Mr,Ur){const Xr=Kt[Wr];return delete Kt[Wr],Kt[Mr]=Xr,xt[Xr].geometry[0].pop(),xt[Xr].geometry[0]=xt[Xr].geometry[0].concat(Ur[0]),Xr}function Yr(Wr,Mr,Ur){const Xr=Et[Mr];return delete Et[Mr],Et[Wr]=Xr,xt[Xr].geometry[0].shift(),xt[Xr].geometry[0]=Ur[0].concat(xt[Xr].geometry[0]),Xr}function on(Wr,Mr,Ur){const Xr=Ur?Mr[0][Mr[0].length-1]:Mr[0][0];return`${Wr}:${Xr.x}:${Xr.y}`}for(let Wr=0;Wr<Ze.length;Wr++){const Mr=Ze[Wr],Ur=Mr.geometry,Xr=Mr.text?Mr.text.toString():null;if(!Xr){or(Wr);continue}const Or=on(Xr,Ur),wr=on(Xr,Ur,!0);if(Or in Kt&&wr in Et&&Kt[Or]!==Et[wr]){const _n=Yr(Or,wr,Ur),fn=ar(Or,wr,xt[_n].geometry);delete Et[Or],delete Kt[wr],Kt[on(Xr,xt[fn].geometry,!0)]=fn,xt[_n].geometry=null}else Or in Kt?ar(Or,wr,Ur):wr in Et?Yr(Or,wr,Ur):(or(Wr),Et[Or]=Dt-1,Kt[wr]=Dt-1)}return xt.filter(Wr=>Wr.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Ze,Et)=>Ze.sortKey-Et.sortKey)}update(n,A,f){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,A,this.layers,f),this.icon.programConfigurations.updatePaintArrays(n,A,this.layers,f))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,A){const f=this.lineVertexArray.length;if(n.segment!==void 0){let y=n.dist(A[n.segment+1]),C=n.dist(A[n.segment]);const I={};for(let D=n.segment+1;D<A.length;D++)I[D]={x:A[D].x,y:A[D].y,tileUnitDistanceFromAnchor:y},D<A.length-1&&(y+=A[D+1].dist(A[D]));for(let D=n.segment||0;D>=0;D--)I[D]={x:A[D].x,y:A[D].y,tileUnitDistanceFromAnchor:C},D>0&&(C+=A[D-1].dist(A[D]));for(let D=0;D<A.length;D++){const z=I[D];this.lineVertexArray.emplaceBack(z.x,z.y,z.tileUnitDistanceFromAnchor)}}return{lineStartIndex:f,lineLength:this.lineVertexArray.length-f}}addSymbols(n,A,f,y,C,I,D,z,X,ie,ce,ye){const Be=n.indexArray,Ee=n.layoutVertexArray,$e=n.segments.prepareSegment(4*A.length,Ee,Be,this.canOverlap?I.sortKey:void 0),Ze=this.glyphOffsetArray.length,Et=$e.vertexLength,Kt=this.allowVerticalPlacement&&D===a.WritingMode.vertical?Math.PI/2:0,xt=I.text&&I.text.sections;for(let Dt=0;Dt<A.length;Dt++){const{tl:or,tr:ar,bl:Yr,br:on,tex:Wr,pixelOffsetTL:Mr,pixelOffsetBR:Ur,minFontScaleX:Xr,minFontScaleY:Or,glyphOffset:wr,isSDF:_n,sectionIndex:fn}=A[Dt],Gn=$e.vertexLength,$i=wr[1];Lh(Ee,z.x,z.y,or.x,$i+or.y,Wr.x,Wr.y,f,_n,Mr.x,Mr.y,Xr,Or),Lh(Ee,z.x,z.y,ar.x,$i+ar.y,Wr.x+Wr.w,Wr.y,f,_n,Ur.x,Mr.y,Xr,Or),Lh(Ee,z.x,z.y,Yr.x,$i+Yr.y,Wr.x,Wr.y+Wr.h,f,_n,Mr.x,Ur.y,Xr,Or),Lh(Ee,z.x,z.y,on.x,$i+on.y,Wr.x+Wr.w,Wr.y+Wr.h,f,_n,Ur.x,Ur.y,Xr,Or),bf(n.dynamicLayoutVertexArray,z,Kt),Be.emplaceBack(Gn,Gn+1,Gn+2),Be.emplaceBack(Gn+1,Gn+2,Gn+3),$e.vertexLength+=4,$e.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(wr[0]),Dt!==A.length-1&&fn===A[Dt+1].sectionIndex||n.programConfigurations.populatePaintArrays(Ee.length,I,I.index,{},ye,xt&&xt[fn])}n.placedSymbolArray.emplaceBack(z.x,z.y,Ze,this.glyphOffsetArray.length-Ze,Et,X,ie,z.segment,f?f[0]:0,f?f[1]:0,y[0],y[1],D,0,!1,0,ce)}_addCollisionDebugVertex(n,A,f,y,C,I){return A.emplaceBack(0,0),n.emplaceBack(f.x,f.y,y,C,Math.round(I.x),Math.round(I.y))}addCollisionDebugVertices(n,A,f,y,C,I,D){const z=C.segments.prepareSegment(4,C.layoutVertexArray,C.indexArray),X=z.vertexLength,ie=C.layoutVertexArray,ce=C.collisionVertexArray,ye=D.anchorX,Be=D.anchorY;this._addCollisionDebugVertex(ie,ce,I,ye,Be,new Le(n,A)),this._addCollisionDebugVertex(ie,ce,I,ye,Be,new Le(f,A)),this._addCollisionDebugVertex(ie,ce,I,ye,Be,new Le(f,y)),this._addCollisionDebugVertex(ie,ce,I,ye,Be,new Le(n,y)),z.vertexLength+=4;const Ee=C.indexArray;Ee.emplaceBack(X,X+1),Ee.emplaceBack(X+1,X+2),Ee.emplaceBack(X+2,X+3),Ee.emplaceBack(X+3,X),z.primitiveLength+=4}addDebugCollisionBoxes(n,A,f,y){for(let C=n;C<A;C++){const I=this.collisionBoxArray.get(C);this.addCollisionDebugVertices(I.x1,I.y1,I.x2,I.y2,y?this.textCollisionBox:this.iconCollisionBox,I.anchorPoint,f)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Bf(ft,cf.members,pt),this.iconCollisionBox=new Bf(ft,cf.members,pt);for(let n=0;n<this.symbolInstances.length;n++){const A=this.symbolInstances.get(n);this.addDebugCollisionBoxes(A.textBoxStartIndex,A.textBoxEndIndex,A,!0),this.addDebugCollisionBoxes(A.verticalTextBoxStartIndex,A.verticalTextBoxEndIndex,A,!0),this.addDebugCollisionBoxes(A.iconBoxStartIndex,A.iconBoxEndIndex,A,!1),this.addDebugCollisionBoxes(A.verticalIconBoxStartIndex,A.verticalIconBoxEndIndex,A,!1)}}_deserializeCollisionBoxesForSymbol(n,A,f,y,C,I,D,z,X){const ie={};for(let ce=A;ce<f;ce++){const ye=n.get(ce);ie.textBox={x1:ye.x1,y1:ye.y1,x2:ye.x2,y2:ye.y2,anchorPointX:ye.anchorPointX,anchorPointY:ye.anchorPointY},ie.textFeatureIndex=ye.featureIndex;break}for(let ce=y;ce<C;ce++){const ye=n.get(ce);ie.verticalTextBox={x1:ye.x1,y1:ye.y1,x2:ye.x2,y2:ye.y2,anchorPointX:ye.anchorPointX,anchorPointY:ye.anchorPointY},ie.verticalTextFeatureIndex=ye.featureIndex;break}for(let ce=I;ce<D;ce++){const ye=n.get(ce);ie.iconBox={x1:ye.x1,y1:ye.y1,x2:ye.x2,y2:ye.y2,anchorPointX:ye.anchorPointX,anchorPointY:ye.anchorPointY},ie.iconFeatureIndex=ye.featureIndex;break}for(let ce=z;ce<X;ce++){const ye=n.get(ce);ie.verticalIconBox={x1:ye.x1,y1:ye.y1,x2:ye.x2,y2:ye.y2,anchorPointX:ye.anchorPointX,anchorPointY:ye.anchorPointY},ie.verticalIconFeatureIndex=ye.featureIndex;break}return ie}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let A=0;A<this.symbolInstances.length;A++){const f=this.symbolInstances.get(A);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,f.textBoxStartIndex,f.textBoxEndIndex,f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f.iconBoxStartIndex,f.iconBoxEndIndex,f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,A){const f=n.placedSymbolArray.get(A),y=f.vertexStartIndex+4*f.numGlyphs;for(let C=f.vertexStartIndex;C<y;C+=4)n.indexArray.emplaceBack(C,C+1,C+2),n.indexArray.emplaceBack(C+1,C+2,C+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const A=Math.sin(n),f=Math.cos(n),y=[],C=[],I=[];for(let D=0;D<this.symbolInstances.length;++D){I.push(D);const z=this.symbolInstances.get(D);y.push(0|Math.round(A*z.anchorX+f*z.anchorY)),C.push(z.featureIndex)}return I.sort((D,z)=>y[D]-y[z]||C[z]-C[D]),I}addToSortKeyRanges(n,A){const f=this.sortKeyRanges[this.sortKeyRanges.length-1];f&&f.sortKey===A?f.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:A,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const A of this.symbolInstanceIndexes){const f=this.symbolInstances.get(A);this.featureSortOrder.push(f.featureIndex),[f.rightJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.leftJustifiedTextSymbolIndex].forEach((y,C,I)=>{y>=0&&I.indexOf(y)===C&&this.addIndicesForPlacedSymbol(this.text,y)}),f.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,f.verticalPlacedTextSymbolIndex),f.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.placedIconSymbolIndex),f.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,f.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}kr("SymbolBucket",fu,{omit:["layers","collisionBoxArray","features","compareText"]}),fu.MAX_GLYPHS=65535,fu.addDynamicAttributes=bf;const pm=new os({"symbol-placement":new sn(vt.layout_symbol["symbol-placement"]),"symbol-spacing":new sn(vt.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new sn(vt.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new vn(vt.layout_symbol["symbol-sort-key"]),"symbol-z-order":new sn(vt.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new sn(vt.layout_symbol["icon-allow-overlap"]),"icon-overlap":new sn(vt.layout_symbol["icon-overlap"]),"icon-ignore-placement":new sn(vt.layout_symbol["icon-ignore-placement"]),"icon-optional":new sn(vt.layout_symbol["icon-optional"]),"icon-rotation-alignment":new sn(vt.layout_symbol["icon-rotation-alignment"]),"icon-size":new vn(vt.layout_symbol["icon-size"]),"icon-text-fit":new sn(vt.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new sn(vt.layout_symbol["icon-text-fit-padding"]),"icon-image":new vn(vt.layout_symbol["icon-image"]),"icon-rotate":new vn(vt.layout_symbol["icon-rotate"]),"icon-padding":new vn(vt.layout_symbol["icon-padding"]),"icon-keep-upright":new sn(vt.layout_symbol["icon-keep-upright"]),"icon-offset":new vn(vt.layout_symbol["icon-offset"]),"icon-anchor":new vn(vt.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new sn(vt.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new sn(vt.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new sn(vt.layout_symbol["text-rotation-alignment"]),"text-field":new vn(vt.layout_symbol["text-field"]),"text-font":new vn(vt.layout_symbol["text-font"]),"text-size":new vn(vt.layout_symbol["text-size"]),"text-max-width":new vn(vt.layout_symbol["text-max-width"]),"text-line-height":new sn(vt.layout_symbol["text-line-height"]),"text-letter-spacing":new vn(vt.layout_symbol["text-letter-spacing"]),"text-justify":new vn(vt.layout_symbol["text-justify"]),"text-radial-offset":new vn(vt.layout_symbol["text-radial-offset"]),"text-variable-anchor":new sn(vt.layout_symbol["text-variable-anchor"]),"text-anchor":new vn(vt.layout_symbol["text-anchor"]),"text-max-angle":new sn(vt.layout_symbol["text-max-angle"]),"text-writing-mode":new sn(vt.layout_symbol["text-writing-mode"]),"text-rotate":new vn(vt.layout_symbol["text-rotate"]),"text-padding":new sn(vt.layout_symbol["text-padding"]),"text-keep-upright":new sn(vt.layout_symbol["text-keep-upright"]),"text-transform":new vn(vt.layout_symbol["text-transform"]),"text-offset":new vn(vt.layout_symbol["text-offset"]),"text-allow-overlap":new sn(vt.layout_symbol["text-allow-overlap"]),"text-overlap":new sn(vt.layout_symbol["text-overlap"]),"text-ignore-placement":new sn(vt.layout_symbol["text-ignore-placement"]),"text-optional":new sn(vt.layout_symbol["text-optional"])});var F={paint:new os({"icon-opacity":new vn(vt.paint_symbol["icon-opacity"]),"icon-color":new vn(vt.paint_symbol["icon-color"]),"icon-halo-color":new vn(vt.paint_symbol["icon-halo-color"]),"icon-halo-width":new vn(vt.paint_symbol["icon-halo-width"]),"icon-halo-blur":new vn(vt.paint_symbol["icon-halo-blur"]),"icon-translate":new sn(vt.paint_symbol["icon-translate"]),"icon-translate-anchor":new sn(vt.paint_symbol["icon-translate-anchor"]),"text-opacity":new vn(vt.paint_symbol["text-opacity"]),"text-color":new vn(vt.paint_symbol["text-color"],{runtimeType:wn,getOverride:o=>o.textColor,hasOverride:o=>!!o.textColor}),"text-halo-color":new vn(vt.paint_symbol["text-halo-color"]),"text-halo-width":new vn(vt.paint_symbol["text-halo-width"]),"text-halo-blur":new vn(vt.paint_symbol["text-halo-blur"]),"text-translate":new sn(vt.paint_symbol["text-translate"]),"text-translate-anchor":new sn(vt.paint_symbol["text-translate-anchor"])}),layout:pm};class B{constructor(n){if(n.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=n.property.overrides?n.property.overrides.runtimeType:un,this.defaultValue=n}evaluate(n){if(n.formattedSection){const A=this.defaultValue.property.overrides;if(A&&A.hasOverride(n.formattedSection))return A.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}kr("FormatSectionOverride",B,{omit:["defaultValue"]});class U extends Co{constructor(n){super(n,F)}recalculate(n,A){if(super.recalculate(n,A),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const f=this.layout.get("text-writing-mode");if(f){const y=[];for(const C of f)y.indexOf(C)<0&&y.push(C);this.layout._values["text-writing-mode"]=y}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(n,A,f,y){const C=this.layout.get(n).evaluate(A,{},f,y),I=this._unevaluatedLayout._values[n];return I.isDataDriven()||pi(I.value)||!C?C:function(D,z){return z.replace(/{([^{}]+)}/g,(X,ie)=>ie in D?String(D[ie]):"")}(A.properties,C)}createBucket(n){return new fu(n)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const n of F.paint.overridableProperties){if(!U.hasPaintOverride(this.layout,n))continue;const A=this.paint.get(n),f=new B(A),y=new Wn(f,A.property.specification);let C=null;C=A.value.kind==="constant"||A.value.kind==="source"?new Tn("source",y):new Es("composite",y,A.value.zoomStops),this.paint._values[n]=new Bo(A.property,C,A.parameters)}}_handleOverridablePaintPropertyUpdate(n,A,f){return!(!this.layout||A.isDataDriven()||f.isDataDriven())&&U.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,A){const f=n.get("text-field"),y=F.paint.properties[A];let C=!1;const I=D=>{for(const z of D)if(y.overrides&&y.overrides.hasOverride(z))return void(C=!0)};if(f.value.kind==="constant"&&f.value.value instanceof Ye)I(f.value.value.sections);else if(f.value.kind==="source"){const D=X=>{C||(X instanceof zr&&Ht(X.value)===cr?I(X.value.sections):X instanceof TA?I(X.sections):X.eachChild(D))},z=f.value;z._styleExpression&&D(z._styleExpression.expression)}return C}}function T(o,n,A){let f="never";const y=o.get(n);return y?f=y:o.get(A)&&(f="always"),f}var V={paint:new os({"background-color":new sn(vt.paint_background["background-color"]),"background-pattern":new _l(vt.paint_background["background-pattern"]),"background-opacity":new sn(vt.paint_background["background-opacity"])})},re={paint:new os({"raster-opacity":new sn(vt.paint_raster["raster-opacity"]),"raster-hue-rotate":new sn(vt.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new sn(vt.paint_raster["raster-brightness-min"]),"raster-brightness-max":new sn(vt.paint_raster["raster-brightness-max"]),"raster-saturation":new sn(vt.paint_raster["raster-saturation"]),"raster-contrast":new sn(vt.paint_raster["raster-contrast"]),"raster-resampling":new sn(vt.paint_raster["raster-resampling"]),"raster-fade-duration":new sn(vt.paint_raster["raster-fade-duration"])})};class _e extends Co{constructor(n){super(n,{}),this.onAdd=A=>{this.implementation.onAdd&&this.implementation.onAdd(A,A.painter.context.gl)},this.onRemove=A=>{this.implementation.onRemove&&this.implementation.onRemove(A,A.painter.context.gl)},this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}const Ne={circle:class extends Co{constructor(o){super(o,Yl)}createBucket(o){return new Yi(o)}queryRadius(o){const n=o;return Jl("circle-radius",this,n)+Jl("circle-stroke-width",this,n)+NA(this.paint.get("circle-translate"))}queryIntersectsFeature(o,n,A,f,y,C,I,D){const z=il(o,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),C.angle,I),X=this.paint.get("circle-radius").evaluate(n,A)+this.paint.get("circle-stroke-width").evaluate(n,A),ie=this.paint.get("circle-pitch-alignment")==="map",ce=ie?z:function(Be,Ee){return Be.map($e=>Ec($e,Ee))}(z,D),ye=ie?X*I:X;for(const Be of f)for(const Ee of Be){const $e=ie?Ee:Ec(Ee,D);let Ze=ye;const Et=Cc([],[Ee.x,Ee.y,0,1],D);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Ze*=Et[3]/C.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Ze*=C.cameraToCenterDistance/Et[3]),lh(ce,$e,Ze))return!0}return!1}},heatmap:class extends Co{constructor(o){super(o,Cl),this._updateColorRamp()}createBucket(o){return new Ia(o)}_handleSpecialPaintPropertyUpdate(o){o==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=jA({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}},hillshade:class extends Co{constructor(o){super(o,hh)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}},fill:class extends Co{constructor(o){super(o,pd)}recalculate(o,n){super.recalculate(o,n);const A=this.paint._values["fill-outline-color"];A.value.kind==="constant"&&A.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(o){return new sf(o)}queryRadius(){return NA(this.paint.get("fill-translate"))}queryIntersectsFeature(o,n,A,f,y,C,I){return Cu(il(o,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),C.angle,I),f)}isTileClipped(){return!0}},"fill-extrusion":class extends Co{constructor(o){super(o,_d)}createBucket(o){return new lf(o)}queryRadius(){return NA(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(o,n,A,f,y,C,I,D){const z=il(o,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),C.angle,I),X=this.paint.get("fill-extrusion-height").evaluate(n,A),ie=this.paint.get("fill-extrusion-base").evaluate(n,A),ce=function(Be,Ee,$e,Ze){const Et=[];for(const Kt of Be){const xt=[Kt.x,Kt.y,0,1];Cc(xt,xt,Ee),Et.push(new Le(xt[0]/xt[3],xt[1]/xt[3]))}return Et}(z,D),ye=function(Be,Ee,$e,Ze){const Et=[],Kt=[],xt=Ze[8]*Ee,Dt=Ze[9]*Ee,or=Ze[10]*Ee,ar=Ze[11]*Ee,Yr=Ze[8]*$e,on=Ze[9]*$e,Wr=Ze[10]*$e,Mr=Ze[11]*$e;for(const Ur of Be){const Xr=[],Or=[];for(const wr of Ur){const _n=wr.x,fn=wr.y,Gn=Ze[0]*_n+Ze[4]*fn+Ze[12],$i=Ze[1]*_n+Ze[5]*fn+Ze[13],cs=Ze[2]*_n+Ze[6]*fn+Ze[14],ea=Ze[3]*_n+Ze[7]*fn+Ze[15],HA=cs+or,Ha=ea+ar,zs=Gn+Yr,pa=$i+on,Va=cs+Wr,po=ea+Mr,Ko=new Le((Gn+xt)/Ha,($i+Dt)/Ha);Ko.z=HA/Ha,Xr.push(Ko);const Hs=new Le(zs/po,pa/po);Hs.z=Va/po,Or.push(Hs)}Et.push(Xr),Kt.push(Or)}return[Et,Kt]}(f,ie,X,D);return function(Be,Ee,$e){let Ze=1/0;Cu($e,Ee)&&(Ze=wd($e,Ee[0]));for(let Et=0;Et<Ee.length;Et++){const Kt=Ee[Et],xt=Be[Et];for(let Dt=0;Dt<Kt.length-1;Dt++){const or=Kt[Dt],ar=[or,Kt[Dt+1],xt[Dt+1],xt[Dt],or];Kc($e,ar)&&(Ze=Math.min(Ze,wd($e,ar)))}}return Ze!==1/0&&Ze}(ye[0],ye[1],ce)}},line:class extends Co{constructor(o){super(o,Il),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(o){o==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof qs,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER)}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(o,n){super.recalculate(o,n),this.paint._values["line-floorwidth"]=Tl.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,o)}createBucket(o){return new Sl(o)}queryRadius(o){const n=o,A=su(Jl("line-width",this,n),Jl("line-gap-width",this,n)),f=Jl("line-offset",this,n);return A/2+Math.abs(f)+NA(this.paint.get("line-translate"))}queryIntersectsFeature(o,n,A,f,y,C,I){const D=il(o,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),C.angle,I),z=I/2*su(this.paint.get("line-width").evaluate(n,A),this.paint.get("line-gap-width").evaluate(n,A)),X=this.paint.get("line-offset").evaluate(n,A);return X&&(f=function(ie,ce){const ye=[];for(let Be=0;Be<ie.length;Be++){const Ee=ie[Be],$e=[];for(let Ze=0;Ze<Ee.length;Ze++){const Et=Ee[Ze-1],Kt=Ee[Ze],xt=Ee[Ze+1],Dt=Ze===0?new Le(0,0):Kt.sub(Et)._unit()._perp(),or=Ze===Ee.length-1?new Le(0,0):xt.sub(Kt)._unit()._perp(),ar=Dt._add(or)._unit(),Yr=ar.x*or.x+ar.y*or.y;Yr!==0&&ar._mult(1/Yr),$e.push(ar._mult(ce)._add(Kt))}ye.push($e)}return ye}(f,X*I)),function(ie,ce,ye){for(let Be=0;Be<ce.length;Be++){const Ee=ce[Be];if(ie.length>=3){for(let $e=0;$e<Ee.length;$e++)if(bl(ie,Ee[$e]))return!0}if(Gc(ie,Ee,ye))return!0}return!1}(D,f,z)}isTileClipped(){return!0}},symbol:U,background:class extends Co{constructor(o){super(o,V)}},raster:class extends Co{constructor(o){super(o,re)}}};class Pe{constructor(n){this._callback=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){delete this._channel,this._callback=()=>{}}}const yt=63710088e-1;class mt{constructor(n,A){if(isNaN(n)||isNaN(A))throw new Error(`Invalid LngLat object: (${n}, ${A})`);if(this.lng=+n,this.lat=+A,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new mt(x(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const A=Math.PI/180,f=this.lat*A,y=n.lat*A,C=Math.sin(f)*Math.sin(y)+Math.cos(f)*Math.cos(y)*Math.cos((n.lng-this.lng)*A);return yt*Math.acos(Math.min(C,1))}toBounds(n=0){const A=360*n/40075017,f=A/Math.cos(Math.PI/180*this.lat);return new Ut(new mt(this.lng-f,this.lat-A),new mt(this.lng+f,this.lat+A))}static convert(n){if(n instanceof mt)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new mt(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new mt(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class Ut{constructor(n,A){n&&(A?this.setSouthWest(n).setNorthEast(A):n.length===4?this.setSouthWest([n[0],n[1]]).setNorthEast([n[2],n[3]]):this.setSouthWest(n[0]).setNorthEast(n[1]))}setNorthEast(n){return this._ne=n instanceof mt?new mt(n.lng,n.lat):mt.convert(n),this}setSouthWest(n){return this._sw=n instanceof mt?new mt(n.lng,n.lat):mt.convert(n),this}extend(n){const A=this._sw,f=this._ne;let y,C;if(n instanceof mt)y=n,C=n;else{if(!(n instanceof Ut))return Array.isArray(n)?n.length===4||n.every(Array.isArray)?this.extend(Ut.convert(n)):this.extend(mt.convert(n)):this;if(y=n._sw,C=n._ne,!y||!C)return this}return A||f?(A.lng=Math.min(y.lng,A.lng),A.lat=Math.min(y.lat,A.lat),f.lng=Math.max(C.lng,f.lng),f.lat=Math.max(C.lat,f.lat)):(this._sw=new mt(y.lng,y.lat),this._ne=new mt(C.lng,C.lat)),this}getCenter(){return new mt((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new mt(this.getWest(),this.getNorth())}getSouthEast(){return new mt(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(n){const{lng:A,lat:f}=mt.convert(n);let y=this._sw.lng<=A&&A<=this._ne.lng;return this._sw.lng>this._ne.lng&&(y=this._sw.lng>=A&&A>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&y}static convert(n){return n instanceof Ut?n:n&&new Ut(n)}}const tr=2*Math.PI*yt;function an(o){return tr*Math.cos(o*Math.PI/180)}function Qr(o){return(180+o)/360}function Jr(o){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+o*Math.PI/360)))/360}function Xn(o,n){return o/an(n)}function gn(o){return 360/Math.PI*Math.atan(Math.exp((180-360*o)*Math.PI/180))-90}class cn{constructor(n,A,f=0){this.x=+n,this.y=+A,this.z=+f}static fromLngLat(n,A=0){const f=mt.convert(n);return new cn(Qr(f.lng),Jr(f.lat),Xn(A,f.lat))}toLngLat(){return new mt(360*this.x-180,gn(this.y))}toAltitude(){return this.z*an(gn(this.y))}meterInMercatorCoordinateUnits(){return 1/tr*(n=gn(this.y),1/Math.cos(n*Math.PI/180));var n}}function Fi(o,n,A){var f=2*Math.PI*6378137/256/Math.pow(2,A);return[o*f-2*Math.PI*6378137/2,n*f-2*Math.PI*6378137/2]}class Zn{constructor(n,A,f){if(n<0||n>25||f<0||f>=Math.pow(2,n)||A<0||A>=Math.pow(2,n))throw new Error(`x=${A}, y=${f}, z=${n} outside of bounds. 0<=x<${Math.pow(2,n)}, 0<=y<${Math.pow(2,n)} 0<=z<=25 `);this.z=n,this.x=A,this.y=f,this.key=si(0,n,n,A,f)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,A,f){const y=(I=this.y,D=this.z,z=Fi(256*(C=this.x),256*(I=Math.pow(2,D)-I-1),D),X=Fi(256*(C+1),256*(I+1),D),z[0]+","+z[1]+","+X[0]+","+X[1]);var C,I,D,z,X;const ie=function(ce,ye,Be){let Ee,$e="";for(let Ze=ce;Ze>0;Ze--)Ee=1<<Ze-1,$e+=(ye&Ee?1:0)+(Be&Ee?2:0);return $e}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(f==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,A>1?"@2x":"").replace(/{quadkey}/g,ie).replace(/{bbox-epsg-3857}/g,y)}isChildOf(n){const A=this.z-n.z;return A>0&&n.x===this.x>>A&&n.y===this.y>>A}getTilePoint(n){const A=Math.pow(2,this.z);return new Le((n.x*A-this.x)*Ci,(n.y*A-this.y)*Ci)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Rn{constructor(n,A){this.wrap=n,this.canonical=A,this.key=si(n,A.z,A.z,A.x,A.y)}}class Hr{constructor(n,A,f,y,C){if(n<f)throw new Error(`overscaledZ should be >= z; overscaledZ = ${n}; z = ${f}`);this.overscaledZ=n,this.wrap=A,this.canonical=new Zn(f,+y,+C),this.key=si(A,n,f,y,C)}clone(){return new Hr(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const A=this.canonical.z-n;return n>this.canonical.z?new Hr(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Hr(n,this.wrap,n,this.canonical.x>>A,this.canonical.y>>A)}calculateScaledKey(n,A){if(n>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${n}; overscaledZ = ${this.overscaledZ}`);const f=this.canonical.z-n;return n>this.canonical.z?si(this.wrap*+A,n,this.canonical.z,this.canonical.x,this.canonical.y):si(this.wrap*+A,n,n,this.canonical.x>>f,this.canonical.y>>f)}isChildOf(n){if(n.wrap!==this.wrap)return!1;const A=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>A&&n.canonical.y===this.canonical.y>>A}children(n){if(this.overscaledZ>=n)return[new Hr(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const A=this.canonical.z+1,f=2*this.canonical.x,y=2*this.canonical.y;return[new Hr(A,this.wrap,A,f,y),new Hr(A,this.wrap,A,f+1,y),new Hr(A,this.wrap,A,f,y+1),new Hr(A,this.wrap,A,f+1,y+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new Hr(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new Hr(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Rn(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(n){return this.canonical.getTilePoint(new cn(n.x-this.wrap,n.y))}}function si(o,n,A,f,y){(o*=2)<0&&(o=-1*o-1);const C=1<<A;return(C*C*o+C*y+f).toString(36)+A.toString(36)+n.toString(36)}kr("CanonicalTileID",Zn),kr("OverscaledTileID",Hr,{omit:["posMatrix"]});class yi{constructor(n,A,f){if(this.uid=n,A.height!==A.width)throw new RangeError("DEM tiles must be square");if(f&&f!=="mapbox"&&f!=="terrarium")return void Z(`"${f}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=A.height;const y=this.dim=A.height-2;this.data=new Uint32Array(A.data.buffer),this.encoding=f||"mapbox";for(let C=0;C<y;C++)this.data[this._idx(-1,C)]=this.data[this._idx(0,C)],this.data[this._idx(y,C)]=this.data[this._idx(y-1,C)],this.data[this._idx(C,-1)]=this.data[this._idx(C,0)],this.data[this._idx(C,y)]=this.data[this._idx(C,y-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(y,-1)]=this.data[this._idx(y-1,0)],this.data[this._idx(-1,y)]=this.data[this._idx(0,y-1)],this.data[this._idx(y,y)]=this.data[this._idx(y-1,y-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let C=0;C<y;C++)for(let I=0;I<y;I++){const D=this.get(C,I);D>this.max&&(this.max=D),D<this.min&&(this.min=D)}}get(n,A){const f=new Uint8Array(this.data.buffer),y=4*this._idx(n,A);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(f[y],f[y+1],f[y+2])}getUnpackVector(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]}_idx(n,A){if(n<-1||n>=this.dim+1||A<-1||A>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(A+1)*this.stride+(n+1)}_unpackMapbox(n,A,f){return(256*n*256+256*A+f)/10-1e4}_unpackTerrarium(n,A,f){return 256*n+A+f/256-32768}getPixels(){return new Ta({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(n,A,f){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let y=A*this.dim,C=A*this.dim+this.dim,I=f*this.dim,D=f*this.dim+this.dim;switch(A){case-1:y=C-1;break;case 1:C=y+1}switch(f){case-1:I=D-1;break;case 1:D=I+1}const z=-A*this.dim,X=-f*this.dim;for(let ie=I;ie<D;ie++)for(let ce=y;ce<C;ce++)this.data[this._idx(ce,ie)]=n.data[this._idx(ce+z,ie+X)]}}kr("DEMData",yi);class On{constructor(n){this._stringToNumber={},this._numberToString=[];for(let A=0;A<n.length;A++){const f=n[A];this._stringToNumber[f]=A,this._numberToString[A]=f}}encode(n){return this._stringToNumber[n]}decode(n){if(n>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${n} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[n]}}class ks{constructor(n,A,f,y,C){this.type="Feature",this._vectorTileFeature=n,n._z=A,n._x=f,n._y=y,this.properties=n.properties,this.id=C}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={geometry:this.geometry};for(const A in this)A!=="_geometry"&&A!=="_vectorTileFeature"&&(n[A]=this[A]);return n}}class fo{constructor(n,A){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new zo(Ci,16,0),this.grid3D=new zo(Ci,16,0),this.featureIndexArray=new jn,this.promoteId=A}insert(n,A,f,y,C,I){const D=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(f,y,C);const z=I?this.grid3D:this.grid;for(let X=0;X<A.length;X++){const ie=A[X],ce=[1/0,1/0,-1/0,-1/0];for(let ye=0;ye<ie.length;ye++){const Be=ie[ye];ce[0]=Math.min(ce[0],Be.x),ce[1]=Math.min(ce[1],Be.y),ce[2]=Math.max(ce[2],Be.x),ce[3]=Math.max(ce[3],Be.y)}ce[0]<Ci&&ce[1]<Ci&&ce[2]>=0&&ce[3]>=0&&z.insert(D,ce[0],ce[1],ce[2],ce[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new El.VectorTile(new Ic(this.rawTileData)).layers,this.sourceLayerCoder=new On(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(n,A,f,y){this.loadVTLayers();const C=n.params||{},I=Ci/n.tileSize/n.scale,D=is(C.filter),z=n.queryGeometry,X=n.queryPadding*I,ie=Ni(z),ce=this.grid.query(ie.minX-X,ie.minY-X,ie.maxX+X,ie.maxY+X),ye=Ni(n.cameraQueryGeometry),Be=this.grid3D.query(ye.minX-X,ye.minY-X,ye.maxX+X,ye.maxY+X,(Ze,Et,Kt,xt)=>function(Dt,or,ar,Yr,on){for(const Mr of Dt)if(or<=Mr.x&&ar<=Mr.y&&Yr>=Mr.x&&on>=Mr.y)return!0;const Wr=[new Le(or,ar),new Le(or,on),new Le(Yr,on),new Le(Yr,ar)];if(Dt.length>2){for(const Mr of Wr)if(bl(Dt,Mr))return!0}for(let Mr=0;Mr<Dt.length-1;Mr++)if(xl(Dt[Mr],Dt[Mr+1],Wr))return!0;return!1}(n.cameraQueryGeometry,Ze-X,Et-X,Kt+X,xt+X));for(const Ze of Be)ce.push(Ze);ce.sort(Ua);const Ee={};let $e;for(let Ze=0;Ze<ce.length;Ze++){const Et=ce[Ze];if(Et===$e)continue;$e=Et;const Kt=this.featureIndexArray.get(Et);let xt=null;this.loadMatchingFeature(Ee,Kt.bucketIndex,Kt.sourceLayerIndex,Kt.featureIndex,D,C.layers,C.availableImages,A,f,y,(Dt,or,ar)=>(xt||(xt=uo(Dt)),or.queryIntersectsFeature(z,Dt,ar,xt,this.z,n.transform,I,n.pixelPosMatrix)))}return Ee}loadMatchingFeature(n,A,f,y,C,I,D,z,X,ie,ce){const ye=this.bucketLayerIDs[A];if(I&&!function(Ze,Et){for(let Kt=0;Kt<Ze.length;Kt++)if(Et.indexOf(Ze[Kt])>=0)return!0;return!1}(I,ye))return;const Be=this.sourceLayerCoder.decode(f),Ee=this.vtLayers[Be].feature(y);if(C.needGeometry){const Ze=Fo(Ee,!0);if(!C.filter(new Ui(this.tileID.overscaledZ),Ze,this.tileID.canonical))return}else if(!C.filter(new Ui(this.tileID.overscaledZ),Ee))return;const $e=this.getId(Ee,Be);for(let Ze=0;Ze<ye.length;Ze++){const Et=ye[Ze];if(I&&I.indexOf(Et)<0)continue;const Kt=z[Et];if(!Kt)continue;let xt={};$e&&ie&&(xt=ie.getState(Kt.sourceLayer||"_geojsonTileLayer",$e));const Dt=Q({},X[Et]);Dt.paint=Io(Dt.paint,Kt.paint,Ee,xt,D),Dt.layout=Io(Dt.layout,Kt.layout,Ee,xt,D);const or=!ce||ce(Ee,Kt,xt);if(!or)continue;const ar=new ks(Ee,this.z,this.x,this.y,$e);ar.layer=Dt;let Yr=n[Et];Yr===void 0&&(Yr=n[Et]=[]),Yr.push({featureIndex:y,feature:ar,intersectionZ:or})}}lookupSymbolFeatures(n,A,f,y,C,I,D,z){const X={};this.loadVTLayers();const ie=is(C);for(const ce of n)this.loadMatchingFeature(X,f,y,ce,ie,I,D,z,A);return X}hasLayer(n){for(const A of this.bucketLayerIDs)for(const f of A)if(n===f)return!0;return!1}getId(n,A){let f=n.id;return this.promoteId&&(f=n.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[A]],typeof f=="boolean"&&(f=Number(f))),f}}function Io(o,n,A,f,y){return k(o,(C,I)=>{const D=n instanceof dA?n.get(I):null;return D&&D.evaluate?D.evaluate(A,f,y):D})}function Ni(o){let n=1/0,A=1/0,f=-1/0,y=-1/0;for(const C of o)n=Math.min(n,C.x),A=Math.min(A,C.y),f=Math.max(f,C.x),y=Math.max(y,C.y);return{minX:n,minY:A,maxX:f,maxY:y}}function Ua(o,n){return n-o}var ll;kr("FeatureIndex",fo,{omit:["rawTileData","sourceLayerCoder"]}),a.PerformanceMarkers=void 0,(ll=a.PerformanceMarkers||(a.PerformanceMarkers={})).create="create",ll.load="load",ll.fullLoad="fullLoad";let La=null,da=[];const Pl=1e3/30,cl={mark(o){performance.mark(o)},frame(o){const n=o;La!=null&&da.push(n-La),La=n},clearMetrics(){La=null,da=[],performance.clearMeasures("loadTime"),performance.clearMeasures("fullLoadTime");for(const o in a.PerformanceMarkers)performance.clearMarks(a.PerformanceMarkers[o])},getPerformanceMetrics(){performance.measure("loadTime",a.PerformanceMarkers.create,a.PerformanceMarkers.load),performance.measure("fullLoadTime",a.PerformanceMarkers.create,a.PerformanceMarkers.fullLoad);const o=performance.getEntriesByName("loadTime")[0].duration,n=performance.getEntriesByName("fullLoadTime")[0].duration,A=da.length,f=1/(da.reduce((C,I)=>C+I,0)/A/1e3),y=da.filter(C=>C>Pl).reduce((C,I)=>C+(I-Pl)/Pl,0);return{loadTime:o,fullLoadTime:n,fps:f,percentDroppedFrames:y/(A+y)*100}}};a.AJAXError=Nt,a.ARRAY_TYPE=$s,a.Actor=class{constructor(o,n,A){this.target=o,this.parent=n,this.mapId=A,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},R(["receive","process"],this),this.invoker=new Pe(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Ae()?o:window}send(o,n,A,f,y=!1){const C=Math.round(1e18*Math.random()).toString(36).substring(0,10);A&&(this.callbacks[C]=A);const I=xe(this.globalScope)?void 0:[];return this.target.postMessage({id:C,type:o,hasCallback:!!A,targetMapId:f,mustQueue:y,sourceMapId:this.mapId,data:Ai(n,I)},I),{cancel:()=>{A&&delete this.callbacks[C],this.target.postMessage({id:C,type:"<cancel>",targetMapId:f,sourceMapId:this.mapId})}}}receive(o){const n=o.data,A=n.id;if(A&&(!n.targetMapId||this.mapId===n.targetMapId))if(n.type==="<cancel>"){delete this.tasks[A];const f=this.cancelCallbacks[A];delete this.cancelCallbacks[A],f&&f()}else Ae()||n.mustQueue?(this.tasks[A]=n,this.taskQueue.push(A),this.invoker.trigger()):this.processTask(A,n)}process(){if(!this.taskQueue.length)return;const o=this.taskQueue.shift(),n=this.tasks[o];delete this.tasks[o],this.taskQueue.length&&this.invoker.trigger(),n&&this.processTask(o,n)}processTask(o,n){if(n.type==="<response>"){const A=this.callbacks[o];delete this.callbacks[o],A&&(n.error?A(Bi(n.error)):A(null,Bi(n.data)))}else{let A=!1;const f=xe(this.globalScope)?void 0:[],y=n.hasCallback?(D,z)=>{A=!0,delete this.cancelCallbacks[o],this.target.postMessage({id:o,type:"<response>",sourceMapId:this.mapId,error:D?Ai(D):null,data:Ai(z,f)},f)}:D=>{A=!0};let C=null;const I=Bi(n.data);if(this.parent[n.type])C=this.parent[n.type](n.sourceMapId,I,y);else if(this.parent.getWorkerSource){const D=n.type.split(".");C=this.parent.getWorkerSource(n.sourceMapId,D[0],I.source)[D[1]](I,y)}else y(new Error(`Could not find function ${n.type}`));!A&&C&&C.cancel&&(this.cancelCallbacks[o]=C.cancel)}}remove(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)}},a.AlphaImage=rc,a.CanonicalTileID=Zn,a.CollisionBoxArray=Xt,a.CollisionCircleLayoutArray=class extends se{},a.Color=Te,a.DEMData=yi,a.DataConstantProperty=sn,a.DictionaryCoder=On,a.EXTENT=Ci,a.ErrorEvent=Zr,a.EvaluationParameters=Ui,a.Event=xr,a.Evented=pn,a.FeatureIndex=fo,a.FillBucket=sf,a.FillExtrusionBucket=lf,a.GeoJSONFeature=ks,a.ImageAtlas=Tc,a.ImagePosition=rn,a.LineBucket=Sl,a.LineStripIndexArray=class extends We{},a.LngLat=mt,a.LngLatBounds=Ut,a.MercatorCoordinate=cn,a.ONE_EM=Os,a.OverscaledTileID=Hr,a.PerformanceUtils=cl,a.PosArray=b,a.Properties=os,a.QuadTriangleArray=class extends we{},a.RGBAImage=Ta,a.RasterBoundsArray=class extends g{},a.RequestPerformance=class{constructor(o){this._marks={start:[o.url,"start"].join("#"),end:[o.url,"end"].join("#"),measure:o.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let o=performance.getEntriesByName(this._marks.measure);return o.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),o=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),o}},a.ResourceType=ht,a.SegmentVector=Je,a.SymbolBucket=fu,a.Transitionable=DA,a.TriangleIndexArray=Ft,a.Uniform1f=li,a.Uniform1i=class extends Hn{constructor(o,n){super(o,n),this.current=0}set(o){this.current!==o&&(this.current=o,this.gl.uniform1i(this.location,o))}},a.Uniform2f=class extends Hn{constructor(o,n){super(o,n),this.current=[0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]||(this.current=o,this.gl.uniform2f(this.location,o[0],o[1]))}},a.Uniform3f=class extends Hn{constructor(o,n){super(o,n),this.current=[0,0,0]}set(o){o[0]===this.current[0]&&o[1]===this.current[1]&&o[2]===this.current[2]||(this.current=o,this.gl.uniform3f(this.location,o[0],o[1],o[2]))}},a.Uniform4f=ci,a.UniformColor=Un,a.UniformMatrix4f=class extends Hn{constructor(o,n){super(o,n),this.current=Is}set(o){if(o[12]!==this.current[12]||o[0]!==this.current[0])return this.current=o,void this.gl.uniformMatrix4fv(this.location,!1,o);for(let n=1;n<16;n++)if(o[n]!==this.current[n]){this.current=o,this.gl.uniformMatrix4fv(this.location,!1,o);break}}},a.UnwrappedTileID=Rn,a.ValidationError=nt,a.ZoomHistory=Zi,a.add=function(o,n,A){return o[0]=n[0]+A[0],o[1]=n[1]+A[1],o[2]=n[2]+A[2],o},a.addDynamicAttributes=bf,a.asyncAll=function(o,n,A){if(!o.length)return A(null,[]);let f=o.length;const y=new Array(o.length);let C=null;o.forEach((I,D)=>{n(I,(z,X)=>{z&&(C=z),y[D]=X,--f==0&&A(C,y)})})},a.bezier=p,a.bindAll=R,a.cacheEntryPossiblyAdded=function(o){Ve++,Ve>Fe&&(o.getActor().send("enforceCacheSizeLimit",te),Ve=0)},a.clamp=w,a.clearTileCache=function(o){const n=caches.delete(rt);o&&n.catch(o).then(()=>o())},a.clipLine=Vo,a.clone=function(o){var n=new $s(16);return n[0]=o[0],n[1]=o[1],n[2]=o[2],n[3]=o[3],n[4]=o[4],n[5]=o[5],n[6]=o[6],n[7]=o[7],n[8]=o[8],n[9]=o[9],n[10]=o[10],n[11]=o[11],n[12]=o[12],n[13]=o[13],n[14]=o[14],n[15]=o[15],n},a.clone$1=G,a.clone$2=function(o){var n=new $s(3);return n[0]=o[0],n[1]=o[1],n[2]=o[2],n},a.collisionCircleLayout=uf,a.config=Ue,a.copy=function(o,n){return o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[4]=n[4],o[5]=n[5],o[6]=n[6],o[7]=n[7],o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15],o},a.create=function(){var o=new $s(16);return $s!=Float32Array&&(o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0),o[0]=1,o[5]=1,o[10]=1,o[15]=1,o},a.create$1=$l,a.createExpression=mi,a.createFilter=is,a.createLayout=ds,a.createStyleLayer=function(o){return o.type==="custom"?new _e(o):new Ne[o.type](o)},a.cross=function(o,n,A){var f=n[0],y=n[1],C=n[2],I=A[0],D=A[1],z=A[2];return o[0]=y*z-C*D,o[1]=C*I-f*z,o[2]=f*D-y*I,o},a.dot=function(o,n){return o[0]*n[0]+o[1]*n[1]+o[2]*n[2]},a.dot$1=function(o,n){return o[0]*n[0]+o[1]*n[1]+o[2]*n[2]+o[3]*n[3]},a.ease=E,a.emitValidationErrors=Ao,a.enforceCacheSizeLimit=function(o){Qe(),je&&je.then(n=>{n.keys().then(A=>{for(let f=0;f<A.length-o;f++)n.delete(A[f])})})},a.equals=function(o,n){var A=o[0],f=o[1],y=o[2],C=o[3],I=o[4],D=o[5],z=o[6],X=o[7],ie=o[8],ce=o[9],ye=o[10],Be=o[11],Ee=o[12],$e=o[13],Ze=o[14],Et=o[15],Kt=n[0],xt=n[1],Dt=n[2],or=n[3],ar=n[4],Yr=n[5],on=n[6],Wr=n[7],Mr=n[8],Ur=n[9],Xr=n[10],Or=n[11],wr=n[12],_n=n[13],fn=n[14],Gn=n[15];return Math.abs(A-Kt)<=fa*Math.max(1,Math.abs(A),Math.abs(Kt))&&Math.abs(f-xt)<=fa*Math.max(1,Math.abs(f),Math.abs(xt))&&Math.abs(y-Dt)<=fa*Math.max(1,Math.abs(y),Math.abs(Dt))&&Math.abs(C-or)<=fa*Math.max(1,Math.abs(C),Math.abs(or))&&Math.abs(I-ar)<=fa*Math.max(1,Math.abs(I),Math.abs(ar))&&Math.abs(D-Yr)<=fa*Math.max(1,Math.abs(D),Math.abs(Yr))&&Math.abs(z-on)<=fa*Math.max(1,Math.abs(z),Math.abs(on))&&Math.abs(X-Wr)<=fa*Math.max(1,Math.abs(X),Math.abs(Wr))&&Math.abs(ie-Mr)<=fa*Math.max(1,Math.abs(ie),Math.abs(Mr))&&Math.abs(ce-Ur)<=fa*Math.max(1,Math.abs(ce),Math.abs(Ur))&&Math.abs(ye-Xr)<=fa*Math.max(1,Math.abs(ye),Math.abs(Xr))&&Math.abs(Be-Or)<=fa*Math.max(1,Math.abs(Be),Math.abs(Or))&&Math.abs(Ee-wr)<=fa*Math.max(1,Math.abs(Ee),Math.abs(wr))&&Math.abs($e-_n)<=fa*Math.max(1,Math.abs($e),Math.abs(_n))&&Math.abs(Ze-fn)<=fa*Math.max(1,Math.abs(Ze),Math.abs(fn))&&Math.abs(Et-Gn)<=fa*Math.max(1,Math.abs(Et),Math.abs(Gn))},a.evaluateSizeForFeature=function(o,{uSize:n,uSizeT:A},{lowerSize:f,upperSize:y}){return o.kind==="source"?f/ol:o.kind==="composite"?ii(f/ol,y/ol,A):n},a.evaluateSizeForZoom=function(o,n){let A=0,f=0;if(o.kind==="constant")f=o.layoutSize;else if(o.kind!=="source"){const{interpolationType:y,minZoom:C,maxZoom:I}=o,D=y?w(Cs.interpolationFactor(y,n,C,I),0,1):0;o.kind==="camera"?f=ii(o.minSize,o.maxSize,D):A=D}return{uSizeT:A,uSize:f}},a.evaluateVariableOffset=zd,a.evented=el,a.exported=ze,a.exported$1=st,a.extend=Q,a.filterObject=O,a.fromRotation=function(o,n){var A=Math.sin(n),f=Math.cos(n);return o[0]=f,o[1]=A,o[2]=0,o[3]=-A,o[4]=f,o[5]=0,o[6]=0,o[7]=0,o[8]=1,o},a.fromScaling=function(o,n){return o[0]=n[0],o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=n[1],o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=n[2],o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,o},a.getAnchorAlignment=Fh,a.getAnchorJustification=Uh,a.getArrayBuffer=pr,a.getImage=vr,a.getJSON=function(o,n){return Oe(Q(o,{type:"json"}),n)},a.getOverlapMode=T,a.getRTLTextPluginStatus=fA,a.getReferrer=dr,a.getVideo=function(o,n){const A=window.document.createElement("video");A.muted=!0,A.onloadstart=function(){n(null,A)};for(let f=0;f<o.length;f++){const y=window.document.createElement("source");sr(o[f])||(A.crossOrigin="Anonymous"),y.src=o[f],A.appendChild(y)}return{cancel:()=>{}}},a.identity=So,a.invert=function(o,n){var A=n[0],f=n[1],y=n[2],C=n[3],I=n[4],D=n[5],z=n[6],X=n[7],ie=n[8],ce=n[9],ye=n[10],Be=n[11],Ee=n[12],$e=n[13],Ze=n[14],Et=n[15],Kt=A*D-f*I,xt=A*z-y*I,Dt=A*X-C*I,or=f*z-y*D,ar=f*X-C*D,Yr=y*X-C*z,on=ie*$e-ce*Ee,Wr=ie*Ze-ye*Ee,Mr=ie*Et-Be*Ee,Ur=ce*Ze-ye*$e,Xr=ce*Et-Be*$e,Or=ye*Et-Be*Ze,wr=Kt*Or-xt*Xr+Dt*Ur+or*Mr-ar*Wr+Yr*on;return wr?(o[0]=(D*Or-z*Xr+X*Ur)*(wr=1/wr),o[1]=(y*Xr-f*Or-C*Ur)*wr,o[2]=($e*Yr-Ze*ar+Et*or)*wr,o[3]=(ye*ar-ce*Yr-Be*or)*wr,o[4]=(z*Mr-I*Or-X*Wr)*wr,o[5]=(A*Or-y*Mr+C*Wr)*wr,o[6]=(Ze*Dt-Ee*Yr-Et*xt)*wr,o[7]=(ie*Yr-ye*Dt+Be*xt)*wr,o[8]=(I*Xr-D*Mr+X*on)*wr,o[9]=(f*Mr-A*Xr-C*on)*wr,o[10]=(Ee*ar-$e*Dt+Et*Kt)*wr,o[11]=(ce*Dt-ie*ar-Be*Kt)*wr,o[12]=(D*Wr-I*Ur-z*on)*wr,o[13]=(A*Ur-f*Wr+y*on)*wr,o[14]=($e*xt-Ee*or-Ze*Kt)*wr,o[15]=(ie*or-ce*xt+ye*Kt)*wr,o):null},a.isImageBitmap=ve,a.isSafari=xe,a.isWorker=Ae,a.keysDifference=function(o,n){const A=[];for(const f in o)f in n||A.push(f);return A},a.lazyLoadRTLTextPlugin=function(){Fa.isLoading()||Fa.isLoaded()||fA()!=="deferred"||PA()},a.makeRequest=Oe,a.mapObject=k,a.mercatorXfromLng=Qr,a.mercatorYfromLat=Jr,a.mercatorZfromAltitude=Xn,a.mul=ch,a.mul$1=function(o,n,A){return o[0]=n[0]*A[0],o[1]=n[1]*A[1],o[2]=n[2]*A[2],o[3]=n[3]*A[3],o},a.multiply=Eu,a.nextPowerOfTwo=function(o){return o<=1?1:Math.pow(2,Math.ceil(Math.log(o)/Math.LN2))},a.normalize=function(o,n){var A=n[0],f=n[1],y=n[2],C=A*A+f*f+y*y;return C>0&&(C=1/Math.sqrt(C)),o[0]=n[0]*C,o[1]=n[1]*C,o[2]=n[2]*C,o},a.number=ii,a.ortho=function(o,n,A,f,y,C,I){var D=1/(n-A),z=1/(f-y),X=1/(C-I);return o[0]=-2*D,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*z,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*X,o[11]=0,o[12]=(n+A)*D,o[13]=(y+f)*z,o[14]=(I+C)*X,o[15]=1,o},a.parseCacheControl=ge,a.parseGlyphPbf=function(o){return new Ic(o).readFields(pf,[])},a.pbf=Ic,a.performSymbolLayout=function(o){o.bucket.createArrays(),o.bucket.tilePixelRatio=Ci/(512*o.bucket.overscaling),o.bucket.compareText={},o.bucket.iconsNeedLinear=!1;const n=o.bucket.layers[0].layout,A=o.bucket.layers[0]._unevaluatedLayout._values,f={layoutIconSize:A["icon-size"].possiblyEvaluate(new Ui(o.bucket.zoom+1),o.canonical),layoutTextSize:A["text-size"].possiblyEvaluate(new Ui(o.bucket.zoom+1),o.canonical),textMaxSize:A["text-size"].possiblyEvaluate(new Ui(18))};if(o.bucket.textSizeData.kind==="composite"){const{minZoom:z,maxZoom:X}=o.bucket.textSizeData;f.compositeTextSizes=[A["text-size"].possiblyEvaluate(new Ui(z),o.canonical),A["text-size"].possiblyEvaluate(new Ui(X),o.canonical)]}if(o.bucket.iconSizeData.kind==="composite"){const{minZoom:z,maxZoom:X}=o.bucket.iconSizeData;f.compositeIconSizes=[A["icon-size"].possiblyEvaluate(new Ui(z),o.canonical),A["icon-size"].possiblyEvaluate(new Ui(X),o.canonical)]}const y=n.get("text-line-height")*Os,C=n.get("text-rotation-alignment")!=="viewport"&&n.get("symbol-placement")!=="point",I=n.get("text-keep-upright"),D=n.get("text-size");for(const z of o.bucket.features){const X=n.get("text-font").evaluate(z,{},o.canonical).join(","),ie=D.evaluate(z,{},o.canonical),ce=f.layoutTextSize.evaluate(z,{},o.canonical),ye=f.layoutIconSize.evaluate(z,{},o.canonical),Be={horizontal:{},vertical:void 0},Ee=z.text;let $e,Ze=[0,0];if(Ee){const xt=Ee.toString(),Dt=n.get("text-letter-spacing").evaluate(z,{},o.canonical)*Os,or=LA(xt)?Dt:0,ar=n.get("text-anchor").evaluate(z,{},o.canonical),Yr=n.get("text-variable-anchor");if(!Yr){const Xr=n.get("text-radial-offset").evaluate(z,{},o.canonical);Ze=Xr?zd(ar,[Xr*Os,Th]):n.get("text-offset").evaluate(z,{},o.canonical).map(Or=>Or*Os)}let on=C?"center":n.get("text-justify").evaluate(z,{},o.canonical);const Wr=n.get("symbol-placement"),Mr=Wr==="point"?n.get("text-max-width").evaluate(z,{},o.canonical)*Os:0,Ur=()=>{o.bucket.allowVerticalPlacement&&Ra(xt)&&(Be.vertical=Ei(Ee,o.glyphMap,o.glyphPositions,o.imagePositions,X,Mr,y,ar,"left",or,Ze,a.WritingMode.vertical,!0,Wr,ce,ie))};if(!C&&Yr){const Xr=on==="auto"?Yr.map(wr=>Uh(wr)):[on];let Or=!1;for(let wr=0;wr<Xr.length;wr++){const _n=Xr[wr];if(!Be.horizontal[_n])if(Or)Be.horizontal[_n]=Be.horizontal[0];else{const fn=Ei(Ee,o.glyphMap,o.glyphPositions,o.imagePositions,X,Mr,y,"center",_n,or,Ze,a.WritingMode.horizontal,!1,Wr,ce,ie);fn&&(Be.horizontal[_n]=fn,Or=fn.positionedLines.length===1)}}Ur()}else{on==="auto"&&(on=Uh(ar));const Xr=Ei(Ee,o.glyphMap,o.glyphPositions,o.imagePositions,X,Mr,y,ar,on,or,Ze,a.WritingMode.horizontal,!1,Wr,ce,ie);Xr&&(Be.horizontal[on]=Xr),Ur(),Ra(xt)&&C&&I&&(Be.vertical=Ei(Ee,o.glyphMap,o.glyphPositions,o.imagePositions,X,Mr,y,ar,on,or,Ze,a.WritingMode.vertical,!1,Wr,ce,ie))}}let Et=!1;if(z.icon&&z.icon.name){const xt=o.imageMap[z.icon.name];xt&&($e=Dd(o.imagePositions[z.icon.name],n.get("icon-offset").evaluate(z,{},o.canonical),n.get("icon-anchor").evaluate(z,{},o.canonical)),Et=!!xt.sdf,o.bucket.sdfIcons===void 0?o.bucket.sdfIcons=Et:o.bucket.sdfIcons!==Et&&Z("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(xt.pixelRatio!==o.bucket.pixelRatio||n.get("icon-rotate").constantOr(1)!==0)&&(o.bucket.iconsNeedLinear=!0))}const Kt=Vd(Be.horizontal)||Be.vertical;o.bucket.iconsInText=!!Kt&&Kt.iconsInText,(Kt||$e)&&cm(o.bucket,z,Be,$e,o.imageMap,f,ce,ye,Ze,Et,o.canonical)}o.showCollisionBoxes&&o.bucket.generateCollisionDebugBuffers()},a.perspective=function(o,n,A,f,y){var C,I=1/Math.tan(n/2);return o[0]=I/A,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=I,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[11]=-1,o[12]=0,o[13]=0,o[15]=0,y!=null&&y!==1/0?(o[10]=(y+f)*(C=1/(f-y)),o[14]=2*y*f*C):(o[10]=-1,o[14]=-2*f),o},a.pick=function(o,n){const A={};for(let f=0;f<n.length;f++){const y=n[f];y in o&&(A[y]=o[y])}return A},a.plugin=Fa,a.pointGeometry=Le,a.polygonIntersectsPolygon=Kc,a.potpack=Pd,a.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],a.register=kr,a.registerForPluginStateChange=function(o){return o({pluginStatus:Di,pluginURL:lo}),el.on("pluginStateChange",o),o},a.renderColorRamp=jA,a.rotateX=function(o,n,A){var f=Math.sin(A),y=Math.cos(A),C=n[4],I=n[5],D=n[6],z=n[7],X=n[8],ie=n[9],ce=n[10],ye=n[11];return n!==o&&(o[0]=n[0],o[1]=n[1],o[2]=n[2],o[3]=n[3],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o[4]=C*y+X*f,o[5]=I*y+ie*f,o[6]=D*y+ce*f,o[7]=z*y+ye*f,o[8]=X*y-C*f,o[9]=ie*y-I*f,o[10]=ce*y-D*f,o[11]=ye*y-z*f,o},a.rotateZ=function(o,n,A){var f=Math.sin(A),y=Math.cos(A),C=n[0],I=n[1],D=n[2],z=n[3],X=n[4],ie=n[5],ce=n[6],ye=n[7];return n!==o&&(o[8]=n[8],o[9]=n[9],o[10]=n[10],o[11]=n[11],o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15]),o[0]=C*y+X*f,o[1]=I*y+ie*f,o[2]=D*y+ce*f,o[3]=z*y+ye*f,o[4]=X*y-C*f,o[5]=ie*y-I*f,o[6]=ce*y-D*f,o[7]=ye*y-z*f,o},a.scale=function(o,n,A){var f=A[0],y=A[1],C=A[2];return o[0]=n[0]*f,o[1]=n[1]*f,o[2]=n[2]*f,o[3]=n[3]*f,o[4]=n[4]*y,o[5]=n[5]*y,o[6]=n[6]*y,o[7]=n[7]*y,o[8]=n[8]*C,o[9]=n[9]*C,o[10]=n[10]*C,o[11]=n[11]*C,o[12]=n[12],o[13]=n[13],o[14]=n[14],o[15]=n[15],o},a.scale$1=function(o,n,A){return o[0]=n[0]*A,o[1]=n[1]*A,o[2]=n[2]*A,o},a.setCacheLimits=function(o,n){te=o,Fe=n},a.setRTLTextPlugin=function(o,n,A=!1){if(Di===Zl||Di===YA||Di===$A)throw new Error("setRTLTextPlugin cannot be called multiple times.");lo=ze.resolveURL(o),Di=Zl,Zs=n,Oa(),A||PA()},a.spec=vt,a.sphericalToCartesian=function([o,n,A]){return n+=90,n*=Math.PI/180,A*=Math.PI/180,{x:o*Math.cos(n)*Math.sin(A),y:o*Math.sin(n)*Math.sin(A),z:o*Math.cos(A)}},a.sqrLen=function(o){var n=o[0],A=o[1];return n*n+A*A},a.sub=function(o,n,A){return o[0]=n[0]-A[0],o[1]=n[1]-A[1],o[2]=n[2]-A[2],o},a.toEvaluationFeature=Fo,a.transformMat3=function(o,n,A){var f=n[0],y=n[1],C=n[2];return o[0]=f*A[0]+y*A[3]+C*A[6],o[1]=f*A[1]+y*A[4]+C*A[7],o[2]=f*A[2]+y*A[5]+C*A[8],o},a.transformMat4=Cc,a.transformMat4$1=function(o,n,A){var f=n[0],y=n[1];return o[0]=A[0]*f+A[4]*y+A[12],o[1]=A[1]*f+A[5]*y+A[13],o},a.translate=function(o,n,A){var f,y,C,I,D,z,X,ie,ce,ye,Be,Ee,$e=A[0],Ze=A[1],Et=A[2];return n===o?(o[12]=n[0]*$e+n[4]*Ze+n[8]*Et+n[12],o[13]=n[1]*$e+n[5]*Ze+n[9]*Et+n[13],o[14]=n[2]*$e+n[6]*Ze+n[10]*Et+n[14],o[15]=n[3]*$e+n[7]*Ze+n[11]*Et+n[15]):(y=n[1],C=n[2],I=n[3],D=n[4],z=n[5],X=n[6],ie=n[7],ce=n[8],ye=n[9],Be=n[10],Ee=n[11],o[0]=f=n[0],o[1]=y,o[2]=C,o[3]=I,o[4]=D,o[5]=z,o[6]=X,o[7]=ie,o[8]=ce,o[9]=ye,o[10]=Be,o[11]=Ee,o[12]=f*$e+D*Ze+ce*Et+n[12],o[13]=y*$e+z*Ze+ye*Et+n[13],o[14]=C*$e+X*Ze+Be*Et+n[14],o[15]=I*$e+ie*Ze+Ee*Et+n[15]),o},a.triggerPluginCompletionEvent=vl,a.unicodeBlockLookup=Sr,a.uniqueId=function(){return P++},a.validateCustomStyleLayer=function(o){const n=[],A=o.id;return A===void 0&&n.push({message:`layers.${A}: missing required property "id"`}),o.render===void 0&&n.push({message:`layers.${A}: missing required method "render"`}),o.renderingMode&&o.renderingMode!=="2d"&&o.renderingMode!=="3d"&&n.push({message:`layers.${A}: property "renderingMode" must be either "2d" or "3d"`}),n},a.validateLight=Oo,a.validateStyle=Ea,a.vectorTile=El,a.warnOnce=Z,a.wrap=x}),c(["./shared"],function(a){function d(Ie){const Y=typeof Ie;if(Y==="number"||Y==="boolean"||Y==="string"||Ie==null)return JSON.stringify(Ie);if(Array.isArray(Ie)){let Te="[";for(const Xe of Ie)Te+=`${d(Xe)},`;return`${Te}]`}const le=Object.keys(Ie).sort();let Ce="{";for(let Te=0;Te<le.length;Te++)Ce+=`${JSON.stringify(le[Te])}:${d(Ie[le[Te]])},`;return`${Ce}}`}function _(Ie){let Y="";for(const le of a.refProperties)Y+=`/${d(Ie[le])}`;return Y}class p{constructor(Y){this.keyCache={},Y&&this.replace(Y)}replace(Y){this._layerConfigs={},this._layers={},this.update(Y,[])}update(Y,le){for(const Te of Y){this._layerConfigs[Te.id]=Te;const Xe=this._layers[Te.id]=a.createStyleLayer(Te);Xe._featureFilter=a.createFilter(Xe.filter),this.keyCache[Te.id]&&delete this.keyCache[Te.id]}for(const Te of le)delete this.keyCache[Te],delete this._layerConfigs[Te],delete this._layers[Te];this.familiesBySource={};const Ce=function(Te,Xe){const lt={};for(let qe=0;qe<Te.length;qe++){const ut=Xe&&Xe[Te[qe].id]||_(Te[qe]);Xe&&(Xe[Te[qe].id]=ut);let Ot=lt[ut];Ot||(Ot=lt[ut]=[]),Ot.push(Te[qe])}const Ye=[];for(const qe in lt)Ye.push(lt[qe]);return Ye}(Object.values(this._layerConfigs),this.keyCache);for(const Te of Ce){const Xe=Te.map(nr=>this._layers[nr.id]),lt=Xe[0];if(lt.visibility==="none")continue;const Ye=lt.source||"";let qe=this.familiesBySource[Ye];qe||(qe=this.familiesBySource[Ye]={});const ut=lt.sourceLayer||"_geojsonTileLayer";let Ot=qe[ut];Ot||(Ot=qe[ut]=[]),Ot.push(Xe)}}}class E{constructor(Y){const le={},Ce=[];for(const Ye in Y){const qe=Y[Ye],ut=le[Ye]={};for(const Ot in qe){const nr=qe[+Ot];if(!nr||nr.bitmap.width===0||nr.bitmap.height===0)continue;const Ht={x:0,y:0,w:nr.bitmap.width+2,h:nr.bitmap.height+2};Ce.push(Ht),ut[Ot]={rect:Ht,metrics:nr.metrics}}}const{w:Te,h:Xe}=a.potpack(Ce),lt=new a.AlphaImage({width:Te||1,height:Xe||1});for(const Ye in Y){const qe=Y[Ye];for(const ut in qe){const Ot=qe[+ut];if(!Ot||Ot.bitmap.width===0||Ot.bitmap.height===0)continue;const nr=le[Ye][ut].rect;a.AlphaImage.copy(Ot.bitmap,lt,{x:0,y:0},{x:nr.x+1,y:nr.y+1},Ot.bitmap)}}this.image=lt,this.positions=le}}a.register("GlyphAtlas",E);class w{constructor(Y){this.tileID=new a.OverscaledTileID(Y.tileID.overscaledZ,Y.tileID.wrap,Y.tileID.canonical.z,Y.tileID.canonical.x,Y.tileID.canonical.y),this.uid=Y.uid,this.zoom=Y.zoom,this.pixelRatio=Y.pixelRatio,this.tileSize=Y.tileSize,this.source=Y.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Y.showCollisionBoxes,this.collectResourceTiming=!!Y.collectResourceTiming,this.returnDependencies=!!Y.returnDependencies,this.promoteId=Y.promoteId}parse(Y,le,Ce,Te,Xe){this.status="parsing",this.data=Y,this.collisionBoxArray=new a.CollisionBoxArray;const lt=new a.DictionaryCoder(Object.keys(Y.layers).sort()),Ye=new a.FeatureIndex(this.tileID,this.promoteId);Ye.bucketLayerIDs=[];const qe={},ut={featureIndex:Ye,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Ce},Ot=le.familiesBySource[this.source];for(const mn in Ot){const Bn=Y.layers[mn];if(!Bn)continue;Bn.version===1&&a.warnOnce(`Vector tile source "${this.source}" layer "${mn}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Pn=lt.encode(mn),Vn=[];for(let Ti=0;Ti<Bn.length;Ti++){const oi=Bn.feature(Ti),wi=Ye.getId(oi,mn);Vn.push({feature:oi,id:wi,index:Ti,sourceLayerIndex:Pn})}for(const Ti of Ot[mn]){const oi=Ti[0];oi.source!==this.source&&a.warnOnce(`layer.source = ${oi.source} does not equal this.source = ${this.source}`),oi.minzoom&&this.zoom<Math.floor(oi.minzoom)||oi.maxzoom&&this.zoom>=oi.maxzoom||oi.visibility!=="none"&&(x(Ti,this.zoom,Ce),(qe[oi.id]=oi.createBucket({index:Ye.bucketLayerIDs.length,layers:Ti,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Pn,sourceID:this.source})).populate(Vn,ut,this.tileID.canonical),Ye.bucketLayerIDs.push(Ti.map(wi=>wi.id)))}}let nr,Ht,jr,zr;const Ir=a.mapObject(ut.glyphDependencies,mn=>Object.keys(mn).map(Number));Object.keys(Ir).length?Te.send("getGlyphs",{uid:this.uid,stacks:Ir},(mn,Bn)=>{nr||(nr=mn,Ht=Bn,In.call(this))}):Ht={};const ln=Object.keys(ut.iconDependencies);ln.length?Te.send("getImages",{icons:ln,source:this.source,tileID:this.tileID,type:"icons"},(mn,Bn)=>{nr||(nr=mn,jr=Bn,In.call(this))}):jr={};const dn=Object.keys(ut.patternDependencies);function In(){if(nr)return Xe(nr);if(Ht&&jr&&zr){const mn=new E(Ht),Bn=new a.ImageAtlas(jr,zr);for(const Pn in qe){const Vn=qe[Pn];Vn instanceof a.SymbolBucket?(x(Vn.layers,this.zoom,Ce),a.performSymbolLayout({bucket:Vn,glyphMap:Ht,glyphPositions:mn.positions,imageMap:jr,imagePositions:Bn.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Vn.hasPattern&&(Vn instanceof a.LineBucket||Vn instanceof a.FillBucket||Vn instanceof a.FillExtrusionBucket)&&(x(Vn.layers,this.zoom,Ce),Vn.addFeatures(ut,this.tileID.canonical,Bn.patternPositions))}this.status="done",Xe(null,{buckets:Object.values(qe).filter(Pn=>!Pn.isEmpty()),featureIndex:Ye,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:mn.image,imageAtlas:Bn,glyphMap:this.returnDependencies?Ht:null,iconMap:this.returnDependencies?jr:null,glyphPositions:this.returnDependencies?mn.positions:null})}}dn.length?Te.send("getImages",{icons:dn,source:this.source,tileID:this.tileID,type:"patterns"},(mn,Bn)=>{nr||(nr=mn,zr=Bn,In.call(this))}):zr={},In.call(this)}}function x(Ie,Y,le){const Ce=new a.EvaluationParameters(Y);for(const Te of Ie)Te.recalculate(Ce,le)}function Q(Ie,Y){const le=a.getArrayBuffer(Ie.request,(Ce,Te,Xe,lt)=>{Ce?Y(Ce):Te&&Y(null,{vectorTile:new a.vectorTile.VectorTile(new a.pbf(Te)),rawData:Te,cacheControl:Xe,expires:lt})});return()=>{le.cancel(),Y()}}class P{constructor(Y,le,Ce,Te){this.actor=Y,this.layerIndex=le,this.availableImages=Ce,this.loadVectorData=Te||Q,this.loading={},this.loaded={}}loadTile(Y,le){const Ce=Y.uid;this.loading||(this.loading={});const Te=!!(Y&&Y.request&&Y.request.collectResourceTiming)&&new a.RequestPerformance(Y.request),Xe=this.loading[Ce]=new w(Y);Xe.abort=this.loadVectorData(Y,(lt,Ye)=>{if(delete this.loading[Ce],lt||!Ye)return Xe.status="done",this.loaded[Ce]=Xe,le(lt);const qe=Ye.rawData,ut={};Ye.expires&&(ut.expires=Ye.expires),Ye.cacheControl&&(ut.cacheControl=Ye.cacheControl);const Ot={};if(Te){const nr=Te.finish();nr&&(Ot.resourceTiming=JSON.parse(JSON.stringify(nr)))}Xe.vectorTile=Ye.vectorTile,Xe.parse(Ye.vectorTile,this.layerIndex,this.availableImages,this.actor,(nr,Ht)=>{if(nr||!Ht)return le(nr);le(null,a.extend({rawTileData:qe.slice(0)},Ht,ut,Ot))}),this.loaded=this.loaded||{},this.loaded[Ce]=Xe})}reloadTile(Y,le){const Ce=this.loaded,Te=Y.uid,Xe=this;if(Ce&&Ce[Te]){const lt=Ce[Te];lt.showCollisionBoxes=Y.showCollisionBoxes;const Ye=(qe,ut)=>{const Ot=lt.reloadCallback;Ot&&(delete lt.reloadCallback,lt.parse(lt.vectorTile,Xe.layerIndex,this.availableImages,Xe.actor,Ot)),le(qe,ut)};lt.status==="parsing"?lt.reloadCallback=Ye:lt.status==="done"&&(lt.vectorTile?lt.parse(lt.vectorTile,this.layerIndex,this.availableImages,this.actor,Ye):Ye())}}abortTile(Y,le){const Ce=this.loading,Te=Y.uid;Ce&&Ce[Te]&&Ce[Te].abort&&(Ce[Te].abort(),delete Ce[Te]),le()}removeTile(Y,le){const Ce=this.loaded,Te=Y.uid;Ce&&Ce[Te]&&delete Ce[Te],le()}}class R{constructor(){this.loaded={}}loadTile(Y,le){const{uid:Ce,encoding:Te,rawImageData:Xe}=Y,lt=a.isImageBitmap(Xe)?this.getImageData(Xe):Xe,Ye=new a.DEMData(Ce,lt,Te);this.loaded=this.loaded||{},this.loaded[Ce]=Ye,le(null,Ye)}getImageData(Y){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Y.width,Y.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Y.width,this.offscreenCanvas.height=Y.height,this.offscreenCanvasContext.drawImage(Y,0,0,Y.width,Y.height);const le=this.offscreenCanvasContext.getImageData(-1,-1,Y.width+2,Y.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new a.RGBAImage({width:le.width,height:le.height},le.data)}removeTile(Y){const le=this.loaded,Ce=Y.uid;le&&le[Ce]&&delete le[Ce]}}var k=function Ie(Y,le){var Ce,Te=Y&&Y.type;if(Te==="FeatureCollection")for(Ce=0;Ce<Y.features.length;Ce++)Ie(Y.features[Ce],le);else if(Te==="GeometryCollection")for(Ce=0;Ce<Y.geometries.length;Ce++)Ie(Y.geometries[Ce],le);else if(Te==="Feature")Ie(Y.geometry,le);else if(Te==="Polygon")O(Y.coordinates,le);else if(Te==="MultiPolygon")for(Ce=0;Ce<Y.coordinates.length;Ce++)O(Y.coordinates[Ce],le);return Y};function O(Ie,Y){if(Ie.length!==0){G(Ie[0],Y);for(var le=1;le<Ie.length;le++)G(Ie[le],!Y)}}function G(Ie,Y){for(var le=0,Ce=0,Te=0,Xe=Ie.length,lt=Xe-1;Te<Xe;lt=Te++){var Ye=(Ie[Te][0]-Ie[lt][0])*(Ie[lt][1]+Ie[Te][1]),qe=le+Ye;Ce+=Math.abs(le)>=Math.abs(Ye)?le-qe+Ye:Ye-qe+le,le=qe}le+Ce>=0!=!!Y&&Ie.reverse()}const K=a.vectorTile.VectorTileFeature.prototype.toGeoJSON;class Z{constructor(Y){this._feature=Y,this.extent=a.EXTENT,this.type=Y.type,this.properties=Y.tags,"id"in Y&&!isNaN(Y.id)&&(this.id=parseInt(Y.id,10))}loadGeometry(){if(this._feature.type===1){const Y=[];for(const le of this._feature.geometry)Y.push([new a.pointGeometry(le[0],le[1])]);return Y}{const Y=[];for(const le of this._feature.geometry){const Ce=[];for(const Te of le)Ce.push(new a.pointGeometry(Te[0],Te[1]));Y.push(Ce)}return Y}}toGeoJSON(Y,le,Ce){return K.call(this,Y,le,Ce)}}class ${constructor(Y){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a.EXTENT,this.length=Y.length,this._features=Y}feature(Y){return new Z(this._features[Y])}}var fe={exports:{}},Ae=a.pointGeometry,ge=a.vectorTile.VectorTileFeature,he=ee;function ee(Ie,Y){this.options=Y||{},this.features=Ie,this.length=Ie.length}function ne(Ie,Y){this.id=typeof Ie.id=="number"?Ie.id:void 0,this.type=Ie.type,this.rawGeometry=Ie.type===1?[Ie.geometry]:Ie.geometry,this.properties=Ie.tags,this.extent=Y||4096}ee.prototype.feature=function(Ie){return new ne(this.features[Ie],this.options.extent)},ne.prototype.loadGeometry=function(){var Ie=this.rawGeometry;this.geometry=[];for(var Y=0;Y<Ie.length;Y++){for(var le=Ie[Y],Ce=[],Te=0;Te<le.length;Te++)Ce.push(new Ae(le[Te][0],le[Te][1]));this.geometry.push(Ce)}return this.geometry},ne.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ie=this.geometry,Y=1/0,le=-1/0,Ce=1/0,Te=-1/0,Xe=0;Xe<Ie.length;Xe++)for(var lt=Ie[Xe],Ye=0;Ye<lt.length;Ye++){var qe=lt[Ye];Y=Math.min(Y,qe.x),le=Math.max(le,qe.x),Ce=Math.min(Ce,qe.y),Te=Math.max(Te,qe.y)}return[Y,Ce,le,Te]},ne.prototype.toGeoJSON=ge.prototype.toGeoJSON;var xe=a.pbf,ve=he;function ze(Ie){var Y=new xe;return function(le,Ce){for(var Te in le.layers)Ce.writeMessage(3,Le,le.layers[Te])}(Ie,Y),Y.finish()}function Le(Ie,Y){var le;Y.writeVarintField(15,Ie.version||1),Y.writeStringField(1,Ie.name||""),Y.writeVarintField(5,Ie.extent||4096);var Ce={keys:[],values:[],keycache:{},valuecache:{}};for(le=0;le<Ie.length;le++)Ce.feature=Ie.feature(le),Y.writeMessage(2,Ke,Ce);var Te=Ce.keys;for(le=0;le<Te.length;le++)Y.writeStringField(3,Te[le]);var Xe=Ce.values;for(le=0;le<Xe.length;le++)Y.writeMessage(4,te,Xe[le])}function Ke(Ie,Y){var le=Ie.feature;le.id!==void 0&&Y.writeVarintField(1,le.id),Y.writeMessage(2,Ue,Ie),Y.writeVarintField(3,le.type),Y.writeMessage(4,St,le)}function Ue(Ie,Y){var le=Ie.feature,Ce=Ie.keys,Te=Ie.values,Xe=Ie.keycache,lt=Ie.valuecache;for(var Ye in le.properties){var qe=le.properties[Ye],ut=Xe[Ye];if(qe!==null){ut===void 0&&(Ce.push(Ye),Xe[Ye]=ut=Ce.length-1),Y.writeVarint(ut);var Ot=typeof qe;Ot!=="string"&&Ot!=="boolean"&&Ot!=="number"&&(qe=JSON.stringify(qe));var nr=Ot+":"+qe,Ht=lt[nr];Ht===void 0&&(Te.push(qe),lt[nr]=Ht=Te.length-1),Y.writeVarint(Ht)}}}function rt(Ie,Y){return(Y<<3)+(7&Ie)}function je(Ie){return Ie<<1^Ie>>31}function St(Ie,Y){for(var le=Ie.loadGeometry(),Ce=Ie.type,Te=0,Xe=0,lt=le.length,Ye=0;Ye<lt;Ye++){var qe=le[Ye],ut=1;Ce===1&&(ut=qe.length),Y.writeVarint(rt(1,ut));for(var Ot=Ce===3?qe.length-1:qe.length,nr=0;nr<Ot;nr++){nr===1&&Ce!==1&&Y.writeVarint(rt(2,Ot-1));var Ht=qe[nr].x-Te,jr=qe[nr].y-Xe;Y.writeVarint(je(Ht)),Y.writeVarint(je(jr)),Te+=Ht,Xe+=jr}Ce===3&&Y.writeVarint(rt(7,1))}}function te(Ie,Y){var le=typeof Ie;le==="string"?Y.writeStringField(1,Ie):le==="boolean"?Y.writeBooleanField(7,Ie):le==="number"&&(Ie%1!=0?Y.writeDoubleField(3,Ie):Ie<0?Y.writeSVarintField(6,Ie):Y.writeVarintField(5,Ie))}function Fe(Ie,Y,le,Ce,Te,Xe){if(Te-Ce<=le)return;const lt=Ce+Te>>1;Qe(Ie,Y,lt,Ce,Te,Xe%2),Fe(Ie,Y,le,Ce,lt-1,Xe+1),Fe(Ie,Y,le,lt+1,Te,Xe+1)}function Qe(Ie,Y,le,Ce,Te,Xe){for(;Te>Ce;){if(Te-Ce>600){const ut=Te-Ce+1,Ot=le-Ce+1,nr=Math.log(ut),Ht=.5*Math.exp(2*nr/3),jr=.5*Math.sqrt(nr*Ht*(ut-Ht)/ut)*(Ot-ut/2<0?-1:1);Qe(Ie,Y,le,Math.max(Ce,Math.floor(le-Ot*Ht/ut+jr)),Math.min(Te,Math.floor(le+(ut-Ot)*Ht/ut+jr)),Xe)}const lt=Y[2*le+Xe];let Ye=Ce,qe=Te;for(Ve(Ie,Y,Ce,le),Y[2*Te+Xe]>lt&&Ve(Ie,Y,Ce,Te);Ye<qe;){for(Ve(Ie,Y,Ye,qe),Ye++,qe--;Y[2*Ye+Xe]<lt;)Ye++;for(;Y[2*qe+Xe]>lt;)qe--}Y[2*Ce+Xe]===lt?Ve(Ie,Y,Ce,qe):(qe++,Ve(Ie,Y,qe,Te)),qe<=le&&(Ce=qe+1),le<=qe&&(Te=qe-1)}}function Ve(Ie,Y,le,Ce){st(Ie,le,Ce),st(Y,2*le,2*Ce),st(Y,2*le+1,2*Ce+1)}function st(Ie,Y,le){const Ce=Ie[Y];Ie[Y]=Ie[le],Ie[le]=Ce}function dt(Ie,Y,le,Ce){const Te=Ie-le,Xe=Y-Ce;return Te*Te+Xe*Xe}fe.exports=ze,fe.exports.fromVectorTileJs=ze,fe.exports.fromGeojsonVt=function(Ie,Y){Y=Y||{};var le={};for(var Ce in Ie)le[Ce]=new ve(Ie[Ce].features,Y),le[Ce].name=Ce,le[Ce].version=Y.version,le[Ce].extent=Y.extent;return ze({layers:le})},fe.exports.GeoJSONWrapper=ve;const Bt=Ie=>Ie[0],Ge=Ie=>Ie[1];class tt{constructor(Y,le=Bt,Ce=Ge,Te=64,Xe=Float64Array){this.nodeSize=Te,this.points=Y;const lt=Y.length<65536?Uint16Array:Uint32Array,Ye=this.ids=new lt(Y.length),qe=this.coords=new Xe(2*Y.length);for(let ut=0;ut<Y.length;ut++)Ye[ut]=ut,qe[2*ut]=le(Y[ut]),qe[2*ut+1]=Ce(Y[ut]);Fe(Ye,qe,Te,0,Ye.length-1,0)}range(Y,le,Ce,Te){return function(Xe,lt,Ye,qe,ut,Ot,nr){const Ht=[0,Xe.length-1,0],jr=[];let zr,Ir;for(;Ht.length;){const ln=Ht.pop(),dn=Ht.pop(),In=Ht.pop();if(dn-In<=nr){for(let Pn=In;Pn<=dn;Pn++)zr=lt[2*Pn],Ir=lt[2*Pn+1],zr>=Ye&&zr<=ut&&Ir>=qe&&Ir<=Ot&&jr.push(Xe[Pn]);continue}const mn=Math.floor((In+dn)/2);zr=lt[2*mn],Ir=lt[2*mn+1],zr>=Ye&&zr<=ut&&Ir>=qe&&Ir<=Ot&&jr.push(Xe[mn]);const Bn=(ln+1)%2;(ln===0?Ye<=zr:qe<=Ir)&&(Ht.push(In),Ht.push(mn-1),Ht.push(Bn)),(ln===0?ut>=zr:Ot>=Ir)&&(Ht.push(mn+1),Ht.push(dn),Ht.push(Bn))}return jr}(this.ids,this.coords,Y,le,Ce,Te,this.nodeSize)}within(Y,le,Ce){return function(Te,Xe,lt,Ye,qe,ut){const Ot=[0,Te.length-1,0],nr=[],Ht=qe*qe;for(;Ot.length;){const jr=Ot.pop(),zr=Ot.pop(),Ir=Ot.pop();if(zr-Ir<=ut){for(let Bn=Ir;Bn<=zr;Bn++)dt(Xe[2*Bn],Xe[2*Bn+1],lt,Ye)<=Ht&&nr.push(Te[Bn]);continue}const ln=Math.floor((Ir+zr)/2),dn=Xe[2*ln],In=Xe[2*ln+1];dt(dn,In,lt,Ye)<=Ht&&nr.push(Te[ln]);const mn=(jr+1)%2;(jr===0?lt-qe<=dn:Ye-qe<=In)&&(Ot.push(Ir),Ot.push(ln-1),Ot.push(mn)),(jr===0?lt+qe>=dn:Ye+qe>=In)&&(Ot.push(ln+1),Ot.push(zr),Ot.push(mn))}return nr}(this.ids,this.coords,Y,le,Ce,this.nodeSize)}}const Qt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Ie=>Ie},ht=Math.fround||(Nt=new Float32Array(1),Ie=>(Nt[0]=+Ie,Nt[0]));var Nt;class dr{constructor(Y){this.options=vr(Object.create(Qt),Y),this.trees=new Array(this.options.maxZoom+1)}load(Y){const{log:le,minZoom:Ce,maxZoom:Te,nodeSize:Xe}=this.options;le&&console.time("total time");const lt=`prepare ${Y.length} points`;le&&console.time(lt),this.points=Y;let Ye=[];for(let qe=0;qe<Y.length;qe++)Y[qe].geometry&&Ye.push(Oe(Y[qe],qe));this.trees[Te+1]=new tt(Ye,Gr,rr,Xe,Float32Array),le&&console.timeEnd(lt);for(let qe=Te;qe>=Ce;qe--){const ut=+Date.now();Ye=this._cluster(Ye,qe),this.trees[qe]=new tt(Ye,Gr,rr,Xe,Float32Array),le&&console.log("z%d: %d clusters in %dms",qe,Ye.length,+Date.now()-ut)}return le&&console.timeEnd("total time"),this}getClusters(Y,le){let Ce=((Y[0]+180)%360+360)%360-180;const Te=Math.max(-90,Math.min(90,Y[1]));let Xe=Y[2]===180?180:((Y[2]+180)%360+360)%360-180;const lt=Math.max(-90,Math.min(90,Y[3]));if(Y[2]-Y[0]>=360)Ce=-180,Xe=180;else if(Ce>Xe){const Ot=this.getClusters([Ce,Te,180,lt],le),nr=this.getClusters([-180,Te,Xe,lt],le);return Ot.concat(nr)}const Ye=this.trees[this._limitZoom(le)],qe=Ye.range(zt(Ce),fr(lt),zt(Xe),fr(Te)),ut=[];for(const Ot of qe){const nr=Ye.points[Ot];ut.push(nr.numPoints?pr(nr):this.points[nr.index])}return ut}getChildren(Y){const le=this._getOriginId(Y),Ce=this._getOriginZoom(Y),Te="No cluster with the specified id.",Xe=this.trees[Ce];if(!Xe)throw new Error(Te);const lt=Xe.points[le];if(!lt)throw new Error(Te);const Ye=this.options.radius/(this.options.extent*Math.pow(2,Ce-1)),qe=Xe.within(lt.x,lt.y,Ye),ut=[];for(const Ot of qe){const nr=Xe.points[Ot];nr.parentId===Y&&ut.push(nr.numPoints?pr(nr):this.points[nr.index])}if(ut.length===0)throw new Error(Te);return ut}getLeaves(Y,le,Ce){const Te=[];return this._appendLeaves(Te,Y,le=le||10,Ce=Ce||0,0),Te}getTile(Y,le,Ce){const Te=this.trees[this._limitZoom(Y)],Xe=Math.pow(2,Y),{extent:lt,radius:Ye}=this.options,qe=Ye/lt,ut=(Ce-qe)/Xe,Ot=(Ce+1+qe)/Xe,nr={features:[]};return this._addTileFeatures(Te.range((le-qe)/Xe,ut,(le+1+qe)/Xe,Ot),Te.points,le,Ce,Xe,nr),le===0&&this._addTileFeatures(Te.range(1-qe/Xe,ut,1,Ot),Te.points,Xe,Ce,Xe,nr),le===Xe-1&&this._addTileFeatures(Te.range(0,ut,qe/Xe,Ot),Te.points,-1,Ce,Xe,nr),nr.features.length?nr:null}getClusterExpansionZoom(Y){let le=this._getOriginZoom(Y)-1;for(;le<=this.options.maxZoom;){const Ce=this.getChildren(Y);if(le++,Ce.length!==1)break;Y=Ce[0].properties.cluster_id}return le}_appendLeaves(Y,le,Ce,Te,Xe){const lt=this.getChildren(le);for(const Ye of lt){const qe=Ye.properties;if(qe&&qe.cluster?Xe+qe.point_count<=Te?Xe+=qe.point_count:Xe=this._appendLeaves(Y,qe.cluster_id,Ce,Te,Xe):Xe<Te?Xe++:Y.push(Ye),Y.length===Ce)break}return Xe}_addTileFeatures(Y,le,Ce,Te,Xe,lt){for(const Ye of Y){const qe=le[Ye],ut=qe.numPoints;let Ot,nr,Ht;if(ut)Ot=sr(qe),nr=qe.x,Ht=qe.y;else{const Ir=this.points[qe.index];Ot=Ir.properties,nr=zt(Ir.geometry.coordinates[0]),Ht=fr(Ir.geometry.coordinates[1])}const jr={type:1,geometry:[[Math.round(this.options.extent*(nr*Xe-Ce)),Math.round(this.options.extent*(Ht*Xe-Te))]],tags:Ot};let zr;ut?zr=qe.id:this.options.generateId?zr=qe.index:this.points[qe.index].id&&(zr=this.points[qe.index].id),zr!==void 0&&(jr.id=zr),lt.features.push(jr)}}_limitZoom(Y){return Math.max(this.options.minZoom,Math.min(Math.floor(+Y),this.options.maxZoom+1))}_cluster(Y,le){const Ce=[],{radius:Te,extent:Xe,reduce:lt,minPoints:Ye}=this.options,qe=Te/(Xe*Math.pow(2,le));for(let ut=0;ut<Y.length;ut++){const Ot=Y[ut];if(Ot.zoom<=le)continue;Ot.zoom=le;const nr=this.trees[le+1],Ht=nr.within(Ot.x,Ot.y,qe),jr=Ot.numPoints||1;let zr=jr;for(const Ir of Ht){const ln=nr.points[Ir];ln.zoom>le&&(zr+=ln.numPoints||1)}if(zr>jr&&zr>=Ye){let Ir=Ot.x*jr,ln=Ot.y*jr,dn=lt&&jr>1?this._map(Ot,!0):null;const In=(ut<<5)+(le+1)+this.points.length;for(const mn of Ht){const Bn=nr.points[mn];if(Bn.zoom<=le)continue;Bn.zoom=le;const Pn=Bn.numPoints||1;Ir+=Bn.x*Pn,ln+=Bn.y*Pn,Bn.parentId=In,lt&&(dn||(dn=this._map(Ot,!0)),lt(dn,this._map(Bn)))}Ot.parentId=In,Ce.push(Pt(Ir/zr,ln/zr,In,zr,dn))}else if(Ce.push(Ot),zr>1)for(const Ir of Ht){const ln=nr.points[Ir];ln.zoom<=le||(ln.zoom=le,Ce.push(ln))}}return Ce}_getOriginId(Y){return Y-this.points.length>>5}_getOriginZoom(Y){return(Y-this.points.length)%32}_map(Y,le){if(Y.numPoints)return le?vr({},Y.properties):Y.properties;const Ce=this.points[Y.index].properties,Te=this.options.map(Ce);return le&&Te===Ce?vr({},Te):Te}}function Pt(Ie,Y,le,Ce,Te){return{x:ht(Ie),y:ht(Y),zoom:1/0,id:le,parentId:-1,numPoints:Ce,properties:Te}}function Oe(Ie,Y){const[le,Ce]=Ie.geometry.coordinates;return{x:ht(zt(le)),y:ht(fr(Ce)),zoom:1/0,index:Y,parentId:-1}}function pr(Ie){return{type:"Feature",id:Ie.id,properties:sr(Ie),geometry:{type:"Point",coordinates:[(Y=Ie.x,360*(Y-.5)),Br(Ie.y)]}};var Y}function sr(Ie){const Y=Ie.numPoints,le=Y>=1e4?`${Math.round(Y/1e3)}k`:Y>=1e3?Math.round(Y/100)/10+"k":Y;return vr(vr({},Ie.properties),{cluster:!0,cluster_id:Ie.id,point_count:Y,point_count_abbreviated:le})}function zt(Ie){return Ie/360+.5}function fr(Ie){const Y=Math.sin(Ie*Math.PI/180),le=.5-.25*Math.log((1+Y)/(1-Y))/Math.PI;return le<0?0:le>1?1:le}function Br(Ie){const Y=(180-360*Ie)*Math.PI/180;return 360*Math.atan(Math.exp(Y))/Math.PI-90}function vr(Ie,Y){for(const le in Y)Ie[le]=Y[le];return Ie}function Gr(Ie){return Ie.x}function rr(Ie){return Ie.y}function xr(Ie,Y,le,Ce){for(var Te,Xe=Ce,lt=le-Y>>1,Ye=le-Y,qe=Ie[Y],ut=Ie[Y+1],Ot=Ie[le],nr=Ie[le+1],Ht=Y+3;Ht<le;Ht+=3){var jr=Zr(Ie[Ht],Ie[Ht+1],qe,ut,Ot,nr);if(jr>Xe)Te=Ht,Xe=jr;else if(jr===Xe){var zr=Math.abs(Ht-lt);zr<Ye&&(Te=Ht,Ye=zr)}}Xe>Ce&&(Te-Y>3&&xr(Ie,Y,Te,Ce),Ie[Te+2]=Xe,le-Te>3&&xr(Ie,Te,le,Ce))}function Zr(Ie,Y,le,Ce,Te,Xe){var lt=Te-le,Ye=Xe-Ce;if(lt!==0||Ye!==0){var qe=((Ie-le)*lt+(Y-Ce)*Ye)/(lt*lt+Ye*Ye);qe>1?(le=Te,Ce=Xe):qe>0&&(le+=lt*qe,Ce+=Ye*qe)}return(lt=Ie-le)*lt+(Ye=Y-Ce)*Ye}function pn(Ie,Y,le,Ce){var Te={id:Ie===void 0?null:Ie,type:Y,geometry:le,tags:Ce,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Xe){var lt=Xe.geometry,Ye=Xe.type;if(Ye==="Point"||Ye==="MultiPoint"||Ye==="LineString")vt(Xe,lt);else if(Ye==="Polygon"||Ye==="MultiLineString")for(var qe=0;qe<lt.length;qe++)vt(Xe,lt[qe]);else if(Ye==="MultiPolygon")for(qe=0;qe<lt.length;qe++)for(var ut=0;ut<lt[qe].length;ut++)vt(Xe,lt[qe][ut])}(Te),Te}function vt(Ie,Y){for(var le=0;le<Y.length;le+=3)Ie.minX=Math.min(Ie.minX,Y[le]),Ie.minY=Math.min(Ie.minY,Y[le+1]),Ie.maxX=Math.max(Ie.maxX,Y[le]),Ie.maxY=Math.max(Ie.maxY,Y[le+1])}function nt(Ie,Y,le,Ce){if(Y.geometry){var Te=Y.geometry.coordinates,Xe=Y.geometry.type,lt=Math.pow(le.tolerance/((1<<le.maxZoom)*le.extent),2),Ye=[],qe=Y.id;if(le.promoteId?qe=Y.properties[le.promoteId]:le.generateId&&(qe=Ce||0),Xe==="Point")bt(Te,Ye);else if(Xe==="MultiPoint")for(var ut=0;ut<Te.length;ut++)bt(Te[ut],Ye);else if(Xe==="LineString")Ct(Te,Ye,lt,!1);else if(Xe==="MultiLineString"){if(le.lineMetrics){for(ut=0;ut<Te.length;ut++)Ct(Te[ut],Ye=[],lt,!1),Ie.push(pn(qe,"LineString",Ye,Y.properties));return}jt(Te,Ye,lt,!1)}else if(Xe==="Polygon")jt(Te,Ye,lt,!0);else{if(Xe!=="MultiPolygon"){if(Xe==="GeometryCollection"){for(ut=0;ut<Y.geometry.geometries.length;ut++)nt(Ie,{id:qe,geometry:Y.geometry.geometries[ut],properties:Y.properties},le,Ce);return}throw new Error("Input data is not a valid GeoJSON object.")}for(ut=0;ut<Te.length;ut++){var Ot=[];jt(Te[ut],Ot,lt,!0),Ye.push(Ot)}}Ie.push(pn(qe,Xe,Ye,Y.properties))}}function bt(Ie,Y){Y.push(er(Ie[0])),Y.push(Vr(Ie[1])),Y.push(0)}function Ct(Ie,Y,le,Ce){for(var Te,Xe,lt=0,Ye=0;Ye<Ie.length;Ye++){var qe=er(Ie[Ye][0]),ut=Vr(Ie[Ye][1]);Y.push(qe),Y.push(ut),Y.push(0),Ye>0&&(lt+=Ce?(Te*ut-qe*Xe)/2:Math.sqrt(Math.pow(qe-Te,2)+Math.pow(ut-Xe,2))),Te=qe,Xe=ut}var Ot=Y.length-3;Y[2]=1,xr(Y,0,Ot,le),Y[Ot+2]=1,Y.size=Math.abs(lt),Y.start=0,Y.end=Y.size}function jt(Ie,Y,le,Ce){for(var Te=0;Te<Ie.length;Te++){var Xe=[];Ct(Ie[Te],Xe,le,Ce),Y.push(Xe)}}function er(Ie){return Ie/360+.5}function Vr(Ie){var Y=Math.sin(Ie*Math.PI/180),le=.5-.25*Math.log((1+Y)/(1-Y))/Math.PI;return le<0?0:le>1?1:le}function Fr(Ie,Y,le,Ce,Te,Xe,lt,Ye){if(Ce/=Y,Xe>=(le/=Y)&&lt<Ce)return Ie;if(lt<le||Xe>=Ce)return null;for(var qe=[],ut=0;ut<Ie.length;ut++){var Ot=Ie[ut],nr=Ot.geometry,Ht=Ot.type,jr=Te===0?Ot.minX:Ot.minY,zr=Te===0?Ot.maxX:Ot.maxY;if(jr>=le&&zr<Ce)qe.push(Ot);else if(!(zr<le||jr>=Ce)){var Ir=[];if(Ht==="Point"||Ht==="MultiPoint")un(nr,Ir,le,Ce,Te);else if(Ht==="LineString")lr(nr,Ir,le,Ce,Te,!1,Ye.lineMetrics);else if(Ht==="MultiLineString")An(nr,Ir,le,Ce,Te,!1);else if(Ht==="Polygon")An(nr,Ir,le,Ce,Te,!0);else if(Ht==="MultiPolygon")for(var ln=0;ln<nr.length;ln++){var dn=[];An(nr[ln],dn,le,Ce,Te,!0),dn.length&&Ir.push(dn)}if(Ir.length){if(Ye.lineMetrics&&Ht==="LineString"){for(ln=0;ln<Ir.length;ln++)qe.push(pn(Ot.id,Ht,Ir[ln],Ot.tags));continue}Ht!=="LineString"&&Ht!=="MultiLineString"||(Ir.length===1?(Ht="LineString",Ir=Ir[0]):Ht="MultiLineString"),Ht!=="Point"&&Ht!=="MultiPoint"||(Ht=Ir.length===3?"Point":"MultiPoint"),qe.push(pn(Ot.id,Ht,Ir,Ot.tags))}}}return qe.length?qe:null}function un(Ie,Y,le,Ce,Te){for(var Xe=0;Xe<Ie.length;Xe+=3){var lt=Ie[Xe+Te];lt>=le&&lt<=Ce&&(Y.push(Ie[Xe]),Y.push(Ie[Xe+1]),Y.push(Ie[Xe+2]))}}function lr(Ie,Y,le,Ce,Te,Xe,lt){for(var Ye,qe,ut=Er(Ie),Ot=Te===0?_i:br,nr=Ie.start,Ht=0;Ht<Ie.length-3;Ht+=3){var jr=Ie[Ht],zr=Ie[Ht+1],Ir=Ie[Ht+2],ln=Ie[Ht+3],dn=Ie[Ht+4],In=Te===0?jr:zr,mn=Te===0?ln:dn,Bn=!1;lt&&(Ye=Math.sqrt(Math.pow(jr-ln,2)+Math.pow(zr-dn,2))),In<le?mn>le&&(qe=Ot(ut,jr,zr,ln,dn,le),lt&&(ut.start=nr+Ye*qe)):In>Ce?mn<Ce&&(qe=Ot(ut,jr,zr,ln,dn,Ce),lt&&(ut.start=nr+Ye*qe)):wn(ut,jr,zr,Ir),mn<le&&In>=le&&(qe=Ot(ut,jr,zr,ln,dn,le),Bn=!0),mn>Ce&&In<=Ce&&(qe=Ot(ut,jr,zr,ln,dn,Ce),Bn=!0),!Xe&&Bn&&(lt&&(ut.end=nr+Ye*qe),Y.push(ut),ut=Er(Ie)),lt&&(nr+=Ye)}var Pn=Ie.length-3;jr=Ie[Pn],zr=Ie[Pn+1],Ir=Ie[Pn+2],(In=Te===0?jr:zr)>=le&&In<=Ce&&wn(ut,jr,zr,Ir),Pn=ut.length-3,Xe&&Pn>=3&&(ut[Pn]!==ut[0]||ut[Pn+1]!==ut[1])&&wn(ut,ut[0],ut[1],ut[2]),ut.length&&Y.push(ut)}function Er(Ie){var Y=[];return Y.size=Ie.size,Y.start=Ie.start,Y.end=Ie.end,Y}function An(Ie,Y,le,Ce,Te,Xe){for(var lt=0;lt<Ie.length;lt++)lr(Ie[lt],Y,le,Ce,Te,Xe,!1)}function wn(Ie,Y,le,Ce){Ie.push(Y),Ie.push(le),Ie.push(Ce)}function _i(Ie,Y,le,Ce,Te,Xe){var lt=(Xe-Y)/(Ce-Y);return Ie.push(Xe),Ie.push(le+(Te-le)*lt),Ie.push(1),lt}function br(Ie,Y,le,Ce,Te,Xe){var lt=(Xe-le)/(Te-le);return Ie.push(Y+(Ce-Y)*lt),Ie.push(Xe),Ie.push(1),lt}function Cr(Ie,Y){for(var le=[],Ce=0;Ce<Ie.length;Ce++){var Te,Xe=Ie[Ce],lt=Xe.type;if(lt==="Point"||lt==="MultiPoint"||lt==="LineString")Te=cr(Xe.geometry,Y);else if(lt==="MultiLineString"||lt==="Polygon"){Te=[];for(var Ye=0;Ye<Xe.geometry.length;Ye++)Te.push(cr(Xe.geometry[Ye],Y))}else if(lt==="MultiPolygon")for(Te=[],Ye=0;Ye<Xe.geometry.length;Ye++){for(var qe=[],ut=0;ut<Xe.geometry[Ye].length;ut++)qe.push(cr(Xe.geometry[Ye][ut],Y));Te.push(qe)}le.push(pn(Xe.id,lt,Te,Xe.tags))}return le}function cr(Ie,Y){var le=[];le.size=Ie.size,Ie.start!==void 0&&(le.start=Ie.start,le.end=Ie.end);for(var Ce=0;Ce<Ie.length;Ce+=3)le.push(Ie[Ce]+Y,Ie[Ce+1],Ie[Ce+2]);return le}function Kr(Ie,Y){if(Ie.transformed)return Ie;var le,Ce,Te,Xe=1<<Ie.z,lt=Ie.x,Ye=Ie.y;for(le=0;le<Ie.features.length;le++){var qe=Ie.features[le],ut=qe.geometry,Ot=qe.type;if(qe.geometry=[],Ot===1)for(Ce=0;Ce<ut.length;Ce+=2)qe.geometry.push(hn(ut[Ce],ut[Ce+1],Y,Xe,lt,Ye));else for(Ce=0;Ce<ut.length;Ce++){var nr=[];for(Te=0;Te<ut[Ce].length;Te+=2)nr.push(hn(ut[Ce][Te],ut[Ce][Te+1],Y,Xe,lt,Ye));qe.geometry.push(nr)}}return Ie.transformed=!0,Ie}function hn(Ie,Y,le,Ce,Te,Xe){return[Math.round(le*(Ie*Ce-Te)),Math.round(le*(Y*Ce-Xe))]}function xn(Ie,Y,le,Ce,Te){for(var Xe=Y===Te.maxZoom?0:Te.tolerance/((1<<Y)*Te.extent),lt={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:le,y:Ce,z:Y,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ye=0;Ye<Ie.length;Ye++){lt.numFeatures++,Sn(lt,Ie[Ye],Xe,Te);var qe=Ie[Ye].minX,ut=Ie[Ye].minY,Ot=Ie[Ye].maxX,nr=Ie[Ye].maxY;qe<lt.minX&&(lt.minX=qe),ut<lt.minY&&(lt.minY=ut),Ot>lt.maxX&&(lt.maxX=Ot),nr>lt.maxY&&(lt.maxY=nr)}return lt}function Sn(Ie,Y,le,Ce){var Te=Y.geometry,Xe=Y.type,lt=[];if(Xe==="Point"||Xe==="MultiPoint")for(var Ye=0;Ye<Te.length;Ye+=3)lt.push(Te[Ye]),lt.push(Te[Ye+1]),Ie.numPoints++,Ie.numSimplified++;else if(Xe==="LineString")ji(lt,Te,Ie,le,!1,!1);else if(Xe==="MultiLineString"||Xe==="Polygon")for(Ye=0;Ye<Te.length;Ye++)ji(lt,Te[Ye],Ie,le,Xe==="Polygon",Ye===0);else if(Xe==="MultiPolygon")for(var qe=0;qe<Te.length;qe++){var ut=Te[qe];for(Ye=0;Ye<ut.length;Ye++)ji(lt,ut[Ye],Ie,le,!0,Ye===0)}if(lt.length){var Ot=Y.tags||null;if(Xe==="LineString"&&Ce.lineMetrics){for(var nr in Ot={},Y.tags)Ot[nr]=Y.tags[nr];Ot.mapbox_clip_start=Te.start/Te.size,Ot.mapbox_clip_end=Te.end/Te.size}var Ht={geometry:lt,type:Xe==="Polygon"||Xe==="MultiPolygon"?3:Xe==="LineString"||Xe==="MultiLineString"?2:1,tags:Ot};Y.id!==null&&(Ht.id=Y.id),Ie.features.push(Ht)}}function ji(Ie,Y,le,Ce,Te,Xe){var lt=Ce*Ce;if(Ce>0&&Y.size<(Te?lt:Ce))le.numPoints+=Y.length/3;else{for(var Ye=[],qe=0;qe<Y.length;qe+=3)(Ce===0||Y[qe+2]>lt)&&(le.numSimplified++,Ye.push(Y[qe]),Ye.push(Y[qe+1])),le.numPoints++;Te&&function(ut,Ot){for(var nr=0,Ht=0,jr=ut.length,zr=jr-2;Ht<jr;zr=Ht,Ht+=2)nr+=(ut[Ht]-ut[zr])*(ut[Ht+1]+ut[zr+1]);if(nr>0===Ot)for(Ht=0,jr=ut.length;Ht<jr/2;Ht+=2){var Ir=ut[Ht],ln=ut[Ht+1];ut[Ht]=ut[jr-2-Ht],ut[Ht+1]=ut[jr-1-Ht],ut[jr-2-Ht]=Ir,ut[jr-1-Ht]=ln}}(Ye,Xe),Ie.push(Ye)}}function tn(Ie,Y){var le=(Y=this.options=function(Te,Xe){for(var lt in Xe)Te[lt]=Xe[lt];return Te}(Object.create(this.options),Y)).debug;if(le&&console.time("preprocess data"),Y.maxZoom<0||Y.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Y.promoteId&&Y.generateId)throw new Error("promoteId and generateId cannot be used together.");var Ce=function(Te,Xe){var lt=[];if(Te.type==="FeatureCollection")for(var Ye=0;Ye<Te.features.length;Ye++)nt(lt,Te.features[Ye],Xe,Ye);else nt(lt,Te.type==="Feature"?Te:{geometry:Te},Xe);return lt}(Ie,Y);this.tiles={},this.tileCoords=[],le&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Y.indexMaxZoom,Y.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Ce=function(Te,Xe){var lt=Xe.buffer/Xe.extent,Ye=Te,qe=Fr(Te,1,-1-lt,lt,0,-1,2,Xe),ut=Fr(Te,1,1-lt,2+lt,0,-1,2,Xe);return(qe||ut)&&(Ye=Fr(Te,1,-lt,1+lt,0,-1,2,Xe)||[],qe&&(Ye=Cr(qe,1).concat(Ye)),ut&&(Ye=Ye.concat(Cr(ut,-1)))),Ye}(Ce,Y),Ce.length&&this.splitTile(Ce,0,0,0),le&&(Ce.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Wi(Ie,Y,le){return 32*((1<<Ie)*le+Y)+Ie}function hs(Ie,Y){const le=Ie.tileID.canonical;if(!this._geoJSONIndex)return Y(null,null);const Ce=this._geoJSONIndex.getTile(le.z,le.x,le.y);if(!Ce)return Y(null,null);const Te=new $(Ce.features);let Xe=fe.exports(Te);Xe.byteOffset===0&&Xe.byteLength===Xe.buffer.byteLength||(Xe=new Uint8Array(Xe)),Y(null,{vectorTile:Te,rawData:Xe.buffer})}tn.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},tn.prototype.splitTile=function(Ie,Y,le,Ce,Te,Xe,lt){for(var Ye=[Ie,Y,le,Ce],qe=this.options,ut=qe.debug;Ye.length;){Ce=Ye.pop(),le=Ye.pop(),Y=Ye.pop(),Ie=Ye.pop();var Ot=1<<Y,nr=Wi(Y,le,Ce),Ht=this.tiles[nr];if(!Ht&&(ut>1&&console.time("creation"),Ht=this.tiles[nr]=xn(Ie,Y,le,Ce,qe),this.tileCoords.push({z:Y,x:le,y:Ce}),ut)){ut>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Y,le,Ce,Ht.numFeatures,Ht.numPoints,Ht.numSimplified),console.timeEnd("creation"));var jr="z"+Y;this.stats[jr]=(this.stats[jr]||0)+1,this.total++}if(Ht.source=Ie,Te){if(Y===qe.maxZoom||Y===Te)continue;var zr=1<<Te-Y;if(le!==Math.floor(Xe/zr)||Ce!==Math.floor(lt/zr))continue}else if(Y===qe.indexMaxZoom||Ht.numPoints<=qe.indexMaxPoints)continue;if(Ht.source=null,Ie.length!==0){ut>1&&console.time("clipping");var Ir,ln,dn,In,mn,Bn,Pn=.5*qe.buffer/qe.extent,Vn=.5-Pn,Ti=.5+Pn,oi=1+Pn;Ir=ln=dn=In=null,mn=Fr(Ie,Ot,le-Pn,le+Ti,0,Ht.minX,Ht.maxX,qe),Bn=Fr(Ie,Ot,le+Vn,le+oi,0,Ht.minX,Ht.maxX,qe),Ie=null,mn&&(Ir=Fr(mn,Ot,Ce-Pn,Ce+Ti,1,Ht.minY,Ht.maxY,qe),ln=Fr(mn,Ot,Ce+Vn,Ce+oi,1,Ht.minY,Ht.maxY,qe),mn=null),Bn&&(dn=Fr(Bn,Ot,Ce-Pn,Ce+Ti,1,Ht.minY,Ht.maxY,qe),In=Fr(Bn,Ot,Ce+Vn,Ce+oi,1,Ht.minY,Ht.maxY,qe),Bn=null),ut>1&&console.timeEnd("clipping"),Ye.push(Ir||[],Y+1,2*le,2*Ce),Ye.push(ln||[],Y+1,2*le,2*Ce+1),Ye.push(dn||[],Y+1,2*le+1,2*Ce),Ye.push(In||[],Y+1,2*le+1,2*Ce+1)}}},tn.prototype.getTile=function(Ie,Y,le){var Ce=this.options,Te=Ce.extent,Xe=Ce.debug;if(Ie<0||Ie>24)return null;var lt=1<<Ie,Ye=Wi(Ie,Y=(Y%lt+lt)%lt,le);if(this.tiles[Ye])return Kr(this.tiles[Ye],Te);Xe>1&&console.log("drilling down to z%d-%d-%d",Ie,Y,le);for(var qe,ut=Ie,Ot=Y,nr=le;!qe&&ut>0;)ut--,Ot=Math.floor(Ot/2),nr=Math.floor(nr/2),qe=this.tiles[Wi(ut,Ot,nr)];return qe&&qe.source?(Xe>1&&console.log("found parent tile z%d-%d-%d",ut,Ot,nr),Xe>1&&console.time("drilling down"),this.splitTile(qe.source,ut,Ot,nr,Ie,Y,le),Xe>1&&console.timeEnd("drilling down"),this.tiles[Ye]?Kr(this.tiles[Ye],Te):null):null};class Ln extends P{constructor(Y,le,Ce,Te){super(Y,le,Ce,hs),Te&&(this.loadGeoJSON=Te)}loadData(Y,le){var Ce;(Ce=this._pendingRequest)===null||Ce===void 0||Ce.cancel(),this._pendingCallback&&this._pendingCallback(null,{abandoned:!0});const Te=!!(Y&&Y.request&&Y.request.collectResourceTiming)&&new a.RequestPerformance(Y.request);this._pendingCallback=le,this._pendingRequest=this.loadGeoJSON(Y,(Xe,lt)=>{if(delete this._pendingCallback,delete this._pendingRequest,Xe||!lt)return le(Xe);if(typeof lt!="object")return le(new Error(`Input data given to '${Y.source}' is not a valid GeoJSON object.`));{k(lt,!0);try{if(Y.filter){const qe=a.createExpression(Y.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(qe.result==="error")throw new Error(qe.value.map(Ot=>`${Ot.key}: ${Ot.message}`).join(", "));lt={type:"FeatureCollection",features:lt.features.filter(Ot=>qe.value.evaluate({zoom:0},Ot))}}this._geoJSONIndex=Y.cluster?new dr(function({superclusterOptions:qe,clusterProperties:ut}){if(!ut||!qe)return qe;const Ot={},nr={},Ht={accumulated:null,zoom:0},jr={properties:null},zr=Object.keys(ut);for(const Ir of zr){const[ln,dn]=ut[Ir],In=a.createExpression(dn),mn=a.createExpression(typeof ln=="string"?[ln,["accumulated"],["get",Ir]]:ln);Ot[Ir]=In.value,nr[Ir]=mn.value}return qe.map=Ir=>{jr.properties=Ir;const ln={};for(const dn of zr)ln[dn]=Ot[dn].evaluate(Ht,jr);return ln},qe.reduce=(Ir,ln)=>{jr.properties=ln;for(const dn of zr)Ht.accumulated=Ir[dn],Ir[dn]=nr[dn].evaluate(Ht,jr)},qe}(Y)).load(lt.features):function(qe,ut){return new tn(qe,ut)}(lt,Y.geojsonVtOptions)}catch(qe){return le(qe)}this.loaded={};const Ye={};if(Te){const qe=Te.finish();qe&&(Ye.resourceTiming={},Ye.resourceTiming[Y.source]=JSON.parse(JSON.stringify(qe)))}le(null,Ye)}})}reloadTile(Y,le){const Ce=this.loaded;return Ce&&Ce[Y.uid]?super.reloadTile(Y,le):this.loadTile(Y,le)}loadGeoJSON(Y,le){if(Y.request)return a.getJSON(Y.request,le);if(typeof Y.data=="string")try{le(null,JSON.parse(Y.data))}catch{le(new Error(`Input data given to '${Y.source}' is not a valid GeoJSON object.`))}else le(new Error(`Input data given to '${Y.source}' is not a valid GeoJSON object.`));return{cancel:()=>{}}}removeSource(Y,le){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),le()}getClusterExpansionZoom(Y,le){try{le(null,this._geoJSONIndex.getClusterExpansionZoom(Y.clusterId))}catch(Ce){le(Ce)}}getClusterChildren(Y,le){try{le(null,this._geoJSONIndex.getChildren(Y.clusterId))}catch(Ce){le(Ce)}}getClusterLeaves(Y,le){try{le(null,this._geoJSONIndex.getLeaves(Y.clusterId,Y.limit,Y.offset))}catch(Ce){le(Ce)}}}class nn{constructor(Y){this.self=Y,this.actor=new a.Actor(Y,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:P,geojson:Ln},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(le,Ce)=>{if(this.workerSourceTypes[le])throw new Error(`Worker source with name "${le}" already registered.`);this.workerSourceTypes[le]=Ce},this.self.registerRTLTextPlugin=le=>{if(a.plugin.isParsed())throw new Error("RTL text plugin already registered.");a.plugin.applyArabicShaping=le.applyArabicShaping,a.plugin.processBidirectionalText=le.processBidirectionalText,a.plugin.processStyledBidirectionalText=le.processStyledBidirectionalText}}setReferrer(Y,le){this.referrer=le}setImages(Y,le,Ce){this.availableImages[Y]=le;for(const Te in this.workerSources[Y]){const Xe=this.workerSources[Y][Te];for(const lt in Xe)Xe[lt].availableImages=le}Ce()}setLayers(Y,le,Ce){this.getLayerIndex(Y).replace(le),Ce()}updateLayers(Y,le,Ce){this.getLayerIndex(Y).update(le.layers,le.removedIds),Ce()}loadTile(Y,le,Ce){this.getWorkerSource(Y,le.type,le.source).loadTile(le,Ce)}loadDEMTile(Y,le,Ce){this.getDEMWorkerSource(Y,le.source).loadTile(le,Ce)}reloadTile(Y,le,Ce){this.getWorkerSource(Y,le.type,le.source).reloadTile(le,Ce)}abortTile(Y,le,Ce){this.getWorkerSource(Y,le.type,le.source).abortTile(le,Ce)}removeTile(Y,le,Ce){this.getWorkerSource(Y,le.type,le.source).removeTile(le,Ce)}removeDEMTile(Y,le){this.getDEMWorkerSource(Y,le.source).removeTile(le)}removeSource(Y,le,Ce){if(!this.workerSources[Y]||!this.workerSources[Y][le.type]||!this.workerSources[Y][le.type][le.source])return;const Te=this.workerSources[Y][le.type][le.source];delete this.workerSources[Y][le.type][le.source],Te.removeSource!==void 0?Te.removeSource(le,Ce):Ce()}loadWorkerSource(Y,le,Ce){try{this.self.importScripts(le.url),Ce()}catch(Te){Ce(Te.toString())}}syncRTLPluginState(Y,le,Ce){try{a.plugin.setState(le);const Te=a.plugin.getPluginURL();if(a.plugin.isLoaded()&&!a.plugin.isParsed()&&Te!=null){this.self.importScripts(Te);const Xe=a.plugin.isParsed();Ce(Xe?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Te}`),Xe)}}catch(Te){Ce(Te.toString())}}getAvailableImages(Y){let le=this.availableImages[Y];return le||(le=[]),le}getLayerIndex(Y){let le=this.layerIndexes[Y];return le||(le=this.layerIndexes[Y]=new p),le}getWorkerSource(Y,le,Ce){if(this.workerSources[Y]||(this.workerSources[Y]={}),this.workerSources[Y][le]||(this.workerSources[Y][le]={}),!this.workerSources[Y][le][Ce]){const Te={send:(Xe,lt,Ye)=>{this.actor.send(Xe,lt,Ye,Y)}};this.workerSources[Y][le][Ce]=new this.workerSourceTypes[le](Te,this.getLayerIndex(Y),this.getAvailableImages(Y))}return this.workerSources[Y][le][Ce]}getDEMWorkerSource(Y,le){return this.demWorkerSources[Y]||(this.demWorkerSources[Y]={}),this.demWorkerSources[Y][le]||(this.demWorkerSources[Y][le]=new R),this.demWorkerSources[Y][le]}enforceCacheSizeLimit(Y,le){a.enforceCacheSizeLimit(le)}}return a.isWorker()&&(self.worker=new nn(self)),nn}),c(["./shared"],function(a){var d=_;function _(g){return!function(i){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var m,v,S=new Blob([""],{type:"text/javascript"}),M=URL.createObjectURL(S);try{v=new Worker(M),m=!0}catch{m=!1}return v&&v.terminate(),URL.revokeObjectURL(M),m}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var m=document.createElement("canvas");m.width=m.height=1;var v=m.getContext("2d");if(!v)return!1;var S=v.getImageData(0,0,1,1);return S&&S.width===m.width}()?(p[u=i&&i.failIfMajorPerformanceCaveat]===void 0&&(p[u]=function(m){var v,S=function(M){var H=document.createElement("canvas"),q=Object.create(_.webGLContextAttributes);return q.failIfMajorPerformanceCaveat=M,H.getContext("webgl",q)||H.getContext("experimental-webgl",q)}(m);if(!S)return!1;try{v=S.createShader(S.VERTEX_SHADER)}catch{return!1}return!(!v||S.isContextLost())&&(S.shaderSource(v,"void main() {}"),S.compileShader(v),S.getShaderParameter(v,S.COMPILE_STATUS)===!0)}(u)),p[u]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var u}(g)}var p={};function E(g,i){if(Array.isArray(g)){if(!Array.isArray(i)||g.length!==i.length)return!1;for(let u=0;u<g.length;u++)if(!E(g[u],i[u]))return!1;return!0}if(typeof g=="object"&&g!==null&&i!==null){if(typeof i!="object"||Object.keys(g).length!==Object.keys(i).length)return!1;for(const u in g)if(!E(g[u],i[u]))return!1;return!0}return g===i}_.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};class w{static testProp(i){if(!w.docStyle)return i[0];for(let u=0;u<i.length;u++)if(i[u]in w.docStyle)return i[u];return i[0]}static create(i,u,m){const v=window.document.createElement(i);return u!==void 0&&(v.className=u),m&&m.appendChild(v),v}static createNS(i,u){return window.document.createElementNS(i,u)}static disableDrag(){w.docStyle&&w.selectProp&&(w.userSelect=w.docStyle[w.selectProp],w.docStyle[w.selectProp]="none")}static enableDrag(){w.docStyle&&w.selectProp&&(w.docStyle[w.selectProp]=w.userSelect)}static setTransform(i,u){i.style[w.transformProp]=u}static addEventListener(i,u,m,v={}){i.addEventListener(u,m,"passive"in v?v:v.capture)}static removeEventListener(i,u,m,v={}){i.removeEventListener(u,m,"passive"in v?v:v.capture)}static suppressClickInternal(i){i.preventDefault(),i.stopPropagation(),window.removeEventListener("click",w.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",w.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",w.suppressClickInternal,!0)},0)}static mousePos(i,u){const m=i.getBoundingClientRect();return new a.pointGeometry(u.clientX-m.left-i.clientLeft,u.clientY-m.top-i.clientTop)}static touchPos(i,u){const m=i.getBoundingClientRect(),v=[];for(let S=0;S<u.length;S++)v.push(new a.pointGeometry(u[S].clientX-m.left-i.clientLeft,u[S].clientY-m.top-i.clientTop));return v}static mouseButton(i){return i.button}static remove(i){i.parentNode&&i.parentNode.removeChild(i)}}w.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,w.selectProp=w.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),w.transformProp=w.testProp(["transform","WebkitTransform"]);class x{constructor(i){this._transformRequestFn=i}transformRequest(i,u){return this._transformRequestFn&&this._transformRequestFn(i,u)||{url:i}}normalizeSpriteURL(i,u,m){const v=function(S){const M=S.match(Q);if(!M)throw new Error(`Unable to parse URL "${S}"`);return{protocol:M[1],authority:M[2],path:M[3]||"/",params:M[4]?M[4].split("&"):[]}}(i);return v.path+=`${u}${m}`,function(S){const M=S.params.length?`?${S.params.join("&")}`:"";return`${S.protocol}://${S.authority}${S.path}${M}`}(v)}setTransformRequest(i){this._transformRequestFn=i}}const Q=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;class P{constructor(i,u,m,v){this.context=i,this.format=m,this.texture=i.gl.createTexture(),this.update(u,v)}update(i,u,m){const{width:v,height:S}=i,M=!(this.size&&this.size[0]===v&&this.size[1]===S||m),{context:H}=this,{gl:q}=H;if(this.useMipmap=Boolean(u&&u.useMipmap),q.bindTexture(q.TEXTURE_2D,this.texture),H.pixelStoreUnpackFlipY.set(!1),H.pixelStoreUnpack.set(1),H.pixelStoreUnpackPremultiplyAlpha.set(this.format===q.RGBA&&(!u||u.premultiply!==!1)),M)this.size=[v,S],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||a.isImageBitmap(i)?q.texImage2D(q.TEXTURE_2D,0,this.format,this.format,q.UNSIGNED_BYTE,i):q.texImage2D(q.TEXTURE_2D,0,this.format,v,S,0,this.format,q.UNSIGNED_BYTE,i.data);else{const{x:J,y:se}=m||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||a.isImageBitmap(i)?q.texSubImage2D(q.TEXTURE_2D,0,J,se,q.RGBA,q.UNSIGNED_BYTE,i):q.texSubImage2D(q.TEXTURE_2D,0,J,se,v,S,q.RGBA,q.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&q.generateMipmap(q.TEXTURE_2D)}bind(i,u,m){const{context:v}=this,{gl:S}=v;S.bindTexture(S.TEXTURE_2D,this.texture),m!==S.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(m=S.LINEAR),i!==this.filter&&(S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MAG_FILTER,i),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MIN_FILTER,m||i),this.filter=i),u!==this.wrap&&(S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,u),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,u),this.wrap=u)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}function R(g){const{userImage:i}=g;return!!(i&&i.render&&i.render())&&(g.data.replace(new Uint8Array(i.data.buffer)),!0)}class k extends a.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(i){if(this.loaded!==i&&(this.loaded=i,i)){for(const{ids:u,callback:m}of this.requestors)this._notify(u,m);this.requestors=[]}}getImage(i){return this.images[i]}addImage(i,u){if(this.images[i])throw new Error(`Image id ${i} already exist, use updateImage instead`);this._validate(i,u)&&(this.images[i]=u)}_validate(i,u){let m=!0;return this._validateStretch(u.stretchX,u.data&&u.data.width)||(this.fire(new a.ErrorEvent(new Error(`Image "${i}" has invalid "stretchX" value`))),m=!1),this._validateStretch(u.stretchY,u.data&&u.data.height)||(this.fire(new a.ErrorEvent(new Error(`Image "${i}" has invalid "stretchY" value`))),m=!1),this._validateContent(u.content,u)||(this.fire(new a.ErrorEvent(new Error(`Image "${i}" has invalid "content" value`))),m=!1),m}_validateStretch(i,u){if(!i)return!0;let m=0;for(const v of i){if(v[0]<m||v[1]<v[0]||u<v[1])return!1;m=v[1]}return!0}_validateContent(i,u){return!(i&&(i.length!==4||i[0]<0||u.data.width<i[0]||i[1]<0||u.data.height<i[1]||i[2]<0||u.data.width<i[2]||i[3]<0||u.data.height<i[3]||i[2]<i[0]||i[3]<i[1]))}updateImage(i,u){const m=this.images[i];if(m.data.width!==u.data.width||m.data.height!==u.data.height)throw new Error(`size mismatch between old image (${m.data.width}x${m.data.height}) and new image (${u.data.width}x${u.data.height}).`);u.version=m.version+1,this.images[i]=u,this.updatedImages[i]=!0}removeImage(i){const u=this.images[i];delete this.images[i],delete this.patterns[i],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(i,u){let m=!0;if(!this.isLoaded())for(const v of i)this.images[v]||(m=!1);this.isLoaded()||m?this._notify(i,u):this.requestors.push({ids:i,callback:u})}_notify(i,u){const m={};for(const v of i){this.images[v]||this.fire(new a.Event("styleimagemissing",{id:v}));const S=this.images[v];S?m[v]={data:S.data.clone(),pixelRatio:S.pixelRatio,sdf:S.sdf,version:S.version,stretchX:S.stretchX,stretchY:S.stretchY,content:S.content,hasRenderCallback:Boolean(S.userImage&&S.userImage.render)}:a.warnOnce(`Image "${v}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}u(null,m)}getPixelSize(){const{width:i,height:u}=this.atlasImage;return{width:i,height:u}}getPattern(i){const u=this.patterns[i],m=this.getImage(i);if(!m)return null;if(u&&u.position.version===m.version)return u.position;if(u)u.position.version=m.version;else{const v={w:m.data.width+2,h:m.data.height+2,x:0,y:0},S=new a.ImagePosition(v,m);this.patterns[i]={bin:v,position:S}}return this._updatePatternAtlas(),this.patterns[i].position}bind(i){const u=i.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new P(i,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){const i=[];for(const S in this.patterns)i.push(this.patterns[S].bin);const{w:u,h:m}=a.potpack(i),v=this.atlasImage;v.resize({width:u||1,height:m||1});for(const S in this.patterns){const{bin:M}=this.patterns[S],H=M.x+1,q=M.y+1,J=this.images[S].data,se=J.width,pe=J.height;a.RGBAImage.copy(J,v,{x:0,y:0},{x:H,y:q},{width:se,height:pe}),a.RGBAImage.copy(J,v,{x:0,y:pe-1},{x:H,y:q-1},{width:se,height:1}),a.RGBAImage.copy(J,v,{x:0,y:0},{x:H,y:q+pe},{width:se,height:1}),a.RGBAImage.copy(J,v,{x:se-1,y:0},{x:H-1,y:q},{width:1,height:pe}),a.RGBAImage.copy(J,v,{x:0,y:0},{x:H+se,y:q},{width:1,height:pe})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(i){for(const u of i){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;const m=this.images[u];m||a.warnOnce(`Image with ID: "${u}" was not found`),R(m)&&this.updateImage(u,m)}}}const O=1e20;function G(g,i,u,m,v,S,M,H,q){for(let J=i;J<i+m;J++)K(g,u*S+J,S,v,M,H,q);for(let J=u;J<u+v;J++)K(g,J*S+i,1,m,M,H,q)}function K(g,i,u,m,v,S,M){S[0]=0,M[0]=-O,M[1]=O,v[0]=g[i];for(let H=1,q=0,J=0;H<m;H++){v[H]=g[i+H*u];const se=H*H;do{const pe=S[q];J=(v[H]-v[pe]+se-pe*pe)/(H-pe)/2}while(J<=M[q]&&--q>-1);q++,S[q]=H,M[q]=J,M[q+1]=O}for(let H=0,q=0;H<m;H++){for(;M[q+1]<H;)q++;const J=S[q],se=H-J;g[i+H*u]=v[J]+se*se}}class Z{constructor(i,u){this.requestManager=i,this.localIdeographFontFamily=u,this.entries={}}setURL(i){this.url=i}getGlyphs(i,u){const m=[];for(const v in i)for(const S of i[v])m.push({stack:v,id:S});a.asyncAll(m,({stack:v,id:S},M)=>{let H=this.entries[v];H||(H=this.entries[v]={glyphs:{},requests:{},ranges:{}});let q=H.glyphs[S];if(q!==void 0)return void M(null,{stack:v,id:S,glyph:q});if(q=this._tinySDF(H,v,S),q)return H.glyphs[S]=q,void M(null,{stack:v,id:S,glyph:q});const J=Math.floor(S/256);if(256*J>65535)return void M(new Error("glyphs > 65535 not supported"));if(H.ranges[J])return void M(null,{stack:v,id:S,glyph:q});let se=H.requests[J];se||(se=H.requests[J]=[],Z.loadGlyphRange(v,J,this.url,this.requestManager,(pe,we)=>{if(we){for(const He in we)this._doesCharSupportLocalGlyph(+He)||(H.glyphs[+He]=we[+He]);H.ranges[J]=!0}for(const He of se)He(pe,we);delete H.requests[J]})),se.push((pe,we)=>{pe?M(pe):we&&M(null,{stack:v,id:S,glyph:we[S]||null})})},(v,S)=>{if(v)u(v);else if(S){const M={};for(const{stack:H,id:q,glyph:J}of S)(M[H]||(M[H]={}))[q]=J&&{id:J.id,bitmap:J.bitmap.clone(),metrics:J.metrics};u(null,M)}})}_doesCharSupportLocalGlyph(i){return!!this.localIdeographFontFamily&&(a.unicodeBlockLookup["CJK Unified Ideographs"](i)||a.unicodeBlockLookup["Hangul Syllables"](i)||a.unicodeBlockLookup.Hiragana(i)||a.unicodeBlockLookup.Katakana(i))}_tinySDF(i,u,m){const v=this.localIdeographFontFamily;if(!v||!this._doesCharSupportLocalGlyph(m))return;let S=i.tinySDF;if(!S){let H="400";/bold/i.test(u)?H="900":/medium/i.test(u)?H="500":/light/i.test(u)&&(H="200"),S=i.tinySDF=new Z.TinySDF({fontSize:24,buffer:3,radius:8,cutoff:.25,fontFamily:v,fontWeight:H})}const M=S.draw(String.fromCharCode(m));return{id:m,bitmap:new a.AlphaImage({width:M.width||30,height:M.height||30},M.data),metrics:{width:M.glyphWidth||24,height:M.glyphHeight||24,left:M.glyphLeft||0,top:M.glyphTop-27||-8,advance:M.glyphAdvance||24}}}}Z.loadGlyphRange=function(g,i,u,m,v){const S=256*i,M=S+255,H=m.transformRequest(u.replace("{fontstack}",g).replace("{range}",`${S}-${M}`),a.ResourceType.Glyphs);a.getArrayBuffer(H,(q,J)=>{if(q)v(q);else if(J){const se={};for(const pe of a.parseGlyphPbf(J))se[pe.id]=pe;v(null,se)}})},Z.TinySDF=class{constructor({fontSize:g=24,buffer:i=3,radius:u=8,cutoff:m=.25,fontFamily:v="sans-serif",fontWeight:S="normal",fontStyle:M="normal"}={}){this.buffer=i,this.cutoff=m,this.radius=u;const H=this.size=g+4*i,q=this._createCanvas(H),J=this.ctx=q.getContext("2d",{willReadFrequently:!0});J.font=`${M} ${S} ${g}px ${v}`,J.textBaseline="alphabetic",J.textAlign="left",J.fillStyle="black",this.gridOuter=new Float64Array(H*H),this.gridInner=new Float64Array(H*H),this.f=new Float64Array(H),this.z=new Float64Array(H+1),this.v=new Uint16Array(H)}_createCanvas(g){const i=document.createElement("canvas");return i.width=i.height=g,i}draw(g){const{width:i,actualBoundingBoxAscent:u,actualBoundingBoxDescent:m,actualBoundingBoxLeft:v,actualBoundingBoxRight:S}=this.ctx.measureText(g),M=Math.ceil(u),H=Math.min(this.size-this.buffer,Math.ceil(S-v)),q=Math.min(this.size-this.buffer,M+Math.ceil(m)),J=H+2*this.buffer,se=q+2*this.buffer,pe=Math.max(J*se,0),we=new Uint8ClampedArray(pe),He={data:we,width:J,height:se,glyphWidth:H,glyphHeight:q,glyphTop:M,glyphLeft:0,glyphAdvance:i};if(H===0||q===0)return He;const{ctx:Me,buffer:Re,gridInner:ct,gridOuter:wt}=this;Me.clearRect(Re,Re,H,q),Me.fillText(g,Re,Re+M);const It=Me.getImageData(Re,Re,H,q);wt.fill(O,0,pe),ct.fill(0,0,pe);for(let We=0;We<q;We++)for(let Rt=0;Rt<H;Rt++){const kt=It.data[4*(We*H+Rt)+3]/255;if(kt===0)continue;const Xt=(We+Re)*J+Rt+Re;if(kt===1)wt[Xt]=0,ct[Xt]=O;else{const Zt=.5-kt;wt[Xt]=Zt>0?Zt*Zt:0,ct[Xt]=Zt<0?Zt*Zt:0}}G(wt,0,0,J,se,J,this.f,this.v,this.z),G(ct,Re,Re,H,q,J,this.f,this.v,this.z);for(let We=0;We<pe;We++){const Rt=Math.sqrt(wt[We])-Math.sqrt(ct[We]);we[We]=Math.round(255-255*(Rt/this.radius+this.cutoff))}return He}};const $=new a.Properties({anchor:new a.DataConstantProperty(a.spec.light.anchor),position:new class{constructor(){this.specification=a.spec.light.position}possiblyEvaluate(g,i){return a.sphericalToCartesian(g.expression.evaluate(i))}interpolate(g,i,u){return{x:a.number(g.x,i.x,u),y:a.number(g.y,i.y,u),z:a.number(g.z,i.z,u)}}},color:new a.DataConstantProperty(a.spec.light.color),intensity:new a.DataConstantProperty(a.spec.light.intensity)}),fe="-transition";class Ae extends a.Evented{constructor(i){super(),this._transitionable=new a.Transitionable($),this.setLight(i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(i,u={}){if(!this._validate(a.validateLight,i,u))for(const m in i){const v=i[m];m.endsWith(fe)?this._transitionable.setTransition(m.slice(0,-fe.length),v):this._transitionable.setValue(m,v)}}updateTransitions(i){this._transitioning=this._transitionable.transitioned(i,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(i){this.properties=this._transitioning.possiblyEvaluate(i)}_validate(i,u,m){return(!m||m.validate!==!1)&&a.emitValidationErrors(this,i.call(a.validateStyle,a.extend({value:u,style:{glyphs:!0,sprite:!0},styleSpec:a.spec})))}}class ge{constructor(i,u){this.width=i,this.height=u,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(i,u){const m=i.join(",")+String(u);return this.dashEntry[m]||(this.dashEntry[m]=this.addDash(i,u)),this.dashEntry[m]}getDashRanges(i,u,m){const v=[];let S=i.length%2==1?-i[i.length-1]*m:0,M=i[0]*m,H=!0;v.push({left:S,right:M,isDash:H,zeroLength:i[0]===0});let q=i[0];for(let J=1;J<i.length;J++){H=!H;const se=i[J];S=q*m,q+=se,M=q*m,v.push({left:S,right:M,isDash:H,zeroLength:se===0})}return v}addRoundDash(i,u,m){const v=u/2;for(let S=-m;S<=m;S++){const M=this.width*(this.nextRow+m+S);let H=0,q=i[H];for(let J=0;J<this.width;J++){J/q.right>1&&(q=i[++H]);const se=Math.abs(J-q.left),pe=Math.abs(J-q.right),we=Math.min(se,pe);let He;const Me=S/m*(v+1);if(q.isDash){const Re=v-Math.abs(Me);He=Math.sqrt(we*we+Re*Re)}else He=v-Math.sqrt(we*we+Me*Me);this.data[M+J]=Math.max(0,Math.min(255,He+128))}}}addRegularDash(i){for(let H=i.length-1;H>=0;--H){const q=i[H],J=i[H+1];q.zeroLength?i.splice(H,1):J&&J.isDash===q.isDash&&(J.left=q.left,i.splice(H,1))}const u=i[0],m=i[i.length-1];u.isDash===m.isDash&&(u.left=m.left-this.width,m.right=u.right+this.width);const v=this.width*this.nextRow;let S=0,M=i[S];for(let H=0;H<this.width;H++){H/M.right>1&&(M=i[++S]);const q=Math.abs(H-M.left),J=Math.abs(H-M.right),se=Math.min(q,J);this.data[v+H]=Math.max(0,Math.min(255,(M.isDash?se:-se)+128))}}addDash(i,u){const m=u?7:0,v=2*m+1;if(this.nextRow+v>this.height)return a.warnOnce("LineAtlas out of space"),null;let S=0;for(let H=0;H<i.length;H++)S+=i[H];if(S!==0){const H=this.width/S,q=this.getDashRanges(i,this.width,H);u?this.addRoundDash(q,H,m):this.addRegularDash(q)}const M={y:(this.nextRow+m+.5)/this.height,height:2*m/this.height,width:S};return this.nextRow+=v,this.dirty=!0,M}bind(i){const u=i.gl;this.texture?(u.bindTexture(u.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,u.texSubImage2D(u.TEXTURE_2D,0,0,0,this.width,this.height,u.ALPHA,u.UNSIGNED_BYTE,this.data))):(this.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,this.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.ALPHA,this.width,this.height,0,u.ALPHA,u.UNSIGNED_BYTE,this.data))}}class he{constructor(i,u){this.workerPool=i,this.actors=[],this.currentActor=0,this.id=a.uniqueId();const m=this.workerPool.acquire(this.id);for(let v=0;v<m.length;v++){const S=new he.Actor(m[v],u,this.id);S.name=`Worker ${v}`,this.actors.push(S)}if(!this.actors.length)throw new Error("No actors found")}broadcast(i,u,m){a.asyncAll(this.actors,(v,S)=>{v.send(i,u,S)},m=m||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(i=>{i.remove()}),this.actors=[],this.workerPool.release(this.id)}}function ee(g,i,u){const m=function(v,S){if(v)return u(v);if(S){const M=a.pick(a.extend(S,g),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);S.vector_layers&&(M.vectorLayers=S.vector_layers,M.vectorLayerIds=M.vectorLayers.map(H=>H.id)),u(null,M)}};return g.url?a.getJSON(i.transformRequest(g.url,a.ResourceType.Source),m):a.exported.frame(()=>m(null,g))}he.Actor=a.Actor;class ne{constructor(i,u,m){this.bounds=a.LngLatBounds.convert(this.validateBounds(i)),this.minzoom=u||0,this.maxzoom=m||24}validateBounds(i){return Array.isArray(i)&&i.length===4?[Math.max(-180,i[0]),Math.max(-90,i[1]),Math.min(180,i[2]),Math.min(90,i[3])]:[-180,-90,180,90]}contains(i){const u=Math.pow(2,i.z),m=Math.floor(a.mercatorXfromLng(this.bounds.getWest())*u),v=Math.floor(a.mercatorYfromLat(this.bounds.getNorth())*u),S=Math.ceil(a.mercatorXfromLng(this.bounds.getEast())*u),M=Math.ceil(a.mercatorYfromLat(this.bounds.getSouth())*u);return i.x>=m&&i.x<S&&i.y>=v&&i.y<M}}class xe extends a.Evented{constructor(i,u,m,v){if(super(),this.id=i,this.dispatcher=m,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.extend(this,a.pick(u,["url","scheme","tileSize","promoteId"])),this._options=a.extend({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(v)}load(){this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=ee(this._options,this.map._requestManager,(i,u)=>{this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),i?this.fire(new a.ErrorEvent(i)):u&&(a.extend(this,u),u.bounds&&(this.tileBounds=new ne(u.bounds,this.minzoom,this.maxzoom)),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}onAdd(i){this.map=i,this.load()}setSourceProperty(i){this._tileJSONRequest&&this._tileJSONRequest.cancel(),i(),this.load()}setTiles(i){return this.setSourceProperty(()=>{this._options.tiles=i}),this}setUrl(i){return this.setSourceProperty(()=>{this.url=i,this._options.url=i}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return a.extend({},this._options)}loadTile(i,u){const m=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),v={request:this.map._requestManager.transformRequest(m,a.ResourceType.Tile),uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,tileSize:this.tileSize*i.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function S(M,H){return delete i.request,i.aborted?u(null):M&&M.status!==404?u(M):(H&&H.resourceTiming&&(i.resourceTiming=H.resourceTiming),this.map._refreshExpiredTiles&&H&&i.setExpiryData(H),i.loadVectorData(H,this.map.painter),a.cacheEntryPossiblyAdded(this.dispatcher),u(null),void(i.reloadCallback&&(this.loadTile(i,i.reloadCallback),i.reloadCallback=null)))}v.request.collectResourceTiming=this._collectResourceTiming,i.actor&&i.state!=="expired"?i.state==="loading"?i.reloadCallback=u:i.request=i.actor.send("reloadTile",v,S.bind(this)):(i.actor=this.dispatcher.getActor(),i.request=i.actor.send("loadTile",v,S.bind(this)))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.actor&&i.actor.send("abortTile",{uid:i.uid,type:this.type,source:this.id},void 0)}unloadTile(i){i.unloadVectorData(),i.actor&&i.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id},void 0)}hasTransition(){return!1}}class ve extends a.Evented{constructor(i,u,m,v){super(),this.id=i,this.dispatcher=m,this.setEventedParent(v),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.extend({type:"raster"},u),a.extend(this,a.pick(u,["url","scheme","tileSize"]))}load(){this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=ee(this._options,this.map._requestManager,(i,u)=>{this._tileJSONRequest=null,this._loaded=!0,i?this.fire(new a.ErrorEvent(i)):u&&(a.extend(this,u),u.bounds&&(this.tileBounds=new ne(u.bounds,this.minzoom,this.maxzoom)),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))})}loaded(){return this._loaded}onAdd(i){this.map=i,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}serialize(){return a.extend({},this._options)}hasTile(i){return!this.tileBounds||this.tileBounds.contains(i.canonical)}loadTile(i,u){const m=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);i.request=a.getImage(this.map._requestManager.transformRequest(m,a.ResourceType.Tile),(v,S,M)=>{if(delete i.request,i.aborted)i.state="unloaded",u(null);else if(v)i.state="errored",u(v);else if(S){this.map._refreshExpiredTiles&&i.setExpiryData(M);const H=this.map.painter.context,q=H.gl;i.texture=this.map.painter.getTileTexture(S.width),i.texture?i.texture.update(S,{useMipmap:!0}):(i.texture=new P(H,S,q.RGBA,{useMipmap:!0}),i.texture.bind(q.LINEAR,q.CLAMP_TO_EDGE,q.LINEAR_MIPMAP_NEAREST),H.extTextureFilterAnisotropic&&q.texParameterf(q.TEXTURE_2D,H.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,H.extTextureFilterAnisotropicMax)),i.state="loaded",a.cacheEntryPossiblyAdded(this.dispatcher),u(null)}})}abortTile(i,u){i.request&&(i.request.cancel(),delete i.request),u()}unloadTile(i,u){i.texture&&this.map.painter.saveTileTexture(i.texture),u()}hasTransition(){return!1}}let ze;class Le extends ve{constructor(i,u,m,v){super(i,u,m,v),this.type="raster-dem",this.maxzoom=22,this._options=a.extend({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox"}serialize(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}}loadTile(i,u){const m=i.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);function v(S,M){S&&(i.state="errored",u(S)),M&&(i.dem=M,i.needsHillshadePrepare=!0,i.needsTerrainPrepare=!0,i.state="loaded",u(null))}i.request=a.getImage(this.map._requestManager.transformRequest(m,a.ResourceType.Tile),function(S,M){if(delete i.request,i.aborted)i.state="unloaded",u(null);else if(S)i.state="errored",u(S);else if(M){this.map._refreshExpiredTiles&&i.setExpiryData(M),delete M.cacheControl,delete M.expires;const H=a.isImageBitmap(M)&&(ze==null&&(ze=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),ze)?M:a.exported.getImageData(M,1),q={uid:i.uid,coord:i.tileID,source:this.id,rawImageData:H,encoding:this.encoding};i.actor&&i.state!=="expired"||(i.actor=this.dispatcher.getActor(),i.actor.send("loadDEMTile",q,v.bind(this)))}}.bind(this)),i.neighboringTiles=this._getNeighboringTiles(i.tileID)}_getNeighboringTiles(i){const u=i.canonical,m=Math.pow(2,u.z),v=(u.x-1+m)%m,S=u.x===0?i.wrap-1:i.wrap,M=(u.x+1+m)%m,H=u.x+1===m?i.wrap+1:i.wrap,q={};return q[new a.OverscaledTileID(i.overscaledZ,S,u.z,v,u.y).key]={backfilled:!1},q[new a.OverscaledTileID(i.overscaledZ,H,u.z,M,u.y).key]={backfilled:!1},u.y>0&&(q[new a.OverscaledTileID(i.overscaledZ,S,u.z,v,u.y-1).key]={backfilled:!1},q[new a.OverscaledTileID(i.overscaledZ,i.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},q[new a.OverscaledTileID(i.overscaledZ,H,u.z,M,u.y-1).key]={backfilled:!1}),u.y+1<m&&(q[new a.OverscaledTileID(i.overscaledZ,S,u.z,v,u.y+1).key]={backfilled:!1},q[new a.OverscaledTileID(i.overscaledZ,i.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},q[new a.OverscaledTileID(i.overscaledZ,H,u.z,M,u.y+1).key]={backfilled:!1}),q}unloadTile(i){i.demTexture&&this.map.painter.saveTileTexture(i.demTexture),i.fbo&&(i.fbo.destroy(),delete i.fbo),i.dem&&delete i.dem,delete i.neighboringTiles,i.state="unloaded",i.actor&&i.actor.send("removeDEMTile",{uid:i.uid,source:this.id})}}class Ke extends a.Evented{constructor(i,u,m,v){super(),this.id=i,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=m.getActor(),this.setEventedParent(v),this._data=u.data,this._options=a.extend({},u),this._collectResourceTiming=u.collectResourceTiming,u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId;const S=a.EXTENT/this.tileSize;this.workerOptions=a.extend({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:(u.buffer!==void 0?u.buffer:128)*S,tolerance:(u.tolerance!==void 0?u.tolerance:.375)*S,extent:a.EXTENT,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:u.clusterMaxZoom!==void 0?u.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,u.clusterMinPoints||2),extent:a.EXTENT,radius:(u.clusterRadius||50)*S,log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions)}load(){this._updateWorkerData("metadata")}onAdd(i){this.map=i,this.load()}setData(i){return this._data=i,this._updateWorkerData("content"),this}getClusterExpansionZoom(i,u){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:i,source:this.id},u),this}getClusterChildren(i,u){return this.actor.send("geojson.getClusterChildren",{clusterId:i,source:this.id},u),this}getClusterLeaves(i,u,m,v){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:i,limit:u,offset:m},v),this}_updateWorkerData(i){const u=a.extend({},this.workerOptions),m=this._data;typeof m=="string"?(u.request=this.map._requestManager.transformRequest(a.exported.resolveURL(m),a.ResourceType.Source),u.request.collectResourceTiming=this._collectResourceTiming):u.data=JSON.stringify(m),this._pendingLoads++,this.fire(new a.Event("dataloading",{dataType:"source"})),this.actor.send(`${this.type}.loadData`,u,(v,S)=>{if(this._pendingLoads--,this._removed||S&&S.abandoned)return void this.fire(new a.Event("dataabort",{dataType:"source",sourceDataType:i}));let M=null;if(S&&S.resourceTiming&&S.resourceTiming[this.id]&&(M=S.resourceTiming[this.id].slice(0)),v)return void this.fire(new a.ErrorEvent(v));const H={dataType:"source",sourceDataType:i};this._collectResourceTiming&&M&&M.length>0&&a.extend(H,{resourceTiming:M}),this.fire(new a.Event("data",H))})}loaded(){return this._pendingLoads===0}loadTile(i,u){const m=i.actor?"reloadTile":"loadTile";i.actor=this.actor;const v={type:this.type,uid:i.uid,tileID:i.tileID,zoom:i.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};i.request=this.actor.send(m,v,(S,M)=>(delete i.request,i.unloadVectorData(),i.aborted?u(null):S?u(S):(i.loadVectorData(M,this.map.painter,m==="reloadTile"),u(null))))}abortTile(i){i.request&&(i.request.cancel(),delete i.request),i.aborted=!0}unloadTile(i){i.unloadVectorData(),this.actor.send("removeTile",{uid:i.uid,type:this.type,source:this.id})}onRemove(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})}serialize(){return a.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var Ue=a.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class rt extends a.Evented{constructor(i,u,m,v){super(),this.id=i,this.dispatcher=m,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(v),this.options=u}load(i,u){this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this.url=this.options.url,a.getImage(this.map._requestManager.transformRequest(this.url,a.ResourceType.Image),(m,v)=>{this._loaded=!0,m?this.fire(new a.ErrorEvent(m)):v&&(this.image=v,i&&(this.coordinates=i),u&&u(),this._finishLoading())})}loaded(){return this._loaded}updateImage(i){return this.image&&i.url?(this.options.url=i.url,this.load(i.coordinates,()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(i){this.map=i,this.load()}setCoordinates(i){this.coordinates=i;const u=i.map(a.MercatorCoordinate.fromLngLat);this.tileID=function(v){let S=1/0,M=1/0,H=-1/0,q=-1/0;for(const we of v)S=Math.min(S,we.x),M=Math.min(M,we.y),H=Math.max(H,we.x),q=Math.max(q,we.y);const J=Math.max(H-S,q-M),se=Math.max(0,Math.floor(-Math.log(J)/Math.LN2)),pe=Math.pow(2,se);return new a.CanonicalTileID(se,Math.floor((S+H)/2*pe),Math.floor((M+q)/2*pe))}(u),this.minzoom=this.maxzoom=this.tileID.z;const m=u.map(v=>this.tileID.getTilePoint(v)._round());return this._boundsArray=new a.RasterBoundsArray,this._boundsArray.emplaceBack(m[0].x,m[0].y,0,0),this._boundsArray.emplaceBack(m[1].x,m[1].y,a.EXTENT,0),this._boundsArray.emplaceBack(m[3].x,m[3].y,0,a.EXTENT),this._boundsArray.emplaceBack(m[2].x,m[2].y,a.EXTENT,a.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const i=this.map.painter.context,u=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,Ue.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new P(i,this.image,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));for(const m in this.tiles){const v=this.tiles[m];v.state!=="loaded"&&(v.state="loaded",v.texture=this.texture)}}loadTile(i,u){this.tileID&&this.tileID.equals(i.tileID.canonical)?(this.tiles[String(i.tileID.wrap)]=i,i.buckets={},u(null)):(i.state="errored",u(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class je extends rt{constructor(i,u,m,v){super(i,u,m,v),this.roundZoom=!0,this.type="video",this.options=u}load(){this._loaded=!1;const i=this.options;this.urls=[];for(const u of i.urls)this.urls.push(this.map._requestManager.transformRequest(u,a.ResourceType.Source).url);a.getVideo(this.urls,(u,m)=>{this._loaded=!0,u?this.fire(new a.ErrorEvent(u)):m&&(this.video=m,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(i){if(this.video){const u=this.video.seekable;i<u.start(0)||i>u.end(0)?this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=i}}getVideo(){return this.video}onAdd(i){this.map||(this.map=i,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const i=this.map.painter.context,u=i.gl;this.boundsBuffer||(this.boundsBuffer=i.createVertexBuffer(this._boundsArray,Ue.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),u.texSubImage2D(u.TEXTURE_2D,0,0,0,u.RGBA,u.UNSIGNED_BYTE,this.video)):(this.texture=new P(i,this.video,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));for(const m in this.tiles){const v=this.tiles[m];v.state!=="loaded"&&(v.state="loaded",v.texture=this.texture)}}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class St extends rt{constructor(i,u,m,v){super(i,u,m,v),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some(S=>!Array.isArray(S)||S.length!==2||S.some(M=>typeof M!="number"))||this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${i}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${i}`,null,'missing required property "coordinates"'))),u.animate&&typeof u.animate!="boolean"&&this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${i}`,null,'optional "animate" property must be a boolean value'))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof HTMLCanvasElement||this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${i}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.ErrorEvent(new a.ValidationError(`sources.${i}`,null,'missing required property "canvas"'))),this.options=u,this.animate=u.animate===void 0||u.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(i){this.map=i,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let i=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,i=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,i=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const u=this.map.painter.context,m=u.gl;this.boundsBuffer||(this.boundsBuffer=u.createVertexBuffer(this._boundsArray,Ue.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(i||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new P(u,this.canvas,m.RGBA,{premultiply:!0});for(const v in this.tiles){const S=this.tiles[v];S.state!=="loaded"&&(S.state="loaded",S.texture=this.texture)}}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const i of[this.canvas.width,this.canvas.height])if(isNaN(i)||i<=0)return!0;return!1}}const te={vector:xe,raster:ve,"raster-dem":Le,geojson:Ke,video:je,image:rt,canvas:St};function Fe(g,i){const u=a.create();return a.translate(u,u,[1,1,0]),a.scale(u,u,[.5*g.width,.5*g.height,1]),a.multiply(u,u,g.calculatePosMatrix(i.toUnwrapped()))}function Qe(g,i,u,m,v,S){const M=function(pe,we,He){if(pe)for(const Me of pe){const Re=we[Me];if(Re&&Re.source===He&&Re.type==="fill-extrusion")return!0}else for(const Me in we){const Re=we[Me];if(Re.source===He&&Re.type==="fill-extrusion")return!0}return!1}(v&&v.layers,i,g.id),H=S.maxPitchScaleFactor(),q=g.tilesIn(m,H,M);q.sort(Ve);const J=[];for(const pe of q)J.push({wrappedTileID:pe.tileID.wrapped().key,queryResults:pe.tile.queryRenderedFeatures(i,u,g._state,pe.queryGeometry,pe.cameraQueryGeometry,pe.scale,v,S,H,Fe(g.transform,pe.tileID))});const se=function(pe){const we={},He={};for(const Me of pe){const Re=Me.queryResults,ct=Me.wrappedTileID,wt=He[ct]=He[ct]||{};for(const It in Re){const We=Re[It],Rt=wt[It]=wt[It]||{},kt=we[It]=we[It]||[];for(const Xt of We)Rt[Xt.featureIndex]||(Rt[Xt.featureIndex]=!0,kt.push(Xt))}}return we}(J);for(const pe in se)se[pe].forEach(we=>{const He=we.feature,Me=g.getFeatureState(He.layer["source-layer"],He.id);He.source=He.layer.source,He.layer["source-layer"]&&(He.sourceLayer=He.layer["source-layer"]),He.state=Me});return se}function Ve(g,i){const u=g.tileID,m=i.tileID;return u.overscaledZ-m.overscaledZ||u.canonical.y-m.canonical.y||u.wrap-m.wrap||u.canonical.x-m.canonical.x}class st{constructor(i,u){this.tileID=i,this.uid=a.uniqueId(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.textures=[],this.textureCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(i){const u=i+this.timeAdded;u<a.exported.now()||this.fadeEndTime&&u<this.fadeEndTime||(this.fadeEndTime=u)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(i){this.demTexture&&i.saveTileTexture(this.demTexture),this.textures.forEach(u=>i.saveTileTexture(u)),this.demTexture=null,this.textures=[],this.textureCoords={}}loadVectorData(i,u,m){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",i){i.featureIndex&&(this.latestFeatureIndex=i.featureIndex,i.rawTileData?(this.latestRawTileData=i.rawTileData,this.latestFeatureIndex.rawTileData=i.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=i.collisionBoxArray,this.buckets=function(v,S){const M={};if(!S)return M;for(const H of v){const q=H.layerIds.map(J=>S.getLayer(J)).filter(Boolean);if(q.length!==0){H.layers=q,H.stateDependentLayerIds&&(H.stateDependentLayers=H.stateDependentLayerIds.map(J=>q.filter(se=>se.id===J)[0]));for(const J of q)M[J.id]=H}}return M}(i.buckets,u.style),this.hasSymbolBuckets=!1;for(const v in this.buckets){const S=this.buckets[v];if(S instanceof a.SymbolBucket){if(this.hasSymbolBuckets=!0,!m)break;S.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const v in this.buckets){const S=this.buckets[v];if(S instanceof a.SymbolBucket&&S.hasRTLText){this.hasRTLText=!0,a.lazyLoadRTLTextPlugin();break}}this.queryPadding=0;for(const v in this.buckets){const S=this.buckets[v];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(v).queryRadius(S))}i.imageAtlas&&(this.imageAtlas=i.imageAtlas),i.glyphAtlasImage&&(this.glyphAtlasImage=i.glyphAtlasImage)}else this.collisionBoxArray=new a.CollisionBoxArray}unloadVectorData(){for(const i in this.buckets)this.buckets[i].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(i){return this.buckets[i.id]}upload(i){for(const m in this.buckets){const v=this.buckets[m];v.uploadPending()&&v.upload(i)}const u=i.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new P(i,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new P(i,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)}prepare(i){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(i,this.imageAtlasTexture)}queryRenderedFeatures(i,u,m,v,S,M,H,q,J,se){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:v,cameraQueryGeometry:S,scale:M,tileSize:this.tileSize,pixelPosMatrix:se,transform:q,params:H,queryPadding:this.queryPadding*J},i,u,m):{}}querySourceFeatures(i,u){const m=this.latestFeatureIndex;if(!m||!m.rawTileData)return;const v=m.loadVTLayers(),S=u?u.sourceLayer:"",M=v._geojsonTileLayer||v[S];if(!M)return;const H=a.createFilter(u&&u.filter),{z:q,x:J,y:se}=this.tileID.canonical,pe={z:q,x:J,y:se};for(let we=0;we<M.length;we++){const He=M.feature(we);if(H.needGeometry){const ct=a.toEvaluationFeature(He,!0);if(!H.filter(new a.EvaluationParameters(this.tileID.overscaledZ),ct,this.tileID.canonical))continue}else if(!H.filter(new a.EvaluationParameters(this.tileID.overscaledZ),He))continue;const Me=m.getId(He,S),Re=new a.GeoJSONFeature(He,q,J,se,Me);Re.tile=pe,i.push(Re)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(i){const u=this.expirationTime;if(i.cacheControl){const m=a.parseCacheControl(i.cacheControl);m["max-age"]&&(this.expirationTime=Date.now()+1e3*m["max-age"])}else i.expires&&(this.expirationTime=new Date(i.expires).getTime());if(this.expirationTime){const m=Date.now();let v=!1;if(this.expirationTime>m)v=!1;else if(u)if(this.expirationTime<u)v=!0;else{const S=this.expirationTime-u;S?this.expirationTime=m+Math.max(S,3e4):v=!0}else v=!0;v?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(i,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(i).length===0)return;const m=this.latestFeatureIndex.loadVTLayers();for(const v in this.buckets){if(!u.style.hasLayer(v))continue;const S=this.buckets[v],M=S.layers[0].sourceLayer||"_geojsonTileLayer",H=m[M],q=i[M];if(!H||!q||Object.keys(q).length===0)continue;S.update(q,H,this.imageAtlas&&this.imageAtlas.patternPositions||{});const J=u&&u.style&&u.style.getLayer(v);J&&(this.queryPadding=Math.max(this.queryPadding,J.queryRadius(S)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<a.exported.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(i){this.symbolFadeHoldUntil=a.exported.now()+i}setDependencies(i,u){const m={};for(const v of u)m[v]=!0;this.dependencies[i]=m}hasDependency(i,u){for(const m of i){const v=this.dependencies[m];if(v){for(const S of u)if(v[S])return!0}}return!1}}class dt{constructor(i,u){this.max=i,this.onRemove=u,this.reset()}reset(){for(const i in this.data)for(const u of this.data[i])u.timeout&&clearTimeout(u.timeout),this.onRemove(u.value);return this.data={},this.order=[],this}add(i,u,m){const v=i.wrapped().key;this.data[v]===void 0&&(this.data[v]=[]);const S={value:u,timeout:void 0};if(m!==void 0&&(S.timeout=setTimeout(()=>{this.remove(i,S)},m)),this.data[v].push(S),this.order.push(v),this.order.length>this.max){const M=this._getAndRemoveByKey(this.order[0]);M&&this.onRemove(M)}return this}has(i){return i.wrapped().key in this.data}getAndRemove(i){return this.has(i)?this._getAndRemoveByKey(i.wrapped().key):null}_getAndRemoveByKey(i){const u=this.data[i].shift();return u.timeout&&clearTimeout(u.timeout),this.data[i].length===0&&delete this.data[i],this.order.splice(this.order.indexOf(i),1),u.value}getByKey(i){const u=this.data[i];return u?u[0].value:null}get(i){return this.has(i)?this.data[i.wrapped().key][0].value:null}remove(i,u){if(!this.has(i))return this;const m=i.wrapped().key,v=u===void 0?0:this.data[m].indexOf(u),S=this.data[m][v];return this.data[m].splice(v,1),S.timeout&&clearTimeout(S.timeout),this.data[m].length===0&&delete this.data[m],this.onRemove(S.value),this.order.splice(this.order.indexOf(m),1),this}setMaxSize(i){for(this.max=i;this.order.length>this.max;){const u=this._getAndRemoveByKey(this.order[0]);u&&this.onRemove(u)}return this}filter(i){const u=[];for(const m in this.data)for(const v of this.data[m])i(v.value)||u.push(v);for(const m of u)this.remove(m.value.tileID,m)}}class Bt{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(i,u,m){const v=String(u);if(this.stateChanges[i]=this.stateChanges[i]||{},this.stateChanges[i][v]=this.stateChanges[i][v]||{},a.extend(this.stateChanges[i][v],m),this.deletedStates[i]===null){this.deletedStates[i]={};for(const S in this.state[i])S!==v&&(this.deletedStates[i][S]=null)}else if(this.deletedStates[i]&&this.deletedStates[i][v]===null){this.deletedStates[i][v]={};for(const S in this.state[i][v])m[S]||(this.deletedStates[i][v][S]=null)}else for(const S in m)this.deletedStates[i]&&this.deletedStates[i][v]&&this.deletedStates[i][v][S]===null&&delete this.deletedStates[i][v][S]}removeFeatureState(i,u,m){if(this.deletedStates[i]===null)return;const v=String(u);if(this.deletedStates[i]=this.deletedStates[i]||{},m&&u!==void 0)this.deletedStates[i][v]!==null&&(this.deletedStates[i][v]=this.deletedStates[i][v]||{},this.deletedStates[i][v][m]=null);else if(u!==void 0)if(this.stateChanges[i]&&this.stateChanges[i][v])for(m in this.deletedStates[i][v]={},this.stateChanges[i][v])this.deletedStates[i][v][m]=null;else this.deletedStates[i][v]=null;else this.deletedStates[i]=null}getState(i,u){const m=String(u),v=a.extend({},(this.state[i]||{})[m],(this.stateChanges[i]||{})[m]);if(this.deletedStates[i]===null)return{};if(this.deletedStates[i]){const S=this.deletedStates[i][u];if(S===null)return{};for(const M in S)delete v[M]}return v}initializeTileState(i,u){i.setFeatureState(this.state,u)}coalesceChanges(i,u){const m={};for(const v in this.stateChanges){this.state[v]=this.state[v]||{};const S={};for(const M in this.stateChanges[v])this.state[v][M]||(this.state[v][M]={}),a.extend(this.state[v][M],this.stateChanges[v][M]),S[M]=this.state[v][M];m[v]=S}for(const v in this.deletedStates){this.state[v]=this.state[v]||{};const S={};if(this.deletedStates[v]===null)for(const M in this.state[v])S[M]={},this.state[v][M]={};else for(const M in this.deletedStates[v]){if(this.deletedStates[v][M]===null)this.state[v][M]={};else for(const H of Object.keys(this.deletedStates[v][M]))delete this.state[v][M][H];S[M]=this.state[v][M]}m[v]=m[v]||{},a.extend(m[v],S)}if(this.stateChanges={},this.deletedStates={},Object.keys(m).length!==0)for(const v in i)i[v].setFeatureState(m,u)}}class Ge extends a.Evented{constructor(i,u,m){super(),this.id=i,this.dispatcher=m,this.on("data",v=>{v.dataType==="source"&&v.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&v.dataType==="source"&&v.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain))}),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=function(v,S,M,H){const q=new te[S.type](v,S,M,H);if(q.id!==v)throw new Error(`Expected Source id to be ${v} instead of ${q.id}`);return a.bindAll(["load","abort","unload","serialize","prepare"],q),q}(i,u,m,this),this._tiles={},this._cache=new dt(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Bt}onAdd(i){this.map=i,this._maxTileCacheSize=i?i._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(i)}onRemove(i){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(i)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const i in this._tiles){const u=this._tiles[i];if(u.state!=="loaded"&&u.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const i=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,i&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(i,u){return this._source.loadTile(i,u)}_unloadTile(i){if(this._source.unloadTile)return this._source.unloadTile(i,()=>{})}_abortTile(i){this._source.abortTile&&this._source.abortTile(i,()=>{}),this._source.fire(new a.Event("dataabort",{tile:i,coord:i.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(i){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const u in this._tiles){const m=this._tiles[u];m.upload(i),m.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(i=>i.tileID).sort(tt).map(i=>i.key)}getRenderableIds(i){const u=[];for(const m in this._tiles)this._isIdRenderable(m,i)&&u.push(this._tiles[m]);return i?u.sort((m,v)=>{const S=m.tileID,M=v.tileID,H=new a.pointGeometry(S.canonical.x,S.canonical.y)._rotate(this.transform.angle),q=new a.pointGeometry(M.canonical.x,M.canonical.y)._rotate(this.transform.angle);return S.overscaledZ-M.overscaledZ||q.y-H.y||q.x-H.x}).map(m=>m.tileID.key):u.map(m=>m.tileID).sort(tt).map(m=>m.key)}hasRenderableParent(i){const u=this.findLoadedParent(i,0);return!!u&&this._isIdRenderable(u.tileID.key)}_isIdRenderable(i,u){return this._tiles[i]&&this._tiles[i].hasData()&&!this._coveredTiles[i]&&(u||!this._tiles[i].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const i in this._tiles)this._tiles[i].state!=="errored"&&this._reloadTile(i,"reloading")}}_reloadTile(i,u){const m=this._tiles[i];m&&(m.state!=="loading"&&(m.state=u),this._loadTile(m,this._tileLoaded.bind(this,m,i,u)))}_tileLoaded(i,u,m,v){if(v)return i.state="errored",void(v.status!==404?this._source.fire(new a.ErrorEvent(v,{tile:i})):this.update(this.transform,this.terrain));i.timeAdded=a.exported.now(),m==="expired"&&(i.refreshedUponExpiration=!0),this._setTileReloadTimer(u,i),this.getSource().type==="raster-dem"&&i.dem&&this._backfillDEM(i),this._state.initializeTileState(i,this.map?this.map.painter:null),i.aborted||this._source.fire(new a.Event("data",{dataType:"source",tile:i,coord:i.tileID}))}_backfillDEM(i){const u=this.getRenderableIds();for(let v=0;v<u.length;v++){const S=u[v];if(i.neighboringTiles&&i.neighboringTiles[S]){const M=this.getTileByID(S);m(i,M),m(M,i)}}function m(v,S){v.needsHillshadePrepare=!0,v.needsTerrainPrepare=!0;let M=S.tileID.canonical.x-v.tileID.canonical.x;const H=S.tileID.canonical.y-v.tileID.canonical.y,q=Math.pow(2,v.tileID.canonical.z),J=S.tileID.key;M===0&&H===0||Math.abs(H)>1||(Math.abs(M)>1&&(Math.abs(M+q)===1?M+=q:Math.abs(M-q)===1&&(M-=q)),S.dem&&v.dem&&(v.dem.backfillBorder(S.dem,M,H),v.neighboringTiles&&v.neighboringTiles[J]&&(v.neighboringTiles[J].backfilled=!0)))}}getTile(i){return this.getTileByID(i.key)}getTileByID(i){return this._tiles[i]}_retainLoadedChildren(i,u,m,v){for(const S in this._tiles){let M=this._tiles[S];if(v[S]||!M.hasData()||M.tileID.overscaledZ<=u||M.tileID.overscaledZ>m)continue;let H=M.tileID;for(;M&&M.tileID.overscaledZ>u+1;){const J=M.tileID.scaledTo(M.tileID.overscaledZ-1);M=this._tiles[J.key],M&&M.hasData()&&(H=J)}let q=H;for(;q.overscaledZ>u;)if(q=q.scaledTo(q.overscaledZ-1),i[q.key]){v[H.key]=H;break}}}findLoadedParent(i,u){if(i.key in this._loadedParentTiles){const m=this._loadedParentTiles[i.key];return m&&m.tileID.overscaledZ>=u?m:null}for(let m=i.overscaledZ-1;m>=u;m--){const v=i.scaledTo(m),S=this._getLoadedTile(v);if(S)return S}}_getLoadedTile(i){const u=this._tiles[i.key];return u&&u.hasData()?u:this._cache.getByKey(i.wrapped().key)}updateCacheSize(i){const u=Math.ceil(i.width/this._source.tileSize)+1,m=Math.ceil(i.height/this._source.tileSize)+1,v=Math.floor(u*m*5),S=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,v):v;this._cache.setMaxSize(S)}handleWrapJump(i){const u=Math.round((i-(this._prevLng===void 0?i:this._prevLng))/360);if(this._prevLng=i,u){const m={};for(const v in this._tiles){const S=this._tiles[v];S.tileID=S.tileID.unwrapTo(S.tileID.wrap+u),m[S.tileID.key]=S}this._tiles=m;for(const v in this._timers)clearTimeout(this._timers[v]),delete this._timers[v];for(const v in this._tiles)this._setTileReloadTimer(v,this._tiles[v])}}update(i,u){if(this.transform=i,this.terrain=u,!this._sourceLoaded||this._paused)return;let m;this.updateCacheSize(i),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?m=i.getVisibleUnwrappedCoordinates(this._source.tileID).map(J=>new a.OverscaledTileID(J.canonical.z,J.wrap,J.canonical.z,J.canonical.x,J.canonical.y)):(m=i.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:u}),this._source.hasTile&&(m=m.filter(J=>this._source.hasTile(J)))):m=[];const v=i.coveringZoomLevel(this._source),S=Math.max(v-Ge.maxOverzooming,this._source.minzoom),M=Math.max(v+Ge.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const J={};for(const se of m)if(se.canonical.z>this._source.minzoom){const pe=se.scaledTo(se.canonical.z-1);J[pe.key]=pe;const we=se.scaledTo(Math.max(this._source.minzoom,Math.min(se.canonical.z,5)));J[we.key]=we}m=m.concat(Object.values(J))}const H=this._updateRetainedTiles(m,v);if(Qt(this._source.type)){const J={},se={},pe=Object.keys(H);for(const we of pe){const He=H[we],Me=this._tiles[we];if(!Me||Me.fadeEndTime&&Me.fadeEndTime<=a.exported.now())continue;const Re=this.findLoadedParent(He,S);Re&&(this._addTile(Re.tileID),J[Re.tileID.key]=Re.tileID),se[we]=He}this._retainLoadedChildren(se,v,M,H);for(const we in J)H[we]||(this._coveredTiles[we]=!0,H[we]=J[we]);if(u){const we={},He={};for(const Me of m)this._tiles[Me.key].hasData()?we[Me.key]=Me:He[Me.key]=Me;for(const Me in He){const Re=He[Me].children(this._source.maxzoom);this._tiles[Re[0].key]&&this._tiles[Re[1].key]&&this._tiles[Re[2].key]&&this._tiles[Re[3].key]&&(we[Re[0].key]=H[Re[0].key]=Re[0],we[Re[1].key]=H[Re[1].key]=Re[1],we[Re[2].key]=H[Re[2].key]=Re[2],we[Re[3].key]=H[Re[3].key]=Re[3],delete He[Me])}for(const Me in He){const Re=this.findLoadedParent(He[Me],this._source.minzoom);if(Re){we[Re.tileID.key]=H[Re.tileID.key]=Re.tileID;for(const ct in we)we[ct].isChildOf(Re.tileID)&&delete we[ct]}}for(const Me in this._tiles)we[Me]||(this._coveredTiles[Me]=!0)}}for(const J in H)this._tiles[J].clearFadeHold();const q=a.keysDifference(this._tiles,H);for(const J of q){const se=this._tiles[J];se.hasSymbolBuckets&&!se.holdingForFade()?se.setHoldDuration(this.map._fadeDuration):se.hasSymbolBuckets&&!se.symbolFadeFinished()||this._removeTile(J)}this._updateLoadedParentTileCache()}releaseSymbolFadeTiles(){for(const i in this._tiles)this._tiles[i].holdingForFade()&&this._removeTile(i)}_updateRetainedTiles(i,u){const m={},v={},S=Math.max(u-Ge.maxOverzooming,this._source.minzoom),M=Math.max(u+Ge.maxUnderzooming,this._source.minzoom),H={};for(const q of i){const J=this._addTile(q);m[q.key]=q,J.hasData()||u<this._source.maxzoom&&(H[q.key]=q)}this._retainLoadedChildren(H,u,M,m);for(const q of i){let J=this._tiles[q.key];if(J.hasData())continue;if(u+1>this._source.maxzoom){const pe=q.children(this._source.maxzoom)[0],we=this.getTile(pe);if(we&&we.hasData()){m[pe.key]=pe;continue}}else{const pe=q.children(this._source.maxzoom);if(m[pe[0].key]&&m[pe[1].key]&&m[pe[2].key]&&m[pe[3].key])continue}let se=J.wasRequested();for(let pe=q.overscaledZ-1;pe>=S;--pe){const we=q.scaledTo(pe);if(v[we.key]||(v[we.key]=!0,J=this.getTile(we),!J&&se&&(J=this._addTile(we)),J&&(m[we.key]=we,se=J.wasRequested(),J.hasData())))break}}return m}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const i in this._tiles){const u=[];let m,v=this._tiles[i].tileID;for(;v.overscaledZ>0;){if(v.key in this._loadedParentTiles){m=this._loadedParentTiles[v.key];break}u.push(v.key);const S=v.scaledTo(v.overscaledZ-1);if(m=this._getLoadedTile(S),m)break;v=S}for(const S of u)this._loadedParentTiles[S]=m}}_addTile(i){let u=this._tiles[i.key];if(u)return u;u=this._cache.getAndRemove(i),u&&(this._setTileReloadTimer(i.key,u),u.tileID=i,this._state.initializeTileState(u,this.map?this.map.painter:null),this._cacheTimers[i.key]&&(clearTimeout(this._cacheTimers[i.key]),delete this._cacheTimers[i.key],this._setTileReloadTimer(i.key,u)));const m=u;return u||(u=new st(i,this._source.tileSize*i.overscaleFactor()),this._loadTile(u,this._tileLoaded.bind(this,u,i.key,u.state))),u.uses++,this._tiles[i.key]=u,m||this._source.fire(new a.Event("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u}_setTileReloadTimer(i,u){i in this._timers&&(clearTimeout(this._timers[i]),delete this._timers[i]);const m=u.getExpiryTimeout();m&&(this._timers[i]=setTimeout(()=>{this._reloadTile(i,"expired"),delete this._timers[i]},m))}_removeTile(i){const u=this._tiles[i];u&&(u.uses--,delete this._tiles[i],this._timers[i]&&(clearTimeout(this._timers[i]),delete this._timers[i]),u.uses>0||(u.hasData()&&u.state!=="reloading"?this._cache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const i in this._tiles)this._removeTile(i);this._cache.reset()}tilesIn(i,u,m){const v=[],S=this.transform;if(!S)return v;const M=m?S.getCameraQueryGeometry(i):i,H=i.map(Me=>S.pointCoordinate(Me,this.terrain)),q=M.map(Me=>S.pointCoordinate(Me,this.terrain)),J=this.getIds();let se=1/0,pe=1/0,we=-1/0,He=-1/0;for(const Me of q)se=Math.min(se,Me.x),pe=Math.min(pe,Me.y),we=Math.max(we,Me.x),He=Math.max(He,Me.y);for(let Me=0;Me<J.length;Me++){const Re=this._tiles[J[Me]];if(Re.holdingForFade())continue;const ct=Re.tileID,wt=Math.pow(2,S.zoom-Re.tileID.overscaledZ),It=u*Re.queryPadding*a.EXTENT/Re.tileSize/wt,We=[ct.getTilePoint(new a.MercatorCoordinate(se,pe)),ct.getTilePoint(new a.MercatorCoordinate(we,He))];if(We[0].x-It<a.EXTENT&&We[0].y-It<a.EXTENT&&We[1].x+It>=0&&We[1].y+It>=0){const Rt=H.map(Xt=>ct.getTilePoint(Xt)),kt=q.map(Xt=>ct.getTilePoint(Xt));v.push({tile:Re,tileID:ct,queryGeometry:Rt,cameraQueryGeometry:kt,scale:wt})}}return v}getVisibleCoordinates(i){const u=this.getRenderableIds(i).map(m=>this._tiles[m].tileID);for(const m of u)m.posMatrix=this.transform.calculatePosMatrix(m.toUnwrapped());return u}hasTransition(){if(this._source.hasTransition())return!0;if(Qt(this._source.type))for(const i in this._tiles){const u=this._tiles[i];if(u.fadeEndTime!==void 0&&u.fadeEndTime>=a.exported.now())return!0}return!1}setFeatureState(i,u,m){this._state.updateState(i=i||"_geojsonTileLayer",u,m)}removeFeatureState(i,u,m){this._state.removeFeatureState(i=i||"_geojsonTileLayer",u,m)}getFeatureState(i,u){return this._state.getState(i=i||"_geojsonTileLayer",u)}setDependencies(i,u,m){const v=this._tiles[i];v&&v.setDependencies(u,m)}reloadTilesForDependencies(i,u){for(const m in this._tiles)this._tiles[m].hasDependency(i,u)&&this._reloadTile(m,"reloading");this._cache.filter(m=>!m.hasDependency(i,u))}}function tt(g,i){const u=Math.abs(2*g.wrap)-+(g.wrap<0),m=Math.abs(2*i.wrap)-+(i.wrap<0);return g.overscaledZ-i.overscaledZ||m-u||i.canonical.y-g.canonical.y||i.canonical.x-g.canonical.x}function Qt(g){return g==="raster"||g==="image"||g==="video"}Ge.maxOverzooming=10,Ge.maxUnderzooming=3;const ht="mapboxgl_preloaded_worker_pool";class Nt{constructor(){this.active={}}acquire(i){if(!this.workers)for(this.workers=[];this.workers.length<Nt.workerCount;)this.workers.push(new Worker(ha.workerUrl));return this.active[i]=!0,this.workers.slice()}release(i){delete this.active[i],this.numActive()===0&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[ht]}numActive(){return Object.keys(this.active).length}}const dr=Math.floor(a.exported.hardwareConcurrency/2);let Pt;function Oe(){return Pt||(Pt=new Nt),Pt}function pr(g,i){const u={};for(const m in g)m!=="ref"&&(u[m]=g[m]);return a.refProperties.forEach(m=>{m in i&&(u[m]=i[m])}),u}function sr(g){g=g.slice();const i=Object.create(null);for(let u=0;u<g.length;u++)i[g[u].id]=g[u];for(let u=0;u<g.length;u++)"ref"in g[u]&&(g[u]=pr(g[u],i[g[u].ref]));return g}Nt.workerCount=Math.max(Math.min(dr,6),1);const zt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function fr(g,i,u){u.push({command:zt.addSource,args:[g,i[g]]})}function Br(g,i,u){i.push({command:zt.removeSource,args:[g]}),u[g]=!0}function vr(g,i,u,m){Br(g,u,m),fr(g,i,u)}function Gr(g,i,u){let m;for(m in g[u])if(Object.prototype.hasOwnProperty.call(g[u],m)&&m!=="data"&&!E(g[u][m],i[u][m]))return!1;for(m in i[u])if(Object.prototype.hasOwnProperty.call(i[u],m)&&m!=="data"&&!E(g[u][m],i[u][m]))return!1;return!0}function rr(g,i,u,m,v,S){let M;for(M in i=i||{},g=g||{})Object.prototype.hasOwnProperty.call(g,M)&&(E(g[M],i[M])||u.push({command:S,args:[m,M,i[M],v]}));for(M in i)Object.prototype.hasOwnProperty.call(i,M)&&!Object.prototype.hasOwnProperty.call(g,M)&&(E(g[M],i[M])||u.push({command:S,args:[m,M,i[M],v]}))}function xr(g){return g.id}function Zr(g,i){return g[i.id]=i,g}class pn{constructor(i,u){this.reset(i,u)}reset(i,u){this.points=i||[],this._distances=[0];for(let m=1;m<this.points.length;m++)this._distances[m]=this._distances[m-1]+this.points[m].dist(this.points[m-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(i){if(this.points.length===1)return this.points[0];i=a.clamp(i,0,1);let u=1,m=this._distances[u];const v=i*this.paddedLength+this.padding;for(;m<v&&u<this._distances.length;)m=this._distances[++u];const S=u-1,M=this._distances[S],H=m-M,q=H>0?(v-M)/H:0;return this.points[S].mult(1-q).add(this.points[u].mult(q))}}function vt(g,i){let u=!0;return g==="always"||g!=="never"&&i!=="never"||(u=!1),u}class nt{constructor(i,u,m){const v=this.boxCells=[],S=this.circleCells=[];this.xCellCount=Math.ceil(i/m),this.yCellCount=Math.ceil(u/m);for(let M=0;M<this.xCellCount*this.yCellCount;M++)v.push([]),S.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=i,this.height=u,this.xScale=this.xCellCount/i,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(i,u,m,v,S){this._forEachCell(u,m,v,S,this._insertBoxCell,this.boxUid++),this.boxKeys.push(i),this.bboxes.push(u),this.bboxes.push(m),this.bboxes.push(v),this.bboxes.push(S)}insertCircle(i,u,m,v){this._forEachCell(u-v,m-v,u+v,m+v,this._insertCircleCell,this.circleUid++),this.circleKeys.push(i),this.circles.push(u),this.circles.push(m),this.circles.push(v)}_insertBoxCell(i,u,m,v,S,M){this.boxCells[S].push(M)}_insertCircleCell(i,u,m,v,S,M){this.circleCells[S].push(M)}_query(i,u,m,v,S,M,H){if(m<0||i>this.width||v<0||u>this.height)return[];const q=[];if(i<=0&&u<=0&&this.width<=m&&this.height<=v){if(S)return[{key:null,x1:i,y1:u,x2:m,y2:v}];for(let J=0;J<this.boxKeys.length;J++)q.push({key:this.boxKeys[J],x1:this.bboxes[4*J],y1:this.bboxes[4*J+1],x2:this.bboxes[4*J+2],y2:this.bboxes[4*J+3]});for(let J=0;J<this.circleKeys.length;J++){const se=this.circles[3*J],pe=this.circles[3*J+1],we=this.circles[3*J+2];q.push({key:this.circleKeys[J],x1:se-we,y1:pe-we,x2:se+we,y2:pe+we})}}else this._forEachCell(i,u,m,v,this._queryCell,q,{hitTest:S,overlapMode:M,seenUids:{box:{},circle:{}}},H);return q}query(i,u,m,v){return this._query(i,u,m,v,!1,null)}hitTest(i,u,m,v,S,M){return this._query(i,u,m,v,!0,S,M).length>0}hitTestCircle(i,u,m,v,S){const M=i-m,H=i+m,q=u-m,J=u+m;if(H<0||M>this.width||J<0||q>this.height)return!1;const se=[];return this._forEachCell(M,q,H,J,this._queryCellCircle,se,{hitTest:!0,overlapMode:v,circle:{x:i,y:u,radius:m},seenUids:{box:{},circle:{}}},S),se.length>0}_queryCell(i,u,m,v,S,M,H,q){const{seenUids:J,hitTest:se,overlapMode:pe}=H,we=this.boxCells[S];if(we!==null){const Me=this.bboxes;for(const Re of we)if(!J.box[Re]){J.box[Re]=!0;const ct=4*Re,wt=this.boxKeys[Re];if(i<=Me[ct+2]&&u<=Me[ct+3]&&m>=Me[ct+0]&&v>=Me[ct+1]&&(!q||q(wt))&&(!se||!vt(pe,wt.overlapMode))&&(M.push({key:wt,x1:Me[ct],y1:Me[ct+1],x2:Me[ct+2],y2:Me[ct+3]}),se))return!0}}const He=this.circleCells[S];if(He!==null){const Me=this.circles;for(const Re of He)if(!J.circle[Re]){J.circle[Re]=!0;const ct=3*Re,wt=this.circleKeys[Re];if(this._circleAndRectCollide(Me[ct],Me[ct+1],Me[ct+2],i,u,m,v)&&(!q||q(wt))&&(!se||!vt(pe,wt.overlapMode))){const It=Me[ct],We=Me[ct+1],Rt=Me[ct+2];if(M.push({key:wt,x1:It-Rt,y1:We-Rt,x2:It+Rt,y2:We+Rt}),se)return!0}}}return!1}_queryCellCircle(i,u,m,v,S,M,H,q){const{circle:J,seenUids:se,overlapMode:pe}=H,we=this.boxCells[S];if(we!==null){const Me=this.bboxes;for(const Re of we)if(!se.box[Re]){se.box[Re]=!0;const ct=4*Re,wt=this.boxKeys[Re];if(this._circleAndRectCollide(J.x,J.y,J.radius,Me[ct+0],Me[ct+1],Me[ct+2],Me[ct+3])&&(!q||q(wt))&&!vt(pe,wt.overlapMode))return M.push(!0),!0}}const He=this.circleCells[S];if(He!==null){const Me=this.circles;for(const Re of He)if(!se.circle[Re]){se.circle[Re]=!0;const ct=3*Re,wt=this.circleKeys[Re];if(this._circlesCollide(Me[ct],Me[ct+1],Me[ct+2],J.x,J.y,J.radius)&&(!q||q(wt))&&!vt(pe,wt.overlapMode))return M.push(!0),!0}}}_forEachCell(i,u,m,v,S,M,H,q){const J=this._convertToXCellCoord(i),se=this._convertToYCellCoord(u),pe=this._convertToXCellCoord(m),we=this._convertToYCellCoord(v);for(let He=J;He<=pe;He++)for(let Me=se;Me<=we;Me++)if(S.call(this,i,u,m,v,this.xCellCount*Me+He,M,H,q))return}_convertToXCellCoord(i){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(i*this.xScale)))}_convertToYCellCoord(i){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(i*this.yScale)))}_circlesCollide(i,u,m,v,S,M){const H=v-i,q=S-u,J=m+M;return J*J>H*H+q*q}_circleAndRectCollide(i,u,m,v,S,M,H){const q=(M-v)/2,J=Math.abs(i-(v+q));if(J>q+m)return!1;const se=(H-S)/2,pe=Math.abs(u-(S+se));if(pe>se+m)return!1;if(J<=q||pe<=se)return!0;const we=J-q,He=pe-se;return we*we+He*He<=m*m}}function bt(g,i,u,m,v){const S=a.create();return i?(a.scale(S,S,[1/v,1/v,1]),u||a.rotateZ(S,S,m.angle)):a.multiply(S,m.labelPlaneMatrix,g),S}function Ct(g,i,u,m,v){if(i){const S=a.clone(g);return a.scale(S,S,[v,v,1]),u||a.rotateZ(S,S,-m.angle),S}return m.glCoordMatrix}function jt(g,i,u){let m;u?(m=[g.x,g.y,u(g.x,g.y),1],a.transformMat4(m,m,i)):(m=[g.x,g.y,0,1],Cr(m,m,i));const v=m[3];return{point:new a.pointGeometry(m[0]/v,m[1]/v),signedDistanceFromCamera:v}}function er(g,i){return .5+g/i*.5}function Vr(g,i){const u=g[0]/g[3],m=g[1]/g[3];return u>=-i[0]&&u<=i[0]&&m>=-i[1]&&m<=i[1]}function Fr(g,i,u,m,v,S,M,H,q,J){const se=m?g.textSizeData:g.iconSizeData,pe=a.evaluateSizeForZoom(se,u.transform.zoom),we=[256/u.width*2+1,256/u.height*2+1],He=m?g.text.dynamicLayoutVertexArray:g.icon.dynamicLayoutVertexArray;He.clear();const Me=g.lineVertexArray,Re=m?g.text.placedSymbolArray:g.icon.placedSymbolArray,ct=u.transform.width/u.transform.height;let wt=!1;for(let It=0;It<Re.length;It++){const We=Re.get(It);if(We.hidden||We.writingMode===a.WritingMode.vertical&&!wt){br(We.numGlyphs,He);continue}let Rt;if(wt=!1,J?(Rt=[We.anchorX,We.anchorY,J(We.anchorX,We.anchorY),1],a.transformMat4(Rt,Rt,i)):(Rt=[We.anchorX,We.anchorY,0,1],Cr(Rt,Rt,i)),!Vr(Rt,we)){br(We.numGlyphs,He);continue}const kt=er(u.transform.cameraToCenterDistance,Rt[3]),Xt=a.evaluateSizeForFeature(se,pe,We),Zt=M?Xt/kt:Xt*kt,ur=new a.pointGeometry(We.anchorX,We.anchorY),qt=jt(ur,v,J).point,Rr={},Tr=Er(We,Zt,!1,H,i,v,S,g.glyphOffsetArray,Me,He,qt,ur,Rr,ct,q,J);wt=Tr.useVertical,(Tr.notEnoughRoom||wt||Tr.needsFlipping&&Er(We,Zt,!0,H,i,v,S,g.glyphOffsetArray,Me,He,qt,ur,Rr,ct,q,J).notEnoughRoom)&&br(We.numGlyphs,He)}m?g.text.dynamicLayoutVertexBuffer.updateData(He):g.icon.dynamicLayoutVertexBuffer.updateData(He)}function un(g,i,u,m,v,S,M,H,q,J,se,pe,we){const He=H.glyphStartIndex+H.numGlyphs,Me=H.lineStartIndex,Re=H.lineStartIndex+H.lineLength,ct=i.getoffsetX(H.glyphStartIndex),wt=i.getoffsetX(He-1),It=wn(g*ct,u,m,v,S,M,H.segment,Me,Re,q,J,se,pe,we);if(!It)return null;const We=wn(g*wt,u,m,v,S,M,H.segment,Me,Re,q,J,se,pe,we);return We?{first:It,last:We}:null}function lr(g,i,u,m){return g===a.WritingMode.horizontal&&Math.abs(u.y-i.y)>Math.abs(u.x-i.x)*m?{useVertical:!0}:(g===a.WritingMode.vertical?i.y<u.y:i.x>u.x)?{needsFlipping:!0}:null}function Er(g,i,u,m,v,S,M,H,q,J,se,pe,we,He,Me,Re){const ct=i/24,wt=g.lineOffsetX*ct,It=g.lineOffsetY*ct;let We;if(g.numGlyphs>1){const Rt=g.glyphStartIndex+g.numGlyphs,kt=g.lineStartIndex,Xt=g.lineStartIndex+g.lineLength,Zt=un(ct,H,wt,It,u,se,pe,g,q,S,we,Me,Re);if(!Zt)return{notEnoughRoom:!0};const ur=jt(Zt.first.point,M,Re).point,qt=jt(Zt.last.point,M,Re).point;if(m&&!u){const Rr=lr(g.writingMode,ur,qt,He);if(Rr)return Rr}We=[Zt.first];for(let Rr=g.glyphStartIndex+1;Rr<Rt-1;Rr++)We.push(wn(ct*H.getoffsetX(Rr),wt,It,u,se,pe,g.segment,kt,Xt,q,S,we,Me,Re));We.push(Zt.last)}else{if(m&&!u){const kt=jt(pe,v,Re).point,Xt=g.lineStartIndex+g.segment+1,Zt=new a.pointGeometry(q.getx(Xt),q.gety(Xt)),ur=jt(Zt,v,Re),qt=ur.signedDistanceFromCamera>0?ur.point:An(pe,Zt,kt,1,v,Re),Rr=lr(g.writingMode,kt,qt,He);if(Rr)return Rr}const Rt=wn(ct*H.getoffsetX(g.glyphStartIndex),wt,It,u,se,pe,g.segment,g.lineStartIndex,g.lineStartIndex+g.lineLength,q,S,we,Me,Re);if(!Rt)return{notEnoughRoom:!0};We=[Rt]}for(const Rt of We)a.addDynamicAttributes(J,Rt.point,Rt.angle);return{}}function An(g,i,u,m,v,S){const M=jt(g.add(g.sub(i)._unit()),v,S).point,H=u.sub(M);return u.add(H._mult(m/H.mag()))}function wn(g,i,u,m,v,S,M,H,q,J,se,pe,we,He){const Me=m?g-i:g+i;let Re=Me>0?1:-1,ct=0;m&&(Re*=-1,ct=Math.PI),Re<0&&(ct+=Math.PI);let wt=Re>0?H+M:H+M+1,It=v,We=v,Rt=0,kt=0;const Xt=Math.abs(Me),Zt=[];for(;Rt+kt<=Xt;){if(wt+=Re,wt<H||wt>=q)return null;if(We=It,Zt.push(It),It=pe[wt],It===void 0){const qr=new a.pointGeometry(J.getx(wt),J.gety(wt)),kn=jt(qr,se,He);if(kn.signedDistanceFromCamera>0)It=pe[wt]=kn.point;else{const jn=wt-Re;It=An(Rt===0?S:new a.pointGeometry(J.getx(jn),J.gety(jn)),qr,We,Xt-Rt+1,se,He)}}Rt+=kt,kt=We.dist(It)}const ur=(Xt-Rt)/kt,qt=It.sub(We),Rr=qt.mult(ur)._add(We);Rr._add(qt._unit()._perp()._mult(u*Re));const Tr=ct+Math.atan2(It.y-We.y,It.x-We.x);return Zt.push(Rr),{point:Rr,angle:we?Tr:0,path:Zt}}const _i=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function br(g,i){for(let u=0;u<g;u++){const m=i.length;i.resize(m+4),i.float32.set(_i,3*m)}}function Cr(g,i,u){const m=i[0],v=i[1];return g[0]=u[0]*m+u[4]*v+u[12],g[1]=u[1]*m+u[5]*v+u[13],g[3]=u[3]*m+u[7]*v+u[15],g}const cr=100;class Kr{constructor(i,u=new nt(i.width+200,i.height+200,25),m=new nt(i.width+200,i.height+200,25)){this.transform=i,this.grid=u,this.ignoredGrid=m,this.pitchfactor=Math.cos(i._pitch)*i.cameraToCenterDistance,this.screenRightBoundary=i.width+cr,this.screenBottomBoundary=i.height+cr,this.gridRightBoundary=i.width+200,this.gridBottomBoundary=i.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(i,u,m,v,S,M){const H=this.projectAndGetPerspectiveRatio(v,i.anchorPointX,i.anchorPointY,M),q=m*H.perspectiveRatio,J=i.x1*q+H.point.x,se=i.y1*q+H.point.y,pe=i.x2*q+H.point.x,we=i.y2*q+H.point.y;return!this.isInsideGrid(J,se,pe,we)||u!=="always"&&this.grid.hitTest(J,se,pe,we,u,S)||H.perspectiveRatio<this.perspectiveRatioCutoff?{box:[],offscreen:!1}:{box:[J,se,pe,we],offscreen:this.isOffscreen(J,se,pe,we)}}placeCollisionCircles(i,u,m,v,S,M,H,q,J,se,pe,we,He,Me){const Re=[],ct=new a.pointGeometry(u.anchorX,u.anchorY),wt=jt(ct,M,Me),It=er(this.transform.cameraToCenterDistance,wt.signedDistanceFromCamera),We=(se?S/It:S*It)/a.ONE_EM,Rt=jt(ct,H,Me).point,kt=un(We,v,u.lineOffsetX*We,u.lineOffsetY*We,!1,Rt,ct,u,m,H,{},!1,Me);let Xt=!1,Zt=!1,ur=!0;if(kt){const qt=.5*we*It+He,Rr=new a.pointGeometry(-100,-100),Tr=new a.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),qr=new pn,kn=kt.first,jn=kt.last;let b=[];for(let W=kn.path.length-1;W>=1;W--)b.push(kn.path[W]);for(let W=1;W<jn.path.length;W++)b.push(jn.path[W]);const L=2.5*qt;if(q){const W=b.map(ae=>jt(ae,q,Me));b=W.some(ae=>ae.signedDistanceFromCamera<=0)?[]:W.map(ae=>ae.point)}let j=[];if(b.length>0){const W=b[0].clone(),ae=b[0].clone();for(let de=1;de<b.length;de++)W.x=Math.min(W.x,b[de].x),W.y=Math.min(W.y,b[de].y),ae.x=Math.max(ae.x,b[de].x),ae.y=Math.max(ae.y,b[de].y);j=W.x>=Rr.x&&ae.x<=Tr.x&&W.y>=Rr.y&&ae.y<=Tr.y?[b]:ae.x<Rr.x||W.x>Tr.x||ae.y<Rr.y||W.y>Tr.y?[]:a.clipLine([b],Rr.x,Rr.y,Tr.x,Tr.y)}for(const W of j){qr.reset(W,.25*qt);let ae=0;ae=qr.length<=.5*qt?1:Math.ceil(qr.paddedLength/L)+1;for(let de=0;de<ae;de++){const me=de/Math.max(ae-1,1),be=qr.lerp(me),Se=be.x+cr,De=be.y+cr;Re.push(Se,De,qt,0);const ft=Se-qt,Tt=De-qt,Ft=Se+qt,pt=De+qt;if(ur=ur&&this.isOffscreen(ft,Tt,Ft,pt),Zt=Zt||this.isInsideGrid(ft,Tt,Ft,pt),i!=="always"&&this.grid.hitTestCircle(Se,De,qt,i,pe)&&(Xt=!0,!J))return{circles:[],offscreen:!1,collisionDetected:Xt}}}}return{circles:!J&&Xt||!Zt||It<this.perspectiveRatioCutoff?[]:Re,offscreen:ur,collisionDetected:Xt}}queryRenderedSymbols(i){if(i.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const u=[];let m=1/0,v=1/0,S=-1/0,M=-1/0;for(const se of i){const pe=new a.pointGeometry(se.x+cr,se.y+cr);m=Math.min(m,pe.x),v=Math.min(v,pe.y),S=Math.max(S,pe.x),M=Math.max(M,pe.y),u.push(pe)}const H=this.grid.query(m,v,S,M).concat(this.ignoredGrid.query(m,v,S,M)),q={},J={};for(const se of H){const pe=se.key;if(q[pe.bucketInstanceId]===void 0&&(q[pe.bucketInstanceId]={}),q[pe.bucketInstanceId][pe.featureIndex])continue;const we=[new a.pointGeometry(se.x1,se.y1),new a.pointGeometry(se.x2,se.y1),new a.pointGeometry(se.x2,se.y2),new a.pointGeometry(se.x1,se.y2)];a.polygonIntersectsPolygon(u,we)&&(q[pe.bucketInstanceId][pe.featureIndex]=!0,J[pe.bucketInstanceId]===void 0&&(J[pe.bucketInstanceId]=[]),J[pe.bucketInstanceId].push(pe.featureIndex))}return J}insertCollisionBox(i,u,m,v,S,M){(m?this.ignoredGrid:this.grid).insert({bucketInstanceId:v,featureIndex:S,collisionGroupID:M,overlapMode:u},i[0],i[1],i[2],i[3])}insertCollisionCircles(i,u,m,v,S,M){const H=m?this.ignoredGrid:this.grid,q={bucketInstanceId:v,featureIndex:S,collisionGroupID:M,overlapMode:u};for(let J=0;J<i.length;J+=4)H.insertCircle(q,i[J],i[J+1],i[J+2])}projectAndGetPerspectiveRatio(i,u,m,v){let S;return v?(S=[u,m,v(u,m),1],a.transformMat4(S,S,i)):(S=[u,m,0,1],Cr(S,S,i)),{point:new a.pointGeometry((S[0]/S[3]+1)/2*this.transform.width+cr,(-S[1]/S[3]+1)/2*this.transform.height+cr),perspectiveRatio:.5+this.transform.cameraToCenterDistance/S[3]*.5}}isOffscreen(i,u,m,v){return m<cr||i>=this.screenRightBoundary||v<cr||u>this.screenBottomBoundary}isInsideGrid(i,u,m,v){return m>=0&&i<this.gridRightBoundary&&v>=0&&u<this.gridBottomBoundary}getViewportMatrix(){const i=a.identity([]);return a.translate(i,i,[-100,-100,0]),i}}function hn(g,i,u){return i*(a.EXTENT/(g.tileSize*Math.pow(2,u-g.tileID.overscaledZ)))}class xn{constructor(i,u,m,v){this.opacity=i?Math.max(0,Math.min(1,i.opacity+(i.placed?u:-u))):v&&m?1:0,this.placed=m}isHidden(){return this.opacity===0&&!this.placed}}class Sn{constructor(i,u,m,v,S){this.text=new xn(i?i.text:null,u,m,S),this.icon=new xn(i?i.icon:null,u,v,S)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class ji{constructor(i,u,m){this.text=i,this.icon=u,this.skipFade=m}}class tn{constructor(){this.invProjMatrix=a.create(),this.viewportMatrix=a.create(),this.circles=[]}}class Wi{constructor(i,u,m,v,S){this.bucketInstanceId=i,this.featureIndex=u,this.sourceLayerIndex=m,this.bucketIndex=v,this.tileID=S}}class hs{constructor(i){this.crossSourceCollisions=i,this.maxGroupID=0,this.collisionGroups={}}get(i){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[i]){const u=++this.maxGroupID;this.collisionGroups[i]={ID:u,predicate:m=>m.collisionGroupID===u}}return this.collisionGroups[i]}}function Ln(g,i,u,m,v){const{horizontalAlign:S,verticalAlign:M}=a.getAnchorAlignment(g),H=-(S-.5)*i,q=-(M-.5)*u,J=a.evaluateVariableOffset(g,m);return new a.pointGeometry(H+J[0]*v,q+J[1]*v)}function nn(g,i,u,m,v,S){const{x1:M,x2:H,y1:q,y2:J,anchorPointX:se,anchorPointY:pe}=g,we=new a.pointGeometry(i,u);return m&&we._rotate(v?S:-S),{x1:M+we.x,y1:q+we.y,x2:H+we.x,y2:J+we.y,anchorPointX:se,anchorPointY:pe}}class Ie{constructor(i,u,m,v,S){this.transform=i.clone(),this.terrain=u,this.collisionIndex=new Kr(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=m,this.retainedQueryData={},this.collisionGroups=new hs(v),this.collisionCircleArrays={},this.prevPlacement=S,S&&(S.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(i,u,m,v){const S=m.getBucket(u),M=m.latestFeatureIndex;if(!S||!M||u.id!==S.layerIds[0])return;const H=m.collisionBoxArray,q=S.layers[0].layout,J=Math.pow(2,this.transform.zoom-m.tileID.overscaledZ),se=m.tileSize/a.EXTENT,pe=this.transform.calculatePosMatrix(m.tileID.toUnwrapped()),we=q.get("text-pitch-alignment")==="map",He=q.get("text-rotation-alignment")==="map",Me=hn(m,1,this.transform.zoom),Re=bt(pe,we,He,this.transform,Me);let ct=null;if(we){const It=Ct(pe,we,He,this.transform,Me);ct=a.multiply([],this.transform.labelPlaneMatrix,It)}this.retainedQueryData[S.bucketInstanceId]=new Wi(S.bucketInstanceId,M,S.sourceLayerIndex,S.index,m.tileID);const wt={bucket:S,layout:q,posMatrix:pe,textLabelPlaneMatrix:Re,labelToScreenMatrix:ct,scale:J,textPixelRatio:se,holdingForFade:m.holdingForFade(),collisionBoxArray:H,partiallyEvaluatedTextSize:a.evaluateSizeForZoom(S.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(S.sourceID)};if(v)for(const It of S.sortKeyRanges){const{sortKey:We,symbolInstanceStart:Rt,symbolInstanceEnd:kt}=It;i.push({sortKey:We,symbolInstanceStart:Rt,symbolInstanceEnd:kt,parameters:wt})}else i.push({symbolInstanceStart:0,symbolInstanceEnd:S.symbolInstances.length,parameters:wt})}attemptAnchorPlacement(i,u,m,v,S,M,H,q,J,se,pe,we,He,Me,Re,ct){const wt=[we.textOffset0,we.textOffset1],It=Ln(i,m,v,wt,S),We=this.collisionIndex.placeCollisionBox(nn(u,It.x,It.y,M,H,this.transform.angle),pe,q,J,se.predicate,ct);if((!Re||this.collisionIndex.placeCollisionBox(nn(Re,It.x,It.y,M,H,this.transform.angle),pe,q,J,se.predicate,ct).box.length!==0)&&We.box.length>0){let Rt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[we.crossTileID]&&this.prevPlacement.placements[we.crossTileID]&&this.prevPlacement.placements[we.crossTileID].text&&(Rt=this.prevPlacement.variableOffsets[we.crossTileID].anchor),we.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[we.crossTileID]={textOffset:wt,width:m,height:v,anchor:i,textBoxScale:S,prevAnchor:Rt},this.markUsedJustification(He,i,we,Me),He.allowVerticalPlacement&&(this.markUsedOrientation(He,Me,we),this.placedOrientations[we.crossTileID]=Me),{shift:It,placedGlyphBoxes:We}}}placeLayerBucketPart(i,u,m){const{bucket:v,layout:S,posMatrix:M,textLabelPlaneMatrix:H,labelToScreenMatrix:q,textPixelRatio:J,holdingForFade:se,collisionBoxArray:pe,partiallyEvaluatedTextSize:we,collisionGroup:He}=i.parameters,Me=S.get("text-optional"),Re=S.get("icon-optional"),ct=a.getOverlapMode(S,"text-overlap","text-allow-overlap"),wt=ct==="always",It=a.getOverlapMode(S,"icon-overlap","icon-allow-overlap"),We=It==="always",Rt=S.get("text-rotation-alignment")==="map",kt=S.get("text-pitch-alignment")==="map",Xt=S.get("icon-text-fit")!=="none",Zt=S.get("symbol-z-order")==="viewport-y",ur=wt&&(We||!v.hasIconData()||Re),qt=We&&(wt||!v.hasTextData()||Me);!v.collisionArrays&&pe&&v.deserializeCollisionBoxes(pe);const Rr=(Tr,qr)=>{if(u[Tr.crossTileID])return;if(se)return void(this.placements[Tr.crossTileID]=new ji(!1,!1,!1));let kn=!1,jn=!1,b=!0,L=null,j={box:null,offscreen:null},W={box:null,offscreen:null},ae=null,de=null,me=null,be=0,Se=0,De=0;qr.textFeatureIndex?be=qr.textFeatureIndex:Tr.useRuntimeCollisionCircles&&(be=Tr.featureIndex),qr.verticalTextFeatureIndex&&(Se=qr.verticalTextFeatureIndex);const ft=this.retainedQueryData[v.bucketInstanceId].tileID,Tt=this.terrain?(Vt,Je)=>this.terrain.getElevation(ft,Vt,Je):null;for(const Vt of["textBox","verticalTextBox","iconBox","verticalIconBox"]){const Je=qr[Vt];Je&&(Je.elevation=Tt?Tt(Je.anchorPointX,Je.anchorPointY):0)}const Ft=qr.textBox;if(Ft){const Vt=ot=>{let Yt=a.WritingMode.horizontal;if(v.allowVerticalPlacement&&!ot&&this.prevPlacement){const ir=this.prevPlacement.placedOrientations[Tr.crossTileID];ir&&(this.placedOrientations[Tr.crossTileID]=ir,Yt=ir,this.markUsedOrientation(v,Yt,Tr))}return Yt},Je=(ot,Yt)=>{if(v.allowVerticalPlacement&&Tr.numVerticalGlyphVertices>0&&qr.verticalTextBox){for(const ir of v.writingModes)if(ir===a.WritingMode.vertical?(j=Yt(),W=j):j=ot(),j&&j.box&&j.box.length)break}else j=ot()};if(S.get("text-variable-anchor")){let ot=S.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Tr.crossTileID]){const Wt=this.prevPlacement.variableOffsets[Tr.crossTileID];ot.indexOf(Wt.anchor)>0&&(ot=ot.filter(Dr=>Dr!==Wt.anchor),ot.unshift(Wt.anchor))}const Yt=(Wt,Dr,Lr)=>{const Fn=Wt.x2-Wt.x1,Nr=Wt.y2-Wt.y1,fi=Tr.textBoxScale,di=Xt&&It==="never"?Dr:null;let hr={box:[],offscreen:!1};const Hn=ct!=="never"?2*ot.length:ot.length;for(let li=0;li<Hn;++li){const ci=this.attemptAnchorPlacement(ot[li%ot.length],Wt,Fn,Nr,fi,Rt,kt,J,M,He,li>=ot.length?ct:"never",Tr,v,Lr,di,Tt);if(ci&&(hr=ci.placedGlyphBoxes,hr&&hr.box&&hr.box.length)){kn=!0,L=ci.shift;break}}return hr};Je(()=>Yt(Ft,qr.iconBox,a.WritingMode.horizontal),()=>{const Wt=qr.verticalTextBox;return v.allowVerticalPlacement&&!(j&&j.box&&j.box.length)&&Tr.numVerticalGlyphVertices>0&&Wt?Yt(Wt,qr.verticalIconBox,a.WritingMode.vertical):{box:null,offscreen:null}}),j&&(kn=j.box,b=j.offscreen);const ir=Vt(j&&j.box);if(!kn&&this.prevPlacement){const Wt=this.prevPlacement.variableOffsets[Tr.crossTileID];Wt&&(this.variableOffsets[Tr.crossTileID]=Wt,this.markUsedJustification(v,Wt.anchor,Tr,ir))}}else{const ot=(Yt,ir)=>{const Wt=this.collisionIndex.placeCollisionBox(Yt,ct,J,M,He.predicate,Tt);return Wt&&Wt.box&&Wt.box.length&&(this.markUsedOrientation(v,ir,Tr),this.placedOrientations[Tr.crossTileID]=ir),Wt};Je(()=>ot(Ft,a.WritingMode.horizontal),()=>{const Yt=qr.verticalTextBox;return v.allowVerticalPlacement&&Tr.numVerticalGlyphVertices>0&&Yt?ot(Yt,a.WritingMode.vertical):{box:null,offscreen:null}}),Vt(j&&j.box&&j.box.length)}}if(ae=j,kn=ae&&ae.box&&ae.box.length>0,b=ae&&ae.offscreen,Tr.useRuntimeCollisionCircles){const Vt=v.text.placedSymbolArray.get(Tr.centerJustifiedTextSymbolIndex),Je=a.evaluateSizeForFeature(v.textSizeData,we,Vt),ot=S.get("text-padding");de=this.collisionIndex.placeCollisionCircles(ct,Vt,v.lineVertexArray,v.glyphOffsetArray,Je,M,H,q,m,kt,He.predicate,Tr.collisionCircleDiameter,ot,Tt),de.circles.length&&de.collisionDetected&&!m&&a.warnOnce("Collisions detected, but collision boxes are not shown"),kn=wt||de.circles.length>0&&!de.collisionDetected,b=b&&de.offscreen}if(qr.iconFeatureIndex&&(De=qr.iconFeatureIndex),qr.iconBox){const Vt=Je=>{const ot=Xt&&L?nn(Je,L.x,L.y,Rt,kt,this.transform.angle):Je;return this.collisionIndex.placeCollisionBox(ot,It,J,M,He.predicate,Tt)};W&&W.box&&W.box.length&&qr.verticalIconBox?(me=Vt(qr.verticalIconBox),jn=me.box.length>0):(me=Vt(qr.iconBox),jn=me.box.length>0),b=b&&me.offscreen}const pt=Me||Tr.numHorizontalGlyphVertices===0&&Tr.numVerticalGlyphVertices===0,Ar=Re||Tr.numIconVertices===0;if(pt||Ar?Ar?pt||(jn=jn&&kn):kn=jn&&kn:jn=kn=jn&&kn,kn&&ae&&ae.box&&this.collisionIndex.insertCollisionBox(ae.box,ct,S.get("text-ignore-placement"),v.bucketInstanceId,W&&W.box&&Se?Se:be,He.ID),jn&&me&&this.collisionIndex.insertCollisionBox(me.box,It,S.get("icon-ignore-placement"),v.bucketInstanceId,De,He.ID),de&&(kn&&this.collisionIndex.insertCollisionCircles(de.circles,ct,S.get("text-ignore-placement"),v.bucketInstanceId,be,He.ID),m)){const Vt=v.bucketInstanceId;let Je=this.collisionCircleArrays[Vt];Je===void 0&&(Je=this.collisionCircleArrays[Vt]=new tn);for(let ot=0;ot<de.circles.length;ot+=4)Je.circles.push(de.circles[ot+0]),Je.circles.push(de.circles[ot+1]),Je.circles.push(de.circles[ot+2]),Je.circles.push(de.collisionDetected?1:0)}if(Tr.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(v.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Tr.crossTileID]=new ji(kn||ur,jn||qt,b||v.justReloaded),u[Tr.crossTileID]=!0};if(Zt){if(i.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Tr=v.getSortedSymbolIndexes(this.transform.angle);for(let qr=Tr.length-1;qr>=0;--qr){const kn=Tr[qr];Rr(v.symbolInstances.get(kn),v.collisionArrays[kn])}}else for(let Tr=i.symbolInstanceStart;Tr<i.symbolInstanceEnd;Tr++)Rr(v.symbolInstances.get(Tr),v.collisionArrays[Tr]);if(m&&v.bucketInstanceId in this.collisionCircleArrays){const Tr=this.collisionCircleArrays[v.bucketInstanceId];a.invert(Tr.invProjMatrix,M),Tr.viewportMatrix=this.collisionIndex.getViewportMatrix()}v.justReloaded=!1}markUsedJustification(i,u,m,v){let S;S=v===a.WritingMode.vertical?m.verticalPlacedTextSymbolIndex:{left:m.leftJustifiedTextSymbolIndex,center:m.centerJustifiedTextSymbolIndex,right:m.rightJustifiedTextSymbolIndex}[a.getAnchorJustification(u)];const M=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex,m.verticalPlacedTextSymbolIndex];for(const H of M)H>=0&&(i.text.placedSymbolArray.get(H).crossTileID=S>=0&&H!==S?0:m.crossTileID)}markUsedOrientation(i,u,m){const v=u===a.WritingMode.horizontal||u===a.WritingMode.horizontalOnly?u:0,S=u===a.WritingMode.vertical?u:0,M=[m.leftJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.rightJustifiedTextSymbolIndex];for(const H of M)i.text.placedSymbolArray.get(H).placedOrientation=v;m.verticalPlacedTextSymbolIndex&&(i.text.placedSymbolArray.get(m.verticalPlacedTextSymbolIndex).placedOrientation=S)}commit(i){this.commitTime=i,this.zoomAtLastRecencyCheck=this.transform.zoom;const u=this.prevPlacement;let m=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;const v=u?u.symbolFadeChange(i):1,S=u?u.opacities:{},M=u?u.variableOffsets:{},H=u?u.placedOrientations:{};for(const q in this.placements){const J=this.placements[q],se=S[q];se?(this.opacities[q]=new Sn(se,v,J.text,J.icon),m=m||J.text!==se.text.placed||J.icon!==se.icon.placed):(this.opacities[q]=new Sn(null,v,J.text,J.icon,J.skipFade),m=m||J.text||J.icon)}for(const q in S){const J=S[q];if(!this.opacities[q]){const se=new Sn(J,v,!1,!1);se.isHidden()||(this.opacities[q]=se,m=m||J.text.placed||J.icon.placed)}}for(const q in M)this.variableOffsets[q]||!this.opacities[q]||this.opacities[q].isHidden()||(this.variableOffsets[q]=M[q]);for(const q in H)this.placedOrientations[q]||!this.opacities[q]||this.opacities[q].isHidden()||(this.placedOrientations[q]=H[q]);if(u&&u.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");m?this.lastPlacementChangeTime=i:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:i)}updateLayerOpacities(i,u){const m={};for(const v of u){const S=v.getBucket(i);S&&v.latestFeatureIndex&&i.id===S.layerIds[0]&&this.updateBucketOpacities(S,m,v.collisionBoxArray)}}updateBucketOpacities(i,u,m){i.hasTextData()&&i.text.opacityVertexArray.clear(),i.hasIconData()&&i.icon.opacityVertexArray.clear(),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexArray.clear(),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexArray.clear();const v=i.layers[0].layout,S=new Sn(null,0,!1,!1,!0),M=v.get("text-allow-overlap"),H=v.get("icon-allow-overlap"),q=v.get("text-variable-anchor"),J=v.get("text-rotation-alignment")==="map",se=v.get("text-pitch-alignment")==="map",pe=v.get("icon-text-fit")!=="none",we=new Sn(null,0,M&&(H||!i.hasIconData()||v.get("icon-optional")),H&&(M||!i.hasTextData()||v.get("text-optional")),!0);!i.collisionArrays&&m&&(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData())&&i.deserializeCollisionBoxes(m);const He=(Me,Re,ct)=>{for(let wt=0;wt<Re/4;wt++)Me.opacityVertexArray.emplaceBack(ct)};for(let Me=0;Me<i.symbolInstances.length;Me++){const Re=i.symbolInstances.get(Me),{numHorizontalGlyphVertices:ct,numVerticalGlyphVertices:wt,crossTileID:It}=Re;let We=this.opacities[It];u[It]?We=S:We||(We=we,this.opacities[It]=We),u[It]=!0;const Rt=Re.numIconVertices>0,kt=this.placedOrientations[Re.crossTileID],Xt=kt===a.WritingMode.vertical,Zt=kt===a.WritingMode.horizontal||kt===a.WritingMode.horizontalOnly;if(ct>0||wt>0){const ur=ut(We.text);He(i.text,ct,Xt?Ot:ur),He(i.text,wt,Zt?Ot:ur);const qt=We.text.isHidden();[Re.rightJustifiedTextSymbolIndex,Re.centerJustifiedTextSymbolIndex,Re.leftJustifiedTextSymbolIndex].forEach(qr=>{qr>=0&&(i.text.placedSymbolArray.get(qr).hidden=qt||Xt?1:0)}),Re.verticalPlacedTextSymbolIndex>=0&&(i.text.placedSymbolArray.get(Re.verticalPlacedTextSymbolIndex).hidden=qt||Zt?1:0);const Rr=this.variableOffsets[Re.crossTileID];Rr&&this.markUsedJustification(i,Rr.anchor,Re,kt);const Tr=this.placedOrientations[Re.crossTileID];Tr&&(this.markUsedJustification(i,"left",Re,Tr),this.markUsedOrientation(i,Tr,Re))}if(Rt){const ur=ut(We.icon),qt=!(pe&&Re.verticalPlacedIconSymbolIndex&&Xt);Re.placedIconSymbolIndex>=0&&(He(i.icon,Re.numIconVertices,qt?ur:Ot),i.icon.placedSymbolArray.get(Re.placedIconSymbolIndex).hidden=We.icon.isHidden()),Re.verticalPlacedIconSymbolIndex>=0&&(He(i.icon,Re.numVerticalIconVertices,qt?Ot:ur),i.icon.placedSymbolArray.get(Re.verticalPlacedIconSymbolIndex).hidden=We.icon.isHidden())}if(i.hasIconCollisionBoxData()||i.hasTextCollisionBoxData()){const ur=i.collisionArrays[Me];if(ur){let qt=new a.pointGeometry(0,0);if(ur.textBox||ur.verticalTextBox){let Tr=!0;if(q){const qr=this.variableOffsets[It];qr?(qt=Ln(qr.anchor,qr.width,qr.height,qr.textOffset,qr.textBoxScale),J&&qt._rotate(se?this.transform.angle:-this.transform.angle)):Tr=!1}ur.textBox&&Y(i.textCollisionBox.collisionVertexArray,We.text.placed,!Tr||Xt,qt.x,qt.y),ur.verticalTextBox&&Y(i.textCollisionBox.collisionVertexArray,We.text.placed,!Tr||Zt,qt.x,qt.y)}const Rr=Boolean(!Zt&&ur.verticalIconBox);ur.iconBox&&Y(i.iconCollisionBox.collisionVertexArray,We.icon.placed,Rr,pe?qt.x:0,pe?qt.y:0),ur.verticalIconBox&&Y(i.iconCollisionBox.collisionVertexArray,We.icon.placed,!Rr,pe?qt.x:0,pe?qt.y:0)}}}if(i.sortFeatures(this.transform.angle),this.retainedQueryData[i.bucketInstanceId]&&(this.retainedQueryData[i.bucketInstanceId].featureSortOrder=i.featureSortOrder),i.hasTextData()&&i.text.opacityVertexBuffer&&i.text.opacityVertexBuffer.updateData(i.text.opacityVertexArray),i.hasIconData()&&i.icon.opacityVertexBuffer&&i.icon.opacityVertexBuffer.updateData(i.icon.opacityVertexArray),i.hasIconCollisionBoxData()&&i.iconCollisionBox.collisionVertexBuffer&&i.iconCollisionBox.collisionVertexBuffer.updateData(i.iconCollisionBox.collisionVertexArray),i.hasTextCollisionBoxData()&&i.textCollisionBox.collisionVertexBuffer&&i.textCollisionBox.collisionVertexBuffer.updateData(i.textCollisionBox.collisionVertexArray),i.text.opacityVertexArray.length!==i.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${i.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${i.text.layoutVertexArray.length}) / 4`);if(i.icon.opacityVertexArray.length!==i.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${i.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${i.icon.layoutVertexArray.length}) / 4`);if(i.bucketInstanceId in this.collisionCircleArrays){const Me=this.collisionCircleArrays[i.bucketInstanceId];i.placementInvProjMatrix=Me.invProjMatrix,i.placementViewportMatrix=Me.viewportMatrix,i.collisionCircleArray=Me.circles,delete this.collisionCircleArrays[i.bucketInstanceId]}}symbolFadeChange(i){return this.fadeDuration===0?1:(i-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(i){return Math.max(0,(this.transform.zoom-i)/1.5)}hasTransitions(i){return this.stale||i-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(i,u){const m=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*m>i}setStale(){this.stale=!0}}function Y(g,i,u,m,v){g.emplaceBack(i?1:0,u?1:0,m||0,v||0),g.emplaceBack(i?1:0,u?1:0,m||0,v||0),g.emplaceBack(i?1:0,u?1:0,m||0,v||0),g.emplaceBack(i?1:0,u?1:0,m||0,v||0)}const le=Math.pow(2,25),Ce=Math.pow(2,24),Te=Math.pow(2,17),Xe=Math.pow(2,16),lt=Math.pow(2,9),Ye=Math.pow(2,8),qe=Math.pow(2,1);function ut(g){if(g.opacity===0&&!g.placed)return 0;if(g.opacity===1&&g.placed)return 4294967295;const i=g.placed?1:0,u=Math.floor(127*g.opacity);return u*le+i*Ce+u*Te+i*Xe+u*lt+i*Ye+u*qe+i}const Ot=0;class nr{constructor(i){this._sortAcrossTiles=i.layout.get("symbol-z-order")!=="viewport-y"&&!i.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(i,u,m,v,S){const M=this._bucketParts;for(;this._currentTileIndex<i.length;)if(u.getBucketParts(M,v,i[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,S())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,M.sort((H,q)=>H.sortKey-q.sortKey));this._currentPartIndex<M.length;)if(u.placeLayerBucketPart(M[this._currentPartIndex],this._seenCrossTileIDs,m),this._currentPartIndex++,S())return!0;return!1}}class Ht{constructor(i,u,m,v,S,M,H,q){this.placement=new Ie(i,u,M,H,q),this._currentPlacementIndex=m.length-1,this._forceFullPlacement=v,this._showCollisionBoxes=S,this._done=!1}isDone(){return this._done}continuePlacement(i,u,m){const v=a.exported.now(),S=()=>{const M=a.exported.now()-v;return!this._forceFullPlacement&&M>2};for(;this._currentPlacementIndex>=0;){const M=u[i[this._currentPlacementIndex]],H=this.placement.collisionIndex.transform.zoom;if(M.type==="symbol"&&(!M.minzoom||M.minzoom<=H)&&(!M.maxzoom||M.maxzoom>H)){if(this._inProgressLayer||(this._inProgressLayer=new nr(M)),this._inProgressLayer.continuePlacement(m[M.source],this.placement,this._showCollisionBoxes,M,S))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(i){return this.placement.commit(i),this.placement}}const jr=512/a.EXTENT/2;class zr{constructor(i,u,m){this.tileID=i,this.indexedSymbolInstances={},this.bucketInstanceId=m;for(let v=0;v<u.length;v++){const S=u.get(v),M=S.key;this.indexedSymbolInstances[M]||(this.indexedSymbolInstances[M]=[]),this.indexedSymbolInstances[M].push({crossTileID:S.crossTileID,coord:this.getScaledCoordinates(S,i)})}}getScaledCoordinates(i,u){const m=jr/Math.pow(2,u.canonical.z-this.tileID.canonical.z);return{x:Math.floor((u.canonical.x*a.EXTENT+i.anchorX)*m),y:Math.floor((u.canonical.y*a.EXTENT+i.anchorY)*m)}}findMatches(i,u,m){const v=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z);for(let S=0;S<i.length;S++){const M=i.get(S);if(M.crossTileID)continue;const H=this.indexedSymbolInstances[M.key];if(!H)continue;const q=this.getScaledCoordinates(M,u);for(const J of H)if(Math.abs(J.coord.x-q.x)<=v&&Math.abs(J.coord.y-q.y)<=v&&!m[J.crossTileID]){m[J.crossTileID]=!0,M.crossTileID=J.crossTileID;break}}}}class Ir{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class ln{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(i){const u=Math.round((i-this.lng)/360);if(u!==0)for(const m in this.indexes){const v=this.indexes[m],S={};for(const M in v){const H=v[M];H.tileID=H.tileID.unwrapTo(H.tileID.wrap+u),S[H.tileID.key]=H}this.indexes[m]=S}this.lng=i}addBucket(i,u,m){if(this.indexes[i.overscaledZ]&&this.indexes[i.overscaledZ][i.key]){if(this.indexes[i.overscaledZ][i.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(i.overscaledZ,this.indexes[i.overscaledZ][i.key])}for(let S=0;S<u.symbolInstances.length;S++)u.symbolInstances.get(S).crossTileID=0;this.usedCrossTileIDs[i.overscaledZ]||(this.usedCrossTileIDs[i.overscaledZ]={});const v=this.usedCrossTileIDs[i.overscaledZ];for(const S in this.indexes){const M=this.indexes[S];if(Number(S)>i.overscaledZ)for(const H in M){const q=M[H];q.tileID.isChildOf(i)&&q.findMatches(u.symbolInstances,i,v)}else{const H=M[i.scaledTo(Number(S)).key];H&&H.findMatches(u.symbolInstances,i,v)}}for(let S=0;S<u.symbolInstances.length;S++){const M=u.symbolInstances.get(S);M.crossTileID||(M.crossTileID=m.generate(),v[M.crossTileID]=!0)}return this.indexes[i.overscaledZ]===void 0&&(this.indexes[i.overscaledZ]={}),this.indexes[i.overscaledZ][i.key]=new zr(i,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(i,u){for(const m in u.indexedSymbolInstances)for(const v of u.indexedSymbolInstances[m])delete this.usedCrossTileIDs[i][v.crossTileID]}removeStaleBuckets(i){let u=!1;for(const m in this.indexes){const v=this.indexes[m];for(const S in v)i[v[S].bucketInstanceId]||(this.removeBucketCrossTileIDs(m,v[S]),delete v[S],u=!0)}return u}}class dn{constructor(){this.layerIndexes={},this.crossTileIDs=new Ir,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(i,u,m){let v=this.layerIndexes[i.id];v===void 0&&(v=this.layerIndexes[i.id]=new ln);let S=!1;const M={};v.handleWrapJump(m);for(const H of u){const q=H.getBucket(i);q&&i.id===q.layerIds[0]&&(q.bucketInstanceId||(q.bucketInstanceId=++this.maxBucketInstanceId),v.addBucket(H.tileID,q,this.crossTileIDs)&&(S=!0),M[q.bucketInstanceId]=!0)}return v.removeStaleBuckets(M)&&(S=!0),S}pruneUnusedLayers(i){const u={};i.forEach(m=>{u[m]=!0});for(const m in this.layerIndexes)u[m]||delete this.layerIndexes[m]}}var In=a.createLayout([{name:"a_pos",type:"Int16",components:2}]);class mn extends a.Evented{constructor(i){super(),this.sourceCache=i,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.renderHistory=[],this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,this.renderHistorySize=i._cache.max,i.usedForTerrain=!0,i.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null;for(const i in this._tiles){const u=this._tiles[i];u.textures.forEach(m=>m.destroy()),u.textures=[]}}update(i,u){this.sourceCache.update(i,u),this._renderableTilesKeys=[];for(const m of i.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:u}))this._renderableTilesKeys.push(m.key),this._tiles[m.key]||(m.posMatrix=new Float64Array(16),a.ortho(m.posMatrix,0,a.EXTENT,0,a.EXTENT,0,1),this._tiles[m.key]=new st(m,this.tileSize))}removeOutdated(i){const u={};this.renderHistory=this.renderHistory.filter((m,v)=>this.renderHistory.indexOf(m)===v).slice(0,this.renderHistorySize);for(const m of this._renderableTilesKeys)u[m]=!0;for(const m of this.renderHistory)u[m]=!0;for(const m in this._tiles)u[m]||(this._tiles[m].clearTextures(i),delete this._tiles[m])}getRenderableTiles(){return this._renderableTilesKeys.map(i=>this.getTileByID(i))}getTileByID(i){return this._tiles[i]}getTerrainCoords(i){const u={};for(const m of this._renderableTilesKeys){const v=this._tiles[m].tileID;if(v.canonical.equals(i.canonical)){const S=i.clone();S.posMatrix=new Float64Array(16),a.ortho(S.posMatrix,0,a.EXTENT,0,a.EXTENT,0,1),u[m]=S}else if(v.canonical.isChildOf(i.canonical)){const S=i.clone();S.posMatrix=new Float64Array(16);const M=v.canonical.z-i.canonical.z,H=v.canonical.x-(v.canonical.x>>M<<M),q=v.canonical.y-(v.canonical.y>>M<<M),J=a.EXTENT>>M;a.ortho(S.posMatrix,0,J,0,J,0,1),a.translate(S.posMatrix,S.posMatrix,[-H*J,-q*J,0]),u[m]=S}else if(i.canonical.isChildOf(v.canonical)){const S=i.clone();S.posMatrix=new Float64Array(16);const M=i.canonical.z-v.canonical.z,H=i.canonical.x-(i.canonical.x>>M<<M),q=i.canonical.y-(i.canonical.y>>M<<M),J=a.EXTENT>>M;a.ortho(S.posMatrix,0,a.EXTENT,0,a.EXTENT,0,1),a.translate(S.posMatrix,S.posMatrix,[H*J,q*J,0]),a.scale(S.posMatrix,S.posMatrix,[1/2**M,1/2**M,0]),u[m]=S}}return u}getSourceTile(i,u){const m=this.sourceCache._source;let v=i.overscaledZ-this.deltaZoom;if(v>m.maxzoom&&(v=m.maxzoom),v<m.minzoom)return null;this._sourceTileCache[i.key]||(this._sourceTileCache[i.key]=i.scaledTo(v).key);let S=this.sourceCache.getTileByID(this._sourceTileCache[i.key]);if((!S||!S.dem)&&u)for(;v>=m.minzoom&&(!S||!S.dem);)S=this.sourceCache.getTileByID(i.scaledTo(v--).key);return S}tilesAfterTime(i=Date.now()){return Object.values(this._tiles).filter(u=>u.timeLoaded>=i)}}class Bn{constructor(i,u,m){this.style=i,this.sourceCache=new mn(u),this.options=m,this.exaggeration=typeof m.exaggeration=="number"?m.exaggeration:1,this.elevationOffset=typeof m.elevationOffset=="number"?m.elevationOffset:450,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024,this.clearRerenderCache()}getDEMElevation(i,u,m,v=a.EXTENT){if(!(u>=0&&u<v&&m>=0&&m<v))return this.elevationOffset;let S=0;const M=this.getTerrainData(i);if(M.tile&&M.tile.dem){const H=a.transformMat4$1([],[u/v*a.EXTENT,m/v*a.EXTENT],M.u_terrain_matrix),q=[H[0]*M.tile.dem.dim,H[1]*M.tile.dem.dim],J=[Math.floor(q[0]),Math.floor(q[1])],se=M.tile.dem.get(J[0],J[1]),pe=M.tile.dem.get(J[0],J[1]+1),we=M.tile.dem.get(J[0]+1,J[1]),He=M.tile.dem.get(J[0]+1,J[1]+1);S=a.number(a.number(se,pe,q[0]-J[0]),a.number(we,He,q[0]-J[0]),q[1]-J[1])}return S}rememberForRerender(i,u){for(const m in this.sourceCache._tiles){const v=this.sourceCache._tiles[m];(v.tileID.equals(u)||v.tileID.isChildOf(u))&&(i===this.sourceCache.sourceCache.id&&(v.timeLoaded=Date.now()),this._rerender[i]=this._rerender[i]||{},this._rerender[i][v.tileID.key]=!0)}}needsRerender(i,u){return this._rerender[i]&&this._rerender[i][u.key]}clearRerenderCache(){this._rerender={}}getElevation(i,u,m,v=a.EXTENT){return(this.getDEMElevation(i,u,m,v)+this.elevationOffset)*this.exaggeration}getTerrainData(i){if(!this._emptyDemTexture){const v=this.style.map.painter.context,S=new a.RGBAImage({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new P(v,S,v.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new P(v,new a.RGBAImage({width:1,height:1}),v.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(v.gl.NEAREST,v.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.identity([])}const u=this.sourceCache.getSourceTile(i,!0);if(u&&u.dem&&(!u.demTexture||u.needsTerrainPrepare)){const v=this.style.map.painter.context;u.demTexture=this.style.map.painter.getTileTexture(u.dem.stride),u.demTexture?u.demTexture.update(u.dem.getPixels(),{premultiply:!1}):u.demTexture=new P(v,u.dem.getPixels(),v.gl.RGBA,{premultiply:!1}),u.demTexture.bind(v.gl.NEAREST,v.gl.CLAMP_TO_EDGE),u.needsTerrainPrepare=!1}const m=u&&u+u.tileID.key+i.key;if(m&&!this._demMatrixCache[m]){const v=this.sourceCache.sourceCache._source.maxzoom;let S=i.canonical.z-u.tileID.canonical.z;i.overscaledZ>i.canonical.z&&(i.canonical.z>=v?S=i.canonical.z-v:a.warnOnce("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const M=i.canonical.x-(i.canonical.x>>S<<S),H=i.canonical.y-(i.canonical.y>>S<<S),q=a.fromScaling(new Float64Array(16),[1/(a.EXTENT<<S),1/(a.EXTENT<<S),0]);a.translate(q,q,[M*a.EXTENT,H*a.EXTENT,0]),this._demMatrixCache[i.key]={matrix:q,coord:i}}return{u_depth:2,u_terrain:3,u_terrain_dim:u&&u.dem&&u.dem.dim||1,u_terrain_matrix:m?this._demMatrixCache[i.key].matrix:this._emptyDemMatrix,u_terrain_unpack:u&&u.dem&&u.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_offset:this.elevationOffset,u_terrain_exaggeration:this.exaggeration,texture:(u&&u.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:u}}getRTTFramebuffer(){const i=this.style.map.painter;if(!this._rttFramebuffer){const u=this.sourceCache.tileSize*this.qualityFactor;this._rttFramebuffer=i.context.createFramebuffer(u,u,!0),this._rttFramebuffer.depthAttachment.set(i.context.createRenderbuffer(i.context.gl.DEPTH_COMPONENT16,u,u))}return this._rttFramebuffer}getFramebuffer(i){const u=this.style.map.painter,m=u.width/devicePixelRatio,v=u.height/devicePixelRatio;return!this._fbo||this._fbo.width===m&&this._fbo.height===v||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new P(u.context,{width:m,height:v,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new P(u.context,{width:m,height:v,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=u.context.createFramebuffer(m,v,!0),this._fbo.depthAttachment.set(u.context.createRenderbuffer(u.context.gl.DEPTH_COMPONENT16,m,v))),this._fbo.colorAttachment.set(i==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const i=this.style.map.painter.context;if(this._coordsTexture)return this._coordsTexture;const u=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let S=0,M=0;S<this._coordsTextureSize;S++)for(let H=0;H<this._coordsTextureSize;H++,M+=4)u[M+0]=255&H,u[M+1]=255&S,u[M+2]=H>>8<<4|S>>8,u[M+3]=0;const m=new a.RGBAImage({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(u.buffer)),v=new P(i,m,i.gl.RGBA,{premultiply:!1});return v.bind(i.gl.NEAREST,i.gl.CLAMP_TO_EDGE),this._coordsTexture=v,v}pointCoordinate(i){const u=new Uint8Array(4),m=this.style.map.painter,v=m.context,S=v.gl;v.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),S.readPixels(i.x,m.height/devicePixelRatio-i.y-1,1,1,S.RGBA,S.UNSIGNED_BYTE,u),v.bindFramebuffer.set(null);const M=u[0]+(u[2]>>4<<8),H=u[1]+((15&u[2])<<8),q=this.coordsIndex[255-u[3]],J=q&&this.sourceCache.getTileByID(q);if(!J)return null;const se=this._coordsTextureSize,pe=(1<<J.tileID.canonical.z)*se;return new a.MercatorCoordinate((J.tileID.canonical.x*se+M)/pe,(J.tileID.canonical.y*se+H)/pe,this.getElevation(J.tileID,M,H,se))}getTerrainMesh(){if(this._mesh)return this._mesh;const i=this.style.map.painter.context,u=new a.PosArray,m=new a.TriangleIndexArray,v=this.meshSize,S=a.EXTENT/v,M=v*v;for(let H=0;H<=v;H++)for(let q=0;q<=v;q++)u.emplaceBack(q*S,H*S);for(let H=0;H<M;H+=v+1)for(let q=0;q<v;q++)m.emplaceBack(q+H,v+q+H+1,v+q+H+2),m.emplaceBack(q+H,v+q+H+2,q+H+1);return this._mesh={indexBuffer:i.createIndexBuffer(m),vertexBuffer:i.createVertexBuffer(u,In.members),segments:a.SegmentVector.simpleSegment(0,0,u.length,m.length)},this._mesh}getMinMaxElevation(i){const u=this.getTerrainData(i).tile,m={minElevation:null,maxElevation:null};return u&&u.dem&&(m.minElevation=(u.dem.min+this.elevationOffset)*this.exaggeration,m.maxElevation=(u.dem.max+this.elevationOffset)*this.exaggeration),m}}const Pn=(g,i)=>a.emitValidationErrors(g,i&&i.filter(u=>u.identifier!=="source.canvas")),Vn=a.pick(zt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Ti=a.pick(zt,["setCenter","setZoom","setBearing","setPitch"]),oi=function(){const g={},i=a.spec.$version;for(const u in a.spec.$root){const m=a.spec.$root[u];if(m.required){let v=null;v=u==="version"?i:m.type==="array"?[]:{},v!=null&&(g[u]=v)}}return g}();class wi extends a.Evented{constructor(i,u={}){super(),this.map=i,this.dispatcher=new he(Oe(),this),this.imageManager=new k,this.imageManager.setEventedParent(this),this.glyphManager=new Z(i._requestManager,u.localIdeographFontFamily),this.lineAtlas=new ge(256,512),this.crossTileSymbolIndex=new dn,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",a.getReferrer());const m=this;this._rtlTextPluginCallback=wi.registerForPluginStateChange(v=>{m.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:v.pluginStatus,pluginURL:v.pluginURL},(S,M)=>{if(a.triggerPluginCompletionEvent(S),M&&M.every(H=>H))for(const H in m.sourceCaches)m.sourceCaches[H].reload()})}),this.on("data",v=>{if(v.dataType!=="source"||v.sourceDataType!=="metadata")return;const S=this.sourceCaches[v.sourceId];if(!S)return;const M=S.getSource();if(M&&M.vectorLayerIds)for(const H in this._layers){const q=this._layers[H];q.source===M.id&&this._validateLayer(q)}})}loadURL(i,u={}){this.fire(new a.Event("dataloading",{dataType:"style"}));const m=typeof u.validate!="boolean"||u.validate,v=this.map._requestManager.transformRequest(i,a.ResourceType.Style);this._request=a.getJSON(v,(S,M)=>{this._request=null,S?this.fire(new a.ErrorEvent(S)):M&&this._load(M,m)})}loadJSON(i,u={}){this.fire(new a.Event("dataloading",{dataType:"style"})),this._request=a.exported.frame(()=>{this._request=null,this._load(i,u.validate!==!1)})}loadEmpty(){this.fire(new a.Event("dataloading",{dataType:"style"})),this._load(oi,!1)}_load(i,u){if(u&&Pn(this,a.validateStyle(i)))return;this._loaded=!0,this.stylesheet=i;for(const v in i.sources)this.addSource(v,i.sources[v],{validate:!1});i.sprite?this._loadSprite(i.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(i.glyphs);const m=sr(this.stylesheet.layers);this._order=m.map(v=>v.id),this._layers={},this._serializedLayers={};for(let v of m)v=a.createStyleLayer(v),v.setEventedParent(this,{layer:{id:v.id}}),this._layers[v.id]=v,this._serializedLayers[v.id]=v.serialize();this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new Ae(this.stylesheet.light),this.setTerrain(this.stylesheet.terrain),this.fire(new a.Event("data",{dataType:"style"})),this.fire(new a.Event("style.load"))}_loadSprite(i){this._spriteRequest=function(u,m,v,S){let M,H,q;const J=v>1?"@2x":"";let se=a.getJSON(m.transformRequest(m.normalizeSpriteURL(u,J,".json"),a.ResourceType.SpriteJSON),(He,Me)=>{se=null,q||(q=He,M=Me,we())}),pe=a.getImage(m.transformRequest(m.normalizeSpriteURL(u,J,".png"),a.ResourceType.SpriteImage),(He,Me)=>{pe=null,q||(q=He,H=Me,we())});function we(){if(q)S(q);else if(M&&H){const He=a.exported.getImageData(H),Me={};for(const Re in M){const{width:ct,height:wt,x:It,y:We,sdf:Rt,pixelRatio:kt,stretchX:Xt,stretchY:Zt,content:ur}=M[Re],qt=new a.RGBAImage({width:ct,height:wt});a.RGBAImage.copy(He,qt,{x:It,y:We},{x:0,y:0},{width:ct,height:wt}),Me[Re]={data:qt,pixelRatio:kt,sdf:Rt,stretchX:Xt,stretchY:Zt,content:ur}}S(null,Me)}}return{cancel(){se&&(se.cancel(),se=null),pe&&(pe.cancel(),pe=null)}}}(i,this.map._requestManager,this.map.getPixelRatio(),(u,m)=>{if(this._spriteRequest=null,u)this.fire(new a.ErrorEvent(u));else if(m)for(const v in m)this.imageManager.addImage(v,m[v]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.Event("data",{dataType:"style"}))})}_validateLayer(i){const u=this.sourceCaches[i.source];if(!u)return;const m=i.sourceLayer;if(!m)return;const v=u.getSource();(v.type==="geojson"||v.vectorLayerIds&&v.vectorLayerIds.indexOf(m)===-1)&&this.fire(new a.ErrorEvent(new Error(`Source layer "${m}" does not exist on source "${v.id}" as specified by style layer "${i.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const i in this.sourceCaches)if(!this.sourceCaches[i].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(i){const u=[];for(const m of i){const v=this._layers[m];v.type!=="custom"&&u.push(v.serialize())}return u}hasTransitions(){if(this.light&&this.light.hasTransition())return!0;for(const i in this.sourceCaches)if(this.sourceCaches[i].hasTransition())return!0;for(const i in this._layers)if(this._layers[i].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(i){if(!this._loaded)return;const u=this._changed;if(this._changed){const v=Object.keys(this._updatedLayers),S=Object.keys(this._removedLayers);(v.length||S.length)&&this._updateWorkerLayers(v,S);for(const M in this._updatedSources){const H=this._updatedSources[M];if(H==="reload")this._reloadSource(M);else{if(H!=="clear")throw new Error(`Invalid action ${H}`);this._clearSource(M)}}this._updateTilesForChangedImages();for(const M in this._updatedPaintProps)this._layers[M].updateTransitions(i);this.light.updateTransitions(i),this._resetUpdates()}const m={};for(const v in this.sourceCaches){const S=this.sourceCaches[v];m[v]=S.used,S.used=!1}for(const v of this._order){const S=this._layers[v];S.recalculate(i,this._availableImages),!S.isHidden(i.zoom)&&S.source&&(this.sourceCaches[S.source].used=!0)}for(const v in m){const S=this.sourceCaches[v];m[v]!==S.used&&S.fire(new a.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:v}))}this.light.recalculate(i),this.z=i.zoom,u&&this.fire(new a.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const i=Object.keys(this._changedImages);if(i.length){for(const u in this.sourceCaches)this.sourceCaches[u].reloadTilesForDependencies(["icons","patterns"],i);this._changedImages={}}}_updateWorkerLayers(i,u){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(i),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setTerrain(i){if(this._checkLoaded(),this._terrainDataCallback&&this.off("data",this._terrainDataCallback),this._terrainfreezeElevationCallback&&this.map.off("freezeElevation",this._terrainfreezeElevationCallback),i){const u=this.sourceCaches[i.source];if(!u)throw new Error(`cannot load terrain, because there exists no source with ID: ${i.source}`);this.terrain=new Bn(this,u,i),this.map.transform.updateElevation(this.terrain),this._terrainfreezeElevationCallback=m=>{m.freeze?this.map.transform.freezeElevation=!0:(this.map.transform.freezeElevation=!1,this.map.transform.recalculateZoom(this.terrain))},this._terrainDataCallback=m=>{m.tile&&(m.sourceId===i.source?(this.map.transform.updateElevation(this.terrain),this.terrain.rememberForRerender(m.sourceId,m.tile.tileID)):m.source.type==="geojson"&&this.terrain.rememberForRerender(m.sourceId,m.tile.tileID))},this.on("data",this._terrainDataCallback),this.map.on("freezeElevation",this._terrainfreezeElevationCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.map.transform.updateElevation(this.terrain);this.map.fire(new a.Event("terrain",{terrain:i}))}setState(i){if(this._checkLoaded(),Pn(this,a.validateStyle(i)))return!1;(i=a.clone$1(i)).layers=sr(i.layers);const u=function(v,S){if(!v)return[{command:zt.setStyle,args:[S]}];let M=[];try{if(!E(v.version,S.version))return[{command:zt.setStyle,args:[S]}];E(v.center,S.center)||M.push({command:zt.setCenter,args:[S.center]}),E(v.zoom,S.zoom)||M.push({command:zt.setZoom,args:[S.zoom]}),E(v.bearing,S.bearing)||M.push({command:zt.setBearing,args:[S.bearing]}),E(v.pitch,S.pitch)||M.push({command:zt.setPitch,args:[S.pitch]}),E(v.sprite,S.sprite)||M.push({command:zt.setSprite,args:[S.sprite]}),E(v.glyphs,S.glyphs)||M.push({command:zt.setGlyphs,args:[S.glyphs]}),E(v.transition,S.transition)||M.push({command:zt.setTransition,args:[S.transition]}),E(v.light,S.light)||M.push({command:zt.setLight,args:[S.light]});const H={},q=[];(function(se,pe,we,He){let Me;for(Me in pe=pe||{},se=se||{})Object.prototype.hasOwnProperty.call(se,Me)&&(Object.prototype.hasOwnProperty.call(pe,Me)||Br(Me,we,He));for(Me in pe)Object.prototype.hasOwnProperty.call(pe,Me)&&(Object.prototype.hasOwnProperty.call(se,Me)?E(se[Me],pe[Me])||(se[Me].type==="geojson"&&pe[Me].type==="geojson"&&Gr(se,pe,Me)?we.push({command:zt.setGeoJSONSourceData,args:[Me,pe[Me].data]}):vr(Me,pe,we,He)):fr(Me,pe,we))})(v.sources,S.sources,q,H);const J=[];v.layers&&v.layers.forEach(se=>{H[se.source]?M.push({command:zt.removeLayer,args:[se.id]}):J.push(se)}),M=M.concat(q),function(se,pe,we){pe=pe||[];const He=(se=se||[]).map(xr),Me=pe.map(xr),Re=se.reduce(Zr,{}),ct=pe.reduce(Zr,{}),wt=He.slice(),It=Object.create(null);let We,Rt,kt,Xt,Zt,ur,qt;for(We=0,Rt=0;We<He.length;We++)kt=He[We],Object.prototype.hasOwnProperty.call(ct,kt)?Rt++:(we.push({command:zt.removeLayer,args:[kt]}),wt.splice(wt.indexOf(kt,Rt),1));for(We=0,Rt=0;We<Me.length;We++)kt=Me[Me.length-1-We],wt[wt.length-1-We]!==kt&&(Object.prototype.hasOwnProperty.call(Re,kt)?(we.push({command:zt.removeLayer,args:[kt]}),wt.splice(wt.lastIndexOf(kt,wt.length-Rt),1)):Rt++,ur=wt[wt.length-We],we.push({command:zt.addLayer,args:[ct[kt],ur]}),wt.splice(wt.length-We,0,kt),It[kt]=!0);for(We=0;We<Me.length;We++)if(kt=Me[We],Xt=Re[kt],Zt=ct[kt],!It[kt]&&!E(Xt,Zt))if(E(Xt.source,Zt.source)&&E(Xt["source-layer"],Zt["source-layer"])&&E(Xt.type,Zt.type)){for(qt in rr(Xt.layout,Zt.layout,we,kt,null,zt.setLayoutProperty),rr(Xt.paint,Zt.paint,we,kt,null,zt.setPaintProperty),E(Xt.filter,Zt.filter)||we.push({command:zt.setFilter,args:[kt,Zt.filter]}),E(Xt.minzoom,Zt.minzoom)&&E(Xt.maxzoom,Zt.maxzoom)||we.push({command:zt.setLayerZoomRange,args:[kt,Zt.minzoom,Zt.maxzoom]}),Xt)Object.prototype.hasOwnProperty.call(Xt,qt)&&qt!=="layout"&&qt!=="paint"&&qt!=="filter"&&qt!=="metadata"&&qt!=="minzoom"&&qt!=="maxzoom"&&(qt.indexOf("paint.")===0?rr(Xt[qt],Zt[qt],we,kt,qt.slice(6),zt.setPaintProperty):E(Xt[qt],Zt[qt])||we.push({command:zt.setLayerProperty,args:[kt,qt,Zt[qt]]}));for(qt in Zt)Object.prototype.hasOwnProperty.call(Zt,qt)&&!Object.prototype.hasOwnProperty.call(Xt,qt)&&qt!=="layout"&&qt!=="paint"&&qt!=="filter"&&qt!=="metadata"&&qt!=="minzoom"&&qt!=="maxzoom"&&(qt.indexOf("paint.")===0?rr(Xt[qt],Zt[qt],we,kt,qt.slice(6),zt.setPaintProperty):E(Xt[qt],Zt[qt])||we.push({command:zt.setLayerProperty,args:[kt,qt,Zt[qt]]}))}else we.push({command:zt.removeLayer,args:[kt]}),ur=wt[wt.lastIndexOf(kt)+1],we.push({command:zt.addLayer,args:[Zt,ur]})}(J,S.layers,M)}catch(H){console.warn("Unable to compute style diff:",H),M=[{command:zt.setStyle,args:[S]}]}return M}(this.serialize(),i).filter(v=>!(v.command in Ti));if(u.length===0)return!1;const m=u.filter(v=>!(v.command in Vn));if(m.length>0)throw new Error(`Unimplemented: ${m.map(v=>v.command).join(", ")}.`);return u.forEach(v=>{v.command!=="setTransition"&&this[v.command].apply(this,v.args)}),this.stylesheet=i,!0}addImage(i,u){if(this.getImage(i))return this.fire(new a.ErrorEvent(new Error(`An image named "${i}" already exists.`)));this.imageManager.addImage(i,u),this._afterImageUpdated(i)}updateImage(i,u){this.imageManager.updateImage(i,u)}getImage(i){return this.imageManager.getImage(i)}removeImage(i){if(!this.getImage(i))return this.fire(new a.ErrorEvent(new Error(`An image named "${i}" does not exist.`)));this.imageManager.removeImage(i),this._afterImageUpdated(i)}_afterImageUpdated(i){this._availableImages=this.imageManager.listImages(),this._changedImages[i]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(i,u,m={}){if(this._checkLoaded(),this.sourceCaches[i]!==void 0)throw new Error(`Source "${i}" already exists.`);if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(a.validateStyle.source,`sources.${i}`,u,null,m))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);const v=this.sourceCaches[i]=new Ge(i,u,this.dispatcher);v.style=this,v.setEventedParent(this,()=>({isSourceLoaded:this.loaded(),source:v.serialize(),sourceId:i})),v.onAdd(this.map),this._changed=!0}removeSource(i){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error("There is no source with this ID");for(const m in this._layers)if(this._layers[m].source===i)return this.fire(new a.ErrorEvent(new Error(`Source "${i}" cannot be removed while layer "${m}" is using it.`)));const u=this.sourceCaches[i];delete this.sourceCaches[i],delete this._updatedSources[i],u.fire(new a.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:i})),u.setEventedParent(null),u.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(i,u){if(this._checkLoaded(),this.sourceCaches[i]===void 0)throw new Error(`There is no source with this ID=${i}`);const m=this.sourceCaches[i].getSource();if(m.type!=="geojson")throw new Error(`geojsonSource.type is ${m.type}, which is !== 'geojson`);m.setData(u),this._changed=!0}getSource(i){return this.sourceCaches[i]&&this.sourceCaches[i].getSource()}addLayer(i,u,m={}){this._checkLoaded();const v=i.id;if(this.getLayer(v))return void this.fire(new a.ErrorEvent(new Error(`Layer "${v}" already exists on this map.`)));let S;if(i.type==="custom"){if(Pn(this,a.validateCustomStyleLayer(i)))return;S=a.createStyleLayer(i)}else{if(typeof i.source=="object"&&(this.addSource(v,i.source),i=a.clone$1(i),i=a.extend(i,{source:v})),this._validate(a.validateStyle.layer,`layers.${v}`,i,{arrayIndex:-1},m))return;S=a.createStyleLayer(i),this._validateLayer(S),S.setEventedParent(this,{layer:{id:v}}),this._serializedLayers[S.id]=S.serialize()}const M=u?this._order.indexOf(u):this._order.length;if(u&&M===-1)this.fire(new a.ErrorEvent(new Error(`Cannot add layer "${v}" before non-existing layer "${u}".`)));else{if(this._order.splice(M,0,v),this._layerOrderChanged=!0,this._layers[v]=S,this._removedLayers[v]&&S.source&&S.type!=="custom"){const H=this._removedLayers[v];delete this._removedLayers[v],H.type!==S.type?this._updatedSources[S.source]="clear":(this._updatedSources[S.source]="reload",this.sourceCaches[S.source].pause())}this._updateLayer(S),S.onAdd&&S.onAdd(this.map)}}moveLayer(i,u){if(this._checkLoaded(),this._changed=!0,!this._layers[i])return void this.fire(new a.ErrorEvent(new Error(`The layer '${i}' does not exist in the map's style and cannot be moved.`)));if(i===u)return;const m=this._order.indexOf(i);this._order.splice(m,1);const v=u?this._order.indexOf(u):this._order.length;u&&v===-1?this.fire(new a.ErrorEvent(new Error(`Cannot move layer "${i}" before non-existing layer "${u}".`))):(this._order.splice(v,0,i),this._layerOrderChanged=!0)}removeLayer(i){this._checkLoaded();const u=this._layers[i];if(!u)return void this.fire(new a.ErrorEvent(new Error(`Cannot remove non-existing layer "${i}".`)));u.setEventedParent(null);const m=this._order.indexOf(i);this._order.splice(m,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[i]=u,delete this._layers[i],delete this._serializedLayers[i],delete this._updatedLayers[i],delete this._updatedPaintProps[i],u.onRemove&&u.onRemove(this.map)}getLayer(i){return this._layers[i]}hasLayer(i){return i in this._layers}setLayerZoomRange(i,u,m){this._checkLoaded();const v=this.getLayer(i);v?v.minzoom===u&&v.maxzoom===m||(u!=null&&(v.minzoom=u),m!=null&&(v.maxzoom=m),this._updateLayer(v)):this.fire(new a.ErrorEvent(new Error(`Cannot set the zoom range of non-existing layer "${i}".`)))}setFilter(i,u,m={}){this._checkLoaded();const v=this.getLayer(i);if(v){if(!E(v.filter,u))return u==null?(v.filter=void 0,void this._updateLayer(v)):void(this._validate(a.validateStyle.filter,`layers.${v.id}.filter`,u,null,m)||(v.filter=a.clone$1(u),this._updateLayer(v)))}else this.fire(new a.ErrorEvent(new Error(`Cannot filter non-existing layer "${i}".`)))}getFilter(i){return a.clone$1(this.getLayer(i).filter)}setLayoutProperty(i,u,m,v={}){this._checkLoaded();const S=this.getLayer(i);S?E(S.getLayoutProperty(u),m)||(S.setLayoutProperty(u,m,v),this._updateLayer(S)):this.fire(new a.ErrorEvent(new Error(`Cannot style non-existing layer "${i}".`)))}getLayoutProperty(i,u){const m=this.getLayer(i);if(m)return m.getLayoutProperty(u);this.fire(new a.ErrorEvent(new Error(`Cannot get style of non-existing layer "${i}".`)))}setPaintProperty(i,u,m,v={}){this._checkLoaded();const S=this.getLayer(i);S?E(S.getPaintProperty(u),m)||(S.setPaintProperty(u,m,v)&&this._updateLayer(S),this._changed=!0,this._updatedPaintProps[i]=!0):this.fire(new a.ErrorEvent(new Error(`Cannot style non-existing layer "${i}".`)))}getPaintProperty(i,u){return this.getLayer(i).getPaintProperty(u)}setFeatureState(i,u){this._checkLoaded();const m=i.source,v=i.sourceLayer,S=this.sourceCaches[m];if(S===void 0)return void this.fire(new a.ErrorEvent(new Error(`The source '${m}' does not exist in the map's style.`)));const M=S.getSource().type;M==="geojson"&&v?this.fire(new a.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):M!=="vector"||v?(i.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),S.setFeatureState(v,i.id,u)):this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(i,u){this._checkLoaded();const m=i.source,v=this.sourceCaches[m];if(v===void 0)return void this.fire(new a.ErrorEvent(new Error(`The source '${m}' does not exist in the map's style.`)));const S=v.getSource().type,M=S==="vector"?i.sourceLayer:void 0;S!=="vector"||M?u&&typeof i.id!="string"&&typeof i.id!="number"?this.fire(new a.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):v.removeFeatureState(M,i.id,u):this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(i){this._checkLoaded();const u=i.source,m=i.sourceLayer,v=this.sourceCaches[u];if(v!==void 0)return v.getSource().type!=="vector"||m?(i.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),v.getFeatureState(m,i.id)):void this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.ErrorEvent(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return a.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){return a.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:a.mapObject(this.sourceCaches,i=>i.serialize()),layers:this._serializeLayers(this._order)},i=>i!==void 0)}_updateLayer(i){this._updatedLayers[i.id]=!0,i.source&&!this._updatedSources[i.source]&&this.sourceCaches[i.source].getSource().type!=="raster"&&(this._updatedSources[i.source]="reload",this.sourceCaches[i.source].pause()),this._changed=!0}_flattenAndSortRenderedFeatures(i){const u=M=>this._layers[M].type==="fill-extrusion",m={},v=[];for(let M=this._order.length-1;M>=0;M--){const H=this._order[M];if(u(H)){m[H]=M;for(const q of i){const J=q[H];if(J)for(const se of J)v.push(se)}}}v.sort((M,H)=>H.intersectionZ-M.intersectionZ);const S=[];for(let M=this._order.length-1;M>=0;M--){const H=this._order[M];if(u(H))for(let q=v.length-1;q>=0;q--){const J=v[q].feature;if(m[J.layer.id]<M)break;S.push(J),v.pop()}else for(const q of i){const J=q[H];if(J)for(const se of J)S.push(se.feature)}}return S}queryRenderedFeatures(i,u,m){u&&u.filter&&this._validate(a.validateStyle.filter,"queryRenderedFeatures.filter",u.filter,null,u);const v={};if(u&&u.layers){if(!Array.isArray(u.layers))return this.fire(new a.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const M of u.layers){const H=this._layers[M];if(!H)return this.fire(new a.ErrorEvent(new Error(`The layer '${M}' does not exist in the map's style and cannot be queried for features.`))),[];v[H.source]=!0}}const S=[];u.availableImages=this._availableImages;for(const M in this.sourceCaches)u.layers&&!v[M]||S.push(Qe(this.sourceCaches[M],this._layers,this._serializedLayers,i,u,m));return this.placement&&S.push(function(M,H,q,J,se,pe,we){const He={},Me=pe.queryRenderedSymbols(J),Re=[];for(const ct of Object.keys(Me).map(Number))Re.push(we[ct]);Re.sort(Ve);for(const ct of Re){const wt=ct.featureIndex.lookupSymbolFeatures(Me[ct.bucketInstanceId],H,ct.bucketIndex,ct.sourceLayerIndex,se.filter,se.layers,se.availableImages,M);for(const It in wt){const We=He[It]=He[It]||[],Rt=wt[It];Rt.sort((kt,Xt)=>{const Zt=ct.featureSortOrder;if(Zt){const ur=Zt.indexOf(kt.featureIndex);return Zt.indexOf(Xt.featureIndex)-ur}return Xt.featureIndex-kt.featureIndex});for(const kt of Rt)We.push(kt)}}for(const ct in He)He[ct].forEach(wt=>{const It=wt.feature,We=q[M[ct].source].getFeatureState(It.layer["source-layer"],It.id);It.source=It.layer.source,It.layer["source-layer"]&&(It.sourceLayer=It.layer["source-layer"]),It.state=We});return He}(this._layers,this._serializedLayers,this.sourceCaches,i,u,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(S)}querySourceFeatures(i,u){u&&u.filter&&this._validate(a.validateStyle.filter,"querySourceFeatures.filter",u.filter,null,u);const m=this.sourceCaches[i];return m?function(v,S){const M=v.getRenderableIds().map(J=>v.getTileByID(J)),H=[],q={};for(let J=0;J<M.length;J++){const se=M[J],pe=se.tileID.canonical.key;q[pe]||(q[pe]=!0,se.querySourceFeatures(H,S))}return H}(m,u):[]}addSourceType(i,u,m){return wi.getSourceType(i)?m(new Error(`A source type called "${i}" already exists.`)):(wi.setSourceType(i,u),u.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:i,url:u.workerSourceURL},m):m(null,null))}getLight(){return this.light.getLight()}setLight(i,u={}){this._checkLoaded();const m=this.light.getLight();let v=!1;for(const M in i)if(!E(i[M],m[M])){v=!0;break}if(!v)return;const S={now:a.exported.now(),transition:a.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(i,u),this.light.updateTransitions(S)}_validate(i,u,m,v,S={}){return(!S||S.validate!==!1)&&Pn(this,i.call(a.validateStyle,a.extend({key:u,style:this.serialize(),value:m,styleSpec:a.spec},v)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),a.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const i in this._layers)this._layers[i].setEventedParent(null);for(const i in this.sourceCaches){const u=this.sourceCaches[i];u.setEventedParent(null),u.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(i){this.sourceCaches[i].clearTiles()}_reloadSource(i){this.sourceCaches[i].resume(),this.sourceCaches[i].reload()}_updateSources(i){for(const u in this.sourceCaches)this.sourceCaches[u].update(i,this.terrain)}_generateCollisionBoxes(){for(const i in this.sourceCaches)this._reloadSource(i)}_updatePlacement(i,u,m,v,S=!1){let M=!1,H=!1;const q={};for(const J of this._order){const se=this._layers[J];if(se.type!=="symbol")continue;if(!q[se.source]){const we=this.sourceCaches[se.source];q[se.source]=we.getRenderableIds(!0).map(He=>we.getTileByID(He)).sort((He,Me)=>Me.tileID.overscaledZ-He.tileID.overscaledZ||(He.tileID.isLessThan(Me.tileID)?-1:1))}const pe=this.crossTileSymbolIndex.addLayer(se,q[se.source],i.center.lng);M=M||pe}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((S=S||this._layerOrderChanged||m===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(a.exported.now(),i.zoom))&&(this.pauseablePlacement=new Ht(i,this.terrain,this._order,S,u,m,v,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,q),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(a.exported.now()),H=!0),M&&this.pauseablePlacement.placement.setStale()),H||M)for(const J of this._order){const se=this._layers[J];se.type==="symbol"&&this.placement.updateLayerOpacities(se,q[se.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(a.exported.now())}_releaseSymbolFadeTiles(){for(const i in this.sourceCaches)this.sourceCaches[i].releaseSymbolFadeTiles()}getImages(i,u,m){this.imageManager.getImages(u.icons,m),this._updateTilesForChangedImages();const v=this.sourceCaches[u.source];v&&v.setDependencies(u.tileID.key,u.type,u.icons)}getGlyphs(i,u,m){this.glyphManager.getGlyphs(u.stacks,m)}getResource(i,u,m){return a.makeRequest(u,m)}}wi.getSourceType=function(g){return te[g]},wi.setSourceType=function(g,i){te[g]=i},wi.registerForPluginStateChange=a.registerForPluginStateChange;var Qs="attribute vec2 a_pos;uniform mat4 u_matrix;varying vec2 v_texture_pos;varying float v_depth;void main() {v_texture_pos=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);v_depth=gl_Position.z/gl_Position.w;}";const bi={prelude:Yn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_offset;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return (elevation+u_terrain_offset)*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Yn(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Yn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Yn(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Yn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Yn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),heatmapTexture:Yn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Yn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,get_elevation(a_pos),1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Yn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Yn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Yn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Yn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Yn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Yn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Yn(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Yn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float baseDelta=10.0;float ele=get_elevation(a_centroid);
#else
float baseDelta=0.0;float ele=0.0;
#endif
base=max(0.0,ele+base-baseDelta);height=max(0.0,ele+height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Yn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Yn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Yn(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Yn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Yn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Yn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Yn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Yn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),z,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Yn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Yn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,ele,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),ele,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,ele,1.0);float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),z,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Yn("uniform sampler2D u_texture;varying vec2 v_texture_pos;void main() {gl_FragColor=texture2D(u_texture,v_texture_pos);}",Qs),terrainDepth:Yn("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}",Qs),terrainCoords:Yn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}",Qs)};function Yn(g,i){const u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,m=i.match(/attribute ([\w]+) ([\w]+)/g),v=g.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),S=i.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),M=S?S.concat(v):v,H={};return{fragmentSource:g=g.replace(u,(q,J,se,pe,we)=>(H[we]=!0,J==="define"?`
#ifndef HAS_UNIFORM_u_${we}
varying ${se} ${pe} ${we};
#else
uniform ${se} ${pe} u_${we};
#endif
`:`
#ifdef HAS_UNIFORM_u_${we}
    ${se} ${pe} ${we} = u_${we};
#endif
`)),vertexSource:i=i.replace(u,(q,J,se,pe,we)=>{const He=pe==="float"?"vec2":"vec4",Me=we.match(/color/)?"color":He;return H[we]?J==="define"?`
#ifndef HAS_UNIFORM_u_${we}
uniform lowp float u_${we}_t;
attribute ${se} ${He} a_${we};
varying ${se} ${pe} ${we};
#else
uniform ${se} ${pe} u_${we};
#endif
`:Me==="vec4"?`
#ifndef HAS_UNIFORM_u_${we}
    ${we} = a_${we};
#else
    ${se} ${pe} ${we} = u_${we};
#endif
`:`
#ifndef HAS_UNIFORM_u_${we}
    ${we} = unpack_mix_${Me}(a_${we}, u_${we}_t);
#else
    ${se} ${pe} ${we} = u_${we};
#endif
`:J==="define"?`
#ifndef HAS_UNIFORM_u_${we}
uniform lowp float u_${we}_t;
attribute ${se} ${He} a_${we};
#else
uniform ${se} ${pe} u_${we};
#endif
`:Me==="vec4"?`
#ifndef HAS_UNIFORM_u_${we}
    ${se} ${pe} ${we} = a_${we};
#else
    ${se} ${pe} ${we} = u_${we};
#endif
`:`
#ifndef HAS_UNIFORM_u_${we}
    ${se} ${pe} ${we} = unpack_mix_${Me}(a_${we}, u_${we}_t);
#else
    ${se} ${pe} ${we} = u_${we};
#endif
`}),staticAttributes:m,staticUniforms:M}}class Ya{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(i,u,m,v,S,M,H,q,J){this.context=i;let se=this.boundPaintVertexBuffers.length!==v.length;for(let pe=0;!se&&pe<v.length;pe++)this.boundPaintVertexBuffers[pe]!==v[pe]&&(se=!0);i.extVertexArrayObject&&this.vao&&this.boundProgram===u&&this.boundLayoutVertexBuffer===m&&!se&&this.boundIndexBuffer===S&&this.boundVertexOffset===M&&this.boundDynamicVertexBuffer===H&&this.boundDynamicVertexBuffer2===q&&this.boundDynamicVertexBuffer3===J?(i.bindVertexArrayOES.set(this.vao),H&&H.bind(),S&&S.dynamicDraw&&S.bind(),q&&q.bind(),J&&J.bind()):this.freshBind(u,m,v,S,M,H,q,J)}freshBind(i,u,m,v,S,M,H,q){let J;const se=i.numAttributes,pe=this.context,we=pe.gl;if(pe.extVertexArrayObject)this.vao&&this.destroy(),this.vao=pe.extVertexArrayObject.createVertexArrayOES(),pe.bindVertexArrayOES.set(this.vao),J=0,this.boundProgram=i,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=m,this.boundIndexBuffer=v,this.boundVertexOffset=S,this.boundDynamicVertexBuffer=M,this.boundDynamicVertexBuffer2=H,this.boundDynamicVertexBuffer3=q;else{J=pe.currentNumAttributes||0;for(let He=se;He<J;He++)we.disableVertexAttribArray(He)}u.enableAttributes(we,i);for(const He of m)He.enableAttributes(we,i);M&&M.enableAttributes(we,i),H&&H.enableAttributes(we,i),q&&q.enableAttributes(we,i),u.bind(),u.setVertexAttribPointers(we,i,S);for(const He of m)He.bind(),He.setVertexAttribPointers(we,i,S);M&&(M.bind(),M.setVertexAttribPointers(we,i,S)),v&&v.bind(),H&&(H.bind(),H.setVertexAttribPointers(we,i,S)),q&&(q.bind(),q.setVertexAttribPointers(we,i,S)),pe.currentNumAttributes=se}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function Ks(g){const i=[];for(let u=0;u<g.length;u++){if(g[u]===null)continue;const m=g[u].split(" ");i.push(m.pop())}return i}class Gs{constructor(i,u,m,v,S,M,H){const q=i.gl;this.program=q.createProgram();const J=Ks(m.staticAttributes),se=v?v.getBinderAttributes():[],pe=J.concat(se),we=bi.prelude.staticUniforms?Ks(bi.prelude.staticUniforms):[],He=m.staticUniforms?Ks(m.staticUniforms):[],Me=v?v.getBinderUniforms():[],Re=we.concat(He).concat(Me),ct=[];for(const Zt of Re)ct.indexOf(Zt)<0&&ct.push(Zt);const wt=v?v.defines():[];M&&wt.push("#define OVERDRAW_INSPECTOR;"),H&&wt.push("#define TERRAIN3D;");const It=wt.concat(bi.prelude.fragmentSource,m.fragmentSource).join(`
`),We=wt.concat(bi.prelude.vertexSource,m.vertexSource).join(`
`),Rt=q.createShader(q.FRAGMENT_SHADER);if(q.isContextLost())return void(this.failedToCreate=!0);q.shaderSource(Rt,It),q.compileShader(Rt),q.attachShader(this.program,Rt);const kt=q.createShader(q.VERTEX_SHADER);if(q.isContextLost())return void(this.failedToCreate=!0);q.shaderSource(kt,We),q.compileShader(kt),q.attachShader(this.program,kt),this.attributes={};const Xt={};this.numAttributes=pe.length;for(let Zt=0;Zt<this.numAttributes;Zt++)pe[Zt]&&(q.bindAttribLocation(this.program,Zt,pe[Zt]),this.attributes[pe[Zt]]=Zt);q.linkProgram(this.program),q.deleteShader(kt),q.deleteShader(Rt);for(let Zt=0;Zt<ct.length;Zt++){const ur=ct[Zt];if(ur&&!Xt[ur]){const qt=q.getUniformLocation(this.program,ur);qt&&(Xt[ur]=qt)}}this.fixedUniforms=S(i,Xt),this.terrainUniforms=((Zt,ur)=>({u_depth:new a.Uniform1i(Zt,ur.u_depth),u_terrain:new a.Uniform1i(Zt,ur.u_terrain),u_terrain_dim:new a.Uniform1f(Zt,ur.u_terrain_dim),u_terrain_matrix:new a.UniformMatrix4f(Zt,ur.u_terrain_matrix),u_terrain_unpack:new a.Uniform4f(Zt,ur.u_terrain_unpack),u_terrain_offset:new a.Uniform1f(Zt,ur.u_terrain_offset),u_terrain_exaggeration:new a.Uniform1f(Zt,ur.u_terrain_exaggeration)}))(i,Xt),this.binderUniforms=v?v.getUniforms(i,Xt):[]}draw(i,u,m,v,S,M,H,q,J,se,pe,we,He,Me,Re,ct,wt,It){const We=i.gl;if(this.failedToCreate)return;if(i.program.set(this.program),i.setDepthMode(m),i.setStencilMode(v),i.setColorMode(S),i.setCullFace(M),q){i.activeTexture.set(We.TEXTURE2),We.bindTexture(We.TEXTURE_2D,q.depthTexture),i.activeTexture.set(We.TEXTURE3),We.bindTexture(We.TEXTURE_2D,q.texture);for(const kt in this.terrainUniforms)this.terrainUniforms[kt].set(q[kt])}for(const kt in this.fixedUniforms)this.fixedUniforms[kt].set(H[kt]);Re&&Re.setUniforms(i,this.binderUniforms,He,{zoom:Me});let Rt=0;switch(u){case We.LINES:Rt=2;break;case We.TRIANGLES:Rt=3;break;case We.LINE_STRIP:Rt=1}for(const kt of we.get()){const Xt=kt.vaos||(kt.vaos={});(Xt[J]||(Xt[J]=new Ya)).bind(i,this,se,Re?Re.getPaintVertexBuffers():[],pe,kt.vertexOffset,ct,wt,It),We.drawElements(u,kt.primitiveLength*Rt,We.UNSIGNED_SHORT,kt.primitiveOffset*Rt*2)}}}function ia(g,i,u){const m=1/hn(u,1,i.transform.tileZoom),v=Math.pow(2,u.tileID.overscaledZ),S=u.tileSize*Math.pow(2,i.transform.tileZoom)/v,M=S*(u.tileID.canonical.x+u.tileID.wrap*v),H=S*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[m,g.fromScale,g.toScale],u_fade:g.t,u_pixel_coord_upper:[M>>16,H>>16],u_pixel_coord_lower:[65535&M,65535&H]}}const gs=(g,i,u,m)=>{const v=i.style.light,S=v.properties.get("position"),M=[S.x,S.y,S.z],H=a.create$1();v.properties.get("anchor")==="viewport"&&a.fromRotation(H,-i.transform.angle),a.transformMat3(M,M,H);const q=v.properties.get("color");return{u_matrix:g,u_lightpos:M,u_lightintensity:v.properties.get("intensity"),u_lightcolor:[q.r,q.g,q.b],u_vertical_gradient:+u,u_opacity:m}},Ri=(g,i,u,m,v,S,M)=>a.extend(gs(g,i,u,m),ia(S,i,M),{u_height_factor:-Math.pow(2,v.overscaledZ)/M.tileSize/8}),Xi=g=>({u_matrix:g}),vo=(g,i,u,m)=>a.extend(Xi(g),ia(u,i,m)),nA=(g,i)=>({u_matrix:g,u_world:i}),EA=(g,i,u,m,v)=>a.extend(vo(g,i,u,m),{u_world:v}),sa=(g,i,u,m)=>{const v=g.transform;let S,M;if(m.paint.get("circle-pitch-alignment")==="map"){const H=hn(u,1,v.zoom);S=!0,M=[H,H]}else S=!1,M=v.pixelsToGLUnits;return{u_camera_to_center_distance:v.cameraToCenterDistance,u_scale_with_map:+(m.paint.get("circle-pitch-scale")==="map"),u_matrix:g.translatePosMatrix(i.posMatrix,u,m.paint.get("circle-translate"),m.paint.get("circle-translate-anchor")),u_pitch_with_map:+S,u_device_pixel_ratio:g.pixelRatio,u_extrude_scale:M}},bs=(g,i,u)=>{const m=hn(u,1,i.zoom),v=Math.pow(2,i.zoom-u.tileID.overscaledZ),S=u.tileID.overscaleFactor();return{u_matrix:g,u_camera_to_center_distance:i.cameraToCenterDistance,u_pixels_to_tile_units:m,u_extrude_scale:[i.pixelsToGLUnits[0]/(m*v),i.pixelsToGLUnits[1]/(m*v)],u_overscale_factor:S}},xs=(g,i,u=1)=>({u_matrix:g,u_color:i,u_overlay:0,u_overlay_scale:u}),$a=g=>({u_matrix:g}),aa=(g,i,u,m)=>({u_matrix:g,u_extrude_scale:hn(i,1,u),u_intensity:m});function Mo(g,i){const u=Math.pow(2,i.canonical.z),m=i.canonical.y;return[new a.MercatorCoordinate(0,m/u).toLngLat().lat,new a.MercatorCoordinate(0,(m+1)/u).toLngLat().lat]}const ka=(g,i,u,m)=>{const v=g.transform;return{u_matrix:Bs(g,i,u,m),u_ratio:1/hn(i,1,v.zoom),u_device_pixel_ratio:g.pixelRatio,u_units_to_pixels:[1/v.pixelsToGLUnits[0],1/v.pixelsToGLUnits[1]]}},Do=(g,i,u,m,v)=>a.extend(ka(g,i,u,v),{u_image:0,u_image_height:m}),oa=(g,i,u,m,v)=>{const S=g.transform,M=ii(i,S);return{u_matrix:Bs(g,i,u,v),u_texsize:i.imageAtlasTexture.size,u_ratio:1/hn(i,1,S.zoom),u_device_pixel_ratio:g.pixelRatio,u_image:0,u_scale:[M,m.fromScale,m.toScale],u_fade:m.t,u_units_to_pixels:[1/S.pixelsToGLUnits[0],1/S.pixelsToGLUnits[1]]}},qs=(g,i,u,m,v,S)=>{const M=g.lineAtlas,H=ii(i,g.transform),q=u.layout.get("line-cap")==="round",J=M.getDash(m.from,q),se=M.getDash(m.to,q),pe=J.width*v.fromScale,we=se.width*v.toScale;return a.extend(ka(g,i,u,S),{u_patternscale_a:[H/pe,-J.height/2],u_patternscale_b:[H/we,-se.height/2],u_sdfgamma:M.width/(256*Math.min(pe,we)*g.pixelRatio)/2,u_image:0,u_tex_y_a:J.y,u_tex_y_b:se.y,u_mix:v.t})};function ii(g,i){return 1/hn(g,1,i.tileZoom)}function Bs(g,i,u,m){return g.translatePosMatrix(m?m.posMatrix:i.tileID.posMatrix,i,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const ys=(g,i,u,m,v)=>{return{u_matrix:g,u_tl_parent:i,u_scale_parent:u,u_buffer_scale:1,u_fade_t:m.mix,u_opacity:m.opacity*v.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:v.paint.get("raster-brightness-min"),u_brightness_high:v.paint.get("raster-brightness-max"),u_saturation_factor:(M=v.paint.get("raster-saturation"),M>0?1-1/(1.001-M):-M),u_contrast_factor:(S=v.paint.get("raster-contrast"),S>0?1/(1-S):1+S),u_spin_weights:iA(v.paint.get("raster-hue-rotate"))};var S,M};function iA(g){g*=Math.PI/180;const i=Math.sin(g),u=Math.cos(g);return[(2*u+1)/3,(-Math.sqrt(3)*i-u+1)/3,(Math.sqrt(3)*i-u+1)/3]}const sA=(g,i,u,m,v,S,M,H,q,J)=>{const se=v.transform;return{u_is_size_zoom_constant:+(g==="constant"||g==="source"),u_is_size_feature_constant:+(g==="constant"||g==="camera"),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:se.cameraToCenterDistance,u_pitch:se.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:se.width/se.height,u_fade_change:v.options.fadeDuration?v.symbolFadeChange:1,u_matrix:S,u_label_plane_matrix:M,u_coord_matrix:H,u_is_text:+q,u_pitch_with_map:+m,u_texsize:J,u_texture:0}},Cn=(g,i,u,m,v,S,M,H,q,J,se)=>{const pe=v.transform;return a.extend(sA(g,i,u,m,v,S,M,H,q,J),{u_gamma_scale:m?Math.cos(pe._pitch)*pe.cameraToCenterDistance:1,u_device_pixel_ratio:v.pixelRatio,u_is_halo:+se})},GA=(g,i,u,m,v,S,M,H,q,J)=>a.extend(Cn(g,i,u,m,v,S,M,H,!0,q,!0),{u_texsize_icon:J,u_texture_icon:1}),pl=(g,i,u)=>({u_matrix:g,u_opacity:i,u_color:u}),Ma=(g,i,u,m,v,S)=>a.extend(function(M,H,q,J){const se=q.imageManager.getPattern(M.from.toString()),pe=q.imageManager.getPattern(M.to.toString()),{width:we,height:He}=q.imageManager.getPixelSize(),Me=Math.pow(2,J.tileID.overscaledZ),Re=J.tileSize*Math.pow(2,q.transform.tileZoom)/Me,ct=Re*(J.tileID.canonical.x+J.tileID.wrap*Me),wt=Re*J.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:se.tl,u_pattern_br_a:se.br,u_pattern_tl_b:pe.tl,u_pattern_br_b:pe.br,u_texsize:[we,He],u_mix:H.t,u_pattern_size_a:se.displaySize,u_pattern_size_b:pe.displaySize,u_scale_a:H.fromScale,u_scale_b:H.toScale,u_tile_units_to_pixels:1/hn(J,1,q.transform.tileZoom),u_pixel_coord_upper:[ct>>16,wt>>16],u_pixel_coord_lower:[65535&ct,65535&wt]}}(m,S,u,v),{u_matrix:g,u_opacity:i}),_o={fillExtrusion:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_lightpos:new a.Uniform3f(g,i.u_lightpos),u_lightintensity:new a.Uniform1f(g,i.u_lightintensity),u_lightcolor:new a.Uniform3f(g,i.u_lightcolor),u_vertical_gradient:new a.Uniform1f(g,i.u_vertical_gradient),u_opacity:new a.Uniform1f(g,i.u_opacity)}),fillExtrusionPattern:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_lightpos:new a.Uniform3f(g,i.u_lightpos),u_lightintensity:new a.Uniform1f(g,i.u_lightintensity),u_lightcolor:new a.Uniform3f(g,i.u_lightcolor),u_vertical_gradient:new a.Uniform1f(g,i.u_vertical_gradient),u_height_factor:new a.Uniform1f(g,i.u_height_factor),u_image:new a.Uniform1i(g,i.u_image),u_texsize:new a.Uniform2f(g,i.u_texsize),u_pixel_coord_upper:new a.Uniform2f(g,i.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(g,i.u_pixel_coord_lower),u_scale:new a.Uniform3f(g,i.u_scale),u_fade:new a.Uniform1f(g,i.u_fade),u_opacity:new a.Uniform1f(g,i.u_opacity)}),fill:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix)}),fillPattern:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_image:new a.Uniform1i(g,i.u_image),u_texsize:new a.Uniform2f(g,i.u_texsize),u_pixel_coord_upper:new a.Uniform2f(g,i.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(g,i.u_pixel_coord_lower),u_scale:new a.Uniform3f(g,i.u_scale),u_fade:new a.Uniform1f(g,i.u_fade)}),fillOutline:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_world:new a.Uniform2f(g,i.u_world)}),fillOutlinePattern:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_world:new a.Uniform2f(g,i.u_world),u_image:new a.Uniform1i(g,i.u_image),u_texsize:new a.Uniform2f(g,i.u_texsize),u_pixel_coord_upper:new a.Uniform2f(g,i.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(g,i.u_pixel_coord_lower),u_scale:new a.Uniform3f(g,i.u_scale),u_fade:new a.Uniform1f(g,i.u_fade)}),circle:(g,i)=>({u_camera_to_center_distance:new a.Uniform1f(g,i.u_camera_to_center_distance),u_scale_with_map:new a.Uniform1i(g,i.u_scale_with_map),u_pitch_with_map:new a.Uniform1i(g,i.u_pitch_with_map),u_extrude_scale:new a.Uniform2f(g,i.u_extrude_scale),u_device_pixel_ratio:new a.Uniform1f(g,i.u_device_pixel_ratio),u_matrix:new a.UniformMatrix4f(g,i.u_matrix)}),collisionBox:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_camera_to_center_distance:new a.Uniform1f(g,i.u_camera_to_center_distance),u_pixels_to_tile_units:new a.Uniform1f(g,i.u_pixels_to_tile_units),u_extrude_scale:new a.Uniform2f(g,i.u_extrude_scale),u_overscale_factor:new a.Uniform1f(g,i.u_overscale_factor)}),collisionCircle:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_inv_matrix:new a.UniformMatrix4f(g,i.u_inv_matrix),u_camera_to_center_distance:new a.Uniform1f(g,i.u_camera_to_center_distance),u_viewport_size:new a.Uniform2f(g,i.u_viewport_size)}),debug:(g,i)=>({u_color:new a.UniformColor(g,i.u_color),u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_overlay:new a.Uniform1i(g,i.u_overlay),u_overlay_scale:new a.Uniform1f(g,i.u_overlay_scale)}),clippingMask:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix)}),heatmap:(g,i)=>({u_extrude_scale:new a.Uniform1f(g,i.u_extrude_scale),u_intensity:new a.Uniform1f(g,i.u_intensity),u_matrix:new a.UniformMatrix4f(g,i.u_matrix)}),heatmapTexture:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_world:new a.Uniform2f(g,i.u_world),u_image:new a.Uniform1i(g,i.u_image),u_color_ramp:new a.Uniform1i(g,i.u_color_ramp),u_opacity:new a.Uniform1f(g,i.u_opacity)}),hillshade:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_image:new a.Uniform1i(g,i.u_image),u_latrange:new a.Uniform2f(g,i.u_latrange),u_light:new a.Uniform2f(g,i.u_light),u_shadow:new a.UniformColor(g,i.u_shadow),u_highlight:new a.UniformColor(g,i.u_highlight),u_accent:new a.UniformColor(g,i.u_accent)}),hillshadePrepare:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_image:new a.Uniform1i(g,i.u_image),u_dimension:new a.Uniform2f(g,i.u_dimension),u_zoom:new a.Uniform1f(g,i.u_zoom),u_unpack:new a.Uniform4f(g,i.u_unpack)}),line:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_ratio:new a.Uniform1f(g,i.u_ratio),u_device_pixel_ratio:new a.Uniform1f(g,i.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(g,i.u_units_to_pixels)}),lineGradient:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_ratio:new a.Uniform1f(g,i.u_ratio),u_device_pixel_ratio:new a.Uniform1f(g,i.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(g,i.u_units_to_pixels),u_image:new a.Uniform1i(g,i.u_image),u_image_height:new a.Uniform1f(g,i.u_image_height)}),linePattern:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_texsize:new a.Uniform2f(g,i.u_texsize),u_ratio:new a.Uniform1f(g,i.u_ratio),u_device_pixel_ratio:new a.Uniform1f(g,i.u_device_pixel_ratio),u_image:new a.Uniform1i(g,i.u_image),u_units_to_pixels:new a.Uniform2f(g,i.u_units_to_pixels),u_scale:new a.Uniform3f(g,i.u_scale),u_fade:new a.Uniform1f(g,i.u_fade)}),lineSDF:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_ratio:new a.Uniform1f(g,i.u_ratio),u_device_pixel_ratio:new a.Uniform1f(g,i.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(g,i.u_units_to_pixels),u_patternscale_a:new a.Uniform2f(g,i.u_patternscale_a),u_patternscale_b:new a.Uniform2f(g,i.u_patternscale_b),u_sdfgamma:new a.Uniform1f(g,i.u_sdfgamma),u_image:new a.Uniform1i(g,i.u_image),u_tex_y_a:new a.Uniform1f(g,i.u_tex_y_a),u_tex_y_b:new a.Uniform1f(g,i.u_tex_y_b),u_mix:new a.Uniform1f(g,i.u_mix)}),raster:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_tl_parent:new a.Uniform2f(g,i.u_tl_parent),u_scale_parent:new a.Uniform1f(g,i.u_scale_parent),u_buffer_scale:new a.Uniform1f(g,i.u_buffer_scale),u_fade_t:new a.Uniform1f(g,i.u_fade_t),u_opacity:new a.Uniform1f(g,i.u_opacity),u_image0:new a.Uniform1i(g,i.u_image0),u_image1:new a.Uniform1i(g,i.u_image1),u_brightness_low:new a.Uniform1f(g,i.u_brightness_low),u_brightness_high:new a.Uniform1f(g,i.u_brightness_high),u_saturation_factor:new a.Uniform1f(g,i.u_saturation_factor),u_contrast_factor:new a.Uniform1f(g,i.u_contrast_factor),u_spin_weights:new a.Uniform3f(g,i.u_spin_weights)}),symbolIcon:(g,i)=>({u_is_size_zoom_constant:new a.Uniform1i(g,i.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(g,i.u_is_size_feature_constant),u_size_t:new a.Uniform1f(g,i.u_size_t),u_size:new a.Uniform1f(g,i.u_size),u_camera_to_center_distance:new a.Uniform1f(g,i.u_camera_to_center_distance),u_pitch:new a.Uniform1f(g,i.u_pitch),u_rotate_symbol:new a.Uniform1i(g,i.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(g,i.u_aspect_ratio),u_fade_change:new a.Uniform1f(g,i.u_fade_change),u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(g,i.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(g,i.u_coord_matrix),u_is_text:new a.Uniform1i(g,i.u_is_text),u_pitch_with_map:new a.Uniform1i(g,i.u_pitch_with_map),u_texsize:new a.Uniform2f(g,i.u_texsize),u_texture:new a.Uniform1i(g,i.u_texture)}),symbolSDF:(g,i)=>({u_is_size_zoom_constant:new a.Uniform1i(g,i.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(g,i.u_is_size_feature_constant),u_size_t:new a.Uniform1f(g,i.u_size_t),u_size:new a.Uniform1f(g,i.u_size),u_camera_to_center_distance:new a.Uniform1f(g,i.u_camera_to_center_distance),u_pitch:new a.Uniform1f(g,i.u_pitch),u_rotate_symbol:new a.Uniform1i(g,i.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(g,i.u_aspect_ratio),u_fade_change:new a.Uniform1f(g,i.u_fade_change),u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(g,i.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(g,i.u_coord_matrix),u_is_text:new a.Uniform1i(g,i.u_is_text),u_pitch_with_map:new a.Uniform1i(g,i.u_pitch_with_map),u_texsize:new a.Uniform2f(g,i.u_texsize),u_texture:new a.Uniform1i(g,i.u_texture),u_gamma_scale:new a.Uniform1f(g,i.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(g,i.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(g,i.u_is_halo)}),symbolTextAndIcon:(g,i)=>({u_is_size_zoom_constant:new a.Uniform1i(g,i.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(g,i.u_is_size_feature_constant),u_size_t:new a.Uniform1f(g,i.u_size_t),u_size:new a.Uniform1f(g,i.u_size),u_camera_to_center_distance:new a.Uniform1f(g,i.u_camera_to_center_distance),u_pitch:new a.Uniform1f(g,i.u_pitch),u_rotate_symbol:new a.Uniform1i(g,i.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(g,i.u_aspect_ratio),u_fade_change:new a.Uniform1f(g,i.u_fade_change),u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(g,i.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(g,i.u_coord_matrix),u_is_text:new a.Uniform1i(g,i.u_is_text),u_pitch_with_map:new a.Uniform1i(g,i.u_pitch_with_map),u_texsize:new a.Uniform2f(g,i.u_texsize),u_texsize_icon:new a.Uniform2f(g,i.u_texsize_icon),u_texture:new a.Uniform1i(g,i.u_texture),u_texture_icon:new a.Uniform1i(g,i.u_texture_icon),u_gamma_scale:new a.Uniform1f(g,i.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(g,i.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(g,i.u_is_halo)}),background:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_opacity:new a.Uniform1f(g,i.u_opacity),u_color:new a.UniformColor(g,i.u_color)}),backgroundPattern:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_opacity:new a.Uniform1f(g,i.u_opacity),u_image:new a.Uniform1i(g,i.u_image),u_pattern_tl_a:new a.Uniform2f(g,i.u_pattern_tl_a),u_pattern_br_a:new a.Uniform2f(g,i.u_pattern_br_a),u_pattern_tl_b:new a.Uniform2f(g,i.u_pattern_tl_b),u_pattern_br_b:new a.Uniform2f(g,i.u_pattern_br_b),u_texsize:new a.Uniform2f(g,i.u_texsize),u_mix:new a.Uniform1f(g,i.u_mix),u_pattern_size_a:new a.Uniform2f(g,i.u_pattern_size_a),u_pattern_size_b:new a.Uniform2f(g,i.u_pattern_size_b),u_scale_a:new a.Uniform1f(g,i.u_scale_a),u_scale_b:new a.Uniform1f(g,i.u_scale_b),u_pixel_coord_upper:new a.Uniform2f(g,i.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(g,i.u_pixel_coord_lower),u_tile_units_to_pixels:new a.Uniform1f(g,i.u_tile_units_to_pixels)}),terrain:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_texture:new a.Uniform1i(g,i.u_texture)}),terrainDepth:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix)}),terrainCoords:(g,i)=>({u_matrix:new a.UniformMatrix4f(g,i.u_matrix),u_texture:new a.Uniform1i(g,i.u_texture),u_terrain_coords_id:new a.Uniform1f(g,i.u_terrain_coords_id)})};class aA{constructor(i,u,m){this.context=i;const v=i.gl;this.buffer=v.createBuffer(),this.dynamicDraw=Boolean(m),this.context.unbindVAO(),i.bindElementBuffer.set(this.buffer),v.bufferData(v.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(i){const u=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,i.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const wo={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class gt{constructor(i,u,m,v){this.length=u.length,this.attributes=m,this.itemSize=u.bytesPerElement,this.dynamicDraw=v,this.context=i;const S=i.gl;this.buffer=S.createBuffer(),i.bindVertexBuffer.set(this.buffer),S.bufferData(S.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?S.DYNAMIC_DRAW:S.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(i){if(i.length!==this.length)throw new Error(`Length of new data is ${i.length}, which doesn't match current length of ${this.length}`);const u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,i.arrayBuffer)}enableAttributes(i,u){for(let m=0;m<this.attributes.length;m++){const v=u.attributes[this.attributes[m].name];v!==void 0&&i.enableVertexAttribArray(v)}}setVertexAttribPointers(i,u,m){for(let v=0;v<this.attributes.length;v++){const S=this.attributes[v],M=u.attributes[S.name];M!==void 0&&i.vertexAttribPointer(M,S.components,i[wo[S.type]],!1,this.itemSize,S.offset+this.itemSize*(m||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Mn{constructor(i){this.gl=i.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(i){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Ds extends Mn{getDefault(){return a.Color.transparent}set(i){const u=this.current;(i.r!==u.r||i.g!==u.g||i.b!==u.b||i.a!==u.a||this.dirty)&&(this.gl.clearColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class Oi extends Mn{getDefault(){return 1}set(i){(i!==this.current||this.dirty)&&(this.gl.clearDepth(i),this.current=i,this.dirty=!1)}}class Ps extends Mn{getDefault(){return 0}set(i){(i!==this.current||this.dirty)&&(this.gl.clearStencil(i),this.current=i,this.dirty=!1)}}class ya extends Mn{getDefault(){return[!0,!0,!0,!0]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||i[3]!==u[3]||this.dirty)&&(this.gl.colorMask(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class eo extends Mn{getDefault(){return!0}set(i){(i!==this.current||this.dirty)&&(this.gl.depthMask(i),this.current=i,this.dirty=!1)}}class Cs extends Mn{getDefault(){return 255}set(i){(i!==this.current||this.dirty)&&(this.gl.stencilMask(i),this.current=i,this.dirty=!1)}}class Aa extends Mn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(i){const u=this.current;(i.func!==u.func||i.ref!==u.ref||i.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(i.func,i.ref,i.mask),this.current=i,this.dirty=!1)}}class to extends Mn{getDefault(){const i=this.gl;return[i.KEEP,i.KEEP,i.KEEP]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(i[0],i[1],i[2]),this.current=i,this.dirty=!1)}}class va extends Mn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=i,this.dirty=!1}}class qA extends Mn{getDefault(){return[0,1]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||this.dirty)&&(this.gl.depthRange(i[0],i[1]),this.current=i,this.dirty=!1)}}class ts extends Mn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=i,this.dirty=!1}}class FA extends Mn{getDefault(){return this.gl.LESS}set(i){(i!==this.current||this.dirty)&&(this.gl.depthFunc(i),this.current=i,this.dirty=!1)}}class ro extends Mn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.BLEND):u.disable(u.BLEND),this.current=i,this.dirty=!1}}class no extends Mn{getDefault(){const i=this.gl;return[i.ONE,i.ZERO]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(i[0],i[1]),this.current=i,this.dirty=!1)}}class io extends Mn{getDefault(){return a.Color.transparent}set(i){const u=this.current;(i.r!==u.r||i.g!==u.g||i.b!==u.b||i.a!==u.a||this.dirty)&&(this.gl.blendColor(i.r,i.g,i.b,i.a),this.current=i,this.dirty=!1)}}class ql extends Mn{getDefault(){return this.gl.FUNC_ADD}set(i){(i!==this.current||this.dirty)&&(this.gl.blendEquation(i),this.current=i,this.dirty=!1)}}class No extends Mn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;i?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=i,this.dirty=!1}}class vs extends Mn{getDefault(){return this.gl.BACK}set(i){(i!==this.current||this.dirty)&&(this.gl.cullFace(i),this.current=i,this.dirty=!1)}}class oA extends Mn{getDefault(){return this.gl.CCW}set(i){(i!==this.current||this.dirty)&&(this.gl.frontFace(i),this.current=i,this.dirty=!1)}}class AA extends Mn{getDefault(){return null}set(i){(i!==this.current||this.dirty)&&(this.gl.useProgram(i),this.current=i,this.dirty=!1)}}class _c extends Mn{getDefault(){return this.gl.TEXTURE0}set(i){(i!==this.current||this.dirty)&&(this.gl.activeTexture(i),this.current=i,this.dirty=!1)}}class _a extends Mn{getDefault(){const i=this.gl;return[0,0,i.drawingBufferWidth,i.drawingBufferHeight]}set(i){const u=this.current;(i[0]!==u[0]||i[1]!==u[1]||i[2]!==u[2]||i[3]!==u[3]||this.dirty)&&(this.gl.viewport(i[0],i[1],i[2],i[3]),this.current=i,this.dirty=!1)}}class WA extends Mn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,i),this.current=i,this.dirty=!1}}class SA extends Mn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class IA extends Mn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindTexture(u.TEXTURE_2D,i),this.current=i,this.dirty=!1}}class TA extends Mn{getDefault(){return null}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class lA extends Mn{getDefault(){return null}set(i){const u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,i),this.current=i,this.dirty=!1}}class UA extends Mn{constructor(i){super(i),this.vao=i.extVertexArrayObject}getDefault(){return null}set(i){this.vao&&(i!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(i),this.current=i,this.dirty=!1)}}class bo extends Mn{getDefault(){return 4}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,i),this.current=i,this.dirty=!1}}class ml extends Mn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i),this.current=i,this.dirty=!1}}class Wl extends Mn{getDefault(){return!1}set(i){if(i===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,i),this.current=i,this.dirty=!1}}class jo extends Mn{constructor(i,u){super(i),this.context=i,this.parent=u}getDefault(){return null}}class wa extends jo{setDirty(){this.dirty=!0}set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,i,0),this.current=i,this.dirty=!1}}class XA extends jo{set(i){if(i===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,i),this.current=i,this.dirty=!1}}class ba{constructor(i,u,m,v){this.context=i,this.width=u,this.height=m;const S=i.gl,M=this.framebuffer=S.createFramebuffer();if(this.colorAttachment=new wa(i,M),v&&(this.depthAttachment=new XA(i,M)),S.checkFramebufferStatus(S.FRAMEBUFFER)!==S.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const i=this.context.gl,u=this.colorAttachment.get();if(u&&i.deleteTexture(u),this.depthAttachment){const m=this.depthAttachment.get();m&&i.deleteRenderbuffer(m)}i.deleteFramebuffer(this.framebuffer)}}class xi{constructor(i,u,m){this.blendFunction=i,this.blendColor=u,this.mask=m}}xi.Replace=[1,0],xi.disabled=new xi(xi.Replace,a.Color.transparent,[!1,!1,!1,!1]),xi.unblended=new xi(xi.Replace,a.Color.transparent,[!0,!0,!0,!0]),xi.alphaBlended=new xi([1,771],a.Color.transparent,[!0,!0,!0,!0]);class N{constructor(i){this.gl=i,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Ds(this),this.clearDepth=new Oi(this),this.clearStencil=new Ps(this),this.colorMask=new ya(this),this.depthMask=new eo(this),this.stencilMask=new Cs(this),this.stencilFunc=new Aa(this),this.stencilOp=new to(this),this.stencilTest=new va(this),this.depthRange=new qA(this),this.depthTest=new ts(this),this.depthFunc=new FA(this),this.blend=new ro(this),this.blendFunc=new no(this),this.blendColor=new io(this),this.blendEquation=new ql(this),this.cullFace=new No(this),this.cullFaceSide=new vs(this),this.frontFace=new oA(this),this.program=new AA(this),this.activeTexture=new _c(this),this.viewport=new _a(this),this.bindFramebuffer=new WA(this),this.bindRenderbuffer=new SA(this),this.bindTexture=new IA(this),this.bindVertexBuffer=new TA(this),this.bindElementBuffer=new lA(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new UA(this),this.pixelStoreUnpack=new bo(this),this.pixelStoreUnpackPremultiplyAlpha=new ml(this),this.pixelStoreUnpackFlipY=new Wl(this),this.extTextureFilterAnisotropic=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=i.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=i.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(i.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=i.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=i.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(i,u){return new aA(this,i,u)}createVertexBuffer(i,u,m){return new gt(this,i,u,m)}createRenderbuffer(i,u,m){const v=this.gl,S=v.createRenderbuffer();return this.bindRenderbuffer.set(S),v.renderbufferStorage(v.RENDERBUFFER,i,u,m),this.bindRenderbuffer.set(null),S}createFramebuffer(i,u,m){return new ba(this,i,u,m)}clear({color:i,depth:u}){const m=this.gl;let v=0;i&&(v|=m.COLOR_BUFFER_BIT,this.clearColor.set(i),this.colorMask.set([!0,!0,!0,!0])),u!==void 0&&(v|=m.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),m.clear(v)}setCullFace(i){i.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(i.mode),this.frontFace.set(i.frontFace))}setDepthMode(i){i.func!==this.gl.ALWAYS||i.mask?(this.depthTest.set(!0),this.depthFunc.set(i.func),this.depthMask.set(i.mask),this.depthRange.set(i.range)):this.depthTest.set(!1)}setStencilMode(i){i.test.func!==this.gl.ALWAYS||i.mask?(this.stencilTest.set(!0),this.stencilMask.set(i.mask),this.stencilOp.set([i.fail,i.depthFail,i.pass]),this.stencilFunc.set({func:i.test.func,ref:i.ref,mask:i.test.mask})):this.stencilTest.set(!1)}setColorMode(i){E(i.blendFunction,xi.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(i.blendFunction),this.blendColor.set(i.blendColor)),this.colorMask.set(i.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class oe{constructor(i,u,m){this.func=i,this.mask=u,this.range=m}}oe.ReadOnly=!1,oe.ReadWrite=!0,oe.disabled=new oe(519,oe.ReadOnly,[0,1]);const ke=7680;class et{constructor(i,u,m,v,S,M){this.test=i,this.ref=u,this.mask=m,this.fail=v,this.depthFail=S,this.pass=M}}et.disabled=new et({func:519,mask:0},0,0,ke,ke,ke);class _t{constructor(i,u,m){this.enable=i,this.mode=u,this.frontFace=m}}let Jt;function _r(g,i,u,m,v,S,M){const H=g.context,q=H.gl,J=g.useProgram("collisionBox"),se=[];let pe=0,we=0;for(let We=0;We<m.length;We++){const Rt=m[We],kt=i.getTile(Rt),Xt=kt.getBucket(u);if(!Xt)continue;let Zt=Rt.posMatrix;v[0]===0&&v[1]===0||(Zt=g.translatePosMatrix(Rt.posMatrix,kt,v,S));const ur=M?Xt.textCollisionBox:Xt.iconCollisionBox,qt=Xt.collisionCircleArray;if(qt.length>0){const Rr=a.create(),Tr=Zt;a.mul(Rr,Xt.placementInvProjMatrix,g.transform.glCoordMatrix),a.mul(Rr,Rr,Xt.placementViewportMatrix),se.push({circleArray:qt,circleOffset:we,transform:Tr,invTransform:Rr,coord:Rt}),pe+=qt.length/4,we=pe}ur&&J.draw(H,q.LINES,oe.disabled,et.disabled,g.colorModeForRenderPass(),_t.disabled,bs(Zt,g.transform,kt),g.style.terrain&&g.style.terrain.getTerrainData(Rt),u.id,ur.layoutVertexBuffer,ur.indexBuffer,ur.segments,null,g.transform.zoom,null,null,ur.collisionVertexBuffer)}if(!M||!se.length)return;const He=g.useProgram("collisionCircle"),Me=new a.CollisionCircleLayoutArray;Me.resize(4*pe),Me._trim();let Re=0;for(const We of se)for(let Rt=0;Rt<We.circleArray.length/4;Rt++){const kt=4*Rt,Xt=We.circleArray[kt+0],Zt=We.circleArray[kt+1],ur=We.circleArray[kt+2],qt=We.circleArray[kt+3];Me.emplace(Re++,Xt,Zt,ur,qt,0),Me.emplace(Re++,Xt,Zt,ur,qt,1),Me.emplace(Re++,Xt,Zt,ur,qt,2),Me.emplace(Re++,Xt,Zt,ur,qt,3)}(!Jt||Jt.length<2*pe)&&(Jt=function(We){const Rt=2*We,kt=new a.QuadTriangleArray;kt.resize(Rt),kt._trim();for(let Xt=0;Xt<Rt;Xt++){const Zt=6*Xt;kt.uint16[Zt+0]=4*Xt+0,kt.uint16[Zt+1]=4*Xt+1,kt.uint16[Zt+2]=4*Xt+2,kt.uint16[Zt+3]=4*Xt+2,kt.uint16[Zt+4]=4*Xt+3,kt.uint16[Zt+5]=4*Xt+0}return kt}(pe));const ct=H.createIndexBuffer(Jt,!0),wt=H.createVertexBuffer(Me,a.collisionCircleLayout.members,!0);for(const We of se){const Rt={u_matrix:We.transform,u_inv_matrix:We.invTransform,u_camera_to_center_distance:(It=g.transform).cameraToCenterDistance,u_viewport_size:[It.width,It.height]};He.draw(H,q.TRIANGLES,oe.disabled,et.disabled,g.colorModeForRenderPass(),_t.disabled,Rt,g.style.terrain&&g.style.terrain.getTerrainData(We.coord),u.id,wt,ct,a.SegmentVector.simpleSegment(0,2*We.circleOffset,We.circleArray.length,We.circleArray.length/2),null,g.transform.zoom,null,null,null)}var It;wt.destroy(),ct.destroy()}_t.disabled=new _t(!1,1029,2305),_t.backCCW=new _t(!0,1029,2305);const en=a.identity(new Float32Array(16));function En(g,i,u,m,v,S){const{horizontalAlign:M,verticalAlign:H}=a.getAnchorAlignment(g),q=-(M-.5)*i,J=-(H-.5)*u,se=a.evaluateVariableOffset(g,m);return new a.pointGeometry((q/v+se[0])*S,(J/v+se[1])*S)}function Dn(g,i,u,m,v,S,M,H,q,J,se){const pe=g.text.placedSymbolArray,we=g.text.dynamicLayoutVertexArray,He=g.icon.dynamicLayoutVertexArray,Me={};we.clear();for(let Re=0;Re<pe.length;Re++){const ct=pe.get(Re),wt=g.allowVerticalPlacement&&!ct.placedOrientation,It=ct.hidden||!ct.crossTileID||wt?null:m[ct.crossTileID];if(It){const We=new a.pointGeometry(ct.anchorX,ct.anchorY),Rt=jt(We,u?M:S,se),kt=er(v.cameraToCenterDistance,Rt.signedDistanceFromCamera);let Xt=a.evaluateSizeForFeature(g.textSizeData,q,ct)*kt/a.ONE_EM;u&&(Xt*=g.tilePixelRatio/H);const{width:Zt,height:ur,anchor:qt,textOffset:Rr,textBoxScale:Tr}=It,qr=En(qt,Zt,ur,Rr,Tr,Xt),kn=u?jt(We.add(qr),S,se).point:Rt.point.add(i?qr.rotate(-v.angle):qr),jn=g.allowVerticalPlacement&&ct.placedOrientation===a.WritingMode.vertical?Math.PI/2:0;for(let b=0;b<ct.numGlyphs;b++)a.addDynamicAttributes(we,kn,jn);J&&ct.associatedIconIndex>=0&&(Me[ct.associatedIconIndex]={shiftedAnchor:kn,angle:jn})}else br(ct.numGlyphs,we)}if(J){He.clear();const Re=g.icon.placedSymbolArray;for(let ct=0;ct<Re.length;ct++){const wt=Re.get(ct);if(wt.hidden)br(wt.numGlyphs,He);else{const It=Me[ct];if(It)for(let We=0;We<wt.numGlyphs;We++)a.addDynamicAttributes(He,It.shiftedAnchor,It.angle);else br(wt.numGlyphs,He)}}g.icon.dynamicLayoutVertexBuffer.updateData(He)}g.text.dynamicLayoutVertexBuffer.updateData(we)}function Kn(g,i,u){return u.iconsInText&&i?"symbolTextAndIcon":g?"symbolSDF":"symbolIcon"}function Wn(g,i,u,m,v,S,M,H,q,J,se,pe){const we=g.context,He=we.gl,Me=g.transform,Re=H==="map",ct=q==="map",wt=H!=="viewport"&&u.layout.get("symbol-placement")!=="point",It=Re&&!ct&&!wt,We=!u.layout.get("symbol-sort-key").isConstant();let Rt=!1;const kt=g.depthModeForSublayer(0,oe.ReadOnly),Xt=u.layout.get("text-variable-anchor"),Zt=[];for(const ur of m){const qt=i.getTile(ur),Rr=qt.getBucket(u);if(!Rr)continue;const Tr=v?Rr.text:Rr.icon;if(!Tr||!Tr.segments.get().length)continue;const qr=Tr.programConfigurations.get(u.id),kn=v||Rr.sdfIcons,jn=v?Rr.textSizeData:Rr.iconSizeData,b=ct||Me.pitch!==0,L=g.useProgram(Kn(kn,v,Rr),qr),j=a.evaluateSizeForZoom(jn,Me.zoom),W=g.style.terrain&&g.style.terrain.getTerrainData(ur);let ae,de,me,be,Se=[0,0],De=null;if(v){if(de=qt.glyphAtlasTexture,me=He.LINEAR,ae=qt.glyphAtlasTexture.size,Rr.iconsInText){Se=qt.imageAtlasTexture.size,De=qt.imageAtlasTexture;const Dr=jn.kind==="composite"||jn.kind==="camera";be=b||g.options.rotating||g.options.zooming||Dr?He.LINEAR:He.NEAREST}}else{const Dr=u.layout.get("icon-size").constantOr(0)!==1||Rr.iconsNeedLinear;de=qt.imageAtlasTexture,me=kn||g.options.rotating||g.options.zooming||Dr||b?He.LINEAR:He.NEAREST,ae=qt.imageAtlasTexture.size}const ft=hn(qt,1,g.transform.zoom),Tt=bt(ur.posMatrix,ct,Re,g.transform,ft),Ft=Ct(ur.posMatrix,ct,Re,g.transform,ft),pt=Xt&&Rr.hasTextData(),Ar=u.layout.get("icon-text-fit")!=="none"&&pt&&Rr.hasIconData();if(wt){const Dr=g.style.terrain?(Fn,Nr)=>g.style.terrain.getElevation(ur,Fn,Nr):null,Lr=u.layout.get("text-rotation-alignment")==="map";Fr(Rr,ur.posMatrix,g,v,Tt,Ft,ct,J,Lr,Dr)}const Vt=g.translatePosMatrix(ur.posMatrix,qt,S,M),Je=wt||v&&Xt||Ar?en:Tt,ot=g.translatePosMatrix(Ft,qt,S,M,!0),Yt=kn&&u.paint.get(v?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let ir;ir=kn?Rr.iconsInText?GA(jn.kind,j,It,ct,g,Vt,Je,ot,ae,Se):Cn(jn.kind,j,It,ct,g,Vt,Je,ot,v,ae,!0):sA(jn.kind,j,It,ct,g,Vt,Je,ot,v,ae);const Wt={program:L,buffers:Tr,uniformValues:ir,atlasTexture:de,atlasTextureIcon:De,atlasInterpolation:me,atlasInterpolationIcon:be,isSDF:kn,hasHalo:Yt};if(We&&Rr.canOverlap){Rt=!0;const Dr=Tr.segments.get();for(const Lr of Dr)Zt.push({segments:new a.SegmentVector([Lr]),sortKey:Lr.sortKey,state:Wt,terrainData:W})}else Zt.push({segments:Tr.segments,sortKey:0,state:Wt,terrainData:W})}Rt&&Zt.sort((ur,qt)=>ur.sortKey-qt.sortKey);for(const ur of Zt){const qt=ur.state;if(we.activeTexture.set(He.TEXTURE0),qt.atlasTexture.bind(qt.atlasInterpolation,He.CLAMP_TO_EDGE),qt.atlasTextureIcon&&(we.activeTexture.set(He.TEXTURE1),qt.atlasTextureIcon&&qt.atlasTextureIcon.bind(qt.atlasInterpolationIcon,He.CLAMP_TO_EDGE)),qt.isSDF){const Rr=qt.uniformValues;qt.hasHalo&&(Rr.u_is_halo=1,pi(qt.buffers,ur.segments,u,g,qt.program,kt,se,pe,Rr,ur.terrainData)),Rr.u_is_halo=0}pi(qt.buffers,ur.segments,u,g,qt.program,kt,se,pe,qt.uniformValues,ur.terrainData)}}function pi(g,i,u,m,v,S,M,H,q,J){const se=m.context;v.draw(se,se.gl.TRIANGLES,S,M,H,_t.disabled,q,J,u.id,g.layoutVertexBuffer,g.indexBuffer,i,u.paint,m.transform.zoom,g.programConfigurations.get(u.id),g.dynamicLayoutVertexBuffer,g.opacityVertexBuffer)}function mi(g,i,u,m,v,S,M){const H=g.context.gl,q=u.paint.get("fill-pattern"),J=q&&q.constantOr(1),se=u.getCrossfadeParameters();let pe,we,He,Me,Re;M?(we=J&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",pe=H.LINES):(we=J?"fillPattern":"fill",pe=H.TRIANGLES);for(const ct of m){const wt=i.getTile(ct);if(J&&!wt.patternsLoaded())continue;const It=wt.getBucket(u);if(!It)continue;const We=It.programConfigurations.get(u.id),Rt=g.useProgram(we,We),kt=g.style.terrain&&g.style.terrain.getTerrainData(ct);J&&(g.context.activeTexture.set(H.TEXTURE0),wt.imageAtlasTexture.bind(H.LINEAR,H.CLAMP_TO_EDGE),We.updatePaintBuffers(se));const Xt=q.constantOr(null);if(Xt&&wt.imageAtlas){const qt=wt.imageAtlas,Rr=qt.patternPositions[Xt.to.toString()],Tr=qt.patternPositions[Xt.from.toString()];Rr&&Tr&&We.setConstantPatternPositions(Rr,Tr)}const Zt=kt?ct:null,ur=g.translatePosMatrix(Zt?Zt.posMatrix:ct.posMatrix,wt,u.paint.get("fill-translate"),u.paint.get("fill-translate-anchor"));if(M){Me=It.indexBuffer2,Re=It.segments2;const qt=[H.drawingBufferWidth,H.drawingBufferHeight];He=we==="fillOutlinePattern"&&J?EA(ur,g,se,wt,qt):nA(ur,qt)}else Me=It.indexBuffer,Re=It.segments,He=J?vo(ur,g,se,wt):Xi(ur);Rt.draw(g.context,pe,v,g.stencilModeForClipping(ct),S,_t.disabled,He,kt,u.id,It.layoutVertexBuffer,Me,Re,u.paint,g.transform.zoom,We)}}function Tn(g,i,u,m,v,S,M){const H=g.context,q=H.gl,J=u.paint.get("fill-extrusion-pattern"),se=J.constantOr(1),pe=u.getCrossfadeParameters(),we=u.paint.get("fill-extrusion-opacity");for(const He of m){const Me=i.getTile(He),Re=Me.getBucket(u);if(!Re)continue;const ct=g.style.terrain&&g.style.terrain.getTerrainData(He),wt=Re.programConfigurations.get(u.id),It=g.useProgram(se?"fillExtrusionPattern":"fillExtrusion",wt);se&&(g.context.activeTexture.set(q.TEXTURE0),Me.imageAtlasTexture.bind(q.LINEAR,q.CLAMP_TO_EDGE),wt.updatePaintBuffers(pe));const We=J.constantOr(null);if(We&&Me.imageAtlas){const Zt=Me.imageAtlas,ur=Zt.patternPositions[We.to.toString()],qt=Zt.patternPositions[We.from.toString()];ur&&qt&&wt.setConstantPatternPositions(ur,qt)}const Rt=g.translatePosMatrix(He.posMatrix,Me,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),kt=u.paint.get("fill-extrusion-vertical-gradient"),Xt=se?Ri(Rt,g,kt,we,He,pe,Me):gs(Rt,g,kt,we);It.draw(H,H.gl.TRIANGLES,v,S,M,_t.backCCW,Xt,ct,u.id,Re.layoutVertexBuffer,Re.indexBuffer,Re.segments,u.paint,g.transform.zoom,wt,g.style.terrain&&Re.centroidVertexBuffer)}}function Es(g,i,u,m,v,S,M){const H=g.context,q=H.gl,J=u.fbo;if(!J)return;const se=g.useProgram("hillshade"),pe=g.style.terrain&&g.style.terrain.getTerrainData(i);H.activeTexture.set(q.TEXTURE0),q.bindTexture(q.TEXTURE_2D,J.colorAttachment.get()),se.draw(H,q.TRIANGLES,v,S,M,_t.disabled,((we,He,Me,Re)=>{const ct=Me.paint.get("hillshade-shadow-color"),wt=Me.paint.get("hillshade-highlight-color"),It=Me.paint.get("hillshade-accent-color");let We=Me.paint.get("hillshade-illumination-direction")*(Math.PI/180);Me.paint.get("hillshade-illumination-anchor")==="viewport"&&(We-=we.transform.angle);const Rt=!we.options.moving;return{u_matrix:Re?Re.posMatrix:we.transform.calculatePosMatrix(He.tileID.toUnwrapped(),Rt),u_image:0,u_latrange:Mo(0,He.tileID),u_light:[Me.paint.get("hillshade-exaggeration"),We],u_shadow:ct,u_highlight:wt,u_accent:It}})(g,u,m,pe?i:null),pe,m.id,g.rasterBoundsBuffer,g.quadTriangleIndexBuffer,g.rasterBoundsSegments)}function rs(g,i,u,m,v,S){const M=g.context,H=M.gl,q=i.dem;if(q&&q.data){const J=q.dim,se=q.stride,pe=q.getPixels();if(M.activeTexture.set(H.TEXTURE1),M.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||g.getTileTexture(se),i.demTexture){const He=i.demTexture;He.update(pe,{premultiply:!1}),He.bind(H.NEAREST,H.CLAMP_TO_EDGE)}else i.demTexture=new P(M,pe,H.RGBA,{premultiply:!1}),i.demTexture.bind(H.NEAREST,H.CLAMP_TO_EDGE);M.activeTexture.set(H.TEXTURE0);let we=i.fbo;if(!we){const He=new P(M,{width:J,height:J,data:null},H.RGBA);He.bind(H.LINEAR,H.CLAMP_TO_EDGE),we=i.fbo=M.createFramebuffer(J,J,!0),we.colorAttachment.set(He.texture)}M.bindFramebuffer.set(we.framebuffer),M.viewport.set([0,0,J,J]),g.useProgram("hillshadePrepare").draw(M,H.TRIANGLES,m,v,S,_t.disabled,((He,Me)=>{const Re=Me.stride,ct=a.create();return a.ortho(ct,0,a.EXTENT,-a.EXTENT,0,0,1),a.translate(ct,ct,[0,-a.EXTENT,0]),{u_matrix:ct,u_image:1,u_dimension:[Re,Re],u_zoom:He.overscaledZ,u_unpack:Me.getUnpackVector()}})(i.tileID,q),null,u.id,g.rasterBoundsBuffer,g.quadTriangleIndexBuffer,g.rasterBoundsSegments),i.needsHillshadePrepare=!1}}function Ws(g,i,u,m,v,S){const M=m.paint.get("raster-fade-duration");if(!S&&M>0){const H=a.exported.now(),q=(H-g.timeAdded)/M,J=i?(H-i.timeAdded)/M:-1,se=u.getSource(),pe=v.coveringZoomLevel({tileSize:se.tileSize,roundZoom:se.roundZoom}),we=!i||Math.abs(i.tileID.overscaledZ-pe)>Math.abs(g.tileID.overscaledZ-pe),He=we&&g.refreshedUponExpiration?1:a.clamp(we?q:1-J,0,1);return g.refreshedUponExpiration&&q>=1&&(g.refreshedUponExpiration=!1),i?{opacity:1,mix:1-He}:{opacity:He,mix:0}}return{opacity:1,mix:0}}const ns=new a.Color(1,0,0,1),Si=new a.Color(0,1,0,1),gl=new a.Color(0,0,1,1),la=new a.Color(1,0,1,1),ki=new a.Color(0,1,1,1);function xa(g,i,u,m){Da(g,0,i+u/2,g.transform.width,u,m)}function Mi(g,i,u,m){Da(g,i-u/2,0,u,g.transform.height,m)}function Da(g,i,u,m,v,S){const M=g.context,H=M.gl;H.enable(H.SCISSOR_TEST),H.scissor(i*g.pixelRatio,u*g.pixelRatio,m*g.pixelRatio,v*g.pixelRatio),M.clear({color:S}),H.disable(H.SCISSOR_TEST)}function Ba(g,i,u){const m=g.context,v=m.gl,S=u.posMatrix,M=g.useProgram("debug"),H=oe.disabled,q=et.disabled,J=g.colorModeForRenderPass(),se="$debug",pe=g.style.terrain&&g.style.terrain.getTerrainData(u);m.activeTexture.set(v.TEXTURE0),g.emptyTexture.bind(v.LINEAR,v.CLAMP_TO_EDGE);const we=i.getTileByID(u.key).latestRawTileData,He=Math.floor((we&&we.byteLength||0)/1024),Me=i.getTile(u).tileSize,Re=512/Math.min(Me,512)*(u.overscaledZ/g.transform.zoom)*.5;let ct=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(ct+=` => ${u.overscaledZ}`),function(wt,It){wt.initDebugOverlayCanvas();const We=wt.debugOverlayCanvas,Rt=wt.context.gl,kt=wt.debugOverlayCanvas.getContext("2d");kt.clearRect(0,0,We.width,We.height),kt.shadowColor="white",kt.shadowBlur=2,kt.lineWidth=1.5,kt.strokeStyle="white",kt.textBaseline="top",kt.font="bold 36px Open Sans, sans-serif",kt.fillText(It,5,5),kt.strokeText(It,5,5),wt.debugOverlayTexture.update(We),wt.debugOverlayTexture.bind(Rt.LINEAR,Rt.CLAMP_TO_EDGE)}(g,`${ct} ${He}kB`),M.draw(m,v.TRIANGLES,H,q,xi.alphaBlended,_t.disabled,xs(S,a.Color.transparent,Re),null,se,g.debugBuffer,g.quadTriangleIndexBuffer,g.debugSegments),M.draw(m,v.LINE_STRIP,H,q,J,_t.disabled,xs(S,a.Color.red),pe,se,g.debugBuffer,g.tileBorderIndexBuffer,g.debugSegments)}function is(g,i,u){const m=g.context,v=m.gl,S=g.colorModeForRenderPass(),M=new oe(v.LEQUAL,oe.ReadWrite,g.depthRangeFor3D),H=g.useProgram("terrain"),q=i.getTerrainMesh(),J=i.getTerrainData(u.tileID);m.bindFramebuffer.set(null),m.viewport.set([0,0,g.width,g.height]),m.activeTexture.set(v.TEXTURE0),v.bindTexture(v.TEXTURE_2D,i.getRTTFramebuffer().colorAttachment.get());const se=g.transform.calculatePosMatrix(u.tileID.toUnwrapped());H.draw(m,v.TRIANGLES,M,et.disabled,S,_t.backCCW,{u_matrix:se,u_texture:0},J,"terrain",q.vertexBuffer,q.indexBuffer,q.segments)}function hi(g,i,u,m){const v=g.context,S=u.tileSize*i.qualityFactor;u.textures[m]||(u.textures[m]=g.getTileTexture(S)||new P(v,{width:S,height:S,data:null},v.gl.RGBA),u.textures[m].bind(v.gl.LINEAR,v.gl.CLAMP_TO_EDGE),m===0&&i.sourceCache.renderHistory.unshift(u.tileID.key));const M=i.getRTTFramebuffer();M.colorAttachment.set(u.textures[m].texture),v.bindFramebuffer.set(M.framebuffer),v.viewport.set([0,0,S,S])}class cA{constructor(i){this._coordsDescendingInv={},this._coordsDescendingInvStr={},this.painter=i,this._renderToTexture={background:!0,fill:!0,line:!0,raster:!0},this._coordsDescendingInv={},this._coordsDescendingInvStr={},this._stacks=[],this._prevType=null,this._rerender={},this._renderableTiles=i.style.terrain.sourceCache.getRenderableTiles(),this._init()}_init(){const i=this.painter.style,u=i.terrain;for(const m in i.sourceCaches){this._coordsDescendingInv[m]={};const v=i.sourceCaches[m].getVisibleCoordinates();for(const S of v){const M=u.sourceCache.getTerrainCoords(S);for(const H in M)this._coordsDescendingInv[m][H]||(this._coordsDescendingInv[m][H]=[]),this._coordsDescendingInv[m][H].push(M[H])}}for(const m of i._order){const v=i._layers[m],S=v.source;if(this._renderToTexture[v.type]&&!this._coordsDescendingInvStr[S]){this._coordsDescendingInvStr[S]={};for(const M in this._coordsDescendingInv[S])this._coordsDescendingInvStr[S][M]=this._coordsDescendingInv[S][M].map(H=>H.key).sort().join()}}return this._renderableTiles.forEach(m=>{for(const v in this._coordsDescendingInvStr){const S=this._coordsDescendingInvStr[v][m.tileID.key];S&&S!==m.textureCoords[v]&&m.clearTextures(this.painter),u.needsRerender(v,m.tileID)&&m.clearTextures(this.painter)}this._rerender[m.tileID.key]=!m.textures.length}),u.clearRerenderCache(),u.sourceCache.removeOutdated(this.painter),this}renderLayer(i){const u=i.type,m=this.painter,v=m.style._order,S=m.currentLayer,M=S+1===v.length;if(this._renderToTexture[u]&&(this._prevType&&this._renderToTexture[this._prevType]||this._stacks.push([]),this._prevType=u,this._stacks[this._stacks.length-1].push(v[S]),!M))return!0;if(this._renderToTexture[this._prevType]||u==="hillshade"||this._renderToTexture[u]&&M){this._prevType=u;const H=this._stacks.length-1,q=this._stacks[H]||[];for(const J of this._renderableTiles){if(hi(m,m.style.terrain,J,H),this._rerender[J.tileID.key]){m.context.clear({color:a.Color.transparent});for(let se=0;se<q.length;se++){const pe=m.style._layers[q[se]],we=pe.source?this._coordsDescendingInv[pe.source][J.tileID.key]:[J.tileID];m._renderTileClippingMasks(pe,we),m.renderLayer(m,m.style.sourceCaches[pe.source],pe,we),pe.source&&(J.textureCoords[pe.source]=this._coordsDescendingInvStr[pe.source][J.tileID.key])}}is(m,m.style.terrain,J)}if(u==="hillshade"){this._stacks.push([v[S]]);for(const J of this._renderableTiles){const se=this._coordsDescendingInv[i.source][J.tileID.key];hi(m,m.style.terrain,J,this._stacks.length-1),m.context.clear({color:a.Color.transparent}),m._renderTileClippingMasks(i,se),m.renderLayer(m,m.style.sourceCaches[i.source],i,se),is(m,m.style.terrain,J)}return!0}return this._renderToTexture[u]}return!1}}const so={symbol:function(g,i,u,m,v){if(g.renderPass!=="translucent")return;const S=et.disabled,M=g.colorModeForRenderPass();u.layout.get("text-variable-anchor")&&function(H,q,J,se,pe,we,He){const Me=q.transform,Re=pe==="map",ct=we==="map";for(const wt of H){const It=se.getTile(wt),We=It.getBucket(J);if(!We||!We.text||!We.text.segments.get().length)continue;const Rt=a.evaluateSizeForZoom(We.textSizeData,Me.zoom),kt=hn(It,1,q.transform.zoom),Xt=bt(wt.posMatrix,ct,Re,q.transform,kt),Zt=J.layout.get("icon-text-fit")!=="none"&&We.hasIconData();if(Rt){const ur=Math.pow(2,Me.zoom-It.tileID.overscaledZ);Dn(We,Re,ct,He,Me,Xt,wt.posMatrix,ur,Rt,Zt,q.style.terrain?(qt,Rr)=>q.style.terrain.getElevation(wt,qt,Rr):null)}}}(m,g,u,i,u.layout.get("text-rotation-alignment"),u.layout.get("text-pitch-alignment"),v),u.paint.get("icon-opacity").constantOr(1)!==0&&Wn(g,i,u,m,!1,u.paint.get("icon-translate"),u.paint.get("icon-translate-anchor"),u.layout.get("icon-rotation-alignment"),u.layout.get("icon-pitch-alignment"),u.layout.get("icon-keep-upright"),S,M),u.paint.get("text-opacity").constantOr(1)!==0&&Wn(g,i,u,m,!0,u.paint.get("text-translate"),u.paint.get("text-translate-anchor"),u.layout.get("text-rotation-alignment"),u.layout.get("text-pitch-alignment"),u.layout.get("text-keep-upright"),S,M),i.map.showCollisionBoxes&&(_r(g,i,u,m,u.paint.get("text-translate"),u.paint.get("text-translate-anchor"),!0),_r(g,i,u,m,u.paint.get("icon-translate"),u.paint.get("icon-translate-anchor"),!1))},circle:function(g,i,u,m){if(g.renderPass!=="translucent")return;const v=u.paint.get("circle-opacity"),S=u.paint.get("circle-stroke-width"),M=u.paint.get("circle-stroke-opacity"),H=!u.layout.get("circle-sort-key").isConstant();if(v.constantOr(1)===0&&(S.constantOr(1)===0||M.constantOr(1)===0))return;const q=g.context,J=q.gl,se=g.depthModeForSublayer(0,oe.ReadOnly),pe=et.disabled,we=g.colorModeForRenderPass(),He=[];for(let Me=0;Me<m.length;Me++){const Re=m[Me],ct=i.getTile(Re),wt=ct.getBucket(u);if(!wt)continue;const It=wt.programConfigurations.get(u.id),We=g.useProgram("circle",It),Rt=wt.layoutVertexBuffer,kt=wt.indexBuffer,Xt=g.style.terrain&&g.style.terrain.getTerrainData(Re),Zt={programConfiguration:It,program:We,layoutVertexBuffer:Rt,indexBuffer:kt,uniformValues:sa(g,Re,ct,u),terrainData:Xt};if(H){const ur=wt.segments.get();for(const qt of ur)He.push({segments:new a.SegmentVector([qt]),sortKey:qt.sortKey,state:Zt})}else He.push({segments:wt.segments,sortKey:0,state:Zt})}H&&He.sort((Me,Re)=>Me.sortKey-Re.sortKey);for(const Me of He){const{programConfiguration:Re,program:ct,layoutVertexBuffer:wt,indexBuffer:It,uniformValues:We,terrainData:Rt}=Me.state;ct.draw(q,J.TRIANGLES,se,pe,we,_t.disabled,We,Rt,u.id,wt,It,Me.segments,u.paint,g.transform.zoom,Re)}},heatmap:function(g,i,u,m){if(u.paint.get("heatmap-opacity")!==0)if(g.renderPass==="offscreen"){const v=g.context,S=v.gl,M=et.disabled,H=new xi([S.ONE,S.ONE],a.Color.transparent,[!0,!0,!0,!0]);(function(q,J,se){const pe=q.gl;q.activeTexture.set(pe.TEXTURE1),q.viewport.set([0,0,J.width/4,J.height/4]);let we=se.heatmapFbo;if(we)pe.bindTexture(pe.TEXTURE_2D,we.colorAttachment.get()),q.bindFramebuffer.set(we.framebuffer);else{const He=pe.createTexture();pe.bindTexture(pe.TEXTURE_2D,He),pe.texParameteri(pe.TEXTURE_2D,pe.TEXTURE_WRAP_S,pe.CLAMP_TO_EDGE),pe.texParameteri(pe.TEXTURE_2D,pe.TEXTURE_WRAP_T,pe.CLAMP_TO_EDGE),pe.texParameteri(pe.TEXTURE_2D,pe.TEXTURE_MIN_FILTER,pe.LINEAR),pe.texParameteri(pe.TEXTURE_2D,pe.TEXTURE_MAG_FILTER,pe.LINEAR),we=se.heatmapFbo=q.createFramebuffer(J.width/4,J.height/4,!1),function(Me,Re,ct,wt){const It=Me.gl;It.texImage2D(It.TEXTURE_2D,0,It.RGBA,Re.width/4,Re.height/4,0,It.RGBA,Me.extRenderToTextureHalfFloat?Me.extTextureHalfFloat.HALF_FLOAT_OES:It.UNSIGNED_BYTE,null),wt.colorAttachment.set(ct)}(q,J,He,we)}})(v,g,u),v.clear({color:a.Color.transparent});for(let q=0;q<m.length;q++){const J=m[q];if(i.hasRenderableParent(J))continue;const se=i.getTile(J),pe=se.getBucket(u);if(!pe)continue;const we=pe.programConfigurations.get(u.id),He=g.useProgram("heatmap",we),{zoom:Me}=g.transform;He.draw(v,S.TRIANGLES,oe.disabled,M,H,_t.disabled,aa(J.posMatrix,se,Me,u.paint.get("heatmap-intensity")),null,u.id,pe.layoutVertexBuffer,pe.indexBuffer,pe.segments,u.paint,g.transform.zoom,we)}v.viewport.set([0,0,g.width,g.height])}else g.renderPass==="translucent"&&(g.context.setColorMode(g.colorModeForRenderPass()),function(v,S){const M=v.context,H=M.gl,q=S.heatmapFbo;if(!q)return;M.activeTexture.set(H.TEXTURE0),H.bindTexture(H.TEXTURE_2D,q.colorAttachment.get()),M.activeTexture.set(H.TEXTURE1);let J=S.colorRampTexture;J||(J=S.colorRampTexture=new P(M,S.colorRamp,H.RGBA)),J.bind(H.LINEAR,H.CLAMP_TO_EDGE),v.useProgram("heatmapTexture").draw(M,H.TRIANGLES,oe.disabled,et.disabled,v.colorModeForRenderPass(),_t.disabled,((se,pe,we,He)=>{const Me=a.create();a.ortho(Me,0,se.width,se.height,0,0,1);const Re=se.context.gl;return{u_matrix:Me,u_world:[Re.drawingBufferWidth,Re.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:pe.paint.get("heatmap-opacity")}})(v,S),null,S.id,v.viewportBuffer,v.quadTriangleIndexBuffer,v.viewportSegments,S.paint,v.transform.zoom)}(g,u))},line:function(g,i,u,m){if(g.renderPass!=="translucent")return;const v=u.paint.get("line-opacity"),S=u.paint.get("line-width");if(v.constantOr(1)===0||S.constantOr(1)===0)return;const M=g.depthModeForSublayer(0,oe.ReadOnly),H=g.colorModeForRenderPass(),q=u.paint.get("line-dasharray"),J=u.paint.get("line-pattern"),se=J.constantOr(1),pe=u.paint.get("line-gradient"),we=u.getCrossfadeParameters(),He=se?"linePattern":q?"lineSDF":pe?"lineGradient":"line",Me=g.context,Re=Me.gl;let ct=!0;for(const wt of m){const It=i.getTile(wt);if(se&&!It.patternsLoaded())continue;const We=It.getBucket(u);if(!We)continue;const Rt=We.programConfigurations.get(u.id),kt=g.context.program.get(),Xt=g.useProgram(He,Rt),Zt=ct||Xt.program!==kt,ur=g.style.terrain&&g.style.terrain.getTerrainData(wt),qt=J.constantOr(null);if(qt&&It.imageAtlas){const qr=It.imageAtlas,kn=qr.patternPositions[qt.to.toString()],jn=qr.patternPositions[qt.from.toString()];kn&&jn&&Rt.setConstantPatternPositions(kn,jn)}const Rr=ur?wt:null,Tr=se?oa(g,It,u,we,Rr):q?qs(g,It,u,q,we,Rr):pe?Do(g,It,u,We.lineClipsArray.length,Rr):ka(g,It,u,Rr);if(se)Me.activeTexture.set(Re.TEXTURE0),It.imageAtlasTexture.bind(Re.LINEAR,Re.CLAMP_TO_EDGE),Rt.updatePaintBuffers(we);else if(q&&(Zt||g.lineAtlas.dirty))Me.activeTexture.set(Re.TEXTURE0),g.lineAtlas.bind(Me);else if(pe){const qr=We.gradients[u.id];let kn=qr.texture;if(u.gradientVersion!==qr.version){let jn=256;if(u.stepInterpolant){const b=i.getSource().maxzoom,L=wt.canonical.z===b?Math.ceil(1<<g.transform.maxZoom-wt.canonical.z):1;jn=a.clamp(a.nextPowerOfTwo(We.maxLineLength/a.EXTENT*1024*L),256,Me.maxTextureSize)}qr.gradient=a.renderColorRamp({expression:u.gradientExpression(),evaluationKey:"lineProgress",resolution:jn,image:qr.gradient||void 0,clips:We.lineClipsArray}),qr.texture?qr.texture.update(qr.gradient):qr.texture=new P(Me,qr.gradient,Re.RGBA),qr.version=u.gradientVersion,kn=qr.texture}Me.activeTexture.set(Re.TEXTURE0),kn.bind(u.stepInterpolant?Re.NEAREST:Re.LINEAR,Re.CLAMP_TO_EDGE)}Xt.draw(Me,Re.TRIANGLES,M,g.stencilModeForClipping(wt),H,_t.disabled,Tr,ur,u.id,We.layoutVertexBuffer,We.indexBuffer,We.segments,u.paint,g.transform.zoom,Rt,We.layoutVertexBuffer2),ct=!1}},fill:function(g,i,u,m){const v=u.paint.get("fill-color"),S=u.paint.get("fill-opacity");if(S.constantOr(1)===0)return;const M=g.colorModeForRenderPass(),H=u.paint.get("fill-pattern"),q=g.opaquePassEnabledForLayer()&&!H.constantOr(1)&&v.constantOr(a.Color.transparent).a===1&&S.constantOr(0)===1?"opaque":"translucent";if(g.renderPass===q){const J=g.depthModeForSublayer(1,g.renderPass==="opaque"?oe.ReadWrite:oe.ReadOnly);mi(g,i,u,m,J,M,!1)}if(g.renderPass==="translucent"&&u.paint.get("fill-antialias")){const J=g.depthModeForSublayer(u.getPaintProperty("fill-outline-color")?2:0,oe.ReadOnly);mi(g,i,u,m,J,M,!0)}},"fill-extrusion":function(g,i,u,m){const v=u.paint.get("fill-extrusion-opacity");if(v!==0&&g.renderPass==="translucent"){const S=new oe(g.context.gl.LEQUAL,oe.ReadWrite,g.depthRangeFor3D);if(v!==1||u.paint.get("fill-extrusion-pattern").constantOr(1))Tn(g,i,u,m,S,et.disabled,xi.disabled),Tn(g,i,u,m,S,g.stencilModeFor3D(),g.colorModeForRenderPass());else{const M=g.colorModeForRenderPass();Tn(g,i,u,m,S,et.disabled,M)}}},hillshade:function(g,i,u,m){if(g.renderPass!=="offscreen"&&g.renderPass!=="translucent")return;const v=g.context,S=g.depthModeForSublayer(0,oe.ReadOnly),M=g.colorModeForRenderPass(),[H,q]=g.renderPass==="translucent"?g.stencilConfigForOverlap(m):[{},m];for(const J of q){const se=i.getTile(J);se.needsHillshadePrepare!==void 0&&se.needsHillshadePrepare&&g.renderPass==="offscreen"?rs(g,se,u,S,et.disabled,M):g.renderPass==="translucent"&&Es(g,J,se,u,S,H[J.overscaledZ],M)}v.viewport.set([0,0,g.width,g.height])},raster:function(g,i,u,m){if(g.renderPass!=="translucent"||u.paint.get("raster-opacity")===0||!m.length)return;const v=g.context,S=v.gl,M=i.getSource(),H=g.useProgram("raster"),q=g.colorModeForRenderPass(),[J,se]=M instanceof rt?[{},m]:g.stencilConfigForOverlap(m),pe=se[se.length-1].overscaledZ,we=!g.options.moving;for(const He of se){const Me=g.depthModeForSublayer(He.overscaledZ-pe,u.paint.get("raster-opacity")===1?oe.ReadWrite:oe.ReadOnly,S.LESS),Re=i.getTile(He);Re.registerFadeDuration(u.paint.get("raster-fade-duration"));const ct=i.findLoadedParent(He,0),wt=Ws(Re,ct,i,u,g.transform,g.style.terrain);let It,We;const Rt=u.paint.get("raster-resampling")==="nearest"?S.NEAREST:S.LINEAR;v.activeTexture.set(S.TEXTURE0),Re.texture.bind(Rt,S.CLAMP_TO_EDGE,S.LINEAR_MIPMAP_NEAREST),v.activeTexture.set(S.TEXTURE1),ct?(ct.texture.bind(Rt,S.CLAMP_TO_EDGE,S.LINEAR_MIPMAP_NEAREST),It=Math.pow(2,ct.tileID.overscaledZ-Re.tileID.overscaledZ),We=[Re.tileID.canonical.x*It%1,Re.tileID.canonical.y*It%1]):Re.texture.bind(Rt,S.CLAMP_TO_EDGE,S.LINEAR_MIPMAP_NEAREST);const kt=g.style.terrain&&g.style.terrain.getTerrainData(He),Xt=kt?He:null,Zt=Xt?Xt.posMatrix:g.transform.calculatePosMatrix(He.toUnwrapped(),we),ur=ys(Zt,We||[0,0],It||1,wt,u);M instanceof rt?H.draw(v,S.TRIANGLES,Me,et.disabled,q,_t.disabled,ur,kt,u.id,M.boundsBuffer,g.quadTriangleIndexBuffer,M.boundsSegments):H.draw(v,S.TRIANGLES,Me,J[He.overscaledZ],q,_t.disabled,ur,kt,u.id,g.rasterBoundsBuffer,g.quadTriangleIndexBuffer,g.rasterBoundsSegments)}},background:function(g,i,u,m){const v=u.paint.get("background-color"),S=u.paint.get("background-opacity");if(S===0)return;const M=g.context,H=M.gl,q=g.transform,J=q.tileSize,se=u.paint.get("background-pattern");if(g.isPatternMissing(se))return;const pe=!se&&v.a===1&&S===1&&g.opaquePassEnabledForLayer()?"opaque":"translucent";if(g.renderPass!==pe)return;const we=et.disabled,He=g.depthModeForSublayer(0,pe==="opaque"?oe.ReadWrite:oe.ReadOnly),Me=g.colorModeForRenderPass(),Re=g.useProgram(se?"backgroundPattern":"background"),ct=m||q.coveringTiles({tileSize:J,terrain:g.style.terrain});se&&(M.activeTexture.set(H.TEXTURE0),g.imageManager.bind(g.context));const wt=u.getCrossfadeParameters();for(const It of ct){const We=m?It.posMatrix:g.transform.calculatePosMatrix(It.toUnwrapped()),Rt=se?Ma(We,S,g,se,{tileID:It,tileSize:J},wt):pl(We,S,v),kt=g.style.terrain&&g.style.terrain.getTerrainData(It);Re.draw(M,H.TRIANGLES,He,we,Me,_t.disabled,Rt,kt,u.id,g.tileExtentBuffer,g.quadTriangleIndexBuffer,g.tileExtentSegments)}},debug:function(g,i,u){for(let m=0;m<u.length;m++)Ba(g,i,u[m])},custom:function(g,i,u){const m=g.context,v=u.implementation;if(g.renderPass==="offscreen"){const S=v.prerender;S&&(g.setCustomLayerDefaults(),m.setColorMode(g.colorModeForRenderPass()),S.call(v,m.gl,g.transform.customLayerMatrix()),m.setDirty(),g.setBaseState())}else if(g.renderPass==="translucent"){g.setCustomLayerDefaults(),m.setColorMode(g.colorModeForRenderPass()),m.setStencilMode(et.disabled);const S=v.renderingMode==="3d"?new oe(g.context.gl.LEQUAL,oe.ReadWrite,g.depthRangeFor3D):g.depthModeForSublayer(0,oe.ReadOnly);m.setDepthMode(S),v.render(m.gl,g.transform.customLayerMatrix()),m.setDirty(),g.setBaseState(),m.bindFramebuffer.set(null)}}};class uA{constructor(i,u){this.context=new N(i),this.transform=u,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.create(),renderTime:0},this.setup(),this.numSublayers=Ge.maxUnderzooming+Ge.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new dn,this.gpuTimers={}}resize(i,u,m){if(this.width=i*m,this.height=u*m,this.pixelRatio=m,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const v of this.style._order)this.style._layers[v].resize()}setup(){const i=this.context,u=new a.PosArray;u.emplaceBack(0,0),u.emplaceBack(a.EXTENT,0),u.emplaceBack(0,a.EXTENT),u.emplaceBack(a.EXTENT,a.EXTENT),this.tileExtentBuffer=i.createVertexBuffer(u,In.members),this.tileExtentSegments=a.SegmentVector.simpleSegment(0,0,4,2);const m=new a.PosArray;m.emplaceBack(0,0),m.emplaceBack(a.EXTENT,0),m.emplaceBack(0,a.EXTENT),m.emplaceBack(a.EXTENT,a.EXTENT),this.debugBuffer=i.createVertexBuffer(m,In.members),this.debugSegments=a.SegmentVector.simpleSegment(0,0,4,5);const v=new a.RasterBoundsArray;v.emplaceBack(0,0,0,0),v.emplaceBack(a.EXTENT,0,a.EXTENT,0),v.emplaceBack(0,a.EXTENT,0,a.EXTENT),v.emplaceBack(a.EXTENT,a.EXTENT,a.EXTENT,a.EXTENT),this.rasterBoundsBuffer=i.createVertexBuffer(v,Ue.members),this.rasterBoundsSegments=a.SegmentVector.simpleSegment(0,0,4,2);const S=new a.PosArray;S.emplaceBack(0,0),S.emplaceBack(1,0),S.emplaceBack(0,1),S.emplaceBack(1,1),this.viewportBuffer=i.createVertexBuffer(S,In.members),this.viewportSegments=a.SegmentVector.simpleSegment(0,0,4,2);const M=new a.LineStripIndexArray;M.emplaceBack(0),M.emplaceBack(1),M.emplaceBack(3),M.emplaceBack(2),M.emplaceBack(0),this.tileBorderIndexBuffer=i.createIndexBuffer(M);const H=new a.TriangleIndexArray;H.emplaceBack(0,1,2),H.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=i.createIndexBuffer(H),this.emptyTexture=new P(i,{width:1,height:1,data:new Uint8Array([0,0,0,0])},i.gl.RGBA);const q=this.context.gl;this.stencilClearMode=new et({func:q.ALWAYS,mask:0},0,255,q.ZERO,q.ZERO,q.ZERO)}clearStencil(){const i=this.context,u=i.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const m=a.create();a.ortho(m,0,this.width,this.height,0,0,1),a.scale(m,m,[u.drawingBufferWidth,u.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(i,u.TRIANGLES,oe.disabled,this.stencilClearMode,xi.disabled,_t.disabled,$a(m),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(i,u){if(this.currentStencilSource===i.source||!i.isTileClipped()||!u||!u.length)return;this.currentStencilSource=i.source;const m=this.context,v=m.gl;this.nextStencilID+u.length>256&&this.clearStencil(),m.setColorMode(xi.disabled),m.setDepthMode(oe.disabled);const S=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const M of u){const H=this._tileClippingMaskIDs[M.key]=this.nextStencilID++,q=this.style.terrain&&this.style.terrain.getTerrainData(M);S.draw(m,v.TRIANGLES,oe.disabled,new et({func:v.ALWAYS,mask:0},H,255,v.KEEP,v.KEEP,v.REPLACE),xi.disabled,_t.disabled,$a(M.posMatrix),q,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const i=this.nextStencilID++,u=this.context.gl;return new et({func:u.NOTEQUAL,mask:255},i,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(i){const u=this.context.gl;return new et({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[i.key],0,u.KEEP,u.KEEP,u.REPLACE)}stencilConfigForOverlap(i){const u=this.context.gl,m=i.sort((M,H)=>H.overscaledZ-M.overscaledZ),v=m[m.length-1].overscaledZ,S=m[0].overscaledZ-v+1;if(S>1){this.currentStencilSource=void 0,this.nextStencilID+S>256&&this.clearStencil();const M={};for(let H=0;H<S;H++)M[H+v]=new et({func:u.GEQUAL,mask:255},H+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=S,[M,m]}return[{[v]:et.disabled},m]}colorModeForRenderPass(){const i=this.context.gl;return this._showOverdrawInspector?new xi([i.CONSTANT_COLOR,i.ONE],new a.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?xi.unblended:xi.alphaBlended}depthModeForSublayer(i,u,m){if(!this.opaquePassEnabledForLayer())return oe.disabled;const v=1-((1+this.currentLayer)*this.numSublayers+i)*this.depthEpsilon;return new oe(m||this.context.gl.LEQUAL,u,[v,v])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(i,u){this.style=i,this.options=u,this.lineAtlas=i.lineAtlas,this.imageManager=i.imageManager,this.glyphManager=i.glyphManager,this.symbolFadeChange=i.placement.symbolFadeChange(a.exported.now()),this.imageManager.beginFrame();const m=this.style._order,v=this.style.sourceCaches,S=this.style.terrain&&new cA(this);for(const J in v){const se=v[J];se.used&&se.prepare(this.context)}const M={},H={},q={};for(const J in v){const se=v[J];M[J]=se.getVisibleCoordinates(),H[J]=M[J].slice().reverse(),q[J]=se.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let J=0;J<m.length;J++)if(this.style._layers[m[J]].is3D()){this.opaquePassCutoff=J;break}if(S){this.opaquePassCutoff=0;const J=this.style.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime);(this.terrainFacilitator.dirty||!a.equals(this.terrainFacilitator.matrix,this.transform.projMatrix)||J.length)&&(a.copy(this.terrainFacilitator.matrix,this.transform.projMatrix),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(se,pe){const we=se.context,He=we.gl,Me=xi.unblended,Re=new oe(He.LEQUAL,oe.ReadWrite,[0,1]),ct=pe.getTerrainMesh(),wt=pe.sourceCache.getRenderableTiles(),It=se.useProgram("terrainDepth");we.bindFramebuffer.set(pe.getFramebuffer("depth").framebuffer),we.viewport.set([0,0,se.width/devicePixelRatio,se.height/devicePixelRatio]),we.clear({color:a.Color.transparent,depth:1});for(const We of wt){const Rt=pe.getTerrainData(We.tileID),kt=se.transform.calculatePosMatrix(We.tileID.toUnwrapped());It.draw(we,He.TRIANGLES,Re,et.disabled,Me,_t.backCCW,{u_matrix:kt},Rt,"terrain",ct.vertexBuffer,ct.indexBuffer,ct.segments)}we.bindFramebuffer.set(null),we.viewport.set([0,0,se.width,se.height])}(this,this.style.terrain),function(se,pe){const we=se.context,He=we.gl,Me=xi.unblended,Re=new oe(He.LEQUAL,oe.ReadWrite,[0,1]),ct=pe.getTerrainMesh(),wt=pe.getCoordsTexture(),It=pe.sourceCache.getRenderableTiles(),We=se.useProgram("terrainCoords");we.bindFramebuffer.set(pe.getFramebuffer("coords").framebuffer),we.viewport.set([0,0,se.width/devicePixelRatio,se.height/devicePixelRatio]),we.clear({color:a.Color.transparent,depth:1}),pe.coordsIndex=[];for(const Rt of It){const kt=pe.getTerrainData(Rt.tileID);we.activeTexture.set(He.TEXTURE0),He.bindTexture(He.TEXTURE_2D,wt.texture);const Xt=se.transform.calculatePosMatrix(Rt.tileID.toUnwrapped());We.draw(we,He.TRIANGLES,Re,et.disabled,Me,_t.backCCW,{u_matrix:Xt,u_terrain_coords_id:(255-pe.coordsIndex.length)/255,u_texture:0},kt,"terrain",ct.vertexBuffer,ct.indexBuffer,ct.segments),pe.coordsIndex.push(Rt.tileID.key)}we.bindFramebuffer.set(null),we.viewport.set([0,0,se.width,se.height])}(this,this.style.terrain))}this.renderPass="offscreen";for(const J of m){const se=this.style._layers[J];if(!se.hasOffscreenPass()||se.isHidden(this.transform.zoom))continue;const pe=H[se.source];(se.type==="custom"||pe.length)&&this.renderLayer(this,v[se.source],se,pe)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:u.showOverdrawInspector?a.Color.black:a.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=u.showOverdrawInspector,this.depthRangeFor3D=[0,1-(i._order.length+2)*this.numSublayers*this.depthEpsilon],!S)for(this.renderPass="opaque",this.currentLayer=m.length-1;this.currentLayer>=0;this.currentLayer--){const J=this.style._layers[m[this.currentLayer]],se=v[J.source],pe=M[J.source];this._renderTileClippingMasks(J,pe),this.renderLayer(this,se,J,pe)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<m.length;this.currentLayer++){const J=this.style._layers[m[this.currentLayer]],se=v[J.source];if(S&&S.renderLayer(J))continue;const pe=(J.type==="symbol"?q:H)[J.source];this._renderTileClippingMasks(J,M[J.source]),this.renderLayer(this,se,J,pe)}if(this.options.showTileBoundaries){let J,se;Object.values(this.style._layers).forEach(pe=>{pe.source&&!pe.isHidden(this.transform.zoom)&&(pe.source!==(se&&se.id)&&(se=this.style.sourceCaches[pe.source]),(!J||J.getSource().maxzoom<se.getSource().maxzoom)&&(J=se))}),J&&so.debug(this,J,J.getVisibleCoordinates())}this.options.showPadding&&function(J){const se=J.transform.padding;xa(J,J.transform.height-(se.top||0),3,ns),xa(J,se.bottom||0,3,Si),Mi(J,se.left||0,3,gl),Mi(J,J.transform.width-(se.right||0),3,la);const pe=J.transform.centerPoint;(function(we,He,Me,Re){Da(we,He-1,Me-10,2,20,Re),Da(we,He-10,Me-1,20,2,Re)})(J,pe.x,J.transform.height-pe.y,ki)}(this),this.context.setDefault()}renderLayer(i,u,m,v){m.isHidden(this.transform.zoom)||(m.type==="background"||m.type==="custom"||(v||[]).length)&&(this.id=m.id,this.gpuTimingStart(m),so[m.type](i,u,m,v,this.style.placement.variableOffsets),this.gpuTimingEnd())}gpuTimingStart(i){if(!this.options.gpuTiming)return;const u=this.context.extTimerQuery;let m=this.gpuTimers[i.id];m||(m=this.gpuTimers[i.id]={calls:0,cpuTime:0,query:u.createQueryEXT()}),m.calls++,u.beginQueryEXT(u.TIME_ELAPSED_EXT,m.query)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const i=this.context.extTimerQuery;i.endQueryEXT(i.TIME_ELAPSED_EXT)}collectGpuTimers(){const i=this.gpuTimers;return this.gpuTimers={},i}queryGpuTimers(i){const u={};for(const m in i){const v=i[m],S=this.context.extTimerQuery,M=S.getQueryObjectEXT(v.query,S.QUERY_RESULT_EXT)/1e6;S.deleteQueryEXT(v.query),u[m]=M}return u}translatePosMatrix(i,u,m,v,S){if(!m[0]&&!m[1])return i;const M=S?v==="map"?this.transform.angle:0:v==="viewport"?-this.transform.angle:0;if(M){const J=Math.sin(M),se=Math.cos(M);m=[m[0]*se-m[1]*J,m[0]*J+m[1]*se]}const H=[S?m[0]:hn(u,m[0],this.transform.zoom),S?m[1]:hn(u,m[1],this.transform.zoom),0],q=new Float32Array(16);return a.translate(q,i,H),q}saveTileTexture(i){const u=this._tileTextures[i.size[0]];u?u.push(i):this._tileTextures[i.size[0]]=[i]}getTileTexture(i){const u=this._tileTextures[i];return u&&u.length>0?u.pop():null}isPatternMissing(i){if(!i)return!1;if(!i.from||!i.to)return!0;const u=this.imageManager.getPattern(i.from.toString()),m=this.imageManager.getPattern(i.to.toString());return!u||!m}useProgram(i,u){this.cache=this.cache||{};const m=i+(u?u.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.terrain?"/terrain":"");return this.cache[m]||(this.cache[m]=new Gs(this.context,i,bi[i],u,_o[i],this._showOverdrawInspector,this.style.terrain)),this.cache[m]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const i=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(i.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new P(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}}class Fs{constructor(i,u){this.points=i,this.planes=u}static fromInvProjectionMatrix(i,u,m){const v=Math.pow(2,m),S=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(H=>{const q=1/(H=a.transformMat4([],H,i))[3]/u*v;return a.mul$1(H,H,[q,q,1/H[3],q])}),M=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(H=>{const q=a.sub([],S[H[0]],S[H[1]]),J=a.sub([],S[H[2]],S[H[1]]),se=a.normalize([],a.cross([],q,J)),pe=-a.dot(se,S[H[1]]);return se.concat(pe)});return new Fs(S,M)}}class xo{constructor(i,u){this.min=i,this.max=u,this.center=a.scale$1([],a.add([],this.min,this.max),.5)}quadrant(i){const u=[i%2==0,i<2],m=a.clone$2(this.min),v=a.clone$2(this.max);for(let S=0;S<u.length;S++)m[S]=u[S]?this.min[S]:this.center[S],v[S]=u[S]?this.center[S]:this.max[S];return v[2]=this.max[2],new xo(m,v)}distanceX(i){return Math.max(Math.min(this.max[0],i[0]),this.min[0])-i[0]}distanceY(i){return Math.max(Math.min(this.max[1],i[1]),this.min[1])-i[1]}intersects(i){const u=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let m=!0;for(let v=0;v<i.planes.length;v++){const S=i.planes[v];let M=0;for(let H=0;H<u.length;H++)a.dot$1(S,u[H])>=0&&M++;if(M===0)return 0;M!==u.length&&(m=!1)}if(m)return 2;for(let v=0;v<3;v++){let S=Number.MAX_VALUE,M=-Number.MAX_VALUE;for(let H=0;H<i.points.length;H++){const q=i.points[H][v]-this.min[v];S=Math.min(S,q),M=Math.max(M,q)}if(M<0||S>this.max[v]-this.min[v])return 0}return 1}}class ao{constructor(i=0,u=0,m=0,v=0){if(isNaN(i)||i<0||isNaN(u)||u<0||isNaN(m)||m<0||isNaN(v)||v<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=i,this.bottom=u,this.left=m,this.right=v}interpolate(i,u,m){return u.top!=null&&i.top!=null&&(this.top=a.number(i.top,u.top,m)),u.bottom!=null&&i.bottom!=null&&(this.bottom=a.number(i.bottom,u.bottom,m)),u.left!=null&&i.left!=null&&(this.left=a.number(i.left,u.left,m)),u.right!=null&&i.right!=null&&(this.right=a.number(i.right,u.right,m)),this}getCenter(i,u){const m=a.clamp((this.left+i-this.right)/2,0,i),v=a.clamp((this.top+u-this.bottom)/2,0,u);return new a.pointGeometry(m,v)}equals(i){return this.top===i.top&&this.bottom===i.bottom&&this.left===i.left&&this.right===i.right}clone(){return new ao(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}class Ro{constructor(i,u,m,v,S){this.tileSize=512,this.maxValidLatitude=85.051129,this.freezeElevation=!1,this._renderWorldCopies=S===void 0||!!S,this._minZoom=i||0,this._maxZoom=u||22,this._minPitch=m??0,this._maxPitch=v??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new a.LngLat(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new ao,this._posMatrixCache={},this._alignedPosMatrixCache={}}clone(){const i=new Ro(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return i.tileSize=this.tileSize,i.latRange=this.latRange,i.width=this.width,i.height=this.height,i._center=this._center,i._elevation=this._elevation,i.zoom=this.zoom,i.angle=this.angle,i._fov=this._fov,i._pitch=this._pitch,i._unmodified=this._unmodified,i._edgeInsets=this._edgeInsets.clone(),i._calcMatrices(),i}get minZoom(){return this._minZoom}set minZoom(i){this._minZoom!==i&&(this._minZoom=i,this.zoom=Math.max(this.zoom,i))}get maxZoom(){return this._maxZoom}set maxZoom(i){this._maxZoom!==i&&(this._maxZoom=i,this.zoom=Math.min(this.zoom,i))}get minPitch(){return this._minPitch}set minPitch(i){this._minPitch!==i&&(this._minPitch=i,this.pitch=Math.max(this.pitch,i))}get maxPitch(){return this._maxPitch}set maxPitch(i){this._maxPitch!==i&&(this._maxPitch=i,this.pitch=Math.min(this.pitch,i))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(i){i===void 0?i=!0:i===null&&(i=!1),this._renderWorldCopies=i}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.pointGeometry(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(i){const u=-a.wrap(i,-180,180)*Math.PI/180;var m;this.angle!==u&&(this._unmodified=!1,this.angle=u,this._calcMatrices(),this.rotationMatrix=(m=new a.ARRAY_TYPE(4),a.ARRAY_TYPE!=Float32Array&&(m[1]=0,m[2]=0),m[0]=1,m[3]=1,m),function(v,S,M){var H=S[0],q=S[1],J=S[2],se=S[3],pe=Math.sin(M),we=Math.cos(M);v[0]=H*we+J*pe,v[1]=q*we+se*pe,v[2]=H*-pe+J*we,v[3]=q*-pe+se*we}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(i){const u=a.clamp(i,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==u&&(this._unmodified=!1,this._pitch=u,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(i){i=Math.max(.01,Math.min(60,i)),this._fov!==i&&(this._unmodified=!1,this._fov=i/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(i){const u=Math.min(Math.max(i,this.minZoom),this.maxZoom);this._zoom!==u&&(this._unmodified=!1,this._zoom=u,this.scale=this.zoomScale(u),this.tileZoom=Math.floor(u),this.zoomFraction=u-this.tileZoom,this._constrain(),this._calcMatrices())}get center(){return this._center}set center(i){i.lat===this._center.lat&&i.lng===this._center.lng||(this._unmodified=!1,this._center=i,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(i){i!==this._elevation&&(this._elevation=i,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(i){this._edgeInsets.equals(i)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,i,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(i){return this._edgeInsets.equals(i)}interpolatePadding(i,u,m){this._unmodified=!1,this._edgeInsets.interpolate(i,u,m),this._constrain(),this._calcMatrices()}coveringZoomLevel(i){const u=(i.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/i.tileSize));return Math.max(0,u)}getVisibleUnwrappedCoordinates(i){const u=[new a.UnwrappedTileID(0,i)];if(this._renderWorldCopies){const m=this.pointCoordinate(new a.pointGeometry(0,0)),v=this.pointCoordinate(new a.pointGeometry(this.width,0)),S=this.pointCoordinate(new a.pointGeometry(this.width,this.height)),M=this.pointCoordinate(new a.pointGeometry(0,this.height)),H=Math.floor(Math.min(m.x,v.x,S.x,M.x)),q=Math.floor(Math.max(m.x,v.x,S.x,M.x)),J=1;for(let se=H-J;se<=q+J;se++)se!==0&&u.push(new a.UnwrappedTileID(se,i))}return u}coveringTiles(i){var u,m;let v=this.coveringZoomLevel(i);const S=v;if(i.minzoom!==void 0&&v<i.minzoom)return[];i.maxzoom!==void 0&&v>i.maxzoom&&(v=i.maxzoom);const M=this.pointCoordinate(this.getCameraPoint()),H=a.MercatorCoordinate.fromLngLat(this.center),q=Math.pow(2,v),J=[q*M.x,q*M.y,0],se=[q*H.x,q*H.y,0],pe=Fs.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,v);let we=i.minzoom||0;!i.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(we=v);const He=i.terrain?2/Math.min(this.tileSize,i.tileSize)*this.tileSize:3,Me=We=>({aabb:new xo([We*q,0,0],[(We+1)*q,q,0]),zoom:0,x:0,y:0,wrap:We,fullyVisible:!1}),Re=[],ct=[],wt=v,It=i.reparseOverscaled?S:v;if(this._renderWorldCopies)for(let We=1;We<=3;We++)Re.push(Me(-We)),Re.push(Me(We));for(Re.push(Me(0));Re.length>0;){const We=Re.pop(),Rt=We.x,kt=We.y;let Xt=We.fullyVisible;if(!Xt){const qr=We.aabb.intersects(pe);if(qr===0)continue;Xt=qr===2}const Zt=i.terrain?J:se,ur=We.aabb.distanceX(Zt),qt=We.aabb.distanceY(Zt),Rr=Math.max(Math.abs(ur),Math.abs(qt)),Tr=He+(1<<wt-We.zoom)-2;if(We.zoom===wt||Rr>Tr&&We.zoom>=we){const qr=wt-We.zoom,kn=J[0]-.5-(Rt<<qr),jn=J[1]-.5-(kt<<qr);ct.push({tileID:new a.OverscaledTileID(We.zoom===wt?It:We.zoom,We.wrap,We.zoom,Rt,kt),distanceSq:a.sqrLen([se[0]-.5-Rt,se[1]-.5-kt]),tileDistanceToCamera:Math.sqrt(kn*kn+jn*jn)})}else for(let qr=0;qr<4;qr++){const kn=(Rt<<1)+qr%2,jn=(kt<<1)+(qr>>1),b=We.zoom+1;let L=We.aabb.quadrant(qr);if(i.terrain){const j=new a.OverscaledTileID(b,We.wrap,b,kn,jn),W=i.terrain.getMinMaxElevation(j),ae=(u=W.minElevation)!==null&&u!==void 0?u:this.elevation,de=(m=W.maxElevation)!==null&&m!==void 0?m:this.elevation;L=new xo([L.min[0],L.min[1],ae],[L.max[0],L.max[1],de])}Re.push({aabb:L,zoom:b,x:kn,y:jn,wrap:We.wrap,fullyVisible:Xt})}}return ct.sort((We,Rt)=>We.distanceSq-Rt.distanceSq).map(We=>We.tileID)}resize(i,u){this.width=i,this.height=u,this.pixelsToGLUnits=[2/i,-2/u],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(i){return Math.pow(2,i)}scaleZoom(i){return Math.log(i)/Math.LN2}project(i){const u=a.clamp(i.lat,-this.maxValidLatitude,this.maxValidLatitude);return new a.pointGeometry(a.mercatorXfromLng(i.lng)*this.worldSize,a.mercatorYfromLat(u)*this.worldSize)}unproject(i){return new a.MercatorCoordinate(i.x/this.worldSize,i.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}updateElevation(i){this.freezeElevation||(this.elevation=i?this.getElevation(this._center,i):0)}getElevation(i,u){const m=a.MercatorCoordinate.fromLngLat(i),v=(1<<this.tileZoom)*a.EXTENT,S=m.x*v,M=m.y*v,H=Math.floor(S/a.EXTENT),q=Math.floor(M/a.EXTENT),J=new a.OverscaledTileID(this.tileZoom,0,this.tileZoom,H,q);return u.getElevation(J,S%a.EXTENT,M%a.EXTENT,a.EXTENT)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(i){const u=this.pointLocation(this.centerPoint,i),m=this.getElevation(u,i);if(!(this.elevation-m))return;const v=this.getCameraPosition(),S=a.MercatorCoordinate.fromLngLat(v.lngLat,v.altitude),M=a.MercatorCoordinate.fromLngLat(u,m),H=S.x-M.x,q=S.y-M.y,J=S.z-M.z,se=Math.sqrt(H*H+q*q+J*J),pe=this.scaleZoom(this.cameraToCenterDistance/se/this.tileSize);this._elevation=m,this._center=u,this.zoom=pe}setLocationAtPoint(i,u){const m=this.pointCoordinate(u),v=this.pointCoordinate(this.centerPoint),S=this.locationCoordinate(i),M=new a.MercatorCoordinate(S.x-(m.x-v.x),S.y-(m.y-v.y));this.center=this.coordinateLocation(M),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(i,u){return u?this.coordinatePoint(this.locationCoordinate(i),this.getElevation(i,u),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(i))}pointLocation(i,u){return this.coordinateLocation(this.pointCoordinate(i,u))}locationCoordinate(i){return a.MercatorCoordinate.fromLngLat(i)}coordinateLocation(i){return i&&i.toLngLat()}pointCoordinate(i,u){if(u){const we=u.pointCoordinate(i);if(we!=null)return we}const m=[i.x,i.y,0,1],v=[i.x,i.y,1,1];a.transformMat4(m,m,this.pixelMatrixInverse),a.transformMat4(v,v,this.pixelMatrixInverse);const S=m[3],M=v[3],H=m[1]/S,q=v[1]/M,J=m[2]/S,se=v[2]/M,pe=J===se?0:(0-J)/(se-J);return new a.MercatorCoordinate(a.number(m[0]/S,v[0]/M,pe)/this.worldSize,a.number(H,q,pe)/this.worldSize)}coordinatePoint(i,u=0,m=this.pixelMatrix){const v=[i.x*this.worldSize,i.y*this.worldSize,u,1];return a.transformMat4(v,v,m),new a.pointGeometry(v[0]/v[3],v[1]/v[3])}getBounds(){const i=Math.max(0,this.height/2-this.getHorizon());return new a.LngLatBounds().extend(this.pointLocation(new a.pointGeometry(0,i))).extend(this.pointLocation(new a.pointGeometry(this.width,i))).extend(this.pointLocation(new a.pointGeometry(this.width,this.height))).extend(this.pointLocation(new a.pointGeometry(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new a.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(i){i?(this.lngRange=[i.getWest(),i.getEast()],this.latRange=[i.getSouth(),i.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])}calculatePosMatrix(i,u=!1){const m=i.key,v=u?this._alignedPosMatrixCache:this._posMatrixCache;if(v[m])return v[m];const S=i.canonical,M=this.worldSize/this.zoomScale(S.z),H=S.x+Math.pow(2,S.z)*i.wrap,q=a.identity(new Float64Array(16));return a.translate(q,q,[H*M,S.y*M,0]),a.scale(q,q,[M/a.EXTENT,M/a.EXTENT,1]),a.multiply(q,u?this.alignedProjMatrix:this.projMatrix,q),v[m]=new Float32Array(q),v[m]}customLayerMatrix(){return this.mercatorMatrix.slice()}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let i,u,m,v,S=-90,M=90,H=-180,q=180;const J=this.size,se=this._unmodified;if(this.latRange){const He=this.latRange;S=a.mercatorYfromLat(He[1])*this.worldSize,M=a.mercatorYfromLat(He[0])*this.worldSize,i=M-S<J.y?J.y/(M-S):0}if(this.lngRange){const He=this.lngRange;H=a.wrap(a.mercatorXfromLng(He[0])*this.worldSize,0,this.worldSize),q=a.wrap(a.mercatorXfromLng(He[1])*this.worldSize,0,this.worldSize),q<H&&(q+=this.worldSize),u=q-H<J.x?J.x/(q-H):0}const pe=this.point,we=Math.max(u||0,i||0);if(we)return this.center=this.unproject(new a.pointGeometry(u?(q+H)/2:pe.x,i?(M+S)/2:pe.y)),this.zoom+=this.scaleZoom(we),this._unmodified=se,void(this._constraining=!1);if(this.latRange){const He=pe.y,Me=J.y/2;He-Me<S&&(v=S+Me),He+Me>M&&(v=M-Me)}if(this.lngRange){const He=(H+q)/2,Me=a.wrap(pe.x,He-this.worldSize/2,He+this.worldSize/2),Re=J.x/2;Me-Re<H&&(m=H+Re),Me+Re>q&&(m=q-Re)}m===void 0&&v===void 0||(this.center=this.unproject(new a.pointGeometry(m!==void 0?m:pe.x,v!==void 0?v:pe.y)).wrap()),this._unmodified=se,this._constraining=!1}_calcMatrices(){if(!this.height)return;const i=this.centerOffset,u=this.point.x,m=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=a.mercatorZfromAltitude(1,this.center.lat)*this.worldSize;let v=a.identity(new Float64Array(16));a.scale(v,v,[this.width/2,-this.height/2,1]),a.translate(v,v,[1,-1,0]),this.labelPlaneMatrix=v,v=a.identity(new Float64Array(16)),a.scale(v,v,[1,-1,1]),a.translate(v,v,[-1,-1,0]),a.scale(v,v,[2/this.width,2/this.height,1]),this.glCoordMatrix=v,this.cameraToSeaLevelDistance=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch);const S=Math.PI/2+this._pitch,M=this._fov*(.5+i.y/this.height),H=Math.sin(M)*this.cameraToSeaLevelDistance/Math.sin(a.clamp(Math.PI-S-M,.01,Math.PI-.01)),q=this.getHorizon(),J=2*Math.atan(q/this.cameraToCenterDistance)*(.5+i.y/(2*q)),se=Math.sin(J)*this.cameraToSeaLevelDistance/Math.sin(a.clamp(Math.PI-S-J,.01,Math.PI-.01)),pe=Math.cos(Math.PI/2-this._pitch)*H+this.cameraToSeaLevelDistance,we=Math.cos(Math.PI/2-this._pitch)*se+this.cameraToSeaLevelDistance,He=1.01*Math.min(pe,we),Me=this.height/50;v=new Float64Array(16),a.perspective(v,this._fov,this.width/this.height,Me,He),v[8]=2*-i.x/this.width,v[9]=2*i.y/this.height,a.scale(v,v,[1,-1,1]),a.translate(v,v,[0,0,-this.cameraToCenterDistance]),a.rotateX(v,v,this._pitch),a.rotateZ(v,v,this.angle),a.translate(v,v,[-u,-m,0]),this.mercatorMatrix=a.scale([],v,[this.worldSize,this.worldSize,this.worldSize]),a.scale(v,v,[1,1,this._pixelPerMeter]),this.pixelMatrix=a.multiply(new Float64Array(16),this.labelPlaneMatrix,v),a.translate(v,v,[0,0,-this.elevation]),this.projMatrix=v,this.invProjMatrix=a.invert([],v),this.pixelMatrix3D=a.multiply(new Float64Array(16),this.labelPlaneMatrix,v);const Re=this.width%2/2,ct=this.height%2/2,wt=Math.cos(this.angle),It=Math.sin(this.angle),We=u-Math.round(u)+wt*Re+It*ct,Rt=m-Math.round(m)+wt*ct+It*Re,kt=new Float64Array(v);if(a.translate(kt,kt,[We>.5?We-1:We,Rt>.5?Rt-1:Rt,0]),this.alignedProjMatrix=kt,v=a.invert(new Float64Array(16),this.pixelMatrix),!v)throw new Error("failed to invert matrix");this.pixelMatrixInverse=v,this._posMatrixCache={},this._alignedPosMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const i=this.pointCoordinate(new a.pointGeometry(0,0)),u=[i.x*this.worldSize,i.y*this.worldSize,0,1];return a.transformMat4(u,u,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const i=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.pointGeometry(0,i))}getCameraQueryGeometry(i){const u=this.getCameraPoint();if(i.length===1)return[i[0],u];{let m=u.x,v=u.y,S=u.x,M=u.y;for(const H of i)m=Math.min(m,H.x),v=Math.min(v,H.y),S=Math.max(S,H.x),M=Math.max(M,H.y);return[new a.pointGeometry(m,v),new a.pointGeometry(S,v),new a.pointGeometry(S,M),new a.pointGeometry(m,M),new a.pointGeometry(m,v)]}}}class zi{constructor(i){this._hashName=i&&encodeURIComponent(i),a.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=function(u,m){let v=!1,S=null;const M=()=>{S=null,v&&(u(),S=setTimeout(M,300),v=!1)};return()=>(v=!0,S||M(),S)}(this._updateHashUnthrottled.bind(this))}addTo(i){return this._map=i,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this}getHashString(i){const u=this._map.getCenter(),m=Math.round(100*this._map.getZoom())/100,v=Math.ceil((m*Math.LN2+Math.log(512/360/.5))/Math.LN10),S=Math.pow(10,v),M=Math.round(u.lng*S)/S,H=Math.round(u.lat*S)/S,q=this._map.getBearing(),J=this._map.getPitch();let se="";if(se+=i?`/${M}/${H}/${m}`:`${m}/${H}/${M}`,(q||J)&&(se+="/"+Math.round(10*q)/10),J&&(se+=`/${Math.round(J)}`),this._hashName){const pe=this._hashName;let we=!1;const He=window.location.hash.slice(1).split("&").map(Me=>{const Re=Me.split("=")[0];return Re===pe?(we=!0,`${Re}=${se}`):Me}).filter(Me=>Me);return we||He.push(`${pe}=${se}`),`#${He.join("&")}`}return`#${se}`}_getCurrentHash(){const i=window.location.hash.replace("#","");if(this._hashName){let u;return i.split("&").map(m=>m.split("=")).forEach(m=>{m[0]===this._hashName&&(u=m)}),(u&&u[1]||"").split("/")}return i.split("/")}_onHashChange(){const i=this._getCurrentHash();if(i.length>=3&&!i.some(u=>isNaN(u))){const u=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(i[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+i[2],+i[1]],zoom:+i[0],bearing:u,pitch:+(i[4]||0)}),!0}return!1}_updateHashUnthrottled(){const i=window.location.href.replace(/(#.+)?$/,this.getHashString());try{window.history.replaceState(window.history.state,null,i)}catch{}}}const Ns={linearity:.3,easing:a.bezier(0,0,.3,1)},oo=a.extend({deceleration:2500,maxSpeed:1400},Ns),ss=a.extend({deceleration:20,maxSpeed:1400},Ns),js=a.extend({deceleration:1e3,maxSpeed:360},Ns),Ss=a.extend({deceleration:1e3,maxSpeed:90},Ns);class Ca{constructor(i){this._map=i,this.clear()}clear(){this._inertiaBuffer=[]}record(i){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:a.exported.now(),settings:i})}_drainInertiaBuffer(){const i=this._inertiaBuffer,u=a.exported.now();for(;i.length>0&&u-i[0].time>160;)i.shift()}_onMoveEnd(i){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const u={zoom:0,bearing:0,pitch:0,pan:new a.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:S}of this._inertiaBuffer)u.zoom+=S.zoomDelta||0,u.bearing+=S.bearingDelta||0,u.pitch+=S.pitchDelta||0,S.panDelta&&u.pan._add(S.panDelta),S.around&&(u.around=S.around),S.pinchAround&&(u.pinchAround=S.pinchAround);const m=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,v={};if(u.pan.mag()){const S=Xs(u.pan.mag(),m,a.extend({},oo,i||{}));v.offset=u.pan.mult(S.amount/u.pan.mag()),v.center=this._map.transform.center,ca(v,S)}if(u.zoom){const S=Xs(u.zoom,m,ss);v.zoom=this._map.transform.zoom+S.amount,ca(v,S)}if(u.bearing){const S=Xs(u.bearing,m,js);v.bearing=this._map.transform.bearing+a.clamp(S.amount,-179,179),ca(v,S)}if(u.pitch){const S=Xs(u.pitch,m,Ss);v.pitch=this._map.transform.pitch+S.amount,ca(v,S)}if(v.zoom||v.bearing){const S=u.pinchAround===void 0?u.around:u.pinchAround;v.around=S?this._map.unproject(S):this._map.getCenter()}return this.clear(),a.extend(v,{noMoveStart:!0})}}function ca(g,i){(!g.duration||g.duration<i.duration)&&(g.duration=i.duration,g.easing=i.easing)}function Xs(g,i,u){const{maxSpeed:m,linearity:v,deceleration:S}=u,M=a.clamp(g*v/(i/1e3),-m,m),H=Math.abs(M)/(S*v);return{easing:u.easing,duration:1e3*H,amount:M*(H/2)}}class as extends a.Event{constructor(i,u,m,v={}){const S=w.mousePos(u.getCanvasContainer(),m),M=u.unproject(S);super(i,a.extend({point:S,lngLat:M,originalEvent:m},v)),this._defaultPrevented=!1,this.target=u}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class ua extends a.Event{constructor(i,u,m){const v=i==="touchend"?m.changedTouches:m.touches,S=w.touchPos(u.getCanvasContainer(),v),M=S.map(q=>u.unproject(q)),H=S.reduce((q,J,se,pe)=>q.add(J.div(pe.length)),new a.pointGeometry(0,0));super(i,{points:S,point:H,lngLats:M,lngLat:u.unproject(H),originalEvent:m}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class gi extends a.Event{constructor(i,u,m){super(i,{originalEvent:m}),this._defaultPrevented=!1}preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}}class ZA{constructor(i,u){this._map=i,this._clickTolerance=u.clickTolerance}reset(){delete this._mousedownPos}wheel(i){return this._firePreventable(new gi(i.type,this._map,i))}mousedown(i,u){return this._mousedownPos=u,this._firePreventable(new as(i.type,this._map,i))}mouseup(i){this._map.fire(new as(i.type,this._map,i))}click(i,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||this._map.fire(new as(i.type,this._map,i))}dblclick(i){return this._firePreventable(new as(i.type,this._map,i))}mouseover(i){this._map.fire(new as(i.type,this._map,i))}mouseout(i){this._map.fire(new as(i.type,this._map,i))}touchstart(i){return this._firePreventable(new ua(i.type,this._map,i))}touchmove(i){this._map.fire(new ua(i.type,this._map,i))}touchend(i){this._map.fire(new ua(i.type,this._map,i))}touchcancel(i){this._map.fire(new ua(i.type,this._map,i))}_firePreventable(i){if(this._map.fire(i),i.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Na{constructor(i){this._map=i}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(i){this._map.fire(new as(i.type,this._map,i))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new as("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(i){this._delayContextMenu?this._contextMenuEvent=i:this._ignoreContextMenu||this._map.fire(new as(i.type,this._map,i)),this._map.listens("contextmenu")&&i.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ja{constructor(i,u){this._map=i,this._el=i.getCanvasContainer(),this._container=i.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(i,u){this.isEnabled()&&i.shiftKey&&i.button===0&&(w.disableDrag(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(i,u){if(!this._active)return;const m=u;if(this._lastPos.equals(m)||!this._box&&m.dist(this._startPos)<this._clickTolerance)return;const v=this._startPos;this._lastPos=m,this._box||(this._box=w.create("div","maplibregl-boxzoom mapboxgl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair","mapboxgl-crosshair"),this._fireEvent("boxzoomstart",i));const S=Math.min(v.x,m.x),M=Math.max(v.x,m.x),H=Math.min(v.y,m.y),q=Math.max(v.y,m.y);w.setTransform(this._box,`translate(${S}px,${H}px)`),this._box.style.width=M-S+"px",this._box.style.height=q-H+"px"}mouseupWindow(i,u){if(!this._active||i.button!==0)return;const m=this._startPos,v=u;if(this.reset(),w.suppressClick(),m.x!==v.x||m.y!==v.y)return this._map.fire(new a.Event("boxzoomend",{originalEvent:i})),{cameraAnimation:S=>S.fitScreenCoordinates(m,v,this._map.getBearing(),{linear:!0})};this._fireEvent("boxzoomcancel",i)}keydown(i){this._active&&i.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",i))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair","mapboxgl-crosshair"),this._box&&(w.remove(this._box),this._box=null),w.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(i,u){return this._map.fire(new a.Event(i,{originalEvent:u}))}}function fs(g,i){if(g.length!==i.length)throw new Error(`The number of touches and points are not equal - touches ${g.length}, points ${i.length}`);const u={};for(let m=0;m<g.length;m++)u[g[m].identifier]=i[m];return u}class Ea{constructor(i){this.reset(),this.numTouches=i.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(i,u,m){(this.centroid||m.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=i.timeStamp),m.length===this.numTouches&&(this.centroid=function(v){const S=new a.pointGeometry(0,0);for(const M of v)S._add(M);return S.div(v.length)}(u),this.touches=fs(m,u)))}touchmove(i,u,m){if(this.aborted||!this.centroid)return;const v=fs(m,u);for(const S in this.touches){const M=this.touches[S],H=v[S];(!H||H.dist(M)>30)&&(this.aborted=!0)}}touchend(i,u,m){if((!this.centroid||i.timeStamp-this.startTime>500)&&(this.aborted=!0),m.length===0){const v=!this.aborted&&this.centroid;if(this.reset(),v)return v}}}class Oo{constructor(i){this.singleTap=new Ea(i),this.numTaps=i.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(i,u,m){this.singleTap.touchstart(i,u,m)}touchmove(i,u,m){this.singleTap.touchmove(i,u,m)}touchend(i,u,m){const v=this.singleTap.touchend(i,u,m);if(v){const S=i.timeStamp-this.lastTime<500,M=!this.lastTap||this.lastTap.dist(v)<30;if(S&&M||this.reset(),this.count++,this.lastTime=i.timeStamp,this.lastTap=v,this.count===this.numTaps)return this.reset(),v}}}class Rs{constructor(){this._zoomIn=new Oo({numTouches:1,numTaps:2}),this._zoomOut=new Oo({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(i,u,m){this._zoomIn.touchstart(i,u,m),this._zoomOut.touchstart(i,u,m)}touchmove(i,u,m){this._zoomIn.touchmove(i,u,m),this._zoomOut.touchmove(i,u,m)}touchend(i,u,m){const v=this._zoomIn.touchend(i,u,m),S=this._zoomOut.touchend(i,u,m);return v?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:M=>M.easeTo({duration:300,zoom:M.getZoom()+1,around:M.unproject(v)},{originalEvent:i})}):S?(this._active=!0,i.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:M=>M.easeTo({duration:300,zoom:M.getZoom()-1,around:M.unproject(S)},{originalEvent:i})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const hA={0:1,2:2};class Ao{constructor(i){this.reset(),this._clickTolerance=i.clickTolerance||1}reset(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton}_correctButton(i,u){return!1}_move(i,u){return{}}mousedown(i,u){if(this._lastPoint)return;const m=w.mouseButton(i);this._correctButton(i,m)&&(this._lastPoint=u,this._eventButton=m)}mousemoveWindow(i,u){const m=this._lastPoint;if(m){if(i.preventDefault(),function(v,S){const M=hA[S];return v.buttons===void 0||(v.buttons&M)!==M}(i,this._eventButton))this.reset();else if(this._moved||!(u.dist(m)<this._clickTolerance))return this._moved=!0,this._lastPoint=u,this._move(m,u)}}mouseupWindow(i){this._lastPoint&&w.mouseButton(i)===this._eventButton&&(this._moved&&w.suppressClick(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class zo extends Ao{mousedown(i,u){super.mousedown(i,u),this._lastPoint&&(this._active=!0)}_correctButton(i,u){return u===0&&!i.ctrlKey}_move(i,u){return{around:u,panDelta:u.sub(i)}}}class Hi extends Ao{_correctButton(i,u){return u===0&&i.ctrlKey||u===2}_move(i,u){const m=.8*(u.x-i.x);if(m)return this._active=!0,{bearingDelta:m}}contextmenu(i){i.preventDefault()}}class kr extends Ao{_correctButton(i,u){return u===0&&i.ctrlKey||u===2}_move(i,u){const m=-.5*(u.y-i.y);if(m)return this._active=!0,{pitchDelta:m}}contextmenu(i){i.preventDefault()}}class Ii{constructor(i,u){this._minTouches=i.cooperativeGestures?2:1,this._clickTolerance=i.clickTolerance||1,this._map=u,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.pointGeometry(0,0),setTimeout(()=>{this._cancelCooperativeMessage=!1},200)}touchstart(i,u,m){return this._calculateTransform(i,u,m)}touchmove(i,u,m){if(this._map._cooperativeGestures&&(this._minTouches===2&&m.length<2&&!this._cancelCooperativeMessage?this._map._onCooperativeGesture(i,!1,m.length):this._cancelCooperativeMessage||(this._cancelCooperativeMessage=!0)),this._active&&!(m.length<this._minTouches))return i.preventDefault(),this._calculateTransform(i,u,m)}touchend(i,u,m){this._calculateTransform(i,u,m),this._active&&m.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(i,u,m){m.length>0&&(this._active=!0);const v=fs(m,u),S=new a.pointGeometry(0,0),M=new a.pointGeometry(0,0);let H=0;for(const J in v){const se=v[J],pe=this._touches[J];pe&&(S._add(se),M._add(se.sub(pe)),H++,v[J]=se)}if(this._touches=v,H<this._minTouches||!M.mag())return;const q=M.div(H);return this._sum._add(q),this._sum.mag()<this._clickTolerance?void 0:{around:S.div(H),panDelta:q}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ai{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}_start(i){}_move(i,u,m){return{}}touchstart(i,u,m){this._firstTwoTouches||m.length<2||(this._firstTwoTouches=[m[0].identifier,m[1].identifier],this._start([u[0],u[1]]))}touchmove(i,u,m){if(!this._firstTwoTouches)return;i.preventDefault();const[v,S]=this._firstTwoTouches,M=Bi(m,u,v),H=Bi(m,u,S);if(!M||!H)return;const q=this._aroundCenter?null:M.add(H).div(2);return this._move([M,H],q,i)}touchend(i,u,m){if(!this._firstTwoTouches)return;const[v,S]=this._firstTwoTouches,M=Bi(m,u,v),H=Bi(m,u,S);M&&H||(this._active&&w.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(i){this._enabled=!0,this._aroundCenter=!!i&&i.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Bi(g,i,u){for(let m=0;m<g.length;m++)if(g[m].identifier===u)return i[m]}function Zi(g,i){return Math.log(g/i)/Math.LN2}class Sr extends Ai{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(i){this._startDistance=this._distance=i[0].dist(i[1])}_move(i,u){const m=this._distance;if(this._distance=i[0].dist(i[1]),this._active||!(Math.abs(Zi(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Zi(this._distance,m),pinchAround:u}}}function Ra(g,i){return 180*g.angleWith(i)/Math.PI}class LA extends Ai{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(i){this._startVector=this._vector=i[0].sub(i[1]),this._minDiameter=i[0].dist(i[1])}_move(i,u){const m=this._vector;if(this._vector=i[0].sub(i[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ra(this._vector,m),pinchAround:u}}_isBelowThreshold(i){this._minDiameter=Math.min(this._minDiameter,i.mag());const u=25/(Math.PI*this._minDiameter)*360,m=Ra(i,this._startVector);return Math.abs(m)<u}}function QA(g){return Math.abs(g.y)>Math.abs(g.x)}class Xl extends Ai{constructor(i){super(),this._map=i}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(i,u,m){super.touchstart(i,u,m),this._currentTouchCount=m.length}_start(i){this._lastPoints=i,QA(i[0].sub(i[1]))&&(this._valid=!1)}_move(i,u,m){if(this._map._cooperativeGestures&&this._currentTouchCount<3)return;const v=i[0].sub(this._lastPoints[0]),S=i[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(v,S,m.timeStamp),this._valid?(this._lastPoints=i,this._active=!0,{pitchDelta:(v.y+S.y)/2*-.5}):void 0}gestureBeginsVertically(i,u,m){if(this._valid!==void 0)return this._valid;const v=i.mag()>=2,S=u.mag()>=2;if(!v&&!S)return;if(!v||!S)return this._firstMove===void 0&&(this._firstMove=m),m-this._firstMove<100&&void 0;const M=i.y>0==u.y>0;return QA(i)&&QA(u)&&M}}const JA={panStep:100,bearingStep:15,pitchStep:10};class wc{constructor(){const i=JA;this._panStep=i.panStep,this._bearingStep=i.bearingStep,this._pitchStep=i.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(i){if(i.altKey||i.ctrlKey||i.metaKey)return;let u=0,m=0,v=0,S=0,M=0;switch(i.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:i.shiftKey?m=-1:(i.preventDefault(),S=-1);break;case 39:i.shiftKey?m=1:(i.preventDefault(),S=1);break;case 38:i.shiftKey?v=1:(i.preventDefault(),M=-1);break;case 40:i.shiftKey?v=-1:(i.preventDefault(),M=1);break;default:return}return this._rotationDisabled&&(m=0,v=0),{cameraAnimation:H=>{const q=H.getZoom();H.easeTo({duration:300,easeId:"keyboardHandler",easing:Oc,zoom:u?Math.round(q)+u*(i.shiftKey?2:1):q,bearing:H.getBearing()+m*this._bearingStep,pitch:H.getPitch()+v*this._pitchStep,offset:[-S*this._panStep,-M*this._panStep],center:H.getCenter()},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Oc(g){return g*(2-g)}const yl=4.000244140625;class Zl{constructor(i,u){this._map=i,this._el=i.getCanvasContainer(),this._handler=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,a.bindAll(["_onTimeout"],this)}setZoomRate(i){this._defaultZoomRate=i}setWheelZoomRate(i){this._wheelZoomRate=i}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(i){this.isEnabled()||(this._enabled=!0,this._aroundCenter=i&&i.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}wheel(i){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!this._map._metaPress)return;i.preventDefault()}let u=i.deltaMode===WheelEvent.DOM_DELTA_LINE?40*i.deltaY:i.deltaY;const m=a.exported.now(),v=m-(this._lastWheelEventTime||0);this._lastWheelEventTime=m,u!==0&&u%yl==0?this._type="wheel":u!==0&&Math.abs(u)<4?this._type="trackpad":v>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,i)):this._type||(this._type=Math.abs(v*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),i.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=i,this._delta-=u,this._active||this._start(i)),i.preventDefault()}_onTimeout(i){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(i)}_start(i){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const u=w.mousePos(this._el,i);this._around=a.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(u)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const i=this._map.transform;if(this._delta!==0){const H=this._type==="wheel"&&Math.abs(this._delta)>yl?this._wheelZoomRate:this._defaultZoomRate;let q=2/(1+Math.exp(-Math.abs(this._delta*H)));this._delta<0&&q!==0&&(q=1/q);const J=typeof this._targetZoom=="number"?i.zoomScale(this._targetZoom):i.scale;this._targetZoom=Math.min(i.maxZoom,Math.max(i.minZoom,i.scaleZoom(J*q))),this._type==="wheel"&&(this._startZoom=i.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const u=typeof this._targetZoom=="number"?this._targetZoom:i.zoom,m=this._startZoom,v=this._easing;let S,M=!1;if(this._type==="wheel"&&m&&v){const H=Math.min((a.exported.now()-this._lastWheelEventTime)/200,1),q=v(H);S=a.number(m,u,q),H<1?this._frameId||(this._frameId=!0):M=!0}else S=u,M=!0;return this._active=!0,M&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!M,zoomDelta:S-i.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(i){let u=a.ease;if(this._prevEase){const m=this._prevEase,v=(a.exported.now()-m.start)/m.duration,S=m.easing(v+.01)-m.easing(v),M=.27/Math.sqrt(S*S+1e-4)*.01,H=Math.sqrt(.0729-M*M);u=a.bezier(M,H,.25,1)}return this._prevEase={start:a.exported.now(),duration:i,easing:u},u}reset(){this._active=!1}}class YA{constructor(i,u){this._clickZoom=i,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class $A{constructor(){this.reset()}reset(){this._active=!1}dblclick(i,u){return i.preventDefault(),{cameraAnimation:m=>{m.easeTo({duration:300,zoom:m.getZoom()+(i.shiftKey?-1:1),around:m.unproject(u)},{originalEvent:i})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Zs{constructor(){this._tap=new Oo({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()}touchstart(i,u,m){this._swipePoint||(this._tapTime&&i.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?m.length>0&&(this._swipePoint=u[0],this._swipeTouch=m[0].identifier):this._tap.touchstart(i,u,m))}touchmove(i,u,m){if(this._tapTime){if(this._swipePoint){if(m[0].identifier!==this._swipeTouch)return;const v=u[0],S=v.y-this._swipePoint.y;return this._swipePoint=v,i.preventDefault(),this._active=!0,{zoomDelta:S/128}}}else this._tap.touchmove(i,u,m)}touchend(i,u,m){this._tapTime?this._swipePoint&&m.length===0&&this.reset():this._tap.touchend(i,u,m)&&(this._tapTime=i.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Di{constructor(i,u,m){this._el=i,this._mousePan=u,this._touchPan=m}enable(i){this._inertiaOptions=i||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan","mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class lo{constructor(i,u,m){this._pitchWithRotate=i.pitchWithRotate,this._mouseRotate=u,this._mousePitch=m}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class vl{constructor(i,u,m,v){this._el=i,this._touchZoom=u,this._touchRotate=m,this._tapDragZoom=v,this._rotationDisabled=!1,this._enabled=!0}enable(i){this._touchZoom.enable(i),this._rotationDisabled||this._touchRotate.enable(i),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate","mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const Oa=g=>g.zoom||g.drag||g.pitch||g.rotate;class el extends a.Event{}function fA(g){return g.panDelta&&g.panDelta.mag()||g.zoomDelta||g.bearingDelta||g.pitchDelta}class PA{constructor(i,u){this._map=i,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Ca(i),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(u),a.bindAll(["handleEvent","handleWindowEvent"],this);const m=this._el;this._listeners=[[m,"touchstart",{passive:!0}],[m,"touchmove",{passive:!1}],[m,"touchend",void 0],[m,"touchcancel",void 0],[m,"mousedown",void 0],[m,"mousemove",void 0],[m,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[m,"mouseover",void 0],[m,"mouseout",void 0],[m,"dblclick",void 0],[m,"click",void 0],[m,"keydown",{capture:!1}],[m,"keyup",void 0],[m,"wheel",{passive:!1}],[m,"contextmenu",void 0],[window,"blur",void 0]];for(const[v,S,M]of this._listeners)w.addEventListener(v,S,v===document?this.handleWindowEvent:this.handleEvent,M)}destroy(){for(const[i,u,m]of this._listeners)w.removeEventListener(i,u,i===document?this.handleWindowEvent:this.handleEvent,m)}_addDefaultHandlers(i){const u=this._map,m=u.getCanvasContainer();this._add("mapEvent",new ZA(u,i));const v=u.boxZoom=new ja(u,i);this._add("boxZoom",v);const S=new Rs,M=new $A;u.doubleClickZoom=new YA(M,S),this._add("tapZoom",S),this._add("clickZoom",M);const H=new Zs;this._add("tapDragZoom",H);const q=u.touchPitch=new Xl(u);this._add("touchPitch",q);const J=new Hi(i),se=new kr(i);u.dragRotate=new lo(i,J,se),this._add("mouseRotate",J,["mousePitch"]),this._add("mousePitch",se,["mouseRotate"]);const pe=new zo(i),we=new Ii(i,u);u.dragPan=new Di(m,pe,we),this._add("mousePan",pe),this._add("touchPan",we,["touchZoom","touchRotate"]);const He=new LA,Me=new Sr;u.touchZoomRotate=new vl(m,Me,He,H),this._add("touchRotate",He,["touchPan","touchZoom"]),this._add("touchZoom",Me,["touchPan","touchRotate"]);const Re=u.scrollZoom=new Zl(u,this);this._add("scrollZoom",Re,["mousePan"]);const ct=u.keyboard=new wc;this._add("keyboard",ct),this._add("blockableMapEvent",new Na(u));for(const wt of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])i.interactive&&i[wt]&&u[wt].enable(i[wt])}_add(i,u,m){this._handlers.push({handlerName:i,handler:u,allowed:m}),this._handlersById[i]=u}stop(i){if(!this._updatingCamera){for(const{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},i),this._changes=[]}}isActive(){for(const{handler:i}of this._handlers)if(i.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(Oa(this._eventsInProgress))||this.isZooming()}_blockedByActive(i,u,m){for(const v in i)if(v!==m&&(!u||u.indexOf(v)<0))return!0;return!1}handleWindowEvent(i){this.handleEvent(i,`${i.type}Window`)}_getMapTouches(i){const u=[];for(const m of i)this._el.contains(m.target)&&u.push(m);return u}handleEvent(i,u){if(i.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const m=i.type==="renderFrame"?void 0:i,v={needsRenderFrame:!1},S={},M={},H=i.touches,q=H?this._getMapTouches(H):void 0,J=q?w.touchPos(this._el,q):w.mousePos(this._el,i);for(const{handlerName:we,handler:He,allowed:Me}of this._handlers){if(!He.isEnabled())continue;let Re;this._blockedByActive(M,Me,we)?He.reset():He[u||i.type]&&(Re=He[u||i.type](i,J,q),this.mergeHandlerResult(v,S,Re,we,m),Re&&Re.needsRenderFrame&&this._triggerRenderFrame()),(Re||He.isActive())&&(M[we]=He)}const se={};for(const we in this._previousActiveHandlers)M[we]||(se[we]=m);this._previousActiveHandlers=M,(Object.keys(se).length||fA(v))&&(this._changes.push([v,S,se]),this._triggerRenderFrame()),(Object.keys(M).length||fA(v))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:pe}=v;pe&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],pe(this._map))}mergeHandlerResult(i,u,m,v,S){if(!m)return;a.extend(i,m);const M={handlerName:v,originalEvent:m.originalEvent||S};m.zoomDelta!==void 0&&(u.zoom=M),m.panDelta!==void 0&&(u.drag=M),m.pitchDelta!==void 0&&(u.pitch=M),m.bearingDelta!==void 0&&(u.rotate=M)}_applyChanges(){const i={},u={},m={};for(const[v,S,M]of this._changes)v.panDelta&&(i.panDelta=(i.panDelta||new a.pointGeometry(0,0))._add(v.panDelta)),v.zoomDelta&&(i.zoomDelta=(i.zoomDelta||0)+v.zoomDelta),v.bearingDelta&&(i.bearingDelta=(i.bearingDelta||0)+v.bearingDelta),v.pitchDelta&&(i.pitchDelta=(i.pitchDelta||0)+v.pitchDelta),v.around!==void 0&&(i.around=v.around),v.pinchAround!==void 0&&(i.pinchAround=v.pinchAround),v.noInertia&&(i.noInertia=v.noInertia),a.extend(u,S),a.extend(m,M);this._updateMapTransform(i,u,m),this._changes=[]}_updateMapTransform(i,u,m){const v=this._map,S=v.transform,M=v.style&&v.style.terrain;if(!(fA(i)||M&&this._drag))return this._fireEvents(u,m,!0);let{panDelta:H,zoomDelta:q,bearingDelta:J,pitchDelta:se,around:pe,pinchAround:we}=i;we!==void 0&&(pe=we),v._stop(!0),pe=pe||v.transform.centerPoint;const He=S.pointLocation(H?pe.sub(H):pe);J&&(S.bearing+=J),se&&(S.pitch+=se),q&&(S.zoom+=q),M?u.drag&&!this._drag?(this._drag={center:S.centerPoint,lngLat:S.pointLocation(pe),point:pe,handlerName:u.drag.handlerName},v.fire(new a.Event("freezeElevation",{freeze:!0}))):this._drag&&m[this._drag.handlerName]?(v.fire(new a.Event("freezeElevation",{freeze:!1})),this._drag=null):u.drag&&this._drag&&(S.center=S.pointLocation(S.centerPoint.sub(H))):S.setLocationAtPoint(He,pe),this._map._update(),i.noInertia||this._inertia.record(i),this._fireEvents(u,m,!0)}_fireEvents(i,u,m){const v=Oa(this._eventsInProgress),S=Oa(i),M={};for(const se in i){const{originalEvent:pe}=i[se];this._eventsInProgress[se]||(M[`${se}start`]=pe),this._eventsInProgress[se]=i[se]}!v&&S&&this._fireEvent("movestart",S.originalEvent);for(const se in M)this._fireEvent(se,M[se]);S&&this._fireEvent("move",S.originalEvent);for(const se in i){const{originalEvent:pe}=i[se];this._fireEvent(se,pe)}const H={};let q;for(const se in this._eventsInProgress){const{handlerName:pe,originalEvent:we}=this._eventsInProgress[se];this._handlersById[pe].isActive()||(delete this._eventsInProgress[se],q=u[pe]||we,H[`${se}end`]=q)}for(const se in H)this._fireEvent(se,H[se]);const J=Oa(this._eventsInProgress);if(m&&(v||S)&&!J){this._updatingCamera=!0;const se=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),pe=we=>we!==0&&-this._bearingSnap<we&&we<this._bearingSnap;se?(pe(se.bearing||this._map.getBearing())&&(se.bearing=0),this._map.easeTo(se,{originalEvent:q})):(this._map.fire(new a.Event("moveend",{originalEvent:q})),pe(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(i,u){this._map.fire(new a.Event(i,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(i=>{delete this._frameId,this.handleEvent(new el("renderFrame",{timeStamp:i})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Fa={extend:(g,...i)=>a.extend(g,...i),run(g){g()},logToElement(g,i=!1,u="log"){const m=window.document.getElementById(u);m&&(i&&(m.innerHTML=""),m.innerHTML+=`<br>${g}`)}};class Ui extends a.Evented{constructor(i,u){super(),this._moving=!1,this._zooming=!1,this.transform=i,this._bearingSnap=u.bearingSnap,a.bindAll(["_renderFrameCallback"],this)}getCenter(){return new a.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(i,u){return this.jumpTo({center:i},u)}panBy(i,u,m){return i=a.pointGeometry.convert(i).mult(-1),this.panTo(this.transform.center,a.extend({offset:i},u),m)}panTo(i,u,m){return this.easeTo(a.extend({center:i},u),m)}getZoom(){return this.transform.zoom}setZoom(i,u){return this.jumpTo({zoom:i},u),this}zoomTo(i,u,m){return this.easeTo(a.extend({zoom:i},u),m)}zoomIn(i,u){return this.zoomTo(this.getZoom()+1,i,u),this}zoomOut(i,u){return this.zoomTo(this.getZoom()-1,i,u),this}getBearing(){return this.transform.bearing}setBearing(i,u){return this.jumpTo({bearing:i},u),this}getPadding(){return this.transform.padding}setPadding(i,u){return this.jumpTo({padding:i},u),this}rotateTo(i,u,m){return this.easeTo(a.extend({bearing:i},u),m)}resetNorth(i,u){return this.rotateTo(0,a.extend({duration:1e3},i),u),this}resetNorthPitch(i,u){return this.easeTo(a.extend({bearing:0,pitch:0,duration:1e3},i),u),this}snapToNorth(i,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(i,u):this}getPitch(){return this.transform.pitch}setPitch(i,u){return this.jumpTo({pitch:i},u),this}cameraForBounds(i,u){i=a.LngLatBounds.convert(i);const m=u&&u.bearing||0;return this._cameraForBoxAndBearing(i.getNorthWest(),i.getSouthEast(),m,u)}_cameraForBoxAndBearing(i,u,m,v){const S={top:0,bottom:0,right:0,left:0};if(typeof(v=a.extend({padding:S,offset:[0,0],maxZoom:this.transform.maxZoom},v)).padding=="number"){const kt=v.padding;v.padding={top:kt,bottom:kt,right:kt,left:kt}}v.padding=a.extend(S,v.padding);const M=this.transform,H=M.padding,q=M.project(a.LngLat.convert(i)),J=M.project(a.LngLat.convert(u)),se=q.rotate(-m*Math.PI/180),pe=J.rotate(-m*Math.PI/180),we=new a.pointGeometry(Math.max(se.x,pe.x),Math.max(se.y,pe.y)),He=new a.pointGeometry(Math.min(se.x,pe.x),Math.min(se.y,pe.y)),Me=we.sub(He),Re=(M.width-(H.left+H.right+v.padding.left+v.padding.right))/Me.x,ct=(M.height-(H.top+H.bottom+v.padding.top+v.padding.bottom))/Me.y;if(ct<0||Re<0)return void a.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const wt=Math.min(M.scaleZoom(M.scale*Math.min(Re,ct)),v.maxZoom),It=a.pointGeometry.convert(v.offset),We=new a.pointGeometry((v.padding.left-v.padding.right)/2,(v.padding.top-v.padding.bottom)/2).rotate(m*Math.PI/180),Rt=It.add(We).mult(M.scale/M.zoomScale(wt));return{center:M.unproject(q.add(J).div(2).sub(Rt)),zoom:wt,bearing:m}}fitBounds(i,u,m){return this._fitInternal(this.cameraForBounds(i,u),u,m)}fitScreenCoordinates(i,u,m,v,S){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(a.pointGeometry.convert(i)),this.transform.pointLocation(a.pointGeometry.convert(u)),m,v),v,S)}_fitInternal(i,u,m){return i?(delete(u=a.extend(i,u)).padding,u.linear?this.easeTo(u,m):this.flyTo(u,m)):this}jumpTo(i,u){this.stop();const m=this.transform;let v=!1,S=!1,M=!1;return"zoom"in i&&m.zoom!==+i.zoom&&(v=!0,m.zoom=+i.zoom),i.center!==void 0&&(m.center=a.LngLat.convert(i.center)),"bearing"in i&&m.bearing!==+i.bearing&&(S=!0,m.bearing=+i.bearing),"pitch"in i&&m.pitch!==+i.pitch&&(M=!0,m.pitch=+i.pitch),i.padding==null||m.isPaddingEqual(i.padding)||(m.padding=i.padding),this.fire(new a.Event("movestart",u)).fire(new a.Event("move",u)),v&&this.fire(new a.Event("zoomstart",u)).fire(new a.Event("zoom",u)).fire(new a.Event("zoomend",u)),S&&this.fire(new a.Event("rotatestart",u)).fire(new a.Event("rotate",u)).fire(new a.Event("rotateend",u)),M&&this.fire(new a.Event("pitchstart",u)).fire(new a.Event("pitch",u)).fire(new a.Event("pitchend",u)),this.fire(new a.Event("moveend",u))}calculateCameraOptionsFromTo(i,u,m,v=0){const S=a.MercatorCoordinate.fromLngLat(i,u),M=a.MercatorCoordinate.fromLngLat(m,v),H=M.x-S.x,q=M.y-S.y,J=M.z-S.z,se=Math.hypot(H,q,J);if(se===0)throw new Error("Can't calculate camera options with same From and To");const pe=Math.hypot(H,q),we=this.transform.scaleZoom(this.transform.cameraToCenterDistance/se/this.transform.tileSize),He=180*Math.atan2(H,-q)/Math.PI;let Me=180*Math.acos(pe/se)/Math.PI;return Me=J<0?90-Me:90+Me,{center:M.toLngLat(),zoom:we,pitch:Me,bearing:He}}easeTo(i,u){this._stop(!1,i.easeId),((i=a.extend({offset:[0,0],duration:500,easing:a.ease},i)).animate===!1||!i.essential&&a.exported.prefersReducedMotion)&&(i.duration=0);const m=this.transform,v=this.getZoom(),S=this.getBearing(),M=this.getPitch(),H=this.getPadding(),q="zoom"in i?+i.zoom:v,J="bearing"in i?this._normalizeBearing(i.bearing,S):S,se="pitch"in i?+i.pitch:M,pe="padding"in i?i.padding:m.padding,we=a.pointGeometry.convert(i.offset);let He=m.centerPoint.add(we);const Me=m.pointLocation(He),Re=a.LngLat.convert(i.center||Me);this._normalizeCenter(Re);const ct=m.project(Me),wt=m.project(Re).sub(ct),It=m.zoomScale(q-v);let We,Rt;i.around&&(We=a.LngLat.convert(i.around),Rt=m.locationPoint(We));const kt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||q!==v,this._rotating=this._rotating||S!==J,this._pitching=this._pitching||se!==M,this._padding=!m.isPaddingEqual(pe),this._easeId=i.easeId,this._prepareEase(u,i.noMoveStart,kt),this._ease(Xt=>{if(this._zooming&&(m.zoom=a.number(v,q,Xt)),this._rotating&&(m.bearing=a.number(S,J,Xt)),this._pitching&&(m.pitch=a.number(M,se,Xt)),this._padding&&(m.interpolatePadding(H,pe,Xt),He=m.centerPoint.add(we)),We)m.setLocationAtPoint(We,Rt);else{const Zt=m.zoomScale(m.zoom-v),ur=q>v?Math.min(2,It):Math.max(.5,It),qt=Math.pow(ur,1-Xt),Rr=m.unproject(ct.add(wt.mult(Xt*qt)).mult(Zt));m.setLocationAtPoint(m.renderWorldCopies?Rr.wrap():Rr,He)}this._fireMoveEvents(u)},Xt=>{this._afterEase(u,Xt)},i),this}_prepareEase(i,u,m={}){this._moving=!0,this.fire(new a.Event("freezeElevation",{freeze:!0})),u||m.moving||this.fire(new a.Event("movestart",i)),this._zooming&&!m.zooming&&this.fire(new a.Event("zoomstart",i)),this._rotating&&!m.rotating&&this.fire(new a.Event("rotatestart",i)),this._pitching&&!m.pitching&&this.fire(new a.Event("pitchstart",i))}_fireMoveEvents(i){this.fire(new a.Event("move",i)),this._zooming&&this.fire(new a.Event("zoom",i)),this._rotating&&this.fire(new a.Event("rotate",i)),this._pitching&&this.fire(new a.Event("pitch",i))}_afterEase(i,u){if(this._easeId&&u&&this._easeId===u)return;delete this._easeId,this.fire(new a.Event("freezeElevation",{freeze:!1}));const m=this._zooming,v=this._rotating,S=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,m&&this.fire(new a.Event("zoomend",i)),v&&this.fire(new a.Event("rotateend",i)),S&&this.fire(new a.Event("pitchend",i)),this.fire(new a.Event("moveend",i))}flyTo(i,u){if(!i.essential&&a.exported.prefersReducedMotion){const b=a.pick(i,["center","zoom","bearing","pitch","around"]);return this.jumpTo(b,u)}this.stop(),i=a.extend({offset:[0,0],speed:1.2,curve:1.42,easing:a.ease},i);const m=this.transform,v=this.getZoom(),S=this.getBearing(),M=this.getPitch(),H=this.getPadding(),q="zoom"in i?a.clamp(+i.zoom,m.minZoom,m.maxZoom):v,J="bearing"in i?this._normalizeBearing(i.bearing,S):S,se="pitch"in i?+i.pitch:M,pe="padding"in i?i.padding:m.padding,we=m.zoomScale(q-v),He=a.pointGeometry.convert(i.offset);let Me=m.centerPoint.add(He);const Re=m.pointLocation(Me),ct=a.LngLat.convert(i.center||Re);this._normalizeCenter(ct);const wt=m.project(Re),It=m.project(ct).sub(wt);let We=i.curve;const Rt=Math.max(m.width,m.height),kt=Rt/we,Xt=It.mag();if("minZoom"in i){const b=a.clamp(Math.min(i.minZoom,v,q),m.minZoom,m.maxZoom),L=Rt/m.zoomScale(b-v);We=Math.sqrt(L/Xt*2)}const Zt=We*We;function ur(b){const L=(kt*kt-Rt*Rt+(b?-1:1)*Zt*Zt*Xt*Xt)/(2*(b?kt:Rt)*Zt*Xt);return Math.log(Math.sqrt(L*L+1)-L)}function qt(b){return(Math.exp(b)-Math.exp(-b))/2}function Rr(b){return(Math.exp(b)+Math.exp(-b))/2}const Tr=ur(0);let qr=function(b){return Rr(Tr)/Rr(Tr+We*b)},kn=function(b){return Rt*((Rr(Tr)*(qt(L=Tr+We*b)/Rr(L))-qt(Tr))/Zt)/Xt;var L},jn=(ur(1)-Tr)/We;if(Math.abs(Xt)<1e-6||!isFinite(jn)){if(Math.abs(Rt-kt)<1e-6)return this.easeTo(i,u);const b=kt<Rt?-1:1;jn=Math.abs(Math.log(kt/Rt))/We,kn=function(){return 0},qr=function(L){return Math.exp(b*We*L)}}return i.duration="duration"in i?+i.duration:1e3*jn/("screenSpeed"in i?+i.screenSpeed/We:+i.speed),i.maxDuration&&i.duration>i.maxDuration&&(i.duration=0),this._zooming=!0,this._rotating=S!==J,this._pitching=se!==M,this._padding=!m.isPaddingEqual(pe),this._prepareEase(u,!1),this._ease(b=>{const L=b*jn,j=1/qr(L);m.zoom=b===1?q:v+m.scaleZoom(j),this._rotating&&(m.bearing=a.number(S,J,b)),this._pitching&&(m.pitch=a.number(M,se,b)),this._padding&&(m.interpolatePadding(H,pe,b),Me=m.centerPoint.add(He));const W=b===1?ct:m.unproject(wt.add(It.mult(kn(L))).mult(j));m.setLocationAtPoint(m.renderWorldCopies?W.wrap():W,Me),this._fireMoveEvents(u)},()=>this._afterEase(u),i),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(i,u){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const m=this._onEaseEnd;delete this._onEaseEnd,m.call(this,u)}if(!i){const m=this.handlers;m&&m.stop(!1)}return this}_ease(i,u,m){m.animate===!1||m.duration===0?(i(1),u()):(this._easeStart=a.exported.now(),this._easeOptions=m,this._onEaseFrame=i,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const i=Math.min((a.exported.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(i)),i<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(i,u){i=a.wrap(i,-180,180);const m=Math.abs(i-u);return Math.abs(i-360-u)<m&&(i-=360),Math.abs(i+360-u)<m&&(i+=360),i}_normalizeCenter(i){const u=this.transform;if(!u.renderWorldCopies||u.lngRange)return;const m=i.lng-u.center.lng;i.lng+=m>180?-360:m<-180?360:0}}class kA{constructor(i={}){this.options=i,a.bindAll(["_toggleAttribution","_updateData","_updateCompact","_updateCompactMinimize"],this)}getDefaultPosition(){return"bottom-right"}onAdd(i){return this._map=i,this._compact=this.options&&this.options.compact,this._container=w.create("details","maplibregl-ctrl maplibregl-ctrl-attrib mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=w.create("summary","maplibregl-ctrl-attrib-button mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=w.create("div","maplibregl-ctrl-attrib-inner mapboxgl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){w.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(i,u){const m=this._map._getUIString(`AttributionControl.${u}`);i.title=m,i.setAttribute("aria-label",m)}_toggleAttribution(){this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")):(this._container.classList.add("maplibregl-compact-show","mapboxgl-compact-show"),this._container.removeAttribute("open")))}_updateData(i){!i||i.sourceDataType!=="metadata"&&i.sourceDataType!=="visibility"&&i.dataType!=="style"&&i.type!=="terrain"||this._updateAttributions()}_updateAttributions(){if(!this._map.style)return;let i=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?i=i.concat(this.options.customAttribution.map(v=>typeof v!="string"?"":v)):typeof this.options.customAttribution=="string"&&i.push(this.options.customAttribution)),this._map.style.stylesheet){const v=this._map.style.stylesheet;this.styleOwner=v.owner,this.styleId=v.id}const u=this._map.style.sourceCaches;for(const v in u){const S=u[v];if(S.used||S.usedForTerrain){const M=S.getSource();M.attribution&&i.indexOf(M.attribution)<0&&i.push(M.attribution)}}i=i.filter(v=>String(v).trim()),i.sort((v,S)=>v.length-S.length),i=i.filter((v,S)=>{for(let M=S+1;M<i.length;M++)if(i[M].indexOf(v)>=0)return!1;return!0});const m=i.join(" | ");m!==this._attribHTML&&(this._attribHTML=m,i.length?(this._innerContainer.innerHTML=m,this._container.classList.remove("maplibregl-attrib-empty","mapboxgl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty","mapboxgl-attrib-empty"),this._updateCompact(),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","mapboxgl-compact","maplibregl-compact-show","mapboxgl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show","mapboxgl-compact","mapboxgl-compact-show"))}_updateCompactMinimize(){this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show","mapboxgl-compact-show")}}class MA{constructor(i={}){this.options=i,a.bindAll(["_updateCompact"],this)}getDefaultPosition(){return"bottom-left"}onAdd(i){this._map=i,this._compact=this.options&&this.options.compact,this._container=w.create("div","maplibregl-ctrl mapboxgl-ctrl");const u=w.create("a","maplibregl-ctrl-logo mapboxgl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://maplibre.org/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){w.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}_updateCompact(){const i=this._container.children;if(i.length){const u=i[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&u.classList.add("maplibregl-compact","mapboxgl-compact"):u.classList.remove("maplibregl-compact","mapboxgl-compact")}}}class DA{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(i){const u=++this._id;return this._queue.push({callback:i,id:u,cancelled:!1}),u}remove(i){const u=this._currentlyRunning,m=u?this._queue.concat(u):this._queue;for(const v of m)if(v.id===i)return void(v.cancelled=!0)}run(i=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const u=this._currentlyRunning=this._queue;this._queue=[];for(const m of u)if(!m.cancelled&&(m.callback(i),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}const zc={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.enableTerrain":"Enable terrain","TerrainControl.disableTerrain":"Disable terrain"},Hc={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:void 0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,fadeDuration:300,crossSourceCollisions:!0},Vc={showCompass:!0,showZoom:!0,visualizePitch:!1};class Bo{constructor(i,u,m=!1){this._clickTolerance=10,this.element=u,this.mouseRotate=new Hi({clickTolerance:i.dragRotate._mouseRotate._clickTolerance}),this.map=i,m&&(this.mousePitch=new kr({clickTolerance:i.dragRotate._mousePitch._clickTolerance})),a.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),w.addEventListener(u,"mousedown",this.mousedown),w.addEventListener(u,"touchstart",this.touchstart,{passive:!1}),w.addEventListener(u,"touchmove",this.touchmove),w.addEventListener(u,"touchend",this.touchend),w.addEventListener(u,"touchcancel",this.reset)}down(i,u){this.mouseRotate.mousedown(i,u),this.mousePitch&&this.mousePitch.mousedown(i,u),w.disableDrag()}move(i,u){const m=this.map,v=this.mouseRotate.mousemoveWindow(i,u);if(v&&v.bearingDelta&&m.setBearing(m.getBearing()+v.bearingDelta),this.mousePitch){const S=this.mousePitch.mousemoveWindow(i,u);S&&S.pitchDelta&&m.setPitch(m.getPitch()+S.pitchDelta)}}off(){const i=this.element;w.removeEventListener(i,"mousedown",this.mousedown),w.removeEventListener(i,"touchstart",this.touchstart,{passive:!1}),w.removeEventListener(i,"touchmove",this.touchmove),w.removeEventListener(i,"touchend",this.touchend),w.removeEventListener(i,"touchcancel",this.reset),this.offTemp()}offTemp(){w.enableDrag(),w.removeEventListener(window,"mousemove",this.mousemove),w.removeEventListener(window,"mouseup",this.mouseup)}mousedown(i){this.down(a.extend({},i,{ctrlKey:!0,preventDefault:()=>i.preventDefault()}),w.mousePos(this.element,i)),w.addEventListener(window,"mousemove",this.mousemove),w.addEventListener(window,"mouseup",this.mouseup)}mousemove(i){this.move(i,w.mousePos(this.element,i))}mouseup(i){this.mouseRotate.mouseupWindow(i),this.mousePitch&&this.mousePitch.mouseupWindow(i),this.offTemp()}touchstart(i){i.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=w.touchPos(this.element,i.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>i.preventDefault()},this._startPos))}touchmove(i){i.targetTouches.length!==1?this.reset():(this._lastPos=w.touchPos(this.element,i.targetTouches)[0],this.move({preventDefault:()=>i.preventDefault()},this._lastPos))}touchend(i){i.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function dA(g,i,u){if(g=new a.LngLat(g.lng,g.lat),i){const m=new a.LngLat(g.lng-360,g.lat),v=new a.LngLat(g.lng+360,g.lat),S=u.locationPoint(g).distSqr(i);u.locationPoint(m).distSqr(i)<S?g=m:u.locationPoint(v).distSqr(i)<S&&(g=v)}for(;Math.abs(g.lng-u.center.lng)>180;){const m=u.locationPoint(g);if(m.x>=0&&m.y>=0&&m.x<=u.width&&m.y<=u.height)break;g.lng>u.center.lng?g.lng-=360:g.lng+=360}return g}const sn={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function vn(g,i,u){const m=g.classList;for(const v in sn)m.remove(`maplibregl-${u}-anchor-${v}`,`mapboxgl-${u}-anchor-${v}`);m.add(`maplibregl-${u}-anchor-${i}`,`mapboxgl-${u}-anchor-${i}`)}class tl extends a.Evented{constructor(i,u){if(super(),(i instanceof HTMLElement||u)&&(i=a.extend({element:i},u)),a.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=i&&i.anchor||"center",this._color=i&&i.color||"#3FB1CE",this._scale=i&&i.scale||1,this._draggable=i&&i.draggable||!1,this._clickTolerance=i&&i.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=i&&i.rotation||0,this._rotationAlignment=i&&i.rotationAlignment||"auto",this._pitchAlignment=i&&i.pitchAlignment&&i.pitchAlignment!=="auto"?i.pitchAlignment:this._rotationAlignment,i&&i.element)this._element=i.element,this._offset=a.pointGeometry.convert(i&&i.offset||[0,0]);else{this._defaultMarker=!0,this._element=w.create("div"),this._element.setAttribute("aria-label","Map marker");const m=w.createNS("http://www.w3.org/2000/svg","svg"),v=41,S=27;m.setAttributeNS(null,"display","block"),m.setAttributeNS(null,"height",`${v}px`),m.setAttributeNS(null,"width",`${S}px`),m.setAttributeNS(null,"viewBox",`0 0 ${S} ${v}`);const M=w.createNS("http://www.w3.org/2000/svg","g");M.setAttributeNS(null,"stroke","none"),M.setAttributeNS(null,"stroke-width","1"),M.setAttributeNS(null,"fill","none"),M.setAttributeNS(null,"fill-rule","evenodd");const H=w.createNS("http://www.w3.org/2000/svg","g");H.setAttributeNS(null,"fill-rule","nonzero");const q=w.createNS("http://www.w3.org/2000/svg","g");q.setAttributeNS(null,"transform","translate(3.0, 29.0)"),q.setAttributeNS(null,"fill","#000000");const J=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const It of J){const We=w.createNS("http://www.w3.org/2000/svg","ellipse");We.setAttributeNS(null,"opacity","0.04"),We.setAttributeNS(null,"cx","10.5"),We.setAttributeNS(null,"cy","5.80029008"),We.setAttributeNS(null,"rx",It.rx),We.setAttributeNS(null,"ry",It.ry),q.appendChild(We)}const se=w.createNS("http://www.w3.org/2000/svg","g");se.setAttributeNS(null,"fill",this._color);const pe=w.createNS("http://www.w3.org/2000/svg","path");pe.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),se.appendChild(pe);const we=w.createNS("http://www.w3.org/2000/svg","g");we.setAttributeNS(null,"opacity","0.25"),we.setAttributeNS(null,"fill","#000000");const He=w.createNS("http://www.w3.org/2000/svg","path");He.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),we.appendChild(He);const Me=w.createNS("http://www.w3.org/2000/svg","g");Me.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Me.setAttributeNS(null,"fill","#FFFFFF");const Re=w.createNS("http://www.w3.org/2000/svg","g");Re.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ct=w.createNS("http://www.w3.org/2000/svg","circle");ct.setAttributeNS(null,"fill","#000000"),ct.setAttributeNS(null,"opacity","0.25"),ct.setAttributeNS(null,"cx","5.5"),ct.setAttributeNS(null,"cy","5.5"),ct.setAttributeNS(null,"r","5.4999962");const wt=w.createNS("http://www.w3.org/2000/svg","circle");wt.setAttributeNS(null,"fill","#FFFFFF"),wt.setAttributeNS(null,"cx","5.5"),wt.setAttributeNS(null,"cy","5.5"),wt.setAttributeNS(null,"r","5.4999962"),Re.appendChild(ct),Re.appendChild(wt),H.appendChild(q),H.appendChild(se),H.appendChild(we),H.appendChild(Me),H.appendChild(Re),m.appendChild(H),m.setAttributeNS(null,"height",v*this._scale+"px"),m.setAttributeNS(null,"width",S*this._scale+"px"),this._element.appendChild(m),this._offset=a.pointGeometry.convert(i&&i.offset||[0,-14])}this._element.classList.add("maplibregl-marker","mapboxgl-marker"),this._element.addEventListener("dragstart",m=>{m.preventDefault()}),this._element.addEventListener("mousedown",m=>{m.preventDefault()}),vn(this._element,this._anchor,"marker"),this._popup=null}addTo(i){return this.remove(),this._map=i,i.getCanvasContainer().appendChild(this._element),i.on("move",this._update),i.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),w.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(i){return this._lngLat=a.LngLat.convert(i),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(i){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),i){if(!("offset"in i.options)){const v=Math.sqrt(Math.pow(13.5,2)/2);i.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[v,-1*(38.1-13.5+v)],"bottom-right":[-v,-1*(38.1-13.5+v)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=i,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}_onKeyPress(i){const u=i.code,m=i.charCode||i.keyCode;u!=="Space"&&u!=="Enter"&&m!==32&&m!==13||this.togglePopup()}_onMapClick(i){const u=i.originalEvent.target,m=this._element;this._popup&&(u===m||m.contains(u))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const i=this._popup;return i?(i.isOpen()?i.remove():i.addTo(this._map),this):this}_update(i){if(!this._map)return;this._map.transform.renderWorldCopies&&(this._lngLat=dA(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);let u="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?u=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(u=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let m="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?m="rotateX(0deg)":this._pitchAlignment==="map"&&(m=`rotateX(${this._map.getPitch()}deg)`),i&&i.type!=="moveend"||(this._pos=this._pos.round()),w.setTransform(this._element,`${sn[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${m} ${u}`),this._map.style&&this._map.style.terrain&&!this._opacityTimeout&&(this._opacityTimeout=setTimeout(()=>{const v=this._map.unproject(this._pos),S=40075016686e-3*Math.abs(Math.cos(this._lngLat.lat*Math.PI/180))/Math.pow(2,this._map.transform.tileZoom+8);this._element.style.opacity=v.distanceTo(this._lngLat)>20*S?"0.2":"1.0",this._opacityTimeout=null},100))}getOffset(){return this._offset}setOffset(i){return this._offset=a.pointGeometry.convert(i),this._update(),this}_onMove(i){if(!this._isDragging){const u=this._clickTolerance||this._map._clickTolerance;this._isDragging=i.point.dist(this._pointerdownPos)>=u}this._isDragging&&(this._pos=i.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.Event("dragstart"))),this.fire(new a.Event("drag")))}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.Event("dragend")),this._state="inactive"}_addDragHandler(i){this._element.contains(i.originalEvent.target)&&(i.preventDefault(),this._positionDelta=i.point.sub(this._pos).add(this._offset),this._pointerdownPos=i.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))}setDraggable(i){return this._draggable=!!i,this._map&&(i?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(i){return this._rotation=i||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(i){return this._rotationAlignment=i||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(i){return this._pitchAlignment=i&&i!=="auto"?i:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}}const _l={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Sa,os=0,pA=!1;const Co={maxWidth:100,unit:"metric"};function bc(g,i,u){const m=u&&u.maxWidth||100,v=g._container.clientHeight/2,S=g.unproject([0,v]),M=g.unproject([m,v]),H=S.distanceTo(M);if(u&&u.unit==="imperial"){const q=3.2808*H;q>5280?mA(i,m,q/5280,g._getUIString("ScaleControl.Miles")):mA(i,m,q,g._getUIString("ScaleControl.Feet"))}else u&&u.unit==="nautical"?mA(i,m,H/1852,g._getUIString("ScaleControl.NauticalMiles")):H>=1e3?mA(i,m,H/1e3,g._getUIString("ScaleControl.Kilometers")):mA(i,m,H,g._getUIString("ScaleControl.Meters"))}function mA(g,i,u,m){const v=function(S){const M=Math.pow(10,`${Math.floor(S)}`.length-1);let H=S/M;return H=H>=10?10:H>=5?5:H>=3?3:H>=2?2:H>=1?1:function(q){const J=Math.pow(10,Math.ceil(-Math.log(q)/Math.LN10));return Math.round(q*J)/J}(H),M*H}(u);g.style.width=i*(v/u)+"px",g.innerHTML=`${v}&nbsp;${m}`}const Ji={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},ds=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function xc(g){if(g){if(typeof g=="number"){const i=Math.round(Math.sqrt(.5*Math.pow(g,2)));return{center:new a.pointGeometry(0,0),top:new a.pointGeometry(0,g),"top-left":new a.pointGeometry(i,i),"top-right":new a.pointGeometry(-i,i),bottom:new a.pointGeometry(0,-g),"bottom-left":new a.pointGeometry(i,-i),"bottom-right":new a.pointGeometry(-i,-i),left:new a.pointGeometry(g,0),right:new a.pointGeometry(-g,0)}}if(g instanceof a.pointGeometry||Array.isArray(g)){const i=a.pointGeometry.convert(g);return{center:i,top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{center:a.pointGeometry.convert(g.center||[0,0]),top:a.pointGeometry.convert(g.top||[0,0]),"top-left":a.pointGeometry.convert(g["top-left"]||[0,0]),"top-right":a.pointGeometry.convert(g["top-right"]||[0,0]),bottom:a.pointGeometry.convert(g.bottom||[0,0]),"bottom-left":a.pointGeometry.convert(g["bottom-left"]||[0,0]),"bottom-right":a.pointGeometry.convert(g["bottom-right"]||[0,0]),left:a.pointGeometry.convert(g.left||[0,0]),right:a.pointGeometry.convert(g.right||[0,0])}}return xc(new a.pointGeometry(0,0))}const ha={supported:d,setRTLTextPlugin:a.setRTLTextPlugin,getRTLTextPluginStatus:a.getRTLTextPluginStatus,Map:class extends Ui{constructor(g){var i;if(a.PerformanceUtils.mark(a.PerformanceMarkers.create),(g=a.extend({},Hc,g)).minZoom!=null&&g.maxZoom!=null&&g.minZoom>g.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(g.minPitch!=null&&g.maxPitch!=null&&g.minPitch>g.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(g.minPitch!=null&&g.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(g.maxPitch!=null&&g.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Ro(g.minZoom,g.maxZoom,g.minPitch,g.maxPitch,g.renderWorldCopies),{bearingSnap:g.bearingSnap}),this._interactive=g.interactive,this._cooperativeGestures=g.cooperativeGestures,this._maxTileCacheSize=g.maxTileCacheSize,this._failIfMajorPerformanceCaveat=g.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=g.preserveDrawingBuffer,this._antialias=g.antialias,this._trackResize=g.trackResize,this._bearingSnap=g.bearingSnap,this._refreshExpiredTiles=g.refreshExpiredTiles,this._fadeDuration=g.fadeDuration,this._crossSourceCollisions=g.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=g.collectResourceTiming,this._renderTaskQueue=new DA,this._controls=[],this._mapId=a.uniqueId(),this._locale=a.extend({},zc,g.locale),this._clickTolerance=g.clickTolerance,this._pixelRatio=(i=g.pixelRatio)!==null&&i!==void 0?i:devicePixelRatio,this._requestManager=new x(g.transformRequest),typeof g.container=="string"){if(this._container=document.getElementById(g.container),!this._container)throw new Error(`Container '${g.container}' not found.`)}else{if(!(g.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=g.container}if(g.maxBounds&&this.setMaxBounds(g.maxBounds),a.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),typeof window<"u"&&(addEventListener("online",this._onWindowOnline,!1),addEventListener("resize",this._onWindowResize,!1),addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new PA(this,g),this._cooperativeGestures&&this._setupCooperativeGestures(),this._hash=g.hash&&new zi(typeof g.hash=="string"&&g.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:g.center,zoom:g.zoom,bearing:g.bearing,pitch:g.pitch}),g.bounds&&(this.resize(),this.fitBounds(g.bounds,a.extend({},g.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=g.localIdeographFontFamily,g.style&&this.setStyle(g.style,{localIdeographFontFamily:g.localIdeographFontFamily}),g.attributionControl&&this.addControl(new kA({customAttribution:g.customAttribution})),g.maplibreLogo&&this.addControl(new MA,g.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",u=>{this._update(u.dataType==="style"),this.fire(new a.Event(`${u.dataType}data`,u))}),this.on("dataloading",u=>{this.fire(new a.Event(`${u.dataType}dataloading`,u))}),this.on("dataabort",u=>{this.fire(new a.Event("sourcedataabort",u))})}_getMapId(){return this._mapId}addControl(g,i){if(i===void 0&&(i=g.getDefaultPosition?g.getDefaultPosition():"top-right"),!g||!g.onAdd)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const u=g.onAdd(this);this._controls.push(g);const m=this._controlPositions[i];return i.indexOf("bottom")!==-1?m.insertBefore(u,m.firstChild):m.appendChild(u),this}removeControl(g){if(!g||!g.onRemove)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(g);return i>-1&&this._controls.splice(i,1),g.onRemove(this),this}hasControl(g){return this._controls.indexOf(g)>-1}calculateCameraOptionsFromTo(g,i,u,m){return m==null&&this.style.terrain&&(m=this.transform.getElevation(u,this.style.terrain)),super.calculateCameraOptionsFromTo(g,i,u,m)}resize(g){const i=this._containerDimensions(),u=i[0],m=i[1];this._resizeCanvas(u,m,this.getPixelRatio()),this.transform.resize(u,m),this.painter.resize(u,m,this.getPixelRatio());const v=!this._moving;return v&&(this.stop(),this.fire(new a.Event("movestart",g)).fire(new a.Event("move",g))),this.fire(new a.Event("resize",g)),v&&this.fire(new a.Event("moveend",g)),this}getPixelRatio(){return this._pixelRatio}setPixelRatio(g){const[i,u]=this._containerDimensions();this._pixelRatio=g,this._resizeCanvas(i,u,g),this.painter.resize(i,u,g)}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(g){return this.transform.setMaxBounds(a.LngLatBounds.convert(g)),this._update()}setMinZoom(g){if((g=g??-2)>=-2&&g<=this.transform.maxZoom)return this.transform.minZoom=g,this._update(),this.getZoom()<g&&this.setZoom(g),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(g){if((g=g??22)>=this.transform.minZoom)return this.transform.maxZoom=g,this._update(),this.getZoom()>g&&this.setZoom(g),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(g){if((g=g??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(g>=0&&g<=this.transform.maxPitch)return this.transform.minPitch=g,this._update(),this.getPitch()<g&&this.setPitch(g),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(g){if((g=g??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(g>=this.transform.minPitch)return this.transform.maxPitch=g,this._update(),this.getPitch()>g&&this.setPitch(g),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(g){return this.transform.renderWorldCopies=g,this._update()}project(g){return this.transform.locationPoint(a.LngLat.convert(g),this.style&&this.style.terrain)}unproject(g){return this.transform.pointLocation(a.pointGeometry.convert(g),this.style&&this.style.terrain)}isMoving(){return this._moving||this.handlers.isMoving()}isZooming(){return this._zooming||this.handlers.isZooming()}isRotating(){return this._rotating||this.handlers.isRotating()}_createDelegatedListener(g,i,u){if(g==="mouseenter"||g==="mouseover"){let m=!1;return{layer:i,listener:u,delegates:{mousemove:S=>{const M=this.getLayer(i)?this.queryRenderedFeatures(S.point,{layers:[i]}):[];M.length?m||(m=!0,u.call(this,new as(g,this,S.originalEvent,{features:M}))):m=!1},mouseout:()=>{m=!1}}}}if(g==="mouseleave"||g==="mouseout"){let m=!1;return{layer:i,listener:u,delegates:{mousemove:M=>{(this.getLayer(i)?this.queryRenderedFeatures(M.point,{layers:[i]}):[]).length?m=!0:m&&(m=!1,u.call(this,new as(g,this,M.originalEvent)))},mouseout:M=>{m&&(m=!1,u.call(this,new as(g,this,M.originalEvent)))}}}}{const m=v=>{const S=this.getLayer(i)?this.queryRenderedFeatures(v.point,{layers:[i]}):[];S.length&&(v.features=S,u.call(this,v),delete v.features)};return{layer:i,listener:u,delegates:{[g]:m}}}}on(g,i,u){if(u===void 0)return super.on(g,i);const m=this._createDelegatedListener(g,i,u);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[g]=this._delegatedListeners[g]||[],this._delegatedListeners[g].push(m);for(const v in m.delegates)this.on(v,m.delegates[v]);return this}once(g,i,u){if(u===void 0)return super.once(g,i);const m=this._createDelegatedListener(g,i,u);for(const v in m.delegates)this.once(v,m.delegates[v]);return this}off(g,i,u){return u===void 0?super.off(g,i):(this._delegatedListeners&&this._delegatedListeners[g]&&(m=>{const v=this._delegatedListeners[g];for(let S=0;S<v.length;S++){const M=v[S];if(M.layer===i&&M.listener===u){for(const H in M.delegates)this.off(H,M.delegates[H]);return v.splice(S,1),this}}})(),this)}queryRenderedFeatures(g,i){if(!this.style)return[];let u;if(i!==void 0||g===void 0||g instanceof a.pointGeometry||Array.isArray(g)||(i=g,g=void 0),i=i||{},(g=g||[[0,0],[this.transform.width,this.transform.height]])instanceof a.pointGeometry||typeof g[0]=="number")u=[a.pointGeometry.convert(g)];else{const m=a.pointGeometry.convert(g[0]),v=a.pointGeometry.convert(g[1]);u=[m,new a.pointGeometry(v.x,m.y),v,new a.pointGeometry(m.x,v.y),m]}return this.style.queryRenderedFeatures(u,i,this.transform)}querySourceFeatures(g,i){return this.style.querySourceFeatures(g,i)}setStyle(g,i){return(i=a.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},i)).diff!==!1&&i.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&g?(this._diffStyle(g,i),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._updateStyle(g,i))}setTransformRequest(g){return this._requestManager.setTransformRequest(g),this}_getUIString(g){const i=this._locale[g];if(i==null)throw new Error(`Missing UI string '${g}'`);return i}_updateStyle(g,i){return this.style&&(this.style.setEventedParent(null),this.style._remove()),g?(this.style=new wi(this,i||{}),this.style.setEventedParent(this,{style:this.style}),typeof g=="string"?this.style.loadURL(g):this.style.loadJSON(g),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new wi(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(g,i){if(typeof g=="string"){const u=this._requestManager.transformRequest(g,a.ResourceType.Style);a.getJSON(u,(m,v)=>{m?this.fire(new a.ErrorEvent(m)):v&&this._updateDiff(v,i)})}else typeof g=="object"&&this._updateDiff(g,i)}_updateDiff(g,i){try{this.style.setState(g)&&this._update(!0)}catch(u){a.warnOnce(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(g,i)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():a.warnOnce("There is no style added to the map.")}addSource(g,i){return this._lazyInitEmptyStyle(),this.style.addSource(g,i),this._update(!0)}isSourceLoaded(g){const i=this.style&&this.style.sourceCaches[g];if(i!==void 0)return i.loaded();this.fire(new a.ErrorEvent(new Error(`There is no source with ID '${g}'`)))}setTerrain(g){return this.style.setTerrain(g),this}getTerrain(){return this.style.terrain&&this.style.terrain.options}areTilesLoaded(){const g=this.style&&this.style.sourceCaches;for(const i in g){const u=g[i]._tiles;for(const m in u){const v=u[m];if(v.state!=="loaded"&&v.state!=="errored")return!1}}return!0}addSourceType(g,i,u){return this._lazyInitEmptyStyle(),this.style.addSourceType(g,i,u)}removeSource(g){return this.style.removeSource(g),this._update(!0)}getSource(g){return this.style.getSource(g)}addImage(g,i,{pixelRatio:u=1,sdf:m=!1,stretchX:v,stretchY:S,content:M}={}){if(this._lazyInitEmptyStyle(),i instanceof HTMLImageElement||a.isImageBitmap(i)){const{width:H,height:q,data:J}=a.exported.getImageData(i);this.style.addImage(g,{data:new a.RGBAImage({width:H,height:q},J),pixelRatio:u,stretchX:v,stretchY:S,content:M,sdf:m,version:0})}else{if(i.width===void 0||i.height===void 0)return this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:H,height:q,data:J}=i,se=i;this.style.addImage(g,{data:new a.RGBAImage({width:H,height:q},new Uint8Array(J)),pixelRatio:u,stretchX:v,stretchY:S,content:M,sdf:m,version:0,userImage:se}),se.onAdd&&se.onAdd(this,g)}}}updateImage(g,i){const u=this.style.getImage(g);if(!u)return this.fire(new a.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const m=i instanceof HTMLImageElement||a.isImageBitmap(i)?a.exported.getImageData(i):i,{width:v,height:S,data:M}=m;if(v===void 0||S===void 0)return this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(v!==u.data.width||S!==u.data.height)return this.fire(new a.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));const H=!(i instanceof HTMLImageElement||a.isImageBitmap(i));u.data.replace(M,H),this.style.updateImage(g,u)}hasImage(g){return g?!!this.style.getImage(g):(this.fire(new a.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(g){this.style.removeImage(g)}loadImage(g,i){a.getImage(this._requestManager.transformRequest(g,a.ResourceType.Image),i)}listImages(){return this.style.listImages()}addLayer(g,i){return this._lazyInitEmptyStyle(),this.style.addLayer(g,i),this._update(!0)}moveLayer(g,i){return this.style.moveLayer(g,i),this._update(!0)}removeLayer(g){return this.style.removeLayer(g),this._update(!0)}getLayer(g){return this.style.getLayer(g)}setLayerZoomRange(g,i,u){return this.style.setLayerZoomRange(g,i,u),this._update(!0)}setFilter(g,i,u={}){return this.style.setFilter(g,i,u),this._update(!0)}getFilter(g){return this.style.getFilter(g)}setPaintProperty(g,i,u,m={}){return this.style.setPaintProperty(g,i,u,m),this._update(!0)}getPaintProperty(g,i){return this.style.getPaintProperty(g,i)}setLayoutProperty(g,i,u,m={}){return this.style.setLayoutProperty(g,i,u,m),this._update(!0)}getLayoutProperty(g,i){return this.style.getLayoutProperty(g,i)}setLight(g,i={}){return this._lazyInitEmptyStyle(),this.style.setLight(g,i),this._update(!0)}getLight(){return this.style.getLight()}setFeatureState(g,i){return this.style.setFeatureState(g,i),this._update()}removeFeatureState(g,i){return this.style.removeFeatureState(g,i),this._update()}getFeatureState(g){return this.style.getFeatureState(g)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let g=0,i=0;return this._container&&(g=this._container.clientWidth||400,i=this._container.clientHeight||300),[g,i]}_setupContainer(){const g=this._container;g.classList.add("maplibregl-map","mapboxgl-map");const i=this._canvasContainer=w.create("div","maplibregl-canvas-container mapboxgl-canvas-container",g);this._interactive&&i.classList.add("maplibregl-interactive","mapboxgl-interactive"),this._canvas=w.create("canvas","maplibregl-canvas mapboxgl-canvas",i),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");const u=this._containerDimensions();this._resizeCanvas(u[0],u[1],this.getPixelRatio());const m=this._controlContainer=w.create("div","maplibregl-control-container mapboxgl-control-container",g),v=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(S=>{v[S]=w.create("div",`maplibregl-ctrl-${S} mapboxgl-ctrl-${S}`,m)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_setupCooperativeGestures(){const g=this._container;this._metaPress=!1,this._cooperativeGesturesScreen=w.create("div","maplibregl-cooperative-gesture-screen",g);let i="Control",u=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.windowsHelpText?this._cooperativeGestures.windowsHelpText:"Use Ctrl + scroll to zoom the map";navigator.platform.indexOf("Mac")===0&&(u=typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.macHelpText?this._cooperativeGestures.macHelpText:"Use ⌘ + scroll to zoom the map",i="Meta"),this._cooperativeGesturesScreen.innerHTML=`
            <div class="maplibregl-desktop-message">${u}</div>
            <div class="maplibregl-mobile-message">${typeof this._cooperativeGestures!="boolean"&&this._cooperativeGestures.mobileHelpText?this._cooperativeGestures.mobileHelpText:"Use two fingers to move the map"}</div>
        `,document.addEventListener("keydown",m=>{m.key===i&&(this._metaPress=!0)}),document.addEventListener("keyup",m=>{m.key===i&&(this._metaPress=!1)}),this._canvasContainer.addEventListener("wheel",m=>{this._onCooperativeGesture(m,this._metaPress,1)},!1),this._canvasContainer.classList.remove("mapboxgl-touch-drag-pan","maplibregl-touch-drag-pan")}_resizeCanvas(g,i,u){this._canvas.width=u*g,this._canvas.height=u*i,this._canvas.style.width=`${g}px`,this._canvas.style.height=`${i}px`}_setupPainter(){const g=a.extend({},d.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),i=this._canvas.getContext("webgl",g)||this._canvas.getContext("experimental-webgl",g);i?(this.painter=new uA(i,this.transform),a.exported$1.testSupport(i)):this.fire(new a.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(g){g.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new a.Event("webglcontextlost",{originalEvent:g}))}_contextRestored(g){this._setupPainter(),this.resize(),this._update(),this.fire(new a.Event("webglcontextrestored",{originalEvent:g}))}_onMapScroll(g){if(g.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}_onCooperativeGesture(g,i,u){return!i&&u<2&&(this._cooperativeGesturesScreen.classList.add("maplibregl-show"),setTimeout(()=>{this._cooperativeGesturesScreen.classList.remove("maplibregl-show")},100)),!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(g){return this.style?(this._styleDirty=this._styleDirty||g,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(g){return this._update(),this._renderTaskQueue.add(g)}_cancelRenderFrame(g){this._renderTaskQueue.remove(g)}_render(g){let i,u=0;const m=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(i=m.createQueryEXT(),m.beginQueryEXT(m.TIME_ELAPSED_EXT,i),u=a.exported.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(g),this._removed)return;let v=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const M=this.transform.zoom,H=a.exported.now();this.style.zoomHistory.update(M,H);const q=new a.EvaluationParameters(M,{now:H,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),J=q.crossFadingFactor();J===1&&J===this._crossFadingFactor||(v=!0,this._crossFadingFactor=J),this.style.update(q)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.style.terrain&&this.style.terrain.sourceCache.update(this.transform,this.style.terrain),this.transform.updateElevation(this.style.terrain),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new a.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.PerformanceUtils.mark(a.PerformanceMarkers.load),this.fire(new a.Event("load"))),this.style&&(this.style.hasTransitions()||v)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){const M=a.exported.now()-u;m.endQueryEXT(m.TIME_ELAPSED_EXT,i),setTimeout(()=>{const H=m.getQueryObjectEXT(i,m.QUERY_RESULT_EXT)/1e6;m.deleteQueryEXT(i),this.fire(new a.Event("gpu-timing-frame",{cpuTime:M,gpuTime:H}))},50)}if(this.listens("gpu-timing-layer")){const M=this.painter.collectGpuTimers();setTimeout(()=>{const H=this.painter.queryGpuTimers(M);this.fire(new a.Event("gpu-timing-layer",{layerTimes:H}))},50)}const S=this._sourcesDirty||this._styleDirty||this._placementDirty;return S||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.Event("idle")),!this._loaded||this._fullyLoaded||S||(this._fullyLoaded=!0,a.PerformanceUtils.mark(a.PerformanceMarkers.fullLoad)),this}redraw(){return this.style&&(this._frame&&(this._frame.cancel(),this._frame=null),this._render(0)),this}remove(){this._hash&&this._hash.remove();for(const i of this._controls)i.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&(removeEventListener("resize",this._onWindowResize,!1),removeEventListener("orientationchange",this._onWindowResize,!1),removeEventListener("online",this._onWindowOnline,!1));const g=this.painter.context.gl.getExtension("WEBGL_lose_context");g&&g.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),w.remove(this._canvasContainer),w.remove(this._controlContainer),this._cooperativeGestures&&w.remove(this._cooperativeGesturesScreen),this._container.classList.remove("maplibregl-map","mapboxgl-map"),a.PerformanceUtils.clearMetrics(),this._removed=!0,this.fire(new a.Event("remove"))}triggerRepaint(){this.style&&!this._frame&&(this._frame=a.exported.frame(g=>{a.PerformanceUtils.frame(g),this._frame=null,this._render(g)}))}_onWindowOnline(){this._update()}_onWindowResize(g){this._trackResize&&this.resize({originalEvent:g})._update()}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(g){this._showTileBoundaries!==g&&(this._showTileBoundaries=g,this._update())}get showPadding(){return!!this._showPadding}set showPadding(g){this._showPadding!==g&&(this._showPadding=g,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(g){this._showCollisionBoxes!==g&&(this._showCollisionBoxes=g,g?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(g){this._showOverdrawInspector!==g&&(this._showOverdrawInspector=g,this._update())}get repaint(){return!!this._repaint}set repaint(g){this._repaint!==g&&(this._repaint=g,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(g){this._vertices=g,this._update()}_setCacheLimits(g,i){a.setCacheLimits(g,i)}get version(){return"2.4.0"}},NavigationControl:class{constructor(g){this.options=a.extend({},Vc,g),this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",i=>i.preventDefault()),this.options.showZoom&&(a.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in mapboxgl-ctrl-zoom-in",i=>this._map.zoomIn({},{originalEvent:i})),w.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out mapboxgl-ctrl-zoom-out",i=>this._map.zoomOut({},{originalEvent:i})),w.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(a.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("maplibregl-ctrl-compass mapboxgl-ctrl-compass",i=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:i}):this._map.resetNorth({},{originalEvent:i})}),this._compassIcon=w.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const g=this._map.getZoom(),i=g===this._map.getMaxZoom(),u=g===this._map.getMinZoom();this._zoomInButton.disabled=i,this._zoomOutButton.disabled=u,this._zoomInButton.setAttribute("aria-disabled",i.toString()),this._zoomOutButton.setAttribute("aria-disabled",u.toString())}_rotateCompassArrow(){const g=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=g}onAdd(g){return this._map=g,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Bo(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){w.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(g,i){const u=w.create("button",g,this._container);return u.type="button",u.addEventListener("click",i),u}_setButtonTitle(g,i){const u=this._map._getUIString(`NavigationControl.${i}`);g.title=u,g.setAttribute("aria-label",u)}},GeolocateControl:class extends a.Evented{constructor(g){super(),this.options=a.extend({},_l,g),a.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}onAdd(g){var i;return this._map=g,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),i=this._setupUI,Sa!==void 0?i(Sa):window.navigator.permissions!==void 0?window.navigator.permissions.query({name:"geolocation"}).then(u=>{Sa=u.state!=="denied",i(Sa)}):(Sa=!!window.navigator.geolocation,i(Sa)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),w.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,os=0,pA=!1}_isOutOfMapMaxBounds(g){const i=this._map.getMaxBounds(),u=g.coords;return i&&(u.longitude<i.getWest()||u.longitude>i.getEast()||u.latitude<i.getSouth()||u.latitude>i.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_onSuccess(g){if(this._map){if(this._isOutOfMapMaxBounds(g))return this._setErrorState(),this.fire(new a.Event("outofmaxbounds",g)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=g,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(g),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(g),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new a.Event("geolocate",g)),this._finish()}}_updateCamera(g){const i=new a.LngLat(g.coords.longitude,g.coords.latitude),u=g.coords.accuracy,m=this._map.getBearing(),v=a.extend({bearing:m},this.options.fitBoundsOptions);this._map.fitBounds(i.toBounds(u),v,{geolocateSource:!0})}_updateMarker(g){if(g){const i=new a.LngLat(g.coords.longitude,g.coords.latitude);this._accuracyCircleMarker.setLngLat(i).addTo(this._map),this._userLocationDotMarker.setLngLat(i).addTo(this._map),this._accuracy=g.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const g=this._map._container.clientHeight/2,i=this._map.unproject([0,g]),u=this._map.unproject([1,g]),m=i.distanceTo(u),v=Math.ceil(2*this._accuracy/m);this._circleElement.style.width=`${v}px`,this._circleElement.style.height=`${v}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_onError(g){if(this._map){if(this.options.trackUserLocation)if(g.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(g.code===3&&pA)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale","mapboxgl-user-location-dot-stale"),this.fire(new a.Event("error",g)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(g){if(this._container.addEventListener("contextmenu",i=>i.preventDefault()),this._geolocateButton=w.create("button","maplibregl-ctrl-geolocate mapboxgl-ctrl-geolocate",this._container),w.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",g===!1){a.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const i=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i)}else{const i=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=i,this._geolocateButton.setAttribute("aria-label",i)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=w.create("div","maplibregl-user-location-dot mapboxgl-user-location-dot"),this._userLocationDotMarker=new tl(this._dotElement),this._circleElement=w.create("div","maplibregl-user-location-accuracy-circle mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new tl({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",i=>{i.geolocateSource||this._watchState!=="ACTIVE_LOCK"||i.originalEvent&&i.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this.fire(new a.Event("trackuserlocationend")))})}trigger(){if(!this._setup)return a.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":os--,pA=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error","mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error","mapboxgl-ctrl-geolocate-background-error"),this.fire(new a.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background","mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.Event("trackuserlocationstart"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active","mapboxgl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let g;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),os++,os>1?(g={maximumAge:6e5,timeout:0},pA=!0):(g=this.options.positionOptions,pA=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,g)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting","mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:kA,LogoControl:MA,ScaleControl:class{constructor(g){this.options=a.extend({},Co,g),a.bindAll(["_onMove","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_onMove(){bc(this._map,this._container,this.options)}onAdd(g){return this._map=g,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-scale mapboxgl-ctrl mapboxgl-ctrl-scale",g.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){w.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}setUnit(g){this.options.unit=g,bc(this._map,this._container,this.options)}},FullscreenControl:class{constructor(g){this._fullscreen=!1,g&&g.container&&(g.container instanceof HTMLElement?this._container=g.container:a.warnOnce("Full screen control 'container' must be a DOM element.")),a.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(g){return this._map=g,this._container||(this._container=this._map.getContainer()),this._controlContainer=w.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",a.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){w.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!!(document.fullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled)}_setupUI(){const g=this._fullscreenButton=w.create("button","maplibregl-ctrl-fullscreen mapboxgl-ctrl-fullscreen",this._controlContainer);w.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",g).setAttribute("aria-hidden","true"),g.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const g=this._getTitle();this._fullscreenButton.setAttribute("aria-label",g),this._fullscreenButton.title=g}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen&&window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},TerrainControl:class{constructor(g){this.options=g,a.bindAll(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(g){return this._map=g,this._container=w.create("div","maplibregl-ctrl maplibregl-ctrl-group mapboxgl-ctrl mapboxgl-ctrl-group"),this._terrainButton=w.create("button","maplibregl-ctrl-terrain mapboxgl-ctrl-terrain",this._container),w.create("span","maplibregl-ctrl-icon mapboxgl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){w.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._map.style.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled","mapboxgl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.disableTerrain")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain","mapboxgl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.enableTerrain"))}},Popup:class extends a.Evented{constructor(g){super(),this.options=a.extend(Object.create(Ji),g),a.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}addTo(g){return this._map&&this.remove(),this._map=g,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new a.Event("open")),this}isOpen(){return!!this._map}remove(){return this._content&&w.remove(this._content),this._container&&(w.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new a.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(g){return this._lngLat=a.LngLat.convert(g),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer","mapboxgl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer","mapboxgl-track-pointer")),this}getElement(){return this._container}setText(g){return this.setDOMContent(document.createTextNode(g))}setHTML(g){const i=document.createDocumentFragment(),u=document.createElement("body");let m;for(u.innerHTML=g;m=u.firstChild,m;)i.appendChild(m);return this.setDOMContent(i)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(g){return this.options.maxWidth=g,this._update(),this}setDOMContent(g){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=w.create("div","maplibregl-popup-content mapboxgl-popup-content",this._container);return this._content.appendChild(g),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(g){this._container&&this._container.classList.add(g)}removeClassName(g){this._container&&this._container.classList.remove(g)}setOffset(g){return this.options.offset=g,this._update(),this}toggleClassName(g){if(this._container)return this._container.classList.toggle(g)}_createCloseButton(){this.options.closeButton&&(this._closeButton=w.create("button","maplibregl-popup-close-button mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_onMouseUp(g){this._update(g.point)}_onMouseMove(g){this._update(g.point)}_onDrag(g){this._update(g.point)}_update(g){if(!this._map||!this._lngLat&&!this._trackPointer||!this._content||(this._container||(this._container=w.create("div","maplibregl-popup mapboxgl-popup",this._map.getContainer()),this._tip=w.create("div","maplibregl-popup-tip mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(S=>this._container.classList.add(S)),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer","mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=dA(this._lngLat,this._pos,this._map.transform)),this._trackPointer&&!g))return;const i=this._pos=this._trackPointer&&g?g:this._map.project(this._lngLat);let u=this.options.anchor;const m=xc(this.options.offset);if(!u){const S=this._container.offsetWidth,M=this._container.offsetHeight;let H;H=i.y+m.bottom.y<M?["top"]:i.y>this._map.transform.height-M?["bottom"]:[],i.x<S/2?H.push("left"):i.x>this._map.transform.width-S/2&&H.push("right"),u=H.length===0?"bottom":H.join("-")}const v=i.add(m[u]).round();w.setTransform(this._container,`${sn[u]} translate(${v.x}px,${v.y}px)`),vn(this._container,u,"popup")}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const g=this._container.querySelector(ds);g&&g.focus()}_onClose(){this.remove()}},Marker:tl,Style:wi,LngLat:a.LngLat,LngLatBounds:a.LngLatBounds,Point:a.pointGeometry,MercatorCoordinate:a.MercatorCoordinate,Evented:a.Evented,AJAXError:a.AJAXError,config:a.config,CanvasSource:St,GeoJSONSource:Ke,ImageSource:rt,RasterDEMTileSource:Le,RasterTileSource:ve,VectorTileSource:xe,VideoSource:je,prewarm:function(){Oe().acquire(ht)},clearPrewarmedResources:function(){const g=Pt;g&&(g.isPreloaded()&&g.numActive()===1?(g.release(ht),Pt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get version(){return"2.4.0"},get workerCount(){return Nt.workerCount},set workerCount(g){Nt.workerCount=g},get maxParallelImageRequests(){return a.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(g){a.config.MAX_PARALLEL_IMAGE_REQUESTS=g},clearStorage(g){a.clearTileCache(g)},workerUrl:"",addProtocol(g,i){a.config.REGISTERED_PROTOCOLS[g]=i},removeProtocol(g){delete a.config.REGISTERED_PROTOCOLS[g]}};return Fa.extend(ha,{isSafari:a.isSafari,getPerformanceMetrics:a.PerformanceUtils.getPerformanceMetrics}),ha});var h=l;return h})})(Cw);const Ou=Xm;const{document:Ew}=Gy;function p0(e){let t;const r=e[18].default,s=wA(r,e,e[17],null);return{c(){s&&s.c()},m(l,c){s&&s.m(l,c),t=!0},p(l,c){s&&s.p&&(!t||c&131072)&&xA(s,r,l,l[17],t?bA(r,l[17],c,null):BA(l[17]),null)},i(l){t||(Mt(s,l),t=!0)},o(l){Gt(s,l),t=!1},d(l){s&&s.d(l)}}}function Fw(e){let t,r,s,l,c=e[2]&&p0(e);return{c(){t=Lt("link"),r=$t(),s=Lt("div"),c&&c.c(),ue(t,"rel","stylesheet"),ue(t,"href","https://unpkg.com/maplibre-gl@2.1.9/dist/maplibre-gl.css"),ue(s,"id",e[0]),ue(s,"class","map svelte-1wo1snc")},m(h,a){it(Ew.head,t),At(h,r,a),At(h,s,a),c&&c.m(s,null),e[19](s),l=!0},p(h,[a]){h[2]?c?(c.p(h,a),a&4&&Mt(c,1)):(c=p0(h),c.c(),Mt(c,1),c.m(s,null)):c&&(Xa(),Gt(c,1,1,()=>{c=null}),Za()),(!l||a&1)&&ue(s,"id",h[0])},i(h){l||(Mt(c),l=!0)},o(h){Gt(c),l=!1},d(h){at(t),h&&at(r),h&&at(s),c&&c.d(),e[19](null)}}}function Sw(e=100){return new Promise(t=>setTimeout(t,e))}function Iw(e,t,r){let{$$slots:s={},$$scope:l}=t;const c=$h();let{map:h}=t,{id:a="map"}=t,{location:d={lng:15,lat:45,zoom:1}}=t,{style:_={version:8,sources:{},layers:[{id:"background",type:"background",paint:{"background-color":"lightgrey"}}]}}=t,{options:p={}}=t,{minzoom:E=0}=t,{maxzoom:w=24}=t,{controls:x=!1}=t,{tabbable:Q=!1}=t,{zoom:P=null}=t,{center:R=null}=t,{pitch:k=null}=t,{bearing:O=null}=t,{interactive:G=!0}=t,{attribution:K=!0}=t,Z,$={},fe=!1;Gh("map",{getMap:()=>h}),d.bounds?$.bounds=d.bounds:d.lng&&d.lat&&($.center=[+d.lng,+d.lat],d.zoom&&($.zoom=+d.zoom),d.pitch&&($.pitch=+d.pitch),d.bearing&&($.bearing=+d.bearing)),K||($.attributionControl=!1),$={...$,...p},Wa(()=>{r(3,h=new Ou.Map({container:Z,style:_,minZoom:E,maxZoom:w,interactive:G,...$})),x&&!Array.isArray(x)?h.addControl(new Ou.NavigationControl({showCompass:!1})):Array.isArray(x)&&x!=["locate"]&&h.addControl(new Ou.NavigationControl({showCompass:x.includes("compass"),visualizePitch:x.includes("pitch")})),Array.isArray(x)&&x.includes("locate")&&h.addControl(new Ou.GeolocateControl),h.addControl(new Ou.FullscreenControl),h.on("load",he=>{r(4,P=h.getZoom()),r(5,R=h.getCenter()),r(6,k=h.getPitch()),r(7,O=h.getBearing()),r(2,fe=!0),!Q&&document.querySelector(`#${a} canvas`)&&(document.querySelector(`#${a} canvas`).tabIndex="-1"),c("load",{event:he})}),h.loadImage("https://vera-insights-data-viz.s3.amazonaws.com/louisiana/diag.png",function(he,ee){if(he)throw he;h.addImage("pattern",ee)}),h.on("moveend",()=>{r(4,P=h.getZoom()),r(5,R=h.getCenter()),r(6,k=h.getPitch()),r(7,O=h.getBearing())})}),Qp(async()=>{await Sw(250),h&&h.remove(),r(3,h=null)});function Ae(he){h&&h.setStyle(he),c("style",{style:he})}function ge(he){qa[he?"unshift":"push"](()=>{Z=he,r(1,Z)})}return e.$$set=he=>{"map"in he&&r(3,h=he.map),"id"in he&&r(0,a=he.id),"location"in he&&r(8,d=he.location),"style"in he&&r(9,_=he.style),"options"in he&&r(10,p=he.options),"minzoom"in he&&r(11,E=he.minzoom),"maxzoom"in he&&r(12,w=he.maxzoom),"controls"in he&&r(13,x=he.controls),"tabbable"in he&&r(14,Q=he.tabbable),"zoom"in he&&r(4,P=he.zoom),"center"in he&&r(5,R=he.center),"pitch"in he&&r(6,k=he.pitch),"bearing"in he&&r(7,O=he.bearing),"interactive"in he&&r(15,G=he.interactive),"attribution"in he&&r(16,K=he.attribution),"$$scope"in he&&r(17,l=he.$$scope)},e.$$.update=()=>{e.$$.dirty&512&&Ae(_)},[a,Z,fe,h,P,R,k,O,d,_,p,E,w,x,Q,G,K,l,s,ge]}let Ug=class extends ni{constructor(t){super(),ri(this,t,Iw,Fw,ei,{map:3,id:0,location:8,style:9,options:10,minzoom:11,maxzoom:12,controls:13,tabbable:14,zoom:4,center:5,pitch:6,bearing:7,interactive:15,attribution:16})}};function m0(e){let t;const r=e[12].default,s=wA(r,e,e[11],null);return{c(){s&&s.c()},m(l,c){s&&s.m(l,c),t=!0},p(l,c){s&&s.p&&(!t||c&2048)&&xA(s,r,l,l[11],t?bA(r,l[11],c,null):BA(l[11]),null)},i(l){t||(Mt(s,l),t=!0)},o(l){Gt(s,l),t=!1},d(l){s&&s.d(l)}}}function Tw(e){let t,r,s=e[0]&&m0(e);return{c(){s&&s.c(),t=yo()},m(l,c){s&&s.m(l,c),At(l,t,c),r=!0},p(l,[c]){l[0]?s?(s.p(l,c),c&1&&Mt(s,1)):(s=m0(l),s.c(),Mt(s,1),s.m(t.parentNode,t)):s&&(Xa(),Gt(s,1,1,()=>{s=null}),Za())},i(l){r||(Mt(s),r=!0)},o(l){Gt(s),r=!1},d(l){s&&s.d(l),l&&at(t)}}}function Uw(e=1e3){return new Promise(t=>setTimeout(t,e))}function Lw(e,t,r){let{$$slots:s={},$$scope:l}=t,{id:c}=t,{type:h}=t,{url:a=null}=t,{props:d={}}=t,{data:_=null}=t,{layer:p=null}=t,{promoteId:E=null}=t,{minzoom:w=null}=t,{maxzoom:x=null}=t,{tilesize:Q=256}=t,P=!1;const{getMap:R}=$o("map"),k=R();Gh("source",{source:c,layer:p,promoteId:E}),k.getSource(c)&&k.removeSource(c);async function O(){await Uw(1e3),k.isSourceLoaded(c)?r(0,P=!0):r(0,P=!1)}w&&(d.minzoom=w),x&&(d.maxzoom=x),p&&E?(d.promoteId={},d.promoteId[p]=E):E&&(d.promoteId=E);function G(){let fe;h=="geojson"?_?fe={type:h,data:_,...d}:a&&(fe={type:h,data:a,...d}):h=="vector"?fe={type:h,tiles:[a],...d}:h=="raster"?fe={type:h,tiles:[a],tileSize:Q,...d}:h=="raster-dem"&&(fe={type:h,tiles:[a],tileSize:Q,...d}),fe&&(k.addSource(c,fe),O())}G();function K(fe){let Ae=k.getSource(c);Ae&&Ae.setData(fe)}function Z(fe){let Ae=k.getSource(c);Ae&&Ae.setTiles([fe])}function $(fe){k.getSource(c).tiles=[fe],k.style.sourceCaches[c].clearTiles(),k.style.sourceCaches[c].update(k.transform),k.triggerRepaint()}return Qp(async()=>{k&&k.getSource(c)&&(k.getStyle().layers.filter(Ae=>Ae.source==c).forEach(Ae=>{k.removeLayer(Ae.id)}),k.removeSource(c))}),e.$$set=fe=>{"id"in fe&&r(2,c=fe.id),"type"in fe&&r(3,h=fe.type),"url"in fe&&r(4,a=fe.url),"props"in fe&&r(1,d=fe.props),"data"in fe&&r(5,_=fe.data),"layer"in fe&&r(6,p=fe.layer),"promoteId"in fe&&r(7,E=fe.promoteId),"minzoom"in fe&&r(8,w=fe.minzoom),"maxzoom"in fe&&r(9,x=fe.maxzoom),"tilesize"in fe&&r(10,Q=fe.tilesize),"$$scope"in fe&&r(11,l=fe.$$scope)},e.$$.update=()=>{e.$$.dirty&41&&h=="geojson"&&P&&K(_),e.$$.dirty&25&&h=="vector"&&P&&Z(a),e.$$.dirty&25&&h=="raster"&&P&&$(a)},[P,d,c,h,a,_,p,E,w,x,Q,l,s]}class KA extends ni{constructor(t){super(),ri(this,t,Lw,Tw,ei,{id:2,type:3,url:4,props:1,data:5,layer:6,promoteId:7,minzoom:8,maxzoom:9,tilesize:10})}}const Ph=[];function Qw(e,t){return{subscribe:ui(e,t).subscribe}}function ui(e,t=bn){let r;const s=new Set;function l(a){if(ei(e,a)&&(e=a,r)){const d=!Ph.length;for(const _ of s)_[1](),Ph.push(_,e);if(d){for(let _=0;_<Ph.length;_+=2)Ph[_][0](Ph[_+1]);Ph.length=0}}}function c(a){l(a(e))}function h(a,d=bn){const _=[a,d];return s.add(_),s.size===1&&(r=t(l)||bn),a(e),()=>{s.delete(_),s.size===0&&(r(),r=null)}}return{set:l,update:c,subscribe:h}}function Ms(e,t,r){const s=!Array.isArray(e),l=s?[e]:e,c=t.length<2;return Qw(r,h=>{let a=!1;const d=[];let _=0,p=bn;const E=()=>{if(_)return;p();const x=t(s?d[0]:d,h);c?h(x):p=id(x)?x:bn},w=l.map((x,Q)=>Hy(x,P=>{d[Q]=P,_&=~(1<<Q),a&&E()},()=>{_|=1<<Q}));return a=!0,E(),function(){tA(w),p()}})}const Pw=e=>({hovered:e[0]&1}),g0=e=>({hovered:e[0]});function kw(e){let t;const r=e[31].default,s=wA(r,e,e[30],g0);return{c(){s&&s.c()},m(l,c){s&&s.m(l,c),t=!0},p(l,c){s&&s.p&&(!t||c[0]&1073741825)&&xA(s,r,l,l[30],t?bA(r,l[30],c,Pw):BA(l[30]),g0)},i(l){t||(Mt(s,l),t=!0)},o(l){Gt(s,l),t=!1},d(l){s&&s.d(l)}}}function Mw(e,t,r){let s,{$$slots:l={},$$scope:c}=t;const h=$h();let{id:a}=t,{type:d}=t,{filter:_=null}=t,{layout:p={}}=t,{paint:E={}}=t,{data:w=null}=t,{colorKey:x="color"}=t,{nameKey:Q=null}=t,{outlineKey:P="outline"}=t,{valueKey:R=null}=t,{idKey:k=null}=t,{select:O=!1}=t,{clickIgnore:G=!1}=t,{clickCenter:K=!1}=t,{selected:Z=null}=t,{hover:$=!1}=t,{hovered:fe=null}=t,{highlight:Ae=!1}=t,{highlightKey:ge="highlighted"}=t,{highlighted:he=[]}=t,{order:ee=null}=t,{maxzoom:ne=null}=t,{minzoom:xe=null}=t,{sourceLayer:ve=null}=t,{visible:ze=!0}=t;const{source:Le,layer:Ke,promoteId:Ue}=$o("source"),{getMap:rt}=$o("map"),je=rt();Gh("layer",{layer:a});const St=ui({id:null,feature:null,event:null});$r(e,St,tt=>r(33,s=tt)),Gh("hover",St),k=k||Ue,ve=ve||Ke;let te=null,Fe=null,Qe=[];p.visibility=ze?"visible":"none";let Ve={id:a,type:d,source:Le,paint:E,layout:p};_&&(Ve.filter=_),ve&&(Ve["source-layer"]=ve),ne&&(Ve.maxzoom=ne),xe&&(Ve.minzoom=xe),je.getLayer(a)&&je.removeLayer(a),je.addLayer(Ve,ee);function st(tt,Qt=x,ht=P){if(Q||R)for(const Nt of tt)je.setFeatureState({source:Le,sourceLayer:ve,id:Nt[k]},{color:Qt?Nt[Qt]:null,name:Q?Nt[Q]:null,value:R?Nt[R]:null,outline:ht?Nt[ht]:null});else for(const Nt of tt)je.setFeatureState({source:Le,sourceLayer:ve,id:Nt[k]},{color:Nt[Qt],outline:"pink"})}function dt(tt){je.getLayer(a)&&je.setFilter(a,tt)}function Bt(tt){if(je.getLayer(a))for(const Qt in tt)je.setPaintProperty(a,Qt,tt[Qt])}function Ge(tt){je.getLayer(a)&&je.setLayoutProperty(a,"visibility",tt?"visible":"none")}return O&&je.on("click",a,tt=>{if(tt.features.length>0&&!G){let Qt=tt.features[0];if(r(2,Z=Qt.id),h("select",{id:Z,feature:Qt,event:tt}),te&&je.setFeatureState({source:Le,sourceLayer:ve,id:te},{selected:!1}),je.setFeatureState({source:Le,sourceLayer:ve,id:Z},{selected:!0}),K){let ht=centroid(tt.features[0].toJSON().geometry);je.flyTo({center:ht.geometry.coordinates})}r(27,te=Z)}}),$&&(je.on("mousemove",a,tt=>{if(tt.features.length>0){fe&&je.setFeatureState({source:Le,sourceLayer:ve,id:fe},{hovered:!1});let Qt=tt.features[0];r(0,fe=r(28,Fe=Qt.id)),St.set({id:fe,feature:Qt,event:tt}),h("hover",s),je.setFeatureState({source:Le,sourceLayer:ve,id:fe},{hovered:!0}),je.getCanvas().style.cursor="pointer"}}),je.on("mouseleave",a,tt=>{fe&&je.setFeatureState({source:Le,sourceLayer:ve,id:fe},{hovered:!1}),r(0,fe=r(28,Fe=null)),St.set({id:null,feature:null,event:tt}),h("hover",s),je.getCanvas().style.cursor=""})),Qp(async()=>{je&&je.getLayer(a)&&je.removeLayer(a)}),e.$$set=tt=>{"id"in tt&&r(6,a=tt.id),"type"in tt&&r(7,d=tt.type),"filter"in tt&&r(8,_=tt.filter),"layout"in tt&&r(4,p=tt.layout),"paint"in tt&&r(9,E=tt.paint),"data"in tt&&r(10,w=tt.data),"colorKey"in tt&&r(11,x=tt.colorKey),"nameKey"in tt&&r(12,Q=tt.nameKey),"outlineKey"in tt&&r(13,P=tt.outlineKey),"valueKey"in tt&&r(14,R=tt.valueKey),"idKey"in tt&&r(5,k=tt.idKey),"select"in tt&&r(15,O=tt.select),"clickIgnore"in tt&&r(16,G=tt.clickIgnore),"clickCenter"in tt&&r(17,K=tt.clickCenter),"selected"in tt&&r(2,Z=tt.selected),"hover"in tt&&r(18,$=tt.hover),"hovered"in tt&&r(0,fe=tt.hovered),"highlight"in tt&&r(19,Ae=tt.highlight),"highlightKey"in tt&&r(20,ge=tt.highlightKey),"highlighted"in tt&&r(21,he=tt.highlighted),"order"in tt&&r(22,ee=tt.order),"maxzoom"in tt&&r(23,ne=tt.maxzoom),"minzoom"in tt&&r(24,xe=tt.minzoom),"sourceLayer"in tt&&r(3,ve=tt.sourceLayer),"visible"in tt&&r(25,ze=tt.visible),"$$scope"in tt&&r(30,c=tt.$$scope)},e.$$.update=()=>{if(e.$$.dirty[0]&11264&&w&&st(w,x,P),e.$$.dirty[0]&256&&dt(_),e.$$.dirty[0]&512&&Bt(E),e.$$.dirty[0]&33554432&&Ge(ze),e.$$.dirty[0]&540540936&&Ae&&he!=Qe){if(Qe[0])for(const tt of Qe){let Qt={};Qt[ge]=!1,je.setFeatureState({source:Le,sourceLayer:ve,id:tt},Qt)}if(r(29,Qe=he),he[0])for(const tt of he){let Qt={};Qt[ge]=!0,je.setFeatureState({source:Le,sourceLayer:ve,id:tt},Qt)}}e.$$.dirty[0]&134250508&&O&&Z!=te&&(te&&je.setFeatureState({source:Le,sourceLayer:ve,id:te},{selected:!1}),Z&&je.setFeatureState({source:Le,sourceLayer:ve,id:Z},{selected:!0}),r(27,te=Z)),e.$$.dirty[0]&268697609&&$&&fe!=Fe&&(Fe&&je.setFeatureState({source:Le,sourceLayer:ve,id:Fe},{hovered:!1}),fe&&je.setFeatureState({source:Le,sourceLayer:ve,id:fe},{hovered:!0}),r(28,Fe=fe))},[fe,St,Z,ve,p,k,a,d,_,E,w,x,Q,P,R,O,G,K,$,Ae,ge,he,ee,ne,xe,ze,st,te,Fe,Qe,c,l]}class ko extends ni{constructor(t){super(),ri(this,t,Mw,kw,ei,{id:6,type:7,filter:8,layout:4,paint:9,data:10,colorKey:11,nameKey:12,outlineKey:13,valueKey:14,idKey:5,select:15,clickIgnore:16,clickCenter:17,selected:2,hover:18,hovered:0,highlight:19,highlightKey:20,highlighted:21,order:22,maxzoom:23,minzoom:24,sourceLayer:3,visible:25,updateColors:26},null,[-1,-1])}get updateColors(){return this.$$.ctx[26]}}function Dw(e,t,r){let s,{content:l}=t;const c=new Ou.Popup({closeButton:!1,closeOnClick:!1}),{getMap:h}=$o("map"),a=h(),d=$o("hover");$r(e,d,p=>r(2,s=p));function _(p,E){p.id?c.setLngLat(p.event.lngLat).setHTML(E||p.code).addTo(a):c.remove()}return Qp(()=>c.remove()),e.$$set=p=>{"content"in p&&r(1,l=p.content)},e.$$.update=()=>{e.$$.dirty&6&&_(s,l)},[d,l,s]}class Nw extends ni{constructor(t){super(),ri(this,t,Dw,null,ei,{content:1})}}function jw(e){let t,r,s;return{c(){t=Lt("div"),t.innerHTML=`<div id="facility_size"><div class="circlelabels svelte-j3bpv"><p class="fac-size svelte-j3bpv">Facility Size</p> 
          <ul class="svelte-j3bpv"><li class="svelte-j3bpv">More than 5,000 beds</li> 
            <li class="svelte-j3bpv">1,000 - 5,000 beds</li> 
            <li class="svelte-j3bpv">Fewer than 1,000 beds</li></ul></div> 
        <svg class="legendcircles svelte-j3bpv"><line x1="50" y1="111" x2="100" y2="103" stroke="#666" stroke-width="1px"></line><line x1="50" y1="119" x2="100" y2="119" stroke="#666" stroke-width="1px"></line><line x1="50" y1="126" x2="100" y2="133" stroke="#666" stroke-width="1px"></line><circle cx="50" cy="131" r="5" fill="none" stroke="#000" stroke-width="1px"></circle><circle cx="50" cy="128" r="9" fill="none" stroke="#000" stroke-width="1px"></circle><circle cx="50" cy="124" r="13" fill="none" stroke="#000" stroke-width="1px"></circle></svg></div>`,r=$t(),s=Lt("div"),s.innerHTML=`<div id="facility_size"><h4 class="facilities svelte-j3bpv">Facility Size</h4> 
        <div class="leg-item svelte-j3bpv"><div class="circsymb circlethree svelte-j3bpv"></div> 
          <div class="leg-text three svelte-j3bpv">More than 5,000 beds</div></div> 
        <div class="leg-item two svelte-j3bpv"><div class="circsymb circletwo svelte-j3bpv"></div> 
          <div class="leg-text two svelte-j3bpv">1,000 - 5,000 beds</div></div> 
        <div class="leg-item one svelte-j3bpv"><div class="circsymb circleone svelte-j3bpv"></div> 
          <div class="leg-text one svelte-j3bpv">Fewer than 1,000 beds</div></div></div>`,ue(t,"class","mobile svelte-j3bpv"),ue(s,"class","nonmobile svelte-j3bpv")},m(l,c){At(l,t,c),At(l,r,c),At(l,s,c)},d(l){l&&at(t),l&&at(r),l&&at(s)}}}function Rw(e){let t;return{c(){t=Lt("div"),t.innerHTML=`<div class="nonmobile svelte-j3bpv"><div id="facility_size"><h4 class="facilities svelte-j3bpv">Facility Size</h4> 
          <div class="leg-item svelte-j3bpv"><div class="circsymb circlethree svelte-j3bpv"></div> 
            <div class="leg-text three svelte-j3bpv">More than 5,000 beds</div></div> 
          <div class="leg-item two svelte-j3bpv"><div class="circsymb circletwo svelte-j3bpv"></div> 
            <div class="leg-text two svelte-j3bpv">1,000 - 5,000 beds</div></div> 
          <div class="leg-item one svelte-j3bpv"><div class="circsymb circleone svelte-j3bpv"></div> 
            <div class="leg-text one svelte-j3bpv">Fewer than 1,000 beds</div></div></div></div> 
      <div id="pretrial_rate" class="svelte-j3bpv"><h4 class="choro svelte-j3bpv">Pretrial Detention Rate (2021)</h4> 
        <div id="colors" class="svelte-j3bpv"><div class="citem svelte-j3bpv"><div class="color a svelte-j3bpv"></div> 
            <div class="rank svelte-j3bpv">Below U.S. Avg.</div> 
            <div class="title svelte-j3bpv">(0-12 per 10k)</div></div> 
          <div class="citem svelte-j3bpv"><div class="color b svelte-j3bpv"></div> 
            <div class="rank svelte-j3bpv">Above U.S. Avg.</div> 
            <div class="title svelte-j3bpv">(12 – 25 per 10k)</div></div> 
          <div class="citem svelte-j3bpv"><div class="color c svelte-j3bpv"></div> 
            <div class="rank svelte-j3bpv">More than twice U.S. Avg.</div> 
            <div class="title svelte-j3bpv">(25+ per 10k)</div></div></div></div>`,ue(t,"id","multi-legend"),ue(t,"class","svelte-j3bpv")},m(r,s){At(r,t,s)},d(r){r&&at(t)}}}function Ow(e){let t;return{c(){t=Lt("div"),t.innerHTML=`<div class="nonmobile svelte-j3bpv"><div id="facility_size"><h4 class="facilities svelte-j3bpv">Facility Size</h4> 
          <div class="leg-item svelte-j3bpv"><div class="circsymb circlethree svelte-j3bpv"></div> 
            <div class="leg-text three svelte-j3bpv">More than 5,000 beds</div></div> 
          <div class="leg-item two svelte-j3bpv"><div class="circsymb circletwo svelte-j3bpv"></div> 
            <div class="leg-text two svelte-j3bpv">1,000 - 5,000 beds</div></div> 
          <div class="leg-item one svelte-j3bpv"><div class="circsymb circleone svelte-j3bpv"></div> 
            <div class="leg-text one svelte-j3bpv">Fewer than 1,000 beds</div></div></div></div> 
      <div id="type-legend" class="svelte-j3bpv"><div class="item svelte-j3bpv"><div class="swatch hold svelte-j3bpv"></div>
          Holding Cell</div> 
        <div class="item svelte-j3bpv"><div class="swatch jail svelte-j3bpv"></div>
          Jail</div> 
        <div class="item svelte-j3bpv"><div class="swatch juvenile svelte-j3bpv"></div>
          Juvenile Facility</div> 
        <div class="item svelte-j3bpv"><div class="swatch prison svelte-j3bpv"></div>
          Prison</div> 
        <div class="item svelte-j3bpv"><div class="swatch twp svelte-j3bpv"></div>
          TWP Facility</div></div>`,ue(t,"id","multi-legend"),ue(t,"class","svelte-j3bpv")},m(r,s){At(r,t,s)},d(r){r&&at(t)}}}function zw(e){let t,r,s;return{c(){t=Lt("div"),t.innerHTML=`<div id="facility_size"><h4 class="facilities svelte-j3bpv">Facility Size</h4> 
        <div class="leg-item svelte-j3bpv"><div class="circsymb circlethree svelte-j3bpv"></div> 
          <div class="leg-text three svelte-j3bpv">More than 5,000 beds</div></div> 
        <div class="leg-item two svelte-j3bpv"><div class="circsymb circletwo svelte-j3bpv"></div> 
          <div class="leg-text two svelte-j3bpv">1,000 - 5,000 beds</div></div> 
        <div class="leg-item one svelte-j3bpv"><div class="circsymb circleone svelte-j3bpv"></div> 
          <div class="leg-text one svelte-j3bpv">Fewer than 1,000 beds</div></div></div>`,r=$t(),s=Lt("div"),s.innerHTML=`<div class="item svelte-j3bpv"><div class="color square d svelte-j3bpv"></div> 
        <div class="title svelte-j3bpv">Louisiana plantations circa 1853</div></div>`,ue(t,"class","nonmobile svelte-j3bpv"),ue(s,"class","plantations-legend svelte-j3bpv")},m(l,c){At(l,t,c),At(l,r,c),At(l,s,c)},d(l){l&&at(t),l&&at(r),l&&at(s)}}}function Hw(e){let t;return{c(){t=Lt("div")},m(r,s){At(r,t,s)},d(r){r&&at(t)}}}function Vw(e){let t;return{c(){t=Lt("div"),t.textContent="$: Estimated 2021 revenue brought into local jails from DOC",ue(t,"class","financial svelte-j3bpv")},m(r,s){At(r,t,s)},d(r){r&&at(t)}}}function Kw(e){let t;return{c(){t=Lt("div"),ue(t,"id","facility_size")},m(r,s){At(r,t,s)},d(r){r&&at(t)}}}function Gw(e){let t;return{c(){t=Lt("div"),t.innerHTML=`<h4 class="choro svelte-j3bpv">Pretrial Detention Rate (2021)</h4> 
      <div id="colors" class="svelte-j3bpv"><div class="citem svelte-j3bpv"><div class="color a svelte-j3bpv"></div> 
          <div class="rank svelte-j3bpv">Below U.S. Avg.</div> 
          <div class="title svelte-j3bpv">(0-12 per 10k)</div></div> 
        <div class="citem svelte-j3bpv"><div class="color b svelte-j3bpv"></div> 
          <div class="rank svelte-j3bpv">Above U.S. Avg.</div> 
          <div class="title svelte-j3bpv">(12 – 25 per 10k)</div></div> 
        <div class="citem svelte-j3bpv"><div class="color c svelte-j3bpv"></div> 
          <div class="rank svelte-j3bpv">More than twice U.S. Avg.</div> 
          <div class="title svelte-j3bpv">(25+ per 10k)</div></div></div>`,ue(t,"id","pretrial_rate"),ue(t,"class","svelte-j3bpv")},m(r,s){At(r,t,s)},d(r){r&&at(t)}}}function qw(e){let t,r,s;return{c(){t=Lt("h4"),t.textContent="Prison Admission Rate (2021)",r=$t(),s=Lt("div"),s.innerHTML=`<div class="citem svelte-j3bpv"><div class="color a svelte-j3bpv"></div> 
        <div class="rank svelte-j3bpv">Below U.S. Avg.</div> 
        <div class="title svelte-j3bpv">(0-13 per 10k)</div></div> 
      <div class="citem svelte-j3bpv"><div class="color b svelte-j3bpv"></div> 
        <div class="rank svelte-j3bpv">Above U.S. Avg.</div> 
        <div class="title svelte-j3bpv">(13 – 26 per 10k)</div></div> 
      <div class="citem svelte-j3bpv"><div class="color c svelte-j3bpv"></div> 
        <div class="rank svelte-j3bpv">More than twice U.S. Avg.</div> 
        <div class="title svelte-j3bpv">(26+ per 10k)</div></div>`,ue(t,"class","choro svelte-j3bpv"),ue(s,"id","colors"),ue(s,"class","svelte-j3bpv")},m(l,c){At(l,t,c),At(l,r,c),At(l,s,c)},d(l){l&&at(t),l&&at(r),l&&at(s)}}}function Ww(e){let t;function r(c,h){return c[0]=="map01"?qw:c[0]=="map02"?Gw:c[0]=="map04"||c[0]=="map05"?Kw:c[0]=="map08"?Vw:c[0]=="map12"?Hw:c[0]=="map13"?zw:c[0]=="map14"?Ow:c[0]=="map15"?Rw:jw}let s=r(e),l=s(e);return{c(){t=Lt("div"),l.c(),ue(t,"id","legend"),ue(t,"class","svelte-j3bpv")},m(c,h){At(c,t,h),l.m(t,null)},p(c,[h]){s!==(s=r(c))&&(l.d(1),l=s(c),l&&(l.c(),l.m(t,null)))},i:bn,o:bn,d(c){c&&at(t),l.d()}}}function Xw(e,t,r){let{lo:s}=t;return e.$$set=l=>{"lo"in l&&r(0,s=l.lo)},[s]}class Zw extends ni{constructor(t){super(),ri(this,t,Xw,Ww,ei,{lo:0})}}function Jw(e){let t,r,s,l,c,h,a,d,_,p,E;return{c(){t=Lt("h2"),t.textContent="Acknowledgments",r=$t(),s=Lt("p"),s.textContent=`Vera would like to thank Families and Friends of Louisiana’s Incarcerated
  Children, Power Coalition for Equity and Justice, and Voice of the Experienced
  for sharing their advice, guidance, and time throughout the process of
  creating this tool.`,l=$t(),c=Lt("p"),c.textContent=`Vera would like to thank the following colleagues for their support in
  providing research and invaluable advice: Connor Burruss, Sarah Omojola, Josh
  Pichon, Kimberly Dickerson, Jacob Kang-Brown, Nina Siulc, and Karen Ball.`,h=$t(),a=Lt("p"),a.textContent=`Vera would like to thank the Ford Foundation, the Foundation for Louisiana,
  the Huey and Angelina Wilson Foundation, and the Wellspring Philanthropic Fund
  for their generous financial contributions that helped make this project
  possible.`,d=$t(),_=Lt("h2"),_.textContent="Credits",p=$t(),E=Lt("ul"),E.innerHTML=`<li>Design and development: Jill Hubley and Hao Lun Hung</li> 
  <li>Data analysis: Selina Ho, Sara Lanclos, and Christian Henrichson</li> 
  <li>Writing: Sam Raim, Will Snowden, Kim Mosby, PhD, and Christian Henrichson</li> 
  <li>Editing: Léon Digard</li>`,ue(E,"class","svelte-6fbqw6")},m(w,x){At(w,t,x),At(w,r,x),At(w,s,x),At(w,l,x),At(w,c,x),At(w,h,x),At(w,a,x),At(w,d,x),At(w,_,x),At(w,p,x),At(w,E,x)},p:bn,i:bn,o:bn,d(w){w&&at(t),w&&at(r),w&&at(s),w&&at(l),w&&at(c),w&&at(h),w&&at(a),w&&at(d),w&&at(_),w&&at(p),w&&at(E)}}}class Yw extends ni{constructor(t){super(),ri(this,t,null,Jw,ei,{})}}function cp(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function $w(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function ov(e){let t,r,s;e.length!==2?(t=cp,r=(a,d)=>cp(e(a),d),s=(a,d)=>e(a)-d):(t=e===cp||e===$w?e:e2,r=e,s=e);function l(a,d,_=0,p=a.length){if(_<p){if(t(d,d)!==0)return p;do{const E=_+p>>>1;r(a[E],d)<0?_=E+1:p=E}while(_<p)}return _}function c(a,d,_=0,p=a.length){if(_<p){if(t(d,d)!==0)return p;do{const E=_+p>>>1;r(a[E],d)<=0?_=E+1:p=E}while(_<p)}return _}function h(a,d,_=0,p=a.length){const E=l(a,d,_,p-1);return E>_&&s(a[E-1],d)>-s(a[E],d)?E-1:E}return{left:l,center:h,right:c}}function e2(){return 0}function t2(e){return e===null?NaN:+e}const r2=ov(cp),n2=r2.right;ov(t2).center;const i2=n2;class Zm extends Map{constructor(t,r=o2){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[s,l]of t)this.set(s,l)}get(t){return super.get(y0(this,t))}has(t){return super.has(y0(this,t))}set(t,r){return super.set(s2(this,t),r)}delete(t){return super.delete(a2(this,t))}}function y0({_intern:e,_key:t},r){const s=t(r);return e.has(s)?e.get(s):r}function s2({_intern:e,_key:t},r){const s=t(r);return e.has(s)?e.get(s):(e.set(s,r),r)}function a2({_intern:e,_key:t},r){const s=t(r);return e.has(s)&&(r=e.get(s),e.delete(s)),r}function o2(e){return e!==null&&typeof e=="object"?e.valueOf():e}function gp(e){return e}function A2(e,...t){return Lg(e,gp,gp,t)}function l2(e,...t){return Lg(e,Array.from,gp,t)}function c2(e,t){for(let r=1,s=t.length;r<s;++r)e=e.flatMap(l=>l.pop().map(([c,h])=>[...l,c,h]));return e}function u2(e,...t){return c2(l2(e,...t),t)}function h2(e,t,...r){return Lg(e,gp,t,r)}function Lg(e,t,r,s){return function l(c,h){if(h>=s.length)return r(c);const a=new Zm,d=s[h++];let _=-1;for(const p of c){const E=d(p,++_,c),w=a.get(E);w?w.push(p):a.set(E,[p])}for(const[p,E]of a)a.set(p,l(E,h));return t(a)}(e,0)}var Jm=Math.sqrt(50),Ym=Math.sqrt(10),$m=Math.sqrt(2);function f2(e,t,r){var s,l=-1,c,h,a;if(t=+t,e=+e,r=+r,e===t&&r>0)return[e];if((s=t<e)&&(c=e,e=t,t=c),(a=Av(e,t,r))===0||!isFinite(a))return[];if(a>0){let d=Math.round(e/a),_=Math.round(t/a);for(d*a<e&&++d,_*a>t&&--_,h=new Array(c=_-d+1);++l<c;)h[l]=(d+l)*a}else{a=-a;let d=Math.round(e*a),_=Math.round(t*a);for(d/a<e&&++d,_/a>t&&--_,h=new Array(c=_-d+1);++l<c;)h[l]=(d+l)/a}return s&&h.reverse(),h}function Av(e,t,r){var s=(t-e)/Math.max(0,r),l=Math.floor(Math.log(s)/Math.LN10),c=s/Math.pow(10,l);return l>=0?(c>=Jm?10:c>=Ym?5:c>=$m?2:1)*Math.pow(10,l):-Math.pow(10,-l)/(c>=Jm?10:c>=Ym?5:c>=$m?2:1)}function d2(e,t,r){var s=Math.abs(t-e)/Math.max(0,r),l=Math.pow(10,Math.floor(Math.log(s)/Math.LN10)),c=s/l;return c>=Jm?l*=10:c>=Ym?l*=5:c>=$m&&(l*=2),t<e?-l:l}function Xf(e,t){let r;if(t===void 0)for(const s of e)s!=null&&(r<s||r===void 0&&s>=s)&&(r=s);else{let s=-1;for(let l of e)(l=t(l,++s,e))!=null&&(r<l||r===void 0&&l>=l)&&(r=l)}return r}function p2(e,t,r){e=+e,t=+t,r=(l=arguments.length)<2?(t=e,e=0,1):l<3?1:+r;for(var s=-1,l=Math.max(0,Math.ceil((t-e)/r))|0,c=new Array(l);++s<l;)c[s]=e+s*r;return c}function m2(e,t){let r=0;if(t===void 0)for(let s of e)(s=+s)&&(r+=s);else{let s=-1;for(let l of e)(l=+t(l,++s,e))&&(r+=l)}return r}function g2(e){return e}var Bm=1,Cm=2,eg=3,Wd=4,v0=1e-6;function y2(e){return"translate("+e+",0)"}function v2(e){return"translate(0,"+e+")"}function _2(e){return t=>+e(t)}function w2(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),r=>+e(r)+t}function b2(){return!this.__axis}function x2(e,t){var r=[],s=null,l=null,c=6,h=6,a=3,d=typeof window<"u"&&window.devicePixelRatio>1?0:.5,_=e===Bm||e===Wd?-1:1,p=e===Wd||e===Cm?"x":"y",E=e===Bm||e===eg?y2:v2;function w(x){var Q=s??(t.ticks?t.ticks.apply(t,r):t.domain()),P=l??(t.tickFormat?t.tickFormat.apply(t,r):g2),R=Math.max(c,0)+a,k=t.range(),O=+k[0]+d,G=+k[k.length-1]+d,K=(t.bandwidth?w2:_2)(t.copy(),d),Z=x.selection?x.selection():x,$=Z.selectAll(".domain").data([null]),fe=Z.selectAll(".tick").data(Q,t).order(),Ae=fe.exit(),ge=fe.enter().append("g").attr("class","tick"),he=fe.select("line"),ee=fe.select("text");$=$.merge($.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),fe=fe.merge(ge),he=he.merge(ge.append("line").attr("stroke","currentColor").attr(p+"2",_*c)),ee=ee.merge(ge.append("text").attr("fill","currentColor").attr(p,_*R).attr("dy",e===Bm?"0em":e===eg?"0.71em":"0.32em")),x!==Z&&($=$.transition(x),fe=fe.transition(x),he=he.transition(x),ee=ee.transition(x),Ae=Ae.transition(x).attr("opacity",v0).attr("transform",function(ne){return isFinite(ne=K(ne))?E(ne+d):this.getAttribute("transform")}),ge.attr("opacity",v0).attr("transform",function(ne){var xe=this.parentNode.__axis;return E((xe&&isFinite(xe=xe(ne))?xe:K(ne))+d)})),Ae.remove(),$.attr("d",e===Wd||e===Cm?h?"M"+_*h+","+O+"H"+d+"V"+G+"H"+_*h:"M"+d+","+O+"V"+G:h?"M"+O+","+_*h+"V"+d+"H"+G+"V"+_*h:"M"+O+","+d+"H"+G),fe.attr("opacity",1).attr("transform",function(ne){return E(K(ne)+d)}),he.attr(p+"2",_*c),ee.attr(p,_*R).text(P),Z.filter(b2).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===Cm?"start":e===Wd?"end":"middle"),Z.each(function(){this.__axis=K})}return w.scale=function(x){return arguments.length?(t=x,w):t},w.ticks=function(){return r=Array.from(arguments),w},w.tickArguments=function(x){return arguments.length?(r=x==null?[]:Array.from(x),w):r.slice()},w.tickValues=function(x){return arguments.length?(s=x==null?null:Array.from(x),w):s&&s.slice()},w.tickFormat=function(x){return arguments.length?(l=x,w):l},w.tickSize=function(x){return arguments.length?(c=h=+x,w):c},w.tickSizeInner=function(x){return arguments.length?(c=+x,w):c},w.tickSizeOuter=function(x){return arguments.length?(h=+x,w):h},w.tickPadding=function(x){return arguments.length?(a=+x,w):a},w.offset=function(x){return arguments.length?(d=+x,w):d},w}function B2(e){return x2(eg,e)}var C2={value:()=>{}};function lv(){for(var e=0,t=arguments.length,r={},s;e<t;++e){if(!(s=arguments[e]+"")||s in r||/[\s.]/.test(s))throw new Error("illegal type: "+s);r[s]=[]}return new up(r)}function up(e){this._=e}function E2(e,t){return e.trim().split(/^|\s+/).map(function(r){var s="",l=r.indexOf(".");if(l>=0&&(s=r.slice(l+1),r=r.slice(0,l)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:s}})}up.prototype=lv.prototype={constructor:up,on:function(e,t){var r=this._,s=E2(e+"",r),l,c=-1,h=s.length;if(arguments.length<2){for(;++c<h;)if((l=(e=s[c]).type)&&(l=F2(r[l],e.name)))return l;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++c<h;)if(l=(e=s[c]).type)r[l]=_0(r[l],e.name,t);else if(t==null)for(l in r)r[l]=_0(r[l],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new up(e)},call:function(e,t){if((l=arguments.length-2)>0)for(var r=new Array(l),s=0,l,c;s<l;++s)r[s]=arguments[s+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(c=this._[e],s=0,l=c.length;s<l;++s)c[s].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var s=this._[e],l=0,c=s.length;l<c;++l)s[l].value.apply(t,r)}};function F2(e,t){for(var r=0,s=e.length,l;r<s;++r)if((l=e[r]).name===t)return l.value}function _0(e,t,r){for(var s=0,l=e.length;s<l;++s)if(e[s].name===t){e[s]=C2,e=e.slice(0,s).concat(e.slice(s+1));break}return r!=null&&e.push({name:t,value:r}),e}var tg="http://www.w3.org/1999/xhtml";const w0={svg:"http://www.w3.org/2000/svg",xhtml:tg,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Mp(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),w0.hasOwnProperty(t)?{space:w0[t],local:e}:e}function S2(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===tg&&t.documentElement.namespaceURI===tg?t.createElement(e):t.createElementNS(r,e)}}function I2(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function cv(e){var t=Mp(e);return(t.local?I2:S2)(t)}function T2(){}function Qg(e){return e==null?T2:function(){return this.querySelector(e)}}function U2(e){typeof e!="function"&&(e=Qg(e));for(var t=this._groups,r=t.length,s=new Array(r),l=0;l<r;++l)for(var c=t[l],h=c.length,a=s[l]=new Array(h),d,_,p=0;p<h;++p)(d=c[p])&&(_=e.call(d,d.__data__,p,c))&&("__data__"in d&&(_.__data__=d.__data__),a[p]=_);return new eA(s,this._parents)}function uv(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function L2(){return[]}function hv(e){return e==null?L2:function(){return this.querySelectorAll(e)}}function Q2(e){return function(){return uv(e.apply(this,arguments))}}function P2(e){typeof e=="function"?e=Q2(e):e=hv(e);for(var t=this._groups,r=t.length,s=[],l=[],c=0;c<r;++c)for(var h=t[c],a=h.length,d,_=0;_<a;++_)(d=h[_])&&(s.push(e.call(d,d.__data__,_,h)),l.push(d));return new eA(s,l)}function fv(e){return function(){return this.matches(e)}}function dv(e){return function(t){return t.matches(e)}}var k2=Array.prototype.find;function M2(e){return function(){return k2.call(this.children,e)}}function D2(){return this.firstElementChild}function N2(e){return this.select(e==null?D2:M2(typeof e=="function"?e:dv(e)))}var j2=Array.prototype.filter;function R2(){return Array.from(this.children)}function O2(e){return function(){return j2.call(this.children,e)}}function z2(e){return this.selectAll(e==null?R2:O2(typeof e=="function"?e:dv(e)))}function H2(e){typeof e!="function"&&(e=fv(e));for(var t=this._groups,r=t.length,s=new Array(r),l=0;l<r;++l)for(var c=t[l],h=c.length,a=s[l]=[],d,_=0;_<h;++_)(d=c[_])&&e.call(d,d.__data__,_,c)&&a.push(d);return new eA(s,this._parents)}function pv(e){return new Array(e.length)}function V2(){return new eA(this._enter||this._groups.map(pv),this._parents)}function yp(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}yp.prototype={constructor:yp,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function K2(e){return function(){return e}}function G2(e,t,r,s,l,c){for(var h=0,a,d=t.length,_=c.length;h<_;++h)(a=t[h])?(a.__data__=c[h],s[h]=a):r[h]=new yp(e,c[h]);for(;h<d;++h)(a=t[h])&&(l[h]=a)}function q2(e,t,r,s,l,c,h){var a,d,_=new Map,p=t.length,E=c.length,w=new Array(p),x;for(a=0;a<p;++a)(d=t[a])&&(w[a]=x=h.call(d,d.__data__,a,t)+"",_.has(x)?l[a]=d:_.set(x,d));for(a=0;a<E;++a)x=h.call(e,c[a],a,c)+"",(d=_.get(x))?(s[a]=d,d.__data__=c[a],_.delete(x)):r[a]=new yp(e,c[a]);for(a=0;a<p;++a)(d=t[a])&&_.get(w[a])===d&&(l[a]=d)}function W2(e){return e.__data__}function X2(e,t){if(!arguments.length)return Array.from(this,W2);var r=t?q2:G2,s=this._parents,l=this._groups;typeof e!="function"&&(e=K2(e));for(var c=l.length,h=new Array(c),a=new Array(c),d=new Array(c),_=0;_<c;++_){var p=s[_],E=l[_],w=E.length,x=Z2(e.call(p,p&&p.__data__,_,s)),Q=x.length,P=a[_]=new Array(Q),R=h[_]=new Array(Q),k=d[_]=new Array(w);r(p,E,P,R,k,x,t);for(var O=0,G=0,K,Z;O<Q;++O)if(K=P[O]){for(O>=G&&(G=O+1);!(Z=R[G])&&++G<Q;);K._next=Z||null}}return h=new eA(h,s),h._enter=a,h._exit=d,h}function Z2(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function J2(){return new eA(this._exit||this._groups.map(pv),this._parents)}function Y2(e,t,r){var s=this.enter(),l=this,c=this.exit();return typeof e=="function"?(s=e(s),s&&(s=s.selection())):s=s.append(e+""),t!=null&&(l=t(l),l&&(l=l.selection())),r==null?c.remove():r(c),s&&l?s.merge(l).order():l}function $2(e){for(var t=e.selection?e.selection():e,r=this._groups,s=t._groups,l=r.length,c=s.length,h=Math.min(l,c),a=new Array(l),d=0;d<h;++d)for(var _=r[d],p=s[d],E=_.length,w=a[d]=new Array(E),x,Q=0;Q<E;++Q)(x=_[Q]||p[Q])&&(w[Q]=x);for(;d<l;++d)a[d]=r[d];return new eA(a,this._parents)}function eb(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var s=e[t],l=s.length-1,c=s[l],h;--l>=0;)(h=s[l])&&(c&&h.compareDocumentPosition(c)^4&&c.parentNode.insertBefore(h,c),c=h);return this}function tb(e){e||(e=rb);function t(E,w){return E&&w?e(E.__data__,w.__data__):!E-!w}for(var r=this._groups,s=r.length,l=new Array(s),c=0;c<s;++c){for(var h=r[c],a=h.length,d=l[c]=new Array(a),_,p=0;p<a;++p)(_=h[p])&&(d[p]=_);d.sort(t)}return new eA(l,this._parents).order()}function rb(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function nb(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function ib(){return Array.from(this)}function sb(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var s=e[t],l=0,c=s.length;l<c;++l){var h=s[l];if(h)return h}return null}function ab(){let e=0;for(const t of this)++e;return e}function ob(){return!this.node()}function Ab(e){for(var t=this._groups,r=0,s=t.length;r<s;++r)for(var l=t[r],c=0,h=l.length,a;c<h;++c)(a=l[c])&&e.call(a,a.__data__,c,l);return this}function lb(e){return function(){this.removeAttribute(e)}}function cb(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ub(e,t){return function(){this.setAttribute(e,t)}}function hb(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function fb(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function db(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function pb(e,t){var r=Mp(e);if(arguments.length<2){var s=this.node();return r.local?s.getAttributeNS(r.space,r.local):s.getAttribute(r)}return this.each((t==null?r.local?cb:lb:typeof t=="function"?r.local?db:fb:r.local?hb:ub)(r,t))}function mv(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function mb(e){return function(){this.style.removeProperty(e)}}function gb(e,t,r){return function(){this.style.setProperty(e,t,r)}}function yb(e,t,r){return function(){var s=t.apply(this,arguments);s==null?this.style.removeProperty(e):this.style.setProperty(e,s,r)}}function vb(e,t,r){return arguments.length>1?this.each((t==null?mb:typeof t=="function"?yb:gb)(e,t,r??"")):Wh(this.node(),e)}function Wh(e,t){return e.style.getPropertyValue(t)||mv(e).getComputedStyle(e,null).getPropertyValue(t)}function _b(e){return function(){delete this[e]}}function wb(e,t){return function(){this[e]=t}}function bb(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function xb(e,t){return arguments.length>1?this.each((t==null?_b:typeof t=="function"?bb:wb)(e,t)):this.node()[e]}function gv(e){return e.trim().split(/^|\s+/)}function Pg(e){return e.classList||new yv(e)}function yv(e){this._node=e,this._names=gv(e.getAttribute("class")||"")}yv.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function vv(e,t){for(var r=Pg(e),s=-1,l=t.length;++s<l;)r.add(t[s])}function _v(e,t){for(var r=Pg(e),s=-1,l=t.length;++s<l;)r.remove(t[s])}function Bb(e){return function(){vv(this,e)}}function Cb(e){return function(){_v(this,e)}}function Eb(e,t){return function(){(t.apply(this,arguments)?vv:_v)(this,e)}}function Fb(e,t){var r=gv(e+"");if(arguments.length<2){for(var s=Pg(this.node()),l=-1,c=r.length;++l<c;)if(!s.contains(r[l]))return!1;return!0}return this.each((typeof t=="function"?Eb:t?Bb:Cb)(r,t))}function Sb(){this.textContent=""}function Ib(e){return function(){this.textContent=e}}function Tb(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Ub(e){return arguments.length?this.each(e==null?Sb:(typeof e=="function"?Tb:Ib)(e)):this.node().textContent}function Lb(){this.innerHTML=""}function Qb(e){return function(){this.innerHTML=e}}function Pb(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function kb(e){return arguments.length?this.each(e==null?Lb:(typeof e=="function"?Pb:Qb)(e)):this.node().innerHTML}function Mb(){this.nextSibling&&this.parentNode.appendChild(this)}function Db(){return this.each(Mb)}function Nb(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function jb(){return this.each(Nb)}function Rb(e){var t=typeof e=="function"?e:cv(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Ob(){return null}function zb(e,t){var r=typeof e=="function"?e:cv(e),s=t==null?Ob:typeof t=="function"?t:Qg(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),s.apply(this,arguments)||null)})}function Hb(){var e=this.parentNode;e&&e.removeChild(this)}function Vb(){return this.each(Hb)}function Kb(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Gb(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function qb(e){return this.select(e?Gb:Kb)}function Wb(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Xb(e){return function(t){e.call(this,t,this.__data__)}}function Zb(e){return e.trim().split(/^|\s+/).map(function(t){var r="",s=t.indexOf(".");return s>=0&&(r=t.slice(s+1),t=t.slice(0,s)),{type:t,name:r}})}function Jb(e){return function(){var t=this.__on;if(t){for(var r=0,s=-1,l=t.length,c;r<l;++r)c=t[r],(!e.type||c.type===e.type)&&c.name===e.name?this.removeEventListener(c.type,c.listener,c.options):t[++s]=c;++s?t.length=s:delete this.__on}}}function Yb(e,t,r){return function(){var s=this.__on,l,c=Xb(t);if(s){for(var h=0,a=s.length;h<a;++h)if((l=s[h]).type===e.type&&l.name===e.name){this.removeEventListener(l.type,l.listener,l.options),this.addEventListener(l.type,l.listener=c,l.options=r),l.value=t;return}}this.addEventListener(e.type,c,r),l={type:e.type,name:e.name,value:t,listener:c,options:r},s?s.push(l):this.__on=[l]}}function $b(e,t,r){var s=Zb(e+""),l,c=s.length,h;if(arguments.length<2){var a=this.node().__on;if(a){for(var d=0,_=a.length,p;d<_;++d)for(l=0,p=a[d];l<c;++l)if((h=s[l]).type===p.type&&h.name===p.name)return p.value}return}for(a=t?Yb:Jb,l=0;l<c;++l)this.each(a(s[l],t,r));return this}function wv(e,t,r){var s=mv(e),l=s.CustomEvent;typeof l=="function"?l=new l(t,r):(l=s.document.createEvent("Event"),r?(l.initEvent(t,r.bubbles,r.cancelable),l.detail=r.detail):l.initEvent(t,!1,!1)),e.dispatchEvent(l)}function ex(e,t){return function(){return wv(this,e,t)}}function tx(e,t){return function(){return wv(this,e,t.apply(this,arguments))}}function rx(e,t){return this.each((typeof t=="function"?tx:ex)(e,t))}function*nx(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var s=e[t],l=0,c=s.length,h;l<c;++l)(h=s[l])&&(yield h)}var kg=[null];function eA(e,t){this._groups=e,this._parents=t}function ld(){return new eA([[document.documentElement]],kg)}function ix(){return this}eA.prototype=ld.prototype={constructor:eA,select:U2,selectAll:P2,selectChild:N2,selectChildren:z2,filter:H2,data:X2,enter:V2,exit:J2,join:Y2,merge:$2,selection:ix,order:eb,sort:tb,call:nb,nodes:ib,node:sb,size:ab,empty:ob,each:Ab,attr:pb,style:vb,property:xb,classed:Fb,text:Ub,html:kb,raise:Db,lower:jb,append:Rb,insert:zb,remove:Vb,clone:qb,datum:Wb,on:$b,dispatch:rx,[Symbol.iterator]:nx};function Pa(e){return typeof e=="string"?new eA([[document.querySelector(e)]],[document.documentElement]):new eA([[e]],kg)}function bv(e){return typeof e=="string"?new eA([document.querySelectorAll(e)],[document.documentElement]):new eA([uv(e)],kg)}function Mg(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function xv(e,t){var r=Object.create(e.prototype);for(var s in t)r[s]=t[s];return r}function cd(){}var Zf=.7,vp=1/Zf,Hh="\\s*([+-]?\\d+)\\s*",Jf="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",pc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",sx=/^#([0-9a-f]{3,8})$/,ax=new RegExp(`^rgb\\(${Hh},${Hh},${Hh}\\)$`),ox=new RegExp(`^rgb\\(${pc},${pc},${pc}\\)$`),Ax=new RegExp(`^rgba\\(${Hh},${Hh},${Hh},${Jf}\\)$`),lx=new RegExp(`^rgba\\(${pc},${pc},${pc},${Jf}\\)$`),cx=new RegExp(`^hsl\\(${Jf},${pc},${pc}\\)$`),ux=new RegExp(`^hsla\\(${Jf},${pc},${pc},${Jf}\\)$`),b0={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Mg(cd,Zu,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:x0,formatHex:x0,formatHex8:hx,formatHsl:fx,formatRgb:B0,toString:B0});function x0(){return this.rgb().formatHex()}function hx(){return this.rgb().formatHex8()}function fx(){return Bv(this).formatHsl()}function B0(){return this.rgb().formatRgb()}function Zu(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=sx.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?C0(t):r===3?new _A(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Xd(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Xd(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ax.exec(e))?new _A(t[1],t[2],t[3],1):(t=ox.exec(e))?new _A(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Ax.exec(e))?Xd(t[1],t[2],t[3],t[4]):(t=lx.exec(e))?Xd(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=cx.exec(e))?S0(t[1],t[2]/100,t[3]/100,1):(t=ux.exec(e))?S0(t[1],t[2]/100,t[3]/100,t[4]):b0.hasOwnProperty(e)?C0(b0[e]):e==="transparent"?new _A(NaN,NaN,NaN,0):null}function C0(e){return new _A(e>>16&255,e>>8&255,e&255,1)}function Xd(e,t,r,s){return s<=0&&(e=t=r=NaN),new _A(e,t,r,s)}function dx(e){return e instanceof cd||(e=Zu(e)),e?(e=e.rgb(),new _A(e.r,e.g,e.b,e.opacity)):new _A}function _p(e,t,r,s){return arguments.length===1?dx(e):new _A(e,t,r,s??1)}function _A(e,t,r,s){this.r=+e,this.g=+t,this.b=+r,this.opacity=+s}Mg(_A,_p,xv(cd,{brighter(e){return e=e==null?vp:Math.pow(vp,e),new _A(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Zf:Math.pow(Zf,e),new _A(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new _A(Ku(this.r),Ku(this.g),Ku(this.b),wp(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:E0,formatHex:E0,formatHex8:px,formatRgb:F0,toString:F0}));function E0(){return`#${Hu(this.r)}${Hu(this.g)}${Hu(this.b)}`}function px(){return`#${Hu(this.r)}${Hu(this.g)}${Hu(this.b)}${Hu((isNaN(this.opacity)?1:this.opacity)*255)}`}function F0(){const e=wp(this.opacity);return`${e===1?"rgb(":"rgba("}${Ku(this.r)}, ${Ku(this.g)}, ${Ku(this.b)}${e===1?")":`, ${e})`}`}function wp(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ku(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Hu(e){return e=Ku(e),(e<16?"0":"")+e.toString(16)}function S0(e,t,r,s){return s<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new zl(e,t,r,s)}function Bv(e){if(e instanceof zl)return new zl(e.h,e.s,e.l,e.opacity);if(e instanceof cd||(e=Zu(e)),!e)return new zl;if(e instanceof zl)return e;e=e.rgb();var t=e.r/255,r=e.g/255,s=e.b/255,l=Math.min(t,r,s),c=Math.max(t,r,s),h=NaN,a=c-l,d=(c+l)/2;return a?(t===c?h=(r-s)/a+(r<s)*6:r===c?h=(s-t)/a+2:h=(t-r)/a+4,a/=d<.5?c+l:2-c-l,h*=60):a=d>0&&d<1?0:h,new zl(h,a,d,e.opacity)}function mx(e,t,r,s){return arguments.length===1?Bv(e):new zl(e,t,r,s??1)}function zl(e,t,r,s){this.h=+e,this.s=+t,this.l=+r,this.opacity=+s}Mg(zl,mx,xv(cd,{brighter(e){return e=e==null?vp:Math.pow(vp,e),new zl(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Zf:Math.pow(Zf,e),new zl(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,s=r+(r<.5?r:1-r)*t,l=2*r-s;return new _A(Em(e>=240?e-240:e+120,l,s),Em(e,l,s),Em(e<120?e+240:e-120,l,s),this.opacity)},clamp(){return new zl(I0(this.h),Zd(this.s),Zd(this.l),wp(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=wp(this.opacity);return`${e===1?"hsl(":"hsla("}${I0(this.h)}, ${Zd(this.s)*100}%, ${Zd(this.l)*100}%${e===1?")":`, ${e})`}`}}));function I0(e){return e=(e||0)%360,e<0?e+360:e}function Zd(e){return Math.max(0,Math.min(1,e||0))}function Em(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const Dg=e=>()=>e;function gx(e,t){return function(r){return e+r*t}}function yx(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(s){return Math.pow(e+s*t,r)}}function vx(e){return(e=+e)==1?Cv:function(t,r){return r-t?yx(t,r,e):Dg(isNaN(t)?r:t)}}function Cv(e,t){var r=t-e;return r?gx(e,r):Dg(isNaN(e)?t:e)}const bp=function e(t){var r=vx(t);function s(l,c){var h=r((l=_p(l)).r,(c=_p(c)).r),a=r(l.g,c.g),d=r(l.b,c.b),_=Cv(l.opacity,c.opacity);return function(p){return l.r=h(p),l.g=a(p),l.b=d(p),l.opacity=_(p),l+""}}return s.gamma=e,s}(1);function _x(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,s=t.slice(),l;return function(c){for(l=0;l<r;++l)s[l]=e[l]*(1-c)+t[l]*c;return s}}function wx(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function bx(e,t){var r=t?t.length:0,s=e?Math.min(r,e.length):0,l=new Array(s),c=new Array(r),h;for(h=0;h<s;++h)l[h]=Ng(e[h],t[h]);for(;h<r;++h)c[h]=t[h];return function(a){for(h=0;h<s;++h)c[h]=l[h](a);return c}}function xx(e,t){var r=new Date;return e=+e,t=+t,function(s){return r.setTime(e*(1-s)+t*s),r}}function Rl(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function Bx(e,t){var r={},s={},l;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(l in t)l in e?r[l]=Ng(e[l],t[l]):s[l]=t[l];return function(c){for(l in r)s[l]=r[l](c);return s}}var rg=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Fm=new RegExp(rg.source,"g");function Cx(e){return function(){return e}}function Ex(e){return function(t){return e(t)+""}}function Ev(e,t){var r=rg.lastIndex=Fm.lastIndex=0,s,l,c,h=-1,a=[],d=[];for(e=e+"",t=t+"";(s=rg.exec(e))&&(l=Fm.exec(t));)(c=l.index)>r&&(c=t.slice(r,c),a[h]?a[h]+=c:a[++h]=c),(s=s[0])===(l=l[0])?a[h]?a[h]+=l:a[++h]=l:(a[++h]=null,d.push({i:h,x:Rl(s,l)})),r=Fm.lastIndex;return r<t.length&&(c=t.slice(r),a[h]?a[h]+=c:a[++h]=c),a.length<2?d[0]?Ex(d[0].x):Cx(t):(t=d.length,function(_){for(var p=0,E;p<t;++p)a[(E=d[p]).i]=E.x(_);return a.join("")})}function Ng(e,t){var r=typeof t,s;return t==null||r==="boolean"?Dg(t):(r==="number"?Rl:r==="string"?(s=Zu(t))?(t=s,bp):Ev:t instanceof Zu?bp:t instanceof Date?xx:wx(t)?_x:Array.isArray(t)?bx:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Bx:Rl)(e,t)}function Fx(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}var T0=180/Math.PI,ng={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Fv(e,t,r,s,l,c){var h,a,d;return(h=Math.sqrt(e*e+t*t))&&(e/=h,t/=h),(d=e*r+t*s)&&(r-=e*d,s-=t*d),(a=Math.sqrt(r*r+s*s))&&(r/=a,s/=a,d/=a),e*s<t*r&&(e=-e,t=-t,d=-d,h=-h),{translateX:l,translateY:c,rotate:Math.atan2(t,e)*T0,skewX:Math.atan(d)*T0,scaleX:h,scaleY:a}}var Jd;function Sx(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?ng:Fv(t.a,t.b,t.c,t.d,t.e,t.f)}function Ix(e){return e==null||(Jd||(Jd=document.createElementNS("http://www.w3.org/2000/svg","g")),Jd.setAttribute("transform",e),!(e=Jd.transform.baseVal.consolidate()))?ng:(e=e.matrix,Fv(e.a,e.b,e.c,e.d,e.e,e.f))}function Sv(e,t,r,s){function l(_){return _.length?_.pop()+" ":""}function c(_,p,E,w,x,Q){if(_!==E||p!==w){var P=x.push("translate(",null,t,null,r);Q.push({i:P-4,x:Rl(_,E)},{i:P-2,x:Rl(p,w)})}else(E||w)&&x.push("translate("+E+t+w+r)}function h(_,p,E,w){_!==p?(_-p>180?p+=360:p-_>180&&(_+=360),w.push({i:E.push(l(E)+"rotate(",null,s)-2,x:Rl(_,p)})):p&&E.push(l(E)+"rotate("+p+s)}function a(_,p,E,w){_!==p?w.push({i:E.push(l(E)+"skewX(",null,s)-2,x:Rl(_,p)}):p&&E.push(l(E)+"skewX("+p+s)}function d(_,p,E,w,x,Q){if(_!==E||p!==w){var P=x.push(l(x)+"scale(",null,",",null,")");Q.push({i:P-4,x:Rl(_,E)},{i:P-2,x:Rl(p,w)})}else(E!==1||w!==1)&&x.push(l(x)+"scale("+E+","+w+")")}return function(_,p){var E=[],w=[];return _=e(_),p=e(p),c(_.translateX,_.translateY,p.translateX,p.translateY,E,w),h(_.rotate,p.rotate,E,w),a(_.skewX,p.skewX,E,w),d(_.scaleX,_.scaleY,p.scaleX,p.scaleY,E,w),_=p=null,function(x){for(var Q=-1,P=w.length,R;++Q<P;)E[(R=w[Q]).i]=R.x(x);return E.join("")}}}var Tx=Sv(Sx,"px, ","px)","deg)"),Ux=Sv(Ix,", ",")",")"),Xh=0,jf=0,Tf=0,Iv=1e3,xp,Rf,Bp=0,Ju=0,Dp=0,Yf=typeof performance=="object"&&performance.now?performance:Date,Tv=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function jg(){return Ju||(Tv(Lx),Ju=Yf.now()+Dp)}function Lx(){Ju=0}function Cp(){this._call=this._time=this._next=null}Cp.prototype=Uv.prototype={constructor:Cp,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?jg():+r)+(t==null?0:+t),!this._next&&Rf!==this&&(Rf?Rf._next=this:xp=this,Rf=this),this._call=e,this._time=r,ig()},stop:function(){this._call&&(this._call=null,this._time=1/0,ig())}};function Uv(e,t,r){var s=new Cp;return s.restart(e,t,r),s}function Qx(){jg(),++Xh;for(var e=xp,t;e;)(t=Ju-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Xh}function U0(){Ju=(Bp=Yf.now())+Dp,Xh=jf=0;try{Qx()}finally{Xh=0,kx(),Ju=0}}function Px(){var e=Yf.now(),t=e-Bp;t>Iv&&(Dp-=t,Bp=e)}function kx(){for(var e,t=xp,r,s=1/0;t;)t._call?(s>t._time&&(s=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:xp=r);Rf=e,ig(s)}function ig(e){if(!Xh){jf&&(jf=clearTimeout(jf));var t=e-Ju;t>24?(e<1/0&&(jf=setTimeout(U0,e-Yf.now()-Dp)),Tf&&(Tf=clearInterval(Tf))):(Tf||(Bp=Yf.now(),Tf=setInterval(Px,Iv)),Xh=1,Tv(U0))}}function L0(e,t,r){var s=new Cp;return t=t==null?0:+t,s.restart(l=>{s.stop(),e(l+t)},t,r),s}var Mx=lv("start","end","cancel","interrupt"),Dx=[],Lv=0,Q0=1,sg=2,hp=3,P0=4,ag=5,fp=6;function Np(e,t,r,s,l,c){var h=e.__transition;if(!h)e.__transition={};else if(r in h)return;Nx(e,r,{name:t,index:s,group:l,on:Mx,tween:Dx,time:c.time,delay:c.delay,duration:c.duration,ease:c.ease,timer:null,state:Lv})}function Rg(e,t){var r=Vl(e,t);if(r.state>Lv)throw new Error("too late; already scheduled");return r}function gc(e,t){var r=Vl(e,t);if(r.state>hp)throw new Error("too late; already running");return r}function Vl(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function Nx(e,t,r){var s=e.__transition,l;s[t]=r,r.timer=Uv(c,0,r.time);function c(_){r.state=Q0,r.timer.restart(h,r.delay,r.time),r.delay<=_&&h(_-r.delay)}function h(_){var p,E,w,x;if(r.state!==Q0)return d();for(p in s)if(x=s[p],x.name===r.name){if(x.state===hp)return L0(h);x.state===P0?(x.state=fp,x.timer.stop(),x.on.call("interrupt",e,e.__data__,x.index,x.group),delete s[p]):+p<t&&(x.state=fp,x.timer.stop(),x.on.call("cancel",e,e.__data__,x.index,x.group),delete s[p])}if(L0(function(){r.state===hp&&(r.state=P0,r.timer.restart(a,r.delay,r.time),a(_))}),r.state=sg,r.on.call("start",e,e.__data__,r.index,r.group),r.state===sg){for(r.state=hp,l=new Array(w=r.tween.length),p=0,E=-1;p<w;++p)(x=r.tween[p].value.call(e,e.__data__,r.index,r.group))&&(l[++E]=x);l.length=E+1}}function a(_){for(var p=_<r.duration?r.ease.call(null,_/r.duration):(r.timer.restart(d),r.state=ag,1),E=-1,w=l.length;++E<w;)l[E].call(e,p);r.state===ag&&(r.on.call("end",e,e.__data__,r.index,r.group),d())}function d(){r.state=fp,r.timer.stop(),delete s[t];for(var _ in s)return;delete e.__transition}}function jx(e,t){var r=e.__transition,s,l,c=!0,h;if(r){t=t==null?null:t+"";for(h in r){if((s=r[h]).name!==t){c=!1;continue}l=s.state>sg&&s.state<ag,s.state=fp,s.timer.stop(),s.on.call(l?"interrupt":"cancel",e,e.__data__,s.index,s.group),delete r[h]}c&&delete e.__transition}}function Rx(e){return this.each(function(){jx(this,e)})}function Ox(e,t){var r,s;return function(){var l=gc(this,e),c=l.tween;if(c!==r){s=r=c;for(var h=0,a=s.length;h<a;++h)if(s[h].name===t){s=s.slice(),s.splice(h,1);break}}l.tween=s}}function zx(e,t,r){var s,l;if(typeof r!="function")throw new Error;return function(){var c=gc(this,e),h=c.tween;if(h!==s){l=(s=h).slice();for(var a={name:t,value:r},d=0,_=l.length;d<_;++d)if(l[d].name===t){l[d]=a;break}d===_&&l.push(a)}c.tween=l}}function Hx(e,t){var r=this._id;if(e+="",arguments.length<2){for(var s=Vl(this.node(),r).tween,l=0,c=s.length,h;l<c;++l)if((h=s[l]).name===e)return h.value;return null}return this.each((t==null?Ox:zx)(r,e,t))}function Og(e,t,r){var s=e._id;return e.each(function(){var l=gc(this,s);(l.value||(l.value={}))[t]=r.apply(this,arguments)}),function(l){return Vl(l,s).value[t]}}function Qv(e,t){var r;return(typeof t=="number"?Rl:t instanceof Zu?bp:(r=Zu(t))?(t=r,bp):Ev)(e,t)}function Vx(e){return function(){this.removeAttribute(e)}}function Kx(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Gx(e,t,r){var s,l=r+"",c;return function(){var h=this.getAttribute(e);return h===l?null:h===s?c:c=t(s=h,r)}}function qx(e,t,r){var s,l=r+"",c;return function(){var h=this.getAttributeNS(e.space,e.local);return h===l?null:h===s?c:c=t(s=h,r)}}function Wx(e,t,r){var s,l,c;return function(){var h,a=r(this),d;return a==null?void this.removeAttribute(e):(h=this.getAttribute(e),d=a+"",h===d?null:h===s&&d===l?c:(l=d,c=t(s=h,a)))}}function Xx(e,t,r){var s,l,c;return function(){var h,a=r(this),d;return a==null?void this.removeAttributeNS(e.space,e.local):(h=this.getAttributeNS(e.space,e.local),d=a+"",h===d?null:h===s&&d===l?c:(l=d,c=t(s=h,a)))}}function Zx(e,t){var r=Mp(e),s=r==="transform"?Ux:Qv;return this.attrTween(e,typeof t=="function"?(r.local?Xx:Wx)(r,s,Og(this,"attr."+e,t)):t==null?(r.local?Kx:Vx)(r):(r.local?qx:Gx)(r,s,t))}function Jx(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function Yx(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function $x(e,t){var r,s;function l(){var c=t.apply(this,arguments);return c!==s&&(r=(s=c)&&Yx(e,c)),r}return l._value=t,l}function eB(e,t){var r,s;function l(){var c=t.apply(this,arguments);return c!==s&&(r=(s=c)&&Jx(e,c)),r}return l._value=t,l}function tB(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var s=Mp(e);return this.tween(r,(s.local?$x:eB)(s,t))}function rB(e,t){return function(){Rg(this,e).delay=+t.apply(this,arguments)}}function nB(e,t){return t=+t,function(){Rg(this,e).delay=t}}function iB(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?rB:nB)(t,e)):Vl(this.node(),t).delay}function sB(e,t){return function(){gc(this,e).duration=+t.apply(this,arguments)}}function aB(e,t){return t=+t,function(){gc(this,e).duration=t}}function oB(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?sB:aB)(t,e)):Vl(this.node(),t).duration}function AB(e,t){if(typeof t!="function")throw new Error;return function(){gc(this,e).ease=t}}function lB(e){var t=this._id;return arguments.length?this.each(AB(t,e)):Vl(this.node(),t).ease}function cB(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;gc(this,e).ease=r}}function uB(e){if(typeof e!="function")throw new Error;return this.each(cB(this._id,e))}function hB(e){typeof e!="function"&&(e=fv(e));for(var t=this._groups,r=t.length,s=new Array(r),l=0;l<r;++l)for(var c=t[l],h=c.length,a=s[l]=[],d,_=0;_<h;++_)(d=c[_])&&e.call(d,d.__data__,_,c)&&a.push(d);return new Rc(s,this._parents,this._name,this._id)}function fB(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,s=t.length,l=r.length,c=Math.min(s,l),h=new Array(s),a=0;a<c;++a)for(var d=t[a],_=r[a],p=d.length,E=h[a]=new Array(p),w,x=0;x<p;++x)(w=d[x]||_[x])&&(E[x]=w);for(;a<s;++a)h[a]=t[a];return new Rc(h,this._parents,this._name,this._id)}function dB(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function pB(e,t,r){var s,l,c=dB(t)?Rg:gc;return function(){var h=c(this,e),a=h.on;a!==s&&(l=(s=a).copy()).on(t,r),h.on=l}}function mB(e,t){var r=this._id;return arguments.length<2?Vl(this.node(),r).on.on(e):this.each(pB(r,e,t))}function gB(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function yB(){return this.on("end.remove",gB(this._id))}function vB(e){var t=this._name,r=this._id;typeof e!="function"&&(e=Qg(e));for(var s=this._groups,l=s.length,c=new Array(l),h=0;h<l;++h)for(var a=s[h],d=a.length,_=c[h]=new Array(d),p,E,w=0;w<d;++w)(p=a[w])&&(E=e.call(p,p.__data__,w,a))&&("__data__"in p&&(E.__data__=p.__data__),_[w]=E,Np(_[w],t,r,w,_,Vl(p,r)));return new Rc(c,this._parents,t,r)}function _B(e){var t=this._name,r=this._id;typeof e!="function"&&(e=hv(e));for(var s=this._groups,l=s.length,c=[],h=[],a=0;a<l;++a)for(var d=s[a],_=d.length,p,E=0;E<_;++E)if(p=d[E]){for(var w=e.call(p,p.__data__,E,d),x,Q=Vl(p,r),P=0,R=w.length;P<R;++P)(x=w[P])&&Np(x,t,r,P,w,Q);c.push(w),h.push(p)}return new Rc(c,h,t,r)}var wB=ld.prototype.constructor;function bB(){return new wB(this._groups,this._parents)}function xB(e,t){var r,s,l;return function(){var c=Wh(this,e),h=(this.style.removeProperty(e),Wh(this,e));return c===h?null:c===r&&h===s?l:l=t(r=c,s=h)}}function Pv(e){return function(){this.style.removeProperty(e)}}function BB(e,t,r){var s,l=r+"",c;return function(){var h=Wh(this,e);return h===l?null:h===s?c:c=t(s=h,r)}}function CB(e,t,r){var s,l,c;return function(){var h=Wh(this,e),a=r(this),d=a+"";return a==null&&(d=a=(this.style.removeProperty(e),Wh(this,e))),h===d?null:h===s&&d===l?c:(l=d,c=t(s=h,a))}}function EB(e,t){var r,s,l,c="style."+t,h="end."+c,a;return function(){var d=gc(this,e),_=d.on,p=d.value[c]==null?a||(a=Pv(t)):void 0;(_!==r||l!==p)&&(s=(r=_).copy()).on(h,l=p),d.on=s}}function FB(e,t,r){var s=(e+="")=="transform"?Tx:Qv;return t==null?this.styleTween(e,xB(e,s)).on("end.style."+e,Pv(e)):typeof t=="function"?this.styleTween(e,CB(e,s,Og(this,"style."+e,t))).each(EB(this._id,e)):this.styleTween(e,BB(e,s,t),r).on("end.style."+e,null)}function SB(e,t,r){return function(s){this.style.setProperty(e,t.call(this,s),r)}}function IB(e,t,r){var s,l;function c(){var h=t.apply(this,arguments);return h!==l&&(s=(l=h)&&SB(e,h,r)),s}return c._value=t,c}function TB(e,t,r){var s="style."+(e+="");if(arguments.length<2)return(s=this.tween(s))&&s._value;if(t==null)return this.tween(s,null);if(typeof t!="function")throw new Error;return this.tween(s,IB(e,t,r??""))}function UB(e){return function(){this.textContent=e}}function LB(e){return function(){var t=e(this);this.textContent=t??""}}function QB(e){return this.tween("text",typeof e=="function"?LB(Og(this,"text",e)):UB(e==null?"":e+""))}function PB(e){return function(t){this.textContent=e.call(this,t)}}function kB(e){var t,r;function s(){var l=e.apply(this,arguments);return l!==r&&(t=(r=l)&&PB(l)),t}return s._value=e,s}function MB(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,kB(e))}function DB(){for(var e=this._name,t=this._id,r=kv(),s=this._groups,l=s.length,c=0;c<l;++c)for(var h=s[c],a=h.length,d,_=0;_<a;++_)if(d=h[_]){var p=Vl(d,t);Np(d,e,r,_,h,{time:p.time+p.delay+p.duration,delay:0,duration:p.duration,ease:p.ease})}return new Rc(s,this._parents,e,r)}function NB(){var e,t,r=this,s=r._id,l=r.size();return new Promise(function(c,h){var a={value:h},d={value:function(){--l===0&&c()}};r.each(function(){var _=gc(this,s),p=_.on;p!==e&&(t=(e=p).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(d)),_.on=t}),l===0&&c()})}var jB=0;function Rc(e,t,r,s){this._groups=e,this._parents=t,this._name=r,this._id=s}function kv(){return++jB}var Dc=ld.prototype;Rc.prototype={constructor:Rc,select:vB,selectAll:_B,selectChild:Dc.selectChild,selectChildren:Dc.selectChildren,filter:hB,merge:fB,selection:bB,transition:DB,call:Dc.call,nodes:Dc.nodes,node:Dc.node,size:Dc.size,empty:Dc.empty,each:Dc.each,on:mB,attr:Zx,attrTween:tB,style:FB,styleTween:TB,text:QB,textTween:MB,remove:yB,tween:Hx,delay:iB,duration:oB,ease:lB,easeVarying:uB,end:NB,[Symbol.iterator]:Dc[Symbol.iterator]};function RB(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var OB={time:null,delay:0,duration:250,ease:RB};function zB(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function HB(e){var t,r;e instanceof Rc?(t=e._id,e=e._name):(t=kv(),(r=OB).time=jg(),e=e==null?null:e+"");for(var s=this._groups,l=s.length,c=0;c<l;++c)for(var h=s[c],a=h.length,d,_=0;_<a;++_)(d=h[_])&&Np(d,e,t,_,h,r||zB(d,t));return new Rc(s,this._parents,e,t)}ld.prototype.interrupt=Rx;ld.prototype.transition=HB;function VB(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function KB(e,t){return fetch(e,t).then(VB)}function GB(e){return function(t,r,s){return arguments.length===2&&typeof r=="function"&&(s=r,r=void 0),KB(t,r).then(function(l){return e(l,s)})}}var dl=GB(tv);function qB(e){const t=+this._x.call(null,e),r=+this._y.call(null,e);return Mv(this.cover(t,r),t,r,e)}function Mv(e,t,r,s){if(isNaN(t)||isNaN(r))return e;var l,c=e._root,h={data:s},a=e._x0,d=e._y0,_=e._x1,p=e._y1,E,w,x,Q,P,R,k,O;if(!c)return e._root=h,e;for(;c.length;)if((P=t>=(E=(a+_)/2))?a=E:_=E,(R=r>=(w=(d+p)/2))?d=w:p=w,l=c,!(c=c[k=R<<1|P]))return l[k]=h,e;if(x=+e._x.call(null,c.data),Q=+e._y.call(null,c.data),t===x&&r===Q)return h.next=c,l?l[k]=h:e._root=h,e;do l=l?l[k]=new Array(4):e._root=new Array(4),(P=t>=(E=(a+_)/2))?a=E:_=E,(R=r>=(w=(d+p)/2))?d=w:p=w;while((k=R<<1|P)===(O=(Q>=w)<<1|x>=E));return l[O]=c,l[k]=h,e}function WB(e){var t,r,s=e.length,l,c,h=new Array(s),a=new Array(s),d=1/0,_=1/0,p=-1/0,E=-1/0;for(r=0;r<s;++r)isNaN(l=+this._x.call(null,t=e[r]))||isNaN(c=+this._y.call(null,t))||(h[r]=l,a[r]=c,l<d&&(d=l),l>p&&(p=l),c<_&&(_=c),c>E&&(E=c));if(d>p||_>E)return this;for(this.cover(d,_).cover(p,E),r=0;r<s;++r)Mv(this,h[r],a[r],e[r]);return this}function XB(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var r=this._x0,s=this._y0,l=this._x1,c=this._y1;if(isNaN(r))l=(r=Math.floor(e))+1,c=(s=Math.floor(t))+1;else{for(var h=l-r||1,a=this._root,d,_;r>e||e>=l||s>t||t>=c;)switch(_=(t<s)<<1|e<r,d=new Array(4),d[_]=a,a=d,h*=2,_){case 0:l=r+h,c=s+h;break;case 1:r=l-h,c=s+h;break;case 2:l=r+h,s=c-h;break;case 3:r=l-h,s=c-h;break}this._root&&this._root.length&&(this._root=a)}return this._x0=r,this._y0=s,this._x1=l,this._y1=c,this}function ZB(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function JB(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Zo(e,t,r,s,l){this.node=e,this.x0=t,this.y0=r,this.x1=s,this.y1=l}function YB(e,t,r){var s,l=this._x0,c=this._y0,h,a,d,_,p=this._x1,E=this._y1,w=[],x=this._root,Q,P;for(x&&w.push(new Zo(x,l,c,p,E)),r==null?r=1/0:(l=e-r,c=t-r,p=e+r,E=t+r,r*=r);Q=w.pop();)if(!(!(x=Q.node)||(h=Q.x0)>p||(a=Q.y0)>E||(d=Q.x1)<l||(_=Q.y1)<c))if(x.length){var R=(h+d)/2,k=(a+_)/2;w.push(new Zo(x[3],R,k,d,_),new Zo(x[2],h,k,R,_),new Zo(x[1],R,a,d,k),new Zo(x[0],h,a,R,k)),(P=(t>=k)<<1|e>=R)&&(Q=w[w.length-1],w[w.length-1]=w[w.length-1-P],w[w.length-1-P]=Q)}else{var O=e-+this._x.call(null,x.data),G=t-+this._y.call(null,x.data),K=O*O+G*G;if(K<r){var Z=Math.sqrt(r=K);l=e-Z,c=t-Z,p=e+Z,E=t+Z,s=x.data}}return s}function $B(e){if(isNaN(p=+this._x.call(null,e))||isNaN(E=+this._y.call(null,e)))return this;var t,r=this._root,s,l,c,h=this._x0,a=this._y0,d=this._x1,_=this._y1,p,E,w,x,Q,P,R,k;if(!r)return this;if(r.length)for(;;){if((Q=p>=(w=(h+d)/2))?h=w:d=w,(P=E>=(x=(a+_)/2))?a=x:_=x,t=r,!(r=r[R=P<<1|Q]))return this;if(!r.length)break;(t[R+1&3]||t[R+2&3]||t[R+3&3])&&(s=t,k=R)}for(;r.data!==e;)if(l=r,!(r=r.next))return this;return(c=r.next)&&delete r.next,l?(c?l.next=c:delete l.next,this):t?(c?t[R]=c:delete t[R],(r=t[0]||t[1]||t[2]||t[3])&&r===(t[3]||t[2]||t[1]||t[0])&&!r.length&&(s?s[k]=r:this._root=r),this):(this._root=c,this)}function e5(e){for(var t=0,r=e.length;t<r;++t)this.remove(e[t]);return this}function t5(){return this._root}function r5(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function n5(e){var t=[],r,s=this._root,l,c,h,a,d;for(s&&t.push(new Zo(s,this._x0,this._y0,this._x1,this._y1));r=t.pop();)if(!e(s=r.node,c=r.x0,h=r.y0,a=r.x1,d=r.y1)&&s.length){var _=(c+a)/2,p=(h+d)/2;(l=s[3])&&t.push(new Zo(l,_,p,a,d)),(l=s[2])&&t.push(new Zo(l,c,p,_,d)),(l=s[1])&&t.push(new Zo(l,_,h,a,p)),(l=s[0])&&t.push(new Zo(l,c,h,_,p))}return this}function i5(e){var t=[],r=[],s;for(this._root&&t.push(new Zo(this._root,this._x0,this._y0,this._x1,this._y1));s=t.pop();){var l=s.node;if(l.length){var c,h=s.x0,a=s.y0,d=s.x1,_=s.y1,p=(h+d)/2,E=(a+_)/2;(c=l[0])&&t.push(new Zo(c,h,a,p,E)),(c=l[1])&&t.push(new Zo(c,p,a,d,E)),(c=l[2])&&t.push(new Zo(c,h,E,p,_)),(c=l[3])&&t.push(new Zo(c,p,E,d,_))}r.push(s)}for(;s=r.pop();)e(s.node,s.x0,s.y0,s.x1,s.y1);return this}function s5(e){return e[0]}function a5(e){return arguments.length?(this._x=e,this):this._x}function o5(e){return e[1]}function A5(e){return arguments.length?(this._y=e,this):this._y}function Dv(e,t,r){var s=new zg(t??s5,r??o5,NaN,NaN,NaN,NaN);return e==null?s:s.addAll(e)}function zg(e,t,r,s,l,c){this._x=e,this._y=t,this._x0=r,this._y0=s,this._x1=l,this._y1=c,this._root=void 0}function k0(e){for(var t={data:e.data},r=t;e=e.next;)r=r.next={data:e.data};return t}var rA=Dv.prototype=zg.prototype;rA.copy=function(){var e=new zg(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,r,s;if(!t)return e;if(!t.length)return e._root=k0(t),e;for(r=[{source:t,target:e._root=new Array(4)}];t=r.pop();)for(var l=0;l<4;++l)(s=t.source[l])&&(s.length?r.push({source:s,target:t.target[l]=new Array(4)}):t.target[l]=k0(s));return e};rA.add=qB;rA.addAll=WB;rA.cover=XB;rA.data=ZB;rA.extent=JB;rA.find=YB;rA.remove=$B;rA.removeAll=e5;rA.root=t5;rA.size=r5;rA.visit=n5;rA.visitAfter=i5;rA.x=a5;rA.y=A5;function l5(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Ep(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,s=e.slice(0,r);return[s.length>1?s[0]+s.slice(2):s,+e.slice(r+1)]}function Zh(e){return e=Ep(Math.abs(e)),e?e[1]:NaN}function c5(e,t){return function(r,s){for(var l=r.length,c=[],h=0,a=e[0],d=0;l>0&&a>0&&(d+a+1>s&&(a=Math.max(1,s-d)),c.push(r.substring(l-=a,l+a)),!((d+=a+1)>s));)a=e[h=(h+1)%e.length];return c.reverse().join(t)}}function u5(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var h5=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Fp(e){if(!(t=h5.exec(e)))throw new Error("invalid format: "+e);var t;return new Hg({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Fp.prototype=Hg.prototype;function Hg(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Hg.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function f5(e){e:for(var t=e.length,r=1,s=-1,l;r<t;++r)switch(e[r]){case".":s=l=r;break;case"0":s===0&&(s=r),l=r;break;default:if(!+e[r])break e;s>0&&(s=0);break}return s>0?e.slice(0,s)+e.slice(l+1):e}var Nv;function d5(e,t){var r=Ep(e,t);if(!r)return e+"";var s=r[0],l=r[1],c=l-(Nv=Math.max(-8,Math.min(8,Math.floor(l/3)))*3)+1,h=s.length;return c===h?s:c>h?s+new Array(c-h+1).join("0"):c>0?s.slice(0,c)+"."+s.slice(c):"0."+new Array(1-c).join("0")+Ep(e,Math.max(0,t+c-1))[0]}function M0(e,t){var r=Ep(e,t);if(!r)return e+"";var s=r[0],l=r[1];return l<0?"0."+new Array(-l).join("0")+s:s.length>l+1?s.slice(0,l+1)+"."+s.slice(l+1):s+new Array(l-s.length+2).join("0")}const D0={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:l5,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>M0(e*100,t),r:M0,s:d5,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function N0(e){return e}var j0=Array.prototype.map,R0=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function p5(e){var t=e.grouping===void 0||e.thousands===void 0?N0:c5(j0.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",s=e.currency===void 0?"":e.currency[1]+"",l=e.decimal===void 0?".":e.decimal+"",c=e.numerals===void 0?N0:u5(j0.call(e.numerals,String)),h=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"−":e.minus+"",d=e.nan===void 0?"NaN":e.nan+"";function _(E){E=Fp(E);var w=E.fill,x=E.align,Q=E.sign,P=E.symbol,R=E.zero,k=E.width,O=E.comma,G=E.precision,K=E.trim,Z=E.type;Z==="n"?(O=!0,Z="g"):D0[Z]||(G===void 0&&(G=12),K=!0,Z="g"),(R||w==="0"&&x==="=")&&(R=!0,w="0",x="=");var $=P==="$"?r:P==="#"&&/[boxX]/.test(Z)?"0"+Z.toLowerCase():"",fe=P==="$"?s:/[%p]/.test(Z)?h:"",Ae=D0[Z],ge=/[defgprs%]/.test(Z);G=G===void 0?6:/[gprs]/.test(Z)?Math.max(1,Math.min(21,G)):Math.max(0,Math.min(20,G));function he(ee){var ne=$,xe=fe,ve,ze,Le;if(Z==="c")xe=Ae(ee)+xe,ee="";else{ee=+ee;var Ke=ee<0||1/ee<0;if(ee=isNaN(ee)?d:Ae(Math.abs(ee),G),K&&(ee=f5(ee)),Ke&&+ee==0&&Q!=="+"&&(Ke=!1),ne=(Ke?Q==="("?Q:a:Q==="-"||Q==="("?"":Q)+ne,xe=(Z==="s"?R0[8+Nv/3]:"")+xe+(Ke&&Q==="("?")":""),ge){for(ve=-1,ze=ee.length;++ve<ze;)if(Le=ee.charCodeAt(ve),48>Le||Le>57){xe=(Le===46?l+ee.slice(ve+1):ee.slice(ve))+xe,ee=ee.slice(0,ve);break}}}O&&!R&&(ee=t(ee,1/0));var Ue=ne.length+ee.length+xe.length,rt=Ue<k?new Array(k-Ue+1).join(w):"";switch(O&&R&&(ee=t(rt+ee,rt.length?k-xe.length:1/0),rt=""),x){case"<":ee=ne+ee+xe+rt;break;case"=":ee=ne+rt+ee+xe;break;case"^":ee=rt.slice(0,Ue=rt.length>>1)+ne+ee+xe+rt.slice(Ue);break;default:ee=rt+ne+ee+xe;break}return c(ee)}return he.toString=function(){return E+""},he}function p(E,w){var x=_((E=Fp(E),E.type="f",E)),Q=Math.max(-8,Math.min(8,Math.floor(Zh(w)/3)))*3,P=Math.pow(10,-Q),R=R0[8+Q/3];return function(k){return x(P*k)+R}}return{format:_,formatPrefix:p}}var Yd,Vg,jv;m5({thousands:",",grouping:[3],currency:["$",""]});function m5(e){return Yd=p5(e),Vg=Yd.format,jv=Yd.formatPrefix,Yd}function g5(e){return Math.max(0,-Zh(Math.abs(e)))}function y5(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Zh(t)/3)))*3-Zh(Math.abs(e)))}function v5(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Zh(t)-Zh(e))+1}function _5(e){var t=0,r=e.children,s=r&&r.length;if(!s)t=1;else for(;--s>=0;)t+=r[s].value;e.value=t}function w5(){return this.eachAfter(_5)}function b5(e,t){let r=-1;for(const s of this)e.call(t,s,++r,this);return this}function x5(e,t){for(var r=this,s=[r],l,c,h=-1;r=s.pop();)if(e.call(t,r,++h,this),l=r.children)for(c=l.length-1;c>=0;--c)s.push(l[c]);return this}function B5(e,t){for(var r=this,s=[r],l=[],c,h,a,d=-1;r=s.pop();)if(l.push(r),c=r.children)for(h=0,a=c.length;h<a;++h)s.push(c[h]);for(;r=l.pop();)e.call(t,r,++d,this);return this}function C5(e,t){let r=-1;for(const s of this)if(e.call(t,s,++r,this))return s}function E5(e){return this.eachAfter(function(t){for(var r=+e(t.data)||0,s=t.children,l=s&&s.length;--l>=0;)r+=s[l].value;t.value=r})}function F5(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function S5(e){for(var t=this,r=I5(t,e),s=[t];t!==r;)t=t.parent,s.push(t);for(var l=s.length;e!==r;)s.splice(l,0,e),e=e.parent;return s}function I5(e,t){if(e===t)return e;var r=e.ancestors(),s=t.ancestors(),l=null;for(e=r.pop(),t=s.pop();e===t;)l=e,e=r.pop(),t=s.pop();return l}function T5(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function U5(){return Array.from(this)}function L5(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Q5(){var e=this,t=[];return e.each(function(r){r!==e&&t.push({source:r.parent,target:r})}),t}function*P5(){var e=this,t,r=[e],s,l,c;do for(t=r.reverse(),r=[];e=t.pop();)if(yield e,s=e.children)for(l=0,c=s.length;l<c;++l)r.push(s[l]);while(r.length)}function Kg(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=D5)):t===void 0&&(t=M5);for(var r=new $f(e),s,l=[r],c,h,a,d;s=l.pop();)if((h=t(s.data))&&(d=(h=Array.from(h)).length))for(s.children=h,a=d-1;a>=0;--a)l.push(c=h[a]=new $f(h[a])),c.parent=s,c.depth=s.depth+1;return r.eachBefore(Rv)}function k5(){return Kg(this).eachBefore(N5)}function M5(e){return e.children}function D5(e){return Array.isArray(e)?e[1]:null}function N5(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function Rv(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function $f(e){this.data=e,this.depth=this.height=0,this.parent=null}$f.prototype=Kg.prototype={constructor:$f,count:w5,each:b5,eachAfter:B5,eachBefore:x5,find:C5,sum:E5,sort:F5,path:S5,ancestors:T5,descendants:U5,leaves:L5,links:Q5,copy:k5,[Symbol.iterator]:P5};function Sm(e){return e==null?null:Ov(e)}function Ov(e){if(typeof e!="function")throw new Error;return e}function Uf(){return 0}function Lf(e){return function(){return e}}function j5(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function R5(e,t,r,s,l){for(var c=e.children,h,a=-1,d=c.length,_=e.value&&(s-t)/e.value;++a<d;)h=c[a],h.y0=r,h.y1=l,h.x0=t,h.x1=t+=h.value*_}var O5={depth:-1},O0={},Im={};function z5(e){return e.id}function H5(e){return e.parentId}function V5(){var e=z5,t=H5,r;function s(l){var c=Array.from(l),h=e,a=t,d,_,p,E,w,x,Q,P,R=new Map;if(r!=null){const k=c.map((K,Z)=>K5(r(K,Z,l))),O=k.map(z0),G=new Set(k).add("");for(const K of O)G.has(K)||(G.add(K),k.push(K),O.push(z0(K)),c.push(Im));h=(K,Z)=>k[Z],a=(K,Z)=>O[Z]}for(p=0,d=c.length;p<d;++p)_=c[p],x=c[p]=new $f(_),(Q=h(_,p,l))!=null&&(Q+="")&&(P=x.id=Q,R.set(P,R.has(P)?O0:x)),(Q=a(_,p,l))!=null&&(Q+="")&&(x.parent=Q);for(p=0;p<d;++p)if(x=c[p],Q=x.parent){if(w=R.get(Q),!w)throw new Error("missing: "+Q);if(w===O0)throw new Error("ambiguous: "+Q);w.children?w.children.push(x):w.children=[x],x.parent=w}else{if(E)throw new Error("multiple roots");E=x}if(!E)throw new Error("no root");if(r!=null){for(;E.data===Im&&E.children.length===1;)E=E.children[0],--d;for(let k=c.length-1;k>=0&&(x=c[k],x.data===Im);--k)x.data=null}if(E.parent=O5,E.eachBefore(function(k){k.depth=k.parent.depth+1,--d}).eachBefore(Rv),E.parent=null,d>0)throw new Error("cycle");return E}return s.id=function(l){return arguments.length?(e=Sm(l),s):e},s.parentId=function(l){return arguments.length?(t=Sm(l),s):t},s.path=function(l){return arguments.length?(r=Sm(l),s):r},s}function K5(e){e=`${e}`;let t=e.length;return og(e,t-1)&&!og(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function z0(e){let t=e.length;if(t<2)return"";for(;--t>1&&!og(e,t););return e.slice(0,t)}function og(e,t){if(e[t]==="/"){let r=0;for(;t>0&&e[--t]==="\\";)++r;if(!(r&1))return!0}return!1}function G5(e,t,r,s,l){for(var c=e.children,h,a=-1,d=c.length,_=e.value&&(l-r)/e.value;++a<d;)h=c[a],h.x0=t,h.x1=s,h.y0=r,h.y1=r+=h.value*_}var q5=(1+Math.sqrt(5))/2;function W5(e,t,r,s,l,c){for(var h=[],a=t.children,d,_,p=0,E=0,w=a.length,x,Q,P=t.value,R,k,O,G,K,Z,$;p<w;){x=l-r,Q=c-s;do R=a[E++].value;while(!R&&E<w);for(k=O=R,Z=Math.max(Q/x,x/Q)/(P*e),$=R*R*Z,K=Math.max(O/$,$/k);E<w;++E){if(R+=_=a[E].value,_<k&&(k=_),_>O&&(O=_),$=R*R*Z,G=Math.max(O/$,$/k),G>K){R-=_;break}K=G}h.push(d={value:R,dice:x<Q,children:a.slice(p,E)}),d.dice?R5(d,r,s,l,P?s+=Q*R/P:c):G5(d,r,s,P?r+=x*R/P:l,c),P-=R,p=E}return h}const X5=function e(t){function r(s,l,c,h,a){W5(t,s,l,c,h,a)}return r.ratio=function(s){return e((s=+s)>1?s:1)},r}(q5);function H0(){var e=X5,t=!1,r=1,s=1,l=[0],c=Uf,h=Uf,a=Uf,d=Uf,_=Uf;function p(w){return w.x0=w.y0=0,w.x1=r,w.y1=s,w.eachBefore(E),l=[0],t&&w.eachBefore(j5),w}function E(w){var x=l[w.depth],Q=w.x0+x,P=w.y0+x,R=w.x1-x,k=w.y1-x;R<Q&&(Q=R=(Q+R)/2),k<P&&(P=k=(P+k)/2),w.x0=Q,w.y0=P,w.x1=R,w.y1=k,w.children&&(x=l[w.depth+1]=c(w)/2,Q+=_(w)-x,P+=h(w)-x,R-=a(w)-x,k-=d(w)-x,R<Q&&(Q=R=(Q+R)/2),k<P&&(P=k=(P+k)/2),e(w,Q,P,R,k))}return p.round=function(w){return arguments.length?(t=!!w,p):t},p.size=function(w){return arguments.length?(r=+w[0],s=+w[1],p):[r,s]},p.tile=function(w){return arguments.length?(e=Ov(w),p):e},p.padding=function(w){return arguments.length?p.paddingInner(w).paddingOuter(w):p.paddingInner()},p.paddingInner=function(w){return arguments.length?(c=typeof w=="function"?w:Lf(+w),p):c},p.paddingOuter=function(w){return arguments.length?p.paddingTop(w).paddingRight(w).paddingBottom(w).paddingLeft(w):p.paddingTop()},p.paddingTop=function(w){return arguments.length?(h=typeof w=="function"?w:Lf(+w),p):h},p.paddingRight=function(w){return arguments.length?(a=typeof w=="function"?w:Lf(+w),p):a},p.paddingBottom=function(w){return arguments.length?(d=typeof w=="function"?w:Lf(+w),p):d},p.paddingLeft=function(w){return arguments.length?(_=typeof w=="function"?w:Lf(+w),p):_},p}function jp(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const V0=Symbol("implicit");function Sp(){var e=new Zm,t=[],r=[],s=V0;function l(c){let h=e.get(c);if(h===void 0){if(s!==V0)return s;e.set(c,h=t.push(c)-1)}return r[h%r.length]}return l.domain=function(c){if(!arguments.length)return t.slice();t=[],e=new Zm;for(const h of c)e.has(h)||e.set(h,t.push(h)-1);return l},l.range=function(c){return arguments.length?(r=Array.from(c),l):r.slice()},l.unknown=function(c){return arguments.length?(s=c,l):s},l.copy=function(){return Sp(t,r).unknown(s)},jp.apply(l,arguments),l}function Yu(){var e=Sp().unknown(void 0),t=e.domain,r=e.range,s=0,l=1,c,h,a=!1,d=0,_=0,p=.5;delete e.unknown;function E(){var w=t().length,x=l<s,Q=x?l:s,P=x?s:l;c=(P-Q)/Math.max(1,w-d+_*2),a&&(c=Math.floor(c)),Q+=(P-Q-c*(w-d))*p,h=c*(1-d),a&&(Q=Math.round(Q),h=Math.round(h));var R=p2(w).map(function(k){return Q+c*k});return r(x?R.reverse():R)}return e.domain=function(w){return arguments.length?(t(w),E()):t()},e.range=function(w){return arguments.length?([s,l]=w,s=+s,l=+l,E()):[s,l]},e.rangeRound=function(w){return[s,l]=w,s=+s,l=+l,a=!0,E()},e.bandwidth=function(){return h},e.step=function(){return c},e.round=function(w){return arguments.length?(a=!!w,E()):a},e.padding=function(w){return arguments.length?(d=Math.min(1,_=+w),E()):d},e.paddingInner=function(w){return arguments.length?(d=Math.min(1,w),E()):d},e.paddingOuter=function(w){return arguments.length?(_=+w,E()):_},e.align=function(w){return arguments.length?(p=Math.max(0,Math.min(1,w)),E()):p},e.copy=function(){return Yu(t(),[s,l]).round(a).paddingInner(d).paddingOuter(_).align(p)},jp.apply(E(),arguments)}function Z5(e){return function(){return e}}function J5(e){return+e}var K0=[0,1];function fc(e){return e}function Ag(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:Z5(isNaN(t)?NaN:.5)}function Y5(e,t){var r;return e>t&&(r=e,e=t,t=r),function(s){return Math.max(e,Math.min(t,s))}}function $5(e,t,r){var s=e[0],l=e[1],c=t[0],h=t[1];return l<s?(s=Ag(l,s),c=r(h,c)):(s=Ag(s,l),c=r(c,h)),function(a){return c(s(a))}}function eC(e,t,r){var s=Math.min(e.length,t.length)-1,l=new Array(s),c=new Array(s),h=-1;for(e[s]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++h<s;)l[h]=Ag(e[h],e[h+1]),c[h]=r(t[h],t[h+1]);return function(a){var d=i2(e,a,1,s)-1;return c[d](l[d](a))}}function zv(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Hv(){var e=K0,t=K0,r=Ng,s,l,c,h=fc,a,d,_;function p(){var w=Math.min(e.length,t.length);return h!==fc&&(h=Y5(e[0],e[w-1])),a=w>2?eC:$5,d=_=null,E}function E(w){return w==null||isNaN(w=+w)?c:(d||(d=a(e.map(s),t,r)))(s(h(w)))}return E.invert=function(w){return h(l((_||(_=a(t,e.map(s),Rl)))(w)))},E.domain=function(w){return arguments.length?(e=Array.from(w,J5),p()):e.slice()},E.range=function(w){return arguments.length?(t=Array.from(w),p()):t.slice()},E.rangeRound=function(w){return t=Array.from(w),r=Fx,p()},E.clamp=function(w){return arguments.length?(h=w?!0:fc,p()):h!==fc},E.interpolate=function(w){return arguments.length?(r=w,p()):r},E.unknown=function(w){return arguments.length?(c=w,E):c},function(w,x){return s=w,l=x,p()}}function tC(){return Hv()(fc,fc)}function rC(e,t,r,s){var l=d2(e,t,r),c;switch(s=Fp(s??",f"),s.type){case"s":{var h=Math.max(Math.abs(e),Math.abs(t));return s.precision==null&&!isNaN(c=y5(l,h))&&(s.precision=c),jv(s,h)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(c=v5(l,Math.max(Math.abs(e),Math.abs(t))))&&(s.precision=c-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(c=g5(l))&&(s.precision=c-(s.type==="%")*2);break}}return Vg(s)}function Vv(e){var t=e.domain;return e.ticks=function(r){var s=t();return f2(s[0],s[s.length-1],r??10)},e.tickFormat=function(r,s){var l=t();return rC(l[0],l[l.length-1],r??10,s)},e.nice=function(r){r==null&&(r=10);var s=t(),l=0,c=s.length-1,h=s[l],a=s[c],d,_,p=10;for(a<h&&(_=h,h=a,a=_,_=l,l=c,c=_);p-- >0;){if(_=Av(h,a,r),_===d)return s[l]=h,s[c]=a,t(s);if(_>0)h=Math.floor(h/_)*_,a=Math.ceil(a/_)*_;else if(_<0)h=Math.ceil(h*_)/_,a=Math.floor(a*_)/_;else break;d=_}return e},e}function vu(){var e=tC();return e.copy=function(){return zv(e,vu())},jp.apply(e,arguments),Vv(e)}function G0(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function nC(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function iC(e){return e<0?-e*e:e*e}function sC(e){var t=e(fc,fc),r=1;function s(){return r===1?e(fc,fc):r===.5?e(nC,iC):e(G0(r),G0(1/r))}return t.exponent=function(l){return arguments.length?(r=+l,s()):r},Vv(t)}function Kv(){var e=sC(Hv());return e.copy=function(){return zv(e,Kv()).exponent(e.exponent())},jp.apply(e,arguments),e}function aC(){return Kv.apply(null,arguments).exponent(.5)}const Tm=new Date,Um=new Date;function yc(e,t,r,s){function l(c){return e(c=arguments.length===0?new Date:new Date(+c)),c}return l.floor=c=>(e(c=new Date(+c)),c),l.ceil=c=>(e(c=new Date(c-1)),t(c,1),e(c),c),l.round=c=>{const h=l(c),a=l.ceil(c);return c-h<a-c?h:a},l.offset=(c,h)=>(t(c=new Date(+c),h==null?1:Math.floor(h)),c),l.range=(c,h,a)=>{const d=[];if(c=l.ceil(c),a=a==null?1:Math.floor(a),!(c<h)||!(a>0))return d;let _;do d.push(_=new Date(+c)),t(c,a),e(c);while(_<c&&c<h);return d},l.filter=c=>yc(h=>{if(h>=h)for(;e(h),!c(h);)h.setTime(h-1)},(h,a)=>{if(h>=h)if(a<0)for(;++a<=0;)for(;t(h,-1),!c(h););else for(;--a>=0;)for(;t(h,1),!c(h););}),r&&(l.count=(c,h)=>(Tm.setTime(+c),Um.setTime(+h),e(Tm),e(Um),Math.floor(r(Tm,Um))),l.every=c=>(c=Math.floor(c),!isFinite(c)||!(c>0)?null:c>1?l.filter(s?h=>s(h)%c===0:h=>l.count(0,h)%c===0):l)),l}const oC=1e3,Gg=oC*60,AC=Gg*60,ed=AC*24,Gv=ed*7,qg=yc(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Gg)/ed,e=>e.getDate()-1);qg.range;const Wg=yc(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ed,e=>e.getUTCDate()-1);Wg.range;const lC=yc(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ed,e=>Math.floor(e/ed));lC.range;function rh(e){return yc(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Gg)/Gv)}const qv=rh(0),Ip=rh(1),cC=rh(2),uC=rh(3),Jh=rh(4),hC=rh(5),fC=rh(6);qv.range;Ip.range;cC.range;uC.range;Jh.range;hC.range;fC.range;function nh(e){return yc(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/Gv)}const Wv=nh(0),Tp=nh(1),dC=nh(2),pC=nh(3),Yh=nh(4),mC=nh(5),gC=nh(6);Wv.range;Tp.range;dC.range;pC.range;Yh.range;mC.range;gC.range;const $u=yc(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());$u.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:yc(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});$u.range;const eh=yc(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());eh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:yc(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});eh.range;function Lm(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Qm(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Qf(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function yC(e){var t=e.dateTime,r=e.date,s=e.time,l=e.periods,c=e.days,h=e.shortDays,a=e.months,d=e.shortMonths,_=Pf(l),p=kf(l),E=Pf(c),w=kf(c),x=Pf(h),Q=kf(h),P=Pf(a),R=kf(a),k=Pf(d),O=kf(d),G={a:Ke,A:Ue,b:rt,B:je,c:null,d:Y0,e:Y0,f:OC,g:JC,G:$C,H:NC,I:jC,j:RC,L:Xv,m:zC,M:HC,p:St,q:te,Q:t1,s:r1,S:VC,u:KC,U:GC,V:qC,w:WC,W:XC,x:null,X:null,y:ZC,Y:YC,Z:e4,"%":e1},K={a:Fe,A:Qe,b:Ve,B:st,c:null,d:$0,e:$0,f:i4,g:d4,G:m4,H:t4,I:r4,j:n4,L:Jv,m:s4,M:a4,p:dt,q:Bt,Q:t1,s:r1,S:o4,u:A4,U:l4,V:c4,w:u4,W:h4,x:null,X:null,y:f4,Y:p4,Z:g4,"%":e1},Z={a:he,A:ee,b:ne,B:xe,c:ve,d:Z0,e:Z0,f:PC,g:X0,G:W0,H:J0,I:J0,j:TC,L:QC,m:IC,M:UC,p:ge,q:SC,Q:MC,s:DC,S:LC,u:xC,U:BC,V:CC,w:bC,W:EC,x:ze,X:Le,y:X0,Y:W0,Z:FC,"%":kC};G.x=$(r,G),G.X=$(s,G),G.c=$(t,G),K.x=$(r,K),K.X=$(s,K),K.c=$(t,K);function $(Ge,tt){return function(Qt){var ht=[],Nt=-1,dr=0,Pt=Ge.length,Oe,pr,sr;for(Qt instanceof Date||(Qt=new Date(+Qt));++Nt<Pt;)Ge.charCodeAt(Nt)===37&&(ht.push(Ge.slice(dr,Nt)),(pr=q0[Oe=Ge.charAt(++Nt)])!=null?Oe=Ge.charAt(++Nt):pr=Oe==="e"?" ":"0",(sr=tt[Oe])&&(Oe=sr(Qt,pr)),ht.push(Oe),dr=Nt+1);return ht.push(Ge.slice(dr,Nt)),ht.join("")}}function fe(Ge,tt){return function(Qt){var ht=Qf(1900,void 0,1),Nt=Ae(ht,Ge,Qt+="",0),dr,Pt;if(Nt!=Qt.length)return null;if("Q"in ht)return new Date(ht.Q);if("s"in ht)return new Date(ht.s*1e3+("L"in ht?ht.L:0));if(tt&&!("Z"in ht)&&(ht.Z=0),"p"in ht&&(ht.H=ht.H%12+ht.p*12),ht.m===void 0&&(ht.m="q"in ht?ht.q:0),"V"in ht){if(ht.V<1||ht.V>53)return null;"w"in ht||(ht.w=1),"Z"in ht?(dr=Qm(Qf(ht.y,0,1)),Pt=dr.getUTCDay(),dr=Pt>4||Pt===0?Tp.ceil(dr):Tp(dr),dr=Wg.offset(dr,(ht.V-1)*7),ht.y=dr.getUTCFullYear(),ht.m=dr.getUTCMonth(),ht.d=dr.getUTCDate()+(ht.w+6)%7):(dr=Lm(Qf(ht.y,0,1)),Pt=dr.getDay(),dr=Pt>4||Pt===0?Ip.ceil(dr):Ip(dr),dr=qg.offset(dr,(ht.V-1)*7),ht.y=dr.getFullYear(),ht.m=dr.getMonth(),ht.d=dr.getDate()+(ht.w+6)%7)}else("W"in ht||"U"in ht)&&("w"in ht||(ht.w="u"in ht?ht.u%7:"W"in ht?1:0),Pt="Z"in ht?Qm(Qf(ht.y,0,1)).getUTCDay():Lm(Qf(ht.y,0,1)).getDay(),ht.m=0,ht.d="W"in ht?(ht.w+6)%7+ht.W*7-(Pt+5)%7:ht.w+ht.U*7-(Pt+6)%7);return"Z"in ht?(ht.H+=ht.Z/100|0,ht.M+=ht.Z%100,Qm(ht)):Lm(ht)}}function Ae(Ge,tt,Qt,ht){for(var Nt=0,dr=tt.length,Pt=Qt.length,Oe,pr;Nt<dr;){if(ht>=Pt)return-1;if(Oe=tt.charCodeAt(Nt++),Oe===37){if(Oe=tt.charAt(Nt++),pr=Z[Oe in q0?tt.charAt(Nt++):Oe],!pr||(ht=pr(Ge,Qt,ht))<0)return-1}else if(Oe!=Qt.charCodeAt(ht++))return-1}return ht}function ge(Ge,tt,Qt){var ht=_.exec(tt.slice(Qt));return ht?(Ge.p=p.get(ht[0].toLowerCase()),Qt+ht[0].length):-1}function he(Ge,tt,Qt){var ht=x.exec(tt.slice(Qt));return ht?(Ge.w=Q.get(ht[0].toLowerCase()),Qt+ht[0].length):-1}function ee(Ge,tt,Qt){var ht=E.exec(tt.slice(Qt));return ht?(Ge.w=w.get(ht[0].toLowerCase()),Qt+ht[0].length):-1}function ne(Ge,tt,Qt){var ht=k.exec(tt.slice(Qt));return ht?(Ge.m=O.get(ht[0].toLowerCase()),Qt+ht[0].length):-1}function xe(Ge,tt,Qt){var ht=P.exec(tt.slice(Qt));return ht?(Ge.m=R.get(ht[0].toLowerCase()),Qt+ht[0].length):-1}function ve(Ge,tt,Qt){return Ae(Ge,t,tt,Qt)}function ze(Ge,tt,Qt){return Ae(Ge,r,tt,Qt)}function Le(Ge,tt,Qt){return Ae(Ge,s,tt,Qt)}function Ke(Ge){return h[Ge.getDay()]}function Ue(Ge){return c[Ge.getDay()]}function rt(Ge){return d[Ge.getMonth()]}function je(Ge){return a[Ge.getMonth()]}function St(Ge){return l[+(Ge.getHours()>=12)]}function te(Ge){return 1+~~(Ge.getMonth()/3)}function Fe(Ge){return h[Ge.getUTCDay()]}function Qe(Ge){return c[Ge.getUTCDay()]}function Ve(Ge){return d[Ge.getUTCMonth()]}function st(Ge){return a[Ge.getUTCMonth()]}function dt(Ge){return l[+(Ge.getUTCHours()>=12)]}function Bt(Ge){return 1+~~(Ge.getUTCMonth()/3)}return{format:function(Ge){var tt=$(Ge+="",G);return tt.toString=function(){return Ge},tt},parse:function(Ge){var tt=fe(Ge+="",!1);return tt.toString=function(){return Ge},tt},utcFormat:function(Ge){var tt=$(Ge+="",K);return tt.toString=function(){return Ge},tt},utcParse:function(Ge){var tt=fe(Ge+="",!0);return tt.toString=function(){return Ge},tt}}}var q0={"-":"",_:" ",0:"0"},Ja=/^\s*\d+/,vC=/^%/,_C=/[\\^$*+?|[\]().{}]/g;function Pi(e,t,r){var s=e<0?"-":"",l=(s?-e:e)+"",c=l.length;return s+(c<r?new Array(r-c+1).join(t)+l:l)}function wC(e){return e.replace(_C,"\\$&")}function Pf(e){return new RegExp("^(?:"+e.map(wC).join("|")+")","i")}function kf(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function bC(e,t,r){var s=Ja.exec(t.slice(r,r+1));return s?(e.w=+s[0],r+s[0].length):-1}function xC(e,t,r){var s=Ja.exec(t.slice(r,r+1));return s?(e.u=+s[0],r+s[0].length):-1}function BC(e,t,r){var s=Ja.exec(t.slice(r,r+2));return s?(e.U=+s[0],r+s[0].length):-1}function CC(e,t,r){var s=Ja.exec(t.slice(r,r+2));return s?(e.V=+s[0],r+s[0].length):-1}function EC(e,t,r){var s=Ja.exec(t.slice(r,r+2));return s?(e.W=+s[0],r+s[0].length):-1}function W0(e,t,r){var s=Ja.exec(t.slice(r,r+4));return s?(e.y=+s[0],r+s[0].length):-1}function X0(e,t,r){var s=Ja.exec(t.slice(r,r+2));return s?(e.y=+s[0]+(+s[0]>68?1900:2e3),r+s[0].length):-1}function FC(e,t,r){var s=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return s?(e.Z=s[1]?0:-(s[2]+(s[3]||"00")),r+s[0].length):-1}function SC(e,t,r){var s=Ja.exec(t.slice(r,r+1));return s?(e.q=s[0]*3-3,r+s[0].length):-1}function IC(e,t,r){var s=Ja.exec(t.slice(r,r+2));return s?(e.m=s[0]-1,r+s[0].length):-1}function Z0(e,t,r){var s=Ja.exec(t.slice(r,r+2));return s?(e.d=+s[0],r+s[0].length):-1}function TC(e,t,r){var s=Ja.exec(t.slice(r,r+3));return s?(e.m=0,e.d=+s[0],r+s[0].length):-1}function J0(e,t,r){var s=Ja.exec(t.slice(r,r+2));return s?(e.H=+s[0],r+s[0].length):-1}function UC(e,t,r){var s=Ja.exec(t.slice(r,r+2));return s?(e.M=+s[0],r+s[0].length):-1}function LC(e,t,r){var s=Ja.exec(t.slice(r,r+2));return s?(e.S=+s[0],r+s[0].length):-1}function QC(e,t,r){var s=Ja.exec(t.slice(r,r+3));return s?(e.L=+s[0],r+s[0].length):-1}function PC(e,t,r){var s=Ja.exec(t.slice(r,r+6));return s?(e.L=Math.floor(s[0]/1e3),r+s[0].length):-1}function kC(e,t,r){var s=vC.exec(t.slice(r,r+1));return s?r+s[0].length:-1}function MC(e,t,r){var s=Ja.exec(t.slice(r));return s?(e.Q=+s[0],r+s[0].length):-1}function DC(e,t,r){var s=Ja.exec(t.slice(r));return s?(e.s=+s[0],r+s[0].length):-1}function Y0(e,t){return Pi(e.getDate(),t,2)}function NC(e,t){return Pi(e.getHours(),t,2)}function jC(e,t){return Pi(e.getHours()%12||12,t,2)}function RC(e,t){return Pi(1+qg.count($u(e),e),t,3)}function Xv(e,t){return Pi(e.getMilliseconds(),t,3)}function OC(e,t){return Xv(e,t)+"000"}function zC(e,t){return Pi(e.getMonth()+1,t,2)}function HC(e,t){return Pi(e.getMinutes(),t,2)}function VC(e,t){return Pi(e.getSeconds(),t,2)}function KC(e){var t=e.getDay();return t===0?7:t}function GC(e,t){return Pi(qv.count($u(e)-1,e),t,2)}function Zv(e){var t=e.getDay();return t>=4||t===0?Jh(e):Jh.ceil(e)}function qC(e,t){return e=Zv(e),Pi(Jh.count($u(e),e)+($u(e).getDay()===4),t,2)}function WC(e){return e.getDay()}function XC(e,t){return Pi(Ip.count($u(e)-1,e),t,2)}function ZC(e,t){return Pi(e.getFullYear()%100,t,2)}function JC(e,t){return e=Zv(e),Pi(e.getFullYear()%100,t,2)}function YC(e,t){return Pi(e.getFullYear()%1e4,t,4)}function $C(e,t){var r=e.getDay();return e=r>=4||r===0?Jh(e):Jh.ceil(e),Pi(e.getFullYear()%1e4,t,4)}function e4(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Pi(t/60|0,"0",2)+Pi(t%60,"0",2)}function $0(e,t){return Pi(e.getUTCDate(),t,2)}function t4(e,t){return Pi(e.getUTCHours(),t,2)}function r4(e,t){return Pi(e.getUTCHours()%12||12,t,2)}function n4(e,t){return Pi(1+Wg.count(eh(e),e),t,3)}function Jv(e,t){return Pi(e.getUTCMilliseconds(),t,3)}function i4(e,t){return Jv(e,t)+"000"}function s4(e,t){return Pi(e.getUTCMonth()+1,t,2)}function a4(e,t){return Pi(e.getUTCMinutes(),t,2)}function o4(e,t){return Pi(e.getUTCSeconds(),t,2)}function A4(e){var t=e.getUTCDay();return t===0?7:t}function l4(e,t){return Pi(Wv.count(eh(e)-1,e),t,2)}function Yv(e){var t=e.getUTCDay();return t>=4||t===0?Yh(e):Yh.ceil(e)}function c4(e,t){return e=Yv(e),Pi(Yh.count(eh(e),e)+(eh(e).getUTCDay()===4),t,2)}function u4(e){return e.getUTCDay()}function h4(e,t){return Pi(Tp.count(eh(e)-1,e),t,2)}function f4(e,t){return Pi(e.getUTCFullYear()%100,t,2)}function d4(e,t){return e=Yv(e),Pi(e.getUTCFullYear()%100,t,2)}function p4(e,t){return Pi(e.getUTCFullYear()%1e4,t,4)}function m4(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Yh(e):Yh.ceil(e),Pi(e.getUTCFullYear()%1e4,t,4)}function g4(){return"+0000"}function e1(){return"%"}function t1(e){return+e}function r1(e){return Math.floor(+e/1e3)}var kh,Rp,Xg;y4({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function y4(e){return kh=yC(e),Rp=kh.format,Xg=kh.parse,kh.utcFormat,kh.utcParse,kh}function Oh(e,t,r){this.k=e,this.x=t,this.y=r}Oh.prototype={constructor:Oh,scale:function(e){return e===1?this:new Oh(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Oh(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};new Oh(1,0,0);Oh.prototype;function n1(e,t,r){const s=e.slice();return s[59]=t[r],s}function i1(e,t,r){const s=e.slice();return s[59]=t[r],s}function v4(e){let t,r,s;return{c(){t=Lt("h1"),t.textContent="Louisiana Locked Up:",r=$t(),s=Lt("h1"),s.textContent="A Problem in Every Parish",ue(t,"class","svelte-ro4t2z"),ue(s,"class","sub svelte-ro4t2z")},m(l,c){At(l,t,c),At(l,r,c),At(l,s,c)},p:bn,d(l){l&&at(t),l&&at(r),l&&at(s)}}}function s1(e){let t,r,s;function l(h){e[46](h)}let c={threshold:j4,$$slots:{foreground:[D4],background:[M4]},$$scope:{ctx:e}};return e[0].map!==void 0&&(c.id=e[0].map),t=new bw({props:c}),qa.push(()=>Fg(t,"id",l)),{c(){yr(t.$$.fragment)},m(h,a){mr(t,h,a),s=!0},p(h,a){const d={};a[0]&2147483647|a[1]&15|a[2]&4&&(d.$$scope={dirty:a,ctx:h}),!r&&a[0]&1&&(r=!0,d.id=h[0].map,Eg(()=>r=!1)),t.$set(d)},i(h){s||(Mt(t.$$.fragment,h),s=!0)},o(h){Gt(t.$$.fragment,h),s=!1},d(h){gr(t,h)}}}function _4(e){let t,r;return t=new ko({props:{id:"rest-fill",type:"fill",paint:{"fill-color":"#fff","fill-opacity":.4}}}),{c(){yr(t.$$.fragment)},m(s,l){mr(t,s,l),r=!0},p:bn,i(s){r||(Mt(t.$$.fragment,s),r=!0)},o(s){Gt(t.$$.fragment,s),r=!1},d(s){gr(t,s)}}}function w4(e){let t,r;return t=new ko({props:{id:"cad-fill",idKey:"county_key",type:"fill",paint:{"fill-color":"#97DFD1","fill-opacity":e[24]}}}),{c(){yr(t.$$.fragment)},m(s,l){mr(t,s,l),r=!0},p(s,l){const c={};l[0]&16777216&&(c.paint={"fill-color":"#97DFD1","fill-opacity":s[24]}),t.$set(c)},i(s){r||(Mt(t.$$.fragment,s),r=!0)},o(s){Gt(t.$$.fragment,s),r=!1},d(s){gr(t,s)}}}function b4(e){let t,r;return t=new ko({props:{id:"sad-fill",idKey:"county_key",type:"line",paint:{"line-color":"#fff000","line-opacity":e[25],"line-width":5}}}),{c(){yr(t.$$.fragment)},m(s,l){mr(t,s,l),r=!0},p(s,l){const c={};l[0]&33554432&&(c.paint={"line-color":"#fff000","line-opacity":s[25],"line-width":5}),t.$set(c)},i(s){r||(Mt(t.$$.fragment,s),r=!0)},o(s){Gt(t.$$.fragment,s),r=!1},d(s){gr(t,s)}}}function x4(e){let t,r;return t=new ko({props:{id:"outline-line",idKey:"fips",type:"line",paint:{"line-color":"#333","line-width":1.5}}}),{c(){yr(t.$$.fragment)},m(s,l){mr(t,s,l),r=!0},p:bn,i(s){r||(Mt(t.$$.fragment,s),r=!0)},o(s){Gt(t.$$.fragment,s),r=!1},d(s){gr(t,s)}}}function B4(e){let t,r;return t=new Nw({props:{content:e[18]&&e[21]=="pretrial"?`<strong>${e[2].parish.lookup[e[18]].name}</strong><br/>
                    On ${e[40](e[2].parish.lookup[e[18]].pretrial_date)},  ${ju(e[2].parish.lookup[e[18]].total_jail_pretrial.toFixed(0))} people (${e[2].parish.lookup[e[18]].jail_pretrial_rate.toFixed(0)} per 10,000 residents) were detained pretrial in ${e[2].parish.lookup[e[18]].name} (population ${ju(e[2].parish.lookup[e[18]].total_pop)}).`:e[18]&&e[21]=="admission"?`<strong>${e[2].parish.lookup[e[18]].name}</strong><br/>
                    In ${e[2].parish.lookup[e[18]].year},  ${e[2].parish.lookup[e[18]].prison_adm_count} people (${e[2].parish.lookup[e[18]].prison_adm_rate.toFixed(0)} per 10,000 residents) were sent to prison from ${e[2].parish.lookup[e[18]].name} (population ${ju(e[2].parish.lookup[e[18]].total_pop)}).`:e[18]&&e[21]=="none"||e[18]&&e[21]=="over_1000_19"||e[18]&&e[21]=="over_1000_99"?`<strong>${e[2].parish.lookup[e[18]].name}</strong>`:""}}),{c(){yr(t.$$.fragment)},m(s,l){mr(t,s,l),r=!0},p(s,l){const c={};l[0]&2359300&&(c.content=s[18]&&s[21]=="pretrial"?`<strong>${s[2].parish.lookup[s[18]].name}</strong><br/>
                    On ${s[40](s[2].parish.lookup[s[18]].pretrial_date)},  ${ju(s[2].parish.lookup[s[18]].total_jail_pretrial.toFixed(0))} people (${s[2].parish.lookup[s[18]].jail_pretrial_rate.toFixed(0)} per 10,000 residents) were detained pretrial in ${s[2].parish.lookup[s[18]].name} (population ${ju(s[2].parish.lookup[s[18]].total_pop)}).`:s[18]&&s[21]=="admission"?`<strong>${s[2].parish.lookup[s[18]].name}</strong><br/>
                    In ${s[2].parish.lookup[s[18]].year},  ${s[2].parish.lookup[s[18]].prison_adm_count} people (${s[2].parish.lookup[s[18]].prison_adm_rate.toFixed(0)} per 10,000 residents) were sent to prison from ${s[2].parish.lookup[s[18]].name} (population ${ju(s[2].parish.lookup[s[18]].total_pop)}).`:s[18]&&s[21]=="none"||s[18]&&s[21]=="over_1000_19"||s[18]&&s[21]=="over_1000_99"?`<strong>${s[2].parish.lookup[s[18]].name}</strong>`:""),t.$set(c)},i(s){r||(Mt(t.$$.fragment,s),r=!0)},o(s){Gt(t.$$.fragment,s),r=!1},d(s){gr(t,s)}}}function C4(e){let t,r,s,l;return t=new ko({props:{id:"lad-fill",idKey:"code",colorKey:e[21]+"_color",outlineKey:e[21]+"_outline",data:e[1].parish.indicators,type:"fill",select:!0,selected:e[19],clickIgnore:!e[23],hover:!0,hovered:e[18],highlight:!0,highlighted:e[20],paint:{"fill-color":["case",["!=",["feature-state","color"],null],["feature-state","color"],"rgba(255, 255, 255, 0)"],"fill-opacity":1},$$slots:{default:[B4]},$$scope:{ctx:e}}}),t.$on("select",e[37]),t.$on("hover",e[39]),s=new ko({props:{id:"lad-line",type:"line",paint:{"line-color":["case",["boolean",["feature-state","hovered"],!1],"#ff9000",["boolean",["feature-state","selected"],!1],"black",["boolean",["feature-state","highlighted"],!1],"black","#fff"],"line-width":["case",["boolean",["feature-state","hovered"],!1],2,["boolean",["feature-state","selected"],!1],2,["boolean",["feature-state","highlighted"],!1],3,.5]}}}),{c(){yr(t.$$.fragment),r=$t(),yr(s.$$.fragment)},m(c,h){mr(t,c,h),At(c,r,h),mr(s,c,h),l=!0},p(c,h){const a={};h[0]&2097152&&(a.colorKey=c[21]+"_color"),h[0]&2097152&&(a.outlineKey=c[21]+"_outline"),h[0]&2&&(a.data=c[1].parish.indicators),h[0]&524288&&(a.selected=c[19]),h[0]&8388608&&(a.clickIgnore=!c[23]),h[0]&262144&&(a.hovered=c[18]),h[0]&1048576&&(a.highlighted=c[20]),h[0]&2359300|h[2]&4&&(a.$$scope={dirty:h,ctx:c}),t.$set(a)},i(c){l||(Mt(t.$$.fragment,c),Mt(s.$$.fragment,c),l=!0)},o(c){Gt(t.$$.fragment,c),Gt(s.$$.fragment,c),l=!1},d(c){gr(t,c),c&&at(r),gr(s,c)}}}function E4(e){let t,r,s,l;return t=new ko({props:{id:"pad-fill",idKey:"geopin",type:"fill",paint:{"fill-color":"#ff3300","fill-opacity":e[26]}}}),s=new ko({props:{id:"bldg-labels",type:"symbol",paint:{"text-halo-width":.75,"text-halo-color":"#fff","text-color":"#223476","text-opacity":e[26]},layout:{"text-field":["get","name"],visibility:"visible","text-variable-anchor":["top","bottom","left","right"],"text-radial-offset":.5,"text-size":14,"text-justify":"auto","text-padding":5}}}),{c(){yr(t.$$.fragment),r=$t(),yr(s.$$.fragment)},m(c,h){mr(t,c,h),At(c,r,h),mr(s,c,h),l=!0},p(c,h){const a={};h[0]&67108864&&(a.paint={"fill-color":"#ff3300","fill-opacity":c[26]}),t.$set(a);const d={};h[0]&67108864&&(d.paint={"text-halo-width":.75,"text-halo-color":"#fff","text-color":"#223476","text-opacity":c[26]}),s.$set(d)},i(c){l||(Mt(t.$$.fragment,c),Mt(s.$$.fragment,c),l=!0)},o(c){Gt(t.$$.fragment,c),Gt(s.$$.fragment,c),l=!1},d(c){gr(t,c),c&&at(r),gr(s,c)}}}function F4(e){let t,r,s,l;return t=new ko({props:{id:"ead-fill",idKey:"geopin",type:"fill",paint:{"fill-color":"#ff3300","fill-opacity":e[27]}}}),s=new ko({props:{id:"bldg-labels2",type:"symbol",paint:{"text-halo-width":1,"text-halo-color":"#fff","text-color":"#223476","text-opacity":e[27]},layout:{"text-field":["get","name"],visibility:"visible","text-variable-anchor":["top","bottom","left","right"],"text-radial-offset":.5,"text-size":14,"text-justify":"auto","text-padding":5}}}),{c(){yr(t.$$.fragment),r=$t(),yr(s.$$.fragment)},m(c,h){mr(t,c,h),At(c,r,h),mr(s,c,h),l=!0},p(c,h){const a={};h[0]&134217728&&(a.paint={"fill-color":"#ff3300","fill-opacity":c[27]}),t.$set(a);const d={};h[0]&134217728&&(d.paint={"text-halo-width":1,"text-halo-color":"#fff","text-color":"#223476","text-opacity":c[27]}),s.$set(d)},i(c){l||(Mt(t.$$.fragment,c),Mt(s.$$.fragment,c),l=!0)},o(c){Gt(t.$$.fragment,c),Gt(s.$$.fragment,c),l=!1},d(c){gr(t,c),c&&at(r),gr(s,c)}}}function S4(e){let t,r;return t=new ko({props:{id:"facs",idKey:"uuid",data:e[3].facility.indicators,colorKey:e[22]+"_color",type:"circle",paint:{"circle-stroke-width":e[29],"circle-stroke-color":e[30],"circle-color":e[28],"circle-stroke-opacity":["get","GT_1000_beds_99"],"circle-radius":["step",["get","capacity"],5,100,7,500,9,1e3,11,2e3,13,5e3,10]}}}),{c(){yr(t.$$.fragment)},m(s,l){mr(t,s,l),r=!0},p(s,l){const c={};l[0]&8&&(c.data=s[3].facility.indicators),l[0]&4194304&&(c.colorKey=s[22]+"_color"),l[0]&1879048192&&(c.paint={"circle-stroke-width":s[29],"circle-stroke-color":s[30],"circle-color":s[28],"circle-stroke-opacity":["get","GT_1000_beds_99"],"circle-radius":["step",["get","capacity"],5,100,7,500,9,1e3,11,2e3,13,5e3,10]}),t.$set(c)},i(s){r||(Mt(t.$$.fragment,s),r=!0)},o(s){Gt(t.$$.fragment,s),r=!1},d(s){gr(t,s)}}}function I4(e){let t,r;return t=new ko({props:{id:"gead-labels",type:"symbol",paint:{"text-halo-width":1,"text-halo-color":"#fff","text-color":"#333a5c","text-opacity":e[33]},layout:{"text-field":["get","facility_name"],visibility:"visible","text-variable-anchor":["top","bottom","left","right"],"text-radial-offset":1.5,"text-size":10,"text-justify":"left","text-padding":5,"text-allow-overlap":!(e[36]<420)}}}),{c(){yr(t.$$.fragment)},m(s,l){mr(t,s,l),r=!0},p(s,l){const c={};l[1]&4&&(c.paint={"text-halo-width":1,"text-halo-color":"#fff","text-color":"#333a5c","text-opacity":s[33]}),t.$set(c)},i(s){r||(Mt(t.$$.fragment,s),r=!0)},o(s){Gt(t.$$.fragment,s),r=!1},d(s){gr(t,s)}}}function T4(e){let t,r;return t=new ko({props:{id:"grad-labels",type:"symbol",paint:{"text-halo-width":1,"text-halo-color":"#fff","text-color":"#333a5c","text-opacity":e[32]},layout:{"text-field":["get","facility_name"],visibility:"visible","text-anchor":"center","text-size":10,"text-justify":"left","text-padding":5,"text-allow-overlap":!(e[36]<420),"text-offset":[0,2]}}}),{c(){yr(t.$$.fragment)},m(s,l){mr(t,s,l),r=!0},p(s,l){const c={};l[1]&2&&(c.paint={"text-halo-width":1,"text-halo-color":"#fff","text-color":"#333a5c","text-opacity":s[32]}),t.$set(c)},i(s){r||(Mt(t.$$.fragment,s),r=!0)},o(s){Gt(t.$$.fragment,s),r=!1},d(s){gr(t,s)}}}function U4(e){let t,r;return t=new ko({props:{id:"glad-labels",type:"symbol",paint:{"text-halo-width":1,"text-halo-color":"#fff","text-color":"#333a5c","text-opacity":e[31]},layout:{"text-field":["get","facility_name"],visibility:"visible","text-variable-anchor":["top","bottom","left","right"],"text-radial-offset":.5,"text-size":10,"text-justify":"left","text-padding":5,"text-allow-overlap":!(e[36]<420)}}}),{c(){yr(t.$$.fragment)},m(s,l){mr(t,s,l),r=!0},p(s,l){const c={};l[1]&1&&(c.paint={"text-halo-width":1,"text-halo-color":"#fff","text-color":"#333a5c","text-opacity":s[31]}),t.$set(c)},i(s){r||(Mt(t.$$.fragment,s),r=!0)},o(s){Gt(t.$$.fragment,s),r=!1},d(s){gr(t,s)}}}function L4(e){let t,r;return t=new ko({props:{id:"gred-labels",type:"symbol",paint:{"text-halo-width":2.5,"text-halo-color":"#feffea","text-color":"#44986e","text-opacity":e[34]},layout:{"text-field":["get","rev"],visibility:"visible","text-variable-anchor":["top","bottom","left","right"],"text-radial-offset":.5,"text-size":["step",["get","est_doc_rev"],0,1,12,1e4,14,3e6,16,5e6,18,8e6,20,1e7,10],"text-justify":"left","text-padding":5}}}),{c(){yr(t.$$.fragment)},m(s,l){mr(t,s,l),r=!0},p(s,l){const c={};l[1]&8&&(c.paint={"text-halo-width":2.5,"text-halo-color":"#feffea","text-color":"#44986e","text-opacity":s[34]}),t.$set(c)},i(s){r||(Mt(t.$$.fragment,s),r=!0)},o(s){Gt(t.$$.fragment,s),r=!1},d(s){gr(t,s)}}}function Q4(e){let t,r,s,l,c,h,a,d,_,p,E,w,x,Q,P,R,k,O,G,K,Z,$,fe,Ae;return t=new KA({props:{id:"rest",type:"geojson",data:e[7],maxzoom:24,$$slots:{default:[_4]},$$scope:{ctx:e}}}),s=new KA({props:{id:"cad",type:"geojson",data:e[6],maxzoom:22,$$slots:{default:[w4]},$$scope:{ctx:e}}}),c=new KA({props:{id:"sad",type:"geojson",data:e[5],maxzoom:22,$$slots:{default:[b4]},$$scope:{ctx:e}}}),a=new KA({props:{id:"outline",type:"geojson",data:e[11],maxzoom:22,$$slots:{default:[x4]},$$scope:{ctx:e}}}),_=new KA({props:{id:"lad",type:"geojson",data:e[4],promoteId:"AREACD",maxzoom:22,$$slots:{default:[C4]},$$scope:{ctx:e}}}),E=new KA({props:{id:"pad",type:"geojson",data:e[9],maxzoom:24,$$slots:{default:[E4]},$$scope:{ctx:e}}}),x=new KA({props:{id:"ead",type:"geojson",data:e[10],maxzoom:24,$$slots:{default:[F4]},$$scope:{ctx:e}}}),P=new KA({props:{id:"rad",type:"geojson",data:e[12],maxzoom:22,promoteId:"uuid",$$slots:{default:[S4]},$$scope:{ctx:e}}}),k=new KA({props:{id:"gead",type:"geojson",data:e[15],maxzoom:24,$$slots:{default:[I4]},$$scope:{ctx:e}}}),G=new KA({props:{id:"grad",type:"geojson",data:e[14],maxzoom:24,$$slots:{default:[T4]},$$scope:{ctx:e}}}),Z=new KA({props:{id:"glad",type:"geojson",data:e[13],maxzoom:24,$$slots:{default:[U4]},$$scope:{ctx:e}}}),fe=new KA({props:{id:"gred",type:"geojson",data:e[16],maxzoom:24,$$slots:{default:[L4]},$$scope:{ctx:e}}}),{c(){yr(t.$$.fragment),r=$t(),yr(s.$$.fragment),l=$t(),yr(c.$$.fragment),h=$t(),yr(a.$$.fragment),d=$t(),yr(_.$$.fragment),p=$t(),yr(E.$$.fragment),w=$t(),yr(x.$$.fragment),Q=$t(),yr(P.$$.fragment),R=$t(),yr(k.$$.fragment),O=$t(),yr(G.$$.fragment),K=$t(),yr(Z.$$.fragment),$=$t(),yr(fe.$$.fragment)},m(ge,he){mr(t,ge,he),At(ge,r,he),mr(s,ge,he),At(ge,l,he),mr(c,ge,he),At(ge,h,he),mr(a,ge,he),At(ge,d,he),mr(_,ge,he),At(ge,p,he),mr(E,ge,he),At(ge,w,he),mr(x,ge,he),At(ge,Q,he),mr(P,ge,he),At(ge,R,he),mr(k,ge,he),At(ge,O,he),mr(G,ge,he),At(ge,K,he),mr(Z,ge,he),At(ge,$,he),mr(fe,ge,he),Ae=!0},p(ge,he){const ee={};he[0]&128&&(ee.data=ge[7]),he[2]&4&&(ee.$$scope={dirty:he,ctx:ge}),t.$set(ee);const ne={};he[0]&64&&(ne.data=ge[6]),he[0]&16777216|he[2]&4&&(ne.$$scope={dirty:he,ctx:ge}),s.$set(ne);const xe={};he[0]&32&&(xe.data=ge[5]),he[0]&33554432|he[2]&4&&(xe.$$scope={dirty:he,ctx:ge}),c.$set(xe);const ve={};he[0]&2048&&(ve.data=ge[11]),he[2]&4&&(ve.$$scope={dirty:he,ctx:ge}),a.$set(ve);const ze={};he[0]&16&&(ze.data=ge[4]),he[0]&12320774|he[2]&4&&(ze.$$scope={dirty:he,ctx:ge}),_.$set(ze);const Le={};he[0]&512&&(Le.data=ge[9]),he[0]&67108864|he[2]&4&&(Le.$$scope={dirty:he,ctx:ge}),E.$set(Le);const Ke={};he[0]&1024&&(Ke.data=ge[10]),he[0]&134217728|he[2]&4&&(Ke.$$scope={dirty:he,ctx:ge}),x.$set(Ke);const Ue={};he[0]&4096&&(Ue.data=ge[12]),he[0]&1883242504|he[2]&4&&(Ue.$$scope={dirty:he,ctx:ge}),P.$set(Ue);const rt={};he[0]&32768&&(rt.data=ge[15]),he[1]&4|he[2]&4&&(rt.$$scope={dirty:he,ctx:ge}),k.$set(rt);const je={};he[0]&16384&&(je.data=ge[14]),he[1]&2|he[2]&4&&(je.$$scope={dirty:he,ctx:ge}),G.$set(je);const St={};he[0]&8192&&(St.data=ge[13]),he[1]&1|he[2]&4&&(St.$$scope={dirty:he,ctx:ge}),Z.$set(St);const te={};he[0]&65536&&(te.data=ge[16]),he[1]&8|he[2]&4&&(te.$$scope={dirty:he,ctx:ge}),fe.$set(te)},i(ge){Ae||(Mt(t.$$.fragment,ge),Mt(s.$$.fragment,ge),Mt(c.$$.fragment,ge),Mt(a.$$.fragment,ge),Mt(_.$$.fragment,ge),Mt(E.$$.fragment,ge),Mt(x.$$.fragment,ge),Mt(P.$$.fragment,ge),Mt(k.$$.fragment,ge),Mt(G.$$.fragment,ge),Mt(Z.$$.fragment,ge),Mt(fe.$$.fragment,ge),Ae=!0)},o(ge){Gt(t.$$.fragment,ge),Gt(s.$$.fragment,ge),Gt(c.$$.fragment,ge),Gt(a.$$.fragment,ge),Gt(_.$$.fragment,ge),Gt(E.$$.fragment,ge),Gt(x.$$.fragment,ge),Gt(P.$$.fragment,ge),Gt(k.$$.fragment,ge),Gt(G.$$.fragment,ge),Gt(Z.$$.fragment,ge),Gt(fe.$$.fragment,ge),Ae=!1},d(ge){gr(t,ge),ge&&at(r),gr(s,ge),ge&&at(l),gr(c,ge),ge&&at(h),gr(a,ge),ge&&at(d),gr(_,ge),ge&&at(p),gr(E,ge),ge&&at(w),gr(x,ge),ge&&at(Q),gr(P,ge),ge&&at(R),gr(k,ge),ge&&at(O),gr(G,ge),ge&&at(K),gr(Z,ge),ge&&at($),gr(fe,ge)}}}function a1(e){let t,r,s,l,c;return r=new Ug({props:{style:t3,interactive:!1,location:{bounds:e[35].angola},$$slots:{default:[k4]},$$scope:{ctx:e}}}),{c(){t=Lt("div"),yr(r.$$.fragment),s=$t(),l=Lt("div"),l.innerHTML=`<div id="angola-legend-hold" class="svelte-ro4t2z"><div class="line svelte-ro4t2z"></div>
                Louisiana plantations circa 1853</div>`,ue(t,"id","angola"),ue(t,"class","svelte-ro4t2z"),ue(l,"id","angola-legend"),ue(l,"class","svelte-ro4t2z")},m(h,a){At(h,t,a),mr(r,t,null),At(h,s,a),At(h,l,a),c=!0},p(h,a){const d={};a[0]&256|a[2]&4&&(d.$$scope={dirty:a,ctx:h}),r.$set(d)},i(h){c||(Mt(r.$$.fragment,h),c=!0)},o(h){Gt(r.$$.fragment,h),c=!1},d(h){h&&at(t),gr(r),h&&at(s),h&&at(l)}}}function P4(e){let t,r;return t=new ko({props:{id:"chad-line",idKey:"county_key",type:"line",paint:{"line-color":"#97DFD1","line-opacity":.4,"line-width":3}}}),{c(){yr(t.$$.fragment)},m(s,l){mr(t,s,l),r=!0},p:bn,i(s){r||(Mt(t.$$.fragment,s),r=!0)},o(s){Gt(t.$$.fragment,s),r=!1},d(s){gr(t,s)}}}function k4(e){let t,r;return t=new KA({props:{id:"chad",type:"geojson",data:e[8],maxzoom:22,$$slots:{default:[P4]},$$scope:{ctx:e}}}),{c(){yr(t.$$.fragment)},m(s,l){mr(t,s,l),r=!0},p(s,l){const c={};l[0]&256&&(c.data=s[8]),l[2]&4&&(c.$$scope={dirty:l,ctx:s}),t.$set(c)},i(s){r||(Mt(t.$$.fragment,s),r=!0)},o(s){Gt(t.$$.fragment,s),r=!1},d(s){gr(t,s)}}}function o1(e){let t,r,s,l,c,h=e[4].features,a=[];for(let d=0;d<h.length;d+=1)a[d]=A1(n1(e,h,d));return{c(){t=Lt("div"),r=Lt("select"),s=Lt("option"),s.textContent="See data for each Parish.";for(let d=0;d<a.length;d+=1)a[d].c();s.__value=null,s.value=s.__value,ue(r,"class","svelte-ro4t2z"),e[19]===void 0&&wu(()=>e[44].call(r)),ue(t,"id","persistent-parish-data"),ue(t,"class","svelte-ro4t2z")},m(d,_){At(d,t,_),it(t,r),it(r,s);for(let p=0;p<a.length;p+=1)a[p].m(r,null);Vh(r,e[19]),l||(c=[es(r,"change",e[44]),es(r,"change",e[45])],l=!0)},p(d,_){if(_[0]&16){h=d[4].features;let p;for(p=0;p<h.length;p+=1){const E=n1(d,h,p);a[p]?a[p].p(E,_):(a[p]=A1(E),a[p].c(),a[p].m(r,null))}for(;p<a.length;p+=1)a[p].d(1);a.length=h.length}_[0]&524304&&Vh(r,d[19])},d(d){d&&at(t),Hl(a,d),l=!1,tA(c)}}}function A1(e){let t,r=e[59].properties.AREANM+"",s,l,c;return{c(){t=Lt("option"),s=Pr(r),l=$t(),t.__value=c=e[59].properties.AREANM,t.value=t.__value},m(h,a){At(h,t,a),it(t,s),it(t,l)},p(h,a){a[0]&16&&r!==(r=h[59].properties.AREANM+"")&&ai(s,r),a[0]&16&&c!==(c=h[59].properties.AREANM)&&(t.__value=c,t.value=t.__value)},d(h){h&&at(t)}}}function M4(e){let t,r,s,l,c,h,a,d,_,p;function E(P){e[43](P)}let w={style:e3,interactive:!1,location:{bounds:e[36]<420?e[35].lamobile:e[35].la},$$slots:{default:[Q4]},$$scope:{ctx:e}};e[17]!==void 0&&(w.map=e[17]),l=new Ug({props:w}),qa.push(()=>Fg(l,"map",E));let x=e[0].map=="map12"&&a1(e);d=new Zw({props:{lo:e[0].map}});let Q=e[0].map!=="map15"&&o1(e);return{c(){t=Lt("div"),r=Lt("figure"),s=Lt("div"),yr(l.$$.fragment),h=$t(),x&&x.c(),a=$t(),yr(d.$$.fragment),_=$t(),Q&&Q.c(),ue(s,"class","col-full height-full"),ue(t,"slot","background")},m(P,R){At(P,t,R),it(t,r),it(r,s),mr(l,s,null),it(s,h),x&&x.m(s,null),it(t,a),mr(d,t,null),it(t,_),Q&&Q.m(t,null),p=!0},p(P,R){const k={};R[0]&2147352318|R[1]&15|R[2]&4&&(k.$$scope={dirty:R,ctx:P}),!c&&R[0]&131072&&(c=!0,k.map=P[17],Eg(()=>c=!1)),l.$set(k),P[0].map=="map12"?x?(x.p(P,R),R[0]&1&&Mt(x,1)):(x=a1(P),x.c(),Mt(x,1),x.m(s,null)):x&&(Xa(),Gt(x,1,1,()=>{x=null}),Za());const O={};R[0]&1&&(O.lo=P[0].map),d.$set(O),P[0].map!=="map15"?Q?Q.p(P,R):(Q=o1(P),Q.c(),Q.m(t,null)):Q&&(Q.d(1),Q=null)},i(P){p||(Mt(l.$$.fragment,P),Mt(x),Mt(d.$$.fragment,P),p=!0)},o(P){Gt(l.$$.fragment,P),Gt(x),Gt(d.$$.fragment,P),p=!1},d(P){P&&at(t),gr(l),x&&x.d(),gr(d),Q&&Q.d()}}}function l1(e){let t,r,s,l,c,h=e[4].features,a=[];for(let d=0;d<h.length;d+=1)a[d]=c1(i1(e,h,d));return{c(){t=Lt("p"),r=Lt("select"),s=Lt("option"),s.textContent="Select one";for(let d=0;d<a.length;d+=1)a[d].c();s.__value=null,s.value=s.__value,ue(r,"class","svelte-ro4t2z"),e[19]===void 0&&wu(()=>e[41].call(r))},m(d,_){At(d,t,_),it(t,r),it(r,s);for(let p=0;p<a.length;p+=1)a[p].m(r,null);Vh(r,e[19]),l||(c=[es(r,"change",e[41]),es(r,"change",e[42])],l=!0)},p(d,_){if(_[0]&16){h=d[4].features;let p;for(p=0;p<h.length;p+=1){const E=i1(d,h,p);a[p]?a[p].p(E,_):(a[p]=c1(E),a[p].c(),a[p].m(r,null))}for(;p<a.length;p+=1)a[p].d(1);a.length=h.length}_[0]&524304&&Vh(r,d[19])},d(d){d&&at(t),Hl(a,d),l=!1,tA(c)}}}function c1(e){let t,r=e[59].properties.AREANM+"",s,l,c;return{c(){t=Lt("option"),s=Pr(r),l=$t(),t.__value=c=e[59].properties.AREANM,t.value=t.__value},m(h,a){At(h,t,a),it(t,s),it(t,l)},p(h,a){a[0]&16&&r!==(r=h[59].properties.AREANM+"")&&ai(s,r),a[0]&16&&c!==(c=h[59].properties.AREANM)&&(t.__value=c,t.value=t.__value)},d(h){h&&at(t)}}}function D4(e){let t,r,s,l,c,h,a,d,_,p,E,w,x,Q,P,R,k,O,G,K,Z,$,fe,Ae,ge,he,ee,ne,xe,ve,ze,Le,Ke,Ue,rt,je,St,te=e[4]&&l1(e);return{c(){t=Lt("div"),r=Lt("section"),r.innerHTML=`<div class="col-medium"><p>Louisiana now has the second highest <a href="https://bjs.ojp.gov/sites/g/files/xyckuh236/files/media/document/p21st.pdf" target="_blank" class="svelte-ro4t2z"><strong>imprisonment rate</strong></a> in the nation. Despite modest declines in the prison population, mass
            incarceration remains a problem in every parish: the prison admission
            rate is greater than the national average in 92 percent of parishes and
            more than twice the national average in 63 percent of parishes.</p></div>`,s=$t(),l=Lt("section"),l.innerHTML=`<div class="col-medium"><p>Mass incarceration is not only measured by the number of people in
            prison. People arrested but not convicted—that is, people in the
            “pretrial” period—are held in local jails. The <strong>pretrial incarceration rate</strong> in Louisiana is the highest in the nation and twice the national average.
            On a local level, the pretrial incarceration rate is greater than the
            national average in 89 percent of parishes and more than twice the national
            average in 59 percent of parishes.​</p></div>`,c=$t(),h=Lt("section"),h.innerHTML=`<div class="col-medium"><p>Recent history illustrates how jail capacity has increased across
            the state. In 1999, there were only <span class="enormousjails svelte-ro4t2z">five parishes</span>
            with more than 1,000 <span class="localjails svelte-ro4t2z">jail beds</span>.</p></div>`,a=$t(),d=Lt("section"),d.innerHTML=`<div class="col-medium"><p>One of these was Orleans Parish, which at the time had a sprawling
            complex with more than 7,500 jail beds.</p></div>`,_=$t(),p=Lt("section"),p.innerHTML=`<div class="col-medium"><p>But in 2005, the complex was destroyed by Hurricane Katrina,
            prompting a dialogue on how much the city should invest in jailing
            people. Through the efforts of community advocates, the parish ended
            the practice of holding people for the state corrections department
            and limited the new jail’s capacity to 1,250 people. By 2019,
            Orleans Parish’s pretrial population had declined by 75 percent, and
            the total jail population had dropped by more than 80 percent.</p></div>`,E=$t(),w=Lt("section"),w.innerHTML=`<div class="col-medium"><p>During this time, however, sheriffs across the state added
            14,000 jail beds, and there are now <span class="enormousjails svelte-ro4t2z">13 parishes</span>
            with more than <span class="localjails svelte-ro4t2z">1,000 jail beds</span>.​</p></div>`,x=$t(),Q=Lt("section"),Q.innerHTML=`<div class="col-medium"><p><strong><span class="localjails svelte-ro4t2z">Local jails</span></strong> operated
            by sheriffs and police departments are the foundation of Louisiana’s
            carceral infrastructure. Sheriffs operate 85 jails with a combined capacity
            of more than 29,000 beds, while municipal police departments operate
            65 jails with a total of nearly 4,800 beds. This enables the state’s
            astronomical pretrial detention rates.</p></div>`,P=$t(),R=Lt("section"),R.innerHTML=`<div class="col-medium"><p>This growth in jail capacity also means that Louisiana’s law
            enforcement agencies are uniquely invested in incarceration, as the
            state pays local jails “per diems” to hold people serving a state
            prison sentence. More than half of the 27,000 people that comprise
            Louisiana’s “prison population” are serving their sentence in a
            local jail. This arrangement costs the state less than building new
            prisons and <span class="financial svelte-ro4t2z">financially benefits</span> the sheriffs,
            while depriving incarcerated people of services like education and vocational
            training, which are more often available in prisons.</p></div>`,k=$t(),O=Lt("section"),O.innerHTML=`<div class="col-medium"><p>Dozens of sheriffs also operate <strong>Transitional Work Programs (TWP)</strong>
            that hold people who are nearing the end of their prison term. These
            programs release people during the day to work in the community, but
            take about
            <a href="https://app.lla.state.la.us/publicreports.nsf/87d9ddaec96efe3a86257f94007293f3/$file/0000e78f.pdf" target="_blank" class="svelte-ro4t2z">65 percent</a> of their wages for the jail, which also receives a payment from the
            state. Several private operators have TWP contracts with the state as
            well, and 11 parishes have built an additional facility solely to provide
            TWP beds.</p></div>`,G=$t(),K=Lt("section"),K.innerHTML=`<div class="col-medium"><p>In addition to the 150 jails operated by local law enforcement
            agencies, there are 11 <span class="privatejails svelte-ro4t2z">privately operated jails</span> with more than 10,000 beds combined. U.S. Immigration and Customs Enforcement
            (ICE) has contracts with the GEO Group to operate four detention facilities.
            And local sheriffs have partnerships with LaSalle Corrections and other
            private firms to operate seven additional jails, which principally hold
            people for the state but also hold people for ICE.</p></div>`,Z=$t(),$=Lt("section"),$.innerHTML='<div class="col-medium"><p>Louisiana has five federal prisons and eight state <span class="prisons svelte-ro4t2z">prisons</span>.</p></div>',fe=$t(),Ae=Lt("section"),Ae.innerHTML=`<div class="col-medium"><p>One of these is the Louisiana State Penitentiary, more commonly
            called “Angola” after the plantation that once occupied the same
            site. Today, the prison’s plantation continues to produce cotton,
            sugar, corn, and other crops that were harvested during times of
            slavery—except today, incarcerated people tend the fields, an
            arrangement made possible by an exception in the 13th Amendment
            permitting slavery “as a punishment for crime.”</p></div>`,ge=$t(),he=Lt("section"),he.innerHTML=`<div class="col-medium"><p>Looking at historical plantations next to modern-day jails and
            prisons, Louisiana’s evolution from mass enslavement to mass
            incarceration is undeniable. The state’s largest jails and prisons
            are situated squarely on the same land where Black people were
            enslaved to sustain the state’s agricultural industry. These
            facilities now use the forced labor of incarcerated people (who are
            disproportionally Black) to sustain the “corrections” industry.</p></div>`,ee=$t(),ne=Lt("section"),ne.innerHTML=`<div class="col-medium"><p>Adding youth prisons and jails to the facilities already outlined
            shows that there are more than 230 jails and prisons across
            Louisiana. In comparison, there are only 43 universities and
            colleges in the state.</p></div>`,xe=$t(),ve=Lt("section"),ze=Lt("a"),Le=$t(),Ke=Lt("div"),Ue=Lt("p"),Ue.textContent=`These numbers matter: more facilities lead to more incarceration.
            The parishes with the most outsized jails often have the highest
            pretrial detention and prison incarceration rates.`,rt=$t(),je=Lt("p"),je.innerHTML=`<strong>Visit your parish page to see how local policies add up to
              statewide mass incarceration. Scroll down to see Vera’s
              recommendations for tackling these issues.</strong>`,St=$t(),te&&te.c(),ue(r,"data-id","map01"),ue(l,"data-id","map02"),ue(h,"data-id","map03"),ue(d,"data-id","map04"),ue(p,"data-id","map05"),ue(w,"data-id","map06"),ue(Q,"data-id","map07"),ue(R,"data-id","map08"),ue(O,"data-id","map09"),ue(K,"data-id","map10"),ue($,"data-id","map11"),ue(Ae,"data-id","map12"),ue(he,"data-id","map13"),ue(ne,"data-id","map14"),ue(ze,"id","parishes"),ue(ze,"class","svelte-ro4t2z"),ue(Ke,"class","col-medium"),ue(ve,"data-id","map15"),ue(ve,"id","browseparishes"),ue(t,"slot","foreground")},m(Fe,Qe){At(Fe,t,Qe),it(t,r),it(t,s),it(t,l),it(t,c),it(t,h),it(t,a),it(t,d),it(t,_),it(t,p),it(t,E),it(t,w),it(t,x),it(t,Q),it(t,P),it(t,R),it(t,k),it(t,O),it(t,G),it(t,K),it(t,Z),it(t,$),it(t,fe),it(t,Ae),it(t,ge),it(t,he),it(t,ee),it(t,ne),it(t,xe),it(t,ve),it(ve,ze),it(ve,Le),it(ve,Ke),it(Ke,Ue),it(Ke,rt),it(Ke,je),it(Ke,St),te&&te.m(Ke,null)},p(Fe,Qe){Fe[4]?te?te.p(Fe,Qe):(te=l1(Fe),te.c(),te.m(Ke,null)):te&&(te.d(1),te=null)},d(Fe){Fe&&at(t),te&&te.d()}}}function N4(e){let t,r,s,l,c,h,a,d,_,p,E,w,x,Q;t=new gw({props:{$$slots:{default:[v4]},$$scope:{ctx:e}}}),s=new uw({});let P=e[4]&&e[1].parish.indicators&&e[3].facility.indicators&&s1(e);return a=new fw({}),p=new iv({}),x=new Yw({}),{c(){yr(t.$$.fragment),r=$t(),yr(s.$$.fragment),l=$t(),P&&P.c(),c=$t(),h=Lt("div"),yr(a.$$.fragment),d=$t(),_=Lt("div"),yr(p.$$.fragment),E=$t(),w=Lt("div"),yr(x.$$.fragment),ue(_,"class","col-wide"),ue(w,"class","col-wide"),ue(h,"id","bottom"),ue(h,"class","svelte-ro4t2z")},m(R,k){mr(t,R,k),At(R,r,k),mr(s,R,k),At(R,l,k),P&&P.m(R,k),At(R,c,k),At(R,h,k),mr(a,h,null),it(h,d),it(h,_),mr(p,_,null),it(h,E),it(h,w),mr(x,w,null),Q=!0},p(R,k){const O={};k[2]&4&&(O.$$scope={dirty:k,ctx:R}),t.$set(O),R[4]&&R[1].parish.indicators&&R[3].facility.indicators?P?(P.p(R,k),k[0]&26&&Mt(P,1)):(P=s1(R),P.c(),Mt(P,1),P.m(c.parentNode,c)):P&&(Xa(),Gt(P,1,1,()=>{P=null}),Za())},i(R){Q||(Mt(t.$$.fragment,R),Mt(s.$$.fragment,R),Mt(P),Mt(a.$$.fragment,R),Mt(p.$$.fragment,R),Mt(x.$$.fragment,R),Q=!0)},o(R){Gt(t.$$.fragment,R),Gt(s.$$.fragment,R),Gt(P),Gt(a.$$.fragment,R),Gt(p.$$.fragment,R),Gt(x.$$.fragment,R),Q=!1},d(R){gr(t,R),R&&at(r),gr(s,R),R&&at(l),P&&P.d(R),R&&at(c),R&&at(h),gr(a),gr(p),gr(x)}}}let u1="light";const j4=.65,R4="./data/parishes.json",O4="./data/orleansparishtopo.json",z4="./data/clippedtopo.json",H4="./data/franklin.json",V4="./data/restUS.json",K4="./data/wfel.json",G4="./data/bldg2005topo.json",q4="./data/bldg2023topo.json",W4="./data/statetopo.json",X4="./data/facility.json",Z4="./data/twp.json",J4="./data/private.json",Y4="./data/prison.json",$4="./data/estdocrev.json",e3="https://api.maptiler.com/maps/72c3ba93-41a4-4cb7-8f43-eb0d3c5797d7/style.json?key=FauA8RpnouVUuBS6hR1V",t3="https://api.maptiler.com/maps/hybrid/style.json?key=epSI7oxRYqxkl2HpZgcr";function ju(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")}function r3(e,t,r){hc.start({click:!1}),Gh("theme",u1),lw(Nf,u1);let s=nv(),l={},c={};Wa(()=>{c={...l}});const h=["parish"],a=["facility"],d={la:[[-95.0399448042286,28.595645625527535],[-88.58723191094903,33.39651900203391]],la2:[[-94.20437521837017,29.05549858060883],[-88.64342295552318,32.92697341963069]],lamobile:[[-94.16658071248452,25.45654294508548],[-89.31523133151606,35.632898417372274]],neworleans:[[-90.20218547121677,29.832442237380768],[-89.5287512047579,30.2826563423104]],neworleansmobile:[[-90.0994909234169,29.951175901295326],[-90.08906084005827,29.97318139970902]],orleansparishjail:[[-90.09584076786747,29.95885105594476],[-90.09124436292655,29.96202846489282]],angola:[[-91.64341265873233,30.93019793919344],[-91.56290347711851,30.9865779654985]],nolajailbldg:[[-90.1026537217127,29.956812140351577],[-90.08733946304126,29.965537706523364]],nolajailbldg2:[[-90.09702702023108,29.953342990656846],[-90.08936855325291,29.974661699522763]],nola2023:[[-90.09790954793945,29.95716669715467],[-90.0920981511653,29.962729653377394]]};let _={parish:{}},p={parish:{}},E={facility:{}},w={facility:{}},x,Q,P,R,k,O,G,K,Z,$,fe,Ae,ge,he=null,ee,ne,xe=[],ve="admission",ze="none",Le=!1,Ke=0,Ue=0,rt=0,je=0,St,te,Fe,Qe=0,Ve=0,st=0,dt=0,Ge=Pa("#app").node().getBoundingClientRect().width;function tt(rr){r(19,ne=rr.detail.feature.properties.AREANM),hc("/louisiana-locked-up/parish/"+ne),rr.preventDefault()}function Qt(rr){hc("/louisiana-locked-up/parish/"+rr),rr.preventDefault()}function ht(rr){r(18,ee=rr.detail.id)}function Nt(rr){he&&he.fitBounds(rr,{animate:s,padding:30})}const dr={map:{map01:()=>{Nt(Ge<420?d.lamobile:d.la),r(21,ve="admission"),r(20,xe=[]),r(23,Le=!1),r(22,ze="none"),r(24,Ke=0),r(25,Ue=0),r(26,rt=0),r(27,je=0),r(29,te=0),r(28,St="rgba(0,0,0,0)"),r(30,Fe="rgba(255,255,255,0)"),r(31,Qe=0),r(32,Ve=0),r(33,st=0),r(34,dt=0)},map02:()=>{Nt(Ge<420?d.lamobile:d.la),r(21,ve="pretrial"),r(20,xe=[]),r(23,Le=!1),r(22,ze="none"),r(24,Ke=0),r(25,Ue=0),r(26,rt=0),r(27,je=0),r(29,te=0),r(30,Fe="rgba(255,255,255,0)"),r(31,Qe=0),r(32,Ve=0),r(33,st=0),r(34,dt=0)},map03:()=>{Nt(Ge<420?d.lamobile:d.la),r(20,xe=[]),r(21,ve="over_1000_99"),r(23,Le=!1),r(22,ze="GT_1000_beds_99"),r(24,Ke=0),r(25,Ue=0),r(26,rt=0),r(27,je=0),r(28,St=["case",["!=",["feature-state","color"],null],["feature-state","color"],"rgba(255, 255, 255, 0)"]),r(29,te=["get","over_1000_99"]),r(30,Fe="rgba(255, 255, 255, 1)"),r(31,Qe=0),r(32,Ve=0),r(33,st=0),r(34,dt=0)},map04:()=>{r(20,xe=[]),Nt(Ge<420?d.neworleansmobile:d.nolajailbldg),r(21,ve="none"),r(23,Le=!1),r(22,ze=""),r(24,Ke=0),r(25,Ue=1),r(26,rt=1),r(27,je=0),r(28,St=["case",["!=",["feature-state","color"],null],["feature-state","color"],"rgba(255, 255, 255, 0)"]),r(29,te=0),r(30,Fe="rgba(255,255,255,0)"),r(31,Qe=0),r(32,Ve=0),r(34,dt=0)},map05:()=>{Nt(Ge<420?d.neworleansmobile:d.nolajailbldg),r(20,xe=[]),r(21,ve="none"),r(23,Le=!1),r(22,ze=""),r(24,Ke=0),r(25,Ue=1),r(26,rt=0),r(27,je=1),r(28,St=["case",["!=",["feature-state","color"],null],["feature-state","color"],"rgba(255, 255, 255, 0)"]),r(29,te=0),r(30,Fe="rgba(255,255,255,0)"),r(31,Qe=0),r(32,Ve=0),r(33,st=0),r(34,dt=0)},map06:()=>{Nt(Ge<420?d.lamobile:d.la),r(20,xe=[]),r(21,ve="over_1000_19"),r(23,Le=!1),r(22,ze="GT_1000_beds_19"),r(24,Ke=0),r(25,Ue=0),r(26,rt=0),r(27,je=0),r(28,St=["case",["!=",["feature-state","color"],null],["feature-state","color"],"rgba(255, 255, 255, 0)"]),r(29,te=["get","GT_1000_beds_19"]),r(30,Fe="rgba(255,255,255,1)"),r(31,Qe=0),r(32,Ve=0),r(33,st=0),r(34,dt=0)},map07:()=>{Nt(Ge<420?d.lamobile:d.la),r(20,xe=[]),r(21,ve="none"),r(23,Le=!1),r(22,ze="map_jails"),r(24,Ke=0),r(25,Ue=0),r(26,rt=0),r(27,je=0),r(28,St=["case",["!=",["feature-state","color"],null],["feature-state","color"],"rgba(255, 255, 255, 0)"]),r(29,te=["get","map_jails"]),r(30,Fe="rgba(255,255,255,1)"),r(31,Qe=0),r(32,Ve=0),r(33,st=0),r(34,dt=0)},map08:()=>{Nt(Ge<420?d.lamobile:d.la),r(20,xe=[]),r(21,ve="none"),r(23,Le=!1),r(22,ze=""),r(24,Ke=0),r(25,Ue=0),r(26,rt=0),r(27,je=0),r(28,St=["case",["!=",["feature-state","color"],null],["feature-state","color"],"rgba(255, 255, 255, 0)"]),r(29,te=0),r(30,Fe="rgba(255,255,255,0)"),r(31,Qe=0),r(32,Ve=0),r(33,st=0),r(34,dt=1)},map09:()=>{Nt(Ge<420?d.lamobile:d.la),r(21,ve="none"),r(20,xe=[]),r(23,Le=!1),r(22,ze="map_twp"),r(24,Ke=0),r(25,Ue=0),r(26,rt=0),r(27,je=0),r(28,St=["case",["!=",["feature-state","color"],null],["feature-state","color"],"rgba(255, 255, 255, 0)"]),r(29,te=["get","map_twp"]),r(30,Fe="rgba(255,255,255,1)"),r(31,Qe=1),r(32,Ve=0),r(33,st=0),r(34,dt=0)},map10:()=>{Nt(Ge<420?d.lamobile:d.la),r(21,ve="none"),r(20,xe=[]),r(23,Le=!1),r(22,ze="map_private"),r(24,Ke=0),r(25,Ue=0),r(26,rt=0),r(27,je=0),r(28,St=["case",["!=",["feature-state","color"],null],["feature-state","color"],"rgba(255, 255, 255, 0)"]),r(29,te=["get","map_private"]),r(30,Fe="rgba(255,255,255,1)"),r(31,Qe=0),r(32,Ve=1),r(33,st=0),r(34,dt=0)},map11:()=>{Nt(Ge<420?d.lamobile:d.la),r(21,ve="none"),r(20,xe=[]),r(23,Le=!1),r(22,ze="map_prison"),r(24,Ke=0),r(25,Ue=0),r(26,rt=0),r(27,je=0),r(28,St=["case",["!=",["feature-state","color"],null],["feature-state","color"],"rgba(255, 255, 255, 0)"]),r(29,te=["get","map_prison"]),r(30,Fe="rgba(255,255,255,1)"),r(31,Qe=0),r(32,Ve=0),r(33,st=1),r(34,dt=0)},map12:()=>{Nt(d.angola),r(21,ve="none"),r(20,xe=[]),r(22,ze=""),r(23,Le=!1),r(24,Ke=1),r(25,Ue=0),r(26,rt=0),r(27,je=0),r(29,te=0),r(28,St=["case",["!=",["feature-state","color"],null],["feature-state","color"],"rgba(255, 255, 255, 0)"]),r(30,Fe="rgba(255,255,255,0)"),r(31,Qe=0),r(32,Ve=0),r(33,st=0),r(34,dt=0)},map13:()=>{Nt(Ge<420?d.lamobile:d.la),r(21,ve="none"),r(20,xe=[]),r(22,ze="map_all"),r(23,Le=!1),r(24,Ke=1),r(25,Ue=0),r(26,rt=0),r(27,je=0),r(28,St="rgba(255,255,255,0)"),r(29,te=.7),r(30,Fe="rgba(0,0,0,1)"),r(31,Qe=0),r(32,Ve=0),r(33,st=0),r(34,dt=0)},map14:()=>{Nt(Ge<420?d.lamobile:d.la),r(21,ve="none"),r(20,xe=[]),r(22,ze="map_all"),r(23,Le=!1),r(24,Ke=0),r(25,Ue=0),r(26,rt=0),r(27,je=0),r(28,St=["match",["get","facility_type"],"Jail","rgba(46,29,151,.9)","Prison","rgba(0,92,229, 0.9)","Juvenile","rgba(235,65,44,.9)","TWP Facility","rgba(255,158,68,0.9)","Holding Cell","rgba(177, 188, 255, 0.9)","#ccc"]),r(29,te=1),r(30,Fe="rgba(255,255,255,1)"),r(31,Qe=0),r(32,Ve=0),r(33,st=0),r(34,dt=0)},map15:()=>{Nt(Ge<420?d.lamobile:d.la),r(21,ve="pretrial"),r(20,xe=[]),r(22,ze="map_all"),r(24,Ke=0),r(25,Ue=0),r(26,rt=0),r(27,je=0),r(28,St="rgba(255,255,255,0)"),r(29,te=1),r(30,Fe="rgba(255,255,255,1)"),r(31,Qe=0),r(32,Ve=0),r(33,st=0),r(34,dt=0),r(23,Le=!0)}}};function Pt(rr=[]){rr.forEach(xr=>{l[xr]!=c[xr]&&(dr[xr][l[xr]]&&dr[xr][l[xr]](),c[xr]=l[xr])})}const Oe=Xg("%m/%d/%y");h.forEach(rr=>{l0(`./data/data_${rr}.csv`).then(xr=>{xr.forEach(nt=>{nt.jail_pretrial_rate=+nt.jail_pretrial_rate.toFixed(1),nt.prison_adm_rate=+nt.prison_adm_rate.toFixed(1),nt.over_1000_19=+nt.over_1000_19,nt.over_1000_99=+nt.over_1000_99});let Zr=xr.map(nt=>({code:nt.code,name:nt.parish,prison_adm_count:nt.prison_adm_count,year:nt.year,prison_adm_rate:nt.prison_adm_rate,total_pop:nt.total_pop,jail_pretrial_rate:nt.jail_pretrial_rate,total_jail_pretrial:nt.total_jail_pretrial,pretrial_date:Oe(nt.pretrial_date)})),pn={};Zr.forEach(nt=>{pn[nt.code]=nt}),r(2,p[rr].array=Zr,p),r(2,p[rr].lookup=pn,p);let vt=xr.map((nt,bt)=>({...Zr[bt],pretrial:nt.jail_pretrial_rate,admission:nt.prison_adm_rate,over_1000_19:nt.over_1000_19,over_1000_99:nt.over_1000_99}));rr=="parish"&&["pretrial","admission","over_1000_19","over_1000_99"].forEach(nt=>{let bt=vt.map(jt=>jt[nt]).sort((jt,er)=>jt-er),Ct=u0(nt,bt);vt.forEach((jt,er)=>vt[er][nt+"_color"]=c0(jt[nt],Ct,h0[nt]))}),r(1,_[rr].indicators=vt,_)})}),a.forEach(rr=>{l0(`./data/data_${rr}.csv`).then(xr=>{xr.forEach(nt=>{nt.capacity=+nt.capacity,nt.ice_active=+nt.ice_capacity,nt.num_facilities=+nt.num_facilities,nt.twp=+nt.twp,nt.parish_hold=+nt.parish_hold,nt.total_pop=+nt.total_pop,nt.map_twp=+nt.map_twp,nt.map_private=+nt.map_private,nt.map_prison=+nt.map_prison,nt.GT99=+nt.GT_1000_beds_99,nt.GT_1000_beds_99=+nt.GT_1000_beds_99,nt.GT_1000_beds_19=+nt.GT_1000_beds_19,nt.map_jails=+nt.map_jails,nt.ice=+nt.ice});let Zr=xr.map(nt=>({uuid:nt.uuid,name:nt.facility_name})),pn={};Zr.forEach(nt=>{pn[nt.uuid]=nt}),w[rr].array=Zr,w[rr].lookup=pn;let vt=xr.map((nt,bt)=>({...Zr[bt],map_twp:nt.map_twp,map_private:nt.map_private,map_prison:nt.map_prison,GT_1000_beds_99:nt.GT_1000_beds_99,GT_1000_beds_19:nt.GT_1000_beds_19,map_jails:nt.map_jails,map_all:1,ice:nt.ice,gt99:+nt.GT99,capacity:+nt.capacity,why:+nt.why,ind:bt}));rr=="facility"&&["map_twp","map_private","map_prison","GT_1000_beds_99","GT_1000_beds_19","map_jails","map_all"].forEach(nt=>{let bt=vt.map(jt=>jt[nt]).sort((jt,er)=>jt-er),Ct=u0(nt,bt);vt.forEach((jt,er)=>vt[er][nt+"_color"]=c0(jt[nt],Ct,h0[nt]),vt[nt+"_outline"]="#fff")}),r(3,E[rr].indicators=vt,E)})}),Mc(R4,"la").then(rr=>{rr.features.sort((xr,Zr)=>xr.properties.AREANM.localeCompare(Zr.properties.AREANM)),r(4,x=rr)}),Mc(O4,"orleansparish").then(rr=>{r(5,Q=rr)}),Mc(z4,"plantations").then(rr=>{r(6,P=rr)}),Mc(K4,"westfplantations").then(rr=>{r(8,k=rr)}),Mc(H4,"Franklin").then(rr=>{}),Mc(V4,"restUS").then(rr=>{r(7,R=rr)}),Mc(G4,"nolabldg").then(rr=>{r(9,O=rr)}),Mc(q4,"bldg2023").then(rr=>{r(10,G=rr)}),Mc(W4,"state").then(rr=>{r(11,K=rr)}),If(X4,"facilities").then(rr=>{rr.features.sort((xr,Zr)=>Zr.properties.capacity-xr.properties.capacity),r(12,Z=rr)}),If(Z4,"twp").then(rr=>{r(13,$=rr)}),If(J4,"private").then(rr=>{r(14,fe=rr)}),If(Y4,"prison").then(rr=>{r(15,Ae=rr)}),If($4,"estdocrev").then(rr=>{rr.features.forEach(xr=>{xr.properties.est_doc_rev!==null&&(xr.properties.rev="$"+ju(xr.properties.est_doc_rev.toFixed(0)))}),r(16,ge=rr)});const pr=Rp("%B %d, %Y");function sr(){ne=Vm(this),r(19,ne),r(4,x)}const zt=()=>Qt(ne);function fr(rr){he=rr,r(17,he)}function Br(){ne=Vm(this),r(19,ne),r(4,x)}const vr=()=>Qt(ne);function Gr(rr){e.$$.not_equal(l.map,rr)&&(l.map=rr,r(0,l))}return e.$$.update=()=>{e.$$.dirty[0]&1&&l&&Pt(Object.keys(dr))},[l,_,p,E,x,Q,P,R,k,O,G,K,Z,$,fe,Ae,ge,he,ee,ne,xe,ve,ze,Le,Ke,Ue,rt,je,St,te,Fe,Qe,Ve,st,dt,d,Ge,tt,Qt,ht,pr,sr,zt,fr,Br,vr,Gr]}class n3 extends ni{constructor(t){super(),ri(this,t,r3,N4,ei,{},null,[-1,-1,-1])}}function i3(e){let t,r;return t=new n3({}),{c(){yr(t.$$.fragment)},m(s,l){mr(t,s,l),r=!0},p:bn,i(s){r||(Mt(t.$$.fragment,s),r=!0)},o(s){Gt(t.$$.fragment,s),r=!1},d(s){gr(t,s)}}}class s3 extends ni{constructor(t){super(),ri(this,t,null,i3,ei,{})}}function h1(e,t,r){const s=e.slice();return s[21]=t[r],s}function f1(e){let t,r=e[21].county+"",s,l,c;return{c(){t=Lt("option"),s=Pr(r),l=$t(),t.__value=c=e[21].county,t.value=t.__value},m(h,a){At(h,t,a),it(t,s),it(t,l)},p(h,a){a&2&&r!==(r=h[21].county+"")&&ai(s,r),a&2&&c!==(c=h[21].county)&&(t.__value=c,t.value=t.__value)},d(h){h&&at(t)}}}function a3(e){let t,r,s,l,c,h,a,d,_,p,E,w,x,Q,P,R,k,O=e[1],G=[];for(let $=0;$<O.length;$+=1)G[$]=f1(h1(e,O,$));function K($){e[8]($)}let Z={style:o3,interactive:!0,controls:!0,location:{bounds:e[3].la},options:{minZoom:6.5,maxZoom:14}};return e[0]!==void 0&&(Z.map=e[0]),_=new Ug({props:Z}),qa.push(()=>Fg(_,"map",K)),{c(){t=Lt("div"),r=Lt("div"),r.innerHTML=`<div class="dotlegend-li svelte-t1nib2"><div class="circ jail svelte-t1nib2"></div>
      Jail</div> 
    <div class="dotlegend-li svelte-t1nib2"><div class="circ prison svelte-t1nib2"></div>
      Prison</div> 
    <div class="dotlegend-li svelte-t1nib2"><div class="circ juvenile svelte-t1nib2"></div>
      Juvenile</div> 
    <div class="dotlegend-li svelte-t1nib2"><div class="circ twp svelte-t1nib2"></div>
      TWP Facility</div> 
    <div class="dotlegend-li svelte-t1nib2"><div class="circ holding svelte-t1nib2"></div>
      Holding Cell</div>`,s=$t(),l=Lt("select"),c=Lt("option"),c.textContent="Select Parish";for(let $=0;$<G.length;$+=1)G[$].c();h=$t(),a=Lt("div"),d=Lt("div"),yr(_.$$.fragment),E=$t(),w=Lt("nav"),x=$t(),Q=Lt("div"),ue(r,"id","map_legend"),ue(r,"class","svelte-t1nib2"),c.__value=null,c.value=c.__value,ue(l,"class","selectParish svelte-t1nib2"),e[2]===void 0&&wu(()=>e[6].call(l)),ue(d,"id","map"),ue(d,"class","svelte-t1nib2"),ue(w,"id","mapmenu"),ue(w,"class","svelte-t1nib2"),ue(Q,"id","stylemenu"),ue(Q,"class","svelte-t1nib2"),ue(a,"class","map-wrap svelte-t1nib2"),ue(t,"id","group"),ue(t,"class","svelte-t1nib2")},m($,fe){At($,t,fe),it(t,r),it(t,s),it(t,l),it(l,c);for(let Ae=0;Ae<G.length;Ae+=1)G[Ae].m(l,null);Vh(l,e[2]),it(t,h),it(t,a),it(a,d),mr(_,d,null),it(a,E),it(a,w),it(a,x),it(a,Q),P=!0,R||(k=[es(l,"change",e[6]),es(l,"change",e[7])],R=!0)},p($,[fe]){if(fe&2){O=$[1];let ge;for(ge=0;ge<O.length;ge+=1){const he=h1($,O,ge);G[ge]?G[ge].p(he,fe):(G[ge]=f1(he),G[ge].c(),G[ge].m(l,null))}for(;ge<G.length;ge+=1)G[ge].d(1);G.length=O.length}fe&6&&Vh(l,$[2]);const Ae={};!p&&fe&1&&(p=!0,Ae.map=$[0],Eg(()=>p=!1)),_.$set(Ae)},i($){P||(Mt(_.$$.fragment,$),P=!0)},o($){Gt(_.$$.fragment,$),P=!1},d($){$&&at(t),Hl(G,$),gr(_),R=!1,tA(k)}}}const o3="https://api.maptiler.com/maps/72c3ba93-41a4-4cb7-8f43-eb0d3c5797d7/style.json?key=FauA8RpnouVUuBS6hR1V";function d1(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")}function A3(e,t,r){let{parishTitle:s}=t,l,c=nv(),h={},a,d,_=[],p=[],E=[],w;Wa(async()=>{const K=await dl("https://vera-insights-data-viz.s3.amazonaws.com/louisiana/la_bounding_boxes.csv");r(1,E=K);const Z=K.filter($=>$.county==s)[0];h={parish:[[+Z.xmin,+Z.ymax],[+Z.xmax,+Z.ymin]]},P(h.parish)});const x={la:[[-95.0399448042286,28.595645625527535],[-88.58723191094903,33.39651900203391]]};function Q(K){var Z=K.features[0].properties.NAME;hc(Z),Z.preventDefault()}function P(K){l&&l.fitBounds(K,{animate:c,padding:30})}Wa(async()=>{a=await(await fetch("https://vera-insights-data-viz.s3.amazonaws.com/louisiana/louisiana_parishes.json")).json(),a.features.forEach(function(ge){ge.properties.NAME==s?ge.properties.selected=1:ge.properties.selected=0}),d=await(await fetch("https://vera-insights-data-viz.s3.amazonaws.com/louisiana/plantations.json")).json();let $=null;_=await(await fetch("https://vera-insights-data-viz.s3.amazonaws.com/louisiana/points.json")).json(),_.features.forEach(ge=>{ge.properties.capacity=+ge.properties.capacity}),p={type:"FeatureCollection",features:_.features.filter(function(ge){return ge.properties.parish==s+" Parish"})},l.on("load",function(){l.addSource("parishes",{type:"geojson",data:a,generateId:!0});const ge=l.getStyle().layers;let he;for(let ne=0;ne<ge.length;ne++)if(ge[ne].type==="symbol"){he=ge[ne].id;break}l.addLayer({id:"parishes",source:"parishes",type:"fill",paint:{"fill-color":["case",["==",["get","selected"],1],"#c9e3e7",["boolean",["feature-state","hovered"],!0],"#fff7f0","rgba(255,255,255,0)"],"fill-outline-color":"#000","fill-opacity":["case",["==",["get","selected"],1],.4,["boolean",["feature-state","hover"],!1],.5,0]}},he),l.addSource("Plantation",{type:"geojson",data:d,generateId:!0}),l.addLayer({id:"Plantation",source:"Plantation",type:"fill",layout:{visibility:"none"},paint:{"fill-color":"#97DFD1"}},he),l.addLayer({id:"parish-outlines",source:"parishes",type:"line",paint:{"line-width":1.5}},he);var ee=new Ou.Popup({closeButton:!1,closeOnClick:!1});l.on("mousemove","parishes",ne=>{ne.features.length>0&&($!==null&&l.setFeatureState({source:"parishes",id:$},{hover:!1}),$=ne.features[0].id,l.setFeatureState({source:"parishes",id:$},{hover:!0})),l.getCanvas().style.cursor="pointer";var xe=[ne.lngLat.lng,ne.lngLat.lat],ve=ne.features[0].properties.NAME_ALT;ee.setLngLat(xe).setHTML(ve).addTo(l)}),l.on("click","parishes",ne=>{var xe=ne.features[0].properties.NAME;let ve=E.filter(Le=>Le.county==xe)[0],ze={parish:[[+ve.xmin,+ve.ymax],[+ve.xmax,+ve.ymin]]};Q(ne),P(ze.parish)}),l.on("mouseleave","parishes",()=>{$!==null&&l.setFeatureState({source:"parishes",id:$},{hover:!1}),$=null}),l.addSource("facility_data",{type:"geojson",data:p,generateId:!0}),l.addLayer({id:"facilities",source:"facility_data",type:"circle",paint:{"circle-color":["match",["get","type"],"Jail","#223b53","Prison","#fbb03b","TWP Facility","#e55e5e","Juvenile","#3bb2d0","Holding Cell","#0cb74c","#ccc"],"circle-radius":["step",["get","capacity"],5,100,7,500,9,1e3,11,2e3,13,5e3,10],"circle-stroke-color":"#fff","circle-stroke-width":.75,"circle-opacity":.9}}),l.on("mousemove","facilities",ne=>{l.getCanvas().style.cursor="pointer";var xe=[ne.lngLat.lng,ne.lngLat.lat];let ve;ne.features[0].properties.operator=="Private"&&ne.features[0].properties.private_name!=null?ve="<strong>"+ne.features[0].properties.facility_name+"</strong><br/>Type: "+ne.features[0].properties.type+"<br/>Capacity: "+d1(ne.features[0].properties.capacity)+" beds<br/>Operator: "+ne.features[0].properties.operator+" ("+ne.features[0].properties.private_name+")":ve="<strong>"+ne.features[0].properties.facility_name+"</strong><br/>Type: "+ne.features[0].properties.type+"<br/>Capacity: "+d1(ne.features[0].properties.capacity)+" beds<br/>Operator: "+ne.features[0].properties.operator,ee.setLngLat(xe).setHTML(ve).addTo(l)}),l.on("mouseleave","facilities",()=>{$=null})}),l.on("idle",()=>{const ge=["Plantation"];for(const he of ge){if(document.getElementById(he))continue;const ee=document.createElement("a");ee.id=he,ee.href="#",ee.textContent="Show "+he+" Layer",ee.className="",ee.onclick=function(xe){const ve=this.id;xe.preventDefault(),xe.stopPropagation(),l.getLayoutProperty(ve,"visibility")==="visible"?(l.setLayoutProperty(ve,"visibility","none"),this.className="",this.textContent="Show Plantation Layer"):(this.className="active",this.textContent="Hide Plantation Layer",l.setLayoutProperty(ve,"visibility","visible"))},document.getElementById("mapmenu").appendChild(ee)}})});function R(K){hc(K),K.preventDefault()}function k(){w=Vm(this),r(2,w),r(1,E)}const O=()=>R(w);function G(K){l=K,r(0,l)}return e.$$set=K=>{"parishTitle"in K&&r(5,s=K.parishTitle)},[l,E,w,x,R,s,k,O,G]}class l3 extends ni{constructor(t){super(),ri(this,t,A3,a3,ei,{parishTitle:5})}}function c3(e){return e===0?!0:e}function du(e){return c3(e)?Array.isArray(e)?t=>e.map(r=>typeof r!="function"?t[r]:r(t)):typeof e!="function"?t=>t[e]:e:null}function u3(e){const t={};for(const r of e){if(Object(r)!==r)throw new TypeError("iterable for fromEntries should yield objects");const{"0":s,"1":l}=r;Object.defineProperty(t,s,{configurable:!0,enumerable:!0,writable:!0,value:l})}return t}function Pm(e,t={}){return u3(Object.entries(e).filter(([r,s])=>s!==void 0&&t[r]===void 0))}function h3(e,t,{sort:r=!1}={}){if(!Array.isArray(e))throw new TypeError(`The first argument of calcUniques() must be an array. You passed in a ${typeof e}. If you got this error using the <LayerCake> component, consider passing a flat array to the \`flatData\` prop. More info: https://layercake.graphics/guide/#flatdata`);if(Array.isArray(t)||t===void 0||t===null)throw new TypeError("The second argument of calcUniques() must be an object with field names as keys as accessor functions as values.");const s={},l=Object.keys(t),c=l.length;let h,a,d,_,p,E,w;const x=e.length;for(h=0;h<c;h+=1){for(w=new Set,_=l[h],p=t[_],a=0;a<x;a+=1)if(E=p(e[a]),Array.isArray(E)){const P=E.length;for(d=0;d<P;d+=1)w.add(E[d])}else w.add(E);const Q=Array.from(w);s[_]=r===!0?Q.sort():Q}return s}function f3(e,t){if(!Array.isArray(e))throw new TypeError(`The first argument of calcExtents() must be an array. You passed in a ${typeof e}. If you got this error using the <LayerCake> component, consider passing a flat array to the \`flatData\` prop. More info: https://layercake.graphics/guide/#flatdata`);if(Array.isArray(t)||t===void 0||t===null)throw new TypeError("The second argument of calcExtents() must be an object with field names as keys as accessor functions as values.");const r={},s=Object.keys(t),l=s.length;let c,h,a,d,_,p,E,w;const x=e.length;for(c=0;c<l;c+=1){for(d=s[c],E=t[d],_=null,p=null,h=0;h<x;h+=1)if(w=E(e[h]),Array.isArray(w)){const Q=w.length;for(a=0;a<Q;a+=1)w[a]!==!1&&w[a]!==void 0&&w[a]!==null&&Number.isNaN(w[a])===!1&&((_===null||w[a]<_)&&(_=w[a]),(p===null||w[a]>p)&&(p=w[a]))}else w!==!1&&w!==void 0&&w!==null&&Number.isNaN(w)===!1&&((_===null||w<_)&&(_=w),(p===null||w>p)&&(p=w));r[d]=[_,p]}return r}function d3(e){return typeof e.bandwidth=="function"||p3(Object.keys(e),["domain","range","unknown","copy"])?"ordinal":"other"}function p3(e,t){return e.length!==t.length?!1:e.every(r=>t.includes(r))}function m3(e,t,r){const s=Object.keys(r).reduce((c,h)=>{const a=d3(r[h]);return c[a]||(c[a]={}),c[a][h]=t[h],c},{ordinal:!1,other:!1});let l={};return s.ordinal&&(l=h3(e,s.ordinal)),s.other&&(l={...l,...f3(e,s.other)}),l}function g3(e=[],t){return Array.isArray(t)===!0?t.map((r,s)=>r===null?e[s]:r):e}function $d(e){return function([r,s]){return typeof s=="function"&&(s=s(r[e])),r?g3(r[e],s):s}}const Of={x:vu,y:vu,z:vu,r:aC};function y3(e){return e.constant?"symlog":e.base?"log":e.exponent?e.exponent()===.5?"sqrt":"pow":"other"}function p1(e){return e}function v3(e){return t=>Math.log(e*t)}function _3(e){return t=>e*Math.exp(t)}function w3(e){return t=>Math.sign(t)*Math.log1p(Math.abs(t/e))}function b3(e){return t=>Math.sign(t)*Math.expm1(Math.abs(t))*e}function ep(e){return function(r){return r<0?-Math.pow(-r,e):Math.pow(r,e)}}function x3(e){const t=y3(e);if(t==="log"){const r=Math.sign(e.domain()[0]);return{lift:v3(r),ground:_3(r),scaleType:t}}return t==="pow"?{lift:ep(1),ground:ep(1/1),scaleType:t}:t==="sqrt"?{lift:ep(.5),ground:ep(1/.5),scaleType:t}:t==="symlog"?{lift:w3(1),ground:b3(1),scaleType:t}:{lift:p1,ground:p1,scaleType:t}}function B3(e,t){if(typeof e.range!="function")throw new Error("Scale method `range` must be a function");if(typeof e.domain!="function")throw new Error("Scale method `domain` must be a function");if(!Array.isArray(t))return e.domain();e.domain().length!==2&&console.warn("[LayerCake] The scale is expected to have a domain of length 2 to use padding. Are you sure you want to use padding? Your scale's domain is:",e.domain()),e.range().length!==2&&console.warn("[LayerCake] The scale is expected to have a range of length 2 to use padding. Are you sure you want to use padding? Your scale's range is:",e.range());const{lift:r,ground:s}=x3(e),l=e.domain()[0],c=Object.prototype.toString.call(l)==="[object Date]",[h,a]=e.domain().map(x=>r(c?x.getTime():x)),[d,_]=e.range(),p=t[0]||0,E=t[1]||0,w=(a-h)/(Math.abs(_-d)-p-E);return[h-p*w,E*w+a].map(x=>s(c?new Date(x):x))}function C3(e,t,r,s,l){let c,h;return l===!0?(c=0,h=100):(c=e==="r"?1:0,h=e==="y"?r:e==="r"?25:t),s===!0?[h,c]:[c,h]}function E3(e,t,r,s,l,c){return l?typeof l=="function"?l({width:t,height:r}):l:C3(e,t,r,s,c)}function tp(e){return function([r,s,l,c,h,a,d,_,p,E]){if(s===null)return null;const w=E3(e,d,_,a,p,E),x=r===Of[e]?r():r.copy();return x.domain(l),(!x.interpolator||typeof x.interpolator=="function"&&x.interpolator().name.startsWith("identity"))&&x.range(w),c&&x.domain(B3(x,c)),(h===!0||typeof h=="number")&&(typeof x.nice=="function"?x.nice(typeof h=="number"?h:void 0):console.error(`[Layer Cake] You set \`${e}Nice: true\` but the ${e}Scale does not have a \`.nice\` method. Ignoring...`)),x}}function rp([e,t]){return r=>{const s=e(r);return Array.isArray(s)?s.map(l=>t(l)):t(s)}}function np([e]){if(typeof e=="function"){if(typeof e.range=="function")return e.range();console.error("[LayerCake] Your scale doesn't have a `.range` method?")}return null}const F3=e=>({element:e[0]&4,width:e[0]&256,height:e[0]&512,aspectRatio:e[0]&1024,containerWidth:e[0]&128,containerHeight:e[0]&64}),m1=e=>({element:e[2],width:e[8],height:e[9],aspectRatio:e[10],containerWidth:e[7],containerHeight:e[6]});function g1(e){let t,r,s;const l=e[90].default,c=wA(l,e,e[89],m1);return{c(){t=Lt("div"),c&&c.c(),ue(t,"class","layercake-container svelte-vhzpsp"),wu(()=>e[92].call(t)),Qn(t,"position",e[5]),Qn(t,"top",e[5]==="absolute"?"0":null),Qn(t,"right",e[5]==="absolute"?"0":null),Qn(t,"bottom",e[5]==="absolute"?"0":null),Qn(t,"left",e[5]==="absolute"?"0":null),Qn(t,"pointer-events",e[4]===!1?"none":null)},m(h,a){At(h,t,a),c&&c.m(t,null),e[91](t),r=L_(t,e[92].bind(t)),s=!0},p(h,a){c&&c.p&&(!s||a[0]&1988|a[2]&134217728)&&xA(c,l,h,h[89],s?bA(l,h[89],a,F3):BA(h[89]),m1),a[0]&32&&Qn(t,"position",h[5]),a[0]&32&&Qn(t,"top",h[5]==="absolute"?"0":null),a[0]&32&&Qn(t,"right",h[5]==="absolute"?"0":null),a[0]&32&&Qn(t,"bottom",h[5]==="absolute"?"0":null),a[0]&32&&Qn(t,"left",h[5]==="absolute"?"0":null),a[0]&16&&Qn(t,"pointer-events",h[4]===!1?"none":null)},i(h){s||(Mt(c,h),s=!0)},o(h){Gt(c,h),s=!1},d(h){h&&at(t),c&&c.d(h),e[91](null),r()}}}function S3(e){let t,r,s=(e[3]===!0||typeof window<"u")&&g1(e);return{c(){s&&s.c(),t=yo()},m(l,c){s&&s.m(l,c),At(l,t,c),r=!0},p(l,c){l[3]===!0||typeof window<"u"?s?(s.p(l,c),c[0]&8&&Mt(s,1)):(s=g1(l),s.c(),Mt(s,1),s.m(t.parentNode,t)):s&&(Xa(),Gt(s,1,1,()=>{s=null}),Za())},i(l){r||(Mt(s),r=!0)},o(l){Gt(s),r=!1},d(l){s&&s.d(l),l&&at(t)}}}function I3(e,t,r){let s,l,c,h,a,d,_,p,E,w,x,Q,P,R,k,O,G,K,Z,$,fe,Ae,ge,he,ee,ne,xe,ve,ze,Le,Ke,Ue,rt,je,St,te,Fe,Qe,Ve,st,dt,{$$slots:Bt={},$$scope:Ge}=t,{ssr:tt=!1}=t,{pointerEvents:Qt=!0}=t,{position:ht="relative"}=t,{percentRange:Nt=!1}=t,{width:dr=void 0}=t,{height:Pt=void 0}=t,{containerWidth:Oe=dr||100}=t,{containerHeight:pr=Pt||100}=t,{element:sr=void 0}=t,{x:zt=void 0}=t,{y:fr=void 0}=t,{z:Br=void 0}=t,{r:vr=void 0}=t,{data:Gr=[]}=t,{xDomain:rr=void 0}=t,{yDomain:xr=void 0}=t,{zDomain:Zr=void 0}=t,{rDomain:pn=void 0}=t,{xNice:vt=!1}=t,{yNice:nt=!1}=t,{zNice:bt=!1}=t,{rNice:Ct=!1}=t,{xPadding:jt=void 0}=t,{yPadding:er=void 0}=t,{zPadding:Vr=void 0}=t,{rPadding:Fr=void 0}=t,{xScale:un=Of.x}=t,{yScale:lr=Of.y}=t,{zScale:Er=Of.z}=t,{rScale:An=Of.r}=t,{xRange:wn=void 0}=t,{yRange:_i=void 0}=t,{zRange:br=void 0}=t,{rRange:Cr=void 0}=t,{xReverse:cr=!1}=t,{yReverse:Kr=typeof lr.bandwidth!="function"}=t,{zReverse:hn=!1}=t,{rReverse:xn=!1}=t,{padding:Sn={}}=t,{extents:ji={}}=t,{flatData:tn=void 0}=t,{custom:Wi={}}=t,hs=!1;Wa(()=>{hs=!0});const Ln={},nn=ui(Nt);$r(e,nn,gt=>r(128,Qe=gt));const Ie=ui(Oe);$r(e,Ie,gt=>r(7,Fe=gt));const Y=ui(pr);$r(e,Y,gt=>r(6,te=gt));const le=ui(Pm(ji));$r(e,le,gt=>r(127,St=gt));const Ce=ui(Gr);$r(e,Ce,gt=>r(126,je=gt));const Te=ui(tn||Gr);$r(e,Te,gt=>r(125,rt=gt));const Xe=ui(Sn);$r(e,Xe,gt=>r(124,Ue=gt));const lt=ui(du(zt));$r(e,lt,gt=>r(123,Ke=gt));const Ye=ui(du(fr));$r(e,Ye,gt=>r(122,Le=gt));const qe=ui(du(Br));$r(e,qe,gt=>r(121,ze=gt));const ut=ui(du(vr));$r(e,ut,gt=>r(120,ve=gt));const Ot=ui(rr);$r(e,Ot,gt=>r(119,xe=gt));const nr=ui(xr);$r(e,nr,gt=>r(118,ne=gt));const Ht=ui(Zr);$r(e,Ht,gt=>r(117,ee=gt));const jr=ui(pn);$r(e,jr,gt=>r(116,he=gt));const zr=ui(vt);$r(e,zr,gt=>r(115,ge=gt));const Ir=ui(nt);$r(e,Ir,gt=>r(114,Ae=gt));const ln=ui(bt);$r(e,ln,gt=>r(113,fe=gt));const dn=ui(Ct);$r(e,dn,gt=>r(112,$=gt));const In=ui(cr);$r(e,In,gt=>r(111,Z=gt));const mn=ui(Kr);$r(e,mn,gt=>r(110,K=gt));const Bn=ui(hn);$r(e,Bn,gt=>r(109,G=gt));const Pn=ui(xn);$r(e,Pn,gt=>r(108,O=gt));const Vn=ui(jt);$r(e,Vn,gt=>r(107,k=gt));const Ti=ui(er);$r(e,Ti,gt=>r(106,R=gt));const oi=ui(Vr);$r(e,oi,gt=>r(105,P=gt));const wi=ui(Fr);$r(e,wi,gt=>r(104,Q=gt));const Qs=ui(wn);$r(e,Qs,gt=>r(103,x=gt));const bi=ui(_i);$r(e,bi,gt=>r(102,w=gt));const Yn=ui(br);$r(e,Yn,gt=>r(101,E=gt));const Ya=ui(Cr);$r(e,Ya,gt=>r(100,p=gt));const Ks=ui(un);$r(e,Ks,gt=>r(99,_=gt));const Gs=ui(lr);$r(e,Gs,gt=>r(98,d=gt));const ia=ui(Er);$r(e,ia,gt=>r(97,a=gt));const gs=ui(An);$r(e,gs,gt=>r(96,h=gt));const Ri=ui(Ln);$r(e,Ri,gt=>r(94,l=gt));const Xi=ui(Wi);$r(e,Xi,gt=>r(95,c=gt));const vo=Ms([lt,Ye,qe,ut],([gt,Mn,Ds,Oi])=>{const Ps={};return gt&&(Ps.x=gt),Mn&&(Ps.y=Mn),Ds&&(Ps.z=Ds),Oi&&(Ps.r=Oi),Ps}),nA=Ms([Xe,Ie,Y],([gt])=>Object.assign({top:0,right:0,bottom:0,left:0},gt)),EA=Ms([Ie,Y,nA],([gt,Mn,Ds])=>{const Oi={};return Oi.top=Ds.top,Oi.right=gt-Ds.right,Oi.bottom=Mn-Ds.bottom,Oi.left=Ds.left,Oi.width=Oi.right-Oi.left,Oi.height=Oi.bottom-Oi.top,Oi.width<=0&&hs===!0&&console.warn("[LayerCake] Target div has zero or negative width. Did you forget to set an explicit width in CSS on the container?"),Oi.height<=0&&hs===!0&&console.warn("[LayerCake] Target div has zero or negative height. Did you forget to set an explicit height in CSS on the container?"),Oi}),sa=Ms([EA],([gt])=>gt.width);$r(e,sa,gt=>r(8,Ve=gt));const bs=Ms([EA],([gt])=>gt.height);$r(e,bs,gt=>r(9,st=gt));const xs=Ms([Te,vo,le,Ks,Gs,gs,ia],([gt,Mn,Ds,Oi,Ps,ya,eo])=>{const Cs={x:Oi,y:Ps,r:ya,z:eo},Aa=Pm(Mn,Ds),to=Object.fromEntries(Object.keys(Aa).map(va=>[va,Cs[va]]));return Object.keys(Aa).length>0?{...m3(gt,Aa,to),...Ds}:{}}),$a=Ms([xs,Ot],$d("x")),aa=Ms([xs,nr],$d("y")),Mo=Ms([xs,Ht],$d("z")),ka=Ms([xs,jr],$d("r")),Do=Ms([Ks,xs,$a,Vn,zr,In,sa,bs,Qs,nn],tp("x")),oa=Ms([lt,Do],rp),qs=Ms([Gs,xs,aa,Ti,Ir,mn,sa,bs,bi,nn],tp("y")),ii=Ms([Ye,qs],rp),Bs=Ms([ia,xs,Mo,oi,ln,Bn,sa,bs,Yn,nn],tp("z")),ys=Ms([qe,Bs],rp),iA=Ms([gs,xs,ka,wi,dn,Pn,sa,bs,Ya,nn],tp("r")),sA=Ms([ut,iA],rp),Cn=Ms([Do],np),GA=Ms([qs],np),pl=Ms([Bs],np),Ma=Ms([iA],np),_o=Ms([sa,bs],([gt,Mn])=>gt/Mn);$r(e,_o,gt=>r(10,dt=gt));function aA(gt){qa[gt?"unshift":"push"](()=>{sr=gt,r(2,sr)})}function wo(){Oe=this.clientWidth,pr=this.clientHeight,r(0,Oe),r(1,pr)}return e.$$set=gt=>{"ssr"in gt&&r(3,tt=gt.ssr),"pointerEvents"in gt&&r(4,Qt=gt.pointerEvents),"position"in gt&&r(5,ht=gt.position),"percentRange"in gt&&r(51,Nt=gt.percentRange),"width"in gt&&r(52,dr=gt.width),"height"in gt&&r(53,Pt=gt.height),"containerWidth"in gt&&r(0,Oe=gt.containerWidth),"containerHeight"in gt&&r(1,pr=gt.containerHeight),"element"in gt&&r(2,sr=gt.element),"x"in gt&&r(54,zt=gt.x),"y"in gt&&r(55,fr=gt.y),"z"in gt&&r(56,Br=gt.z),"r"in gt&&r(57,vr=gt.r),"data"in gt&&r(58,Gr=gt.data),"xDomain"in gt&&r(59,rr=gt.xDomain),"yDomain"in gt&&r(60,xr=gt.yDomain),"zDomain"in gt&&r(61,Zr=gt.zDomain),"rDomain"in gt&&r(62,pn=gt.rDomain),"xNice"in gt&&r(63,vt=gt.xNice),"yNice"in gt&&r(64,nt=gt.yNice),"zNice"in gt&&r(65,bt=gt.zNice),"rNice"in gt&&r(66,Ct=gt.rNice),"xPadding"in gt&&r(67,jt=gt.xPadding),"yPadding"in gt&&r(68,er=gt.yPadding),"zPadding"in gt&&r(69,Vr=gt.zPadding),"rPadding"in gt&&r(70,Fr=gt.rPadding),"xScale"in gt&&r(71,un=gt.xScale),"yScale"in gt&&r(72,lr=gt.yScale),"zScale"in gt&&r(73,Er=gt.zScale),"rScale"in gt&&r(74,An=gt.rScale),"xRange"in gt&&r(75,wn=gt.xRange),"yRange"in gt&&r(76,_i=gt.yRange),"zRange"in gt&&r(77,br=gt.zRange),"rRange"in gt&&r(78,Cr=gt.rRange),"xReverse"in gt&&r(79,cr=gt.xReverse),"yReverse"in gt&&r(80,Kr=gt.yReverse),"zReverse"in gt&&r(81,hn=gt.zReverse),"rReverse"in gt&&r(82,xn=gt.rReverse),"padding"in gt&&r(83,Sn=gt.padding),"extents"in gt&&r(84,ji=gt.extents),"flatData"in gt&&r(85,tn=gt.flatData),"custom"in gt&&r(86,Wi=gt.custom),"$$scope"in gt&&r(89,Ge=gt.$$scope)},e.$$.update=()=>{e.$$.dirty[1]&8388608&&zt&&r(87,Ln.x=zt,Ln),e.$$.dirty[1]&16777216&&fr&&r(87,Ln.y=fr,Ln),e.$$.dirty[1]&33554432&&Br&&r(87,Ln.z=Br,Ln),e.$$.dirty[1]&67108864&&vr&&r(87,Ln.r=vr,Ln),e.$$.dirty[1]&268435456&&rr&&r(87,Ln.xDomain=rr,Ln),e.$$.dirty[1]&536870912&&xr&&r(87,Ln.yDomain=xr,Ln),e.$$.dirty[1]&1073741824&&Zr&&r(87,Ln.zDomain=Zr,Ln),e.$$.dirty[2]&1&&pn&&r(87,Ln.rDomain=pn,Ln),e.$$.dirty[2]&8192&&wn&&r(87,Ln.xRange=wn,Ln),e.$$.dirty[2]&16384&&_i&&r(87,Ln.yRange=_i,Ln),e.$$.dirty[2]&32768&&br&&r(87,Ln.zRange=br,Ln),e.$$.dirty[2]&65536&&Cr&&r(87,Ln.rRange=Cr,Ln),e.$$.dirty[1]&1048576&&vi(nn,Qe=Nt,Qe),e.$$.dirty[0]&1&&vi(Ie,Fe=Oe,Fe),e.$$.dirty[0]&2&&vi(Y,te=pr,te),e.$$.dirty[2]&4194304&&vi(le,St=Pm(ji),St),e.$$.dirty[1]&134217728&&vi(Ce,je=Gr,je),e.$$.dirty[1]&134217728|e.$$.dirty[2]&8388608&&vi(Te,rt=tn||Gr,rt),e.$$.dirty[2]&2097152&&vi(Xe,Ue=Sn,Ue),e.$$.dirty[1]&8388608&&vi(lt,Ke=du(zt),Ke),e.$$.dirty[1]&16777216&&vi(Ye,Le=du(fr),Le),e.$$.dirty[1]&33554432&&vi(qe,ze=du(Br),ze),e.$$.dirty[1]&67108864&&vi(ut,ve=du(vr),ve),e.$$.dirty[1]&268435456&&vi(Ot,xe=rr,xe),e.$$.dirty[1]&536870912&&vi(nr,ne=xr,ne),e.$$.dirty[1]&1073741824&&vi(Ht,ee=Zr,ee),e.$$.dirty[2]&1&&vi(jr,he=pn,he),e.$$.dirty[2]&2&&vi(zr,ge=vt,ge),e.$$.dirty[2]&4&&vi(Ir,Ae=nt,Ae),e.$$.dirty[2]&8&&vi(ln,fe=bt,fe),e.$$.dirty[2]&16&&vi(dn,$=Ct,$),e.$$.dirty[2]&131072&&vi(In,Z=cr,Z),e.$$.dirty[2]&262144&&vi(mn,K=Kr,K),e.$$.dirty[2]&524288&&vi(Bn,G=hn,G),e.$$.dirty[2]&1048576&&vi(Pn,O=xn,O),e.$$.dirty[2]&32&&vi(Vn,k=jt,k),e.$$.dirty[2]&64&&vi(Ti,R=er,R),e.$$.dirty[2]&128&&vi(oi,P=Vr,P),e.$$.dirty[2]&256&&vi(wi,Q=Fr,Q),e.$$.dirty[2]&8192&&vi(Qs,x=wn,x),e.$$.dirty[2]&16384&&vi(bi,w=_i,w),e.$$.dirty[2]&32768&&vi(Yn,E=br,E),e.$$.dirty[2]&65536&&vi(Ya,p=Cr,p),e.$$.dirty[2]&512&&vi(Ks,_=un,_),e.$$.dirty[2]&1024&&vi(Gs,d=lr,d),e.$$.dirty[2]&2048&&vi(ia,a=Er,a),e.$$.dirty[2]&4096&&vi(gs,h=An,h),e.$$.dirty[2]&16777216&&vi(Xi,c=Wi,c),e.$$.dirty[2]&33554432&&vi(Ri,l=Ln,l),e.$$.dirty[2]&67108864&&Gh("LayerCake",s)},r(88,s={activeGetters:vo,width:sa,height:bs,percentRange:nn,aspectRatio:_o,containerWidth:Ie,containerHeight:Y,x:lt,y:Ye,z:qe,r:ut,custom:Xi,data:Ce,xNice:zr,yNice:Ir,zNice:ln,rNice:dn,xReverse:In,yReverse:mn,zReverse:Bn,rReverse:Pn,xPadding:Vn,yPadding:Ti,zPadding:oi,rPadding:wi,padding:nA,flatData:Te,extents:xs,xDomain:$a,yDomain:aa,zDomain:Mo,rDomain:ka,xRange:Cn,yRange:GA,zRange:pl,rRange:Ma,config:Ri,xScale:Do,xGet:oa,yScale:qs,yGet:ii,zScale:Bs,zGet:ys,rScale:iA,rGet:sA}),[Oe,pr,sr,tt,Qt,ht,te,Fe,Ve,st,dt,nn,Ie,Y,le,Ce,Te,Xe,lt,Ye,qe,ut,Ot,nr,Ht,jr,zr,Ir,ln,dn,In,mn,Bn,Pn,Vn,Ti,oi,wi,Qs,bi,Yn,Ya,Ks,Gs,ia,gs,Ri,Xi,sa,bs,_o,Nt,dr,Pt,zt,fr,Br,vr,Gr,rr,xr,Zr,pn,vt,nt,bt,Ct,jt,er,Vr,Fr,un,lr,Er,An,wn,_i,br,Cr,cr,Kr,hn,xn,Sn,ji,tn,Wi,Ln,s,Ge,Bt,aA,wo]}class th extends ni{constructor(t){super(),ri(this,t,I3,S3,ei,{ssr:3,pointerEvents:4,position:5,percentRange:51,width:52,height:53,containerWidth:0,containerHeight:1,element:2,x:54,y:55,z:56,r:57,data:58,xDomain:59,yDomain:60,zDomain:61,rDomain:62,xNice:63,yNice:64,zNice:65,rNice:66,xPadding:67,yPadding:68,zPadding:69,rPadding:70,xScale:71,yScale:72,zScale:73,rScale:74,xRange:75,yRange:76,zRange:77,rRange:78,xReverse:79,yReverse:80,zReverse:81,rReverse:82,padding:83,extents:84,flatData:85,custom:86},null,[-1,-1,-1,-1,-1])}}const T3=e=>({element:e&1}),y1=e=>({element:e[0]});function U3(e){let t,r;const s=e[6].default,l=wA(s,e,e[5],y1);return{c(){t=Lt("div"),l&&l.c(),ue(t,"class","layercake-layout-html svelte-1bu60uu"),Qn(t,"z-index",e[1]),Qn(t,"pointer-events",e[2]===!1?"none":null),Qn(t,"top",e[3].top+"px"),Qn(t,"right",e[3].right+"px"),Qn(t,"bottom",e[3].bottom+"px"),Qn(t,"left",e[3].left+"px")},m(c,h){At(c,t,h),l&&l.m(t,null),e[7](t),r=!0},p(c,[h]){l&&l.p&&(!r||h&33)&&xA(l,s,c,c[5],r?bA(s,c[5],h,T3):BA(c[5]),y1),h&2&&Qn(t,"z-index",c[1]),h&4&&Qn(t,"pointer-events",c[2]===!1?"none":null),h&8&&Qn(t,"top",c[3].top+"px"),h&8&&Qn(t,"right",c[3].right+"px"),h&8&&Qn(t,"bottom",c[3].bottom+"px"),h&8&&Qn(t,"left",c[3].left+"px")},i(c){r||(Mt(l,c),r=!0)},o(c){Gt(l,c),r=!1},d(c){c&&at(t),l&&l.d(c),e[7](null)}}}function L3(e,t,r){let s,{$$slots:l={},$$scope:c}=t,{element:h=void 0}=t,{zIndex:a=void 0}=t,{pointerEvents:d=void 0}=t;const{padding:_}=$o("LayerCake");$r(e,_,E=>r(3,s=E));function p(E){qa[E?"unshift":"push"](()=>{h=E,r(0,h)})}return e.$$set=E=>{"element"in E&&r(0,h=E.element),"zIndex"in E&&r(1,a=E.zIndex),"pointerEvents"in E&&r(2,d=E.pointerEvents),"$$scope"in E&&r(5,c=E.$$scope)},[h,a,d,s,_,c,l,p]}class ih extends ni{constructor(t){super(),ri(this,t,L3,U3,ei,{element:0,zIndex:1,pointerEvents:2})}}const Q3=e=>({element:e&1}),v1=e=>({element:e[0]}),P3=e=>({element:e&1}),_1=e=>({element:e[0]});function k3(e){let t,r,s,l,c;const h=e[12].defs,a=wA(h,e,e[11],_1),d=e[12].default,_=wA(d,e,e[11],v1);return{c(){t=qn("svg"),r=qn("defs"),a&&a.c(),s=qn("g"),_&&_.c(),ue(s,"class","layercake-layout-svg_g"),ue(s,"transform",l="translate("+e[7].left+", "+e[7].top+")"),ue(t,"class","layercake-layout-svg svelte-u84d8d"),ue(t,"viewBox",e[4]),ue(t,"width",e[5]),ue(t,"height",e[6]),Qn(t,"z-index",e[2]),Qn(t,"pointer-events",e[3]===!1?"none":null)},m(p,E){At(p,t,E),it(t,r),a&&a.m(r,null),it(t,s),_&&_.m(s,null),e[13](s),e[14](t),c=!0},p(p,[E]){a&&a.p&&(!c||E&2049)&&xA(a,h,p,p[11],c?bA(h,p[11],E,P3):BA(p[11]),_1),_&&_.p&&(!c||E&2049)&&xA(_,d,p,p[11],c?bA(d,p[11],E,Q3):BA(p[11]),v1),(!c||E&128&&l!==(l="translate("+p[7].left+", "+p[7].top+")"))&&ue(s,"transform",l),(!c||E&16)&&ue(t,"viewBox",p[4]),(!c||E&32)&&ue(t,"width",p[5]),(!c||E&64)&&ue(t,"height",p[6]),E&4&&Qn(t,"z-index",p[2]),E&8&&Qn(t,"pointer-events",p[3]===!1?"none":null)},i(p){c||(Mt(a,p),Mt(_,p),c=!0)},o(p){Gt(a,p),Gt(_,p),c=!1},d(p){p&&at(t),a&&a.d(p),_&&_.d(p),e[13](null),e[14](null)}}}function M3(e,t,r){let s,l,c,{$$slots:h={},$$scope:a}=t,{element:d=void 0}=t,{innerElement:_=void 0}=t,{zIndex:p=void 0}=t,{pointerEvents:E=void 0}=t,{viewBox:w=void 0}=t;const{containerWidth:x,containerHeight:Q,padding:P}=$o("LayerCake");$r(e,x,O=>r(5,s=O)),$r(e,Q,O=>r(6,l=O)),$r(e,P,O=>r(7,c=O));function R(O){qa[O?"unshift":"push"](()=>{_=O,r(1,_)})}function k(O){qa[O?"unshift":"push"](()=>{d=O,r(0,d)})}return e.$$set=O=>{"element"in O&&r(0,d=O.element),"innerElement"in O&&r(1,_=O.innerElement),"zIndex"in O&&r(2,p=O.zIndex),"pointerEvents"in O&&r(3,E=O.pointerEvents),"viewBox"in O&&r(4,w=O.viewBox),"$$scope"in O&&r(11,a=O.$$scope)},[d,_,p,E,w,s,l,c,x,Q,P,a,h,R,k]}class sh extends ni{constructor(t){super(),ri(this,t,M3,k3,ei,{element:0,innerElement:1,zIndex:2,pointerEvents:3,viewBox:4})}}function w1(e,t,r){const s=e.slice();return s[18]=t[r],s[20]=r,s}function b1(e){let t,r,s,l,c,h,a;function d(...E){return e[13](e[18],...E)}function _(...E){return e[14](e[18],...E)}function p(...E){return e[15](e[18],...E)}return{c(){t=qn("rect"),ue(t,"class","group-rect"),ue(t,"data-id",e[20]),ue(t,"x",r=e[2].range()[0]),ue(t,"y",s=e[3](e[18])),ue(t,"height",l=e[4].bandwidth()),ue(t,"width",c=e[5](e[18])),ue(t,"fill",e[0])},m(E,w){At(E,t,w),h||(a=[es(t,"mouseover",d),es(t,"focus",_),es(t,"mousemove",p)],h=!0)},p(E,w){e=E,w&4&&r!==(r=e[2].range()[0])&&ue(t,"x",r),w&10&&s!==(s=e[3](e[18]))&&ue(t,"y",s),w&16&&l!==(l=e[4].bandwidth())&&ue(t,"height",l),w&34&&c!==(c=e[5](e[18]))&&ue(t,"width",c),w&1&&ue(t,"fill",e[0])},d(E){E&&at(t),h=!1,tA(a)}}}function D3(e){let t,r,s,l=e[1],c=[];for(let h=0;h<l.length;h+=1)c[h]=b1(w1(e,l,h));return{c(){t=qn("g");for(let h=0;h<c.length;h+=1)c[h].c();ue(t,"class","bar-group")},m(h,a){At(h,t,a);for(let d=0;d<c.length;d+=1)c[d].m(t,null);r||(s=[es(t,"mouseout",e[16]),es(t,"blur",e[17])],r=!0)},p(h,[a]){if(a&6207){l=h[1];let d;for(d=0;d<l.length;d+=1){const _=w1(h,l,d);c[d]?c[d].p(_,a):(c[d]=b1(_),c[d].c(),c[d].m(t,null))}for(;d<c.length;d+=1)c[d].d(1);c.length=l.length}},i:bn,o:bn,d(h){h&&at(t),Hl(c,h),r=!1,tA(s)}}}function N3(e,t,r){let s,l,c,h,a;const{data:d,xGet:_,yGet:p,xScale:E,yScale:w}=$o("LayerCake");$r(e,d,Z=>r(1,s=Z)),$r(e,_,Z=>r(5,a=Z)),$r(e,p,Z=>r(3,c=Z)),$r(e,E,Z=>r(2,l=Z)),$r(e,w,Z=>r(4,h=Z));let{fill:x="#97dfd1"}=t;const Q=$h();function P(Z){return function(fe){raise(this),fe.layerX!==0&&fe.layerY!==0&&Q("mousemove",{e:fe})}}const R=(Z,$)=>Q("mousemove",{e:$,props:Z}),k=(Z,$)=>Q("mousemove",{e:$,props:Z}),O=(Z,$)=>P(),G=Z=>Q("mouseout"),K=Z=>Q("mouseout");return e.$$set=Z=>{"fill"in Z&&r(0,x=Z.fill)},[x,s,l,c,h,a,d,_,p,E,w,Q,P,R,k,O,G,K]}class Op extends ni{constructor(t){super(),ri(this,t,N3,D3,ei,{fill:0})}}function x1(e,t,r){const s=e.slice();return s[19]=t[r],s[21]=r,s}function B1(e){let t,r;return{c(){t=qn("line"),ue(t,"class","gridline svelte-19phsub"),ue(t,"y1",r=e[11]*-1),ue(t,"y2","0"),ue(t,"x1","0"),ue(t,"x2","0")},m(s,l){At(s,t,l)},p(s,l){l&2048&&r!==(r=s[11]*-1)&&ue(t,"y1",r)},d(s){s&&at(t)}}}function C1(e){let t,r,s;return{c(){t=qn("line"),ue(t,"class","tick-mark svelte-19phsub"),ue(t,"y1",0),ue(t,"y2",6),ue(t,"x1",r=e[5]||e[7]?e[8].bandwidth()/2:0),ue(t,"x2",s=e[5]||e[7]?e[8].bandwidth()/2:0)},m(l,c){At(l,t,c)},p(l,c){c&416&&r!==(r=l[5]||l[7]?l[8].bandwidth()/2:0)&&ue(t,"x1",r),c&416&&s!==(s=l[5]||l[7]?l[8].bandwidth()/2:0)&&ue(t,"x2",s)},d(l){l&&at(t)}}}function E1(e,t){let r,s,l,c=t[4](t[19])+"",h,a,d,_,p,E=t[0]!==!1&&B1(t),w=t[1]===!0&&C1(t);return{key:e,first:null,c(){r=qn("g"),E&&E.c(),s=yo(),w&&w.c(),l=qn("text"),h=Pr(c),ue(l,"x",a=t[5]||t[7]?t[8].bandwidth()/2:0),ue(l,"y",t[6]),ue(l,"dx",""),ue(l,"dy",""),ue(l,"text-anchor",d=t[17](t[21])),ue(l,"class","svelte-19phsub"),ue(r,"class",_="tick tick-"+t[21]+" svelte-19phsub"),ue(r,"transform",p="translate("+t[8](t[19])+","+Math.max(...t[10])+")"),this.first=r},m(x,Q){At(x,r,Q),E&&E.m(r,null),it(r,s),w&&w.m(r,null),it(r,l),it(l,h)},p(x,Q){t=x,t[0]!==!1?E?E.p(t,Q):(E=B1(t),E.c(),E.m(r,s)):E&&(E.d(1),E=null),t[1]===!0?w?w.p(t,Q):(w=C1(t),w.c(),w.m(r,l)):w&&(w.d(1),w=null),Q&528&&c!==(c=t[4](t[19])+"")&&ai(h,c),Q&416&&a!==(a=t[5]||t[7]?t[8].bandwidth()/2:0)&&ue(l,"x",a),Q&64&&ue(l,"y",t[6]),Q&512&&d!==(d=t[17](t[21]))&&ue(l,"text-anchor",d),Q&512&&_!==(_="tick tick-"+t[21]+" svelte-19phsub")&&ue(r,"class",_),Q&1792&&p!==(p="translate("+t[8](t[19])+","+Math.max(...t[10])+")")&&ue(r,"transform",p)},d(x){x&&at(r),E&&E.d(),w&&w.d()}}}function F1(e){let t,r,s;return{c(){t=qn("line"),ue(t,"class","baseline svelte-19phsub"),ue(t,"y1",r=e[11]+.5),ue(t,"y2",s=e[11]+.5),ue(t,"x1","0"),ue(t,"x2",e[12])},m(l,c){At(l,t,c)},p(l,c){c&2048&&r!==(r=l[11]+.5)&&ue(t,"y1",r),c&2048&&s!==(s=l[11]+.5)&&ue(t,"y2",s),c&4096&&ue(t,"x2",l[12])},d(l){l&&at(t)}}}function j3(e){let t,r=[],s=new Map,l,c=e[9];const h=d=>d[19];for(let d=0;d<c.length;d+=1){let _=x1(e,c,d),p=h(_);s.set(p,r[d]=E1(p,_))}let a=e[2]===!0&&F1(e);return{c(){t=qn("g");for(let d=0;d<r.length;d+=1)r[d].c();l=yo(),a&&a.c(),ue(t,"class","axis x-axis svelte-19phsub"),pp(t,"snapTicks",e[3])},m(d,_){At(d,t,_);for(let p=0;p<r.length;p+=1)r[p].m(t,null);it(t,l),a&&a.m(t,null)},p(d,[_]){_&135155&&(c=d[9],r=Wy(r,_,h,1,d,c,s,t,qy,E1,l,x1)),d[2]===!0?a?a.p(d,_):(a=F1(d),a.c(),a.m(t,null)):a&&(a.d(1),a=null),_&8&&pp(t,"snapTicks",d[3])},i:bn,o:bn,d(d){d&&at(t);for(let _=0;_<r.length;_+=1)r[_].d();a&&a.d()}}}function R3(e,t,r){let s,l,c,h,a,d;const{width:_,height:p,xScale:E,yRange:w}=$o("LayerCake");$r(e,_,$=>r(12,d=$)),$r(e,p,$=>r(11,a=$)),$r(e,E,$=>r(8,c=$)),$r(e,w,$=>r(10,h=$));let{gridlines:x=!0}=t,{tickMarks:Q=!1}=t,{baseline:P=!1}=t,{snapTicks:R=!1}=t,{formatTick:k=$=>$}=t,{ticks:O=void 0}=t,{xTick:G=0}=t,{yTick:K=16}=t;function Z($){if(R===!0){if($===0)return"start";if($===l.length-1)return"end"}return"middle"}return e.$$set=$=>{"gridlines"in $&&r(0,x=$.gridlines),"tickMarks"in $&&r(1,Q=$.tickMarks),"baseline"in $&&r(2,P=$.baseline),"snapTicks"in $&&r(3,R=$.snapTicks),"formatTick"in $&&r(4,k=$.formatTick),"ticks"in $&&r(18,O=$.ticks),"xTick"in $&&r(5,G=$.xTick),"yTick"in $&&r(6,K=$.yTick)},e.$$.update=()=>{e.$$.dirty&256&&r(7,s=typeof c.bandwidth=="function"),e.$$.dirty&262528&&r(9,l=Array.isArray(O)?O:s?c.domain():typeof O=="function"?O(c.ticks()):c.ticks(O))},[x,Q,P,R,k,G,K,s,c,l,h,a,d,_,p,E,w,Z,O]}class ah extends ni{constructor(t){super(),ri(this,t,R3,j3,ei,{gridlines:0,tickMarks:1,baseline:2,snapTicks:3,formatTick:4,ticks:18,xTick:5,yTick:6})}}function S1(e,t,r){const s=e.slice();return s[17]=t[r],s}function I1(e){let t,r,s;return{c(){t=qn("line"),ue(t,"class","gridline svelte-df3iti"),ue(t,"x2","100%"),ue(t,"y1",r=e[4]+(e[8]?e[9].bandwidth()/2:0)),ue(t,"y2",s=e[4]+(e[8]?e[9].bandwidth()/2:0))},m(l,c){At(l,t,c)},p(l,c){c&784&&r!==(r=l[4]+(l[8]?l[9].bandwidth()/2:0))&&ue(t,"y1",r),c&784&&s!==(s=l[4]+(l[8]?l[9].bandwidth()/2:0))&&ue(t,"y2",s)},d(l){l&&at(t)}}}function T1(e){let t,r,s,l;return{c(){t=qn("line"),ue(t,"class","tick-mark svelte-df3iti"),ue(t,"x1","0"),ue(t,"x2",r=e[8]?-6:6),ue(t,"y1",s=e[4]+(e[8]?e[9].bandwidth()/2:0)),ue(t,"y2",l=e[4]+(e[8]?e[9].bandwidth()/2:0))},m(c,h){At(c,t,h)},p(c,h){h&256&&r!==(r=c[8]?-6:6)&&ue(t,"x2",r),h&784&&s!==(s=c[4]+(c[8]?c[9].bandwidth()/2:0))&&ue(t,"y1",s),h&784&&l!==(l=c[4]+(c[8]?c[9].bandwidth()/2:0))&&ue(t,"y2",l)},d(c){c&&at(t)}}}function U1(e,t){let r,s,l,c=t[2](t[17])+"",h,a,d,_,p,E,w=t[0]!==!1&&I1(t),x=t[1]===!0&&T1(t);return{key:e,first:null,c(){r=qn("g"),w&&w.c(),s=yo(),x&&x.c(),l=qn("text"),h=Pr(c),ue(l,"x",t[3]),ue(l,"y",a=t[4]+(t[8]?t[9].bandwidth()/2:0)),ue(l,"dx",d=t[8]?-9:t[5]),ue(l,"dy",_=t[8]?4:t[6]),Qn(l,"text-anchor",t[8]?"end":t[7]),ue(l,"class","svelte-df3iti"),ue(r,"class",p="tick tick-"+t[17]+" svelte-df3iti"),ue(r,"transform",E="translate("+(t[12][0]+(t[8]?t[11].left:0))+", "+t[9](t[17])+")"),this.first=r},m(Q,P){At(Q,r,P),w&&w.m(r,null),it(r,s),x&&x.m(r,null),it(r,l),it(l,h)},p(Q,P){t=Q,t[0]!==!1?w?w.p(t,P):(w=I1(t),w.c(),w.m(r,s)):w&&(w.d(1),w=null),t[1]===!0?x?x.p(t,P):(x=T1(t),x.c(),x.m(r,l)):x&&(x.d(1),x=null),P&1028&&c!==(c=t[2](t[17])+"")&&ai(h,c),P&8&&ue(l,"x",t[3]),P&784&&a!==(a=t[4]+(t[8]?t[9].bandwidth()/2:0))&&ue(l,"y",a),P&288&&d!==(d=t[8]?-9:t[5])&&ue(l,"dx",d),P&320&&_!==(_=t[8]?4:t[6])&&ue(l,"dy",_),P&384&&Qn(l,"text-anchor",t[8]?"end":t[7]),P&1024&&p!==(p="tick tick-"+t[17]+" svelte-df3iti")&&ue(r,"class",p),P&7936&&E!==(E="translate("+(t[12][0]+(t[8]?t[11].left:0))+", "+t[9](t[17])+")")&&ue(r,"transform",E)},d(Q){Q&&at(r),w&&w.d(),x&&x.d()}}}function O3(e){let t,r=[],s=new Map,l,c=e[10];const h=a=>a[17];for(let a=0;a<c.length;a+=1){let d=S1(e,c,a),_=h(d);s.set(_,r[a]=U1(_,d))}return{c(){t=qn("g");for(let a=0;a<r.length;a+=1)r[a].c();ue(t,"class","axis y-axis"),ue(t,"transform",l="translate("+-e[11].left+", 0)")},m(a,d){At(a,t,d);for(let _=0;_<r.length;_+=1)r[_].m(t,null)},p(a,[d]){d&8191&&(c=a[10],r=Wy(r,d,h,1,a,c,s,t,qy,U1,null,S1)),d&2048&&l!==(l="translate("+-a[11].left+", 0)")&&ue(t,"transform",l)},i:bn,o:bn,d(a){a&&at(t);for(let d=0;d<r.length;d+=1)r[d].d()}}}function z3(e,t,r){let s,l,c,h,a;const{padding:d,xRange:_,yScale:p}=$o("LayerCake");$r(e,d,K=>r(11,h=K)),$r(e,_,K=>r(12,a=K)),$r(e,p,K=>r(9,c=K));let{gridlines:E=!0}=t,{tickMarks:w=!1}=t,{formatTick:x=K=>K}=t,{ticks:Q=4}=t,{xTick:P=0}=t,{yTick:R=0}=t,{dxTick:k=0}=t,{dyTick:O=-4}=t,{textAnchor:G="start"}=t;return e.$$set=K=>{"gridlines"in K&&r(0,E=K.gridlines),"tickMarks"in K&&r(1,w=K.tickMarks),"formatTick"in K&&r(2,x=K.formatTick),"ticks"in K&&r(16,Q=K.ticks),"xTick"in K&&r(3,P=K.xTick),"yTick"in K&&r(4,R=K.yTick),"dxTick"in K&&r(5,k=K.dxTick),"dyTick"in K&&r(6,O=K.dyTick),"textAnchor"in K&&r(7,G=K.textAnchor)},e.$$.update=()=>{e.$$.dirty&512&&r(8,s=typeof c.bandwidth=="function"),e.$$.dirty&66304&&r(10,l=Array.isArray(Q)?Q:s?c.domain():typeof Q=="function"?Q(c.ticks()):c.ticks(Q))},[E,w,x,P,R,k,O,G,s,c,l,h,a,d,_,p,Q]}class oh extends ni{constructor(t){super(),ri(this,t,z3,O3,ei,{gridlines:0,tickMarks:1,formatTick:2,ticks:16,xTick:3,yTick:4,dxTick:5,dyTick:6,textAnchor:7})}}const H3=e=>({detail:e&2}),L1=e=>({detail:e[1].detail}),V3=e=>({detail:e&1}),Q1=e=>({detail:e[0].detail});function P1(e){let t,r;const s=e[4].default,l=wA(s,e,e[3],Q1);return{c(){t=Lt("div"),l&&l.c(),ue(t,"class","tooltip svelte-12op57k"),Qn(t,"top",e[0].detail.e.layerY+"px"),Qn(t,"left",e[0].detail.e.layerX-e[2]+"px")},m(c,h){At(c,t,h),l&&l.m(t,null),r=!0},p(c,h){l&&l.p&&(!r||h&9)&&xA(l,s,c,c[3],r?bA(s,c[3],h,V3):BA(c[3]),Q1),(!r||h&1)&&Qn(t,"top",c[0].detail.e.layerY+"px"),(!r||h&5)&&Qn(t,"left",c[0].detail.e.layerX-c[2]+"px")},i(c){r||(Mt(l,c),r=!0)},o(c){Gt(l,c),r=!1},d(c){c&&at(t),l&&l.d(c)}}}function k1(e){let t,r;const s=e[4].default,l=wA(s,e,e[3],L1);return{c(){t=Lt("div"),l&&l.c(),ue(t,"class","tooltip svelte-12op57k"),Qn(t,"top",e[1].detail.e.layerY+"px"),Qn(t,"left",e[1].detail.e.layerX-e[2]+"px")},m(c,h){At(c,t,h),l&&l.m(t,null),r=!0},p(c,h){l&&l.p&&(!r||h&10)&&xA(l,s,c,c[3],r?bA(s,c[3],h,H3):BA(c[3]),L1),(!r||h&2)&&Qn(t,"top",c[1].detail.e.layerY+"px"),(!r||h&6)&&Qn(t,"left",c[1].detail.e.layerX-c[2]+"px")},i(c){r||(Mt(l,c),r=!0)},o(c){Gt(l,c),r=!1},d(c){c&&at(t),l&&l.d(c)}}}function K3(e){let t,r,s,l=e[0].detail&&P1(e),c=e[1].detail&&k1(e);return{c(){l&&l.c(),t=$t(),c&&c.c(),r=yo()},m(h,a){l&&l.m(h,a),At(h,t,a),c&&c.m(h,a),At(h,r,a),s=!0},p(h,[a]){h[0].detail?l?(l.p(h,a),a&1&&Mt(l,1)):(l=P1(h),l.c(),Mt(l,1),l.m(t.parentNode,t)):l&&(Xa(),Gt(l,1,1,()=>{l=null}),Za()),h[1].detail?c?(c.p(h,a),a&2&&Mt(c,1)):(c=k1(h),c.c(),Mt(c,1),c.m(r.parentNode,r)):c&&(Xa(),Gt(c,1,1,()=>{c=null}),Za())},i(h){s||(Mt(l),Mt(c),s=!0)},o(h){Gt(l),Gt(c),s=!1},d(h){l&&l.d(h),h&&at(t),c&&c.d(h),h&&at(r)}}}function G3(e,t,r){let{$$slots:s={},$$scope:l}=t,{evt:c={}}=t,{evt2:h={}}=t,{offset:a=50}=t;return e.$$set=d=>{"evt"in d&&r(0,c=d.evt),"evt2"in d&&r(1,h=d.evt2),"offset"in d&&r(2,a=d.offset),"$$scope"in d&&r(3,l=d.$$scope)},[c,h,a,l,s]}class ud extends ni{constructor(t){super(),ri(this,t,G3,K3,ei,{evt:0,evt2:1,offset:2})}}function M1(e){const t={...e[13].props};e[14]=t}function D1(e){const t={...e[13].props};e[14]=t}function q3(e){let t,r,s,l,c,h;return t=new ah({props:{gridlines:!0,baseline:!0,snapTicks:!0,ticks:"4"}}),s=new oh({props:{gridlines:!1}}),c=new Op({}),c.$on("mousemove",e[8]),c.$on("mouseout",e[9]),{c(){yr(t.$$.fragment),r=$t(),yr(s.$$.fragment),l=$t(),yr(c.$$.fragment)},m(a,d){mr(t,a,d),At(a,r,d),mr(s,a,d),At(a,l,d),mr(c,a,d),h=!0},p:bn,i(a){h||(Mt(t.$$.fragment,a),Mt(s.$$.fragment,a),Mt(c.$$.fragment,a),h=!0)},o(a){Gt(t.$$.fragment,a),Gt(s.$$.fragment,a),Gt(c.$$.fragment,a),h=!1},d(a){gr(t,a),a&&at(r),gr(s,a),a&&at(l),gr(c,a)}}}function N1(e){let t,r;return t=new ud({props:{evt:e[4],$$slots:{default:[W3,({detail:s})=>({13:s}),({detail:s})=>s?8192:0]},$$scope:{ctx:e}}}),{c(){yr(t.$$.fragment)},m(s,l){mr(t,s,l),r=!0},p(s,l){const c={};l&16&&(c.evt=s[4]),l&40960&&(c.$$scope={dirty:l,ctx:s}),t.$set(c)},i(s){r||(Mt(t.$$.fragment,s),r=!0)},o(s){Gt(t.$$.fragment,s),r=!1},d(s){gr(t,s)}}}function W3(e){D1(e);let t,r=e[14].parish+"",s,l,c,h=(+e[14].jail_pretrial_rate).toFixed(1)+"",a,d;return{c(){t=Lt("div"),s=Pr(r),l=Lt("br"),c=Pr(`
                  Pretrial Rate: `),a=Pr(h),d=Pr(` per
                  10,000 residents`),ue(t,"class","row")},m(_,p){At(_,t,p),it(t,s),it(t,l),it(t,c),it(t,a),it(t,d)},p(_,p){D1(_),p&8192&&r!==(r=_[14].parish+"")&&ai(s,r),p&8192&&h!==(h=(+_[14].jail_pretrial_rate).toFixed(1)+"")&&ai(a,h)},d(_){_&&at(t)}}}function X3(e){let t,r,s=e[5]!==!0&&N1(e);return{c(){s&&s.c(),t=yo()},m(l,c){s&&s.m(l,c),At(l,t,c),r=!0},p(l,c){l[5]!==!0?s?(s.p(l,c),c&32&&Mt(s,1)):(s=N1(l),s.c(),Mt(s,1),s.m(t.parentNode,t)):s&&(Xa(),Gt(s,1,1,()=>{s=null}),Za())},i(l){r||(Mt(s),r=!0)},o(l){Gt(s),r=!1},d(l){s&&s.d(l),l&&at(t)}}}function Z3(e){let t,r,s,l;return t=new sh({props:{$$slots:{default:[q3]},$$scope:{ctx:e}}}),s=new ih({props:{pointerEvents:!1,$$slots:{default:[X3]},$$scope:{ctx:e}}}),{c(){yr(t.$$.fragment),r=$t(),yr(s.$$.fragment)},m(c,h){mr(t,c,h),At(c,r,h),mr(s,c,h),l=!0},p(c,h){const a={};h&32816&&(a.$$scope={dirty:h,ctx:c}),t.$set(a);const d={};h&32816&&(d.$$scope={dirty:h,ctx:c}),s.$set(d)},i(c){l||(Mt(t.$$.fragment,c),Mt(s.$$.fragment,c),l=!0)},o(c){Gt(t.$$.fragment,c),Gt(s.$$.fragment,c),l=!1},d(c){gr(t,c),c&&at(r),gr(s,c)}}}function J3(e){let t,r,s,l,c,h;return t=new ah({props:{gridlines:!0,baseline:!0,snapTicks:!0,ticks:"4"}}),s=new oh({props:{gridlines:!1}}),c=new Op({}),c.$on("mousemove",e[10]),c.$on("mouseout",e[11]),{c(){yr(t.$$.fragment),r=$t(),yr(s.$$.fragment),l=$t(),yr(c.$$.fragment)},m(a,d){mr(t,a,d),At(a,r,d),mr(s,a,d),At(a,l,d),mr(c,a,d),h=!0},p:bn,i(a){h||(Mt(t.$$.fragment,a),Mt(s.$$.fragment,a),Mt(c.$$.fragment,a),h=!0)},o(a){Gt(t.$$.fragment,a),Gt(s.$$.fragment,a),Gt(c.$$.fragment,a),h=!1},d(a){gr(t,a),a&&at(r),gr(s,a),a&&at(l),gr(c,a)}}}function j1(e){let t,r;return t=new ud({props:{evt2:e[6],$$slots:{default:[Y3,({detail:s})=>({13:s}),({detail:s})=>s?8192:0]},$$scope:{ctx:e}}}),{c(){yr(t.$$.fragment)},m(s,l){mr(t,s,l),r=!0},p(s,l){const c={};l&64&&(c.evt2=s[6]),l&40960&&(c.$$scope={dirty:l,ctx:s}),t.$set(c)},i(s){r||(Mt(t.$$.fragment,s),r=!0)},o(s){Gt(t.$$.fragment,s),r=!1},d(s){gr(t,s)}}}function Y3(e){M1(e);let t,r=e[14].parish+"",s,l,c,h=e[14].prison_adm_rate.toFixed(1)+"",a,d;return{c(){t=Lt("div"),s=Pr(r),l=Lt("br"),c=Pr(`
                  Admission Rate: `),a=Pr(h),d=Pr(` per 10,000
                  residents`),ue(t,"class","row")},m(_,p){At(_,t,p),it(t,s),it(t,l),it(t,c),it(t,a),it(t,d)},p(_,p){M1(_),p&8192&&r!==(r=_[14].parish+"")&&ai(s,r),p&8192&&h!==(h=_[14].prison_adm_rate.toFixed(1)+"")&&ai(a,h)},d(_){_&&at(t)}}}function $3(e){let t,r,s=e[7]!==!0&&j1(e);return{c(){s&&s.c(),t=yo()},m(l,c){s&&s.m(l,c),At(l,t,c),r=!0},p(l,c){l[7]!==!0?s?(s.p(l,c),c&128&&Mt(s,1)):(s=j1(l),s.c(),Mt(s,1),s.m(t.parentNode,t)):s&&(Xa(),Gt(s,1,1,()=>{s=null}),Za())},i(l){r||(Mt(s),r=!0)},o(l){Gt(s),r=!1},d(l){s&&s.d(l),l&&at(t)}}}function eE(e){let t,r,s,l;return t=new sh({props:{$$slots:{default:[J3]},$$scope:{ctx:e}}}),s=new ih({props:{pointerEvents:!1,$$slots:{default:[$3]},$$scope:{ctx:e}}}),{c(){yr(t.$$.fragment),r=$t(),yr(s.$$.fragment)},m(c,h){mr(t,c,h),At(c,r,h),mr(s,c,h),l=!0},p(c,h){const a={};h&32960&&(a.$$scope={dirty:h,ctx:c}),t.$set(a);const d={};h&32960&&(d.$$scope={dirty:h,ctx:c}),s.$set(d)},i(c){l||(Mt(t.$$.fragment,c),Mt(s.$$.fragment,c),l=!0)},o(c){Gt(t.$$.fragment,c),Gt(s.$$.fragment,c),l=!1},d(c){gr(t,c),c&&at(r),gr(s,c)}}}function tE(e){let t,r,s,l,c,h,a,d,_,p,E,w,x,Q,P,R,k,O,G,K,Z;return c=new l3({props:{parishTitle:e[0]}}),w=new th({props:{padding:{top:0,bottom:40,left:120},x:rE,y:R1,yScale:Yu().paddingInner([.15]),xDomain:[0,e[2]],data:e[1],$$slots:{default:[Z3]},$$scope:{ctx:e}}}),O=new th({props:{padding:{top:0,bottom:40,left:120},x:lg,y:R1,yScale:Yu().paddingInner([.15]),xDomain:[0,e[3]],data:e[1],$$slots:{default:[eE]},$$scope:{ctx:e}}}),{c(){t=Lt("div"),r=Lt("div"),r.innerHTML=`<p class="svelte-vmwqbp">Every region of Louisiana is harmed by mass incarceration: nearly every
      parish has a pretrial incarceration rate above the national average, and
      dozens of parishes send people to prison at rates above the national
      average. The prevalence of incarceration is hard to see in many places,
      owing to an alarming lack of transparency and data, as well as a
      convoluted carceral landscape where jails also function as prisons. But
      parish and state-level research by Vera aims to clarify this picture.</p>`,s=$t(),l=Lt("div"),yr(c.$$.fragment),h=$t(),a=Lt("div"),d=Lt("div"),_=Lt("h4"),_.textContent="Pretrial Incarceration Rate (2021)",p=$t(),E=Lt("div"),yr(w.$$.fragment),x=$t(),Q=Lt("div"),P=Lt("h4"),P.textContent="Prison Admission Rate (2021)",R=$t(),k=Lt("div"),yr(O.$$.fragment),G=$t(),K=Lt("p"),K.innerHTML=`State policy plays a major role in driving mass incarceration—as evidenced
    by a decrease in the state’s prison population that resulted, in part, from
    <a href="https://s32082.pcdn.co/wp-content/uploads/2022/10/2022-JRI-ANNUAL-Report-FinalREVISED102022.pdf" target="_blank">the 2017 Justice Reinvestment Package</a>. However, state-level reform alone is insufficient. Significant progress
    on justice reform requires change at the local level: arrest and pretrial
    detention are the “front door” to mass incarceration and decisions by local
    police, prosecutors, and judges dictate how many people are put behind bars
    and for how long. Local jails also play a part in state prison
    incarceration: After a
    <a href="https://www.nola.com/news/crime_police/louisiana-is-the-worlds-prison-capital/article_8feef59a-1196-5988-9128-1e8e7c9aefda.html" target="_blank">federal court ordered Louisiana to address prison overcrowding in the
      1990s</a>, many sheriffs expanded their jails, enabling them to receive revenue from
    the state for holding people sentenced to prison. As a result, many sheriffs
    are now reliant on these funds to support oversized jails. Given the role of
    local decisionmakers in dictating the use of jails and prisons, local
    governments have the power to scale back the use of incarceration and
    implement evidence-based solutions that will help Louisiana’s communities
    thrive.`,ue(r,"id","stats"),ue(r,"class","svelte-vmwqbp"),ue(l,"id","map"),ue(l,"class","svelte-vmwqbp"),ue(_,"class","svelte-vmwqbp"),ue(E,"class","chart-container svelte-vmwqbp"),ue(d,"class","barchart svelte-vmwqbp"),ue(P,"class","svelte-vmwqbp"),ue(k,"class","chart-container svelte-vmwqbp"),ue(Q,"class","barchart svelte-vmwqbp"),ue(a,"id","barcomps"),ue(a,"class","svelte-vmwqbp"),ue(K,"class","svelte-vmwqbp")},m($,fe){At($,t,fe),it(t,r),it(t,s),it(t,l),mr(c,l,null),it(t,h),it(t,a),it(a,d),it(d,_),it(d,p),it(d,E),mr(w,E,null),it(a,x),it(a,Q),it(Q,P),it(Q,R),it(Q,k),mr(O,k,null),it(t,G),it(t,K),Z=!0},p($,[fe]){const Ae={};fe&1&&(Ae.parishTitle=$[0]),c.$set(Ae);const ge={};fe&4&&(ge.xDomain=[0,$[2]]),fe&2&&(ge.data=$[1]),fe&32816&&(ge.$$scope={dirty:fe,ctx:$}),w.$set(ge);const he={};fe&8&&(he.xDomain=[0,$[3]]),fe&2&&(he.data=$[1]),fe&32960&&(he.$$scope={dirty:fe,ctx:$}),O.$set(he)},i($){Z||(Mt(c.$$.fragment,$),Mt(w.$$.fragment,$),Mt(O.$$.fragment,$),Z=!0)},o($){Gt(c.$$.fragment,$),Gt(w.$$.fragment,$),Gt(O.$$.fragment,$),Z=!1},d($){$&&at(t),gr(c),gr(w),gr(O)}}}const lg="prison_adm_rate",rE="jail_pretrial_rate",R1="parish";function nE(e,t,r){let s=[],l,c;Wa(async()=>{const P=await dl("https://vera-louisiana-data.s3.amazonaws.com/curated_data/clearinghouse/parish_incarceration_21.csv");r(1,s=P.filter(R=>R.parish==h+" Parish"||R.parish=="Louisiana"||R.parish=="U.S.")),s.forEach(R=>{R[lg]=+R[lg]}),r(2,l=Xf(s,R=>+R.jail_pretrial_rate)),r(3,c=Xf(s,R=>+R.prison_adm_rate))});let{parishTitle:h}=t;Wa(async()=>{window.scrollTo(0,0)});let a,d=!1,_,p=!1;const E=P=>r(4,a=r(5,d=P)),w=()=>r(5,d=!0),x=P=>r(6,_=r(7,p=P)),Q=()=>r(7,p=!0);return e.$$set=P=>{"parishTitle"in P&&r(0,h=P.parishTitle)},[h,s,l,c,a,d,_,p,E,w,x,Q]}class O1 extends ni{constructor(t){super(),ri(this,t,nE,tE,ei,{parishTitle:0})}}function z1(e,t,r){const s=e.slice();return s[17]=t[r],s[19]=r,s}function H1(e,t,r){const s=e.slice();return s[17]=t[r],s[19]=r,s}function iE(e){let t,r,s,l,c,h=bu(e[8])+"",a,d;return{c(){t=Pr("In "),r=Pr(e[0]),s=Pr(` Parish, there is
    `),l=Pr(e[6]),c=Pr(` prison with a capacity of
    `),a=Pr(h),d=Pr(" people.")},m(_,p){At(_,t,p),At(_,r,p),At(_,s,p),At(_,l,p),At(_,c,p),At(_,a,p),At(_,d,p)},p(_,p){p&1&&ai(r,_[0]),p&64&&ai(l,_[6]),p&256&&h!==(h=bu(_[8])+"")&&ai(a,h)},d(_){_&&at(t),_&&at(r),_&&at(s),_&&at(l),_&&at(c),_&&at(a),_&&at(d)}}}function sE(e){let t,r,s,l,c,h=bu(e[8])+"",a,d;return{c(){t=Pr("In "),r=Pr(e[0]),s=Pr(` Parish, there is
    `),l=Pr(e[6]),c=Pr(` jail with a capacity of
    `),a=Pr(h),d=Pr(" people.")},m(_,p){At(_,t,p),At(_,r,p),At(_,s,p),At(_,l,p),At(_,c,p),At(_,a,p),At(_,d,p)},p(_,p){p&1&&ai(r,_[0]),p&64&&ai(l,_[6]),p&256&&h!==(h=bu(_[8])+"")&&ai(a,h)},d(_){_&&at(t),_&&at(r),_&&at(s),_&&at(l),_&&at(c),_&&at(a),_&&at(d)}}}function aE(e){let t,r,s,l,c,h=bu(e[8])+"",a,d;return{c(){t=Pr("In "),r=Pr(e[0]),s=Pr(` Parish, there are
    `),l=Pr(e[6]),c=Pr(` prisons and jails with a combined capacity of
    `),a=Pr(h),d=Pr(" people.")},m(_,p){At(_,t,p),At(_,r,p),At(_,s,p),At(_,l,p),At(_,c,p),At(_,a,p),At(_,d,p)},p(_,p){p&1&&ai(r,_[0]),p&64&&ai(l,_[6]),p&256&&h!==(h=bu(_[8])+"")&&ai(a,h)},d(_){_&&at(t),_&&at(r),_&&at(s),_&&at(l),_&&at(c),_&&at(a),_&&at(d)}}}function V1(e){let t,r;return{c(){t=qn("rect"),ue(t,"x",Math.floor(e[19]/e[9])*e[10]+Math.floor(e[19]/e[9])*e[11]),ue(t,"y",e[9]*e[10]-(e[19]%e[9]*e[10]+e[19]%e[9]*e[11])),ue(t,"width",e[10]),ue(t,"height",e[10]),ue(t,"fill",r=e[12][e[17].groupIndex])},m(s,l){At(s,t,l)},p(s,l){l&16&&r!==(r=s[12][s[17].groupIndex])&&ue(t,"fill",r)},d(s){s&&at(t)}}}function K1(e){let t,r,s,l=e[17].facility_name+"",c,h,a=bu(e[17].capacity)+"",d,_;return{c(){t=qn("g"),r=qn("rect"),s=qn("text"),c=Pr(l),h=Pr(" ("),d=Pr(a),_=Pr(" beds)"),ue(r,"width","15"),ue(r,"height","15"),ue(r,"fill",e[12][e[19]]),ue(s,"x","25"),ue(s,"y","13"),ue(s,"class","svelte-tq0yyc"),Qn(t,"transform","translate(0,"+e[19]*20+"px)")},m(p,E){At(p,t,E),it(t,r),it(t,s),it(s,c),it(s,h),it(s,d),it(s,_)},p(p,E){E&128&&l!==(l=p[17].facility_name+"")&&ai(c,l),E&128&&a!==(a=bu(p[17].capacity)+"")&&ai(d,a)},d(p){p&&at(t)}}}function oE(e){let t,r,s,l,c,h,a;function d(P,R){return P[6]>1?aE:P[6]==1&&P[7].map_jails>0?sE:iE}let _=d(e),p=_(e),E=e[4],w=[];for(let P=0;P<E.length;P+=1)w[P]=V1(H1(e,E,P));let x=e[7],Q=[];for(let P=0;P<x.length;P+=1)Q[P]=K1(z1(e,x,P));return{c(){t=Lt("p"),r=Pr(`Every parish is part of the state’s vast network of jails and prisons. There
  are more than 230 jails and prisons statewide that have the capacity to lock
  up more than 70,000 adults and children.
  `),p.c(),s=$t(),l=Lt("div"),c=qn("svg");for(let P=0;P<w.length;P+=1)w[P].c();h=$t(),a=qn("svg");for(let P=0;P<Q.length;P+=1)Q[P].c();ue(t,"class","break-avoid"),ue(c,"width",e[1]),ue(c,"height",e[3]),ue(a,"width",e[2]),ue(a,"height",e[5]),ue(a,"class","legend"),ue(l,"id","waffle"),ue(l,"class","svelte-tq0yyc")},m(P,R){At(P,t,R),it(t,r),p.m(t,null),At(P,s,R),At(P,l,R),it(l,c);for(let k=0;k<w.length;k+=1)w[k].m(c,null);it(l,h),it(l,a);for(let k=0;k<Q.length;k+=1)Q[k].m(a,null)},p(P,[R]){if(_===(_=d(P))&&p?p.p(P,R):(p.d(1),p=_(P),p&&(p.c(),p.m(t,null))),R&7696){E=P[4];let k;for(k=0;k<E.length;k+=1){const O=H1(P,E,k);w[k]?w[k].p(O,R):(w[k]=V1(O),w[k].c(),w[k].m(c,null))}for(;k<w.length;k+=1)w[k].d(1);w.length=E.length}if(R&2&&ue(c,"width",P[1]),R&8&&ue(c,"height",P[3]),R&4224){x=P[7];let k;for(k=0;k<x.length;k+=1){const O=z1(P,x,k);Q[k]?Q[k].p(O,R):(Q[k]=K1(O),Q[k].c(),Q[k].m(a,null))}for(;k<Q.length;k+=1)Q[k].d(1);Q.length=x.length}R&4&&ue(a,"width",P[2]),R&32&&ue(a,"height",P[5])},i:bn,o:bn,d(P){P&&at(t),p.d(),P&&at(s),P&&at(l),Hl(w,P),Hl(Q,P)}}}function bu(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")}function AE(e,t,r){let{parishname:s}=t,c=Pa("#app").node().getBoundingClientRect().width;var h,a,d,_=10,p=15,E=0,w=1,x,Q=[];c<400?x=20:x=40;let P,R,k=[],O=0;var G=["#012A41","#038AD8","#B7E2FB","#FBE798","#FDF0BF","#F7685E","#da392f","#940A00","#59C9A2","#054830","#F9DC66","#DD2113","#24AFFF"];return Wa(async()=>{const K=await dl("https://vera-louisiana-data.s3.amazonaws.com/curated_data/clearinghouse/facilities.csv");r(7,k=K.filter(Z=>Z.parish==s+" Parish")),r(6,R=k.length),r(5,P=k.length*22),k.forEach(Z=>{Z.capacity=+Z.capacity}),r(8,O=h2(k,Z=>m2(Z,$=>$.capacity))),E=O/(x*_),k.forEach(function(Z,$){Z.capacity=+Z.capacity,Z.units=Math.floor(Z.capacity/E),r(4,Q=Q.concat(Array(Z.units+1).join(1).split("").map(function(){return{squareValue:E,units:Z.units,capacity:Z.capacity,groupIndex:$}})))}),r(1,h=p*x+x*w+25),r(2,a=p*x+x*w+65),r(3,d=p*_+_*w+25)}),e.$$set=K=>{"parishname"in K&&r(0,s=K.parishname)},[s,h,a,d,Q,P,R,k,O,_,p,w,G]}class lE extends ni{constructor(t){super(),ri(this,t,AE,oE,ei,{parishname:0})}}function G1(e,t,r){const s=e.slice();return s[17]=t[r],s[19]=r,s}function q1(e){let t,r,s;function l(...a){return e[10](e[17],...a)}function c(...a){return e[11](e[17],...a)}function h(...a){return e[12](e[17],...a)}return{c(){t=qn("path"),ue(t,"class","path-line svelte-d6euqo"),ue(t,"data-id",e[19]),ue(t,"d",e[2]),ue(t,"stroke",e[0])},m(a,d){At(a,t,d),r||(s=[es(t,"mouseover",l),es(t,"focus",c),es(t,"mousemove",h)],r=!0)},p(a,d){e=a,d&4&&ue(t,"d",e[2]),d&1&&ue(t,"stroke",e[0])},d(a){a&&at(t),r=!1,tA(s)}}}function cE(e){let t,r,s,l,c,h=e[1],a=[];for(let d=0;d<h.length;d+=1)a[d]=q1(G1(e,h,d));return{c(){t=qn("path"),r=$t(),s=qn("g");for(let d=0;d<a.length;d+=1)a[d].c();ue(t,"class","path-line svelte-d6euqo"),ue(t,"d",e[2]),ue(t,"stroke",e[0]),ue(s,"class","line-group")},m(d,_){At(d,t,_),At(d,r,_),At(d,s,_);for(let p=0;p<a.length;p+=1)a[p].m(s,null);l||(c=[es(s,"mouseout",e[13]),es(s,"blur",e[14])],l=!0)},p(d,[_]){if(_&4&&ue(t,"d",d[2]),_&1&&ue(t,"stroke",d[0]),_&199){h=d[1];let p;for(p=0;p<h.length;p+=1){const E=G1(d,h,p);a[p]?a[p].p(E,_):(a[p]=q1(E),a[p].c(),a[p].m(s,null))}for(;p<a.length;p+=1)a[p].d(1);a.length=h.length}},i:bn,o:bn,d(d){d&&at(t),d&&at(r),d&&at(s),Hl(a,d),l=!1,tA(c)}}}function uE(e,t,r){let s,l,c,h;const{data:a,xGet:d,yGet:_,xScale:p,yScale:E}=$o("LayerCake");$r(e,a,K=>r(1,h=K)),$r(e,d,K=>r(9,c=K)),$r(e,_,K=>r(8,l=K));let{stroke:w="#ab00d6"}=t;const x=$h();function Q(K){return function($){raise(this),$.layerX!==0&&$.layerY!==0&&x("mousemove",{e:$})}}const P=(K,Z)=>x("mousemove",{e:Z,props:K}),R=(K,Z)=>x("mousemove",{e:Z,props:K}),k=(K,Z)=>Q(),O=K=>x("mouseout"),G=K=>x("mouseout");return e.$$set=K=>{"stroke"in K&&r(0,w=K.stroke)},e.$$.update=()=>{e.$$.dirty&770&&r(2,s="M"+h.map(K=>c(K)+","+l(K)).join("L"))},[w,h,s,a,d,_,x,Q,l,c,P,R,k,O,G]}class $v extends ni{constructor(t){super(),ri(this,t,uE,cE,ei,{stroke:0})}}const hE=e=>({x:e&10,y:e&9,found:e&8,visible:e&4,e:e&16}),W1=e=>({x:e[1](e[3])||0,y:e[0](e[3])||0,found:e[3],visible:e[2],e:e[4]});function fE(e){let t,r,s,l,c;const h=e[21].default,a=wA(h,e,e[20],W1);return{c(){t=Lt("div"),r=$t(),a&&a.c(),ue(t,"class","bg svelte-n2rx0m")},m(d,_){At(d,t,_),At(d,r,_),a&&a.m(d,_),s=!0,l||(c=[es(t,"mousemove",e[10]),es(t,"mouseout",e[22]),es(t,"blur",e[23])],l=!0)},p(d,[_]){a&&a.p&&(!s||_&1048607)&&xA(a,h,d,d[20],s?bA(h,d[20],_,hE):BA(d[20]),W1)},i(d){s||(Mt(a,d),s=!0)},o(d){Gt(a,d),s=!1},d(d){d&&at(t),d&&at(r),a&&a.d(d),l=!1,tA(c)}}}function dE(e,t,r){let s,l,c,h,a,d,_,p,{$$slots:E={},$$scope:w}=t;const{data:x,xGet:Q,yGet:P,width:R,height:k}=$o("LayerCake");$r(e,x,ne=>r(15,h=ne)),$r(e,Q,ne=>r(18,_=ne)),$r(e,P,ne=>r(19,p=ne)),$r(e,R,ne=>r(17,d=ne)),$r(e,k,ne=>r(16,a=ne));let O=!1,G={},K={},{x:Z="x"}=t,{y:$="y"}=t,{searchRadius:fe=void 0}=t,{dataset:Ae=void 0}=t;function ge(ne){r(4,K=ne);const xe=`layer${Z.toUpperCase()}`,ve=`layer${$.toUpperCase()}`;r(3,G=c.find(ne[xe],ne[ve],fe)||{}),r(2,O=Object.keys(G).length>0)}const he=()=>r(2,O=!1),ee=()=>r(2,O=!1);return e.$$set=ne=>{"x"in ne&&r(11,Z=ne.x),"y"in ne&&r(12,$=ne.y),"searchRadius"in ne&&r(13,fe=ne.searchRadius),"dataset"in ne&&r(14,Ae=ne.dataset),"$$scope"in ne&&r(20,w=ne.$$scope)},e.$$.update=()=>{e.$$.dirty&788480&&r(1,s=Z==="x"?_:p),e.$$.dirty&790528&&r(0,l=$==="y"?p:_),e.$$.dirty&245763&&(c=Dv().extent([[-1,-1],[d+1,a+1]]).x(s).y(l).addAll(Ae||h))},[l,s,O,G,K,x,Q,P,R,k,ge,Z,$,fe,Ae,h,a,d,_,p,w,E,he,ee]}class pE extends ni{constructor(t){super(),ri(this,t,dE,fE,ei,{x:11,y:12,searchRadius:13,dataset:14})}}function X1(e){const t=e[11](e[20]);e[22]=t}function Z1(e){let t,r,s,l,c=e[20][e[2].x]+"",h,a,d,_,p=e[22][2].value+"",E;return{c(){t=Lt("div"),r=$t(),s=Lt("div"),l=Lt("div"),h=Pr(c),a=$t(),d=Lt("div"),_=Pr("Total Prison Admissions: "),E=Pr(p),Qn(t,"left",e[17]+"px"),ue(t,"class","line svelte-1ll29vg"),ue(l,"class","row"),ue(d,"class","row"),ue(s,"class","tooltip svelte-1ll29vg"),Qn(s,"width",e_+"px"),Qn(s,"display",e[19]?"block":"none"),Qn(s,"top",e[4](e[22][2].value)+e[0]+"px"),Qn(s,"left",Math.min(Math.max(e[10],e[17]),e[5]-e[10])+"px")},m(w,x){At(w,t,x),At(w,r,x),At(w,s,x),it(s,l),it(l,h),it(s,a),it(s,d),it(d,_),it(d,E)},p(w,x){x&131072&&Qn(t,"left",w[17]+"px"),x&1048580&&c!==(c=w[20][w[2].x]+"")&&ai(h,c),x&1048576&&p!==(p=w[22][2].value+"")&&ai(E,p),x&524288&&Qn(s,"display",w[19]?"block":"none"),x&1048593&&Qn(s,"top",w[4](w[22][2].value)+w[0]+"px"),x&131104&&Qn(s,"left",Math.min(Math.max(w[10],w[17]),w[5]-w[10])+"px")},d(w){w&&at(t),w&&at(r),w&&at(s)}}}function mE(e){X1(e);let t,r=e[19]===!0&&Z1(e);return{c(){r&&r.c(),t=yo()},m(s,l){r&&r.m(s,l),At(s,t,l)},p(s,l){X1(s),s[19]===!0?r?r.p(s,l):(r=Z1(s),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},d(s){r&&r.d(s),s&&at(t)}}}function gE(e){let t,r;return t=new pE({props:{dataset:e[1]||e[3],y:"x",$$slots:{default:[mE,({x:s,y:l,visible:c,found:h,e:a})=>({17:s,18:l,19:c,20:h,21:a}),({x:s,y:l,visible:c,found:h,e:a})=>(s?131072:0)|(l?262144:0)|(c?524288:0)|(h?1048576:0)|(a?2097152:0)]},$$scope:{ctx:e}}}),{c(){yr(t.$$.fragment)},m(s,l){mr(t,s,l),r=!0},p(s,[l]){const c={};l&10&&(c.dataset=s[1]||s[3]),l&10092597&&(c.$$scope={dirty:l,ctx:s}),t.$set(c)},i(s){r||(Mt(t.$$.fragment,s),r=!0)},o(s){Gt(t.$$.fragment,s),r=!1},d(s){gr(t,s)}}}const e_=150;function yE(e,t,r){let s,l,c,h;const{data:a,width:d,yScale:_,config:p}=$o("LayerCake");$r(e,a,K=>r(3,l=K)),$r(e,d,K=>r(5,h=K)),$r(e,_,K=>r(4,c=K)),$r(e,p,K=>r(2,s=K));const E=Vg(","),w=K=>K.replace(/^\w/,Z=>Z.toUpperCase());let{formatTitle:x=K=>K}=t,{formatValue:Q=K=>isNaN(+K)?K:E(K)}=t,{formatKey:P=K=>w(K)}=t,{offset:R=0}=t,{dataset:k=void 0}=t;const O=e_/2;function G(K){return Object.keys(K).length===0?[]:Object.keys(K).filter($=>$!==s.x).map($=>({key:$,value:K[$]})).sort(($,fe)=>fe.value-$.value)}return e.$$set=K=>{"formatTitle"in K&&r(12,x=K.formatTitle),"formatValue"in K&&r(13,Q=K.formatValue),"formatKey"in K&&r(14,P=K.formatKey),"offset"in K&&r(0,R=K.offset),"dataset"in K&&r(1,k=K.dataset)},[R,k,s,l,c,h,a,d,_,p,O,G,x,Q,P]}class t_ extends ni{constructor(t){super(),ri(this,t,yE,gE,ei,{formatTitle:12,formatValue:13,formatKey:14,offset:0,dataset:1})}}function vE(e){let t,r,s,l,c,h;return t=new ah({props:{ticks:6}}),s=new oh({props:{ticks:4}}),c=new $v({}),c.$on("mousemove",e[7]),c.$on("mouseout",e[8]),{c(){yr(t.$$.fragment),r=$t(),yr(s.$$.fragment),l=$t(),yr(c.$$.fragment)},m(a,d){mr(t,a,d),At(a,r,d),mr(s,a,d),At(a,l,d),mr(c,a,d),h=!0},p:bn,i(a){h||(Mt(t.$$.fragment,a),Mt(s.$$.fragment,a),Mt(c.$$.fragment,a),h=!0)},o(a){Gt(t.$$.fragment,a),Gt(s.$$.fragment,a),Gt(c.$$.fragment,a),h=!1},d(a){gr(t,a),a&&at(r),gr(s,a),a&&at(l),gr(c,a)}}}function _E(e){let t,r;return t=new t_({props:{formatTitle:e[6],dataset:e[1]}}),{c(){yr(t.$$.fragment)},m(s,l){mr(t,s,l),r=!0},p(s,l){const c={};l&2&&(c.dataset=s[1]),t.$set(c)},i(s){r||(Mt(t.$$.fragment,s),r=!0)},o(s){Gt(t.$$.fragment,s),r=!1},d(s){gr(t,s)}}}function wE(e){let t,r,s,l;return t=new sh({props:{$$slots:{default:[vE]},$$scope:{ctx:e}}}),s=new ih({props:{$$slots:{default:[_E]},$$scope:{ctx:e}}}),{c(){yr(t.$$.fragment),r=$t(),yr(s.$$.fragment)},m(c,h){mr(t,c,h),At(c,r,h),mr(s,c,h),l=!0},p(c,h){const a={};h&1072&&(a.$$scope={dirty:h,ctx:c}),t.$set(a);const d={};h&1026&&(d.$$scope={dirty:h,ctx:c}),s.$set(d)},i(c){l||(Mt(t.$$.fragment,c),Mt(s.$$.fragment,c),l=!0)},o(c){Gt(t.$$.fragment,c),Gt(s.$$.fragment,c),l=!1},d(c){gr(t,c),c&&at(r),gr(s,c)}}}function bE(e){let t,r,s,l,c,h;return t=new ah({props:{ticks:2}}),s=new oh({props:{ticks:4}}),c=new $v({}),{c(){yr(t.$$.fragment),r=$t(),yr(s.$$.fragment),l=$t(),yr(c.$$.fragment)},m(a,d){mr(t,a,d),At(a,r,d),mr(s,a,d),At(a,l,d),mr(c,a,d),h=!0},p:bn,i(a){h||(Mt(t.$$.fragment,a),Mt(s.$$.fragment,a),Mt(c.$$.fragment,a),h=!0)},o(a){Gt(t.$$.fragment,a),Gt(s.$$.fragment,a),Gt(c.$$.fragment,a),h=!1},d(a){gr(t,a),a&&at(r),gr(s,a),a&&at(l),gr(c,a)}}}function xE(e){let t,r;return t=new t_({props:{formatTitle:e[6],dataset:e[2]}}),{c(){yr(t.$$.fragment)},m(s,l){mr(t,s,l),r=!0},p(s,l){const c={};l&4&&(c.dataset=s[2]),t.$set(c)},i(s){r||(Mt(t.$$.fragment,s),r=!0)},o(s){Gt(t.$$.fragment,s),r=!1},d(s){gr(t,s)}}}function BE(e){let t,r,s,l;return t=new sh({props:{$$slots:{default:[bE]},$$scope:{ctx:e}}}),s=new ih({props:{$$slots:{default:[xE]},$$scope:{ctx:e}}}),{c(){yr(t.$$.fragment),r=$t(),yr(s.$$.fragment)},m(c,h){mr(t,c,h),At(c,r,h),mr(s,c,h),l=!0},p(c,h){const a={};h&1024&&(a.$$scope={dirty:h,ctx:c}),t.$set(a);const d={};h&1028&&(d.$$scope={dirty:h,ctx:c}),s.$set(d)},i(c){l||(Mt(t.$$.fragment,c),Mt(s.$$.fragment,c),l=!0)},o(c){Gt(t.$$.fragment,c),Gt(s.$$.fragment,c),l=!1},d(c){gr(t,c),c&&at(r),gr(s,c)}}}function CE(e){let t,r,s,l,c,h,a,d,_,p,E,w,x;return _=new th({props:{padding:{top:8,right:10,bottom:20,left:25},x:J1,y:zh,yNice:4,yDomain:[0,e[3]],data:e[1],$$slots:{default:[wE]},$$scope:{ctx:e}}}),w=new th({props:{padding:{top:8,right:10,bottom:20,left:25},x:J1,y:zh,yNice:4,yDomain:[0,e[3]],data:e[2],$$slots:{default:[BE]},$$scope:{ctx:e}}}),{c(){t=Lt("div"),r=Lt("h4"),s=Pr("People from "),l=Pr(e[0]),c=Pr(" Parish Sent to Prison (1992-2014, 2019-2021)"),h=$t(),a=Lt("div"),d=Lt("div"),yr(_.$$.fragment),p=$t(),E=Lt("div"),yr(w.$$.fragment),ue(r,"class","svelte-sydvx1"),ue(d,"class","chart-container first svelte-sydvx1"),ue(E,"class","chart-container second svelte-sydvx1"),ue(a,"id","container-wrap"),ue(a,"class","svelte-sydvx1"),ue(t,"id","linechart"),ue(t,"class","svelte-sydvx1")},m(Q,P){At(Q,t,P),it(t,r),it(r,s),it(r,l),it(r,c),it(t,h),it(t,a),it(a,d),mr(_,d,null),it(a,p),it(a,E),mr(w,E,null),x=!0},p(Q,[P]){(!x||P&1)&&ai(l,Q[0]);const R={};P&8&&(R.yDomain=[0,Q[3]]),P&2&&(R.data=Q[1]),P&1074&&(R.$$scope={dirty:P,ctx:Q}),_.$set(R);const k={};P&8&&(k.yDomain=[0,Q[3]]),P&4&&(k.data=Q[2]),P&1028&&(k.$$scope={dirty:P,ctx:Q}),w.$set(k)},i(Q){x||(Mt(_.$$.fragment,Q),Mt(w.$$.fragment,Q),x=!0)},o(Q){Gt(_.$$.fragment,Q),Gt(w.$$.fragment,Q),x=!1},d(Q){Q&&at(t),gr(_),gr(w)}}}const J1="year",zh="total_prison_adm";function EE(e,t,r){let{parishname:s}=t,l=[],c=[],h=[],a=100;Wa(async()=>{l=(await dl("https://vera-louisiana-data.s3.amazonaws.com/curated_data/clearinghouse/parish_prison_adm_trends.csv")).filter(Q=>Q.parish==s+" Parish"),l.forEach(function(Q){Q.year=+Q.year,Q.total_prison_adm=+Q.total_prison_adm}),r(1,c=l.filter(Q=>Q.year<=2014)),r(2,h=l.filter(Q=>Q.year>=2019)),r(3,a=Xf(l,Q=>Q.total_prison_adm)),c.forEach(Q=>{Q[zh]=+Q[zh]}),h.forEach(Q=>{Q[zh]=+Q[zh]})});const d=Rp("%Y");let _,p=!1;const E=x=>r(4,_=r(5,p=x)),w=()=>r(5,p=!0);return e.$$set=x=>{"parishname"in x&&r(0,s=x.parishname)},[s,c,h,a,_,p,d,E,w]}class FE extends ni{constructor(t){super(),ri(this,t,EE,CE,ei,{parishname:0})}}function Y1(e){const t={...e[36].props};e[37]=t}function SE(e){let t,r,s,l,c,h;return t=new ah({props:{gridlines:!0,baseline:!0,snapTicks:!0,ticks:"4"}}),s=new oh({props:{gridlines:!1}}),c=new Op({props:{fill:"#0e002c"}}),c.$on("mousemove",e[4]),c.$on("mouseout",e[5]),{c(){yr(t.$$.fragment),r=$t(),yr(s.$$.fragment),l=$t(),yr(c.$$.fragment)},m(a,d){mr(t,a,d),At(a,r,d),mr(s,a,d),At(a,l,d),mr(c,a,d),h=!0},p:bn,i(a){h||(Mt(t.$$.fragment,a),Mt(s.$$.fragment,a),Mt(c.$$.fragment,a),h=!0)},o(a){Gt(t.$$.fragment,a),Gt(s.$$.fragment,a),Gt(c.$$.fragment,a),h=!1},d(a){gr(t,a),a&&at(r),gr(s,a),a&&at(l),gr(c,a)}}}function $1(e){let t,r;return t=new ud({props:{evt:e[2],$$slots:{default:[IE,({detail:s})=>({36:s}),({detail:s})=>[0,s?32:0]]},$$scope:{ctx:e}}}),{c(){yr(t.$$.fragment)},m(s,l){mr(t,s,l),r=!0},p(s,l){const c={};l[0]&4&&(c.evt=s[2]),l[1]&160&&(c.$$scope={dirty:l,ctx:s}),t.$set(c)},i(s){r||(Mt(t.$$.fragment,s),r=!0)},o(s){Gt(t.$$.fragment,s),r=!1},d(s){gr(t,s)}}}function IE(e){Y1(e);let t,r=(+e[37].people).toFixed(0)+"",s,l;return{c(){t=Lt("div"),s=Pr(r),l=Pr(" people"),ue(t,"class","row")},m(c,h){At(c,t,h),it(t,s),it(t,l)},p(c,h){Y1(c),h[1]&32&&r!==(r=(+c[37].people).toFixed(0)+"")&&ai(s,r)},d(c){c&&at(t)}}}function TE(e){let t,r,s=e[3]!==!0&&$1(e);return{c(){s&&s.c(),t=yo()},m(l,c){s&&s.m(l,c),At(l,t,c),r=!0},p(l,c){l[3]!==!0?s?(s.p(l,c),c[0]&8&&Mt(s,1)):(s=$1(l),s.c(),Mt(s,1),s.m(t.parentNode,t)):s&&(Xa(),Gt(s,1,1,()=>{s=null}),Za())},i(l){r||(Mt(s),r=!0)},o(l){Gt(s),r=!1},d(l){s&&s.d(l),l&&at(t)}}}function UE(e){let t,r,s,l;return t=new sh({props:{$$slots:{default:[SE]},$$scope:{ctx:e}}}),s=new ih({props:{pointerEvents:!1,$$slots:{default:[TE]},$$scope:{ctx:e}}}),{c(){yr(t.$$.fragment),r=$t(),yr(s.$$.fragment)},m(c,h){mr(t,c,h),At(c,r,h),mr(s,c,h),l=!0},p(c,h){const a={};h[0]&12|h[1]&128&&(a.$$scope={dirty:h,ctx:c}),t.$set(a);const d={};h[0]&12|h[1]&128&&(d.$$scope={dirty:h,ctx:c}),s.$set(d)},i(c){l||(Mt(t.$$.fragment,c),Mt(s.$$.fragment,c),l=!0)},o(c){Gt(t.$$.fragment,c),Gt(s.$$.fragment,c),l=!1},d(c){gr(t,c),c&&at(r),gr(s,c)}}}function LE(e){let t,r,s,l,c,h,a,d,_,p,E,w,x,Q,P,R,k,O,G;return r=new lE({props:{parishname:e[0]}}),x=new th({props:{padding:{top:0,bottom:40,left:120},x:cg,y:QE,yScale:Yu().paddingInner([.15]),xDomain:[0,null],data:e[1],$$slots:{default:[UE]},$$scope:{ctx:e}}}),R=new FE({props:{parishname:e[0]}}),{c(){t=Lt("div"),yr(r.$$.fragment),s=$t(),l=Lt("p"),l.textContent=`Incarceration takes many forms in Louisiana and includes state prisons, parish
  jails operated by sheriffs, jails operated by private companies, municipal
  jails operated by police departments, and sheriff-operated Transitional Work
  Programs. Many of these facilities are playing roles they should not play.
  This is especially true of jails: intended to hold only pretrial detainees and
  people serving short sentences, many Louisiana jails are holding people
  serving long prison sentences. All these facilities have a financial stake in
  filling their capacity. Ending Louisiana’s reliance on incarceration
  ultimately requires reducing capacity and permanently closing facilities.`,c=$t(),h=Lt("div"),a=Lt("h4"),d=Pr("People held in "),_=Pr(e[0]),p=Pr(" Parish Jails, by Jurisdiction (November 26, 2021)"),E=$t(),w=Lt("div"),yr(x.$$.fragment),Q=$t(),P=Lt("div"),yr(R.$$.fragment),k=$t(),O=Lt("div"),O.innerHTML=`<p><span class="rec svelte-1h9vuvp">Recommendation</span>: End Louisiana’s practice of housing
    distinct groups of people with vastly different needs in the same multi-use
    facilities; for example, housing juveniles at Louisiana State Penitentiary
    (Angola) and housing people with prison sentences in pretrial detention
    facilities, like parish jails. The state should use sentencing reform,
    applied retroactively, to reduce the number of incarcerated people to fit
    current Department of Public Safety &amp; Corrections capacity.</p> 
  <p><span class="rec svelte-1h9vuvp">Recommendation</span>: Pass a data transparency bill that
    standardizes the data a carceral facility must collect and report.</p> 
  <p><span class="rec svelte-1h9vuvp">Recommendation</span>: Reduce the prison population by
    providing parole eligibility after 20 years to people serving long sentences
    and after 25 years to those serving life sentences; making
    parole-eligibility and sentencing reforms available retroactively; and
    implementing a felony classification system to eliminate inconsistencies in
    sentencing and release.</p>`,ue(t,"id","waffle"),ue(l,"class","break-avoid"),ue(w,"class","chart-container svelte-1h9vuvp"),ue(h,"class","barchart svelte-1h9vuvp"),ue(P,"id","lines"),ue(P,"class","svelte-1h9vuvp"),ue(O,"id","recs")},m(K,Z){At(K,t,Z),mr(r,t,null),At(K,s,Z),At(K,l,Z),At(K,c,Z),At(K,h,Z),it(h,a),it(a,d),it(a,_),it(a,p),it(h,E),it(h,w),mr(x,w,null),At(K,Q,Z),At(K,P,Z),mr(R,P,null),At(K,k,Z),At(K,O,Z),G=!0},p(K,Z){const $={};Z[0]&1&&($.parishname=K[0]),r.$set($),(!G||Z[0]&1)&&ai(_,K[0]);const fe={};Z[0]&2&&(fe.data=K[1]),Z[0]&12|Z[1]&128&&(fe.$$scope={dirty:Z,ctx:K}),x.$set(fe);const Ae={};Z[0]&1&&(Ae.parishname=K[0]),R.$set(Ae)},i(K){G||(Mt(r.$$.fragment,K),Mt(x.$$.fragment,K),Mt(R.$$.fragment,K),G=!0)},o(K){Gt(r.$$.fragment,K),Gt(x.$$.fragment,K),Gt(R.$$.fragment,K),G=!1},d(K){K&&at(t),gr(r),K&&at(s),K&&at(l),K&&at(c),K&&at(h),gr(x),K&&at(Q),K&&at(P),gr(R),K&&at(k),K&&at(O)}}}const cg="people",QE="jurisdiction";function PE(e,t,r){let{parishname:s}=t,l=[],c=[];Wa(async()=>{l=(await dl("https://vera-louisiana-data.s3.amazonaws.com/curated_data/clearinghouse/parish_facilities.csv")).filter(E=>E.parish==s+" Parish"),r(1,c=[{people:+l[0].held_for_doc_dpsc_2021,jurisdiction:"State DOC"},{people:+l[0].held_for_fed_dpsc_2021,jurisdiction:"Federal"},{people:+l[0].pretrial_dpsc_2021,jurisdiction:"Pretrial"},{people:+l[0].parish_dpsc_2021,jurisdiction:"Parish"},{people:+l[0].held_for_ice_ice_2021,jurisdiction:"ICE"}]),c.sort((E,w)=>w.people-E.people),c.forEach(E=>{E[cg]=+E[cg]})});let h,a=!1;const d=p=>r(2,h=r(3,a=p)),_=()=>r(3,a=!0);return e.$$set=p=>{"parishname"in p&&r(0,s=p.parishname)},[s,c,h,a,d,_]}class ey extends ni{constructor(t){super(),ri(this,t,PE,LE,ei,{parishname:0},null,[-1,-1])}}function ty(e,t,r){const s=e.slice();s[30]=t[r],s[37]=r;const l=s[6](s[30]);s[31]=l;const c=s[5](s[30]);s[32]=c;const h=Array.isArray(s[32])?s[32][0]:s[32];s[33]=h;const a=s[9].bandwidth?s[9].bandwidth():s[7](s[30]);s[34]=a;const d=s[10](s[30]);return s[35]=d,s}function ry(e){let t,r=e[35]+"",s,l,c;return{c(){t=qn("text"),s=Pr(r),ue(t,"x",l=e[33]+e[34]/2),ue(t,"y",c=e[12]-e[31]-5),ue(t,"text-anchor","middle"),ue(t,"class","svelte-xn7mh7")},m(h,a){At(h,t,a),it(t,s)},p(h,a){a[0]&1280&&r!==(r=h[35]+"")&&ai(s,r),a[0]&928&&l!==(l=h[33]+h[34]/2)&&ue(t,"x",l),a[0]&4416&&c!==(c=h[12]-h[31]-5)&&ue(t,"y",c)},d(h){h&&at(t)}}}function ny(e){let t,r,s,l,c,h,a,d,_,p;function E(...P){return e[24](e[30],...P)}function w(...P){return e[25](e[30],...P)}function x(...P){return e[26](e[30],...P)}let Q=e[3]&&e[35]&&ry(e);return{c(){t=qn("rect"),Q&&Q.c(),d=yo(),ue(t,"class","group-rect"),ue(t,"data-id",e[37]),ue(t,"data-range",r=e[11](e[30])),ue(t,"data-count",s=e[35]),ue(t,"x",l=e[33]),ue(t,"y",c=e[4](e[30])),ue(t,"width",h=e[34]),ue(t,"height",a=e[31]),ue(t,"fill",e[0]),ue(t,"stroke",e[1]),ue(t,"stroke-width",e[2])},m(P,R){At(P,t,R),Q&&Q.m(P,R),At(P,d,R),_||(p=[es(t,"mouseover",E),es(t,"focus",w),es(t,"mousemove",x)],_=!0)},p(P,R){e=P,R[0]&2304&&r!==(r=e[11](e[30]))&&ue(t,"data-range",r),R[0]&1280&&s!==(s=e[35])&&ue(t,"data-count",s),R[0]&288&&l!==(l=e[33])&&ue(t,"x",l),R[0]&272&&c!==(c=e[4](e[30]))&&ue(t,"y",c),R[0]&896&&h!==(h=e[34])&&ue(t,"width",h),R[0]&320&&a!==(a=e[31])&&ue(t,"height",a),R[0]&1&&ue(t,"fill",e[0]),R[0]&2&&ue(t,"stroke",e[1]),R[0]&4&&ue(t,"stroke-width",e[2]),e[3]&&e[35]?Q?Q.p(e,R):(Q=ry(e),Q.c(),Q.m(d.parentNode,d)):Q&&(Q.d(1),Q=null)},d(P){P&&at(t),Q&&Q.d(P),P&&at(d),_=!1,tA(p)}}}function kE(e){let t,r=e[8],s=[];for(let l=0;l<r.length;l+=1)s[l]=ny(ty(e,r,l));return{c(){t=qn("g");for(let l=0;l<s.length;l+=1)s[l].c();ue(t,"class","column-group")},m(l,c){At(l,t,c);for(let h=0;h<s.length;h+=1)s[h].m(t,null)},p(l,c){if(c[0]&6299647){r=l[8];let h;for(h=0;h<r.length;h+=1){const a=ty(l,r,h);s[h]?s[h].p(a,c):(s[h]=ny(a),s[h].c(),s[h].m(t,null))}for(;h<s.length;h+=1)s[h].d(1);s.length=r.length}},i:bn,o:bn,d(l){l&&at(t),Hl(s,l)}}}function ME(e,t,r){let s,l,c,h,a,d,_,p,E,w;const{data:x,xGet:Q,yGet:P,x:R,yRange:k,xScale:O,y:G,height:K,zGet:Z,zScale:$,z:fe}=$o("LayerCake");$r(e,x,Ke=>r(8,d=Ke)),$r(e,Q,Ke=>r(5,a=Ke)),$r(e,P,Ke=>r(4,c=Ke)),$r(e,R,Ke=>r(11,E=Ke)),$r(e,k,Ke=>r(23,h=Ke)),$r(e,O,Ke=>r(9,_=Ke)),$r(e,G,Ke=>r(10,p=Ke)),$r(e,K,Ke=>r(12,w=Ke));let{fill:Ae="royalblue"}=t,{stroke:ge="#000"}=t,{strokeWidth:he=0}=t,{showLabels:ee=!1}=t;const ne=$h();function xe(Ke){return function(rt){raise(this),rt.layerX!==0&&rt.layerY!==0&&ne("mousemove",{e:rt})}}const ve=(Ke,Ue)=>ne("mousemove",{e:Ue,props:Ke}),ze=(Ke,Ue)=>ne("mousemove",{e:Ue,props:Ke}),Le=(Ke,Ue)=>xe();return e.$$set=Ke=>{"fill"in Ke&&r(0,Ae=Ke.fill),"stroke"in Ke&&r(1,ge=Ke.stroke),"strokeWidth"in Ke&&r(2,he=Ke.strokeWidth),"showLabels"in Ke&&r(3,ee=Ke.showLabels)},e.$$.update=()=>{e.$$.dirty[0]&32&&r(7,s=Ke=>{const Ue=a(Ke);return Math.abs(Ue[1]-Ue[0])}),e.$$.dirty[0]&8388624&&r(6,l=Ke=>h[0]-c(Ke))},[Ae,ge,he,ee,c,a,l,s,d,_,p,E,w,x,Q,P,R,k,O,G,K,ne,xe,h,ve,ze,Le]}class DE extends ni{constructor(t){super(),ri(this,t,ME,kE,ei,{fill:0,stroke:1,strokeWidth:2,showLabels:3},null,[-1,-1])}}var iy={},NE={get exports(){return iy},set exports(e){iy=e}};(function(e,t){(function(r,s){s()})(Ol,function(){function r(_,p){return typeof p>"u"?p={autoBom:!1}:typeof p!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),p={autoBom:!p}),p.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(_.type)?new Blob(["\uFEFF",_],{type:_.type}):_}function s(_,p,E){var w=new XMLHttpRequest;w.open("GET",_),w.responseType="blob",w.onload=function(){d(w.response,p,E)},w.onerror=function(){console.error("could not download file")},w.send()}function l(_){var p=new XMLHttpRequest;p.open("HEAD",_,!1);try{p.send()}catch{}return 200<=p.status&&299>=p.status}function c(_){try{_.dispatchEvent(new MouseEvent("click"))}catch{var p=document.createEvent("MouseEvents");p.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),_.dispatchEvent(p)}}var h=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Ol=="object"&&Ol.global===Ol?Ol:void 0,a=h.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),d=h.saveAs||(typeof window!="object"||window!==h?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(_,p,E){var w=h.URL||h.webkitURL,x=document.createElement("a");p=p||_.name||"download",x.download=p,x.rel="noopener",typeof _=="string"?(x.href=_,x.origin===location.origin?c(x):l(x.href)?s(_,p,E):c(x,x.target="_blank")):(x.href=w.createObjectURL(_),setTimeout(function(){w.revokeObjectURL(x.href)},4e4),setTimeout(function(){c(x)},0))}:"msSaveOrOpenBlob"in navigator?function(_,p,E){if(p=p||_.name||"download",typeof _!="string")navigator.msSaveOrOpenBlob(r(_,E),p);else if(l(_))s(_,p,E);else{var w=document.createElement("a");w.href=_,w.target="_blank",setTimeout(function(){c(w)})}}:function(_,p,E,w){if(w=w||open("","_blank"),w&&(w.document.title=w.document.body.innerText="downloading..."),typeof _=="string")return s(_,p,E);var x=_.type==="application/octet-stream",Q=/constructor/i.test(h.HTMLElement)||h.safari,P=/CriOS\/[\d]+/.test(navigator.userAgent);if((P||x&&Q||a)&&typeof FileReader<"u"){var R=new FileReader;R.onloadend=function(){var G=R.result;G=P?G:G.replace(/^data:[^;]*;/,"data:attachment/file;"),w?w.location.href=G:location=G,w=null},R.readAsDataURL(_)}else{var k=h.URL||h.webkitURL,O=k.createObjectURL(_);w?w.location=O:location.href=O,w=null,setTimeout(function(){k.revokeObjectURL(O)},4e4)}});h.saveAs=d.saveAs=d,e.exports=d})})(NE);function sy(e){const t={...e[13].props};e[14]=t}function ay(e){let t,r,s,l,c,h,a,d,_,p,E,w,x,Q,P,R,k,O,G,K,Z,$,fe,Ae,ge,he,ee,ne,xe,ve,ze,Le,Ke,Ue,rt,je=e[3].total_jail_pretrial.toFixed(0)+"",St,te,Fe,Qe,Ve=e[3].required_reduction.toFixed(0)+"",st,dt,Bt=(e[3].required_reduction_pct*100).toFixed(1)+"",Ge,tt;function Qt(pr,sr){return pr[3].required_reduction_pct>.95?RE:jE}let ht=Qt(e),Nt=ht(e);function dr(pr,sr){return pr[3].required_reduction_pct>.95?zE:OE}let Pt=dr(e),Oe=Pt(e);return{c(){t=Lt("div"),r=qn("svg"),s=qn("defs"),l=qn("pattern"),c=qn("image"),h=$t(),a=Lt("div"),d=qn("svg"),Nt.c(),_=qn("text"),p=Pr("reduction required"),Oe.c(),w=qn("line"),P=qn("rect"),O=qn("rect"),$=qn("rect"),fe=qn("rect"),Ae=qn("text"),ge=Pr("pretrial population"),he=qn("text"),ee=Pr("reduction required"),ve=$t(),ze=Lt("div"),Le=Lt("p"),Ke=Pr("As of "),Ue=Pr(e[5]),rt=Pr(", there were "),St=Pr(je),te=Pr(" held pretrial in "),Fe=Pr(e[0]),Qe=Pr(`’s jails. The number of people held
        pretrial needs to decrease by `),st=Pr(Ve),dt=Pr(" ("),Ge=Pr(Bt),tt=Pr(` percent) to
        align with the national average.`),I_(c,"xlink:href","data:image/svg+xml;base64,PHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHdpZHRoPScxMCcgaGVpZ2h0PScxMCc+CiAgPHJlY3Qgd2lkdGg9JzEwJyBoZWlnaHQ9JzEwJyBmaWxsPSd3aGl0ZScvPgogIDxwYXRoIGQ9J00tMSwxIGwyLC0yCiAgICAgICAgICAgTTAsMTAgbDEwLC0xMAogICAgICAgICAgIE05LDExIGwyLC0yJyBzdHJva2U9J2JsYWNrJyBzdHJva2Utd2lkdGg9JzMnLz4KPC9zdmc+"),ue(c,"x","0"),ue(c,"y","0"),ue(c,"width","10"),ue(c,"height","10"),ue(l,"id","diagonal-stripe-3"),ue(l,"patternUnits","userSpaceOnUse"),ue(l,"width","10"),ue(l,"height","10"),ue(r,"height","10"),ue(r,"width","10"),ue(r,"xmlns","http://www.w3.org/2000/svg"),ue(r,"version","1.1"),ue(_,"x","0"),ue(_,"y",E=e[3].reductionLine),ue(_,"fill","#000"),ue(_,"class","svelte-103fh5w"),ue(w,"x1","140"),ue(w,"y1",x=e[3].reductionLine2),ue(w,"x2","200"),ue(w,"y2",Q=e[3].reductionLine2),ue(w,"stroke","#000"),ue(w,"class","svelte-103fh5w"),ue(P,"width",R=e[3].parishPretrialSquareSide),ue(P,"height",k=e[3].parishPretrialSquareSide),ue(P,"x",e[4]),ue(P,"y","0"),ue(P,"fill","#0e002c"),ue(O,"width",G=e[3].parishReductionSquareSide),ue(O,"height",K=e[3].parishReductionSquareSide),ue(O,"x",e[4]),ue(O,"y",Z=e[3].parishPretrialSquareSide-e[3].parishReductionSquareSide),ue(O,"stroke-width","2"),ue(O,"stroke-dasharray","3 6"),ue(O,"stroke","#ef4136"),ue(O,"fill","url(#diagonal-stripe-3)"),ue(O,"opacity",".8"),ue($,"class","mobile_legend svelte-103fh5w"),ue($,"width","15"),ue($,"height","15"),ue($,"x","0"),ue($,"y","210"),ue($,"fill","#0e002c"),ue(fe,"class","mobile_legend svelte-103fh5w"),ue(fe,"width","15"),ue(fe,"height","15"),ue(fe,"x","0"),ue(fe,"y","230"),ue(fe,"fill","#ef4136"),ue(Ae,"class","mobile_legend svelte-103fh5w"),ue(Ae,"x","20"),ue(Ae,"y","222"),ue(Ae,"fill","#000"),ue(he,"class","mobile_legend svelte-103fh5w"),ue(he,"x","20"),ue(he,"y","242"),ue(he,"fill","#000"),ue(d,"height",ne=e[3].svgSizeH+"px"),ue(d,"width",xe=e[3].svgSizeW+"px"),ue(Le,"class","propdescription svelte-103fh5w"),ue(t,"id","proportion"),ue(t,"class","svelte-103fh5w")},m(pr,sr){At(pr,t,sr),it(t,r),it(r,s),it(s,l),it(l,c),it(t,h),it(t,a),it(a,d),Nt.m(d,null),it(d,_),it(_,p),Oe.m(d,null),it(d,w),it(d,P),it(d,O),it(d,$),it(d,fe),it(d,Ae),it(Ae,ge),it(d,he),it(he,ee),it(t,ve),it(t,ze),it(ze,Le),it(Le,Ke),it(Le,Ue),it(Le,rt),it(Le,St),it(Le,te),it(Le,Fe),it(Le,Qe),it(Le,st),it(Le,dt),it(Le,Ge),it(Le,tt)},p(pr,sr){ht===(ht=Qt(pr))&&Nt?Nt.p(pr,sr):(Nt.d(1),Nt=ht(pr),Nt&&(Nt.c(),Nt.m(d,_))),sr&8&&E!==(E=pr[3].reductionLine)&&ue(_,"y",E),Pt===(Pt=dr(pr))&&Oe?Oe.p(pr,sr):(Oe.d(1),Oe=Pt(pr),Oe&&(Oe.c(),Oe.m(d,w))),sr&8&&x!==(x=pr[3].reductionLine2)&&ue(w,"y1",x),sr&8&&Q!==(Q=pr[3].reductionLine2)&&ue(w,"y2",Q),sr&8&&R!==(R=pr[3].parishPretrialSquareSide)&&ue(P,"width",R),sr&8&&k!==(k=pr[3].parishPretrialSquareSide)&&ue(P,"height",k),sr&16&&ue(P,"x",pr[4]),sr&8&&G!==(G=pr[3].parishReductionSquareSide)&&ue(O,"width",G),sr&8&&K!==(K=pr[3].parishReductionSquareSide)&&ue(O,"height",K),sr&16&&ue(O,"x",pr[4]),sr&8&&Z!==(Z=pr[3].parishPretrialSquareSide-pr[3].parishReductionSquareSide)&&ue(O,"y",Z),sr&8&&ne!==(ne=pr[3].svgSizeH+"px")&&ue(d,"height",ne),sr&8&&xe!==(xe=pr[3].svgSizeW+"px")&&ue(d,"width",xe),sr&32&&ai(Ue,pr[5]),sr&8&&je!==(je=pr[3].total_jail_pretrial.toFixed(0)+"")&&ai(St,je),sr&1&&ai(Fe,pr[0]),sr&8&&Ve!==(Ve=pr[3].required_reduction.toFixed(0)+"")&&ai(st,Ve),sr&8&&Bt!==(Bt=(pr[3].required_reduction_pct*100).toFixed(1)+"")&&ai(Ge,Bt)},d(pr){pr&&at(t),Nt.d(),Oe.d()}}}function jE(e){let t,r,s;return{c(){t=qn("text"),r=Pr("pretrial population"),ue(t,"x","0"),ue(t,"y",s=e[3].parishPretrialLine),ue(t,"fill","#000"),ue(t,"class","svelte-103fh5w")},m(l,c){At(l,t,c),it(t,r)},p(l,c){c&8&&s!==(s=l[3].parishPretrialLine)&&ue(t,"y",s)},d(l){l&&at(t)}}}function RE(e){let t,r,s;return{c(){t=qn("text"),r=Pr("pretrial population"),ue(t,"x","0"),ue(t,"y",s=e[3].parishPretrialLine+9),ue(t,"fill","#000"),ue(t,"class","svelte-103fh5w")},m(l,c){At(l,t,c),it(t,r)},p(l,c){c&8&&s!==(s=l[3].parishPretrialLine+9)&&ue(t,"y",s)},d(l){l&&at(t)}}}function OE(e){let t,r,s;return{c(){t=qn("line"),ue(t,"x1","140"),ue(t,"y1",r=e[3].parishPretrialLine2),ue(t,"x2","200"),ue(t,"y2",s=e[3].parishPretrialLine2),ue(t,"stroke","#000"),ue(t,"class","svelte-103fh5w")},m(l,c){At(l,t,c)},p(l,c){c&8&&r!==(r=l[3].parishPretrialLine2)&&ue(t,"y1",r),c&8&&s!==(s=l[3].parishPretrialLine2)&&ue(t,"y2",s)},d(l){l&&at(t)}}}function zE(e){let t,r,s;return{c(){t=qn("line"),ue(t,"x1","140"),ue(t,"y1",r=e[3].parishPretrialLine2+7),ue(t,"x2","200"),ue(t,"y2",s=e[3].parishPretrialLine2+7),ue(t,"stroke","#000"),ue(t,"class","svelte-103fh5w")},m(l,c){At(l,t,c)},p(l,c){c&8&&r!==(r=l[3].parishPretrialLine2+7)&&ue(t,"y1",r),c&8&&s!==(s=l[3].parishPretrialLine2+7)&&ue(t,"y2",s)},d(l){l&&at(t)}}}function HE(e){let t,r,s,l,c,h;return t=new DE({}),t.$on("mousemove",e[8]),t.$on("mouseout",e[9]),s=new ah({props:{gridlines:!1}}),c=new oh({props:{gridlines:!0}}),{c(){yr(t.$$.fragment),r=$t(),yr(s.$$.fragment),l=$t(),yr(c.$$.fragment)},m(a,d){mr(t,a,d),At(a,r,d),mr(s,a,d),At(a,l,d),mr(c,a,d),h=!0},p:bn,i(a){h||(Mt(t.$$.fragment,a),Mt(s.$$.fragment,a),Mt(c.$$.fragment,a),h=!0)},o(a){Gt(t.$$.fragment,a),Gt(s.$$.fragment,a),Gt(c.$$.fragment,a),h=!1},d(a){gr(t,a),a&&at(r),gr(s,a),a&&at(l),gr(c,a)}}}function oy(e){let t,r;return t=new ud({props:{evt:e[6],$$slots:{default:[VE,({detail:s})=>({13:s}),({detail:s})=>s?8192:0]},$$scope:{ctx:e}}}),{c(){yr(t.$$.fragment)},m(s,l){mr(t,s,l),r=!0},p(s,l){const c={};l&64&&(c.evt=s[6]),l&40960&&(c.$$scope={dirty:l,ctx:s}),t.$set(c)},i(s){r||(Mt(t.$$.fragment,s),r=!0)},o(s){Gt(t.$$.fragment,s),r=!1},d(s){gr(t,s)}}}function VE(e){sy(e);let t,r=(+e[14].total_jail_pretrial).toFixed(0)+"",s,l;return{c(){t=Lt("div"),s=Pr(r),l=Pr(" people"),ue(t,"class","row")},m(c,h){At(c,t,h),it(t,s),it(t,l)},p(c,h){sy(c),h&8192&&r!==(r=(+c[14].total_jail_pretrial).toFixed(0)+"")&&ai(s,r)},d(c){c&&at(t)}}}function KE(e){let t,r,s=e[7]!==!0&&oy(e);return{c(){s&&s.c(),t=yo()},m(l,c){s&&s.m(l,c),At(l,t,c),r=!0},p(l,c){l[7]!==!0?s?(s.p(l,c),c&128&&Mt(s,1)):(s=oy(l),s.c(),Mt(s,1),s.m(t.parentNode,t)):s&&(Xa(),Gt(s,1,1,()=>{s=null}),Za())},i(l){r||(Mt(s),r=!0)},o(l){Gt(s),r=!1},d(l){s&&s.d(l),l&&at(t)}}}function GE(e){let t,r,s,l;return t=new sh({props:{$$slots:{default:[HE]},$$scope:{ctx:e}}}),s=new ih({props:{pointerEvents:!1,$$slots:{default:[KE]},$$scope:{ctx:e}}}),{c(){yr(t.$$.fragment),r=$t(),yr(s.$$.fragment)},m(c,h){mr(t,c,h),At(c,r,h),mr(s,c,h),l=!0},p(c,h){const a={};h&32960&&(a.$$scope={dirty:h,ctx:c}),t.$set(a);const d={};h&32960&&(d.$$scope={dirty:h,ctx:c}),s.$set(d)},i(c){l||(Mt(t.$$.fragment,c),Mt(s.$$.fragment,c),l=!0)},o(c){Gt(t.$$.fragment,c),Gt(s.$$.fragment,c),l=!1},d(c){gr(t,c),c&&at(r),gr(s,c)}}}function qE(e){let t,r,s,l,c,h,a,d,_,p,E,w,x,Q,P,R,k,O,G=e[3].required_reduction_pct>=0&&ay(e);return x=new th({props:{padding:{top:0,right:0,bottom:20,left:20},x:ug,y:WE,xScale:Yu().paddingInner([.05]).round(!0),xDomain:["1970","1978","1983","1988","1993","1999","2006","2013","2019","2021"],yDomain:[0,e[2]],data:e[1],$$slots:{default:[GE]},$$scope:{ctx:e}}}),{c(){t=Lt("p"),t.innerHTML=`In 2019, there were nearly 16,000 people held pretrial in Louisiana on a
  typical day—more than twice the national average per capita and more than five
  times the rate of the state with the lowest pretrial detention rate (New
  Hampshire). Louisiana law allows the state to hold people longer without trial
  or conviction than most other states, resulting in lengthy pretrial stays—<a href="https://www.laaclu.org/sites/default/files/field_documents/aclu_la_justicecantwaitreport_02102020_online.pdf" target="_blank">an average of 5.5 months</a>.`,r=$t(),G&&G.c(),s=$t(),l=Lt("p"),l.innerHTML=`Money bail criminalizes poverty by requiring people accused of a crime to pay
  hundreds or even thousands of dollars to be released before trial (often to
  the profit of the private bail bond industry). <a href="https://www.laaclu.org/sites/default/files/field_documents/aclu_la_justicecantwaitreport_02102020_online.pdf" target="_blank">Median bail</a>
  in Louisiana is nearly as high as the median salary. And it’s a system that costs
  taxpayers. For example, in 2015, extracting cash bail and other conviction-related
  fines and fees
  <a href="https://www.vera.org/downloads/publications/past-due-costs-consequences-charging-for-justice-new-orleans-fact-sheet.pdf" target="_blank">cost the City of New Orleans</a> $1.9 million more in jail costs than the revenue it generated for criminal legal
  agencies.`,c=$t(),h=Lt("h4"),a=Pr("Pretrial jail population in "),d=Pr(e[0]),_=Pr(" Parish (1970-2021)"),p=$t(),E=Lt("div"),w=Lt("div"),yr(x.$$.fragment),Q=$t(),P=Lt("p"),P.innerHTML=`<i>For complete detail on jail incarceration trends, including data for race
    and gender, see Vera’s <a href="https://trends.vera.org/" target="_blank">Incarceration Trends</a>.</i>`,R=$t(),k=Lt("div"),k.innerHTML=`<p><span class="rec svelte-103fh5w">Recommendation</span>: Pass legislation that allows people
    charged with non-violent felonies and misdemeanors to be issued a summons in
    lieu of arrest, and enact comprehensive bail reform so that money does not
    determine freedom.</p>`,ue(t,"class","break-avoid"),ue(l,"class","break-avoid"),ue(w,"class","chart-container svelte-103fh5w"),ue(E,"id","wrap"),ue(E,"class","svelte-103fh5w"),ue(P,"class","note"),ue(k,"id","recs")},m(K,Z){At(K,t,Z),At(K,r,Z),G&&G.m(K,Z),At(K,s,Z),At(K,l,Z),At(K,c,Z),At(K,h,Z),it(h,a),it(h,d),it(h,_),At(K,p,Z),At(K,E,Z),it(E,w),mr(x,w,null),At(K,Q,Z),At(K,P,Z),At(K,R,Z),At(K,k,Z),O=!0},p(K,[Z]){K[3].required_reduction_pct>=0?G?G.p(K,Z):(G=ay(K),G.c(),G.m(s.parentNode,s)):G&&(G.d(1),G=null),(!O||Z&1)&&ai(d,K[0]);const $={};Z&4&&($.yDomain=[0,K[2]]),Z&2&&($.data=K[1]),Z&32960&&($.$$scope={dirty:Z,ctx:K}),x.$set($)},i(K){O||(Mt(x.$$.fragment,K),O=!0)},o(K){Gt(x.$$.fragment,K),O=!1},d(K){K&&at(t),K&&at(r),G&&G.d(K),K&&at(s),K&&at(l),K&&at(c),K&&at(h),K&&at(p),K&&at(E),gr(x),K&&at(Q),K&&at(P),K&&at(R),K&&at(k)}}}const ug="year",WE="total_jail_pretrial";function XE(e,t,r){let{parishname:s}=t,l=[],c,h=[],a=[],d,_,E=Pa("#app").node().getBoundingClientRect().width;E>400?d=200:d=0,Wa(async()=>{const R=await dl("https://vera-louisiana-data.s3.amazonaws.com/curated_data/clearinghouse/pretrial_trends.csv");R.forEach(ee=>{ee.total_jail_pretrial=+ee.total_jail_pretrial}),r(1,l=R.filter(ee=>ee.parish==s+" Parish")),r(2,c=Xf(l,ee=>ee.total_jail_pretrial));const k=await dl("https://vera-louisiana-data.s3.amazonaws.com/curated_data/clearinghouse/pretrial_infographic.csv"),G=(await dl("https://vera-louisiana-data.s3.amazonaws.com/curated_data/clearinghouse/pretrial_date.csv")).filter(ee=>ee.parish==s+" Parish")[0].pretrial_date;let Z=Xg("%m/%d/%y")(G);const $=Rp("%B %d, %Y");r(5,_=$(Z)),h=k.filter(ee=>ee.parish==s+" Parish");let Ae=200*200*h[0].required_reduction_pct,ge=Math.sqrt(Ae),he=vu().domain([0,h[0].total_jail_pretrial]).range([0,200]);h.forEach(ee=>{ee.total_jail_pretrial=+ee.total_jail_pretrial,ee.required_reduction_pct=+ee.required_reduction_pct,ee.required_reduction=+ee.required_reduction,ee.parishPretrialSquareSide=he(ee.total_jail_pretrial),ee.parishReductionSquareSide=ge,ee.svgSizeW=420,ee.svgSizeH=E>400?220:260,ee.parishPretrialLine=(he(ee.total_jail_pretrial)-he(ee.total_jail_pretrial)*ee.required_reduction_pct)/2,ee.parishPretrialLine2=(he(ee.total_jail_pretrial)-he(ee.total_jail_pretrial)*ee.required_reduction_pct)/2-4,ee.reductionLine=he(ee.total_jail_pretrial)*ee.required_reduction_pct/2+(he(ee.total_jail_pretrial)-he(ee.total_jail_pretrial)*ee.required_reduction_pct),ee.reductionLine2=he(ee.total_jail_pretrial)*ee.required_reduction_pct/2+(he(ee.total_jail_pretrial)-he(ee.total_jail_pretrial)*ee.required_reduction_pct)-4}),r(3,a=h[0])}),l.forEach(R=>{R[ug]=+R[ug]});let w,x=!1;const Q=R=>r(6,w=r(7,x=R)),P=()=>r(7,x=!0);return e.$$set=R=>{"parishname"in R&&r(0,s=R.parishname)},[s,l,c,a,d,_,w,x,Q,P]}class Ay extends ni{constructor(t){super(),ri(this,t,XE,qE,ei,{parishname:0})}}function ZE(e){let t,r,s,l,c,h,a,d,_,p,E,w;return{c(){t=Lt("h4"),r=Pr("Annual "),s=Pr(e[0]),l=Pr(" Parish government payroll, by function ("),c=Pr(e[3]),h=Pr(")"),a=$t(),d=Lt("div"),_=$t(),p=Lt("div"),E=$t(),w=Lt("div"),w.innerHTML=`<div class="legend-item criminallegal svelte-1qt8esd"><div class="marker svelte-1qt8esd"></div> 
    <div class="name">Criminal Legal Spending</div></div> 
  <div class="legend-item other svelte-1qt8esd"><div class="marker svelte-1qt8esd"></div> 
    <div class="name">All Other Spending</div></div>`,ue(d,"class","feature svelte-1qt8esd"),ue(d,"id","chart"),ue(p,"class","tooltip svelte-1qt8esd"),ue(w,"class","legend svelte-1qt8esd")},m(x,Q){At(x,t,Q),it(t,r),it(t,s),it(t,l),it(t,c),it(t,h),At(x,a,Q),At(x,d,Q),e[4](d),At(x,_,Q),At(x,p,Q),e[5](p),At(x,E,Q),At(x,w,Q)},p(x,[Q]){Q&1&&ai(s,x[0]),Q&8&&ai(c,x[3])},i:bn,o:bn,d(x){x&&at(t),x&&at(a),x&&at(d),e[4](null),x&&at(_),x&&at(p),e[5](null),x&&at(E),x&&at(w)}}}function JE(e){var t=e.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")}function YE(e,t,r){let{parishname:s}=t,c=Pa(".tabs").node().getBoundingClientRect().width,h,a=280;c<400?h=c-20:h=c-80;let d=[],_=[],p=[],E=[],w;V5().parentId(function(k){return k.id.substring(0,k.id.lastIndexOf("."))}),H0().size([h,a]).padding(1).round(!0);let x=Pa("body").append("div").attr("class","tooltip"),Q;Wa(async()=>{d=(await dl("https://vera-louisiana-data.s3.amazonaws.com/curated_data/clearinghouse/la_state_and_local_gov_employment_payroll_parish.csv")).filter(Ue=>Ue.parish==s&&Ue.government_function!=="budget"),r(3,Q=d[0].year),p=d.filter(Ue=>Ue.government_function=="budget.criminal.corrections"||Ue.government_function=="budget.criminal.judicial_and_legal"||Ue.government_function=="budget.criminal.police"),E=d.filter(Ue=>Ue.government_function!=="budget.criminal.corrections"&&Ue.government_function!=="budget.criminal.judicial_and_legal"&&Ue.government_function!=="budget.criminal.police"&&Ue.government_function!=="budget.criminal.police.police_protection_other"&&Ue.government_function!=="budget.criminal.police.police_protection_persons_with_power_of_arrest"&&Ue.government_function!=="budget.criminal"&&Ue.government_function!=="budget"),_=(await dl("https://vera-louisiana-data.s3.amazonaws.com/curated_data/clearinghouse/la_state_and_local_gov_employment_payroll_municipality.csv")).filter(Ue=>Ue.parish==s&&Ue.government_function!=="budget");let G=u2(_,Ue=>Ue.name_of_government),K=[],Z=[];for(let Ue=0;Ue<G.length;Ue++)K.push(G[Ue][0]),Z.push(G[Ue][1]);const $=["budget.air_transportation","budget.all_other_and_unallocable","budget.criminal.corrections","budget.criminal.judicial_and_legal","budget.criminal.police","budget.education_elementary_and_secondary_other","budget.electric_power","budget.financial_administration","budget.fire_protection_firefighters","budget.fire_protection_other","budget.gas_supply","budget.health","budget.highways","budget.hospitals","budget.housing_and_community_development","budget.libraries","budget.natural_resources","budget.other_government_administration","budget.parks_and_recreation","budget.public_welfare","budget.sea_and_inland_port_facilities","budget.sewerage","budget.solid_waste_management","budget.transit","budget.water_supply"],fe=["Air Transportation","All Other & Unallocable","Corrections","Judicial and Legal","Police","Education","Electric Power","Financial Administration","Firefighters","Fire Protection Other","Gas Supply","Health","Highways","Hospitals","Housing & Community Development","Libraries","Natural Resources","Other Gov't Administration","Parks & Recreation","Public Welfare","Sea & Inland Port Facilities","Sewerage","Solid Waste Management","Transit","Water Supply"],Ae=p.map(Ue=>({name:fe[$.indexOf(Ue.government_function)],value:+Ue.total_payroll_percent_of_total,payroll:+Ue.total_payroll,employees:+Ue.full_time_employees})),ge=E.map(Ue=>({name:fe[$.indexOf(Ue.government_function)],value:+Ue.total_payroll_percent_of_total,payroll:+Ue.total_payroll,employees:+Ue.full_time_employees}));for(let Ue=0;Ue<Z.length;Ue++)Z[Ue].map(rt=>({name:fe[$.indexOf(rt.government_function)],value:+rt.total_payroll_percent_of_total,payroll:+rt.total_payroll,employees:+rt.full_time_employees}));var he=a=100,ee=vu().domain([0,he]).range([0,he]),ne=vu().domain([0,a]).range([0,a]);Sp().range(["#EF4136","#DA392F","#b6231a"]),Sp().range(["#2E1D97","#97DFD1","royalblue","#0E002C","#0A0319","navy","slateblue","#146571","#4625ae","#361694","#3d83da","#0553b3","#546a86","#6b91c0","#2d4d75"].map(function(Ue){return Ue=_p(Ue),Ue}));var xe=H0().size([he,a]).paddingInner(0).round(!1),ve={name:"Budget",children:[{name:"Criminal Legal Spending",children:Ae},{name:"Other",children:ge}]},ze=Kg(ve).sum(function(Ue){return Ue.value?Ue.value:0}).sort(function(Ue,rt){return rt.height-Ue.height||rt.value-Ue.value});xe(ze);var Le=Pa("#chart").append("div").attr("id","chartle"),Ke=Le.selectAll(".node").data(ze.descendants()).enter().append("div").attr("class",function(Ue){return"node level-"+Ue.depth}).attr("title",function(Ue){return Ue.data.name?Ue.data.name:"null"});Ke.style("left",function(Ue){return ee(Ue.x0)+"%"}).style("top",function(Ue){return ne(Ue.y0)+"%"}).style("width",function(Ue){return ee(Ue.x1)-ee(Ue.x0)+"%"}).style("height",function(Ue){return ne(Ue.y1)-ne(Ue.y0)+"%"}).style("background-color",function(Ue){for(;Ue.depth>2;)Ue=Ue.parent;return Ue.data.name=="Corrections"||Ue.data.name=="Police"||Ue.data.name=="Judicial and Legal"?"#ef4136":"#0E002C"}).on("mouseover",function(Ue,rt){var je=rt.data.name+"<br/>$"+JE(rt.data.payroll)+" ("+rt.data.value.toFixed(1)+"%)";Pa(x).html(je).style("visibility","visible")}).on("mousemove",function(Ue,rt){Pa(x).style("top",Ue.pageY+"px").style("left",Ue.pageX+"px")}).on("mouseout",function(Ue,rt){bv("rect").attr("stroke-width",0),Pa(x).style("visibility","hidden")}),Ke.append("p").text(function(Ue){return Ue.data.name?Ue.data.name:"---"}).attr("class",function(Ue){let rt=Pa(this).node(),je=rt.getBoundingClientRect().width,St=rt.getBoundingClientRect().height,te=rt.parentNode,Fe=te.getBoundingClientRect().width,Qe=te.getBoundingClientRect().height;return je>Fe||St+14>Qe?"label overflow":"label inbounds"})});function P(k){qa[k?"unshift":"push"](()=>{w=k,r(1,w)})}function R(k){qa[k?"unshift":"push"](()=>{x=k,r(2,x)})}return e.$$set=k=>{"parishname"in k&&r(0,s=k.parishname)},[s,w,x,Q,P,R]}class $E extends ni{constructor(t){super(),ri(this,t,YE,ZE,ei,{parishname:0})}}function eF(e){let t,r,s,l,c,h,a;return l=new $E({props:{parishname:e[0]}}),{c(){t=Lt("p"),t.innerHTML=`A large proportion of parish and municipal budgets support the criminal legal
  system. But incarceration does not guarantee safety—if it did, Louisiana would
  be one of the safest places in the world. Every dollar spent on policing and
  incarceration is money that could instead go towards cost-efficient systems
  that are <a href="https://www.brookings.edu/essay/a-new-community-safety-blueprint-how-the-federal-government-can-address-violence-and-harm-through-a-public-health-approach/" target="_blank">proven to produce safety and keep people out of jails and prisons</a>, like mental health care, education, vocational programs, and housing.`,r=$t(),s=Lt("div"),yr(l.$$.fragment),c=$t(),h=Lt("div"),h.innerHTML=`<p><span class="rec svelte-1o87yhw">Recommendation</span>: Enact meaningful reforms that will
    allow for jail decarceration, and then close jails and repurpose carceral
    facilities for non-jail, non-detention purposes. Reducing corrections
    spending and ending mass incarceration in Louisiana will require lowering
    jail capacity. This means working towards permanently closing jails.</p>`,ue(t,"class","break-avoid"),ue(s,"id","treemap"),ue(s,"class","svelte-1o87yhw"),ue(h,"id","recs"),ue(h,"class","svelte-1o87yhw")},m(d,_){At(d,t,_),At(d,r,_),At(d,s,_),mr(l,s,null),At(d,c,_),At(d,h,_),a=!0},p(d,[_]){const p={};_&1&&(p.parishname=d[0]),l.$set(p)},i(d){a||(Mt(l.$$.fragment,d),a=!0)},o(d){Gt(l.$$.fragment,d),a=!1},d(d){d&&at(t),d&&at(r),d&&at(s),gr(l),d&&at(c),d&&at(h)}}}function tF(e,t,r){let{parishname:s}=t;return Wa(async()=>{}),e.$$set=l=>{"parishname"in l&&r(0,s=l.parishname)},[s]}class ly extends ni{constructor(t){super(),ri(this,t,tF,eF,ei,{parishname:0})}}function rF(e){let t,r,s;return{c(){t=Lt("div"),r=$t(),s=Lt("div"),ue(t,"id","vis"),ue(s,"class","tooltip svelte-1x80qnr")},m(l,c){At(l,t,c),e[3](t),At(l,r,c),At(l,s,c),e[4](s)},p:bn,i:bn,o:bn,d(l){l&&at(t),e[3](null),l&&at(r),l&&at(s),e[4](null)}}}function nF(e,t,r){let{parishname:s}=t,l,c=[],h=Pa("body").append("div").attr("class","tooltip");Wa(async()=>{const _=await dl("https://vera-louisiana-data.s3.amazonaws.com/curated_data/clearinghouse/arrests_long.csv");_.forEach(G=>{if(G.the_value=+G.value,G.parameter=G.department.replace(/[^A-Z0-9]+/gi,""),G.metric=="black_pt2_arrests_pct")return G.segment="Pt 2 Arrests, Black (%)";if(G.metric=="black_pop_pct")return G.segment="Black Population (%)"});let p=_.filter(G=>G.parish==s+" Parish");var E=240,w=220,x={top:15,right:30,bottom:40,left:35},Q=Yu().range([0,E]).padding(.1),P=vu().range([w,30]),R=B2().scale(Q),k=Array.from(new Set(p.map(function(G){return G.segment})));Q.domain(k),c=Array.from(A2(p,G=>G.parameter),([G,K])=>({key:G,value:K}));var O=Pa("#vis").selectAll("svg").data(c).enter().append("svg").attr("id","dept").attr("height",w+x.bottom).attr("class",function(G){return G.value[0].parameter});O.append("g").attr("transform","translate(0,"+16+")").append("text").text(G=>G.value[0].department),c.forEach(function(G,K){P.domain([0,Xf(G.value,function($){return $.the_value})]),Pa("svg."+G.value[0].parameter).selectAll(".bar").data(G.value).enter().append("rect").attr("class","bar").attr("x",function($){return Q($.segment)}).attr("width",Q.bandwidth()).attr("y",function($){return P($.the_value)}).attr("height",function($){return w-P($.the_value)}).attr("stroke",$=>$.metric=="black_pt2_arrests_pct"?"none":"#97dfd1").attr("fill",$=>$.metric=="black_pt2_arrests_pct"?"#0e002c":"#97dfd1").on("mouseover",function($,fe){var Ae=fe.the_value.toFixed(0)+"%";Pa(h).html(Ae).style("visibility","visible")}).on("mousemove",function($,fe){Pa(h).style("top",$.pageY+"px").style("left",$.pageX+"px")}).on("mouseout",function($,fe){bv("rect").attr("stroke-width",0),Pa(h).style("visibility","hidden")}),Pa("svg."+G.value[0].parameter).append("g").attr("transform","translate(0,"+w+")").call(R)})});function a(_){qa[_?"unshift":"push"](()=>{l=_,r(0,l)})}function d(_){qa[_?"unshift":"push"](()=>{h=_,r(1,h)})}return e.$$set=_=>{"parishname"in _&&r(2,s=_.parishname)},[l,h,s,a,d]}class iF extends ni{constructor(t){super(),ri(this,t,nF,rF,ei,{parishname:2})}}function cy(e){const t={...e[8].props};e[9]=t}function sF(e){let t,r,s,l,c,h;return t=new ah({props:{gridlines:!0,baseline:!0,snapTicks:!0,ticks:"4"}}),s=new oh({props:{gridlines:!1}}),c=new Op({props:{fill:"#da392f"}}),c.$on("mousemove",e[5]),c.$on("mouseout",e[6]),{c(){yr(t.$$.fragment),r=$t(),yr(s.$$.fragment),l=$t(),yr(c.$$.fragment)},m(a,d){mr(t,a,d),At(a,r,d),mr(s,a,d),At(a,l,d),mr(c,a,d),h=!0},p:bn,i(a){h||(Mt(t.$$.fragment,a),Mt(s.$$.fragment,a),Mt(c.$$.fragment,a),h=!0)},o(a){Gt(t.$$.fragment,a),Gt(s.$$.fragment,a),Gt(c.$$.fragment,a),h=!1},d(a){gr(t,a),a&&at(r),gr(s,a),a&&at(l),gr(c,a)}}}function uy(e){let t,r;return t=new ud({props:{evt:e[3],$$slots:{default:[aF,({detail:s})=>({8:s}),({detail:s})=>s?256:0]},$$scope:{ctx:e}}}),{c(){yr(t.$$.fragment)},m(s,l){mr(t,s,l),r=!0},p(s,l){const c={};l&8&&(c.evt=s[3]),l&1280&&(c.$$scope={dirty:l,ctx:s}),t.$set(c)},i(s){r||(Mt(t.$$.fragment,s),r=!0)},o(s){Gt(t.$$.fragment,s),r=!1},d(s){gr(t,s)}}}function aF(e){cy(e);let t,r=e[9].department+"",s,l,c=(+e[9].pt2_arrests_pct).toFixed(0)+"",h,a;return{c(){t=Lt("div"),s=Pr(r),l=Pr(": "),h=Pr(c),a=Pr("% Part 2 Arrests"),ue(t,"class","row")},m(d,_){At(d,t,_),it(t,s),it(t,l),it(t,h),it(t,a)},p(d,_){cy(d),_&256&&r!==(r=d[9].department+"")&&ai(s,r),_&256&&c!==(c=(+d[9].pt2_arrests_pct).toFixed(0)+"")&&ai(h,c)},d(d){d&&at(t)}}}function oF(e){let t,r,s=e[4]!==!0&&uy(e);return{c(){s&&s.c(),t=yo()},m(l,c){s&&s.m(l,c),At(l,t,c),r=!0},p(l,c){l[4]!==!0?s?(s.p(l,c),c&16&&Mt(s,1)):(s=uy(l),s.c(),Mt(s,1),s.m(t.parentNode,t)):s&&(Xa(),Gt(s,1,1,()=>{s=null}),Za())},i(l){r||(Mt(s),r=!0)},o(l){Gt(s),r=!1},d(l){s&&s.d(l),l&&at(t)}}}function AF(e){let t,r,s,l;return t=new sh({props:{$$slots:{default:[sF]},$$scope:{ctx:e}}}),s=new ih({props:{pointerEvents:!1,$$slots:{default:[oF]},$$scope:{ctx:e}}}),{c(){yr(t.$$.fragment),r=$t(),yr(s.$$.fragment)},m(c,h){mr(t,c,h),At(c,r,h),mr(s,c,h),l=!0},p(c,h){const a={};h&1048&&(a.$$scope={dirty:h,ctx:c}),t.$set(a);const d={};h&1048&&(d.$$scope={dirty:h,ctx:c}),s.$set(d)},i(c){l||(Mt(t.$$.fragment,c),Mt(s.$$.fragment,c),l=!0)},o(c){Gt(t.$$.fragment,c),Gt(s.$$.fragment,c),l=!1},d(c){gr(t,c),c&&at(r),gr(s,c)}}}function lF(e){let t,r,s,l,c,h,a,d,_,p,E,w,x,Q,P,R,k,O,G,K,Z,$,fe;return w=new th({props:{padding:{top:0,bottom:40,left:230},x:hg,y:cF,yScale:Yu().paddingInner([.15]),xDomain:[0,null],data:e[1],$$slots:{default:[AF]},$$scope:{ctx:e}}}),O=new iF({props:{parishname:e[0]}}),{c(){t=Lt("p"),t.textContent=`Entry into the criminal legal system begins with an arrest. The FBI classifies
  arrests as either “Part I” or “Part II.” Part I offenses include property
  crimes such as larceny (usually shoplifting or theft from a motor vehicle),
  burglary, and arson, as well as violent crimes such as aggravated assault,
  criminal homicide, rape, and robbery. Part II offenses include less serious
  offenses such as drug abuse violations, disorderly conduct, and gambling.`,r=$t(),s=Lt("p"),l=Pr(`In Louisiana, 75 percent of arrests are Part II arrests, as are the majority
  in `),c=Pr(e[0]),h=Pr(` Parish. Any arrest can lead to cascading consequences: high bail
  leads to long pretrial detention, which leads to loss of employment, child custody,
  housing, and possessions. These consequences exacerbate trauma and harm mental
  health. It is, therefore, essential to consider whether these arrests are improving
  public safety and if there are better alternatives to the police in nonviolent
  situations.`),a=$t(),d=Lt("div"),_=Lt("h4"),_.textContent="Part 2 arrests, proportion of total arrests (2018)",p=$t(),E=Lt("div"),yr(w.$$.fragment),x=$t(),Q=Lt("div"),P=Lt("h4"),P.textContent="Part 2 Arrests, Racial Disparity",R=$t(),k=Lt("div"),yr(O.$$.fragment),G=$t(),K=Lt("p"),K.textContent="Source: Arrest Trends (2018) and U.S. Census American Community Survey (2020)",Z=$t(),$=Lt("div"),$.innerHTML=`<p><span class="rec svelte-b2qh2f">Recommendation</span>: Advance civilian responses to
    <a href="https://www.vera.org/behavioral-health-crisis-alternatives" target="_blank">911 calls that don’t require law enforcement</a>. Removing the police from encounters that don’t require them—like
    mental health crises,
    <a href="https://www.vera.org/ending-mass-incarceration/criminalization-racial-disparities/public-safety/redefining-public-safety-initiative/stop-the-stops" target="_blank">low-level traffic violations</a>, and noise complaints—is
    <a href="https://www.brookings.edu/essay/a-new-community-safety-blueprint-how-the-federal-government-can-address-violence-and-harm-through-a-public-health-approach/" target="_blank">proven to improve safety</a>, while also reducing arrests (and thus jail admissions).</p>`,ue(t,"class","break-avoid"),ue(E,"class","chart-container svelte-b2qh2f"),ue(d,"class","barchart svelte-b2qh2f"),Qn(d,"height",e[2]*60+"px"),ue(k,"id","grid"),ue(k,"class","svelte-b2qh2f"),ue(Q,"id","bar"),ue(Q,"class","svelte-b2qh2f"),ue(K,"class","note"),ue($,"id","recs")},m(Ae,ge){At(Ae,t,ge),At(Ae,r,ge),At(Ae,s,ge),it(s,l),it(s,c),it(s,h),At(Ae,a,ge),At(Ae,d,ge),it(d,_),it(d,p),it(d,E),mr(w,E,null),At(Ae,x,ge),At(Ae,Q,ge),it(Q,P),it(Q,R),it(Q,k),mr(O,k,null),At(Ae,G,ge),At(Ae,K,ge),At(Ae,Z,ge),At(Ae,$,ge),fe=!0},p(Ae,[ge]){(!fe||ge&1)&&ai(c,Ae[0]);const he={};ge&2&&(he.data=Ae[1]),ge&1048&&(he.$$scope={dirty:ge,ctx:Ae}),w.$set(he),(!fe||ge&4)&&Qn(d,"height",Ae[2]*60+"px");const ee={};ge&1&&(ee.parishname=Ae[0]),O.$set(ee)},i(Ae){fe||(Mt(w.$$.fragment,Ae),Mt(O.$$.fragment,Ae),fe=!0)},o(Ae){Gt(w.$$.fragment,Ae),Gt(O.$$.fragment,Ae),fe=!1},d(Ae){Ae&&at(t),Ae&&at(r),Ae&&at(s),Ae&&at(a),Ae&&at(d),gr(w),Ae&&at(x),Ae&&at(Q),gr(O),Ae&&at(G),Ae&&at(K),Ae&&at(Z),Ae&&at($)}}}const hg="pt2_arrests_pct",cF="department";function uF(e,t,r){let{parishname:s}=t,l=[],c;Wa(async()=>{const p=await dl("https://vera-louisiana-data.s3.amazonaws.com/curated_data/clearinghouse/arrests.csv");p.forEach(E=>{E.pt2_arrests_pct=+E.pt2_arrests_pct,E.black_pop_pct=+E.black_pop_pct,E.black_pt2_arrests_pct=+E.black_pt2_arrests_pct}),r(1,l=p.filter(E=>E.parish==s+" Parish")),l.sort((E,w)=>w.pt2_arrests_pct-E.pt2_arrests_pct),r(2,c=l.length)}),l.forEach(p=>{p[hg]=+p[hg]}),Pa("body").append("div").attr("class","tooltip");let h,a=!1;const d=p=>r(3,h=r(4,a=p)),_=()=>r(4,a=!0);return e.$$set=p=>{"parishname"in p&&r(0,s=p.parishname)},[s,l,c,h,a,d,_]}class hF extends ni{constructor(t){super(),ri(this,t,uF,lF,ei,{parishname:0})}}function hy(e,t,r){const s=e.slice();return s[4]=t[r],s}function fy(e,t,r){const s=e.slice();return s[4]=t[r],s}function dy(e){let t,r,s=e[4].label+"",l,c,h,a,d;return{c(){t=Lt("li"),r=Lt("span"),l=Pr(s),c=$t(),ue(r,"class","tabitem svelte-1mfb3zm"),ue(t,"class",h=i0(e[0]===e[4].value?"active":"")+" svelte-1mfb3zm")},m(_,p){At(_,t,p),it(t,r),it(r,l),it(t,c),a||(d=es(r,"click",function(){id(e[3](e[4].value))&&e[3](e[4].value).apply(this,arguments)}),a=!0)},p(_,p){e=_,p&2&&s!==(s=e[4].label+"")&&ai(l,s),p&3&&h!==(h=i0(e[0]===e[4].value?"active":"")+" svelte-1mfb3zm")&&ue(t,"class",h)},d(_){_&&at(t),a=!1,d()}}}function py(e){let t,r,s,l;var c=e[4].component;function h(a){return{props:{parishname:a[2]}}}return c&&(r=Kh(c,h(e))),{c(){t=Lt("div"),r&&yr(r.$$.fragment),s=$t(),ue(t,"class","box svelte-1mfb3zm")},m(a,d){At(a,t,d),r&&mr(r,t,null),it(t,s),l=!0},p(a,d){const _={};if(d&4&&(_.parishname=a[2]),c!==(c=a[4].component)){if(r){Xa();const p=r;Gt(p.$$.fragment,1,0,()=>{gr(p,1)}),Za()}c?(r=Kh(c,h(a)),yr(r.$$.fragment),Mt(r.$$.fragment,1),mr(r,t,s)):r=null}else c&&r.$set(_)},i(a){l||(r&&Mt(r.$$.fragment,a),l=!0)},o(a){r&&Gt(r.$$.fragment,a),l=!1},d(a){a&&at(t),r&&gr(r)}}}function my(e){let t,r,s=e[0]==e[4].value&&py(e);return{c(){s&&s.c(),t=yo()},m(l,c){s&&s.m(l,c),At(l,t,c),r=!0},p(l,c){l[0]==l[4].value?s?(s.p(l,c),c&3&&Mt(s,1)):(s=py(l),s.c(),Mt(s,1),s.m(t.parentNode,t)):s&&(Xa(),Gt(s,1,1,()=>{s=null}),Za())},i(l){r||(Mt(s),r=!0)},o(l){Gt(s),r=!1},d(l){s&&s.d(l),l&&at(t)}}}function fF(e){let t,r,s,l,c=e[1],h=[];for(let p=0;p<c.length;p+=1)h[p]=dy(fy(e,c,p));let a=e[1],d=[];for(let p=0;p<a.length;p+=1)d[p]=my(hy(e,a,p));const _=p=>Gt(d[p],1,1,()=>{d[p]=null});return{c(){t=Lt("ul");for(let p=0;p<h.length;p+=1)h[p].c();r=$t();for(let p=0;p<d.length;p+=1)d[p].c();s=yo(),ue(t,"class","svelte-1mfb3zm")},m(p,E){At(p,t,E);for(let w=0;w<h.length;w+=1)h[w].m(t,null);At(p,r,E);for(let w=0;w<d.length;w+=1)d[w].m(p,E);At(p,s,E),l=!0},p(p,[E]){if(E&11){c=p[1];let w;for(w=0;w<c.length;w+=1){const x=fy(p,c,w);h[w]?h[w].p(x,E):(h[w]=dy(x),h[w].c(),h[w].m(t,null))}for(;w<h.length;w+=1)h[w].d(1);h.length=c.length}if(E&7){a=p[1];let w;for(w=0;w<a.length;w+=1){const x=hy(p,a,w);d[w]?(d[w].p(x,E),Mt(d[w],1)):(d[w]=my(x),d[w].c(),Mt(d[w],1),d[w].m(s.parentNode,s))}for(Xa(),w=a.length;w<d.length;w+=1)_(w);Za()}},i(p){if(!l){for(let E=0;E<a.length;E+=1)Mt(d[E]);l=!0}},o(p){d=d.filter(Boolean);for(let E=0;E<d.length;E+=1)Gt(d[E]);l=!1},d(p){p&&at(t),Hl(h,p),p&&at(r),Hl(d,p),p&&at(s)}}}function dF(e,t,r){let{items:s=[]}=t,{activeTabValue:l=1}=t,{parishname:c}=t;const h=a=>()=>r(0,l=a);return e.$$set=a=>{"items"in a&&r(1,s=a.items),"activeTabValue"in a&&r(0,l=a.activeTabValue),"parishname"in a&&r(2,c=a.parishname)},[l,s,c,h]}class pF extends ni{constructor(t){super(),ri(this,t,dF,fF,ei,{items:1,activeTabValue:0,parishname:2})}}function gy(e,t,r){const s=e.slice();return s[4]=t[r],s}function yy(e){let t,r,s=e[4].label+"",l,c,h,a,d,_,p;var E=e[4].component;function w(x){return{props:{parishname:x[1]}}}return E&&(h=Kh(E,w(e))),{c(){t=Lt("li"),r=Lt("span"),l=Pr(s),c=$t(),h&&yr(h.$$.fragment),a=yo(),ue(r,"class","tabitem svelte-1kn78ub"),ue(t,"class","item-tab svelte-1kn78ub")},m(x,Q){At(x,t,Q),it(t,r),it(r,l),At(x,c,Q),h&&mr(h,x,Q),At(x,a,Q),d=!0,_||(p=es(r,"click",function(){id(e[2](e[4].value))&&e[2](e[4].value).apply(this,arguments)}),_=!0)},p(x,Q){e=x,(!d||Q&1)&&s!==(s=e[4].label+"")&&ai(l,s);const P={};if(Q&2&&(P.parishname=e[1]),E!==(E=e[4].component)){if(h){Xa();const R=h;Gt(R.$$.fragment,1,0,()=>{gr(R,1)}),Za()}E?(h=Kh(E,w(e)),yr(h.$$.fragment),Mt(h.$$.fragment,1),mr(h,a.parentNode,a)):h=null}else E&&h.$set(P)},i(x){d||(h&&Mt(h.$$.fragment,x),d=!0)},o(x){h&&Gt(h.$$.fragment,x),d=!1},d(x){x&&at(t),x&&at(c),x&&at(a),h&&gr(h,x),_=!1,p()}}}function mF(e){let t,r,s=e[0],l=[];for(let h=0;h<s.length;h+=1)l[h]=yy(gy(e,s,h));const c=h=>Gt(l[h],1,1,()=>{l[h]=null});return{c(){for(let h=0;h<l.length;h+=1)l[h].c();t=yo()},m(h,a){for(let d=0;d<l.length;d+=1)l[d].m(h,a);At(h,t,a),r=!0},p(h,[a]){if(a&7){s=h[0];let d;for(d=0;d<s.length;d+=1){const _=gy(h,s,d);l[d]?(l[d].p(_,a),Mt(l[d],1)):(l[d]=yy(_),l[d].c(),Mt(l[d],1),l[d].m(t.parentNode,t))}for(Xa(),d=s.length;d<l.length;d+=1)c(d);Za()}},i(h){if(!r){for(let a=0;a<s.length;a+=1)Mt(l[a]);r=!0}},o(h){l=l.filter(Boolean);for(let a=0;a<l.length;a+=1)Gt(l[a]);r=!1},d(h){Hl(l,h),h&&at(t)}}}function gF(e,t,r){let{items:s=[]}=t,{activeTabValue:l=1}=t,{parishname:c}=t;const h=a=>()=>r(3,l=a);return e.$$set=a=>{"items"in a&&r(0,s=a.items),"activeTabValue"in a&&r(3,l=a.activeTabValue),"parishname"in a&&r(1,c=a.parishname)},[s,c,h,l]}class yF extends ni{constructor(t){super(),ri(this,t,gF,mF,ei,{items:0,activeTabValue:3,parishname:1})}}var fg={},vF={get exports(){return fg},set exports(e){fg=e}};const _F="modulepreload",wF=function(e){return"/"+e},vy={},dg=function(t,r,s){if(!r||r.length===0)return t();const l=document.getElementsByTagName("link");return Promise.all(r.map(c=>{if(c=wF(c),c in vy)return;vy[c]=!0;const h=c.endsWith(".css"),a=h?'[rel="stylesheet"]':"";if(!!s)for(let p=l.length-1;p>=0;p--){const E=l[p];if(E.href===c&&(!h||E.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${a}`))return;const _=document.createElement("link");if(_.rel=h?"stylesheet":_F,h||(_.as="script",_.crossOrigin=""),_.href=c,document.head.appendChild(_),h)return new Promise((p,E)=>{_.addEventListener("load",p),_.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${c}`)))})})).then(()=>t())};function qi(e){return qi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qi(e)}var Jo=Uint8Array,Yo=Uint16Array,td=Uint32Array,zp=new Jo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Hp=new Jo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),pg=new Jo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),r_=function(e,t){for(var r=new Yo(31),s=0;s<31;++s)r[s]=t+=1<<e[s-1];for(var l=new td(r[30]),s=1;s<30;++s)for(var c=r[s];c<r[s+1];++c)l[c]=c-r[s]<<5|s;return[r,l]},n_=r_(zp,2),i_=n_[0],mg=n_[1];i_[28]=258,mg[258]=28;var s_=r_(Hp,0),bF=s_[0],_y=s_[1],gg=new Yo(32768);for(var ws=0;ws<32768;++ws){var pu=(ws&43690)>>>1|(ws&21845)<<1;pu=(pu&52428)>>>2|(pu&13107)<<2,pu=(pu&61680)>>>4|(pu&3855)<<4,gg[ws]=((pu&65280)>>>8|(pu&255)<<8)>>>1}var mc=function(e,t,r){for(var s=e.length,l=0,c=new Yo(t);l<s;++l)++c[e[l]-1];var h=new Yo(t);for(l=0;l<t;++l)h[l]=h[l-1]+c[l-1]<<1;var a;if(r){a=new Yo(1<<t);var d=15-t;for(l=0;l<s;++l)if(e[l])for(var _=l<<4|e[l],p=t-e[l],E=h[e[l]-1]++<<p,w=E|(1<<p)-1;E<=w;++E)a[gg[E]>>>d]=_}else for(a=new Yo(s),l=0;l<s;++l)a[l]=gg[h[e[l]-1]++]>>>15-e[l];return a},xu=new Jo(288);for(var ws=0;ws<144;++ws)xu[ws]=8;for(var ws=144;ws<256;++ws)xu[ws]=9;for(var ws=256;ws<280;++ws)xu[ws]=7;for(var ws=280;ws<288;++ws)xu[ws]=8;var rd=new Jo(32);for(var ws=0;ws<32;++ws)rd[ws]=5;var xF=mc(xu,9,0),BF=mc(xu,9,1),CF=mc(rd,5,0),EF=mc(rd,5,1),km=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},Nl=function(e,t,r){var s=t/8>>0;return(e[s]|e[s+1]<<8)>>>(t&7)&r},Mm=function(e,t){var r=t/8>>0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>>(t&7)},Zg=function(e){return(e/8>>0)+(e&7&&1)},a_=function(e,t,r){(t==null||t<0)&&(t=0),(r==null||r>e.length)&&(r=e.length);var s=new(e instanceof Yo?Yo:e instanceof td?td:Jo)(r-t);return s.set(e.subarray(t,r)),s},FF=function(e,t,r){var s=e.length,l=!t||r,c=!r||r.i;r||(r={}),t||(t=new Jo(s*3));var h=function(st){var dt=t.length;if(st>dt){var Bt=new Jo(Math.max(dt*2,st));Bt.set(t),t=Bt}},a=r.f||0,d=r.p||0,_=r.b||0,p=r.l,E=r.d,w=r.m,x=r.n,Q=s*8;do{if(!p){r.f=a=Nl(e,d,1);var P=Nl(e,d+1,3);if(d+=3,P)if(P==1)p=BF,E=EF,w=9,x=5;else if(P==2){var G=Nl(e,d,31)+257,K=Nl(e,d+10,15)+4,Z=G+Nl(e,d+5,31)+1;d+=14;for(var $=new Jo(Z),fe=new Jo(19),Ae=0;Ae<K;++Ae)fe[pg[Ae]]=Nl(e,d+Ae*3,7);d+=K*3;var ge=km(fe),he=(1<<ge)-1;if(!c&&d+Z*(ge+7)>Q)break;for(var ee=mc(fe,ge,1),Ae=0;Ae<Z;){var ne=ee[Nl(e,d,he)];d+=ne&15;var R=ne>>>4;if(R<16)$[Ae++]=R;else{var xe=0,ve=0;for(R==16?(ve=3+Nl(e,d,3),d+=2,xe=$[Ae-1]):R==17?(ve=3+Nl(e,d,7),d+=3):R==18&&(ve=11+Nl(e,d,127),d+=7);ve--;)$[Ae++]=xe}}var ze=$.subarray(0,G),Le=$.subarray(G);w=km(ze),x=km(Le),p=mc(ze,w,1),E=mc(Le,x,1)}else throw"invalid block type";else{var R=Zg(d)+4,k=e[R-4]|e[R-3]<<8,O=R+k;if(O>s){if(c)throw"unexpected EOF";break}l&&h(_+k),t.set(e.subarray(R,O),_),r.b=_+=k,r.p=d=O*8;continue}if(d>Q)throw"unexpected EOF"}l&&h(_+131072);for(var Ke=(1<<w)-1,Ue=(1<<x)-1,rt=w+x+18;c||d+rt<Q;){var xe=p[Mm(e,d)&Ke],je=xe>>>4;if(d+=xe&15,d>Q)throw"unexpected EOF";if(!xe)throw"invalid length/literal";if(je<256)t[_++]=je;else if(je==256){p=null;break}else{var St=je-254;if(je>264){var Ae=je-257,te=zp[Ae];St=Nl(e,d,(1<<te)-1)+i_[Ae],d+=te}var Fe=E[Mm(e,d)&Ue],Qe=Fe>>>4;if(!Fe)throw"invalid distance";d+=Fe&15;var Le=bF[Qe];if(Qe>3){var te=Hp[Qe];Le+=Mm(e,d)&(1<<te)-1,d+=te}if(d>Q)throw"unexpected EOF";l&&h(_+131072);for(var Ve=_+St;_<Ve;_+=4)t[_]=t[_-Le],t[_+1]=t[_+1-Le],t[_+2]=t[_+2-Le],t[_+3]=t[_+3-Le];_=Ve}}r.l=p,r.p=d,r.b=_,p&&(a=1,r.m=w,r.d=E,r.n=x)}while(!a);return _==t.length?t:a_(t,0,_)},Nc=function(e,t,r){r<<=t&7;var s=t/8>>0;e[s]|=r,e[s+1]|=r>>>8},Mf=function(e,t,r){r<<=t&7;var s=t/8>>0;e[s]|=r,e[s+1]|=r>>>8,e[s+2]|=r>>>16},Dm=function(e,t){for(var r=[],s=0;s<e.length;++s)e[s]&&r.push({s,f:e[s]});var l=r.length,c=r.slice();if(!l)return[new Jo(0),0];if(l==1){var h=new Jo(r[0].s+1);return h[r[0].s]=1,[h,1]}r.sort(function(Z,$){return Z.f-$.f}),r.push({s:-1,f:25001});var a=r[0],d=r[1],_=0,p=1,E=2;for(r[0]={s:-1,f:a.f+d.f,l:a,r:d};p!=l-1;)a=r[r[_].f<r[E].f?_++:E++],d=r[_!=p&&r[_].f<r[E].f?_++:E++],r[p++]={s:-1,f:a.f+d.f,l:a,r:d};for(var w=c[0].s,s=1;s<l;++s)c[s].s>w&&(w=c[s].s);var x=new Yo(w+1),Q=yg(r[p-1],x,0);if(Q>t){var s=0,P=0,R=Q-t,k=1<<R;for(c.sort(function($,fe){return x[fe.s]-x[$.s]||$.f-fe.f});s<l;++s){var O=c[s].s;if(x[O]>t)P+=k-(1<<Q-x[O]),x[O]=t;else break}for(P>>>=R;P>0;){var G=c[s].s;x[G]<t?P-=1<<t-x[G]++-1:++s}for(;s>=0&&P;--s){var K=c[s].s;x[K]==t&&(--x[K],++P)}Q=t}return[new Jo(x),Q]},yg=function(e,t,r){return e.s==-1?Math.max(yg(e.l,t,r+1),yg(e.r,t,r+1)):t[e.s]=r},wy=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new Yo(++t),s=0,l=e[0],c=1,h=function(d){r[s++]=d},a=1;a<=t;++a)if(e[a]==l&&a!=t)++c;else{if(!l&&c>2){for(;c>138;c-=138)h(32754);c>2&&(h(c>10?c-11<<5|28690:c-3<<5|12305),c=0)}else if(c>3){for(h(l),--c;c>6;c-=6)h(8304);c>2&&(h(c-3<<5|8208),c=0)}for(;c--;)h(l);c=1,l=e[a]}return[r.subarray(0,s),t]},Df=function(e,t){for(var r=0,s=0;s<t.length;++s)r+=e[s]*t[s];return r},dp=function(e,t,r){var s=r.length,l=Zg(t+2);e[l]=s&255,e[l+1]=s>>>8,e[l+2]=e[l]^255,e[l+3]=e[l+1]^255;for(var c=0;c<s;++c)e[l+c+4]=r[c];return(l+4+s)*8},by=function(e,t,r,s,l,c,h,a,d,_,p){Nc(t,p++,r),++l[256];for(var E=Dm(l,15),w=E[0],x=E[1],Q=Dm(c,15),P=Q[0],R=Q[1],k=wy(w),O=k[0],G=k[1],K=wy(P),Z=K[0],$=K[1],fe=new Yo(19),Ae=0;Ae<O.length;++Ae)fe[O[Ae]&31]++;for(var Ae=0;Ae<Z.length;++Ae)fe[Z[Ae]&31]++;for(var ge=Dm(fe,7),he=ge[0],ee=ge[1],ne=19;ne>4&&!he[pg[ne-1]];--ne);var xe=_+5<<3,ve=Df(l,xu)+Df(c,rd)+h,ze=Df(l,w)+Df(c,P)+h+14+3*ne+Df(fe,he)+(2*fe[16]+3*fe[17]+7*fe[18]);if(xe<=ve&&xe<=ze)return dp(t,p,e.subarray(d,d+_));var Le,Ke,Ue,rt;if(Nc(t,p,1+(ze<ve)),p+=2,ze<ve){Le=mc(w,x,0),Ke=w,Ue=mc(P,R,0),rt=P;var je=mc(he,ee,0);Nc(t,p,G-257),Nc(t,p+5,$-1),Nc(t,p+10,ne-4),p+=14;for(var Ae=0;Ae<ne;++Ae)Nc(t,p+3*Ae,he[pg[Ae]]);p+=3*ne;for(var St=[O,Z],te=0;te<2;++te)for(var Fe=St[te],Ae=0;Ae<Fe.length;++Ae){var Qe=Fe[Ae]&31;Nc(t,p,je[Qe]),p+=he[Qe],Qe>15&&(Nc(t,p,Fe[Ae]>>>5&127),p+=Fe[Ae]>>>12)}}else Le=xF,Ke=xu,Ue=CF,rt=rd;for(var Ae=0;Ae<a;++Ae)if(s[Ae]>255){var Qe=s[Ae]>>>18&31;Mf(t,p,Le[Qe+257]),p+=Ke[Qe+257],Qe>7&&(Nc(t,p,s[Ae]>>>23&31),p+=zp[Qe]);var Ve=s[Ae]&31;Mf(t,p,Ue[Ve]),p+=rt[Ve],Ve>3&&(Mf(t,p,s[Ae]>>>5&8191),p+=Hp[Ve])}else Mf(t,p,Le[s[Ae]]),p+=Ke[s[Ae]];return Mf(t,p,Le[256]),p+Ke[256]},SF=new td([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),IF=new Jo(0),TF=function(e,t,r,s,l,c){var h=e.length,a=new Jo(s+h+5*(1+Math.floor(h/7e3))+l),d=a.subarray(s,a.length-l),_=0;if(!t||h<8)for(var p=0;p<=h;p+=65535){var E=p+65535;E<h?_=dp(d,_,e.subarray(p,E)):(d[p]=c,_=dp(d,_,e.subarray(p,h)))}else{for(var w=SF[t-1],x=w>>>13,Q=w&8191,P=(1<<r)-1,R=new Yo(32768),k=new Yo(P+1),O=Math.ceil(r/3),G=2*O,K=function(dr){return(e[dr]^e[dr+1]<<O^e[dr+2]<<G)&P},Z=new td(25e3),$=new Yo(288),fe=new Yo(32),Ae=0,ge=0,p=0,he=0,ee=0,ne=0;p<h;++p){var xe=K(p),ve=p&32767,ze=k[xe];if(R[ve]=ze,k[xe]=ve,ee<=p){var Le=h-p;if((Ae>7e3||he>24576)&&Le>423){_=by(e,d,0,Z,$,fe,ge,he,ne,p-ne,_),he=Ae=ge=0,ne=p;for(var Ke=0;Ke<286;++Ke)$[Ke]=0;for(var Ke=0;Ke<30;++Ke)fe[Ke]=0}var Ue=2,rt=0,je=Q,St=ve-ze&32767;if(Le>2&&xe==K(p-St))for(var te=Math.min(x,Le)-1,Fe=Math.min(32767,p),Qe=Math.min(258,Le);St<=Fe&&--je&&ve!=ze;){if(e[p+Ue]==e[p+Ue-St]){for(var Ve=0;Ve<Qe&&e[p+Ve]==e[p+Ve-St];++Ve);if(Ve>Ue){if(Ue=Ve,rt=St,Ve>te)break;for(var st=Math.min(St,Ve-2),dt=0,Ke=0;Ke<st;++Ke){var Bt=p-St+Ke+32768&32767,Ge=R[Bt],tt=Bt-Ge+32768&32767;tt>dt&&(dt=tt,ze=Bt)}}}ve=ze,ze=R[ve],St+=ve-ze+32768&32767}if(rt){Z[he++]=268435456|mg[Ue]<<18|_y[rt];var Qt=mg[Ue]&31,ht=_y[rt]&31;ge+=zp[Qt]+Hp[ht],++$[257+Qt],++fe[ht],ee=p+Ue,++Ae}else Z[he++]=e[p],++$[e[p]]}}_=by(e,d,c,Z,$,fe,ge,he,ne,p-ne,_),c||(_=dp(d,_,IF))}return a_(a,0,s+Zg(_)+l)},UF=function(){var e=1,t=0;return{p:function(r){for(var s=e,l=t,c=r.length,h=0;h!=c;){for(var a=Math.min(h+5552,c);h<a;++h)s+=r[h],l+=s;s%=65521,l%=65521}e=s,t=l},d:function(){return(e>>>8<<16|(t&255)<<8|t>>>8)+((e&255)<<23)*2}}},LF=function(e,t,r,s,l){return TF(e,t.level==null?6:t.level,t.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):12+t.mem,r,s,!l)},QF=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},PF=function(e,t){var r=t.level,s=r==0?0:r<6?1:r==9?3:2;e[0]=120,e[1]=s<<6|(s?32-2*s:1)},kF=function(e){if((e[0]&15)!=8||e[0]>>>4>7||(e[0]<<8|e[1])%31)throw"invalid zlib data";if(e[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function vg(e,t){t===void 0&&(t={});var r=UF();r.p(e);var s=LF(e,t,2,4);return PF(s,t),QF(s,s.length-4,r.d()),s}function MF(e,t){return FF((kF(e),e.subarray(2,-4)),t)}var zn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Nm(){zn.console&&typeof zn.console.log=="function"&&zn.console.log.apply(zn.console,arguments)}var us={log:Nm,warn:function(e){zn.console&&(typeof zn.console.warn=="function"?zn.console.warn.apply(zn.console,arguments):Nm.call(null,arguments))},error:function(e){zn.console&&(typeof zn.console.error=="function"?zn.console.error.apply(zn.console,arguments):Nm(e))}};function jm(e,t,r){var s=new XMLHttpRequest;s.open("GET",e),s.responseType="blob",s.onload=function(){Ru(s.response,t,r)},s.onerror=function(){us.error("could not download file")},s.send()}function xy(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function ip(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var Hf,_g,Ru=zn.saveAs||((typeof window>"u"?"undefined":qi(window))!=="object"||window!==zn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var s=zn.URL||zn.webkitURL,l=document.createElement("a");t=t||e.name||"download",l.download=t,l.rel="noopener",typeof e=="string"?(l.href=e,l.origin!==location.origin?xy(l.href)?jm(e,t,r):ip(l,l.target="_blank"):ip(l)):(l.href=s.createObjectURL(e),setTimeout(function(){s.revokeObjectURL(l.href)},4e4),setTimeout(function(){ip(l)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(xy(e))jm(e,t,r);else{var s=document.createElement("a");s.href=e,s.target="_blank",setTimeout(function(){ip(s)})}else navigator.msSaveOrOpenBlob(function(l,c){return c===void 0?c={autoBom:!1}:qi(c)!=="object"&&(us.warn("Deprecated: Expected third argument to be a object"),c={autoBom:!c}),c.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(l.type)?new Blob([String.fromCharCode(65279),l],{type:l.type}):l}(e,r),t)}:function(e,t,r,s){if((s=s||open("","_blank"))&&(s.document.title=s.document.body.innerText="downloading..."),typeof e=="string")return jm(e,t,r);var l=e.type==="application/octet-stream",c=/constructor/i.test(zn.HTMLElement)||zn.safari,h=/CriOS\/[\d]+/.test(navigator.userAgent);if((h||l&&c)&&(typeof FileReader>"u"?"undefined":qi(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var p=a.result;p=h?p:p.replace(/^data:[^;]*;/,"data:attachment/file;"),s?s.location.href=p:location=p,s=null},a.readAsDataURL(e)}else{var d=zn.URL||zn.webkitURL,_=d.createObjectURL(e);s?s.location=_:location.href=_,s=null,setTimeout(function(){d.revokeObjectURL(_)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function o_(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],s=0;s<r.length;s++){var l=r[s].re,c=r[s].process,h=l.exec(e);h&&(t=c(h),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),d=this.g.toString(16),_=this.b.toString(16);return a.length==1&&(a="0"+a),d.length==1&&(d="0"+d),_.length==1&&(_="0"+_),"#"+a+d+_}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Rm(e,t){var r=e[0],s=e[1],l=e[2],c=e[3];r=Uo(r,s,l,c,t[0],7,-680876936),c=Uo(c,r,s,l,t[1],12,-389564586),l=Uo(l,c,r,s,t[2],17,606105819),s=Uo(s,l,c,r,t[3],22,-1044525330),r=Uo(r,s,l,c,t[4],7,-176418897),c=Uo(c,r,s,l,t[5],12,1200080426),l=Uo(l,c,r,s,t[6],17,-1473231341),s=Uo(s,l,c,r,t[7],22,-45705983),r=Uo(r,s,l,c,t[8],7,1770035416),c=Uo(c,r,s,l,t[9],12,-1958414417),l=Uo(l,c,r,s,t[10],17,-42063),s=Uo(s,l,c,r,t[11],22,-1990404162),r=Uo(r,s,l,c,t[12],7,1804603682),c=Uo(c,r,s,l,t[13],12,-40341101),l=Uo(l,c,r,s,t[14],17,-1502002290),r=Lo(r,s=Uo(s,l,c,r,t[15],22,1236535329),l,c,t[1],5,-165796510),c=Lo(c,r,s,l,t[6],9,-1069501632),l=Lo(l,c,r,s,t[11],14,643717713),s=Lo(s,l,c,r,t[0],20,-373897302),r=Lo(r,s,l,c,t[5],5,-701558691),c=Lo(c,r,s,l,t[10],9,38016083),l=Lo(l,c,r,s,t[15],14,-660478335),s=Lo(s,l,c,r,t[4],20,-405537848),r=Lo(r,s,l,c,t[9],5,568446438),c=Lo(c,r,s,l,t[14],9,-1019803690),l=Lo(l,c,r,s,t[3],14,-187363961),s=Lo(s,l,c,r,t[8],20,1163531501),r=Lo(r,s,l,c,t[13],5,-1444681467),c=Lo(c,r,s,l,t[2],9,-51403784),l=Lo(l,c,r,s,t[7],14,1735328473),r=Qo(r,s=Lo(s,l,c,r,t[12],20,-1926607734),l,c,t[5],4,-378558),c=Qo(c,r,s,l,t[8],11,-2022574463),l=Qo(l,c,r,s,t[11],16,1839030562),s=Qo(s,l,c,r,t[14],23,-35309556),r=Qo(r,s,l,c,t[1],4,-1530992060),c=Qo(c,r,s,l,t[4],11,1272893353),l=Qo(l,c,r,s,t[7],16,-155497632),s=Qo(s,l,c,r,t[10],23,-1094730640),r=Qo(r,s,l,c,t[13],4,681279174),c=Qo(c,r,s,l,t[0],11,-358537222),l=Qo(l,c,r,s,t[3],16,-722521979),s=Qo(s,l,c,r,t[6],23,76029189),r=Qo(r,s,l,c,t[9],4,-640364487),c=Qo(c,r,s,l,t[12],11,-421815835),l=Qo(l,c,r,s,t[15],16,530742520),r=Po(r,s=Qo(s,l,c,r,t[2],23,-995338651),l,c,t[0],6,-198630844),c=Po(c,r,s,l,t[7],10,1126891415),l=Po(l,c,r,s,t[14],15,-1416354905),s=Po(s,l,c,r,t[5],21,-57434055),r=Po(r,s,l,c,t[12],6,1700485571),c=Po(c,r,s,l,t[3],10,-1894986606),l=Po(l,c,r,s,t[10],15,-1051523),s=Po(s,l,c,r,t[1],21,-2054922799),r=Po(r,s,l,c,t[8],6,1873313359),c=Po(c,r,s,l,t[15],10,-30611744),l=Po(l,c,r,s,t[6],15,-1560198380),s=Po(s,l,c,r,t[13],21,1309151649),r=Po(r,s,l,c,t[4],6,-145523070),c=Po(c,r,s,l,t[11],10,-1120210379),l=Po(l,c,r,s,t[2],15,718787259),s=Po(s,l,c,r,t[9],21,-343485551),e[0]=yu(r,e[0]),e[1]=yu(s,e[1]),e[2]=yu(l,e[2]),e[3]=yu(c,e[3])}function Vp(e,t,r,s,l,c){return t=yu(yu(t,e),yu(s,c)),yu(t<<l|t>>>32-l,r)}function Uo(e,t,r,s,l,c,h){return Vp(t&r|~t&s,e,t,l,c,h)}function Lo(e,t,r,s,l,c,h){return Vp(t&s|r&~s,e,t,l,c,h)}function Qo(e,t,r,s,l,c,h){return Vp(t^r^s,e,t,l,c,h)}function Po(e,t,r,s,l,c,h){return Vp(r^(t|~s),e,t,l,c,h)}function A_(e){var t,r=e.length,s=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)Rm(s,DF(e.substring(t-64,t)));e=e.substring(t-64);var l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)l[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(l[t>>2]|=128<<(t%4<<3),t>55)for(Rm(s,l),t=0;t<16;t++)l[t]=0;return l[14]=8*r,Rm(s,l),s}function DF(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}Hf=zn.atob.bind(zn),_g=zn.btoa.bind(zn);var By="0123456789abcdef".split("");function NF(e){for(var t="",r=0;r<4;r++)t+=By[e>>8*r+4&15]+By[e>>8*r&15];return t}function jF(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function wg(e){return A_(e).map(jF).join("")}var RF=function(e){for(var t=0;t<e.length;t++)e[t]=NF(e[t]);return e.join("")}(A_("hello"))!="5d41402abc4b2a76b9719d911017c592";function yu(e,t){if(RF){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function bg(e,t){var r,s,l,c;if(e!==r){for(var h=(l=e,c=1+(256/e.length>>0),new Array(c+1).join(l)),a=[],d=0;d<256;d++)a[d]=d;var _=0;for(d=0;d<256;d++){var p=a[d];_=(_+p+h.charCodeAt(d))%256,a[d]=a[_],a[_]=p}r=e,s=a}else a=s;var E=t.length,w=0,x=0,Q="";for(d=0;d<E;d++)x=(x+(p=a[w=(w+1)%256]))%256,a[w]=a[x],a[x]=p,h=a[(a[w]+a[x])%256],Q+=String.fromCharCode(t.charCodeAt(d)^h);return Q}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Cy={print:4,modify:8,copy:16,"annot-forms":32};function jh(e,t,r,s){this.v=1,this.r=2;var l=192;e.forEach(function(a){if(Cy.perm!==void 0)throw new Error("Invalid permission: "+a);l+=Cy[a]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var c=(t+this.padding).substr(0,32),h=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(c,h),this.P=-(1+(255^l)),this.encryptionKey=wg(c+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(s)).substr(0,5),this.U=bg(this.encryptionKey,this.padding)}function Rh(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,s=0;s<r;s++){var l=e.charCodeAt(s);l<33||l===35||l===37||l===40||l===41||l===47||l===60||l===62||l===91||l===93||l===123||l===125||l>126?t+="#"+("0"+l.toString(16)).slice(-2):t+=e[s]}return t}function Ey(e){if(qi(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,s,l){if(l=l||!1,typeof r!="string"||typeof s!="function"||typeof l!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var c=Math.random().toString(35);return t[r][c]=[s,!!l],c},this.unsubscribe=function(r){for(var s in t)if(t[s][r])return delete t[s][r],Object.keys(t[s]).length===0&&delete t[s],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var s=Array.prototype.slice.call(arguments,1),l=[];for(var c in t[r]){var h=t[r][c];try{h[0].apply(e,s)}catch(a){zn.console&&us.error("jsPDF PubSub Error",a.message,a)}h[1]&&l.push(c)}l.length&&l.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function nd(e){if(!(this instanceof nd))return new nd(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function l_(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function gu(e,t,r,s,l){if(!(this instanceof gu))return new gu(e,t,r,s,l);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,l_.call(this,s,l)}function Vu(e,t,r,s,l){if(!(this instanceof Vu))return new Vu(e,t,r,s,l);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,l_.call(this,s,l)}function Nn(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",s=arguments[1],l=arguments[2],c=arguments[3],h=[],a=1,d=16,_="S",p=null;qi(e=e||{})==="object"&&(r=e.orientation,s=e.unit||s,l=e.format||l,c=e.compress||e.compressPdf||c,(p=e.encryption||null)!==null&&(p.userPassword=p.userPassword||"",p.ownerPassword=p.ownerPassword||"",p.userPermissions=p.userPermissions||[]),a=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(d=e.floatPrecision),_=e.defaultPathOperation||"S"),h=e.filters||(c===!0?["FlateEncode"]:h),s=s||"mm",r=(""+(r||"P")).toLowerCase();var E=e.putOnlyUsedFonts||!1,w={},x={internal:{},__private__:{}};x.__private__.PubSub=Ey;var Q="1.3",P=x.__private__.getPdfVersion=function(){return Q};x.__private__.setPdfVersion=function(N){Q=N};var R={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};x.__private__.getPageFormats=function(){return R};var k=x.__private__.getPageFormat=function(N){return R[N]};l=l||"a4";var O={COMPAT:"compat",ADVANCED:"advanced"},G=O.COMPAT;function K(){this.saveGraphicsState(),Oe(new tn(Ct,0,0,-Ct,0,ba()*Ct).toString()+" cm"),this.setFontSize(this.getFontSize()/Ct),_="n",G=O.ADVANCED}function Z(){this.restoreGraphicsState(),_="S",G=O.COMPAT}var $=x.__private__.combineFontStyleAndFontWeight=function(N,oe){if(N=="bold"&&oe=="normal"||N=="bold"&&oe==400||N=="normal"&&oe=="italic"||N=="bold"&&oe=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return oe&&(N=oe==400||oe==="normal"?N==="italic"?"italic":"normal":oe!=700&&oe!=="bold"||N!=="normal"?(oe==700?"bold":oe)+""+N:"bold"),N};x.advancedAPI=function(N){var oe=G===O.COMPAT;return oe&&K.call(this),typeof N!="function"||(N(this),oe&&Z.call(this)),this},x.compatAPI=function(N){var oe=G===O.ADVANCED;return oe&&Z.call(this),typeof N!="function"||(N(this),oe&&K.call(this)),this},x.isAdvancedAPI=function(){return G===O.ADVANCED};var fe,Ae=function(N){if(G!==O.ADVANCED)throw new Error(N+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},ge=x.roundToPrecision=x.__private__.roundToPrecision=function(N,oe){var ke=t||oe;if(isNaN(N)||isNaN(ke))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return N.toFixed(ke).replace(/0+$/,"")};fe=x.hpf=x.__private__.hpf=typeof d=="number"?function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.hpf");return ge(N,d)}:d==="smart"?function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.hpf");return ge(N,N>-1&&N<1?16:5)}:function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.hpf");return ge(N,16)};var he=x.f2=x.__private__.f2=function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.f2");return ge(N,2)},ee=x.__private__.f3=function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.f3");return ge(N,3)},ne=x.scale=x.__private__.scale=function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.scale");return G===O.COMPAT?N*Ct:G===O.ADVANCED?N:void 0},xe=function(N){return G===O.COMPAT?ba()-N:G===O.ADVANCED?N:void 0},ve=function(N){return ne(xe(N))};x.__private__.setPrecision=x.setPrecision=function(N){typeof parseInt(N,10)=="number"&&(t=parseInt(N,10))};var ze,Le="00000000000000000000000000000000",Ke=x.__private__.getFileId=function(){return Le},Ue=x.__private__.setFileId=function(N){return Le=N!==void 0&&/^[a-fA-F0-9]{32}$/.test(N)?N.toUpperCase():Le.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),p!==null&&(ys=new jh(p.userPermissions,p.userPassword,p.ownerPassword,Le)),Le};x.setFileId=function(N){return Ue(N),this},x.getFileId=function(){return Ke()};var rt=x.__private__.convertDateToPDFDate=function(N){var oe=N.getTimezoneOffset(),ke=oe<0?"+":"-",et=Math.floor(Math.abs(oe/60)),_t=Math.abs(oe%60),Jt=[ke,Qe(et),"'",Qe(_t),"'"].join("");return["D:",N.getFullYear(),Qe(N.getMonth()+1),Qe(N.getDate()),Qe(N.getHours()),Qe(N.getMinutes()),Qe(N.getSeconds()),Jt].join("")},je=x.__private__.convertPDFDateToDate=function(N){var oe=parseInt(N.substr(2,4),10),ke=parseInt(N.substr(6,2),10)-1,et=parseInt(N.substr(8,2),10),_t=parseInt(N.substr(10,2),10),Jt=parseInt(N.substr(12,2),10),_r=parseInt(N.substr(14,2),10);return new Date(oe,ke,et,_t,Jt,_r,0)},St=x.__private__.setCreationDate=function(N){var oe;if(N===void 0&&(N=new Date),N instanceof Date)oe=rt(N);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(N))throw new Error("Invalid argument passed to jsPDF.setCreationDate");oe=N}return ze=oe},te=x.__private__.getCreationDate=function(N){var oe=ze;return N==="jsDate"&&(oe=je(ze)),oe};x.setCreationDate=function(N){return St(N),this},x.getCreationDate=function(N){return te(N)};var Fe,Qe=x.__private__.padd2=function(N){return("0"+parseInt(N)).slice(-2)},Ve=x.__private__.padd2Hex=function(N){return("00"+(N=N.toString())).substr(N.length)},st=0,dt=[],Bt=[],Ge=0,tt=[],Qt=[],ht=!1,Nt=Bt,dr=function(){st=0,Ge=0,Bt=[],dt=[],tt=[],Ce=Ie(),Te=Ie()};x.__private__.setCustomOutputDestination=function(N){ht=!0,Nt=N};var Pt=function(N){ht||(Nt=N)};x.__private__.resetCustomOutputDestination=function(){ht=!1,Nt=Bt};var Oe=x.__private__.out=function(N){return N=N.toString(),Ge+=N.length+1,Nt.push(N),Nt},pr=x.__private__.write=function(N){return Oe(arguments.length===1?N.toString():Array.prototype.join.call(arguments," "))},sr=x.__private__.getArrayBuffer=function(N){for(var oe=N.length,ke=new ArrayBuffer(oe),et=new Uint8Array(ke);oe--;)et[oe]=N.charCodeAt(oe);return ke},zt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];x.__private__.getStandardFonts=function(){return zt};var fr=e.fontSize||16;x.__private__.setFontSize=x.setFontSize=function(N){return fr=G===O.ADVANCED?N/Ct:N,this};var Br,vr=x.__private__.getFontSize=x.getFontSize=function(){return G===O.COMPAT?fr:fr*Ct},Gr=e.R2L||!1;x.__private__.setR2L=x.setR2L=function(N){return Gr=N,this},x.__private__.getR2L=x.getR2L=function(){return Gr};var rr,xr=x.__private__.setZoomMode=function(N){var oe=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(N))Br=N;else if(isNaN(N)){if(oe.indexOf(N)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+N+'" is not recognized.');Br=N}else Br=parseInt(N,10)};x.__private__.getZoomMode=function(){return Br};var Zr,pn=x.__private__.setPageMode=function(N){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(N)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+N+'" is not recognized.');rr=N};x.__private__.getPageMode=function(){return rr};var vt=x.__private__.setLayoutMode=function(N){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(N)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+N+'" is not recognized.');Zr=N};x.__private__.getLayoutMode=function(){return Zr},x.__private__.setDisplayMode=x.setDisplayMode=function(N,oe,ke){return xr(N),vt(oe),pn(ke),this};var nt={title:"",subject:"",author:"",keywords:"",creator:""};x.__private__.getDocumentProperty=function(N){if(Object.keys(nt).indexOf(N)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return nt[N]},x.__private__.getDocumentProperties=function(){return nt},x.__private__.setDocumentProperties=x.setProperties=x.setDocumentProperties=function(N){for(var oe in nt)nt.hasOwnProperty(oe)&&N[oe]&&(nt[oe]=N[oe]);return this},x.__private__.setDocumentProperty=function(N,oe){if(Object.keys(nt).indexOf(N)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return nt[N]=oe};var bt,Ct,jt,er,Vr,Fr={},un={},lr=[],Er={},An={},wn={},_i={},br=null,Cr=0,cr=[],Kr=new Ey(x),hn=e.hotfixes||[],xn={},Sn={},ji=[],tn=function N(oe,ke,et,_t,Jt,_r){if(!(this instanceof N))return new N(oe,ke,et,_t,Jt,_r);isNaN(oe)&&(oe=1),isNaN(ke)&&(ke=0),isNaN(et)&&(et=0),isNaN(_t)&&(_t=1),isNaN(Jt)&&(Jt=0),isNaN(_r)&&(_r=0),this._matrix=[oe,ke,et,_t,Jt,_r]};Object.defineProperty(tn.prototype,"sx",{get:function(){return this._matrix[0]},set:function(N){this._matrix[0]=N}}),Object.defineProperty(tn.prototype,"shy",{get:function(){return this._matrix[1]},set:function(N){this._matrix[1]=N}}),Object.defineProperty(tn.prototype,"shx",{get:function(){return this._matrix[2]},set:function(N){this._matrix[2]=N}}),Object.defineProperty(tn.prototype,"sy",{get:function(){return this._matrix[3]},set:function(N){this._matrix[3]=N}}),Object.defineProperty(tn.prototype,"tx",{get:function(){return this._matrix[4]},set:function(N){this._matrix[4]=N}}),Object.defineProperty(tn.prototype,"ty",{get:function(){return this._matrix[5]},set:function(N){this._matrix[5]=N}}),Object.defineProperty(tn.prototype,"a",{get:function(){return this._matrix[0]},set:function(N){this._matrix[0]=N}}),Object.defineProperty(tn.prototype,"b",{get:function(){return this._matrix[1]},set:function(N){this._matrix[1]=N}}),Object.defineProperty(tn.prototype,"c",{get:function(){return this._matrix[2]},set:function(N){this._matrix[2]=N}}),Object.defineProperty(tn.prototype,"d",{get:function(){return this._matrix[3]},set:function(N){this._matrix[3]=N}}),Object.defineProperty(tn.prototype,"e",{get:function(){return this._matrix[4]},set:function(N){this._matrix[4]=N}}),Object.defineProperty(tn.prototype,"f",{get:function(){return this._matrix[5]},set:function(N){this._matrix[5]=N}}),Object.defineProperty(tn.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(tn.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(tn.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(tn.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),tn.prototype.join=function(N){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(fe).join(N)},tn.prototype.multiply=function(N){var oe=N.sx*this.sx+N.shy*this.shx,ke=N.sx*this.shy+N.shy*this.sy,et=N.shx*this.sx+N.sy*this.shx,_t=N.shx*this.shy+N.sy*this.sy,Jt=N.tx*this.sx+N.ty*this.shx+this.tx,_r=N.tx*this.shy+N.ty*this.sy+this.ty;return new tn(oe,ke,et,_t,Jt,_r)},tn.prototype.decompose=function(){var N=this.sx,oe=this.shy,ke=this.shx,et=this.sy,_t=this.tx,Jt=this.ty,_r=Math.sqrt(N*N+oe*oe),en=(N/=_r)*ke+(oe/=_r)*et;ke-=N*en,et-=oe*en;var En=Math.sqrt(ke*ke+et*et);return en/=En,N*(et/=En)<oe*(ke/=En)&&(N=-N,oe=-oe,en=-en,_r=-_r),{scale:new tn(_r,0,0,En,0,0),translate:new tn(1,0,0,1,_t,Jt),rotate:new tn(N,oe,-oe,N,0,0),skew:new tn(1,0,en,1,0,0)}},tn.prototype.toString=function(N){return this.join(" ")},tn.prototype.inversed=function(){var N=this.sx,oe=this.shy,ke=this.shx,et=this.sy,_t=this.tx,Jt=this.ty,_r=1/(N*et-oe*ke),en=et*_r,En=-oe*_r,Dn=-ke*_r,Kn=N*_r;return new tn(en,En,Dn,Kn,-en*_t-Dn*Jt,-En*_t-Kn*Jt)},tn.prototype.applyToPoint=function(N){var oe=N.x*this.sx+N.y*this.shx+this.tx,ke=N.x*this.shy+N.y*this.sy+this.ty;return new lA(oe,ke)},tn.prototype.applyToRectangle=function(N){var oe=this.applyToPoint(N),ke=this.applyToPoint(new lA(N.x+N.w,N.y+N.h));return new UA(oe.x,oe.y,ke.x-oe.x,ke.y-oe.y)},tn.prototype.clone=function(){var N=this.sx,oe=this.shy,ke=this.shx,et=this.sy,_t=this.tx,Jt=this.ty;return new tn(N,oe,ke,et,_t,Jt)},x.Matrix=tn;var Wi=x.matrixMult=function(N,oe){return oe.multiply(N)},hs=new tn(1,0,0,1,0,0);x.unitMatrix=x.identityMatrix=hs;var Ln=function(N,oe){if(!An[N]){var ke=(oe instanceof gu?"Sh":"P")+(Object.keys(Er).length+1).toString(10);oe.id=ke,An[N]=ke,Er[ke]=oe,Kr.publish("addPattern",oe)}};x.ShadingPattern=gu,x.TilingPattern=Vu,x.addShadingPattern=function(N,oe){return Ae("addShadingPattern()"),Ln(N,oe),this},x.beginTilingPattern=function(N){Ae("beginTilingPattern()"),ml(N.boundingBox[0],N.boundingBox[1],N.boundingBox[2]-N.boundingBox[0],N.boundingBox[3]-N.boundingBox[1],N.matrix)},x.endTilingPattern=function(N,oe){Ae("endTilingPattern()"),oe.stream=Qt[Fe].join(`
`),Ln(N,oe),Kr.publish("endTilingPattern",oe),ji.pop().restore()};var nn=x.__private__.newObject=function(){var N=Ie();return Y(N,!0),N},Ie=x.__private__.newObjectDeferred=function(){return st++,dt[st]=function(){return Ge},st},Y=function(N,oe){return oe=typeof oe=="boolean"&&oe,dt[N]=Ge,oe&&Oe(N+" 0 obj"),N},le=x.__private__.newAdditionalObject=function(){var N={objId:Ie(),content:""};return tt.push(N),N},Ce=Ie(),Te=Ie(),Xe=x.__private__.decodeColorString=function(N){var oe=N.split(" ");if(oe.length!==2||oe[1]!=="g"&&oe[1]!=="G")oe.length===5&&(oe[4]==="k"||oe[4]==="K")&&(oe=[(1-oe[0])*(1-oe[3]),(1-oe[1])*(1-oe[3]),(1-oe[2])*(1-oe[3]),"r"]);else{var ke=parseFloat(oe[0]);oe=[ke,ke,ke,"r"]}for(var et="#",_t=0;_t<3;_t++)et+=("0"+Math.floor(255*parseFloat(oe[_t])).toString(16)).slice(-2);return et},lt=x.__private__.encodeColorString=function(N){var oe;typeof N=="string"&&(N={ch1:N});var ke=N.ch1,et=N.ch2,_t=N.ch3,Jt=N.ch4,_r=N.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ke=="string"&&ke.charAt(0)!=="#"){var en=new o_(ke);if(en.ok)ke=en.toHex();else if(!/^\d*\.?\d*$/.test(ke))throw new Error('Invalid color "'+ke+'" passed to jsPDF.encodeColorString.')}if(typeof ke=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ke)&&(ke="#"+ke[1]+ke[1]+ke[2]+ke[2]+ke[3]+ke[3]),typeof ke=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ke)){var En=parseInt(ke.substr(1),16);ke=En>>16&255,et=En>>8&255,_t=255&En}if(et===void 0||Jt===void 0&&ke===et&&et===_t)if(typeof ke=="string")oe=ke+" "+_r[0];else switch(N.precision){case 2:oe=he(ke/255)+" "+_r[0];break;case 3:default:oe=ee(ke/255)+" "+_r[0]}else if(Jt===void 0||qi(Jt)==="object"){if(Jt&&!isNaN(Jt.a)&&Jt.a===0)return oe=["1.","1.","1.",_r[1]].join(" ");if(typeof ke=="string")oe=[ke,et,_t,_r[1]].join(" ");else switch(N.precision){case 2:oe=[he(ke/255),he(et/255),he(_t/255),_r[1]].join(" ");break;default:case 3:oe=[ee(ke/255),ee(et/255),ee(_t/255),_r[1]].join(" ")}}else if(typeof ke=="string")oe=[ke,et,_t,Jt,_r[2]].join(" ");else switch(N.precision){case 2:oe=[he(ke),he(et),he(_t),he(Jt),_r[2]].join(" ");break;case 3:default:oe=[ee(ke),ee(et),ee(_t),ee(Jt),_r[2]].join(" ")}return oe},Ye=x.__private__.getFilters=function(){return h},qe=x.__private__.putStream=function(N){var oe=(N=N||{}).data||"",ke=N.filters||Ye(),et=N.alreadyAppliedFilters||[],_t=N.addLength1||!1,Jt=oe.length,_r=N.objectId,en=function(Es){return Es};if(p!==null&&_r===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");p!==null&&(en=ys.encryptor(_r,0));var En={};ke===!0&&(ke=["FlateEncode"]);var Dn=N.additionalKeyValues||[],Kn=(En=Nn.API.processDataByFilters!==void 0?Nn.API.processDataByFilters(oe,ke):{data:oe,reverseChain:[]}).reverseChain+(Array.isArray(et)?et.join(" "):et.toString());if(En.data.length!==0&&(Dn.push({key:"Length",value:En.data.length}),_t===!0&&Dn.push({key:"Length1",value:Jt})),Kn.length!=0)if(Kn.split("/").length-1==1)Dn.push({key:"Filter",value:Kn});else{Dn.push({key:"Filter",value:"["+Kn+"]"});for(var Wn=0;Wn<Dn.length;Wn+=1)if(Dn[Wn].key==="DecodeParms"){for(var pi=[],mi=0;mi<En.reverseChain.split("/").length-1;mi+=1)pi.push("null");pi.push(Dn[Wn].value),Dn[Wn].value="["+pi.join(" ")+"]"}}Oe("<<");for(var Tn=0;Tn<Dn.length;Tn++)Oe("/"+Dn[Tn].key+" "+Dn[Tn].value);Oe(">>"),En.data.length!==0&&(Oe("stream"),Oe(en(En.data)),Oe("endstream"))},ut=x.__private__.putPage=function(N){var oe=N.number,ke=N.data,et=N.objId,_t=N.contentsObjId;Y(et,!0),Oe("<</Type /Page"),Oe("/Parent "+N.rootDictionaryObjId+" 0 R"),Oe("/Resources "+N.resourceDictionaryObjId+" 0 R"),Oe("/MediaBox ["+parseFloat(fe(N.mediaBox.bottomLeftX))+" "+parseFloat(fe(N.mediaBox.bottomLeftY))+" "+fe(N.mediaBox.topRightX)+" "+fe(N.mediaBox.topRightY)+"]"),N.cropBox!==null&&Oe("/CropBox ["+fe(N.cropBox.bottomLeftX)+" "+fe(N.cropBox.bottomLeftY)+" "+fe(N.cropBox.topRightX)+" "+fe(N.cropBox.topRightY)+"]"),N.bleedBox!==null&&Oe("/BleedBox ["+fe(N.bleedBox.bottomLeftX)+" "+fe(N.bleedBox.bottomLeftY)+" "+fe(N.bleedBox.topRightX)+" "+fe(N.bleedBox.topRightY)+"]"),N.trimBox!==null&&Oe("/TrimBox ["+fe(N.trimBox.bottomLeftX)+" "+fe(N.trimBox.bottomLeftY)+" "+fe(N.trimBox.topRightX)+" "+fe(N.trimBox.topRightY)+"]"),N.artBox!==null&&Oe("/ArtBox ["+fe(N.artBox.bottomLeftX)+" "+fe(N.artBox.bottomLeftY)+" "+fe(N.artBox.topRightX)+" "+fe(N.artBox.topRightY)+"]"),typeof N.userUnit=="number"&&N.userUnit!==1&&Oe("/UserUnit "+N.userUnit),Kr.publish("putPage",{objId:et,pageContext:cr[oe],pageNumber:oe,page:ke}),Oe("/Contents "+_t+" 0 R"),Oe(">>"),Oe("endobj");var Jt=ke.join(`
`);return G===O.ADVANCED&&(Jt+=`
Q`),Y(_t,!0),qe({data:Jt,filters:Ye(),objectId:_t}),Oe("endobj"),et},Ot=x.__private__.putPages=function(){var N,oe,ke=[];for(N=1;N<=Cr;N++)cr[N].objId=Ie(),cr[N].contentsObjId=Ie();for(N=1;N<=Cr;N++)ke.push(ut({number:N,data:Qt[N],objId:cr[N].objId,contentsObjId:cr[N].contentsObjId,mediaBox:cr[N].mediaBox,cropBox:cr[N].cropBox,bleedBox:cr[N].bleedBox,trimBox:cr[N].trimBox,artBox:cr[N].artBox,userUnit:cr[N].userUnit,rootDictionaryObjId:Ce,resourceDictionaryObjId:Te}));Y(Ce,!0),Oe("<</Type /Pages");var et="/Kids [";for(oe=0;oe<Cr;oe++)et+=ke[oe]+" 0 R ";Oe(et+"]"),Oe("/Count "+Cr),Oe(">>"),Oe("endobj"),Kr.publish("postPutPages")},nr=function(N){Kr.publish("putFont",{font:N,out:Oe,newObject:nn,putStream:qe}),N.isAlreadyPutted!==!0&&(N.objectNumber=nn(),Oe("<<"),Oe("/Type /Font"),Oe("/BaseFont /"+Rh(N.postScriptName)),Oe("/Subtype /Type1"),typeof N.encoding=="string"&&Oe("/Encoding /"+N.encoding),Oe("/FirstChar 32"),Oe("/LastChar 255"),Oe(">>"),Oe("endobj"))},Ht=function(){for(var N in Fr)Fr.hasOwnProperty(N)&&(E===!1||E===!0&&w.hasOwnProperty(N))&&nr(Fr[N])},jr=function(N){N.objectNumber=nn();var oe=[];oe.push({key:"Type",value:"/XObject"}),oe.push({key:"Subtype",value:"/Form"}),oe.push({key:"BBox",value:"["+[fe(N.x),fe(N.y),fe(N.x+N.width),fe(N.y+N.height)].join(" ")+"]"}),oe.push({key:"Matrix",value:"["+N.matrix.toString()+"]"});var ke=N.pages[1].join(`
`);qe({data:ke,additionalKeyValues:oe,objectId:N.objectNumber}),Oe("endobj")},zr=function(){for(var N in xn)xn.hasOwnProperty(N)&&jr(xn[N])},Ir=function(N,oe){var ke,et=[],_t=1/(oe-1);for(ke=0;ke<1;ke+=_t)et.push(ke);if(et.push(1),N[0].offset!=0){var Jt={offset:0,color:N[0].color};N.unshift(Jt)}if(N[N.length-1].offset!=1){var _r={offset:1,color:N[N.length-1].color};N.push(_r)}for(var en="",En=0,Dn=0;Dn<et.length;Dn++){for(ke=et[Dn];ke>N[En+1].offset;)En++;var Kn=N[En].offset,Wn=(ke-Kn)/(N[En+1].offset-Kn),pi=N[En].color,mi=N[En+1].color;en+=Ve(Math.round((1-Wn)*pi[0]+Wn*mi[0]).toString(16))+Ve(Math.round((1-Wn)*pi[1]+Wn*mi[1]).toString(16))+Ve(Math.round((1-Wn)*pi[2]+Wn*mi[2]).toString(16))}return en.trim()},ln=function(N,oe){oe||(oe=21);var ke=nn(),et=Ir(N.colors,oe),_t=[];_t.push({key:"FunctionType",value:"0"}),_t.push({key:"Domain",value:"[0.0 1.0]"}),_t.push({key:"Size",value:"["+oe+"]"}),_t.push({key:"BitsPerSample",value:"8"}),_t.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),_t.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),qe({data:et,additionalKeyValues:_t,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ke}),Oe("endobj"),N.objectNumber=nn(),Oe("<< /ShadingType "+N.type),Oe("/ColorSpace /DeviceRGB");var Jt="/Coords ["+fe(parseFloat(N.coords[0]))+" "+fe(parseFloat(N.coords[1]))+" ";N.type===2?Jt+=fe(parseFloat(N.coords[2]))+" "+fe(parseFloat(N.coords[3])):Jt+=fe(parseFloat(N.coords[2]))+" "+fe(parseFloat(N.coords[3]))+" "+fe(parseFloat(N.coords[4]))+" "+fe(parseFloat(N.coords[5])),Oe(Jt+="]"),N.matrix&&Oe("/Matrix ["+N.matrix.toString()+"]"),Oe("/Function "+ke+" 0 R"),Oe("/Extend [true true]"),Oe(">>"),Oe("endobj")},dn=function(N,oe){var ke=Ie(),et=nn();oe.push({resourcesOid:ke,objectOid:et}),N.objectNumber=et;var _t=[];_t.push({key:"Type",value:"/Pattern"}),_t.push({key:"PatternType",value:"1"}),_t.push({key:"PaintType",value:"1"}),_t.push({key:"TilingType",value:"1"}),_t.push({key:"BBox",value:"["+N.boundingBox.map(fe).join(" ")+"]"}),_t.push({key:"XStep",value:fe(N.xStep)}),_t.push({key:"YStep",value:fe(N.yStep)}),_t.push({key:"Resources",value:ke+" 0 R"}),N.matrix&&_t.push({key:"Matrix",value:"["+N.matrix.toString()+"]"}),qe({data:N.stream,additionalKeyValues:_t,objectId:N.objectNumber}),Oe("endobj")},In=function(N){var oe;for(oe in Er)Er.hasOwnProperty(oe)&&(Er[oe]instanceof gu?ln(Er[oe]):Er[oe]instanceof Vu&&dn(Er[oe],N))},mn=function(N){for(var oe in N.objectNumber=nn(),Oe("<<"),N)switch(oe){case"opacity":Oe("/ca "+he(N[oe]));break;case"stroke-opacity":Oe("/CA "+he(N[oe]))}Oe(">>"),Oe("endobj")},Bn=function(){var N;for(N in wn)wn.hasOwnProperty(N)&&mn(wn[N])},Pn=function(){for(var N in Oe("/XObject <<"),xn)xn.hasOwnProperty(N)&&xn[N].objectNumber>=0&&Oe("/"+N+" "+xn[N].objectNumber+" 0 R");Kr.publish("putXobjectDict"),Oe(">>")},Vn=function(){ys.oid=nn(),Oe("<<"),Oe("/Filter /Standard"),Oe("/V "+ys.v),Oe("/R "+ys.r),Oe("/U <"+ys.toHexString(ys.U)+">"),Oe("/O <"+ys.toHexString(ys.O)+">"),Oe("/P "+ys.P),Oe(">>"),Oe("endobj")},Ti=function(){for(var N in Oe("/Font <<"),Fr)Fr.hasOwnProperty(N)&&(E===!1||E===!0&&w.hasOwnProperty(N))&&Oe("/"+N+" "+Fr[N].objectNumber+" 0 R");Oe(">>")},oi=function(){if(Object.keys(Er).length>0){for(var N in Oe("/Shading <<"),Er)Er.hasOwnProperty(N)&&Er[N]instanceof gu&&Er[N].objectNumber>=0&&Oe("/"+N+" "+Er[N].objectNumber+" 0 R");Kr.publish("putShadingPatternDict"),Oe(">>")}},wi=function(N){if(Object.keys(Er).length>0){for(var oe in Oe("/Pattern <<"),Er)Er.hasOwnProperty(oe)&&Er[oe]instanceof x.TilingPattern&&Er[oe].objectNumber>=0&&Er[oe].objectNumber<N&&Oe("/"+oe+" "+Er[oe].objectNumber+" 0 R");Kr.publish("putTilingPatternDict"),Oe(">>")}},Qs=function(){if(Object.keys(wn).length>0){var N;for(N in Oe("/ExtGState <<"),wn)wn.hasOwnProperty(N)&&wn[N].objectNumber>=0&&Oe("/"+N+" "+wn[N].objectNumber+" 0 R");Kr.publish("putGStateDict"),Oe(">>")}},bi=function(N){Y(N.resourcesOid,!0),Oe("<<"),Oe("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Ti(),oi(),wi(N.objectOid),Qs(),Pn(),Oe(">>"),Oe("endobj")},Yn=function(){var N=[];Ht(),Bn(),zr(),In(N),Kr.publish("putResources"),N.forEach(bi),bi({resourcesOid:Te,objectOid:Number.MAX_SAFE_INTEGER}),Kr.publish("postPutResources")},Ya=function(){Kr.publish("putAdditionalObjects");for(var N=0;N<tt.length;N++){var oe=tt[N];Y(oe.objId,!0),Oe(oe.content),Oe("endobj")}Kr.publish("postPutAdditionalObjects")},Ks=function(N){un[N.fontName]=un[N.fontName]||{},un[N.fontName][N.fontStyle]=N.id},Gs=function(N,oe,ke,et,_t){var Jt={id:"F"+(Object.keys(Fr).length+1).toString(10),postScriptName:N,fontName:oe,fontStyle:ke,encoding:et,isStandardFont:_t||!1,metadata:{}};return Kr.publish("addFont",{font:Jt,instance:this}),Fr[Jt.id]=Jt,Ks(Jt),Jt.id},ia=function(N){for(var oe=0,ke=zt.length;oe<ke;oe++){var et=Gs.call(this,N[oe][0],N[oe][1],N[oe][2],zt[oe][3],!0);E===!1&&(w[et]=!0);var _t=N[oe][0].split("-");Ks({id:et,fontName:_t[0],fontStyle:_t[1]||""})}Kr.publish("addFonts",{fonts:Fr,dictionary:un})},gs=function(N){return N.foo=function(){try{return N.apply(this,arguments)}catch(et){var oe=et.stack||"";~oe.indexOf(" at ")&&(oe=oe.split(" at ")[1]);var ke="Error in function "+oe.split(`
`)[0].split("<")[0]+": "+et.message;if(!zn.console)throw new Error(ke);zn.console.error(ke,et),zn.alert&&alert(ke)}},N.foo.bar=N,N.foo},Ri=function(N,oe){var ke,et,_t,Jt,_r,en,En,Dn,Kn;if(_t=(oe=oe||{}).sourceEncoding||"Unicode",_r=oe.outputEncoding,(oe.autoencode||_r)&&Fr[bt].metadata&&Fr[bt].metadata[_t]&&Fr[bt].metadata[_t].encoding&&(Jt=Fr[bt].metadata[_t].encoding,!_r&&Fr[bt].encoding&&(_r=Fr[bt].encoding),!_r&&Jt.codePages&&(_r=Jt.codePages[0]),typeof _r=="string"&&(_r=Jt[_r]),_r)){for(En=!1,en=[],ke=0,et=N.length;ke<et;ke++)(Dn=_r[N.charCodeAt(ke)])?en.push(String.fromCharCode(Dn)):en.push(N[ke]),en[ke].charCodeAt(0)>>8&&(En=!0);N=en.join("")}for(ke=N.length;En===void 0&&ke!==0;)N.charCodeAt(ke-1)>>8&&(En=!0),ke--;if(!En)return N;for(en=oe.noBOM?[]:[254,255],ke=0,et=N.length;ke<et;ke++){if((Kn=(Dn=N.charCodeAt(ke))>>8)>>8)throw new Error("Character at position "+ke+" of string '"+N+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");en.push(Kn),en.push(Dn-(Kn<<8))}return String.fromCharCode.apply(void 0,en)},Xi=x.__private__.pdfEscape=x.pdfEscape=function(N,oe){return Ri(N,oe).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},vo=x.__private__.beginPage=function(N){Qt[++Cr]=[],cr[Cr]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(N[0]),topRightY:Number(N[1])}},sa(Cr),Pt(Qt[Fe])},nA=function(N,oe){var ke,et,_t;switch(r=oe||r,typeof N=="string"&&(ke=k(N.toLowerCase()),Array.isArray(ke)&&(et=ke[0],_t=ke[1])),Array.isArray(N)&&(et=N[0]*Ct,_t=N[1]*Ct),isNaN(et)&&(et=l[0],_t=l[1]),(et>14400||_t>14400)&&(us.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),et=Math.min(14400,et),_t=Math.min(14400,_t)),l=[et,_t],r.substr(0,1)){case"l":_t>et&&(l=[_t,et]);break;case"p":et>_t&&(l=[_t,et])}vo(l),qA(to),Oe(vs),SA!==0&&Oe(SA+" J"),IA!==0&&Oe(IA+" j"),Kr.publish("addPage",{pageNumber:Cr})},EA=function(N){N>0&&N<=Cr&&(Qt.splice(N,1),cr.splice(N,1),Cr--,Fe>Cr&&(Fe=Cr),this.setPage(Fe))},sa=function(N){N>0&&N<=Cr&&(Fe=N)},bs=x.__private__.getNumberOfPages=x.getNumberOfPages=function(){return Qt.length-1},xs=function(N,oe,ke){var et,_t=void 0;return ke=ke||{},N=N!==void 0?N:Fr[bt].fontName,oe=oe!==void 0?oe:Fr[bt].fontStyle,et=N.toLowerCase(),un[et]!==void 0&&un[et][oe]!==void 0?_t=un[et][oe]:un[N]!==void 0&&un[N][oe]!==void 0?_t=un[N][oe]:ke.disableWarning===!1&&us.warn("Unable to look up font label for font '"+N+"', '"+oe+"'. Refer to getFontList() for available fonts."),_t||ke.noFallback||(_t=un.times[oe])==null&&(_t=un.times.normal),_t},$a=x.__private__.putInfo=function(){var N=nn(),oe=function(et){return et};for(var ke in p!==null&&(oe=ys.encryptor(N,0)),Oe("<<"),Oe("/Producer ("+Xi(oe("jsPDF "+Nn.version))+")"),nt)nt.hasOwnProperty(ke)&&nt[ke]&&Oe("/"+ke.substr(0,1).toUpperCase()+ke.substr(1)+" ("+Xi(oe(nt[ke]))+")");Oe("/CreationDate ("+Xi(oe(ze))+")"),Oe(">>"),Oe("endobj")},aa=x.__private__.putCatalog=function(N){var oe=(N=N||{}).rootDictionaryObjId||Ce;switch(nn(),Oe("<<"),Oe("/Type /Catalog"),Oe("/Pages "+oe+" 0 R"),Br||(Br="fullwidth"),Br){case"fullwidth":Oe("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Oe("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Oe("/OpenAction [3 0 R /Fit]");break;case"original":Oe("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ke=""+Br;ke.substr(ke.length-1)==="%"&&(Br=parseInt(Br)/100),typeof Br=="number"&&Oe("/OpenAction [3 0 R /XYZ null null "+he(Br)+"]")}switch(Zr||(Zr="continuous"),Zr){case"continuous":Oe("/PageLayout /OneColumn");break;case"single":Oe("/PageLayout /SinglePage");break;case"two":case"twoleft":Oe("/PageLayout /TwoColumnLeft");break;case"tworight":Oe("/PageLayout /TwoColumnRight")}rr&&Oe("/PageMode /"+rr),Kr.publish("putCatalog"),Oe(">>"),Oe("endobj")},Mo=x.__private__.putTrailer=function(){Oe("trailer"),Oe("<<"),Oe("/Size "+(st+1)),Oe("/Root "+st+" 0 R"),Oe("/Info "+(st-1)+" 0 R"),p!==null&&Oe("/Encrypt "+ys.oid+" 0 R"),Oe("/ID [ <"+Le+"> <"+Le+"> ]"),Oe(">>")},ka=x.__private__.putHeader=function(){Oe("%PDF-"+Q),Oe("%ºß¬à")},Do=x.__private__.putXRef=function(){var N="0000000000";Oe("xref"),Oe("0 "+(st+1)),Oe("0000000000 65535 f ");for(var oe=1;oe<=st;oe++)typeof dt[oe]=="function"?Oe((N+dt[oe]()).slice(-10)+" 00000 n "):dt[oe]!==void 0?Oe((N+dt[oe]).slice(-10)+" 00000 n "):Oe("0000000000 00000 n ")},oa=x.__private__.buildDocument=function(){dr(),Pt(Bt),Kr.publish("buildDocument"),ka(),Ot(),Ya(),Yn(),p!==null&&Vn(),$a(),aa();var N=Ge;return Do(),Mo(),Oe("startxref"),Oe(""+N),Oe("%%EOF"),Pt(Qt[Fe]),Bt.join(`
`)},qs=x.__private__.getBlob=function(N){return new Blob([sr(N)],{type:"application/pdf"})},ii=x.output=x.__private__.output=gs(function(N,oe){switch(typeof(oe=oe||{})=="string"?oe={filename:oe}:oe.filename=oe.filename||"generated.pdf",N){case void 0:return oa();case"save":x.save(oe.filename);break;case"arraybuffer":return sr(oa());case"blob":return qs(oa());case"bloburi":case"bloburl":if(zn.URL!==void 0&&typeof zn.URL.createObjectURL=="function")return zn.URL&&zn.URL.createObjectURL(qs(oa()))||void 0;us.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ke="",et=oa();try{ke=_g(et)}catch{ke=_g(unescape(encodeURIComponent(et)))}return"data:application/pdf;filename="+oe.filename+";base64,"+ke;case"pdfobjectnewwindow":if(Object.prototype.toString.call(zn)==="[object Window]"){var _t="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Jt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';oe.pdfObjectUrl&&(_t=oe.pdfObjectUrl,Jt="");var _r='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+_t+'"'+Jt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(oe)+");<\/script></body></html>",en=zn.open();return en!==null&&en.document.write(_r),en}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(zn)==="[object Window]"){var En='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(oe.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+oe.filename+'" width="500px" height="400px" /></body></html>',Dn=zn.open();if(Dn!==null){Dn.document.write(En);var Kn=this;Dn.document.documentElement.querySelector("#pdfViewer").onload=function(){Dn.document.title=oe.filename,Dn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Kn.output("bloburl"))}}return Dn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(zn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Wn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",oe)+'"></iframe></body></html>',pi=zn.open();if(pi!==null&&(pi.document.write(Wn),pi.document.title=oe.filename),pi||typeof safari>"u")return pi;break;case"datauri":case"dataurl":return zn.document.location.href=this.output("datauristring",oe);default:return null}}),Bs=function(N){return Array.isArray(hn)===!0&&hn.indexOf(N)>-1};switch(s){case"pt":Ct=1;break;case"mm":Ct=72/25.4;break;case"cm":Ct=72/2.54;break;case"in":Ct=72;break;case"px":Ct=Bs("px_scaling")==1?.75:96/72;break;case"pc":case"em":Ct=12;break;case"ex":Ct=6;break;default:if(typeof s!="number")throw new Error("Invalid unit: "+s);Ct=s}var ys=null;St(),Ue();var iA=function(N){return p!==null?ys.encryptor(N,0):function(oe){return oe}},sA=x.__private__.getPageInfo=x.getPageInfo=function(N){if(isNaN(N)||N%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:cr[N].objId,pageNumber:N,pageContext:cr[N]}},Cn=x.__private__.getPageInfoByObjId=function(N){if(isNaN(N)||N%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var oe in cr)if(cr[oe].objId===N)break;return sA(oe)},GA=x.__private__.getCurrentPageInfo=x.getCurrentPageInfo=function(){return{objId:cr[Fe].objId,pageNumber:Fe,pageContext:cr[Fe]}};x.addPage=function(){return nA.apply(this,arguments),this},x.setPage=function(){return sa.apply(this,arguments),Pt.call(this,Qt[Fe]),this},x.insertPage=function(N){return this.addPage(),this.movePage(Fe,N),this},x.movePage=function(N,oe){var ke,et;if(N>oe){ke=Qt[N],et=cr[N];for(var _t=N;_t>oe;_t--)Qt[_t]=Qt[_t-1],cr[_t]=cr[_t-1];Qt[oe]=ke,cr[oe]=et,this.setPage(oe)}else if(N<oe){ke=Qt[N],et=cr[N];for(var Jt=N;Jt<oe;Jt++)Qt[Jt]=Qt[Jt+1],cr[Jt]=cr[Jt+1];Qt[oe]=ke,cr[oe]=et,this.setPage(oe)}return this},x.deletePage=function(){return EA.apply(this,arguments),this},x.__private__.text=x.text=function(N,oe,ke,et,_t){var Jt,_r,en,En,Dn,Kn,Wn,pi,mi,Tn=(et=et||{}).scope||this;if(typeof N=="number"&&typeof oe=="number"&&(typeof ke=="string"||Array.isArray(ke))){var Es=ke;ke=oe,oe=N,N=Es}if(arguments[3]instanceof tn?(Ae("The transform parameter of text() with a Matrix value"),mi=_t):(en=arguments[4],En=arguments[5],qi(Wn=arguments[3])==="object"&&Wn!==null||(typeof en=="string"&&(En=en,en=null),typeof Wn=="string"&&(En=Wn,Wn=null),typeof Wn=="number"&&(en=Wn,Wn=null),et={flags:Wn,angle:en,align:En})),isNaN(oe)||isNaN(ke)||N==null)throw new Error("Invalid arguments passed to jsPDF.text");if(N.length===0)return Tn;var rs="",Ws=!1,ns=typeof et.lineHeightFactor=="number"?et.lineHeightFactor:Aa,Si=Tn.internal.scaleFactor;function gl(Ii){return Ii=Ii.split("	").join(Array(et.TabLen||9).join(" ")),Xi(Ii,Wn)}function la(Ii){for(var Ai,Bi=Ii.concat(),Zi=[],Sr=Bi.length;Sr--;)typeof(Ai=Bi.shift())=="string"?Zi.push(Ai):Array.isArray(Ii)&&(Ai.length===1||Ai[1]===void 0&&Ai[2]===void 0)?Zi.push(Ai[0]):Zi.push([Ai[0],Ai[1],Ai[2]]);return Zi}function ki(Ii,Ai){var Bi;if(typeof Ii=="string")Bi=Ai(Ii)[0];else if(Array.isArray(Ii)){for(var Zi,Sr,Ra=Ii.concat(),LA=[],QA=Ra.length;QA--;)typeof(Zi=Ra.shift())=="string"?LA.push(Ai(Zi)[0]):Array.isArray(Zi)&&typeof Zi[0]=="string"&&(Sr=Ai(Zi[0],Zi[1],Zi[2]),LA.push([Sr[0],Sr[1],Sr[2]]));Bi=LA}return Bi}var xa=!1,Mi=!0;if(typeof N=="string")xa=!0;else if(Array.isArray(N)){var Da=N.concat();_r=[];for(var Ba,is=Da.length;is--;)(typeof(Ba=Da.shift())!="string"||Array.isArray(Ba)&&typeof Ba[0]!="string")&&(Mi=!1);xa=Mi}if(xa===!1)throw new Error('Type of text must be string or Array. "'+N+'" is not recognized.');typeof N=="string"&&(N=N.match(/[\r?\n]/)?N.split(/\r\n|\r|\n/g):[N]);var hi=fr/Tn.internal.scaleFactor,cA=hi*(ns-1);switch(et.baseline){case"bottom":ke-=cA;break;case"top":ke+=hi-cA;break;case"hanging":ke+=hi-2*cA;break;case"middle":ke+=hi/2-cA}if((Kn=et.maxWidth||0)>0&&(typeof N=="string"?N=Tn.splitTextToSize(N,Kn):Object.prototype.toString.call(N)==="[object Array]"&&(N=N.reduce(function(Ii,Ai){return Ii.concat(Tn.splitTextToSize(Ai,Kn))},[]))),Jt={text:N,x:oe,y:ke,options:et,mutex:{pdfEscape:Xi,activeFontKey:bt,fonts:Fr,activeFontSize:fr}},Kr.publish("preProcessText",Jt),N=Jt.text,en=(et=Jt.options).angle,!(mi instanceof tn)&&en&&typeof en=="number"){en*=Math.PI/180,et.rotationDirection===0&&(en=-en),G===O.ADVANCED&&(en=-en);var so=Math.cos(en),uA=Math.sin(en);mi=new tn(so,uA,-uA,so,0,0)}else en&&en instanceof tn&&(mi=en);G!==O.ADVANCED||mi||(mi=hs),(Dn=et.charSpace||_a)!==void 0&&(rs+=fe(ne(Dn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(pi=et.horizontalScale)!==void 0&&(rs+=fe(100*pi)+` Tz
`),et.lang;var Fs=-1,xo=et.renderingMode!==void 0?et.renderingMode:et.stroke,ao=Tn.internal.getCurrentPageInfo().pageContext;switch(xo){case 0:case!1:case"fill":Fs=0;break;case 1:case!0:case"stroke":Fs=1;break;case 2:case"fillThenStroke":Fs=2;break;case 3:case"invisible":Fs=3;break;case 4:case"fillAndAddForClipping":Fs=4;break;case 5:case"strokeAndAddPathForClipping":Fs=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Fs=6;break;case 7:case"addToPathForClipping":Fs=7}var Ro=ao.usedRenderingMode!==void 0?ao.usedRenderingMode:-1;Fs!==-1?rs+=Fs+` Tr
`:Ro!==-1&&(rs+=`0 Tr
`),Fs!==-1&&(ao.usedRenderingMode=Fs),En=et.align||"left";var zi,Ns=fr*ns,oo=Tn.internal.pageSize.getWidth(),ss=Fr[bt];Dn=et.charSpace||_a,Kn=et.maxWidth||0,Wn=Object.assign({autoencode:!0,noBOM:!0},et.flags);var js=[];if(Object.prototype.toString.call(N)==="[object Array]"){var Ss;_r=la(N),En!=="left"&&(zi=_r.map(function(Ii){return Tn.getStringUnitWidth(Ii,{font:ss,charSpace:Dn,fontSize:fr,doKerning:!1})*fr/Si}));var Ca,ca=0;if(En==="right"){oe-=zi[0],N=[],is=_r.length;for(var Xs=0;Xs<is;Xs++)Xs===0?(Ca=no(oe),Ss=io(ke)):(Ca=ne(ca-zi[Xs]),Ss=-Ns),N.push([_r[Xs],Ca,Ss]),ca=zi[Xs]}else if(En==="center"){oe-=zi[0]/2,N=[],is=_r.length;for(var as=0;as<is;as++)as===0?(Ca=no(oe),Ss=io(ke)):(Ca=ne((ca-zi[as])/2),Ss=-Ns),N.push([_r[as],Ca,Ss]),ca=zi[as]}else if(En==="left"){N=[],is=_r.length;for(var ua=0;ua<is;ua++)N.push(_r[ua])}else{if(En!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');N=[],is=_r.length,Kn=Kn!==0?Kn:oo;for(var gi=0;gi<is;gi++)Ss=gi===0?io(ke):-Ns,Ca=gi===0?no(oe):0,gi<is-1?js.push(fe(ne((Kn-zi[gi])/(_r[gi].split(" ").length-1)))):js.push(0),N.push([_r[gi],Ca,Ss])}}var ZA=typeof et.R2L=="boolean"?et.R2L:Gr;ZA===!0&&(N=ki(N,function(Ii,Ai,Bi){return[Ii.split("").reverse().join(""),Ai,Bi]})),Jt={text:N,x:oe,y:ke,options:et,mutex:{pdfEscape:Xi,activeFontKey:bt,fonts:Fr,activeFontSize:fr}},Kr.publish("postProcessText",Jt),N=Jt.text,Ws=Jt.mutex.isHex||!1;var Na=Fr[bt].encoding;Na!=="WinAnsiEncoding"&&Na!=="StandardEncoding"||(N=ki(N,function(Ii,Ai,Bi){return[gl(Ii),Ai,Bi]})),_r=la(N),N=[];for(var ja,fs,Ea,Oo=0,Rs=1,hA=Array.isArray(_r[0])?Rs:Oo,Ao="",zo=function(Ii,Ai,Bi){var Zi="";return Bi instanceof tn?(Bi=typeof et.angle=="number"?Wi(Bi,new tn(1,0,0,1,Ii,Ai)):Wi(new tn(1,0,0,1,Ii,Ai),Bi),G===O.ADVANCED&&(Bi=Wi(new tn(1,0,0,-1,0,0),Bi)),Zi=Bi.join(" ")+` Tm
`):Zi=fe(Ii)+" "+fe(Ai)+` Td
`,Zi},Hi=0;Hi<_r.length;Hi++){switch(Ao="",hA){case Rs:Ea=(Ws?"<":"(")+_r[Hi][0]+(Ws?">":")"),ja=parseFloat(_r[Hi][1]),fs=parseFloat(_r[Hi][2]);break;case Oo:Ea=(Ws?"<":"(")+_r[Hi]+(Ws?">":")"),ja=no(oe),fs=io(ke)}js!==void 0&&js[Hi]!==void 0&&(Ao=js[Hi]+` Tw
`),Hi===0?N.push(Ao+zo(ja,fs,mi)+Ea):hA===Oo?N.push(Ao+Ea):hA===Rs&&N.push(Ao+zo(ja,fs,mi)+Ea)}N=hA===Oo?N.join(` Tj
T* `):N.join(` Tj
`),N+=` Tj
`;var kr=`BT
/`;return kr+=bt+" "+fr+` Tf
`,kr+=fe(fr*ns)+` TL
`,kr+=AA+`
`,kr+=rs,kr+=N,Oe(kr+="ET"),w[bt]=!0,Tn};var pl=x.__private__.clip=x.clip=function(N){return Oe(N==="evenodd"?"W*":"W"),this};x.clipEvenOdd=function(){return pl("evenodd")},x.__private__.discardPath=x.discardPath=function(){return Oe("n"),this};var Ma=x.__private__.isValidStyle=function(N){var oe=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(N)!==-1&&(oe=!0),oe};x.__private__.setDefaultPathOperation=x.setDefaultPathOperation=function(N){return Ma(N)&&(_=N),this};var _o=x.__private__.getStyle=x.getStyle=function(N){var oe=_;switch(N){case"D":case"S":oe="S";break;case"F":oe="f";break;case"FD":case"DF":oe="B";break;case"f":case"f*":case"B":case"B*":oe=N}return oe},aA=x.close=function(){return Oe("h"),this};x.stroke=function(){return Oe("S"),this},x.fill=function(N){return wo("f",N),this},x.fillEvenOdd=function(N){return wo("f*",N),this},x.fillStroke=function(N){return wo("B",N),this},x.fillStrokeEvenOdd=function(N){return wo("B*",N),this};var wo=function(N,oe){qi(oe)==="object"?Ds(oe,N):Oe(N)},gt=function(N){N===null||G===O.ADVANCED&&N===void 0||(N=_o(N),Oe(N))};function Mn(N,oe,ke,et,_t){var Jt=new Vu(oe||this.boundingBox,ke||this.xStep,et||this.yStep,this.gState,_t||this.matrix);Jt.stream=this.stream;var _r=N+"$$"+this.cloneIndex+++"$$";return Ln(_r,Jt),Jt}var Ds=function(N,oe){var ke=An[N.key],et=Er[ke];if(et instanceof gu)Oe("q"),Oe(Oi(oe)),et.gState&&x.setGState(et.gState),Oe(N.matrix.toString()+" cm"),Oe("/"+ke+" sh"),Oe("Q");else if(et instanceof Vu){var _t=new tn(1,0,0,-1,0,ba());N.matrix&&(_t=_t.multiply(N.matrix||hs),ke=Mn.call(et,N.key,N.boundingBox,N.xStep,N.yStep,_t).id),Oe("q"),Oe("/Pattern cs"),Oe("/"+ke+" scn"),et.gState&&x.setGState(et.gState),Oe(oe),Oe("Q")}},Oi=function(N){switch(N){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Ps=x.moveTo=function(N,oe){return Oe(fe(ne(N))+" "+fe(ve(oe))+" m"),this},ya=x.lineTo=function(N,oe){return Oe(fe(ne(N))+" "+fe(ve(oe))+" l"),this},eo=x.curveTo=function(N,oe,ke,et,_t,Jt){return Oe([fe(ne(N)),fe(ve(oe)),fe(ne(ke)),fe(ve(et)),fe(ne(_t)),fe(ve(Jt)),"c"].join(" ")),this};x.__private__.line=x.line=function(N,oe,ke,et,_t){if(isNaN(N)||isNaN(oe)||isNaN(ke)||isNaN(et)||!Ma(_t))throw new Error("Invalid arguments passed to jsPDF.line");return G===O.COMPAT?this.lines([[ke-N,et-oe]],N,oe,[1,1],_t||"S"):this.lines([[ke-N,et-oe]],N,oe,[1,1]).stroke()},x.__private__.lines=x.lines=function(N,oe,ke,et,_t,Jt){var _r,en,En,Dn,Kn,Wn,pi,mi,Tn,Es,rs,Ws;if(typeof N=="number"&&(Ws=ke,ke=oe,oe=N,N=Ws),et=et||[1,1],Jt=Jt||!1,isNaN(oe)||isNaN(ke)||!Array.isArray(N)||!Array.isArray(et)||!Ma(_t)||typeof Jt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ps(oe,ke),_r=et[0],en=et[1],Dn=N.length,Es=oe,rs=ke,En=0;En<Dn;En++)(Kn=N[En]).length===2?(Es=Kn[0]*_r+Es,rs=Kn[1]*en+rs,ya(Es,rs)):(Wn=Kn[0]*_r+Es,pi=Kn[1]*en+rs,mi=Kn[2]*_r+Es,Tn=Kn[3]*en+rs,Es=Kn[4]*_r+Es,rs=Kn[5]*en+rs,eo(Wn,pi,mi,Tn,Es,rs));return Jt&&aA(),gt(_t),this},x.path=function(N){for(var oe=0;oe<N.length;oe++){var ke=N[oe],et=ke.c;switch(ke.op){case"m":Ps(et[0],et[1]);break;case"l":ya(et[0],et[1]);break;case"c":eo.apply(this,et);break;case"h":aA()}}return this},x.__private__.rect=x.rect=function(N,oe,ke,et,_t){if(isNaN(N)||isNaN(oe)||isNaN(ke)||isNaN(et)||!Ma(_t))throw new Error("Invalid arguments passed to jsPDF.rect");return G===O.COMPAT&&(et=-et),Oe([fe(ne(N)),fe(ve(oe)),fe(ne(ke)),fe(ne(et)),"re"].join(" ")),gt(_t),this},x.__private__.triangle=x.triangle=function(N,oe,ke,et,_t,Jt,_r){if(isNaN(N)||isNaN(oe)||isNaN(ke)||isNaN(et)||isNaN(_t)||isNaN(Jt)||!Ma(_r))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ke-N,et-oe],[_t-ke,Jt-et],[N-_t,oe-Jt]],N,oe,[1,1],_r,!0),this},x.__private__.roundedRect=x.roundedRect=function(N,oe,ke,et,_t,Jt,_r){if(isNaN(N)||isNaN(oe)||isNaN(ke)||isNaN(et)||isNaN(_t)||isNaN(Jt)||!Ma(_r))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var en=4/3*(Math.SQRT2-1);return _t=Math.min(_t,.5*ke),Jt=Math.min(Jt,.5*et),this.lines([[ke-2*_t,0],[_t*en,0,_t,Jt-Jt*en,_t,Jt],[0,et-2*Jt],[0,Jt*en,-_t*en,Jt,-_t,Jt],[2*_t-ke,0],[-_t*en,0,-_t,-Jt*en,-_t,-Jt],[0,2*Jt-et],[0,-Jt*en,_t*en,-Jt,_t,-Jt]],N+_t,oe,[1,1],_r,!0),this},x.__private__.ellipse=x.ellipse=function(N,oe,ke,et,_t){if(isNaN(N)||isNaN(oe)||isNaN(ke)||isNaN(et)||!Ma(_t))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Jt=4/3*(Math.SQRT2-1)*ke,_r=4/3*(Math.SQRT2-1)*et;return Ps(N+ke,oe),eo(N+ke,oe-_r,N+Jt,oe-et,N,oe-et),eo(N-Jt,oe-et,N-ke,oe-_r,N-ke,oe),eo(N-ke,oe+_r,N-Jt,oe+et,N,oe+et),eo(N+Jt,oe+et,N+ke,oe+_r,N+ke,oe),gt(_t),this},x.__private__.circle=x.circle=function(N,oe,ke,et){if(isNaN(N)||isNaN(oe)||isNaN(ke)||!Ma(et))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(N,oe,ke,ke,et)},x.setFont=function(N,oe,ke){return ke&&(oe=$(oe,ke)),bt=xs(N,oe,{disableWarning:!1}),this};var Cs=x.__private__.getFont=x.getFont=function(){return Fr[xs.apply(x,arguments)]};x.__private__.getFontList=x.getFontList=function(){var N,oe,ke={};for(N in un)if(un.hasOwnProperty(N))for(oe in ke[N]=[],un[N])un[N].hasOwnProperty(oe)&&ke[N].push(oe);return ke},x.addFont=function(N,oe,ke,et,_t){var Jt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Jt.indexOf(arguments[3])!==-1?_t=arguments[3]:arguments[3]&&Jt.indexOf(arguments[3])==-1&&(ke=$(ke,et)),_t=_t||"Identity-H",Gs.call(this,N,oe,ke,_t)};var Aa,to=e.lineWidth||.200025,va=x.__private__.getLineWidth=x.getLineWidth=function(){return to},qA=x.__private__.setLineWidth=x.setLineWidth=function(N){return to=N,Oe(fe(ne(N))+" w"),this};x.__private__.setLineDash=Nn.API.setLineDash=Nn.API.setLineDashPattern=function(N,oe){if(N=N||[],oe=oe||0,isNaN(oe)||!Array.isArray(N))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return N=N.map(function(ke){return fe(ne(ke))}).join(" "),oe=fe(ne(oe)),Oe("["+N+"] "+oe+" d"),this};var ts=x.__private__.getLineHeight=x.getLineHeight=function(){return fr*Aa};x.__private__.getLineHeight=x.getLineHeight=function(){return fr*Aa};var FA=x.__private__.setLineHeightFactor=x.setLineHeightFactor=function(N){return typeof(N=N||1.15)=="number"&&(Aa=N),this},ro=x.__private__.getLineHeightFactor=x.getLineHeightFactor=function(){return Aa};FA(e.lineHeight);var no=x.__private__.getHorizontalCoordinate=function(N){return ne(N)},io=x.__private__.getVerticalCoordinate=function(N){return G===O.ADVANCED?N:cr[Fe].mediaBox.topRightY-cr[Fe].mediaBox.bottomLeftY-ne(N)},ql=x.__private__.getHorizontalCoordinateString=x.getHorizontalCoordinateString=function(N){return fe(no(N))},No=x.__private__.getVerticalCoordinateString=x.getVerticalCoordinateString=function(N){return fe(io(N))},vs=e.strokeColor||"0 G";x.__private__.getStrokeColor=x.getDrawColor=function(){return Xe(vs)},x.__private__.setStrokeColor=x.setDrawColor=function(N,oe,ke,et){return vs=lt({ch1:N,ch2:oe,ch3:ke,ch4:et,pdfColorType:"draw",precision:2}),Oe(vs),this};var oA=e.fillColor||"0 g";x.__private__.getFillColor=x.getFillColor=function(){return Xe(oA)},x.__private__.setFillColor=x.setFillColor=function(N,oe,ke,et){return oA=lt({ch1:N,ch2:oe,ch3:ke,ch4:et,pdfColorType:"fill",precision:2}),Oe(oA),this};var AA=e.textColor||"0 g",_c=x.__private__.getTextColor=x.getTextColor=function(){return Xe(AA)};x.__private__.setTextColor=x.setTextColor=function(N,oe,ke,et){return AA=lt({ch1:N,ch2:oe,ch3:ke,ch4:et,pdfColorType:"text",precision:3}),this};var _a=e.charSpace,WA=x.__private__.getCharSpace=x.getCharSpace=function(){return parseFloat(_a||0)};x.__private__.setCharSpace=x.setCharSpace=function(N){if(isNaN(N))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return _a=N,this};var SA=0;x.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},x.__private__.setLineCap=x.setLineCap=function(N){var oe=x.CapJoinStyles[N];if(oe===void 0)throw new Error("Line cap style of '"+N+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return SA=oe,Oe(oe+" J"),this};var IA=0;x.__private__.setLineJoin=x.setLineJoin=function(N){var oe=x.CapJoinStyles[N];if(oe===void 0)throw new Error("Line join style of '"+N+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return IA=oe,Oe(oe+" j"),this},x.__private__.setLineMiterLimit=x.__private__.setMiterLimit=x.setLineMiterLimit=x.setMiterLimit=function(N){if(N=N||0,isNaN(N))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Oe(fe(ne(N))+" M"),this},x.GState=nd,x.setGState=function(N){(N=typeof N=="string"?wn[_i[N]]:TA(null,N)).equals(br)||(Oe("/"+N.id+" gs"),br=N)};var TA=function(N,oe){if(!N||!_i[N]){var ke=!1;for(var et in wn)if(wn.hasOwnProperty(et)&&wn[et].equals(oe)){ke=!0;break}if(ke)oe=wn[et];else{var _t="GS"+(Object.keys(wn).length+1).toString(10);wn[_t]=oe,oe.id=_t}return N&&(_i[N]=oe.id),Kr.publish("addGState",oe),oe}};x.addGState=function(N,oe){return TA(N,oe),this},x.saveGraphicsState=function(){return Oe("q"),lr.push({key:bt,size:fr,color:AA}),this},x.restoreGraphicsState=function(){Oe("Q");var N=lr.pop();return bt=N.key,fr=N.size,AA=N.color,br=null,this},x.setCurrentTransformationMatrix=function(N){return Oe(N.toString()+" cm"),this},x.comment=function(N){return Oe("#"+N),this};var lA=function(N,oe){var ke=N||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ke},set:function(Jt){isNaN(Jt)||(ke=parseFloat(Jt))}});var et=oe||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return et},set:function(Jt){isNaN(Jt)||(et=parseFloat(Jt))}});var _t="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return _t},set:function(Jt){_t=Jt.toString()}}),this},UA=function(N,oe,ke,et){lA.call(this,N,oe),this.type="rect";var _t=ke||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return _t},set:function(_r){isNaN(_r)||(_t=parseFloat(_r))}});var Jt=et||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Jt},set:function(_r){isNaN(_r)||(Jt=parseFloat(_r))}}),this},bo=function(){this.page=Cr,this.currentPage=Fe,this.pages=Qt.slice(0),this.pagesContext=cr.slice(0),this.x=jt,this.y=er,this.matrix=Vr,this.width=wa(Fe),this.height=ba(Fe),this.outputDestination=Nt,this.id="",this.objectNumber=-1};bo.prototype.restore=function(){Cr=this.page,Fe=this.currentPage,cr=this.pagesContext,Qt=this.pages,jt=this.x,er=this.y,Vr=this.matrix,XA(Fe,this.width),xi(Fe,this.height),Nt=this.outputDestination};var ml=function(N,oe,ke,et,_t){ji.push(new bo),Cr=Fe=0,Qt=[],jt=N,er=oe,Vr=_t,vo([ke,et])},Wl=function(N){if(Sn[N])ji.pop().restore();else{var oe=new bo,ke="Xo"+(Object.keys(xn).length+1).toString(10);oe.id=ke,Sn[N]=ke,xn[ke]=oe,Kr.publish("addFormObject",oe),ji.pop().restore()}};for(var jo in x.beginFormObject=function(N,oe,ke,et,_t){return ml(N,oe,ke,et,_t),this},x.endFormObject=function(N){return Wl(N),this},x.doFormObject=function(N,oe){var ke=xn[Sn[N]];return Oe("q"),Oe(oe.toString()+" cm"),Oe("/"+ke.id+" Do"),Oe("Q"),this},x.getFormObject=function(N){var oe=xn[Sn[N]];return{x:oe.x,y:oe.y,width:oe.width,height:oe.height,matrix:oe.matrix}},x.save=function(N,oe){return N=N||"generated.pdf",(oe=oe||{}).returnPromise=oe.returnPromise||!1,oe.returnPromise===!1?(Ru(qs(oa()),N),typeof Ru.unload=="function"&&zn.setTimeout&&setTimeout(Ru.unload,911),this):new Promise(function(ke,et){try{var _t=Ru(qs(oa()),N);typeof Ru.unload=="function"&&zn.setTimeout&&setTimeout(Ru.unload,911),ke(_t)}catch(Jt){et(Jt.message)}})},Nn.API)Nn.API.hasOwnProperty(jo)&&(jo==="events"&&Nn.API.events.length?function(N,oe){var ke,et,_t;for(_t=oe.length-1;_t!==-1;_t--)ke=oe[_t][0],et=oe[_t][1],N.subscribe.apply(N,[ke].concat(typeof et=="function"?[et]:et))}(Kr,Nn.API.events):x[jo]=Nn.API[jo]);var wa=x.getPageWidth=function(N){return(cr[N=N||Fe].mediaBox.topRightX-cr[N].mediaBox.bottomLeftX)/Ct},XA=x.setPageWidth=function(N,oe){cr[N].mediaBox.topRightX=oe*Ct+cr[N].mediaBox.bottomLeftX},ba=x.getPageHeight=function(N){return(cr[N=N||Fe].mediaBox.topRightY-cr[N].mediaBox.bottomLeftY)/Ct},xi=x.setPageHeight=function(N,oe){cr[N].mediaBox.topRightY=oe*Ct+cr[N].mediaBox.bottomLeftY};return x.internal={pdfEscape:Xi,getStyle:_o,getFont:Cs,getFontSize:vr,getCharSpace:WA,getTextColor:_c,getLineHeight:ts,getLineHeightFactor:ro,getLineWidth:va,write:pr,getHorizontalCoordinate:no,getVerticalCoordinate:io,getCoordinateString:ql,getVerticalCoordinateString:No,collections:{},newObject:nn,newAdditionalObject:le,newObjectDeferred:Ie,newObjectDeferredBegin:Y,getFilters:Ye,putStream:qe,events:Kr,scaleFactor:Ct,pageSize:{getWidth:function(){return wa(Fe)},setWidth:function(N){XA(Fe,N)},getHeight:function(){return ba(Fe)},setHeight:function(N){xi(Fe,N)}},encryptionOptions:p,encryption:ys,getEncryptor:iA,output:ii,getNumberOfPages:bs,pages:Qt,out:Oe,f2:he,f3:ee,getPageInfo:sA,getPageInfoByObjId:Cn,getCurrentPageInfo:GA,getPDFVersion:P,Point:lA,Rectangle:UA,Matrix:tn,hasHotfix:Bs},Object.defineProperty(x.internal.pageSize,"width",{get:function(){return wa(Fe)},set:function(N){XA(Fe,N)},enumerable:!0,configurable:!0}),Object.defineProperty(x.internal.pageSize,"height",{get:function(){return ba(Fe)},set:function(N){xi(Fe,N)},enumerable:!0,configurable:!0}),ia.call(x,zt),bt="F1",nA(l,r),Kr.publish("initialized"),x}jh.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},jh.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},jh.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},jh.prototype.processOwnerPassword=function(e,t){return bg(wg(t).substr(0,5),e)},jh.prototype.encryptor=function(e,t){var r=wg(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(s){return bg(r,s)}},nd.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||qi(e)!==qi(this))return!1;var s=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;s++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&s--;return s===0},Nn.API={events:[]},Nn.version="2.5.1";var Vs=Nn.API,Jg=1,Ah=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Mh=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Jn=function(e){return e.toFixed(2)},mu=function(e){return e.toFixed(5)};Vs.__acroform__={};var CA=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},Fy=function(e){return e*Jg},uc=function(e){var t=new u_,r=yn.internal.getHeight(e)||0,s=yn.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Jn(s)),Number(Jn(r))],t},OF=Vs.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},zF=Vs.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},HF=Vs.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},ta=Vs.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return HF(e,t-1)},ra=Vs.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return OF(e,t-1)},na=Vs.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return zF(e,t-1)},VF=Vs.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,s=t.internal.getVerticalCoordinate,l=e[0],c=e[1],h=e[2],a=e[3],d={};return d.lowerLeft_X=r(l)||0,d.lowerLeft_Y=s(c+a)||0,d.upperRight_X=r(l+h)||0,d.upperRight_Y=s(c)||0,[Number(Jn(d.lowerLeft_X)),Number(Jn(d.lowerLeft_Y)),Number(Jn(d.upperRight_X)),Number(Jn(d.upperRight_Y))]},KF=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,s=xg(e,r),l=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+l+" "+Jn(s.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC");var c=uc(e);return c.scope=e.scope,c.stream=t.join(`
`),c}},xg=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,s={text:"",fontSize:""},l=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");l=e.multiline?l.map(function(ee){return ee.split(`
`)}):l.map(function(ee){return[ee]});var c=r,h=yn.internal.getHeight(e)||0;h=h<0?-h:h;var a=yn.internal.getWidth(e)||0;a=a<0?-a:a;var d=function(ee,ne,xe){if(ee+1<l.length){var ve=ne+" "+l[ee+1][0];return sp(ve,e,xe).width<=a-4}return!1};c++;e:for(;c>0;){t="",c--;var _,p,E=sp("3",e,c).height,w=e.multiline?h-c:(h-E)/2,x=w+=2,Q=0,P=0,R=0;if(c<=0){t=`(...) Tj
`,t+="% Width of Text: "+sp(t,e,c=12).width+", FieldWidth:"+a+`
`;break}for(var k="",O=0,G=0;G<l.length;G++)if(l.hasOwnProperty(G)){var K=!1;if(l[G].length!==1&&R!==l[G].length-1){if((E+2)*(O+2)+2>h)continue e;k+=l[G][R],K=!0,P=G,G--}else{k=(k+=l[G][R]+" ").substr(k.length-1)==" "?k.substr(0,k.length-1):k;var Z=parseInt(G),$=d(Z,k,c),fe=G>=l.length-1;if($&&!fe){k+=" ",R=0;continue}if($||fe){if(fe)P=Z;else if(e.multiline&&(E+2)*(O+2)+2>h)continue e}else{if(!e.multiline||(E+2)*(O+2)+2>h)continue e;P=Z}}for(var Ae="",ge=Q;ge<=P;ge++){var he=l[ge];if(e.multiline){if(ge===P){Ae+=he[R]+" ",R=(R+1)%he.length;continue}if(ge===Q){Ae+=he[he.length-1]+" ";continue}}Ae+=he[0]+" "}switch(Ae=Ae.substr(Ae.length-1)==" "?Ae.substr(0,Ae.length-1):Ae,p=sp(Ae,e,c).width,e.textAlign){case"right":_=a-p-2;break;case"center":_=(a-p)/2;break;case"left":default:_=2}t+=Jn(_)+" "+Jn(x)+` Td
`,t+="("+Ah(Ae)+`) Tj
`,t+=-Jn(_)+` 0 Td
`,x=-(c+2),p=0,Q=K?P:P+1,O++,k=""}break}return s.text=t,s.fontSize=c,s},sp=function(e,t,r){var s=t.scope.internal.getFont(t.fontName,t.fontStyle),l=t.scope.getStringUnitWidth(e,{font:s,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:s,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:l}},GF={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},qF=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(s){return s.type===r.type&&s.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},WF=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var s=r,l=e[r];t.internal.newObjectDeferredBegin(l.objId,!0),qi(l)==="object"&&typeof l.putStream=="function"&&l.putStream(),delete e[s]}},XF=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Kl.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(GF)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Jg=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new h_,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var s=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var l in s)if(s.hasOwnProperty(l)){var c=s[l];c.objId=void 0,c.hasAnnotation&&qF(c,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(s,l){var c=!s;for(var h in s||(l.internal.newObjectDeferredBegin(l.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),l.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),s=s||l.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(s.hasOwnProperty(h)){var a=s[h],d=[],_=a.Rect;if(a.Rect&&(a.Rect=VF(a.Rect,l)),l.internal.newObjectDeferredBegin(a.objId,!0),a.DA=yn.createDefaultAppearanceStream(a),qi(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(d=a.getKeyValueListForStream()),a.Rect=_,a.hasAppearanceStream&&!a.appearanceStreamContent){var p=KF(a);d.push({key:"AP",value:"<</N "+p+">>"}),l.internal.acroformPlugin.xForms.push(p)}if(a.appearanceStreamContent){var E="";for(var w in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(w)){var x=a.appearanceStreamContent[w];if(E+="/"+w+" ",E+="<<",Object.keys(x).length>=1||Array.isArray(x)){for(var h in x)if(x.hasOwnProperty(h)){var Q=x[h];typeof Q=="function"&&(Q=Q.call(l,a)),E+="/"+h+" "+Q+" ",l.internal.acroformPlugin.xForms.indexOf(Q)>=0||l.internal.acroformPlugin.xForms.push(Q)}}else typeof(Q=x)=="function"&&(Q=Q.call(l,a)),E+="/"+h+" "+Q,l.internal.acroformPlugin.xForms.indexOf(Q)>=0||l.internal.acroformPlugin.xForms.push(Q);E+=">>"}d.push({key:"AP",value:`<<
`+E+">>"})}l.internal.putStream({additionalKeyValues:d,objectId:a.objId}),l.internal.out("endobj")}c&&WF(l.internal.acroformPlugin.xForms,l)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},c_=Vs.__acroform__.arrayToPdfArray=function(e,t,r){var s=function(h){return h};if(Array.isArray(e)){for(var l="[",c=0;c<e.length;c++)switch(c!==0&&(l+=" "),qi(e[c])){case"boolean":case"number":case"object":l+=e[c].toString();break;case"string":e[c].substr(0,1)!=="/"?(t!==void 0&&r&&(s=r.internal.getEncryptor(t)),l+="("+Ah(s(e[c].toString()))+")"):l+=e[c].toString()}return l+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Om=function(e,t,r){var s=function(l){return l};return t!==void 0&&r&&(s=r.internal.getEncryptor(t)),(e=e||"").toString(),e="("+Ah(s(e))+")"},dc=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};dc.prototype.toString=function(){return this.objId+" 0 R"},dc.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},dc.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(c){return c!="content"&&c!="appearanceStreamContent"&&c!="scope"&&c!="objId"&&c.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var s=t[r],l=this[s];l&&(Array.isArray(l)?e.push({key:s,value:c_(l,this.objId,this.scope)}):l instanceof dc?(l.scope=this.scope,e.push({key:s,value:l.objId+" 0 R"})):typeof l!="function"&&e.push({key:s,value:l}))}return e};var u_=function(){dc.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};CA(u_,dc);var h_=function(){dc.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(s){return s};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Ah(r(e))+")"}},set:function(r){e=r}})};CA(h_,dc);var Kl=function e(){dc.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(k){if(isNaN(k))throw new Error('Invalid value "'+k+'" for attribute F supplied.');t=k}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(t,3))},set:function(k){Boolean(k)===!0?this.F=ra(t,3):this.F=na(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(k){if(isNaN(k))throw new Error('Invalid value "'+k+'" for attribute Ff supplied.');r=k}});var s=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(s.length!==0)return s},set:function(k){s=k!==void 0?k:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[0])?0:s[0]},set:function(k){s[0]=k}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[1])?0:s[1]},set:function(k){s[1]=k}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[2])?0:s[2]},set:function(k){s[2]=k}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!s||isNaN(s[3])?0:s[3]},set:function(k){s[3]=k}});var l="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return l},set:function(k){switch(k){case"/Btn":case"/Tx":case"/Ch":case"/Sig":l=k;break;default:throw new Error('Invalid value "'+k+'" for attribute FT supplied.')}}});var c=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!c||c.length<1){if(this instanceof Up)return;c="FieldObject"+e.FieldNum++}var k=function(O){return O};return this.scope&&(k=this.scope.internal.getEncryptor(this.objId)),"("+Ah(k(c))+")"},set:function(k){c=k.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return c},set:function(k){c=k}});var h="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return h},set:function(k){h=k}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(k){a=k}});var d=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return d},set:function(k){d=k}});var _=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return _===void 0?50/Jg:_},set:function(k){_=k}});var p="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return p},set:function(k){p=k}});var E="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!E||this instanceof Up||this instanceof _u))return Om(E,this.objId,this.scope)},set:function(k){k=k.toString(),E=k}});var w=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(w)return this instanceof Qa?w:Om(w,this.objId,this.scope)},set:function(k){k=k.toString(),w=this instanceof Qa?k:k.substr(0,1)==="("?Mh(k.substr(1,k.length-2)):Mh(k)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Qa?Mh(w.substr(1,w.length-1)):w},set:function(k){k=k.toString(),w=this instanceof Qa?"/"+k:k}});var x=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(x)return x},set:function(k){this.V=k}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(x)return this instanceof Qa?x:Om(x,this.objId,this.scope)},set:function(k){k=k.toString(),x=this instanceof Qa?k:k.substr(0,1)==="("?Mh(k.substr(1,k.length-2)):Mh(k)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Qa?Mh(x.substr(1,x.length-1)):x},set:function(k){k=k.toString(),x=this instanceof Qa?"/"+k:k}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var Q,P=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return P},set:function(k){k=Boolean(k),P=k}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(Q)return Q},set:function(k){Q=k}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,1))},set:function(k){Boolean(k)===!0?this.Ff=ra(this.Ff,1):this.Ff=na(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,2))},set:function(k){Boolean(k)===!0?this.Ff=ra(this.Ff,2):this.Ff=na(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,3))},set:function(k){Boolean(k)===!0?this.Ff=ra(this.Ff,3):this.Ff=na(this.Ff,3)}});var R=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(R!==null)return R},set:function(k){if([0,1,2].indexOf(k)===-1)throw new Error('Invalid value "'+k+'" for attribute Q supplied.');R=k}}),Object.defineProperty(this,"textAlign",{get:function(){var k;switch(R){case 0:default:k="left";break;case 1:k="center";break;case 2:k="right"}return k},configurable:!0,enumerable:!0,set:function(k){switch(k){case"right":case 2:R=2;break;case"center":case 1:R=1;break;case"left":case 0:default:R=0}}})};CA(Kl,dc);var Gu=function(){Kl.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return c_(t,this.objId,this.scope)},set:function(r){var s,l;l=[],typeof(s=r)=="string"&&(l=function(c,h,a){a||(a=1);for(var d,_=[];d=h.exec(c);)_.push(d[a]);return _}(s,/\((.*?)\)/g)),t=l}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,s){for(s=s||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),s!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,18))},set:function(r){Boolean(r)===!0?this.Ff=ra(this.Ff,18):this.Ff=na(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,19))},set:function(r){this.combo===!0&&(Boolean(r)===!0?this.Ff=ra(this.Ff,19):this.Ff=na(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,20))},set:function(r){Boolean(r)===!0?(this.Ff=ra(this.Ff,20),t.sort()):this.Ff=na(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,22))},set:function(r){Boolean(r)===!0?this.Ff=ra(this.Ff,22):this.Ff=na(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,23))},set:function(r){Boolean(r)===!0?this.Ff=ra(this.Ff,23):this.Ff=na(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,27))},set:function(r){Boolean(r)===!0?this.Ff=ra(this.Ff,27):this.Ff=na(this.Ff,27)}}),this.hasAppearanceStream=!1};CA(Gu,Kl);var qu=function(){Gu.call(this),this.fontName="helvetica",this.combo=!1};CA(qu,Gu);var Wu=function(){qu.call(this),this.combo=!0};CA(Wu,qu);var Vf=function(){Wu.call(this),this.edit=!0};CA(Vf,Wu);var Qa=function(){Kl.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,15))},set:function(r){Boolean(r)===!0?this.Ff=ra(this.Ff,15):this.Ff=na(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,16))},set:function(r){Boolean(r)===!0?this.Ff=ra(this.Ff,16):this.Ff=na(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,17))},set:function(r){Boolean(r)===!0?this.Ff=ra(this.Ff,17):this.Ff=na(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,26))},set:function(r){Boolean(r)===!0?this.Ff=ra(this.Ff,26):this.Ff=na(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(c){return c};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var s,l=[];for(s in l.push("<<"),t)l.push("/"+s+" ("+Ah(r(t[s]))+")");return l.push(">>"),l.join(`
`)}},set:function(r){qi(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};CA(Qa,Kl);var Kf=function(){Qa.call(this),this.pushButton=!0};CA(Kf,Qa);var Xu=function(){Qa.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};CA(Xu,Qa);var Up=function(){var e,t;Kl.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(l){e=l}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(l){t=l}});var r,s={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var l=function(a){return a};this.scope&&(l=this.scope.internal.getEncryptor(this.objId));var c,h=[];for(c in h.push("<<"),s)h.push("/"+c+" ("+Ah(l(s[c]))+")");return h.push(">>"),h.join(`
`)},set:function(l){qi(l)==="object"&&(s=l)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return s.CA||""},set:function(l){typeof l=="string"&&(s.CA=l)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(l){r=l}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(l){r="/"+l}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=yn.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};CA(Up,Kl),Xu.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},Xu.prototype.createOption=function(e){var t=new Up;return t.Parent=this,t.optionName=e,this.Kids.push(t),ZF.call(this.scope,t),t};var Gf=function(){Qa.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=yn.CheckBox.createAppearanceStream()};CA(Gf,Qa);var _u=function(){Kl.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,13))},set:function(t){Boolean(t)===!0?this.Ff=ra(this.Ff,13):this.Ff=na(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,21))},set:function(t){Boolean(t)===!0?this.Ff=ra(this.Ff,21):this.Ff=na(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,23))},set:function(t){Boolean(t)===!0?this.Ff=ra(this.Ff,23):this.Ff=na(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,24))},set:function(t){Boolean(t)===!0?this.Ff=ra(this.Ff,24):this.Ff=na(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,25))},set:function(t){Boolean(t)===!0?this.Ff=ra(this.Ff,25):this.Ff=na(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,26))},set:function(t){Boolean(t)===!0?this.Ff=ra(this.Ff,26):this.Ff=na(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};CA(_u,Kl);var qf=function(){_u.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return Boolean(ta(this.Ff,14))},set:function(e){Boolean(e)===!0?this.Ff=ra(this.Ff,14):this.Ff=na(this.Ff,14)}}),this.password=!0};CA(qf,_u);var yn={CheckBox:{createAppearanceStream:function(){return{N:{On:yn.CheckBox.YesNormal},D:{On:yn.CheckBox.YesPushDown,Off:yn.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=uc(e);t.scope=e.scope;var r=[],s=e.scope.internal.getFont(e.fontName,e.fontStyle).id,l=e.scope.__private__.encodeColorString(e.color),c=xg(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+Jn(yn.internal.getWidth(e))+" "+Jn(yn.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+s+" "+Jn(c.fontSize)+" Tf "+l),r.push("BT"),r.push(c.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=uc(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,s=e.scope.__private__.encodeColorString(e.color),l=[],c=yn.internal.getHeight(e),h=yn.internal.getWidth(e),a=xg(e,e.caption);return l.push("1 g"),l.push("0 0 "+Jn(h)+" "+Jn(c)+" re"),l.push("f"),l.push("q"),l.push("0 0 1 rg"),l.push("0 0 "+Jn(h-1)+" "+Jn(c-1)+" re"),l.push("W"),l.push("n"),l.push("0 g"),l.push("BT"),l.push("/"+r+" "+Jn(a.fontSize)+" Tf "+s),l.push(a.text),l.push("ET"),l.push("Q"),t.stream=l.join(`
`),t},OffPushDown:function(e){var t=uc(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Jn(yn.internal.getWidth(e))+" "+Jn(yn.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:yn.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=yn.RadioButton.Circle.YesNormal,t.D[e]=yn.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=uc(e);t.scope=e.scope;var r=[],s=yn.internal.getWidth(e)<=yn.internal.getHeight(e)?yn.internal.getWidth(e)/4:yn.internal.getHeight(e)/4;s=Number((.9*s).toFixed(5));var l=yn.internal.Bezier_C,c=Number((s*l).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+mu(yn.internal.getWidth(e)/2)+" "+mu(yn.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+c+" "+c+" "+s+" 0 "+s+" c"),r.push("-"+c+" "+s+" -"+s+" "+c+" -"+s+" 0 c"),r.push("-"+s+" -"+c+" -"+c+" -"+s+" 0 -"+s+" c"),r.push(c+" -"+s+" "+s+" -"+c+" "+s+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=uc(e);t.scope=e.scope;var r=[],s=yn.internal.getWidth(e)<=yn.internal.getHeight(e)?yn.internal.getWidth(e)/4:yn.internal.getHeight(e)/4;s=Number((.9*s).toFixed(5));var l=Number((2*s).toFixed(5)),c=Number((l*yn.internal.Bezier_C).toFixed(5)),h=Number((s*yn.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+mu(yn.internal.getWidth(e)/2)+" "+mu(yn.internal.getHeight(e)/2)+" cm"),r.push(l+" 0 m"),r.push(l+" "+c+" "+c+" "+l+" 0 "+l+" c"),r.push("-"+c+" "+l+" -"+l+" "+c+" -"+l+" 0 c"),r.push("-"+l+" -"+c+" -"+c+" -"+l+" 0 -"+l+" c"),r.push(c+" -"+l+" "+l+" -"+c+" "+l+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+mu(yn.internal.getWidth(e)/2)+" "+mu(yn.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+h+" "+h+" "+s+" 0 "+s+" c"),r.push("-"+h+" "+s+" -"+s+" "+h+" -"+s+" 0 c"),r.push("-"+s+" -"+h+" -"+h+" -"+s+" 0 -"+s+" c"),r.push(h+" -"+s+" "+s+" -"+h+" "+s+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=uc(e);t.scope=e.scope;var r=[],s=yn.internal.getWidth(e)<=yn.internal.getHeight(e)?yn.internal.getWidth(e)/4:yn.internal.getHeight(e)/4;s=Number((.9*s).toFixed(5));var l=Number((2*s).toFixed(5)),c=Number((l*yn.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+mu(yn.internal.getWidth(e)/2)+" "+mu(yn.internal.getHeight(e)/2)+" cm"),r.push(l+" 0 m"),r.push(l+" "+c+" "+c+" "+l+" 0 "+l+" c"),r.push("-"+c+" "+l+" -"+l+" "+c+" -"+l+" 0 c"),r.push("-"+l+" -"+c+" -"+c+" -"+l+" 0 -"+l+" c"),r.push(c+" -"+l+" "+l+" -"+c+" "+l+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:yn.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=yn.RadioButton.Cross.YesNormal,t.D[e]=yn.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=uc(e);t.scope=e.scope;var r=[],s=yn.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+Jn(yn.internal.getWidth(e)-2)+" "+Jn(yn.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Jn(s.x1.x)+" "+Jn(s.x1.y)+" m"),r.push(Jn(s.x2.x)+" "+Jn(s.x2.y)+" l"),r.push(Jn(s.x4.x)+" "+Jn(s.x4.y)+" m"),r.push(Jn(s.x3.x)+" "+Jn(s.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=uc(e);t.scope=e.scope;var r=yn.internal.calculateCross(e),s=[];return s.push("0.749023 g"),s.push("0 0 "+Jn(yn.internal.getWidth(e))+" "+Jn(yn.internal.getHeight(e))+" re"),s.push("f"),s.push("q"),s.push("1 1 "+Jn(yn.internal.getWidth(e)-2)+" "+Jn(yn.internal.getHeight(e)-2)+" re"),s.push("W"),s.push("n"),s.push(Jn(r.x1.x)+" "+Jn(r.x1.y)+" m"),s.push(Jn(r.x2.x)+" "+Jn(r.x2.y)+" l"),s.push(Jn(r.x4.x)+" "+Jn(r.x4.y)+" m"),s.push(Jn(r.x3.x)+" "+Jn(r.x3.y)+" l"),s.push("s"),s.push("Q"),t.stream=s.join(`
`),t},OffPushDown:function(e){var t=uc(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Jn(yn.internal.getWidth(e))+" "+Jn(yn.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};yn.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=yn.internal.getWidth(e),r=yn.internal.getHeight(e),s=Math.min(t,r);return{x1:{x:(t-s)/2,y:(r-s)/2+s},x2:{x:(t-s)/2+s,y:(r-s)/2},x3:{x:(t-s)/2,y:(r-s)/2},x4:{x:(t-s)/2+s,y:(r-s)/2+s}}}},yn.internal.getWidth=function(e){var t=0;return qi(e)==="object"&&(t=Fy(e.Rect[2])),t},yn.internal.getHeight=function(e){var t=0;return qi(e)==="object"&&(t=Fy(e.Rect[3])),t};var ZF=Vs.addField=function(e){if(XF(this,e),!(e instanceof Kl))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Vs.AcroFormChoiceField=Gu,Vs.AcroFormListBox=qu,Vs.AcroFormComboBox=Wu,Vs.AcroFormEditBox=Vf,Vs.AcroFormButton=Qa,Vs.AcroFormPushButton=Kf,Vs.AcroFormRadioButton=Xu,Vs.AcroFormCheckBox=Gf,Vs.AcroFormTextField=_u,Vs.AcroFormPasswordField=qf,Vs.AcroFormAppearance=yn,Vs.AcroForm={ChoiceField:Gu,ListBox:qu,ComboBox:Wu,EditBox:Vf,Button:Qa,PushButton:Kf,RadioButton:Xu,CheckBox:Gf,TextField:_u,PasswordField:qf,Appearance:yn},Nn.AcroForm={ChoiceField:Gu,ListBox:qu,ComboBox:Wu,EditBox:Vf,Button:Qa,PushButton:Kf,RadioButton:Xu,CheckBox:Gf,TextField:_u,PasswordField:qf,Appearance:yn};var JF=Nn.AcroForm;function f_(e){return e.reduce(function(t,r,s){return t[r]=s,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},s=e.__addimage__.getImageFileTypeByImageData=function(ee,ne){var xe,ve,ze,Le,Ke,Ue=t;if((ne=ne||t)==="RGBA"||ee.data!==void 0&&ee.data instanceof Uint8ClampedArray&&"height"in ee&&"width"in ee)return"RGBA";if($(ee))for(Ke in r)for(ze=r[Ke],xe=0;xe<ze.length;xe+=1){for(Le=!0,ve=0;ve<ze[xe].length;ve+=1)if(ze[xe][ve]!==void 0&&ze[xe][ve]!==ee[ve]){Le=!1;break}if(Le===!0){Ue=Ke;break}}else for(Ke in r)for(ze=r[Ke],xe=0;xe<ze.length;xe+=1){for(Le=!0,ve=0;ve<ze[xe].length;ve+=1)if(ze[xe][ve]!==void 0&&ze[xe][ve]!==ee.charCodeAt(ve)){Le=!1;break}if(Le===!0){Ue=Ke;break}}return Ue===t&&ne!==t&&(Ue=ne),Ue},l=function ee(ne){for(var xe=this.internal.write,ve=this.internal.putStream,ze=(0,this.internal.getFilters)();ze.indexOf("FlateEncode")!==-1;)ze.splice(ze.indexOf("FlateEncode"),1);ne.objectId=this.internal.newObject();var Le=[];if(Le.push({key:"Type",value:"/XObject"}),Le.push({key:"Subtype",value:"/Image"}),Le.push({key:"Width",value:ne.width}),Le.push({key:"Height",value:ne.height}),ne.colorSpace===R.INDEXED?Le.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(ne.palette.length/3-1)+" "+("sMask"in ne&&ne.sMask!==void 0?ne.objectId+2:ne.objectId+1)+" 0 R]"}):(Le.push({key:"ColorSpace",value:"/"+ne.colorSpace}),ne.colorSpace===R.DEVICE_CMYK&&Le.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Le.push({key:"BitsPerComponent",value:ne.bitsPerComponent}),"decodeParameters"in ne&&ne.decodeParameters!==void 0&&Le.push({key:"DecodeParms",value:"<<"+ne.decodeParameters+">>"}),"transparency"in ne&&Array.isArray(ne.transparency)){for(var Ke="",Ue=0,rt=ne.transparency.length;Ue<rt;Ue++)Ke+=ne.transparency[Ue]+" "+ne.transparency[Ue]+" ";Le.push({key:"Mask",value:"["+Ke+"]"})}ne.sMask!==void 0&&Le.push({key:"SMask",value:ne.objectId+1+" 0 R"});var je=ne.filter!==void 0?["/"+ne.filter]:void 0;if(ve({data:ne.data,additionalKeyValues:Le,alreadyAppliedFilters:je,objectId:ne.objectId}),xe("endobj"),"sMask"in ne&&ne.sMask!==void 0){var St="/Predictor "+ne.predictor+" /Colors 1 /BitsPerComponent "+ne.bitsPerComponent+" /Columns "+ne.width,te={width:ne.width,height:ne.height,colorSpace:"DeviceGray",bitsPerComponent:ne.bitsPerComponent,decodeParameters:St,data:ne.sMask};"filter"in ne&&(te.filter=ne.filter),ee.call(this,te)}if(ne.colorSpace===R.INDEXED){var Fe=this.internal.newObject();ve({data:Ae(new Uint8Array(ne.palette)),objectId:Fe}),xe("endobj")}},c=function(){var ee=this.internal.collections.addImage_images;for(var ne in ee)l.call(this,ee[ne])},h=function(){var ee,ne=this.internal.collections.addImage_images,xe=this.internal.write;for(var ve in ne)xe("/I"+(ee=ne[ve]).index,ee.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",c),this.internal.events.subscribe("putXobjectDict",h))},d=function(){var ee=this.internal.collections.addImage_images;return a.call(this),ee},_=function(){return Object.keys(this.internal.collections.addImage_images).length},p=function(ee){return typeof e["process"+ee.toUpperCase()]=="function"},E=function(ee){return qi(ee)==="object"&&ee.nodeType===1},w=function(ee,ne){if(ee.nodeName==="IMG"&&ee.hasAttribute("src")){var xe=""+ee.getAttribute("src");if(xe.indexOf("data:image/")===0)return Hf(unescape(xe).split("base64,").pop());var ve=e.loadFile(xe,!0);if(ve!==void 0)return ve}if(ee.nodeName==="CANVAS"){if(ee.width===0||ee.height===0)throw new Error("Given canvas must have data. Canvas width: "+ee.width+", height: "+ee.height);var ze;switch(ne){case"PNG":ze="image/png";break;case"WEBP":ze="image/webp";break;case"JPEG":case"JPG":default:ze="image/jpeg"}return Hf(ee.toDataURL(ze,1).split("base64,").pop())}},x=function(ee){var ne=this.internal.collections.addImage_images;if(ne){for(var xe in ne)if(ee===ne[xe].alias)return ne[xe]}},Q=function(ee,ne,xe){return ee||ne||(ee=-96,ne=-96),ee<0&&(ee=-1*xe.width*72/ee/this.internal.scaleFactor),ne<0&&(ne=-1*xe.height*72/ne/this.internal.scaleFactor),ee===0&&(ee=ne*xe.width/xe.height),ne===0&&(ne=ee*xe.height/xe.width),[ee,ne]},P=function(ee,ne,xe,ve,ze,Le){var Ke=Q.call(this,xe,ve,ze),Ue=this.internal.getCoordinateString,rt=this.internal.getVerticalCoordinateString,je=d.call(this);if(xe=Ke[0],ve=Ke[1],je[ze.index]=ze,Le){Le*=Math.PI/180;var St=Math.cos(Le),te=Math.sin(Le),Fe=function(Ve){return Ve.toFixed(4)},Qe=[Fe(St),Fe(te),Fe(-1*te),Fe(St),0,0,"cm"]}this.internal.write("q"),Le?(this.internal.write([1,"0","0",1,Ue(ee),rt(ne+ve),"cm"].join(" ")),this.internal.write(Qe.join(" ")),this.internal.write([Ue(xe),"0","0",Ue(ve),"0","0","cm"].join(" "))):this.internal.write([Ue(xe),"0","0",Ue(ve),Ue(ee),rt(ne+ve),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ze.index+" Do"),this.internal.write("Q")},R=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var k=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},O=e.__addimage__.sHashCode=function(ee){var ne,xe,ve=0;if(typeof ee=="string")for(xe=ee.length,ne=0;ne<xe;ne++)ve=(ve<<5)-ve+ee.charCodeAt(ne),ve|=0;else if($(ee))for(xe=ee.byteLength/2,ne=0;ne<xe;ne++)ve=(ve<<5)-ve+ee[ne],ve|=0;return ve},G=e.__addimage__.validateStringAsBase64=function(ee){(ee=ee||"").toString().trim();var ne=!0;return ee.length===0&&(ne=!1),ee.length%4!=0&&(ne=!1),/^[A-Za-z0-9+/]+$/.test(ee.substr(0,ee.length-2))===!1&&(ne=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(ee.substr(-2))===!1&&(ne=!1),ne},K=e.__addimage__.extractImageFromDataUrl=function(ee){var ne=(ee=ee||"").split("base64,"),xe=null;if(ne.length===2){var ve=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(ne[0]);Array.isArray(ve)&&(xe={mimeType:ve[1],charset:ve[2],data:ne[1]})}return xe},Z=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(ee){return Z()&&ee instanceof ArrayBuffer};var $=e.__addimage__.isArrayBufferView=function(ee){return Z()&&typeof Uint32Array<"u"&&(ee instanceof Int8Array||ee instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&ee instanceof Uint8ClampedArray||ee instanceof Int16Array||ee instanceof Uint16Array||ee instanceof Int32Array||ee instanceof Uint32Array||ee instanceof Float32Array||ee instanceof Float64Array)},fe=e.__addimage__.binaryStringToUint8Array=function(ee){for(var ne=ee.length,xe=new Uint8Array(ne),ve=0;ve<ne;ve++)xe[ve]=ee.charCodeAt(ve);return xe},Ae=e.__addimage__.arrayBufferToBinaryString=function(ee){for(var ne="",xe=$(ee)?ee:new Uint8Array(ee),ve=0;ve<xe.length;ve+=8192)ne+=String.fromCharCode.apply(null,xe.subarray(ve,ve+8192));return ne};e.addImage=function(){var ee,ne,xe,ve,ze,Le,Ke,Ue,rt;if(typeof arguments[1]=="number"?(ne=t,xe=arguments[1],ve=arguments[2],ze=arguments[3],Le=arguments[4],Ke=arguments[5],Ue=arguments[6],rt=arguments[7]):(ne=arguments[1],xe=arguments[2],ve=arguments[3],ze=arguments[4],Le=arguments[5],Ke=arguments[6],Ue=arguments[7],rt=arguments[8]),qi(ee=arguments[0])==="object"&&!E(ee)&&"imageData"in ee){var je=ee;ee=je.imageData,ne=je.format||ne||t,xe=je.x||xe||0,ve=je.y||ve||0,ze=je.w||je.width||ze,Le=je.h||je.height||Le,Ke=je.alias||Ke,Ue=je.compression||Ue,rt=je.rotation||je.angle||rt}var St=this.internal.getFilters();if(Ue===void 0&&St.indexOf("FlateEncode")!==-1&&(Ue="SLOW"),isNaN(xe)||isNaN(ve))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var te=ge.call(this,ee,ne,Ke,Ue);return P.call(this,xe,ve,ze,Le,te,rt),this};var ge=function(ee,ne,xe,ve){var ze,Le,Ke;if(typeof ee=="string"&&s(ee)===t){ee=unescape(ee);var Ue=he(ee,!1);(Ue!==""||(Ue=e.loadFile(ee,!0))!==void 0)&&(ee=Ue)}if(E(ee)&&(ee=w(ee,ne)),ne=s(ee,ne),!p(ne))throw new Error("addImage does not support files of type '"+ne+"', please ensure that a plugin for '"+ne+"' support is added.");if(((Ke=xe)==null||Ke.length===0)&&(xe=function(rt){return typeof rt=="string"||$(rt)?O(rt):$(rt.data)?O(rt.data):null}(ee)),(ze=x.call(this,xe))||(Z()&&(ee instanceof Uint8Array||ne==="RGBA"||(Le=ee,ee=fe(ee))),ze=this["process"+ne.toUpperCase()](ee,_.call(this),xe,function(rt){return rt&&typeof rt=="string"&&(rt=rt.toUpperCase()),rt in e.image_compression?rt:k.NONE}(ve),Le)),!ze)throw new Error("An unknown error occurred whilst processing the image.");return ze},he=e.__addimage__.convertBase64ToBinaryString=function(ee,ne){var xe;ne=typeof ne!="boolean"||ne;var ve,ze="";if(typeof ee=="string"){ve=(xe=K(ee))!==null?xe.data:ee;try{ze=Hf(ve)}catch(Le){if(ne)throw G(ve)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Le.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return ze};e.getImageProperties=function(ee){var ne,xe,ve="";if(E(ee)&&(ee=w(ee)),typeof ee=="string"&&s(ee)===t&&((ve=he(ee,!1))===""&&(ve=e.loadFile(ee)||""),ee=ve),xe=s(ee),!p(xe))throw new Error("addImage does not support files of type '"+xe+"', please ensure that a plugin for '"+xe+"' support is added.");if(!Z()||ee instanceof Uint8Array||(ee=fe(ee)),!(ne=this["process"+xe.toUpperCase()](ee)))throw new Error("An unknown error occurred whilst processing the image");return ne.fileType=xe,ne}})(Nn.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};Nn.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var s,l,c,h=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,d=this.internal.getPageInfoByObjId(r.objId),_=r.pageContext.annotations,p=!1,E=0;E<_.length&&!p;E++)switch((s=_[E]).type){case"link":(t(s.options.url)||t(s.options.pageNumber))&&(p=!0);break;case"reference":case"text":case"freetext":p=!0}if(p!=0){this.internal.write("/Annots [");for(var w=0;w<_.length;w++){s=_[w];var x=this.internal.pdfEscape,Q=this.internal.getEncryptor(r.objId);switch(s.type){case"reference":this.internal.write(" "+s.object.objId+" 0 R ");break;case"text":var P=this.internal.newAdditionalObject(),R=this.internal.newAdditionalObject(),k=this.internal.getEncryptor(P.objId),O=s.title||"Note";c="<</Type /Annot /Subtype /Text "+(l="/Rect ["+h(s.bounds.x)+" "+a(s.bounds.y+s.bounds.h)+" "+h(s.bounds.x+s.bounds.w)+" "+a(s.bounds.y)+"] ")+"/Contents ("+x(k(s.contents))+")",c+=" /Popup "+R.objId+" 0 R",c+=" /P "+d.objId+" 0 R",c+=" /T ("+x(k(O))+") >>",P.content=c;var G=P.objId+" 0 R";c="<</Type /Annot /Subtype /Popup "+(l="/Rect ["+h(s.bounds.x+30)+" "+a(s.bounds.y+s.bounds.h)+" "+h(s.bounds.x+s.bounds.w+30)+" "+a(s.bounds.y)+"] ")+" /Parent "+G,s.open&&(c+=" /Open true"),c+=" >>",R.content=c,this.internal.write(P.objId,"0 R",R.objId,"0 R");break;case"freetext":l="/Rect ["+h(s.bounds.x)+" "+a(s.bounds.y)+" "+h(s.bounds.x+s.bounds.w)+" "+a(s.bounds.y+s.bounds.h)+"] ";var K=s.color||"#000000";c="<</Type /Annot /Subtype /FreeText "+l+"/Contents ("+x(Q(s.contents))+")",c+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+K+")",c+=" /Border [0 0 0]",c+=" >>",this.internal.write(c);break;case"link":if(s.options.name){var Z=this.annotations._nameMap[s.options.name];s.options.pageNumber=Z.page,s.options.top=Z.y}else s.options.top||(s.options.top=0);if(l="/Rect ["+s.finalBounds.x+" "+s.finalBounds.y+" "+s.finalBounds.w+" "+s.finalBounds.h+"] ",c="",s.options.url)c="<</Type /Annot /Subtype /Link "+l+"/Border [0 0 0] /A <</S /URI /URI ("+x(Q(s.options.url))+") >>";else if(s.options.pageNumber)switch(c="<</Type /Annot /Subtype /Link "+l+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(s.options.pageNumber).objId+" 0 R",s.options.magFactor=s.options.magFactor||"XYZ",s.options.magFactor){case"Fit":c+=" /Fit]";break;case"FitH":c+=" /FitH "+s.options.top+"]";break;case"FitV":s.options.left=s.options.left||0,c+=" /FitV "+s.options.left+"]";break;case"XYZ":default:var $=a(s.options.top);s.options.left=s.options.left||0,s.options.zoom===void 0&&(s.options.zoom=0),c+=" /XYZ "+s.options.left+" "+$+" "+s.options.zoom+"]"}c!=""&&(c+=" >>",this.internal.write(c))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var s=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":s.pageContext.annotations.push(r)}},e.link=function(r,s,l,c,h){var a=this.internal.getCurrentPageInfo(),d=this.internal.getCoordinateString,_=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:d(r),y:_(s),w:d(r+l),h:_(s+c)},options:h,type:"link"})},e.textWithLink=function(r,s,l,c){var h,a,d=this.getTextWidth(r),_=this.internal.getLineHeight()/this.internal.scaleFactor;if(c.maxWidth!==void 0){a=c.maxWidth;var p=this.splitTextToSize(r,a).length;h=Math.ceil(_*p)}else a=d,h=_;return this.text(r,s,l,c),l+=.2*_,c.align==="center"&&(s-=d/2),c.align==="right"&&(s-=d),this.link(s,l-_,a,h,c),d},e.getTextWidth=function(r){var s=this.internal.getFontSize();return this.getStringUnitWidth(r)*s/this.internal.scaleFactor}}(Nn.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},s={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},l=[1570,1571,1573,1575];e.__arabicParser__={};var c=e.__arabicParser__.isInArabicSubstitutionA=function(P){return t[P.charCodeAt(0)]!==void 0},h=e.__arabicParser__.isArabicLetter=function(P){return typeof P=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(P)},a=e.__arabicParser__.isArabicEndLetter=function(P){return h(P)&&c(P)&&t[P.charCodeAt(0)].length<=2},d=e.__arabicParser__.isArabicAlfLetter=function(P){return h(P)&&l.indexOf(P.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(P){return h(P)&&c(P)&&t[P.charCodeAt(0)].length>=1};var _=e.__arabicParser__.arabicLetterHasFinalForm=function(P){return h(P)&&c(P)&&t[P.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(P){return h(P)&&c(P)&&t[P.charCodeAt(0)].length>=3};var p=e.__arabicParser__.arabicLetterHasMedialForm=function(P){return h(P)&&c(P)&&t[P.charCodeAt(0)].length==4},E=e.__arabicParser__.resolveLigatures=function(P){var R=0,k=r,O="",G=0;for(R=0;R<P.length;R+=1)k[P.charCodeAt(R)]!==void 0?(G++,typeof(k=k[P.charCodeAt(R)])=="number"&&(O+=String.fromCharCode(k),k=r,G=0),R===P.length-1&&(k=r,O+=P.charAt(R-(G-1)),R-=G-1,G=0)):(k=r,O+=P.charAt(R-G),R-=G,G=0);return O};e.__arabicParser__.isArabicDiacritic=function(P){return P!==void 0&&s[P.charCodeAt(0)]!==void 0};var w=e.__arabicParser__.getCorrectForm=function(P,R,k){return h(P)?c(P)===!1?-1:!_(P)||!h(R)&&!h(k)||!h(k)&&a(R)||a(P)&&!h(R)||a(P)&&d(R)||a(P)&&a(R)?0:p(P)&&h(R)&&!a(R)&&h(k)&&_(k)?3:a(P)||!h(k)?1:2:-1},x=function(P){var R=0,k=0,O=0,G="",K="",Z="",$=(P=P||"").split("\\s+"),fe=[];for(R=0;R<$.length;R+=1){for(fe.push(""),k=0;k<$[R].length;k+=1)G=$[R][k],K=$[R][k-1],Z=$[R][k+1],h(G)?(O=w(G,K,Z),fe[R]+=O!==-1?String.fromCharCode(t[G.charCodeAt(0)][O]):G):fe[R]+=G;fe[R]=E(fe[R])}return fe.join(" ")},Q=e.__arabicParser__.processArabic=e.processArabic=function(){var P,R=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,k=[];if(Array.isArray(R)){var O=0;for(k=[],O=0;O<R.length;O+=1)Array.isArray(R[O])?k.push([x(R[O][0]),R[O][1],R[O][2]]):k.push([x(R[O])]);P=k}else P=x(R);return typeof arguments[0]=="string"?P:(arguments[0].text=P,arguments[0])};e.events.push(["preProcessText",Q])}(Nn.API),Nn.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(a){r=a}});var s=150;Object.defineProperty(this,"width",{get:function(){return s},set:function(a){s=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=s+1)}});var l=300;Object.defineProperty(this,"height",{get:function(){return l},set:function(a){l=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=l+1)}});var c=[];Object.defineProperty(this,"childNodes",{get:function(){return c},set:function(a){c=a}});var h={};Object.defineProperty(this,"style",{get:function(){return h},set:function(a){h=a}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,s){var l;if((r=r||"2d")!=="2d")return null;for(l in s)this.pdf.context2d.hasOwnProperty(l)&&(this.pdf.context2d[l]=s[l]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Nn.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,s=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),l.call(this))},l=function(){this.internal.__cell__.lastCell=new c,this.internal.__cell__.pages=1},c=function(){var d=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return d},set:function(P){d=P}});var _=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return _},set:function(P){_=P}});var p=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return p},set:function(P){p=P}});var E=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return E},set:function(P){E=P}});var w=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return w},set:function(P){w=P}});var x=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return x},set:function(P){x=P}});var Q=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return Q},set:function(P){Q=P}}),this};c.prototype.clone=function(){return new c(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},c.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(d){return s.call(this),this.internal.__cell__.headerFunction=typeof d=="function"?d:void 0,this},e.getTextDimensions=function(d,_){s.call(this);var p=(_=_||{}).fontSize||this.getFontSize(),E=_.font||this.getFont(),w=_.scaleFactor||this.internal.scaleFactor,x=0,Q=0,P=0,R=this;if(!Array.isArray(d)&&typeof d!="string"){if(typeof d!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");d=String(d)}var k=_.maxWidth;k>0?typeof d=="string"?d=this.splitTextToSize(d,k):Object.prototype.toString.call(d)==="[object Array]"&&(d=d.reduce(function(G,K){return G.concat(R.splitTextToSize(K,k))},[])):d=Array.isArray(d)?d:[d];for(var O=0;O<d.length;O++)x<(P=this.getStringUnitWidth(d[O],{font:E})*p)&&(x=P);return x!==0&&(Q=d.length),{w:x/=w,h:Math.max((Q*p*this.getLineHeightFactor()-p*(this.getLineHeightFactor()-1))/w,0)}},e.cellAddPage=function(){s.call(this),this.addPage();var d=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new c(d.left,d.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var h=e.cell=function(){var d;d=arguments[0]instanceof c?arguments[0]:new c(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),s.call(this);var _=this.internal.__cell__.lastCell,p=this.internal.__cell__.padding,E=this.internal.__cell__.margins||t,w=this.internal.__cell__.tableHeaderRow,x=this.internal.__cell__.printHeaders;return _.lineNumber!==void 0&&(_.lineNumber===d.lineNumber?(d.x=(_.x||0)+(_.width||0),d.y=_.y||0):_.y+_.height+d.height+E.bottom>this.getPageHeight()?(this.cellAddPage(),d.y=E.top,x&&w&&(this.printHeaderRow(d.lineNumber,!0),d.y+=w[0].height)):d.y=_.y+_.height||d.y),d.text[0]!==void 0&&(this.rect(d.x,d.y,d.width,d.height,r===!0?"FD":void 0),d.align==="right"?this.text(d.text,d.x+d.width-p,d.y+p,{align:"right",baseline:"top"}):d.align==="center"?this.text(d.text,d.x+d.width/2,d.y+p,{align:"center",baseline:"top",maxWidth:d.width-p-p}):this.text(d.text,d.x+p,d.y+p,{align:"left",baseline:"top",maxWidth:d.width-p-p})),this.internal.__cell__.lastCell=d,this};e.table=function(d,_,p,E,w){if(s.call(this),!p)throw new Error("No data for PDF table.");var x,Q,P,R,k=[],O=[],G=[],K={},Z={},$=[],fe=[],Ae=(w=w||{}).autoSize||!1,ge=w.printHeaders!==!1,he=w.css&&w.css["font-size"]!==void 0?16*w.css["font-size"]:w.fontSize||12,ee=w.margins||Object.assign({width:this.getPageWidth()},t),ne=typeof w.padding=="number"?w.padding:3,xe=w.headerBackgroundColor||"#c8c8c8",ve=w.headerTextColor||"#000";if(l.call(this),this.internal.__cell__.printHeaders=ge,this.internal.__cell__.margins=ee,this.internal.__cell__.table_font_size=he,this.internal.__cell__.padding=ne,this.internal.__cell__.headerBackgroundColor=xe,this.internal.__cell__.headerTextColor=ve,this.setFontSize(he),E==null)O=k=Object.keys(p[0]),G=k.map(function(){return"left"});else if(Array.isArray(E)&&qi(E[0])==="object")for(k=E.map(function(je){return je.name}),O=E.map(function(je){return je.prompt||je.name||""}),G=E.map(function(je){return je.align||"left"}),x=0;x<E.length;x+=1)Z[E[x].name]=E[x].width*(19.049976/25.4);else Array.isArray(E)&&typeof E[0]=="string"&&(O=k=E,G=k.map(function(){return"left"}));if(Ae||Array.isArray(E)&&typeof E[0]=="string")for(x=0;x<k.length;x+=1){for(K[R=k[x]]=p.map(function(je){return je[R]}),this.setFont(void 0,"bold"),$.push(this.getTextDimensions(O[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),Q=K[R],this.setFont(void 0,"normal"),P=0;P<Q.length;P+=1)$.push(this.getTextDimensions(Q[P],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);Z[R]=Math.max.apply(null,$)+ne+ne,$=[]}if(ge){var ze={};for(x=0;x<k.length;x+=1)ze[k[x]]={},ze[k[x]].text=O[x],ze[k[x]].align=G[x];var Le=a.call(this,ze,Z);fe=k.map(function(je){return new c(d,_,Z[je],Le,ze[je].text,void 0,ze[je].align)}),this.setTableHeaderRow(fe),this.printHeaderRow(1,!1)}var Ke=E.reduce(function(je,St){return je[St.name]=St.align,je},{});for(x=0;x<p.length;x+=1){"rowStart"in w&&w.rowStart instanceof Function&&w.rowStart({row:x,data:p[x]},this);var Ue=a.call(this,p[x],Z);for(P=0;P<k.length;P+=1){var rt=p[x][k[P]];"cellStart"in w&&w.cellStart instanceof Function&&w.cellStart({row:x,col:P,data:rt},this),h.call(this,new c(d,_,Z[k[P]],Ue,rt,x+2,Ke[k[P]]))}}return this.internal.__cell__.table_x=d,this.internal.__cell__.table_y=_,this};var a=function(d,_){var p=this.internal.__cell__.padding,E=this.internal.__cell__.table_font_size,w=this.internal.scaleFactor;return Object.keys(d).map(function(x){var Q=d[x];return this.splitTextToSize(Q.hasOwnProperty("text")?Q.text:Q,_[x]-p-p)},this).map(function(x){return this.getLineHeightFactor()*x.length*E/w+p+p},this).reduce(function(x,Q){return Math.max(x,Q)},0)};e.setTableHeaderRow=function(d){s.call(this),this.internal.__cell__.tableHeaderRow=d},e.printHeaderRow=function(d,_){if(s.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var p;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var E=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new c(E[0],E[1],E[2],E[3],void 0,-1)}this.setFont(void 0,"bold");for(var w=[],x=0;x<this.internal.__cell__.tableHeaderRow.length;x+=1){p=this.internal.__cell__.tableHeaderRow[x].clone(),_&&(p.y=this.internal.__cell__.margins.top||0,w.push(p)),p.lineNumber=d;var Q=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),h.call(this,p),this.setTextColor(Q)}w.length>0&&this.setTableHeaderRow(w),this.setFont(void 0,"normal"),r=!1}}(Nn.API);var d_={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},p_=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Bg=f_(p_),m_=[100,200,300,400,500,600,700,800,900],YF=f_(m_);function Cg(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(c){return d_[c=c||"normal"]?c:"normal"}(e.style),s=function(c){if(!c)return 400;if(typeof c=="number")return c>=100&&c<=900&&c%100==0?c:400;if(/^\d00$/.test(c))return parseInt(c);switch(c){case"bold":return 700;case"normal":default:return 400}}(e.weight),l=function(c){return typeof Bg[c=c||"normal"]=="number"?c:"normal"}(e.stretch);return{family:t,style:r,weight:s,stretch:l,src:e.src||[],ref:e.ref||{name:t,style:[l,r,s].join(" ")}}}function Sy(e,t,r,s){var l;for(l=r;l>=0&&l<t.length;l+=s)if(e[t[l]])return e[t[l]];for(l=r;l>=0&&l<t.length;l-=s)if(e[t[l]])return e[t[l]]}var $F={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Iy={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Ty(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function eS(e,t,r){for(var s=(r=r||{}).defaultFontFamily||"times",l=Object.assign({},$F,r.genericFontFamilies||{}),c=null,h=null,a=0;a<t.length;++a)if(l[(c=Cg(t[a])).family]&&(c.family=l[c.family]),e.hasOwnProperty(c.family)){h=e[c.family];break}if(!(h=h||e[s]))throw new Error("Could not find a font-family for the rule '"+Ty(c)+"' and default family '"+s+"'.");if(h=function(d,_){if(_[d])return _[d];var p=Bg[d],E=p<=Bg.normal?-1:1,w=Sy(_,p_,p,E);if(!w)throw new Error("Could not find a matching font-stretch value for "+d);return w}(c.stretch,h),h=function(d,_){if(_[d])return _[d];for(var p=d_[d],E=0;E<p.length;++E)if(_[p[E]])return _[p[E]];throw new Error("Could not find a matching font-style for "+d)}(c.style,h),!(h=function(d,_){if(_[d])return _[d];if(d===400&&_[500])return _[500];if(d===500&&_[400])return _[400];var p=YF[d],E=Sy(_,m_,p,d<400?-1:1);if(!E)throw new Error("Could not find a matching font-weight for value "+d);return E}(c.weight,h)))throw new Error("Failed to resolve a font for the rule '"+Ty(c)+"'.");return h}function Uy(e){return e.trimLeft()}function tS(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function rS(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var ap,Ly,Qy,zm=["times"];(function(e){var t,r,s,l,c,h,a,d,_,p=function(te){return te=te||{},this.isStrokeTransparent=te.isStrokeTransparent||!1,this.strokeOpacity=te.strokeOpacity||1,this.strokeStyle=te.strokeStyle||"#000000",this.fillStyle=te.fillStyle||"#000000",this.isFillTransparent=te.isFillTransparent||!1,this.fillOpacity=te.fillOpacity||1,this.font=te.font||"10px sans-serif",this.textBaseline=te.textBaseline||"alphabetic",this.textAlign=te.textAlign||"left",this.lineWidth=te.lineWidth||1,this.lineJoin=te.lineJoin||"miter",this.lineCap=te.lineCap||"butt",this.path=te.path||[],this.transform=te.transform!==void 0?te.transform.clone():new d,this.globalCompositeOperation=te.globalCompositeOperation||"normal",this.globalAlpha=te.globalAlpha||1,this.clip_path=te.clip_path||[],this.currentPoint=te.currentPoint||new h,this.miterLimit=te.miterLimit||10,this.lastPoint=te.lastPoint||new h,this.lineDashOffset=te.lineDashOffset||0,this.lineDash=te.lineDash||[],this.margin=te.margin||[0,0,0,0],this.prevPageLastElemOffset=te.prevPageLastElemOffset||0,this.ignoreClearRect=typeof te.ignoreClearRect!="boolean"||te.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new E(this),t=this.internal.f2,r=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,l=this.internal.getHorizontalCoordinate,c=this.internal.getVerticalCoordinate,h=this.internal.Point,a=this.internal.Rectangle,d=this.internal.Matrix,_=new p}]);var E=function(te){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var Fe=te;Object.defineProperty(this,"pdf",{get:function(){return Fe}});var Qe=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Qe},set:function(Pt){Qe=Boolean(Pt)}});var Ve=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Ve},set:function(Pt){Ve=Boolean(Pt)}});var st=0;Object.defineProperty(this,"posX",{get:function(){return st},set:function(Pt){isNaN(Pt)||(st=Pt)}});var dt=0;Object.defineProperty(this,"posY",{get:function(){return dt},set:function(Pt){isNaN(Pt)||(dt=Pt)}}),Object.defineProperty(this,"margin",{get:function(){return _.margin},set:function(Pt){var Oe;typeof Pt=="number"?Oe=[Pt,Pt,Pt,Pt]:((Oe=new Array(4))[0]=Pt[0],Oe[1]=Pt.length>=2?Pt[1]:Oe[0],Oe[2]=Pt.length>=3?Pt[2]:Oe[0],Oe[3]=Pt.length>=4?Pt[3]:Oe[1]),_.margin=Oe}});var Bt=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Bt},set:function(Pt){Bt=Pt}});var Ge=0;Object.defineProperty(this,"lastBreak",{get:function(){return Ge},set:function(Pt){Ge=Pt}});var tt=[];Object.defineProperty(this,"pageBreaks",{get:function(){return tt},set:function(Pt){tt=Pt}}),Object.defineProperty(this,"ctx",{get:function(){return _},set:function(Pt){Pt instanceof p&&(_=Pt)}}),Object.defineProperty(this,"path",{get:function(){return _.path},set:function(Pt){_.path=Pt}});var Qt=[];Object.defineProperty(this,"ctxStack",{get:function(){return Qt},set:function(Pt){Qt=Pt}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Pt){var Oe;Oe=w(Pt),this.ctx.fillStyle=Oe.style,this.ctx.isFillTransparent=Oe.a===0,this.ctx.fillOpacity=Oe.a,this.pdf.setFillColor(Oe.r,Oe.g,Oe.b,{a:Oe.a}),this.pdf.setTextColor(Oe.r,Oe.g,Oe.b,{a:Oe.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Pt){var Oe=w(Pt);this.ctx.strokeStyle=Oe.style,this.ctx.isStrokeTransparent=Oe.a===0,this.ctx.strokeOpacity=Oe.a,Oe.a===0?this.pdf.setDrawColor(255,255,255):(Oe.a,this.pdf.setDrawColor(Oe.r,Oe.g,Oe.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Pt){["butt","round","square"].indexOf(Pt)!==-1&&(this.ctx.lineCap=Pt,this.pdf.setLineCap(Pt))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Pt){isNaN(Pt)||(this.ctx.lineWidth=Pt,this.pdf.setLineWidth(Pt))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Pt){["bevel","round","miter"].indexOf(Pt)!==-1&&(this.ctx.lineJoin=Pt,this.pdf.setLineJoin(Pt))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Pt){isNaN(Pt)||(this.ctx.miterLimit=Pt,this.pdf.setMiterLimit(Pt))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Pt){this.ctx.textBaseline=Pt}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Pt){["right","end","center","left","start"].indexOf(Pt)!==-1&&(this.ctx.textAlign=Pt)}});var ht=null;function Nt(Pt,Oe){if(ht===null){var pr=function(sr){var zt=[];return Object.keys(sr).forEach(function(fr){sr[fr].forEach(function(Br){var vr=null;switch(Br){case"bold":vr={family:fr,weight:"bold"};break;case"italic":vr={family:fr,style:"italic"};break;case"bolditalic":vr={family:fr,weight:"bold",style:"italic"};break;case"":case"normal":vr={family:fr}}vr!==null&&(vr.ref={name:fr,style:Br},zt.push(vr))})}),zt}(Pt.getFontList());ht=function(sr){for(var zt={},fr=0;fr<sr.length;++fr){var Br=Cg(sr[fr]),vr=Br.family,Gr=Br.stretch,rr=Br.style,xr=Br.weight;zt[vr]=zt[vr]||{},zt[vr][Gr]=zt[vr][Gr]||{},zt[vr][Gr][rr]=zt[vr][Gr][rr]||{},zt[vr][Gr][rr][xr]=Br}return zt}(pr.concat(Oe))}return ht}var dr=null;Object.defineProperty(this,"fontFaces",{get:function(){return dr},set:function(Pt){ht=null,dr=Pt}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Pt){var Oe;if(this.ctx.font=Pt,(Oe=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Pt))!==null){var pr=Oe[1],sr=(Oe[2],Oe[3]),zt=Oe[4],fr=(Oe[5],Oe[6]),Br=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(zt)[2];zt=Math.floor(Br==="px"?parseFloat(zt)*this.pdf.internal.scaleFactor:Br==="em"?parseFloat(zt)*this.pdf.getFontSize():parseFloat(zt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(zt);var vr=function(nt){var bt,Ct,jt=[],er=nt.trim();if(er==="")return zm;if(er in Iy)return[Iy[er]];for(;er!=="";){switch(Ct=null,bt=(er=Uy(er)).charAt(0)){case'"':case"'":Ct=tS(er.substring(1),bt);break;default:Ct=rS(er)}if(Ct===null||(jt.push(Ct[0]),(er=Uy(Ct[1]))!==""&&er.charAt(0)!==","))return zm;er=er.replace(/^,/,"")}return jt}(fr);if(this.fontFaces){var Gr=eS(Nt(this.pdf,this.fontFaces),vr.map(function(nt){return{family:nt,stretch:"normal",weight:sr,style:pr}}));this.pdf.setFont(Gr.ref.name,Gr.ref.style)}else{var rr="";(sr==="bold"||parseInt(sr,10)>=700||pr==="bold")&&(rr="bold"),pr==="italic"&&(rr+="italic"),rr.length===0&&(rr="normal");for(var xr="",Zr={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},pn=0;pn<vr.length;pn++){if(this.pdf.internal.getFont(vr[pn],rr,{noFallback:!0,disableWarning:!0})!==void 0){xr=vr[pn];break}if(rr==="bolditalic"&&this.pdf.internal.getFont(vr[pn],"bold",{noFallback:!0,disableWarning:!0})!==void 0)xr=vr[pn],rr="bold";else if(this.pdf.internal.getFont(vr[pn],"normal",{noFallback:!0,disableWarning:!0})!==void 0){xr=vr[pn],rr="normal";break}}if(xr===""){for(var vt=0;vt<vr.length;vt++)if(Zr[vr[vt]]){xr=Zr[vr[vt]];break}}xr=xr===""?"Times":xr,this.pdf.setFont(xr,rr)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Pt){this.ctx.globalCompositeOperation=Pt}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Pt){this.ctx.globalAlpha=Pt}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Pt){this.ctx.lineDashOffset=Pt,St.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Pt){this.ctx.lineDash=Pt,St.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Pt){this.ctx.ignoreClearRect=Boolean(Pt)}})};E.prototype.setLineDash=function(te){this.lineDash=te},E.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},E.prototype.fill=function(){K.call(this,"fill",!1)},E.prototype.stroke=function(){K.call(this,"stroke",!1)},E.prototype.beginPath=function(){this.path=[{type:"begin"}]},E.prototype.moveTo=function(te,Fe){if(isNaN(te)||isNaN(Fe))throw us.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Qe=this.ctx.transform.applyToPoint(new h(te,Fe));this.path.push({type:"mt",x:Qe.x,y:Qe.y}),this.ctx.lastPoint=new h(te,Fe)},E.prototype.closePath=function(){var te=new h(0,0),Fe=0;for(Fe=this.path.length-1;Fe!==-1;Fe--)if(this.path[Fe].type==="begin"&&qi(this.path[Fe+1])==="object"&&typeof this.path[Fe+1].x=="number"){te=new h(this.path[Fe+1].x,this.path[Fe+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new h(te.x,te.y)},E.prototype.lineTo=function(te,Fe){if(isNaN(te)||isNaN(Fe))throw us.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Qe=this.ctx.transform.applyToPoint(new h(te,Fe));this.path.push({type:"lt",x:Qe.x,y:Qe.y}),this.ctx.lastPoint=new h(Qe.x,Qe.y)},E.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),K.call(this,null,!0)},E.prototype.quadraticCurveTo=function(te,Fe,Qe,Ve){if(isNaN(Qe)||isNaN(Ve)||isNaN(te)||isNaN(Fe))throw us.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var st=this.ctx.transform.applyToPoint(new h(Qe,Ve)),dt=this.ctx.transform.applyToPoint(new h(te,Fe));this.path.push({type:"qct",x1:dt.x,y1:dt.y,x:st.x,y:st.y}),this.ctx.lastPoint=new h(st.x,st.y)},E.prototype.bezierCurveTo=function(te,Fe,Qe,Ve,st,dt){if(isNaN(st)||isNaN(dt)||isNaN(te)||isNaN(Fe)||isNaN(Qe)||isNaN(Ve))throw us.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Bt=this.ctx.transform.applyToPoint(new h(st,dt)),Ge=this.ctx.transform.applyToPoint(new h(te,Fe)),tt=this.ctx.transform.applyToPoint(new h(Qe,Ve));this.path.push({type:"bct",x1:Ge.x,y1:Ge.y,x2:tt.x,y2:tt.y,x:Bt.x,y:Bt.y}),this.ctx.lastPoint=new h(Bt.x,Bt.y)},E.prototype.arc=function(te,Fe,Qe,Ve,st,dt){if(isNaN(te)||isNaN(Fe)||isNaN(Qe)||isNaN(Ve)||isNaN(st))throw us.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(dt=Boolean(dt),!this.ctx.transform.isIdentity){var Bt=this.ctx.transform.applyToPoint(new h(te,Fe));te=Bt.x,Fe=Bt.y;var Ge=this.ctx.transform.applyToPoint(new h(0,Qe)),tt=this.ctx.transform.applyToPoint(new h(0,0));Qe=Math.sqrt(Math.pow(Ge.x-tt.x,2)+Math.pow(Ge.y-tt.y,2))}Math.abs(st-Ve)>=2*Math.PI&&(Ve=0,st=2*Math.PI),this.path.push({type:"arc",x:te,y:Fe,radius:Qe,startAngle:Ve,endAngle:st,counterclockwise:dt})},E.prototype.arcTo=function(te,Fe,Qe,Ve,st){throw new Error("arcTo not implemented.")},E.prototype.rect=function(te,Fe,Qe,Ve){if(isNaN(te)||isNaN(Fe)||isNaN(Qe)||isNaN(Ve))throw us.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(te,Fe),this.lineTo(te+Qe,Fe),this.lineTo(te+Qe,Fe+Ve),this.lineTo(te,Fe+Ve),this.lineTo(te,Fe),this.lineTo(te+Qe,Fe),this.lineTo(te,Fe)},E.prototype.fillRect=function(te,Fe,Qe,Ve){if(isNaN(te)||isNaN(Fe)||isNaN(Qe)||isNaN(Ve))throw us.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!x.call(this)){var st={};this.lineCap!=="butt"&&(st.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(st.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(te,Fe,Qe,Ve),this.fill(),st.hasOwnProperty("lineCap")&&(this.lineCap=st.lineCap),st.hasOwnProperty("lineJoin")&&(this.lineJoin=st.lineJoin)}},E.prototype.strokeRect=function(te,Fe,Qe,Ve){if(isNaN(te)||isNaN(Fe)||isNaN(Qe)||isNaN(Ve))throw us.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");Q.call(this)||(this.beginPath(),this.rect(te,Fe,Qe,Ve),this.stroke())},E.prototype.clearRect=function(te,Fe,Qe,Ve){if(isNaN(te)||isNaN(Fe)||isNaN(Qe)||isNaN(Ve))throw us.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(te,Fe,Qe,Ve))},E.prototype.save=function(te){te=typeof te!="boolean"||te;for(var Fe=this.pdf.internal.getCurrentPageInfo().pageNumber,Qe=0;Qe<this.pdf.internal.getNumberOfPages();Qe++)this.pdf.setPage(Qe+1),this.pdf.internal.out("q");if(this.pdf.setPage(Fe),te){this.ctx.fontSize=this.pdf.internal.getFontSize();var Ve=new p(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Ve}},E.prototype.restore=function(te){te=typeof te!="boolean"||te;for(var Fe=this.pdf.internal.getCurrentPageInfo().pageNumber,Qe=0;Qe<this.pdf.internal.getNumberOfPages();Qe++)this.pdf.setPage(Qe+1),this.pdf.internal.out("Q");this.pdf.setPage(Fe),te&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},E.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var w=function(te){var Fe,Qe,Ve,st;if(te.isCanvasGradient===!0&&(te=te.getColor()),!te)return{r:0,g:0,b:0,a:0,style:te};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(te))Fe=0,Qe=0,Ve=0,st=0;else{var dt=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(te);if(dt!==null)Fe=parseInt(dt[1]),Qe=parseInt(dt[2]),Ve=parseInt(dt[3]),st=1;else if((dt=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(te))!==null)Fe=parseInt(dt[1]),Qe=parseInt(dt[2]),Ve=parseInt(dt[3]),st=parseFloat(dt[4]);else{if(st=1,typeof te=="string"&&te.charAt(0)!=="#"){var Bt=new o_(te);te=Bt.ok?Bt.toHex():"#000000"}te.length===4?(Fe=te.substring(1,2),Fe+=Fe,Qe=te.substring(2,3),Qe+=Qe,Ve=te.substring(3,4),Ve+=Ve):(Fe=te.substring(1,3),Qe=te.substring(3,5),Ve=te.substring(5,7)),Fe=parseInt(Fe,16),Qe=parseInt(Qe,16),Ve=parseInt(Ve,16)}}return{r:Fe,g:Qe,b:Ve,a:st,style:te}},x=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},Q=function(){return Boolean(this.ctx.isStrokeTransparent||this.globalAlpha==0)};E.prototype.fillText=function(te,Fe,Qe,Ve){if(isNaN(Fe)||isNaN(Qe)||typeof te!="string")throw us.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Ve=isNaN(Ve)?void 0:Ve,!x.call(this)){var st=Ue(this.ctx.transform.rotation),dt=this.ctx.transform.scaleX;ne.call(this,{text:te,x:Fe,y:Qe,scale:dt,angle:st,align:this.textAlign,maxWidth:Ve})}},E.prototype.strokeText=function(te,Fe,Qe,Ve){if(isNaN(Fe)||isNaN(Qe)||typeof te!="string")throw us.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!Q.call(this)){Ve=isNaN(Ve)?void 0:Ve;var st=Ue(this.ctx.transform.rotation),dt=this.ctx.transform.scaleX;ne.call(this,{text:te,x:Fe,y:Qe,scale:dt,renderingMode:"stroke",angle:st,align:this.textAlign,maxWidth:Ve})}},E.prototype.measureText=function(te){if(typeof te!="string")throw us.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var Fe=this.pdf,Qe=this.pdf.internal.scaleFactor,Ve=Fe.internal.getFontSize(),st=Fe.getStringUnitWidth(te)*Ve/Fe.internal.scaleFactor,dt=function(Bt){var Ge=(Bt=Bt||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Ge}}),this};return new dt({width:st*=Math.round(96*Qe/72*1e4)/1e4})},E.prototype.scale=function(te,Fe){if(isNaN(te)||isNaN(Fe))throw us.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Qe=new d(te,0,0,Fe,0,0);this.ctx.transform=this.ctx.transform.multiply(Qe)},E.prototype.rotate=function(te){if(isNaN(te))throw us.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var Fe=new d(Math.cos(te),Math.sin(te),-Math.sin(te),Math.cos(te),0,0);this.ctx.transform=this.ctx.transform.multiply(Fe)},E.prototype.translate=function(te,Fe){if(isNaN(te)||isNaN(Fe))throw us.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Qe=new d(1,0,0,1,te,Fe);this.ctx.transform=this.ctx.transform.multiply(Qe)},E.prototype.transform=function(te,Fe,Qe,Ve,st,dt){if(isNaN(te)||isNaN(Fe)||isNaN(Qe)||isNaN(Ve)||isNaN(st)||isNaN(dt))throw us.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Bt=new d(te,Fe,Qe,Ve,st,dt);this.ctx.transform=this.ctx.transform.multiply(Bt)},E.prototype.setTransform=function(te,Fe,Qe,Ve,st,dt){te=isNaN(te)?1:te,Fe=isNaN(Fe)?0:Fe,Qe=isNaN(Qe)?0:Qe,Ve=isNaN(Ve)?1:Ve,st=isNaN(st)?0:st,dt=isNaN(dt)?0:dt,this.ctx.transform=new d(te,Fe,Qe,Ve,st,dt)};var P=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};E.prototype.drawImage=function(te,Fe,Qe,Ve,st,dt,Bt,Ge,tt){var Qt=this.pdf.getImageProperties(te),ht=1,Nt=1,dr=1,Pt=1;Ve!==void 0&&Ge!==void 0&&(dr=Ge/Ve,Pt=tt/st,ht=Qt.width/Ve*Ge/Ve,Nt=Qt.height/st*tt/st),dt===void 0&&(dt=Fe,Bt=Qe,Fe=0,Qe=0),Ve!==void 0&&Ge===void 0&&(Ge=Ve,tt=st),Ve===void 0&&Ge===void 0&&(Ge=Qt.width,tt=Qt.height);for(var Oe,pr=this.ctx.transform.decompose(),sr=Ue(pr.rotate.shx),zt=new d,fr=(zt=(zt=(zt=zt.multiply(pr.translate)).multiply(pr.skew)).multiply(pr.scale)).applyToRectangle(new a(dt-Fe*dr,Bt-Qe*Pt,Ve*ht,st*Nt)),Br=R.call(this,fr),vr=[],Gr=0;Gr<Br.length;Gr+=1)vr.indexOf(Br[Gr])===-1&&vr.push(Br[Gr]);if(G(vr),this.autoPaging)for(var rr=vr[0],xr=vr[vr.length-1],Zr=rr;Zr<xr+1;Zr++){this.pdf.setPage(Zr);var pn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],vt=Zr===1?this.posY+this.margin[0]:this.margin[0],nt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],bt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ct=Zr===1?0:nt+(Zr-2)*bt;if(this.ctx.clip_path.length!==0){var jt=this.path;Oe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=O(Oe,this.posX+this.margin[3],-Ct+vt+this.ctx.prevPageLastElemOffset),Z.call(this,"fill",!0),this.path=jt}var er=JSON.parse(JSON.stringify(fr));er=O([er],this.posX+this.margin[3],-Ct+vt+this.ctx.prevPageLastElemOffset)[0];var Vr=(Zr>rr||Zr<xr)&&P.call(this);Vr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],pn,bt,null).clip().discardPath()),this.pdf.addImage(te,"JPEG",er.x,er.y,er.w,er.h,null,null,sr),Vr&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(te,"JPEG",fr.x,fr.y,fr.w,fr.h,null,null,sr)};var R=function(te,Fe,Qe){var Ve=[];Fe=Fe||this.pdf.internal.pageSize.width,Qe=Qe||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var st=this.posY+this.ctx.prevPageLastElemOffset;switch(te.type){default:case"mt":case"lt":Ve.push(Math.floor((te.y+st)/Qe)+1);break;case"arc":Ve.push(Math.floor((te.y+st-te.radius)/Qe)+1),Ve.push(Math.floor((te.y+st+te.radius)/Qe)+1);break;case"qct":var dt=rt(this.ctx.lastPoint.x,this.ctx.lastPoint.y,te.x1,te.y1,te.x,te.y);Ve.push(Math.floor((dt.y+st)/Qe)+1),Ve.push(Math.floor((dt.y+dt.h+st)/Qe)+1);break;case"bct":var Bt=je(this.ctx.lastPoint.x,this.ctx.lastPoint.y,te.x1,te.y1,te.x2,te.y2,te.x,te.y);Ve.push(Math.floor((Bt.y+st)/Qe)+1),Ve.push(Math.floor((Bt.y+Bt.h+st)/Qe)+1);break;case"rect":Ve.push(Math.floor((te.y+st)/Qe)+1),Ve.push(Math.floor((te.y+te.h+st)/Qe)+1)}for(var Ge=0;Ge<Ve.length;Ge+=1)for(;this.pdf.internal.getNumberOfPages()<Ve[Ge];)k.call(this);return Ve},k=function(){var te=this.fillStyle,Fe=this.strokeStyle,Qe=this.font,Ve=this.lineCap,st=this.lineWidth,dt=this.lineJoin;this.pdf.addPage(),this.fillStyle=te,this.strokeStyle=Fe,this.font=Qe,this.lineCap=Ve,this.lineWidth=st,this.lineJoin=dt},O=function(te,Fe,Qe){for(var Ve=0;Ve<te.length;Ve++)switch(te[Ve].type){case"bct":te[Ve].x2+=Fe,te[Ve].y2+=Qe;case"qct":te[Ve].x1+=Fe,te[Ve].y1+=Qe;case"mt":case"lt":case"arc":default:te[Ve].x+=Fe,te[Ve].y+=Qe}return te},G=function(te){return te.sort(function(Fe,Qe){return Fe-Qe})},K=function(te,Fe){for(var Qe,Ve,st=this.fillStyle,dt=this.strokeStyle,Bt=this.lineCap,Ge=this.lineWidth,tt=Math.abs(Ge*this.ctx.transform.scaleX),Qt=this.lineJoin,ht=JSON.parse(JSON.stringify(this.path)),Nt=JSON.parse(JSON.stringify(this.path)),dr=[],Pt=0;Pt<Nt.length;Pt++)if(Nt[Pt].x!==void 0)for(var Oe=R.call(this,Nt[Pt]),pr=0;pr<Oe.length;pr+=1)dr.indexOf(Oe[pr])===-1&&dr.push(Oe[pr]);for(var sr=0;sr<dr.length;sr++)for(;this.pdf.internal.getNumberOfPages()<dr[sr];)k.call(this);if(G(dr),this.autoPaging)for(var zt=dr[0],fr=dr[dr.length-1],Br=zt;Br<fr+1;Br++){this.pdf.setPage(Br),this.fillStyle=st,this.strokeStyle=dt,this.lineCap=Bt,this.lineWidth=tt,this.lineJoin=Qt;var vr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Gr=Br===1?this.posY+this.margin[0]:this.margin[0],rr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],xr=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Zr=Br===1?0:rr+(Br-2)*xr;if(this.ctx.clip_path.length!==0){var pn=this.path;Qe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=O(Qe,this.posX+this.margin[3],-Zr+Gr+this.ctx.prevPageLastElemOffset),Z.call(this,te,!0),this.path=pn}if(Ve=JSON.parse(JSON.stringify(ht)),this.path=O(Ve,this.posX+this.margin[3],-Zr+Gr+this.ctx.prevPageLastElemOffset),Fe===!1||Br===0){var vt=(Br>zt||Br<fr)&&P.call(this);vt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],vr,xr,null).clip().discardPath()),Z.call(this,te,Fe),vt&&this.pdf.restoreGraphicsState()}this.lineWidth=Ge}else this.lineWidth=tt,Z.call(this,te,Fe),this.lineWidth=Ge;this.path=ht},Z=function(te,Fe){if((te!=="stroke"||Fe||!Q.call(this))&&(te==="stroke"||Fe||!x.call(this))){for(var Qe,Ve,st=[],dt=this.path,Bt=0;Bt<dt.length;Bt++){var Ge=dt[Bt];switch(Ge.type){case"begin":st.push({begin:!0});break;case"close":st.push({close:!0});break;case"mt":st.push({start:Ge,deltas:[],abs:[]});break;case"lt":var tt=st.length;if(dt[Bt-1]&&!isNaN(dt[Bt-1].x)&&(Qe=[Ge.x-dt[Bt-1].x,Ge.y-dt[Bt-1].y],tt>0)){for(;tt>=0;tt--)if(st[tt-1].close!==!0&&st[tt-1].begin!==!0){st[tt-1].deltas.push(Qe),st[tt-1].abs.push(Ge);break}}break;case"bct":Qe=[Ge.x1-dt[Bt-1].x,Ge.y1-dt[Bt-1].y,Ge.x2-dt[Bt-1].x,Ge.y2-dt[Bt-1].y,Ge.x-dt[Bt-1].x,Ge.y-dt[Bt-1].y],st[st.length-1].deltas.push(Qe);break;case"qct":var Qt=dt[Bt-1].x+2/3*(Ge.x1-dt[Bt-1].x),ht=dt[Bt-1].y+2/3*(Ge.y1-dt[Bt-1].y),Nt=Ge.x+2/3*(Ge.x1-Ge.x),dr=Ge.y+2/3*(Ge.y1-Ge.y),Pt=Ge.x,Oe=Ge.y;Qe=[Qt-dt[Bt-1].x,ht-dt[Bt-1].y,Nt-dt[Bt-1].x,dr-dt[Bt-1].y,Pt-dt[Bt-1].x,Oe-dt[Bt-1].y],st[st.length-1].deltas.push(Qe);break;case"arc":st.push({deltas:[],abs:[],arc:!0}),Array.isArray(st[st.length-1].abs)&&st[st.length-1].abs.push(Ge)}}Ve=Fe?null:te==="stroke"?"stroke":"fill";for(var pr=!1,sr=0;sr<st.length;sr++)if(st[sr].arc)for(var zt=st[sr].abs,fr=0;fr<zt.length;fr++){var Br=zt[fr];Br.type==="arc"?Ae.call(this,Br.x,Br.y,Br.radius,Br.startAngle,Br.endAngle,Br.counterclockwise,void 0,Fe,!pr):xe.call(this,Br.x,Br.y),pr=!0}else if(st[sr].close===!0)this.pdf.internal.out("h"),pr=!1;else if(st[sr].begin!==!0){var vr=st[sr].start.x,Gr=st[sr].start.y;ve.call(this,st[sr].deltas,vr,Gr),pr=!0}Ve&&ge.call(this,Ve),Fe&&he.call(this)}},$=function(te){var Fe=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Qe=Fe*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return te-Qe;case"top":return te+Fe-Qe;case"hanging":return te+Fe-2*Qe;case"middle":return te+Fe/2-Qe;case"ideographic":return te;case"alphabetic":default:return te}},fe=function(te){return te+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};E.prototype.createLinearGradient=function(){var te=function(){};return te.colorStops=[],te.addColorStop=function(Fe,Qe){this.colorStops.push([Fe,Qe])},te.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},te.isCanvasGradient=!0,te},E.prototype.createPattern=function(){return this.createLinearGradient()},E.prototype.createRadialGradient=function(){return this.createLinearGradient()};var Ae=function(te,Fe,Qe,Ve,st,dt,Bt,Ge,tt){for(var Qt=Le.call(this,Qe,Ve,st,dt),ht=0;ht<Qt.length;ht++){var Nt=Qt[ht];ht===0&&(tt?ee.call(this,Nt.x1+te,Nt.y1+Fe):xe.call(this,Nt.x1+te,Nt.y1+Fe)),ze.call(this,te,Fe,Nt.x2,Nt.y2,Nt.x3,Nt.y3,Nt.x4,Nt.y4)}Ge?he.call(this):ge.call(this,Bt)},ge=function(te){switch(te){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},he=function(){this.pdf.clip(),this.pdf.discardPath()},ee=function(te,Fe){this.pdf.internal.out(r(te)+" "+s(Fe)+" m")},ne=function(te){var Fe;switch(te.align){case"right":case"end":Fe="right";break;case"center":Fe="center";break;case"left":case"start":default:Fe="left"}var Qe=this.pdf.getTextDimensions(te.text),Ve=$.call(this,te.y),st=fe.call(this,Ve)-Qe.h,dt=this.ctx.transform.applyToPoint(new h(te.x,Ve)),Bt=this.ctx.transform.decompose(),Ge=new d;Ge=(Ge=(Ge=Ge.multiply(Bt.translate)).multiply(Bt.skew)).multiply(Bt.scale);for(var tt,Qt,ht,Nt=this.ctx.transform.applyToRectangle(new a(te.x,Ve,Qe.w,Qe.h)),dr=Ge.applyToRectangle(new a(te.x,st,Qe.w,Qe.h)),Pt=R.call(this,dr),Oe=[],pr=0;pr<Pt.length;pr+=1)Oe.indexOf(Pt[pr])===-1&&Oe.push(Pt[pr]);if(G(Oe),this.autoPaging)for(var sr=Oe[0],zt=Oe[Oe.length-1],fr=sr;fr<zt+1;fr++){this.pdf.setPage(fr);var Br=fr===1?this.posY+this.margin[0]:this.margin[0],vr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Gr=this.pdf.internal.pageSize.height-this.margin[2],rr=Gr-this.margin[0],xr=this.pdf.internal.pageSize.width-this.margin[1],Zr=xr-this.margin[3],pn=fr===1?0:vr+(fr-2)*rr;if(this.ctx.clip_path.length!==0){var vt=this.path;tt=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=O(tt,this.posX+this.margin[3],-1*pn+Br),Z.call(this,"fill",!0),this.path=vt}var nt=O([JSON.parse(JSON.stringify(dr))],this.posX+this.margin[3],-pn+Br+this.ctx.prevPageLastElemOffset)[0];te.scale>=.01&&(Qt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Qt*te.scale),ht=this.lineWidth,this.lineWidth=ht*te.scale);var bt=this.autoPaging!=="text";if(bt||nt.y+nt.h<=Gr){if(bt||nt.y>=Br&&nt.x<=xr){var Ct=bt?te.text:this.pdf.splitTextToSize(te.text,te.maxWidth||xr-nt.x)[0],jt=O([JSON.parse(JSON.stringify(Nt))],this.posX+this.margin[3],-pn+Br+this.ctx.prevPageLastElemOffset)[0],er=bt&&(fr>sr||fr<zt)&&P.call(this);er&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Zr,rr,null).clip().discardPath()),this.pdf.text(Ct,jt.x,jt.y,{angle:te.angle,align:Fe,renderingMode:te.renderingMode}),er&&this.pdf.restoreGraphicsState()}}else nt.y<Gr&&(this.ctx.prevPageLastElemOffset+=Gr-nt.y);te.scale>=.01&&(this.pdf.setFontSize(Qt),this.lineWidth=ht)}else te.scale>=.01&&(Qt=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Qt*te.scale),ht=this.lineWidth,this.lineWidth=ht*te.scale),this.pdf.text(te.text,dt.x+this.posX,dt.y+this.posY,{angle:te.angle,align:Fe,renderingMode:te.renderingMode,maxWidth:te.maxWidth}),te.scale>=.01&&(this.pdf.setFontSize(Qt),this.lineWidth=ht)},xe=function(te,Fe,Qe,Ve){Qe=Qe||0,Ve=Ve||0,this.pdf.internal.out(r(te+Qe)+" "+s(Fe+Ve)+" l")},ve=function(te,Fe,Qe){return this.pdf.lines(te,Fe,Qe,null,null)},ze=function(te,Fe,Qe,Ve,st,dt,Bt,Ge){this.pdf.internal.out([t(l(Qe+te)),t(c(Ve+Fe)),t(l(st+te)),t(c(dt+Fe)),t(l(Bt+te)),t(c(Ge+Fe)),"c"].join(" "))},Le=function(te,Fe,Qe,Ve){for(var st=2*Math.PI,dt=Math.PI/2;Fe>Qe;)Fe-=st;var Bt=Math.abs(Qe-Fe);Bt<st&&Ve&&(Bt=st-Bt);for(var Ge=[],tt=Ve?-1:1,Qt=Fe;Bt>1e-5;){var ht=Qt+tt*Math.min(Bt,dt);Ge.push(Ke.call(this,te,Qt,ht)),Bt-=Math.abs(ht-Qt),Qt=ht}return Ge},Ke=function(te,Fe,Qe){var Ve=(Qe-Fe)/2,st=te*Math.cos(Ve),dt=te*Math.sin(Ve),Bt=st,Ge=-dt,tt=Bt*Bt+Ge*Ge,Qt=tt+Bt*st+Ge*dt,ht=4/3*(Math.sqrt(2*tt*Qt)-Qt)/(Bt*dt-Ge*st),Nt=Bt-ht*Ge,dr=Ge+ht*Bt,Pt=Nt,Oe=-dr,pr=Ve+Fe,sr=Math.cos(pr),zt=Math.sin(pr);return{x1:te*Math.cos(Fe),y1:te*Math.sin(Fe),x2:Nt*sr-dr*zt,y2:Nt*zt+dr*sr,x3:Pt*sr-Oe*zt,y3:Pt*zt+Oe*sr,x4:te*Math.cos(Qe),y4:te*Math.sin(Qe)}},Ue=function(te){return 180*te/Math.PI},rt=function(te,Fe,Qe,Ve,st,dt){var Bt=te+.5*(Qe-te),Ge=Fe+.5*(Ve-Fe),tt=st+.5*(Qe-st),Qt=dt+.5*(Ve-dt),ht=Math.min(te,st,Bt,tt),Nt=Math.max(te,st,Bt,tt),dr=Math.min(Fe,dt,Ge,Qt),Pt=Math.max(Fe,dt,Ge,Qt);return new a(ht,dr,Nt-ht,Pt-dr)},je=function(te,Fe,Qe,Ve,st,dt,Bt,Ge){var tt,Qt,ht,Nt,dr,Pt,Oe,pr,sr,zt,fr,Br,vr,Gr,rr=Qe-te,xr=Ve-Fe,Zr=st-Qe,pn=dt-Ve,vt=Bt-st,nt=Ge-dt;for(Qt=0;Qt<41;Qt++)sr=(Oe=(ht=te+(tt=Qt/40)*rr)+tt*((dr=Qe+tt*Zr)-ht))+tt*(dr+tt*(st+tt*vt-dr)-Oe),zt=(pr=(Nt=Fe+tt*xr)+tt*((Pt=Ve+tt*pn)-Nt))+tt*(Pt+tt*(dt+tt*nt-Pt)-pr),Qt==0?(fr=sr,Br=zt,vr=sr,Gr=zt):(fr=Math.min(fr,sr),Br=Math.min(Br,zt),vr=Math.max(vr,sr),Gr=Math.max(Gr,zt));return new a(Math.round(fr),Math.round(Br),Math.round(vr-fr),Math.round(Gr-Br))},St=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var te,Fe,Qe=(te=this.ctx.lineDash,Fe=this.ctx.lineDashOffset,JSON.stringify({lineDash:te,lineDashOffset:Fe}));this.prevLineDash!==Qe&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Qe)}}})(Nn.API),function(e){var t=function(c){var h,a,d,_,p,E,w,x,Q,P;for(a=[],d=0,_=(c+=h="\0\0\0\0".slice(c.length%4||4)).length;_>d;d+=4)(p=(c.charCodeAt(d)<<24)+(c.charCodeAt(d+1)<<16)+(c.charCodeAt(d+2)<<8)+c.charCodeAt(d+3))!==0?(E=(p=((p=((p=((p=(p-(P=p%85))/85)-(Q=p%85))/85)-(x=p%85))/85)-(w=p%85))/85)%85,a.push(E+33,w+33,x+33,Q+33,P+33)):a.push(122);return function(R,k){for(var O=k;O>0;O--)R.pop()}(a,h.length),String.fromCharCode.apply(String,a)+"~>"},r=function(c){var h,a,d,_,p,E=String,w="length",x=255,Q="charCodeAt",P="slice",R="replace";for(c[P](-2),c=c[P](0,-2)[R](/\s/g,"")[R]("z","!!!!!"),d=[],_=0,p=(c+=h="uuuuu"[P](c[w]%5||5))[w];p>_;_+=5)a=52200625*(c[Q](_)-33)+614125*(c[Q](_+1)-33)+7225*(c[Q](_+2)-33)+85*(c[Q](_+3)-33)+(c[Q](_+4)-33),d.push(x&a>>24,x&a>>16,x&a>>8,x&a);return function(k,O){for(var G=O;G>0;G--)k.pop()}(d,h[w]),E.fromCharCode.apply(E,d)},s=function(c){var h=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((c=c.replace(/\s/g,"")).indexOf(">")!==-1&&(c=c.substr(0,c.indexOf(">"))),c.length%2&&(c+="0"),h.test(c)===!1)return"";for(var a="",d=0;d<c.length;d+=2)a+=String.fromCharCode("0x"+(c[d]+c[d+1]));return a},l=function(c){for(var h=new Uint8Array(c.length),a=c.length;a--;)h[a]=c.charCodeAt(a);return c=(h=vg(h)).reduce(function(d,_){return d+String.fromCharCode(_)},"")};e.processDataByFilters=function(c,h){var a=0,d=c||"",_=[];for(typeof(h=h||[])=="string"&&(h=[h]),a=0;a<h.length;a+=1)switch(h[a]){case"ASCII85Decode":case"/ASCII85Decode":d=r(d),_.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":d=t(d),_.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":d=s(d),_.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":d=d.split("").map(function(p){return("0"+p.charCodeAt().toString(16)).slice(-2)}).join("")+">",_.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":d=l(d),_.push("/FlateDecode");break;default:throw new Error('The filter: "'+h[a]+'" is not implemented')}return{data:d,reverseChain:_.reverse().join(" ")}}}(Nn.API),function(e){e.loadFile=function(t,r,s){return function(l,c,h){c=c!==!1,h=typeof h=="function"?h:function(){};var a=void 0;try{a=function(d,_,p){var E=new XMLHttpRequest,w=0,x=function(Q){var P=Q.length,R=[],k=String.fromCharCode;for(w=0;w<P;w+=1)R.push(k(255&Q.charCodeAt(w)));return R.join("")};if(E.open("GET",d,!_),E.overrideMimeType("text/plain; charset=x-user-defined"),_===!1&&(E.onload=function(){E.status===200?p(x(this.responseText)):p(void 0)}),E.send(null),_&&E.status===200)return x(E.responseText)}(l,c,h)}catch{}return a}(t,r,s)},e.loadImageFile=e.loadFile}(Nn.API),function(e){function t(){return(zn.html2canvas?Promise.resolve(zn.html2canvas):dg(()=>import("./html2canvas-037f8c0d.js").then(h=>h.h),[])).catch(function(h){return Promise.reject(new Error("Could not load html2canvas: "+h))}).then(function(h){return h.default?h.default:h})}function r(){return(zn.DOMPurify?Promise.resolve(zn.DOMPurify):dg(()=>import("./purify.es-1ffe5759.js"),[])).catch(function(h){return Promise.reject(new Error("Could not load dompurify: "+h))}).then(function(h){return h.default?h.default:h})}var s=function(h){var a=qi(h);return a==="undefined"?"undefined":a==="string"||h instanceof String?"string":a==="number"||h instanceof Number?"number":a==="function"||h instanceof Function?"function":h&&h.constructor===Array?"array":h&&h.nodeType===1?"element":a==="object"?"object":"unknown"},l=function(h,a){var d=document.createElement(h);for(var _ in a.className&&(d.className=a.className),a.innerHTML&&a.dompurify&&(d.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)d.style[_]=a.style[_];return d},c=function h(a){var d=Object.assign(h.convert(Promise.resolve()),JSON.parse(JSON.stringify(h.template))),_=h.convert(Promise.resolve(),d);return _=(_=_.setProgress(1,h,1,[h])).set(a)};(c.prototype=Object.create(Promise.prototype)).constructor=c,c.convert=function(h,a){return h.__proto__=a||c.prototype,h},c.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},c.prototype.from=function(h,a){return this.then(function(){switch(a=a||function(d){switch(s(d)){case"string":return"string";case"element":return d.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(h)){case"string":return this.then(r).then(function(d){return this.set({src:l("div",{innerHTML:h,dompurify:d})})});case"element":return this.set({src:h});case"canvas":return this.set({canvas:h});case"img":return this.set({img:h});default:return this.error("Unknown source type.")}})},c.prototype.to=function(h){switch(h){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},c.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var h={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function d(_,p){for(var E=_.nodeType===3?document.createTextNode(_.nodeValue):_.cloneNode(!1),w=_.firstChild;w;w=w.nextSibling)p!==!0&&w.nodeType===1&&w.nodeName==="SCRIPT"||E.appendChild(d(w,p));return _.nodeType===1&&(_.nodeName==="CANVAS"?(E.width=_.width,E.height=_.height,E.getContext("2d").drawImage(_,0,0)):_.nodeName!=="TEXTAREA"&&_.nodeName!=="SELECT"||(E.value=_.value),E.addEventListener("load",function(){E.scrollTop=_.scrollTop,E.scrollLeft=_.scrollLeft},!0)),E}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(h.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=l("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=l("div",{className:"html2pdf__container",style:h}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(l("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},c.prototype.toCanvas=function(){var h=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(h).then(t).then(function(a){var d=Object.assign({},this.opt.html2canvas);return delete d.onrendered,a(this.prop.container,d)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},c.prototype.toContext2d=function(){var h=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(h).then(t).then(function(a){var d=this.opt.jsPDF,_=this.opt.fontFaces,p=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,E=Object.assign({async:!0,allowTaint:!0,scale:p,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete E.onrendered,d.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,d.context2d.posX=this.opt.x,d.context2d.posY=this.opt.y,d.context2d.margin=this.opt.margin,d.context2d.fontFaces=_,_)for(var w=0;w<_.length;++w){var x=_[w],Q=x.src.find(function(P){return P.format==="truetype"});Q&&d.addFont(Q.url,x.ref.name,x.ref.style)}return E.windowHeight=E.windowHeight||0,E.windowHeight=E.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):E.windowHeight,d.context2d.save(!0),a(this.prop.container,E)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},c.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var h=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=h})},c.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},c.prototype.output=function(h,a,d){return(d=d||"pdf").toLowerCase()==="img"||d.toLowerCase()==="image"?this.outputImg(h,a):this.outputPdf(h,a)},c.prototype.outputPdf=function(h,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(h,a)})},c.prototype.outputImg=function(h){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(h){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+h+'" is not supported.'}})},c.prototype.save=function(h){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(h?{filename:h}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},c.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},c.prototype.set=function(h){if(s(h)!=="object")return this;var a=Object.keys(h||{}).map(function(d){if(d in c.template.prop)return function(){this.prop[d]=h[d]};switch(d){case"margin":return this.setMargin.bind(this,h.margin);case"jsPDF":return function(){return this.opt.jsPDF=h.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,h.pageSize);default:return function(){this.opt[d]=h[d]}}},this);return this.then(function(){return this.thenList(a)})},c.prototype.get=function(h,a){return this.then(function(){var d=h in c.template.prop?this.prop[h]:this.opt[h];return a?a(d):d})},c.prototype.setMargin=function(h){return this.then(function(){switch(s(h)){case"number":h=[h,h,h,h];case"array":if(h.length===2&&(h=[h[0],h[1],h[0],h[1]]),h.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=h}).then(this.setPageSize)},c.prototype.setPageSize=function(h){function a(d,_){return Math.floor(d*_/72*96)}return this.then(function(){(h=h||Nn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(h.inner={width:h.width-this.opt.margin[1]-this.opt.margin[3],height:h.height-this.opt.margin[0]-this.opt.margin[2]},h.inner.px={width:a(h.inner.width,h.k),height:a(h.inner.height,h.k)},h.inner.ratio=h.inner.height/h.inner.width),this.prop.pageSize=h})},c.prototype.setProgress=function(h,a,d,_){return h!=null&&(this.progress.val=h),a!=null&&(this.progress.state=a),d!=null&&(this.progress.n=d),_!=null&&(this.progress.stack=_),this.progress.ratio=this.progress.val/this.progress.state,this},c.prototype.updateProgress=function(h,a,d,_){return this.setProgress(h?this.progress.val+h:null,a||null,d?this.progress.n+d:null,_?this.progress.stack.concat(_):null)},c.prototype.then=function(h,a){var d=this;return this.thenCore(h,a,function(_,p){return d.updateProgress(null,null,1,[_]),Promise.prototype.then.call(this,function(E){return d.updateProgress(null,_),E}).then(_,p).then(function(E){return d.updateProgress(1),E})})},c.prototype.thenCore=function(h,a,d){d=d||Promise.prototype.then,h&&(h=h.bind(this)),a&&(a=a.bind(this));var _=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:c.convert(Object.assign({},this),Promise.prototype),p=d.call(_,h,a);return c.convert(p,this.__proto__)},c.prototype.thenExternal=function(h,a){return Promise.prototype.then.call(this,h,a)},c.prototype.thenList=function(h){var a=this;return h.forEach(function(d){a=a.thenCore(d)}),a},c.prototype.catch=function(h){h&&(h=h.bind(this));var a=Promise.prototype.catch.call(this,h);return c.convert(a,this)},c.prototype.catchExternal=function(h){return Promise.prototype.catch.call(this,h)},c.prototype.error=function(h){return this.then(function(){throw new Error(h)})},c.prototype.using=c.prototype.set,c.prototype.saveAs=c.prototype.save,c.prototype.export=c.prototype.output,c.prototype.run=c.prototype.then,Nn.getPageSize=function(h,a,d){if(qi(h)==="object"){var _=h;h=_.orientation,a=_.unit||a,d=_.format||d}a=a||"mm",d=d||"a4",h=(""+(h||"P")).toLowerCase();var p,E=(""+d).toLowerCase(),w={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":p=1;break;case"mm":p=72/25.4;break;case"cm":p=72/2.54;break;case"in":p=72;break;case"px":p=.75;break;case"pc":case"em":p=12;break;case"ex":p=6;break;default:throw"Invalid unit: "+a}var x,Q=0,P=0;if(w.hasOwnProperty(E))Q=w[E][1]/p,P=w[E][0]/p;else try{Q=d[1],P=d[0]}catch{throw new Error("Invalid format: "+d)}if(h==="p"||h==="portrait")h="p",P>Q&&(x=P,P=Q,Q=x);else{if(h!=="l"&&h!=="landscape")throw"Invalid orientation: "+h;h="l",Q>P&&(x=P,P=Q,Q=x)}return{width:P,height:Q,unit:a,k:p,orientation:h}},e.html=function(h,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(Cg):null;var d=new c(a);return a.worker?d:d.from(h).doCallback()}}(Nn.API),Nn.API.addJS=function(e){return Qy=e,this.internal.events.subscribe("postPutResources",function(){ap=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(ap+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Ly=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Qy+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){ap!==void 0&&Ly!==void 0&&this.internal.out("/Names <</JavaScript "+ap+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,s=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var l=r.outline.render().split(/\r\n/),c=0;c<l.length;c++){var h=l[c],a=s.exec(h);if(a!=null){var d=a[1];r.internal.newObjectDeferredBegin(d,!1)}r.internal.write(h)}if(this.outline.createNamedDestinations){var _=this.internal.pages.length,p=[];for(c=0;c<_;c++){var E=r.internal.newObject();p.push(E);var w=r.internal.getPageInfo(c+1);r.internal.write("<< /D["+w.objId+" 0 R /XYZ null null null]>> endobj")}var x=r.internal.newObject();for(r.internal.write("<< /Names [ "),c=0;c<p.length;c++)r.internal.write("(page_"+(c+1)+")"+p[c]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+x+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(s,l,c){var h={title:l,options:c,children:[]};return s==null&&(s=this.root),s.children.push(h),h},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(s){s.id=r.internal.newObjectDeferred();for(var l=0;l<s.children.length;l++)this.genIds_r(s.children[l])},r.outline.renderRoot=function(s){this.objStart(s),this.line("/Type /Outlines"),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1]))),this.line("/Count "+this.count_r({count:0},s)),this.objEnd()},r.outline.renderItems=function(s){for(var l=this.ctx.pdf.internal.getVerticalCoordinateString,c=0;c<s.children.length;c++){var h=s.children[c];this.objStart(h),this.line("/Title "+this.makeString(h.title)),this.line("/Parent "+this.makeRef(s)),c>0&&this.line("/Prev "+this.makeRef(s.children[c-1])),c<s.children.length-1&&this.line("/Next "+this.makeRef(s.children[c+1])),h.children.length>0&&(this.line("/First "+this.makeRef(h.children[0])),this.line("/Last "+this.makeRef(h.children[h.children.length-1])));var a=this.count=this.count_r({count:0},h);if(a>0&&this.line("/Count "+a),h.options&&h.options.pageNumber){var d=r.internal.getPageInfo(h.options.pageNumber);this.line("/Dest ["+d.objId+" 0 R /XYZ 0 "+l(0)+" 0]")}this.objEnd()}for(var _=0;_<s.children.length;_++)this.renderItems(s.children[_])},r.outline.line=function(s){this.ctx.val+=s+`\r
`},r.outline.makeRef=function(s){return s.id+" 0 R"},r.outline.makeString=function(s){return"("+r.internal.pdfEscape(s)+")"},r.outline.objStart=function(s){this.ctx.val+=`\r
`+s.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(s,l){for(var c=0;c<l.children.length;c++)s.count++,this.count_r(s,l.children[c]);return s.count}}])}(Nn.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,s,l,c,h,a){var d,_=this.decode.DCT_DECODE,p=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=h||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(d=function(E){for(var w,x=256*E.charCodeAt(4)+E.charCodeAt(5),Q=E.length,P={width:0,height:0,numcomponents:1},R=4;R<Q;R+=2){if(R+=x,t.indexOf(E.charCodeAt(R+1))!==-1){w=256*E.charCodeAt(R+5)+E.charCodeAt(R+6),P={width:256*E.charCodeAt(R+7)+E.charCodeAt(R+8),height:w,numcomponents:E.charCodeAt(R+9)};break}x=256*E.charCodeAt(R+2)+E.charCodeAt(R+3)}return P}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}p={data:r,width:d.width,height:d.height,colorSpace:a,bitsPerComponent:8,filter:_,index:s,alias:l}}return p}}(Nn.API);var Dh,op,Py,ky,My,nS=function(){var e,t,r;function s(c){var h,a,d,_,p,E,w,x,Q,P,R,k,O,G;for(this.data=c,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},E=null;;){switch(h=this.readUInt32(),Q=function(){var K,Z;for(Z=[],K=0;K<4;++K)Z.push(String.fromCharCode(this.data[this.pos++]));return Z}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(h);break;case"fcTL":E&&this.animation.frames.push(E),this.pos+=4,E={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},p=this.readUInt16(),_=this.readUInt16()||100,E.delay=1e3*p/_,E.disposeOp=this.data[this.pos++],E.blendOp=this.data[this.pos++],E.data=[];break;case"IDAT":case"fdAT":for(Q==="fdAT"&&(this.pos+=4,h-=4),c=(E!=null?E.data:void 0)||this.imgData,k=0;0<=h?k<h:k>h;0<=h?++k:--k)c.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(d=this.palette.length/3,this.transparency.indexed=this.read(h),this.transparency.indexed.length>d)throw new Error("More transparent colors than palette size");if((P=d-this.transparency.indexed.length)>0)for(O=0;0<=P?O<P:O>P;0<=P?++O:--O)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(h)[0];break;case 2:this.transparency.rgb=this.read(h)}break;case"tEXt":w=(R=this.read(h)).indexOf(0),x=String.fromCharCode.apply(String,R.slice(0,w)),this.text[x]=String.fromCharCode.apply(String,R.slice(w+1));break;case"IEND":return E&&this.animation.frames.push(E),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=(G=this.colorType)===4||G===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=h}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}s.prototype.read=function(c){var h,a;for(a=[],h=0;0<=c?h<c:h>c;0<=c?++h:--h)a.push(this.data[this.pos++]);return a},s.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},s.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},s.prototype.decodePixels=function(c){var h=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*h),d=0,_=this;if(c==null&&(c=this.imgData),c.length===0)return new Uint8Array(0);function p(E,w,x,Q){var P,R,k,O,G,K,Z,$,fe,Ae,ge,he,ee,ne,xe,ve,ze,Le,Ke,Ue,rt,je=Math.ceil((_.width-E)/x),St=Math.ceil((_.height-w)/Q),te=_.width==je&&_.height==St;for(ne=h*je,he=te?a:new Uint8Array(ne*St),K=c.length,ee=0,R=0;ee<St&&d<K;){switch(c[d++]){case 0:for(O=ze=0;ze<ne;O=ze+=1)he[R++]=c[d++];break;case 1:for(O=Le=0;Le<ne;O=Le+=1)P=c[d++],G=O<h?0:he[R-h],he[R++]=(P+G)%256;break;case 2:for(O=Ke=0;Ke<ne;O=Ke+=1)P=c[d++],k=(O-O%h)/h,xe=ee&&he[(ee-1)*ne+k*h+O%h],he[R++]=(xe+P)%256;break;case 3:for(O=Ue=0;Ue<ne;O=Ue+=1)P=c[d++],k=(O-O%h)/h,G=O<h?0:he[R-h],xe=ee&&he[(ee-1)*ne+k*h+O%h],he[R++]=(P+Math.floor((G+xe)/2))%256;break;case 4:for(O=rt=0;rt<ne;O=rt+=1)P=c[d++],k=(O-O%h)/h,G=O<h?0:he[R-h],ee===0?xe=ve=0:(xe=he[(ee-1)*ne+k*h+O%h],ve=k&&he[(ee-1)*ne+(k-1)*h+O%h]),Z=G+xe-ve,$=Math.abs(Z-G),Ae=Math.abs(Z-xe),ge=Math.abs(Z-ve),fe=$<=Ae&&$<=ge?G:Ae<=ge?xe:ve,he[R++]=(P+fe)%256;break;default:throw new Error("Invalid filter algorithm: "+c[d-1])}if(!te){var Fe=((w+ee*Q)*_.width+E)*h,Qe=ee*ne;for(O=0;O<je;O+=1){for(var Ve=0;Ve<h;Ve+=1)a[Fe++]=he[Qe++];Fe+=(x-1)*h}}ee++}}return c=MF(c),_.interlaceMethod==1?(p(0,0,8,8),p(4,0,8,8),p(0,4,4,8),p(2,0,4,4),p(0,2,2,4),p(1,0,2,2),p(0,1,1,2)):p(0,0,1,1),a},s.prototype.decodePalette=function(){var c,h,a,d,_,p,E,w,x;for(a=this.palette,p=this.transparency.indexed||[],_=new Uint8Array((p.length||0)+a.length),d=0,c=0,h=E=0,w=a.length;E<w;h=E+=3)_[d++]=a[h],_[d++]=a[h+1],_[d++]=a[h+2],_[d++]=(x=p[c++])!=null?x:255;return _},s.prototype.copyToImageData=function(c,h){var a,d,_,p,E,w,x,Q,P,R,k;if(d=this.colors,P=null,a=this.hasAlphaChannel,this.palette.length&&(P=(k=this._decodedPalette)!=null?k:this._decodedPalette=this.decodePalette(),d=4,a=!0),Q=(_=c.data||c).length,E=P||h,p=w=0,d===1)for(;p<Q;)x=P?4*h[p/4]:w,R=E[x++],_[p++]=R,_[p++]=R,_[p++]=R,_[p++]=a?E[x++]:255,w=x;else for(;p<Q;)x=P?4*h[p/4]:w,_[p++]=E[x++],_[p++]=E[x++],_[p++]=E[x++],_[p++]=a?E[x++]:255,w=x},s.prototype.decode=function(){var c;return c=new Uint8Array(this.width*this.height*4),this.copyToImageData(c,this.decodePixels()),c};var l=function(){if(Object.prototype.toString.call(zn)==="[object Window]"){try{t=zn.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return l(),e=function(c){var h;if(l()===!0)return r.width=c.width,r.height=c.height,r.clearRect(0,0,c.width,c.height),r.putImageData(c,0,0),(h=new Image).src=t.toDataURL(),h;throw new Error("This method requires a Browser with Canvas-capability.")},s.prototype.decodeFrames=function(c){var h,a,d,_,p,E,w,x;if(this.animation){for(x=[],a=p=0,E=(w=this.animation.frames).length;p<E;a=++p)h=w[a],d=c.createImageData(h.width,h.height),_=this.decodePixels(new Uint8Array(h.data)),this.copyToImageData(d,_),h.imageData=d,x.push(h.image=e(d));return x}},s.prototype.renderFrame=function(c,h){var a,d,_;return a=(d=this.animation.frames)[h],_=d[h-1],h===0&&c.clearRect(0,0,this.width,this.height),(_!=null?_.disposeOp:void 0)===1?c.clearRect(_.xOffset,_.yOffset,_.width,_.height):(_!=null?_.disposeOp:void 0)===2&&c.putImageData(_.imageData,_.xOffset,_.yOffset),a.blendOp===0&&c.clearRect(a.xOffset,a.yOffset,a.width,a.height),c.drawImage(a.image,a.xOffset,a.yOffset)},s.prototype.animate=function(c){var h,a,d,_,p,E,w=this;return a=0,E=this.animation,_=E.numFrames,d=E.frames,p=E.numPlays,(h=function(){var x,Q;if(x=a++%_,Q=d[x],w.renderFrame(c,x),_>1&&a/_<p)return w.animation._timeout=setTimeout(h,Q.delay)})()},s.prototype.stopAnimation=function(){var c;return clearTimeout((c=this.animation)!=null?c._timeout:void 0)},s.prototype.render=function(c){var h,a;return c._png&&c._png.stopAnimation(),c._png=this,c.width=this.width,c.height=this.height,h=c.getContext("2d"),this.animation?(this.decodeFrames(h),this.animate(h)):(a=h.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),h.putImageData(a,0,0))},s}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function iS(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,s=e[t++]|e[t++]<<8,l=e[t++],c=l>>7,h=1<<(7&l)+1;e[t++],e[t++];var a=null,d=null;c&&(a=t,d=h,t+=3*h);var _=!0,p=[],E=0,w=null,x=0,Q=null;for(this.width=r,this.height=s;_&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,Q=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((ee=e[t++])>=0))throw Error("Invalid block size");if(ee===0)break;t+=ee}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var P=e[t++];E=e[t++]|e[t++]<<8,w=e[t++],!(1&P)&&(w=null),x=P>>2&7,t++;break;case 254:for(;;){if(!((ee=e[t++])>=0))throw Error("Invalid block size");if(ee===0)break;t+=ee}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var R=e[t++]|e[t++]<<8,k=e[t++]|e[t++]<<8,O=e[t++]|e[t++]<<8,G=e[t++]|e[t++]<<8,K=e[t++],Z=K>>6&1,$=1<<(7&K)+1,fe=a,Ae=d,ge=!1;K>>7&&(ge=!0,fe=t,Ae=$,t+=3*$);var he=t;for(t++;;){var ee;if(!((ee=e[t++])>=0))throw Error("Invalid block size");if(ee===0)break;t+=ee}p.push({x:R,y:k,width:O,height:G,has_local_palette:ge,palette_offset:fe,palette_size:Ae,data_offset:he,data_length:t-he,transparent_index:w,interlaced:!!Z,delay:E,disposal:x});break;case 59:_=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return p.length},this.loopCount=function(){return Q},this.frameInfo=function(ne){if(ne<0||ne>=p.length)throw new Error("Frame index out of range.");return p[ne]},this.decodeAndBlitFrameBGRA=function(ne,xe){var ve=this.frameInfo(ne),ze=ve.width*ve.height,Le=new Uint8Array(ze);Dy(e,ve.data_offset,Le,ze);var Ke=ve.palette_offset,Ue=ve.transparent_index;Ue===null&&(Ue=256);var rt=ve.width,je=r-rt,St=rt,te=4*(ve.y*r+ve.x),Fe=4*((ve.y+ve.height)*r+ve.x),Qe=te,Ve=4*je;ve.interlaced===!0&&(Ve+=4*r*7);for(var st=8,dt=0,Bt=Le.length;dt<Bt;++dt){var Ge=Le[dt];if(St===0&&(St=rt,(Qe+=Ve)>=Fe&&(Ve=4*je+4*r*(st-1),Qe=te+(rt+je)*(st<<1),st>>=1)),Ge===Ue)Qe+=4;else{var tt=e[Ke+3*Ge],Qt=e[Ke+3*Ge+1],ht=e[Ke+3*Ge+2];xe[Qe++]=ht,xe[Qe++]=Qt,xe[Qe++]=tt,xe[Qe++]=255}--St}},this.decodeAndBlitFrameRGBA=function(ne,xe){var ve=this.frameInfo(ne),ze=ve.width*ve.height,Le=new Uint8Array(ze);Dy(e,ve.data_offset,Le,ze);var Ke=ve.palette_offset,Ue=ve.transparent_index;Ue===null&&(Ue=256);var rt=ve.width,je=r-rt,St=rt,te=4*(ve.y*r+ve.x),Fe=4*((ve.y+ve.height)*r+ve.x),Qe=te,Ve=4*je;ve.interlaced===!0&&(Ve+=4*r*7);for(var st=8,dt=0,Bt=Le.length;dt<Bt;++dt){var Ge=Le[dt];if(St===0&&(St=rt,(Qe+=Ve)>=Fe&&(Ve=4*je+4*r*(st-1),Qe=te+(rt+je)*(st<<1),st>>=1)),Ge===Ue)Qe+=4;else{var tt=e[Ke+3*Ge],Qt=e[Ke+3*Ge+1],ht=e[Ke+3*Ge+2];xe[Qe++]=tt,xe[Qe++]=Qt,xe[Qe++]=ht,xe[Qe++]=255}--St}}}function Dy(e,t,r,s){for(var l=e[t++],c=1<<l,h=c+1,a=h+1,d=l+1,_=(1<<d)-1,p=0,E=0,w=0,x=e[t++],Q=new Int32Array(4096),P=null;;){for(;p<16&&x!==0;)E|=e[t++]<<p,p+=8,x===1?x=e[t++]:--x;if(p<d)break;var R=E&_;if(E>>=d,p-=d,R!==c){if(R===h)break;for(var k=R<a?R:P,O=0,G=k;G>c;)G=Q[G]>>8,++O;var K=G;if(w+O+(k!==R?1:0)>s)return void us.log("Warning, gif stream longer than expected.");r[w++]=K;var Z=w+=O;for(k!==R&&(r[w++]=K),G=k;O--;)G=Q[G],r[--Z]=255&G,G>>=8;P!==null&&a<4096&&(Q[a++]=P<<8|K,a>=_+1&&d<12&&(++d,_=_<<1|1)),P=R}else a=h+1,_=(1<<(d=l+1))-1,P=null}return w!==s&&us.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Hm(e){var t,r,s,l,c,h=Math.floor,a=new Array(64),d=new Array(64),_=new Array(64),p=new Array(64),E=new Array(65535),w=new Array(65535),x=new Array(64),Q=new Array(64),P=[],R=0,k=7,O=new Array(64),G=new Array(64),K=new Array(64),Z=new Array(256),$=new Array(2048),fe=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],Ae=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],ge=[0,1,2,3,4,5,6,7,8,9,10,11],he=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],ee=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],ne=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],xe=[0,1,2,3,4,5,6,7,8,9,10,11],ve=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ze=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Le(te,Fe){for(var Qe=0,Ve=0,st=new Array,dt=1;dt<=16;dt++){for(var Bt=1;Bt<=te[dt];Bt++)st[Fe[Ve]]=[],st[Fe[Ve]][0]=Qe,st[Fe[Ve]][1]=dt,Ve++,Qe++;Qe*=2}return st}function Ke(te){for(var Fe=te[0],Qe=te[1]-1;Qe>=0;)Fe&1<<Qe&&(R|=1<<k),Qe--,--k<0&&(R==255?(Ue(255),Ue(0)):Ue(R),k=7,R=0)}function Ue(te){P.push(te)}function rt(te){Ue(te>>8&255),Ue(255&te)}function je(te,Fe,Qe,Ve,st){for(var dt,Bt=st[0],Ge=st[240],tt=function(zt,fr){var Br,vr,Gr,rr,xr,Zr,pn,vt,nt,bt,Ct=0;for(nt=0;nt<8;++nt){Br=zt[Ct],vr=zt[Ct+1],Gr=zt[Ct+2],rr=zt[Ct+3],xr=zt[Ct+4],Zr=zt[Ct+5],pn=zt[Ct+6];var jt=Br+(vt=zt[Ct+7]),er=Br-vt,Vr=vr+pn,Fr=vr-pn,un=Gr+Zr,lr=Gr-Zr,Er=rr+xr,An=rr-xr,wn=jt+Er,_i=jt-Er,br=Vr+un,Cr=Vr-un;zt[Ct]=wn+br,zt[Ct+4]=wn-br;var cr=.707106781*(Cr+_i);zt[Ct+2]=_i+cr,zt[Ct+6]=_i-cr;var Kr=.382683433*((wn=An+lr)-(Cr=Fr+er)),hn=.5411961*wn+Kr,xn=1.306562965*Cr+Kr,Sn=.707106781*(br=lr+Fr),ji=er+Sn,tn=er-Sn;zt[Ct+5]=tn+hn,zt[Ct+3]=tn-hn,zt[Ct+1]=ji+xn,zt[Ct+7]=ji-xn,Ct+=8}for(Ct=0,nt=0;nt<8;++nt){Br=zt[Ct],vr=zt[Ct+8],Gr=zt[Ct+16],rr=zt[Ct+24],xr=zt[Ct+32],Zr=zt[Ct+40],pn=zt[Ct+48];var Wi=Br+(vt=zt[Ct+56]),hs=Br-vt,Ln=vr+pn,nn=vr-pn,Ie=Gr+Zr,Y=Gr-Zr,le=rr+xr,Ce=rr-xr,Te=Wi+le,Xe=Wi-le,lt=Ln+Ie,Ye=Ln-Ie;zt[Ct]=Te+lt,zt[Ct+32]=Te-lt;var qe=.707106781*(Ye+Xe);zt[Ct+16]=Xe+qe,zt[Ct+48]=Xe-qe;var ut=.382683433*((Te=Ce+Y)-(Ye=nn+hs)),Ot=.5411961*Te+ut,nr=1.306562965*Ye+ut,Ht=.707106781*(lt=Y+nn),jr=hs+Ht,zr=hs-Ht;zt[Ct+40]=zr+Ot,zt[Ct+24]=zr-Ot,zt[Ct+8]=jr+nr,zt[Ct+56]=jr-nr,Ct++}for(nt=0;nt<64;++nt)bt=zt[nt]*fr[nt],x[nt]=bt>0?bt+.5|0:bt-.5|0;return x}(te,Fe),Qt=0;Qt<64;++Qt)Q[fe[Qt]]=tt[Qt];var ht=Q[0]-Qe;Qe=Q[0],ht==0?Ke(Ve[0]):(Ke(Ve[w[dt=32767+ht]]),Ke(E[dt]));for(var Nt=63;Nt>0&&Q[Nt]==0;)Nt--;if(Nt==0)return Ke(Bt),Qe;for(var dr,Pt=1;Pt<=Nt;){for(var Oe=Pt;Q[Pt]==0&&Pt<=Nt;)++Pt;var pr=Pt-Oe;if(pr>=16){dr=pr>>4;for(var sr=1;sr<=dr;++sr)Ke(Ge);pr&=15}dt=32767+Q[Pt],Ke(st[(pr<<4)+w[dt]]),Ke(E[dt]),Pt++}return Nt!=63&&Ke(Bt),Qe}function St(te){te=Math.min(Math.max(te,1),100),c!=te&&(function(Fe){for(var Qe=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Ve=0;Ve<64;Ve++){var st=h((Qe[Ve]*Fe+50)/100);st=Math.min(Math.max(st,1),255),a[fe[Ve]]=st}for(var dt=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Bt=0;Bt<64;Bt++){var Ge=h((dt[Bt]*Fe+50)/100);Ge=Math.min(Math.max(Ge,1),255),d[fe[Bt]]=Ge}for(var tt=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Qt=0,ht=0;ht<8;ht++)for(var Nt=0;Nt<8;Nt++)_[Qt]=1/(a[fe[Qt]]*tt[ht]*tt[Nt]*8),p[Qt]=1/(d[fe[Qt]]*tt[ht]*tt[Nt]*8),Qt++}(te<50?Math.floor(5e3/te):Math.floor(200-2*te)),c=te)}this.encode=function(te,Fe){Fe&&St(Fe),P=new Array,R=0,k=7,rt(65496),rt(65504),rt(16),Ue(74),Ue(70),Ue(73),Ue(70),Ue(0),Ue(1),Ue(1),Ue(0),rt(1),rt(1),Ue(0),Ue(0),function(){rt(65499),rt(132),Ue(0);for(var vr=0;vr<64;vr++)Ue(a[vr]);Ue(1);for(var Gr=0;Gr<64;Gr++)Ue(d[Gr])}(),function(vr,Gr){rt(65472),rt(17),Ue(8),rt(Gr),rt(vr),Ue(3),Ue(1),Ue(17),Ue(0),Ue(2),Ue(17),Ue(1),Ue(3),Ue(17),Ue(1)}(te.width,te.height),function(){rt(65476),rt(418),Ue(0);for(var vr=0;vr<16;vr++)Ue(Ae[vr+1]);for(var Gr=0;Gr<=11;Gr++)Ue(ge[Gr]);Ue(16);for(var rr=0;rr<16;rr++)Ue(he[rr+1]);for(var xr=0;xr<=161;xr++)Ue(ee[xr]);Ue(1);for(var Zr=0;Zr<16;Zr++)Ue(ne[Zr+1]);for(var pn=0;pn<=11;pn++)Ue(xe[pn]);Ue(17);for(var vt=0;vt<16;vt++)Ue(ve[vt+1]);for(var nt=0;nt<=161;nt++)Ue(ze[nt])}(),rt(65498),rt(12),Ue(3),Ue(1),Ue(0),Ue(2),Ue(17),Ue(3),Ue(17),Ue(0),Ue(63),Ue(0);var Qe=0,Ve=0,st=0;R=0,k=7,this.encode.displayName="_encode_";for(var dt,Bt,Ge,tt,Qt,ht,Nt,dr,Pt,Oe=te.data,pr=te.width,sr=te.height,zt=4*pr,fr=0;fr<sr;){for(dt=0;dt<zt;){for(Qt=zt*fr+dt,Nt=-1,dr=0,Pt=0;Pt<64;Pt++)ht=Qt+(dr=Pt>>3)*zt+(Nt=4*(7&Pt)),fr+dr>=sr&&(ht-=zt*(fr+1+dr-sr)),dt+Nt>=zt&&(ht-=dt+Nt-zt+4),Bt=Oe[ht++],Ge=Oe[ht++],tt=Oe[ht++],O[Pt]=($[Bt]+$[Ge+256>>0]+$[tt+512>>0]>>16)-128,G[Pt]=($[Bt+768>>0]+$[Ge+1024>>0]+$[tt+1280>>0]>>16)-128,K[Pt]=($[Bt+1280>>0]+$[Ge+1536>>0]+$[tt+1792>>0]>>16)-128;Qe=je(O,_,Qe,t,s),Ve=je(G,p,Ve,r,l),st=je(K,p,st,r,l),dt+=32}fr+=8}if(k>=0){var Br=[];Br[1]=k+1,Br[0]=(1<<k+1)-1,Ke(Br)}return rt(65497),new Uint8Array(P)},e=e||50,function(){for(var te=String.fromCharCode,Fe=0;Fe<256;Fe++)Z[Fe]=te(Fe)}(),t=Le(Ae,ge),r=Le(ne,xe),s=Le(he,ee),l=Le(ve,ze),function(){for(var te=1,Fe=2,Qe=1;Qe<=15;Qe++){for(var Ve=te;Ve<Fe;Ve++)w[32767+Ve]=Qe,E[32767+Ve]=[],E[32767+Ve][1]=Qe,E[32767+Ve][0]=Ve;for(var st=-(Fe-1);st<=-te;st++)w[32767+st]=Qe,E[32767+st]=[],E[32767+st][1]=Qe,E[32767+st][0]=Fe-1+st;te<<=1,Fe<<=1}}(),function(){for(var te=0;te<256;te++)$[te]=19595*te,$[te+256>>0]=38470*te,$[te+512>>0]=7471*te+32768,$[te+768>>0]=-11059*te,$[te+1024>>0]=-21709*te,$[te+1280>>0]=32768*te+8421375,$[te+1536>>0]=-27439*te,$[te+1792>>0]=-5329*te}(),St(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function jl(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Ny(e){function t(Ae){if(!Ae)throw Error("assert :P")}function r(Ae,ge,he){for(var ee=0;4>ee;ee++)if(Ae[ge+ee]!=he.charCodeAt(ee))return!0;return!1}function s(Ae,ge,he,ee,ne){for(var xe=0;xe<ne;xe++)Ae[ge+xe]=he[ee+xe]}function l(Ae,ge,he,ee){for(var ne=0;ne<ee;ne++)Ae[ge+ne]=he}function c(Ae){return new Int32Array(Ae)}function h(Ae,ge){for(var he=[],ee=0;ee<Ae;ee++)he.push(new ge);return he}function a(Ae,ge){var he=[];return function ee(ne,xe,ve){for(var ze=ve[xe],Le=0;Le<ze&&(ne.push(ve.length>xe+1?[]:new ge),!(ve.length<xe+1));Le++)ee(ne[Le],xe+1,ve)}(he,0,Ae),he}var d=function(){var Ae=this;function ge(b,L){for(var j=1<<L-1>>>0;b&j;)j>>>=1;return j?(b&j-1)+j:b}function he(b,L,j,W,ae){t(!(W%j));do b[L+(W-=j)]=ae;while(0<W)}function ee(b,L,j,W,ae){if(t(2328>=ae),512>=ae)var de=c(512);else if((de=c(ae))==null)return 0;return function(me,be,Se,De,ft,Tt){var Ft,pt,Ar=be,Vt=1<<Se,Je=c(16),ot=c(16);for(t(ft!=0),t(De!=null),t(me!=null),t(0<Se),pt=0;pt<ft;++pt){if(15<De[pt])return 0;++Je[De[pt]]}if(Je[0]==ft)return 0;for(ot[1]=0,Ft=1;15>Ft;++Ft){if(Je[Ft]>1<<Ft)return 0;ot[Ft+1]=ot[Ft]+Je[Ft]}for(pt=0;pt<ft;++pt)Ft=De[pt],0<De[pt]&&(Tt[ot[Ft]++]=pt);if(ot[15]==1)return(De=new ne).g=0,De.value=Tt[0],he(me,Ar,1,Vt,De),Vt;var Yt,ir=-1,Wt=Vt-1,Dr=0,Lr=1,Fn=1,Nr=1<<Se;for(pt=0,Ft=1,ft=2;Ft<=Se;++Ft,ft<<=1){if(Lr+=Fn<<=1,0>(Fn-=Je[Ft]))return 0;for(;0<Je[Ft];--Je[Ft])(De=new ne).g=Ft,De.value=Tt[pt++],he(me,Ar+Dr,ft,Nr,De),Dr=ge(Dr,Ft)}for(Ft=Se+1,ft=2;15>=Ft;++Ft,ft<<=1){if(Lr+=Fn<<=1,0>(Fn-=Je[Ft]))return 0;for(;0<Je[Ft];--Je[Ft]){if(De=new ne,(Dr&Wt)!=ir){for(Ar+=Nr,Yt=1<<(ir=Ft)-Se;15>ir&&!(0>=(Yt-=Je[ir]));)++ir,Yt<<=1;Vt+=Nr=1<<(Yt=ir-Se),me[be+(ir=Dr&Wt)].g=Yt+Se,me[be+ir].value=Ar-be-ir}De.g=Ft-Se,De.value=Tt[pt++],he(me,Ar+(Dr>>Se),ft,Nr,De),Dr=ge(Dr,Ft)}}return Lr!=2*ot[15]-1?0:Vt}(b,L,j,W,ae,de)}function ne(){this.value=this.g=0}function xe(){this.value=this.g=0}function ve(){this.G=h(5,ne),this.H=c(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=h(is,xe)}function ze(b,L,j,W){t(b!=null),t(L!=null),t(2147483648>W),b.Ca=254,b.I=0,b.b=-8,b.Ka=0,b.oa=L,b.pa=j,b.Jd=L,b.Yc=j+W,b.Zc=4<=W?j+W-4+1:j,dt(b)}function Le(b,L){for(var j=0;0<L--;)j|=Ge(b,128)<<L;return j}function Ke(b,L){var j=Le(b,L);return Bt(b)?-j:j}function Ue(b,L,j,W){var ae,de=0;for(t(b!=null),t(L!=null),t(4294967288>W),b.Sb=W,b.Ra=0,b.u=0,b.h=0,4<W&&(W=4),ae=0;ae<W;++ae)de+=L[j+ae]<<8*ae;b.Ra=de,b.bb=W,b.oa=L,b.pa=j}function rt(b){for(;8<=b.u&&b.bb<b.Sb;)b.Ra>>>=8,b.Ra+=b.oa[b.pa+b.bb]<<so-8>>>0,++b.bb,b.u-=8;Qe(b)&&(b.h=1,b.u=0)}function je(b,L){if(t(0<=L),!b.h&&L<=cA){var j=Fe(b)&hi[L];return b.u+=L,rt(b),j}return b.h=1,b.u=0}function St(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function te(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Fe(b){return b.Ra>>>(b.u&so-1)>>>0}function Qe(b){return t(b.bb<=b.Sb),b.h||b.bb==b.Sb&&b.u>so}function Ve(b,L){b.u=L,b.h=Qe(b)}function st(b){b.u>=uA&&(t(b.u>=uA),rt(b))}function dt(b){t(b!=null&&b.oa!=null),b.pa<b.Zc?(b.I=(b.oa[b.pa++]|b.I<<8)>>>0,b.b+=8):(t(b!=null&&b.oa!=null),b.pa<b.Yc?(b.b+=8,b.I=b.oa[b.pa++]|b.I<<8):b.Ka?b.b=0:(b.I<<=8,b.b+=8,b.Ka=1))}function Bt(b){return Le(b,1)}function Ge(b,L){var j=b.Ca;0>b.b&&dt(b);var W=b.b,ae=j*L>>>8,de=(b.I>>>W>ae)+0;for(de?(j-=ae,b.I-=ae+1<<W>>>0):j=ae+1,W=j,ae=0;256<=W;)ae+=8,W>>=8;return W=7^ae+Fs[W],b.b-=W,b.Ca=(j<<W)-1,de}function tt(b,L,j){b[L+0]=j>>24&255,b[L+1]=j>>16&255,b[L+2]=j>>8&255,b[L+3]=j>>0&255}function Qt(b,L){return b[L+0]<<0|b[L+1]<<8}function ht(b,L){return Qt(b,L)|b[L+2]<<16}function Nt(b,L){return Qt(b,L)|Qt(b,L+2)<<16}function dr(b,L){var j=1<<L;return t(b!=null),t(0<L),b.X=c(j),b.X==null?0:(b.Mb=32-L,b.Xa=L,1)}function Pt(b,L){t(b!=null),t(L!=null),t(b.Xa==L.Xa),s(L.X,0,b.X,0,1<<L.Xa)}function Oe(){this.X=[],this.Xa=this.Mb=0}function pr(b,L,j,W){t(j!=null),t(W!=null);var ae=j[0],de=W[0];return ae==0&&(ae=(b*de+L/2)/L),de==0&&(de=(L*ae+b/2)/b),0>=ae||0>=de?0:(j[0]=ae,W[0]=de,1)}function sr(b,L){return b+(1<<L)-1>>>L}function zt(b,L){return((4278255360&b)+(4278255360&L)>>>0&4278255360)+((16711935&b)+(16711935&L)>>>0&16711935)>>>0}function fr(b,L){Ae[L]=function(j,W,ae,de,me,be,Se){var De;for(De=0;De<me;++De){var ft=Ae[b](be[Se+De-1],ae,de+De);be[Se+De]=zt(j[W+De],ft)}}}function Br(){this.ud=this.hd=this.jd=0}function vr(b,L){return((4278124286&(b^L))>>>1)+(b&L)>>>0}function Gr(b){return 0<=b&&256>b?b:0>b?0:255<b?255:void 0}function rr(b,L){return Gr(b+(b-L+.5>>1))}function xr(b,L,j){return Math.abs(L-j)-Math.abs(b-j)}function Zr(b,L,j,W,ae,de,me){for(W=de[me-1],j=0;j<ae;++j)de[me+j]=W=zt(b[L+j],W)}function pn(b,L,j,W,ae){var de;for(de=0;de<j;++de){var me=b[L+de],be=me>>8&255,Se=16711935&(Se=(Se=16711935&me)+((be<<16)+be));W[ae+de]=(4278255360&me)+Se>>>0}}function vt(b,L){L.jd=b>>0&255,L.hd=b>>8&255,L.ud=b>>16&255}function nt(b,L,j,W,ae,de){var me;for(me=0;me<W;++me){var be=L[j+me],Se=be>>>8,De=be,ft=255&(ft=(ft=be>>>16)+((b.jd<<24>>24)*(Se<<24>>24)>>>5));De=255&(De=(De=De+((b.hd<<24>>24)*(Se<<24>>24)>>>5))+((b.ud<<24>>24)*(ft<<24>>24)>>>5)),ae[de+me]=(4278255360&be)+(ft<<16)+De}}function bt(b,L,j,W,ae){Ae[L]=function(de,me,be,Se,De,ft,Tt,Ft,pt){for(Se=Tt;Se<Ft;++Se)for(Tt=0;Tt<pt;++Tt)De[ft++]=ae(be[W(de[me++])])},Ae[b]=function(de,me,be,Se,De,ft,Tt){var Ft=8>>de.b,pt=de.Ea,Ar=de.K[0],Vt=de.w;if(8>Ft)for(de=(1<<de.b)-1,Vt=(1<<Ft)-1;me<be;++me){var Je,ot=0;for(Je=0;Je<pt;++Je)Je&de||(ot=W(Se[De++])),ft[Tt++]=ae(Ar[ot&Vt]),ot>>=Ft}else Ae["VP8LMapColor"+j](Se,De,Ar,Vt,ft,Tt,me,be,pt)}}function Ct(b,L,j,W,ae){for(j=L+j;L<j;){var de=b[L++];W[ae++]=de>>16&255,W[ae++]=de>>8&255,W[ae++]=de>>0&255}}function jt(b,L,j,W,ae){for(j=L+j;L<j;){var de=b[L++];W[ae++]=de>>16&255,W[ae++]=de>>8&255,W[ae++]=de>>0&255,W[ae++]=de>>24&255}}function er(b,L,j,W,ae){for(j=L+j;L<j;){var de=(me=b[L++])>>16&240|me>>12&15,me=me>>0&240|me>>28&15;W[ae++]=de,W[ae++]=me}}function Vr(b,L,j,W,ae){for(j=L+j;L<j;){var de=(me=b[L++])>>16&248|me>>13&7,me=me>>5&224|me>>3&31;W[ae++]=de,W[ae++]=me}}function Fr(b,L,j,W,ae){for(j=L+j;L<j;){var de=b[L++];W[ae++]=de>>0&255,W[ae++]=de>>8&255,W[ae++]=de>>16&255}}function un(b,L,j,W,ae,de){if(de==0)for(j=L+j;L<j;)tt(W,((de=b[L++])[0]>>24|de[1]>>8&65280|de[2]<<8&16711680|de[3]<<24)>>>0),ae+=32;else s(W,ae,b,L,j)}function lr(b,L){Ae[L][0]=Ae[b+"0"],Ae[L][1]=Ae[b+"1"],Ae[L][2]=Ae[b+"2"],Ae[L][3]=Ae[b+"3"],Ae[L][4]=Ae[b+"4"],Ae[L][5]=Ae[b+"5"],Ae[L][6]=Ae[b+"6"],Ae[L][7]=Ae[b+"7"],Ae[L][8]=Ae[b+"8"],Ae[L][9]=Ae[b+"9"],Ae[L][10]=Ae[b+"10"],Ae[L][11]=Ae[b+"11"],Ae[L][12]=Ae[b+"12"],Ae[L][13]=Ae[b+"13"],Ae[L][14]=Ae[b+"0"],Ae[L][15]=Ae[b+"0"]}function Er(b){return b==Ui||b==kA||b==MA||b==DA}function An(){this.eb=[],this.size=this.A=this.fb=0}function wn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function _i(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new An,this.f.kb=new wn,this.sd=null}function br(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Cr(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function cr(b){return alert("todo:WebPSamplerProcessPlane"),b.T}function Kr(b,L){var j=b.T,W=L.ba.f.RGBA,ae=W.eb,de=W.fb+b.ka*W.A,me=S[L.ba.S],be=b.y,Se=b.O,De=b.f,ft=b.N,Tt=b.ea,Ft=b.W,pt=L.cc,Ar=L.dc,Vt=L.Mc,Je=L.Nc,ot=b.ka,Yt=b.ka+b.T,ir=b.U,Wt=ir+1>>1;for(ot==0?me(be,Se,null,null,De,ft,Tt,Ft,De,ft,Tt,Ft,ae,de,null,null,ir):(me(L.ec,L.fc,be,Se,pt,Ar,Vt,Je,De,ft,Tt,Ft,ae,de-W.A,ae,de,ir),++j);ot+2<Yt;ot+=2)pt=De,Ar=ft,Vt=Tt,Je=Ft,ft+=b.Rc,Ft+=b.Rc,de+=2*W.A,me(be,(Se+=2*b.fa)-b.fa,be,Se,pt,Ar,Vt,Je,De,ft,Tt,Ft,ae,de-W.A,ae,de,ir);return Se+=b.fa,b.j+Yt<b.o?(s(L.ec,L.fc,be,Se,ir),s(L.cc,L.dc,De,ft,Wt),s(L.Mc,L.Nc,Tt,Ft,Wt),j--):1&Yt||me(be,Se,null,null,De,ft,Tt,Ft,De,ft,Tt,Ft,ae,de+W.A,null,null,ir),j}function hn(b,L,j){var W=b.F,ae=[b.J];if(W!=null){var de=b.U,me=L.ba.S,be=me==fA||me==MA;L=L.ba.f.RGBA;var Se=[0],De=b.ka;Se[0]=b.T,b.Kb&&(De==0?--Se[0]:(--De,ae[0]-=b.width),b.j+b.ka+b.T==b.o&&(Se[0]=b.o-b.j-De));var ft=L.eb;De=L.fb+De*L.A,b=QA(W,ae[0],b.width,de,Se,ft,De+(be?0:3),L.A),t(j==Se),b&&Er(me)&&Ra(ft,De,be,de,Se,L.A)}return 0}function xn(b){var L=b.ma,j=L.ba.S,W=11>j,ae=j==vl||j==el||j==fA||j==PA||j==12||Er(j);if(L.memory=null,L.Ib=null,L.Jb=null,L.Nd=null,!Mi(L.Oa,b,ae?11:12))return 0;if(ae&&Er(j)&&_r(),b.da)alert("todo:use_scaling");else{if(W){if(L.Ib=cr,b.Kb){if(j=b.U+1>>1,L.memory=c(b.U+2*j),L.memory==null)return 0;L.ec=L.memory,L.fc=0,L.cc=L.ec,L.dc=L.fc+b.U,L.Mc=L.cc,L.Nc=L.dc+j,L.Ib=Kr,_r()}}else alert("todo:EmitYUV");ae&&(L.Jb=hn,W&&_t())}if(W&&!We){for(b=0;256>b;++b)Rt[b]=89858*(b-128)+Me>>He,Zt[b]=-22014*(b-128)+Me,Xt[b]=-45773*(b-128),kt[b]=113618*(b-128)+Me>>He;for(b=Re;b<ct;++b)L=76283*(b-16)+Me>>He,ur[b-Re]=ns(L,255),qt[b-Re]=ns(L+8>>4,15);We=1}return 1}function Sn(b){var L=b.ma,j=b.U,W=b.T;return t(!(1&b.ka)),0>=j||0>=W?0:(j=L.Ib(b,L),L.Jb!=null&&L.Jb(b,L,j),L.Dc+=j,1)}function ji(b){b.ma.memory=null}function tn(b,L,j,W){return je(b,8)!=47?0:(L[0]=je(b,14)+1,j[0]=je(b,14)+1,W[0]=je(b,1),je(b,3)!=0?0:!b.h)}function Wi(b,L){if(4>b)return b+1;var j=b-2>>1;return(2+(1&b)<<j)+je(L,j)+1}function hs(b,L){return 120<L?L-120:1<=(j=((j=sn[L-1])>>4)*b+(8-(15&j)))?j:1;var j}function Ln(b,L,j){var W=Fe(j),ae=b[L+=255&W].g-8;return 0<ae&&(Ve(j,j.u+8),W=Fe(j),L+=b[L].value,L+=W&(1<<ae)-1),Ve(j,j.u+b[L].g),b[L].value}function nn(b,L,j){return j.g+=b.g,j.value+=b.value<<L>>>0,t(8>=j.g),b.g}function Ie(b,L,j){var W=b.xc;return t((L=W==0?0:b.vc[b.md*(j>>W)+(L>>W)])<b.Wb),b.Ya[L]}function Y(b,L,j,W){var ae=b.ab,de=b.c*L,me=b.C;L=me+L;var be=j,Se=W;for(W=b.Ta,j=b.Ua;0<ae--;){var De=b.gc[ae],ft=me,Tt=L,Ft=be,pt=Se,Ar=(Se=W,be=j,De.Ea);switch(t(ft<Tt),t(Tt<=De.nc),De.hc){case 2:Ro(Ft,pt,(Tt-ft)*Ar,Se,be);break;case 0:var Vt=ft,Je=Tt,ot=Se,Yt=be,ir=(Nr=De).Ea;Vt==0&&(xo(Ft,pt,null,null,1,ot,Yt),Zr(Ft,pt+1,0,0,ir-1,ot,Yt+1),pt+=ir,Yt+=ir,++Vt);for(var Wt=1<<Nr.b,Dr=Wt-1,Lr=sr(ir,Nr.b),Fn=Nr.K,Nr=Nr.w+(Vt>>Nr.b)*Lr;Vt<Je;){var fi=Fn,di=Nr,hr=1;for(ao(Ft,pt,ot,Yt-ir,1,ot,Yt);hr<ir;){var Hn=(hr&~Dr)+Wt;Hn>ir&&(Hn=ir),(0,js[fi[di++]>>8&15])(Ft,pt+ +hr,ot,Yt+hr-ir,Hn-hr,ot,Yt+hr),hr=Hn}pt+=ir,Yt+=ir,++Vt&Dr||(Nr+=Lr)}Tt!=De.nc&&s(Se,be-Ar,Se,be+(Tt-ft-1)*Ar,Ar);break;case 1:for(Ar=Ft,Je=pt,ir=(Ft=De.Ea)-(Yt=Ft&~(ot=(pt=1<<De.b)-1)),Vt=sr(Ft,De.b),Wt=De.K,De=De.w+(ft>>De.b)*Vt;ft<Tt;){for(Dr=Wt,Lr=De,Fn=new Br,Nr=Je+Yt,fi=Je+Ft;Je<Nr;)vt(Dr[Lr++],Fn),Ss(Fn,Ar,Je,pt,Se,be),Je+=pt,be+=pt;Je<fi&&(vt(Dr[Lr++],Fn),Ss(Fn,Ar,Je,ir,Se,be),Je+=ir,be+=ir),++ft&ot||(De+=Vt)}break;case 3:if(Ft==Se&&pt==be&&0<De.b){for(Je=Se,Ft=Ar=be+(Tt-ft)*Ar-(Yt=(Tt-ft)*sr(De.Ea,De.b)),pt=Se,ot=be,Vt=[],Yt=(ir=Yt)-1;0<=Yt;--Yt)Vt[Yt]=pt[ot+Yt];for(Yt=ir-1;0<=Yt;--Yt)Je[Ft+Yt]=Vt[Yt];zi(De,ft,Tt,Se,Ar,Se,be)}else zi(De,ft,Tt,Ft,pt,Se,be)}be=W,Se=j}Se!=j&&s(W,j,be,Se,de)}function le(b,L){var j=b.V,W=b.Ba+b.c*b.C,ae=L-b.C;if(t(L<=b.l.o),t(16>=ae),0<ae){var de=b.l,me=b.Ta,be=b.Ua,Se=de.width;if(Y(b,ae,j,W),ae=be=[be],t((j=b.C)<(W=L)),t(de.v<de.va),W>de.o&&(W=de.o),j<de.j){var De=de.j-j;j=de.j,ae[0]+=De*Se}if(j>=W?j=0:(ae[0]+=4*de.v,de.ka=j-de.j,de.U=de.va-de.v,de.T=W-j,j=1),j){if(be=be[0],11>(j=b.ca).S){var ft=j.f.RGBA,Tt=(W=j.S,ae=de.U,de=de.T,De=ft.eb,ft.A),Ft=de;for(ft=ft.fb+b.Ma*ft.A;0<Ft--;){var pt=me,Ar=be,Vt=ae,Je=De,ot=ft;switch(W){case lo:Ca(pt,Ar,Vt,Je,ot);break;case vl:ca(pt,Ar,Vt,Je,ot);break;case Ui:ca(pt,Ar,Vt,Je,ot),Ra(Je,ot,0,Vt,1,0);break;case Oa:ua(pt,Ar,Vt,Je,ot);break;case el:un(pt,Ar,Vt,Je,ot,1);break;case kA:un(pt,Ar,Vt,Je,ot,1),Ra(Je,ot,0,Vt,1,0);break;case fA:un(pt,Ar,Vt,Je,ot,0);break;case MA:un(pt,Ar,Vt,Je,ot,0),Ra(Je,ot,1,Vt,1,0);break;case PA:Xs(pt,Ar,Vt,Je,ot);break;case DA:Xs(pt,Ar,Vt,Je,ot),LA(Je,ot,Vt,1,0);break;case Fa:as(pt,Ar,Vt,Je,ot);break;default:t(0)}be+=Se,ft+=Tt}b.Ma+=de}else alert("todo:EmitRescaledRowsYUVA");t(b.Ma<=j.height)}}b.C=L,t(b.C<=b.i)}function Ce(b){var L;if(0<b.ua)return 0;for(L=0;L<b.Wb;++L){var j=b.Ya[L].G,W=b.Ya[L].H;if(0<j[1][W[1]+0].g||0<j[2][W[2]+0].g||0<j[3][W[3]+0].g)return 0}return 1}function Te(b,L,j,W,ae,de){if(b.Z!=0){var me=b.qd,be=b.rd;for(t(v[b.Z]!=null);L<j;++L)v[b.Z](me,be,W,ae,W,ae,de),me=W,be=ae,ae+=de;b.qd=me,b.rd=be}}function Xe(b,L){var j=b.l.ma,W=j.Z==0||j.Z==1?b.l.j:b.C;if(W=b.C<W?W:b.C,t(L<=b.l.o),L>W){var ae=b.l.width,de=j.ca,me=j.tb+ae*W,be=b.V,Se=b.Ba+b.c*W,De=b.gc;t(b.ab==1),t(De[0].hc==3),oo(De[0],W,L,be,Se,de,me),Te(j,W,L,de,me,ae)}b.C=b.Ma=L}function lt(b,L,j,W,ae,de,me){var be=b.$/W,Se=b.$%W,De=b.m,ft=b.s,Tt=j+b.$,Ft=Tt;ae=j+W*ae;var pt=j+W*de,Ar=280+ft.ua,Vt=b.Pb?be:16777216,Je=0<ft.ua?ft.Wa:null,ot=ft.wc,Yt=Tt<pt?Ie(ft,Se,be):null;t(b.C<de),t(pt<=ae);var ir=!1;e:for(;;){for(;ir||Tt<pt;){var Wt=0;if(be>=Vt){var Dr=Tt-j;t((Vt=b).Pb),Vt.wd=Vt.m,Vt.xd=Dr,0<Vt.s.ua&&Pt(Vt.s.Wa,Vt.s.vb),Vt=be+tl}if(Se&ot||(Yt=Ie(ft,Se,be)),t(Yt!=null),Yt.Qb&&(L[Tt]=Yt.qb,ir=!0),!ir)if(st(De),Yt.jc){Wt=De,Dr=L;var Lr=Tt,Fn=Yt.pd[Fe(Wt)&is-1];t(Yt.jc),256>Fn.g?(Ve(Wt,Wt.u+Fn.g),Dr[Lr]=Fn.value,Wt=0):(Ve(Wt,Wt.u+Fn.g-256),t(256<=Fn.value),Wt=Fn.value),Wt==0&&(ir=!0)}else Wt=Ln(Yt.G[0],Yt.H[0],De);if(De.h)break;if(ir||256>Wt){if(!ir)if(Yt.nd)L[Tt]=(Yt.qb|Wt<<8)>>>0;else{if(st(De),ir=Ln(Yt.G[1],Yt.H[1],De),st(De),Dr=Ln(Yt.G[2],Yt.H[2],De),Lr=Ln(Yt.G[3],Yt.H[3],De),De.h)break;L[Tt]=(Lr<<24|ir<<16|Wt<<8|Dr)>>>0}if(ir=!1,++Tt,++Se>=W&&(Se=0,++be,me!=null&&be<=de&&!(be%16)&&me(b,be),Je!=null))for(;Ft<Tt;)Wt=L[Ft++],Je.X[(506832829*Wt&4294967295)>>>Je.Mb]=Wt}else if(280>Wt){if(Wt=Wi(Wt-256,De),Dr=Ln(Yt.G[4],Yt.H[4],De),st(De),Dr=hs(W,Dr=Wi(Dr,De)),De.h)break;if(Tt-j<Dr||ae-Tt<Wt)break e;for(Lr=0;Lr<Wt;++Lr)L[Tt+Lr]=L[Tt+Lr-Dr];for(Tt+=Wt,Se+=Wt;Se>=W;)Se-=W,++be,me!=null&&be<=de&&!(be%16)&&me(b,be);if(t(Tt<=ae),Se&ot&&(Yt=Ie(ft,Se,be)),Je!=null)for(;Ft<Tt;)Wt=L[Ft++],Je.X[(506832829*Wt&4294967295)>>>Je.Mb]=Wt}else{if(!(Wt<Ar))break e;for(ir=Wt-280,t(Je!=null);Ft<Tt;)Wt=L[Ft++],Je.X[(506832829*Wt&4294967295)>>>Je.Mb]=Wt;Wt=Tt,t(!(ir>>>(Dr=Je).Xa)),L[Wt]=Dr.X[ir],ir=!0}ir||t(De.h==Qe(De))}if(b.Pb&&De.h&&Tt<ae)t(b.m.h),b.a=5,b.m=b.wd,b.$=b.xd,0<b.s.ua&&Pt(b.s.vb,b.s.Wa);else{if(De.h)break e;me!=null&&me(b,be>de?de:be),b.a=0,b.$=Tt-j}return 1}return b.a=3,0}function Ye(b){t(b!=null),b.vc=null,b.yc=null,b.Ya=null;var L=b.Wa;L!=null&&(L.X=null),b.vb=null,t(b!=null)}function qe(){var b=new Wl;return b==null?null:(b.a=0,b.xb=m,lr("Predictor","VP8LPredictors"),lr("Predictor","VP8LPredictors_C"),lr("PredictorAdd","VP8LPredictorsAdd"),lr("PredictorAdd","VP8LPredictorsAdd_C"),Ro=pn,Ss=nt,Ca=Ct,ca=jt,Xs=er,as=Vr,ua=Fr,Ae.VP8LMapColor32b=Ns,Ae.VP8LMapColor8b=ss,b)}function ut(b,L,j,W,ae){var de=1,me=[b],be=[L],Se=W.m,De=W.s,ft=null,Tt=0;e:for(;;){if(j)for(;de&&je(Se,1);){var Ft=me,pt=be,Ar=W,Vt=1,Je=Ar.m,ot=Ar.gc[Ar.ab],Yt=je(Je,2);if(Ar.Oc&1<<Yt)de=0;else{switch(Ar.Oc|=1<<Yt,ot.hc=Yt,ot.Ea=Ft[0],ot.nc=pt[0],ot.K=[null],++Ar.ab,t(4>=Ar.ab),Yt){case 0:case 1:ot.b=je(Je,3)+2,Vt=ut(sr(ot.Ea,ot.b),sr(ot.nc,ot.b),0,Ar,ot.K),ot.K=ot.K[0];break;case 3:var ir,Wt=je(Je,8)+1,Dr=16<Wt?0:4<Wt?1:2<Wt?2:3;if(Ft[0]=sr(ot.Ea,Dr),ot.b=Dr,ir=Vt=ut(Wt,1,0,Ar,ot.K)){var Lr,Fn=Wt,Nr=ot,fi=1<<(8>>Nr.b),di=c(fi);if(di==null)ir=0;else{var hr=Nr.K[0],Hn=Nr.w;for(di[0]=Nr.K[0][0],Lr=1;Lr<1*Fn;++Lr)di[Lr]=zt(hr[Hn+Lr],di[Lr-1]);for(;Lr<4*fi;++Lr)di[Lr]=0;Nr.K[0]=null,Nr.K[0]=di,ir=1}}Vt=ir;break;case 2:break;default:t(0)}de=Vt}}if(me=me[0],be=be[0],de&&je(Se,1)&&!(de=1<=(Tt=je(Se,4))&&11>=Tt)){W.a=3;break e}var li;if(li=de)t:{var ci,Un,Is,Js=W,Qi=me,ps=be,ti=Tt,As=j,Ts=Js.m,Vi=Js.s,Ki=[null],Ys=1,co=0,Ci=vn[ti];r:for(;;){if(As&&je(Ts,1)){var Us=je(Ts,3)+2,Eo=sr(Qi,Us),uo=sr(ps,Us),Fo=Eo*uo;if(!ut(Eo,uo,0,Js,Ki))break r;for(Ki=Ki[0],Vi.xc=Us,ci=0;ci<Fo;++ci){var Ho=Ki[ci]>>8&65535;Ki[ci]=Ho,Ho>=Ys&&(Ys=Ho+1)}}if(Ts.h)break r;for(Un=0;5>Un;++Un){var Yi=Vc[Un];!Un&&0<ti&&(Yi+=1<<ti),co<Yi&&(co=Yi)}var Kc=h(Ys*Ci,ne),lh=Ys,Cu=h(lh,ve);if(Cu==null)var Gc=null;else t(65536>=lh),Gc=Cu;var rl=c(co);if(Gc==null||rl==null||Kc==null){Js.a=1;break r}var qc=Kc;for(ci=Is=0;ci<Ys;++ci){var ho=Gc[ci],wl=ho.G,nl=ho.H,bl=0,xl=1,Jl=0;for(Un=0;5>Un;++Un){Yi=Vc[Un],wl[Un]=qc,nl[Un]=Is,!Un&&0<ti&&(Yi+=1<<ti);i:{var NA,il=Yi,Bc=Js,Yl=rl,fa=qc,$s=Is,$l=0,So=Bc.m,Eu=je(So,1);if(l(Yl,0,0,il),Eu){var ec=je(So,1)+1,ch=je(So,1),Wc=je(So,ch==0?1:8);Yl[Wc]=1,ec==2&&(Yl[Wc=je(So,8)]=1);var Bl=1}else{var Cc=c(19),Fu=je(So,4)+4;if(19<Fu){Bc.a=3;var Ec=0;break i}for(NA=0;NA<Fu;++NA)Cc[dA[NA]]=je(So,3);var Ia=void 0,Cl=void 0,Xc=Bc,uh=Cc,tc=il,rc=Yl,Ta=0,jA=Xc.m,hh=8,fh=h(128,ne);n:for(;ee(fh,0,7,uh,19);){if(je(jA,1)){var ef=2+2*je(jA,3);if((Ia=2+je(jA,ef))>tc)break n}else Ia=tc;for(Cl=0;Cl<tc&&Ia--;){st(jA);var nc=fh[0+(127&Fe(jA))];Ve(jA,jA.u+nc.g);var RA=nc.value;if(16>RA)rc[Cl++]=RA,RA!=0&&(hh=RA);else{var Zc=RA==16,OA=RA-16,_s=Hc[OA],ic=je(jA,zc[OA])+_s;if(Cl+ic>tc)break n;for(var tf=Zc?hh:0;0<ic--;)rc[Cl++]=tf}}Ta=1;break n}Ta||(Xc.a=3),Bl=Ta}(Bl=Bl&&!So.h)&&($l=ee(fa,$s,8,Yl,il)),Bl&&$l!=0?Ec=$l:(Bc.a=3,Ec=0)}if(Ec==0)break r;if(xl&&Bo[Un]==1&&(xl=qc[Is].g==0),bl+=qc[Is].g,Is+=Ec,3>=Un){var Fc,Jc=rl[0];for(Fc=1;Fc<Yi;++Fc)rl[Fc]>Jc&&(Jc=rl[Fc]);Jl+=Jc}}if(ho.nd=xl,ho.Qb=0,xl&&(ho.qb=(wl[3][nl[3]+0].value<<24|wl[1][nl[1]+0].value<<16|wl[2][nl[2]+0].value)>>>0,bl==0&&256>wl[0][nl[0]+0].value&&(ho.Qb=1,ho.qb+=wl[0][nl[0]+0].value<<8)),ho.jc=!ho.Qb&&6>Jl,ho.jc){var sc,zA=ho;for(sc=0;sc<is;++sc){var sl=sc,gA=zA.pd[sl],Yc=zA.G[0][zA.H[0]+sl];256<=Yc.value?(gA.g=Yc.g+256,gA.value=Yc.value):(gA.g=0,gA.value=0,sl>>=nn(Yc,8,gA),sl>>=nn(zA.G[1][zA.H[1]+sl],16,gA),sl>>=nn(zA.G[2][zA.H[2]+sl],0,gA),nn(zA.G[3][zA.H[3]+sl],24,gA))}}}Vi.vc=Ki,Vi.Wb=Ys,Vi.Ya=Gc,Vi.yc=Kc,li=1;break t}li=0}if(!(de=li)){W.a=3;break e}if(0<Tt){if(De.ua=1<<Tt,!dr(De.Wa,Tt)){W.a=1,de=0;break e}}else De.ua=0;var al=W,dh=me,ls=be,ac=al.s,Sc=ac.xc;if(al.c=dh,al.i=ls,ac.md=sr(dh,Sc),ac.wc=Sc==0?-1:(1<<Sc)-1,j){W.xb=u;break e}if((ft=c(me*be))==null){W.a=1,de=0;break e}de=(de=lt(W,ft,0,me,be,be,null))&&!Se.h;break e}return de?(ae!=null?ae[0]=ft:(t(ft==null),t(j)),W.$=0,j||Ye(De)):Ye(De),de}function Ot(b,L){var j=b.c*b.i,W=j+L+16*L;return t(b.c<=L),b.V=c(W),b.V==null?(b.Ta=null,b.Ua=0,b.a=1,0):(b.Ta=b.V,b.Ua=b.Ba+j+L,1)}function nr(b,L){var j=b.C,W=L-j,ae=b.V,de=b.Ba+b.c*j;for(t(L<=b.l.o);0<W;){var me=16<W?16:W,be=b.l.ma,Se=b.l.width,De=Se*me,ft=be.ca,Tt=be.tb+Se*j,Ft=b.Ta,pt=b.Ua;Y(b,me,ae,de),Xl(Ft,pt,ft,Tt,De),Te(be,j,j+me,ft,Tt,Se),W-=me,ae+=me*b.c,j+=me}t(j==L),b.C=b.Ma=L}function Ht(){this.ub=this.yd=this.td=this.Rb=0}function jr(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function zr(){this.Fb=this.Bb=this.Cb=0,this.Zb=c(4),this.Lb=c(4)}function Ir(){this.Yb=function(){var b=[];return function L(j,W,ae){for(var de=ae[W],me=0;me<de&&(j.push(ae.length>W+1?[]:0),!(ae.length<W+1));me++)L(j[me],W+1,ae)}(b,0,[3,11]),b}()}function ln(){this.jb=c(3),this.Wc=a([4,8],Ir),this.Xc=a([4,17],Ir)}function dn(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new c(4),this.od=new c(4)}function In(){this.ld=this.La=this.dd=this.tc=0}function mn(){this.Na=this.la=0}function Bn(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Pn(){this.ad=c(384),this.Za=0,this.Ob=c(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Vn(){this.uc=this.M=this.Nb=0,this.wa=Array(new In),this.Y=0,this.ya=Array(new Pn),this.aa=0,this.l=new wi}function Ti(){this.y=c(16),this.f=c(8),this.ea=c(8)}function oi(){this.cb=this.a=0,this.sc="",this.m=new St,this.Od=new Ht,this.Kc=new jr,this.ed=new dn,this.Qa=new zr,this.Ic=this.$c=this.Aa=0,this.D=new Vn,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=h(8,St),this.ia=0,this.pb=h(4,Bn),this.Pa=new ln,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ti),this.Hd=0,this.rb=Array(new mn),this.sb=0,this.wa=Array(new In),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Pn),this.L=this.aa=0,this.gd=a([4,2],In),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function wi(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Qs(){var b=new oi;return b!=null&&(b.a=0,b.sc="OK",b.cb=0,b.Xb=0,os||(os=Ks)),b}function bi(b,L,j){return b.a==0&&(b.a=L,b.sc=j,b.cb=0),0}function Yn(b,L,j){return 3<=j&&b[L+0]==157&&b[L+1]==1&&b[L+2]==42}function Ya(b,L){if(b==null)return 0;if(b.a=0,b.sc="OK",L==null)return bi(b,2,"null VP8Io passed to VP8GetHeaders()");var j=L.data,W=L.w,ae=L.ha;if(4>ae)return bi(b,7,"Truncated header.");var de=j[W+0]|j[W+1]<<8|j[W+2]<<16,me=b.Od;if(me.Rb=!(1&de),me.td=de>>1&7,me.yd=de>>4&1,me.ub=de>>5,3<me.td)return bi(b,3,"Incorrect keyframe parameters.");if(!me.yd)return bi(b,4,"Frame not displayable.");W+=3,ae-=3;var be=b.Kc;if(me.Rb){if(7>ae)return bi(b,7,"cannot parse picture header");if(!Yn(j,W,ae))return bi(b,3,"Bad code word");be.c=16383&(j[W+4]<<8|j[W+3]),be.Td=j[W+4]>>6,be.i=16383&(j[W+6]<<8|j[W+5]),be.Ud=j[W+6]>>6,W+=7,ae-=7,b.za=be.c+15>>4,b.Ub=be.i+15>>4,L.width=be.c,L.height=be.i,L.Da=0,L.j=0,L.v=0,L.va=L.width,L.o=L.height,L.da=0,L.ib=L.width,L.hb=L.height,L.U=L.width,L.T=L.height,l((de=b.Pa).jb,0,255,de.jb.length),t((de=b.Qa)!=null),de.Cb=0,de.Bb=0,de.Fb=1,l(de.Zb,0,0,de.Zb.length),l(de.Lb,0,0,de.Lb)}if(me.ub>ae)return bi(b,7,"bad partition length");ze(de=b.m,j,W,me.ub),W+=me.ub,ae-=me.ub,me.Rb&&(be.Ld=Bt(de),be.Kd=Bt(de)),be=b.Qa;var Se,De=b.Pa;if(t(de!=null),t(be!=null),be.Cb=Bt(de),be.Cb){if(be.Bb=Bt(de),Bt(de)){for(be.Fb=Bt(de),Se=0;4>Se;++Se)be.Zb[Se]=Bt(de)?Ke(de,7):0;for(Se=0;4>Se;++Se)be.Lb[Se]=Bt(de)?Ke(de,6):0}if(be.Bb)for(Se=0;3>Se;++Se)De.jb[Se]=Bt(de)?Le(de,8):255}else be.Bb=0;if(de.Ka)return bi(b,3,"cannot parse segment header");if((be=b.ed).zd=Bt(de),be.Tb=Le(de,6),be.wb=Le(de,3),be.Pc=Bt(de),be.Pc&&Bt(de)){for(De=0;4>De;++De)Bt(de)&&(be.vd[De]=Ke(de,6));for(De=0;4>De;++De)Bt(de)&&(be.od[De]=Ke(de,6))}if(b.L=be.Tb==0?0:be.zd?1:2,de.Ka)return bi(b,3,"cannot parse filter header");var ft=ae;if(ae=Se=W,W=Se+ft,be=ft,b.Xb=(1<<Le(b.m,2))-1,ft<3*(De=b.Xb))j=7;else{for(Se+=3*De,be-=3*De,ft=0;ft<De;++ft){var Tt=j[ae+0]|j[ae+1]<<8|j[ae+2]<<16;Tt>be&&(Tt=be),ze(b.Jc[+ft],j,Se,Tt),Se+=Tt,be-=Tt,ae+=3}ze(b.Jc[+De],j,Se,be),j=Se<W?0:5}if(j!=0)return bi(b,j,"cannot parse partitions");for(j=Le(Se=b.m,7),ae=Bt(Se)?Ke(Se,4):0,W=Bt(Se)?Ke(Se,4):0,be=Bt(Se)?Ke(Se,4):0,De=Bt(Se)?Ke(Se,4):0,Se=Bt(Se)?Ke(Se,4):0,ft=b.Qa,Tt=0;4>Tt;++Tt){if(ft.Cb){var Ft=ft.Zb[Tt];ft.Fb||(Ft+=j)}else{if(0<Tt){b.pb[Tt]=b.pb[0];continue}Ft=j}var pt=b.pb[Tt];pt.Sc[0]=_l[ns(Ft+ae,127)],pt.Sc[1]=Sa[ns(Ft+0,127)],pt.Eb[0]=2*_l[ns(Ft+W,127)],pt.Eb[1]=101581*Sa[ns(Ft+be,127)]>>16,8>pt.Eb[1]&&(pt.Eb[1]=8),pt.Qc[0]=_l[ns(Ft+De,117)],pt.Qc[1]=Sa[ns(Ft+Se,127)],pt.lc=Ft+Se}if(!me.Rb)return bi(b,4,"Not a key frame.");for(Bt(de),me=b.Pa,j=0;4>j;++j){for(ae=0;8>ae;++ae)for(W=0;3>W;++W)for(be=0;11>be;++be)De=Ge(de,ds[j][ae][W][be])?Le(de,8):mA[j][ae][W][be],me.Wc[j][ae].Yb[W][be]=De;for(ae=0;17>ae;++ae)me.Xc[j][ae]=me.Wc[j][xc[ae]]}return b.kc=Bt(de),b.kc&&(b.Bd=Le(de,8)),b.cb=1}function Ks(b,L,j,W,ae,de,me){var be=L[ae].Yb[j];for(j=0;16>ae;++ae){if(!Ge(b,be[j+0]))return ae;for(;!Ge(b,be[j+1]);)if(be=L[++ae].Yb[0],j=0,ae==16)return 16;var Se=L[ae+1].Yb;if(Ge(b,be[j+2])){var De=b,ft=0;if(Ge(De,(Ft=be)[(Tt=j)+3]))if(Ge(De,Ft[Tt+6])){for(be=0,Tt=2*(ft=Ge(De,Ft[Tt+8]))+(Ft=Ge(De,Ft[Tt+9+ft])),ft=0,Ft=pA[Tt];Ft[be];++be)ft+=ft+Ge(De,Ft[be]);ft+=3+(8<<Tt)}else Ge(De,Ft[Tt+7])?(ft=7+2*Ge(De,165),ft+=Ge(De,145)):ft=5+Ge(De,159);else ft=Ge(De,Ft[Tt+4])?3+Ge(De,Ft[Tt+5]):2;be=Se[2]}else ft=1,be=Se[1];Se=me+Co[ae],0>(De=b).b&&dt(De);var Tt,Ft=De.b,pt=(Tt=De.Ca>>1)-(De.I>>Ft)>>31;--De.b,De.Ca+=pt,De.Ca|=1,De.I-=(Tt+1&pt)<<Ft,de[Se]=((ft^pt)-pt)*W[(0<ae)+0]}return 16}function Gs(b){var L=b.rb[b.sb-1];L.la=0,L.Na=0,l(b.zc,0,0,b.zc.length),b.ja=0}function ia(b,L){if(b==null)return 0;if(L==null)return bi(b,2,"NULL VP8Io parameter in VP8Decode().");if(!b.cb&&!Ya(b,L))return 0;if(t(b.cb),L.ac==null||L.ac(L)){L.ob&&(b.L=0);var j=Tr[b.L];if(b.L==2?(b.yb=0,b.zb=0):(b.yb=L.v-j>>4,b.zb=L.j-j>>4,0>b.yb&&(b.yb=0),0>b.zb&&(b.zb=0)),b.Va=L.o+15+j>>4,b.Hb=L.va+15+j>>4,b.Hb>b.za&&(b.Hb=b.za),b.Va>b.Ub&&(b.Va=b.Ub),0<b.L){var W=b.ed;for(j=0;4>j;++j){var ae;if(b.Qa.Cb){var de=b.Qa.Lb[j];b.Qa.Fb||(de+=W.Tb)}else de=W.Tb;for(ae=0;1>=ae;++ae){var me=b.gd[j][ae],be=de;if(W.Pc&&(be+=W.vd[0],ae&&(be+=W.od[0])),0<(be=0>be?0:63<be?63:be)){var Se=be;0<W.wb&&(Se=4<W.wb?Se>>2:Se>>1)>9-W.wb&&(Se=9-W.wb),1>Se&&(Se=1),me.dd=Se,me.tc=2*be+Se,me.ld=40<=be?2:15<=be?1:0}else me.tc=0;me.La=ae}}}j=0}else bi(b,6,"Frame setup failed"),j=b.a;if(j=j==0){if(j){b.$c=0,0<b.Aa||(b.Ic=kn);e:{j=b.Ic,W=4*(Se=b.za);var De=32*Se,ft=Se+1,Tt=0<b.L?Se*(0<b.Aa?2:1):0,Ft=(b.Aa==2?2:1)*Se;if((me=W+832+(ae=3*(16*j+Tr[b.L])/2*De)+(de=b.Fa!=null&&0<b.Fa.length?b.Kc.c*b.Kc.i:0))!=me)j=0;else{if(me>b.Vb){if(b.Vb=0,b.Ec=c(me),b.Fc=0,b.Ec==null){j=bi(b,1,"no memory during frame initialization.");break e}b.Vb=me}me=b.Ec,be=b.Fc,b.Ac=me,b.Bc=be,be+=W,b.Gd=h(De,Ti),b.Hd=0,b.rb=h(ft+1,mn),b.sb=1,b.wa=Tt?h(Tt,In):null,b.Y=0,b.D.Nb=0,b.D.wa=b.wa,b.D.Y=b.Y,0<b.Aa&&(b.D.Y+=Se),t(!0),b.oc=me,b.pc=be,be+=832,b.ya=h(Ft,Pn),b.aa=0,b.D.ya=b.ya,b.D.aa=b.aa,b.Aa==2&&(b.D.aa+=Se),b.R=16*Se,b.B=8*Se,Se=(De=Tr[b.L])*b.R,De=De/2*b.B,b.sa=me,b.ta=be+Se,b.qa=b.sa,b.ra=b.ta+16*j*b.R+De,b.Ha=b.qa,b.Ia=b.ra+8*j*b.B+De,b.$c=0,be+=ae,b.mb=de?me:null,b.nb=de?be:null,t(be+de<=b.Fc+b.Vb),Gs(b),l(b.Ac,b.Bc,0,W),j=1}}if(j){if(L.ka=0,L.y=b.sa,L.O=b.ta,L.f=b.qa,L.N=b.ra,L.ea=b.Ha,L.Vd=b.Ia,L.fa=b.R,L.Rc=b.B,L.F=null,L.J=0,!Zl){for(j=-255;255>=j;++j)JA[255+j]=0>j?-j:j;for(j=-1020;1020>=j;++j)wc[1020+j]=-128>j?-128:127<j?127:j;for(j=-112;112>=j;++j)Oc[112+j]=-16>j?-16:15<j?15:j;for(j=-255;510>=j;++j)yl[255+j]=0>j?0:255<j?255:j;Zl=1}gi=$a,ZA=EA,ja=sa,fs=bs,Ea=xs,Na=nA,Oo=oA,Rs=AA,hA=WA,Ao=SA,zo=_c,Hi=_a,kr=IA,Ii=TA,Ai=ro,Bi=no,Zi=io,Sr=ql,g[0]=Ma,g[1]=Mo,g[2]=GA,g[3]=pl,g[4]=_o,g[5]=wo,g[6]=aA,g[7]=gt,g[8]=Ds,g[9]=Mn,ha[0]=Bs,ha[1]=Do,ha[2]=oa,ha[3]=qs,ha[4]=ys,ha[5]=iA,ha[6]=sA,i[0]=eo,i[1]=ka,i[2]=Oi,i[3]=Ps,i[4]=Aa,i[5]=Cs,i[6]=to,j=1}else j=0}j&&(j=function(pt,Ar){for(pt.M=0;pt.M<pt.Va;++pt.M){var Vt,Je=pt.Jc[pt.M&pt.Xb],ot=pt.m,Yt=pt;for(Vt=0;Vt<Yt.za;++Vt){var ir=ot,Wt=Yt,Dr=Wt.Ac,Lr=Wt.Bc+4*Vt,Fn=Wt.zc,Nr=Wt.ya[Wt.aa+Vt];if(Wt.Qa.Bb?Nr.$b=Ge(ir,Wt.Pa.jb[0])?2+Ge(ir,Wt.Pa.jb[2]):Ge(ir,Wt.Pa.jb[1]):Nr.$b=0,Wt.kc&&(Nr.Ad=Ge(ir,Wt.Bd)),Nr.Za=!Ge(ir,145)+0,Nr.Za){var fi=Nr.Ob,di=0;for(Wt=0;4>Wt;++Wt){var hr,Hn=Fn[0+Wt];for(hr=0;4>hr;++hr){Hn=Ji[Dr[Lr+hr]][Hn];for(var li=bc[Ge(ir,Hn[0])];0<li;)li=bc[2*li+Ge(ir,Hn[li])];Hn=-li,Dr[Lr+hr]=Hn}s(fi,di,Dr,Lr,4),di+=4,Fn[0+Wt]=Hn}}else Hn=Ge(ir,156)?Ge(ir,128)?1:3:Ge(ir,163)?2:0,Nr.Ob[0]=Hn,l(Dr,Lr,Hn,4),l(Fn,0,Hn,4);Nr.Dd=Ge(ir,142)?Ge(ir,114)?Ge(ir,183)?1:3:2:0}if(Yt.m.Ka)return bi(pt,7,"Premature end-of-partition0 encountered.");for(;pt.ja<pt.za;++pt.ja){if(Yt=Je,ir=(ot=pt).rb[ot.sb-1],Dr=ot.rb[ot.sb+ot.ja],Vt=ot.ya[ot.aa+ot.ja],Lr=ot.kc?Vt.Ad:0)ir.la=Dr.la=0,Vt.Za||(ir.Na=Dr.Na=0),Vt.Hc=0,Vt.Gc=0,Vt.ia=0;else{var ci,Un;if(ir=Dr,Dr=Yt,Lr=ot.Pa.Xc,Fn=ot.ya[ot.aa+ot.ja],Nr=ot.pb[Fn.$b],Wt=Fn.ad,fi=0,di=ot.rb[ot.sb-1],Hn=hr=0,l(Wt,fi,0,384),Fn.Za)var Is=0,Js=Lr[3];else{li=c(16);var Qi=ir.Na+di.Na;if(Qi=os(Dr,Lr[1],Qi,Nr.Eb,0,li,0),ir.Na=di.Na=(0<Qi)+0,1<Qi)gi(li,0,Wt,fi);else{var ps=li[0]+3>>3;for(li=0;256>li;li+=16)Wt[fi+li]=ps}Is=1,Js=Lr[0]}var ti=15&ir.la,As=15&di.la;for(li=0;4>li;++li){var Ts=1&As;for(ps=Un=0;4>ps;++ps)ti=ti>>1|(Ts=(Qi=os(Dr,Js,Qi=Ts+(1&ti),Nr.Sc,Is,Wt,fi))>Is)<<7,Un=Un<<2|(3<Qi?3:1<Qi?2:Wt[fi+0]!=0),fi+=16;ti>>=4,As=As>>1|Ts<<7,hr=(hr<<8|Un)>>>0}for(Js=ti,Is=As>>4,ci=0;4>ci;ci+=2){for(Un=0,ti=ir.la>>4+ci,As=di.la>>4+ci,li=0;2>li;++li){for(Ts=1&As,ps=0;2>ps;++ps)Qi=Ts+(1&ti),ti=ti>>1|(Ts=0<(Qi=os(Dr,Lr[2],Qi,Nr.Qc,0,Wt,fi)))<<3,Un=Un<<2|(3<Qi?3:1<Qi?2:Wt[fi+0]!=0),fi+=16;ti>>=2,As=As>>1|Ts<<5}Hn|=Un<<4*ci,Js|=ti<<4<<ci,Is|=(240&As)<<ci}ir.la=Js,di.la=Is,Fn.Hc=hr,Fn.Gc=Hn,Fn.ia=43690&Hn?0:Nr.ia,Lr=!(hr|Hn)}if(0<ot.L&&(ot.wa[ot.Y+ot.ja]=ot.gd[Vt.$b][Vt.Za],ot.wa[ot.Y+ot.ja].La|=!Lr),Yt.Ka)return bi(pt,7,"Premature end-of-file encountered.")}if(Gs(pt),ot=Ar,Yt=1,Vt=(Je=pt).D,ir=0<Je.L&&Je.M>=Je.zb&&Je.M<=Je.Va,Je.Aa==0)e:{if(Vt.M=Je.M,Vt.uc=ir,ki(Je,Vt),Yt=1,Vt=(Un=Je.D).Nb,ir=(Hn=Tr[Je.L])*Je.R,Dr=Hn/2*Je.B,li=16*Vt*Je.R,ps=8*Vt*Je.B,Lr=Je.sa,Fn=Je.ta-ir+li,Nr=Je.qa,Wt=Je.ra-Dr+ps,fi=Je.Ha,di=Je.Ia-Dr+ps,As=(ti=Un.M)==0,hr=ti>=Je.Va-1,Je.Aa==2&&ki(Je,Un),Un.uc)for(Ts=(Qi=Je).D.M,t(Qi.D.uc),Un=Qi.yb;Un<Qi.Hb;++Un){Is=Un,Js=Ts;var Vi=(Ki=(Yi=Qi).D).Nb;ci=Yi.R;var Ki=Ki.wa[Ki.Y+Is],Ys=Yi.sa,co=Yi.ta+16*Vi*ci+16*Is,Ci=Ki.dd,Us=Ki.tc;if(Us!=0)if(t(3<=Us),Yi.L==1)0<Is&&Bi(Ys,co,ci,Us+4),Ki.La&&Sr(Ys,co,ci,Us),0<Js&&Ai(Ys,co,ci,Us+4),Ki.La&&Zi(Ys,co,ci,Us);else{var Eo=Yi.B,uo=Yi.qa,Fo=Yi.ra+8*Vi*Eo+8*Is,Ho=Yi.Ha,Yi=Yi.Ia+8*Vi*Eo+8*Is;Vi=Ki.ld,0<Is&&(Rs(Ys,co,ci,Us+4,Ci,Vi),Ao(uo,Fo,Ho,Yi,Eo,Us+4,Ci,Vi)),Ki.La&&(Hi(Ys,co,ci,Us,Ci,Vi),Ii(uo,Fo,Ho,Yi,Eo,Us,Ci,Vi)),0<Js&&(Oo(Ys,co,ci,Us+4,Ci,Vi),hA(uo,Fo,Ho,Yi,Eo,Us+4,Ci,Vi)),Ki.La&&(zo(Ys,co,ci,Us,Ci,Vi),kr(uo,Fo,Ho,Yi,Eo,Us,Ci,Vi))}}if(Je.ia&&alert("todo:DitherRow"),ot.put!=null){if(Un=16*ti,ti=16*(ti+1),As?(ot.y=Je.sa,ot.O=Je.ta+li,ot.f=Je.qa,ot.N=Je.ra+ps,ot.ea=Je.Ha,ot.W=Je.Ia+ps):(Un-=Hn,ot.y=Lr,ot.O=Fn,ot.f=Nr,ot.N=Wt,ot.ea=fi,ot.W=di),hr||(ti-=Hn),ti>ot.o&&(ti=ot.o),ot.F=null,ot.J=null,Je.Fa!=null&&0<Je.Fa.length&&Un<ti&&(ot.J=xi(Je,ot,Un,ti-Un),ot.F=Je.mb,ot.F==null&&ot.F.length==0)){Yt=bi(Je,3,"Could not decode alpha data.");break e}Un<ot.j&&(Hn=ot.j-Un,Un=ot.j,t(!(1&Hn)),ot.O+=Je.R*Hn,ot.N+=Je.B*(Hn>>1),ot.W+=Je.B*(Hn>>1),ot.F!=null&&(ot.J+=ot.width*Hn)),Un<ti&&(ot.O+=ot.v,ot.N+=ot.v>>1,ot.W+=ot.v>>1,ot.F!=null&&(ot.J+=ot.v),ot.ka=Un-ot.j,ot.U=ot.va-ot.v,ot.T=ti-Un,Yt=ot.put(ot))}Vt+1!=Je.Ic||hr||(s(Je.sa,Je.ta-ir,Lr,Fn+16*Je.R,ir),s(Je.qa,Je.ra-Dr,Nr,Wt+8*Je.B,Dr),s(Je.Ha,Je.Ia-Dr,fi,di+8*Je.B,Dr))}if(!Yt)return bi(pt,6,"Output aborted.")}return 1}(b,L)),L.bc!=null&&L.bc(L),j&=1}return j?(b.cb=0,j):0}function gs(b,L,j,W,ae){ae=b[L+j+32*W]+(ae>>3),b[L+j+32*W]=-256&ae?0>ae?0:255:ae}function Ri(b,L,j,W,ae,de){gs(b,L,0,j,W+ae),gs(b,L,1,j,W+de),gs(b,L,2,j,W-de),gs(b,L,3,j,W-ae)}function Xi(b){return(20091*b>>16)+b}function vo(b,L,j,W){var ae,de=0,me=c(16);for(ae=0;4>ae;++ae){var be=b[L+0]+b[L+8],Se=b[L+0]-b[L+8],De=(35468*b[L+4]>>16)-Xi(b[L+12]),ft=Xi(b[L+4])+(35468*b[L+12]>>16);me[de+0]=be+ft,me[de+1]=Se+De,me[de+2]=Se-De,me[de+3]=be-ft,de+=4,L++}for(ae=de=0;4>ae;++ae)be=(b=me[de+0]+4)+me[de+8],Se=b-me[de+8],De=(35468*me[de+4]>>16)-Xi(me[de+12]),gs(j,W,0,0,be+(ft=Xi(me[de+4])+(35468*me[de+12]>>16))),gs(j,W,1,0,Se+De),gs(j,W,2,0,Se-De),gs(j,W,3,0,be-ft),de++,W+=32}function nA(b,L,j,W){var ae=b[L+0]+4,de=35468*b[L+4]>>16,me=Xi(b[L+4]),be=35468*b[L+1]>>16;Ri(j,W,0,ae+me,b=Xi(b[L+1]),be),Ri(j,W,1,ae+de,b,be),Ri(j,W,2,ae-de,b,be),Ri(j,W,3,ae-me,b,be)}function EA(b,L,j,W,ae){vo(b,L,j,W),ae&&vo(b,L+16,j,W+4)}function sa(b,L,j,W){ZA(b,L+0,j,W,1),ZA(b,L+32,j,W+128,1)}function bs(b,L,j,W){var ae;for(b=b[L+0]+4,ae=0;4>ae;++ae)for(L=0;4>L;++L)gs(j,W,L,ae,b)}function xs(b,L,j,W){b[L+0]&&fs(b,L+0,j,W),b[L+16]&&fs(b,L+16,j,W+4),b[L+32]&&fs(b,L+32,j,W+128),b[L+48]&&fs(b,L+48,j,W+128+4)}function $a(b,L,j,W){var ae,de=c(16);for(ae=0;4>ae;++ae){var me=b[L+0+ae]+b[L+12+ae],be=b[L+4+ae]+b[L+8+ae],Se=b[L+4+ae]-b[L+8+ae],De=b[L+0+ae]-b[L+12+ae];de[0+ae]=me+be,de[8+ae]=me-be,de[4+ae]=De+Se,de[12+ae]=De-Se}for(ae=0;4>ae;++ae)me=(b=de[0+4*ae]+3)+de[3+4*ae],be=de[1+4*ae]+de[2+4*ae],Se=de[1+4*ae]-de[2+4*ae],De=b-de[3+4*ae],j[W+0]=me+be>>3,j[W+16]=De+Se>>3,j[W+32]=me-be>>3,j[W+48]=De-Se>>3,W+=64}function aa(b,L,j){var W,ae=L-32,de=Zs,me=255-b[ae-1];for(W=0;W<j;++W){var be,Se=de,De=me+b[L-1];for(be=0;be<j;++be)b[L+be]=Se[De+b[ae+be]];L+=32}}function Mo(b,L){aa(b,L,4)}function ka(b,L){aa(b,L,8)}function Do(b,L){aa(b,L,16)}function oa(b,L){var j;for(j=0;16>j;++j)s(b,L+32*j,b,L-32,16)}function qs(b,L){var j;for(j=16;0<j;--j)l(b,L,b[L-1],16),L+=32}function ii(b,L,j){var W;for(W=0;16>W;++W)l(L,j+32*W,b,16)}function Bs(b,L){var j,W=16;for(j=0;16>j;++j)W+=b[L-1+32*j]+b[L+j-32];ii(W>>5,b,L)}function ys(b,L){var j,W=8;for(j=0;16>j;++j)W+=b[L-1+32*j];ii(W>>4,b,L)}function iA(b,L){var j,W=8;for(j=0;16>j;++j)W+=b[L+j-32];ii(W>>4,b,L)}function sA(b,L){ii(128,b,L)}function Cn(b,L,j){return b+2*L+j+2>>2}function GA(b,L){var j,W=L-32;for(W=new Uint8Array([Cn(b[W-1],b[W+0],b[W+1]),Cn(b[W+0],b[W+1],b[W+2]),Cn(b[W+1],b[W+2],b[W+3]),Cn(b[W+2],b[W+3],b[W+4])]),j=0;4>j;++j)s(b,L+32*j,W,0,W.length)}function pl(b,L){var j=b[L-1],W=b[L-1+32],ae=b[L-1+64],de=b[L-1+96];tt(b,L+0,16843009*Cn(b[L-1-32],j,W)),tt(b,L+32,16843009*Cn(j,W,ae)),tt(b,L+64,16843009*Cn(W,ae,de)),tt(b,L+96,16843009*Cn(ae,de,de))}function Ma(b,L){var j,W=4;for(j=0;4>j;++j)W+=b[L+j-32]+b[L-1+32*j];for(W>>=3,j=0;4>j;++j)l(b,L+32*j,W,4)}function _o(b,L){var j=b[L-1+0],W=b[L-1+32],ae=b[L-1+64],de=b[L-1-32],me=b[L+0-32],be=b[L+1-32],Se=b[L+2-32],De=b[L+3-32];b[L+0+96]=Cn(W,ae,b[L-1+96]),b[L+1+96]=b[L+0+64]=Cn(j,W,ae),b[L+2+96]=b[L+1+64]=b[L+0+32]=Cn(de,j,W),b[L+3+96]=b[L+2+64]=b[L+1+32]=b[L+0+0]=Cn(me,de,j),b[L+3+64]=b[L+2+32]=b[L+1+0]=Cn(be,me,de),b[L+3+32]=b[L+2+0]=Cn(Se,be,me),b[L+3+0]=Cn(De,Se,be)}function aA(b,L){var j=b[L+1-32],W=b[L+2-32],ae=b[L+3-32],de=b[L+4-32],me=b[L+5-32],be=b[L+6-32],Se=b[L+7-32];b[L+0+0]=Cn(b[L+0-32],j,W),b[L+1+0]=b[L+0+32]=Cn(j,W,ae),b[L+2+0]=b[L+1+32]=b[L+0+64]=Cn(W,ae,de),b[L+3+0]=b[L+2+32]=b[L+1+64]=b[L+0+96]=Cn(ae,de,me),b[L+3+32]=b[L+2+64]=b[L+1+96]=Cn(de,me,be),b[L+3+64]=b[L+2+96]=Cn(me,be,Se),b[L+3+96]=Cn(be,Se,Se)}function wo(b,L){var j=b[L-1+0],W=b[L-1+32],ae=b[L-1+64],de=b[L-1-32],me=b[L+0-32],be=b[L+1-32],Se=b[L+2-32],De=b[L+3-32];b[L+0+0]=b[L+1+64]=de+me+1>>1,b[L+1+0]=b[L+2+64]=me+be+1>>1,b[L+2+0]=b[L+3+64]=be+Se+1>>1,b[L+3+0]=Se+De+1>>1,b[L+0+96]=Cn(ae,W,j),b[L+0+64]=Cn(W,j,de),b[L+0+32]=b[L+1+96]=Cn(j,de,me),b[L+1+32]=b[L+2+96]=Cn(de,me,be),b[L+2+32]=b[L+3+96]=Cn(me,be,Se),b[L+3+32]=Cn(be,Se,De)}function gt(b,L){var j=b[L+0-32],W=b[L+1-32],ae=b[L+2-32],de=b[L+3-32],me=b[L+4-32],be=b[L+5-32],Se=b[L+6-32],De=b[L+7-32];b[L+0+0]=j+W+1>>1,b[L+1+0]=b[L+0+64]=W+ae+1>>1,b[L+2+0]=b[L+1+64]=ae+de+1>>1,b[L+3+0]=b[L+2+64]=de+me+1>>1,b[L+0+32]=Cn(j,W,ae),b[L+1+32]=b[L+0+96]=Cn(W,ae,de),b[L+2+32]=b[L+1+96]=Cn(ae,de,me),b[L+3+32]=b[L+2+96]=Cn(de,me,be),b[L+3+64]=Cn(me,be,Se),b[L+3+96]=Cn(be,Se,De)}function Mn(b,L){var j=b[L-1+0],W=b[L-1+32],ae=b[L-1+64],de=b[L-1+96];b[L+0+0]=j+W+1>>1,b[L+2+0]=b[L+0+32]=W+ae+1>>1,b[L+2+32]=b[L+0+64]=ae+de+1>>1,b[L+1+0]=Cn(j,W,ae),b[L+3+0]=b[L+1+32]=Cn(W,ae,de),b[L+3+32]=b[L+1+64]=Cn(ae,de,de),b[L+3+64]=b[L+2+64]=b[L+0+96]=b[L+1+96]=b[L+2+96]=b[L+3+96]=de}function Ds(b,L){var j=b[L-1+0],W=b[L-1+32],ae=b[L-1+64],de=b[L-1+96],me=b[L-1-32],be=b[L+0-32],Se=b[L+1-32],De=b[L+2-32];b[L+0+0]=b[L+2+32]=j+me+1>>1,b[L+0+32]=b[L+2+64]=W+j+1>>1,b[L+0+64]=b[L+2+96]=ae+W+1>>1,b[L+0+96]=de+ae+1>>1,b[L+3+0]=Cn(be,Se,De),b[L+2+0]=Cn(me,be,Se),b[L+1+0]=b[L+3+32]=Cn(j,me,be),b[L+1+32]=b[L+3+64]=Cn(W,j,me),b[L+1+64]=b[L+3+96]=Cn(ae,W,j),b[L+1+96]=Cn(de,ae,W)}function Oi(b,L){var j;for(j=0;8>j;++j)s(b,L+32*j,b,L-32,8)}function Ps(b,L){var j;for(j=0;8>j;++j)l(b,L,b[L-1],8),L+=32}function ya(b,L,j){var W;for(W=0;8>W;++W)l(L,j+32*W,b,8)}function eo(b,L){var j,W=8;for(j=0;8>j;++j)W+=b[L+j-32]+b[L-1+32*j];ya(W>>4,b,L)}function Cs(b,L){var j,W=4;for(j=0;8>j;++j)W+=b[L+j-32];ya(W>>3,b,L)}function Aa(b,L){var j,W=4;for(j=0;8>j;++j)W+=b[L-1+32*j];ya(W>>3,b,L)}function to(b,L){ya(128,b,L)}function va(b,L,j){var W=b[L-j],ae=b[L+0],de=3*(ae-W)+YA[1020+b[L-2*j]-b[L+j]],me=$A[112+(de+4>>3)];b[L-j]=Zs[255+W+$A[112+(de+3>>3)]],b[L+0]=Zs[255+ae-me]}function qA(b,L,j,W){var ae=b[L+0],de=b[L+j];return Di[255+b[L-2*j]-b[L-j]]>W||Di[255+de-ae]>W}function ts(b,L,j,W){return 4*Di[255+b[L-j]-b[L+0]]+Di[255+b[L-2*j]-b[L+j]]<=W}function FA(b,L,j,W,ae){var de=b[L-3*j],me=b[L-2*j],be=b[L-j],Se=b[L+0],De=b[L+j],ft=b[L+2*j],Tt=b[L+3*j];return 4*Di[255+be-Se]+Di[255+me-De]>W?0:Di[255+b[L-4*j]-de]<=ae&&Di[255+de-me]<=ae&&Di[255+me-be]<=ae&&Di[255+Tt-ft]<=ae&&Di[255+ft-De]<=ae&&Di[255+De-Se]<=ae}function ro(b,L,j,W){var ae=2*W+1;for(W=0;16>W;++W)ts(b,L+W,j,ae)&&va(b,L+W,j)}function no(b,L,j,W){var ae=2*W+1;for(W=0;16>W;++W)ts(b,L+W*j,1,ae)&&va(b,L+W*j,1)}function io(b,L,j,W){var ae;for(ae=3;0<ae;--ae)ro(b,L+=4*j,j,W)}function ql(b,L,j,W){var ae;for(ae=3;0<ae;--ae)no(b,L+=4,j,W)}function No(b,L,j,W,ae,de,me,be){for(de=2*de+1;0<ae--;){if(FA(b,L,j,de,me))if(qA(b,L,j,be))va(b,L,j);else{var Se=b,De=L,ft=j,Tt=Se[De-2*ft],Ft=Se[De-ft],pt=Se[De+0],Ar=Se[De+ft],Vt=Se[De+2*ft],Je=27*(Yt=YA[1020+3*(pt-Ft)+YA[1020+Tt-Ar]])+63>>7,ot=18*Yt+63>>7,Yt=9*Yt+63>>7;Se[De-3*ft]=Zs[255+Se[De-3*ft]+Yt],Se[De-2*ft]=Zs[255+Tt+ot],Se[De-ft]=Zs[255+Ft+Je],Se[De+0]=Zs[255+pt-Je],Se[De+ft]=Zs[255+Ar-ot],Se[De+2*ft]=Zs[255+Vt-Yt]}L+=W}}function vs(b,L,j,W,ae,de,me,be){for(de=2*de+1;0<ae--;){if(FA(b,L,j,de,me))if(qA(b,L,j,be))va(b,L,j);else{var Se=b,De=L,ft=j,Tt=Se[De-ft],Ft=Se[De+0],pt=Se[De+ft],Ar=$A[112+((Vt=3*(Ft-Tt))+4>>3)],Vt=$A[112+(Vt+3>>3)],Je=Ar+1>>1;Se[De-2*ft]=Zs[255+Se[De-2*ft]+Je],Se[De-ft]=Zs[255+Tt+Vt],Se[De+0]=Zs[255+Ft-Ar],Se[De+ft]=Zs[255+pt-Je]}L+=W}}function oA(b,L,j,W,ae,de){No(b,L,j,1,16,W,ae,de)}function AA(b,L,j,W,ae,de){No(b,L,1,j,16,W,ae,de)}function _c(b,L,j,W,ae,de){var me;for(me=3;0<me;--me)vs(b,L+=4*j,j,1,16,W,ae,de)}function _a(b,L,j,W,ae,de){var me;for(me=3;0<me;--me)vs(b,L+=4,1,j,16,W,ae,de)}function WA(b,L,j,W,ae,de,me,be){No(b,L,ae,1,8,de,me,be),No(j,W,ae,1,8,de,me,be)}function SA(b,L,j,W,ae,de,me,be){No(b,L,1,ae,8,de,me,be),No(j,W,1,ae,8,de,me,be)}function IA(b,L,j,W,ae,de,me,be){vs(b,L+4*ae,ae,1,8,de,me,be),vs(j,W+4*ae,ae,1,8,de,me,be)}function TA(b,L,j,W,ae,de,me,be){vs(b,L+4,1,ae,8,de,me,be),vs(j,W+4,1,ae,8,de,me,be)}function lA(){this.ba=new _i,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Cr,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function UA(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function bo(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function ml(){this.ua=0,this.Wa=new Oe,this.vb=new Oe,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ve,this.yc=new ne}function Wl(){this.xb=this.a=0,this.l=new wi,this.ca=new _i,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new te,this.Pb=0,this.wd=new te,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new ml,this.ab=0,this.gc=h(4,bo),this.Oc=0}function jo(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new wi,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function wa(b,L,j,W,ae,de,me){for(b=b==null?0:b[L+0],L=0;L<me;++L)ae[de+L]=b+j[W+L]&255,b=ae[de+L]}function XA(b,L,j,W,ae,de,me){var be;if(b==null)wa(null,null,j,W,ae,de,me);else for(be=0;be<me;++be)ae[de+be]=b[L+be]+j[W+be]&255}function ba(b,L,j,W,ae,de,me){if(b==null)wa(null,null,j,W,ae,de,me);else{var be,Se=b[L+0],De=Se,ft=Se;for(be=0;be<me;++be)De=ft+(Se=b[L+be])-De,ft=j[W+be]+(-256&De?0>De?0:255:De)&255,De=Se,ae[de+be]=ft}}function xi(b,L,j,W){var ae=L.width,de=L.o;if(t(b!=null&&L!=null),0>j||0>=W||j+W>de)return null;if(!b.Cc){if(b.ga==null){var me;if(b.ga=new jo,(me=b.ga==null)||(me=L.width*L.o,t(b.Gb.length==0),b.Gb=c(me),b.Uc=0,b.Gb==null?me=0:(b.mb=b.Gb,b.nb=b.Uc,b.rc=null,me=1),me=!me),!me){me=b.ga;var be=b.Fa,Se=b.P,De=b.qc,ft=b.mb,Tt=b.nb,Ft=Se+1,pt=De-1,Ar=me.l;if(t(be!=null&&ft!=null&&L!=null),v[0]=null,v[1]=wa,v[2]=XA,v[3]=ba,me.ca=ft,me.tb=Tt,me.c=L.width,me.i=L.height,t(0<me.c&&0<me.i),1>=De)L=0;else if(me.$a=be[Se+0]>>0&3,me.Z=be[Se+0]>>2&3,me.Lc=be[Se+0]>>4&3,Se=be[Se+0]>>6&3,0>me.$a||1<me.$a||4<=me.Z||1<me.Lc||Se)L=0;else if(Ar.put=Sn,Ar.ac=xn,Ar.bc=ji,Ar.ma=me,Ar.width=L.width,Ar.height=L.height,Ar.Da=L.Da,Ar.v=L.v,Ar.va=L.va,Ar.j=L.j,Ar.o=L.o,me.$a)e:{t(me.$a==1),L=qe();t:for(;;){if(L==null){L=0;break e}if(t(me!=null),me.mc=L,L.c=me.c,L.i=me.i,L.l=me.l,L.l.ma=me,L.l.width=me.c,L.l.height=me.i,L.a=0,Ue(L.m,be,Ft,pt),!ut(me.c,me.i,1,L,null)||(L.ab==1&&L.gc[0].hc==3&&Ce(L.s)?(me.ic=1,be=L.c*L.i,L.Ta=null,L.Ua=0,L.V=c(be),L.Ba=0,L.V==null?(L.a=1,L=0):L=1):(me.ic=0,L=Ot(L,me.c)),!L))break t;L=1;break e}me.mc=null,L=0}else L=pt>=me.c*me.i;me=!L}if(me)return null;b.ga.Lc!=1?b.Ga=0:W=de-j}t(b.ga!=null),t(j+W<=de);e:{if(L=(be=b.ga).c,de=be.l.o,be.$a==0){if(Ft=b.rc,pt=b.Vc,Ar=b.Fa,Se=b.P+1+j*L,De=b.mb,ft=b.nb+j*L,t(Se<=b.P+b.qc),be.Z!=0)for(t(v[be.Z]!=null),me=0;me<W;++me)v[be.Z](Ft,pt,Ar,Se,De,ft,L),Ft=De,pt=ft,ft+=L,Se+=L;else for(me=0;me<W;++me)s(De,ft,Ar,Se,L),Ft=De,pt=ft,ft+=L,Se+=L;b.rc=Ft,b.Vc=pt}else{if(t(be.mc!=null),L=j+W,t((me=be.mc)!=null),t(L<=me.i),me.C>=L)L=1;else if(be.ic||_t(),be.ic){be=me.V,Ft=me.Ba,pt=me.c;var Vt=me.i,Je=(Ar=1,Se=me.$/pt,De=me.$%pt,ft=me.m,Tt=me.s,me.$),ot=pt*Vt,Yt=pt*L,ir=Tt.wc,Wt=Je<Yt?Ie(Tt,De,Se):null;t(Je<=ot),t(L<=Vt),t(Ce(Tt));t:for(;;){for(;!ft.h&&Je<Yt;){if(De&ir||(Wt=Ie(Tt,De,Se)),t(Wt!=null),st(ft),256>(Vt=Ln(Wt.G[0],Wt.H[0],ft)))be[Ft+Je]=Vt,++Je,++De>=pt&&(De=0,++Se<=L&&!(Se%16)&&Xe(me,Se));else{if(!(280>Vt)){Ar=0;break t}Vt=Wi(Vt-256,ft);var Dr,Lr=Ln(Wt.G[4],Wt.H[4],ft);if(st(ft),!(Je>=(Lr=hs(pt,Lr=Wi(Lr,ft)))&&ot-Je>=Vt)){Ar=0;break t}for(Dr=0;Dr<Vt;++Dr)be[Ft+Je+Dr]=be[Ft+Je+Dr-Lr];for(Je+=Vt,De+=Vt;De>=pt;)De-=pt,++Se<=L&&!(Se%16)&&Xe(me,Se);Je<Yt&&De&ir&&(Wt=Ie(Tt,De,Se))}t(ft.h==Qe(ft))}Xe(me,Se>L?L:Se);break t}!Ar||ft.h&&Je<ot?(Ar=0,me.a=ft.h?5:3):me.$=Je,L=Ar}else L=lt(me,me.V,me.Ba,me.c,me.i,L,nr);if(!L){W=0;break e}}j+W>=de&&(b.Cc=1),W=1}if(!W)return null;if(b.Cc&&((W=b.ga)!=null&&(W.mc=null),b.ga=null,0<b.Ga))return alert("todo:WebPDequantizeLevels"),null}return b.nb+j*ae}function N(b,L,j,W,ae,de){for(;0<ae--;){var me,be=b,Se=L+(j?1:0),De=b,ft=L+(j?0:3);for(me=0;me<W;++me){var Tt=De[ft+4*me];Tt!=255&&(Tt*=32897,be[Se+4*me+0]=be[Se+4*me+0]*Tt>>23,be[Se+4*me+1]=be[Se+4*me+1]*Tt>>23,be[Se+4*me+2]=be[Se+4*me+2]*Tt>>23)}L+=de}}function oe(b,L,j,W,ae){for(;0<W--;){var de;for(de=0;de<j;++de){var me=b[L+2*de+0],be=15&(De=b[L+2*de+1]),Se=4369*be,De=(240&De|De>>4)*Se>>16;b[L+2*de+0]=(240&me|me>>4)*Se>>16&240|(15&me|me<<4)*Se>>16>>4&15,b[L+2*de+1]=240&De|be}L+=ae}}function ke(b,L,j,W,ae,de,me,be){var Se,De,ft=255;for(De=0;De<ae;++De){for(Se=0;Se<W;++Se){var Tt=b[L+Se];de[me+4*Se]=Tt,ft&=Tt}L+=j,me+=be}return ft!=255}function et(b,L,j,W,ae){var de;for(de=0;de<ae;++de)j[W+de]=b[L+de]>>8}function _t(){Ra=N,LA=oe,QA=ke,Xl=et}function Jt(b,L,j){Ae[b]=function(W,ae,de,me,be,Se,De,ft,Tt,Ft,pt,Ar,Vt,Je,ot,Yt,ir){var Wt,Dr=ir-1>>1,Lr=be[Se+0]|De[ft+0]<<16,Fn=Tt[Ft+0]|pt[Ar+0]<<16;t(W!=null);var Nr=3*Lr+Fn+131074>>2;for(L(W[ae+0],255&Nr,Nr>>16,Vt,Je),de!=null&&(Nr=3*Fn+Lr+131074>>2,L(de[me+0],255&Nr,Nr>>16,ot,Yt)),Wt=1;Wt<=Dr;++Wt){var fi=be[Se+Wt]|De[ft+Wt]<<16,di=Tt[Ft+Wt]|pt[Ar+Wt]<<16,hr=Lr+fi+Fn+di+524296,Hn=hr+2*(fi+Fn)>>3;Nr=Hn+Lr>>1,Lr=(hr=hr+2*(Lr+di)>>3)+fi>>1,L(W[ae+2*Wt-1],255&Nr,Nr>>16,Vt,Je+(2*Wt-1)*j),L(W[ae+2*Wt-0],255&Lr,Lr>>16,Vt,Je+(2*Wt-0)*j),de!=null&&(Nr=hr+Fn>>1,Lr=Hn+di>>1,L(de[me+2*Wt-1],255&Nr,Nr>>16,ot,Yt+(2*Wt-1)*j),L(de[me+2*Wt+0],255&Lr,Lr>>16,ot,Yt+(2*Wt+0)*j)),Lr=fi,Fn=di}1&ir||(Nr=3*Lr+Fn+131074>>2,L(W[ae+ir-1],255&Nr,Nr>>16,Vt,Je+(ir-1)*j),de!=null&&(Nr=3*Fn+Lr+131074>>2,L(de[me+ir-1],255&Nr,Nr>>16,ot,Yt+(ir-1)*j)))}}function _r(){S[lo]=M,S[vl]=q,S[Oa]=H,S[el]=J,S[fA]=se,S[PA]=pe,S[Fa]=we,S[Ui]=q,S[kA]=J,S[MA]=se,S[DA]=pe}function en(b){return b&~It?0>b?0:255:b>>wt}function En(b,L){return en((19077*b>>8)+(26149*L>>8)-14234)}function Dn(b,L,j){return en((19077*b>>8)-(6419*L>>8)-(13320*j>>8)+8708)}function Kn(b,L){return en((19077*b>>8)+(33050*L>>8)-17685)}function Wn(b,L,j,W,ae){W[ae+0]=En(b,j),W[ae+1]=Dn(b,L,j),W[ae+2]=Kn(b,L)}function pi(b,L,j,W,ae){W[ae+0]=Kn(b,L),W[ae+1]=Dn(b,L,j),W[ae+2]=En(b,j)}function mi(b,L,j,W,ae){var de=Dn(b,L,j);L=de<<3&224|Kn(b,L)>>3,W[ae+0]=248&En(b,j)|de>>5,W[ae+1]=L}function Tn(b,L,j,W,ae){var de=240&Kn(b,L)|15;W[ae+0]=240&En(b,j)|Dn(b,L,j)>>4,W[ae+1]=de}function Es(b,L,j,W,ae){W[ae+0]=255,Wn(b,L,j,W,ae+1)}function rs(b,L,j,W,ae){pi(b,L,j,W,ae),W[ae+3]=255}function Ws(b,L,j,W,ae){Wn(b,L,j,W,ae),W[ae+3]=255}function ns(b,L){return 0>b?0:b>L?L:b}function Si(b,L,j){Ae[b]=function(W,ae,de,me,be,Se,De,ft,Tt){for(var Ft=ft+(-2&Tt)*j;ft!=Ft;)L(W[ae+0],de[me+0],be[Se+0],De,ft),L(W[ae+1],de[me+0],be[Se+0],De,ft+j),ae+=2,++me,++Se,ft+=2*j;1&Tt&&L(W[ae+0],de[me+0],be[Se+0],De,ft)}}function gl(b,L,j){return j==0?b==0?L==0?6:5:L==0?4:0:j}function la(b,L,j,W,ae){switch(b>>>30){case 3:ZA(L,j,W,ae,0);break;case 2:Na(L,j,W,ae);break;case 1:fs(L,j,W,ae)}}function ki(b,L){var j,W,ae=L.M,de=L.Nb,me=b.oc,be=b.pc+40,Se=b.oc,De=b.pc+584,ft=b.oc,Tt=b.pc+600;for(j=0;16>j;++j)me[be+32*j-1]=129;for(j=0;8>j;++j)Se[De+32*j-1]=129,ft[Tt+32*j-1]=129;for(0<ae?me[be-1-32]=Se[De-1-32]=ft[Tt-1-32]=129:(l(me,be-32-1,127,21),l(Se,De-32-1,127,9),l(ft,Tt-32-1,127,9)),W=0;W<b.za;++W){var Ft=L.ya[L.aa+W];if(0<W){for(j=-1;16>j;++j)s(me,be+32*j-4,me,be+32*j+12,4);for(j=-1;8>j;++j)s(Se,De+32*j-4,Se,De+32*j+4,4),s(ft,Tt+32*j-4,ft,Tt+32*j+4,4)}var pt=b.Gd,Ar=b.Hd+W,Vt=Ft.ad,Je=Ft.Hc;if(0<ae&&(s(me,be-32,pt[Ar].y,0,16),s(Se,De-32,pt[Ar].f,0,8),s(ft,Tt-32,pt[Ar].ea,0,8)),Ft.Za){var ot=me,Yt=be-32+16;for(0<ae&&(W>=b.za-1?l(ot,Yt,pt[Ar].y[15],4):s(ot,Yt,pt[Ar+1].y,0,4)),j=0;4>j;j++)ot[Yt+128+j]=ot[Yt+256+j]=ot[Yt+384+j]=ot[Yt+0+j];for(j=0;16>j;++j,Je<<=2)ot=me,Yt=be+Rr[j],g[Ft.Ob[j]](ot,Yt),la(Je,Vt,16*+j,ot,Yt)}else if(ot=gl(W,ae,Ft.Ob[0]),ha[ot](me,be),Je!=0)for(j=0;16>j;++j,Je<<=2)la(Je,Vt,16*+j,me,be+Rr[j]);for(j=Ft.Gc,ot=gl(W,ae,Ft.Dd),i[ot](Se,De),i[ot](ft,Tt),Je=Vt,ot=Se,Yt=De,255&(Ft=j>>0)&&(170&Ft?ja(Je,256,ot,Yt):Ea(Je,256,ot,Yt)),Ft=ft,Je=Tt,255&(j>>=8)&&(170&j?ja(Vt,320,Ft,Je):Ea(Vt,320,Ft,Je)),ae<b.Ub-1&&(s(pt[Ar].y,0,me,be+480,16),s(pt[Ar].f,0,Se,De+224,8),s(pt[Ar].ea,0,ft,Tt+224,8)),j=8*de*b.B,pt=b.sa,Ar=b.ta+16*W+16*de*b.R,Vt=b.qa,Ft=b.ra+8*W+j,Je=b.Ha,ot=b.Ia+8*W+j,j=0;16>j;++j)s(pt,Ar+j*b.R,me,be+32*j,16);for(j=0;8>j;++j)s(Vt,Ft+j*b.B,Se,De+32*j,8),s(Je,ot+j*b.B,ft,Tt+32*j,8)}}function xa(b,L,j,W,ae,de,me,be,Se){var De=[0],ft=[0],Tt=0,Ft=Se!=null?Se.kd:0,pt=Se??new UA;if(b==null||12>j)return 7;pt.data=b,pt.w=L,pt.ha=j,L=[L],j=[j],pt.gb=[pt.gb];e:{var Ar=L,Vt=j,Je=pt.gb;if(t(b!=null),t(Vt!=null),t(Je!=null),Je[0]=0,12<=Vt[0]&&!r(b,Ar[0],"RIFF")){if(r(b,Ar[0]+8,"WEBP")){Je=3;break e}var ot=Nt(b,Ar[0]+4);if(12>ot||4294967286<ot){Je=3;break e}if(Ft&&ot>Vt[0]-8){Je=7;break e}Je[0]=ot,Ar[0]+=12,Vt[0]-=12}Je=0}if(Je!=0)return Je;for(ot=0<pt.gb[0],j=j[0];;){e:{var Yt=b;Vt=L,Je=j;var ir=De,Wt=ft,Dr=Ar=[0];if((Nr=Tt=[Tt])[0]=0,8>Je[0])Je=7;else{if(!r(Yt,Vt[0],"VP8X")){if(Nt(Yt,Vt[0]+4)!=10){Je=3;break e}if(18>Je[0]){Je=7;break e}var Lr=Nt(Yt,Vt[0]+8),Fn=1+ht(Yt,Vt[0]+12);if(2147483648<=Fn*(Yt=1+ht(Yt,Vt[0]+15))){Je=3;break e}Dr!=null&&(Dr[0]=Lr),ir!=null&&(ir[0]=Fn),Wt!=null&&(Wt[0]=Yt),Vt[0]+=18,Je[0]-=18,Nr[0]=1}Je=0}}if(Tt=Tt[0],Ar=Ar[0],Je!=0)return Je;if(Vt=!!(2&Ar),!ot&&Tt)return 3;if(de!=null&&(de[0]=!!(16&Ar)),me!=null&&(me[0]=Vt),be!=null&&(be[0]=0),me=De[0],Ar=ft[0],Tt&&Vt&&Se==null){Je=0;break}if(4>j){Je=7;break}if(ot&&Tt||!ot&&!Tt&&!r(b,L[0],"ALPH")){j=[j],pt.na=[pt.na],pt.P=[pt.P],pt.Sa=[pt.Sa];e:{Lr=b,Je=L,ot=j;var Nr=pt.gb;ir=pt.na,Wt=pt.P,Dr=pt.Sa,Fn=22,t(Lr!=null),t(ot!=null),Yt=Je[0];var fi=ot[0];for(t(ir!=null),t(Dr!=null),ir[0]=null,Wt[0]=null,Dr[0]=0;;){if(Je[0]=Yt,ot[0]=fi,8>fi){Je=7;break e}var di=Nt(Lr,Yt+4);if(4294967286<di){Je=3;break e}var hr=8+di+1&-2;if(Fn+=hr,0<Nr&&Fn>Nr){Je=3;break e}if(!r(Lr,Yt,"VP8 ")||!r(Lr,Yt,"VP8L")){Je=0;break e}if(fi[0]<hr){Je=7;break e}r(Lr,Yt,"ALPH")||(ir[0]=Lr,Wt[0]=Yt+8,Dr[0]=di),Yt+=hr,fi-=hr}}if(j=j[0],pt.na=pt.na[0],pt.P=pt.P[0],pt.Sa=pt.Sa[0],Je!=0)break}j=[j],pt.Ja=[pt.Ja],pt.xa=[pt.xa];e:if(Nr=b,Je=L,ot=j,ir=pt.gb[0],Wt=pt.Ja,Dr=pt.xa,Lr=Je[0],Yt=!r(Nr,Lr,"VP8 "),Fn=!r(Nr,Lr,"VP8L"),t(Nr!=null),t(ot!=null),t(Wt!=null),t(Dr!=null),8>ot[0])Je=7;else{if(Yt||Fn){if(Nr=Nt(Nr,Lr+4),12<=ir&&Nr>ir-12){Je=3;break e}if(Ft&&Nr>ot[0]-8){Je=7;break e}Wt[0]=Nr,Je[0]+=8,ot[0]-=8,Dr[0]=Fn}else Dr[0]=5<=ot[0]&&Nr[Lr+0]==47&&!(Nr[Lr+4]>>5),Wt[0]=ot[0];Je=0}if(j=j[0],pt.Ja=pt.Ja[0],pt.xa=pt.xa[0],L=L[0],Je!=0)break;if(4294967286<pt.Ja)return 3;if(be==null||Vt||(be[0]=pt.xa?2:1),me=[me],Ar=[Ar],pt.xa){if(5>j){Je=7;break}be=me,Ft=Ar,Vt=de,b==null||5>j?b=0:5<=j&&b[L+0]==47&&!(b[L+4]>>5)?(ot=[0],Nr=[0],ir=[0],Ue(Wt=new te,b,L,j),tn(Wt,ot,Nr,ir)?(be!=null&&(be[0]=ot[0]),Ft!=null&&(Ft[0]=Nr[0]),Vt!=null&&(Vt[0]=ir[0]),b=1):b=0):b=0}else{if(10>j){Je=7;break}be=Ar,b==null||10>j||!Yn(b,L+3,j-3)?b=0:(Ft=b[L+0]|b[L+1]<<8|b[L+2]<<16,Vt=16383&(b[L+7]<<8|b[L+6]),b=16383&(b[L+9]<<8|b[L+8]),1&Ft||3<(Ft>>1&7)||!(Ft>>4&1)||Ft>>5>=pt.Ja||!Vt||!b?b=0:(me&&(me[0]=Vt),be&&(be[0]=b),b=1))}if(!b||(me=me[0],Ar=Ar[0],Tt&&(De[0]!=me||ft[0]!=Ar)))return 3;Se!=null&&(Se[0]=pt,Se.offset=L-Se.w,t(4294967286>L-Se.w),t(Se.offset==Se.ha-j));break}return Je==0||Je==7&&Tt&&Se==null?(de!=null&&(de[0]|=pt.na!=null&&0<pt.na.length),W!=null&&(W[0]=me),ae!=null&&(ae[0]=Ar),0):Je}function Mi(b,L,j){var W=L.width,ae=L.height,de=0,me=0,be=W,Se=ae;if(L.Da=b!=null&&0<b.Da,L.Da&&(be=b.cd,Se=b.bd,de=b.v,me=b.j,11>j||(de&=-2,me&=-2),0>de||0>me||0>=be||0>=Se||de+be>W||me+Se>ae))return 0;if(L.v=de,L.j=me,L.va=de+be,L.o=me+Se,L.U=be,L.T=Se,L.da=b!=null&&0<b.da,L.da){if(!pr(be,Se,j=[b.ib],de=[b.hb]))return 0;L.ib=j[0],L.hb=de[0]}return L.ob=b!=null&&b.ob,L.Kb=b==null||!b.Sd,L.da&&(L.ob=L.ib<3*W/4&&L.hb<3*ae/4,L.Kb=0),1}function Da(b){if(b==null)return 2;if(11>b.S){var L=b.f.RGBA;L.fb+=(b.height-1)*L.A,L.A=-L.A}else L=b.f.kb,b=b.height,L.O+=(b-1)*L.fa,L.fa=-L.fa,L.N+=(b-1>>1)*L.Ab,L.Ab=-L.Ab,L.W+=(b-1>>1)*L.Db,L.Db=-L.Db,L.F!=null&&(L.J+=(b-1)*L.lb,L.lb=-L.lb);return 0}function Ba(b,L,j,W){if(W==null||0>=b||0>=L)return 2;if(j!=null){if(j.Da){var ae=j.cd,de=j.bd,me=-2&j.v,be=-2&j.j;if(0>me||0>be||0>=ae||0>=de||me+ae>b||be+de>L)return 2;b=ae,L=de}if(j.da){if(!pr(b,L,ae=[j.ib],de=[j.hb]))return 2;b=ae[0],L=de[0]}}W.width=b,W.height=L;e:{var Se=W.width,De=W.height;if(b=W.S,0>=Se||0>=De||!(b>=lo&&13>b))b=2;else{if(0>=W.Rd&&W.sd==null){me=de=ae=L=0;var ft=(be=Se*jn[b])*De;if(11>b||(de=(De+1)/2*(L=(Se+1)/2),b==12&&(me=(ae=Se)*De)),(De=c(ft+2*de+me))==null){b=1;break e}W.sd=De,11>b?((Se=W.f.RGBA).eb=De,Se.fb=0,Se.A=be,Se.size=ft):((Se=W.f.kb).y=De,Se.O=0,Se.fa=be,Se.Fd=ft,Se.f=De,Se.N=0+ft,Se.Ab=L,Se.Cd=de,Se.ea=De,Se.W=0+ft+de,Se.Db=L,Se.Ed=de,b==12&&(Se.F=De,Se.J=0+ft+2*de),Se.Tc=me,Se.lb=ae)}if(L=1,ae=W.S,de=W.width,me=W.height,ae>=lo&&13>ae)if(11>ae)b=W.f.RGBA,L&=(be=Math.abs(b.A))*(me-1)+de<=b.size,L&=be>=de*jn[ae],L&=b.eb!=null;else{b=W.f.kb,be=(de+1)/2,ft=(me+1)/2,Se=Math.abs(b.fa),De=Math.abs(b.Ab);var Tt=Math.abs(b.Db),Ft=Math.abs(b.lb),pt=Ft*(me-1)+de;L&=Se*(me-1)+de<=b.Fd,L&=De*(ft-1)+be<=b.Cd,L=(L&=Tt*(ft-1)+be<=b.Ed)&Se>=de&De>=be&Tt>=be,L&=b.y!=null,L&=b.f!=null,L&=b.ea!=null,ae==12&&(L&=Ft>=de,L&=pt<=b.Tc,L&=b.F!=null)}else L=0;b=L?0:2}}return b!=0||j!=null&&j.fd&&(b=Da(W)),b}var is=64,hi=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],cA=24,so=32,uA=8,Fs=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];fr("Predictor0","PredictorAdd0"),Ae.Predictor0=function(){return 4278190080},Ae.Predictor1=function(b){return b},Ae.Predictor2=function(b,L,j){return L[j+0]},Ae.Predictor3=function(b,L,j){return L[j+1]},Ae.Predictor4=function(b,L,j){return L[j-1]},Ae.Predictor5=function(b,L,j){return vr(vr(b,L[j+1]),L[j+0])},Ae.Predictor6=function(b,L,j){return vr(b,L[j-1])},Ae.Predictor7=function(b,L,j){return vr(b,L[j+0])},Ae.Predictor8=function(b,L,j){return vr(L[j-1],L[j+0])},Ae.Predictor9=function(b,L,j){return vr(L[j+0],L[j+1])},Ae.Predictor10=function(b,L,j){return vr(vr(b,L[j-1]),vr(L[j+0],L[j+1]))},Ae.Predictor11=function(b,L,j){var W=L[j+0];return 0>=xr(W>>24&255,b>>24&255,(L=L[j-1])>>24&255)+xr(W>>16&255,b>>16&255,L>>16&255)+xr(W>>8&255,b>>8&255,L>>8&255)+xr(255&W,255&b,255&L)?W:b},Ae.Predictor12=function(b,L,j){var W=L[j+0];return(Gr((b>>24&255)+(W>>24&255)-((L=L[j-1])>>24&255))<<24|Gr((b>>16&255)+(W>>16&255)-(L>>16&255))<<16|Gr((b>>8&255)+(W>>8&255)-(L>>8&255))<<8|Gr((255&b)+(255&W)-(255&L)))>>>0},Ae.Predictor13=function(b,L,j){var W=L[j-1];return(rr((b=vr(b,L[j+0]))>>24&255,W>>24&255)<<24|rr(b>>16&255,W>>16&255)<<16|rr(b>>8&255,W>>8&255)<<8|rr(b>>0&255,W>>0&255))>>>0};var xo=Ae.PredictorAdd0;Ae.PredictorAdd1=Zr,fr("Predictor2","PredictorAdd2"),fr("Predictor3","PredictorAdd3"),fr("Predictor4","PredictorAdd4"),fr("Predictor5","PredictorAdd5"),fr("Predictor6","PredictorAdd6"),fr("Predictor7","PredictorAdd7"),fr("Predictor8","PredictorAdd8"),fr("Predictor9","PredictorAdd9"),fr("Predictor10","PredictorAdd10"),fr("Predictor11","PredictorAdd11"),fr("Predictor12","PredictorAdd12"),fr("Predictor13","PredictorAdd13");var ao=Ae.PredictorAdd2;bt("ColorIndexInverseTransform","MapARGB","32b",function(b){return b>>8&255},function(b){return b}),bt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(b){return b},function(b){return b>>8&255});var Ro,zi=Ae.ColorIndexInverseTransform,Ns=Ae.MapARGB,oo=Ae.VP8LColorIndexInverseTransformAlpha,ss=Ae.MapAlpha,js=Ae.VP8LPredictorsAdd=[];js.length=16,(Ae.VP8LPredictors=[]).length=16,(Ae.VP8LPredictorsAdd_C=[]).length=16,(Ae.VP8LPredictors_C=[]).length=16;var Ss,Ca,ca,Xs,as,ua,gi,ZA,Na,ja,fs,Ea,Oo,Rs,hA,Ao,zo,Hi,kr,Ii,Ai,Bi,Zi,Sr,Ra,LA,QA,Xl,JA=c(511),wc=c(2041),Oc=c(225),yl=c(767),Zl=0,YA=wc,$A=Oc,Zs=yl,Di=JA,lo=0,vl=1,Oa=2,el=3,fA=4,PA=5,Fa=6,Ui=7,kA=8,MA=9,DA=10,zc=[2,3,7],Hc=[3,3,11],Vc=[280,256,256,256,40],Bo=[0,1,1,1,0],dA=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],sn=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],vn=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],tl=8,_l=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Sa=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],os=null,pA=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Co=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],bc=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],mA=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Ji=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],ds=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],xc=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ha=[],g=[],i=[],u=1,m=2,v=[],S=[];Jt("UpsampleRgbLinePair",Wn,3),Jt("UpsampleBgrLinePair",pi,3),Jt("UpsampleRgbaLinePair",Ws,4),Jt("UpsampleBgraLinePair",rs,4),Jt("UpsampleArgbLinePair",Es,4),Jt("UpsampleRgba4444LinePair",Tn,2),Jt("UpsampleRgb565LinePair",mi,2);var M=Ae.UpsampleRgbLinePair,H=Ae.UpsampleBgrLinePair,q=Ae.UpsampleRgbaLinePair,J=Ae.UpsampleBgraLinePair,se=Ae.UpsampleArgbLinePair,pe=Ae.UpsampleRgba4444LinePair,we=Ae.UpsampleRgb565LinePair,He=16,Me=1<<He-1,Re=-227,ct=482,wt=6,It=(256<<wt)-1,We=0,Rt=c(256),kt=c(256),Xt=c(256),Zt=c(256),ur=c(ct-Re),qt=c(ct-Re);Si("YuvToRgbRow",Wn,3),Si("YuvToBgrRow",pi,3),Si("YuvToRgbaRow",Ws,4),Si("YuvToBgraRow",rs,4),Si("YuvToArgbRow",Es,4),Si("YuvToRgba4444Row",Tn,2),Si("YuvToRgb565Row",mi,2);var Rr=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Tr=[0,2,8],qr=[8,7,6,4,4,2,2,2,1,1,1,1],kn=1;this.WebPDecodeRGBA=function(b,L,j,W,ae){var de=vl,me=new lA,be=new _i;me.ba=be,be.S=de,be.width=[be.width],be.height=[be.height];var Se=be.width,De=be.height,ft=new br;if(ft==null||b==null)var Tt=2;else t(ft!=null),Tt=xa(b,L,j,ft.width,ft.height,ft.Pd,ft.Qd,ft.format,null);if(Tt!=0?Se=0:(Se!=null&&(Se[0]=ft.width[0]),De!=null&&(De[0]=ft.height[0]),Se=1),Se){be.width=be.width[0],be.height=be.height[0],W!=null&&(W[0]=be.width),ae!=null&&(ae[0]=be.height);e:{if(W=new wi,(ae=new UA).data=b,ae.w=L,ae.ha=j,ae.kd=1,L=[0],t(ae!=null),((b=xa(ae.data,ae.w,ae.ha,null,null,null,L,null,ae))==0||b==7)&&L[0]&&(b=4),(L=b)==0){if(t(me!=null),W.data=ae.data,W.w=ae.w+ae.offset,W.ha=ae.ha-ae.offset,W.put=Sn,W.ac=xn,W.bc=ji,W.ma=me,ae.xa){if((b=qe())==null){me=1;break e}if(function(Ft,pt){var Ar=[0],Vt=[0],Je=[0];t:for(;;){if(Ft==null)return 0;if(pt==null)return Ft.a=2,0;if(Ft.l=pt,Ft.a=0,Ue(Ft.m,pt.data,pt.w,pt.ha),!tn(Ft.m,Ar,Vt,Je)){Ft.a=3;break t}if(Ft.xb=m,pt.width=Ar[0],pt.height=Vt[0],!ut(Ar[0],Vt[0],1,Ft,null))break t;return 1}return t(Ft.a!=0),0}(b,W)){if(W=(L=Ba(W.width,W.height,me.Oa,me.ba))==0){t:{W=b;r:for(;;){if(W==null){W=0;break t}if(t(W.s.yc!=null),t(W.s.Ya!=null),t(0<W.s.Wb),t((j=W.l)!=null),t((ae=j.ma)!=null),W.xb!=0){if(W.ca=ae.ba,W.tb=ae.tb,t(W.ca!=null),!Mi(ae.Oa,j,el)){W.a=2;break r}if(!Ot(W,j.width)||j.da)break r;if((j.da||Er(W.ca.S))&&_t(),11>W.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),W.ca.f.kb.F!=null&&_t()),W.Pb&&0<W.s.ua&&W.s.vb.X==null&&!dr(W.s.vb,W.s.Wa.Xa)){W.a=1;break r}W.xb=0}if(!lt(W,W.V,W.Ba,W.c,W.i,j.o,le))break r;ae.Dc=W.Ma,W=1;break t}t(W.a!=0),W=0}W=!W}W&&(L=b.a)}else L=b.a}else{if((b=new Qs)==null){me=1;break e}if(b.Fa=ae.na,b.P=ae.P,b.qc=ae.Sa,Ya(b,W)){if((L=Ba(W.width,W.height,me.Oa,me.ba))==0){if(b.Aa=0,j=me.Oa,t((ae=b)!=null),j!=null){if(0<(Se=0>(Se=j.Md)?0:100<Se?255:255*Se/100)){for(De=ft=0;4>De;++De)12>(Tt=ae.pb[De]).lc&&(Tt.ia=Se*qr[0>Tt.lc?0:Tt.lc]>>3),ft|=Tt.ia;ft&&(alert("todo:VP8InitRandom"),ae.ia=1)}ae.Ga=j.Id,100<ae.Ga?ae.Ga=100:0>ae.Ga&&(ae.Ga=0)}ia(b,W)||(L=b.a)}}else L=b.a}L==0&&me.Oa!=null&&me.Oa.fd&&(L=Da(me.ba))}me=L}de=me!=0?null:11>de?be.f.RGBA.eb:be.f.kb.y}else de=null;return de};var jn=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function _(Ae,ge){for(var he="",ee=0;ee<4;ee++)he+=String.fromCharCode(Ae[ge++]);return he}function p(Ae,ge){return(Ae[ge+0]<<0|Ae[ge+1]<<8|Ae[ge+2]<<16)>>>0}function E(Ae,ge){return(Ae[ge+0]<<0|Ae[ge+1]<<8|Ae[ge+2]<<16|Ae[ge+3]<<24)>>>0}new d;var w=[0],x=[0],Q=[],P=new d,R=e,k=function(Ae,ge){var he={},ee=0,ne=!1,xe=0,ve=0;if(he.frames=[],!function(Fe,Qe,Ve,st){for(var dt=0;dt<st;dt++)if(Fe[Qe+dt]!=Ve.charCodeAt(dt))return!0;return!1}(Ae,ge,"RIFF",4)){var ze,Le;for(E(Ae,ge+=4),ge+=8;ge<Ae.length;){var Ke=_(Ae,ge),Ue=E(Ae,ge+=4);ge+=4;var rt=Ue+(1&Ue);switch(Ke){case"VP8 ":case"VP8L":he.frames[ee]===void 0&&(he.frames[ee]={}),(te=he.frames[ee]).src_off=ne?ve:ge-8,te.src_size=xe+Ue+8,ee++,ne&&(ne=!1,xe=0,ve=0);break;case"VP8X":(te=he.header={}).feature_flags=Ae[ge];var je=ge+4;te.canvas_width=1+p(Ae,je),je+=3,te.canvas_height=1+p(Ae,je),je+=3;break;case"ALPH":ne=!0,xe=rt+8,ve=ge-8;break;case"ANIM":(te=he.header).bgcolor=E(Ae,ge),je=ge+4,te.loop_count=(ze=Ae)[(Le=je)+0]<<0|ze[Le+1]<<8,je+=2;break;case"ANMF":var St,te;(te=he.frames[ee]={}).offset_x=2*p(Ae,ge),ge+=3,te.offset_y=2*p(Ae,ge),ge+=3,te.width=1+p(Ae,ge),ge+=3,te.height=1+p(Ae,ge),ge+=3,te.duration=p(Ae,ge),ge+=3,St=Ae[ge++],te.dispose=1&St,te.blend=St>>1&1}Ke!="ANMF"&&(ge+=rt)}return he}}(R,0);k.response=R,k.rgbaoutput=!0,k.dataurl=!1;var O=k.header?k.header:null,G=k.frames?k.frames:null;if(O){O.loop_counter=O.loop_count,w=[O.canvas_height],x=[O.canvas_width];for(var K=0;K<G.length&&G[K].blend!=0;K++);}var Z=G[0],$=P.WebPDecodeRGBA(R,Z.src_off,Z.src_size,x,w);Z.rgba=$,Z.imgwidth=x[0],Z.imgheight=w[0];for(var fe=0;fe<x[0]*w[0]*4;fe++)Q[fe]=$[fe];return this.width=x,this.height=w,this.data=Q,this}(function(e){var t=function(){return typeof vg=="function"},r=function(w,x,Q,P){var R=4,k=h;switch(P){case e.image_compression.FAST:R=1,k=c;break;case e.image_compression.MEDIUM:R=6,k=a;break;case e.image_compression.SLOW:R=9,k=d}w=s(w,x,Q,k);var O=vg(w,{level:R});return e.__addimage__.arrayBufferToBinaryString(O)},s=function(w,x,Q,P){for(var R,k,O,G=w.length/x,K=new Uint8Array(w.length+G),Z=p(),$=0;$<G;$+=1){if(O=$*x,R=w.subarray(O,O+x),P)K.set(P(R,Q,k),O+$);else{for(var fe,Ae=Z.length,ge=[];fe<Ae;fe+=1)ge[fe]=Z[fe](R,Q,k);var he=E(ge.concat());K.set(ge[he],O+$)}k=R}return K},l=function(w){var x=Array.apply([],w);return x.unshift(0),x},c=function(w,x){var Q,P=[],R=w.length;P[0]=1;for(var k=0;k<R;k+=1)Q=w[k-x]||0,P[k+1]=w[k]-Q+256&255;return P},h=function(w,x,Q){var P,R=[],k=w.length;R[0]=2;for(var O=0;O<k;O+=1)P=Q&&Q[O]||0,R[O+1]=w[O]-P+256&255;return R},a=function(w,x,Q){var P,R,k=[],O=w.length;k[0]=3;for(var G=0;G<O;G+=1)P=w[G-x]||0,R=Q&&Q[G]||0,k[G+1]=w[G]+256-(P+R>>>1)&255;return k},d=function(w,x,Q){var P,R,k,O,G=[],K=w.length;G[0]=4;for(var Z=0;Z<K;Z+=1)P=w[Z-x]||0,R=Q&&Q[Z]||0,k=Q&&Q[Z-x]||0,O=_(P,R,k),G[Z+1]=w[Z]-O+256&255;return G},_=function(w,x,Q){if(w===x&&x===Q)return w;var P=Math.abs(x-Q),R=Math.abs(w-Q),k=Math.abs(w+x-Q-Q);return P<=R&&P<=k?w:R<=k?x:Q},p=function(){return[l,c,h,a,d]},E=function(w){var x=w.map(function(Q){return Q.reduce(function(P,R){return P+Math.abs(R)},0)});return x.indexOf(Math.min.apply(null,x))};e.processPNG=function(w,x,Q,P){var R,k,O,G,K,Z,$,fe,Ae,ge,he,ee,ne,xe,ve,ze=this.decode.FLATE_DECODE,Le="";if(this.__addimage__.isArrayBuffer(w)&&(w=new Uint8Array(w)),this.__addimage__.isArrayBufferView(w)){if(w=(O=new nS(w)).imgData,k=O.bits,R=O.colorSpace,K=O.colors,[4,6].indexOf(O.colorType)!==-1){if(O.bits===8){Ae=(fe=O.pixelBitlength==32?new Uint32Array(O.decodePixels().buffer):O.pixelBitlength==16?new Uint16Array(O.decodePixels().buffer):new Uint8Array(O.decodePixels().buffer)).length,he=new Uint8Array(Ae*O.colors),ge=new Uint8Array(Ae);var Ke,Ue=O.pixelBitlength-O.bits;for(xe=0,ve=0;xe<Ae;xe++){for(ne=fe[xe],Ke=0;Ke<Ue;)he[ve++]=ne>>>Ke&255,Ke+=O.bits;ge[xe]=ne>>>Ke&255}}if(O.bits===16){Ae=(fe=new Uint32Array(O.decodePixels().buffer)).length,he=new Uint8Array(Ae*(32/O.pixelBitlength)*O.colors),ge=new Uint8Array(Ae*(32/O.pixelBitlength)),ee=O.colors>1,xe=0,ve=0;for(var rt=0;xe<Ae;)ne=fe[xe++],he[ve++]=ne>>>0&255,ee&&(he[ve++]=ne>>>16&255,ne=fe[xe++],he[ve++]=ne>>>0&255),ge[rt++]=ne>>>16&255;k=8}P!==e.image_compression.NONE&&t()?(w=r(he,O.width*O.colors,O.colors,P),$=r(ge,O.width,1,P)):(w=he,$=ge,ze=void 0)}if(O.colorType===3&&(R=this.color_spaces.INDEXED,Z=O.palette,O.transparency.indexed)){var je=O.transparency.indexed,St=0;for(xe=0,Ae=je.length;xe<Ae;++xe)St+=je[xe];if((St/=255)===Ae-1&&je.indexOf(0)!==-1)G=[je.indexOf(0)];else if(St!==Ae){for(fe=O.decodePixels(),ge=new Uint8Array(fe.length),xe=0,Ae=fe.length;xe<Ae;xe++)ge[xe]=je[fe[xe]];$=r(ge,O.width,1)}}var te=function(Fe){var Qe;switch(Fe){case e.image_compression.FAST:Qe=11;break;case e.image_compression.MEDIUM:Qe=13;break;case e.image_compression.SLOW:Qe=14;break;default:Qe=12}return Qe}(P);return ze===this.decode.FLATE_DECODE&&(Le="/Predictor "+te+" "),Le+="/Colors "+K+" /BitsPerComponent "+k+" /Columns "+O.width,(this.__addimage__.isArrayBuffer(w)||this.__addimage__.isArrayBufferView(w))&&(w=this.__addimage__.arrayBufferToBinaryString(w)),($&&this.__addimage__.isArrayBuffer($)||this.__addimage__.isArrayBufferView($))&&($=this.__addimage__.arrayBufferToBinaryString($)),{alias:Q,data:w,index:x,filter:ze,decodeParameters:Le,transparency:G,palette:Z,sMask:$,predictor:te,width:O.width,height:O.height,bitsPerComponent:k,colorSpace:R}}}})(Nn.API),function(e){e.processGIF89A=function(t,r,s,l){var c=new iS(t),h=c.width,a=c.height,d=[];c.decodeAndBlitFrameRGBA(0,d);var _={data:d,width:h,height:a},p=new Hm(100).encode(_,100);return e.processJPEG.call(this,p,r,s,l)},e.processGIF87A=e.processGIF89A}(Nn.API),jl.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:l,green:s,blue:r,quad:c}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},jl.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){us.log("bit decode error:"+r)}},jl.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var s=this.bottom_up?e:this.height-1-e,l=0;l<t;l++)for(var c=this.datav.getUint8(this.pos++,!0),h=s*this.width*4+8*l*4,a=0;a<8&&8*l+a<this.width;a++){var d=this.palette[c>>7-a&1];this.data[h+4*a]=d.blue,this.data[h+4*a+1]=d.green,this.data[h+4*a+2]=d.red,this.data[h+4*a+3]=255}r!==0&&(this.pos+=4-r)}},jl.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,l=0;l<e;l++){var c=this.datav.getUint8(this.pos++,!0),h=s*this.width*4+2*l*4,a=c>>4,d=15&c,_=this.palette[a];if(this.data[h]=_.blue,this.data[h+1]=_.green,this.data[h+2]=_.red,this.data[h+3]=255,2*l+1>=this.width)break;_=this.palette[d],this.data[h+4]=_.blue,this.data[h+4+1]=_.green,this.data[h+4+2]=_.red,this.data[h+4+3]=255}t!==0&&(this.pos+=4-t)}},jl.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,s=0;s<this.width;s++){var l=this.datav.getUint8(this.pos++,!0),c=r*this.width*4+4*s;if(l<this.palette.length){var h=this.palette[l];this.data[c]=h.red,this.data[c+1]=h.green,this.data[c+2]=h.blue,this.data[c+3]=255}else this.data[c]=255,this.data[c+1]=255,this.data[c+2]=255,this.data[c+3]=255}e!==0&&(this.pos+=4-e)}},jl.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,l=0;l<this.width;l++){var c=this.datav.getUint16(this.pos,!0);this.pos+=2;var h=(c&t)/t*255|0,a=(c>>5&t)/t*255|0,d=(c>>10&t)/t*255|0,_=c>>15?255:0,p=s*this.width*4+4*l;this.data[p]=d,this.data[p+1]=a,this.data[p+2]=h,this.data[p+3]=_}this.pos+=e}},jl.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),s=this.height-1;s>=0;s--){for(var l=this.bottom_up?s:this.height-1-s,c=0;c<this.width;c++){var h=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(h&t)/t*255|0,d=(h>>5&r)/r*255|0,_=(h>>11)/t*255|0,p=l*this.width*4+4*c;this.data[p]=_,this.data[p+1]=d,this.data[p+2]=a,this.data[p+3]=255}this.pos+=e}},jl.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var s=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),h=t*this.width*4+4*r;this.data[h]=c,this.data[h+1]=l,this.data[h+2]=s,this.data[h+3]=255}this.pos+=this.width%4}},jl.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var s=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),h=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*r;this.data[a]=c,this.data[a+1]=l,this.data[a+2]=s,this.data[a+3]=h}},jl.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,s,l){var c=new jl(t,!1),h=c.width,a=c.height,d={data:c.getData(),width:h,height:a},_=new Hm(100).encode(d,100);return e.processJPEG.call(this,_,r,s,l)}}(Nn.API),Ny.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,s,l){var c=new Ny(t),h=c.width,a=c.height,d={data:c.getData(),width:h,height:a},_=new Hm(100).encode(d,100);return e.processJPEG.call(this,_,r,s,l)}}(Nn.API),Nn.API.processRGBA=function(e,t,r){for(var s=e.data,l=s.length,c=new Uint8Array(l/4*3),h=new Uint8Array(l/4),a=0,d=0,_=0;_<l;_+=4){var p=s[_],E=s[_+1],w=s[_+2],x=s[_+3];c[a++]=p,c[a++]=E,c[a++]=w,h[d++]=x}var Q=this.__addimage__.arrayBufferToBinaryString(c);return{alpha:this.__addimage__.arrayBufferToBinaryString(h),data:Q,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Nn.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Dh=Nn.API,op=Dh.getCharWidthsArray=function(e,t){var r,s,l=(t=t||{}).font||this.internal.getFont(),c=t.fontSize||this.internal.getFontSize(),h=t.charSpace||this.internal.getCharSpace(),a=t.widths?t.widths:l.metadata.Unicode.widths,d=a.fof?a.fof:1,_=t.kerning?t.kerning:l.metadata.Unicode.kerning,p=_.fof?_.fof:1,E=t.doKerning!==!1,w=0,x=e.length,Q=0,P=a[0]||d,R=[];for(r=0;r<x;r++)s=e.charCodeAt(r),typeof l.metadata.widthOfString=="function"?R.push((l.metadata.widthOfGlyph(l.metadata.characterToGlyph(s))+h*(1e3/c)||0)/1e3):(w=E&&qi(_[s])==="object"&&!isNaN(parseInt(_[s][Q],10))?_[s][Q]/p:0,R.push((a[s]||P)/d+w)),Q=s;return R},Py=Dh.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),s=t.font||this.internal.getFont(),l=t.charSpace||this.internal.getCharSpace();return Dh.processArabic&&(e=Dh.processArabic(e)),typeof s.metadata.widthOfString=="function"?s.metadata.widthOfString(e,r,l)/r:op.apply(this,arguments).reduce(function(c,h){return c+h},0)},ky=function(e,t,r,s){for(var l=[],c=0,h=e.length,a=0;c!==h&&a+t[c]<r;)a+=t[c],c++;l.push(e.slice(0,c));var d=c;for(a=0;c!==h;)a+t[c]>s&&(l.push(e.slice(d,c)),a=0,d=c),a+=t[c],c++;return d!==c&&l.push(e.slice(d,c)),l},My=function(e,t,r){r||(r={});var s,l,c,h,a,d,_,p=[],E=[p],w=r.textIndent||0,x=0,Q=0,P=e.split(" "),R=op.apply(this,[" ",r])[0];if(d=r.lineIndent===-1?P[0].length+2:r.lineIndent||0){var k=Array(d).join(" "),O=[];P.map(function(K){(K=K.split(/\s*\n/)).length>1?O=O.concat(K.map(function(Z,$){return($&&Z.length?`
`:"")+Z})):O.push(K[0])}),P=O,d=Py.apply(this,[k,r])}for(c=0,h=P.length;c<h;c++){var G=0;if(s=P[c],d&&s[0]==`
`&&(s=s.substr(1),G=1),w+x+(Q=(l=op.apply(this,[s,r])).reduce(function(K,Z){return K+Z},0))>t||G){if(Q>t){for(a=ky.apply(this,[s,l,t-(w+x),t]),p.push(a.shift()),p=[a.pop()];a.length;)E.push([a.shift()]);Q=l.slice(s.length-(p[0]?p[0].length:0)).reduce(function(K,Z){return K+Z},0)}else p=[s];E.push(p),w=Q+d,x=R}else p.push(s),w+=x+Q,x=R}return _=d?function(K,Z){return(Z?k:"")+K.join(" ")}:function(K){return K.join(" ")},E.map(_)},Dh.splitTextToSize=function(e,t,r){var s,l=(r=r||{}).fontSize||this.internal.getFontSize(),c=function(p){if(p.widths&&p.kerning)return{widths:p.widths,kerning:p.kerning};var E=this.internal.getFont(p.fontName,p.fontStyle);return E.metadata.Unicode?{widths:E.metadata.Unicode.widths||{0:1},kerning:E.metadata.Unicode.kerning||{}}:{font:E.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,r);s=Array.isArray(e)?e:String(e).split(/\r?\n/);var h=1*this.internal.scaleFactor*t/l;c.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/l:0,c.lineIndent=r.lineIndent;var a,d,_=[];for(a=0,d=s.length;a<d;a++)_=_.concat(My.apply(this,[s[a],h,c]));return _},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},s={},l=0;l<t.length;l++)r[t[l]]="0123456789abcdef"[l],s["0123456789abcdef"[l]]=t[l];var c=function(E){return"0x"+parseInt(E,10).toString(16)},h=e.__fontmetrics__.compress=function(E){var w,x,Q,P,R=["{"];for(var k in E){if(w=E[k],isNaN(parseInt(k,10))?x="'"+k+"'":(k=parseInt(k,10),x=(x=c(k).slice(2)).slice(0,-1)+s[x.slice(-1)]),typeof w=="number")w<0?(Q=c(w).slice(3),P="-"):(Q=c(w).slice(2),P=""),Q=P+Q.slice(0,-1)+s[Q.slice(-1)];else{if(qi(w)!=="object")throw new Error("Don't know what to do with value type "+qi(w)+".");Q=h(w)}R.push(x+Q)}return R.push("}"),R.join("")},a=e.__fontmetrics__.uncompress=function(E){if(typeof E!="string")throw new Error("Invalid argument passed to uncompress.");for(var w,x,Q,P,R={},k=1,O=R,G=[],K="",Z="",$=E.length-1,fe=1;fe<$;fe+=1)(P=E[fe])=="'"?w?(Q=w.join(""),w=void 0):w=[]:w?w.push(P):P=="{"?(G.push([O,Q]),O={},Q=void 0):P=="}"?((x=G.pop())[0][x[1]]=O,Q=void 0,O=x[0]):P=="-"?k=-1:Q===void 0?r.hasOwnProperty(P)?(K+=r[P],Q=parseInt(K,16)*k,k=1,K=""):K+=P:r.hasOwnProperty(P)?(Z+=r[P],O[Q]=parseInt(Z,16)*k,k=1,Q=void 0,Z=""):Z+=P;return R},d={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},_={Unicode:{Courier:d,"Courier-Bold":d,"Courier-BoldOblique":d,"Courier-Oblique":d,Helvetica:d,"Helvetica-Bold":d,"Helvetica-BoldOblique":d,"Helvetica-Oblique":d,"Times-Roman":d,"Times-Bold":d,"Times-BoldItalic":d,"Times-Italic":d}},p={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(E){var w=E.font,x=p.Unicode[w.postScriptName];x&&(w.metadata.Unicode={},w.metadata.Unicode.widths=x.widths,w.metadata.Unicode.kerning=x.kerning);var Q=_.Unicode[w.postScriptName];Q&&(w.metadata.Unicode.encoding=Q,w.encoding=Q.codePages[0])}])}(Nn.API),function(e){var t=function(r){for(var s=r.length,l=new Uint8Array(s),c=0;c<s;c++)l[c]=r.charCodeAt(c);return l};e.API.events.push(["addFont",function(r){var s=void 0,l=r.font,c=r.instance;if(!l.isStandardFont){if(c===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+l.postScriptName+"').");if(typeof(s=c.existsFileInVFS(l.postScriptName)===!1?c.loadFile(l.postScriptName):c.getFileFromVFS(l.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+l.postScriptName+"').");(function(h,a){a=/^\x00\x01\x00\x00/.test(a)?t(a):t(Hf(a)),h.metadata=e.API.TTFFont.open(a),h.metadata.Unicode=h.metadata.Unicode||{encoding:{},kerning:{},widths:[]},h.metadata.glyIdsUsed=[0]})(l,s)}}])}(Nn),function(e){function t(){return(zn.canvg?Promise.resolve(zn.canvg):dg(()=>import("./index.es-5fa980b6.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}Nn.API.addSvgAsImage=function(r,s,l,c,h,a,d,_){if(isNaN(s)||isNaN(l))throw us.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(c)||isNaN(h))throw us.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var p=document.createElement("canvas");p.width=c,p.height=h;var E=p.getContext("2d");E.fillStyle="#fff",E.fillRect(0,0,p.width,p.height);var w={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},x=this;return t().then(function(Q){return Q.fromString(E,r,w)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(Q){return Q.render(w)}).then(function(){x.addImage(p.toDataURL("image/jpeg",1),s,l,c,h,d,_)})}}(),Nn.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var s=1;s<=this.internal.getNumberOfPages();s++)for(var l=0;l<this.internal.pages[s].length;l++)this.internal.pages[s][l]=this.internal.pages[s][l].replace(t,r);return this},Nn.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var s,l,c,h={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(h),d=[],_=0,p=0,E=0;function w(Q,P){var R,k=!1;for(R=0;R<Q.length;R+=1)Q[R]===P&&(k=!0);return k}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(h)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var x=a.length;for(E=0;E<x;E+=1)r[a[E]].value=r[a[E]].defaultValue,r[a[E]].explicitSet=!1}if(qi(e)==="object"){for(l in e)if(c=e[l],w(a,l)&&c!==void 0){if(r[l].type==="boolean"&&typeof c=="boolean")r[l].value=c;else if(r[l].type==="name"&&w(r[l].valueSet,c))r[l].value=c;else if(r[l].type==="integer"&&Number.isInteger(c))r[l].value=c;else if(r[l].type==="array"){for(_=0;_<c.length;_+=1)if(s=!0,c[_].length===1&&typeof c[_][0]=="number")d.push(String(c[_]-1));else if(c[_].length>1){for(p=0;p<c[_].length;p+=1)typeof c[_][p]!="number"&&(s=!1);s===!0&&d.push([c[_][0]-1,c[_][1]-1].join(" "))}r[l].value="["+d.join(" ")+"]"}else r[l].value=r[l].defaultValue;r[l].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var Q,P=[];for(Q in r)r[Q].explicitSet===!0&&(r[Q].type==="name"?P.push("/"+Q+" /"+r[Q].value):P.push("/"+Q+" "+r[Q].value));P.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+P.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var s='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',l=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),c=unescape(encodeURIComponent(s)),h=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),d=unescape(encodeURIComponent("</x:xmpmeta>")),_=c.length+h.length+a.length+l.length+d.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+_+" >>"),this.internal.write("stream"),this.internal.write(l+c+h+a+d),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(s,l){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:s,namespaceuri:l||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(Nn.API),function(e){var t=e.API,r=t.pdfEscape16=function(c,h){for(var a,d=h.metadata.Unicode.widths,_=["","0","00","000","0000"],p=[""],E=0,w=c.length;E<w;++E){if(a=h.metadata.characterToGlyph(c.charCodeAt(E)),h.metadata.glyIdsUsed.push(a),h.metadata.toUnicode[a]=c.charCodeAt(E),d.indexOf(a)==-1&&(d.push(a),d.push([parseInt(h.metadata.widthOfGlyph(a),10)])),a=="0")return p.join("");a=a.toString(16),p.push(_[4-a.length],a)}return p.join("")},s=function(c){var h,a,d,_,p,E,w;for(p=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,d=[],E=0,w=(a=Object.keys(c).sort(function(x,Q){return x-Q})).length;E<w;E++)h=a[E],d.length>=100&&(p+=`
`+d.length+` beginbfchar
`+d.join(`
`)+`
endbfchar`,d=[]),c[h]!==void 0&&c[h]!==null&&typeof c[h].toString=="function"&&(_=("0000"+c[h].toString(16)).slice(-4),h=("0000"+(+h).toString(16)).slice(-4),d.push("<"+h+"><"+_+">"));return d.length&&(p+=`
`+d.length+` beginbfchar
`+d.join(`
`)+`
endbfchar
`),p+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(c){(function(h){var a=h.font,d=h.out,_=h.newObject,p=h.putStream;if(a.metadata instanceof e.API.TTFFont&&a.encoding==="Identity-H"){for(var E=a.metadata.Unicode.widths,w=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),x="",Q=0;Q<w.length;Q++)x+=String.fromCharCode(w[Q]);var P=_();p({data:x,addLength1:!0,objectId:P}),d("endobj");var R=_();p({data:s(a.metadata.toUnicode),addLength1:!0,objectId:R}),d("endobj");var k=_();d("<<"),d("/Type /FontDescriptor"),d("/FontName /"+Rh(a.fontName)),d("/FontFile2 "+P+" 0 R"),d("/FontBBox "+e.API.PDFObject.convert(a.metadata.bbox)),d("/Flags "+a.metadata.flags),d("/StemV "+a.metadata.stemV),d("/ItalicAngle "+a.metadata.italicAngle),d("/Ascent "+a.metadata.ascender),d("/Descent "+a.metadata.decender),d("/CapHeight "+a.metadata.capHeight),d(">>"),d("endobj");var O=_();d("<<"),d("/Type /Font"),d("/BaseFont /"+Rh(a.fontName)),d("/FontDescriptor "+k+" 0 R"),d("/W "+e.API.PDFObject.convert(E)),d("/CIDToGIDMap /Identity"),d("/DW 1000"),d("/Subtype /CIDFontType2"),d("/CIDSystemInfo"),d("<<"),d("/Supplement 0"),d("/Registry (Adobe)"),d("/Ordering ("+a.encoding+")"),d(">>"),d(">>"),d("endobj"),a.objectNumber=_(),d("<<"),d("/Type /Font"),d("/Subtype /Type0"),d("/ToUnicode "+R+" 0 R"),d("/BaseFont /"+Rh(a.fontName)),d("/Encoding /"+a.encoding),d("/DescendantFonts ["+O+" 0 R]"),d(">>"),d("endobj"),a.isAlreadyPutted=!0}})(c)}]),t.events.push(["putFont",function(c){(function(h){var a=h.font,d=h.out,_=h.newObject,p=h.putStream;if(a.metadata instanceof e.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var E=a.metadata.rawData,w="",x=0;x<E.length;x++)w+=String.fromCharCode(E[x]);var Q=_();p({data:w,addLength1:!0,objectId:Q}),d("endobj");var P=_();p({data:s(a.metadata.toUnicode),addLength1:!0,objectId:P}),d("endobj");var R=_();d("<<"),d("/Descent "+a.metadata.decender),d("/CapHeight "+a.metadata.capHeight),d("/StemV "+a.metadata.stemV),d("/Type /FontDescriptor"),d("/FontFile2 "+Q+" 0 R"),d("/Flags 96"),d("/FontBBox "+e.API.PDFObject.convert(a.metadata.bbox)),d("/FontName /"+Rh(a.fontName)),d("/ItalicAngle "+a.metadata.italicAngle),d("/Ascent "+a.metadata.ascender),d(">>"),d("endobj"),a.objectNumber=_();for(var k=0;k<a.metadata.hmtx.widths.length;k++)a.metadata.hmtx.widths[k]=parseInt(a.metadata.hmtx.widths[k]*(1e3/a.metadata.head.unitsPerEm));d("<</Subtype/TrueType/Type/Font/ToUnicode "+P+" 0 R/BaseFont/"+Rh(a.fontName)+"/FontDescriptor "+R+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),d("endobj"),a.isAlreadyPutted=!0}})(c)}]);var l=function(c){var h,a=c.text||"",d=c.x,_=c.y,p=c.options||{},E=c.mutex||{},w=E.pdfEscape,x=E.activeFontKey,Q=E.fonts,P=x,R="",k=0,O="",G=Q[P].encoding;if(Q[P].encoding!=="Identity-H")return{text:a,x:d,y:_,options:p,mutex:E};for(O=a,P=x,Array.isArray(a)&&(O=a[0]),k=0;k<O.length;k+=1)Q[P].metadata.hasOwnProperty("cmap")&&(h=Q[P].metadata.cmap.unicode.codeMap[O[k].charCodeAt(0)]),h||O[k].charCodeAt(0)<256&&Q[P].metadata.hasOwnProperty("Unicode")?R+=O[k]:R+="";var K="";return parseInt(P.slice(1))<14||G==="WinAnsiEncoding"?K=w(R,P).split("").map(function(Z){return Z.charCodeAt(0).toString(16)}).join(""):G==="Identity-H"&&(K=r(R,Q[P])),E.isHex=!0,{text:K,x:d,y:_,options:p,mutex:E}};t.events.push(["postProcessText",function(c){var h=c.text||"",a=[],d={text:h,x:c.x,y:c.y,options:c.options,mutex:c.mutex};if(Array.isArray(h)){var _=0;for(_=0;_<h.length;_+=1)Array.isArray(h[_])&&h[_].length===3?a.push([l(Object.assign({},d,{text:h[_][0]})).text,h[_][1],h[_][2]]):a.push(l(Object.assign({},d,{text:h[_]})).text);c.text=a}else c.text=l(Object.assign({},d,{text:h})).text}])}(Nn),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,s){return t.call(this),this.internal.vFS[r]=s,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(Nn.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(s){var l,c,h,a,d,_,p,E=t,w=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],x=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],Q={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},P={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},R=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],k=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),O=!1,G=0;this.__bidiEngine__={};var K=function(ee){var ne=ee.charCodeAt(),xe=ne>>8,ve=P[xe];return ve!==void 0?E[256*ve+(255&ne)]:xe===252||xe===253?"AL":k.test(xe)?"L":xe===8?"R":"N"},Z=function(ee){for(var ne,xe=0;xe<ee.length;xe++){if((ne=K(ee.charAt(xe)))==="L")return!1;if(ne==="R")return!0}return!1},$=function(ee,ne,xe,ve){var ze,Le,Ke,Ue,rt=ne[ve];switch(rt){case"L":case"R":O=!1;break;case"N":case"AN":break;case"EN":O&&(rt="AN");break;case"AL":O=!0,rt="R";break;case"WS":rt="N";break;case"CS":ve<1||ve+1>=ne.length||(ze=xe[ve-1])!=="EN"&&ze!=="AN"||(Le=ne[ve+1])!=="EN"&&Le!=="AN"?rt="N":O&&(Le="AN"),rt=Le===ze?Le:"N";break;case"ES":rt=(ze=ve>0?xe[ve-1]:"B")==="EN"&&ve+1<ne.length&&ne[ve+1]==="EN"?"EN":"N";break;case"ET":if(ve>0&&xe[ve-1]==="EN"){rt="EN";break}if(O){rt="N";break}for(Ke=ve+1,Ue=ne.length;Ke<Ue&&ne[Ke]==="ET";)Ke++;rt=Ke<Ue&&ne[Ke]==="EN"?"EN":"N";break;case"NSM":if(h&&!a){for(Ue=ne.length,Ke=ve+1;Ke<Ue&&ne[Ke]==="NSM";)Ke++;if(Ke<Ue){var je=ee[ve],St=je>=1425&&je<=2303||je===64286;if(ze=ne[Ke],St&&(ze==="R"||ze==="AL")){rt="R";break}}}rt=ve<1||(ze=ne[ve-1])==="B"?"N":xe[ve-1];break;case"B":O=!1,l=!0,rt=G;break;case"S":c=!0,rt="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":O=!1;break;case"BN":rt="N"}return rt},fe=function(ee,ne,xe){var ve=ee.split("");return xe&&Ae(ve,xe,{hiLevel:G}),ve.reverse(),ne&&ne.reverse(),ve.join("")},Ae=function(ee,ne,xe){var ve,ze,Le,Ke,Ue,rt=-1,je=ee.length,St=0,te=[],Fe=G?x:w,Qe=[];for(O=!1,l=!1,c=!1,ze=0;ze<je;ze++)Qe[ze]=K(ee[ze]);for(Le=0;Le<je;Le++){if(Ue=St,te[Le]=$(ee,Qe,te,Le),ve=240&(St=Fe[Ue][Q[te[Le]]]),St&=15,ne[Le]=Ke=Fe[St][5],ve>0)if(ve===16){for(ze=rt;ze<Le;ze++)ne[ze]=1;rt=-1}else rt=-1;if(Fe[St][6])rt===-1&&(rt=Le);else if(rt>-1){for(ze=rt;ze<Le;ze++)ne[ze]=Ke;rt=-1}Qe[Le]==="B"&&(ne[Le]=0),xe.hiLevel|=Ke}c&&function(Ve,st,dt){for(var Bt=0;Bt<dt;Bt++)if(Ve[Bt]==="S"){st[Bt]=G;for(var Ge=Bt-1;Ge>=0&&Ve[Ge]==="WS";Ge--)st[Ge]=G}}(Qe,ne,je)},ge=function(ee,ne,xe,ve,ze){if(!(ze.hiLevel<ee)){if(ee===1&&G===1&&!l)return ne.reverse(),void(xe&&xe.reverse());for(var Le,Ke,Ue,rt,je=ne.length,St=0;St<je;){if(ve[St]>=ee){for(Ue=St+1;Ue<je&&ve[Ue]>=ee;)Ue++;for(rt=St,Ke=Ue-1;rt<Ke;rt++,Ke--)Le=ne[rt],ne[rt]=ne[Ke],ne[Ke]=Le,xe&&(Le=xe[rt],xe[rt]=xe[Ke],xe[Ke]=Le);St=Ue}St++}}},he=function(ee,ne,xe){var ve=ee.split(""),ze={hiLevel:G};return xe||(xe=[]),Ae(ve,xe,ze),function(Le,Ke,Ue){if(Ue.hiLevel!==0&&p)for(var rt,je=0;je<Le.length;je++)Ke[je]===1&&(rt=R.indexOf(Le[je]))>=0&&(Le[je]=R[rt+1])}(ve,xe,ze),ge(2,ve,ne,xe,ze),ge(1,ve,ne,xe,ze),ve.join("")};return this.__bidiEngine__.doBidiReorder=function(ee,ne,xe){if(function(ze,Le){if(Le)for(var Ke=0;Ke<ze.length;Ke++)Le[Ke]=Ke;a===void 0&&(a=Z(ze)),_===void 0&&(_=Z(ze))}(ee,ne),h||!d||_)if(h&&d&&a^_)G=a?1:0,ee=fe(ee,ne,xe);else if(!h&&d&&_)G=a?1:0,ee=he(ee,ne,xe),ee=fe(ee,ne);else if(!h||a||d||_){if(h&&!d&&a^_)ee=fe(ee,ne),a?(G=0,ee=he(ee,ne,xe)):(G=1,ee=he(ee,ne,xe),ee=fe(ee,ne));else if(h&&a&&!d&&_)G=1,ee=he(ee,ne,xe),ee=fe(ee,ne);else if(!h&&!d&&a^_){var ve=p;a?(G=1,ee=he(ee,ne,xe),G=0,p=!1,ee=he(ee,ne,xe),p=ve):(G=0,ee=he(ee,ne,xe),ee=fe(ee,ne),G=1,p=!1,ee=he(ee,ne,xe),p=ve,ee=fe(ee,ne))}}else G=0,ee=he(ee,ne,xe);else G=a?1:0,ee=he(ee,ne,xe);return ee},this.__bidiEngine__.setOptions=function(ee){ee&&(h=ee.isInputVisual,d=ee.isOutputVisual,a=ee.isInputRtl,_=ee.isOutputRtl,p=ee.isSymmetricSwapping)},this.__bidiEngine__.setOptions(s),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(s){var l=s.text,c=(s.x,s.y,s.options||{}),h=(s.mutex,c.lang,[]);if(c.isInputVisual=typeof c.isInputVisual!="boolean"||c.isInputVisual,r.setOptions(c),Object.prototype.toString.call(l)==="[object Array]"){var a=0;for(h=[],a=0;a<l.length;a+=1)Object.prototype.toString.call(l[a])==="[object Array]"?h.push([r.doBidiReorder(l[a][0]),l[a][1],l[a][2]]):h.push([r.doBidiReorder(l[a])]);s.text=h}else s.text=r.doBidiReorder(l);r.setOptions({isInputVisual:!0})}])}(Nn),Nn.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new Bu(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new vS(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new sS(this.contents),this.head=new oS(this),this.name=new hS(this),this.cmap=new g_(this),this.toUnicode={},this.hhea=new AS(this),this.maxp=new fS(this),this.hmtx=new dS(this),this.post=new cS(this),this.os2=new lS(this),this.loca=new yS(this),this.glyf=new pS(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,s,l,c;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var h,a,d,_;for(_=[],h=0,a=(d=this.bbox).length;h<a;h++)t=d[h],_.push(Math.round(t*this.scaleFactor));return _}.call(this),this.stemV=0,this.post.exists?(s=255&(l=this.post.italic_angle),32768&(r=l>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+s)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(c=this.familyClass)===1||c===2||c===3||c===4||c===5||c===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,s){var l,c,h,a;for(h=0,c=0,a=(t=""+t).length;0<=a?c<a:c>a;c=0<=a?++c:--c)l=t.charCodeAt(c),h+=this.widthOfGlyph(this.characterToGlyph(l))+s*(1e3/r)||0;return h*(r/1e3)},e.prototype.lineHeight=function(t,r){var s;return r==null&&(r=!1),s=r?this.lineGap:0,(this.ascender+s-this.decender)/1e3*t},e}();var Gl,Bu=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,s;for(s=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)s[r]=String.fromCharCode(this.readByte());return s.join("")},e.prototype.writeString=function(t){var r,s,l;for(l=[],r=0,s=t.length;0<=s?r<s:r>s;r=0<=s?++r:--r)l.push(this.writeByte(t.charCodeAt(r)));return l},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,s,l,c,h,a,d;return t=this.readByte(),r=this.readByte(),s=this.readByte(),l=this.readByte(),c=this.readByte(),h=this.readByte(),a=this.readByte(),d=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^s)+4294967296*(255^l)+16777216*(255^c)+65536*(255^h)+256*(255^a)+(255^d)+1):72057594037927940*t+281474976710656*r+1099511627776*s+4294967296*l+16777216*c+65536*h+256*a+d},e.prototype.writeLongLong=function(t){var r,s;return r=Math.floor(t/4294967296),s=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(s>>24&255),this.writeByte(s>>16&255),this.writeByte(s>>8&255),this.writeByte(255&s)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,s;for(r=[],s=0;0<=t?s<t:s>t;s=0<=t?++s:--s)r.push(this.readByte());return r},e.prototype.write=function(t){var r,s,l,c;for(c=[],s=0,l=t.length;s<l;s++)r=t[s],c.push(this.writeByte(r));return c},e}(),sS=function(){var e;function t(r){var s,l,c;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},l=0,c=this.tableCount;0<=c?l<c:l>c;l=0<=c?++l:--l)s={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[s.tag]=s}return t.prototype.encode=function(r){var s,l,c,h,a,d,_,p,E,w,x,Q,P;for(P in x=Object.keys(r).length,d=Math.log(2),E=16*Math.floor(Math.log(x)/d),h=Math.floor(E/d),p=16*x-E,(l=new Bu).writeInt(this.scalarType),l.writeShort(x),l.writeShort(E),l.writeShort(h),l.writeShort(p),c=16*x,_=l.pos+c,a=null,Q=[],r)for(w=r[P],l.writeString(P),l.writeInt(e(w)),l.writeInt(_),l.writeInt(w.length),Q=Q.concat(w),P==="head"&&(a=_),_+=w.length;_%4;)Q.push(0),_++;return l.write(Q),s=2981146554-e(l.data),l.pos=a+8,l.writeUInt32(s),l.data},e=function(r){var s,l,c,h;for(r=y_.call(r);r.length%4;)r.push(0);for(c=new Bu(r),l=0,s=0,h=r.length;s<h;s=s+=4)l+=c.readUInt32();return 4294967295&l},t}(),aS={}.hasOwnProperty,vc=function(e,t){for(var r in t)aS.call(t,r)&&(e[r]=t[r]);function s(){this.constructor=e}return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e};Gl=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var oS=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return vc(t,Gl),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var s;return(s=new Bu).writeInt(this.version),s.writeInt(this.revision),s.writeInt(this.checkSumAdjustment),s.writeInt(this.magicNumber),s.writeShort(this.flags),s.writeShort(this.unitsPerEm),s.writeLongLong(this.created),s.writeLongLong(this.modified),s.writeShort(this.xMin),s.writeShort(this.yMin),s.writeShort(this.xMax),s.writeShort(this.yMax),s.writeShort(this.macStyle),s.writeShort(this.lowestRecPPEM),s.writeShort(this.fontDirectionHint),s.writeShort(r),s.writeShort(this.glyphDataFormat),s.data},t}(),jy=function(){function e(t,r){var s,l,c,h,a,d,_,p,E,w,x,Q,P,R,k,O,G;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),E=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(d=0;d<256;++d)this.codeMap[d]=t.readByte();break;case 4:for(x=t.readUInt16(),w=x/2,t.pos+=6,c=function(){var K,Z;for(Z=[],d=K=0;0<=w?K<w:K>w;d=0<=w?++K:--K)Z.push(t.readUInt16());return Z}(),t.pos+=2,P=function(){var K,Z;for(Z=[],d=K=0;0<=w?K<w:K>w;d=0<=w?++K:--K)Z.push(t.readUInt16());return Z}(),_=function(){var K,Z;for(Z=[],d=K=0;0<=w?K<w:K>w;d=0<=w?++K:--K)Z.push(t.readUInt16());return Z}(),p=function(){var K,Z;for(Z=[],d=K=0;0<=w?K<w:K>w;d=0<=w?++K:--K)Z.push(t.readUInt16());return Z}(),l=(this.length-t.pos+this.offset)/2,a=function(){var K,Z;for(Z=[],d=K=0;0<=l?K<l:K>l;d=0<=l?++K:--K)Z.push(t.readUInt16());return Z}(),d=k=0,G=c.length;k<G;d=++k)for(R=c[d],s=O=Q=P[d];Q<=R?O<=R:O>=R;s=Q<=R?++O:--O)p[d]===0?h=s+_[d]:(h=a[p[d]/2+(s-Q)-(w-d)]||0)!==0&&(h+=_[d]),this.codeMap[s]=65535&h}t.pos=E}return e.encode=function(t,r){var s,l,c,h,a,d,_,p,E,w,x,Q,P,R,k,O,G,K,Z,$,fe,Ae,ge,he,ee,ne,xe,ve,ze,Le,Ke,Ue,rt,je,St,te,Fe,Qe,Ve,st,dt,Bt,Ge,tt,Qt,ht;switch(ve=new Bu,h=Object.keys(t).sort(function(Nt,dr){return Nt-dr}),r){case"macroman":for(P=0,R=function(){var Nt=[];for(Q=0;Q<256;++Q)Nt.push(0);return Nt}(),O={0:0},c={},ze=0,rt=h.length;ze<rt;ze++)O[Ge=t[l=h[ze]]]==null&&(O[Ge]=++P),c[l]={old:t[l],new:O[t[l]]},R[l]=O[t[l]];return ve.writeUInt16(1),ve.writeUInt16(0),ve.writeUInt32(12),ve.writeUInt16(0),ve.writeUInt16(262),ve.writeUInt16(0),ve.write(R),{charMap:c,subtable:ve.data,maxGlyphID:P+1};case"unicode":for(ne=[],E=[],G=0,O={},s={},k=_=null,Le=0,je=h.length;Le<je;Le++)O[Z=t[l=h[Le]]]==null&&(O[Z]=++G),s[l]={old:Z,new:O[Z]},a=O[Z]-l,k!=null&&a===_||(k&&E.push(k),ne.push(l),_=a),k=l;for(k&&E.push(k),E.push(65535),ne.push(65535),he=2*(ge=ne.length),Ae=2*Math.pow(Math.log(ge)/Math.LN2,2),w=Math.log(Ae/2)/Math.LN2,fe=2*ge-Ae,d=[],$=[],x=[],Q=Ke=0,St=ne.length;Ke<St;Q=++Ke){if(ee=ne[Q],p=E[Q],ee===65535){d.push(0),$.push(0);break}if(ee-(xe=s[ee].new)>=32768)for(d.push(0),$.push(2*(x.length+ge-Q)),l=Ue=ee;ee<=p?Ue<=p:Ue>=p;l=ee<=p?++Ue:--Ue)x.push(s[l].new);else d.push(xe-ee),$.push(0)}for(ve.writeUInt16(3),ve.writeUInt16(1),ve.writeUInt32(12),ve.writeUInt16(4),ve.writeUInt16(16+8*ge+2*x.length),ve.writeUInt16(0),ve.writeUInt16(he),ve.writeUInt16(Ae),ve.writeUInt16(w),ve.writeUInt16(fe),dt=0,te=E.length;dt<te;dt++)l=E[dt],ve.writeUInt16(l);for(ve.writeUInt16(0),Bt=0,Fe=ne.length;Bt<Fe;Bt++)l=ne[Bt],ve.writeUInt16(l);for(tt=0,Qe=d.length;tt<Qe;tt++)a=d[tt],ve.writeUInt16(a);for(Qt=0,Ve=$.length;Qt<Ve;Qt++)K=$[Qt],ve.writeUInt16(K);for(ht=0,st=x.length;ht<st;ht++)P=x[ht],ve.writeUInt16(P);return{charMap:s,subtable:ve.data,maxGlyphID:G+1}}},e}(),g_=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return vc(t,Gl),t.prototype.tag="cmap",t.prototype.parse=function(r){var s,l,c;for(r.pos=this.offset,this.version=r.readUInt16(),c=r.readUInt16(),this.tables=[],this.unicode=null,l=0;0<=c?l<c:l>c;l=0<=c?++l:--l)s=new jy(r,this.offset),this.tables.push(s),s.isUnicode&&this.unicode==null&&(this.unicode=s);return!0},t.encode=function(r,s){var l,c;return s==null&&(s="macroman"),l=jy.encode(r,s),(c=new Bu).writeUInt16(0),c.writeUInt16(1),l.table=c.data.concat(l.subtable),l},t}(),AS=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return vc(t,Gl),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t}(),lS=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return vc(t,Gl),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var s,l;for(l=[],s=0;s<10;++s)l.push(r.readByte());return l}(),this.charRange=function(){var s,l;for(l=[],s=0;s<4;++s)l.push(r.readInt());return l}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var s,l;for(l=[],s=0;s<2;s=++s)l.push(r.readInt());return l}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t}(),cS=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return vc(t,Gl),t.prototype.tag="post",t.prototype.parse=function(r){var s,l,c;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var h;for(l=r.readUInt16(),this.glyphNameIndex=[],h=0;0<=l?h<l:h>l;h=0<=l?++h:--h)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],c=[];r.pos<this.offset+this.length;)s=r.readByte(),c.push(this.names.push(r.readString(s)));return c;case 151552:return l=r.readUInt16(),this.offsets=r.read(l);case 196608:break;case 262144:return this.map=function(){var a,d,_;for(_=[],h=a=0,d=this.file.maxp.numGlyphs;0<=d?a<d:a>d;h=0<=d?++a:--a)_.push(r.readUInt32());return _}.call(this)}},t}(),uS=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},hS=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return vc(t,Gl),t.prototype.tag="name",t.prototype.parse=function(r){var s,l,c,h,a,d,_,p,E,w,x;for(r.pos=this.offset,r.readShort(),s=r.readShort(),d=r.readShort(),l=[],h=0;0<=s?h<s:h>s;h=0<=s?++h:--h)l.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+d+r.readShort()});for(_={},h=E=0,w=l.length;E<w;h=++E)c=l[h],r.pos=c.offset,p=r.readString(c.length),a=new uS(p,c),_[x=c.nameID]==null&&(_[x]=[]),_[c.nameID].push(a);this.strings=_,this.copyright=_[0],this.fontFamily=_[1],this.fontSubfamily=_[2],this.uniqueSubfamily=_[3],this.fontName=_[4],this.version=_[5];try{this.postscriptName=_[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=_[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=_[7],this.manufacturer=_[8],this.designer=_[9],this.description=_[10],this.vendorUrl=_[11],this.designerUrl=_[12],this.license=_[13],this.licenseUrl=_[14],this.preferredFamily=_[15],this.preferredSubfamily=_[17],this.compatibleFull=_[18],this.sampleText=_[19]},t}(),fS=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return vc(t,Gl),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t}(),dS=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return vc(t,Gl),t.prototype.tag="hmtx",t.prototype.parse=function(r){var s,l,c,h,a,d,_;for(r.pos=this.offset,this.metrics=[],s=0,d=this.file.hhea.numberOfMetrics;0<=d?s<d:s>d;s=0<=d?++s:--s)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(c=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var p,E;for(E=[],s=p=0;0<=c?p<c:p>c;s=0<=c?++p:--p)E.push(r.readInt16());return E}(),this.widths=function(){var p,E,w,x;for(x=[],p=0,E=(w=this.metrics).length;p<E;p++)h=w[p],x.push(h.advance);return x}.call(this),l=this.widths[this.widths.length-1],_=[],s=a=0;0<=c?a<c:a>c;s=0<=c?++a:--a)_.push(this.widths.push(l));return _},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t}(),y_=[].slice,pS=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return vc(t,Gl),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var s,l,c,h,a,d,_,p,E,w;return r in this.cache?this.cache[r]:(h=this.file.loca,s=this.file.contents,l=h.indexOf(r),(c=h.lengthOf(r))===0?this.cache[r]=null:(s.pos=this.offset+l,a=(d=new Bu(s.read(c))).readShort(),p=d.readShort(),w=d.readShort(),_=d.readShort(),E=d.readShort(),this.cache[r]=a===-1?new gS(d,p,w,_,E):new mS(d,a,p,w,_,E),this.cache[r]))},t.prototype.encode=function(r,s,l){var c,h,a,d,_;for(a=[],h=[],d=0,_=s.length;d<_;d++)c=r[s[d]],h.push(a.length),c&&(a=a.concat(c.encode(l)));return h.push(a.length),{table:a,offsets:h}},t}(),mS=function(){function e(t,r,s,l,c,h){this.raw=t,this.numberOfContours=r,this.xMin=s,this.yMin=l,this.xMax=c,this.yMax=h,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),gS=function(){function e(t,r,s,l,c){var h,a;for(this.raw=t,this.xMin=r,this.yMin=s,this.xMax=l,this.yMax=c,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],h=this.raw;a=h.readShort(),this.glyphOffsets.push(h.pos),this.glyphIDs.push(h.readUInt16()),32&a;)h.pos+=1&a?4:2,128&a?h.pos+=8:64&a?h.pos+=4:8&a&&(h.pos+=2)}return e.prototype.encode=function(){var t,r,s;for(r=new Bu(y_.call(this.raw.data)),t=0,s=this.glyphIDs.length;t<s;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),yS=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return vc(t,Gl),t.prototype.tag="loca",t.prototype.parse=function(r){var s,l;return r.pos=this.offset,s=this.file.head.indexToLocFormat,this.offsets=s===0?function(){var c,h;for(h=[],l=0,c=this.length;l<c;l+=2)h.push(2*r.readUInt16());return h}.call(this):function(){var c,h;for(h=[],l=0,c=this.length;l<c;l+=4)h.push(r.readUInt32());return h}.call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,s){for(var l=new Uint32Array(this.offsets.length),c=0,h=0,a=0;a<l.length;++a)if(l[a]=c,h<s.length&&s[h]==a){++h,l[a]=c;var d=this.offsets[a],_=this.offsets[a+1]-d;_>0&&(c+=_)}for(var p=new Array(4*l.length),E=0;E<l.length;++E)p[4*E+3]=255&l[E],p[4*E+2]=(65280&l[E])>>8,p[4*E+1]=(16711680&l[E])>>16,p[4*E]=(4278190080&l[E])>>24;return p},t}(),vS=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,s,l,c;for(r in l=this.font.cmap.tables[0].codeMap,t={},c=this.subset)s=c[r],t[r]=l[s];return t},e.prototype.glyphsFor=function(t){var r,s,l,c,h,a,d;for(l={},h=0,a=t.length;h<a;h++)l[c=t[h]]=this.font.glyf.glyphFor(c);for(c in r=[],l)(s=l[c])!=null&&s.compound&&r.push.apply(r,s.glyphIDs);if(r.length>0)for(c in d=this.glyphsFor(r))s=d[c],l[c]=s;return l},e.prototype.encode=function(t,r){var s,l,c,h,a,d,_,p,E,w,x,Q,P,R,k;for(l in s=g_.encode(this.generateCmap(),"unicode"),h=this.glyphsFor(t),x={0:0},k=s.charMap)x[(d=k[l]).old]=d.new;for(Q in w=s.maxGlyphID,h)Q in x||(x[Q]=w++);return p=function(O){var G,K;for(G in K={},O)K[O[G]]=G;return K}(x),E=Object.keys(p).sort(function(O,G){return O-G}),P=function(){var O,G,K;for(K=[],O=0,G=E.length;O<G;O++)a=E[O],K.push(p[a]);return K}(),c=this.font.glyf.encode(h,P,x),_=this.font.loca.encode(c.offsets,P),R={cmap:this.font.cmap.raw(),glyf:c.table,loca:_,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(R["OS/2"]=this.font.os2.raw()),this.font.directory.encode(R)},e}();Nn.API.PDFObject=function(){var e;function t(){}return e=function(r,s){return(Array(s+1).join("0")+r).slice(-s)},t.convert=function(r){var s,l,c,h;if(Array.isArray(r))return"["+function(){var a,d,_;for(_=[],a=0,d=r.length;a<d;a++)s=r[a],_.push(t.convert(s));return _}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(l in c=["<<"],r)h=r[l],c.push("/"+l+" "+t.convert(h));return c.push(">>"),c.join(`
`)}return""+r},t}();const _S=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:JF,AcroFormAppearance:yn,AcroFormButton:Qa,AcroFormCheckBox:Gf,AcroFormChoiceField:Gu,AcroFormComboBox:Wu,AcroFormEditBox:Vf,AcroFormListBox:qu,AcroFormPasswordField:qf,AcroFormPushButton:Kf,AcroFormRadioButton:Xu,AcroFormTextField:_u,GState:nd,ShadingPattern:gu,TilingPattern:Vu,default:Nn,jsPDF:Nn},Symbol.toStringTag,{value:"Module"})),wS=Bw(_S);var Lp={},bS={get exports(){return Lp},set exports(e){Lp=e}};/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 */var Ry;function xS(){return Ry||(Ry=1,function(e,t){(function(r,s){e.exports=s()})(Ol,function(){/*! *****************************************************************************
		    Copyright (c) Microsoft Corporation.

		    Permission to use, copy, modify, and/or distribute this software for any
		    purpose with or without fee is hereby granted.

		    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
		    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
		    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
		    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
		    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
		    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
		    PERFORMANCE OF THIS SOFTWARE.
		    ***************************************************************************** */var r=function(F,B){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(U,T){U.__proto__=T}||function(U,T){for(var V in T)Object.prototype.hasOwnProperty.call(T,V)&&(U[V]=T[V])},r(F,B)};function s(F,B){if(typeof B!="function"&&B!==null)throw new TypeError("Class extends value "+String(B)+" is not a constructor or null");r(F,B);function U(){this.constructor=F}F.prototype=B===null?Object.create(B):(U.prototype=B.prototype,new U)}var l=function(){return l=Object.assign||function(B){for(var U,T=1,V=arguments.length;T<V;T++){U=arguments[T];for(var re in U)Object.prototype.hasOwnProperty.call(U,re)&&(B[re]=U[re])}return B},l.apply(this,arguments)};function c(F,B,U,T){function V(re){return re instanceof U?re:new U(function(_e){_e(re)})}return new(U||(U=Promise))(function(re,_e){function Ne(mt){try{yt(T.next(mt))}catch(Ut){_e(Ut)}}function Pe(mt){try{yt(T.throw(mt))}catch(Ut){_e(Ut)}}function yt(mt){mt.done?re(mt.value):V(mt.value).then(Ne,Pe)}yt((T=T.apply(F,B||[])).next())})}function h(F,B){var U={label:0,sent:function(){if(re[0]&1)throw re[1];return re[1]},trys:[],ops:[]},T,V,re,_e;return _e={next:Ne(0),throw:Ne(1),return:Ne(2)},typeof Symbol=="function"&&(_e[Symbol.iterator]=function(){return this}),_e;function Ne(yt){return function(mt){return Pe([yt,mt])}}function Pe(yt){if(T)throw new TypeError("Generator is already executing.");for(;U;)try{if(T=1,V&&(re=yt[0]&2?V.return:yt[0]?V.throw||((re=V.return)&&re.call(V),0):V.next)&&!(re=re.call(V,yt[1])).done)return re;switch(V=0,re&&(yt=[yt[0]&2,re.value]),yt[0]){case 0:case 1:re=yt;break;case 4:return U.label++,{value:yt[1],done:!1};case 5:U.label++,V=yt[1],yt=[0];continue;case 7:yt=U.ops.pop(),U.trys.pop();continue;default:if(re=U.trys,!(re=re.length>0&&re[re.length-1])&&(yt[0]===6||yt[0]===2)){U=0;continue}if(yt[0]===3&&(!re||yt[1]>re[0]&&yt[1]<re[3])){U.label=yt[1];break}if(yt[0]===6&&U.label<re[1]){U.label=re[1],re=yt;break}if(re&&U.label<re[2]){U.label=re[2],U.ops.push(yt);break}re[2]&&U.ops.pop(),U.trys.pop();continue}yt=B.call(F,U)}catch(mt){yt=[6,mt],V=0}finally{T=re=0}if(yt[0]&5)throw yt[1];return{value:yt[0]?yt[1]:void 0,done:!0}}}function a(F,B,U){if(U||arguments.length===2)for(var T=0,V=B.length,re;T<V;T++)(re||!(T in B))&&(re||(re=Array.prototype.slice.call(B,0,T)),re[T]=B[T]);return F.concat(re||B)}for(var d=function(){function F(B,U,T,V){this.left=B,this.top=U,this.width=T,this.height=V}return F.prototype.add=function(B,U,T,V){return new F(this.left+B,this.top+U,this.width+T,this.height+V)},F.fromClientRect=function(B,U){return new F(U.left+B.windowBounds.left,U.top+B.windowBounds.top,U.width,U.height)},F.fromDOMRectList=function(B,U){var T=Array.from(U).find(function(V){return V.width!==0});return T?new F(T.left+B.windowBounds.left,T.top+B.windowBounds.top,T.width,T.height):F.EMPTY},F.EMPTY=new F(0,0,0,0),F}(),_=function(F,B){return d.fromClientRect(F,B.getBoundingClientRect())},p=function(F){var B=F.body,U=F.documentElement;if(!B||!U)throw new Error("Unable to get document size");var T=Math.max(Math.max(B.scrollWidth,U.scrollWidth),Math.max(B.offsetWidth,U.offsetWidth),Math.max(B.clientWidth,U.clientWidth)),V=Math.max(Math.max(B.scrollHeight,U.scrollHeight),Math.max(B.offsetHeight,U.offsetHeight),Math.max(B.clientHeight,U.clientHeight));return new d(0,0,T,V)},E=function(F){for(var B=[],U=0,T=F.length;U<T;){var V=F.charCodeAt(U++);if(V>=55296&&V<=56319&&U<T){var re=F.charCodeAt(U++);(re&64512)===56320?B.push(((V&1023)<<10)+(re&1023)+65536):(B.push(V),U--)}else B.push(V)}return B},w=function(){for(var F=[],B=0;B<arguments.length;B++)F[B]=arguments[B];if(String.fromCodePoint)return String.fromCodePoint.apply(String,F);var U=F.length;if(!U)return"";for(var T=[],V=-1,re="";++V<U;){var _e=F[V];_e<=65535?T.push(_e):(_e-=65536,T.push((_e>>10)+55296,_e%1024+56320)),(V+1===U||T.length>16384)&&(re+=String.fromCharCode.apply(String,T),T.length=0)}return re},x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Q=typeof Uint8Array>"u"?[]:new Uint8Array(256),P=0;P<x.length;P++)Q[x.charCodeAt(P)]=P;for(var R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",k=typeof Uint8Array>"u"?[]:new Uint8Array(256),O=0;O<R.length;O++)k[R.charCodeAt(O)]=O;for(var G=function(F){var B=F.length*.75,U=F.length,T,V=0,re,_e,Ne,Pe;F[F.length-1]==="="&&(B--,F[F.length-2]==="="&&B--);var yt=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(B):new Array(B),mt=Array.isArray(yt)?yt:new Uint8Array(yt);for(T=0;T<U;T+=4)re=k[F.charCodeAt(T)],_e=k[F.charCodeAt(T+1)],Ne=k[F.charCodeAt(T+2)],Pe=k[F.charCodeAt(T+3)],mt[V++]=re<<2|_e>>4,mt[V++]=(_e&15)<<4|Ne>>2,mt[V++]=(Ne&3)<<6|Pe&63;return yt},K=function(F){for(var B=F.length,U=[],T=0;T<B;T+=2)U.push(F[T+1]<<8|F[T]);return U},Z=function(F){for(var B=F.length,U=[],T=0;T<B;T+=4)U.push(F[T+3]<<24|F[T+2]<<16|F[T+1]<<8|F[T]);return U},$=5,fe=6+5,Ae=2,ge=fe-$,he=65536>>$,ee=1<<$,ne=ee-1,xe=1024>>$,ve=he+xe,ze=ve,Le=32,Ke=ze+Le,Ue=65536>>fe,rt=1<<ge,je=rt-1,St=function(F,B,U){return F.slice?F.slice(B,U):new Uint16Array(Array.prototype.slice.call(F,B,U))},te=function(F,B,U){return F.slice?F.slice(B,U):new Uint32Array(Array.prototype.slice.call(F,B,U))},Fe=function(F,B){var U=G(F),T=Array.isArray(U)?Z(U):new Uint32Array(U),V=Array.isArray(U)?K(U):new Uint16Array(U),re=24,_e=St(V,re/2,T[4]/2),Ne=T[5]===2?St(V,(re+T[4])/2):te(T,Math.ceil((re+T[4])/4));return new Qe(T[0],T[1],T[2],T[3],_e,Ne)},Qe=function(){function F(B,U,T,V,re,_e){this.initialValue=B,this.errorValue=U,this.highStart=T,this.highValueIndex=V,this.index=re,this.data=_e}return F.prototype.get=function(B){var U;if(B>=0){if(B<55296||B>56319&&B<=65535)return U=this.index[B>>$],U=(U<<Ae)+(B&ne),this.data[U];if(B<=65535)return U=this.index[he+(B-55296>>$)],U=(U<<Ae)+(B&ne),this.data[U];if(B<this.highStart)return U=Ke-Ue+(B>>fe),U=this.index[U],U+=B>>$&je,U=this.index[U],U=(U<<Ae)+(B&ne),this.data[U];if(B<=1114111)return this.data[this.highValueIndex]}return this.errorValue},F}(),Ve="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",st=typeof Uint8Array>"u"?[]:new Uint8Array(256),dt=0;dt<Ve.length;dt++)st[Ve.charCodeAt(dt)]=dt;var Bt="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",Ge=50,tt=1,Qt=2,ht=3,Nt=4,dr=5,Pt=7,Oe=8,pr=9,sr=10,zt=11,fr=12,Br=13,vr=14,Gr=15,rr=16,xr=17,Zr=18,pn=19,vt=20,nt=21,bt=22,Ct=23,jt=24,er=25,Vr=26,Fr=27,un=28,lr=29,Er=30,An=31,wn=32,_i=33,br=34,Cr=35,cr=36,Kr=37,hn=38,xn=39,Sn=40,ji=41,tn=42,Wi=43,hs=[9001,65288],Ln="!",nn="×",Ie="÷",Y=Fe(Bt),le=[Er,cr],Ce=[tt,Qt,ht,dr],Te=[sr,Oe],Xe=[Fr,Vr],lt=Ce.concat(Te),Ye=[hn,xn,Sn,br,Cr],qe=[Gr,Br],ut=function(F,B){B===void 0&&(B="strict");var U=[],T=[],V=[];return F.forEach(function(re,_e){var Ne=Y.get(re);if(Ne>Ge?(V.push(!0),Ne-=Ge):V.push(!1),["normal","auto","loose"].indexOf(B)!==-1&&[8208,8211,12316,12448].indexOf(re)!==-1)return T.push(_e),U.push(rr);if(Ne===Nt||Ne===zt){if(_e===0)return T.push(_e),U.push(Er);var Pe=U[_e-1];return lt.indexOf(Pe)===-1?(T.push(T[_e-1]),U.push(Pe)):(T.push(_e),U.push(Er))}if(T.push(_e),Ne===An)return U.push(B==="strict"?nt:Kr);if(Ne===tn||Ne===lr)return U.push(Er);if(Ne===Wi)return re>=131072&&re<=196605||re>=196608&&re<=262141?U.push(Kr):U.push(Er);U.push(Ne)}),[T,U,V]},Ot=function(F,B,U,T){var V=T[U];if(Array.isArray(F)?F.indexOf(V)!==-1:F===V)for(var re=U;re<=T.length;){re++;var _e=T[re];if(_e===B)return!0;if(_e!==sr)break}if(V===sr)for(var re=U;re>0;){re--;var Ne=T[re];if(Array.isArray(F)?F.indexOf(Ne)!==-1:F===Ne)for(var Pe=U;Pe<=T.length;){Pe++;var _e=T[Pe];if(_e===B)return!0;if(_e!==sr)break}if(Ne!==sr)break}return!1},nr=function(F,B){for(var U=F;U>=0;){var T=B[U];if(T===sr)U--;else return T}return 0},Ht=function(F,B,U,T,V){if(U[T]===0)return nn;var re=T-1;if(Array.isArray(V)&&V[re]===!0)return nn;var _e=re-1,Ne=re+1,Pe=B[re],yt=_e>=0?B[_e]:0,mt=B[Ne];if(Pe===Qt&&mt===ht)return nn;if(Ce.indexOf(Pe)!==-1)return Ln;if(Ce.indexOf(mt)!==-1||Te.indexOf(mt)!==-1)return nn;if(nr(re,B)===Oe)return Ie;if(Y.get(F[re])===zt||(Pe===wn||Pe===_i)&&Y.get(F[Ne])===zt||Pe===Pt||mt===Pt||Pe===pr||[sr,Br,Gr].indexOf(Pe)===-1&&mt===pr||[xr,Zr,pn,jt,un].indexOf(mt)!==-1||nr(re,B)===bt||Ot(Ct,bt,re,B)||Ot([xr,Zr],nt,re,B)||Ot(fr,fr,re,B))return nn;if(Pe===sr)return Ie;if(Pe===Ct||mt===Ct)return nn;if(mt===rr||Pe===rr)return Ie;if([Br,Gr,nt].indexOf(mt)!==-1||Pe===vr||yt===cr&&qe.indexOf(Pe)!==-1||Pe===un&&mt===cr||mt===vt||le.indexOf(mt)!==-1&&Pe===er||le.indexOf(Pe)!==-1&&mt===er||Pe===Fr&&[Kr,wn,_i].indexOf(mt)!==-1||[Kr,wn,_i].indexOf(Pe)!==-1&&mt===Vr||le.indexOf(Pe)!==-1&&Xe.indexOf(mt)!==-1||Xe.indexOf(Pe)!==-1&&le.indexOf(mt)!==-1||[Fr,Vr].indexOf(Pe)!==-1&&(mt===er||[bt,Gr].indexOf(mt)!==-1&&B[Ne+1]===er)||[bt,Gr].indexOf(Pe)!==-1&&mt===er||Pe===er&&[er,un,jt].indexOf(mt)!==-1)return nn;if([er,un,jt,xr,Zr].indexOf(mt)!==-1)for(var Ut=re;Ut>=0;){var tr=B[Ut];if(tr===er)return nn;if([un,jt].indexOf(tr)!==-1)Ut--;else break}if([Fr,Vr].indexOf(mt)!==-1)for(var Ut=[xr,Zr].indexOf(Pe)!==-1?_e:re;Ut>=0;){var tr=B[Ut];if(tr===er)return nn;if([un,jt].indexOf(tr)!==-1)Ut--;else break}if(hn===Pe&&[hn,xn,br,Cr].indexOf(mt)!==-1||[xn,br].indexOf(Pe)!==-1&&[xn,Sn].indexOf(mt)!==-1||[Sn,Cr].indexOf(Pe)!==-1&&mt===Sn||Ye.indexOf(Pe)!==-1&&[vt,Vr].indexOf(mt)!==-1||Ye.indexOf(mt)!==-1&&Pe===Fr||le.indexOf(Pe)!==-1&&le.indexOf(mt)!==-1||Pe===jt&&le.indexOf(mt)!==-1||le.concat(er).indexOf(Pe)!==-1&&mt===bt&&hs.indexOf(F[Ne])===-1||le.concat(er).indexOf(mt)!==-1&&Pe===Zr)return nn;if(Pe===ji&&mt===ji){for(var an=U[re],Qr=1;an>0&&(an--,B[an]===ji);)Qr++;if(Qr%2!==0)return nn}return Pe===wn&&mt===_i?nn:Ie},jr=function(F,B){B||(B={lineBreak:"normal",wordBreak:"normal"});var U=ut(F,B.lineBreak),T=U[0],V=U[1],re=U[2];(B.wordBreak==="break-all"||B.wordBreak==="break-word")&&(V=V.map(function(Ne){return[er,Er,tn].indexOf(Ne)!==-1?Kr:Ne}));var _e=B.wordBreak==="keep-all"?re.map(function(Ne,Pe){return Ne&&F[Pe]>=19968&&F[Pe]<=40959}):void 0;return[T,V,_e]},zr=function(){function F(B,U,T,V){this.codePoints=B,this.required=U===Ln,this.start=T,this.end=V}return F.prototype.slice=function(){return w.apply(void 0,this.codePoints.slice(this.start,this.end))},F}(),Ir=function(F,B){var U=E(F),T=jr(U,B),V=T[0],re=T[1],_e=T[2],Ne=U.length,Pe=0,yt=0;return{next:function(){if(yt>=Ne)return{done:!0,value:null};for(var mt=nn;yt<Ne&&(mt=Ht(U,re,V,++yt,_e))===nn;);if(mt!==nn||yt===Ne){var Ut=new zr(U,mt,Pe,yt);return Pe=yt,{value:Ut,done:!1}}return{done:!0,value:null}}}},ln=1<<0,dn=1<<1,In=1<<2,mn=1<<3,Bn=10,Pn=47,Vn=92,Ti=9,oi=32,wi=34,Qs=61,bi=35,Yn=36,Ya=37,Ks=39,Gs=40,ia=41,gs=95,Ri=45,Xi=33,vo=60,nA=62,EA=64,sa=91,bs=93,xs=61,$a=123,aa=63,Mo=125,ka=124,Do=126,oa=128,qs=65533,ii=42,Bs=43,ys=44,iA=58,sA=59,Cn=46,GA=0,pl=8,Ma=11,_o=14,aA=31,wo=127,gt=-1,Mn=48,Ds=97,Oi=101,Ps=102,ya=117,eo=122,Cs=65,Aa=69,to=70,va=85,qA=90,ts=function(F){return F>=Mn&&F<=57},FA=function(F){return F>=55296&&F<=57343},ro=function(F){return ts(F)||F>=Cs&&F<=to||F>=Ds&&F<=Ps},no=function(F){return F>=Ds&&F<=eo},io=function(F){return F>=Cs&&F<=qA},ql=function(F){return no(F)||io(F)},No=function(F){return F>=oa},vs=function(F){return F===Bn||F===Ti||F===oi},oA=function(F){return ql(F)||No(F)||F===gs},AA=function(F){return oA(F)||ts(F)||F===Ri},_c=function(F){return F>=GA&&F<=pl||F===Ma||F>=_o&&F<=aA||F===wo},_a=function(F,B){return F!==Vn?!1:B!==Bn},WA=function(F,B,U){return F===Ri?oA(B)||_a(B,U):oA(F)?!0:!!(F===Vn&&_a(F,B))},SA=function(F,B,U){return F===Bs||F===Ri?ts(B)?!0:B===Cn&&ts(U):ts(F===Cn?B:F)},IA=function(F){var B=0,U=1;(F[B]===Bs||F[B]===Ri)&&(F[B]===Ri&&(U=-1),B++);for(var T=[];ts(F[B]);)T.push(F[B++]);var V=T.length?parseInt(w.apply(void 0,T),10):0;F[B]===Cn&&B++;for(var re=[];ts(F[B]);)re.push(F[B++]);var _e=re.length,Ne=_e?parseInt(w.apply(void 0,re),10):0;(F[B]===Aa||F[B]===Oi)&&B++;var Pe=1;(F[B]===Bs||F[B]===Ri)&&(F[B]===Ri&&(Pe=-1),B++);for(var yt=[];ts(F[B]);)yt.push(F[B++]);var mt=yt.length?parseInt(w.apply(void 0,yt),10):0;return U*(V+Ne*Math.pow(10,-_e))*Math.pow(10,Pe*mt)},TA={type:2},lA={type:3},UA={type:4},bo={type:13},ml={type:8},Wl={type:21},jo={type:9},wa={type:10},XA={type:11},ba={type:12},xi={type:14},N={type:23},oe={type:1},ke={type:25},et={type:24},_t={type:26},Jt={type:27},_r={type:28},en={type:29},En={type:31},Dn={type:32},Kn=function(){function F(){this._value=[]}return F.prototype.write=function(B){this._value=this._value.concat(E(B))},F.prototype.read=function(){for(var B=[],U=this.consumeToken();U!==Dn;)B.push(U),U=this.consumeToken();return B},F.prototype.consumeToken=function(){var B=this.consumeCodePoint();switch(B){case wi:return this.consumeStringToken(wi);case bi:var U=this.peekCodePoint(0),T=this.peekCodePoint(1),V=this.peekCodePoint(2);if(AA(U)||_a(T,V)){var re=WA(U,T,V)?dn:ln,_e=this.consumeName();return{type:5,value:_e,flags:re}}break;case Yn:if(this.peekCodePoint(0)===Qs)return this.consumeCodePoint(),bo;break;case Ks:return this.consumeStringToken(Ks);case Gs:return TA;case ia:return lA;case ii:if(this.peekCodePoint(0)===Qs)return this.consumeCodePoint(),xi;break;case Bs:if(SA(B,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(B),this.consumeNumericToken();break;case ys:return UA;case Ri:var Ne=B,Pe=this.peekCodePoint(0),yt=this.peekCodePoint(1);if(SA(Ne,Pe,yt))return this.reconsumeCodePoint(B),this.consumeNumericToken();if(WA(Ne,Pe,yt))return this.reconsumeCodePoint(B),this.consumeIdentLikeToken();if(Pe===Ri&&yt===nA)return this.consumeCodePoint(),this.consumeCodePoint(),et;break;case Cn:if(SA(B,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(B),this.consumeNumericToken();break;case Pn:if(this.peekCodePoint(0)===ii)for(this.consumeCodePoint();;){var mt=this.consumeCodePoint();if(mt===ii&&(mt=this.consumeCodePoint(),mt===Pn))return this.consumeToken();if(mt===gt)return this.consumeToken()}break;case iA:return _t;case sA:return Jt;case vo:if(this.peekCodePoint(0)===Xi&&this.peekCodePoint(1)===Ri&&this.peekCodePoint(2)===Ri)return this.consumeCodePoint(),this.consumeCodePoint(),ke;break;case EA:var Ut=this.peekCodePoint(0),tr=this.peekCodePoint(1),an=this.peekCodePoint(2);if(WA(Ut,tr,an)){var _e=this.consumeName();return{type:7,value:_e}}break;case sa:return _r;case Vn:if(_a(B,this.peekCodePoint(0)))return this.reconsumeCodePoint(B),this.consumeIdentLikeToken();break;case bs:return en;case xs:if(this.peekCodePoint(0)===Qs)return this.consumeCodePoint(),ml;break;case $a:return XA;case Mo:return ba;case ya:case va:var Qr=this.peekCodePoint(0),Jr=this.peekCodePoint(1);return Qr===Bs&&(ro(Jr)||Jr===aa)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(B),this.consumeIdentLikeToken();case ka:if(this.peekCodePoint(0)===Qs)return this.consumeCodePoint(),jo;if(this.peekCodePoint(0)===ka)return this.consumeCodePoint(),Wl;break;case Do:if(this.peekCodePoint(0)===Qs)return this.consumeCodePoint(),wa;break;case gt:return Dn}return vs(B)?(this.consumeWhiteSpace(),En):ts(B)?(this.reconsumeCodePoint(B),this.consumeNumericToken()):oA(B)?(this.reconsumeCodePoint(B),this.consumeIdentLikeToken()):{type:6,value:w(B)}},F.prototype.consumeCodePoint=function(){var B=this._value.shift();return typeof B>"u"?-1:B},F.prototype.reconsumeCodePoint=function(B){this._value.unshift(B)},F.prototype.peekCodePoint=function(B){return B>=this._value.length?-1:this._value[B]},F.prototype.consumeUnicodeRangeToken=function(){for(var B=[],U=this.consumeCodePoint();ro(U)&&B.length<6;)B.push(U),U=this.consumeCodePoint();for(var T=!1;U===aa&&B.length<6;)B.push(U),U=this.consumeCodePoint(),T=!0;if(T){var V=parseInt(w.apply(void 0,B.map(function(Pe){return Pe===aa?Mn:Pe})),16),re=parseInt(w.apply(void 0,B.map(function(Pe){return Pe===aa?to:Pe})),16);return{type:30,start:V,end:re}}var _e=parseInt(w.apply(void 0,B),16);if(this.peekCodePoint(0)===Ri&&ro(this.peekCodePoint(1))){this.consumeCodePoint(),U=this.consumeCodePoint();for(var Ne=[];ro(U)&&Ne.length<6;)Ne.push(U),U=this.consumeCodePoint();var re=parseInt(w.apply(void 0,Ne),16);return{type:30,start:_e,end:re}}else return{type:30,start:_e,end:_e}},F.prototype.consumeIdentLikeToken=function(){var B=this.consumeName();return B.toLowerCase()==="url"&&this.peekCodePoint(0)===Gs?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===Gs?(this.consumeCodePoint(),{type:19,value:B}):{type:20,value:B}},F.prototype.consumeUrlToken=function(){var B=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===gt)return{type:22,value:""};var U=this.peekCodePoint(0);if(U===Ks||U===wi){var T=this.consumeStringToken(this.consumeCodePoint());return T.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===gt||this.peekCodePoint(0)===ia)?(this.consumeCodePoint(),{type:22,value:T.value}):(this.consumeBadUrlRemnants(),N)}for(;;){var V=this.consumeCodePoint();if(V===gt||V===ia)return{type:22,value:w.apply(void 0,B)};if(vs(V))return this.consumeWhiteSpace(),this.peekCodePoint(0)===gt||this.peekCodePoint(0)===ia?(this.consumeCodePoint(),{type:22,value:w.apply(void 0,B)}):(this.consumeBadUrlRemnants(),N);if(V===wi||V===Ks||V===Gs||_c(V))return this.consumeBadUrlRemnants(),N;if(V===Vn)if(_a(V,this.peekCodePoint(0)))B.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),N;else B.push(V)}},F.prototype.consumeWhiteSpace=function(){for(;vs(this.peekCodePoint(0));)this.consumeCodePoint()},F.prototype.consumeBadUrlRemnants=function(){for(;;){var B=this.consumeCodePoint();if(B===ia||B===gt)return;_a(B,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},F.prototype.consumeStringSlice=function(B){for(var U=5e4,T="";B>0;){var V=Math.min(U,B);T+=w.apply(void 0,this._value.splice(0,V)),B-=V}return this._value.shift(),T},F.prototype.consumeStringToken=function(B){var U="",T=0;do{var V=this._value[T];if(V===gt||V===void 0||V===B)return U+=this.consumeStringSlice(T),{type:0,value:U};if(V===Bn)return this._value.splice(0,T),oe;if(V===Vn){var re=this._value[T+1];re!==gt&&re!==void 0&&(re===Bn?(U+=this.consumeStringSlice(T),T=-1,this._value.shift()):_a(V,re)&&(U+=this.consumeStringSlice(T),U+=w(this.consumeEscapedCodePoint()),T=-1))}T++}while(!0)},F.prototype.consumeNumber=function(){var B=[],U=In,T=this.peekCodePoint(0);for((T===Bs||T===Ri)&&B.push(this.consumeCodePoint());ts(this.peekCodePoint(0));)B.push(this.consumeCodePoint());T=this.peekCodePoint(0);var V=this.peekCodePoint(1);if(T===Cn&&ts(V))for(B.push(this.consumeCodePoint(),this.consumeCodePoint()),U=mn;ts(this.peekCodePoint(0));)B.push(this.consumeCodePoint());T=this.peekCodePoint(0),V=this.peekCodePoint(1);var re=this.peekCodePoint(2);if((T===Aa||T===Oi)&&((V===Bs||V===Ri)&&ts(re)||ts(V)))for(B.push(this.consumeCodePoint(),this.consumeCodePoint()),U=mn;ts(this.peekCodePoint(0));)B.push(this.consumeCodePoint());return[IA(B),U]},F.prototype.consumeNumericToken=function(){var B=this.consumeNumber(),U=B[0],T=B[1],V=this.peekCodePoint(0),re=this.peekCodePoint(1),_e=this.peekCodePoint(2);if(WA(V,re,_e)){var Ne=this.consumeName();return{type:15,number:U,flags:T,unit:Ne}}return V===Ya?(this.consumeCodePoint(),{type:16,number:U,flags:T}):{type:17,number:U,flags:T}},F.prototype.consumeEscapedCodePoint=function(){var B=this.consumeCodePoint();if(ro(B)){for(var U=w(B);ro(this.peekCodePoint(0))&&U.length<6;)U+=w(this.consumeCodePoint());vs(this.peekCodePoint(0))&&this.consumeCodePoint();var T=parseInt(U,16);return T===0||FA(T)||T>1114111?qs:T}return B===gt?qs:B},F.prototype.consumeName=function(){for(var B="";;){var U=this.consumeCodePoint();if(AA(U))B+=w(U);else if(_a(U,this.peekCodePoint(0)))B+=w(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(U),B}},F}(),Wn=function(){function F(B){this._tokens=B}return F.create=function(B){var U=new Kn;return U.write(B),new F(U.read())},F.parseValue=function(B){return F.create(B).parseComponentValue()},F.parseValues=function(B){return F.create(B).parseComponentValues()},F.prototype.parseComponentValue=function(){for(var B=this.consumeToken();B.type===31;)B=this.consumeToken();if(B.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(B);var U=this.consumeComponentValue();do B=this.consumeToken();while(B.type===31);if(B.type===32)return U;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},F.prototype.parseComponentValues=function(){for(var B=[];;){var U=this.consumeComponentValue();if(U.type===32)return B;B.push(U),B.push()}},F.prototype.consumeComponentValue=function(){var B=this.consumeToken();switch(B.type){case 11:case 28:case 2:return this.consumeSimpleBlock(B.type);case 19:return this.consumeFunction(B)}return B},F.prototype.consumeSimpleBlock=function(B){for(var U={type:B,values:[]},T=this.consumeToken();;){if(T.type===32||gl(T,B))return U;this.reconsumeToken(T),U.values.push(this.consumeComponentValue()),T=this.consumeToken()}},F.prototype.consumeFunction=function(B){for(var U={name:B.value,values:[],type:18};;){var T=this.consumeToken();if(T.type===32||T.type===3)return U;this.reconsumeToken(T),U.values.push(this.consumeComponentValue())}},F.prototype.consumeToken=function(){var B=this._tokens.shift();return typeof B>"u"?Dn:B},F.prototype.reconsumeToken=function(B){this._tokens.unshift(B)},F}(),pi=function(F){return F.type===15},mi=function(F){return F.type===17},Tn=function(F){return F.type===20},Es=function(F){return F.type===0},rs=function(F,B){return Tn(F)&&F.value===B},Ws=function(F){return F.type!==31},ns=function(F){return F.type!==31&&F.type!==4},Si=function(F){var B=[],U=[];return F.forEach(function(T){if(T.type===4){if(U.length===0)throw new Error("Error parsing function args, zero tokens for arg");B.push(U),U=[];return}T.type!==31&&U.push(T)}),U.length&&B.push(U),B},gl=function(F,B){return B===11&&F.type===12||B===28&&F.type===29?!0:B===2&&F.type===3},la=function(F){return F.type===17||F.type===15},ki=function(F){return F.type===16||la(F)},xa=function(F){return F.length>1?[F[0],F[1]]:[F[0]]},Mi={type:17,number:0,flags:In},Da={type:16,number:50,flags:In},Ba={type:16,number:100,flags:In},is=function(F,B,U){var T=F[0],V=F[1];return[hi(T,B),hi(typeof V<"u"?V:T,U)]},hi=function(F,B){if(F.type===16)return F.number/100*B;if(pi(F))switch(F.unit){case"rem":case"em":return 16*F.number;case"px":default:return F.number}return F.number},cA="deg",so="grad",uA="rad",Fs="turn",xo={name:"angle",parse:function(F,B){if(B.type===15)switch(B.unit){case cA:return Math.PI*B.number/180;case so:return Math.PI/200*B.number;case uA:return B.number;case Fs:return Math.PI*2*B.number}throw new Error("Unsupported angle type")}},ao=function(F){return F.type===15&&(F.unit===cA||F.unit===so||F.unit===uA||F.unit===Fs)},Ro=function(F){var B=F.filter(Tn).map(function(U){return U.value}).join(" ");switch(B){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Mi,Mi];case"to top":case"bottom":return zi(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Mi,Ba];case"to right":case"left":return zi(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[Ba,Ba];case"to bottom":case"top":return zi(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[Ba,Mi];case"to left":case"right":return zi(270)}return 0},zi=function(F){return Math.PI*F/180},Ns={name:"color",parse:function(F,B){if(B.type===18){var U=as[B.name];if(typeof U>"u")throw new Error('Attempting to parse an unsupported color function "'+B.name+'"');return U(F,B.values)}if(B.type===5){if(B.value.length===3){var T=B.value.substring(0,1),V=B.value.substring(1,2),re=B.value.substring(2,3);return js(parseInt(T+T,16),parseInt(V+V,16),parseInt(re+re,16),1)}if(B.value.length===4){var T=B.value.substring(0,1),V=B.value.substring(1,2),re=B.value.substring(2,3),_e=B.value.substring(3,4);return js(parseInt(T+T,16),parseInt(V+V,16),parseInt(re+re,16),parseInt(_e+_e,16)/255)}if(B.value.length===6){var T=B.value.substring(0,2),V=B.value.substring(2,4),re=B.value.substring(4,6);return js(parseInt(T,16),parseInt(V,16),parseInt(re,16),1)}if(B.value.length===8){var T=B.value.substring(0,2),V=B.value.substring(2,4),re=B.value.substring(4,6),_e=B.value.substring(6,8);return js(parseInt(T,16),parseInt(V,16),parseInt(re,16),parseInt(_e,16)/255)}}if(B.type===20){var Ne=gi[B.value.toUpperCase()];if(typeof Ne<"u")return Ne}return gi.TRANSPARENT}},oo=function(F){return(255&F)===0},ss=function(F){var B=255&F,U=255&F>>8,T=255&F>>16,V=255&F>>24;return B<255?"rgba("+V+","+T+","+U+","+B/255+")":"rgb("+V+","+T+","+U+")"},js=function(F,B,U,T){return(F<<24|B<<16|U<<8|Math.round(T*255)<<0)>>>0},Ss=function(F,B){if(F.type===17)return F.number;if(F.type===16){var U=B===3?1:255;return B===3?F.number/100*U:Math.round(F.number/100*U)}return 0},Ca=function(F,B){var U=B.filter(ns);if(U.length===3){var T=U.map(Ss),V=T[0],re=T[1],_e=T[2];return js(V,re,_e,1)}if(U.length===4){var Ne=U.map(Ss),V=Ne[0],re=Ne[1],_e=Ne[2],Pe=Ne[3];return js(V,re,_e,Pe)}return 0};function ca(F,B,U){return U<0&&(U+=1),U>=1&&(U-=1),U<1/6?(B-F)*U*6+F:U<1/2?B:U<2/3?(B-F)*6*(2/3-U)+F:F}var Xs=function(F,B){var U=B.filter(ns),T=U[0],V=U[1],re=U[2],_e=U[3],Ne=(T.type===17?zi(T.number):xo.parse(F,T))/(Math.PI*2),Pe=ki(V)?V.number/100:0,yt=ki(re)?re.number/100:0,mt=typeof _e<"u"&&ki(_e)?hi(_e,1):1;if(Pe===0)return js(yt*255,yt*255,yt*255,1);var Ut=yt<=.5?yt*(Pe+1):yt+Pe-yt*Pe,tr=yt*2-Ut,an=ca(tr,Ut,Ne+1/3),Qr=ca(tr,Ut,Ne),Jr=ca(tr,Ut,Ne-1/3);return js(an*255,Qr*255,Jr*255,mt)},as={hsl:Xs,hsla:Xs,rgb:Ca,rgba:Ca},ua=function(F,B){return Ns.parse(F,Wn.create(B).parseComponentValue())},gi={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},ZA={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(F,B){return B.map(function(U){if(Tn(U))switch(U.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Na={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},ja=function(F,B){var U=Ns.parse(F,B[0]),T=B[1];return T&&ki(T)?{color:U,stop:T}:{color:U,stop:null}},fs=function(F,B){var U=F[0],T=F[F.length-1];U.stop===null&&(U.stop=Mi),T.stop===null&&(T.stop=Ba);for(var V=[],re=0,_e=0;_e<F.length;_e++){var Ne=F[_e].stop;if(Ne!==null){var Pe=hi(Ne,B);Pe>re?V.push(Pe):V.push(re),re=Pe}else V.push(null)}for(var yt=null,_e=0;_e<V.length;_e++){var mt=V[_e];if(mt===null)yt===null&&(yt=_e);else if(yt!==null){for(var Ut=_e-yt,tr=V[yt-1],an=(mt-tr)/(Ut+1),Qr=1;Qr<=Ut;Qr++)V[yt+Qr-1]=an*Qr;yt=null}}return F.map(function(Jr,Xn){var gn=Jr.color;return{color:gn,stop:Math.max(Math.min(1,V[Xn]/B),0)}})},Ea=function(F,B,U){var T=B/2,V=U/2,re=hi(F[0],B)-T,_e=V-hi(F[1],U);return(Math.atan2(_e,re)+Math.PI*2)%(Math.PI*2)},Oo=function(F,B,U){var T=typeof F=="number"?F:Ea(F,B,U),V=Math.abs(B*Math.sin(T))+Math.abs(U*Math.cos(T)),re=B/2,_e=U/2,Ne=V/2,Pe=Math.sin(T-Math.PI/2)*Ne,yt=Math.cos(T-Math.PI/2)*Ne;return[V,re-yt,re+yt,_e-Pe,_e+Pe]},Rs=function(F,B){return Math.sqrt(F*F+B*B)},hA=function(F,B,U,T,V){var re=[[0,0],[0,B],[F,0],[F,B]];return re.reduce(function(_e,Ne){var Pe=Ne[0],yt=Ne[1],mt=Rs(U-Pe,T-yt);return(V?mt<_e.optimumDistance:mt>_e.optimumDistance)?{optimumCorner:Ne,optimumDistance:mt}:_e},{optimumDistance:V?1/0:-1/0,optimumCorner:null}).optimumCorner},Ao=function(F,B,U,T,V){var re=0,_e=0;switch(F.size){case 0:F.shape===0?re=_e=Math.min(Math.abs(B),Math.abs(B-T),Math.abs(U),Math.abs(U-V)):F.shape===1&&(re=Math.min(Math.abs(B),Math.abs(B-T)),_e=Math.min(Math.abs(U),Math.abs(U-V)));break;case 2:if(F.shape===0)re=_e=Math.min(Rs(B,U),Rs(B,U-V),Rs(B-T,U),Rs(B-T,U-V));else if(F.shape===1){var Ne=Math.min(Math.abs(U),Math.abs(U-V))/Math.min(Math.abs(B),Math.abs(B-T)),Pe=hA(T,V,B,U,!0),yt=Pe[0],mt=Pe[1];re=Rs(yt-B,(mt-U)/Ne),_e=Ne*re}break;case 1:F.shape===0?re=_e=Math.max(Math.abs(B),Math.abs(B-T),Math.abs(U),Math.abs(U-V)):F.shape===1&&(re=Math.max(Math.abs(B),Math.abs(B-T)),_e=Math.max(Math.abs(U),Math.abs(U-V)));break;case 3:if(F.shape===0)re=_e=Math.max(Rs(B,U),Rs(B,U-V),Rs(B-T,U),Rs(B-T,U-V));else if(F.shape===1){var Ne=Math.max(Math.abs(U),Math.abs(U-V))/Math.max(Math.abs(B),Math.abs(B-T)),Ut=hA(T,V,B,U,!1),yt=Ut[0],mt=Ut[1];re=Rs(yt-B,(mt-U)/Ne),_e=Ne*re}break}return Array.isArray(F.size)&&(re=hi(F.size[0],T),_e=F.size.length===2?hi(F.size[1],V):re),[re,_e]},zo=function(F,B){var U=zi(180),T=[];return Si(B).forEach(function(V,re){if(re===0){var _e=V[0];if(_e.type===20&&_e.value==="to"){U=Ro(V);return}else if(ao(_e)){U=xo.parse(F,_e);return}}var Ne=ja(F,V);T.push(Ne)}),{angle:U,stops:T,type:1}},Hi=function(F,B){var U=zi(180),T=[];return Si(B).forEach(function(V,re){if(re===0){var _e=V[0];if(_e.type===20&&["top","left","right","bottom"].indexOf(_e.value)!==-1){U=Ro(V);return}else if(ao(_e)){U=(xo.parse(F,_e)+zi(270))%zi(360);return}}var Ne=ja(F,V);T.push(Ne)}),{angle:U,stops:T,type:1}},kr=function(F,B){var U=zi(180),T=[],V=1,re=0,_e=3,Ne=[];return Si(B).forEach(function(Pe,yt){var mt=Pe[0];if(yt===0){if(Tn(mt)&&mt.value==="linear"){V=1;return}else if(Tn(mt)&&mt.value==="radial"){V=2;return}}if(mt.type===18){if(mt.name==="from"){var Ut=Ns.parse(F,mt.values[0]);T.push({stop:Mi,color:Ut})}else if(mt.name==="to"){var Ut=Ns.parse(F,mt.values[0]);T.push({stop:Ba,color:Ut})}else if(mt.name==="color-stop"){var tr=mt.values.filter(ns);if(tr.length===2){var Ut=Ns.parse(F,tr[1]),an=tr[0];mi(an)&&T.push({stop:{type:16,number:an.number*100,flags:an.flags},color:Ut})}}}}),V===1?{angle:(U+zi(180))%zi(360),stops:T,type:V}:{size:_e,shape:re,stops:T,position:Ne,type:V}},Ii="closest-side",Ai="farthest-side",Bi="closest-corner",Zi="farthest-corner",Sr="circle",Ra="ellipse",LA="cover",QA="contain",Xl=function(F,B){var U=0,T=3,V=[],re=[];return Si(B).forEach(function(_e,Ne){var Pe=!0;if(Ne===0){var yt=!1;Pe=_e.reduce(function(Ut,tr){if(yt)if(Tn(tr))switch(tr.value){case"center":return re.push(Da),Ut;case"top":case"left":return re.push(Mi),Ut;case"right":case"bottom":return re.push(Ba),Ut}else(ki(tr)||la(tr))&&re.push(tr);else if(Tn(tr))switch(tr.value){case Sr:return U=0,!1;case Ra:return U=1,!1;case"at":return yt=!0,!1;case Ii:return T=0,!1;case LA:case Ai:return T=1,!1;case QA:case Bi:return T=2,!1;case Zi:return T=3,!1}else if(la(tr)||ki(tr))return Array.isArray(T)||(T=[]),T.push(tr),!1;return Ut},Pe)}if(Pe){var mt=ja(F,_e);V.push(mt)}}),{size:T,shape:U,stops:V,position:re,type:2}},JA=function(F,B){var U=0,T=3,V=[],re=[];return Si(B).forEach(function(_e,Ne){var Pe=!0;if(Ne===0?Pe=_e.reduce(function(mt,Ut){if(Tn(Ut))switch(Ut.value){case"center":return re.push(Da),!1;case"top":case"left":return re.push(Mi),!1;case"right":case"bottom":return re.push(Ba),!1}else if(ki(Ut)||la(Ut))return re.push(Ut),!1;return mt},Pe):Ne===1&&(Pe=_e.reduce(function(mt,Ut){if(Tn(Ut))switch(Ut.value){case Sr:return U=0,!1;case Ra:return U=1,!1;case QA:case Ii:return T=0,!1;case Ai:return T=1,!1;case Bi:return T=2,!1;case LA:case Zi:return T=3,!1}else if(la(Ut)||ki(Ut))return Array.isArray(T)||(T=[]),T.push(Ut),!1;return mt},Pe)),Pe){var yt=ja(F,_e);V.push(yt)}}),{size:T,shape:U,stops:V,position:re,type:2}},wc=function(F){return F.type===1},Oc=function(F){return F.type===2},yl={name:"image",parse:function(F,B){if(B.type===22){var U={url:B.value,type:0};return F.cache.addImage(B.value),U}if(B.type===18){var T=YA[B.name];if(typeof T>"u")throw new Error('Attempting to parse an unsupported image function "'+B.name+'"');return T(F,B.values)}throw new Error("Unsupported image type "+B.type)}};function Zl(F){return!(F.type===20&&F.value==="none")&&(F.type!==18||!!YA[F.name])}var YA={"linear-gradient":zo,"-moz-linear-gradient":Hi,"-ms-linear-gradient":Hi,"-o-linear-gradient":Hi,"-webkit-linear-gradient":Hi,"radial-gradient":Xl,"-moz-radial-gradient":JA,"-ms-radial-gradient":JA,"-o-radial-gradient":JA,"-webkit-radial-gradient":JA,"-webkit-gradient":kr},$A={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(F,B){if(B.length===0)return[];var U=B[0];return U.type===20&&U.value==="none"?[]:B.filter(function(T){return ns(T)&&Zl(T)}).map(function(T){return yl.parse(F,T)})}},Zs={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(F,B){return B.map(function(U){if(Tn(U))switch(U.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Di={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(F,B){return Si(B).map(function(U){return U.filter(ki)}).map(xa)}},lo={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(F,B){return Si(B).map(function(U){return U.filter(Tn).map(function(T){return T.value}).join(" ")}).map(vl)}},vl=function(F){switch(F){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Oa;(function(F){F.AUTO="auto",F.CONTAIN="contain",F.COVER="cover"})(Oa||(Oa={}));var el={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(F,B){return Si(B).map(function(U){return U.filter(fA)})}},fA=function(F){return Tn(F)||ki(F)},PA=function(F){return{name:"border-"+F+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},Fa=PA("top"),Ui=PA("right"),kA=PA("bottom"),MA=PA("left"),DA=function(F){return{name:"border-radius-"+F,initialValue:"0 0",prefix:!1,type:1,parse:function(B,U){return xa(U.filter(ki))}}},zc=DA("top-left"),Hc=DA("top-right"),Vc=DA("bottom-right"),Bo=DA("bottom-left"),dA=function(F){return{name:"border-"+F+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(B,U){switch(U){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},sn=dA("top"),vn=dA("right"),tl=dA("bottom"),_l=dA("left"),Sa=function(F){return{name:"border-"+F+"-width",initialValue:"0",type:0,prefix:!1,parse:function(B,U){return pi(U)?U.number:0}}},os=Sa("top"),pA=Sa("right"),Co=Sa("bottom"),bc=Sa("left"),mA={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Ji={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(F,B){switch(B){case"rtl":return 1;case"ltr":default:return 0}}},ds={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(F,B){return B.filter(Tn).reduce(function(U,T){return U|xc(T.value)},0)}},xc=function(F){switch(F){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},ha={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(F,B){switch(B){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},g={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(F,B){return B.type===20&&B.value==="normal"?0:B.type===17||B.type===15?B.number:0}},i;(function(F){F.NORMAL="normal",F.STRICT="strict"})(i||(i={}));var u={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(F,B){switch(B){case"strict":return i.STRICT;case"normal":default:return i.NORMAL}}},m={name:"line-height",initialValue:"normal",prefix:!1,type:4},v=function(F,B){return Tn(F)&&F.value==="normal"?1.2*B:F.type===17?B*F.number:ki(F)?hi(F,B):B},S={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(F,B){return B.type===20&&B.value==="none"?null:yl.parse(F,B)}},M={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(F,B){switch(B){case"inside":return 0;case"outside":default:return 1}}},H={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(F,B){switch(B){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},q=function(F){return{name:"margin-"+F,initialValue:"0",prefix:!1,type:4}},J=q("top"),se=q("right"),pe=q("bottom"),we=q("left"),He={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(F,B){return B.filter(Tn).map(function(U){switch(U.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},Me={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(F,B){switch(B){case"break-word":return"break-word";case"normal":default:return"normal"}}},Re=function(F){return{name:"padding-"+F,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},ct=Re("top"),wt=Re("right"),It=Re("bottom"),We=Re("left"),Rt={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(F,B){switch(B){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},kt={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(F,B){switch(B){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Xt={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(F,B){return B.length===1&&rs(B[0],"none")?[]:Si(B).map(function(U){for(var T={color:gi.TRANSPARENT,offsetX:Mi,offsetY:Mi,blur:Mi},V=0,re=0;re<U.length;re++){var _e=U[re];la(_e)?(V===0?T.offsetX=_e:V===1?T.offsetY=_e:T.blur=_e,V++):T.color=Ns.parse(F,_e)}return T})}},Zt={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(F,B){switch(B){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},ur={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(F,B){if(B.type===20&&B.value==="none")return null;if(B.type===18){var U=Tr[B.name];if(typeof U>"u")throw new Error('Attempting to parse an unsupported transform function "'+B.name+'"');return U(B.values)}return null}},qt=function(F){var B=F.filter(function(U){return U.type===17}).map(function(U){return U.number});return B.length===6?B:null},Rr=function(F){var B=F.filter(function(Pe){return Pe.type===17}).map(function(Pe){return Pe.number}),U=B[0],T=B[1];B[2],B[3];var V=B[4],re=B[5];B[6],B[7],B[8],B[9],B[10],B[11];var _e=B[12],Ne=B[13];return B[14],B[15],B.length===16?[U,T,V,re,_e,Ne]:null},Tr={matrix:qt,matrix3d:Rr},qr={type:16,number:50,flags:In},kn=[qr,qr],jn={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(F,B){var U=B.filter(ki);return U.length!==2?kn:[U[0],U[1]]}},b={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(F,B){switch(B){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},L;(function(F){F.NORMAL="normal",F.BREAK_ALL="break-all",F.KEEP_ALL="keep-all"})(L||(L={}));for(var j={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(F,B){switch(B){case"break-all":return L.BREAK_ALL;case"keep-all":return L.KEEP_ALL;case"normal":default:return L.NORMAL}}},W={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(F,B){if(B.type===20)return{auto:!0,order:0};if(mi(B))return{auto:!1,order:B.number};throw new Error("Invalid z-index number parsed")}},ae={name:"time",parse:function(F,B){if(B.type===15)switch(B.unit.toLowerCase()){case"s":return 1e3*B.number;case"ms":return B.number}throw new Error("Unsupported time type")}},de={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(F,B){return mi(B)?B.number:1}},me={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},be={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(F,B){return B.filter(Tn).map(function(U){switch(U.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(U){return U!==0})}},Se={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(F,B){var U=[],T=[];return B.forEach(function(V){switch(V.type){case 20:case 0:U.push(V.value);break;case 17:U.push(V.number.toString());break;case 4:T.push(U.join(" ")),U.length=0;break}}),U.length&&T.push(U.join(" ")),T.map(function(V){return V.indexOf(" ")===-1?V:"'"+V+"'"})}},De={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},ft={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(F,B){if(mi(B))return B.number;if(Tn(B))switch(B.value){case"bold":return 700;case"normal":default:return 400}return 400}},Tt={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(F,B){return B.filter(Tn).map(function(U){return U.value})}},Ft={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(F,B){switch(B){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},pt=function(F,B){return(F&B)!==0},Ar={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(F,B){if(B.length===0)return[];var U=B[0];return U.type===20&&U.value==="none"?[]:B}},Vt={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(F,B){if(B.length===0)return null;var U=B[0];if(U.type===20&&U.value==="none")return null;for(var T=[],V=B.filter(Ws),re=0;re<V.length;re++){var _e=V[re],Ne=V[re+1];if(_e.type===20){var Pe=Ne&&mi(Ne)?Ne.number:1;T.push({counter:_e.value,increment:Pe})}}return T}},Je={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(F,B){if(B.length===0)return[];for(var U=[],T=B.filter(Ws),V=0;V<T.length;V++){var re=T[V],_e=T[V+1];if(Tn(re)&&re.value!=="none"){var Ne=_e&&mi(_e)?_e.number:0;U.push({counter:re.value,reset:Ne})}}return U}},ot={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(F,B){return B.filter(pi).map(function(U){return ae.parse(F,U)})}},Yt={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(F,B){if(B.length===0)return null;var U=B[0];if(U.type===20&&U.value==="none")return null;var T=[],V=B.filter(Es);if(V.length%2!==0)return null;for(var re=0;re<V.length;re+=2){var _e=V[re].value,Ne=V[re+1].value;T.push({open:_e,close:Ne})}return T}},ir=function(F,B,U){if(!F)return"";var T=F[Math.min(B,F.length-1)];return T?U?T.open:T.close:""},Wt={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(F,B){return B.length===1&&rs(B[0],"none")?[]:Si(B).map(function(U){for(var T={color:255,offsetX:Mi,offsetY:Mi,blur:Mi,spread:Mi,inset:!1},V=0,re=0;re<U.length;re++){var _e=U[re];rs(_e,"inset")?T.inset=!0:la(_e)?(V===0?T.offsetX=_e:V===1?T.offsetY=_e:V===2?T.blur=_e:T.spread=_e,V++):T.color=Ns.parse(F,_e)}return T})}},Dr={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(F,B){var U=[0,1,2],T=[];return B.filter(Tn).forEach(function(V){switch(V.value){case"stroke":T.push(1);break;case"fill":T.push(0);break;case"markers":T.push(2);break}}),U.forEach(function(V){T.indexOf(V)===-1&&T.push(V)}),T}},Lr={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},Fn={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(F,B){return pi(B)?B.number:0}},Nr=function(){function F(B,U){var T,V;this.animationDuration=hr(B,ot,U.animationDuration),this.backgroundClip=hr(B,ZA,U.backgroundClip),this.backgroundColor=hr(B,Na,U.backgroundColor),this.backgroundImage=hr(B,$A,U.backgroundImage),this.backgroundOrigin=hr(B,Zs,U.backgroundOrigin),this.backgroundPosition=hr(B,Di,U.backgroundPosition),this.backgroundRepeat=hr(B,lo,U.backgroundRepeat),this.backgroundSize=hr(B,el,U.backgroundSize),this.borderTopColor=hr(B,Fa,U.borderTopColor),this.borderRightColor=hr(B,Ui,U.borderRightColor),this.borderBottomColor=hr(B,kA,U.borderBottomColor),this.borderLeftColor=hr(B,MA,U.borderLeftColor),this.borderTopLeftRadius=hr(B,zc,U.borderTopLeftRadius),this.borderTopRightRadius=hr(B,Hc,U.borderTopRightRadius),this.borderBottomRightRadius=hr(B,Vc,U.borderBottomRightRadius),this.borderBottomLeftRadius=hr(B,Bo,U.borderBottomLeftRadius),this.borderTopStyle=hr(B,sn,U.borderTopStyle),this.borderRightStyle=hr(B,vn,U.borderRightStyle),this.borderBottomStyle=hr(B,tl,U.borderBottomStyle),this.borderLeftStyle=hr(B,_l,U.borderLeftStyle),this.borderTopWidth=hr(B,os,U.borderTopWidth),this.borderRightWidth=hr(B,pA,U.borderRightWidth),this.borderBottomWidth=hr(B,Co,U.borderBottomWidth),this.borderLeftWidth=hr(B,bc,U.borderLeftWidth),this.boxShadow=hr(B,Wt,U.boxShadow),this.color=hr(B,mA,U.color),this.direction=hr(B,Ji,U.direction),this.display=hr(B,ds,U.display),this.float=hr(B,ha,U.cssFloat),this.fontFamily=hr(B,Se,U.fontFamily),this.fontSize=hr(B,De,U.fontSize),this.fontStyle=hr(B,Ft,U.fontStyle),this.fontVariant=hr(B,Tt,U.fontVariant),this.fontWeight=hr(B,ft,U.fontWeight),this.letterSpacing=hr(B,g,U.letterSpacing),this.lineBreak=hr(B,u,U.lineBreak),this.lineHeight=hr(B,m,U.lineHeight),this.listStyleImage=hr(B,S,U.listStyleImage),this.listStylePosition=hr(B,M,U.listStylePosition),this.listStyleType=hr(B,H,U.listStyleType),this.marginTop=hr(B,J,U.marginTop),this.marginRight=hr(B,se,U.marginRight),this.marginBottom=hr(B,pe,U.marginBottom),this.marginLeft=hr(B,we,U.marginLeft),this.opacity=hr(B,de,U.opacity);var re=hr(B,He,U.overflow);this.overflowX=re[0],this.overflowY=re[re.length>1?1:0],this.overflowWrap=hr(B,Me,U.overflowWrap),this.paddingTop=hr(B,ct,U.paddingTop),this.paddingRight=hr(B,wt,U.paddingRight),this.paddingBottom=hr(B,It,U.paddingBottom),this.paddingLeft=hr(B,We,U.paddingLeft),this.paintOrder=hr(B,Dr,U.paintOrder),this.position=hr(B,kt,U.position),this.textAlign=hr(B,Rt,U.textAlign),this.textDecorationColor=hr(B,me,(T=U.textDecorationColor)!==null&&T!==void 0?T:U.color),this.textDecorationLine=hr(B,be,(V=U.textDecorationLine)!==null&&V!==void 0?V:U.textDecoration),this.textShadow=hr(B,Xt,U.textShadow),this.textTransform=hr(B,Zt,U.textTransform),this.transform=hr(B,ur,U.transform),this.transformOrigin=hr(B,jn,U.transformOrigin),this.visibility=hr(B,b,U.visibility),this.webkitTextStrokeColor=hr(B,Lr,U.webkitTextStrokeColor),this.webkitTextStrokeWidth=hr(B,Fn,U.webkitTextStrokeWidth),this.wordBreak=hr(B,j,U.wordBreak),this.zIndex=hr(B,W,U.zIndex)}return F.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},F.prototype.isTransparent=function(){return oo(this.backgroundColor)},F.prototype.isTransformed=function(){return this.transform!==null},F.prototype.isPositioned=function(){return this.position!==0},F.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},F.prototype.isFloating=function(){return this.float!==0},F.prototype.isInlineLevel=function(){return pt(this.display,4)||pt(this.display,33554432)||pt(this.display,268435456)||pt(this.display,536870912)||pt(this.display,67108864)||pt(this.display,134217728)},F}(),fi=function(){function F(B,U){this.content=hr(B,Ar,U.content),this.quotes=hr(B,Yt,U.quotes)}return F}(),di=function(){function F(B,U){this.counterIncrement=hr(B,Vt,U.counterIncrement),this.counterReset=hr(B,Je,U.counterReset)}return F}(),hr=function(F,B,U){var T=new Kn,V=U!==null&&typeof U<"u"?U.toString():B.initialValue;T.write(V);var re=new Wn(T.read());switch(B.type){case 2:var _e=re.parseComponentValue();return B.parse(F,Tn(_e)?_e.value:B.initialValue);case 0:return B.parse(F,re.parseComponentValue());case 1:return B.parse(F,re.parseComponentValues());case 4:return re.parseComponentValue();case 3:switch(B.format){case"angle":return xo.parse(F,re.parseComponentValue());case"color":return Ns.parse(F,re.parseComponentValue());case"image":return yl.parse(F,re.parseComponentValue());case"length":var Ne=re.parseComponentValue();return la(Ne)?Ne:Mi;case"length-percentage":var Pe=re.parseComponentValue();return ki(Pe)?Pe:Mi;case"time":return ae.parse(F,re.parseComponentValue())}break}},Hn="data-html2canvas-debug",li=function(F){var B=F.getAttribute(Hn);switch(B){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},ci=function(F,B){var U=li(F);return U===1||B===U},Un=function(){function F(B,U){if(this.context=B,this.textNodes=[],this.elements=[],this.flags=0,ci(U,3))debugger;this.styles=new Nr(B,window.getComputedStyle(U,null)),_h(U)&&(this.styles.animationDuration.some(function(T){return T>0})&&(U.style.animationDuration="0s"),this.styles.transform!==null&&(U.style.transform="none")),this.bounds=_(this.context,U),ci(U,4)&&(this.flags|=16)}return F}(),Is="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",Js="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Qi=typeof Uint8Array>"u"?[]:new Uint8Array(256),ps=0;ps<Js.length;ps++)Qi[Js.charCodeAt(ps)]=ps;for(var ti=function(F){var B=F.length*.75,U=F.length,T,V=0,re,_e,Ne,Pe;F[F.length-1]==="="&&(B--,F[F.length-2]==="="&&B--);var yt=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(B):new Array(B),mt=Array.isArray(yt)?yt:new Uint8Array(yt);for(T=0;T<U;T+=4)re=Qi[F.charCodeAt(T)],_e=Qi[F.charCodeAt(T+1)],Ne=Qi[F.charCodeAt(T+2)],Pe=Qi[F.charCodeAt(T+3)],mt[V++]=re<<2|_e>>4,mt[V++]=(_e&15)<<4|Ne>>2,mt[V++]=(Ne&3)<<6|Pe&63;return yt},As=function(F){for(var B=F.length,U=[],T=0;T<B;T+=2)U.push(F[T+1]<<8|F[T]);return U},Ts=function(F){for(var B=F.length,U=[],T=0;T<B;T+=4)U.push(F[T+3]<<24|F[T+2]<<16|F[T+1]<<8|F[T]);return U},Vi=5,Ki=6+5,Ys=2,co=Ki-Vi,Ci=65536>>Vi,Us=1<<Vi,Eo=Us-1,uo=1024>>Vi,Fo=Ci+uo,Ho=Fo,Yi=32,Kc=Ho+Yi,lh=65536>>Ki,Cu=1<<co,Gc=Cu-1,rl=function(F,B,U){return F.slice?F.slice(B,U):new Uint16Array(Array.prototype.slice.call(F,B,U))},qc=function(F,B,U){return F.slice?F.slice(B,U):new Uint32Array(Array.prototype.slice.call(F,B,U))},ho=function(F,B){var U=ti(F),T=Array.isArray(U)?Ts(U):new Uint32Array(U),V=Array.isArray(U)?As(U):new Uint16Array(U),re=24,_e=rl(V,re/2,T[4]/2),Ne=T[5]===2?rl(V,(re+T[4])/2):qc(T,Math.ceil((re+T[4])/4));return new wl(T[0],T[1],T[2],T[3],_e,Ne)},wl=function(){function F(B,U,T,V,re,_e){this.initialValue=B,this.errorValue=U,this.highStart=T,this.highValueIndex=V,this.index=re,this.data=_e}return F.prototype.get=function(B){var U;if(B>=0){if(B<55296||B>56319&&B<=65535)return U=this.index[B>>Vi],U=(U<<Ys)+(B&Eo),this.data[U];if(B<=65535)return U=this.index[Ci+(B-55296>>Vi)],U=(U<<Ys)+(B&Eo),this.data[U];if(B<this.highStart)return U=Kc-lh+(B>>Ki),U=this.index[U],U+=B>>Vi&Gc,U=this.index[U],U=(U<<Ys)+(B&Eo),this.data[U];if(B<=1114111)return this.data[this.highValueIndex]}return this.errorValue},F}(),nl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bl=typeof Uint8Array>"u"?[]:new Uint8Array(256),xl=0;xl<nl.length;xl++)bl[nl.charCodeAt(xl)]=xl;var Jl=1,NA=2,il=3,Bc=4,Yl=5,fa=7,$s=8,$l=9,So=10,Eu=11,ec=12,ch=13,Wc=14,Bl=15,Cc=function(F){for(var B=[],U=0,T=F.length;U<T;){var V=F.charCodeAt(U++);if(V>=55296&&V<=56319&&U<T){var re=F.charCodeAt(U++);(re&64512)===56320?B.push(((V&1023)<<10)+(re&1023)+65536):(B.push(V),U--)}else B.push(V)}return B},Fu=function(){for(var F=[],B=0;B<arguments.length;B++)F[B]=arguments[B];if(String.fromCodePoint)return String.fromCodePoint.apply(String,F);var U=F.length;if(!U)return"";for(var T=[],V=-1,re="";++V<U;){var _e=F[V];_e<=65535?T.push(_e):(_e-=65536,T.push((_e>>10)+55296,_e%1024+56320)),(V+1===U||T.length>16384)&&(re+=String.fromCharCode.apply(String,T),T.length=0)}return re},Ec=ho(Is),Ia="×",Cl="÷",Xc=function(F){return Ec.get(F)},uh=function(F,B,U){var T=U-2,V=B[T],re=B[U-1],_e=B[U];if(re===NA&&_e===il)return Ia;if(re===NA||re===il||re===Bc||_e===NA||_e===il||_e===Bc)return Cl;if(re===$s&&[$s,$l,Eu,ec].indexOf(_e)!==-1||(re===Eu||re===$l)&&(_e===$l||_e===So)||(re===ec||re===So)&&_e===So||_e===ch||_e===Yl||_e===fa||re===Jl)return Ia;if(re===ch&&_e===Wc){for(;V===Yl;)V=B[--T];if(V===Wc)return Ia}if(re===Bl&&_e===Bl){for(var Ne=0;V===Bl;)Ne++,V=B[--T];if(Ne%2===0)return Ia}return Cl},tc=function(F){var B=Cc(F),U=B.length,T=0,V=0,re=B.map(Xc);return{next:function(){if(T>=U)return{done:!0,value:null};for(var _e=Ia;T<U&&(_e=uh(B,re,++T))===Ia;);if(_e!==Ia||T===U){var Ne=Fu.apply(null,B.slice(V,T));return V=T,{value:Ne,done:!1}}return{done:!0,value:null}}}},rc=function(F){for(var B=tc(F),U=[],T;!(T=B.next()).done;)T.value&&U.push(T.value.slice());return U},Ta=function(F){var B=123;if(F.createRange){var U=F.createRange();if(U.getBoundingClientRect){var T=F.createElement("boundtest");T.style.height=B+"px",T.style.display="block",F.body.appendChild(T),U.selectNode(T);var V=U.getBoundingClientRect(),re=Math.round(V.height);if(F.body.removeChild(T),re===B)return!0}}return!1},jA=function(F){var B=F.createElement("boundtest");B.style.width="50px",B.style.display="block",B.style.fontSize="12px",B.style.letterSpacing="0px",B.style.wordSpacing="0px",F.body.appendChild(B);var U=F.createRange();B.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var T=B.firstChild,V=E(T.data).map(function(Pe){return w(Pe)}),re=0,_e={},Ne=V.every(function(Pe,yt){U.setStart(T,re),U.setEnd(T,re+Pe.length);var mt=U.getBoundingClientRect();re+=Pe.length;var Ut=mt.x>_e.x||mt.y>_e.y;return _e=mt,yt===0?!0:Ut});return F.body.removeChild(B),Ne},hh=function(){return typeof new Image().crossOrigin<"u"},fh=function(){return typeof new XMLHttpRequest().responseType=="string"},ef=function(F){var B=new Image,U=F.createElement("canvas"),T=U.getContext("2d");if(!T)return!1;B.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{T.drawImage(B,0,0),U.toDataURL()}catch{return!1}return!0},nc=function(F){return F[0]===0&&F[1]===255&&F[2]===0&&F[3]===255},RA=function(F){var B=F.createElement("canvas"),U=100;B.width=U,B.height=U;var T=B.getContext("2d");if(!T)return Promise.reject(!1);T.fillStyle="rgb(0, 255, 0)",T.fillRect(0,0,U,U);var V=new Image,re=B.toDataURL();V.src=re;var _e=Zc(U,U,0,0,V);return T.fillStyle="red",T.fillRect(0,0,U,U),OA(_e).then(function(Ne){T.drawImage(Ne,0,0);var Pe=T.getImageData(0,0,U,U).data;T.fillStyle="red",T.fillRect(0,0,U,U);var yt=F.createElement("div");return yt.style.backgroundImage="url("+re+")",yt.style.height=U+"px",nc(Pe)?OA(Zc(U,U,0,0,yt)):Promise.reject(!1)}).then(function(Ne){return T.drawImage(Ne,0,0),nc(T.getImageData(0,0,U,U).data)}).catch(function(){return!1})},Zc=function(F,B,U,T,V){var re="http://www.w3.org/2000/svg",_e=document.createElementNS(re,"svg"),Ne=document.createElementNS(re,"foreignObject");return _e.setAttributeNS(null,"width",F.toString()),_e.setAttributeNS(null,"height",B.toString()),Ne.setAttributeNS(null,"width","100%"),Ne.setAttributeNS(null,"height","100%"),Ne.setAttributeNS(null,"x",U.toString()),Ne.setAttributeNS(null,"y",T.toString()),Ne.setAttributeNS(null,"externalResourcesRequired","true"),_e.appendChild(Ne),Ne.appendChild(V),_e},OA=function(F){return new Promise(function(B,U){var T=new Image;T.onload=function(){return B(T)},T.onerror=U,T.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(F))})},_s={get SUPPORT_RANGE_BOUNDS(){var F=Ta(document);return Object.defineProperty(_s,"SUPPORT_RANGE_BOUNDS",{value:F}),F},get SUPPORT_WORD_BREAKING(){var F=_s.SUPPORT_RANGE_BOUNDS&&jA(document);return Object.defineProperty(_s,"SUPPORT_WORD_BREAKING",{value:F}),F},get SUPPORT_SVG_DRAWING(){var F=ef(document);return Object.defineProperty(_s,"SUPPORT_SVG_DRAWING",{value:F}),F},get SUPPORT_FOREIGNOBJECT_DRAWING(){var F=typeof Array.from=="function"&&typeof window.fetch=="function"?RA(document):Promise.resolve(!1);return Object.defineProperty(_s,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:F}),F},get SUPPORT_CORS_IMAGES(){var F=hh();return Object.defineProperty(_s,"SUPPORT_CORS_IMAGES",{value:F}),F},get SUPPORT_RESPONSE_TYPE(){var F=fh();return Object.defineProperty(_s,"SUPPORT_RESPONSE_TYPE",{value:F}),F},get SUPPORT_CORS_XHR(){var F="withCredentials"in new XMLHttpRequest;return Object.defineProperty(_s,"SUPPORT_CORS_XHR",{value:F}),F},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var F=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(_s,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:F}),F}},ic=function(){function F(B,U){this.text=B,this.bounds=U}return F}(),tf=function(F,B,U,T){var V=sl(B,U),re=[],_e=0;return V.forEach(function(Ne){if(U.textDecorationLine.length||Ne.trim().length>0)if(_s.SUPPORT_RANGE_BOUNDS){var Pe=Jc(T,_e,Ne.length).getClientRects();if(Pe.length>1){var yt=sc(Ne),mt=0;yt.forEach(function(tr){re.push(new ic(tr,d.fromDOMRectList(F,Jc(T,mt+_e,tr.length).getClientRects()))),mt+=tr.length})}else re.push(new ic(Ne,d.fromDOMRectList(F,Pe)))}else{var Ut=T.splitText(Ne.length);re.push(new ic(Ne,Fc(F,T))),T=Ut}else _s.SUPPORT_RANGE_BOUNDS||(T=T.splitText(Ne.length));_e+=Ne.length}),re},Fc=function(F,B){var U=B.ownerDocument;if(U){var T=U.createElement("html2canvaswrapper");T.appendChild(B.cloneNode(!0));var V=B.parentNode;if(V){V.replaceChild(T,B);var re=_(F,T);return T.firstChild&&V.replaceChild(T.firstChild,T),re}}return d.EMPTY},Jc=function(F,B,U){var T=F.ownerDocument;if(!T)throw new Error("Node has no owner document");var V=T.createRange();return V.setStart(F,B),V.setEnd(F,B+U),V},sc=function(F){if(_s.SUPPORT_NATIVE_TEXT_SEGMENTATION){var B=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(B.segment(F)).map(function(U){return U.segment})}return rc(F)},zA=function(F,B){if(_s.SUPPORT_NATIVE_TEXT_SEGMENTATION){var U=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(U.segment(F)).map(function(T){return T.segment})}return Yc(F,B)},sl=function(F,B){return B.letterSpacing!==0?sc(F):zA(F,B)},gA=[32,160,4961,65792,65793,4153,4241],Yc=function(F,B){for(var U=Ir(F,{lineBreak:B.lineBreak,wordBreak:B.overflowWrap==="break-word"?"break-word":B.wordBreak}),T=[],V,re=function(){if(V.value){var _e=V.value.slice(),Ne=E(_e),Pe="";Ne.forEach(function(yt){gA.indexOf(yt)===-1?Pe+=w(yt):(Pe.length&&T.push(Pe),T.push(w(yt)),Pe="")}),Pe.length&&T.push(Pe)}};!(V=U.next()).done;)re();return T},al=function(){function F(B,U,T){this.text=dh(U.data,T.textTransform),this.textBounds=tf(B,this.text,T,U)}return F}(),dh=function(F,B){switch(B){case 1:return F.toLowerCase();case 3:return F.replace(ls,ac);case 2:return F.toUpperCase();default:return F}},ls=/(^|\s|:|-|\(|\))([a-z])/g,ac=function(F,B,U){return F.length>0?B+U.toUpperCase():F},Sc=function(F){s(B,F);function B(U,T){var V=F.call(this,U,T)||this;return V.src=T.currentSrc||T.src,V.intrinsicWidth=T.naturalWidth,V.intrinsicHeight=T.naturalHeight,V.context.cache.addImage(V.src),V}return B}(Un),Su=function(F){s(B,F);function B(U,T){var V=F.call(this,U,T)||this;return V.canvas=T,V.intrinsicWidth=T.width,V.intrinsicHeight=T.height,V}return B}(Un),Iu=function(F){s(B,F);function B(U,T){var V=F.call(this,U,T)||this,re=new XMLSerializer,_e=_(U,T);return T.setAttribute("width",_e.width+"px"),T.setAttribute("height",_e.height+"px"),V.svg="data:image/svg+xml,"+encodeURIComponent(re.serializeToString(T)),V.intrinsicWidth=T.width.baseVal.value,V.intrinsicHeight=T.height.baseVal.value,V.context.cache.addImage(V.svg),V}return B}(Un),$c=function(F){s(B,F);function B(U,T){var V=F.call(this,U,T)||this;return V.value=T.value,V}return B}(Un),ph=function(F){s(B,F);function B(U,T){var V=F.call(this,U,T)||this;return V.start=T.start,V.reversed=typeof T.reversed=="boolean"&&T.reversed===!0,V}return B}(Un),hd=[{type:15,flags:0,unit:"px",number:3}],Tu=[{type:16,flags:0,number:50}],rf=function(F){return F.width>F.height?new d(F.left+(F.width-F.height)/2,F.top,F.height,F.height):F.width<F.height?new d(F.left,F.top+(F.height-F.width)/2,F.width,F.width):F},nf=function(F){var B=F.type===Lu?new Array(F.value.length+1).join("•"):F.value;return B.length===0?F.placeholder||"":B},mh="checkbox",Uu="radio",Lu="password",fd=707406591,Qu=function(F){s(B,F);function B(U,T){var V=F.call(this,U,T)||this;switch(V.type=T.type.toLowerCase(),V.checked=T.checked,V.value=nf(T),(V.type===mh||V.type===Uu)&&(V.styles.backgroundColor=3739148031,V.styles.borderTopColor=V.styles.borderRightColor=V.styles.borderBottomColor=V.styles.borderLeftColor=2779096575,V.styles.borderTopWidth=V.styles.borderRightWidth=V.styles.borderBottomWidth=V.styles.borderLeftWidth=1,V.styles.borderTopStyle=V.styles.borderRightStyle=V.styles.borderBottomStyle=V.styles.borderLeftStyle=1,V.styles.backgroundClip=[0],V.styles.backgroundOrigin=[0],V.bounds=rf(V.bounds)),V.type){case mh:V.styles.borderTopRightRadius=V.styles.borderTopLeftRadius=V.styles.borderBottomRightRadius=V.styles.borderBottomLeftRadius=hd;break;case Uu:V.styles.borderTopRightRadius=V.styles.borderTopLeftRadius=V.styles.borderBottomRightRadius=V.styles.borderBottomLeftRadius=Tu;break}return V}return B}(Un),dd=function(F){s(B,F);function B(U,T){var V=F.call(this,U,T)||this,re=T.options[T.selectedIndex||0];return V.value=re&&re.text||"",V}return B}(Un),gh=function(F){s(B,F);function B(U,T){var V=F.call(this,U,T)||this;return V.value=T.value,V}return B}(Un),yh=function(F){s(B,F);function B(U,T){var V=F.call(this,U,T)||this;V.src=T.src,V.width=parseInt(T.width,10)||0,V.height=parseInt(T.height,10)||0,V.backgroundColor=V.styles.backgroundColor;try{if(T.contentWindow&&T.contentWindow.document&&T.contentWindow.document.documentElement){V.tree=md(U,T.contentWindow.document.documentElement);var re=T.contentWindow.document.documentElement?ua(U,getComputedStyle(T.contentWindow.document.documentElement).backgroundColor):gi.TRANSPARENT,_e=T.contentWindow.document.body?ua(U,getComputedStyle(T.contentWindow.document.body).backgroundColor):gi.TRANSPARENT;V.backgroundColor=oo(re)?oo(_e)?V.styles.backgroundColor:_e:re}}catch{}return V}return B}(Un),sf=["OL","UL","MENU"],vh=function(F,B,U,T){for(var V=B.firstChild,re=void 0;V;V=re)if(re=V.nextSibling,El(V)&&V.data.trim().length>0)U.textNodes.push(new al(F,V,U.styles));else if(eu(V))if(_d(V)&&V.assignedNodes)V.assignedNodes().forEach(function(Ne){return vh(F,Ne,U,T)});else{var _e=pd(F,V);_e.styles.isVisible()&&(Kp(V,_e,T)?_e.flags|=4:Gp(_e.styles)&&(_e.flags|=2),sf.indexOf(V.tagName)!==-1&&(_e.flags|=8),U.elements.push(_e),V.slot,V.shadowRoot?vh(F,V.shadowRoot,_e,T):!bh(V)&&!af(V)&&!xh(V)&&vh(F,V,_e,T))}},pd=function(F,B){return Af(B)?new Sc(F,B):yd(B)?new Su(F,B):af(B)?new Iu(F,B):qp(B)?new $c(F,B):Wp(B)?new ph(F,B):Xp(B)?new Qu(F,B):xh(B)?new dd(F,B):bh(B)?new gh(F,B):wh(B)?new yh(F,B):new Un(F,B)},md=function(F,B){var U=pd(F,B);return U.flags|=4,vh(F,B,U,U),U},Kp=function(F,B,U){return B.styles.isPositionedWithZIndex()||B.styles.opacity<1||B.styles.isTransformed()||of(F)&&U.styles.isTransparent()},Gp=function(F){return F.isPositioned()||F.isFloating()},El=function(F){return F.nodeType===Node.TEXT_NODE},eu=function(F){return F.nodeType===Node.ELEMENT_NODE},_h=function(F){return eu(F)&&typeof F.style<"u"&&!Fl(F)},Fl=function(F){return typeof F.className=="object"},qp=function(F){return F.tagName==="LI"},Wp=function(F){return F.tagName==="OL"},Xp=function(F){return F.tagName==="INPUT"},gd=function(F){return F.tagName==="HTML"},af=function(F){return F.tagName==="svg"},of=function(F){return F.tagName==="BODY"},yd=function(F){return F.tagName==="CANVAS"},vd=function(F){return F.tagName==="VIDEO"},Af=function(F){return F.tagName==="IMG"},wh=function(F){return F.tagName==="IFRAME"},tu=function(F){return F.tagName==="STYLE"},lf=function(F){return F.tagName==="SCRIPT"},bh=function(F){return F.tagName==="TEXTAREA"},xh=function(F){return F.tagName==="SELECT"},_d=function(F){return F.tagName==="SLOT"},ru=function(F){return F.tagName.indexOf("-")>0},wd=function(){function F(){this.counters={}}return F.prototype.getCounterValue=function(B){var U=this.counters[B];return U&&U.length?U[U.length-1]:1},F.prototype.getCounterValues=function(B){var U=this.counters[B];return U||[]},F.prototype.pop=function(B){var U=this;B.forEach(function(T){return U.counters[T].pop()})},F.prototype.parse=function(B){var U=this,T=B.counterIncrement,V=B.counterReset,re=!0;T!==null&&T.forEach(function(Ne){var Pe=U.counters[Ne.counter];Pe&&Ne.increment!==0&&(re=!1,Pe.length||Pe.push(1),Pe[Math.max(0,Pe.length-1)]+=Ne.increment)});var _e=[];return re&&V.forEach(function(Ne){var Pe=U.counters[Ne.counter];_e.push(Ne.counter),Pe||(Pe=U.counters[Ne.counter]=[]),Pe.push(Ne.reset)}),_e},F}(),bd={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},xd={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},Zp={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},Jp={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},nu=function(F,B,U,T,V,re){return F<B||F>U?Pu(F,V,re.length>0):T.integers.reduce(function(_e,Ne,Pe){for(;F>=Ne;)F-=Ne,_e+=T.values[Pe];return _e},"")+re},Bd=function(F,B,U,T){var V="";do U||F--,V=T(F)+V,F/=B;while(F*B>=B);return V},Ls=function(F,B,U,T,V){var re=U-B+1;return(F<0?"-":"")+(Bd(Math.abs(F),re,T,function(_e){return w(Math.floor(_e%re)+B)})+V)},Sl=function(F,B,U){U===void 0&&(U=". ");var T=B.length;return Bd(Math.abs(F),T,!1,function(V){return B[Math.floor(V%T)]})+U},iu=1<<0,Il=1<<1,Tl=1<<2,su=1<<3,Ul=function(F,B,U,T,V,re){if(F<-9999||F>9999)return Pu(F,4,V.length>0);var _e=Math.abs(F),Ne=V;if(_e===0)return B[0]+Ne;for(var Pe=0;_e>0&&Pe<=4;Pe++){var yt=_e%10;yt===0&&pt(re,iu)&&Ne!==""?Ne=B[yt]+Ne:yt>1||yt===1&&Pe===0||yt===1&&Pe===1&&pt(re,Il)||yt===1&&Pe===1&&pt(re,Tl)&&F>100||yt===1&&Pe>1&&pt(re,su)?Ne=B[yt]+(Pe>0?U[Pe-1]:"")+Ne:yt===1&&Pe>0&&(Ne=U[Pe-1]+Ne),_e=Math.floor(_e/10)}return(F<0?T:"")+Ne},Cd="十百千萬",Ed="拾佰仟萬",cf="マイナス",uf="마이너스",Pu=function(F,B,U){var T=U?". ":"",V=U?"、":"",re=U?", ":"",_e=U?" ":"";switch(B){case 0:return"•"+_e;case 1:return"◦"+_e;case 2:return"◾"+_e;case 5:var Ne=Ls(F,48,57,!0,T);return Ne.length<4?"0"+Ne:Ne;case 4:return Sl(F,"〇一二三四五六七八九",V);case 6:return nu(F,1,3999,bd,3,T).toLowerCase();case 7:return nu(F,1,3999,bd,3,T);case 8:return Ls(F,945,969,!1,T);case 9:return Ls(F,97,122,!1,T);case 10:return Ls(F,65,90,!1,T);case 11:return Ls(F,1632,1641,!0,T);case 12:case 49:return nu(F,1,9999,xd,3,T);case 35:return nu(F,1,9999,xd,3,T).toLowerCase();case 13:return Ls(F,2534,2543,!0,T);case 14:case 30:return Ls(F,6112,6121,!0,T);case 15:return Sl(F,"子丑寅卯辰巳午未申酉戌亥",V);case 16:return Sl(F,"甲乙丙丁戊己庚辛壬癸",V);case 17:case 48:return Ul(F,"零一二三四五六七八九",Cd,"負",V,Il|Tl|su);case 47:return Ul(F,"零壹貳參肆伍陸柒捌玖",Ed,"負",V,iu|Il|Tl|su);case 42:return Ul(F,"零一二三四五六七八九",Cd,"负",V,Il|Tl|su);case 41:return Ul(F,"零壹贰叁肆伍陆柒捌玖",Ed,"负",V,iu|Il|Tl|su);case 26:return Ul(F,"〇一二三四五六七八九","十百千万",cf,V,0);case 25:return Ul(F,"零壱弐参四伍六七八九","拾百千万",cf,V,iu|Il|Tl);case 31:return Ul(F,"영일이삼사오육칠팔구","십백천만",uf,re,iu|Il|Tl);case 33:return Ul(F,"零一二三四五六七八九","十百千萬",uf,re,0);case 32:return Ul(F,"零壹貳參四五六七八九","拾百千",uf,re,iu|Il|Tl);case 18:return Ls(F,2406,2415,!0,T);case 20:return nu(F,1,19999,Jp,3,T);case 21:return Ls(F,2790,2799,!0,T);case 22:return Ls(F,2662,2671,!0,T);case 22:return nu(F,1,10999,Zp,3,T);case 23:return Sl(F,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return Sl(F,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return Ls(F,3302,3311,!0,T);case 28:return Sl(F,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",V);case 29:return Sl(F,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",V);case 34:return Ls(F,3792,3801,!0,T);case 37:return Ls(F,6160,6169,!0,T);case 38:return Ls(F,4160,4169,!0,T);case 39:return Ls(F,2918,2927,!0,T);case 40:return Ls(F,1776,1785,!0,T);case 43:return Ls(F,3046,3055,!0,T);case 44:return Ls(F,3174,3183,!0,T);case 45:return Ls(F,3664,3673,!0,T);case 46:return Ls(F,3872,3881,!0,T);case 3:default:return Ls(F,48,57,!0,T)}},au="data-html2canvas-ignore",Os=function(){function F(B,U,T){if(this.context=B,this.options=T,this.scrolledElements=[],this.referenceElement=U,this.counters=new wd,this.quoteDepth=0,!U.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(U.ownerDocument.documentElement,!1)}return F.prototype.toIFrame=function(B,U){var T=this,V=Fd(B,U);if(!V.contentWindow)return Promise.reject("Unable to find iframe window");var re=B.defaultView.pageXOffset,_e=B.defaultView.pageYOffset,Ne=V.contentWindow,Pe=Ne.document,yt=oc(V).then(function(){return c(T,void 0,void 0,function(){var mt,Ut;return h(this,function(tr){switch(tr.label){case 0:return this.scrolledElements.forEach(ou),Ne&&(Ne.scrollTo(U.left,U.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(Ne.scrollY!==U.top||Ne.scrollX!==U.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(Ne.scrollX-U.left,Ne.scrollY-U.top,0,0))),mt=this.options.onclone,Ut=this.clonedReferenceElement,typeof Ut>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:Pe.fonts&&Pe.fonts.ready?[4,Pe.fonts.ready]:[3,2];case 1:tr.sent(),tr.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,Li(Pe)]:[3,4];case 3:tr.sent(),tr.label=4;case 4:return typeof mt=="function"?[2,Promise.resolve().then(function(){return mt(Pe,Ut)}).then(function(){return V})]:[2,V]}})})});return Pe.open(),Pe.write(Id(document.doctype)+"<html></html>"),Ll(this.referenceElement.ownerDocument,re,_e),Pe.replaceChild(Pe.adoptNode(this.documentElement),Pe.documentElement),Pe.close(),yt},F.prototype.createElementClone=function(B){if(ci(B,2))debugger;if(yd(B))return this.createCanvasClone(B);if(vd(B))return this.createVideoClone(B);if(tu(B))return this.createStyleClone(B);var U=B.cloneNode(!1);return Af(U)&&(Af(B)&&B.currentSrc&&B.currentSrc!==B.src&&(U.src=B.currentSrc,U.srcset=""),U.loading==="lazy"&&(U.loading="eager")),ru(U)?this.createCustomElementClone(U):U},F.prototype.createCustomElementClone=function(B){var U=document.createElement("html2canvascustomelement");return Bh(B.style,U),U},F.prototype.createStyleClone=function(B){try{var U=B.sheet;if(U&&U.cssRules){var T=[].slice.call(U.cssRules,0).reduce(function(re,_e){return _e&&typeof _e.cssText=="string"?re+_e.cssText:re},""),V=B.cloneNode(!1);return V.textContent=T,V}}catch(re){if(this.context.logger.error("Unable to access cssRules property",re),re.name!=="SecurityError")throw re}return B.cloneNode(!1)},F.prototype.createCanvasClone=function(B){var U;if(this.options.inlineImages&&B.ownerDocument){var T=B.ownerDocument.createElement("img");try{return T.src=B.toDataURL(),T}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",B)}}var V=B.cloneNode(!1);try{V.width=B.width,V.height=B.height;var re=B.getContext("2d"),_e=V.getContext("2d");if(_e)if(!this.options.allowTaint&&re)_e.putImageData(re.getImageData(0,0,B.width,B.height),0,0);else{var Ne=(U=B.getContext("webgl2"))!==null&&U!==void 0?U:B.getContext("webgl");if(Ne){var Pe=Ne.getContextAttributes();(Pe==null?void 0:Pe.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",B)}_e.drawImage(B,0,0)}return V}catch{this.context.logger.info("Unable to clone canvas as it is tainted",B)}return V},F.prototype.createVideoClone=function(B){var U=B.ownerDocument.createElement("canvas");U.width=B.offsetWidth,U.height=B.offsetHeight;var T=U.getContext("2d");try{return T&&(T.drawImage(B,0,0,U.width,U.height),this.options.allowTaint||T.getImageData(0,0,U.width,U.height)),U}catch{this.context.logger.info("Unable to clone video as it is tainted",B)}var V=B.ownerDocument.createElement("canvas");return V.width=B.offsetWidth,V.height=B.offsetHeight,V},F.prototype.appendChildNode=function(B,U,T){(!eu(U)||!lf(U)&&!U.hasAttribute(au)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(U)))&&(!this.options.copyStyles||!eu(U)||!tu(U))&&B.appendChild(this.cloneNode(U,T))},F.prototype.cloneChildNodes=function(B,U,T){for(var V=this,re=B.shadowRoot?B.shadowRoot.firstChild:B.firstChild;re;re=re.nextSibling)if(eu(re)&&_d(re)&&typeof re.assignedNodes=="function"){var _e=re.assignedNodes();_e.length&&_e.forEach(function(Ne){return V.appendChildNode(U,Ne,T)})}else this.appendChildNode(U,re,T)},F.prototype.cloneNode=function(B,U){if(El(B))return document.createTextNode(B.data);if(!B.ownerDocument)return B.cloneNode(!1);var T=B.ownerDocument.defaultView;if(T&&eu(B)&&(_h(B)||Fl(B))){var V=this.createElementClone(B);V.style.transitionProperty="none";var re=T.getComputedStyle(B),_e=T.getComputedStyle(B,":before"),Ne=T.getComputedStyle(B,":after");this.referenceElement===B&&_h(V)&&(this.clonedReferenceElement=V),of(V)&&$p(V);var Pe=this.counters.parse(new di(this.context,re)),yt=this.resolvePseudoContent(B,V,_e,Ic.BEFORE);ru(B)&&(U=!0),vd(B)||this.cloneChildNodes(B,V,U),yt&&V.insertBefore(yt,V.firstChild);var mt=this.resolvePseudoContent(B,V,Ne,Ic.AFTER);return mt&&V.appendChild(mt),this.counters.pop(Pe),(re&&(this.options.copyStyles||Fl(B))&&!wh(B)||U)&&Bh(re,V),(B.scrollTop!==0||B.scrollLeft!==0)&&this.scrolledElements.push([V,B.scrollLeft,B.scrollTop]),(bh(B)||xh(B))&&(bh(V)||xh(V))&&(V.value=B.value),V}return B.cloneNode(!1)},F.prototype.resolvePseudoContent=function(B,U,T,V){var re=this;if(T){var _e=T.content,Ne=U.ownerDocument;if(!(!Ne||!_e||_e==="none"||_e==="-moz-alt-content"||T.display==="none")){this.counters.parse(new di(this.context,T));var Pe=new fi(this.context,T),yt=Ne.createElement("html2canvaspseudoelement");Bh(T,yt),Pe.content.forEach(function(Ut){if(Ut.type===0)yt.appendChild(Ne.createTextNode(Ut.value));else if(Ut.type===22){var tr=Ne.createElement("img");tr.src=Ut.value,tr.style.opacity="1",yt.appendChild(tr)}else if(Ut.type===18){if(Ut.name==="attr"){var an=Ut.values.filter(Tn);an.length&&yt.appendChild(Ne.createTextNode(B.getAttribute(an[0].value)||""))}else if(Ut.name==="counter"){var Qr=Ut.values.filter(ns),Jr=Qr[0],Xn=Qr[1];if(Jr&&Tn(Jr)){var gn=re.counters.getCounterValue(Jr.value),cn=Xn&&Tn(Xn)?H.parse(re.context,Xn.value):3;yt.appendChild(Ne.createTextNode(Pu(gn,cn,!1)))}}else if(Ut.name==="counters"){var Fi=Ut.values.filter(ns),Jr=Fi[0],Zn=Fi[1],Xn=Fi[2];if(Jr&&Tn(Jr)){var Rn=re.counters.getCounterValues(Jr.value),Hr=Xn&&Tn(Xn)?H.parse(re.context,Xn.value):3,si=Zn&&Zn.type===0?Zn.value:"",yi=Rn.map(function(fo){return Pu(fo,Hr,!1)}).join(si);yt.appendChild(Ne.createTextNode(yi))}}}else if(Ut.type===20)switch(Ut.value){case"open-quote":yt.appendChild(Ne.createTextNode(ir(Pe.quotes,re.quoteDepth++,!0)));break;case"close-quote":yt.appendChild(Ne.createTextNode(ir(Pe.quotes,--re.quoteDepth,!1)));break;default:yt.appendChild(Ne.createTextNode(Ut.value))}}),yt.className=ff+" "+df;var mt=V===Ic.BEFORE?" "+ff:" "+df;return Fl(U)?U.className.baseValue+=mt:U.className+=mt,yt}}},F.destroy=function(B){return B.parentNode?(B.parentNode.removeChild(B),!0):!1},F}(),Ic;(function(F){F[F.BEFORE=0]="BEFORE",F[F.AFTER=1]="AFTER"})(Ic||(Ic={}));var Fd=function(F,B){var U=F.createElement("iframe");return U.className="html2canvas-container",U.style.visibility="hidden",U.style.position="fixed",U.style.left="-10000px",U.style.top="0px",U.style.border="0",U.width=B.width.toString(),U.height=B.height.toString(),U.scrolling="no",U.setAttribute(au,"true"),F.body.appendChild(U),U},Sd=function(F){return new Promise(function(B){if(F.complete){B();return}if(!F.src){B();return}F.onload=B,F.onerror=B})},Li=function(F){return Promise.all([].slice.call(F.images,0).map(Sd))},oc=function(F){return new Promise(function(B,U){var T=F.contentWindow;if(!T)return U("No window assigned for iframe");var V=T.document;T.onload=F.onload=function(){T.onload=F.onload=null;var re=setInterval(function(){V.body.childNodes.length>0&&V.readyState==="complete"&&(clearInterval(re),B(F))},50)}})},hf=["all","d","content"],Bh=function(F,B){for(var U=F.length-1;U>=0;U--){var T=F.item(U);hf.indexOf(T)===-1&&B.style.setProperty(T,F.getPropertyValue(T))}return B},Id=function(F){var B="";return F&&(B+="<!DOCTYPE ",F.name&&(B+=F.name),F.internalSubset&&(B+=F.internalSubset),F.publicId&&(B+='"'+F.publicId+'"'),F.systemId&&(B+='"'+F.systemId+'"'),B+=">"),B},Ll=function(F,B,U){F&&F.defaultView&&(B!==F.defaultView.pageXOffset||U!==F.defaultView.pageYOffset)&&F.defaultView.scrollTo(B,U)},ou=function(F){var B=F[0],U=F[1],T=F[2];B.scrollLeft=U,B.scrollTop=T},Td=":before",Yp=":after",ff="___html2canvas___pseudoelement_before",df="___html2canvas___pseudoelement_after",Ud=`{
    content: "" !important;
    display: none !important;
}`,$p=function(F){em(F,"."+ff+Td+Ud+`
         .`+df+Yp+Ud)},em=function(F,B){var U=F.ownerDocument;if(U){var T=U.createElement("style");T.textContent=B,F.appendChild(T)}},Ld=function(){function F(){}return F.getOrigin=function(B){var U=F._link;return U?(U.href=B,U.href=U.href,U.protocol+U.hostname+U.port):"about:blank"},F.isSameOrigin=function(B){return F.getOrigin(B)===F._origin},F.setContext=function(B){F._link=B.document.createElement("a"),F._origin=F.getOrigin(B.location.href)},F._origin="about:blank",F}(),tm=function(){function F(B,U){this.context=B,this._options=U,this._cache={}}return F.prototype.addImage=function(B){var U=Promise.resolve();return this.has(B)||(mf(B)||Qd(B))&&(this._cache[B]=this.loadImage(B)).catch(function(){}),U},F.prototype.match=function(B){return this._cache[B]},F.prototype.loadImage=function(B){return c(this,void 0,void 0,function(){var U,T,V,re,_e=this;return h(this,function(Ne){switch(Ne.label){case 0:return U=Ld.isSameOrigin(B),T=!pf(B)&&this._options.useCORS===!0&&_s.SUPPORT_CORS_IMAGES&&!U,V=!pf(B)&&!U&&!mf(B)&&typeof this._options.proxy=="string"&&_s.SUPPORT_CORS_XHR&&!T,!U&&this._options.allowTaint===!1&&!pf(B)&&!mf(B)&&!V&&!T?[2]:(re=B,V?[4,this.proxy(re)]:[3,2]);case 1:re=Ne.sent(),Ne.label=2;case 2:return this.context.logger.debug("Added image "+B.substring(0,256)),[4,new Promise(function(Pe,yt){var mt=new Image;mt.onload=function(){return Pe(mt)},mt.onerror=yt,(nm(re)||T)&&(mt.crossOrigin="anonymous"),mt.src=re,mt.complete===!0&&setTimeout(function(){return Pe(mt)},500),_e._options.imageTimeout>0&&setTimeout(function(){return yt("Timed out ("+_e._options.imageTimeout+"ms) loading image")},_e._options.imageTimeout)})];case 3:return[2,Ne.sent()]}})})},F.prototype.has=function(B){return typeof this._cache[B]<"u"},F.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},F.prototype.proxy=function(B){var U=this,T=this._options.proxy;if(!T)throw new Error("No proxy defined");var V=B.substring(0,256);return new Promise(function(re,_e){var Ne=_s.SUPPORT_RESPONSE_TYPE?"blob":"text",Pe=new XMLHttpRequest;Pe.onload=function(){if(Pe.status===200)if(Ne==="text")re(Pe.response);else{var Ut=new FileReader;Ut.addEventListener("load",function(){return re(Ut.result)},!1),Ut.addEventListener("error",function(tr){return _e(tr)},!1),Ut.readAsDataURL(Pe.response)}else _e("Failed to proxy resource "+V+" with status code "+Pe.status)},Pe.onerror=_e;var yt=T.indexOf("?")>-1?"&":"?";if(Pe.open("GET",""+T+yt+"url="+encodeURIComponent(B)+"&responseType="+Ne),Ne!=="text"&&Pe instanceof XMLHttpRequest&&(Pe.responseType=Ne),U._options.imageTimeout){var mt=U._options.imageTimeout;Pe.timeout=mt,Pe.ontimeout=function(){return _e("Timed out ("+mt+"ms) proxying "+V)}}Pe.send()})},F}(),rm=/^data:image\/svg\+xml/i,Ch=/^data:image\/.*;base64,/i,Au=/^data:image\/.*/i,Qd=function(F){return _s.SUPPORT_SVG_DRAWING||!Pd(F)},pf=function(F){return Au.test(F)},nm=function(F){return Ch.test(F)},mf=function(F){return F.substr(0,4)==="blob"},Pd=function(F){return F.substr(-3).toLowerCase()==="svg"||rm.test(F)},rn=function(){function F(B,U){this.type=0,this.x=B,this.y=U}return F.prototype.add=function(B,U){return new F(this.x+B,this.y+U)},F}(),Tc=function(F,B,U){return new rn(F.x+(B.x-F.x)*U,F.y+(B.y-F.y)*U)},Uc=function(){function F(B,U,T,V){this.type=1,this.start=B,this.startControl=U,this.endControl=T,this.end=V}return F.prototype.subdivide=function(B,U){var T=Tc(this.start,this.startControl,B),V=Tc(this.startControl,this.endControl,B),re=Tc(this.endControl,this.end,B),_e=Tc(T,V,B),Ne=Tc(V,re,B),Pe=Tc(_e,Ne,B);return U?new F(this.start,T,_e,Pe):new F(Pe,Ne,re,this.end)},F.prototype.add=function(B,U){return new F(this.start.add(B,U),this.startControl.add(B,U),this.endControl.add(B,U),this.end.add(B,U))},F.prototype.reverse=function(){return new F(this.end,this.endControl,this.startControl,this.start)},F}(),za=function(F){return F.type===1},lu=function(){function F(B){var U=B.styles,T=B.bounds,V=is(U.borderTopLeftRadius,T.width,T.height),re=V[0],_e=V[1],Ne=is(U.borderTopRightRadius,T.width,T.height),Pe=Ne[0],yt=Ne[1],mt=is(U.borderBottomRightRadius,T.width,T.height),Ut=mt[0],tr=mt[1],an=is(U.borderBottomLeftRadius,T.width,T.height),Qr=an[0],Jr=an[1],Xn=[];Xn.push((re+Pe)/T.width),Xn.push((Qr+Ut)/T.width),Xn.push((_e+Jr)/T.height),Xn.push((yt+tr)/T.height);var gn=Math.max.apply(Math,Xn);gn>1&&(re/=gn,_e/=gn,Pe/=gn,yt/=gn,Ut/=gn,tr/=gn,Qr/=gn,Jr/=gn);var cn=T.width-Pe,Fi=T.height-tr,Zn=T.width-Ut,Rn=T.height-Jr,Hr=U.borderTopWidth,si=U.borderRightWidth,yi=U.borderBottomWidth,On=U.borderLeftWidth,ks=hi(U.paddingTop,B.bounds.width),fo=hi(U.paddingRight,B.bounds.width),Io=hi(U.paddingBottom,B.bounds.width),Ni=hi(U.paddingLeft,B.bounds.width);this.topLeftBorderDoubleOuterBox=re>0||_e>0?Gi(T.left+On/3,T.top+Hr/3,re-On/3,_e-Hr/3,Ei.TOP_LEFT):new rn(T.left+On/3,T.top+Hr/3),this.topRightBorderDoubleOuterBox=re>0||_e>0?Gi(T.left+cn,T.top+Hr/3,Pe-si/3,yt-Hr/3,Ei.TOP_RIGHT):new rn(T.left+T.width-si/3,T.top+Hr/3),this.bottomRightBorderDoubleOuterBox=Ut>0||tr>0?Gi(T.left+Zn,T.top+Fi,Ut-si/3,tr-yi/3,Ei.BOTTOM_RIGHT):new rn(T.left+T.width-si/3,T.top+T.height-yi/3),this.bottomLeftBorderDoubleOuterBox=Qr>0||Jr>0?Gi(T.left+On/3,T.top+Rn,Qr-On/3,Jr-yi/3,Ei.BOTTOM_LEFT):new rn(T.left+On/3,T.top+T.height-yi/3),this.topLeftBorderDoubleInnerBox=re>0||_e>0?Gi(T.left+On*2/3,T.top+Hr*2/3,re-On*2/3,_e-Hr*2/3,Ei.TOP_LEFT):new rn(T.left+On*2/3,T.top+Hr*2/3),this.topRightBorderDoubleInnerBox=re>0||_e>0?Gi(T.left+cn,T.top+Hr*2/3,Pe-si*2/3,yt-Hr*2/3,Ei.TOP_RIGHT):new rn(T.left+T.width-si*2/3,T.top+Hr*2/3),this.bottomRightBorderDoubleInnerBox=Ut>0||tr>0?Gi(T.left+Zn,T.top+Fi,Ut-si*2/3,tr-yi*2/3,Ei.BOTTOM_RIGHT):new rn(T.left+T.width-si*2/3,T.top+T.height-yi*2/3),this.bottomLeftBorderDoubleInnerBox=Qr>0||Jr>0?Gi(T.left+On*2/3,T.top+Rn,Qr-On*2/3,Jr-yi*2/3,Ei.BOTTOM_LEFT):new rn(T.left+On*2/3,T.top+T.height-yi*2/3),this.topLeftBorderStroke=re>0||_e>0?Gi(T.left+On/2,T.top+Hr/2,re-On/2,_e-Hr/2,Ei.TOP_LEFT):new rn(T.left+On/2,T.top+Hr/2),this.topRightBorderStroke=re>0||_e>0?Gi(T.left+cn,T.top+Hr/2,Pe-si/2,yt-Hr/2,Ei.TOP_RIGHT):new rn(T.left+T.width-si/2,T.top+Hr/2),this.bottomRightBorderStroke=Ut>0||tr>0?Gi(T.left+Zn,T.top+Fi,Ut-si/2,tr-yi/2,Ei.BOTTOM_RIGHT):new rn(T.left+T.width-si/2,T.top+T.height-yi/2),this.bottomLeftBorderStroke=Qr>0||Jr>0?Gi(T.left+On/2,T.top+Rn,Qr-On/2,Jr-yi/2,Ei.BOTTOM_LEFT):new rn(T.left+On/2,T.top+T.height-yi/2),this.topLeftBorderBox=re>0||_e>0?Gi(T.left,T.top,re,_e,Ei.TOP_LEFT):new rn(T.left,T.top),this.topRightBorderBox=Pe>0||yt>0?Gi(T.left+cn,T.top,Pe,yt,Ei.TOP_RIGHT):new rn(T.left+T.width,T.top),this.bottomRightBorderBox=Ut>0||tr>0?Gi(T.left+Zn,T.top+Fi,Ut,tr,Ei.BOTTOM_RIGHT):new rn(T.left+T.width,T.top+T.height),this.bottomLeftBorderBox=Qr>0||Jr>0?Gi(T.left,T.top+Rn,Qr,Jr,Ei.BOTTOM_LEFT):new rn(T.left,T.top+T.height),this.topLeftPaddingBox=re>0||_e>0?Gi(T.left+On,T.top+Hr,Math.max(0,re-On),Math.max(0,_e-Hr),Ei.TOP_LEFT):new rn(T.left+On,T.top+Hr),this.topRightPaddingBox=Pe>0||yt>0?Gi(T.left+Math.min(cn,T.width-si),T.top+Hr,cn>T.width+si?0:Math.max(0,Pe-si),Math.max(0,yt-Hr),Ei.TOP_RIGHT):new rn(T.left+T.width-si,T.top+Hr),this.bottomRightPaddingBox=Ut>0||tr>0?Gi(T.left+Math.min(Zn,T.width-On),T.top+Math.min(Fi,T.height-yi),Math.max(0,Ut-si),Math.max(0,tr-yi),Ei.BOTTOM_RIGHT):new rn(T.left+T.width-si,T.top+T.height-yi),this.bottomLeftPaddingBox=Qr>0||Jr>0?Gi(T.left+On,T.top+Math.min(Rn,T.height-yi),Math.max(0,Qr-On),Math.max(0,Jr-yi),Ei.BOTTOM_LEFT):new rn(T.left+On,T.top+T.height-yi),this.topLeftContentBox=re>0||_e>0?Gi(T.left+On+Ni,T.top+Hr+ks,Math.max(0,re-(On+Ni)),Math.max(0,_e-(Hr+ks)),Ei.TOP_LEFT):new rn(T.left+On+Ni,T.top+Hr+ks),this.topRightContentBox=Pe>0||yt>0?Gi(T.left+Math.min(cn,T.width+On+Ni),T.top+Hr+ks,cn>T.width+On+Ni?0:Pe-On+Ni,yt-(Hr+ks),Ei.TOP_RIGHT):new rn(T.left+T.width-(si+fo),T.top+Hr+ks),this.bottomRightContentBox=Ut>0||tr>0?Gi(T.left+Math.min(Zn,T.width-(On+Ni)),T.top+Math.min(Fi,T.height+Hr+ks),Math.max(0,Ut-(si+fo)),tr-(yi+Io),Ei.BOTTOM_RIGHT):new rn(T.left+T.width-(si+fo),T.top+T.height-(yi+Io)),this.bottomLeftContentBox=Qr>0||Jr>0?Gi(T.left+On+Ni,T.top+Rn,Math.max(0,Qr-(On+Ni)),Jr-(yi+Io),Ei.BOTTOM_LEFT):new rn(T.left+On+Ni,T.top+T.height-(yi+Io))}return F}(),Ei;(function(F){F[F.TOP_LEFT=0]="TOP_LEFT",F[F.TOP_RIGHT=1]="TOP_RIGHT",F[F.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",F[F.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(Ei||(Ei={}));var Gi=function(F,B,U,T,V){var re=4*((Math.sqrt(2)-1)/3),_e=U*re,Ne=T*re,Pe=F+U,yt=B+T;switch(V){case Ei.TOP_LEFT:return new Uc(new rn(F,yt),new rn(F,yt-Ne),new rn(Pe-_e,B),new rn(Pe,B));case Ei.TOP_RIGHT:return new Uc(new rn(F,B),new rn(F+_e,B),new rn(Pe,yt-Ne),new rn(Pe,yt));case Ei.BOTTOM_RIGHT:return new Uc(new rn(Pe,B),new rn(Pe,B+Ne),new rn(F+_e,yt),new rn(F,yt));case Ei.BOTTOM_LEFT:default:return new Uc(new rn(Pe,yt),new rn(Pe-_e,yt),new rn(F,B+Ne),new rn(F,B))}},Eh=function(F){return[F.topLeftBorderBox,F.topRightBorderBox,F.bottomRightBorderBox,F.bottomLeftBorderBox]},kd=function(F){return[F.topLeftContentBox,F.topRightContentBox,F.bottomRightContentBox,F.bottomLeftContentBox]},ku=function(F){return[F.topLeftPaddingBox,F.topRightPaddingBox,F.bottomRightPaddingBox,F.bottomLeftPaddingBox]},im=function(){function F(B,U,T){this.offsetX=B,this.offsetY=U,this.matrix=T,this.type=0,this.target=6}return F}(),Mu=function(){function F(B,U){this.path=B,this.target=U,this.type=1}return F}(),Md=function(){function F(B){this.opacity=B,this.type=2,this.target=6}return F}(),gf=function(F){return F.type===0},Fh=function(F){return F.type===1},sm=function(F){return F.type===2},Dd=function(F,B){return F.length===B.length?F.some(function(U,T){return U===B[T]}):!1},Nd=function(F,B,U,T,V){return F.map(function(re,_e){switch(_e){case 0:return re.add(B,U);case 1:return re.add(B+T,U);case 2:return re.add(B+T,U+V);case 3:return re.add(B,U+V)}return re})},ol=function(){function F(B){this.element=B,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return F}(),yf=function(){function F(B,U){if(this.container=B,this.parent=U,this.effects=[],this.curves=new lu(this.container),this.container.styles.opacity<1&&this.effects.push(new Md(this.container.styles.opacity)),this.container.styles.transform!==null){var T=this.container.bounds.left+this.container.styles.transformOrigin[0].number,V=this.container.bounds.top+this.container.styles.transformOrigin[1].number,re=this.container.styles.transform;this.effects.push(new im(T,V,re))}if(this.container.styles.overflowX!==0){var _e=Eh(this.curves),Ne=ku(this.curves);Dd(_e,Ne)?this.effects.push(new Mu(_e,6)):(this.effects.push(new Mu(_e,2)),this.effects.push(new Mu(Ne,4)))}}return F.prototype.getEffects=function(B){for(var U=[2,3].indexOf(this.container.styles.position)===-1,T=this.parent,V=this.effects.slice(0);T;){var re=T.effects.filter(function(Pe){return!Fh(Pe)});if(U||T.container.styles.position!==0||!T.parent){if(V.unshift.apply(V,re),U=[2,3].indexOf(T.container.styles.position)===-1,T.container.styles.overflowX!==0){var _e=Eh(T.curves),Ne=ku(T.curves);Dd(_e,Ne)||V.unshift(new Mu(Ne,6))}}else V.unshift.apply(V,re);T=T.parent}return V.filter(function(Pe){return pt(Pe.target,B)})},F}(),Al=function(F,B,U,T){F.container.elements.forEach(function(V){var re=pt(V.flags,4),_e=pt(V.flags,2),Ne=new yf(V,F);pt(V.styles.display,2048)&&T.push(Ne);var Pe=pt(V.flags,8)?[]:T;if(re||_e){var yt=re||V.styles.isPositioned()?U:B,mt=new ol(Ne);if(V.styles.isPositioned()||V.styles.opacity<1||V.styles.isTransformed()){var Ut=V.styles.zIndex.order;if(Ut<0){var tr=0;yt.negativeZIndex.some(function(Qr,Jr){return Ut>Qr.element.container.styles.zIndex.order?(tr=Jr,!1):tr>0}),yt.negativeZIndex.splice(tr,0,mt)}else if(Ut>0){var an=0;yt.positiveZIndex.some(function(Qr,Jr){return Ut>=Qr.element.container.styles.zIndex.order?(an=Jr+1,!1):an>0}),yt.positiveZIndex.splice(an,0,mt)}else yt.zeroOrAutoZIndexOrTransformedOrOpacity.push(mt)}else V.styles.isFloating()?yt.nonPositionedFloats.push(mt):yt.nonPositionedInlineLevel.push(mt);Al(Ne,mt,re?mt:U,Pe)}else V.styles.isInlineLevel()?B.inlineLevel.push(Ne):B.nonInlineLevel.push(Ne),Al(Ne,B,U,Pe);pt(V.flags,8)&&vf(V,Pe)})},vf=function(F,B){for(var U=F instanceof ph?F.start:1,T=F instanceof ph?F.reversed:!1,V=0;V<B.length;V++){var re=B[V];re.container instanceof $c&&typeof re.container.value=="number"&&re.container.value!==0&&(U=re.container.value),re.listValue=Pu(U,re.container.styles.listStyleType,!0),U+=T?-1:1}},jd=function(F){var B=new yf(F,null),U=new ol(B),T=[];return Al(B,U,U,T),vf(B.container,T),U},_f=function(F,B){switch(B){case 0:return Vo(F.topLeftBorderBox,F.topLeftPaddingBox,F.topRightBorderBox,F.topRightPaddingBox);case 1:return Vo(F.topRightBorderBox,F.topRightPaddingBox,F.bottomRightBorderBox,F.bottomRightPaddingBox);case 2:return Vo(F.bottomRightBorderBox,F.bottomRightPaddingBox,F.bottomLeftBorderBox,F.bottomLeftPaddingBox);case 3:default:return Vo(F.bottomLeftBorderBox,F.bottomLeftPaddingBox,F.topLeftBorderBox,F.topLeftPaddingBox)}},Rd=function(F,B){switch(B){case 0:return Vo(F.topLeftBorderBox,F.topLeftBorderDoubleOuterBox,F.topRightBorderBox,F.topRightBorderDoubleOuterBox);case 1:return Vo(F.topRightBorderBox,F.topRightBorderDoubleOuterBox,F.bottomRightBorderBox,F.bottomRightBorderDoubleOuterBox);case 2:return Vo(F.bottomRightBorderBox,F.bottomRightBorderDoubleOuterBox,F.bottomLeftBorderBox,F.bottomLeftBorderDoubleOuterBox);case 3:default:return Vo(F.bottomLeftBorderBox,F.bottomLeftBorderDoubleOuterBox,F.topLeftBorderBox,F.topLeftBorderDoubleOuterBox)}},am=function(F,B){switch(B){case 0:return Vo(F.topLeftBorderDoubleInnerBox,F.topLeftPaddingBox,F.topRightBorderDoubleInnerBox,F.topRightPaddingBox);case 1:return Vo(F.topRightBorderDoubleInnerBox,F.topRightPaddingBox,F.bottomRightBorderDoubleInnerBox,F.bottomRightPaddingBox);case 2:return Vo(F.bottomRightBorderDoubleInnerBox,F.bottomRightPaddingBox,F.bottomLeftBorderDoubleInnerBox,F.bottomLeftPaddingBox);case 3:default:return Vo(F.bottomLeftBorderDoubleInnerBox,F.bottomLeftPaddingBox,F.topLeftBorderDoubleInnerBox,F.topLeftPaddingBox)}},om=function(F,B){switch(B){case 0:return Du(F.topLeftBorderStroke,F.topRightBorderStroke);case 1:return Du(F.topRightBorderStroke,F.bottomRightBorderStroke);case 2:return Du(F.bottomRightBorderStroke,F.bottomLeftBorderStroke);case 3:default:return Du(F.bottomLeftBorderStroke,F.topLeftBorderStroke)}},Du=function(F,B){var U=[];return za(F)?U.push(F.subdivide(.5,!1)):U.push(F),za(B)?U.push(B.subdivide(.5,!0)):U.push(B),U},Vo=function(F,B,U,T){var V=[];return za(F)?V.push(F.subdivide(.5,!1)):V.push(F),za(U)?V.push(U.subdivide(.5,!0)):V.push(U),za(T)?V.push(T.subdivide(.5,!0).reverse()):V.push(T),za(B)?V.push(B.subdivide(.5,!1).reverse()):V.push(B),V},wf=function(F){var B=F.bounds,U=F.styles;return B.add(U.borderLeftWidth,U.borderTopWidth,-(U.borderRightWidth+U.borderLeftWidth),-(U.borderTopWidth+U.borderBottomWidth))},Lc=function(F){var B=F.styles,U=F.bounds,T=hi(B.paddingLeft,U.width),V=hi(B.paddingRight,U.width),re=hi(B.paddingTop,U.width),_e=hi(B.paddingBottom,U.width);return U.add(T+B.borderLeftWidth,re+B.borderTopWidth,-(B.borderRightWidth+B.borderLeftWidth+T+V),-(B.borderTopWidth+B.borderBottomWidth+re+_e))},Od=function(F,B){return F===0?B.bounds:F===2?Lc(B):wf(B)},Sh=function(F,B){return F===0?B.bounds:F===2?Lc(B):wf(B)},cu=function(F,B,U){var T=Od(uu(F.styles.backgroundOrigin,B),F),V=Sh(uu(F.styles.backgroundClip,B),F),re=Am(uu(F.styles.backgroundSize,B),U,T),_e=re[0],Ne=re[1],Pe=is(uu(F.styles.backgroundPosition,B),T.width-_e,T.height-Ne),yt=lm(uu(F.styles.backgroundRepeat,B),Pe,re,T,V),mt=Math.round(T.left+Pe[0]),Ut=Math.round(T.top+Pe[1]);return[yt,mt,Ut,_e,Ne]},Ql=function(F){return Tn(F)&&F.value===Oa.AUTO},Ih=function(F){return typeof F=="number"},Am=function(F,B,U){var T=B[0],V=B[1],re=B[2],_e=F[0],Ne=F[1];if(!_e)return[0,0];if(ki(_e)&&Ne&&ki(Ne))return[hi(_e,U.width),hi(Ne,U.height)];var Pe=Ih(re);if(Tn(_e)&&(_e.value===Oa.CONTAIN||_e.value===Oa.COVER)){if(Ih(re)){var yt=U.width/U.height;return yt<re!=(_e.value===Oa.COVER)?[U.width,U.width/re]:[U.height*re,U.height]}return[U.width,U.height]}var mt=Ih(T),Ut=Ih(V),tr=mt||Ut;if(Ql(_e)&&(!Ne||Ql(Ne))){if(mt&&Ut)return[T,V];if(!Pe&&!tr)return[U.width,U.height];if(tr&&Pe){var an=mt?T:V*re,Qr=Ut?V:T/re;return[an,Qr]}var Jr=mt?T:U.width,Xn=Ut?V:U.height;return[Jr,Xn]}if(Pe){var gn=0,cn=0;return ki(_e)?gn=hi(_e,U.width):ki(Ne)&&(cn=hi(Ne,U.height)),Ql(_e)?gn=cn*re:(!Ne||Ql(Ne))&&(cn=gn/re),[gn,cn]}var Fi=null,Zn=null;if(ki(_e)?Fi=hi(_e,U.width):Ne&&ki(Ne)&&(Zn=hi(Ne,U.height)),Fi!==null&&(!Ne||Ql(Ne))&&(Zn=mt&&Ut?Fi/T*V:U.height),Zn!==null&&Ql(_e)&&(Fi=mt&&Ut?Zn/V*T:U.width),Fi!==null&&Zn!==null)return[Fi,Zn];throw new Error("Unable to calculate background-size for element")},uu=function(F,B){var U=F[B];return typeof U>"u"?F[0]:U},lm=function(F,B,U,T,V){var re=B[0],_e=B[1],Ne=U[0],Pe=U[1];switch(F){case 2:return[new rn(Math.round(T.left),Math.round(T.top+_e)),new rn(Math.round(T.left+T.width),Math.round(T.top+_e)),new rn(Math.round(T.left+T.width),Math.round(Pe+T.top+_e)),new rn(Math.round(T.left),Math.round(Pe+T.top+_e))];case 3:return[new rn(Math.round(T.left+re),Math.round(T.top)),new rn(Math.round(T.left+re+Ne),Math.round(T.top)),new rn(Math.round(T.left+re+Ne),Math.round(T.height+T.top)),new rn(Math.round(T.left+re),Math.round(T.height+T.top))];case 1:return[new rn(Math.round(T.left+re),Math.round(T.top+_e)),new rn(Math.round(T.left+re+Ne),Math.round(T.top+_e)),new rn(Math.round(T.left+re+Ne),Math.round(T.top+_e+Pe)),new rn(Math.round(T.left+re),Math.round(T.top+_e+Pe))];default:return[new rn(Math.round(V.left),Math.round(V.top)),new rn(Math.round(V.left+V.width),Math.round(V.top)),new rn(Math.round(V.left+V.width),Math.round(V.height+V.top)),new rn(Math.round(V.left),Math.round(V.height+V.top))]}},hu="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",Th="Hidden Text",zd=function(){function F(B){this._data={},this._document=B}return F.prototype.parseMetrics=function(B,U){var T=this._document.createElement("div"),V=this._document.createElement("img"),re=this._document.createElement("span"),_e=this._document.body;T.style.visibility="hidden",T.style.fontFamily=B,T.style.fontSize=U,T.style.margin="0",T.style.padding="0",T.style.whiteSpace="nowrap",_e.appendChild(T),V.src=hu,V.width=1,V.height=1,V.style.margin="0",V.style.padding="0",V.style.verticalAlign="baseline",re.style.fontFamily=B,re.style.fontSize=U,re.style.margin="0",re.style.padding="0",re.appendChild(this._document.createTextNode(Th)),T.appendChild(re),T.appendChild(V);var Ne=V.offsetTop-re.offsetTop+2;T.removeChild(re),T.appendChild(this._document.createTextNode(Th)),T.style.lineHeight="normal",V.style.verticalAlign="super";var Pe=V.offsetTop-T.offsetTop+2;return _e.removeChild(T),{baseline:Ne,middle:Pe}},F.prototype.getMetrics=function(B,U){var T=B+" "+U;return typeof this._data[T]>"u"&&(this._data[T]=this.parseMetrics(B,U)),this._data[T]},F}(),Uh=function(){function F(B,U){this.context=B,this.options=U}return F}(),cm=1e4,Ac=function(F){s(B,F);function B(U,T){var V=F.call(this,U,T)||this;return V._activeEffects=[],V.canvas=T.canvas?T.canvas:document.createElement("canvas"),V.ctx=V.canvas.getContext("2d"),T.canvas||(V.canvas.width=Math.floor(T.width*T.scale),V.canvas.height=Math.floor(T.height*T.scale),V.canvas.style.width=T.width+"px",V.canvas.style.height=T.height+"px"),V.fontMetrics=new zd(document),V.ctx.scale(V.options.scale,V.options.scale),V.ctx.translate(-T.x,-T.y),V.ctx.textBaseline="bottom",V._activeEffects=[],V.context.logger.debug("Canvas renderer initialized ("+T.width+"x"+T.height+") with scale "+T.scale),V}return B.prototype.applyEffects=function(U){for(var T=this;this._activeEffects.length;)this.popEffect();U.forEach(function(V){return T.applyEffect(V)})},B.prototype.applyEffect=function(U){this.ctx.save(),sm(U)&&(this.ctx.globalAlpha=U.opacity),gf(U)&&(this.ctx.translate(U.offsetX,U.offsetY),this.ctx.transform(U.matrix[0],U.matrix[1],U.matrix[2],U.matrix[3],U.matrix[4],U.matrix[5]),this.ctx.translate(-U.offsetX,-U.offsetY)),Fh(U)&&(this.path(U.path),this.ctx.clip()),this._activeEffects.push(U)},B.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},B.prototype.renderStack=function(U){return c(this,void 0,void 0,function(){var T;return h(this,function(V){switch(V.label){case 0:return T=U.element.container.styles,T.isVisible()?[4,this.renderStackContent(U)]:[3,2];case 1:V.sent(),V.label=2;case 2:return[2]}})})},B.prototype.renderNode=function(U){return c(this,void 0,void 0,function(){return h(this,function(T){switch(T.label){case 0:if(pt(U.container.flags,16))debugger;return U.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(U)]:[3,3];case 1:return T.sent(),[4,this.renderNodeContent(U)];case 2:T.sent(),T.label=3;case 3:return[2]}})})},B.prototype.renderTextWithLetterSpacing=function(U,T,V){var re=this;if(T===0)this.ctx.fillText(U.text,U.bounds.left,U.bounds.top+V);else{var _e=sc(U.text);_e.reduce(function(Ne,Pe){return re.ctx.fillText(Pe,Ne,U.bounds.top+V),Ne+re.ctx.measureText(Pe).width},U.bounds.left)}},B.prototype.createFontStyle=function(U){var T=U.fontVariant.filter(function(_e){return _e==="normal"||_e==="small-caps"}).join(""),V=fm(U.fontFamily).join(", "),re=pi(U.fontSize)?""+U.fontSize.number+U.fontSize.unit:U.fontSize.number+"px";return[[U.fontStyle,T,U.fontWeight,re,V].join(" "),V,re]},B.prototype.renderTextNode=function(U,T){return c(this,void 0,void 0,function(){var V,re,_e,Ne,Pe,yt,mt,Ut,tr=this;return h(this,function(an){return V=this.createFontStyle(T),re=V[0],_e=V[1],Ne=V[2],this.ctx.font=re,this.ctx.direction=T.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",Pe=this.fontMetrics.getMetrics(_e,Ne),yt=Pe.baseline,mt=Pe.middle,Ut=T.paintOrder,U.textBounds.forEach(function(Qr){Ut.forEach(function(Jr){switch(Jr){case 0:tr.ctx.fillStyle=ss(T.color),tr.renderTextWithLetterSpacing(Qr,T.letterSpacing,yt);var Xn=T.textShadow;Xn.length&&Qr.text.trim().length&&(Xn.slice(0).reverse().forEach(function(gn){tr.ctx.shadowColor=ss(gn.color),tr.ctx.shadowOffsetX=gn.offsetX.number*tr.options.scale,tr.ctx.shadowOffsetY=gn.offsetY.number*tr.options.scale,tr.ctx.shadowBlur=gn.blur.number,tr.renderTextWithLetterSpacing(Qr,T.letterSpacing,yt)}),tr.ctx.shadowColor="",tr.ctx.shadowOffsetX=0,tr.ctx.shadowOffsetY=0,tr.ctx.shadowBlur=0),T.textDecorationLine.length&&(tr.ctx.fillStyle=ss(T.textDecorationColor||T.color),T.textDecorationLine.forEach(function(gn){switch(gn){case 1:tr.ctx.fillRect(Qr.bounds.left,Math.round(Qr.bounds.top+yt),Qr.bounds.width,1);break;case 2:tr.ctx.fillRect(Qr.bounds.left,Math.round(Qr.bounds.top),Qr.bounds.width,1);break;case 3:tr.ctx.fillRect(Qr.bounds.left,Math.ceil(Qr.bounds.top+mt),Qr.bounds.width,1);break}}));break;case 1:T.webkitTextStrokeWidth&&Qr.text.trim().length&&(tr.ctx.strokeStyle=ss(T.webkitTextStrokeColor),tr.ctx.lineWidth=T.webkitTextStrokeWidth,tr.ctx.lineJoin=window.chrome?"miter":"round",tr.ctx.strokeText(Qr.text,Qr.bounds.left,Qr.bounds.top+yt)),tr.ctx.strokeStyle="",tr.ctx.lineWidth=0,tr.ctx.lineJoin="miter";break}})}),[2]})})},B.prototype.renderReplacedElement=function(U,T,V){if(V&&U.intrinsicWidth>0&&U.intrinsicHeight>0){var re=Lc(U),_e=ku(T);this.path(_e),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(V,0,0,U.intrinsicWidth,U.intrinsicHeight,re.left,re.top,re.width,re.height),this.ctx.restore()}},B.prototype.renderNodeContent=function(U){return c(this,void 0,void 0,function(){var T,V,re,_e,Ne,Pe,cn,cn,yt,mt,Ut,tr,Zn,an,Qr,Rn,Jr,Xn,gn,cn,Fi,Zn,Rn;return h(this,function(Hr){switch(Hr.label){case 0:this.applyEffects(U.getEffects(4)),T=U.container,V=U.curves,re=T.styles,_e=0,Ne=T.textNodes,Hr.label=1;case 1:return _e<Ne.length?(Pe=Ne[_e],[4,this.renderTextNode(Pe,re)]):[3,4];case 2:Hr.sent(),Hr.label=3;case 3:return _e++,[3,1];case 4:if(!(T instanceof Sc))return[3,8];Hr.label=5;case 5:return Hr.trys.push([5,7,,8]),[4,this.context.cache.match(T.src)];case 6:return cn=Hr.sent(),this.renderReplacedElement(T,V,cn),[3,8];case 7:return Hr.sent(),this.context.logger.error("Error loading image "+T.src),[3,8];case 8:if(T instanceof Su&&this.renderReplacedElement(T,V,T.canvas),!(T instanceof Iu))return[3,12];Hr.label=9;case 9:return Hr.trys.push([9,11,,12]),[4,this.context.cache.match(T.svg)];case 10:return cn=Hr.sent(),this.renderReplacedElement(T,V,cn),[3,12];case 11:return Hr.sent(),this.context.logger.error("Error loading svg "+T.svg.substring(0,255)),[3,12];case 12:return T instanceof yh&&T.tree?(yt=new B(this.context,{scale:this.options.scale,backgroundColor:T.backgroundColor,x:0,y:0,width:T.width,height:T.height}),[4,yt.render(T.tree)]):[3,14];case 13:mt=Hr.sent(),T.width&&T.height&&this.ctx.drawImage(mt,0,0,T.width,T.height,T.bounds.left,T.bounds.top,T.bounds.width,T.bounds.height),Hr.label=14;case 14:if(T instanceof Qu&&(Ut=Math.min(T.bounds.width,T.bounds.height),T.type===mh?T.checked&&(this.ctx.save(),this.path([new rn(T.bounds.left+Ut*.39363,T.bounds.top+Ut*.79),new rn(T.bounds.left+Ut*.16,T.bounds.top+Ut*.5549),new rn(T.bounds.left+Ut*.27347,T.bounds.top+Ut*.44071),new rn(T.bounds.left+Ut*.39694,T.bounds.top+Ut*.5649),new rn(T.bounds.left+Ut*.72983,T.bounds.top+Ut*.23),new rn(T.bounds.left+Ut*.84,T.bounds.top+Ut*.34085),new rn(T.bounds.left+Ut*.39363,T.bounds.top+Ut*.79)]),this.ctx.fillStyle=ss(fd),this.ctx.fill(),this.ctx.restore()):T.type===Uu&&T.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(T.bounds.left+Ut/2,T.bounds.top+Ut/2,Ut/4,0,Math.PI*2,!0),this.ctx.fillStyle=ss(fd),this.ctx.fill(),this.ctx.restore())),Hd(T)&&T.value.length){switch(tr=this.createFontStyle(re),Zn=tr[0],an=tr[1],Qr=this.fontMetrics.getMetrics(Zn,an).baseline,this.ctx.font=Zn,this.ctx.fillStyle=ss(re.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=um(T.styles.textAlign),Rn=Lc(T),Jr=0,T.styles.textAlign){case 1:Jr+=Rn.width/2;break;case 2:Jr+=Rn.width;break}Xn=Rn.add(Jr,0,0,-Rn.height/2+1),this.ctx.save(),this.path([new rn(Rn.left,Rn.top),new rn(Rn.left+Rn.width,Rn.top),new rn(Rn.left+Rn.width,Rn.top+Rn.height),new rn(Rn.left,Rn.top+Rn.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new ic(T.value,Xn),re.letterSpacing,Qr),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!pt(T.styles.display,2048))return[3,20];if(T.styles.listStyleImage===null)return[3,19];if(gn=T.styles.listStyleImage,gn.type!==0)return[3,18];cn=void 0,Fi=gn.url,Hr.label=15;case 15:return Hr.trys.push([15,17,,18]),[4,this.context.cache.match(Fi)];case 16:return cn=Hr.sent(),this.ctx.drawImage(cn,T.bounds.left-(cn.width+10),T.bounds.top),[3,18];case 17:return Hr.sent(),this.context.logger.error("Error loading list-style-image "+Fi),[3,18];case 18:return[3,20];case 19:U.listValue&&T.styles.listStyleType!==-1&&(Zn=this.createFontStyle(re)[0],this.ctx.font=Zn,this.ctx.fillStyle=ss(re.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",Rn=new d(T.bounds.left,T.bounds.top+hi(T.styles.paddingTop,T.bounds.width),T.bounds.width,v(re.lineHeight,re.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new ic(U.listValue,Rn),re.letterSpacing,v(re.lineHeight,re.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),Hr.label=20;case 20:return[2]}})})},B.prototype.renderStackContent=function(U){return c(this,void 0,void 0,function(){var T,V,gn,re,_e,gn,Ne,Pe,gn,yt,mt,gn,Ut,tr,gn,an,Qr,gn,Jr,Xn,gn;return h(this,function(cn){switch(cn.label){case 0:if(pt(U.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(U.element)];case 1:cn.sent(),T=0,V=U.negativeZIndex,cn.label=2;case 2:return T<V.length?(gn=V[T],[4,this.renderStack(gn)]):[3,5];case 3:cn.sent(),cn.label=4;case 4:return T++,[3,2];case 5:return[4,this.renderNodeContent(U.element)];case 6:cn.sent(),re=0,_e=U.nonInlineLevel,cn.label=7;case 7:return re<_e.length?(gn=_e[re],[4,this.renderNode(gn)]):[3,10];case 8:cn.sent(),cn.label=9;case 9:return re++,[3,7];case 10:Ne=0,Pe=U.nonPositionedFloats,cn.label=11;case 11:return Ne<Pe.length?(gn=Pe[Ne],[4,this.renderStack(gn)]):[3,14];case 12:cn.sent(),cn.label=13;case 13:return Ne++,[3,11];case 14:yt=0,mt=U.nonPositionedInlineLevel,cn.label=15;case 15:return yt<mt.length?(gn=mt[yt],[4,this.renderStack(gn)]):[3,18];case 16:cn.sent(),cn.label=17;case 17:return yt++,[3,15];case 18:Ut=0,tr=U.inlineLevel,cn.label=19;case 19:return Ut<tr.length?(gn=tr[Ut],[4,this.renderNode(gn)]):[3,22];case 20:cn.sent(),cn.label=21;case 21:return Ut++,[3,19];case 22:an=0,Qr=U.zeroOrAutoZIndexOrTransformedOrOpacity,cn.label=23;case 23:return an<Qr.length?(gn=Qr[an],[4,this.renderStack(gn)]):[3,26];case 24:cn.sent(),cn.label=25;case 25:return an++,[3,23];case 26:Jr=0,Xn=U.positiveZIndex,cn.label=27;case 27:return Jr<Xn.length?(gn=Xn[Jr],[4,this.renderStack(gn)]):[3,30];case 28:cn.sent(),cn.label=29;case 29:return Jr++,[3,27];case 30:return[2]}})})},B.prototype.mask=function(U){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(U.slice(0).reverse()),this.ctx.closePath()},B.prototype.path=function(U){this.ctx.beginPath(),this.formatPath(U),this.ctx.closePath()},B.prototype.formatPath=function(U){var T=this;U.forEach(function(V,re){var _e=za(V)?V.start:V;re===0?T.ctx.moveTo(_e.x,_e.y):T.ctx.lineTo(_e.x,_e.y),za(V)&&T.ctx.bezierCurveTo(V.startControl.x,V.startControl.y,V.endControl.x,V.endControl.y,V.end.x,V.end.y)})},B.prototype.renderRepeat=function(U,T,V,re){this.path(U),this.ctx.fillStyle=T,this.ctx.translate(V,re),this.ctx.fill(),this.ctx.translate(-V,-re)},B.prototype.resizeImage=function(U,T,V){var re;if(U.width===T&&U.height===V)return U;var _e=(re=this.canvas.ownerDocument)!==null&&re!==void 0?re:document,Ne=_e.createElement("canvas");Ne.width=Math.max(1,T),Ne.height=Math.max(1,V);var Pe=Ne.getContext("2d");return Pe.drawImage(U,0,0,U.width,U.height,0,0,T,V),Ne},B.prototype.renderBackgroundImage=function(U){return c(this,void 0,void 0,function(){var T,V,re,_e,Ne,Pe;return h(this,function(yt){switch(yt.label){case 0:T=U.styles.backgroundImage.length-1,V=function(mt){var Ut,tr,an,ks,La,da,Ni,Ua,yi,Qr,ks,La,da,Ni,Ua,Jr,Xn,gn,cn,Fi,Zn,Rn,Hr,si,yi,On,ks,fo,Io,Ni,Ua,ll,La,da,Pl,cl,o,n,A,f,y,C;return h(this,function(I){switch(I.label){case 0:if(mt.type!==0)return[3,5];Ut=void 0,tr=mt.url,I.label=1;case 1:return I.trys.push([1,3,,4]),[4,re.context.cache.match(tr)];case 2:return Ut=I.sent(),[3,4];case 3:return I.sent(),re.context.logger.error("Error loading background-image "+tr),[3,4];case 4:return Ut&&(an=cu(U,T,[Ut.width,Ut.height,Ut.width/Ut.height]),ks=an[0],La=an[1],da=an[2],Ni=an[3],Ua=an[4],yi=re.ctx.createPattern(re.resizeImage(Ut,Ni,Ua),"repeat"),re.renderRepeat(ks,yi,La,da)),[3,6];case 5:wc(mt)?(Qr=cu(U,T,[null,null,null]),ks=Qr[0],La=Qr[1],da=Qr[2],Ni=Qr[3],Ua=Qr[4],Jr=Oo(mt.angle,Ni,Ua),Xn=Jr[0],gn=Jr[1],cn=Jr[2],Fi=Jr[3],Zn=Jr[4],Rn=document.createElement("canvas"),Rn.width=Ni,Rn.height=Ua,Hr=Rn.getContext("2d"),si=Hr.createLinearGradient(gn,Fi,cn,Zn),fs(mt.stops,Xn).forEach(function(D){return si.addColorStop(D.stop,ss(D.color))}),Hr.fillStyle=si,Hr.fillRect(0,0,Ni,Ua),Ni>0&&Ua>0&&(yi=re.ctx.createPattern(Rn,"repeat"),re.renderRepeat(ks,yi,La,da))):Oc(mt)&&(On=cu(U,T,[null,null,null]),ks=On[0],fo=On[1],Io=On[2],Ni=On[3],Ua=On[4],ll=mt.position.length===0?[Da]:mt.position,La=hi(ll[0],Ni),da=hi(ll[ll.length-1],Ua),Pl=Ao(mt,La,da,Ni,Ua),cl=Pl[0],o=Pl[1],cl>0&&o>0&&(n=re.ctx.createRadialGradient(fo+La,Io+da,0,fo+La,Io+da,cl),fs(mt.stops,cl*2).forEach(function(D){return n.addColorStop(D.stop,ss(D.color))}),re.path(ks),re.ctx.fillStyle=n,cl!==o?(A=U.bounds.left+.5*U.bounds.width,f=U.bounds.top+.5*U.bounds.height,y=o/cl,C=1/y,re.ctx.save(),re.ctx.translate(A,f),re.ctx.transform(1,0,0,y,0,0),re.ctx.translate(-A,-f),re.ctx.fillRect(fo,C*(Io-f)+f,Ni,Ua*C),re.ctx.restore()):re.ctx.fill())),I.label=6;case 6:return T--,[2]}})},re=this,_e=0,Ne=U.styles.backgroundImage.slice(0).reverse(),yt.label=1;case 1:return _e<Ne.length?(Pe=Ne[_e],[5,V(Pe)]):[3,4];case 2:yt.sent(),yt.label=3;case 3:return _e++,[3,1];case 4:return[2]}})})},B.prototype.renderSolidBorder=function(U,T,V){return c(this,void 0,void 0,function(){return h(this,function(re){return this.path(_f(V,T)),this.ctx.fillStyle=ss(U),this.ctx.fill(),[2]})})},B.prototype.renderDoubleBorder=function(U,T,V,re){return c(this,void 0,void 0,function(){var _e,Ne;return h(this,function(Pe){switch(Pe.label){case 0:return T<3?[4,this.renderSolidBorder(U,V,re)]:[3,2];case 1:return Pe.sent(),[2];case 2:return _e=Rd(re,V),this.path(_e),this.ctx.fillStyle=ss(U),this.ctx.fill(),Ne=am(re,V),this.path(Ne),this.ctx.fill(),[2]}})})},B.prototype.renderNodeBackgroundAndBorders=function(U){return c(this,void 0,void 0,function(){var T,V,re,_e,Ne,Pe,yt,mt,Ut=this;return h(this,function(tr){switch(tr.label){case 0:return this.applyEffects(U.getEffects(2)),T=U.container.styles,V=!oo(T.backgroundColor)||T.backgroundImage.length,re=[{style:T.borderTopStyle,color:T.borderTopColor,width:T.borderTopWidth},{style:T.borderRightStyle,color:T.borderRightColor,width:T.borderRightWidth},{style:T.borderBottomStyle,color:T.borderBottomColor,width:T.borderBottomWidth},{style:T.borderLeftStyle,color:T.borderLeftColor,width:T.borderLeftWidth}],_e=Vd(uu(T.backgroundClip,0),U.curves),V||T.boxShadow.length?(this.ctx.save(),this.path(_e),this.ctx.clip(),oo(T.backgroundColor)||(this.ctx.fillStyle=ss(T.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(U.container)]):[3,2];case 1:tr.sent(),this.ctx.restore(),T.boxShadow.slice(0).reverse().forEach(function(an){Ut.ctx.save();var Qr=Eh(U.curves),Jr=an.inset?0:cm,Xn=Nd(Qr,-Jr+(an.inset?1:-1)*an.spread.number,(an.inset?1:-1)*an.spread.number,an.spread.number*(an.inset?-2:2),an.spread.number*(an.inset?-2:2));an.inset?(Ut.path(Qr),Ut.ctx.clip(),Ut.mask(Xn)):(Ut.mask(Qr),Ut.ctx.clip(),Ut.path(Xn)),Ut.ctx.shadowOffsetX=an.offsetX.number+Jr,Ut.ctx.shadowOffsetY=an.offsetY.number,Ut.ctx.shadowColor=ss(an.color),Ut.ctx.shadowBlur=an.blur.number,Ut.ctx.fillStyle=an.inset?ss(an.color):"rgba(0,0,0,1)",Ut.ctx.fill(),Ut.ctx.restore()}),tr.label=2;case 2:Ne=0,Pe=0,yt=re,tr.label=3;case 3:return Pe<yt.length?(mt=yt[Pe],mt.style!==0&&!oo(mt.color)&&mt.width>0?mt.style!==2?[3,5]:[4,this.renderDashedDottedBorder(mt.color,mt.width,Ne,U.curves,2)]:[3,11]):[3,13];case 4:return tr.sent(),[3,11];case 5:return mt.style!==3?[3,7]:[4,this.renderDashedDottedBorder(mt.color,mt.width,Ne,U.curves,3)];case 6:return tr.sent(),[3,11];case 7:return mt.style!==4?[3,9]:[4,this.renderDoubleBorder(mt.color,mt.width,Ne,U.curves)];case 8:return tr.sent(),[3,11];case 9:return[4,this.renderSolidBorder(mt.color,Ne,U.curves)];case 10:tr.sent(),tr.label=11;case 11:Ne++,tr.label=12;case 12:return Pe++,[3,3];case 13:return[2]}})})},B.prototype.renderDashedDottedBorder=function(U,T,V,re,_e){return c(this,void 0,void 0,function(){var Ne,Pe,yt,mt,Ut,tr,an,Qr,Jr,Xn,gn,cn,Fi,Zn,Rn,Hr,Rn,Hr;return h(this,function(si){return this.ctx.save(),Ne=om(re,V),Pe=_f(re,V),_e===2&&(this.path(Pe),this.ctx.clip()),za(Pe[0])?(yt=Pe[0].start.x,mt=Pe[0].start.y):(yt=Pe[0].x,mt=Pe[0].y),za(Pe[1])?(Ut=Pe[1].end.x,tr=Pe[1].end.y):(Ut=Pe[1].x,tr=Pe[1].y),V===0||V===2?an=Math.abs(yt-Ut):an=Math.abs(mt-tr),this.ctx.beginPath(),_e===3?this.formatPath(Ne):this.formatPath(Pe.slice(0,2)),Qr=T<3?T*3:T*2,Jr=T<3?T*2:T,_e===3&&(Qr=T,Jr=T),Xn=!0,an<=Qr*2?Xn=!1:an<=Qr*2+Jr?(gn=an/(2*Qr+Jr),Qr*=gn,Jr*=gn):(cn=Math.floor((an+Jr)/(Qr+Jr)),Fi=(an-cn*Qr)/(cn-1),Zn=(an-(cn+1)*Qr)/cn,Jr=Zn<=0||Math.abs(Jr-Fi)<Math.abs(Jr-Zn)?Fi:Zn),Xn&&(_e===3?this.ctx.setLineDash([0,Qr+Jr]):this.ctx.setLineDash([Qr,Jr])),_e===3?(this.ctx.lineCap="round",this.ctx.lineWidth=T):this.ctx.lineWidth=T*2+1.1,this.ctx.strokeStyle=ss(U),this.ctx.stroke(),this.ctx.setLineDash([]),_e===2&&(za(Pe[0])&&(Rn=Pe[3],Hr=Pe[0],this.ctx.beginPath(),this.formatPath([new rn(Rn.end.x,Rn.end.y),new rn(Hr.start.x,Hr.start.y)]),this.ctx.stroke()),za(Pe[1])&&(Rn=Pe[1],Hr=Pe[2],this.ctx.beginPath(),this.formatPath([new rn(Rn.end.x,Rn.end.y),new rn(Hr.start.x,Hr.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},B.prototype.render=function(U){return c(this,void 0,void 0,function(){var T;return h(this,function(V){switch(V.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=ss(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),T=jd(U),[4,this.renderStack(T)];case 1:return V.sent(),this.applyEffects([]),[2,this.canvas]}})})},B}(Uh),Hd=function(F){return F instanceof gh||F instanceof dd?!0:F instanceof Qu&&F.type!==Uu&&F.type!==mh},Vd=function(F,B){switch(F){case 0:return Eh(B);case 2:return kd(B);case 1:default:return ku(B)}},um=function(F){switch(F){case 1:return"center";case 2:return"right";case 0:default:return"left"}},hm=["-apple-system","system-ui"],fm=function(F){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?F.filter(function(B){return hm.indexOf(B)===-1}):F},Lh=function(F){s(B,F);function B(U,T){var V=F.call(this,U,T)||this;return V.canvas=T.canvas?T.canvas:document.createElement("canvas"),V.ctx=V.canvas.getContext("2d"),V.options=T,V.canvas.width=Math.floor(T.width*T.scale),V.canvas.height=Math.floor(T.height*T.scale),V.canvas.style.width=T.width+"px",V.canvas.style.height=T.height+"px",V.ctx.scale(V.options.scale,V.options.scale),V.ctx.translate(-T.x,-T.y),V.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+T.width+"x"+T.height+" at "+T.x+","+T.y+") with scale "+T.scale),V}return B.prototype.render=function(U){return c(this,void 0,void 0,function(){var T,V;return h(this,function(re){switch(re.label){case 0:return T=Zc(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,U),[4,bf(T)];case 1:return V=re.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=ss(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(V,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},B}(Uh),bf=function(F){return new Promise(function(B,U){var T=new Image;T.onload=function(){B(T)},T.onerror=U,T.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(F))})},dm=function(){function F(B){var U=B.id,T=B.enabled;this.id=U,this.enabled=T,this.start=Date.now()}return F.prototype.debug=function(){for(var B=[],U=0;U<arguments.length;U++)B[U]=arguments[U];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,a([this.id,this.getTime()+"ms"],B)):this.info.apply(this,B))},F.prototype.getTime=function(){return Date.now()-this.start},F.prototype.info=function(){for(var B=[],U=0;U<arguments.length;U++)B[U]=arguments[U];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,a([this.id,this.getTime()+"ms"],B))},F.prototype.warn=function(){for(var B=[],U=0;U<arguments.length;U++)B[U]=arguments[U];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,a([this.id,this.getTime()+"ms"],B)):this.info.apply(this,B))},F.prototype.error=function(){for(var B=[],U=0;U<arguments.length;U++)B[U]=arguments[U];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,a([this.id,this.getTime()+"ms"],B)):this.info.apply(this,B))},F.instances={},F}(),xf=function(){function F(B,U){var T;this.windowBounds=U,this.instanceName="#"+F.instanceCount++,this.logger=new dm({id:this.instanceName,enabled:B.logging}),this.cache=(T=B.cache)!==null&&T!==void 0?T:new tm(this,B)}return F.instanceCount=1,F}(),Bf=function(F,B){return B===void 0&&(B={}),fu(F,B)};typeof window<"u"&&Ld.setContext(window);var fu=function(F,B){return c(void 0,void 0,void 0,function(){var U,T,V,re,_e,Ne,Pe,yt,mt,Ut,tr,an,Qr,Jr,Xn,gn,cn,Fi,Zn,Rn,si,Hr,si,yi,On,ks,fo,Io,Ni,Ua,ll,La,da,Pl,cl,o,n,A,f,y;return h(this,function(C){switch(C.label){case 0:if(!F||typeof F!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(U=F.ownerDocument,!U)throw new Error("Element is not attached to a Document");if(T=U.defaultView,!T)throw new Error("Document is not attached to a Window");return V={allowTaint:(yi=B.allowTaint)!==null&&yi!==void 0?yi:!1,imageTimeout:(On=B.imageTimeout)!==null&&On!==void 0?On:15e3,proxy:B.proxy,useCORS:(ks=B.useCORS)!==null&&ks!==void 0?ks:!1},re=l({logging:(fo=B.logging)!==null&&fo!==void 0?fo:!0,cache:B.cache},V),_e={windowWidth:(Io=B.windowWidth)!==null&&Io!==void 0?Io:T.innerWidth,windowHeight:(Ni=B.windowHeight)!==null&&Ni!==void 0?Ni:T.innerHeight,scrollX:(Ua=B.scrollX)!==null&&Ua!==void 0?Ua:T.pageXOffset,scrollY:(ll=B.scrollY)!==null&&ll!==void 0?ll:T.pageYOffset},Ne=new d(_e.scrollX,_e.scrollY,_e.windowWidth,_e.windowHeight),Pe=new xf(re,Ne),yt=(La=B.foreignObjectRendering)!==null&&La!==void 0?La:!1,mt={allowTaint:(da=B.allowTaint)!==null&&da!==void 0?da:!1,onclone:B.onclone,ignoreElements:B.ignoreElements,inlineImages:yt,copyStyles:yt},Pe.logger.debug("Starting document clone with size "+Ne.width+"x"+Ne.height+" scrolled to "+-Ne.left+","+-Ne.top),Ut=new Os(Pe,F,mt),tr=Ut.clonedReferenceElement,tr?[4,Ut.toIFrame(U,Ne)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return an=C.sent(),Qr=of(tr)||gd(tr)?p(tr.ownerDocument):_(Pe,tr),Jr=Qr.width,Xn=Qr.height,gn=Qr.left,cn=Qr.top,Fi=pm(Pe,tr,B.backgroundColor),Zn={canvas:B.canvas,backgroundColor:Fi,scale:(cl=(Pl=B.scale)!==null&&Pl!==void 0?Pl:T.devicePixelRatio)!==null&&cl!==void 0?cl:1,x:((o=B.x)!==null&&o!==void 0?o:0)+gn,y:((n=B.y)!==null&&n!==void 0?n:0)+cn,width:(A=B.width)!==null&&A!==void 0?A:Math.ceil(Jr),height:(f=B.height)!==null&&f!==void 0?f:Math.ceil(Xn)},yt?(Pe.logger.debug("Document cloned, using foreign object rendering"),si=new Lh(Pe,Zn),[4,si.render(tr)]):[3,3];case 2:return Rn=C.sent(),[3,5];case 3:return Pe.logger.debug("Document cloned, element located at "+gn+","+cn+" with size "+Jr+"x"+Xn+" using computed rendering"),Pe.logger.debug("Starting DOM parsing"),Hr=md(Pe,tr),Fi===Hr.styles.backgroundColor&&(Hr.styles.backgroundColor=gi.TRANSPARENT),Pe.logger.debug("Starting renderer for element at "+Zn.x+","+Zn.y+" with size "+Zn.width+"x"+Zn.height),si=new Ac(Pe,Zn),[4,si.render(Hr)];case 4:Rn=C.sent(),C.label=5;case 5:return(!((y=B.removeContainer)!==null&&y!==void 0)||y)&&(Os.destroy(an)||Pe.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),Pe.logger.debug("Finished rendering"),[2,Rn]}})})},pm=function(F,B,U){var T=B.ownerDocument,V=T.documentElement?ua(F,getComputedStyle(T.documentElement).backgroundColor):gi.TRANSPARENT,re=T.body?ua(F,getComputedStyle(T.body).backgroundColor):gi.TRANSPARENT,_e=typeof U=="string"?ua(F,U):U===null?gi.TRANSPARENT:4294967295;return B===T.documentElement?oo(V)?oo(re)?_e:re:V:_e};return Bf})}(bS)),Lp}/*!
 * html2pdf.js v0.10.1
 * Copyright (c) 2021 Erik Koopmans
 * Released under the MIT License.
 */(function(e,t){(function(s,l){e.exports=l(wS,xS())})(self,function(r,s){return function(){var l={"./src/plugin/hyperlinks.js":function(d,_,p){p.r(_),p("./node_modules/core-js/modules/web.dom-collections.for-each.js"),p("./node_modules/core-js/modules/es.string.link.js");var E=p("./src/worker.js"),w=p("./src/utils.js"),x=[],Q={toContainer:E.default.prototype.toContainer,toPdf:E.default.prototype.toPdf};E.default.prototype.toContainer=function(){return Q.toContainer.call(this).then(function(){if(this.opt.enableLinks){var k=this.prop.container,O=k.querySelectorAll("a"),G=(0,w.unitConvert)(k.getBoundingClientRect(),this.prop.pageSize.k);x=[],Array.prototype.forEach.call(O,function(K){for(var Z=K.getClientRects(),$=0;$<Z.length;$++){var fe=(0,w.unitConvert)(Z[$],this.prop.pageSize.k);fe.left-=G.left,fe.top-=G.top;var Ae=Math.floor(fe.top/this.prop.pageSize.inner.height)+1,ge=this.opt.margin[0]+fe.top%this.prop.pageSize.inner.height,he=this.opt.margin[1]+fe.left;x.push({page:Ae,top:ge,left:he,clientRect:fe,link:K})}},this)}})},E.default.prototype.toPdf=function(){return Q.toPdf.call(this).then(function(){if(this.opt.enableLinks){x.forEach(function(O){this.prop.pdf.setPage(O.page),this.prop.pdf.link(O.left,O.top,O.clientRect.width,O.clientRect.height,{url:O.link.href})},this);var k=this.prop.pdf.internal.getNumberOfPages();this.prop.pdf.setPage(k)}})}},"./src/plugin/jspdf-plugin.js":function(d,_,p){p.r(_),p("./node_modules/core-js/modules/es.symbol.js"),p("./node_modules/core-js/modules/es.symbol.description.js"),p("./node_modules/core-js/modules/es.object.to-string.js"),p("./node_modules/core-js/modules/es.symbol.iterator.js"),p("./node_modules/core-js/modules/es.array.iterator.js"),p("./node_modules/core-js/modules/es.string.iterator.js"),p("./node_modules/core-js/modules/web.dom-collections.iterator.js");var E=p("jspdf");function w(x){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?w=function(P){return typeof P}:w=function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},w(x)}E.jsPDF.getPageSize=function(x,Q,P){if(w(x)==="object"){var R=x;x=R.orientation,Q=R.unit||Q,P=R.format||P}Q=Q||"mm",P=P||"a4",x=(""+(x||"P")).toLowerCase();var k=(""+P).toLowerCase(),O={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(Q){case"pt":var G=1;break;case"mm":var G=72/25.4;break;case"cm":var G=72/2.54;break;case"in":var G=72;break;case"px":var G=72/96;break;case"pc":var G=12;break;case"em":var G=12;break;case"ex":var G=6;break;default:throw"Invalid unit: "+Q}if(O.hasOwnProperty(k))var K=O[k][1]/G,Z=O[k][0]/G;else try{var K=P[1],Z=P[0]}catch{throw new Error("Invalid format: "+P)}if(x==="p"||x==="portrait"){if(x="p",Z>K){var $=Z;Z=K,K=$}}else if(x==="l"||x==="landscape"){if(x="l",K>Z){var $=Z;Z=K,K=$}}else throw"Invalid orientation: "+x;var fe={width:Z,height:K,unit:Q,k:G};return fe},_.default=E.jsPDF},"./src/plugin/pagebreaks.js":function(d,_,p){p.r(_),p("./node_modules/core-js/modules/es.array.concat.js"),p("./node_modules/core-js/modules/es.array.slice.js"),p("./node_modules/core-js/modules/es.array.join.js"),p("./node_modules/core-js/modules/web.dom-collections.for-each.js"),p("./node_modules/core-js/modules/es.object.keys.js");var E=p("./src/worker.js"),w=p("./src/utils.js"),x={toContainer:E.default.prototype.toContainer};E.default.template.opt.pagebreak={mode:["css","legacy"],before:[],after:[],avoid:[]},E.default.prototype.toContainer=function(){return x.toContainer.call(this).then(function(){var R=this.prop.container,k=this.prop.pageSize.inner.px.height,O=[].concat(this.opt.pagebreak.mode),G={avoidAll:O.indexOf("avoid-all")!==-1,css:O.indexOf("css")!==-1,legacy:O.indexOf("legacy")!==-1},K={},Z=this;["before","after","avoid"].forEach(function(Ae){var ge=G.avoidAll&&Ae==="avoid";K[Ae]=ge?[]:[].concat(Z.opt.pagebreak[Ae]||[]),K[Ae].length>0&&(K[Ae]=Array.prototype.slice.call(R.querySelectorAll(K[Ae].join(", "))))});var $=R.querySelectorAll(".html2pdf__page-break");$=Array.prototype.slice.call($);var fe=R.querySelectorAll("*");Array.prototype.forEach.call(fe,function(ge){var he={before:!1,after:G.legacy&&$.indexOf(ge)!==-1,avoid:G.avoidAll};if(G.css){var ee=window.getComputedStyle(ge),ne=["always","page","left","right"],xe=["avoid","avoid-page"];he={before:he.before||ne.indexOf(ee.breakBefore||ee.pageBreakBefore)!==-1,after:he.after||ne.indexOf(ee.breakAfter||ee.pageBreakAfter)!==-1,avoid:he.avoid||xe.indexOf(ee.breakInside||ee.pageBreakInside)!==-1}}Object.keys(he).forEach(function(rt){he[rt]=he[rt]||K[rt].indexOf(ge)!==-1});var ve=ge.getBoundingClientRect();if(he.avoid&&!he.before){var ze=Math.floor(ve.top/k),Le=Math.floor(ve.bottom/k),Ke=Math.abs(ve.bottom-ve.top)/k;Le!==ze&&Ke<=1&&(he.before=!0)}if(he.before){var Ue=(0,w.createElement)("div",{style:{display:"block",height:k-ve.top%k+"px"}});ge.parentNode.insertBefore(Ue,ge)}if(he.after){var Ue=(0,w.createElement)("div",{style:{display:"block",height:k-ve.bottom%k+"px"}});ge.parentNode.insertBefore(Ue,ge.nextSibling)}})})}},"./src/utils.js":function(d,_,p){p.r(_),p.d(_,{objType:function(){return w},createElement:function(){return x},cloneNode:function(){return Q},unitConvert:function(){return P},toPx:function(){return R}}),p("./node_modules/core-js/modules/es.number.constructor.js"),p("./node_modules/core-js/modules/es.symbol.js"),p("./node_modules/core-js/modules/es.symbol.description.js"),p("./node_modules/core-js/modules/es.object.to-string.js"),p("./node_modules/core-js/modules/es.symbol.iterator.js"),p("./node_modules/core-js/modules/es.array.iterator.js"),p("./node_modules/core-js/modules/es.string.iterator.js"),p("./node_modules/core-js/modules/web.dom-collections.iterator.js");function E(k){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?E=function(G){return typeof G}:E=function(G){return G&&typeof Symbol=="function"&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G},E(k)}var w=function(O){var G=E(O);return G==="undefined"?"undefined":G==="string"||O instanceof String?"string":G==="number"||O instanceof Number?"number":G==="function"||O instanceof Function?"function":O&&O.constructor===Array?"array":O&&O.nodeType===1?"element":G==="object"?"object":"unknown"},x=function(O,G){var K=document.createElement(O);if(G.className&&(K.className=G.className),G.innerHTML){K.innerHTML=G.innerHTML;for(var Z=K.getElementsByTagName("script"),$=Z.length;$-- >0;null)Z[$].parentNode.removeChild(Z[$])}for(var fe in G.style)K.style[fe]=G.style[fe];return K},Q=function k(O,G){for(var K=O.nodeType===3?document.createTextNode(O.nodeValue):O.cloneNode(!1),Z=O.firstChild;Z;Z=Z.nextSibling)(G===!0||Z.nodeType!==1||Z.nodeName!=="SCRIPT")&&K.appendChild(k(Z,G));return O.nodeType===1&&(O.nodeName==="CANVAS"?(K.width=O.width,K.height=O.height,K.getContext("2d").drawImage(O,0,0)):(O.nodeName==="TEXTAREA"||O.nodeName==="SELECT")&&(K.value=O.value),K.addEventListener("load",function(){K.scrollTop=O.scrollTop,K.scrollLeft=O.scrollLeft},!0)),K},P=function(O,G){if(w(O)==="number")return O*72/96/G;var K={};for(var Z in O)K[Z]=O[Z]*72/96/G;return K},R=function(O,G){return Math.floor(O*G/72*96)}},"./src/worker.js":function(d,_,p){p.r(_),p("./node_modules/core-js/modules/es.object.assign.js"),p("./node_modules/core-js/modules/es.array.map.js"),p("./node_modules/core-js/modules/es.object.keys.js"),p("./node_modules/core-js/modules/es.array.concat.js"),p("./node_modules/core-js/modules/es.object.to-string.js"),p("./node_modules/core-js/modules/es.regexp.to-string.js"),p("./node_modules/core-js/modules/es.function.name.js"),p("./node_modules/core-js/modules/web.dom-collections.for-each.js");var E=p("jspdf"),w=p("html2canvas"),x=p("./src/utils.js"),Q=p("./node_modules/es6-promise/dist/es6-promise.js"),P=p.n(Q),R=P().Promise,k=function O(G){var K=Object.assign(O.convert(R.resolve()),JSON.parse(JSON.stringify(O.template))),Z=O.convert(R.resolve(),K);return Z=Z.setProgress(1,O,1,[O]),Z=Z.set(G),Z};k.prototype=Object.create(R.prototype),k.prototype.constructor=k,k.convert=function(G,K){return G.__proto__=K||k.prototype,G},k.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],image:{type:"jpeg",quality:.95},enableLinks:!0,html2canvas:{},jsPDF:{}}},k.prototype.from=function(G,K){function Z($){switch((0,x.objType)($)){case"string":return"string";case"element":return $.nodeName.toLowerCase==="canvas"?"canvas":"element";default:return"unknown"}}return this.then(function(){switch(K=K||Z(G),K){case"string":return this.set({src:(0,x.createElement)("div",{innerHTML:G})});case"element":return this.set({src:G});case"canvas":return this.set({canvas:G});case"img":return this.set({img:G});default:return this.error("Unknown source type.")}})},k.prototype.to=function(G){switch(G){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},k.prototype.toContainer=function(){var G=[function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}];return this.thenList(G).then(function(){var Z={position:"fixed",overflow:"hidden",zIndex:1e3,left:0,right:0,bottom:0,top:0,backgroundColor:"rgba(0,0,0,0.8)"},$={position:"absolute",width:this.prop.pageSize.inner.width+this.prop.pageSize.unit,left:0,right:0,top:0,height:"auto",margin:"auto",backgroundColor:"white"};Z.opacity=0;var fe=(0,x.cloneNode)(this.prop.src,this.opt.html2canvas.javascriptEnabled);this.prop.overlay=(0,x.createElement)("div",{className:"html2pdf__overlay",style:Z}),this.prop.container=(0,x.createElement)("div",{className:"html2pdf__container",style:$}),this.prop.container.appendChild(fe),this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay)})},k.prototype.toCanvas=function(){var G=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(G).then(function(){var Z=Object.assign({},this.opt.html2canvas);return delete Z.onrendered,w(this.prop.container,Z)}).then(function(Z){var $=this.opt.html2canvas.onrendered||function(){};$(Z),this.prop.canvas=Z,document.body.removeChild(this.prop.overlay)})},k.prototype.toImg=function(){var G=[function(){return this.prop.canvas||this.toCanvas()}];return this.thenList(G).then(function(){var Z=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=Z})},k.prototype.toPdf=function(){var G=[function(){return this.prop.canvas||this.toCanvas()}];return this.thenList(G).then(function(){var Z=this.prop.canvas,$=this.opt,fe=Z.height,Ae=Math.floor(Z.width*this.prop.pageSize.inner.ratio),ge=Math.ceil(fe/Ae),he=this.prop.pageSize.inner.height,ee=document.createElement("canvas"),ne=ee.getContext("2d");ee.width=Z.width,ee.height=Ae,this.prop.pdf=this.prop.pdf||new E.jsPDF($.jsPDF);for(var xe=0;xe<ge;xe++){xe===ge-1&&fe%Ae!==0&&(ee.height=fe%Ae,he=ee.height*this.prop.pageSize.inner.width/ee.width);var ve=ee.width,ze=ee.height;ne.fillStyle="white",ne.fillRect(0,0,ve,ze),ne.drawImage(Z,0,xe*Ae,ve,ze,0,0,ve,ze),xe&&this.prop.pdf.addPage();var Le=ee.toDataURL("image/"+$.image.type,$.image.quality);this.prop.pdf.addImage(Le,$.image.type,$.margin[1],$.margin[0],this.prop.pageSize.inner.width,he)}})},k.prototype.output=function(G,K,Z){return Z=Z||"pdf",Z.toLowerCase()==="img"||Z.toLowerCase()==="image"?this.outputImg(G,K):this.outputPdf(G,K)},k.prototype.outputPdf=function(G,K){var Z=[function(){return this.prop.pdf||this.toPdf()}];return this.thenList(Z).then(function(){return this.prop.pdf.output(G,K)})},k.prototype.outputImg=function(G,K){var Z=[function(){return this.prop.img||this.toImg()}];return this.thenList(Z).then(function(){switch(G){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+G+'" is not supported.'}})},k.prototype.save=function(G){var K=[function(){return this.prop.pdf||this.toPdf()}];return this.thenList(K).set(G?{filename:G}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},k.prototype.set=function(G){if((0,x.objType)(G)!=="object")return this;var K=Object.keys(G||{}).map(function(Z){switch(Z){case"margin":return this.setMargin.bind(this,G.margin);case"jsPDF":return function(){return this.opt.jsPDF=G.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,G.pageSize);default:return Z in k.template.prop?function(){this.prop[Z]=G[Z]}:function(){this.opt[Z]=G[Z]}}},this);return this.then(function(){return this.thenList(K)})},k.prototype.get=function(G,K){return this.then(function(){var $=G in k.template.prop?this.prop[G]:this.opt[G];return K?K($):$})},k.prototype.setMargin=function(G){return this.then(function(){switch((0,x.objType)(G)){case"number":G=[G,G,G,G];case"array":if(G.length===2&&(G=[G[0],G[1],G[0],G[1]]),G.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=G}).then(this.setPageSize)},k.prototype.setPageSize=function(G){return this.then(function(){G=G||E.jsPDF.getPageSize(this.opt.jsPDF),G.hasOwnProperty("inner")||(G.inner={width:G.width-this.opt.margin[1]-this.opt.margin[3],height:G.height-this.opt.margin[0]-this.opt.margin[2]},G.inner.px={width:(0,x.toPx)(G.inner.width,G.k),height:(0,x.toPx)(G.inner.height,G.k)},G.inner.ratio=G.inner.height/G.inner.width),this.prop.pageSize=G})},k.prototype.setProgress=function(G,K,Z,$){return G!=null&&(this.progress.val=G),K!=null&&(this.progress.state=K),Z!=null&&(this.progress.n=Z),$!=null&&(this.progress.stack=$),this.progress.ratio=this.progress.val/this.progress.state,this},k.prototype.updateProgress=function(G,K,Z,$){return this.setProgress(G?this.progress.val+G:null,K||null,Z?this.progress.n+Z:null,$?this.progress.stack.concat($):null)},k.prototype.then=function(G,K){var Z=this;return this.thenCore(G,K,function(fe,Ae){return Z.updateProgress(null,null,1,[fe]),R.prototype.then.call(this,function(he){return Z.updateProgress(null,fe),he}).then(fe,Ae).then(function(he){return Z.updateProgress(1),he})})},k.prototype.thenCore=function(G,K,Z){Z=Z||R.prototype.then;var $=this;G&&(G=G.bind($)),K&&(K=K.bind($));var fe=R.toString().indexOf("[native code]")!==-1&&R.name==="Promise",Ae=fe?$:k.convert(Object.assign({},$),R.prototype),ge=Z.call(Ae,G,K);return k.convert(ge,$.__proto__)},k.prototype.thenExternal=function(G,K){return R.prototype.then.call(this,G,K)},k.prototype.thenList=function(G){var K=this;return G.forEach(function($){K=K.thenCore($)}),K},k.prototype.catch=function(O){O&&(O=O.bind(this));var G=R.prototype.catch.call(this,O);return k.convert(G,this)},k.prototype.catchExternal=function(G){return R.prototype.catch.call(this,G)},k.prototype.error=function(G){return this.then(function(){throw new Error(G)})},k.prototype.using=k.prototype.set,k.prototype.saveAs=k.prototype.save,k.prototype.export=k.prototype.output,k.prototype.run=k.prototype.then,_.default=k},"./node_modules/core-js/internals/a-function.js":function(d){d.exports=function(_){if(typeof _!="function")throw TypeError(String(_)+" is not a function");return _}},"./node_modules/core-js/internals/a-possible-prototype.js":function(d,_,p){var E=p("./node_modules/core-js/internals/is-object.js");d.exports=function(w){if(!E(w)&&w!==null)throw TypeError("Can't set "+String(w)+" as a prototype");return w}},"./node_modules/core-js/internals/add-to-unscopables.js":function(d,_,p){var E=p("./node_modules/core-js/internals/well-known-symbol.js"),w=p("./node_modules/core-js/internals/object-create.js"),x=p("./node_modules/core-js/internals/object-define-property.js"),Q=E("unscopables"),P=Array.prototype;P[Q]==null&&x.f(P,Q,{configurable:!0,value:w(null)}),d.exports=function(R){P[Q][R]=!0}},"./node_modules/core-js/internals/an-object.js":function(d,_,p){var E=p("./node_modules/core-js/internals/is-object.js");d.exports=function(w){if(!E(w))throw TypeError(String(w)+" is not an object");return w}},"./node_modules/core-js/internals/array-for-each.js":function(d,_,p){var E=p("./node_modules/core-js/internals/array-iteration.js").forEach,w=p("./node_modules/core-js/internals/array-method-is-strict.js"),x=w("forEach");d.exports=x?[].forEach:function(P){return E(this,P,arguments.length>1?arguments[1]:void 0)}},"./node_modules/core-js/internals/array-includes.js":function(d,_,p){var E=p("./node_modules/core-js/internals/to-indexed-object.js"),w=p("./node_modules/core-js/internals/to-length.js"),x=p("./node_modules/core-js/internals/to-absolute-index.js"),Q=function(P){return function(R,k,O){var G=E(R),K=w(G.length),Z=x(O,K),$;if(P&&k!=k){for(;K>Z;)if($=G[Z++],$!=$)return!0}else for(;K>Z;Z++)if((P||Z in G)&&G[Z]===k)return P||Z||0;return!P&&-1}};d.exports={includes:Q(!0),indexOf:Q(!1)}},"./node_modules/core-js/internals/array-iteration.js":function(d,_,p){var E=p("./node_modules/core-js/internals/function-bind-context.js"),w=p("./node_modules/core-js/internals/indexed-object.js"),x=p("./node_modules/core-js/internals/to-object.js"),Q=p("./node_modules/core-js/internals/to-length.js"),P=p("./node_modules/core-js/internals/array-species-create.js"),R=[].push,k=function(O){var G=O==1,K=O==2,Z=O==3,$=O==4,fe=O==6,Ae=O==7,ge=O==5||fe;return function(he,ee,ne,xe){for(var ve=x(he),ze=w(ve),Le=E(ee,ne,3),Ke=Q(ze.length),Ue=0,rt=xe||P,je=G?rt(he,Ke):K||Ae?rt(he,0):void 0,St,te;Ke>Ue;Ue++)if((ge||Ue in ze)&&(St=ze[Ue],te=Le(St,Ue,ve),O))if(G)je[Ue]=te;else if(te)switch(O){case 3:return!0;case 5:return St;case 6:return Ue;case 2:R.call(je,St)}else switch(O){case 4:return!1;case 7:R.call(je,St)}return fe?-1:Z||$?$:je}};d.exports={forEach:k(0),map:k(1),filter:k(2),some:k(3),every:k(4),find:k(5),findIndex:k(6),filterReject:k(7)}},"./node_modules/core-js/internals/array-method-has-species-support.js":function(d,_,p){var E=p("./node_modules/core-js/internals/fails.js"),w=p("./node_modules/core-js/internals/well-known-symbol.js"),x=p("./node_modules/core-js/internals/engine-v8-version.js"),Q=w("species");d.exports=function(P){return x>=51||!E(function(){var R=[],k=R.constructor={};return k[Q]=function(){return{foo:1}},R[P](Boolean).foo!==1})}},"./node_modules/core-js/internals/array-method-is-strict.js":function(d,_,p){var E=p("./node_modules/core-js/internals/fails.js");d.exports=function(w,x){var Q=[][w];return!!Q&&E(function(){Q.call(null,x||function(){throw 1},1)})}},"./node_modules/core-js/internals/array-species-constructor.js":function(d,_,p){var E=p("./node_modules/core-js/internals/is-object.js"),w=p("./node_modules/core-js/internals/is-array.js"),x=p("./node_modules/core-js/internals/well-known-symbol.js"),Q=x("species");d.exports=function(P){var R;return w(P)&&(R=P.constructor,typeof R=="function"&&(R===Array||w(R.prototype))?R=void 0:E(R)&&(R=R[Q],R===null&&(R=void 0))),R===void 0?Array:R}},"./node_modules/core-js/internals/array-species-create.js":function(d,_,p){var E=p("./node_modules/core-js/internals/array-species-constructor.js");d.exports=function(w,x){return new(E(w))(x===0?0:x)}},"./node_modules/core-js/internals/classof-raw.js":function(d){var _={}.toString;d.exports=function(p){return _.call(p).slice(8,-1)}},"./node_modules/core-js/internals/classof.js":function(d,_,p){var E=p("./node_modules/core-js/internals/to-string-tag-support.js"),w=p("./node_modules/core-js/internals/classof-raw.js"),x=p("./node_modules/core-js/internals/well-known-symbol.js"),Q=x("toStringTag"),P=w(function(){return arguments}())=="Arguments",R=function(k,O){try{return k[O]}catch{}};d.exports=E?w:function(k){var O,G,K;return k===void 0?"Undefined":k===null?"Null":typeof(G=R(O=Object(k),Q))=="string"?G:P?w(O):(K=w(O))=="Object"&&typeof O.callee=="function"?"Arguments":K}},"./node_modules/core-js/internals/copy-constructor-properties.js":function(d,_,p){var E=p("./node_modules/core-js/internals/has.js"),w=p("./node_modules/core-js/internals/own-keys.js"),x=p("./node_modules/core-js/internals/object-get-own-property-descriptor.js"),Q=p("./node_modules/core-js/internals/object-define-property.js");d.exports=function(P,R){for(var k=w(R),O=Q.f,G=x.f,K=0;K<k.length;K++){var Z=k[K];E(P,Z)||O(P,Z,G(R,Z))}}},"./node_modules/core-js/internals/correct-prototype-getter.js":function(d,_,p){var E=p("./node_modules/core-js/internals/fails.js");d.exports=!E(function(){function w(){}return w.prototype.constructor=null,Object.getPrototypeOf(new w)!==w.prototype})},"./node_modules/core-js/internals/create-html.js":function(d,_,p){var E=p("./node_modules/core-js/internals/require-object-coercible.js"),w=p("./node_modules/core-js/internals/to-string.js"),x=/"/g;d.exports=function(Q,P,R,k){var O=w(E(Q)),G="<"+P;return R!==""&&(G+=" "+R+'="'+w(k).replace(x,"&quot;")+'"'),G+">"+O+"</"+P+">"}},"./node_modules/core-js/internals/create-iterator-constructor.js":function(d,_,p){var E=p("./node_modules/core-js/internals/iterators-core.js").IteratorPrototype,w=p("./node_modules/core-js/internals/object-create.js"),x=p("./node_modules/core-js/internals/create-property-descriptor.js"),Q=p("./node_modules/core-js/internals/set-to-string-tag.js"),P=p("./node_modules/core-js/internals/iterators.js"),R=function(){return this};d.exports=function(k,O,G){var K=O+" Iterator";return k.prototype=w(E,{next:x(1,G)}),Q(k,K,!1,!0),P[K]=R,k}},"./node_modules/core-js/internals/create-non-enumerable-property.js":function(d,_,p){var E=p("./node_modules/core-js/internals/descriptors.js"),w=p("./node_modules/core-js/internals/object-define-property.js"),x=p("./node_modules/core-js/internals/create-property-descriptor.js");d.exports=E?function(Q,P,R){return w.f(Q,P,x(1,R))}:function(Q,P,R){return Q[P]=R,Q}},"./node_modules/core-js/internals/create-property-descriptor.js":function(d){d.exports=function(_,p){return{enumerable:!(_&1),configurable:!(_&2),writable:!(_&4),value:p}}},"./node_modules/core-js/internals/create-property.js":function(d,_,p){var E=p("./node_modules/core-js/internals/to-property-key.js"),w=p("./node_modules/core-js/internals/object-define-property.js"),x=p("./node_modules/core-js/internals/create-property-descriptor.js");d.exports=function(Q,P,R){var k=E(P);k in Q?w.f(Q,k,x(0,R)):Q[k]=R}},"./node_modules/core-js/internals/define-iterator.js":function(d,_,p){var E=p("./node_modules/core-js/internals/export.js"),w=p("./node_modules/core-js/internals/create-iterator-constructor.js"),x=p("./node_modules/core-js/internals/object-get-prototype-of.js"),Q=p("./node_modules/core-js/internals/object-set-prototype-of.js"),P=p("./node_modules/core-js/internals/set-to-string-tag.js"),R=p("./node_modules/core-js/internals/create-non-enumerable-property.js"),k=p("./node_modules/core-js/internals/redefine.js"),O=p("./node_modules/core-js/internals/well-known-symbol.js"),G=p("./node_modules/core-js/internals/is-pure.js"),K=p("./node_modules/core-js/internals/iterators.js"),Z=p("./node_modules/core-js/internals/iterators-core.js"),$=Z.IteratorPrototype,fe=Z.BUGGY_SAFARI_ITERATORS,Ae=O("iterator"),ge="keys",he="values",ee="entries",ne=function(){return this};d.exports=function(xe,ve,ze,Le,Ke,Ue,rt){w(ze,ve,Le);var je=function(tt){if(tt===Ke&&Ve)return Ve;if(!fe&&tt in Fe)return Fe[tt];switch(tt){case ge:return function(){return new ze(this,tt)};case he:return function(){return new ze(this,tt)};case ee:return function(){return new ze(this,tt)}}return function(){return new ze(this)}},St=ve+" Iterator",te=!1,Fe=xe.prototype,Qe=Fe[Ae]||Fe["@@iterator"]||Ke&&Fe[Ke],Ve=!fe&&Qe||je(Ke),st=ve=="Array"&&Fe.entries||Qe,dt,Bt,Ge;if(st&&(dt=x(st.call(new xe)),$!==Object.prototype&&dt.next&&(!G&&x(dt)!==$&&(Q?Q(dt,$):typeof dt[Ae]!="function"&&R(dt,Ae,ne)),P(dt,St,!0,!0),G&&(K[St]=ne))),Ke==he&&Qe&&Qe.name!==he&&(te=!0,Ve=function(){return Qe.call(this)}),(!G||rt)&&Fe[Ae]!==Ve&&R(Fe,Ae,Ve),K[ve]=Ve,Ke)if(Bt={values:je(he),keys:Ue?Ve:je(ge),entries:je(ee)},rt)for(Ge in Bt)(fe||te||!(Ge in Fe))&&k(Fe,Ge,Bt[Ge]);else E({target:ve,proto:!0,forced:fe||te},Bt);return Bt}},"./node_modules/core-js/internals/define-well-known-symbol.js":function(d,_,p){var E=p("./node_modules/core-js/internals/path.js"),w=p("./node_modules/core-js/internals/has.js"),x=p("./node_modules/core-js/internals/well-known-symbol-wrapped.js"),Q=p("./node_modules/core-js/internals/object-define-property.js").f;d.exports=function(P){var R=E.Symbol||(E.Symbol={});w(R,P)||Q(R,P,{value:x.f(P)})}},"./node_modules/core-js/internals/descriptors.js":function(d,_,p){var E=p("./node_modules/core-js/internals/fails.js");d.exports=!E(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},"./node_modules/core-js/internals/document-create-element.js":function(d,_,p){var E=p("./node_modules/core-js/internals/global.js"),w=p("./node_modules/core-js/internals/is-object.js"),x=E.document,Q=w(x)&&w(x.createElement);d.exports=function(P){return Q?x.createElement(P):{}}},"./node_modules/core-js/internals/dom-iterables.js":function(d){d.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},"./node_modules/core-js/internals/engine-user-agent.js":function(d,_,p){var E=p("./node_modules/core-js/internals/get-built-in.js");d.exports=E("navigator","userAgent")||""},"./node_modules/core-js/internals/engine-v8-version.js":function(d,_,p){var E=p("./node_modules/core-js/internals/global.js"),w=p("./node_modules/core-js/internals/engine-user-agent.js"),x=E.process,Q=E.Deno,P=x&&x.versions||Q&&Q.version,R=P&&P.v8,k,O;R?(k=R.split("."),O=k[0]<4?1:k[0]+k[1]):w&&(k=w.match(/Edge\/(\d+)/),(!k||k[1]>=74)&&(k=w.match(/Chrome\/(\d+)/),k&&(O=k[1]))),d.exports=O&&+O},"./node_modules/core-js/internals/enum-bug-keys.js":function(d){d.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"./node_modules/core-js/internals/export.js":function(d,_,p){var E=p("./node_modules/core-js/internals/global.js"),w=p("./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,x=p("./node_modules/core-js/internals/create-non-enumerable-property.js"),Q=p("./node_modules/core-js/internals/redefine.js"),P=p("./node_modules/core-js/internals/set-global.js"),R=p("./node_modules/core-js/internals/copy-constructor-properties.js"),k=p("./node_modules/core-js/internals/is-forced.js");d.exports=function(O,G){var K=O.target,Z=O.global,$=O.stat,fe,Ae,ge,he,ee,ne;if(Z?Ae=E:$?Ae=E[K]||P(K,{}):Ae=(E[K]||{}).prototype,Ae)for(ge in G){if(ee=G[ge],O.noTargetGet?(ne=w(Ae,ge),he=ne&&ne.value):he=Ae[ge],fe=k(Z?ge:K+($?".":"#")+ge,O.forced),!fe&&he!==void 0){if(typeof ee==typeof he)continue;R(ee,he)}(O.sham||he&&he.sham)&&x(ee,"sham",!0),Q(Ae,ge,ee,O)}}},"./node_modules/core-js/internals/fails.js":function(d){d.exports=function(_){try{return!!_()}catch{return!0}}},"./node_modules/core-js/internals/function-bind-context.js":function(d,_,p){var E=p("./node_modules/core-js/internals/a-function.js");d.exports=function(w,x,Q){if(E(w),x===void 0)return w;switch(Q){case 0:return function(){return w.call(x)};case 1:return function(P){return w.call(x,P)};case 2:return function(P,R){return w.call(x,P,R)};case 3:return function(P,R,k){return w.call(x,P,R,k)}}return function(){return w.apply(x,arguments)}}},"./node_modules/core-js/internals/get-built-in.js":function(d,_,p){var E=p("./node_modules/core-js/internals/global.js"),w=function(x){return typeof x=="function"?x:void 0};d.exports=function(x,Q){return arguments.length<2?w(E[x]):E[x]&&E[x][Q]}},"./node_modules/core-js/internals/global.js":function(d){var _=function(p){return p&&p.Math==Math&&p};d.exports=_(typeof globalThis=="object"&&globalThis)||_(typeof window=="object"&&window)||_(typeof self=="object"&&self)||_(typeof Ol=="object"&&Ol)||function(){return this}()||Function("return this")()},"./node_modules/core-js/internals/has.js":function(d,_,p){var E=p("./node_modules/core-js/internals/to-object.js"),w={}.hasOwnProperty;d.exports=Object.hasOwn||function(Q,P){return w.call(E(Q),P)}},"./node_modules/core-js/internals/hidden-keys.js":function(d){d.exports={}},"./node_modules/core-js/internals/html.js":function(d,_,p){var E=p("./node_modules/core-js/internals/get-built-in.js");d.exports=E("document","documentElement")},"./node_modules/core-js/internals/ie8-dom-define.js":function(d,_,p){var E=p("./node_modules/core-js/internals/descriptors.js"),w=p("./node_modules/core-js/internals/fails.js"),x=p("./node_modules/core-js/internals/document-create-element.js");d.exports=!E&&!w(function(){return Object.defineProperty(x("div"),"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/internals/indexed-object.js":function(d,_,p){var E=p("./node_modules/core-js/internals/fails.js"),w=p("./node_modules/core-js/internals/classof-raw.js"),x="".split;d.exports=E(function(){return!Object("z").propertyIsEnumerable(0)})?function(Q){return w(Q)=="String"?x.call(Q,""):Object(Q)}:Object},"./node_modules/core-js/internals/inherit-if-required.js":function(d,_,p){var E=p("./node_modules/core-js/internals/is-object.js"),w=p("./node_modules/core-js/internals/object-set-prototype-of.js");d.exports=function(x,Q,P){var R,k;return w&&typeof(R=Q.constructor)=="function"&&R!==P&&E(k=R.prototype)&&k!==P.prototype&&w(x,k),x}},"./node_modules/core-js/internals/inspect-source.js":function(d,_,p){var E=p("./node_modules/core-js/internals/shared-store.js"),w=Function.toString;typeof E.inspectSource!="function"&&(E.inspectSource=function(x){return w.call(x)}),d.exports=E.inspectSource},"./node_modules/core-js/internals/internal-state.js":function(d,_,p){var E=p("./node_modules/core-js/internals/native-weak-map.js"),w=p("./node_modules/core-js/internals/global.js"),x=p("./node_modules/core-js/internals/is-object.js"),Q=p("./node_modules/core-js/internals/create-non-enumerable-property.js"),P=p("./node_modules/core-js/internals/has.js"),R=p("./node_modules/core-js/internals/shared-store.js"),k=p("./node_modules/core-js/internals/shared-key.js"),O=p("./node_modules/core-js/internals/hidden-keys.js"),G="Object already initialized",K=w.WeakMap,Z,$,fe,Ae=function(ze){return fe(ze)?$(ze):Z(ze,{})},ge=function(ze){return function(Le){var Ke;if(!x(Le)||(Ke=$(Le)).type!==ze)throw TypeError("Incompatible receiver, "+ze+" required");return Ke}};if(E||R.state){var he=R.state||(R.state=new K),ee=he.get,ne=he.has,xe=he.set;Z=function(ze,Le){if(ne.call(he,ze))throw new TypeError(G);return Le.facade=ze,xe.call(he,ze,Le),Le},$=function(ze){return ee.call(he,ze)||{}},fe=function(ze){return ne.call(he,ze)}}else{var ve=k("state");O[ve]=!0,Z=function(ze,Le){if(P(ze,ve))throw new TypeError(G);return Le.facade=ze,Q(ze,ve,Le),Le},$=function(ze){return P(ze,ve)?ze[ve]:{}},fe=function(ze){return P(ze,ve)}}d.exports={set:Z,get:$,has:fe,enforce:Ae,getterFor:ge}},"./node_modules/core-js/internals/is-array.js":function(d,_,p){var E=p("./node_modules/core-js/internals/classof-raw.js");d.exports=Array.isArray||function(x){return E(x)=="Array"}},"./node_modules/core-js/internals/is-forced.js":function(d,_,p){var E=p("./node_modules/core-js/internals/fails.js"),w=/#|\.prototype\./,x=function(O,G){var K=P[Q(O)];return K==k?!0:K==R?!1:typeof G=="function"?E(G):!!G},Q=x.normalize=function(O){return String(O).replace(w,".").toLowerCase()},P=x.data={},R=x.NATIVE="N",k=x.POLYFILL="P";d.exports=x},"./node_modules/core-js/internals/is-object.js":function(d){d.exports=function(_){return typeof _=="object"?_!==null:typeof _=="function"}},"./node_modules/core-js/internals/is-pure.js":function(d){d.exports=!1},"./node_modules/core-js/internals/is-symbol.js":function(d,_,p){var E=p("./node_modules/core-js/internals/get-built-in.js"),w=p("./node_modules/core-js/internals/use-symbol-as-uid.js");d.exports=w?function(x){return typeof x=="symbol"}:function(x){var Q=E("Symbol");return typeof Q=="function"&&Object(x)instanceof Q}},"./node_modules/core-js/internals/iterators-core.js":function(d,_,p){var E=p("./node_modules/core-js/internals/fails.js"),w=p("./node_modules/core-js/internals/object-get-prototype-of.js"),x=p("./node_modules/core-js/internals/create-non-enumerable-property.js"),Q=p("./node_modules/core-js/internals/has.js"),P=p("./node_modules/core-js/internals/well-known-symbol.js"),R=p("./node_modules/core-js/internals/is-pure.js"),k=P("iterator"),O=!1,G=function(){return this},K,Z,$;[].keys&&($=[].keys(),"next"in $?(Z=w(w($)),Z!==Object.prototype&&(K=Z)):O=!0);var fe=K==null||E(function(){var Ae={};return K[k].call(Ae)!==Ae});fe&&(K={}),(!R||fe)&&!Q(K,k)&&x(K,k,G),d.exports={IteratorPrototype:K,BUGGY_SAFARI_ITERATORS:O}},"./node_modules/core-js/internals/iterators.js":function(d){d.exports={}},"./node_modules/core-js/internals/native-symbol.js":function(d,_,p){var E=p("./node_modules/core-js/internals/engine-v8-version.js"),w=p("./node_modules/core-js/internals/fails.js");d.exports=!!Object.getOwnPropertySymbols&&!w(function(){var x=Symbol();return!String(x)||!(Object(x)instanceof Symbol)||!Symbol.sham&&E&&E<41})},"./node_modules/core-js/internals/native-weak-map.js":function(d,_,p){var E=p("./node_modules/core-js/internals/global.js"),w=p("./node_modules/core-js/internals/inspect-source.js"),x=E.WeakMap;d.exports=typeof x=="function"&&/native code/.test(w(x))},"./node_modules/core-js/internals/object-assign.js":function(d,_,p){var E=p("./node_modules/core-js/internals/descriptors.js"),w=p("./node_modules/core-js/internals/fails.js"),x=p("./node_modules/core-js/internals/object-keys.js"),Q=p("./node_modules/core-js/internals/object-get-own-property-symbols.js"),P=p("./node_modules/core-js/internals/object-property-is-enumerable.js"),R=p("./node_modules/core-js/internals/to-object.js"),k=p("./node_modules/core-js/internals/indexed-object.js"),O=Object.assign,G=Object.defineProperty;d.exports=!O||w(function(){if(E&&O({b:1},O(G({},"a",{enumerable:!0,get:function(){G(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var K={},Z={},$=Symbol(),fe="abcdefghijklmnopqrst";return K[$]=7,fe.split("").forEach(function(Ae){Z[Ae]=Ae}),O({},K)[$]!=7||x(O({},Z)).join("")!=fe})?function(Z,$){for(var fe=R(Z),Ae=arguments.length,ge=1,he=Q.f,ee=P.f;Ae>ge;)for(var ne=k(arguments[ge++]),xe=he?x(ne).concat(he(ne)):x(ne),ve=xe.length,ze=0,Le;ve>ze;)Le=xe[ze++],(!E||ee.call(ne,Le))&&(fe[Le]=ne[Le]);return fe}:O},"./node_modules/core-js/internals/object-create.js":function(d,_,p){var E=p("./node_modules/core-js/internals/an-object.js"),w=p("./node_modules/core-js/internals/object-define-properties.js"),x=p("./node_modules/core-js/internals/enum-bug-keys.js"),Q=p("./node_modules/core-js/internals/hidden-keys.js"),P=p("./node_modules/core-js/internals/html.js"),R=p("./node_modules/core-js/internals/document-create-element.js"),k=p("./node_modules/core-js/internals/shared-key.js"),O=">",G="<",K="prototype",Z="script",$=k("IE_PROTO"),fe=function(){},Ae=function(xe){return G+Z+O+xe+G+"/"+Z+O},ge=function(xe){xe.write(Ae("")),xe.close();var ve=xe.parentWindow.Object;return xe=null,ve},he=function(){var xe=R("iframe"),ve="java"+Z+":",ze;if(xe.style)return xe.style.display="none",P.appendChild(xe),xe.src=String(ve),ze=xe.contentWindow.document,ze.open(),ze.write(Ae("document.F=Object")),ze.close(),ze.F},ee,ne=function(){try{ee=new ActiveXObject("htmlfile")}catch{}ne=document.domain&&ee?ge(ee):he()||ge(ee);for(var xe=x.length;xe--;)delete ne[K][x[xe]];return ne()};Q[$]=!0,d.exports=Object.create||function(ve,ze){var Le;return ve!==null?(fe[K]=E(ve),Le=new fe,fe[K]=null,Le[$]=ve):Le=ne(),ze===void 0?Le:w(Le,ze)}},"./node_modules/core-js/internals/object-define-properties.js":function(d,_,p){var E=p("./node_modules/core-js/internals/descriptors.js"),w=p("./node_modules/core-js/internals/object-define-property.js"),x=p("./node_modules/core-js/internals/an-object.js"),Q=p("./node_modules/core-js/internals/object-keys.js");d.exports=E?Object.defineProperties:function(R,k){x(R);for(var O=Q(k),G=O.length,K=0,Z;G>K;)w.f(R,Z=O[K++],k[Z]);return R}},"./node_modules/core-js/internals/object-define-property.js":function(d,_,p){var E=p("./node_modules/core-js/internals/descriptors.js"),w=p("./node_modules/core-js/internals/ie8-dom-define.js"),x=p("./node_modules/core-js/internals/an-object.js"),Q=p("./node_modules/core-js/internals/to-property-key.js"),P=Object.defineProperty;_.f=E?P:function(k,O,G){if(x(k),O=Q(O),x(G),w)try{return P(k,O,G)}catch{}if("get"in G||"set"in G)throw TypeError("Accessors not supported");return"value"in G&&(k[O]=G.value),k}},"./node_modules/core-js/internals/object-get-own-property-descriptor.js":function(d,_,p){var E=p("./node_modules/core-js/internals/descriptors.js"),w=p("./node_modules/core-js/internals/object-property-is-enumerable.js"),x=p("./node_modules/core-js/internals/create-property-descriptor.js"),Q=p("./node_modules/core-js/internals/to-indexed-object.js"),P=p("./node_modules/core-js/internals/to-property-key.js"),R=p("./node_modules/core-js/internals/has.js"),k=p("./node_modules/core-js/internals/ie8-dom-define.js"),O=Object.getOwnPropertyDescriptor;_.f=E?O:function(K,Z){if(K=Q(K),Z=P(Z),k)try{return O(K,Z)}catch{}if(R(K,Z))return x(!w.f.call(K,Z),K[Z])}},"./node_modules/core-js/internals/object-get-own-property-names-external.js":function(d,_,p){var E=p("./node_modules/core-js/internals/to-indexed-object.js"),w=p("./node_modules/core-js/internals/object-get-own-property-names.js").f,x={}.toString,Q=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],P=function(R){try{return w(R)}catch{return Q.slice()}};d.exports.f=function(k){return Q&&x.call(k)=="[object Window]"?P(k):w(E(k))}},"./node_modules/core-js/internals/object-get-own-property-names.js":function(d,_,p){var E=p("./node_modules/core-js/internals/object-keys-internal.js"),w=p("./node_modules/core-js/internals/enum-bug-keys.js"),x=w.concat("length","prototype");_.f=Object.getOwnPropertyNames||function(P){return E(P,x)}},"./node_modules/core-js/internals/object-get-own-property-symbols.js":function(d,_){_.f=Object.getOwnPropertySymbols},"./node_modules/core-js/internals/object-get-prototype-of.js":function(d,_,p){var E=p("./node_modules/core-js/internals/has.js"),w=p("./node_modules/core-js/internals/to-object.js"),x=p("./node_modules/core-js/internals/shared-key.js"),Q=p("./node_modules/core-js/internals/correct-prototype-getter.js"),P=x("IE_PROTO"),R=Object.prototype;d.exports=Q?Object.getPrototypeOf:function(k){return k=w(k),E(k,P)?k[P]:typeof k.constructor=="function"&&k instanceof k.constructor?k.constructor.prototype:k instanceof Object?R:null}},"./node_modules/core-js/internals/object-keys-internal.js":function(d,_,p){var E=p("./node_modules/core-js/internals/has.js"),w=p("./node_modules/core-js/internals/to-indexed-object.js"),x=p("./node_modules/core-js/internals/array-includes.js").indexOf,Q=p("./node_modules/core-js/internals/hidden-keys.js");d.exports=function(P,R){var k=w(P),O=0,G=[],K;for(K in k)!E(Q,K)&&E(k,K)&&G.push(K);for(;R.length>O;)E(k,K=R[O++])&&(~x(G,K)||G.push(K));return G}},"./node_modules/core-js/internals/object-keys.js":function(d,_,p){var E=p("./node_modules/core-js/internals/object-keys-internal.js"),w=p("./node_modules/core-js/internals/enum-bug-keys.js");d.exports=Object.keys||function(Q){return E(Q,w)}},"./node_modules/core-js/internals/object-property-is-enumerable.js":function(d,_){var p={}.propertyIsEnumerable,E=Object.getOwnPropertyDescriptor,w=E&&!p.call({1:2},1);_.f=w?function(Q){var P=E(this,Q);return!!P&&P.enumerable}:p},"./node_modules/core-js/internals/object-set-prototype-of.js":function(d,_,p){var E=p("./node_modules/core-js/internals/an-object.js"),w=p("./node_modules/core-js/internals/a-possible-prototype.js");d.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var x=!1,Q={},P;try{P=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,P.call(Q,[]),x=Q instanceof Array}catch{}return function(k,O){return E(k),w(O),x?P.call(k,O):k.__proto__=O,k}}():void 0)},"./node_modules/core-js/internals/object-to-string.js":function(d,_,p){var E=p("./node_modules/core-js/internals/to-string-tag-support.js"),w=p("./node_modules/core-js/internals/classof.js");d.exports=E?{}.toString:function(){return"[object "+w(this)+"]"}},"./node_modules/core-js/internals/ordinary-to-primitive.js":function(d,_,p){var E=p("./node_modules/core-js/internals/is-object.js");d.exports=function(w,x){var Q,P;if(x==="string"&&typeof(Q=w.toString)=="function"&&!E(P=Q.call(w))||typeof(Q=w.valueOf)=="function"&&!E(P=Q.call(w))||x!=="string"&&typeof(Q=w.toString)=="function"&&!E(P=Q.call(w)))return P;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/internals/own-keys.js":function(d,_,p){var E=p("./node_modules/core-js/internals/get-built-in.js"),w=p("./node_modules/core-js/internals/object-get-own-property-names.js"),x=p("./node_modules/core-js/internals/object-get-own-property-symbols.js"),Q=p("./node_modules/core-js/internals/an-object.js");d.exports=E("Reflect","ownKeys")||function(R){var k=w.f(Q(R)),O=x.f;return O?k.concat(O(R)):k}},"./node_modules/core-js/internals/path.js":function(d,_,p){var E=p("./node_modules/core-js/internals/global.js");d.exports=E},"./node_modules/core-js/internals/redefine.js":function(d,_,p){var E=p("./node_modules/core-js/internals/global.js"),w=p("./node_modules/core-js/internals/create-non-enumerable-property.js"),x=p("./node_modules/core-js/internals/has.js"),Q=p("./node_modules/core-js/internals/set-global.js"),P=p("./node_modules/core-js/internals/inspect-source.js"),R=p("./node_modules/core-js/internals/internal-state.js"),k=R.get,O=R.enforce,G=String(String).split("String");(d.exports=function(K,Z,$,fe){var Ae=fe?!!fe.unsafe:!1,ge=fe?!!fe.enumerable:!1,he=fe?!!fe.noTargetGet:!1,ee;if(typeof $=="function"&&(typeof Z=="string"&&!x($,"name")&&w($,"name",Z),ee=O($),ee.source||(ee.source=G.join(typeof Z=="string"?Z:""))),K===E){ge?K[Z]=$:Q(Z,$);return}else Ae?!he&&K[Z]&&(ge=!0):delete K[Z];ge?K[Z]=$:w(K,Z,$)})(Function.prototype,"toString",function(){return typeof this=="function"&&k(this).source||P(this)})},"./node_modules/core-js/internals/regexp-flags.js":function(d,_,p){var E=p("./node_modules/core-js/internals/an-object.js");d.exports=function(){var w=E(this),x="";return w.global&&(x+="g"),w.ignoreCase&&(x+="i"),w.multiline&&(x+="m"),w.dotAll&&(x+="s"),w.unicode&&(x+="u"),w.sticky&&(x+="y"),x}},"./node_modules/core-js/internals/require-object-coercible.js":function(d){d.exports=function(_){if(_==null)throw TypeError("Can't call method on "+_);return _}},"./node_modules/core-js/internals/set-global.js":function(d,_,p){var E=p("./node_modules/core-js/internals/global.js");d.exports=function(w,x){try{Object.defineProperty(E,w,{value:x,configurable:!0,writable:!0})}catch{E[w]=x}return x}},"./node_modules/core-js/internals/set-to-string-tag.js":function(d,_,p){var E=p("./node_modules/core-js/internals/object-define-property.js").f,w=p("./node_modules/core-js/internals/has.js"),x=p("./node_modules/core-js/internals/well-known-symbol.js"),Q=x("toStringTag");d.exports=function(P,R,k){P&&!w(P=k?P:P.prototype,Q)&&E(P,Q,{configurable:!0,value:R})}},"./node_modules/core-js/internals/shared-key.js":function(d,_,p){var E=p("./node_modules/core-js/internals/shared.js"),w=p("./node_modules/core-js/internals/uid.js"),x=E("keys");d.exports=function(Q){return x[Q]||(x[Q]=w(Q))}},"./node_modules/core-js/internals/shared-store.js":function(d,_,p){var E=p("./node_modules/core-js/internals/global.js"),w=p("./node_modules/core-js/internals/set-global.js"),x="__core-js_shared__",Q=E[x]||w(x,{});d.exports=Q},"./node_modules/core-js/internals/shared.js":function(d,_,p){var E=p("./node_modules/core-js/internals/is-pure.js"),w=p("./node_modules/core-js/internals/shared-store.js");(d.exports=function(x,Q){return w[x]||(w[x]=Q!==void 0?Q:{})})("versions",[]).push({version:"3.16.0",mode:E?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},"./node_modules/core-js/internals/string-html-forced.js":function(d,_,p){var E=p("./node_modules/core-js/internals/fails.js");d.exports=function(w){return E(function(){var x=""[w]('"');return x!==x.toLowerCase()||x.split('"').length>3})}},"./node_modules/core-js/internals/string-multibyte.js":function(d,_,p){var E=p("./node_modules/core-js/internals/to-integer.js"),w=p("./node_modules/core-js/internals/to-string.js"),x=p("./node_modules/core-js/internals/require-object-coercible.js"),Q=function(P){return function(R,k){var O=w(x(R)),G=E(k),K=O.length,Z,$;return G<0||G>=K?P?"":void 0:(Z=O.charCodeAt(G),Z<55296||Z>56319||G+1===K||($=O.charCodeAt(G+1))<56320||$>57343?P?O.charAt(G):Z:P?O.slice(G,G+2):(Z-55296<<10)+($-56320)+65536)}};d.exports={codeAt:Q(!1),charAt:Q(!0)}},"./node_modules/core-js/internals/string-trim.js":function(d,_,p){var E=p("./node_modules/core-js/internals/require-object-coercible.js"),w=p("./node_modules/core-js/internals/to-string.js"),x=p("./node_modules/core-js/internals/whitespaces.js"),Q="["+x+"]",P=RegExp("^"+Q+Q+"*"),R=RegExp(Q+Q+"*$"),k=function(O){return function(G){var K=w(E(G));return O&1&&(K=K.replace(P,"")),O&2&&(K=K.replace(R,"")),K}};d.exports={start:k(1),end:k(2),trim:k(3)}},"./node_modules/core-js/internals/to-absolute-index.js":function(d,_,p){var E=p("./node_modules/core-js/internals/to-integer.js"),w=Math.max,x=Math.min;d.exports=function(Q,P){var R=E(Q);return R<0?w(R+P,0):x(R,P)}},"./node_modules/core-js/internals/to-indexed-object.js":function(d,_,p){var E=p("./node_modules/core-js/internals/indexed-object.js"),w=p("./node_modules/core-js/internals/require-object-coercible.js");d.exports=function(x){return E(w(x))}},"./node_modules/core-js/internals/to-integer.js":function(d){var _=Math.ceil,p=Math.floor;d.exports=function(E){return isNaN(E=+E)?0:(E>0?p:_)(E)}},"./node_modules/core-js/internals/to-length.js":function(d,_,p){var E=p("./node_modules/core-js/internals/to-integer.js"),w=Math.min;d.exports=function(x){return x>0?w(E(x),9007199254740991):0}},"./node_modules/core-js/internals/to-object.js":function(d,_,p){var E=p("./node_modules/core-js/internals/require-object-coercible.js");d.exports=function(w){return Object(E(w))}},"./node_modules/core-js/internals/to-primitive.js":function(d,_,p){var E=p("./node_modules/core-js/internals/is-object.js"),w=p("./node_modules/core-js/internals/is-symbol.js"),x=p("./node_modules/core-js/internals/ordinary-to-primitive.js"),Q=p("./node_modules/core-js/internals/well-known-symbol.js"),P=Q("toPrimitive");d.exports=function(R,k){if(!E(R)||w(R))return R;var O=R[P],G;if(O!==void 0){if(k===void 0&&(k="default"),G=O.call(R,k),!E(G)||w(G))return G;throw TypeError("Can't convert object to primitive value")}return k===void 0&&(k="number"),x(R,k)}},"./node_modules/core-js/internals/to-property-key.js":function(d,_,p){var E=p("./node_modules/core-js/internals/to-primitive.js"),w=p("./node_modules/core-js/internals/is-symbol.js");d.exports=function(x){var Q=E(x,"string");return w(Q)?Q:String(Q)}},"./node_modules/core-js/internals/to-string-tag-support.js":function(d,_,p){var E=p("./node_modules/core-js/internals/well-known-symbol.js"),w=E("toStringTag"),x={};x[w]="z",d.exports=String(x)==="[object z]"},"./node_modules/core-js/internals/to-string.js":function(d,_,p){var E=p("./node_modules/core-js/internals/is-symbol.js");d.exports=function(w){if(E(w))throw TypeError("Cannot convert a Symbol value to a string");return String(w)}},"./node_modules/core-js/internals/uid.js":function(d){var _=0,p=Math.random();d.exports=function(E){return"Symbol("+String(E===void 0?"":E)+")_"+(++_+p).toString(36)}},"./node_modules/core-js/internals/use-symbol-as-uid.js":function(d,_,p){var E=p("./node_modules/core-js/internals/native-symbol.js");d.exports=E&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},"./node_modules/core-js/internals/well-known-symbol-wrapped.js":function(d,_,p){var E=p("./node_modules/core-js/internals/well-known-symbol.js");_.f=E},"./node_modules/core-js/internals/well-known-symbol.js":function(d,_,p){var E=p("./node_modules/core-js/internals/global.js"),w=p("./node_modules/core-js/internals/shared.js"),x=p("./node_modules/core-js/internals/has.js"),Q=p("./node_modules/core-js/internals/uid.js"),P=p("./node_modules/core-js/internals/native-symbol.js"),R=p("./node_modules/core-js/internals/use-symbol-as-uid.js"),k=w("wks"),O=E.Symbol,G=R?O:O&&O.withoutSetter||Q;d.exports=function(K){return(!x(k,K)||!(P||typeof k[K]=="string"))&&(P&&x(O,K)?k[K]=O[K]:k[K]=G("Symbol."+K)),k[K]}},"./node_modules/core-js/internals/whitespaces.js":function(d){d.exports=`	
\v\f\r                　\u2028\u2029\uFEFF`},"./node_modules/core-js/modules/es.array.concat.js":function(d,_,p){var E=p("./node_modules/core-js/internals/export.js"),w=p("./node_modules/core-js/internals/fails.js"),x=p("./node_modules/core-js/internals/is-array.js"),Q=p("./node_modules/core-js/internals/is-object.js"),P=p("./node_modules/core-js/internals/to-object.js"),R=p("./node_modules/core-js/internals/to-length.js"),k=p("./node_modules/core-js/internals/create-property.js"),O=p("./node_modules/core-js/internals/array-species-create.js"),G=p("./node_modules/core-js/internals/array-method-has-species-support.js"),K=p("./node_modules/core-js/internals/well-known-symbol.js"),Z=p("./node_modules/core-js/internals/engine-v8-version.js"),$=K("isConcatSpreadable"),fe=9007199254740991,Ae="Maximum allowed index exceeded",ge=Z>=51||!w(function(){var xe=[];return xe[$]=!1,xe.concat()[0]!==xe}),he=G("concat"),ee=function(xe){if(!Q(xe))return!1;var ve=xe[$];return ve!==void 0?!!ve:x(xe)},ne=!ge||!he;E({target:"Array",proto:!0,forced:ne},{concat:function(ve){var ze=P(this),Le=O(ze,0),Ke=0,Ue,rt,je,St,te;for(Ue=-1,je=arguments.length;Ue<je;Ue++)if(te=Ue===-1?ze:arguments[Ue],ee(te)){if(St=R(te.length),Ke+St>fe)throw TypeError(Ae);for(rt=0;rt<St;rt++,Ke++)rt in te&&k(Le,Ke,te[rt])}else{if(Ke>=fe)throw TypeError(Ae);k(Le,Ke++,te)}return Le.length=Ke,Le}})},"./node_modules/core-js/modules/es.array.iterator.js":function(d,_,p){var E=p("./node_modules/core-js/internals/to-indexed-object.js"),w=p("./node_modules/core-js/internals/add-to-unscopables.js"),x=p("./node_modules/core-js/internals/iterators.js"),Q=p("./node_modules/core-js/internals/internal-state.js"),P=p("./node_modules/core-js/internals/define-iterator.js"),R="Array Iterator",k=Q.set,O=Q.getterFor(R);d.exports=P(Array,"Array",function(G,K){k(this,{type:R,target:E(G),index:0,kind:K})},function(){var G=O(this),K=G.target,Z=G.kind,$=G.index++;return!K||$>=K.length?(G.target=void 0,{value:void 0,done:!0}):Z=="keys"?{value:$,done:!1}:Z=="values"?{value:K[$],done:!1}:{value:[$,K[$]],done:!1}},"values"),x.Arguments=x.Array,w("keys"),w("values"),w("entries")},"./node_modules/core-js/modules/es.array.join.js":function(d,_,p){var E=p("./node_modules/core-js/internals/export.js"),w=p("./node_modules/core-js/internals/indexed-object.js"),x=p("./node_modules/core-js/internals/to-indexed-object.js"),Q=p("./node_modules/core-js/internals/array-method-is-strict.js"),P=[].join,R=w!=Object,k=Q("join",",");E({target:"Array",proto:!0,forced:R||!k},{join:function(G){return P.call(x(this),G===void 0?",":G)}})},"./node_modules/core-js/modules/es.array.map.js":function(d,_,p){var E=p("./node_modules/core-js/internals/export.js"),w=p("./node_modules/core-js/internals/array-iteration.js").map,x=p("./node_modules/core-js/internals/array-method-has-species-support.js"),Q=x("map");E({target:"Array",proto:!0,forced:!Q},{map:function(R){return w(this,R,arguments.length>1?arguments[1]:void 0)}})},"./node_modules/core-js/modules/es.array.slice.js":function(d,_,p){var E=p("./node_modules/core-js/internals/export.js"),w=p("./node_modules/core-js/internals/is-object.js"),x=p("./node_modules/core-js/internals/is-array.js"),Q=p("./node_modules/core-js/internals/to-absolute-index.js"),P=p("./node_modules/core-js/internals/to-length.js"),R=p("./node_modules/core-js/internals/to-indexed-object.js"),k=p("./node_modules/core-js/internals/create-property.js"),O=p("./node_modules/core-js/internals/well-known-symbol.js"),G=p("./node_modules/core-js/internals/array-method-has-species-support.js"),K=G("slice"),Z=O("species"),$=[].slice,fe=Math.max;E({target:"Array",proto:!0,forced:!K},{slice:function(ge,he){var ee=R(this),ne=P(ee.length),xe=Q(ge,ne),ve=Q(he===void 0?ne:he,ne),ze,Le,Ke;if(x(ee)&&(ze=ee.constructor,typeof ze=="function"&&(ze===Array||x(ze.prototype))?ze=void 0:w(ze)&&(ze=ze[Z],ze===null&&(ze=void 0)),ze===Array||ze===void 0))return $.call(ee,xe,ve);for(Le=new(ze===void 0?Array:ze)(fe(ve-xe,0)),Ke=0;xe<ve;xe++,Ke++)xe in ee&&k(Le,Ke,ee[xe]);return Le.length=Ke,Le}})},"./node_modules/core-js/modules/es.function.name.js":function(d,_,p){var E=p("./node_modules/core-js/internals/descriptors.js"),w=p("./node_modules/core-js/internals/object-define-property.js").f,x=Function.prototype,Q=x.toString,P=/^\s*function ([^ (]*)/,R="name";E&&!(R in x)&&w(x,R,{configurable:!0,get:function(){try{return Q.call(this).match(P)[1]}catch{return""}}})},"./node_modules/core-js/modules/es.number.constructor.js":function(d,_,p){var E=p("./node_modules/core-js/internals/descriptors.js"),w=p("./node_modules/core-js/internals/global.js"),x=p("./node_modules/core-js/internals/is-forced.js"),Q=p("./node_modules/core-js/internals/redefine.js"),P=p("./node_modules/core-js/internals/has.js"),R=p("./node_modules/core-js/internals/classof-raw.js"),k=p("./node_modules/core-js/internals/inherit-if-required.js"),O=p("./node_modules/core-js/internals/is-symbol.js"),G=p("./node_modules/core-js/internals/to-primitive.js"),K=p("./node_modules/core-js/internals/fails.js"),Z=p("./node_modules/core-js/internals/object-create.js"),$=p("./node_modules/core-js/internals/object-get-own-property-names.js").f,fe=p("./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,Ae=p("./node_modules/core-js/internals/object-define-property.js").f,ge=p("./node_modules/core-js/internals/string-trim.js").trim,he="Number",ee=w[he],ne=ee.prototype,xe=R(Z(ne))==he,ve=function(rt){if(O(rt))throw TypeError("Cannot convert a Symbol value to a number");var je=G(rt,"number"),St,te,Fe,Qe,Ve,st,dt,Bt;if(typeof je=="string"&&je.length>2){if(je=ge(je),St=je.charCodeAt(0),St===43||St===45){if(te=je.charCodeAt(2),te===88||te===120)return NaN}else if(St===48){switch(je.charCodeAt(1)){case 66:case 98:Fe=2,Qe=49;break;case 79:case 111:Fe=8,Qe=55;break;default:return+je}for(Ve=je.slice(2),st=Ve.length,dt=0;dt<st;dt++)if(Bt=Ve.charCodeAt(dt),Bt<48||Bt>Qe)return NaN;return parseInt(Ve,Fe)}}return+je};if(x(he,!ee(" 0o1")||!ee("0b1")||ee("+0x1"))){for(var ze=function(je){var St=arguments.length<1?0:je,te=this;return te instanceof ze&&(xe?K(function(){ne.valueOf.call(te)}):R(te)!=he)?k(new ee(ve(St)),te,ze):ve(St)},Le=E?$(ee):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),Ke=0,Ue;Le.length>Ke;Ke++)P(ee,Ue=Le[Ke])&&!P(ze,Ue)&&Ae(ze,Ue,fe(ee,Ue));ze.prototype=ne,ne.constructor=ze,Q(w,he,ze)}},"./node_modules/core-js/modules/es.object.assign.js":function(d,_,p){var E=p("./node_modules/core-js/internals/export.js"),w=p("./node_modules/core-js/internals/object-assign.js");E({target:"Object",stat:!0,forced:Object.assign!==w},{assign:w})},"./node_modules/core-js/modules/es.object.keys.js":function(d,_,p){var E=p("./node_modules/core-js/internals/export.js"),w=p("./node_modules/core-js/internals/to-object.js"),x=p("./node_modules/core-js/internals/object-keys.js"),Q=p("./node_modules/core-js/internals/fails.js"),P=Q(function(){x(1)});E({target:"Object",stat:!0,forced:P},{keys:function(k){return x(w(k))}})},"./node_modules/core-js/modules/es.object.to-string.js":function(d,_,p){var E=p("./node_modules/core-js/internals/to-string-tag-support.js"),w=p("./node_modules/core-js/internals/redefine.js"),x=p("./node_modules/core-js/internals/object-to-string.js");E||w(Object.prototype,"toString",x,{unsafe:!0})},"./node_modules/core-js/modules/es.regexp.to-string.js":function(d,_,p){var E=p("./node_modules/core-js/internals/redefine.js"),w=p("./node_modules/core-js/internals/an-object.js"),x=p("./node_modules/core-js/internals/to-string.js"),Q=p("./node_modules/core-js/internals/fails.js"),P=p("./node_modules/core-js/internals/regexp-flags.js"),R="toString",k=RegExp.prototype,O=k[R],G=Q(function(){return O.call({source:"a",flags:"b"})!="/a/b"}),K=O.name!=R;(G||K)&&E(RegExp.prototype,R,function(){var $=w(this),fe=x($.source),Ae=$.flags,ge=x(Ae===void 0&&$ instanceof RegExp&&!("flags"in k)?P.call($):Ae);return"/"+fe+"/"+ge},{unsafe:!0})},"./node_modules/core-js/modules/es.string.iterator.js":function(d,_,p){var E=p("./node_modules/core-js/internals/string-multibyte.js").charAt,w=p("./node_modules/core-js/internals/to-string.js"),x=p("./node_modules/core-js/internals/internal-state.js"),Q=p("./node_modules/core-js/internals/define-iterator.js"),P="String Iterator",R=x.set,k=x.getterFor(P);Q(String,"String",function(O){R(this,{type:P,string:w(O),index:0})},function(){var G=k(this),K=G.string,Z=G.index,$;return Z>=K.length?{value:void 0,done:!0}:($=E(K,Z),G.index+=$.length,{value:$,done:!1})})},"./node_modules/core-js/modules/es.string.link.js":function(d,_,p){var E=p("./node_modules/core-js/internals/export.js"),w=p("./node_modules/core-js/internals/create-html.js"),x=p("./node_modules/core-js/internals/string-html-forced.js");E({target:"String",proto:!0,forced:x("link")},{link:function(P){return w(this,"a","href",P)}})},"./node_modules/core-js/modules/es.symbol.description.js":function(d,_,p){var E=p("./node_modules/core-js/internals/export.js"),w=p("./node_modules/core-js/internals/descriptors.js"),x=p("./node_modules/core-js/internals/global.js"),Q=p("./node_modules/core-js/internals/has.js"),P=p("./node_modules/core-js/internals/is-object.js"),R=p("./node_modules/core-js/internals/object-define-property.js").f,k=p("./node_modules/core-js/internals/copy-constructor-properties.js"),O=x.Symbol;if(w&&typeof O=="function"&&(!("description"in O.prototype)||O().description!==void 0)){var G={},K=function(){var he=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),ee=this instanceof K?new O(he):he===void 0?O():O(he);return he===""&&(G[ee]=!0),ee};k(K,O);var Z=K.prototype=O.prototype;Z.constructor=K;var $=Z.toString,fe=String(O("test"))=="Symbol(test)",Ae=/^Symbol\((.*)\)[^)]+$/;R(Z,"description",{configurable:!0,get:function(){var he=P(this)?this.valueOf():this,ee=$.call(he);if(Q(G,he))return"";var ne=fe?ee.slice(7,-1):ee.replace(Ae,"$1");return ne===""?void 0:ne}}),E({global:!0,forced:!0},{Symbol:K})}},"./node_modules/core-js/modules/es.symbol.iterator.js":function(d,_,p){var E=p("./node_modules/core-js/internals/define-well-known-symbol.js");E("iterator")},"./node_modules/core-js/modules/es.symbol.js":function(d,_,p){var E=p("./node_modules/core-js/internals/export.js"),w=p("./node_modules/core-js/internals/global.js"),x=p("./node_modules/core-js/internals/get-built-in.js"),Q=p("./node_modules/core-js/internals/is-pure.js"),P=p("./node_modules/core-js/internals/descriptors.js"),R=p("./node_modules/core-js/internals/native-symbol.js"),k=p("./node_modules/core-js/internals/fails.js"),O=p("./node_modules/core-js/internals/has.js"),G=p("./node_modules/core-js/internals/is-array.js"),K=p("./node_modules/core-js/internals/is-object.js"),Z=p("./node_modules/core-js/internals/is-symbol.js"),$=p("./node_modules/core-js/internals/an-object.js"),fe=p("./node_modules/core-js/internals/to-object.js"),Ae=p("./node_modules/core-js/internals/to-indexed-object.js"),ge=p("./node_modules/core-js/internals/to-property-key.js"),he=p("./node_modules/core-js/internals/to-string.js"),ee=p("./node_modules/core-js/internals/create-property-descriptor.js"),ne=p("./node_modules/core-js/internals/object-create.js"),xe=p("./node_modules/core-js/internals/object-keys.js"),ve=p("./node_modules/core-js/internals/object-get-own-property-names.js"),ze=p("./node_modules/core-js/internals/object-get-own-property-names-external.js"),Le=p("./node_modules/core-js/internals/object-get-own-property-symbols.js"),Ke=p("./node_modules/core-js/internals/object-get-own-property-descriptor.js"),Ue=p("./node_modules/core-js/internals/object-define-property.js"),rt=p("./node_modules/core-js/internals/object-property-is-enumerable.js"),je=p("./node_modules/core-js/internals/create-non-enumerable-property.js"),St=p("./node_modules/core-js/internals/redefine.js"),te=p("./node_modules/core-js/internals/shared.js"),Fe=p("./node_modules/core-js/internals/shared-key.js"),Qe=p("./node_modules/core-js/internals/hidden-keys.js"),Ve=p("./node_modules/core-js/internals/uid.js"),st=p("./node_modules/core-js/internals/well-known-symbol.js"),dt=p("./node_modules/core-js/internals/well-known-symbol-wrapped.js"),Bt=p("./node_modules/core-js/internals/define-well-known-symbol.js"),Ge=p("./node_modules/core-js/internals/set-to-string-tag.js"),tt=p("./node_modules/core-js/internals/internal-state.js"),Qt=p("./node_modules/core-js/internals/array-iteration.js").forEach,ht=Fe("hidden"),Nt="Symbol",dr="prototype",Pt=st("toPrimitive"),Oe=tt.set,pr=tt.getterFor(Nt),sr=Object[dr],zt=w.Symbol,fr=x("JSON","stringify"),Br=Ke.f,vr=Ue.f,Gr=ze.f,rr=rt.f,xr=te("symbols"),Zr=te("op-symbols"),pn=te("string-to-symbol-registry"),vt=te("symbol-to-string-registry"),nt=te("wks"),bt=w.QObject,Ct=!bt||!bt[dr]||!bt[dr].findChild,jt=P&&k(function(){return ne(vr({},"a",{get:function(){return vr(this,"a",{value:7}).a}})).a!=7})?function(br,Cr,cr){var Kr=Br(sr,Cr);Kr&&delete sr[Cr],vr(br,Cr,cr),Kr&&br!==sr&&vr(sr,Cr,Kr)}:vr,er=function(br,Cr){var cr=xr[br]=ne(zt[dr]);return Oe(cr,{type:Nt,tag:br,description:Cr}),P||(cr.description=Cr),cr},Vr=function(Cr,cr,Kr){Cr===sr&&Vr(Zr,cr,Kr),$(Cr);var hn=ge(cr);return $(Kr),O(xr,hn)?(Kr.enumerable?(O(Cr,ht)&&Cr[ht][hn]&&(Cr[ht][hn]=!1),Kr=ne(Kr,{enumerable:ee(0,!1)})):(O(Cr,ht)||vr(Cr,ht,ee(1,{})),Cr[ht][hn]=!0),jt(Cr,hn,Kr)):vr(Cr,hn,Kr)},Fr=function(Cr,cr){$(Cr);var Kr=Ae(cr),hn=xe(Kr).concat(wn(Kr));return Qt(hn,function(xn){(!P||lr.call(Kr,xn))&&Vr(Cr,xn,Kr[xn])}),Cr},un=function(Cr,cr){return cr===void 0?ne(Cr):Fr(ne(Cr),cr)},lr=function(Cr){var cr=ge(Cr),Kr=rr.call(this,cr);return this===sr&&O(xr,cr)&&!O(Zr,cr)?!1:Kr||!O(this,cr)||!O(xr,cr)||O(this,ht)&&this[ht][cr]?Kr:!0},Er=function(Cr,cr){var Kr=Ae(Cr),hn=ge(cr);if(!(Kr===sr&&O(xr,hn)&&!O(Zr,hn))){var xn=Br(Kr,hn);return xn&&O(xr,hn)&&!(O(Kr,ht)&&Kr[ht][hn])&&(xn.enumerable=!0),xn}},An=function(Cr){var cr=Gr(Ae(Cr)),Kr=[];return Qt(cr,function(hn){!O(xr,hn)&&!O(Qe,hn)&&Kr.push(hn)}),Kr},wn=function(Cr){var cr=Cr===sr,Kr=Gr(cr?Zr:Ae(Cr)),hn=[];return Qt(Kr,function(xn){O(xr,xn)&&(!cr||O(sr,xn))&&hn.push(xr[xn])}),hn};if(R||(zt=function(){if(this instanceof zt)throw TypeError("Symbol is not a constructor");var Cr=!arguments.length||arguments[0]===void 0?void 0:he(arguments[0]),cr=Ve(Cr),Kr=function(hn){this===sr&&Kr.call(Zr,hn),O(this,ht)&&O(this[ht],cr)&&(this[ht][cr]=!1),jt(this,cr,ee(1,hn))};return P&&Ct&&jt(sr,cr,{configurable:!0,set:Kr}),er(cr,Cr)},St(zt[dr],"toString",function(){return pr(this).tag}),St(zt,"withoutSetter",function(br){return er(Ve(br),br)}),rt.f=lr,Ue.f=Vr,Ke.f=Er,ve.f=ze.f=An,Le.f=wn,dt.f=function(br){return er(st(br),br)},P&&(vr(zt[dr],"description",{configurable:!0,get:function(){return pr(this).description}}),Q||St(sr,"propertyIsEnumerable",lr,{unsafe:!0}))),E({global:!0,wrap:!0,forced:!R,sham:!R},{Symbol:zt}),Qt(xe(nt),function(br){Bt(br)}),E({target:Nt,stat:!0,forced:!R},{for:function(br){var Cr=he(br);if(O(pn,Cr))return pn[Cr];var cr=zt(Cr);return pn[Cr]=cr,vt[cr]=Cr,cr},keyFor:function(Cr){if(!Z(Cr))throw TypeError(Cr+" is not a symbol");if(O(vt,Cr))return vt[Cr]},useSetter:function(){Ct=!0},useSimple:function(){Ct=!1}}),E({target:"Object",stat:!0,forced:!R,sham:!P},{create:un,defineProperty:Vr,defineProperties:Fr,getOwnPropertyDescriptor:Er}),E({target:"Object",stat:!0,forced:!R},{getOwnPropertyNames:An,getOwnPropertySymbols:wn}),E({target:"Object",stat:!0,forced:k(function(){Le.f(1)})},{getOwnPropertySymbols:function(Cr){return Le.f(fe(Cr))}}),fr){var _i=!R||k(function(){var br=zt();return fr([br])!="[null]"||fr({a:br})!="{}"||fr(Object(br))!="{}"});E({target:"JSON",stat:!0,forced:_i},{stringify:function(Cr,cr,Kr){for(var hn=[Cr],xn=1,Sn;arguments.length>xn;)hn.push(arguments[xn++]);if(Sn=cr,!(!K(cr)&&Cr===void 0||Z(Cr)))return G(cr)||(cr=function(ji,tn){if(typeof Sn=="function"&&(tn=Sn.call(this,ji,tn)),!Z(tn))return tn}),hn[1]=cr,fr.apply(null,hn)}})}zt[dr][Pt]||je(zt[dr],Pt,zt[dr].valueOf),Ge(zt,Nt),Qe[ht]=!0},"./node_modules/core-js/modules/web.dom-collections.for-each.js":function(d,_,p){var E=p("./node_modules/core-js/internals/global.js"),w=p("./node_modules/core-js/internals/dom-iterables.js"),x=p("./node_modules/core-js/internals/array-for-each.js"),Q=p("./node_modules/core-js/internals/create-non-enumerable-property.js");for(var P in w){var R=E[P],k=R&&R.prototype;if(k&&k.forEach!==x)try{Q(k,"forEach",x)}catch{k.forEach=x}}},"./node_modules/core-js/modules/web.dom-collections.iterator.js":function(d,_,p){var E=p("./node_modules/core-js/internals/global.js"),w=p("./node_modules/core-js/internals/dom-iterables.js"),x=p("./node_modules/core-js/modules/es.array.iterator.js"),Q=p("./node_modules/core-js/internals/create-non-enumerable-property.js"),P=p("./node_modules/core-js/internals/well-known-symbol.js"),R=P("iterator"),k=P("toStringTag"),O=x.values;for(var G in w){var K=E[G],Z=K&&K.prototype;if(Z){if(Z[R]!==O)try{Q(Z,R,O)}catch{Z[R]=O}if(Z[k]||Q(Z,k,G),w[G]){for(var $ in x)if(Z[$]!==x[$])try{Q(Z,$,x[$])}catch{Z[$]=x[$]}}}}},"./node_modules/es6-promise/dist/es6-promise.js":function(d){/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */(function(_,p){d.exports=p()})(this,function(){function _(bt){var Ct=typeof bt;return bt!==null&&(Ct==="object"||Ct==="function")}function p(bt){return typeof bt=="function"}var E=void 0;Array.isArray?E=Array.isArray:E=function(bt){return Object.prototype.toString.call(bt)==="[object Array]"};var w=E,x=0,Q=void 0,P=void 0,R=function(Ct,jt){xe[x]=Ct,xe[x+1]=jt,x+=2,x===2&&(P?P(ve):Le())};function k(bt){P=bt}function O(bt){R=bt}var G=typeof window<"u"?window:void 0,K=G||{},Z=K.MutationObserver||K.WebKitMutationObserver,$=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",fe=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function Ae(){return function(){return process.nextTick(ve)}}function ge(){return typeof Q<"u"?function(){Q(ve)}:ne()}function he(){var bt=0,Ct=new Z(ve),jt=document.createTextNode("");return Ct.observe(jt,{characterData:!0}),function(){jt.data=bt=++bt%2}}function ee(){var bt=new MessageChannel;return bt.port1.onmessage=ve,function(){return bt.port2.postMessage(0)}}function ne(){var bt=setTimeout;return function(){return bt(ve,1)}}var xe=new Array(1e3);function ve(){for(var bt=0;bt<x;bt+=2){var Ct=xe[bt],jt=xe[bt+1];Ct(jt),xe[bt]=void 0,xe[bt+1]=void 0}x=0}function ze(){try{var bt=Function("return this")().require("vertx");return Q=bt.runOnLoop||bt.runOnContext,ge()}catch{return ne()}}var Le=void 0;$?Le=Ae():Z?Le=he():fe?Le=ee():G===void 0?Le=ze():Le=ne();function Ke(bt,Ct){var jt=this,er=new this.constructor(je);er[rt]===void 0&&fr(er);var Vr=jt._state;if(Vr){var Fr=arguments[Vr-1];R(function(){return Oe(Vr,er,Fr,jt._result)})}else dr(jt,er,bt,Ct);return er}function Ue(bt){var Ct=this;if(bt&&typeof bt=="object"&&bt.constructor===Ct)return bt;var jt=new Ct(je);return tt(jt,bt),jt}var rt=Math.random().toString(36).substring(2);function je(){}var St=void 0,te=1,Fe=2;function Qe(){return new TypeError("You cannot resolve a promise with itself")}function Ve(){return new TypeError("A promises callback cannot return that same promise.")}function st(bt,Ct,jt,er){try{bt.call(Ct,jt,er)}catch(Vr){return Vr}}function dt(bt,Ct,jt){R(function(er){var Vr=!1,Fr=st(jt,Ct,function(un){Vr||(Vr=!0,Ct!==un?tt(er,un):ht(er,un))},function(un){Vr||(Vr=!0,Nt(er,un))},"Settle: "+(er._label||" unknown promise"));!Vr&&Fr&&(Vr=!0,Nt(er,Fr))},bt)}function Bt(bt,Ct){Ct._state===te?ht(bt,Ct._result):Ct._state===Fe?Nt(bt,Ct._result):dr(Ct,void 0,function(jt){return tt(bt,jt)},function(jt){return Nt(bt,jt)})}function Ge(bt,Ct,jt){Ct.constructor===bt.constructor&&jt===Ke&&Ct.constructor.resolve===Ue?Bt(bt,Ct):jt===void 0?ht(bt,Ct):p(jt)?dt(bt,Ct,jt):ht(bt,Ct)}function tt(bt,Ct){if(bt===Ct)Nt(bt,Qe());else if(_(Ct)){var jt=void 0;try{jt=Ct.then}catch(er){Nt(bt,er);return}Ge(bt,Ct,jt)}else ht(bt,Ct)}function Qt(bt){bt._onerror&&bt._onerror(bt._result),Pt(bt)}function ht(bt,Ct){bt._state===St&&(bt._result=Ct,bt._state=te,bt._subscribers.length!==0&&R(Pt,bt))}function Nt(bt,Ct){bt._state===St&&(bt._state=Fe,bt._result=Ct,R(Qt,bt))}function dr(bt,Ct,jt,er){var Vr=bt._subscribers,Fr=Vr.length;bt._onerror=null,Vr[Fr]=Ct,Vr[Fr+te]=jt,Vr[Fr+Fe]=er,Fr===0&&bt._state&&R(Pt,bt)}function Pt(bt){var Ct=bt._subscribers,jt=bt._state;if(Ct.length!==0){for(var er=void 0,Vr=void 0,Fr=bt._result,un=0;un<Ct.length;un+=3)er=Ct[un],Vr=Ct[un+jt],er?Oe(jt,er,Vr,Fr):Vr(Fr);bt._subscribers.length=0}}function Oe(bt,Ct,jt,er){var Vr=p(jt),Fr=void 0,un=void 0,lr=!0;if(Vr){try{Fr=jt(er)}catch(Er){lr=!1,un=Er}if(Ct===Fr){Nt(Ct,Ve());return}}else Fr=er;Ct._state!==St||(Vr&&lr?tt(Ct,Fr):lr===!1?Nt(Ct,un):bt===te?ht(Ct,Fr):bt===Fe&&Nt(Ct,Fr))}function pr(bt,Ct){try{Ct(function(er){tt(bt,er)},function(er){Nt(bt,er)})}catch(jt){Nt(bt,jt)}}var sr=0;function zt(){return sr++}function fr(bt){bt[rt]=sr++,bt._state=void 0,bt._result=void 0,bt._subscribers=[]}function Br(){return new Error("Array Methods must be provided an Array")}var vr=function(){function bt(Ct,jt){this._instanceConstructor=Ct,this.promise=new Ct(je),this.promise[rt]||fr(this.promise),w(jt)?(this.length=jt.length,this._remaining=jt.length,this._result=new Array(this.length),this.length===0?ht(this.promise,this._result):(this.length=this.length||0,this._enumerate(jt),this._remaining===0&&ht(this.promise,this._result))):Nt(this.promise,Br())}return bt.prototype._enumerate=function(jt){for(var er=0;this._state===St&&er<jt.length;er++)this._eachEntry(jt[er],er)},bt.prototype._eachEntry=function(jt,er){var Vr=this._instanceConstructor,Fr=Vr.resolve;if(Fr===Ue){var un=void 0,lr=void 0,Er=!1;try{un=jt.then}catch(wn){Er=!0,lr=wn}if(un===Ke&&jt._state!==St)this._settledAt(jt._state,er,jt._result);else if(typeof un!="function")this._remaining--,this._result[er]=jt;else if(Vr===vt){var An=new Vr(je);Er?Nt(An,lr):Ge(An,jt,un),this._willSettleAt(An,er)}else this._willSettleAt(new Vr(function(wn){return wn(jt)}),er)}else this._willSettleAt(Fr(jt),er)},bt.prototype._settledAt=function(jt,er,Vr){var Fr=this.promise;Fr._state===St&&(this._remaining--,jt===Fe?Nt(Fr,Vr):this._result[er]=Vr),this._remaining===0&&ht(Fr,this._result)},bt.prototype._willSettleAt=function(jt,er){var Vr=this;dr(jt,void 0,function(Fr){return Vr._settledAt(te,er,Fr)},function(Fr){return Vr._settledAt(Fe,er,Fr)})},bt}();function Gr(bt){return new vr(this,bt).promise}function rr(bt){var Ct=this;return w(bt)?new Ct(function(jt,er){for(var Vr=bt.length,Fr=0;Fr<Vr;Fr++)Ct.resolve(bt[Fr]).then(jt,er)}):new Ct(function(jt,er){return er(new TypeError("You must pass an array to race."))})}function xr(bt){var Ct=this,jt=new Ct(je);return Nt(jt,bt),jt}function Zr(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function pn(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var vt=function(){function bt(Ct){this[rt]=zt(),this._result=this._state=void 0,this._subscribers=[],je!==Ct&&(typeof Ct!="function"&&Zr(),this instanceof bt?pr(this,Ct):pn())}return bt.prototype.catch=function(jt){return this.then(null,jt)},bt.prototype.finally=function(jt){var er=this,Vr=er.constructor;return p(jt)?er.then(function(Fr){return Vr.resolve(jt()).then(function(){return Fr})},function(Fr){return Vr.resolve(jt()).then(function(){throw Fr})}):er.then(jt,jt)},bt}();vt.prototype.then=Ke,vt.all=Gr,vt.race=rr,vt.resolve=Ue,vt.reject=xr,vt._setScheduler=k,vt._setAsap=O,vt._asap=R;function nt(){var bt=void 0;if(typeof Ol<"u")bt=Ol;else if(typeof self<"u")bt=self;else try{bt=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var Ct=bt.Promise;if(Ct){var jt=null;try{jt=Object.prototype.toString.call(Ct.resolve())}catch{}if(jt==="[object Promise]"&&!Ct.cast)return}bt.Promise=vt}return vt.polyfill=nt,vt.Promise=vt,vt})},html2canvas:function(d){d.exports=s},jspdf:function(d){d.exports=r}},c={};function h(d){var _=c[d];if(_!==void 0)return _.exports;var p=c[d]={exports:{}};return l[d].call(p.exports,p,p.exports,h),p.exports}(function(){h.n=function(d){var _=d&&d.__esModule?function(){return d.default}:function(){return d};return h.d(_,{a:_}),_}})(),function(){h.d=function(d,_){for(var p in _)h.o(_,p)&&!h.o(d,p)&&Object.defineProperty(d,p,{enumerable:!0,get:_[p]})}}(),function(){h.o=function(d,_){return Object.prototype.hasOwnProperty.call(d,_)}}(),function(){h.r=function(d){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(d,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(d,"__esModule",{value:!0})}}();var a={};return function(){/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/h.r(a);var d=h("./src/worker.js");h("./src/plugin/jspdf-plugin.js"),h("./src/plugin/pagebreaks.js"),h("./src/plugin/hyperlinks.js");var _=function p(E,w){var x=new p.Worker(w);return E?x.from(E).save():x};_.Worker=d.default,a.default=_}(),a=a.default,a}()})})(vF);const BS=xw(fg);const CS=e=>({parishname:e&1}),Oy=e=>({parishname:e[0]});function ES(e){let t,r,s,l,c,h,a,d,_,p,E,w,x,Q,P,R,k,O,G,K,Z,$,fe,Ae,ge,he,ee,ne,xe,ve,ze,Le,Ke,Ue,rt;const je=e[6].default,St=wA(je,e,e[5],Oy);return Q=new O1({props:{parishTitle:e[3]}}),k=new pF({props:{items:e[1],parishname:e[2]}}),fe=new O1({props:{parishTitle:e[3]}}),he=new yF({props:{items:e[1],parishname:e[2]}}),Le=new iv({}),{c(){t=Lt("div"),St&&St.c(),r=$t(),s=Lt("div"),l=Lt("div"),c=Lt("a"),c.textContent="Louisiana Locked Up: A Problem in Every Parish",h=Pr(`
      / `),a=Pr(e[2]),d=Pr(`
      Parish`),_=$t(),p=Lt("div"),E=Lt("h1"),E.textContent=`${e[2]} Parish`,w=$t(),x=Lt("section"),yr(Q.$$.fragment),P=$t(),R=Lt("section"),yr(k.$$.fragment),O=$t(),G=Lt("div"),K=Lt("h1"),K.textContent=`${e[2]} Parish`,Z=$t(),$=Lt("section"),yr(fe.$$.fragment),Ae=$t(),ge=Lt("section"),yr(he.$$.fragment),ee=$t(),ne=Lt("div"),xe=Lt("button"),xe.textContent=`Download ${e[2]} Parish Factsheet (.pdf)`,ve=$t(),ze=Lt("section"),yr(Le.$$.fragment),ue(c,"href","/louisiana-locked-up/"),ue(l,"id","breadcrumb"),ue(l,"class","svelte-4i2o49"),ue(s,"id","parish_header"),ue(s,"class","svelte-4i2o49"),ue(E,"class","parish__title svelte-4i2o49"),ue(x,"class","top svelte-4i2o49"),ue(R,"class","tabs"),ue(R,"data-html2canvas-ignore","true"),ue(p,"id","parish__container"),ue(p,"class","svelte-4i2o49"),ue(K,"class","parish__title_pdf svelte-4i2o49"),ue($,"class","top svelte-4i2o49"),ue(ge,"id","pdf-content"),ue(ge,"class","alltabs svelte-4i2o49"),ue(G,"id","parish__container__pdf"),ue(G,"class","svelte-4i2o49"),ue(xe,"id","download-button"),ue(xe,"class","svelte-4i2o49"),ue(ze,"class","about_data"),ue(ne,"id","parish_footer"),ue(ne,"class","svelte-4i2o49"),ue(t,"id","center"),ue(t,"class","svelte-4i2o49")},m(te,Fe){At(te,t,Fe),St&&St.m(t,null),it(t,r),it(t,s),it(s,l),it(l,c),it(l,h),it(l,a),it(l,d),it(t,_),it(t,p),it(p,E),it(p,w),it(p,x),mr(Q,x,null),it(p,P),it(p,R),mr(k,R,null),it(t,O),it(t,G),it(G,K),it(G,Z),it(G,$),mr(fe,$,null),it(G,Ae),it(G,ge),mr(he,ge,null),it(t,ee),it(t,ne),it(ne,xe),it(ne,ve),it(ne,ze),mr(Le,ze,null),Ke=!0,Ue||(rt=es(xe,"click",e[4]),Ue=!0)},p(te,[Fe]){St&&St.p&&(!Ke||Fe&33)&&xA(St,je,te,te[5],Ke?bA(je,te[5],Fe,CS):BA(te[5]),Oy);const Qe={};Fe&2&&(Qe.items=te[1]),k.$set(Qe);const Ve={};Fe&2&&(Ve.items=te[1]),he.$set(Ve)},i(te){Ke||(Mt(St,te),Mt(Q.$$.fragment,te),Mt(k.$$.fragment,te),Mt(fe.$$.fragment,te),Mt(he.$$.fragment,te),Mt(Le.$$.fragment,te),Ke=!0)},o(te){Gt(St,te),Gt(Q.$$.fragment,te),Gt(k.$$.fragment,te),Gt(fe.$$.fragment,te),Gt(he.$$.fragment,te),Gt(Le.$$.fragment,te),Ke=!1},d(te){te&&at(t),St&&St.d(te),gr(Q),gr(k),gr(fe),gr(he),gr(Le),Ue=!1,rt()}}}function FS(e,t,r){let{$$slots:s={},$$scope:l}=t;$h();let{params:c}=t;const h=async()=>{};let a=c.id,d=[],_=a,p=[];Wa(async()=>{window.scrollTo(0,0),h(),d=(await(await fetch("https://vera-insights-data-viz.s3.amazonaws.com/california/california.json")).json()).features,d.filter(Q=>Q.properties.NAME_condensed===a),a=="Catahoula"||a=="Iberia"?r(1,p=[{label:"Jail and Prisons",value:1,component:ey},{label:"Pretrial",value:3,component:Ay},{label:"Budget",value:4,component:ly}]):r(1,p=[{label:"Jail and Prisons",value:1,component:ey},{label:"Arrests",value:2,component:hF},{label:"Pretrial",value:3,component:Ay},{label:"Budget",value:4,component:ly}])});function E(){var x=document.getElementById("parish__container__pdf").cloneNode(!0);Pa(x).style("display","block"),BS().from(x).set({margin:[.5,1,.5,1],filename:a+" Parish Factsheet",pageBreak:{mode:"avoid"},jsPDF:{orientation:"portrait",unit:"in",format:"letter",compressPDF:!0}}).save(),x.remove()}return e.$$set=w=>{"params"in w&&r(0,c=w.params),"$$scope"in w&&r(5,l=w.$$scope)},[c,p,a,_,E,l,s]}class SS extends ni{constructor(t){super(),ri(this,t,FS,ES,ei,{params:0})}}function IS(e){let t;return{c(){t=Lt("div"),t.innerHTML=`<div id="breadcrumb"><a href="/louisiana-locked-up/">Louisiana Locked Up: A Problem in Every Parish</a> / About the Data</div> 
  <h2>About the Data</h2> 
  <p>Vera collected data for Louisiana’s prisons, jails, and juvenile justice
    facilities using information published on state and local government
    websites and the U.S. Bureau of Justice Statistics 2019 Census of Jails.
    Pretrial population data was collected from reports prepared by the
    Louisiana Department of Public Safety &amp; Corrections. Prison admission data
    was collected from the Louisiana Department of Public Safety &amp; Corrections
    Briefing Book. Arrest data was collected from the FBI Uniform Crime Report
    accessed via Vera’s Arrest Trends. Budget data was collected from the U.S.
    Census Annual Survey of Public Employment &amp; Payroll.</p> 
  <section><h3 class="svelte-1wnqyos">Jails</h3> 
    <p>Vera compiled data for Louisiana’s jails using information obtained from
      the U.S. Bureau of Justice Statistics <a href="https://doi.org/10.3886/ICPSR38323.v1" target="_blank">Census of Jails (2019)</a>
      and the DPS&amp;C
      <a href="https://doc.louisiana.gov/about-the-dpsc/facility-locations/" target="_blank">facilities directory</a>, which includes directly operated state prisons as well as the many
      “local facilities” (jails) the department uses to hold people that have
      received a state prison sentence. Vera used information from Incarceration
      Transparency to identify facilities that were not included in the
      aforementioned sources. Memos on the
      <a href="https://www.incarcerationtransparency.org/" target="_blank">Incarceration Transparency</a>
      website (e.g.,
      <a href="https://www.incarcerationtransparency.org/wp-content/uploads/2022/01/Claiborne-Parish-Detention-Center-Memo.pdf" target="_blank">Claiborne Parish</a>) were helpful to discern the number of facilities in a parish and
      details about their capacity and operators.</p> 
    <p>Discrepancies between these lists required follow-up research (e.g.,
      review of government agency websites, news articles, and phone calls to
      jails) to determine a facility’s current operator, capacity, address, and
      whether it operates a Transitional Work Program (TWP). For example, some
      municipal jails were not reported in the Census of Jails but were included
      in research on the Incarceration Transparency website (e.g., Westlake City
      Jail). Consequently, Vera contacted every city police department included
      in a <a href="http://www.lsp.org/links_city.html" target="_blank">directory</a> published by the Louisiana State Police to discern whether they operated
      a jail and, if so, the capacity and location of the facility.</p> 
    <p>Vera counted each facility as distinct if it had its own address. Vera
      gathered information on the capacity for correctional facilities from the
      <a href="https://lclelsac.com/wp-content/uploads/2022/04/2021-SSLCFPR-Report.pdf" target="_blank">2021 Status of State and Local Corrections Facilities and Program
        Report (SSLCFPR)</a>, which was prepared by the Louisiana Commission on Law Enforcement and
      Administration of Criminal Justice. Vera researchers used facility
      directories on the
      <a href="https://lasallecorrections.com/locations/" target="_blank">La Salle Corrections</a>
      and
      <a href="https://www.geogroup.com/Locations" target="_blank">GEO Group</a>
      websites to identify the facilities operated by these companies.</p> 
    <p>Discerning which facilities currently operate a TWP required extensive
      research because of errors in the DPS&amp;C facility directory and
      inconsistencies between the department’s most recent reports (the <a href="https://s32082.pcdn.co/wp-content/uploads/2022/06/Catalog-of-Rehabiltation-Program-2021.pdf" target="_blank">2021 Catalog of Rehabilitative Programs</a>
      and the
      <a href="https:/lclelsac.com/wp-content/uploads/2022/04/2021-SSLCFPR-Report.pdf" target="_blank">2021 Status of State and Local Corrections Facilities and Program
        Report</a>). In instances of conflicting information, Vera researchers called
      parish sheriffs to confirm whether they operate a TWP program.</p> 
    <p>Vera estimated the revenue DPS&amp;C paid to local facilities in 2021 by
      multiplying the number of people held for DPS&amp;C in November 20201, per the
      DPS&amp;C <a href="https://jlcb.legis.la.gov/Docs/2021/dec/December%202021%20RTC%20Act%20119%20of%202021%20Corrections.pdf" target="_blank">Report of the Offender Census at Local Correctional Facilities</a>, by the daily rate of $26.39 ($9,632 annually). Vera estimated revenue
      DPS&amp;C paid to local facilities for people in the TWP by multiplying this
      population in November 2021 by the daily rate of $11.25 ($4,160 annually).
      According to the December 10, 2021 DPS&amp;C report to the Joint Legislative
      Committee on the Budget, $12.25 is paid to contracted TWP providers who
      fill the available beds first with TWP participants. The other providers
      are paid a per diem of $16.39 because they do not have a contract with
      Corrections that guarantees the department will place TWP offenders with
      their program first. Vera used the lesser of these two rates because the
      researchers did not know the nature of each contract.</p> 
    <p>Vera obtained information on the U.S. Immigration and Customs Enforcement
      (ICE) population held in jails from archived copies of the agency’s
      <a href="https://www.ice.gov/detain/detention-management" target="_blank">Detention Statistics</a>
      because the DPS&amp;C
      <a href="https://jlcb.legis.la.gov/Docs/2021/dec/December%202021%20RTC%20Act%20119%20of%202021%20Corrections.pdf" target="_blank">report of the Offender Census at Local Correctional Facilities</a>
      does not include ICE statistics for the facilities that are operated by GEO
      Group under contracts with ICE. Vera computed the ICE Average Daily Population
      for the period December 4, 2021 – December 18, 2021 to estimate the ICE population
      at approximately the same time as the rest of the jail population for the parish.</p></section> 
  <section><h3 class="svelte-1wnqyos">Pretrial population</h3> 
    <p>Vera collected 2021 parish-level pretrial jail population data from the
      DPS&amp;C <a href="https://jlcb.legis.la.gov/Docs/2021/dec/December%202021%20RTC%20Act%20119%20of%202021%20Corrections.pdf" target="_blank">report of the Offender Census at Local Correctional Facilities</a>. DPS&amp;C supplied these reports in memorandum to the
      <a href="https://jlcb.legis.la.gov/default_Archives2021" target="_blank">Joint Legislative Committee on the Budget (JLCB)</a> because DPS&amp;C pays local jails to hold more than half the state’s prison
      population. The report includes the operational capacity of each “local facility”
      (jail) and provides the number of people the jail holds for DPS&amp;C, the DPS&amp;C
      Transitional Work Program, U.S. Immigration and Customs Enforcement (ICE),
      “Federal Offenders” (the U.S. Marshals and Bureau of Prisons), as well as the
      number of people held “pretrial” and in “Parish” custody (meaning a jail sentence).</p> 

    <p>Pretrial data for 58 of the 64 parishes is as of November 26, 2021, which
      Vera obtained from a December 10, 2021, <a href="https://jlcb.legis.la.gov/Docs/2021/dec/December%202021%20RTC%20Act%20119%20of%202021%20Corrections.pdf" target="_blank">memo</a> to the JLCB. Vera collected data from earlier reports in 2021 for six parishes
      that did not supply pretrial data in the November report: Allen Parish (April
      2021), Cameron Parish (July 2021), Jackson Parish (May 2021), Richland Parish
      (July 2021), St. Mary Parish (July 2021), and Terrebonne Parish (July 2021).
      Although Richland and St. Mary reported November 2021 data, the pretrial populations
      in this report (four and three, respectively) were conspicuously low compared
      to values in July (21 and 127, respectively), so Vera instead used pretrial
      data from July 2021.</p> 

    <p>Nine parishes (Acadia, Beauregard, Caldwell, De Soto, Morehouse,
      Plaquemines, Pointe Coupee, Sabine, and St. Landry) indicated that their
      pretrial population was “0” in the data they supplied to DPS&amp;C in all
      their 2021 reports. This is not plausible given the number of people these
      same parishes sentenced to prison annually, and this information also
      conflicts with the pretrial population data these parishes reported in the
      last <a href="https://www.icpsr.umich.edu/web/NACJD/studies/38323/versions/V1" target="_blank">Census of Jails (2019)</a>
      conducted by the U.S. Bureau of Justice Statistics (BJS). These same parishes,
      however, reported to DPS&amp;C a sizable number of people held for the “parish”
      (i.e., jail sentences) that is consistent with the pretrial population they
      supplied to BJS in 2019. As some jail management data systems do not record
      an individual person’s sentence status, Vera assumed that these jails indicated
      all people as “parish” because it would be time consuming to make the distinction
      between Pretrial and Parish (locally sentenced) in their monthly reports to
      DPS&amp;C. For these counties, Vera assumed that 90 percent of the people denoted
      as being in parish custody were actually being held pretrial. Vera made this
      assumption because 90 percent of people, statewide, held by a local authority
      are in pretrial status according to the
      <a href="https://jlcb.legis.la.gov/Docs/2021/dec/December%202021%20RTC%20Act%20119%20of%202021%20Corrections.pdf" target="_blank">report of the Offender Census at Local Correctional Facilities</a>.</p> 

    <p>Vera accessed parish-level jail population data for the years prior to
      2020 from the BJS Census of Jails, via Vera’s Incarceration Trends
      dataset. The Census of Jails, unlike the 2021 DPS&amp;C report of the Offender
      Census at Local Correctional Facilities, does not differentiate people
      held for ICE and the United States Marshall Service (USMS) from the
      pretrial population, which jails generally include in their counts of the
      “unconvicted” (i.e., pretrial) population to BJS. Consequently,
      differences between the 2021 pretrial population and prior years may be
      partly on account of this definitional difference in the parishes that
      hold people for ICE and USMS. Note also that the pretrial population data
      is a single-day count, which was November 26, 2021, in the DPS&amp;C data and
      the last weekday in June in the Census of Jails data. Jail populations
      fluctuate daily and year-over-year differences could be an artifact of
      measuring the population on a single day.</p></section> 
  <section><h3 class="svelte-1wnqyos">Prisons</h3> 
    <p>Vera sourced data on the location of state prisons from the DPS&amp;C <a href="https://doc.louisiana.gov/about-the-dpsc/facility-locations/" target="_blank">online facility directory</a>
      and the Louisiana Commission on Law Enforcement
      <a href="https://lclelsac.com/wp-content/uploads/2022/04/2021-SSLCFPR-Report.pdf" target="_blank">2021 Status of State and Local Corrections Facilities and Program
        Report</a>. Vera sourced information on state prison capacity from the BJS
      <a href="https://www.icpsr.umich.edu/web/NACJD/studies/38325/versions/V2" target="_blank">Census of State and Federal Adult Correctional Facilities (2019)</a>. Vera sourced data on facilities operated by the U.S. Bureau of Prisons
      from the bureau’s
      <a href="https://www.bop.gov/locations/list.jsp" target="_blank">website</a>.</p></section> 
  <section><h3 class="svelte-1wnqyos">Prison admissions</h3> 
    <p>Vera collected parish-level prison admission data for <a href="https://s32082.pcdn.co/wp-content/uploads/2021/06/Jan-21-Full-bb.pdf" target="_blank">2019</a>,
      <a href="https://s32082.pcdn.co/wp-content/uploads/2021/10/0m-Full-Briefing-Book.pdf" target="_blank">2020</a>, and
      <a href="https://s32082.pcdn.co/wp-content/uploads/2022/09/0m-Full-Briefing-Book-July-2022-Website.pdf" target="_blank">2021</a>
      from the DPS&amp;C Briefing Book. Vera collected parish-level prison admission
      data for 1992 through 2014 from the BJS National Corrections Reporting Program
      (NCRP), accessed via Vera’s
      <a href="https://github.com/vera-institute/incarceration-trends" target="_blank">Incarceration Trends Dataset</a>.</p></section> 
  <section><h3 class="svelte-1wnqyos">Juvenile justice facilities</h3> 
    <p>Vera researchers compiled information for juvenile detention centers
      (i.e., “youth jails”) using data from city and parish websites. There are
      five <a href="https://ojj.la.gov/about-ojj/administrative-functions/ojj-secure-care-facilities/" target="_blank">secure care</a>
      residential facilities (i.e., “youth prisons”) for males in the custody of
      the Louisiana Office of Juvenile Justice (OJJ). Females in OJJ custody are
      housed at Ware Youth Center, which operates under a contract with OJJ. There
      are 18 non-secure residential facilities for youth who have been adjudicated.
      These residential facilities comprise group homes, transitional living programs,
      emergency shelters, and family homes. Vera compiled information for these facilities
      through various OJJ reports, including
      <a href="https://ojj.la.gov/policies-systems/federal-laws/prea/ojj-prea-resourcesreports/" target="_blank">Prison Rape Elimination Act (PREA) Annual Reports</a>, Contract Facility Audit Reports,
      <a href="https://ojj.la.gov/wp-content/uploads/2018/10/MonitoringEffectivenessofCommunityBased-ServicesFY2017.pdf" target="_blank">Monitoring Effectiveness of Community-Based Services</a>, and
      <a href="https://ojj.la.gov/wp-content/uploads/2018/01/Act499TrendReportFY2017_-finalforwebsite-1.pdf" target="_blank">Annual Report of Youth Served.</a></p> 

    <p>Vera compiled juvenile facility capacity information from PREA reports and
      through email and phone calls to facilities. Vera verified all facility
      information through a <a href="https://webapps.dcfs.la.gov/carefacility/facility/list?parish=&amp;d-3991717-p=1" target="_blank">list of licensed</a> facilities from the Louisiana Department of Children and Family Services,
      which holds licensing authority over Louisiana juvenile facilities.</p></section> 
  <section><h3 class="svelte-1wnqyos">Arrests</h3> 
    <p>Arrest data comes from the FBI Uniform Crime Report (2018) accessed via
      Vera’s <a href="https://arresttrends.vera.org/" target="_blank">Arrest Trends</a>. Vera researchers calculated arrest rates using population data from the
      U.S. Census Bureau’s
      <a href="https://data.census.gov/table?g=0400000US22$1600000&amp;y=2020&amp;d=DEC+Redistricting+Data+(PL+94-171)" target="_blank">2020 Decennial Census</a>, which provides city-level demographic data, and the Census Bureau’s
      <a href="https://www.census.gov/data/tables/time-series/demo/popest/2010s-counties-detail.html" target="_blank">County Characteristics Resident Population Estimates</a> (July 1, 2019), which provides parish-level demographic data.</p></section> 
  <section><h3 class="svelte-1wnqyos">Spending</h3> 
    <p>Vera collected data on parish- and municipal-government spending from the
      U.S. Census Bureau’s <a href="https://www.census.gov/programs-surveys/apes.html" target="_blank">Annual Survey of Public Employment &amp; Payroll</a>. Vera collected 2021 data when it was available and 2017 data when 2021
      data was not available. (Vera adjusted the data to 2021 dollars using
      Consumer Price Index for all Urban Consumers data from the
      <a href="https://www.bls.gov/regions/new-england/data/consumerpriceindex_us_table.htm" target="_blank">Bureau of Labor Statistics</a> of the United States Department of Labor.) Payroll amounts represent gross
      payroll for the one-month period of March in the survey year. Gross payroll
      includes all salaries, wages, fees, commissions, bonuses, or awards. Vera researchers
      multiplied total payroll amounts by 12 to determine payroll for a one-year
      period. Payroll expenses comprise the majority, but not all, of government
      expenses and excludes costs such as supplies, materials, and contracted services.
      However, the payroll provides a representation of the allocation of budget
      resources across government functions (e.g., human services, parks, police,
      corrections, etc.).</p></section> 
  <section><h3 class="svelte-1wnqyos">Demographic Data</h3> 
    <p>Demographic data to compute parish per-capita incarceration rates comes
      from Vera’s <a href="https://github.com/vera-institute/incarceration-trends">Incarceration Trends Project (ITP)</a>. The demographic data used in ITP comes from the National Cancer
      Institute’s (NCI)
      <a href="https://seer.cancer.gov/popdata/download.html" target="_blank">U.S. County Population Data, 1969-2020</a>. The source of NCI’s data is the Centers for Disease Control and
      Prevention’s (CDC) Bridged-Race Population Estimates, 1990-2020. Vera used
      population data for 2020 to compute incarceration rates for the period
      since 2020.</p> 

    <p>Vera calculated incarceration rates using parish population data from the
      U.S. census, and these rates are expressed per 10,000 parish residents.
      Although incarceration rates are conventionally expressed per 100,000,
      Vera computed parish rates per 10,000 to make these statistics more
      legible in the 50 parishes that have fewer than 100,000 residents.</p></section> 
  <section><h3 class="svelte-1wnqyos">Geographic Data</h3> 
    <p>Vera collected data for the footprints of Louisiana’s historical
      plantations from an <a href="https://www.loc.gov/item/2006629768/">1853 map</a>
      of Louisiana by John La Tourrette. Vera researchers downloaded the digital
      image as a TIFF file and adjusted the image levels, contrast, and tone to aid
      in the clear identification of plots of land. The researchers then pulled the
      image into QGIS’s Georeferencer and identified 29 ground control points (GCPs).
      The researchers took the control points from a geojson file of Louisiana’s
      state outline. Vera then applied a transformation model—using the Polynomial
      2 transformation type and the Nearest Neighbor resampling method—to the points
      in order to warp the image to fit the
      <a href="https://epsg.io/4269" target="_blank">EPSG:4269</a> coordinate reference
      system (CRS). The researchers then created a new vector layer with the geometry
      type set to polygon, with the specified CRS set to EPSG:4269, and created polygons
      for each plantation on the La Tourrette map. The researchers added a unique
      identifier as an attribute to each polygon and included the landowner as another
      attribute when noted (and legible). Researchers double checked the plots against
      the georeferenced map and validated all geometries.</p> 

    <p>Vera derived the Orleans Parish buildings from a shapefile of <a href="https://archive.nyu.edu/handle/2451/43840" target="_blank">New Orleans building footprints</a>
      held by Bobst Library, New York University. Vera referenced the buildings in
      this file against a
      <a href="https://www.opso.us/ppt/presentation20101018.pdf" target="_blank">presentation of the Orleans Parish Sheriff’s Office</a>
      showing facility use in 2005, 2010, and 2012, and an
      <a href="https://www.laaclu.org/sites/default/files/field_documents/2006_Report_OPP_Katrina_Insert_0.pdf" target="_blank">ACLU map of post-Katrina facility damage</a>. Many of the buildings no longer in use by the parish (e.g. Community
      Corrections Center, Orleans Parish Prison) are still standing, and were
      therefore still in the building footprint shapefile.</p> 

    <p>State, parish, and census tract geographies come from <a href="https://www.census.gov/geographies/mapping-files/time-series/geo/carto-boundary-file.html" target="_blank">census.gov</a>. The detailed outline of Orleans Parish comes from the Stanford
      <a href="https://purl.stanford.edu/sm333bn0683" target="_blank">National Transportation Atlas Database</a>.</p></section>`,ue(t,"id","wrap"),ue(t,"class","svelte-1wnqyos")},m(r,s){At(r,t,s)},p:bn,i:bn,o:bn,d(r){r&&at(t)}}}function TS(e){return Wa(async()=>{window.scrollTo(0,0)}),[]}class US extends ni{constructor(t){super(),ri(this,t,TS,IS,ei,{})}}function LS(e){let t;return{c(){t=Lt("header"),t.innerHTML=`<div class="rowTop svelte-9nsqyw"><div class="rowTop-container svelte-9nsqyw"><nav id="primary" class="svelte-9nsqyw"><ul class="svelte-9nsqyw"><li class="svelte-9nsqyw"><a href="https://www.vera.org/who-we-are" class="svelte-9nsqyw"><div class="textWrap svelte-9nsqyw">Who We Are
                <div class="textWrap-icon svelte-9nsqyw"></div></div></a> 
            <ul class="svelte-9nsqyw"><li class="svelte-9nsqyw"><a href="https://www.vera.org/who-we-are" class="svelte-9nsqyw"><span class="liText svelte-9nsqyw">Who We Are</span></a></li> 
              <li class="svelte-9nsqyw"><a href="https://www.vera.org/who-we-are/about-us" class="svelte-9nsqyw"><span class="liText svelte-9nsqyw">About Us</span></a></li> 
              <li class="svelte-9nsqyw"><a href="https://www.vera.org/who-we-are/message-from-the-president" class="svelte-9nsqyw"><span class="liText svelte-9nsqyw">Message from the President</span></a></li> 
              <li class="svelte-9nsqyw"><a href="https://www.vera.org/who-we-are/people" class="svelte-9nsqyw"><span class="liText svelte-9nsqyw">People</span></a></li> 
              <li class="svelte-9nsqyw"><a href="https://www.vera.org/who-we-are/locations" class="svelte-9nsqyw"><span class="liText svelte-9nsqyw">Locations</span></a></li> 
              <li class="svelte-9nsqyw"><a href="https://www.vera.org/careers" class="svelte-9nsqyw"><span class="liText svelte-9nsqyw">Careers</span></a></li> 
              <li class="svelte-9nsqyw"><a href="https://www.vera.org/who-we-are/financials" class="svelte-9nsqyw"><span class="liText svelte-9nsqyw">Financials</span></a></li> 
              <li class="svelte-9nsqyw"><a href="https://www.vera.org/contact" class="svelte-9nsqyw"><span class="liText svelte-9nsqyw">Contact Us</span></a></li></ul></li> 
          <li class="svelte-9nsqyw"><a href="https://www.vera.org/what-we-do" class="svelte-9nsqyw"><div class="textWrap svelte-9nsqyw">What We Do
                <div class="textWrap-icon svelte-9nsqyw"></div></div></a> 
            <ul class="svelte-9nsqyw"><li class="svelte-9nsqyw"><a href="https://www.vera.org/what-we-do" class="svelte-9nsqyw"><span class="liText svelte-9nsqyw">What We Do</span></a></li> 
              <li class="svelte-9nsqyw"><a href="https://www.vera.org/our-strategic-priorities" class="svelte-9nsqyw"><span class="liText svelte-9nsqyw">Strategic Priorities</span></a></li></ul></li> 
          <li class="svelte-9nsqyw"><a href="https://www.vera.org/get-involved" class="svelte-9nsqyw"><div class="textWrap svelte-9nsqyw">Get Involved
                <div class="textWrap-icon svelte-9nsqyw"></div></div></a> 
            <ul class="svelte-9nsqyw"><li class="svelte-9nsqyw"><a href="https://www.vera.org/get-involved" class="svelte-9nsqyw"><span class="liText svelte-9nsqyw">Get Involved</span></a></li> 
              <li class="svelte-9nsqyw"><a href="https://shop.vera.org/" class="svelte-9nsqyw"><span class="liText svelte-9nsqyw">The Vera Shop</span></a></li> 
              <li class="svelte-9nsqyw"><a href="https://www.vera.org/get-involved/ways-to-give" class="svelte-9nsqyw"><span class="liText svelte-9nsqyw">Ways to Give</span></a></li> 
              <li class="svelte-9nsqyw"><a href="https://www.vera.org/get-involved/partner-with-vera" class="svelte-9nsqyw"><span class="liText svelte-9nsqyw">Partner with Vera</span></a></li> 
              <li class="svelte-9nsqyw"><a href="https://www.vera.org/events" class="svelte-9nsqyw"><span class="liText svelte-9nsqyw">Events</span></a></li></ul></li></ul></nav> 
      <section class="top-nav-mobile svelte-9nsqyw"><input id="menu-toggle" type="checkbox" class="svelte-9nsqyw"/> 
        <label class="menu-button-container svelte-9nsqyw" for="menu-toggle"><div class="menu-button svelte-9nsqyw"></div></label> 
        <span class="menulabel svelte-9nsqyw">Menu</span> 
        <ul class="menu svelte-9nsqyw"><a href="https://www.vera.org/ending-mass-incarceration" class="svelte-9nsqyw"><li class="svelte-9nsqyw">Ending Mass Incarceration</li></a> 

          <a href="https://www.vera.org/investing-in-communities" class="svelte-9nsqyw"><li class="svelte-9nsqyw">Investing in Communities</li></a> 

          <a href="https://www.vera.org/solutions-research" class="svelte-9nsqyw"><li class="svelte-9nsqyw">Solutions &amp; Research</li></a> 
          <a href="https://www.vera.org/news-and-stories" class="svelte-9nsqyw"><li class="svelte-9nsqyw">News &amp; Stories</li></a></ul></section> 
      <nav class="whowhat svelte-9nsqyw"><div class="menu-center svelte-9nsqyw"><h1 class="svelte-9nsqyw"><a class="logo svelte-9nsqyw" href="https://www.vera.org">Vera Institute of Justice</a></h1></div> 
        <div class="d-md-block menu-right donate svelte-9nsqyw"><a href="https://secure.vera.org/a/donate" class="button arrow svelte-9nsqyw">Donate</a></div></nav></div></div> 
  <nav id="secondary" class="svelte-9nsqyw"><ul class="svelte-9nsqyw"><li class="svelte-9nsqyw"><a href="https://www.vera.org/ending-mass-incarceration" class="svelte-9nsqyw">Ending Mass Incarceration</a> 
        <ul class="svelte-9nsqyw"><li class="svelte-9nsqyw"><a href="https://www.vera.org/ending-mass-incarceration" class="svelte-9nsqyw"><div class="hover-arrow svelte-9nsqyw">Ending Mass Incarceration</div> 
              <span class="svelte-9nsqyw">About the problem, the history of mass incarceration, trends
                and statistics</span></a></li> 
          <li class="svelte-9nsqyw"><a href="https://www.vera.org/ending-mass-incarceration/criminalization-racial-disparities" class="svelte-9nsqyw"><div class="hover-arrow svelte-9nsqyw">Criminalization and Racial Disparities</div> 
              <span class="svelte-9nsqyw">Ending the criminalization of people of color, immigrants, and
                people experiencing poverty</span></a></li> 

          <li class="svelte-9nsqyw"><a href="https://www.vera.org/ending-mass-incarceration/reducing-incarceration" class="svelte-9nsqyw"><div class="hover-arrow svelte-9nsqyw">Reducing Incarceration</div> 
              <span class="svelte-9nsqyw">Drastically reducing the use of jails, prisons, and detention
                centers</span></a></li> 

          <li class="svelte-9nsqyw"><a href="https://www.vera.org/ending-mass-incarceration/dignity-behind-bars" class="svelte-9nsqyw"><div class="hover-arrow svelte-9nsqyw">Dignity Behind Bars</div> 
              <span class="svelte-9nsqyw">Centering dignity and minimizing the harms of criminal legal
                and immigration system involvement</span></a></li></ul></li> 
      <li class="svelte-9nsqyw"><a href="https://www.vera.org/investing-in-communities" class="svelte-9nsqyw">Investing in Communities</a></li> 
      <li class="svelte-9nsqyw"><a href="https://www.vera.org/solutions-research" class="svelte-9nsqyw">Solutions &amp; Research</a></li> 
      <li class="svelte-9nsqyw"><a href="https://www.vera.org/get-involved" class="svelte-9nsqyw">News</a> 
        <ul class="svelte-9nsqyw"><li class="svelte-9nsqyw"><a href="https://www.vera.org/news-and-stories" class="svelte-9nsqyw"><div class="hover-arrow svelte-9nsqyw">Latest News &amp; Stories</div> 
              <span class="svelte-9nsqyw">Ideas, opinions, and strategies to end mass incarceration</span></a></li> 
          <li class="svelte-9nsqyw"><a href="https://www.vera.org/media-center" class="svelte-9nsqyw"><div class="hover-arrow svelte-9nsqyw">Media Center</div> 
              <span class="svelte-9nsqyw">Press releases and media coverage</span></a></li></ul></li></ul></nav>`,ue(t,"class","header-v2 svelte-9nsqyw")},m(r,s){At(r,t,s)},p:bn,i:bn,o:bn,d(r){r&&at(t)}}}class QS extends ni{constructor(t){super(),ri(this,t,null,LS,ei,{})}}function PS(e){let t;return{c(){t=Lt("footer"),t.innerHTML=`<div id="vera" class="svelte-1x97hmj"><div id="mobilewrap" class="svelte-1x97hmj"><div class="section svelte-1x97hmj"><div id="logo" class="svelte-1x97hmj"><a href="https://www.vera.org"><img id="logo" src="https://www.vera.org/dist/img/v2/vera-horizontal.svg" class="svelte-1x97hmj"/></a></div> 
        <p class="address svelte-1x97hmj">34 35th Street<br/>
          Suite 4-2A<br/>
          Brooklyn, NY 11232</p> 
        <p class="phone svelte-1x97hmj">212-334-1300</p></div> 
      <div class="section footer-menu svelte-1x97hmj"><ul class="svelte-1x97hmj"><li class="svelte-1x97hmj"><a href="https://www.vera.org/who-we-are/about-us" class="svelte-1x97hmj">About Us</a></li> 
          <li class="svelte-1x97hmj"><a href="https://www.vera.org/careers" class="svelte-1x97hmj">Careers</a></li> 
          <li class="svelte-1x97hmj"><a href="https://www.vera.org/events" class="svelte-1x97hmj">Events</a></li> 
          <li class="svelte-1x97hmj"><a href="https://www.vera.org/media-center" class="svelte-1x97hmj">Media</a></li> 
          <li class="svelte-1x97hmj"><a href="https://www.vera.org/contact" class="svelte-1x97hmj">Contact Us</a></li></ul></div> 
      <div class="section soc svelte-1x97hmj"><p class="keep svelte-1x97hmj">Keep up with us on social media.</p> 
        <div class="social-icons svelte-1x97hmj"><a href="https://www.twitter.com/intent/tweet?url=https%3A%2F%2Fwww.vera.org%2F&amp;amp;text=Home %20%40verainstitute" class="share-link social-share-link receives-color svelte-1x97hmj" target="_blank"><svg class="svg-inline--fa svelte-1x97hmj" aria-hidden="true" prefix="fab" data-icon="twitter" role="img" viewBox="0 0 512 512"><path fill="currentColor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg></a> 
          <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fwww.vera.org%2F&amp;caption=Home%20&amp;picture=https://www.vera.org/dist/img/social-fallback.jpg&amp;description=" class="share-link social-share-link receives-color svelte-1x97hmj" target="_blank"><svg class="svg-inline--fa svelte-1x97hmj" aria-hidden="true" prefix="fab" data-icon="facebook" role="img" viewBox="0 0 320 512"><path fill="currentColor" d="M279.14 288l14.22-92.66h-88.91v-60.13c0-25.35 12.42-50.06 52.24-50.06h40.42V6.26S260.43 0 225.36 0c-73.22 0-121.08 44.38-121.08 124.72v70.62H22.89V288h81.39v224h100.17V288z"></path></svg></a> 
          <a href="https://www.instagram.com/verainstitute/" target="_blank" class="svelte-1x97hmj"><svg class="svg-inline--fa svelte-1x97hmj" aria-hidden="true" prefix="fab" data-icon="instagram" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"></path></svg></a> 
          <a href="https://www.youtube.com/channel/UCdUfqPJeOB_bHFdx1IhR0jQ" target="_blank" class="svelte-1x97hmj"><svg class="svg-inline--fa svelte-1x97hmj" aria-hidden="true" prefix="fab" data-icon="youtube" role="img" viewBox="0 0 576 512"><path fill="currentColor" d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305zm-317.51 213.508V175.185l142.739 81.205-142.739 81.201z"></path></svg></a></div></div></div> 

    <div class="section svelte-1x97hmj"><div id="transformative" class="svelte-1x97hmj"><p>Transformative change, sent to your inbox.</p> 
        <button class="button orange arrow svelte-1x97hmj">Add your email</button></div></div></div> 
  <div id="terms" class="svelte-1x97hmj"><ul class="svelte-1x97hmj"><li class="svelte-1x97hmj">© Vera Institute of Justice. All rights reserved.</li> 
      <li class="svelte-1x97hmj"><a href="https://www.vera.org/terms-of-use" class="svelte-1x97hmj">Terms of Use</a></li> 
      <li class="svelte-1x97hmj"><a href="https://www.vera.org/gsa-advantage" class="svelte-1x97hmj">GSA Advantage</a></li></ul></div>`,ue(t,"class","svelte-1x97hmj")},m(r,s){At(r,t,s)},p:bn,i:bn,o:bn,d(r){r&&at(t)}}}class kS extends ni{constructor(t){super(),ri(this,t,null,PS,ei,{})}}function MS(e){let t,r,s,l,c,h,a;t=new QS({});var d=e[0];function _(p){return{props:{params:p[1]}}}return d&&(l=Kh(d,_(e))),h=new kS({}),{c(){yr(t.$$.fragment),r=$t(),s=Lt("div"),l&&yr(l.$$.fragment),c=$t(),yr(h.$$.fragment),ue(s,"id","center"),ue(s,"class","svelte-17lcfot")},m(p,E){mr(t,p,E),At(p,r,E),At(p,s,E),l&&mr(l,s,null),At(p,c,E),mr(h,p,E),a=!0},p(p,[E]){const w={};if(E&2&&(w.params=p[1]),d!==(d=p[0])){if(l){Xa();const x=l;Gt(x.$$.fragment,1,0,()=>{gr(x,1)}),Za()}d?(l=Kh(d,_(p)),yr(l.$$.fragment),Mt(l.$$.fragment,1),mr(l,s,null)):l=null}else d&&l.$set(w)},i(p){a||(Mt(t.$$.fragment,p),l&&Mt(l.$$.fragment,p),Mt(h.$$.fragment,p),a=!0)},o(p){Gt(t.$$.fragment,p),l&&Gt(l.$$.fragment,p),Gt(h.$$.fragment,p),a=!1},d(p){gr(t,p),p&&at(r),p&&at(s),l&&gr(l),p&&at(c),gr(h,p)}}}function DS(e,t,r){let s,l;return hc("/louisiana-locked-up/",()=>r(0,s=s3)),hc("/louisiana-locked-up/parish/:id",(c,h)=>{r(1,l=c.params),h()},()=>r(0,s=SS)),hc("/louisiana-locked-up/data",()=>r(0,s=US)),hc.start(),[s,l]}class NS extends ni{constructor(t){super(),ri(this,t,DS,MS,ei,{})}}new NS({target:document.getElementById("app")});export{qi as _,Ol as c,xw as g,xS as r};
