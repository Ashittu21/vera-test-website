(this["webpackJsonppolice-budgets"]=this["webpackJsonppolice-budgets"]||[]).push([[0],{110:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),r=a(48),l=a.n(r),i=(a(71),a(6)),u=(a(72),a(49)),o=a.n(u),s=a(114),d=a(4),m=(a(73),a(61)),f=a(9),v=function(e){var t=e.data,a=g(t),r=a.data,l=a.yearByCity,u=a.slugTitle,o=Object.keys(u).map((function(e){return{value:e,label:u[e]}})),s=window.PoliceBudgetCity||null,d=s&&o.find((function(e){return e.value===s})),v=Object(n.useState)(d?d.value:o.find((function(e){return"atlanta-ga"===e.value})).value),b=Object(i.a)(v,2),E=b[0],y=b[1],h=u[E],p=l[E];return c.a.createElement("div",{className:"CitySwitcher"},!d&&c.a.createElement(m.a,{options:o,value:o.find((function(e){return e.value===E})),onChange:function(e){y(e.value)}}),c.a.createElement(f.a,{cityLabel:h,city:E,year:p,data:r[E]}))},g=function(e){var t={},a=e.map((function(e){var a="".concat(e.city.trim().toLowerCase().replace(/\./g,"").replace(/\s/g,"-"),"-").concat(e.stateAbb.trim().toLowerCase());return t[a]||(t[a]="".concat(e.city.trim(),", ").concat(e.stateAbb.trim())),Object(d.a)(Object(d.a)({},e),{},{uid:"".concat(e.department,"-").concat(e.expensecat,"-").concat(e.subdep,"-").concat(e.expensedescrip,"-").concat(e.personneltype),slug:a,total:parseInt(e.total)})})).reduce((function(e,t){return e[t.slug]||(e[t.slug]=[]),e[t.slug].push(t),e}),{}),n=Object.keys(a).reduce((function(e,t){return e[t]=a[t][0].year,e}),{}),c=b(a);return console.log(c),{data:c,yearByCity:n,slugTitle:t}},b=function(e){return Object.keys(e).reduce((function(t,a){return t[a]=E("department",e[a]),Object.keys(t[a]).forEach((function(e){t[a][e]=E("expensecat",t[a][e]),Object.keys(t[a][e]).forEach((function(n){t[a][e][n]=E("subdep",t[a][e][n]),Object.keys(t[a][e][n]).forEach((function(c){t[a][e][n][c]=E("expensedescrip",t[a][e][n][c]),Object.keys(t[a][e][n][c]).forEach((function(r){t[a][e][n][c][r]=E("personneltype",t[a][e][n][c][r])}))}))}))})),t}),{})},E=function(e,t){return t.reduce((function(t,a){return t[a[e]]||(t[a[e]]=[]),t[a[e]].push(a),t}),{})},y=function(){var e=h(o.a);return e?c.a.createElement(v,{data:e}):c.a.createElement("div",null,"Loading")},h=function(e){var t=Object(n.useState)(),a=Object(i.a)(t,2),c=a[0],r=a[1];return Object(n.useEffect)((function(){fetch(e).then((function(e){return e.text()})).then((function(e){r(Object(s.a)(e))}))}),[r,e]),c};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement(y,null),document.getElementById("PoliceBudgets")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},111:function(e,t,a){"use strict";a(1),a(78),a(60),a(9)},16:function(e,t,a){"use strict";a.d(t,"c",(function(){return r})),a.d(t,"b",(function(){return l})),a.d(t,"a",(function(){return i}));var n=a(1),c=a.n(n),r=Object(n.createContext)(1),l=function(e){return c.a.createElement(r.Consumer,null,(function(t){return c.a.createElement(r.Provider,{value:t+1},e.children)}))},i=function(e){return c.a.createElement(r.Consumer,null,(function(t){var a="h"+Math.min(t,6);return c.a.createElement(a,e)}))}},19:function(e,t,a){"use strict";(function(e){a.d(t,"b",(function(){return s})),a.d(t,"c",(function(){return g}));var n=a(6),c=a(1),r=a.n(c),l=(a(75),a(16)),i=a(50),u=a(52),o=(a(111),a(62)),s=function(e){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0}).format(Math.round(e))},d=function e(t){var a=t.data,n=t.state,i=t.setValue,u=Object(c.useContext)(l.c),o=Object.keys(a).sort((function(e,t){var n=g(a[e]),c=g(a[t]);return n>c?-1:n<c?1:0})),s=n.changes;return 1!==o.length||Array.isArray(a[o[0]])?r.a.createElement(l.b,null,r.a.createElement("div",{style:{marginLeft:"".concat(u>1?1.5:0,"rem")}},o.map((function(t){if(Array.isArray(a[t])){var c=g(a[t]),l=g(a[t],s),u=a[t][0].uid;return r.a.createElement(m,{key:t,title:t,value:s[u],setValue:i(u),before:c,after:l})}var d=function e(t){return Array.isArray(t)?t[0].uid:e(t[Object.keys(t)[0]])}(a[t]),f=v(a[t]),b=g(a[t]),E=g(a[t],s),y=a[o[o.indexOf(t)+1]]&&v(a[o[o.indexOf(t)+1]]);return r.a.createElement(m,{key:t,title:t,nextLevel:f,nextIsParent:y,value:s[d],setValue:i(d),before:b,after:E},f&&r.a.createElement("div",{className:"PoliceBudget-nested"},r.a.createElement(e,{data:f,state:n,setValue:i})))})))):r.a.createElement(e,{data:a[o[0]],state:n,setValue:i})},m=function(t){var a=t.nextLevel,i=t.nextIsParent,o=t.title,d=t.value,m=t.setValue,v=t.before,g=t.after,b=t.children,E=Object(c.useState)(!!e.hot),y=Object(n.a)(E,2),h=y[0],p=y[1],P=function(){return p(!h)},B=v!==g;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"PoliceBudget-lineitem ".concat(a?"":"PoliceBudget-lineitem--final"," ").concat(i?"PoliceBudget-lineitem--last":""," ").concat(B?"PoliceBudget-lineitem--haschange":"","\n        ")},r.a.createElement("div",{className:"PoliceBudget-lineitem-heading"},a?r.a.createElement("button",{className:"PoliceBudget-lineitem-toggle ".concat(h?"is-open":""),onClick:P},r.a.createElement(u.a,null),r.a.createElement(l.a,null,o)):r.a.createElement(l.a,null,o)),r.a.createElement("div",{className:"PoliceBudget-lineitem-adjust"},a?!h&&r.a.createElement("button",{className:"PoliceBudget-lineitem-adjust-toggle ".concat(h?"is-open":""),onClick:P},"Adjust"):r.a.createElement(f,{value:d,onChange:m})),r.a.createElement("div",{className:"PoliceBudget-lineitem-before"},s(v)),r.a.createElement("div",{className:"PoliceBudget-lineitem-after"},s(g))),h&&b)},f=function(e){var t=e.value,a=e.onChange;return r.a.createElement("div",{className:"PoliceBudget-adjust"},r.a.createElement("div",{className:"PoliceBudget-adjust-input"},r.a.createElement(o.a,{min:-100,max:100,step:1,value:t,onChange:a,enableMobileNumericKeyboard:!0}),"%"))};function v(e){if(Array.isArray(e))return null;var t=Object.keys(e);return 1===t.length?v(e[t[0]]):e}var g=function e(t,a){return Array.isArray(t)?n(t):Object.values(t).reduce((function(t,c){return t+(Array.isArray(c)?n(c):e(c,a))}),0);function n(e){return e.reduce((function(e,t){var n=a&&a[t.uid]?1-a[t.uid]/100:1;return e+t.total*n}),0)}};t.a=function(e){var t=e.cityLabel,a=e.city,n=e.data,c=e.year,l=Object(i.a)(a),u=l.state,o=l.setValue,m=l.reset,f=g(n),v=g(n,u.changes),E=c?"FY".concat(c):"FY2020";return r.a.createElement("div",{className:"PoliceBudget"},r.a.createElement("div",{className:"PoliceBudget-title"},r.a.createElement("div",null,"Adjust the police budget in"),r.a.createElement("h1",null,t)),r.a.createElement("div",{className:"PoliceBudget-main"},r.a.createElement("div",{className:"PoliceBudget-lineitem PoliceBudget-header"},r.a.createElement("div",{className:"PoliceBudget-lineitem-heading"},"Category"),r.a.createElement("div",{className:"PoliceBudget-lineitem-adjust"},"% Reduction"),r.a.createElement("div",{className:"PoliceBudget-lineitem-before"},E),r.a.createElement("div",{className:"PoliceBudget-lineitem-after"},"Proposed")),r.a.createElement("div",{className:"PoliceBudget-budget"},r.a.createElement(d,{data:n,state:u,setValue:o})),r.a.createElement("div",{className:"PoliceBudget-lineitem PoliceBudget-lineitem--total ".concat(f!==v?"PoliceBudget-lineitem--haschange":"")},r.a.createElement("div",{className:"PoliceBudget-lineitem-heading"},"Total"),r.a.createElement("div",{className:"PoliceBudget-lineitem-adjust"}),r.a.createElement("div",{className:"PoliceBudget-lineitem-before"},s(f)),r.a.createElement("div",{className:"PoliceBudget-lineitem-after"},s(v)))),r.a.createElement("div",{className:"PoliceBudget-visualization"},r.a.createElement("div",{className:"PoliceBudget-totals"},r.a.createElement(b,{label:E,value:s(f),className:"PoliceBudget-total-before"}),r.a.createElement(b,{label:"Proposed",value:s(v),className:"PoliceBudget-total-after",subvalues:[{label:"Savings",value:s(f-v)},{label:"Reduction",value:"".concat(Math.round(100*(f-v)/f),"%")}]})),r.a.createElement("button",{className:"PoliceBudget-reset btn",onClick:function(){return m()}},"reset")))};var b=function e(t){var a=t.label,n=t.value,c=t.subvalues,l=t.className,i=void 0===l?"":l,u=t.isTop,o=void 0===u||u;return r.a.createElement("div",{className:"PoliceBudget-total ".concat(o?"PoliceBudget-total--top":"PoliceBudget-total--subvalue","  ").concat(i)},r.a.createElement("div",{className:"PoliceBudget-total-label"},a),r.a.createElement("div",{className:"PoliceBudget-total-value"},n),c&&r.a.createElement("div",{className:"PoliceBudget-total-subvalues"},c.map((function(t){return r.a.createElement(e,Object.assign({key:t.label},t,{isTop:!1}))}))))}}).call(this,a(74)(e))},49:function(e,t,a){e.exports=a.p+"static/media/ConsolidatedExp_72PoliceDepartments.4aeb6cbd.csv"},50:function(e,t,a){"use strict";var n=a(6),c=a(21),r=a(4),l=a(51),i=function(e,t){switch(t.type){case"setValue":return Object(r.a)(Object(r.a)({},e),{},{changes:Object(r.a)(Object(r.a)({},e.changes),{},Object(c.a)({},t.key,t.value))});case"reset":return Object(r.a)(Object(r.a)({},e),{},{changes:{}});default:return e}},u={changes:{}};t.a=function(e){var t=Object(l.useStorageReducer)(localStorage,"".concat(e," Police Budget"),i,u),a=Object(n.a)(t,2),c=a[0],r=a[1];return{state:c,setValue:function(e){return function(t){r({type:"setValue",key:e,value:t})}},reset:function(){r({type:"reset"})}}}},52:function(e,t,a){"use strict";var n=a(1),c=a.n(n),r=a(63),l=a(54),i=a.n(l);t.a=function(){return c.a.createElement(r.a,{src:i.a})}},54:function(e,t,a){e.exports=a.p+"static/media/carrot.f3e14036.svg"},66:function(e,t,a){e.exports=a(110)},71:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){},75:function(e,t,a){},78:function(e,t,a){},9:function(e,t,a){"use strict";var n=a(19);a.d(t,"a",(function(){return n.a})),a.d(t,"c",(function(){return n.c})),a.d(t,"b",(function(){return n.b}))}},[[66,1,2]]]);
//# sourceMappingURL=main.5373c7c7.chunk.js.map