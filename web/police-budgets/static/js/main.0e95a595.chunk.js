(this["webpackJsonppolice-budgets"]=this["webpackJsonppolice-budgets"]||[]).push([[0],{10:function(e,t,a){"use strict";a.d(t,"c",(function(){return r})),a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return l}));var n=a(1),c=a.n(n),r=Object(n.createContext)(1),i=function(e){return c.a.createElement(r.Consumer,null,(function(t){return c.a.createElement(r.Provider,{value:t+1},e.children)}))},l=function(e){return c.a.createElement(r.Consumer,null,(function(t){var a="h"+Math.min(t,6);return c.a.createElement(a,e)}))}},17:function(e,t,a){"use strict";(function(e){a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return v}));var n=a(3),c=a(1),r=a.n(c),i=(a(65),a(10)),l=a(44),u=a(46),o=(a(96),new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0})),s=function e(t){var a=t.data,n=t.state,l=t.setValue,u=Object(c.useContext)(i.c),s=Object.keys(a).sort((function(e,t){var n=v(a[e]),c=v(a[t]);return n>c?-1:n<c?1:0})),g=n.changes;return 1!==s.length||Array.isArray(a[s[0]])?r.a.createElement(i.b,null,r.a.createElement("div",{style:{marginLeft:"".concat(u>1?1.5:0,"rem")}},s.map((function(t){if(Array.isArray(a[t])){var c=v(a[t]),u=v(a[t],g);return r.a.createElement("div",{key:t,className:"PoliceBudget-lineitem PoliceBudget-lineitem--final"},r.a.createElement(i.a,null,t),r.a.createElement("div",{className:"PoliceBudget-lineitem-adjust"},r.a.createElement(d,{value:g[a[t][0].uid],onChange:l(a[t][0].uid)})),r.a.createElement("div",{className:"PoliceBudget-lineitem-before"},o.format(c)),r.a.createElement("div",{className:"PoliceBudget-lineitem-after"},o.format(u)))}var E=function e(t){return Array.isArray(t)?t[0].uid:e(t[Object.keys(t)[0]])}(a[t]),b=f(a[t]),h=v(a[t]),y=v(a[t],g),P=a[s[s.indexOf(t)+1]]&&f(a[s[s.indexOf(t)+1]]);return r.a.createElement(m,{key:t,title:t,nextLevel:b,nextIsParent:P,value:g[E],setValue:l(E),before:h,after:y},b&&r.a.createElement("div",null,r.a.createElement(e,{data:b,state:n,setValue:l})))})))):r.a.createElement(e,{data:a[s[0]],state:n,setValue:l})},m=function(t){var a=t.nextLevel,l=t.nextIsParent,s=t.title,m=t.value,f=t.setValue,v=t.before,g=t.after,E=t.children,b=Object(c.useState)(!!e.hot),h=Object(n.a)(b,2),y=h[0],P=h[1],p=function(){return P(!y)},B=v!==g;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"PoliceBudget-lineitem ".concat(a?"":"PoliceBudget-lineitem--final"," ").concat(l?"PoliceBudget-lineitem--last":""," ").concat(B?"PoliceBudget-lineitem--haschange":"","\n        ")},r.a.createElement("div",{className:"PoliceBudget-lineitem-heading"},a?r.a.createElement("button",{className:"PoliceBudget-lineitem-toggle ".concat(y?"is-open":""),onClick:p},r.a.createElement(u.a,null),r.a.createElement(i.a,null,s)):r.a.createElement(i.a,null,s)),r.a.createElement("div",{className:"PoliceBudget-lineitem-adjust"},a?!y&&r.a.createElement("button",{className:"PoliceBudget-lineitem-adjust-toggle ".concat(y?"is-open":""),onClick:p},"Adjust"):r.a.createElement(d,{value:m,onChange:f})),r.a.createElement("div",{className:"PoliceBudget-lineitem-before"},o.format(v)),r.a.createElement("div",{className:"PoliceBudget-lineitem-after"},o.format(g))),y&&E)},d=function(e){var t=e.value,a=e.onChange;return r.a.createElement("div",{className:"PoliceBudget-adjust"},r.a.createElement("input",{type:"number",value:t||0,increment:1,max:100,min:-100,onChange:function(e){return a(+e.target.value)}}),"%")};function f(e){if(Array.isArray(e))return null;var t=Object.keys(e);return 1===t.length?f(e[t[0]]):e}var v=function e(t,a){return Array.isArray(t)?n(t):Object.values(t).reduce((function(t,c){return t+(Array.isArray(c)?n(c):e(c,a))}),0);function n(e){return e.reduce((function(e,t){var n=a&&a[t.uid]?1-a[t.uid]/100:1;return e+t.total*n}),0)}};t.a=function(e){var t=e.cityLabel,a=e.city,n=e.data,c=Object(l.a)(a),i=c.state,u=c.setValue,m=v(n),d=v(n,i.changes);return r.a.createElement("div",{className:"PoliceBudget"},r.a.createElement("div",{className:"PoliceBudget-main"},r.a.createElement("div",{className:"PoliceBudget-title"},r.a.createElement("div",null,"Adjust the police budget in"),r.a.createElement("h1",null,t)),r.a.createElement("div",{className:"PoliceBudget-lineitem PoliceBudget-header"},r.a.createElement("div",{className:"PoliceBudget-lineitem-heading"},"Category"),r.a.createElement("div",{className:"PoliceBudget-lineitem-adjust"},"% Reduction"),r.a.createElement("div",{className:"PoliceBudget-lineitem-before"},"FY2020"),r.a.createElement("div",{className:"PoliceBudget-lineitem-after"},"Proposed")),r.a.createElement("div",{className:"PoliceBudget-budget"},r.a.createElement(s,{data:n,state:i,setValue:u})),r.a.createElement("div",{className:"PoliceBudget-lineitem PoliceBudget-lineitem--total ".concat(m!==d?"PoliceBudget-lineitem--haschange":"")},r.a.createElement("div",{className:"PoliceBudget-lineitem-heading"},"Total"),r.a.createElement("div",{className:"PoliceBudget-lineitem-adjust"}),r.a.createElement("div",{className:"PoliceBudget-lineitem-before"},o.format(m)),r.a.createElement("div",{className:"PoliceBudget-lineitem-after"},o.format(d)))),r.a.createElement("div",{className:"PoliceBudget-visualization"},r.a.createElement(g,{label:"FY2020",value:o.format(m),className:"PoliceBudget-total-before"}),r.a.createElement(g,{label:"Proposed",value:o.format(d),className:"PoliceBudget-total-after"}),r.a.createElement(g,{label:"Savings",value:"".concat(o.format(m-d)," (").concat(Math.round(100*(m-d)/m),"%)")})))};var g=function(e){var t=e.label,a=e.value,n=e.className,c=void 0===n?"":n;return r.a.createElement("div",{className:"PoliceBudget-total ".concat(c)},r.a.createElement("div",{className:"PoliceBudget-total-label"},t),r.a.createElement("div",{className:"PoliceBudget-total-value"},a))}}).call(this,a(64)(e))},43:function(e,t,a){e.exports=a.p+"static/media/ConsolidatedExp_72PoliceDepartments.82be3999.csv"},44:function(e,t,a){"use strict";var n=a(3),c=a(20),r=a(4),i=a(45),l=function(e,t){switch(t.type){case"setValue":return Object(r.a)(Object(r.a)({},e),{},{changes:Object(r.a)(Object(r.a)({},e.changes),{},Object(c.a)({},t.key,t.value))});default:return e}},u={changes:{}};t.a=function(e){var t=Object(i.useStorageReducer)(localStorage,"".concat(e," Police Budget"),l,u),a=Object(n.a)(t,2),c=a[0],r=a[1];return{state:c,setValue:function(e){return function(t){r({type:"setValue",key:e,value:t})}}}}},46:function(e,t,a){"use strict";var n=a(1),c=a.n(n),r=a(53),i=a(48),l=a.n(i);t.a=function(){return c.a.createElement(r.a,{src:l.a})}},48:function(e,t,a){e.exports=a.p+"static/media/carrot.f3e14036.svg"},56:function(e,t,a){e.exports=a(95)},61:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){},65:function(e,t,a){},68:function(e,t,a){},8:function(e,t,a){"use strict";var n=a(17);a.d(t,"a",(function(){return n.a})),a.d(t,"c",(function(){return n.c})),a.d(t,"b",(function(){return n.b}))},95:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),r=a(42),i=a.n(r),l=(a(61),a(3)),u=(a(62),a(43)),o=a.n(u),s=a(99),m=a(4),d=(a(63),a(52)),f=a(8),v=function(e){var t=e.data,a=g(t),r=a.data,i=a.slugTitle,u=Object.keys(i).map((function(e){return{value:e,label:i[e]}})),o=window.PoliceBudgetCity||null,s=o&&u.find((function(e){return e.value===o})),m=Object(n.useState)(s?s.value:u.find((function(e){return"atlanta-ga"===e.value})).value),v=Object(l.a)(m,2),E=v[0],b=v[1],h=i[E];return Object(n.useEffect)((function(){var e=u.map((function(e){return e.value})),t=function(t){"ArrowUp"===t.key?function(){var t=e.indexOf(E),a=u[t+1]?u[t+1]:u[0];b(a.value)}():"ArrowDown"===t.key&&function(){var t=e.indexOf(E),a=u[t-1]?u[t-1]:u[e.length-1];b(a.value)}()};return window.addEventListener("keydown",t),function(){return window.removeEventListener("keydown",t)}}),[E,u]),c.a.createElement("div",{className:"CitySwitcher"},!s&&c.a.createElement(d.a,{options:u,value:u.find((function(e){return e.value===E})),onChange:function(e){b(e.value)}}),c.a.createElement(f.a,{cityLabel:h,city:E,data:r[E]}))},g=function(e){var t={},a=e.map((function(e){var a="".concat(e.city.trim().toLowerCase().replace(/\s/g,"-"),"-").concat(e.stateAbb.trim().toLowerCase());return t[a]||(t[a]="".concat(e.city.trim(),", ").concat(e.stateAbb.trim())),Object(m.a)(Object(m.a)({},e),{},{uid:"".concat(e.department,"-").concat(e.expensecat,"-").concat(e.subdep,"-").concat(e.expensedescrip,"-").concat(e.personneltype),slug:a,total:parseInt(e.total)})})).reduce((function(e,t){return e[t.slug]||(e[t.slug]=[]),e[t.slug].push(t),e}),{}),n=E(a);return console.log(n),{data:n,slugTitle:t}},E=function(e){return Object.keys(e).reduce((function(t,a){return t[a]=b("department",e[a]),Object.keys(t[a]).forEach((function(e){t[a][e]=b("expensecat",t[a][e]),Object.keys(t[a][e]).forEach((function(n){t[a][e][n]=b("subdep",t[a][e][n]),Object.keys(t[a][e][n]).forEach((function(c){t[a][e][n][c]=b("expensedescrip",t[a][e][n][c]),Object.keys(t[a][e][n][c]).forEach((function(r){t[a][e][n][c][r]=b("personneltype",t[a][e][n][c][r])}))}))}))})),t}),{})},b=function(e,t){return t.reduce((function(t,a){return t[a[e]]||(t[a[e]]=[]),t[a[e]].push(a),t}),{})},h=function(){var e=y(o.a);return e?c.a.createElement(v,{data:e}):c.a.createElement("div",null,"Loading")},y=function(e){var t=Object(n.useState)(),a=Object(l.a)(t,2),c=a[0],r=a[1];return Object(n.useEffect)((function(){fetch(e).then((function(e){return e.text()})).then((function(e){r(Object(s.a)(e))}))}),[r,e]),c};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(c.a.createElement(h,null),document.getElementById("PoliceBudgets")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},96:function(e,t,a){"use strict";a(4),a(3),a(1),a(68),a(51),a(8)}},[[56,1,2]]]);
//# sourceMappingURL=main.0e95a595.chunk.js.map