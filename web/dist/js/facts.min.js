/**
 * @project        vera
 * @author         Brand Industry JZG
 * @build          Wed, Aug 17, 2022 8:13 PM ET
 * @copyright      Copyright (c) 2022, 
 *
 */
"use strict";!function(){var t=window.VERA||{};function a(){$("[data-percentage-pie]:not(.percentage-pie-initialized)").each(e),$("[data-ratio]:not(.ratio-initlialized)").each(r),$("[data-time]:not(.time-initlialized)").each(n)}function e(){var t=$(this),a=100,e=JSON.parse(t.attr("data-percentage-pie"));t.addClass("percentage-pie-initialized"),e?(t=[e.value,100-e.value],e=d3.pie()(t),t=d3.arc().innerRadius(32).outerRadius(40),e.pop(),(a=d3.select(this).append("svg").attr("viewBox","0 0 100 "+a).selectAll("g").data(e).enter().append("g")).append("path").attr("class","bg-arc").attr("d",t({startAngle:0,endAngle:2*Math.PI})).attr("x",50).attr("y",50).attr("transform","translate(50 50)"),a.append("path").attr("class","data-arc").attr("d",t).attr("transform","translate(50 50)"),a.append("text").text(function(t){return t.value+"%"}).attr("x",50).attr("y",50).attr("class","viz-text filled"),b(this)):console.warn("invalid fact params",this)}function r(){var e,t,r,n,a=$(this),i=JSON.parse(a.attr("data-ratio"));a.addClass("ratio-initialized"),i&&((a=[]).length=i.value.consequent,t=Math.ceil(i.value.consequent/10)*(e=10<=a.length?10:100/a.length),n=e/2-2*(r=.1*e),d3.select(this).append("svg").attr("viewBox","0 0 100 "+t).append("g").selectAll(".piece").data(a).enter().append("circle").attr("r",n).attr("cx",function(t,a){return a%10*e+r+n}).attr("cy",function(t,a){return Math.floor(a/10)*e+r+n}).attr("class",function(t,a){return"piece "+(a<i.value.antecedant?"filled":"")}),b(this))}function n(){var t=$(this),a=JSON.parse(t.attr("data-time")),e="days"===a.unit?"calendar":"clock",t=$(this),r=d3.select(this).append("svg");switch(e){case"calendar":for(var n=+a.value,i=Math.ceil(n/30),c=Math.max(1,Math.min(7,Math.floor(Math.log(2.72)*i))),l=Math.ceil(i/c),l=(w=100)/c*(5/7)*l,s=w/c,d=.05*s,o=5/7*s,p=.05*o,u=s-2*d,h=o-2*p,f=u/7,g=.05*f,v=h/5,M=.05*v,i=(r.attr("viewBox","0 0 "+w+" "+l),[]),x=n;0<x;)i.push(30<=x?30:x),x-=30;var n=r.selectAll(".calendar").data(i).enter().append("g").attr("transform",function(t,a){return"translate("+(a%c*s+d)+" "+(Math.floor(a/c)*o+p)+")"}),m=(n.append("rect").attr("class","calendar-back").attr("width",u).attr("height",h),[]);m.length=30,n.each(function(t,a){var e=t;d3.select(this).selectAll(".day-cell").data(m).enter().append("rect").attr("class",function(t,a){return"day-cell"+(a<e?" filled":"")}).attr("width",f-2*g).attr("height",v-2*M).attr("x",function(t,a){return a%7*f+g}).attr("y",function(t,a){return v*Math.floor(a/7)+M})});break;case"clock":var w,l=w=100,A=.45*w,u=(r.attr("viewBox","0 0 "+w+" "+l),d3.arc().innerRadius(0).outerRadius(A).startAngle(0)),h="hours"==a.unit?"12":"60",n=r.append("g").attr("transform","translate("+w/2+" "+l/2+")"),y=(n.append("circle").attr("class","clock-back").attr("r",A).attr("cx",0).attr("cy",0),n.append("path").attr("class","time-amount filled").attr("d",u({endAngle:a.value/h*Math.PI*2})),[]);y.length=12,n.append("g").attr("class","markings").selectAll("circle").data(y).enter().append("circle").attr("cx",function(t,a){return Math.cos(2*Math.PI*(a/y.length))*A*.9}).attr("cy",function(t,a){return Math.sin(2*Math.PI*(a/y.length))*A*.9}).attr("r",A/40);break;default:return}b(this)}t.initFacts=a,window.VERA=t,$(function(){a()});var i=new Event("factloaded",{bubbles:!0});function b(t){t.dispatchEvent(i)}}();