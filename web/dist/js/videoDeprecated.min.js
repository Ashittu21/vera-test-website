/**
 * @project        vera
 * @author         Brand Industry JZG
 * @build          Wed, Aug 17, 2022 8:13 PM ET
 * @copyright      Copyright (c) 2022, 
 *
 */
"use strict";var $body,_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function videoOnLoadDep(){$body=$("body"),loadScriptDep("https://www.youtube.com/iframe_api"),loadScriptDep("https://player.vimeo.com/api/player.js",function(){onVimeoApiReady()})}function loadScriptDep(e,o){o="function"==typeof o?o:function(){return null};var t=document.createElement("script"),e=(t.src=e,t.onload=function(){o()},document.getElementsByTagName("script")[0]);e.parentNode.insertBefore(t,e)}function initVideos(){onVimeoApiReady(),onYouTubeIframeAPIReady()}window.addEventListener("load",function(){videoOnLoadDep()});var PLAY_ON_SCROLL_TRIGGER_HOOK=1;function onVimeoApiReady(){$(".video-player.vimeo:not(.video-initialized)").each(function(){var e,o,t,i,n=$(this),a="true"==n.attr("data-play-on-scroll"),r=setupVideoPlayerIframe(n);a?(r.addClass("iframe_target"),r.addClass("play-on-scroll"),$body.append(r),e=new Vimeo.Player(r[0]),TweenLite.set(r[0],{autoAlpha:0}),o=TweenLite.to(r[0],.1,{autoAlpha:1,paused:!0}),t=!1,(i=new ScrollMagic.Scene({triggerElement:n[0],triggerHook:PLAY_ON_SCROLL_TRIGGER_HOOK}).addTo(VERA.sm).setClassToggle(n[0],"pinned").on("enter",function(){e.play&&e.play(),o.play(),t||(t=!0,gaEvent("Video","Play","Play-On-Scroll"))}).on("leave",function(){e.pause&&e.pause(),o.reverse()})).duration(determineDuration(n)),window.addEventListener("resize",function(){i.duration(determineDuration(n))})):(n.one("click",function(){n.find(".video-player-cover").remove(),(e=new Vimeo.Player(r[0])).play(),n.data("player",e),new ScrollMagic.Scene({triggerElement:n[0]}).addTo(VERA.sm).on("leave",function(){e.pause()}).duration(determineDuration(n))}),n.find(".video-outer").addClass("loaded"))})}function setupVideoPlayerIframe(e){e=e.find(".iframe_target");return e.html(e.attr("data-embed")),(e=e.find("iframe")).attr("allow","autoplay"),e}function onYouTubeIframeAPIReady(){$(".video-player.youtube:not(.video-initialized)").each(function(){var e=$(this).find(".video-player-cover"),o=$(this),t=(e.addClass("video-initialized"),"true"==o.attr("data-play-on-scroll"));if(VERA.isMobile)i=playYoutube(e[0],0);else if(t){var i,n=!1;if(!(i=playYoutube(e[0],0)))return void console.warn("video player missing");var a=e.parents(":not(:last-child)").next(),t=o.find("iframe"),r=($body.append(t),t.addClass("play-on-scroll"),TweenLite.set(t[0],{autoAlpha:0}),TweenLite.to(t[0],.1,{autoAlpha:1,paused:!0})),d=!0,l=(i.addEventListener("onStateChange",function(e){switch(e.data){case 0:a.length&&(r.pause(0),TweenLite.to(window,1,{scrollTo:a.offset().top-window.innerHeight/2}));break;case 3:d&&i.pauseVideo(),d=!1}}),i.addEventListener("onReady",function(){i.playVideo()}),new ScrollMagic.Scene({triggerElement:o[0],triggerHook:PLAY_ON_SCROLL_TRIGGER_HOOK}).addTo(VERA.sm).setClassToggle(o[0],"pinned").on("enter",function(){i.playVideo&&i.playVideo(),r.pause(1),n||(n=!0,gaEvent("Video","Play","Play-On-Scroll"))}).on("leave",function(){i.pauseVideo&&i.pauseVideo(),r.pause(0)}));l.duration(determineDuration(o)),window.addEventListener("resize",function(){l.duration(determineDuration(o))})}else e.one("click",function(){i=playYoutube(this,1);var e=new ScrollMagic.Scene({triggerElement:o[0]}).addTo(VERA.sm).on("leave",function(){i.pauseVideo()});e.duration(determineDuration(o)),window.addEventListener("resize",function(){e.duration(determineDuration(o))})});e.addClass("loaded")}),$(".video-play-trigger.youtube:not(.video-initialized)").each(function(){var o=$(this),t=$("#"+o.attr("data-media-id"));o.addClass("video-initialized"),o.one("click",function(){t.find(".video-player-cover").remove();var e=t.find(".iframe_target"),e=new YT.Player(e[0],{height:"390",width:"640",host:"https://www.youtube.com",origin:window.location.origin,videoId:e.parent().attr("data-videoid"),playerVars:{showInfo:!1,host:"https://www.youtube.com",modestbranding:!0,origin:window.location.origin,rel:0,autoplay:1,enablejsapi:1}});o.data("player",e)})})}function playYoutube(e,o){var o=void 0!==(void 0===o?"undefined":_typeof(o))?o:1,t=$(e).parent(),i=t.closest(".video-container").siblings(".special-reports-landing"),n=t.find(".iframe_target").attr("id");if($(e).fadeOut(),i.length&&i.css({transform:"translateY(0)","margin-bottom":"60px"}),n)return new YT.Player(n,{height:"390",width:"640",host:"https://www.youtube.com",videoId:t.attr("data-videoid"),playerVars:{showinfo:0,modestbranding:1,rel:0,autoplay:o,origin:window.location.origin,enablejsapi:1}});console.warn(t,"missing")}function determineDuration(e){return e.outerHeight(!0)}