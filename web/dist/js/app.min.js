/**
 * @project        vera
 * @author         Brand Industry JZG
 * @build          Wed, Aug 17, 2022 8:13 PM ET
 * @copyright      Copyright (c) 2022, 
 *
 */
"use strict";function slugify(e){return e.toLowerCase().replace(".","").replace(",","").replace(/\s/g,"-")}[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach(function(e){e.hasOwnProperty("append")||Object.defineProperty(e,"append",{configurable:!0,enumerable:!0,writable:!0,value:function(){var e=Array.prototype.slice.call(arguments),i=document.createDocumentFragment();e.forEach(function(e){var t=e instanceof Node;i.appendChild(t?e:document.createTextNode(String(e)))}),this.appendChild(i)}})}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),i=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var n=arguments[1],o=0;o<i;){var a=t[o];if(e.call(n,a,o,t))return a;o++}},configurable:!0,writable:!0}),function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var i=document.createEvent("CustomEvent");return i.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i}"function"!=typeof window.CustomEvent&&(e.prototype=window.Event.prototype,window.Event=e)}();var Site={$body:$("body"),$header:$("#Header"),$navToggle:$("#HeaderMenuToggle"),$search:$("#HeaderSearch"),headerHeight:$("#Header").outerHeight(),ww:$(window).width(),wh:$(window).height(),hasTouch:!1,winScrollTop:0,init:function(){Site.touchDetection(),Site.search(),Site.scrollTo(),Site.subNav(),Site.toggleNav(),Site.sectionNav.init(),Site.ourWork(),Site.footer.init(),Site.squaresInit(),HighlightShare(),Site.loadLazySvg(),Site.images.fadein()},initConditionals:function(){navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad)/)&&$(".i-parallax").removeClass("parallax"),$(".filter").length&&Site.modules.filter.init(),$(".share").length&&Site.share.init(),$(".no-touch .fixed-share").length&&($(".fixed-share").closest(".module-intro__content").length||$(".fixed-share").closest(".module-text__inner").length)&&Site.share.fixedPosScroll(),$(".module-carousel").length&&Site.carousel.init(),$(".quote-carousel").length&&Site.carousel.quote(),$(".featured-stream-modules").length&&Site.carousel.featuredModules(),$(".post-sidebar__series").length&&Site.carousel.sidebar(),$(".scroll-to").length&&Site.clickScroll.init(),$(".dropdown-outer").length&&Site.fakeDropdown(),$(".trigger-modal").length&&Site.modal.init(),$(".module-columns-3up").length&&(Site.sameHeight.init(".module-columns-3up .col > a"),Site.sameHeight.init(".module-columns-3up .col > .text-outer")),$(".touch .infographic").length&&Site.infographics.init($(".infographic")),$(".touch .bar-ltr").length&&Site.infographics.barGraph($(".bar-ltr")),$(".inline-audio-player").length&&Site.audio.init(),$(".module-body").length&&Site.init404.init(),$("#PopupEmailSignup").length&&!Site.signup.checkEmailCookie()&&(Site.signup.init($("#PopupSubscribe")),$("#PopupEmailSignup").find(".never-show-signup").on("click",function(){Site.signup.setEmailCookie("never"),Site.signup.closeModal()}),Site.signup.setEmailCookie(),Site.signup.emailSignup()),$("#SidebarSubscribe").length&&Site.signup.init($("#SidebarSubscribe")),$(".fadein").length&&Site.images.fadein(),$(".image-attribution").length&&(Site.images.resizeAttributions(),window.addEventListener("resize",function(){Site.resizeTimer&&clearTimeout(Site.resizeTimer),Site.resizeTimer=setTimeout(function(){Site.images.resizeAttributions()},100)})),$("img").imagesLoaded(function(){Site.images.resizeAttributions()}),$(".resource__see-more").length&&Site.resourcesToggle.init(),Site.initTableNotes(),new Site.slideout,Site.donateModal.init()},loadLazySvg:function(){$("[data-lazy-svg]").each(function(){var t=$(this),i=this.getAttribute("class");$.get(t.attr("data-lazy-svg")).done(function(e){e=e.documentElement||e,e=$(e);e.attr("class",i),t.after(e),t.remove()})})},audio:{init:function(){$(".inline-audio-player").each(function(){var n=$(this).find(".audio_player"),i=$(this).find(".audio-player"),e=$(this).find(".btn-play"),o=$(this).find(".btn-pause"),a=$(this).find(".audio__start"),s=$(this).find(".audio__end"),r=$(this).find(".audio-loading"),l=$(this).find(".audio__marker"),c=$(this).find(".audio__track-outer"),u=!1;document.createElement("audio").canPlayType&&(null!=i.buffered&&0!=i.buffered.length||r.remove(),e.on("click",function(){$(this).addClass("hidden"),o.removeClass("hidden"),n[0].play(),r.remove(),i.removeClass("hidden"),c.slider({value:0}),c.slider({value:n[0].currentTime,step:.01,orientation:"horizontal",range:"min",max:n[0].duration,animate:!0,slide:function(){u=!0},stop:function(e,t){u=!1,n[0].currentTime=t.value}});var e=parseInt(n[0].duration,10),t=Math.floor(e/60,10),e=e-60*t;s.text(t+":"+(9<e?e:"0"+e))}),o.on("click",function(){$(this).addClass("hidden"),e.removeClass("hidden"),n[0].pause()}),n.bind("timeupdate",function(){var e=n[0].currentTime/n[0].duration*100,t=parseInt(n[0].currentTime,10),i=Math.floor(t/60,10),t=t-60*i;a.text(i+":"+(9<t?t:"0"+t)),u||(l.css({left:e+"%"}),$(".ui-slider-range-min").css("width",e+"%"))}))})}},carousel:{init:function(){$(".module-carousel").each(function(){var e=$(this),t={adaptiveHeight:!0};"fade"===this.dataset.transition&&(t.fade=!0);"true"==this.dataset.autoplay&&(t.autoplay=!0);var i="true"==this.dataset.arrows;t.arrows=i,e.slick(t)})},featuredModules:function(){$(".featured-stream-modules .col-outer").slick({dots:!0,arrows:!1,slidesToShow:1,slidesToScroll:1,mobileFirst:!0,responsive:[{breakpoint:700,settings:"unslick"}]})},quote:function(){function e(){$(".module-quote-carousel, .slide").height("auto"),$(".slide").height($(".module-quote-carousel").outerHeight())}$(".quote-carousel").on("init",function(){$(".module-quote-carousel").hasClass("module-quote-carousel--facts")||e()}).slick(),$(".module-quote-carousel").hasClass("module-quote-carousel--facts")||$(window).on("resize",e)},sidebar:function(){$(".post-sidebar__series ul").slick({dots:!1,arrows:!0,slidesToShow:1,slidesToScroll:1,mobileFirst:!0,responsive:[{breakpoint:768,settings:"unslick"}]})}},clickScroll:{init:function(){$(".scroll-to").on("click",function(e){e.preventDefault();e=$("#"+$(this).attr("data-scroll-to"));$("html, body").animate({scrollTop:e.offset().top-Site.$header.outerHeight()},500)})}},fakeDropdown:function(){$(".dropdown-active").on("click",function(e){e.preventDefault(),$(this).closest(".dropdown-outer").length&&$(this).closest(".dropdown-outer").toggleClass("open")}),$(".no-touch").on("click",function(e){e=$(e.target);!e||e.closest(".open").length||e.hasClass("open")||e.closest(".open").length||e.hasClass("open")||$(".dropdown-outer").removeClass("open")})},footer:{init:function(){Site.signup.init($("#FooterSubscribe"))}},signup:{init:function(t){var i={},n=(i.email=t.find(".email_input")[0],i.fname=t.find(".fname_input")[0],i.lname=t.find(".lname_input")[0],t.find(".newsletter_submit"));_.forEach(i,function(e,t){$(e).on("keyup",function(e){var t=!1;void 0!==e.key?["Enter"].includes(e.key)&&(t=!0):void 0!==e.keyIdentifier?["Enter"].includes(e.keyIdentifier)&&(t=!0):void 0!==e.keyCode&&["13"].includes(e.keyCode)&&(t=!0),t&&n.click(),$(this).val()?$(this).addClass("filled"):$(this).removeClass("filled")})}),n.on("click",function(e){e.preventDefault(),Site.signup.validate.all(i,t)})},validate:{all:function(e,t){var i=[];i.push(Site.signup.validate.email(e.email)),i.push(Site.signup.validate.text(e.fname)),i.push(Site.signup.validate.text(e.lname)),i.every(function(e,t,i){return!0===e})&&Site.signup.ajaxSubmit(t)},email:function(e){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e.value);return t||this.error(e),t},text:function(e){var t=e.value&&""!=e.value;return t||this.error(e),t},error:function(e){e.classList.add("error"),$(e).one("keydown",function(e){$(this).removeClass("error")})}},ajaxSubmit:function(i){i.addClass("loading");var n=i.find(".newsletter_subscribe_result");$.ajax({type:"GET",url:i.attr("action"),data:i.serialize(),cache:!1,dataType:"jsonp",jsonp:"c",contentType:"application/json; charset=utf-8",error:function(e){console.log(e),i.removeClass("loading")},success:function(e){var t;i.parent().find(".js-remove").hide(),Site.signup.setEmailCookie("never"),"success"!=e.result?(t=e.msg||"<p>Sorry. Unable to subscribe. Please try again later.<p>",e.msg&&0<=e.msg.indexOf("already subscribed")&&(t="<p>Looks like you're already subscribed.</p>"),n.html(t+VERA.popupEmailThankYou)):(ga("send","event","form","submit","email subscribe"),n.html(VERA.popupEmailThankYou||"Thank you! Please check your email for a confirmation soon.")),i.removeClass("loading")}})},checkEmailCookie:function(){var e=document.cookie,t="vera_subscribe=",i=e.indexOf("; "+t);if(-1==i){if(0!=(i=e.indexOf(t)))return null}else{i+=2;var n=document.cookie.indexOf(";",i);-1==n&&(n=e.length)}return Site.signup.setEmailCookie(),unescape(e.substring(i+t.length,n))},setEmailCookie:function(e){null==e?e=30:"never"==e&&(e=1e4);var t=new Date;t.setTime(t.getTime()+864e5*e),document.cookie="vera_subscribe=true; path=/; expires="+t.toGMTString()+";"},popup:$("#PopupEmailSignup"),emailSignup:function(){var i=Site.signup.popup;setTimeout(function(){i.hasClass("triggered")||(i.css("display","block"),i.addClass("triggered"),i.attr("aria-hidden",!1))},2e3),i.find(".popup-close").on("click",function(e){e.preventDefault(),i.removeClass("visible").hide()}),$(".popup-overlay").on("click",function(e){var t=$(e.target);!t||t.closest(".popup-outer").length||t.closest(".popup-outer").length||(e.preventDefault(),i.removeClass("visible").hide())})},closeModal:function(){Site.signup.popup.fadeOut().attr("aria-hidden",!0).removeClass("visible")}},homepage:{$homepageBanner:$(".homepage-banner"),$homepageArrow:$(".scroll-indicator"),init:function(){var e=Site.homepage.$homepageBanner.outerHeight();e>Site.wh&&Site.homepage.$homepageArrow.addClass("visible"),Site.homepage.$homepageArrow.on("click",function(){$("body, html").animate({scrollTop:e-66},500),Site.homepage.arrowFade()})},ajaxEmailSignup:function(){},ajaxMailChimpForm:function(t,o){t.on("submit",function(e){var i,n;!function(e){e=e.find("input[type='email']").val();{if(!e||!e.length)return;if(-1==e.indexOf("@"))return}return 1}(t)?o.html("A valid email address must be provided."):(o.html("Please wait..."),i=t,n=o,$.ajax({type:"GET",url:i.attr("action"),data:i.serialize(),cache:!1,dataType:"jsonp",jsonp:"c",contentType:"application/json; charset=utf-8",error:function(e){},success:function(e){var t;"success"!=e.result?(t=e.msg||"Sorry. Unable to subscribe. Please try again later.",e.msg&&0<=e.msg.indexOf("already subscribed")&&(t="You're already subscribed. Thank you!"),n.html(t)):(n.html("Thank you! Please check your email for a confirmation soon."),setTimeout(function(){n.fadeOut(500,function(){n.html("").show(),i.find("input[type=email]").val("")})},4e3))}}))})},arrowFade:function(){Site.homepage.$homepageArrow.fadeOut(500),$(window).off("scroll",Site.homepage.arrowFade)}},images:{fadein:function(){$(".fadein:not(.loaded),.fade-in:not(.loaded)").imagesLoaded({background:!0}).progress(function(e,t){$(t.element).addClass("loaded")}),$("img.fade-in:not(.loaded)").imagesLoaded().progress(function(e,t){$(t.img).addClass("loaded")})},resizeAttributions:function(){$(".image-attribution").each(function(){$(this).css("width",$(this).parent().outerHeight())})}},infographics:{init:function(e){e.children(".bars-outer").length&&($(".bar__bar").each(function(){var e=$(this).attr("data-value");$(this).css("height",e+"%")}),$(".pie__slice").each(function(){var e=$(this).attr("data-value")/100*360;$(this).find(".rotated").css("transform","rotate("+e+"deg)")}))},barGraph:function(e){e.find(".bar-ltr__row").length&&$(".bar-ltr__row").each(function(){var e=$(this).attr("data-value");$(this).css("width",e+"%")})}},init404:{init:function(){Site.init404.resize(),$(window).on("resize",function(){Site.init404.resize()})},resize:function(){$(".module-body").css("min-height",Site.wh-Site.$header.outerHeight()-$(".footer").outerHeight())}},modal:{init:function(){$(".trigger-modal").on("click",function(e){e.preventDefault(),$("#"+$(this).attr("data-modal")).addClass("visible")}),$(".modal-outer").on("click",function(e){var t=$(e.target);!t||t.closest("a").length||t.closest(".share").length||t.closest(".module-intro").length||t.closest(".donate-intro").length||t.closest(".popup-outer").length||t.closest(".popup-outer").length||(e.preventDefault(),Site.modal.close())})},close:function(){$(".modal-outer").removeClass("visible")}},modules:{filter:{init:function(){$(".filter--viewtype a").on("click",function(e){e.preventDefault(),$(this).hasClass("active")||(e=window.location.search,e="list"==$(this).attr("data-viewtype")?""===e?e+"?list=true":e+"&list=true":"?list=true"===e?"":e.replace("&list=true",""),e=window.location.origin+window.location.pathname+e,history.replaceState({query:e},"",e),$(".filter--viewtype").find(".active").removeClass("active"),$(this).addClass("active"),$(this).closest(".stream-module-outer").attr("data-view",$(this).attr("data-viewtype")),Site.scrollTo())}),$(".filter__clear").on("click",function(e){e.preventDefault(),$(this).closest(".filter__dropdown-inner").find("input[type=checkbox]").each(function(){$(this).prop("checked",!1)}),$(this).closest(".filter__dropdown-inner").find("input[type=text]").val(""),$("#date-slider").slider("values",[Stream.content.daterange.start,Stream.content.daterange.end]),$("#date-slider .ui-slider-handle:first-of-type").attr("data-year",Stream.content.daterange.start),$("#date-slider .ui-slider-handle:nth-of-type(2)").attr("data-year",Stream.content.daterange.end),$(Stream.filter.from).val(Stream.content.daterange.start),$(Stream.filter.to).val(Stream.content.daterange.end)}),$(".filter__dropdown-inner .btn, .filter__dropdown-outer").on("click",this.toggle),$(".filter__dropdown-child-outer").on("click",this.childToggle)},childToggle:function(){$(this).next().toggleClass("dropped"),$(this).toggleClass("open")},toggle:function(){Site.modules.filter.isOpen=!Site.modules.filter.isOpen,Site.modules.filter.isOpen?$(window).on("keydown",Site.modules.filter.keyListen):$(window).off("keydown",Site.modules.filter.keyListen),$(".filter__dropdown-outer").toggleClass("open"),$(".filter__dropdown-outer").closest(".filter-outer").find(".filter__dropdown").toggleClass("dropped")},isOpen:!1,keyListen:function(e){var t=!1;void 0!==e.key?["Enter","Escape"].includes(e.key)&&(t=!0):void 0!==e.keyIdentifier?["Enter","U+001B"].includes(e.keyIdentifier)&&(t=!0):void 0!==e.keyCode&&["13","27"].includes(e.keyCode)&&(t=!0),t&&(e.preventDefault(),Site.modules.filter.toggle())}},firstLetter:function(){var e=$(".post-module .module-image-right__text > *:first-child"),t='<span class="first-letter">'+(i=e.html().trim()).charAt(0)+"</span>",i=i.slice(1);e.html(i=t+i)}},newsPopup:{checkEmailCookie:function(){var e=document.cookie,t="veraBlog=",i=e.indexOf("; "+t);if(-1==i){if(0!=(i=e.indexOf(t)))return null}else{i+=2;var n=document.cookie.indexOf(";",i);-1==n&&(n=e.length)}return Site.newsPopup.setEmailCookie(),unescape(e.substring(i+t.length,n))},setEmailCookie:function(){var e=new Date;e.setTime(e.getTime()+2592e6),document.cookie="veraBlog=true; expires="+e.toGMTString()+"; path=/",Site.newsPopup.emailSignup()},emailSignup:function(){var i=$("#PopupEmailSignup"),e=document.body,t=document.documentElement,n=Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight)/2;$(window).on("scroll",function(){i.hasClass("triggered")||$(window).scrollTop()>n&&i.addClass("triggered").fadeIn(500,function(){$(this).addClass("visible")})}),i.find(".popup-close").on("click",function(e){e.preventDefault(),i.removeClass("visible").hide()}),$(".popup-overlay").on("click",function(e){var t=$(e.target);!t||t.closest(".popup-outer").length||t.closest(".popup-outer").length||(e.preventDefault(),i.removeClass("visible").hide())})}},ourWork:function(){$(".mobile-toggle").on("click",function(e){e.preventDefault(),$(this).toggleClass("mobile-open").next(".action-areas").toggleClass("mobile-visible")})},recalc:function(){Site.ww=$(window).width(),Site.wh=$(window).height(),Site.headerHeight=Site.$header.outerHeight()},resourcesToggle:{init:function(){$(".resource__see-more").on("click",function(e){e.preventDefault(),$(this).toggleClass("open"),$(".resources--toggled").toggleClass("open"),"See More"==$(this).text()?$(this).text("See Less"):$(this).text("See More")})}},sameHeight:{init:function(e){$(window).on("load resize",function(){Site.sameHeight.resize(e)})},resize:function(e){var t=0;$(e).height("auto"),$(e).each(function(){$(this).outerHeight()>t&&(t=$(this).outerHeight())}),$(e).height(t)}},scrollTo:function(){var e=$(".no-touch").find(".stream-module, .post-module, .infographic, .lazy-load, .mobile-dropdown, .bar-ltr, .fadeup");function t(){e.each(function(){var e=$(this);window.pageYOffset+window.innerHeight>e.offset().top&&(e.addClass("triggered"),e.hasClass("infographic")&&Site.infographics.init(e),e.hasClass("bar-ltr")&&Site.infographics.barGraph(e))})}!Site.hasTouch&&e.length?(t(),$(window).on("load scroll resize",t),$("#article").on("scroll",t)):$(".fadeup").removeClass("fadeup")},search:function(){$(".header__search__container.container .header__search__input").on("keydown",function(){event.stopPropagation()}),$(".toggle-search").on("click",function(e){e.preventDefault(),Site.$search.toggleClass("search-open"),Site.$search.hasClass("search-open")&&setTimeout(function(){Site.$search.find(".header__search__input").focus()},100)})},sectionNav:{$sectionNav:$(".mobile-dropdown"),$sectionNavSpacer:$(".mobile-dropdown + .mobile-dropdown-spacer"),currentPage:{url:null},init:function(){if($(".mobile-dropdown").length){$(".mobile-dropdown__mobile-active").on("click",function(e){e.preventDefault(),$(this).closest(".mobile-dropdown").toggleClass("open")}),Site.sectionNav.$sectionNav.length&&Site.sectionNav.fixedPosScroll(),console.log("init");var i=$("#SectionContent"),n=$(".ajax-outer"),o=$(".mobile-dropdown__mobile-active"),a=$(".streamloader"),s=null;e(),window.addEventListener("resize",e);try{history.replaceState({url:window.location.href},null,window.location.href)}catch(e){console.log(e)}$(window).on("popstate",function(e){r(e.originalEvent.state)}),$(".mobile-dropdown a:not(.link-out)").on("click",function(e){e.preventDefault();$(this);var t=$(this).attr("href");r({url:t});try{history.replaceState({url:t},null,t)}catch(e){console.warn(e)}})}function e(){var e=Site.sectionNav.$sectionNav.height()+"px";Site.sectionNav.$sectionNavSpacer.css("height",e)}function r(e){var t;null!=e&&e.url!==Site.sectionNav.currentPage.url&&e.url!==window.location.href&&(Site.sectionNav.currentPage=e,t=$(".mobile-dropdown li:first-child > a"),a.removeClass("hidden"),Site.sectionNav.$sectionNav.find(".active").removeClass("active"),$(".mobile-dropdown li").each(function(){e.url==$(this).find("a").attr("href")&&(t=$(this).find("a"))}),t.addClass("active"),Site.sectionNav.$sectionNav.removeClass("open"),o.text(t.text()),n.addClass("loading"),console.log("STATE URL - :"+e.url),s=$.ajax({type:"GET",url:e.url,beforeSend:function(){null!=s&&s.abort()},success:function(e){i.empty(),i.append(e),console.log(i.find("script")),Site.scrollTo(),Site.initConditionals(),a.addClass("hidden"),n.removeClass("loading"),initVideos(),$(".text-banner").length&&$("body, html").animate({scrollTop:$(".text-banner").outerHeight()},500)},error:function(e){}}))}},fixedPosScroll:function(){var e=Site.sectionNav.$sectionNav,t=e.offset().top,i=!1,n=0;function o(){i=!1,n+Site.headerHeight>t?e.addClass("fixed"):e.removeClass("fixed")}function a(){i||(n=$(window).scrollTop(),requestAnimationFrame(o)),i=!0}a(),$(window).on("scroll",a),$(window).on("load resize",function(){t=e.offset().top,a()})}},share:{init:function(){},fixedPosScroll:function(){var e=$(".fixed-share"),t=e.offset().top,i=e.children("ul").outerHeight(),n=e.closest(".module-intro"),o=n.offset().top,a=n.outerHeight()-40,s=$(".mobile-dropdown").length?2*Site.headerHeight:Site.headerHeight,r=!1,l=0;function c(){t=e.offset().top,i=e.children("ul").outerHeight(),o=n.offset().top,a=n.outerHeight()-40}function u(){r=!1,t<l+s?o+a-i-s<l?e.addClass("past"):e.removeClass("past").addClass("fixed"):e.removeClass("fixed")}function d(){l=$(window).scrollTop(),r||requestAnimationFrame(u),r=!0}c(),$(".fixed-share").each(function(e){0<e&&$(this).remove()}),768<=Site.ww?(requestAnimationFrame(u),$(window).on("scroll",d)):$(window).off("scroll",d),$(window).on("resize",function(){c(),768<=Site.ww?(requestAnimationFrame(u),$(window).on("scroll",d)):$(window).off("scroll",d)})}},subNav:function(){$(".main-nav-outer a").each(function(){$(this).on("click",function(e){var t=$(this).attr("data-subnav");t&&(e.preventDefault(),$(this).hasClass("active")?($(this).removeClass("active"),$(".subnav-open").removeClass("subnav-open").css("max-height",0),1024<=Site.ww&&Site.$header.removeClass("mainnav-open")):($(".subnav-open").length&&($(".main-nav-outer .active").removeClass("active"),$(".subnav-open").removeClass("subnav-open").css("max-height",0)),$(this).addClass("active"),Site.$header.addClass("mainnav-open"),$("#"+t+"Subnav").addClass("subnav-open").css({"max-height":window.innerHeight-(Site.$header.outerHeight()+$(".main-nav").outerHeight())}),$(".main-nav-outer").addClass("subnav-open")))})}),$(".no-touch").on("click",function(e){!Site.$header.hasClass("mainnav-open")||!(e=$(e.target))||e.closest(".subnav-open").length||e.hasClass("subnav-open")||e.closest(".mainnav-open").length||e.hasClass("mainnav-open")||!Site.$header.hasClass("mainnav-open")||($(".main-nav .active").removeClass("active"),Site.$header.removeClass("mainnav-open"),$(".subnav-open").removeClass("subnav-open").css("max-height",0))}),$(".main-subnav--resource li").each(function(){var e=$(this).find(".text-outer").text().split(" "),t="";e[1]&&(e[1]=e[1]+"<br/>");for(var i=0;i<e.length;i++)t+=e[i]+" ";$(this).find(".text-outer").html(t)})},toggleNav:function(){Site.$navToggle.on("click",function(e){e.preventDefault(),Site.$header.toggleClass("mainnav-open"),Site.$header.hasClass("mainnav-open")||($(".subnav-open").removeClass("subnav-open").css("max-height",0),$(".search-open").removeClass("search-open"),$(".main-nav-outer .active").removeClass("active"))})},touchDetection:function(){"ontouchstart"in document.documentElement&&(Site.$body.removeClass("no-touch").addClass("touch"),Site.hasTouch=!0)},squaresInit:function(){var e=$(".rotated-square-cta");function t(){e.each(function(){$(this).height($(this).width())})}$(window).on("resize",function(){t()}),t()},donateModal:{init:function(){$(".donate-cta-outer").each(function(){var i=$(this),n=i.find(".donate-cta");if(Site.checkCookie("vera_donate_"+n.attr("data-cta-id")))return a(),!0;var o=n.attr("data-states").split(",").filter(function(e){return""!==e});function a(){$(this).remove()}function s(){function e(){i.fadeOut(function(){i.remove()}),Site.donateModal.setDonateCookie(t)}var t="vera_donate_"+i.find(".donate-cta").attr("data-cta-id");i.find(".popup-close").on("click",e),i.on("click",e),i.find(".donate-cta").on("click",function(e){e.stopPropagation()}),i.find(".donate-cta-button").on("click",function(){Site.donateModal.setDonateCookie(t,"never"),"undefined"!=typeof ga&&ga("send","event","Donate Popup","Click",n.attr("data-cta-title"))}),i.css({display:"flex"}).fadeIn()}o&&o.length?$.getJSON("/dist/map/states.json",null,function(i){VERA.getIpLocation().then(function(t){var e=i.find(function(e){return e.abbrev===t.state}).fips;(o.includes(e)?s:a)()})}):s()})},setDonateCookie:function(e,t){null==t?t=1:"never"==t&&(t=1e4);var i=new Date;i.setTime(i.getTime()+864e5*t),document.cookie=e+"=true; path=/; expires="+i.toGMTString()+";"}}};Site.slideout=function(){Site.slider=Site.slider||new Slider({afterLoad:function(){$(".Slider--inner").find(".slideout_close").on("click",function(){Site.slider.close()}),initFootnotes($(".Slider--inner")),initVideos()},afterClose:function(){var e=$(".Slider--inner").find(".slideout_close");e.hide(),setTimeout(function(){e.show()},100)}}),$(".slideoutcta:not(.slideoutcta-initialized)").each(function(){var i=$(this);i.addClass("slideoutcta-initialized"),i.find(".cta_wrap").on("click",function(){var e,t;e=i.attr("data-url"),t=i.attr("data-class"),Site.slider.open(e,t)})})},Site.checkCookie=function(e){var t=document.cookie,e=e+"=",i=t.indexOf("; "+e);if(-1==i){if(0!=(i=t.indexOf(e)))return null}else{i+=2;var n=document.cookie.indexOf(";",i);-1==n&&(n=t.length)}return unescape(t.substring(i+e.length,n))},Site.initTableNotes=function(){$(".table__notes__toggle:not(.table-notes-initialized)").each(function(){var e=$(this),t=e.siblings(".table__notes").first();e.on("click",function(){this.blur(),e.toggleClass("open"),t.slideToggle()}),e.addClass("table-notes-initialized")})},Site.afterAjaxPageLoad=function(){Site.initConditionals()},$(document).ready(function(){(window.VERA||{}).isMobile=screen.width<=1024,$("html").removeClass("no-js").addClass("js"),Site.init(),Site.initConditionals()}),$(window).on("resize",function(){Site.recalc()});