/**
 * @project        vera
 * @author         Dylan Viola, Hyperakt
 * @build          Mon, Feb 14, 2022 8:25 PM ET
 * @copyright      Copyright (c) 2022, 
 *
 */
"use strict";!function(){var b=window.VERA||{};b.sm=b.sm||new ScrollMagic.Controller,b.initBackgroundScroll=function(t){e=$(".background-scroll-container").first(),m=e.find(".background-scroll-images"),e=e.find(".background-scroll-screen"),function(t){o.test(f.attr("class"))||(t.attr("data-color-combo"),w(t.closest("article.article").attr("data-article-theme")))}(t);t=t.find("[data-background-scroll]");h=new TimelineLite({paused:!0,ease:Linear.easeNone}).to(e[0],.5,{autoAlpha:.85},0),h.duration(),t.each(r)},window.VERA=b;var m,e,h,f=$("body"),o=/color-combo--(\S+)/g;function w(t){switch(t){case"black":return"black-white";case"gray":return"gray-black";default:return"white-black"}}function r(o,t){var e,r,a=$(t),c=(a.next(),a.closest(".scroll-section")),n=(g(),d(),w(a.closest("article.article").attr("data-article-theme")));a.closest(".bg-container").addClass("bg-color color-combo--"+this.getAttribute("data-color-combo")),a.hasClass("background-scroll-trigger-image")?Modernizr.objectfit?(t=this.getAttribute("data-src"),e=this.getAttribute("data-srcset"),(r=$("<img>")).attr("src",t).attr("srcset",e)):(e=this.getAttribute("data-bg-src"),(r=$("<div>")).addClass("bg-image").css({backgroundImage:"url("+e+")"})):r=$("<div>"),m.append(r);var i=TweenLite.to(r[0],.25,{autoAlpha:1,paused:!0,ease:Linear.easeNone}),s=new ScrollMagic.Scene({triggerElement:this,triggerHook:1,offset:1}).addTo(b.sm).on("enter",function(t){i.play(0);var e=a.attr("data-color-combo");"inherit"===e&&(e=n),f.removeClass(function(t,e){return(e.match(/(^|\s)(color-combo--)\S+/g)||[]).join(" ")}),f.addClass("color-combo--"+e),console.log(e,"imagescene "+o)}).on("leave",function(){a.attr("data-color-combo");i.pause(0)}),l=new ScrollMagic.Scene({triggerElement:this,triggerHook:1}).addTo(b.sm).on("start",function(t){"REVERSE"===t.scrollDirection?h.play():h.reverse()}).on("end",function(t){"REVERSE"===t.scrollDirection?h.reverse():h.play()});function d(){return Math.max(c.height(),0)}function g(){return a.height()}function u(){s.duration(d()),l.duration(g())}u(),window.addEventListener("resize",u)}}();