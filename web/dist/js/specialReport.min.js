/**
 * @project        vera
 * @author         Brand Industry JZG
 * @build          Wed, Aug 17, 2022 8:13 PM ET
 * @copyright      Copyright (c) 2022, 
 *
 */
"use strict";!function(g){var f=g.VERA||{},e=(g.VERA=f,$(function(){f.sm=f.sm||new ScrollMagic.Controller,f.article=new e}),function(){this.headers=$(".featured-banner.editorial:not(.show-on-print)"),this.headers.length&&this.headers.each(function(){var t,e=!!$(this).filter(".editorialIntroduction").length,i=this,a=e;a=a||!1;var r,o=$(i),n=o.find(".line"),l=o.find(".title"),s=o.find(".subtitle"),h=o.find(".overview"),c=o.find(".screen"),e={opacity:1,webkitFilter:"blur(0px)",filter:"blur(0px)",x:0},e=new TimelineMax({paused:a}).to(l,1,e).to(s,1,e,0);function d(){var e;n.css({height:""}),a&&(e=(new TimelineMax).to(l,1,{opacity:0,webkitFilter:"blur(5px)",filter:"blur(5px)",delay:1}).to(s,1,{opacity:0,webkitFilter:"blur(5px)",filter:"blur(5px)",delay:1},0).to(n,.5,{height:0}).to(n,.2,{opacity:0,delay:.3}).to(c,.25,{opacity:.5}).to(h,.25,{opacity:1,delay:.5})),t=new ScrollMagic.Scene({triggerElement:i,offset:-$(".header").height(),triggerHook:0,duration:"100%"}).setPin(i).setTween(e).addTo(f.sm),o.find("video").each(function(){this.play()})}a?0<$(g).scrollTop()?e.time(1):e.play():t=new ScrollMagic.Scene({triggerElement:i,triggerHook:.5}).setTween(e).addTo(f.sm),a&&(d(),g.addEventListener("resize",function(){r&&clearTimeout(r),r=setTimeout(function(){t.destroy(!0),d()},100)})),o.find("video").on("canplaythrough",function(){this.play()})});var e,a=$(".dropdown"),t=$(".dropdown-outer"),r=t.find(".dropdown-active"),h=$(".header__menu-radial"),i=$(".header-tiles");function o(e){h.find(".current-chapter").html(e=e<1?1:e)}function c(e,t){e=$(e).height();return Math.floor(100*(t/e))}function n(e,t){t=t||!1,a&&(a.find(".anchor-link.active").removeClass("active"),e.addClass("active"),r.text(e.data("chapter")));var i,e=e.attr("href");void 0!==e&&(i=e.replace("#",""));try{history.pushState||(location.hash=e)}catch(e){console.log(e)}$(".campaignSlide").length&&$(".touch").length,!t||$(".campaignSlide").length&&!$(".touch").length||$("html,body").animate({scrollTop:$("#"+i).offset().top})}h.length&&$("article[data-anchor-link]").each(function(e,t){$(t).hasClass("active")&&($(t).hasClass("js-hide-radial-nav")?h.addClass("is-intro"):h.removeClass("is-intro"),o(e))}),g.location.hash&&(a.find(".anchor-link.active").removeClass("active"),(e=$('.anchor-link[href="'+g.location.hash+'"]')).addClass("active"),r.text(e.data("chapter"))),$(".article p img").length&&("left"===$(".article p img").css("float")&&$(".article p img").addClass("c-figure--left"),"right"===$(".article p img").css("float")&&$(".article p img").addClass("c-figure--right")),$(".anchor-link").on("click",function(e){e.preventDefault(),n($(this),!0),t.removeClass("open"),i.removeClass("mainnav-open")}),$(".share-overlay .icon-print").on("click",function(e){e.preventDefault(),g.print()}),$(".campaignSlide").length&&!$(".touch").length||($(".anchor--chapter").each(function(){var e=$(this),t=$('.anchor-link[href="#'+e.attr("id")+'"]'),i=$('.anchor-link[href="#'+e.prevAll(".anchor--chapter").first().attr("id")+'"]');new ScrollMagic.Scene({triggerElement:this,triggerHook:.5}).on("enter",function(){n(t)}).on("leave",function(){n(i)}).addTo(f.sm)}),g.addEventListener("scroll",_.throttle(function(){var n,l,s,e,t;h.length&&(n=$("article[data-anchor-link]"),e=n.filter(".js-hide-radial-nav"),l=n.first(),s=1,e=e.length?g.pageYOffset-e.outerHeight()+$("header").outerHeight()+$("footer").outerHeight():g.pageYOffset+$("header").outerHeight()+$("footer").outerHeight(),h.removeClass("is-intro"),n.each(function(e,t){var i=$(t).offset().top,a=i+$(t).outerHeight(),r=$(g).scrollTop(),o=r+$(g).height();r<a&&i<o&&(s=n.hasClass("js-hide-radial-nav")?e:e+1,l=t,$(l).hasClass("js-hide-radial-nav")?h.addClass("is-intro"):h.removeClass("is-intro"))}),t=n.not(".js-hide-radial-nav"),2===s?e-=$(t[0]).outerHeight():3===s?e=e-$(t[0]).outerHeight()-$(t[1]).outerHeight():4===s?e=e-$(t[0]).outerHeight()-$(t[1]).outerHeight()-$(t[2]).outerHeight():5===s&&(e=e-$(t[0]).outerHeight()-$(t[1]).outerHeight()-$(t[2]).outerHeight()-$(t[3]).outerHeight()),g.innerWidth<700&&("introduction"==$(l).prev().attr("id")?h.addClass("is-intro"):h.removeClass("is-intro"),n.hasClass("special-reports-chapter")&&--s),o(s),t=$(".circle"),0<c(l,e)&&t.attr("stroke-dasharray",c(l,e)+", 100"))},500)))})}(window);